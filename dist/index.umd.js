(function(de,B){typeof exports=="object"&&typeof module!="undefined"?B(exports,require("three"),require("@realsee/five/line"),require("@realsee/five"),require("@realsee/five/gltf-loader")):typeof define=="function"&&define.amd?define(["exports","three","@realsee/five/line","@realsee/five","@realsee/five/gltf-loader"],B):(de=typeof globalThis!="undefined"?globalThis:de||self,B(de.dnalogel={},de.THREE,de.FiveSDK_Line,de.FiveSDK,de.FiveSDK_GLTFLoader))})(this,function(de,B,nt,Ye,Ro){"use strict";var RE=Object.defineProperty,FE=Object.defineProperties;var NE=Object.getOwnPropertyDescriptors;var Cl=Object.getOwnPropertySymbols;var Qv=Object.prototype.hasOwnProperty,Xv=Object.prototype.propertyIsEnumerable;var Il=Math.pow,gd=(de,B,nt)=>B in de?RE(de,B,{enumerable:!0,configurable:!0,writable:!0,value:nt}):de[B]=nt,F=(de,B)=>{for(var nt in B||(B={}))Qv.call(B,nt)&&gd(de,nt,B[nt]);if(Cl)for(var nt of Cl(B))Xv.call(B,nt)&&gd(de,nt,B[nt]);return de},fe=(de,B)=>FE(de,NE(B));var rs=(de,B)=>{var nt={};for(var Ye in de)Qv.call(de,Ye)&&B.indexOf(Ye)<0&&(nt[Ye]=de[Ye]);if(de!=null&&Cl)for(var Ye of Cl(de))B.indexOf(Ye)<0&&Xv.call(de,Ye)&&(nt[Ye]=de[Ye]);return nt};var u=(de,B,nt)=>(gd(de,typeof B!="symbol"?B+"":B,nt),nt);var ee=(de,B,nt)=>new Promise((Ye,Ro)=>{var Ml=Ki=>{try{zr(nt.next(Ki))}catch(Rs){Ro(Rs)}},P=Ki=>{try{zr(nt.throw(Ki))}catch(Rs){Ro(Rs)}},zr=Ki=>Ki.done?Ye(Ki.value):Promise.resolve(Ki.value).then(Ml,P);zr((nt=nt.apply(de,B)).next())});function Ml(n){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const e in n)if(e!=="default"){const i=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(t,e,i.get?i:{enumerable:!0,get:()=>n[e]})}}return t.default=n,Object.freeze(t)}const P=Ml(B);function zr(){console.debug("%c %c@realsee/dnalogel %cv3.66.2",["background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAMAAACHgmeRAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABLFBMVEUAAAAapPoap/oaqvkbrfkbr/gZnfwZoPsaqfnD4v/E4/8Ylv0clPm93/+/4P/B4f8Yj/683/8Wif+33P8Uhv+x2f8ShP+s1v8Pgf+n0/8Nf/+h0f8Lff8Lff8Nf/9dl/+czv8KfP8KfP+Lxf+Uyv+Xy/+Hwv+Jw/+Mxf+Oxv+RyP8aovsapfoap/oZmfwZm/wZnvsYnPsYkf4YlP0NePsDYfgYcfi43f+63v8Xiv8Xjf4EWfwCV/sWZ/qz2v+02/8Vh/8WiP8EUf8CTf4WXv2u1/+v2P8Thf8Thv8ETf8CR/8VV/+o1f+q1f8Qgv8Rg/8DSv8BRf8UVP+j0v+k0v8OgP8Pgf8DR/8DQv9Nhf+dzv+fz/+Kv/+Vyv+Xy/+azf+Oxv+Qx/+SyP////8MUhLdAAAAK3RSTlMACEWQ2bd98uQECPXxqO7c+Pb49vj2+Pb49vj23Oul8fMHA+TwerXXjEIG2P+bHgAAAAFiS0dEY1y+LaoAAAB+SURBVAjXY2BgZGJmYWVgYGBgY9fW0eVg4ORi4NbTNzDk4eXjZxAwMjYxNTO3EGQQsrSytrG1sxdmEHFwdHJ2cXUTZRBz9/D08vbxFWeQ8PMPCAwKDpFkkAoNC4+IjIqWZpCRlZOPiY2LV2BQVGJQTkhMUlEFWaOmrqGpxQAAyg0S9Dq+VPYAAAAASUVORK5CYII=')","background-repeat: no-repeat","background-position: 0 center","padding-left: 8px"].join(";"),"","background-color: #12ce9b;color:black;padding:0 6px;border-radius: 3px")}function Ki(){const n=typeof OffscreenCanvas!="undefined",t=n&&new OffscreenCanvas(1,1).getContext("webgl")!==null;n&&!t&&Object.assign(window,{OffscreenCanvas:function(e,i){const s=document.createElement("canvas");return s.width=e,s.height=i,s}})}function Rs(){}const vd=()=>Promise.resolve(),Ad={__queue:Promise.resolve()};function Jv(n=vd){Ad.__queue=Ad.__queue.then(n).catch(vd)}function Fo(n,t,e){const i=n.x,s=n.y,r=Math.floor(i/t*1e4)/1e4,o=Math.floor(s/e*1e4)/1e4;return{x:r,y:o}}function kl(n,t,e){const{x:i,y:s}=n,r=i*t,o=s*e;return{x:r,y:o}}function No(n){if(n.length<2)return{};const t=n.slice(-2),e=t[0],i={x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2};return{control:e,end:i}}function qv(n,t,e=Rs){new Promise(i=>{setTimeout(()=>{e(),i(!0)},t*n)})}const Kv=window,bd=window.requestAnimationFrame||Kv.webkitRequestAnimationFrame||(n=>setTimeout(n,16));function Go(n,t=0){t<=0?bd(n):bd(()=>Go(n,t-1))}var Mi=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var t=1.70158;return n===1?1:n*n*((t+1)*n-t)},Out:function(n){var t=1.70158;return n===0?0:--n*n*((t+1)*n+t)+1},InOut:function(n){var t=2.5949095;return(n*=2)<1?.5*(n*n*((t+1)*n-t)):.5*((n-=2)*n*((t+1)*n+t)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Mi.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Mi.Bounce.In(n*2)*.5:Mi.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(t){return Math.pow(t,n)},Out:function(t){return 1-Math.pow(1-t,n)},InOut:function(t){return t<.5?Math.pow(t*2,n)/2:(1-Math.pow(2-t*2,n))/2+.5}}}}),Fs=function(){return performance.now()},yd=function(){function n(){this._tweens={},this._tweensAddedDuringUpdate={}}return n.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map(function(e){return t._tweens[e]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},n.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},n.prototype.update=function(t,e){t===void 0&&(t=Fs()),e===void 0&&(e=!1);var i=Object.keys(this._tweens);if(i.length===0)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var r=this._tweens[i[s]],o=!e;r&&r.update(t,o)===!1&&!e&&delete this._tweens[i[s]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},n}(),os={Linear:function(n,t){var e=n.length-1,i=e*t,s=Math.floor(i),r=os.Utils.Linear;return t<0?r(n[0],n[1],i):t>1?r(n[e],n[e-1],e-i):r(n[s],n[s+1>e?e:s+1],i-s)},Bezier:function(n,t){for(var e=0,i=n.length-1,s=Math.pow,r=os.Utils.Bernstein,o=0;o<=i;o++)e+=s(1-t,i-o)*s(t,o)*n[o]*r(i,o);return e},CatmullRom:function(n,t){var e=n.length-1,i=e*t,s=Math.floor(i),r=os.Utils.CatmullRom;return n[0]===n[e]?(t<0&&(s=Math.floor(i=e*(1+t))),r(n[(s-1+e)%e],n[s],n[(s+1)%e],n[(s+2)%e],i-s)):t<0?n[0]-(r(n[0],n[0],n[1],n[1],-i)-n[0]):t>1?n[e]-(r(n[e],n[e],n[e-1],n[e-1],i-e)-n[e]):r(n[s?s-1:0],n[s],n[e<s+1?e:s+1],n[e<s+2?e:s+2],i-s)},Utils:{Linear:function(n,t,e){return(t-n)*e+n},Bernstein:function(n,t){var e=os.Utils.Factorial;return e(n)/e(t)/e(n-t)},Factorial:function(){var n=[1];return function(t){var e=1;if(n[t])return n[t];for(var i=t;i>1;i--)e*=i;return n[t]=e,e}}(),CatmullRom:function(n,t,e,i,s){var r=(e-n)*.5,o=(i-t)*.5,a=s*s,l=s*a;return(2*t-2*e+r+o)*l+(-3*t+3*e-2*r-o)*a+r*s+t}}},El=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),xl=new yd,Ho=function(){function n(t,e){e===void 0&&(e=xl),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Mi.Linear.None,this._interpolationFunction=os.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=El.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(t,e){if(e===void 0&&(e=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=e<0?0:e,this},n.prototype.duration=function(t){return t===void 0&&(t=1e3),this._duration=t<0?0:t,this},n.prototype.dynamic=function(t){return t===void 0&&(t=!1),this._isDynamic=t,this},n.prototype.start=function(t,e){if(t===void 0&&(t=Fs()),e===void 0&&(e=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||e){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var r in this._valuesEnd)s[r]=this._valuesEnd[r];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,e)}return this},n.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},n.prototype._setupProperties=function(t,e,i,s,r){for(var o in i){var a=t[o],l=Array.isArray(a),c=l?"array":typeof a,h=!l&&Array.isArray(i[o]);if(!(c==="undefined"||c==="function")){if(h){var d=i[o];if(d.length===0)continue;for(var f=[a],g=0,p=d.length;g<p;g+=1){var m=this._handleRelativeValue(a,d[g]);if(isNaN(m)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(m)}h&&(i[o]=f)}if((c==="object"||l)&&a&&!h){e[o]=l?[]:{};var v=a;for(var b in v)e[o][b]=v[b];s[o]=l?[]:{};var d=i[o];if(!this._isDynamic){var w={};for(var b in d)w[b]=d[b];i[o]=d=w}this._setupProperties(v,e[o],d,s[o],r)}else(typeof e[o]=="undefined"||r)&&(e[o]=a),l||(e[o]*=1),h?s[o]=i[o].slice().reverse():s[o]=e[o]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},n.prototype.pause=function(t){return t===void 0&&(t=Fs()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this),this)},n.prototype.resume=function(t){return t===void 0&&(t=Fs()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},n.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},n.prototype.group=function(t){return t===void 0&&(t=xl),this._group=t,this},n.prototype.delay=function(t){return t===void 0&&(t=0),this._delayTime=t,this},n.prototype.repeat=function(t){return t===void 0&&(t=0),this._initialRepeat=t,this._repeat=t,this},n.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},n.prototype.yoyo=function(t){return t===void 0&&(t=!1),this._yoyo=t,this},n.prototype.easing=function(t){return t===void 0&&(t=Mi.Linear.None),this._easingFunction=t,this},n.prototype.interpolation=function(t){return t===void 0&&(t=os.Linear),this._interpolationFunction=t,this},n.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},n.prototype.onStart=function(t){return this._onStartCallback=t,this},n.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},n.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},n.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},n.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},n.prototype.onStop=function(t){return this._onStopCallback=t,this},n.prototype.update=function(t,e){var i=this,s;if(t===void 0&&(t=Fs()),e===void 0&&(e=!0),this._isPaused)return!0;var r,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>o)return!1;e&&this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=t-this._startTime,l=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),c=this._duration+this._repeat*l,h=function(){if(i._duration===0||a>c)return 1;var v=Math.trunc(a/l),b=a-v*l,w=Math.min(b/i._duration,1);return w===0&&a===i._duration?1:w},d=h(),f=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||a>=this._duration)if(this._repeat>0){var g=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=g);for(r in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[r]=="string"&&(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*g,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,m=this._chainedTweens.length;p<m;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(t,e,i,s){for(var r in i)if(e[r]!==void 0){var o=e[r]||0,a=i[r],l=Array.isArray(t[r]),c=Array.isArray(a),h=!l&&c;h?t[r]=this._interpolationFunction(a,s):typeof a=="object"&&a?this._updateProperties(t[r],o,a,s):(a=this._handleRelativeValue(o,a),typeof a=="number"&&(t[r]=o+(a-o)*s))}},n.prototype._handleRelativeValue=function(t,e){return typeof e!="string"?e:e.charAt(0)==="+"||e.charAt(0)==="-"?t+parseFloat(e):parseFloat(e)},n.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],i=this._valuesEnd[t];typeof i=="string"?this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(i):this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=e},n}(),$v="23.1.3",e1=El.nextId,_i=xl,t1=_i.getAll.bind(_i),i1=_i.removeAll.bind(_i),n1=_i.add.bind(_i),wd=_i.remove.bind(_i),s1=_i.update.bind(_i),Pd={Easing:Mi,Group:yd,Interpolation:os,now:Fs,Sequence:El,nextId:e1,Tween:Ho,VERSION:$v,getAll:t1,removeAll:i1,add:n1,remove:wd,update:s1};function r1(n,t,e,i=Mi.Linear.None){const s=new Ho(n).to(t,e).easing(i).start();function r(o){s.update(o)&&requestAnimationFrame(r)}return requestAnimationFrame(r),s}var $i=(n=>(n.Drawline="Drawline",n.Undo="Undo",n.Exit="Exit",n))($i||{});const Or=Symbol("$$PAINT_BRUSH_EVENT$$");function Wo(n){return n[Or]||(n[Or]={}),n[Or]}function o1(n){n[Or]||delete n[Or]}let a1=class{hasListener(t){const e=Wo(this);return e&&e[t]&&e[t].length>0}on(t,e,i){const s=Wo(this);return s[t]||(s[t]=[]),s[t].push([e,i||!1]),()=>this.off(t,e)}once(t,e){return this.on(t,e,!0)}off(t,e){if(t===void 0){o1(this);return}const i=Wo(this);if(i[t]||(i[t]=[]),e===void 0){i[t].length=0;return}let s=0;for(;s<i[t].length&&i[t][s][0]!==e;s++);s<i[t].length&&i[t].splice(s,1)}emit(t,...e){let i=!1;const r=Wo(this)[t]||[];for(let o of r.slice()){const[a,l=!1]=o,c=a(...e);l&&this.off(t,a),c===!1&&(i=!0)}return i}};function Pn(){return((1+Math.random())*65536|0).toString(16).substring(1)}function Et(){return(Pn()+Pn()+"-"+Pn()+"-4"+Pn().substr(0,3)+"-"+Pn()+"-"+Pn()+Pn()+Pn()).toLowerCase()}const l1=`
<style type="text/css">

#_gl_paintBrush {
position: fixed;
top: 0;
bottom: 0;
left: 0;
right: 0;
transform: translateZ(0);
z-index: 1997;
pointer-events: none;
opacity: 0;
transition: all 500ms;
}

#_gl_paintBrush.brushing {
  opacity: 1;
}

#_gl_paintBrush ._paintBrush-canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

#_gl_paintBrush ._paintBrush-canvas--sync {
  pointer-events: none;
  z-index: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

#_gl_paintBrush ._paintBrush-canvas {
  pointer-events: none;
  z-index: 1;
}

#_gl_paintBrush.brushing ._paintBrush-canvas {
  pointer-events: auto;
}

#_gl_paintBrush ._paintBrush-ctrl {
  width: 140px;
  height: 52px;
  position: absolute;
  bottom: 28px;
  right: 50%;
  transform: translateX(50%);
  font-size: 10px;
  color: white;
  z-index: 2;
}

#_gl_paintBrush.brushing ._paintBrush-ctrl {
  pointer-events: auto;
}

#_gl_paintBrush ._paintBrush-ctrl ._paintBrush-ctrlinner {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  height: 100%;
  border-radius: 26px;
  padding: 8px 16px;
  box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.2);
  background-image: linear-gradient(180deg, hsl(0deg 0% 0% / 57%), hsl(0deg 0% 0% / 70%) 117%);
}

._paintBrush-ctrlitem {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 38px;
  height: 38px;
  cursor: pointer;
}

._paintBrush-ctrlitem--undo >.brush-icon{
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjUwJSIgeTE9IjQ1LjY3NTI0OCUiIHgyPSItMTYuOTYxMDIzJSIgeTI9Ijg0LjIzODQxOTglIiBpZD0ibGluZWFyR3JhZGllbnQtMSI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iMCUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgc3RvcC1vcGFjaXR5PSIwLjMwMzY3Njc5MiIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNDAuMDAwMDAwLCAtNzQwLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDAuMDAwMDAwLCA3NDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjRDhEOEQ4IiBvcGFjaXR5PSIwIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuMDAwMDAwLCAyLjk5MDY1OSkiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCwzLjc1ODc1NzA5IEw5Ljg0Mzc1LDMuNzU4NzU3MDkgQzEyLjY5MTQ2ODIsMy43NTg3NTcwOSAxNSw2LjA2NzI4ODg1IDE1LDguOTE1MDA3MDkgQzE1LDExLjc2MjcyNTMgMTIuNjkxNDY4MiwxNC4wNzEyNTcxIDkuODQzNzUsMTQuMDcxMjU3MSBMMSwxNC4wNzEyNTcxIiBzdHJva2U9InVybCgjbGluZWFyR3JhZGllbnQtMSkiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBwb2ludHM9IjMuNzkwMjI3MDcgNy41Mzk2NjA2NCAwIDMuNzU4NzU3MDkgMy43OTAyMjcwNyAwIj48L3BvbHlsaW5lPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);
    background-size: 100%;
    width: 22px;
    height: 22px;
}

._paintBrush-ctrlitem--close >.brush-icon {
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjUwLjAyMDY5MyUiIHkxPSItMTMuNzMzMzc1MSUiIHgyPSI1MCUiIHkyPSIxMTQuMTEwOTk0JSIgaWQ9ImxpbmVhckdyYWRpZW50LTEiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZGRkZGIiBvZmZzZXQ9IjAlIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIHN0b3Atb3BhY2l0eT0iMC42MDEwNDM0ODgiIG9mZnNldD0iNDkuMzA4NDg4MiUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjUwJSIgeTE9IjAlIiB4Mj0iNTAlIiB5Mj0iMTAwJSIgaWQ9ImxpbmVhckdyYWRpZW50LTIiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZGRkZGIiBvZmZzZXQ9IjAlIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iNTUuOTY4MTUzNSUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnPgogICAgICAgICAgICA8cmVjdCBmaWxsPSIjRDhEOEQ4IiBvcGFjaXR5PSIwIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiPjwvcmVjdD4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC4wMDAwMDAsIDUuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgIDxnPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LC0yLjk4ODE2NTY4IEM3LjUxMjgzNTg0LC0yLjk4ODE2NTY4IDcuOTM1NTA3MTYsLTIuNjAyMTI1NDkgNy45OTMyNzIyNywtMi4xMDQ3ODY4MSBMOCwtMS45ODgxNjU2OCBMOCwxMy45OTgxMTQ2IEM4LDE0LjU1MDM5OTMgNy41NTIyODQ3NSwxNC45OTgxMTQ2IDcsMTQuOTk4MTE0NiBDNi40ODcxNjQxNiwxNC45OTgxMTQ2IDYuMDY0NDkyODQsMTQuNjEyMDc0NCA2LjAwNjcyNzczLDE0LjExNDczNTcgTDYsMTMuOTk4MTE0NiBMNiwtMS45ODgxNjU2OCBDNiwtMi41NDA0NTA0MyA2LjQ0NzcxNTI1LC0yLjk4ODE2NTY4IDcsLTIuOTg4MTY1NjggWiIgZmlsbD0idXJsKCNsaW5lYXJHcmFkaWVudC0xKSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNy4wMDAwMDAsIDYuMDA0OTc0KSByb3RhdGUoLTQ1LjAwMDAwMCkgdHJhbnNsYXRlKC03LjAwMDAwMCwgLTYuMDA0OTc0KSAiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNywtMi45ODgxNjU2OCBDNy41MTI4MzU4NCwtMi45ODgxNjU2OCA3LjkzNTUwNzE2LC0yLjYwMjEyNTQ5IDcuOTkzMjcyMjcsLTIuMTA0Nzg2ODEgTDgsLTEuOTg4MTY1NjggTDgsMTMuOTk4MTE0NiBDOCwxNC41NTAzOTkzIDcuNTUyMjg0NzUsMTQuOTk4MTE0NiA3LDE0Ljk5ODExNDYgQzYuNDg3MTY0MTYsMTQuOTk4MTE0NiA2LjA2NDQ5Mjg0LDE0LjYxMjA3NDQgNi4wMDY3Mjc3MywxNC4xMTQ3MzU3IEw2LDEzLjk5ODExNDYgTDYsLTEuOTg4MTY1NjggQzYsLTIuNTQwNDUwNDMgNi40NDc3MTUyNSwtMi45ODgxNjU2OCA3LC0yLjk4ODE2NTY4IFoiIGZpbGw9InVybCgjbGluZWFyR3JhZGllbnQtMikiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDcuMDAwMDAwLCA2LjAwNDk3NCkgcm90YXRlKC0xMzUuMDAwMDAwKSB0cmFuc2xhdGUoLTcuMDAwMDAwLCAtNi4wMDQ5NzQpICI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);
    background-size: 100%;
    width: 22px;
    height: 22px;
}

</style>
`;let c1=class extends a1{constructor(e){super();u(this,"configs");u(this,"clientWidth");u(this,"clientHeight");u(this,"ready",!1);u(this,"uuid",Et());u(this,"tween");u(this,"tweening",!1);u(this,"container");u(this,"canvas");u(this,"data",{});u(this,"tempLine",{});this.configs=e,this.clientWidth=document.body.clientWidth,this.clientHeight=document.body.clientHeight,this.container=this.ifInsertToDOM(),this.canvas={},this.initCtrl()}get color(){return this.configs.currentColor}get state(){return this.data}get dpr(){return this.configs.DPR||1}ifInsertToDOM(){if(this.container)return this.container;if(this.configs.container)this.configs.container.id="_gl_paintBrush",this.container=this.configs.container;else if(document.getElementById("_gl_paintBrush"))this.container=document.getElementById("_gl_paintBrush");else{const e=document.createElement("div");e.id="_gl_paintBrush",document.body.appendChild(e),this.container=e}return this.container.innerHTML=l1,this.container}initCanvas(e){const i=document.createElement("canvas");i.className=e,i.width=this.clientWidth,i.height=this.clientHeight;const s=i.getContext("2d");if(s)return s.lineWidth=5*this.dpr,s.lineCap="round",s.lineJoin="round",this.container.appendChild(i),i}initCtrl(){const e=document.createElement("div");e.className="_paintBrush-ctrl";const i=document.createElement("div");i.className="_paintBrush-ctrlinner";const s=document.createElement("a");s.className="_paintBrush-ctrlitem _paintBrush-ctrlitem--undo",s.addEventListener("click",a=>{var f;if(a.stopPropagation(),this.configs.onClickUndo&&this.configs.onClickUndo(),!this.canvas[this.uuid]||!this.data[this.uuid]||this.data[this.uuid].length===0)return;const l=this.data[this.uuid].pop();l&&this.emitStateChange({type:$i.Undo,color:this.color,ready:this.ready,state:l,uuid:this.uuid});const c=(f=this.canvas[this.uuid])==null?void 0:f.getContext("2d");if(!this.canvas[this.uuid])return;const{width:h,height:d}=this.canvas[this.uuid];c&&c.clearRect(0,0,h,d),this.data[this.uuid].forEach(g=>this.handleDrawLine(this.uuid,g,{withUndo:!0}))});const r=document.createElement("a");return r.className="_paintBrush-ctrlitem _paintBrush-ctrlitem--close",r.addEventListener("click",a=>{a.stopPropagation(),this.closeBrush(),this.configs.onClickClose&&this.configs.onClickClose()}),[s,r].forEach(a=>{const l=document.createElement("i");l.className="brush-icon";const c=document.createElement("span");c.className="brush-txt",c.innerText=a.className.endsWith("undo")?this.configs.onUndoText:this.configs.onExitText,a.appendChild(l),a.appendChild(c)}),i.appendChild(s),i.appendChild(r),e.appendChild(i),this.container.appendChild(e),e}openBrush(){if(this.ready)return;this.canvas[this.uuid]||(this.canvas[this.uuid]=this.initCanvas("_paintBrush-canvas")),this.container.className="brushing";const e=this.canvas[this.uuid];e.getContext("2d").clearRect(0,0,e.width,e.height),this.openBrushHandle(),this.ready=!0,this.emit("readyChange",!0)}closeBrush(){this.ready&&(this.container.className="",this.data={},this.tempLine={},Object.keys(this.canvas).forEach(e=>{this.canvas[e].ontouchstart=()=>!1,this.canvas[e].ontouchmove=()=>!1,this.canvas[e].ontouchend=()=>!1,this.canvas[e].ontouchcancel=()=>!1;const i=this.canvas[e].getContext("2d");i&&i.clearRect(0,0,this.canvas[e].width,this.canvas[e].height)}),this.ready=!1,this.emit("readyChange",!1),this.emitStateChange({type:$i.Exit,color:this.color,ready:!1,uuid:this.uuid}))}updateCurrentColor(e){const i=this.canvas[this.uuid];if(!i)return;const s=i.getContext("2d");s&&(this.configs.currentColor=e,s.strokeStyle=e)}openBrushHandle(){const e=this.canvas[this.uuid];if(!e)return;const i=e.getContext("2d");if(!i)return;const s=this.color||"#6D92FF";i.strokeStyle=s;let r=null,o=[],a,l=[],c=0;const h=(d,f,g)=>{const p=this.color||"#ff0000";i.strokeStyle=p,i.beginPath(),i.moveTo(d.x,d.y),i.quadraticCurveTo(f.x,f.y,g.x,g.y),i.stroke()};e.onmousedown=d=>{d.preventDefault(),c=Date.now();const f=d.clientX,g=d.clientY;o=[],o.push({x:f,y:g}),r={x:f,y:g},a=Fo({x:f,y:g},this.clientWidth,this.clientHeight),l=[]},e.onmousemove=d=>{if(d.preventDefault(),!r)return;const f=Number(d.clientX),g=Number(d.clientY);if(Math.abs(f-r.x)<5&&Math.abs(g-r.y)<5||(o.push({x:f,y:g}),l.push(Fo({x:f,y:g},this.clientWidth,this.clientHeight)),o.length<3))return;const{control:p,end:m}=No(o);!p||!m||(h(r,p,m),r=m)},e.onmouseup=d=>{if(d.preventDefault(),r=null,o.length<3)return;this.data[this.uuid]||(this.data[this.uuid]=[]);const f=Date.now()-c,g={move:Object.assign({},a),uuid:this.uuid,line:[...l],color:this.color,duration:f<1280?f:f<2e3?1280:0};this.data[this.uuid].push(g),Go(()=>{this.emitStateChange({type:$i.Drawline,color:this.color,ready:this.ready,state:g,uuid:this.uuid})})},e.ontouchstart=d=>{d.preventDefault(),c=Date.now();const f=d.touches[0].clientX,g=d.touches[0].clientY;o=[],o.push({x:f,y:g}),r={x:f,y:g},a=Fo({x:f,y:g},this.clientWidth,this.clientHeight),l=[]},e.ontouchmove=d=>{if(d.preventDefault(),!r)return;const f=Number(d.touches[0].clientX),g=Number(d.touches[0].clientY);if(Math.abs(f-r.x)<5&&Math.abs(g-r.y)<5||(o.push({x:f,y:g}),l.push(Fo({x:f,y:g},this.clientWidth,this.clientHeight)),o.length<3))return;const{control:p,end:m}=No(o);!p||!m||(h(r,p,m),r=m)},e.ontouchend=e.ontouchcancel=d=>{if(d.preventDefault(),r=null,o.length<3)return;this.data[this.uuid]||(this.data[this.uuid]=[]);const f=Date.now()-c,g={move:Object.assign({},a),line:[...l],uuid:this.uuid,color:this.color,duration:f<1280?f:f<2e3?1280:0};this.data[this.uuid].push(g),Go(()=>{this.emitStateChange({type:$i.Drawline,color:this.color,ready:this.ready,state:g,uuid:this.uuid})})}}emitStateChange(e,i=!0){if(e.type!==$i.Drawline){this.emit("stateChange",e,i);return}const s=Date.now(),r=e.state;if(!r||!r.line)return;const o=Math.ceil(r.line.length/100);for(let a=0;a<o;a++){const l={uuid:this.uuid,color:this.color,ready:this.ready,type:e.type,state:{uuid:this.uuid,move:r.move,duration:r.duration,color:this.color,line:r.line.slice(a*100,(a+1)*100)},timestamp:s,end:a===o-1};qv(a,20,()=>{this.emit("stateChange",l,i)})}}action(e){const{ready:i,type:s,uuid:r}=e;if(!i&&this.ready){this.closeBrush();return}if(i&&!this.ready){this.openBrush();return}if(this.ready)switch(s){case $i.Drawline:const{state:o,timestamp:a,end:l}=e;if(!a||!o)return;this.tempLine[a]=[].concat(this.tempLine[a]||[],o.line),l&&(Object.assign(o,{line:this.tempLine[a]}),this.handleDrawLine(r,o,{},()=>delete this.tempLine[a]));break;case $i.Undo:this.handleUndo(r);break}}handleDrawLine(e,i,{withUndo:s=!1},r=Rs){!i||Object.prototype.toString.call(i)!="[object Object]"||Object.keys(i).length===0||Jv(()=>new Promise(o=>{if(s||(this.canvas[e]||(this.canvas[e]=this.initCanvas("_paintBrush-canvas--sync")),this.data[e]||(this.data[e]=[]),this.data[e].push(i)),!this.canvas[e])return;const a=this.canvas[e].getContext("2d");if(!a)return;const{line:l=[],color:c="black",duration:h=0,uuid:d}=i,f=kl(i.move||{},this.clientWidth,this.clientHeight);let g=[f];if(a.strokeStyle=c,a.beginPath(),a.moveTo(f.x,f.y),h&&!s){let p=[];const m=this;m.tween=r1({step:0},{step:l.length-1},h).onUpdate(({step:v})=>{var w;if(m.tweening=!0,!m.ready)return a.clearRect(0,0,m.canvas[d].width,m.canvas[d].height),(w=m.tween)==null?void 0:w.stop();const b=Math.floor(v);if(!p.find(x=>x===b)){if(p.push(b),g.push(kl(l[b],m.clientWidth,m.clientHeight)),g.length<3)return;const{control:x,end:E}=No(g);if(!x||!E)return;a.quadraticCurveTo(x.x,x.y,E.x,E.y),a.stroke()}}).onComplete(v=>{m.tween=void 0,m.tweening=!1,p=[],g=[],r&&r(),o()})}else{for(let p=0;p<l.length;p++){if(g.push(kl(l[p],this.clientWidth,this.clientHeight)),g.length<3)continue;const{control:m,end:v}=No(g);!m||!v||a.quadraticCurveTo(m.x,m.y,v.x,v.y)}a.stroke(),g=[],r&&r(),o()}}))}handleUndo(e){if(!this.canvas[e]||!this.data[e]||this.data[e].length===0)return;this.data[e].pop();const i=()=>{var r;const s=(r=this.canvas[e])==null?void 0:r.getContext("2d");s&&s.clearRect(0,0,this.canvas[e].width,this.canvas[e].height),this.data[e].forEach(o=>this.handleDrawLine(e,o,{withUndo:!0}))};if(this.tween&&this.tweening){this.tween.stop(),Go(i,60);return}i()}destroyBrush(){this.closeBrush(),this.ready=!1,this.emit("readyChange",!0)}};class h1{constructor(t={}){u(this,"controller");const e=Object.assign({currentColor:"#f44336",onUndoText:"回退",onExitText:"关闭"},t);this.controller=new c1(e)}on(t,e){this.controller.on(t,e)}off(t,e){this.controller.off(t,e)}once(t,e){this.controller.once(t,e)}show(){this.controller.openBrush()}action(t){this.controller.action(t)}get state(){return this.controller.state}get configs(){return this.controller.configs}dispose(){return this.controller.destroyBrush()}setCurrentColor(t){this.controller.updateCurrentColor(t)}}function d1(n){return typeof Symbol=="undefined"?`$Symbol<${n}>$`:Symbol(n)}const jr=d1("$$EVENT$$");function Uo(n){return n[jr]||(n[jr]={}),n[jr]}function u1(n){n[jr]&&delete n[jr]}class Pt{hasListener(t){const e=Uo(this);return!!(e!=null&&e[t]&&e[t].length>0)}on(t,e,i){const s=Uo(this);return s[t]||(s[t]=[]),s[t].push([e,i||!1]),()=>this.off(t,e)}once(t,e){return this.on(t,e,!0)}off(t,e){if(t===void 0){u1(this);return}const i=Uo(this);if(i[t]||(i[t]=[]),e===void 0){i[t].length=0;return}let s=0;for(;s<i[t].length&&i[t][s][0]!==e;s++);s<i[t].length&&i[t].splice(s,1)}emit(t,...e){let i=!1;const r=Uo(this)[t]||[];for(let o of r.slice()){const[a,l=!1]=o,c=a(...e);l&&this.off(t,a),c===!1&&(i=!0)}return i}}class Dl{constructor(t=0,e=0){u(this,"min");u(this,"max");u(this,"isInterval",!0);this.min=t,this.max=e}fromArray(t){return this.min=t[0],this.max=t[1],this}isOverlap(t){return Math.min(this.max,t.max)<Math.max(this.min,t.min)}contains(t){return this.min<t.min&&this.max>t.max}}let f1=class{constructor(t,e){u(this,"min");u(this,"max");u(this,"xInterval");u(this,"yInterval");u(this,"isRectangle",!0);this.min=t,this.max=e,this.xInterval=new Dl(this.min.x,this.max.x),this.yInterval=new Dl(this.min.y,this.max.y)}isOverlapWithRectangle(t){return!this.xInterval.isOverlap(t.xInterval)&&!this.yInterval.isOverlap(t.yInterval)}containsRect(t){return this.xInterval.contains(t.xInterval)&&this.yInterval.contains(t.yInterval)}};function p1(n){n.sort(function(i,s){return i.x!=s.x?i.x-s.x:i.y-s.y});const t=n.length,e=[];for(let i=0;i<2*t;i++){const s=i<t?i:2*t-1-i;for(;e.length>=2&&m1(e[e.length-2],e[e.length-1],n[s]);)e.pop();e.push(n[s])}return e.pop(),e}function m1(n,t,e){const i=(n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x),s=(n.x-t.x)*(e.x-t.x)+(n.y-t.y)*(e.y-t.y);return i<0||i==0&&s<=0}function Cd(n,t){const e=n[0],i=n[1];let s=!1;for(let r=0,o=t.length-1;r<t.length;o=r++){const a=t[r][0],l=t[r][1],c=t[o][0],h=t[o][1];l>i!=h>i&&e<(c-a)*(i-l)/(h-l)+a&&(s=!s)}return s}const g1=({x:n,y:t,z:e})=>new B.Vector3(n,t,e),Cn=n=>new B.Vector3().fromArray(n),Qe=n=>{if(n)return n instanceof B.Vector3?n:Array.isArray(n)?Cn(n):g1(n)};function v1(n){if(n)return Array.isArray(n)?typeof n[0]=="number"?Qe(n):n.map(Qe):Qe(n)}function Sl(n,t,e){const{x:i,y:s,z:r}=t.clone().project(n);return r>1?void 0:{leftPx:(i+1)/2*e.x,topPx:(-s+1)/2*e.y}}function gi(n){var e;return((e=n.models)==null?void 0:e.filter(i=>i.name===n.state.workCode)[0])||n.model}class Id extends Pt{constructor(e){super();u(this,"five");this.five=e}}const Ns=(n,t)=>{if(!t)return n;const e=new P.Vector3,i=new P.Quaternion,s=new P.Vector3;return t.decompose(e,i,s),n.clone().multiply(s).applyQuaternion(i).add(e)},Ll=new Map;class A1 extends Id{constructor(e){super(e);u(this,"_workCode")}get fromType(){var s,r;const e=this.workCode;if(Ll.has(e))return Ll.get(e);const i=(r=(s=JSON.parse(this.work.raw.works[0]))==null?void 0:s.from_type)!=null?r:"vr";return Ll.set(e,i),i}set workCode(e){this._workCode=e}get workCode(){var e;return(e=this._workCode)!=null?e:this.five.state.workCode}get work(){var e,i;return(i=(e=this.five.works)==null?void 0:e.find(s=>s.workCode===this.workCode))!=null?i:this.five.work}get observers(){var e;return(e=this.work)==null?void 0:e.observers}get transform(){var i,s,r,o;const e=(o=(i=this.work)==null?void 0:i.transform)!=null?o:(r=(s=this.work)==null?void 0:s.options)==null?void 0:r.transform;return e?e.clone():new P.Matrix4}getResolvedObserver(e){return this.five.works.getResolvedObserver({workCode:this.workCode,panoIndex:e})}getObserverPosition(e){var s;const i=(s=this.getObserver(e))==null?void 0:s.position;if(i)return Ns(i,this.transform)}getObserverStandingPosition(e){var s;const i=(s=this.getObserver(e))==null?void 0:s.standingPosition;if(i)return Ns(i,this.transform)}getObserver(e){var i;return(i=this.observers)==null?void 0:i[e]}}class Qo extends Id{constructor(e){super(e);u(this,"workUtil",new A1(this.five))}get version(){return this.five.constructor.version}get majorVersion(){return Number(this.version.split(".")[0])}get model(){return gi(this.five)}moveToPano(e,i){const s=this.majorVersion===5?e:{workCode:this.workUtil.workCode,panoIndex:e};return this.five.moveToPano(s,i)}}class Vr extends P.Raycaster{intersectObject(t,e=!0,i=[]){return Tl(t,this,i,e),i.sort(Md),i}intersectObjects(t,e=!0,i=[]){for(let s=0,r=t.length;s<r;s++)Tl(t[s],this,i,e);return i.sort(Md),i}}function Md(n,t){return n.distance-t.distance}function Tl(n,t,e,i){let s=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(s=!1),s===!0&&i===!0){const r=n.children;for(let o=0,a=r.length;o<a;o++)Tl(r[o],t,e,!0)}}function zl(n,t,e,i){let s=!0;if(n.type!=="Line2"&&(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(s=!1),s===!0&&i===!0)){const r=n.children;for(let o=0,a=r.length;o<a;o++)r[o].type!=="Line2"&&zl(r[o],t,e,!0)}}const en=new Vr;en.params.Points.threshold=.02;function Xo(n,t){if(!t||typeof ResizeObserver=="undefined"||!ResizeObserver)return{observe:()=>window.addEventListener("resize",n),unobserve:()=>window.removeEventListener("resize",n)};{const e=new ResizeObserver(n);return{observe:()=>e.observe(t),unobserve:()=>e.unobserve(t)}}}function Yo(n,t=200){let e;return function(...i){e||(n(...i),e=setTimeout(function(){e=null},t))}}function Ol(n,t){let e=!1;const i=Yo(()=>{e||(e=!0,n.ready().then(()=>{t(),e=!1}))},150);return n.on("camera.update",i),()=>{n.off("camera.update",i)}}const b1=new B.Vector2;class Br{constructor(t,e,i){u(this,"container");u(this,"visible",!1);u(this,"enabled",!1);u(this,"visibles",[]);u(this,"wrapper");u(this,"positionsForRotate");u(this,"intersectCheck",!0);u(this,"extraObjectsForIntersectCheck",[]);u(this,"simulate3D",!1);u(this,"tagWrapper");u(this,"five");u(this,"originPosition");u(this,"transformedPosition");u(this,"disposer");u(this,"config");u(this,"fiveUtil");u(this,"disposers",[]);u(this,"onModeChange",()=>{this.visibles[3]=void 0,this.updateVisible()});u(this,"onPanoArrived",()=>{this.visibles[3]=void 0,this.updateVisible()});u(this,"onCameraUpdate",()=>{this.visible!==!1&&this.updateScreenPosition()});u(this,"onCameraFovUpdate",()=>{this.onCameraUpdate(),this.five.off("render.prepare",this.onCameraUpdate),this.five.on("render.prepare",this.onCameraUpdate),setTimeout(()=>{this.five.off("render.prepare",this.onCameraUpdate)},1e3)});u(this,"onFiveEveryReady",()=>{this.five.state.mode!=="Panorama"&&this.updateVisible()});u(this,"updateVisible",()=>{this.visible&&(this.updateIntersectCheckVisible(),this.needsRender=!0)});u(this,"applyVisible",()=>{this.visibles[3]===!0||this.visibles.every(e=>e!==!1)?(this.container.style.opacity="1",this.container.style.pointerEvents="auto"):(this.container.style.opacity="0",this.container.style.pointerEvents="none")});u(this,"updateIntersectCheckVisible",()=>{var l,c;if(!this.position)return;if(!this.intersectCheck){this.visibles[1]=!0;return}let t=!1,e=.01;this.fiveUtil.workUtil.fromType==="poincare"&&(e=.05);const i=this.transformedPosition.clone().sub(this.five.camera.position).normalize();en.set(this.five.camera.position,i);const s=(l=gi(this.five).intersectRaycaster(en))!=null?l:[],r=(c=en.intersectObjects(this.extraObjectsForIntersectCheck,!0))!=null?c:[],a=[...s,...r].sort((h,d)=>h.distance-d.distance)[0];a?t=(a==null?void 0:a.distance)+e>this.transformedPosition.distanceTo(this.five.camera.position):t=!0,this.visibles[1]=t});var s,r,o;this.five=t,this.fiveUtil=(s=t.__fiveUtil__)!=null?s:t.__fiveUtil__=new Qo(t),this.originPosition=e?Qe(e).clone():void 0,this.transformedPosition=(r=this.originPosition)==null?void 0:r.clone(),this.positionsForRotate=(o=i==null?void 0:i.positionsForRotate)==null?void 0:o.map(a=>Qe(a).clone()),this.config=i!=null?i:{},this.container=(()=>{const a=document.createElement("div");return a.classList.add("light-tag"),a.style.width="0",a.style.height="0",a.style.position="absolute",i!=null&&i.disableOpacityTransition||(a.style.transition="opacity 0.2s linear"),a})(),this.addResizeListener(),this.show(),this.enable(),setTimeout(()=>{this.updateVisible(),this.needsRender=!0},0)}get position(){return this.transformedPosition}set needsRender(t){this.applyVisible()}show(t){this.visible=!0,this.visibles[0]=!0,t!=null&&t.force&&(this.visibles[3]=!0),this.container.style.opacity="1",this.container.style.pointerEvents="auto",this.updateVisible(),this.onCameraUpdate()}hide(){this.visible=!1,this.visibles[0]=!1,this.container.style.opacity="0",this.container.style.pointerEvents="none"}enable(){return ee(this,null,function*(){var i,s,r,o;if(this.enabled||(this.enabled=!0,yield ai(this.five),!this.enabled))return;if(this.wrapper=(s=this.config.wrapper)!=null?s:(i=this.five.getElement())==null?void 0:i.parentElement,!this.wrapper){console.error("lighttag: wrapper is required");return}const t=`light-tag-wrapper-${(o=(r=this.config)==null?void 0:r.namespace)!=null?o:"default"}`;if(!this.tagWrapper){let a=Array.from(this.wrapper.children).find(l=>l.id===t);if(!a){const l=document.createElement("div");a=l,l.id=t,l.style.position="absolute",l.style.overflow="hidden",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.height="100%",l.style.pointerEvents="none",l.style.zIndex="1",this.wrapper.appendChild(a)}this.tagWrapper=a}this.tagWrapper.appendChild(this.container),this.updateVisible();const e=Ol(this.five,this.onFiveEveryReady);this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("cameraFovUpdate",this.onCameraFovUpdate),this.five.on("panoArrived",this.onPanoArrived),this.five.on("modeChange",this.onModeChange),this.disposer=()=>{e(),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("cameraFovUpdate",this.onCameraFovUpdate),this.five.off("panoArrived",this.onPanoArrived),this.five.off("modeChange",this.onModeChange)}})}disable(){var t,e;this.enabled&&(this.enabled=!1,(t=this.tagWrapper)==null||t.removeChild(this.container),(e=this.disposer)==null||e.call(this))}destroy(){this.disable(),this.container.remove(),this.disposers.forEach(t=>t())}setPosition(t,e){this.transformedPosition=Qe(t).clone(),this.positionsForRotate=e==null?void 0:e.map(i=>Qe(i).clone()),this.onCameraUpdate(),setTimeout(()=>this.onCameraUpdate(),0)}setTransformMatrix(t){var e;this.transformedPosition=(e=this.originPosition)==null?void 0:e.clone().applyMatrix4(t),this.onCameraUpdate()}updateScreenPosition(){var r;if(!this.transformedPosition){this.container.style.left="-100%",this.container.style.top="-100%";return}const t=(r=this.five.renderer)==null?void 0:r.getSize(b1);if(!t){this.container.style.left="-100%",this.container.style.top="-100%";return}const e=Sl(this.five.camera,this.transformedPosition,t);if(!e){this.container.style.left="-100%",this.container.style.top="-100%";return}const i=(()=>{if(!this.simulate3D)return 1;const a=3*Math.tan(.5*this.five.camera.fov/180*Math.PI),l=this.transformedPosition.distanceTo(this.five.camera.position);return Math.max(Math.min(1-a*l/40,1),.75)})(),s=(()=>{if(this.positionsForRotate===void 0||this.positionsForRotate.length!==2)return 0;const[o,a]=this.positionsForRotate,l=Sl(this.five.camera,o,t),c=Sl(this.five.camera,a,t);if(!l||!c)return 0;const h=l.leftPx>c.leftPx?c:l,d=l.leftPx>c.leftPx?l:c,f=d.leftPx-h.leftPx,g=d.topPx-h.topPx;return Math.atan2(g,f)*(180/Math.PI)})();this.container.style.left=e.leftPx+"px",this.container.style.top=e.topPx+"px",this.container.style.transformOrigin="center",this.container.style.transform=`scale(${i})`,s&&(this.container.style.transform+=` rotate(${s}deg)`)}addResizeListener(){const t=this.five.getElement();if(t){const{observe:e,unobserve:i}=Xo(this.onCameraUpdate,t);e(),this.disposers.push(i)}}}function kd(...n){return new Br(...n)}function In(n){return n.toLowerCase().includes("panorama")}function oi(n){return!In(n)}var vi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},_r={},y1={get exports(){return _r},set exports(n){_r=n}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(n){(function(t,e,i,s){var r=["","webkit","Moz","MS","ms","o"],o=e.createElement("div"),a="function",l=Math.round,c=Math.abs,h=Date.now;function d(j,G,K){return setTimeout(x(j,K),G)}function f(j,G,K){return Array.isArray(j)?(g(j,K[G],K),!0):!1}function g(j,G,K){var ie;if(j)if(j.forEach)j.forEach(G,K);else if(j.length!==s)for(ie=0;ie<j.length;)G.call(K,j[ie],ie,j),ie++;else for(ie in j)j.hasOwnProperty(ie)&&G.call(K,j[ie],ie,j)}function p(j,G,K){var ie="DEPRECATED METHOD: "+G+`
`+K+` AT 
`;return function(){var me=new Error("get-stack-trace"),Se=me&&me.stack?me.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Xe=t.console&&(t.console.warn||t.console.log);return Xe&&Xe.call(t.console,ie,Se),j.apply(this,arguments)}}var m;typeof Object.assign!="function"?m=function(G){if(G===s||G===null)throw new TypeError("Cannot convert undefined or null to object");for(var K=Object(G),ie=1;ie<arguments.length;ie++){var me=arguments[ie];if(me!==s&&me!==null)for(var Se in me)me.hasOwnProperty(Se)&&(K[Se]=me[Se])}return K}:m=Object.assign;var v=p(function(G,K,ie){for(var me=Object.keys(K),Se=0;Se<me.length;)(!ie||ie&&G[me[Se]]===s)&&(G[me[Se]]=K[me[Se]]),Se++;return G},"extend","Use `assign`."),b=p(function(G,K){return v(G,K,!0)},"merge","Use `assign`.");function w(j,G,K){var ie=G.prototype,me;me=j.prototype=Object.create(ie),me.constructor=j,me._super=ie,K&&m(me,K)}function x(j,G){return function(){return j.apply(G,arguments)}}function E(j,G){return typeof j==a?j.apply(G&&G[0]||s,G):j}function L(j,G){return j===s?G:j}function S(j,G,K){g(A(G),function(ie){j.addEventListener(ie,K,!1)})}function R(j,G,K){g(A(G),function(ie){j.removeEventListener(ie,K,!1)})}function z(j,G){for(;j;){if(j==G)return!0;j=j.parentNode}return!1}function O(j,G){return j.indexOf(G)>-1}function A(j){return j.trim().split(/\s+/g)}function C(j,G,K){if(j.indexOf&&!K)return j.indexOf(G);for(var ie=0;ie<j.length;){if(K&&j[ie][K]==G||!K&&j[ie]===G)return ie;ie++}return-1}function I(j){return Array.prototype.slice.call(j,0)}function M(j,G,K){for(var ie=[],me=[],Se=0;Se<j.length;){var Xe=G?j[Se][G]:j[Se];C(me,Xe)<0&&ie.push(j[Se]),me[Se]=Xe,Se++}return K&&(G?ie=ie.sort(function(It,Lt){return It[G]>Lt[G]}):ie=ie.sort()),ie}function D(j,G){for(var K,ie,me=G[0].toUpperCase()+G.slice(1),Se=0;Se<r.length;){if(K=r[Se],ie=K?K+me:G,ie in j)return ie;Se++}return s}var T=1;function H(){return T++}function W(j){var G=j.ownerDocument||j;return G.defaultView||G.parentWindow||t}var J=/mobile|tablet|ip(ad|hone|od)|android/i,te="ontouchstart"in t,q=D(t,"PointerEvent")!==s,ne=te&&J.test(navigator.userAgent),se="touch",ue="pen",ze="mouse",Ce="kinect",ce=25,le=1,he=2,ke=4,be=8,We=1,Re=2,Te=4,He=8,pe=16,Le=Re|Te,Oe=He|pe,rt=Le|Oe,st=["x","y"],bt=["clientX","clientY"];function et(j,G){var K=this;this.manager=j,this.callback=G,this.element=j.element,this.target=j.options.inputTarget,this.domHandler=function(ie){E(j.options.enable,[j])&&K.handler(ie)},this.init()}et.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(W(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&R(this.element,this.evEl,this.domHandler),this.evTarget&&R(this.target,this.evTarget,this.domHandler),this.evWin&&R(W(this.element),this.evWin,this.domHandler)}};function tt(j){var G,K=j.options.inputClass;return K?G=K:q?G=pn:ne?G=qn:te?G=gn:G=Ci,new G(j,ct)}function ct(j,G,K){var ie=K.pointers.length,me=K.changedPointers.length,Se=G&le&&ie-me===0,Xe=G&(ke|be)&&ie-me===0;K.isFirst=!!Se,K.isFinal=!!Xe,Se&&(j.session={}),K.eventType=G,dt(j,K),j.emit("hammer.input",K),j.recognize(K),j.session.prevInput=K}function dt(j,G){var K=j.session,ie=G.pointers,me=ie.length;K.firstInput||(K.firstInput=fi(G)),me>1&&!K.firstMultiple?K.firstMultiple=fi(G):me===1&&(K.firstMultiple=!1);var Se=K.firstInput,Xe=K.firstMultiple,wt=Xe?Xe.center:Se.center,It=G.center=zi(ie);G.timeStamp=h(),G.deltaTime=G.timeStamp-Se.timeStamp,G.angle=Qi(wt,It),G.distance=Oi(wt,It),Xt(K,G),G.offsetDirection=_t(G.deltaX,G.deltaY);var Lt=Ui(G.deltaTime,G.deltaX,G.deltaY);G.overallVelocityX=Lt.x,G.overallVelocityY=Lt.y,G.overallVelocity=c(Lt.x)>c(Lt.y)?Lt.x:Lt.y,G.scale=Xe?Ts(Xe.pointers,ie):1,G.rotation=Xe?Eo(Xe.pointers,ie):0,G.maxPointers=K.prevInput?G.pointers.length>K.prevInput.maxPointers?G.pointers.length:K.prevInput.maxPointers:G.pointers.length,Ls(K,G);var qt=j.element;z(G.srcEvent.target,qt)&&(qt=G.srcEvent.target),G.target=qt}function Xt(j,G){var K=G.center,ie=j.offsetDelta||{},me=j.prevDelta||{},Se=j.prevInput||{};(G.eventType===le||Se.eventType===ke)&&(me=j.prevDelta={x:Se.deltaX||0,y:Se.deltaY||0},ie=j.offsetDelta={x:K.x,y:K.y}),G.deltaX=me.x+(K.x-ie.x),G.deltaY=me.y+(K.y-ie.y)}function Ls(j,G){var K=j.lastInterval||G,ie=G.timeStamp-K.timeStamp,me,Se,Xe,wt;if(G.eventType!=be&&(ie>ce||K.velocity===s)){var It=G.deltaX-K.deltaX,Lt=G.deltaY-K.deltaY,qt=Ui(ie,It,Lt);Se=qt.x,Xe=qt.y,me=c(qt.x)>c(qt.y)?qt.x:qt.y,wt=_t(It,Lt),j.lastInterval=G}else me=K.velocity,Se=K.velocityX,Xe=K.velocityY,wt=K.direction;G.velocity=me,G.velocityX=Se,G.velocityY=Xe,G.direction=wt}function fi(j){for(var G=[],K=0;K<j.pointers.length;)G[K]={clientX:l(j.pointers[K].clientX),clientY:l(j.pointers[K].clientY)},K++;return{timeStamp:h(),pointers:G,center:zi(G),deltaX:j.deltaX,deltaY:j.deltaY}}function zi(j){var G=j.length;if(G===1)return{x:l(j[0].clientX),y:l(j[0].clientY)};for(var K=0,ie=0,me=0;me<G;)K+=j[me].clientX,ie+=j[me].clientY,me++;return{x:l(K/G),y:l(ie/G)}}function Ui(j,G,K){return{x:G/j||0,y:K/j||0}}function _t(j,G){return j===G?We:c(j)>=c(G)?j<0?Re:Te:G<0?He:pe}function Oi(j,G,K){K||(K=st);var ie=G[K[0]]-j[K[0]],me=G[K[1]]-j[K[1]];return Math.sqrt(ie*ie+me*me)}function Qi(j,G,K){K||(K=st);var ie=G[K[0]]-j[K[0]],me=G[K[1]]-j[K[1]];return Math.atan2(me,ie)*180/Math.PI}function Eo(j,G){return Qi(G[1],G[0],bt)+Qi(j[1],j[0],bt)}function Ts(j,G){return Oi(G[0],G[1],bt)/Oi(j[0],j[1],bt)}var Qn={mousedown:le,mousemove:he,mouseup:ke},Pr="mousedown",Xn="mousemove mouseup";function Ci(){this.evEl=Pr,this.evWin=Xn,this.pressed=!1,et.apply(this,arguments)}w(Ci,et,{handler:function(G){var K=Qn[G.type];K&le&&G.button===0&&(this.pressed=!0),K&he&&G.which!==1&&(K=ke),this.pressed&&(K&ke&&(this.pressed=!1),this.callback(this.manager,K,{pointers:[G],changedPointers:[G],pointerType:ze,srcEvent:G}))}});var pi={pointerdown:le,pointermove:he,pointerup:ke,pointercancel:be,pointerout:be},Yn={2:se,3:ue,4:ze,5:Ce},Zn="pointerdown",Xi="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Zn="MSPointerDown",Xi="MSPointerMove MSPointerUp MSPointerCancel");function pn(){this.evEl=Zn,this.evWin=Xi,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}w(pn,et,{handler:function(G){var K=this.store,ie=!1,me=G.type.toLowerCase().replace("ms",""),Se=pi[me],Xe=Yn[G.pointerType]||G.pointerType,wt=Xe==se,It=C(K,G.pointerId,"pointerId");Se&le&&(G.button===0||wt)?It<0&&(K.push(G),It=K.length-1):Se&(ke|be)&&(ie=!0),!(It<0)&&(K[It]=G,this.callback(this.manager,Se,{pointers:K,changedPointers:[G],pointerType:Xe,srcEvent:G}),ie&&K.splice(It,1))}});var mn={touchstart:le,touchmove:he,touchend:ke,touchcancel:be},zs="touchstart",Os="touchstart touchmove touchend touchcancel";function Jn(){this.evTarget=zs,this.evWin=Os,this.started=!1,et.apply(this,arguments)}w(Jn,et,{handler:function(G){var K=mn[G.type];if(K===le&&(this.started=!0),!!this.started){var ie=Yi.call(this,G,K);K&(ke|be)&&ie[0].length-ie[1].length===0&&(this.started=!1),this.callback(this.manager,K,{pointers:ie[0],changedPointers:ie[1],pointerType:se,srcEvent:G})}}});function Yi(j,G){var K=I(j.touches),ie=I(j.changedTouches);return G&(ke|be)&&(K=M(K.concat(ie),"identifier",!0)),[K,ie]}var Cr={touchstart:le,touchmove:he,touchend:ke,touchcancel:be},ji="touchstart touchmove touchend touchcancel";function qn(){this.evTarget=ji,this.targetIds={},et.apply(this,arguments)}w(qn,et,{handler:function(G){var K=Cr[G.type],ie=xo.call(this,G,K);ie&&this.callback(this.manager,K,{pointers:ie[0],changedPointers:ie[1],pointerType:se,srcEvent:G})}});function xo(j,G){var K=I(j.touches),ie=this.targetIds;if(G&(le|he)&&K.length===1)return ie[K[0].identifier]=!0,[K,K];var me,Se,Xe=I(j.changedTouches),wt=[],It=this.target;if(Se=K.filter(function(Lt){return z(Lt.target,It)}),G===le)for(me=0;me<Se.length;)ie[Se[me].identifier]=!0,me++;for(me=0;me<Xe.length;)ie[Xe[me].identifier]&&wt.push(Xe[me]),G&(ke|be)&&delete ie[Xe[me].identifier],me++;if(wt.length)return[M(Se.concat(wt),"identifier",!0),wt]}var Do=2500,js=25;function gn(){et.apply(this,arguments);var j=x(this.handler,this);this.touch=new qn(this.manager,j),this.mouse=new Ci(this.manager,j),this.primaryTouch=null,this.lastTouches=[]}w(gn,et,{handler:function(G,K,ie){var me=ie.pointerType==se,Se=ie.pointerType==ze;if(!(Se&&ie.sourceCapabilities&&ie.sourceCapabilities.firesTouchEvents)){if(me)Dt.call(this,K,ie);else if(Se&&So.call(this,ie))return;this.callback(G,K,ie)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Dt(j,G){j&le?(this.primaryTouch=G.changedPointers[0].identifier,Ir.call(this,G)):j&(ke|be)&&Ir.call(this,G)}function Ir(j){var G=j.changedPointers[0];if(G.identifier===this.primaryTouch){var K={x:G.clientX,y:G.clientY};this.lastTouches.push(K);var ie=this.lastTouches,me=function(){var Se=ie.indexOf(K);Se>-1&&ie.splice(Se,1)};setTimeout(me,Do)}}function So(j){for(var G=j.srcEvent.clientX,K=j.srcEvent.clientY,ie=0;ie<this.lastTouches.length;ie++){var me=this.lastTouches[ie],Se=Math.abs(G-me.x),Xe=Math.abs(K-me.y);if(Se<=js&&Xe<=js)return!0}return!1}var Mr=D(o.style,"touchAction"),kr=Mr!==s,Er="compute",St="auto",Vs="manipulation",Vi="none",vn="pan-x",An="pan-y",Kn=To();function Vt(j,G){this.manager=j,this.set(G)}Vt.prototype={set:function(j){j==Er&&(j=this.compute()),kr&&this.manager.element.style&&Kn[j]&&(this.manager.element.style[Mr]=j),this.actions=j.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var j=[];return g(this.manager.recognizers,function(G){E(G.options.enable,[G])&&(j=j.concat(G.getTouchAction()))}),Lo(j.join(" "))},preventDefaults:function(j){var G=j.srcEvent,K=j.offsetDirection;if(this.manager.session.prevented){G.preventDefault();return}var ie=this.actions,me=O(ie,Vi)&&!Kn[Vi],Se=O(ie,An)&&!Kn[An],Xe=O(ie,vn)&&!Kn[vn];if(me){var wt=j.pointers.length===1,It=j.distance<2,Lt=j.deltaTime<250;if(wt&&It&&Lt)return}if(!(Xe&&Se)&&(me||Se&&K&Le||Xe&&K&Oe))return this.preventSrc(G)},preventSrc:function(j){this.manager.session.prevented=!0,j.preventDefault()}};function Lo(j){if(O(j,Vi))return Vi;var G=O(j,vn),K=O(j,An);return G&&K?Vi:G||K?G?vn:An:O(j,Vs)?Vs:St}function To(){if(!kr)return!1;var j={},G=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(K){j[K]=G?t.CSS.supports("touch-action",K):!0}),j}var $n=1,Gt=2,Zi=4,Yt=8,si=Yt,Ii=16,Ct=32;function Zt(j){this.options=m({},this.defaults,j||{}),this.id=H(),this.manager=null,this.options.enable=L(this.options.enable,!0),this.state=$n,this.simultaneous={},this.requireFail=[]}Zt.prototype={defaults:{},set:function(j){return m(this.options,j),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(j){if(f(j,"recognizeWith",this))return this;var G=this.simultaneous;return j=es(j,this),G[j.id]||(G[j.id]=j,j.recognizeWith(this)),this},dropRecognizeWith:function(j){return f(j,"dropRecognizeWith",this)?this:(j=es(j,this),delete this.simultaneous[j.id],this)},requireFailure:function(j){if(f(j,"requireFailure",this))return this;var G=this.requireFail;return j=es(j,this),C(G,j)===-1&&(G.push(j),j.requireFailure(this)),this},dropRequireFailure:function(j){if(f(j,"dropRequireFailure",this))return this;j=es(j,this);var G=C(this.requireFail,j);return G>-1&&this.requireFail.splice(G,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(j){return!!this.simultaneous[j.id]},emit:function(j){var G=this,K=this.state;function ie(me){G.manager.emit(me,j)}K<Yt&&ie(G.options.event+xr(K)),ie(G.options.event),j.additionalEvent&&ie(j.additionalEvent),K>=Yt&&ie(G.options.event+xr(K))},tryEmit:function(j){if(this.canEmit())return this.emit(j);this.state=Ct},canEmit:function(){for(var j=0;j<this.requireFail.length;){if(!(this.requireFail[j].state&(Ct|$n)))return!1;j++}return!0},recognize:function(j){var G=m({},j);if(!E(this.options.enable,[this,G])){this.reset(),this.state=Ct;return}this.state&(si|Ii|Ct)&&(this.state=$n),this.state=this.process(G),this.state&(Gt|Zi|Yt|Ii)&&this.tryEmit(G)},process:function(j){},getTouchAction:function(){},reset:function(){}};function xr(j){return j&Ii?"cancel":j&Yt?"end":j&Zi?"move":j&Gt?"start":""}function Dr(j){return j==pe?"down":j==He?"up":j==Re?"left":j==Te?"right":""}function es(j,G){var K=G.manager;return K?K.get(j):j}function Jt(){Zt.apply(this,arguments)}w(Jt,Zt,{defaults:{pointers:1},attrTest:function(j){var G=this.options.pointers;return G===0||j.pointers.length===G},process:function(j){var G=this.state,K=j.eventType,ie=G&(Gt|Zi),me=this.attrTest(j);return ie&&(K&be||!me)?G|Ii:ie||me?K&ke?G|Yt:G&Gt?G|Zi:Gt:Ct}});function ts(){Jt.apply(this,arguments),this.pX=null,this.pY=null}w(ts,Jt,{defaults:{event:"pan",threshold:10,pointers:1,direction:rt},getTouchAction:function(){var j=this.options.direction,G=[];return j&Le&&G.push(An),j&Oe&&G.push(vn),G},directionTest:function(j){var G=this.options,K=!0,ie=j.distance,me=j.direction,Se=j.deltaX,Xe=j.deltaY;return me&G.direction||(G.direction&Le?(me=Se===0?We:Se<0?Re:Te,K=Se!=this.pX,ie=Math.abs(j.deltaX)):(me=Xe===0?We:Xe<0?He:pe,K=Xe!=this.pY,ie=Math.abs(j.deltaY))),j.direction=me,K&&ie>G.threshold&&me&G.direction},attrTest:function(j){return Jt.prototype.attrTest.call(this,j)&&(this.state&Gt||!(this.state&Gt)&&this.directionTest(j))},emit:function(j){this.pX=j.deltaX,this.pY=j.deltaY;var G=Dr(j.direction);G&&(j.additionalEvent=this.options.event+G),this._super.emit.call(this,j)}});function Ji(){Jt.apply(this,arguments)}w(Ji,Jt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Vi]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.scale-1)>this.options.threshold||this.state&Gt)},emit:function(j){if(j.scale!==1){var G=j.scale<1?"in":"out";j.additionalEvent=this.options.event+G}this._super.emit.call(this,j)}});function bn(){Zt.apply(this,arguments),this._timer=null,this._input=null}w(bn,Zt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[St]},process:function(j){var G=this.options,K=j.pointers.length===G.pointers,ie=j.distance<G.threshold,me=j.deltaTime>G.time;if(this._input=j,!ie||!K||j.eventType&(ke|be)&&!me)this.reset();else if(j.eventType&le)this.reset(),this._timer=d(function(){this.state=si,this.tryEmit()},G.time,this);else if(j.eventType&ke)return si;return Ct},reset:function(){clearTimeout(this._timer)},emit:function(j){this.state===si&&(j&&j.eventType&ke?this.manager.emit(this.options.event+"up",j):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}});function Bi(){Jt.apply(this,arguments)}w(Bi,Jt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Vi]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.rotation)>this.options.threshold||this.state&Gt)}});function is(){Jt.apply(this,arguments)}w(is,Jt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Le|Oe,pointers:1},getTouchAction:function(){return ts.prototype.getTouchAction.call(this)},attrTest:function(j){var G=this.options.direction,K;return G&(Le|Oe)?K=j.overallVelocity:G&Le?K=j.overallVelocityX:G&Oe&&(K=j.overallVelocityY),this._super.attrTest.call(this,j)&&G&j.offsetDirection&&j.distance>this.options.threshold&&j.maxPointers==this.options.pointers&&c(K)>this.options.velocity&&j.eventType&ke},emit:function(j){var G=Dr(j.offsetDirection);G&&this.manager.emit(this.options.event+G,j),this.manager.emit(this.options.event,j)}});function yn(){Zt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}w(yn,Zt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Vs]},process:function(j){var G=this.options,K=j.pointers.length===G.pointers,ie=j.distance<G.threshold,me=j.deltaTime<G.time;if(this.reset(),j.eventType&le&&this.count===0)return this.failTimeout();if(ie&&me&&K){if(j.eventType!=ke)return this.failTimeout();var Se=this.pTime?j.timeStamp-this.pTime<G.interval:!0,Xe=!this.pCenter||Oi(this.pCenter,j.center)<G.posThreshold;this.pTime=j.timeStamp,this.pCenter=j.center,!Xe||!Se?this.count=1:this.count+=1,this._input=j;var wt=this.count%G.taps;if(wt===0)return this.hasRequireFailures()?(this._timer=d(function(){this.state=si,this.tryEmit()},G.interval,this),Gt):si}return Ct},failTimeout:function(){return this._timer=d(function(){this.state=Ct},this.options.interval,this),Ct},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==si&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function mi(j,G){return G=G||{},G.recognizers=L(G.recognizers,mi.defaults.preset),new Bs(j,G)}mi.VERSION="2.0.7",mi.defaults={domEvents:!1,touchAction:Er,enable:!0,inputTarget:null,inputClass:null,preset:[[Bi,{enable:!1}],[Ji,{enable:!1},["rotate"]],[is,{direction:Le}],[ts,{direction:Le},["swipe"]],[yn],[yn,{event:"doubletap",taps:2},["tap"]],[bn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var zo=1,Sr=2;function Bs(j,G){this.options=m({},mi.defaults,G||{}),this.options.inputTarget=this.options.inputTarget||j,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=j,this.input=tt(this),this.touchAction=new Vt(this,this.options.touchAction),ns(this,!0),g(this.options.recognizers,function(K){var ie=this.add(new K[0](K[1]));K[2]&&ie.recognizeWith(K[2]),K[3]&&ie.requireFailure(K[3])},this)}Bs.prototype={set:function(j){return m(this.options,j),j.touchAction&&this.touchAction.update(),j.inputTarget&&(this.input.destroy(),this.input.target=j.inputTarget,this.input.init()),this},stop:function(j){this.session.stopped=j?Sr:zo},recognize:function(j){var G=this.session;if(!G.stopped){this.touchAction.preventDefaults(j);var K,ie=this.recognizers,me=G.curRecognizer;(!me||me&&me.state&si)&&(me=G.curRecognizer=null);for(var Se=0;Se<ie.length;)K=ie[Se],G.stopped!==Sr&&(!me||K==me||K.canRecognizeWith(me))?K.recognize(j):K.reset(),!me&&K.state&(Gt|Zi|Yt)&&(me=G.curRecognizer=K),Se++}},get:function(j){if(j instanceof Zt)return j;for(var G=this.recognizers,K=0;K<G.length;K++)if(G[K].options.event==j)return G[K];return null},add:function(j){if(f(j,"add",this))return this;var G=this.get(j.options.event);return G&&this.remove(G),this.recognizers.push(j),j.manager=this,this.touchAction.update(),j},remove:function(j){if(f(j,"remove",this))return this;if(j=this.get(j),j){var G=this.recognizers,K=C(G,j);K!==-1&&(G.splice(K,1),this.touchAction.update())}return this},on:function(j,G){if(j!==s&&G!==s){var K=this.handlers;return g(A(j),function(ie){K[ie]=K[ie]||[],K[ie].push(G)}),this}},off:function(j,G){if(j!==s){var K=this.handlers;return g(A(j),function(ie){G?K[ie]&&K[ie].splice(C(K[ie],G),1):delete K[ie]}),this}},emit:function(j,G){this.options.domEvents&&Oo(j,G);var K=this.handlers[j]&&this.handlers[j].slice();if(!(!K||!K.length)){G.type=j,G.preventDefault=function(){G.srcEvent.preventDefault()};for(var ie=0;ie<K.length;)K[ie](G),ie++}},destroy:function(){this.element&&ns(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ns(j,G){var K=j.element;if(K.style){var ie;g(j.options.cssProps,function(me,Se){ie=D(K.style,Se),G?(j.oldCssProps[ie]=K.style[ie],K.style[ie]=me):K.style[ie]=j.oldCssProps[ie]||""}),G||(j.oldCssProps={})}}function Oo(j,G){var K=e.createEvent("Event");K.initEvent(j,!0,!0),K.gesture=G,G.target.dispatchEvent(K)}m(mi,{INPUT_START:le,INPUT_MOVE:he,INPUT_END:ke,INPUT_CANCEL:be,STATE_POSSIBLE:$n,STATE_BEGAN:Gt,STATE_CHANGED:Zi,STATE_ENDED:Yt,STATE_RECOGNIZED:si,STATE_CANCELLED:Ii,STATE_FAILED:Ct,DIRECTION_NONE:We,DIRECTION_LEFT:Re,DIRECTION_RIGHT:Te,DIRECTION_UP:He,DIRECTION_DOWN:pe,DIRECTION_HORIZONTAL:Le,DIRECTION_VERTICAL:Oe,DIRECTION_ALL:rt,Manager:Bs,Input:et,TouchAction:Vt,TouchInput:qn,MouseInput:Ci,PointerEventInput:pn,TouchMouseInput:gn,SingleTouchInput:Jn,Recognizer:Zt,AttrRecognizer:Jt,Tap:yn,Pan:ts,Swipe:is,Pinch:Ji,Rotate:Bi,Press:bn,on:S,off:R,each:g,merge:b,extend:v,assign:m,inherit:w,bindFn:x,prefixed:D});var jo=typeof t!="undefined"?t:typeof self!="undefined"?self:{};jo.Hammer=mi,typeof s=="function"&&s.amd?s(function(){return mi}):n.exports?n.exports=mi:t[i]=mi})(window,document,"Hammer")})(y1);class Zo{constructor(t,e){u(this,"width");u(this,"height");u(this,"containerDom");u(this,"hooks",new Pt);u(this,"canvas",document.createElement("canvas"));u(this,"config");u(this,"state",{enabled:!1});u(this,"five");u(this,"scale");u(this,"offset",{x:0,y:0});u(this,"context");u(this,"renderCenter",new P.Vector3);u(this,"hammer");u(this,"offsetRange");u(this,"isPanning",!1);u(this,"imageData",new ImageData(1,1));u(this,"onPanstart",()=>{this.isPanning=!0,this.canvas.style.boxShadow="0 2px 30px 0 rgba(0,0,0,0.20)"});u(this,"onPan",t=>{if(!this.isPanning||!this.offsetRange||this.hooks.emit("wantsPanGesture",t))return;const{translateX:i,translateY:s}=this.getPanOffset(t,this.offsetRange);this.canvas.style.transform=`translate3d(${i}px, ${s}px, 100px)`});u(this,"onPanend",t=>{if(this.isPanning=!1,this.canvas.style.boxShadow="none",!this.offsetRange)return;const{translateX:e,translateY:i}=this.getPanOffset(t,this.offsetRange);this.canvas.style.transform=`translate3d(${e}px, ${i}px, 100px)`,this.offset={x:e,y:i}});var s,r,o,a;if(!t.renderer){console.error("Five Render 未初始化");return}this.five=t,this.scale=(s=e==null?void 0:e.scale)!=null?s:2,this.width=(r=e==null?void 0:e.width)!=null?r:190,this.height=(a=(o=e==null?void 0:e.height)!=null?o:e==null?void 0:e.width)!=null?a:190,this.config={dragEnabled:(e==null?void 0:e.dragEnabled)||!1,autoFixPCPosition:(e==null?void 0:e.autoFixPCPosition)||!1,initialPosition:(e==null?void 0:e.initialPosition)||{left:"0",top:"0"}};const i=this.canvas.getContext("2d");if(!i)throw new Error("CANNOT CREATE CONTEXT2D");this.context=i,this.config.dragEnabled&&(this.hammer=new _r(this.canvas),this.hammer.on("pan",this.onPan),this.hammer.on("panstart",this.onPanstart),this.hammer.on("panend",this.onPanend)),this.initStyle()}enable(){if(!this.state.enabled)return this.state.enabled=!0,this.containerDom&&this._appendTo(this.containerDom),this}disable(){if(this.state.enabled)return this.state.enabled=!1,this.canvas.style.visibility="hidden",this.canvas.remove(),this}dispose(){var t;this.clear(),this.disable(),(t=this.hammer)==null||t.destroy()}appendTo(t){var e;return this.containerDom&&((e=this.containerDom)==null||e.removeChild(this.canvas)),this.containerDom=t,this.state.enabled&&this._appendTo(t),this}clear(){var t;return(t=this.context)==null||t.clearRect(0,0,this.canvas.width,this.canvas.height),this}renderWithPoint(t){this.containerDom&&this.state.enabled&&(this.renderCenter=t,this.render(),this.config.autoFixPCPosition&&this.autoFixPCPosition())}renderWithScreenPoint(t){this.containerDom&&this.state.enabled&&(this.renderCenter=t,this.render(),this.config.autoFixPCPosition&&this.autoFixPCPosition())}resetOffset(){this.offset={x:0,y:0},this.canvas.style.transform="translate3d(0px, 0px, 100px)"}render(){if(!this.five.renderer||!this.containerDom)return;const{scale:t,context:e,width:i,height:s}=this,r=this.five.renderer.getSize(new P.Vector2),[o,a]=(()=>{if(this.renderCenter.isVector3){const v=this.renderCenter.clone().project(this.five.camera);return[(v.x+1)/2*r.x,(v.y+1)/2*r.y]}else return[this.renderCenter.x,r.y-this.renderCenter.y]})(),l=1,c=i/t,h=s/t,d=l*t,f=new Map;this.five.scene.traverse(v=>{v.disableGetPixel===!0&&(f.set(v,v.visible),v.visible=!1)});const g=this.five.getPixels(o-c/2,a-c/2,c,h,d);f.forEach((v,b)=>{b.visible=v});const p=Math.floor(i*l),m=Math.floor(s*l);w1(g,p,m),(this.imageData.width!==p||this.imageData.height!==m)&&(this.imageData=new ImageData(p,m)),this.imageData.data.set(g),e.putImageData(this.imageData,0,0),this.canvas.style.visibility="visible"}getRenderCenter(){return this.renderCenter}_appendTo(t){if(this.resetOffset(),t.appendChild(this.canvas),!this.offsetRange){const e=this.canvas.getBoundingClientRect(),i=t.getBoundingClientRect(),s=i.right-e.right,r=i.bottom-e.bottom,o=i.left-e.left,a=i.top-e.top;this.offsetRange={min:{x:o,y:a},max:{x:s,y:r}}}}autoFixPCPosition(){if(!this.containerDom)return;const{width:t,height:e}=this,{clientWidth:i,clientHeight:s}=this.containerDom,[r,o,a]=(()=>{if(this.renderCenter.isVector3){const l=this.renderCenter.clone().project(this.five.camera);return[(l.x+1)/2*i,-(l.x-1)/2*i,-(l.y-1)/2*s]}else return[this.renderCenter.x,i-this.renderCenter.x,this.renderCenter.y]})();r<183?(this.canvas.style.top=-e/2+"px",this.canvas.style.left="90px"):a<183?(this.canvas.style.top="90px",this.canvas.style.left=-t/2+"px"):o<183?(this.canvas.style.top=-e/2+"px",this.canvas.style.left=-t-90+"px"):(this.canvas.style.left=-t/2+"px",this.canvas.style.top=-e-90+"px"),this.canvas.style.transform=`translate3d(${r}px, ${a}px, 10px)`,this.offset={x:r,y:a}}initStyle(){const t=this.canvas;t.classList.add("five-plugin__magnifier"),t.style.position="absolute",t.style.pointerEvents=this.config.dragEnabled?"all":"none",t.style.borderRadius="50%",t.style.zIndex="99";const e=1;t.setAttribute("width",(this.width*e).toString()),t.setAttribute("height",(this.height*e).toString()),t.style.border="2px solid rgba(255,255,255,0.20)",t.style.width=this.width+"px",t.style.height=this.height+"px",t.style.top=this.config.initialPosition.top,t.style.left=this.config.initialPosition.left,t.style.transform="translate(0,0,100px)",t.style.visibility="hidden",this.config.dragEnabled&&(this.canvas.style.cursor="pointer")}getPanOffset(t,e){const{min:{x:i,y:s},max:{x:r,y:o}}=e,a=this.offset.x+t.deltaX,l=this.offset.y+t.deltaY,c=Math.min(Math.max(a,i),r),h=Math.min(Math.max(l,s),o);return{translateX:c,translateY:h}}}function Jo(n,t,e){const i=n[t],s=n[e];i===void 0||s===void 0||(n[t]=s,n[e]=i)}function w1(n,t,e){const i=e/2;for(let s=1;s<=i;s++){const r=e-(s-1);for(let o=1;o<=t;o++){const a=(s-1)*t+o-1,l=(r-1)*t+o-1;Jo(n,a*4+0,l*4+0),Jo(n,a*4+1,l*4+1),Jo(n,a*4+2,l*4+2),Jo(n,a*4+3,l*4+3)}}}function P1(n,t){const{offsetWidth:e,offsetHeight:i}=t,{top:s,left:r}=t.getBoundingClientRect();return new P.Vector2().set((n.x-r)/e*2-1,-(n.y-s)/i*2+1)}function Ed(n,t){const{offsetWidth:e,offsetHeight:i}=t;return new P.Vector2().set(n.x/e*2-1,-n.y/i*2+1)}var tn=function(n){B.Object3D.call(this),this.element=n,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.remove()})})};tn.prototype=Object.create(B.Object3D.prototype),tn.prototype.constructor=tn;var qo=function(n){tn.call(this,n)};qo.prototype=Object.create(tn.prototype),qo.prototype.constructor=qo;let C1=function(n){let t=this,e,i,s,r,o=new B.Matrix4,a={camera:{fov:0,style:""},objects:new Map},l=document.createElement("div");l.style.overflow="hidden",this.domElement=l;let c=document.createElement("div");c.style.WebkitTransformStyle="preserve-3d",c.style.transformStyle="preserve-3d",c.style.pointerEvents="none",l.appendChild(c),this.getSize=function(){return{width:e,height:i}},this.setSize=function(m,v){e=m,i=v,s=e/2,r=i/2,l.style.width=m+"px",l.style.height=v+"px",c.style.width=m+"px",c.style.height=v+"px"};function h(m){return Math.abs(m)<1e-10?0:m}function d(m){let v=m.elements;return"matrix3d("+h(v[0])+","+h(-v[1])+","+h(v[2])+","+h(v[3])+","+h(v[4])+","+h(-v[5])+","+h(v[6])+","+h(v[7])+","+h(v[8])+","+h(-v[9])+","+h(v[10])+","+h(v[11])+","+h(v[12])+","+h(-v[13])+","+h(v[14])+","+h(v[15])+")"}function f(m,v){let b=m.elements;return"translate(-50%,-50%)"+("matrix3d("+h(b[0])+","+h(b[1])+","+h(b[2])+","+h(b[3])+","+h(-b[4])+","+h(-b[5])+","+h(-b[6])+","+h(-b[7])+","+h(b[8])+","+h(b[9])+","+h(b[10])+","+h(b[11])+","+h(b[12])+","+h(b[13])+","+h(b[14])+","+h(b[15])+")")}function g(m){var v;if(m.isCSS3DObject){const b=(v=m.mode)!=null?v:"front";(!n||b===n)&&(m.element.style.display="none")}for(let b=0,w=m.children.length;b<w;b++)g(m.children[b])}function p(m,v,b,w,x){var E;if(m.visible===!1){g(m);return}if(m.isCSS3DObject){const L=(E=m.mode)!=null?E:"front";if(n&&L!==n)return;m.flag=x;const S=m.layers.test(b.layers)===!0,R=m.element;if(R.style.display=S===!0?"":"none",S){m.onBeforeRender(t,v,b);let z;m.isCSS3DSprite?(o.copy(b.matrixWorldInverse),o.transpose(),o.copyPosition(m.matrixWorld),o.scale(m.scale),o.elements[3]=0,o.elements[7]=0,o.elements[11]=0,o.elements[15]=1,z=f(o)):z=f(m.matrixWorld);let O=a.objects.get(m);if(O===void 0||O.style!==z){R.style.WebkitTransform=z,R.style.transform=z;let A={style:z};a.objects.set(m,A)}R.style.display=m.visible?"":"none",R.parentNode!==c&&c.appendChild(R),m.onAfterRender(t,v,b)}}for(let L=0,S=m.children.length;L<S;L++)p(m.children[L],v,b,w,x)}this.render=function(m,v){let b=v.projectionMatrix.elements[5]*r;if(a.camera.fov!==b&&(v.isPerspectiveCamera?(l.style.WebkitPerspective=b+"px",l.style.perspective=b+"px"):(l.style.WebkitPerspective="",l.style.perspective=""),a.camera.fov=b),m.autoUpdate===!0&&m.updateMatrixWorld(),v.parent===null&&v.updateMatrixWorld(),v.isOrthographicCamera)var w=-(v.right+v.left)/2,x=(v.top+v.bottom)/2;let E=v.isOrthographicCamera?"scale("+b+")translate("+h(w)+"px,"+h(x)+"px)"+d(v.matrixWorldInverse):"translateZ("+b+"px)"+d(v.matrixWorldInverse),L=E+"translate("+s+"px,"+r+"px)";a.camera.style!==L&&(c.style.WebkitTransform=L,c.style.transform=L,a.camera.style=L);const S=m.uuid+"_"+performance.now().toString();p(m,m,v,E,S),a.objects.forEach(function(R,z){z.flag!==S&&(z.element.remove(),a.objects.delete(z))})}};function Gs(n,t){const e=Math.round(n);return e%2===0?e:e+(t!=null&&t.floor?-1:1)}function I1(n,t,e=!0){if(!n)return console.error("createResizeObserver: element is undefined"),{observe:()=>{},unobserve:()=>{}};const i=()=>{const r=Gs(n.clientWidth,{floor:!0}),o=Gs(n.clientHeight,{floor:!0});t(r,o)};if(typeof ResizeObserver=="undefined"||!ResizeObserver)return console.warn("createResizeObserver: ResizeObserver is undefined"),{observe:()=>i(),unobserve:()=>{}};const s=new ResizeObserver(i);return e&&i(),{observe:()=>s.observe(n),unobserve:()=>s.unobserve(n)}}class Ko extends C1{constructor(e){super(e);u(this,"wrapper");u(this,"domElementWrapper",document.createElement("div"));u(this,"requestAnimationFrameId");u(this,"resizeDisoper");this.domElementWrapper.classList.add("ICSS3DRendererWrapper"),this.domElementWrapper.style.position="absolute",this.domElementWrapper.style.top="0",this.domElementWrapper.style.left="0",this.domElementWrapper.style.width="100%",this.domElementWrapper.style.height="100%",this.domElementWrapper.style.userSelect="none",this.domElementWrapper.style.pointerEvents="none",this.domElement.classList.add("ICSS3DRenderer"),this.domElement.style.position="absolute",this.domElement.style.top="0",this.domElement.style.left="0",this.domElement.style.userSelect="none",this.domElement.style.pointerEvents="none",this.domElementWrapper.appendChild(this.domElement)}setWrapper(e){if(!e)throw new Error("CSS3DRenderer: wrapper is required");if((()=>{for(let r=0;r<e.children.length;r++)if(e.children.item(r)===this.domElementWrapper)return!0;return!1})())return;const s=this.wrapper;return s&&s.contains(this.domElementWrapper)&&this.domElementWrapper.remove(),this.appendToElement(e),this.wrapper=e,this}appendToElement(e){e.appendChild(this.domElementWrapper);const i=(o,a)=>this.setSize(o,a),{observe:s,unobserve:r}=I1(this.domElementWrapper,i,!0);s(),this.resizeDisoper=r,this.wrapper=e}renderEveryFrame(e,i){if(this.wrapper||console.warn("wrapper is not find, creating a html element and call setWrapper(wrapper)",this,e),this.requestAnimationFrameId)return;const s=()=>{this.requestAnimationFrameId=requestAnimationFrame(s),e.visible&&this.render(e,i)};s()}stopRender(){this.requestAnimationFrameId&&cancelAnimationFrame(this.requestAnimationFrameId)}dispose(){var e;this.stopRender(),(e=this.resizeDisoper)==null||e.call(this),this.domElementWrapper.remove()}}function ai(n){return ee(this,null,function*(){return new Promise(t=>{if(xd(n))t();else{const e=i=>{const s=gi(n);i===s&&(n.off("modelLoaded",e),t())};n.on("modelLoaded",e)}})})}function xd(n){var t;return(t=gi(n))==null?void 0:t.loaded}const ki=document.createElement("div");ki.classList.add("behindFiveElement"),ki.style.position="absolute",ki.style.top="0",ki.style.left="0",ki.style.width="100%",ki.style.height="100%",ki.style.pointerEvents="none";function jl(n){var i,s,r,o,a;const t=(a=(s=Vl(n.getElement()))!=null?s:Vl((i=n.getElement())==null?void 0:i.parentElement))!=null?a:Vl((o=(r=n.getElement())==null?void 0:r.parentElement)==null?void 0:o.parentElement),e=t==null?void 0:t.parentElement;if(e)return e.contains(ki)||t.parentElement.insertBefore(ki,t),ki;console.error("Can not find a valid element to insert behindFiveElement. How to fix it: https://github.com/realsee-developer/dnalogel/tree/main/plugins/src/CSS3DRenderPlugin/README.md")}function Vl(n){var a;if(!n)return;const t=(a=n.style.position)!=null?a:getComputedStyle(n).position;if(t!=="fixed"&&t!=="absolute"&&t!=="relative")return;const e=getComputedStyle(n),i=e.backgroundColor,s=e.backgroundImage;if(!(i!=="transparent"&&i!=="rgba(0, 0, 0, 0)"&&i!==""||s!=="none"&&s!==""))return n}let Rr=[null,null,()=>null];function Fr(n){var s;if(Rr){if(Rr[0]===n)return Rr[2];(s=Rr[1])==null||s.dispose()}const t=new Ko("front");t.domElementWrapper.style.zIndex="1";const e=new Ko("behind");ai(n).then(()=>{var a;const r=(a=n.getElement())==null?void 0:a.parentElement,o=jl(n);if(!r)return console.error("initialCSS3DRender: five element is not exist"),()=>null;if(t.appendToElement(r),t.renderEveryFrame(n.scene,n.camera),!o)return console.error("initialCSS3DRender: behindWrapper is not exist"),()=>null;e.appendToElement(o),e.renderEveryFrame(n.scene,n.camera)});const i=()=>{t.dispose(),e.dispose()};return Rr=[n,t,i],i}const M1=16777215,k1=16777215,E1=1,x1=.5,Bl=.6;class $t extends B.Object3D{constructor(){super();u(this,"name","IObject3D");u(this,"needsRender")}removeChildren(){for(;this.children.length>0;)this.remove(this.children[0]);return this}add(...e){const i=e.filter(Boolean);return i.length===0?this:super.add(...i)}addIfNotExists(...e){return e.forEach(i=>{this.children.includes(i)||this.add(i)}),this}remove(...e){if(e.length===0)return this;const i=e.filter(Boolean);return super.remove(...i)}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}}function Ut(...n){const t=new B.Vector3;return n.forEach(e=>t.add(e)),t.divideScalar(n.length),t}function _l(n,t){if(!document.getElementById("LineLengthTagStyle")){const r=document.createElement("style");r.id="LineLengthTagStyle",document.head.appendChild(r),r.innerHTML=`
    .LineLengthTag {
      cursor: default;
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: Arial-BoldMT;
      font-weight: BoldMT;
      color: #041066;
      letter-spacing: 0;
      line-height: 20px;
      background-color: #FFFFFF;
      border-radius: 12px;
      padding: 2px 8px;
      left: 50%;
      transform: translate(-50%, -50%);
      word-break: keep-all;
      --distance-scale: 1; /* Default scale if not provided */
      transition: font-size 0.5s ease; /* Smooth transition for font size */
    }
    
    /* sm screen */
    @media screen and (max-width: 499px) {
      .LineLengthTag {
        font-size: calc(12px + (14px - 12px) * var(--distance-scale));
      }
    }
    
    /* md screen */
    @media screen and (min-width: 500px) and (max-width: 929px) {
      .LineLengthTag {
        font-size: calc(12px + (14px - 12px) * var(--distance-scale));
      }
    }
    
    /* lg screen */
    @media screen and (min-width: 930px) and (max-width: 1365px) {
      .LineLengthTag {
        font-size: calc(14px + (16px - 14px) * var(--distance-scale));
      }
    }
    
    /* xl screen */
    @media screen and (min-width: 1366px) and (max-width: 2549px) {
      .LineLengthTag {
        font-size: calc(14px + (16px - 14px) * var(--distance-scale));
      }
    }
    
    /* xxl screen */
    @media screen and (min-width: 2550px) {
      .LineLengthTag {
        font-size: calc(0.875rem + (1rem - 0.875rem) * var(--distance-scale));
      }
    }
    `}const e=t!=null&&t.offsetY?`translateY(${t.offsetY}px)`:"";return`
    <div class="LineLengthTag" style="${e?`transform: translate(-50%, -50%) ${e};`:""}${t!=null&&t.style?" "+t.style:""}">
      ${n}
    </div>
  `}function nn(n){return arguments.length===0?[]:Array.isArray(n)?n:[n]}function Nr(n,t){const i=nn(t).map(s=>n.localToWorld(s.clone()));return Array.isArray(t)?i:i[0]}function D1(n,t){const i=nn(t).map(s=>n.worldToLocal(s.clone()));return Array.isArray(t)?i:i[0]}class $o extends nt.LineGeometry{constructor(...t){super(...t),this.setAttribute("instanceStart",new P.BufferAttribute(new Float32Array,3)),this.setAttribute("instanceEnd",new P.BufferAttribute(new Float32Array,3))}fromEdgesGeometry(t){if(t.attributes.position.array.length<6)return this.setAttribute("position",new P.BufferAttribute(new Float32Array,3)),this.setAttribute("instanceStart",new P.BufferAttribute(new Float32Array,3)),this.setAttribute("instanceEnd",new P.BufferAttribute(new Float32Array,3)),this;if(t instanceof P.EdgesGeometry){const e=new P.InstancedInterleavedBuffer(t.attributes.position.array,6,1);this.setPositions(t.attributes.position.array),this.setAttribute("instanceStart",new P.InterleavedBufferAttribute(e,3,0)),this.setAttribute("instanceEnd",new P.InterleavedBufferAttribute(e,3,3))}else super.fromEdgesGeometry(t);return this}toJSON(){return{type:"FiveLineGeometry",attributes:this.attributes}}}function ei(n){return!Fe(n)}function Fe(n){return n!=null}class S1 extends nt.LineMaterial{constructor(e){var i;super(e);u(this,"_three_color");u(this,"_dashed");Fe(e==null?void 0:e.color)&&(this.three_color=(i=e==null?void 0:e.color)!=null?i:16777215),Object.keys(e).forEach(s=>{["color","dashed","dashScale","dashSize","gapSize","resolution"].includes(s)||s in this&&(this[s]=e[s])}),Object.defineProperties(this,{dashed:{get(){return this._dashed},set(s){this._dashed=s,s?this.defines.USE_DASH="":delete this.defines.USE_DASH,this.needsUpdate=!0}}})}get three_color(){return this._three_color}set three_color(e){this._three_color=e,this.color=e}toJSON(){return{type:"FiveLineMaterial",color:this.color}}}class Dd extends nt.THREE_Line2{constructor(t,e){super(t,e)}toJSON(){return{type:"Five_THREE_Line2",geometryAttributes:this.geometry.attributes}}}const Rl={uniforms:P.UniformsUtils.merge([P.UniformsLib.common,P.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new P.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) < dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class Sd extends P.ShaderMaterial{constructor(e){super({uniforms:P.UniformsUtils.clone(Rl.uniforms),vertexShader:Rl.vertexShader,fragmentShader:Rl.fragmentShader,clipping:!0});u(this,"color");u(this,"dashed");u(this,"dashScale");u(this,"dashSize");u(this,"gapSize");u(this,"resolution");this.type="LineMaterial",this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get(){return this.uniforms.diffuse.value},set(i){this.uniforms.diffuse.value=i}},linewidth:{enumerable:!0,get(){return this.uniforms.linewidth.value},set(i){this.uniforms.linewidth.value=i}},dashScale:{enumerable:!0,get(){return this.uniforms.dashScale.value},set(i){this.uniforms.dashScale.value=i}},dashSize:{enumerable:!0,get(){return this.uniforms.dashSize.value},set(i){this.uniforms.dashSize.value=i}},gapSize:{enumerable:!0,get(){return this.uniforms.gapSize.value},set(i){this.uniforms.gapSize.value=i}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(i){this.uniforms.opacity.value=i}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(i){this.uniforms.resolution.value.copy(i)}}}),this.setValues(e)}}Object.assign(Sd.prototype,{isLineMaterial:!0});class L1 extends Sd{constructor(e){var i;super(e);u(this,"_three_color");u(this,"_dashed");Fe(e==null?void 0:e.color)&&(this.three_color=(i=e==null?void 0:e.color)!=null?i:16777215),Object.keys(e).forEach(s=>{["color","dashed","dashScale","dashSize","gapSize","resolution"].includes(s)||s in this&&(this[s]=e[s])}),Object.defineProperties(this,{dashed:{get(){return this._dashed},set(s){this._dashed=s,s?this.defines.USE_DASH="":delete this.defines.USE_DASH,this.needsUpdate=!0}}})}get three_color(){return this._three_color}set three_color(e){this._three_color=e,this.color=e}toJSON(){return{type:"FiveLineMaterial",color:this.color}}}function T1(n,t="m"){let e;if(t==="m")return e=n.toFixed(2),e==="0.00"?void 0:e+"m";if(t==="mm")return e=(n*1e3).toFixed(0),e==="0"?void 0:e+"mm";if(t==="ft"){const i=Math.floor(n/.3048),s=Math.floor(n%.3048/.0254);return i===0&&s===0?void 0:`${i}′${s}″`}}function z1(n,t="m"){let e;if(t==="m")return e=n.toFixed(2),e==="0.00"?void 0:e+"m²";if(t==="mm")return e=(n*1e3*1e3).toFixed(0),e==="0"?void 0:e+"mm²";if(t==="ft"){const i=(n*10.76).toFixed(1);return i==="0.0"?void 0:i+"ft²"}}const Un=class{static checkDom(t){let e=t,i=!0;for(;e.parent;)i===!0&&e.visible===!1&&(i=!1),e=e.parent;e.type==="Scene"?(t._onAdded(),i?t._onShowed():t._onHidden()):t._onRemoved()}static checkDomEveryFrame(){Un.checkDomEveryFrameIsRunning||(Un.checkDomEveryFrameIsRunning=!0,Un._checkDomEveryFrame())}static _checkDomEveryFrame(){Un.cacheObject.forEach(t=>Un.checkDom(t)),requestAnimationFrame(Un._checkDomEveryFrame)}};let Ft=Un;u(Ft,"cacheObject",new Set),u(Ft,"checkDomEveryFrameIsRunning",!1);class li extends $t{constructor(e){var o,a,l,c;super();u(this,"name","LineMesh");u(this,"type","Line2");u(this,"object");u(this,"points",[]);u(this,"doms",[]);u(this,"highlighted",!1);u(this,"_geometry");u(this,"line1");u(this,"line2");u(this,"opacityBeforeHighlight");u(this,"colorBeforeHighlight");u(this,"paramsStyle",{});u(this,"lastRenderDomItem");u(this,"lastFOV");u(this,"_onAdded",()=>{this.doms.length===0&&this.paramsStyle.lengthEnable&&this.updateDomItems()});u(this,"_onRemoved",()=>{this.doms.forEach(e=>e.destroy()),this.doms=[]});u(this,"_onShowed",()=>{this.doms.forEach(e=>e.container.style.display="block")});u(this,"_onHidden",()=>{this.doms.forEach(e=>e.container.style.display="none")});u(this,"onCameraUpdate",()=>{var e;(e=this.five)!=null&&e.camera&&this.lastFOV!==this.five.camera.fov&&(this.lastFOV=this.five.camera.fov,this.updateDomItems({force:!0}))});u(this,"onPanoArrived",()=>{setTimeout(()=>this.updateDomItems({force:!0}),100)});this.paramsStyle=F({dashed:!1,lineOpacity:1},e),this.geometry=new $o;const i={color:new P.Color((o=e==null?void 0:e.lineColor)!=null?o:k1),linewidth:(a=e==null?void 0:e.lineWidth)!=null?a:E1,dashScale:1,dashSize:.02,gapSize:.02,opacity:(l=e==null?void 0:e.lineOpacity)!=null?l:1,depthWrite:!1,transparent:!0},s=new S1(fe(F({},i),{dashed:!1,depthTest:!0})),r=new L1(fe(F({},i),{dashed:!0,depthTest:!1}));if(this.line1=new Dd(this.geometry,s),this.line2=new Dd(this.geometry,r),this.line1.renderOrder=2,this.line2.renderOrder=2,this.line1.name="line1",this.line2.name="line2",this.add(this.line1),this.five){const h=(c=this.five.renderer)==null?void 0:c.getSize(new P.Vector2);h&&this.setResolution(h.width,h.height),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("cameraFovUpdate",this.onCameraUpdate),this.five.on("panoArrived",this.onPanoArrived)}e&&this.setStyle(e),e!=null&&e.points&&this.setPoints(e.points),this.addEventListener("removed",()=>{this.five&&(this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("cameraFovUpdate",this.onCameraUpdate),this.five.off("panoArrived",this.onPanoArrived)),Ft.cacheObject.delete(this),Ft.checkDom(this)}),this.addEventListener("added",()=>{Ft.cacheObject.add(this)}),Ft.checkDomEveryFrame()}get style(){return{lineColor:this.color,lineWidth:this.lineWidth,lineOpacity:this.lineOpacity,dashed:this.dashed,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode,lengthEnable:this.paramsStyle.lengthEnable,tip:this.paramsStyle.tip}}get lineOpacity(){var e;return(e=this.line1.material.opacity)!=null?e:this.paramsStyle.lineOpacity}get lineWidth(){var e;return(e=this.line1.material.linewidth)!=null?e:this.paramsStyle.lineWidth}get color(){var e;return new P.Color((e=this.line1.material.three_color)!=null?e:this.paramsStyle.lineColor)}get dashed(){return this.paramsStyle.dashed}get occlusionVisibility(){return this.paramsStyle.occlusionVisibility}get occlusionMode(){return this.paramsStyle.occlusionMode}get five(){var i,s;const e=(s=(i=window.globalModules)==null?void 0:i.five)!=null?s:window.$five;return e||console.error("请先调用 Sculpt.modules.init(five) "),e}set geometry(e){var i;this._geometry=e,this.line1&&(this.line1.geometry=e),this.line2&&(this.line2.geometry=e),(i=this.line1)==null||i.computeLineDistances()}get geometry(){return this._geometry}updateMatrixWorld(e){var i;if(super.updateMatrixWorld(e),this.points){const s=(i=Nr(this,this.points))==null?void 0:i.map(r=>r.toArray().join(",")).join(",");s!==this.lastRenderDomItem&&(this.updateDomItems(),this.lastRenderDomItem=s)}}setPoints(e){if(this.points.length===0&&e.length===0)return;const i=e.map(Qe).filter(Fe);if(this.points=i,i.length<2){const r=new $o;this.line1.geometry=r,this.line2.geometry=r,this.updateDomItems();return}const s=i.flatMap(r=>[r.x,r.y,r.z]);if(s.length>2){this.line1.geometry.dispose();const r=new $o;this.line1.geometry=r,this.line2.geometry=r}this.line1.geometry.setPositions(s),this.line1.computeLineDistances(),this.updateDomItems(),this.needsRender=!0}setResolution(e,i){const s=this.line1.material.resolution;(s.x!==e||s.y!==i)&&(s.set(e,i),this.needsRender=!0);const r=this.line2.material.resolution;(r.x!==e||r.y!==i)&&(r.set(e,i),this.needsRender=!0)}setStyle(e){var r,o,a,l;if(this.paramsStyle=F(F({},this.paramsStyle),e),Fe(e.lineColor)){const c=new P.Color(e.lineColor);this.line1.material.three_color=c,this.line2.material.three_color=c}Fe(e.lineWidth)&&(this.line1.material.linewidth=e.lineWidth,this.line2.material.linewidth=e.lineWidth),Fe(e.dashed)&&(this.line1.material.dashed=e.dashed),Fe(e.lineOpacity)&&(this.line1.material.opacity=e.lineOpacity,this.line2.material.opacity=e.lineOpacity),this.updateDomItems({force:!0});const i=(o=(r=e.occlusionVisibility)!=null?r:this.paramsStyle.occlusionVisibility)!=null?o:!0,s=(l=(a=e.occlusionMode)!=null?a:this.paramsStyle.occlusionMode)!=null?l:"translucence";i?this.dashed?(this.remove(this.line2),this.line1.material.dashed=!0,this.line1.material.depthTest=!1):s==="depthTest"?(this.remove(this.line2),this.line1.material.dashed=!1,this.line1.material.depthTest=!1):s==="translucence"&&(this.line1.material.depthTest=!0,this.line2.material.depthTest=!1,this.line1.material.dashed=!0,this.line2.material.dashed=!0,this.addIfNotExists(this.line2)):(this.remove(this.line2),this.line1.material.depthTest=!0,this.line1.material.dashed=this.paramsStyle.dashed),this.doms.forEach(c=>c.intersectCheck=!i),this.needsRender=!0}highlight(e){var i,s;if(this.highlighted=!0,e!=null&&e.color){const r=new P.Color(e.color);this.colorBeforeHighlight=(i=this.colorBeforeHighlight)!=null?i:this.line1.material.three_color,this.line1.material.three_color=r,this.line2.material.three_color=r}else{this.opacityBeforeHighlight=(s=this.opacityBeforeHighlight)!=null?s:this.line1.material.opacity;const r=this.opacityBeforeHighlight*Bl;this.line1.material.opacity=r,this.line2.material.opacity=r}this.needsRender=!0}unhighlight(){this.highlighted&&(this.highlighted=!1,Fe(this.opacityBeforeHighlight)&&(this.line1.material.opacity=this.opacityBeforeHighlight,this.line2.material.opacity=this.line1.material.opacity,this.opacityBeforeHighlight=void 0),Fe(this.colorBeforeHighlight)&&(this.line1.material.three_color=this.colorBeforeHighlight,this.line2.material.three_color=this.colorBeforeHighlight,this.colorBeforeHighlight=void 0),this.needsRender=!0)}updateDomItems(e){const i=()=>{this.doms.forEach(r=>r.destroy()),this.doms=[]};if(!this.points||this.points.length<2||!this.paramsStyle.lengthEnable&&!this.paramsStyle.tip)return i();if(!this.five)return console.error("Five not found");const s=this.points.map((r,o)=>o!==0?[this.points[o-1],r]:null).filter(Fe).map(r=>Nr(this,r));s.forEach(([r,o],a)=>{var h;const l=Ut(r,o);this.doms[a]=(h=this.doms[a])!=null?h:(()=>{var g;const d=new Br(this.five),f=(g=this.paramsStyle.occlusionVisibility)!=null?g:!0;return d.intersectCheck=!f,d.simulate3D=!0,d})(),this.doms[a].setPosition(l,[r,o]);const c=(d,f)=>{var p,m,v;const g=(p=f==null?void 0:f.force)!=null?p:!1;if(!(this.doms[a].__text===d&&!g))if(this.doms[a].__text=d,d instanceof HTMLElement)this.doms[a].container.innerHTML="",this.doms[a].container.appendChild(d);else if(d){const b=(()=>{if(!this.five||!this.five.camera)return 0;const A=this.five.getElement();if(!A)return 0;const C=A.clientWidth,I=A.clientHeight,M=C/2,D=I/2,T=r.clone().project(this.five.camera),H=o.clone().project(this.five.camera),W={x:T.x*M,y:T.y*D},J={x:H.x*M,y:H.y*D};return Math.sqrt(Math.pow(J.x-W.x,2)+Math.pow(J.y-W.y,2))})(),w=(()=>!this.five||!this.five.camera?20:Ut(r,o).distanceTo(this.five.camera.position))(),x=((v=(m=this.five)==null?void 0:m.camera)==null?void 0:v.fov)||60,E=2*Math.tan(.5*x/180*Math.PI),S=`--distance-scale: ${Math.max(Math.min(1-E*w/40,1),0)};`,R=A=>{const C=document.createElement("div");C.classList.add("LineLengthTag"),C.style.visibility="hidden",C.style.position="absolute",C.style.padding="2px 8px",C.style.fontFamily="Arial-BoldMT",C.style.fontSize="14px",C.innerText=A,document.body.appendChild(C);const I=C.offsetWidth;return document.body.removeChild(C),I};let z=0;const O=R(d);b>0&&O>b&&(z=-20),this.doms[a].container.innerHTML=_l(d,{style:`${S} ${this.paramsStyle.cssStyle||""}`,offsetY:z})}else this.doms[a].container.innerHTML=""};if(this.paramsStyle.tip)c(this.paramsStyle.tip,e);else{const d=T1(r.distanceTo(o),this.paramsStyle.lengthUnit);c(d||null,e)}}),this.doms.length>s.length&&(this.doms.slice(s.length).forEach(r=>r.destroy()),this.doms.length=s.length)}}class O1 extends qo{constructor(){super(...arguments);u(this,"isCSS3DSprite",!0);u(this,"isCSS3DObject",!0)}}const j1=`
varying vec2 vUv;
varying float vRadius;
varying float vDistanceToCamera;
varying float vCenterDistanceToCamera;
void main() {
  vUv = uv;
  // 计算顶点到圆心的距离
  vRadius = length(position.xy);
  // 计算顶点到摄像机的距离
  vec3 worldPosition = vec3(modelViewMatrix * vec4(position, 1.0));
  vDistanceToCamera = distance(cameraPosition, worldPosition);
  vCenterDistanceToCamera = distance(cameraPosition, vec3(0.0));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1);
}
`,V1=`
varying vec2 vUv;
varying float vRadius;

uniform float borderWidth;
uniform float radius;

void main() {
  vec2 uv = vUv;

  if (vRadius > radius - borderWidth && vRadius < radius) {
    // 如果顶点在边框区域，则使用边框颜色
    gl_FragColor = vec4(1.0, 1.0, 1.0, 0.3);
  } else {
    // 如果顶点在填充区域，则使用填充颜色
    gl_FragColor = vec4(1.0, 1.0, 1.0, 0.2);
  }
}
`;function B1(){const t=new P.CircleGeometry(.2,64),e=new P.ShaderMaterial({side:P.DoubleSide,uniforms:{borderWidth:{value:.01},radius:{value:.2}},vertexShader:j1,fragmentShader:V1,depthTest:!1,transparent:!0,blending:P.CustomBlending,blendEquation:P.AddEquation,blendSrc:P.DstColorFactor,blendDst:P.SrcAlphaFactor,blendDstAlpha:P.DstAlphaFactor});return new P.Mesh(t,e)}function _1(){const t=new P.Group,e={lineWidth:1,lineColor:3407837,lineOpacity:.7,occlusionVisibility:!0},i=new li(fe(F({points:[{x:-.5},{x:.5}]},e),{lineColor:3407837})),s=new li(fe(F({points:[{y:-.5},{y:.5}]},e),{lineColor:3407837}));return t.add(i,s),t}function R1(n){const t=new P.CurvePath;t.add(new P.LineCurve3(new P.Vector3(0,0,0),new P.Vector3(0,0,n)));const e=new P.TubeGeometry(t,32,.003),i=new P.MeshBasicMaterial({color:10994687,depthTest:!1,transparent:!0});return new P.Mesh(e,i)}function F1(){const n=new P.RingGeometry(.03,.035,64),t=new P.MeshBasicMaterial({color:16777215,depthTest:!1,transparent:!0,side:P.DoubleSide});return new P.Mesh(n,t)}function N1(){const n=new P.SphereGeometry(.018,32,32),t=new P.MeshBasicMaterial({color:5085183,depthTest:!1,transparent:!0});return new P.Mesh(n,t)}function G1(){const n=document.createElement("img");n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAMAAAB8FU7dAAAAw1BMVEUAAACDuuiAsu11q/x8r/+HxtKHxtKIx9J4ut6Hx9Jcn/uNwNlmmf+RuP9ppf9orel3ud2HxtJrpf9oremev/9ppP9orelQmP9ZoPWSuP92q/9cnv9prel4ut53qv9orelYoPWIxdJPmP+HxtGRuP9oo/+Suf9Qmf92q/+RuP+DsP9Pmv+FxdFtre2SyMiRuP9PmP+evv9ppf9cnv+rxf9orepZofV4ut52q/+Dsf+Esv+5y/93q/9aofbF0f93rP9qpf8IzZ1iAAAAL3RSTlMAEg4s3dK5nodgVQoF/Pf39vbt7evr39rV1NTOzs6srJ+fiIZ9fWlpW09ERCwcHMH8LhIAAADRSURBVBjTjdDHkoMwEIThBrzOm3POOQwSYCRhe/f9n2p75FD2zX/VXL5qOAjzkixLsFL6fOFF5PwpXUj/eEwx7Oh9Jq+FdV5MqZkXlU9K4KZsmqY02x/A8LSwv14o0ylJWkP087WVhDfcjmjj5b/E3+CEpDPdGY58C7tKfzSiiA9uB4dV/NIF7yVQ7AGuq0lOIzrvnLP2Et2aMzUqryge8FVX0Zjl5XkG3KsR593pM2zVEScjvbMU7IdGjF19IzZ43Ceyve4Ai5Jep93u9BJs3j/gXjHbRgy31AAAAABJRU5ErkJggg==";const t=new O1(n);return n.style.pointerEvents="none",t.scale.set(.003,.003,.003),t}class H1 extends P.Object3D{constructor(e){super();u(this,"disableGetPixel",!0);u(this,"planeMesh");u(this,"ringMesh");u(this,"crossline");u(this,"lineMesh");u(this,"ballMesh");u(this,"cssBallMesh");const i=.18;this.planeMesh=B1(),this.ringMesh=F1(),this.crossline=_1(),this.lineMesh=R1(i),this.ballMesh=N1(),this.cssBallMesh=G1(),this.ballMesh.position.setZ(i),this.cssBallMesh.position.setZ(i),this.planeMesh.renderOrder=0,this.ringMesh.renderOrder=1,this.crossline.renderOrder=2,this.lineMesh.renderOrder=3,this.ballMesh.renderOrder=4,this.add(this.planeMesh,this.lineMesh,this.ballMesh,this.ringMesh,this.cssBallMesh),Fr(e)}updateWithIntersect(e){if(!e.face)return;const i=(()=>{const r=e.face.normal.clone().normalize();return r.y>.99?new P.Vector3(0,1,0):r.y<-.99?new P.Vector3(0,-1,0):r.x>.99?new P.Vector3(1,0,0):r.x<-.99?new P.Vector3(-1,0,0):r.z>.99?new P.Vector3(0,0,1):r.z<-.99?new P.Vector3(0,0,-1):r.y<.01&&r.y>-.01?new P.Vector3(r.x,0,r.z):r})(),s=new P.Vector3().addVectors(e.point,i);this.position.copy(e.point),this.lookAt(s)}show(){this.visible=!0,this.add(this.cssBallMesh)}hide(){this.visible=!1,this.remove(this.cssBallMesh)}dispose(){}}class Ld{constructor(t,e){u(this,"five");u(this,"hooks",new Pt);u(this,"position",null);u(this,"magnifier",null);u(this,"pointHelper",null);u(this,"state",{enabled:!1,visible:!0});u(this,"group",new P.Group);u(this,"show",()=>{var t,e;this.state.visible||(this.state.visible=!0,(t=this.pointHelper)==null||t.show(),(e=this.magnifier)==null||e.enable(),this.five.needsRender=!0)});u(this,"hide",()=>{var t,e;this.state.visible&&(this.state.visible=!1,(t=this.pointHelper)==null||t.hide(),(e=this.magnifier)==null||e.disable(),this.five.needsRender=!0)});u(this,"updateWithIntersect",(t,e={emitEvent:!0})=>{var s;if(!t)return;this.abortUpdateMagnifier(),this.position=t,e.emitEvent&&this.hooks.emit("intersectionUpdate",t),(s=this.pointHelper)==null||s.updateWithIntersect(t);const i=()=>{var r;return(r=this.magnifier)==null?void 0:r.renderWithPoint(t.point)};this.abortUpdateMagnifier=()=>this.five.off("renderFrame",i),this.five.once("renderFrame",i),this.five.needsRender=!0});u(this,"abortUpdateMagnifier",()=>{});var s,r,o,a,l;this.five=t,this.magnifier=(e==null?void 0:e.magnifier)!==void 0?e.magnifier:new Zo(t,(s=e==null?void 0:e.magnifierParams)!=null?s:{dragEnabled:!0});let i;(e==null?void 0:e.pointHelper)==="default"||(e==null?void 0:e.pointHelper)===void 0?i=new Gd(t):(e==null?void 0:e.pointHelper)==="highlight"?i=new H1(t):i=e.pointHelper,this.pointHelper=i,this.group.name="five-point-selector",this.five.scene.add(this.group),(l=this.magnifier)==null||l.appendTo((a=(o=e.container)!=null?o:(r=t.getElement())==null?void 0:r.parentElement)!=null?a:document.body)}enable(){var t;this.state.enabled||(this.state.enabled=!0,this.pointHelper&&this.group.add(this.pointHelper),(t=this.magnifier)==null||t.enable(),this.five.needsRender=!0,this.hooks.emit("enabled"))}disable(){var t;this.state.enabled&&(this.state.enabled=!1,this.pointHelper&&this.group.remove(this.pointHelper),(t=this.magnifier)==null||t.disable(),this.hooks.emit("disabled"))}dispose(){this.hooks.off(),this.disable(),this.magnifier=null,this.pointHelper=null}}const Td="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function W1(n,t){const{x:e,y:i}=t,s=e*2-1,r=i*2-1,o=new P.Raycaster;return o.setFromCamera({x:s,y:r},n.camera),o.params.Points.threshold=.02,o}function Gr(n,t,e){const i=U1(n,t);return e!=null&&e.virtualPoint?i!=null?i:zd(t):i}function zd(n,t=3){const e=new P.Vector3().addVectors(n.ray.origin,n.ray.direction.clone().normalize().multiplyScalar(t)),i=n.ray.direction.clone().negate();return{distance:t,point:e,object:new P.Object3D,face:new P.Face3(0,0,0,i),raycaster:n,isVirtual:!0}}function U1(n,t){const s=gi(n).intersectRaycaster(t)[0];if(s)return fe(F({},s),{raycaster:t,isVirtual:!1})}const Od=`url("data:image/svg+xml,%3Csvg width='12px' height='12px' viewBox='0 0 12 12' xmlns='http://www.w3.org/2000/svg'%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cpath d='M6,12 C9.3137085,12 12,9.3137085 12,6 C12,2.6862915 9.3137085,0 6,0 C2.6862915,0 0,2.6862915 0,6 C0,9.3137085 2.6862915,12 6,12 Z' fill='%23FF5959'%3E%3C/path%3E%3Cg transform='translate(2, 2)' stroke='%23FFFFFF'%3E%3Ccircle cx='4' cy='4' r='4'%3E%3C/circle%3E%3Cline x1='1.07141075' y1='1.23997894' x2='6.64700843' y2='6.81557662'%3E%3C/line%3E%3C/g%3E%3C/g%3E%3C/svg%3E") 6 6, auto`,Q1=new P.Vector3;function Mn(n){const{raycaster:t,line:e,clampToLine:i=!0}=n,s=new P.Plane().setFromNormalAndCoplanarPoint(t.ray.direction.clone().normalize(),new P.Vector3),r=s.projectPoint(e.start,new P.Vector3),o=s.projectPoint(e.end,new P.Vector3),a=new P.Line3(r,o),l=a.closestPointToPoint(t.ray.origin,i,Q1),c=l.distanceTo(o),h=l.distanceTo(r),d=a.distance();if(c>h&&c>d){const f=-l.distanceTo(r)/d,g=e.start.clone().sub(e.end).normalize();return e.start.clone().sub(g.clone().multiplyScalar(f*e.distance()))}else{const f=l.distanceTo(r)/d;return new P.Vector3().lerpVectors(e.start,e.end,f)}}const jd=new P.Vector3,Hs=()=>!1;class ea extends Pt{constructor(e,i){var o,a,l,c;super();u(this,"_cursorError",!1);u(this,"actionIfNoIntersection","virtualPoint");u(this,"plane");u(this,"planeMode","onlyVirtual");u(this,"pointSelectorHelper");u(this,"five");u(this,"hook",this);u(this,"adhereEnabled",!0);u(this,"adhereRadius",.1);u(this,"adherePlane",[]);u(this,"adhereLine",[]);u(this,"_outOfFive",!1);u(this,"_enabled",!1);u(this,"mode");u(this,"pressDown",!1);u(this,"adherePoints");u(this,"setPressDown");u(this,"lastFiveHelperVisible");u(this,"lastIntersection");u(this,"mousePosition");u(this,"_mouseDownInfo");u(this,"_touchStartInfo");u(this,"config",{});u(this,"select",e=>{e&&this.updatePointSelectorHelperIntersect(e);const i=this.emit("wantsSelect",this.position);return i||(this.pointSelectorHelper.hide(),this.emit("select",this.position),console.debug(this.position)),!i});u(this,"onKeyDown",e=>{e.key==="Shift"&&(this.adhereEnabled=!1)});u(this,"onKeyUp",e=>{e.key==="Shift"&&(this.adhereEnabled=!0)});u(this,"onMouseWheel",e=>{this.updateByMousePosition(e);const i=()=>this.updateByMousePosition();this.five.off("render.prepare",i),this.five.on("render.prepare",i),setTimeout(()=>{this.five.off("render.prepare",i)},200)});u(this,"onEnter",()=>{this.cursorError||this.pointSelectorHelper.show(),this.outOfFive=!1});u(this,"onMouseEnter",()=>{this.onEnter(),this.emit("intersectionUpdate",this.position)});u(this,"onMouseLeave",()=>{this.pointSelectorHelper.hide(),this.outOfFive=!0,this.emit("intersectionUpdate",void 0)});u(this,"onMouseDown",e=>{this._mouseDownInfo={clientX:e.clientX,clientY:e.clientY,timestamp:performance.now()}});u(this,"onMouseUp",e=>{if(!this._mouseDownInfo)return;const{clientX:i,clientY:s,timestamp:r}=this._mouseDownInfo;Math.abs(e.clientX-i)<2&&Math.abs(e.clientY-s)<2&&performance.now()-r<500?this.select():this._mouseDownInfo=null});u(this,"onTouchStart",e=>{this._touchStartInfo={clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,timestamp:performance.now()},this.setPressDown=setTimeout(()=>{if(this.setPressDown=void 0,this.mousePosition={clientX:e.touches[0].clientX,clientY:e.touches[0].clientY},!this.mouseNdcPosition)return;const i=this.updateByNdcPosition(this.mouseNdcPosition);this.pressDown=i},200)});u(this,"onTouchMove",e=>{if(this.setPressDown){let i=!1;if(this._touchStartInfo){const{clientX:s,clientY:r}=this._touchStartInfo;(Math.abs(e.touches[0].clientX-s)>2||Math.abs(e.touches[0].clientY-r)>2)&&(i=!0)}i&&(clearTimeout(this.setPressDown),this.setPressDown=void 0);return}if(this.pressDown){if(this.mousePosition={clientX:e.touches[0].clientX,clientY:e.touches[0].clientY},!this.mouseNdcPosition)return;this.updateByNdcPosition(this.mouseNdcPosition)}});u(this,"onTouchEnd",e=>{if(this.setPressDown){clearTimeout(this.setPressDown),this.setPressDown=void 0;return}this.pressDown&&(setTimeout(()=>{this.pressDown=!1},100),this.select())});u(this,"updateByMousePosition",e=>{if(this.five.getElement()){if(!e||(e==null?void 0:e.buttons)!==0){this.pointSelectorHelper.hide();return}else this.pointSelectorHelper.show();e&&(this.mousePosition={clientX:e.clientX,clientY:e.clientY}),this.updateByNdcPosition(this.mouseNdcPosition)}});u(this,"updateByNdcPosition",e=>{var r,o,a;const i=W1(this.five,e);let s=Gr(this.five,i);if(s){if(this.plane&&this.planeMode==="vertical"&&(s=fe(F({},s),{point:this.plane.projectPoint(s.point,new P.Vector3),face:new P.Face3(0,0,0,this.plane.normal.clone()),originalPoint:s.point.clone()})),this.plane&&this.planeMode==="onlyPlane"){const l=i.ray.intersectPlane(this.plane,jd);if(!l)return!1;s={distance:this.five.camera.position.distanceTo(l),point:l.clone(),originalPoint:s.point.clone(),face:new P.Face3(0,0,0,this.plane.normal.clone()),raycaster:i}}return this.updatePointSelectorHelperIntersect(s),this.lastIntersection=s,!0}if(this.plane){const l=i.ray.intersectPlane(this.plane,jd);if(l){const c={distance:this.five.camera.position.distanceTo(l),point:l.clone(),object:new P.Object3D,face:new P.Face3(0,0,0,this.plane.normal.clone()),raycaster:i,isVirtual:!0};return this.updatePointSelectorHelperIntersect(c),!0}}if(this.actionIfNoIntersection==="lastPoint")return this.updatePointSelectorHelperIntersect(this.lastIntersection),!0;if(this.actionIfNoIntersection==="virtualPoint"){const l=zd(i,(r=this.lastIntersection)==null?void 0:r.distance);return l.face=new P.Face3(0,0,0,(a=(o=this.lastIntersection)==null?void 0:o.face)==null?void 0:a.normal),l.isVirtual=!0,this.lastIntersection=l,this.updatePointSelectorHelperIntersect(l),!0}else if(this.actionIfNoIntersection==="disable")return this.updatePointSelectorHelperIntersect(null),!1});u(this,"updatePointSelectorHelperIntersect",e=>{var s,r,o,a,l,c,h,d;if(!e){this.pointSelectorHelper.hide(),this.pointSelectorHelper.position=e,this.emit("intersectionUpdate",e),this.five.getElement().style.cursor=Od;return}this.onEnter(),this.cursorError||(this.five.getElement().style.cursor="");const i=F({},e);if(this.adhereEnabled&&this.mouseNdcPosition&&this.five.renderer){const f={x:this.mouseNdcPosition.x,y:1-this.mouseNdcPosition.y},g=this.five.renderer.getSize(new P.Vector2);if(this.adhereEnabled&&typeof this.adherePoints=="function"&&typeof this.adhereRadius=="number"){for(const p of this.adherePlane){const m=p.distanceToPoint(e.point);let v=p.projectPoint(e.point,new P.Vector3);(!this.plane||this.plane.distanceToPoint(v)<.01)&&(v=(r=(s=this.plane)==null?void 0:s.projectPoint(v,new P.Vector3))!=null?r:v,m<this.adhereRadius&&(i.point=v.clone(),i.adherePoint=v.clone(),this.plane||(i.face=new P.Face3(0,0,0,p.normal.clone())),i.isAdsorbed=!0))}for(const p of this.adhereLine){let m=p.closestPointToPoint(e.point,!1,new P.Vector3);if(m.distanceTo(e.point)<this.adhereRadius)(!this.plane||this.plane.distanceToPoint(m)<.01)&&(m=(a=(o=this.plane)==null?void 0:o.projectPoint(m,new P.Vector3))!=null?a:m,i.point=m.clone(),i.adhereLine=p.clone(),i.isAdsorbed=!0);else{const v=Mn({raycaster:new Vr(this.five.camera.position,e.point.clone().sub(this.five.camera.position).normalize()),line:p,clampToLine:!1}),b=v.clone().project(this.five.camera);if(b.z<=1){const w={x:(b.x+1)/2,y:(1-b.y)/2},x={x:Math.abs(w.x-f.x)*g.width,y:Math.abs(w.y-f.y)*g.height};let E=v.clone();x.x<10&&x.y<10&&(!this.plane||this.plane.distanceToPoint(E)<.01)&&(E=(c=(l=this.plane)==null?void 0:l.projectPoint(E,new P.Vector3))!=null?c:E,i.point=E.clone(),i.adhereLine=p.clone(),i.isAdsorbed=!0)}}}for(const p of this.adherePoints({intersection:e,pointSelectorInstance:this})){const m=p instanceof P.Face3?new P.Vector3(p.a,p.b,p.c):p;if(m.IsAlwaysVisible=p.IsAlwaysVisible,this.plane&&this.plane.distanceToPoint(m)>.01)continue;if(m.distanceTo(e.point)<this.adhereRadius){i.point=(d=(h=this.plane)==null?void 0:h.projectPoint(m,new P.Vector3))!=null?d:m.clone(),!this.plane&&p instanceof P.Face3&&(i.face=p),i.isAdsorbed=!0;break}else{const b=m.clone().project(this.five.camera);if(b.z>1)continue;const w=this.five.renderer.getSize(new P.Vector2),x={x:(b.x+1)/2,y:(1-b.y)/2},E={x:Math.abs(x.x-f.x)*w.width,y:Math.abs(x.y-f.y)*w.height};if(E.x<10&&E.y<10){let L=!1;if(m.IsAlwaysVisible)L=!0;else{const S=new P.Raycaster;S.setFromCamera(m.clone(),this.five.camera);const R=this.five.model.intersectRaycaster(S,void 0,!0)[0],z=.1,O=this.five.camera.position.distanceTo(m);R&&R.distance<O+z&&(L=!0)}if(L){i.point=m.clone(),!this.plane&&p instanceof P.Face3&&(i.face=p),i.isAdsorbed=!0;break}}}}}}this.pointSelectorHelper.updateWithIntersect(i,{emitEvent:!1}),this.emit("intersectionUpdate",i)});u(this,"mousePositionToNdcPosition",e=>{const i=this.five.getElement();if(!i)return null;const{top:s,left:r,width:o,height:a}=i.getBoundingClientRect(),{clientX:l,clientY:c}=e;return{x:(l-r)/o,y:1-(c-s)/a}});u(this,"onFiveWantsPanGesture",()=>{if(this.pressDown)return!1});u(this,"renderScreenCenter",()=>{this.updateByNdcPosition({x:.5,y:.5})});u(this,"emitIntersectionUpdate",e=>{this.emit("intersectionUpdate",e)});this.five=e,this.config=F(F({},this.config),i),this.actionIfNoIntersection=(a=(o=i==null?void 0:i.actionIfNoIntersection)!=null?o:i==null?void 0:i.actionIfNoModelUnderMouse)!=null?a:"virtualPoint";const s=(l=i==null?void 0:i.mode)!=null?l:"auto";s==="auto"?this.mode=Td?"fixed":"cursor":this.mode=s;const r={autoFixPCPosition:this.mode==="cursor",initialPosition:this.mode==="fixed"?{left:"35%",top:"20%"}:void 0};this.pointSelectorHelper=new Ld(this.five,fe(F({},i==null?void 0:i.helper),{magnifierParams:F(F({},r),(c=i==null?void 0:i.helper)==null?void 0:c.magnifierParams)})),this.pointSelectorHelper.hide()}get position(){if(!this.outOfFive)return this.pointSelectorHelper.position}get outOfFive(){return this._outOfFive}get enabled(){return this._enabled}get cursorError(){return this._cursorError}set cursorError(e){this._cursorError=e,this.five.getElement().style.cursor=e?Od:"",e?this.pointSelectorHelper.hide():this.pointSelectorHelper.show()}set outOfFive(e){this._outOfFive=e}set enabled(e){this._enabled=e}get mouseNdcPosition(){return this.mousePosition?this.mousePositionToNdcPosition(this.mousePosition):null}enable(){if(this.enabled)return;this.enabled=!0,this.outOfFive=!1,this.pointSelectorHelper.enable(),this.pointSelectorHelper.hide();const e=this.five.getElement();if(!e)throw new Error("five element not found");this.mode==="cursor"?(this.five.on("wantsMoveToPano",Hs),this.five.on("wantsChangeMode",Hs),this.five.on("wantsTapGesture",Hs),e.addEventListener("touchstart",this.onTouchStart,{passive:!0}),e.addEventListener("touchmove",this.onTouchMove),e.addEventListener("touchend",this.onTouchEnd),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mousemove",this.updateByMousePosition),e.addEventListener("wheel",this.onMouseWheel),e.addEventListener("mouseenter",this.onMouseEnter),e.addEventListener("mouseout",this.onMouseLeave),this.five.on("wantsPanGesture",this.onFiveWantsPanGesture)):this.mode==="fixed"&&(this.five.on("panoArrived",this.renderScreenCenter),this.five.on("panGesture",this.renderScreenCenter),this.five.on("interiaPan",this.renderScreenCenter),this.renderScreenCenter(),this.pointSelectorHelper.show()),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),this.pointSelectorHelper.hooks.on("intersectionUpdate",this.emitIntersectionUpdate),this.lastFiveHelperVisible=this.five.helperVisible,this.five.helperVisible=!1,this.emit("enable")}disable(){if(!this.enabled)return;this.enabled=!1,this.adherePoints=null,this.adhereLine=[],this.adherePlane=[],this.plane=void 0,this.pointSelectorHelper.disable(),this.five.getElement().style.cursor="";const e=this.five.getElement();this.five.off("wantsPanGesture",this.onFiveWantsPanGesture),this.five.off("wantsMoveToPano",Hs),this.five.off("wantsChangeMode",Hs),this.five.off("wantsTapGesture",Hs),this.five.helperVisible=this.lastFiveHelperVisible,e==null||e.removeEventListener("touchstart",this.onTouchStart),e==null||e.removeEventListener("touchmove",this.onTouchMove),e==null||e.removeEventListener("touchend",this.onTouchEnd),e==null||e.removeEventListener("mousedown",this.onMouseDown),e==null||e.removeEventListener("mouseup",this.onMouseUp),e==null||e.removeEventListener("mousemove",this.updateByMousePosition),e==null||e.removeEventListener("wheel",this.onMouseWheel),e==null||e.removeEventListener("mouseenter",this.onMouseEnter),e==null||e.removeEventListener("mouseout",this.onMouseLeave),this.five.off("panoArrived",this.renderScreenCenter),this.five.off("panGesture",this.renderScreenCenter),this.five.off("interiaPan",this.renderScreenCenter),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.pointSelectorHelper.hooks.off("intersectionUpdate",this.emitIntersectionUpdate),this.emit("disable")}dispose(){this.disable(),this.pointSelectorHelper.dispose()}setAdherePoints(e,i){e?typeof e=="function"?this.adherePoints=e:this.adherePoints=()=>e:this.adherePoints=null}}const Vd="data:image/png;base64,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";class Bd extends P.Mesh{constructor(e,i){const s=new P.MeshBasicMaterial({opacity:0,color:0,transparent:!1,side:P.DoubleSide}),r=new P.PlaneGeometry(e,i);super(r,s);u(this,"name","opacity-mesh")}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}}const Fl=n=>n?n.visible===!1?!1:Fl(n.parent):!0,_d=1,Rd=`CSS3DObjectPlus@${_d}`,X1=.00216,Y1=.003;let Fd=class extends tn{constructor(e){var L,S,R,z,O;if(ei(e.cornerPoints)&&ei(e.width))throw new Error("cornerPoints and width cannot be both empty");const i=(L=e.container)!=null?L:document.createElement("div"),s=(S=e.cornerPoints)!=null?S:(()=>{const A=e.width/2;return[new B.Vector3(-A,A,0),new B.Vector3(-A,-A,0),new B.Vector3(A,-A,0),new B.Vector3(A,A,0)]})(),r=(R=e.ratio)!=null?R:Y1,o=(z=e.dpr)!=null?z:1,a=(O=e.pointerEvents)!=null?O:"auto",l=Math.max(X1,r),c=s[0].distanceTo(s[1]),h=s[1].distanceTo(s[2]),d=Gs(c/r*o),f=Gs(h/r*o),g=Ut(...s);let p;if(l===r)i.style.width=`${d}px`,i.style.height=`${f}px`,p=i;else{const A=document.createElement("div");A.style.width=`${d}px`,A.style.height=`${f}px`,A.style.pointerEvents="none";const C=r/l;i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.width=`${C*d}px`,i.style.height=`${C*f}px`,A.appendChild(i),p=A}super(p);u(this,"version",_d);u(this,"isCSS3DObjectPlus",!0);u(this,"isCSS3DObject",!0);u(this,"name",Rd);u(this,"container");u(this,"width");u(this,"height");u(this,"domWidthPx");u(this,"domHeightPx");u(this,"cornerPoints");u(this,"centerPosition");u(this,"ratio");u(this,"mode","front");u(this,"hooks",new Pt);u(this,"opacityMesh");u(this,"selfVisible",!0);u(this,"setVisible",e=>{this.selfVisible=e,this.visible=Fl(this.parent)&&this.selfVisible,this.opacityMesh&&(this.opacityMesh.visible=this.visible)});u(this,"updateVisible",()=>{this.setVisible(this.selfVisible)});u(this,"createOpacityMesh",e=>{const{domWidthPx:i,domHeightPx:s}=e,r=new Bd(i,s);return r.position.copy(e.position),r.rotation.copy(e.rotation),r.scale.copy(e.scale),r});if(i.style.pointerEvents=a,Object.assign(i.style,e.style),this.scale.set(l,l,l),this.cornerPoints=s,this.ratio=r,this.container=i,e.mode&&(this.mode=e.mode),l===r)this.width=c,this.height=h,this.domWidthPx=d,this.domHeightPx=f,this.centerPosition=g;else{const A=r/l;this.width=A*c,this.height=A*h,this.domWidthPx=A*d,this.domHeightPx=A*f,this.centerPosition=new B.Vector3().subVectors(g,s[0]).multiplyScalar(A).add(s[0])}i.classList.add(`${Rd}__container`);const m=new B.Vector3().subVectors(s[1],s[0]),v=new B.Vector3().subVectors(s[3],s[0]),b=new B.Vector3().crossVectors(m,v).normalize();this.lookAt(b);const w=this.up.clone().applyQuaternion(this.quaternion),x=v.clone(),E=new B.Vector3().crossVectors(w,x).normalize();this.rotateOnWorldAxis(E,w.angleTo(x)),this.position.copy(g),this.addEventListener("added",()=>{var A;this.mode==="front"&&((A=this.opacityMesh)==null||A.removeFromParent())}),this.addEventListener("removed",()=>{var A;(A=this.opacityMesh)==null||A.removeFromParent()})}removeFromParent(){var i;const e=this.parent;return e!==null&&e.remove(this),(i=this.opacityMesh)==null||i.removeFromParent(),this}removeOpacityMesh(){var e;return(e=this.opacityMesh)==null||e.removeFromParent(),this.opacityMesh=void 0,this}dispose(){var e;this.container.remove(),this.removeFromParent(),(e=this.opacityMesh)==null||e.removeFromParent()}getOpacityMesh(){if(this.opacityMesh)return this.opacityMesh;{const e=this.createOpacityMesh(this);return this.opacityMesh=e,e}}applyMatrix4(e){var i;super.applyMatrix4(e),(i=this.opacityMesh)==null||i.applyMatrix4(e)}applyQuaternion(e){var i;return super.applyQuaternion(e),(i=this.opacityMesh)==null||i.applyQuaternion(e),this}applyScaleMatrix4(e){var i;this.scale.applyMatrix4(e),(i=this.opacityMesh)==null||i.scale.applyMatrix4(e)}};const Nd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANgAAADYCAYAAACJIC3tAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAA2KADAAQAAAABAAAA2AAAAADs6jNqAABAAElEQVR4Aey9C7ClZ1Wu29253yAkJGBCQoAEdBOCbkSgkIMKKgSjIJvLPket2qVyDiLi8VLiPvFSp8ACEUuUAsXN3orgQQoBUVBBvLCFjbg1CiiICSEEwiUESELu6e4znn/OZ/a7Rn//XKuTbO1e7aj65jvGO94xvu///+9bc625Vjo7d/yb/WvegZ3/QpPv/Rea59+maXfgX+oBt2kPi/DO3tsDrb+zh+jO1h8WD/VAL/JAH+KB9j8c9AdyD7eq3aqu39+tHpKt6uh/INq+nsM+vqMP8nC9cVu9X+t0dzR3IPd83aG4oznnX1ev5t9weQfWPex/u0mLO7CVezTS3BnOez/qYS5x3aYf5e4Ml/Pij3p1zWEbb/UBHk43aCv3ZKRJLn3u3YHGeb97bebw123wnjuQuGs3m8t1jerMHXa42cM7XG7IZvdhlE/uzvjc46z3no84cyMcbezOZXxnfOfPHnLiupyabY8H+hC32w1Zd/09Nxcnry9yv/TFOS55/LSsTX5uEye/mT/Kb5VzLamXS9wsn9pt5c89uG11kYOLWXfdPWcs0k7/jmL2WOeTO1DLzbyZb/6OImuz1nX2WH6kzdy29N0g2/LiBhe17nozN/LlRjjimB5+Lmc+ER+zZhFt/TU392a+eTB9ZpvjzK1Dcpg9F9G+1zl+n2IbeUduo2vZ7FLmNm3yI18OvDM+68v6jLs/iuHWWd+4Geuvw8zh95i1y21lHXP6OX5dz0M25wM/ZC9giwufu87k9UcIl/wdiVlq9si4+8SY+kU0/zra+HIi1frgOr/nRvqu6f2JMXWLaN/rHL9PsQ28w+kdrD+u3Lz64DrffCJ9M9ZPfuTLgRh1aT3O3MjvG9ZYpEYf7P4oVpdIH9YmR5wGbx4+/dQdFv7hcMBGGzU5fbD7cgeKbJ6syVg/cZ1PbivGxk7LWD+x+8QHMnIufGq9f/ogBq8/EYfLy+FwwPqzdBPA64PdlxN3LTXGB4p9vlEMh9H7jlhu4pEvB3ZfruOepXbE9zWice364MjQzeVG+kOSOxwPmA/KjQB2X64fqs1i60bIvDnPKE4O/0Ctb1jjESaHnyMPFWvOGB/jXlBjDIfZlzr8jmgOGzvcDpgb3AecMX6OPEwjf8RlffeZU04fxODTepy5db6bW43xCOGSx/cgMX+PzdHbHD73oR8yeDT2IT4sbbsfsLmNmjx+H6PDIwemb62ccUc2GBzWMblJsHxRl9zIZzN3S04/Eb8P5pPj0BD3g1XUxHG9Hqy5dTqffUV6HBa23Q/YuofIw3Zj6Hf00ICb+dSq6X1Yh5z+jl/5lV+57+Me97jzTzvttAedeOKJ5xx55JFn7tq168SdO3cezSjhUTV4RkfUsHe5q0Owe+/evbtLe1vh7cXfsnv37mtuueWWT95www0fu/LKK//pjW984wde9KIXfW5ZY63oYUr0QLFeD5AHhZh1YPogWk2tMbnObSWn5pDGvDGH9IXMLD6vTz8RP4ebOBHfgVY/NfLZa+X/wA/8wKnPe97zHnfmmWc+8rjjjvuqOkT3qj7HLOcuWNncRlwJtugwdxp9b96zZ8/nb7rppn+og/fun/zJn3zXW97yluuLJ8fgoHRfDsyhfsTZY4TVZr/Dhm7bWn8Q2+1C8/r0wfQ9KHD6HiI5446Zx5/ietd48OMf//innXTSSY+sd5evqME7ETksN5Q+aH4SLXWdM9dxs/rso0/NTbfffvsnbrzxxr/9wAc+8MePecxj3recl5yHJ325EapLxHeUu7p2OC19uW2D3uxtc0HtQvL69MHR6IerH6ZRTJ9dz3nOc079qZ/6qWeeeuqpj6tv8x5YHO9OmJsnN9ki86//6j1gJfjYrXXg/vGqq65665Oe9KTXf+hDH7qluNFhGnFco7zXSzy6B3KVXuXxt515Y7fdhS0vKK+vbyhjDxbx6BANue/93u+9x0te8pJnn3zyyRfVOxTf8lHvxhJZhjw+1uMFO//a9T2er1xkur7H1sPnqO8o93zq+uuvf+ery370R3/0k5X3AO0OX87DZOw96Mh8cFr6ctsGuaHb2by+EcId0OF6whOecOLrXve6769D9R/q56izq54ebiA2FuaGMddxodr3Sh6jTi2xfkdyaf8r6umZ96Y+Q9n76Wuvvfb1T3ziE3/lfe97382V9yCNkGuB994kFr26R90n3lbmw9lWFxUX4/Ul4vfhZurvVtOnd5dccskjzz///Ivr27+vqVo0bqA8VM7B9OQxOPxE+M4Zk8MOpnrW433hOuqDyt3v+8M//MMfv+iiiy4lrpGHjLV7uEQ4R7mr6+s+8bay3BTb6sKWF+P1JeLnmDtcu/70T//0wd/wDd/w23xQsezHJuHjcAwfs3fG+MnjyyVarxZMn7wmb+x8Gcsl5nz0yJha+1qTGvKp96CBu9/61rc+6ju+4zsuLz8PmD51/YAVNfVzLmNwW5o3dzteXF6bPtjH7AGrn0E+VIfr9KrhqzQHyz7lrswNuCLCyRy+G7SvIUp27OF3WjXv7YW3VYJxa/n8josPHfbWt6fHVJ7flfHp5FGFR1Z+4irua2RexmizF706QPjd+vrtDR5dnz7+6gknnHBx+R6qxNG89JfHx4i3rR3Ov2je9KHWxr1Hidg0/V0rNx595jaJB8pD7AblF8NfrE/sruaXwvWzzcc+/vGPf/S3fuu3Pvhrv/Zr19CwbK7nIrv/69T7uc997ulPecpTzj3nnHMecI973OPs448//n71re05dShPrpJ83nkY8Ocs16HPt857r7nmmr+eK/o3fnEHfODb8X7ktemDfbj58zBM/m233fam2pyPqRreRTxk6+4Vvdl8DOeps7T3S3WQLqsN+f43vOENf/IjP/Ijl1fezVru5KPHkl8wi9cRnzX6YtZO/stf/vL7X3jhhV9/73vf+6HHHHPM+XXoTqsE10pvRv48VeHQpr8uqS8Of3LUUUf9H6XgcGadB5d++PYGMeNFtIj1tx3OPoxtcqVeXyJ+jn7AOBzYkfUucMRll1327tqI51Xst2tTMl6o91C5Wa+vb5/eX7+8/f2nPvWpf1m/V2IDYmwu5naT6ZsDMTfjItr6K/20kU9f1ojtPffcc49885vf/IQHPOABT6i/MDm/ON7lXBNfUDw45U68h+tP63D978XRT40HDc6DJcI5yt1wffDb1vIhbMeL9PoS8ftg0zHgOSz4E5511llH1Ldvf748ZLcWz8ZTx7dcaHmX+tx11133F695zWte+0M/9EOXLzUF+5kbqmMXmu/8uph1dUsu/a7b8731u72f//mf/+761vLC+vb4PiVAzyHhmrnOI+td/c+OPvpo37k8VJVaHTQOHGsfHS6vSaQufeJtZetu+Ha4UK8vET8HGwdbHaqlTzyN+9znPkdcccUVf7Y8ZGycqR+H6otf/OJbLr744t945Stf+aWlvmAy5yQYbSK5jnN6eHqqJ+6Wc+p3zBp62TP77q1vY+/xMz/zM8+uP/d6Uh22U0q3t/6O8Q/qZ7ofKN9DJHrQ6IHvIO6jqA3XkPOS21bmzd9WFxUXk9eHb6wP8k5l7LsXcR64I84444xdH/nIR36uPjV7dH0Vv+ztb3/7y77zO7/zw0ud9aCWfm4ifVF9xumbB+HpK8Kl5Zzpq0kuffrZk8OBye156EMfelT9HvDI+iX7dUveg5VIHTVy+PYyB4eJ3Z+S2+klb/J2ui6vJa8P31ifQ5S+71pw/bB54FKvD2JoRsaGUuPm6khdcuqTx09TY3+QNRirVScmn3PK94ORBwTfQS2+h0odMWYMYqO55BaKbfaaH9tus0tbezlsNDebvjEPHB/UN2ajeIh6Ho0byl5FrQw9hsZ+clOiXuxJbI+RJnN9PalXl0jemHnSnN8exmj0RbjR9ZKnv4gu56PmsLHD7YDx0HNDuhF44Lkh3ABwHgg5a9S7eeyLTg5NmjV+he+51DsPms67SdFkL3R9Hc5JH/SMrIfP/vpgDmp6bG3ycBo81ueUX2S38evhcsDcWD5sUR5MYwOwofg2ESPum4SYzWyOjQ7n5uk9K7XK6aunxj7WG6NNMw+nr5Z+Hjh8+7tOauA088T2ALMv90EdvIez64jtbb11lVr1WOeT21bmBtpOF+VDFrk2fb+6E7vp8B1qM4YbGRo3Enk3HHxuQnxz6DKG7/FIa52IpvvWieTVgcwzWpu6XmcsUp/a7hsndj/vGb6Wvty2wO36DuYDE/NhwTHYOObxNXkRPvPW5ob14KbWDak++6efvfVH67KmIzXObz2x8+cXknx3o4/6Pp+8GuI+7N95YvqZz7XQz/XgY+ixfp8W7CH+6o09xC9jtXwfEui1iYj0QR807+LJ45svd7V50Y90cmwUe1IH7+Zx062LqemWddkPnXHOr2+fjLu+a3Iucx6SXDe+I/P6ohqR+ckRayM/OXWHLOYDOGQvYrlwrqVfzyhOHT6HAhMz76Gyz0hjTqSXmwROP3l8zBxovdwkuAMvOac9RdsZ51xyaOAzlzH+3CGytufh5dSAWs4Fl/OpOSQxb+oheQG16H4NxiLXpQ/y8DwoHiA1qcM3VtfrrQPpq77zxFrfTPCdy176I6TWOe1hTA4zJs919D5oMOv1s04O9KCI5ozp03uZU5vIPFmTtanDP+TsUP+Qw02QiG/MA8kYPw+LuhEmh++Dd5Mad2RODD43lhyY1uudV03m8XMtaOTU97y8WtF5sn/X5vrRqbUHiMZexOn3tZlXA9oTP3m0mSM+5OxQPmA+HB+M6EMg5jBgmcPnwZkzD3bzMMFTp/ngRwgnTw0bUC5jeqnDx1xb8vqg+dTK9Xxq8LOPcXLr6sllPutG86eWuTS0mj6obw5M3vkyf0j4ows7FBae6x75W+W41n7QspYcsRsGPXFq4DR5N0SPU6cGzv7o812DHJx5a+Qyrw9uZnP11PW5Rhwa10K+r7nn1Yr2BLGul5uSy3znzB3UeKi+g7FBsMT053LJp09t1vPAjdOnBnNDoMHX9HuNsYherbXON0I5tCMfLvne27rR/CMOPdb7qAUz5/yZdz2po6c8vpacvqjmkMRD8SJYc193vgvxIDI/8pNLPTwbwncucpi8daN4odz3qhYmN1ny+9T75pDrc9jDeuI5jT06WgNvP3z7yOcccFjqjZPTF6eiqNsKj4aR81sn9r7GByUeau9g3niRm9r9jDMPb04kn4dTTebRaGrVwePnw7c2OXXmjBP1s7ecuK6e+axNHbWafK4Njth6taBc6tNHY8/057g5nlrnwsdG81jfc4uKg/DVBR+ES1stqa/RuCMFcunLgfkQk0ePpca8/CSIl8xLdy5j/JzfmkQ1cFmrxvqO5JNT33FOA48xp58Kyk2J5Ytc7yOPLP0em0v0muGcnzottes4cwcV+hX5oFpUWww32JvspkvsOcvVGKOT64hGbt09UZOYfvaRh9PkOpJPTt86Ub7jqF6NtV2TcfrWdbwjmrzn6WfvfH5dY465R2afUe6g4A72Bbo+sN/85PDVjnSp9carJ9YXu2aOd66e7/UZWyMn2mMury7z6fc8OY3extaA+urAfAfLOnL26H7GqRnxmU9fbXIjH47B2vqnl/Q4qMyHelAtarmY0drgHN7k1OmLtOp+xpmXF8lpyaVP3hh0TdaJajJObfpo1MN3c57OZ6zGeuPUOKcac503L48O39i8PKipI1bnWozF1KyrV0dd72XdQYMH81/TewO5WdxIRpqcN9m4a4hHteqsV9fnlQfdDNmv16PTRjo4eWszpnazefg2Vs1Ib27UV446/a4nh5nX7zrzyeuD5q33HQc+89bIo0+OGBtxi8xB+po34GBZojfZtYH6rlHOh2ReRDfy7wiXvaxnXje5XOrw01IjD5frz82jP9LCWafOXuTSH2nhtN4n+fTpmd86Zk4fdD1i51ybeTF16ZNnWJc5fXuI8AeNsfCD0VwX6M3VN5frTk4d+fTVqxV9gMai9aM6a8yNtGrop9/18Jhzpk7f+pEOjTry3bcGvlty1q3j5jS9xnnmePLmQP3k53y1ifq9hnhkeT9H+buUO9i+RcyLd9NxwfjG3lDj/NRPzhoQoyZ1E7l8Sd56EQm+cy5LVuuBn9P6Dpc19uk1zpE16dOj18jJe43OMao3Zy2x9QfCodWcx/l9pyNv/0T8tFE9ee9Jake+63eOkaZz1nS+x32tPb9pvNWJNm20FNyV/ehlP9AbmJzrSu2Im6u3JzXZV37EZX/r1I9iOevEXJNcx9TkHPqJvdZ4nYYclhrm7D8rqQGx1BtPieWL9ea8jrm6XIc19hvlNutj7V2NrmXLfbnwO2p3pnYrc/KVTXOuRG8ynDx6fXHEjXKpm/Opc1402FyvnjO2XkweX8u+ciN0TfRLk08O33n7O03qslf61idal7qRLweytjyE9lOTPTtnnbzXSSxnPUh+nY1q1unJbblms8n7RAeq7/WbxfYHuQjQkbF9Ug+n1nxyW6lX3+uN+3ydX1fv/L2m8+ZF55zTwc9Z1nSdueQ713PO03nWCJf1qaHOvD6IpU4/tQvVvgOZc2U9NXmvrLsj6DrW1W5Fs1rQukbmXLzxHG5V1+tdsPVg+t7A5Owx4vIdEF32M15Xb8/UwrmOXpu67qe216uVB+Wcb0mthVE9BfazuMcjPnt1fcYH4qsVc21wDK93TmNNauEwa8R8fgvF+lfrumqOR7cuN/XZ6iI2092R/Ghx9gHJZ6zPwkc+3By/roYctq52Li/vWumhTw6b48jNaa0Dt2L0wZxrEe17dZ6uM96n3Lhpeh1x56jNPvpi5jtHzJr9tm+dNnNzfl6/c8GtM3WpuTNc9tmwqTYkIli3wFFuxEW7WZc6bzii3sd8vjPBdZ2fSsnPYc6hRo51jObJ9akFsexhnHryGaPRrDUPeh2pgV9nWe986olHP3dZg87+cuqTt5/cKO51ag70IDlHx7w2csbpyzE3/pzZ23zG6ZPv8Rxnr7UTKxotrnObxfbaCtpLpIYLMwb1yWH9MMCpEeGwrM9c+uiyJ7E24nstWg/IKJcc16bWOcDUJD/n94dPfXLpk8tDoDY1zJNx+pmD7/UjbXIjX050DmOxz4UODkPDyFif/MjsS+5A/V6zX//NJh/lk5vzmShz+00cBDovrNfkzeo549zwcqLTEDvgsm9u7uyVtfi93rqcK/1RvVyiNbkmOO9J18qrEVOnr9ZY7HyP0cGt43Peruu1mc8cvn3UyI3e7VgXpsYauXwm5NSRX2f2EdHqd8ycPdUYr5CLW2c9n/HIH3H2N9cXAz/irAOzVr9j6nrOeJ0mc+lTy2CN6/pQk6ZWNDeKvX5yfR7rtoq9V9bZWw05/VEu8+mnNutTo+81dZ35RPw8WJmzHg7zPuZanGuhWLzKqTeX/bpvPIf0MNd9+0/YJ92QrCDzI19uDulnrvdmgeb059Ba9KnJdxx7daS2cz3O/plzLnuQ61zW9lzG9kjOueyR6FwjzpyYmu4zX1rG1ieHNuP0Mwff69X2nDH1owPU6/z2Va1550t0TbkX4LScWy7R3onpoyUecfYxZ7xCFjpnmRv5cmD69OvxaA403MD+tj7SwnER9k0NnPxmSF1q6OmDkUeDETNyXjWiOtEbbV4kjxFnv5x/ErS8nHXGI1Rj/8TUw2v61sLLdY28OKc1D476Zn6kMd/nz/nom5axPcknn3p950rsfo+pTa73Mp7wQP8W0QWDW/GZRN00YbywSP5NENBNTlp9vwh50Jxc1sGpQTfSoMfycC+Yxas9ktNf1w/Nulrz9srrlst6rzNz+nltqct6tXBq0vf61YHkNd9BiK0zv25+653TOPvoZy45ah3Omfnkku/3tK8breb6ch59NSCc8+mDm5pFXZi8fmL3iUecfc0Zd/Si1PUY/eiC1JPHZ6CTlzOu1GTGIqS+uBlHvm9QY3uAuZ7smb7XZh25NPvIGYvyoL3we961pKbXkOv5kQYO63prE12HnHXiHG8e1LzHxPS1t746Y3rjj8x5wa0MeqTOGMTst4jqdW7i5PVBBw3051BNIj7GQqhzQembB/MrKDFmDT512Dp0LnT51S1rnB+UR4/JZR95MevhsOwzl7en+V5HrEac4+A1tJp1W+GypvvZp/sjLVyfU07ePiNeDsRSy/3K+zv3XKfCpTbr5eEYmL7I3tMfYdbgY+g22Fa/RewXZLwVZMK8GfgsRHTxxurhvXFqzIHdnEM0bw9jUI3oelKjDo159eZSP8p1LuPegxzzYOmzfuc3l4jfzXow/a7LWB1c97su45FvPYh5Xfhy+FjmFszG+ZPD78/TfmLm4fr9y/n0QYdf1K0zZu40a5lDP/OTn4vZL1mEizZH3Ac9DmRQj17k5zAGsWgO1PAzTh6fiyTvxabWHDpNLahWDo2cfsZwWvL4OdSAqcvYewGHr9mnx/1a1InqsxfcaH5rzBmrN845vb85T9bLy83F8nn9oxo5dHlN8A57uH+IefOQ33XOOecccdttt/3m3r17L9+zZ8973vjGN56zzKNx0C99+yeWZNbQbbD9iMoml41HvhdALv0N2je/+c1nf/M3f/P3XHPNNf/zvve97x+X1oc0Qrjk06/UZPlVhbmwnJOazqsBscyP4q1y9OnzUYs5xyLaGPe61HjNqZnjUkMPdfZzbdwz1yOnVsz6Oc2cNufbisa50I7msoc59Kzfa9AfoVr25I6zzjpr1xVXXPH2nTt3PrTC62ucUAftn3bt2vVN5Ts/yD3aCmaNfpVORryyaQGraGvO6II8XOCG8fa3v/0BT37yk997wgkn/NDZZ5/9m7fccst/KQ1fadTh51ce+xe94YYSY1yAmkRzeYHkRyZvPZqsI1aDryWX+uRTKw86zOd1yCVmLXzW41tvDuzWa7Kn609N1qvdCjfSUjfinVd0fmPnk7eHMbrOmQM37Kv73Oc+R8Th+kzlL6vx+TpsX/l7v/d7Dwy9daK9srd+lW3NKOgml8ikNu++ccdJX2/LrzvyyCO/ser/ucY9a5xy++23v+2oo476/vIxblgOOL6S+C7ljferC3k5fCzX6jrh0bEuLXNwWTeK5dDRa7N69aBmjWt2TvLppx6/653fnLXyifZK5P5ljTnrzBNj4iLa9zzoQc58R/WpgUudfud7rTrn5Fnm88w9R23GO88444xdV1555R/UO9UFlft0jc8iKju6xlfdeuutf3jMMcc8q3zX6h4D+0Ajl/qiV/X64GS5WLlELsyHAq8PejH6xDmOePzjH398Ha5HF39tjS/XuKLGNcU96eabb+adDL3vZvRhYNmTOG+0utTKqVVPf8w8aK7XT8J4sUZKfY+T775xn5Me5tLvnOtXY16UT8THUmOcnH7HqXhZby7r+7WgyYEWjRxxt3W57N+vnz7k7U9ML6zjro985CM/G4eLA2btzeVff/TRR3/Tgx70IA4b8zhcWyK5jPtclR5bXgAKC7u6NzfuizKe8PWvfz1fHY6p8fllQy7wihrX1FeOC7/85S+/tHx7+a2iPeAxcMRNyeULfTF7WbtgFzdWX4160AdmDsyeau0rwqfJi+TwGVwDZqwmsefUd6RX1pHHer2xuUlUL30t5tXbW76jefWjezXi6INZn769zFHP6Gsl748UWYPvfZny9WMJX9xvqcHhwuyJf3WNY9/97nf/p0Lq1o0+T8k3XAOxhnZlLn5FLJ0U6Sfi5xgu7pRTTnla6W6twTuYFwd+vMaX6gb8h2c84xknlU999q9wGFOrTk2uw7yIBlOjP5HxknnoXh/SLc2PPte5rl4t+pw360f3xzpRfce5PLxGDWNufnWg/Tt3R+p7L+bXek4eVIfG4T3icGE768eTywt5h+ITRWpyfKni20477bRnFI72r33nsMo23At0+xmN58zG5C2W67jfAn/4h3/4lPpB8pyq/WKNvDB87KYau/7mb/6GA5j19Cbuc1AH1y1584n6zks9XI7eM3P61onyzm9sXpzjzXfs/ajX7JVIbl1sruuSz/6j+dFiidarz/wkXurVyY1Qzag/evPWGs/pp/30rne961eXBacUsk4HNP4Xao+e+4IXvOCM8kd7cLQP5+am537mAk0YZxMnyQXo89VCHzTeefXVVz/nnve8548V9+Ea/PyF0ZcLwy6oj0o/V98jP7b8/OFRH/SG6FOXPnnmxdL3OuD1vSY4LHljuUmw1MiJqc055UVy+qI9yOmLncv6zNHLONE5rBPh05LXF9Hhsybus9bz8mjQku+a5PDzOtUmpl/yVT/7+5ztQ4zvH0u4/+CmbxHJ1++83l2HiAP2QeIazlPujuNrPPjaa6991cknn/zi8rkex+4t+PRCDzrK3TeHi4Z04fiaHNiHFwiPvyGubw+fWNxtNTxc5a4e2gnlH/OFL3zhrYXW2QOdPfExYixvjuuRU7NQ7r/eOd4+5kG5RPM5T/rmQdZEzmtTl2uFky93NSc+Zh60T+etV0tekxOTxx/Vyrl+4+whlz2yd16j6wYxc4to/zWMeo9qXA99R2ulP7ld9bvX3y88tsaJNTgMmD1vKP/Wk0466RsLJ/0S6U/sPGJRGzhjMA39ZDTpZrIjOidKdCGrBZ5//vnH1DvTA0vP97lcjF8Vyp38Uwt3P+c5z/mvhdkLrWuSL2p1Q+Aw0BtL7A3DV4OP9VzGmbeuY+p7zpg++qADPi2vjb7WoNFPTdamRq2YOjiHvNegHtzq/NakXk5kHn0RznnxMXPigt2nyznMiaMcfdaO5z//+ewx3o3usWzkIRO/WHv1fhdccAGHkHtPv47r5qAteUxcRI0w2ZsxWQ6/DUzUR3fE5Zdf/rT605SfK/+jNfgZLI0b9bB6677siCOO+I7yuVA4bsI69IaIJV9tklw7/Fw8l/Oayfsgk7MfeSxzc/EkDK19RXqkr76jc6sV0eF3G3Fo5MXk7GFOTI2cSC6fhdrM64Ppp9b7kJy+6D1gf2HEfU92btqLaOvDjrfUr4buX/7f1mAd9sPn4D3o0ksv/c/nnXfeG8vnmvz2EHR0ntjh9YmVWlyvC4YYGQtZN6jP/BSfeeaZFxXPwvIDDhZTP3bt5VPDoz772c/+UWHWu5bkSrK6GfhY3pwFs//D67xxrhUue3lzusZa9a4PvdzSXcX2lVdLnPVeszpwbn57imqtlZ+rV+f81ltnfh1vDuSanItY65y6zI98OXG0rryPc32p4xq9tzuXe+2o4vjRBKPWXnzCvaf+hO/CQte+Dku2nw5uaC5ilOwXuG5Scj64nfVXGg+teFp4YV7M3vqB825wL33pS99ciLkGb1jq+5yLivkLHK05a/C9sfjZn9i14KeO2N7yWWtOHGm8P/ZSK8qDmjVo1HVfDTVqrFcLdp05tWDWcw1qRLXGqc/6fv2Z07eHPZPHH81vjWhNzmct3HTNv/RLv8TP+sR3XyK+NbwRXLvcs94j0XlGWGUrIz80Gq2zbIzORslvWEz9fReHi09nvlDDC0k8ud7Frq4Dxi+f6UPOfuVumMObAI85v7x95VOTHPxoHvs4v5pRn9RmXh4Os5doXlyo9l2LOhDr8YJdvKpRZy5r0jcvWu9aQLgNz3Aphle3pPa7//DOl5o+T+bw7SuqVwc6P5o+el4tvLbifuEXfuFz7LlKnFwje03fVRX3xRonvfWtb+VPqqgbjaJXfPpojRMn0gOWIptPgngZadSKux796Ec/dlnDXy1zMZgXxXwn3nTTTXwv7NzkMfunnxw8fZwrdfhazglnD3GOs77nna9j6rOm833zug77qZc3tqe6OUx91uiP7nP28n6h13ct6uwlJm8NOW1Unznr1dlDhE/fWtDa5NDaK/P6O2vPXVIaPknk8wJ7gwwO2I7HPOYxTyhY1Qx8ZObxu5HTJr/ffJOgYhtuCe92t7s9rGpvr3FjDS/AC7o7fetvxN5RqLkBiZ3TnEi9OXsaz63La0td9sPPvsRqu5+x1+K8o/Wbo07L3nJganPN6jtmLb7zZx9467xGY3KYcc6pn/lJHC9ev5TziuSdUw3ofMnJm8v587rQGeP7zoOPUe+cfX3k9/7DP/zDO5e66UeUpV4tf5t424knnvjQpcZrGWFJpvl6Dn4/ywvaL1kETbDEbLzIxoT1vey5RfZ3L3TcFD6xue2iiy7688I0LxSO/sRyoFy5q7WYh0vfOOt6/dproEHZqCc8tSOT73OhzRx+DnupyWcil5i18n2O7KleTY/VipvN70bPPnmvzDvfCJ0rkX4+M3h7ymWcdWp7vZqpvv6TqT8rgt/Lsgex7Mfe/HJ90nhOode1Dku2eqb4s5Y3M0U01/RFeXDDIi688EI+peG35h4wLsJR7o671cfzn7jqqqv4wdILhLd3auFTQ4xxM7BRbsQt1Pte1YhmiJPz2sjru05QrTl0mpx6eTF5tebEEW+diFYd65GXM7anCD+3fvvM1VonOpe94c3Jdcz5zVkzqu+c9dbQw3e11K7y7Dn2Xul8B0s99dfVOHm5h4m9LjBNHi5z6a/0cwfMYosS8YfjxS9+8WMrR08W64WK1BxX3wv/c2HWmwc1eqDBRH1z9pAX5a0zJo8Zi50zBnNNxJh9XUdq7KmGXOfMZa/U4NNbyxyc9fJyxuKo3lpyuf6sSU3vbZyY1y+fPbK3eVGdGtG1dZ33E16N81sroknbu9x7xxWJBqPWwZvCrhe+8IVfX2i+3Mnsmby+ObUbMB+kCQuNRRvN4Y76XcKjlmIPGKEXwLvbzk9/+tN/t+TIjQy9X12Yi1izF9hzqdFHg6nPWH4SDF7Qju5Procye2aLPp+51KZvPpG8mo7oOmdsD+LOmUtU45pHOTm1xPpgjtTC0zfvmb459YmpgTfWJ3bApbF3GGlTfe29vy+SedmL1ovs2R33v//9H1mQ1zPnI++GdoPlBrLRBkEFc/x+uvrPT76qSP5Knr+QZ+FeKL9g5hOcHfVR6P8AZ6zPtapvenT073pkcBqakamxfqSDcw569Br7jnjvq/3n6ns+e4362yf7qzOXPeVEc84jnzjn9xrvDXy/f2rV9J7EGLrN6ifhUoefPc2xT+Bdhz2N0e38gz/4g/fh1F48qcbk8lJGwJ695fjjj38wxBbMtYNp8hNnUlLkAebgo83Nxq76Hvcv6hfJ1H2gBr0WV7GX3y/vfFDF9yjkKwQ8P4dxY8T0/Rmt49SvajB81wtqzG8OrmtSa07dgaK9ep+5+ZMfzZUcvuY8Wd99tHLcS2qI05I3J6LTT9Qnv9V6dWCaMT2zr/4I5eyT95o9Seze1Af9V6XIrfZyHSy+wPOx/EdqpFFzfuWPqL9N5NtE9t5WBteUg/WuBhNvZky8FeMQ8TE872BOkHUn1gH8dBJrfOecQ0rJmbcVMXObE8nDa/IgJi6i/evN9zr1oP03mz97jHx6JZ/PCB4zv4j2xT2vLvms73n7ieSZf109WvP4Xr+8Oe9P8uZE60HNHPW9B5rMEzu/enHKLfcg303ZK/HG2sP8Kd9Wzbln9fnwRiIbgProjFf4rGc965Ti+a9HOWCYp5q3L74SnFD/otTHSZSRS9twE5YJOHTegJxfruOopxrXikYuEb/PAeegDrNGrUjOOZKDx+DyfqsBs6c8NWnwDvTqRLTmQXvC66s1FtFg5kXyjsxbBzqX3Kh2lKOfPKi/WX1q9cVeyxza1H+5B/ln29C6D8nh8/uwIy+++OLTC8n3UdRk8gT4s5ZfnRStK8jG6if8ru/6Ln7+wvwF8yKqG1d2TAW7brzxxk8uSfp4U6D6nNPNCN5YpCat15vr6x3Vq+k9ks/71HU5l77zqBXl1YnmE/Ed/WDKp55exvqpM9c5eWq6mRNdf/agpsed6/V9HmN0ozmsVyeqTdS3hlhuxw033PCpirmf/PEvlnkO2I4nPOEJ/DgzMnrady6f/PTzUhL62WizhlP+fve73wOWxSzSRYscsB31H79ducwRpqkDsUR9vsIwlzE61yYHyonoNLlEa7vGGFSTdfDG+BqcwzpRfUdq4dBlTl/egyYPpl/hZMk7Nwl4Y3sa9z49th7ErEs/uUnUXkbrVzKaz96jvnB5PWoT8TfYF7/4xSuWxDH1hR+XFwdvDnwafj+wjP6MOTM3q/OC5xrI26DjKn/3u9/9/svAd7Bp0cuL4D9m21H/ndjHC+gxXdkS9eExYzHnlENnn8zLkceIMXERLV7ntH2OuXp4tfRyDjnr4LnPatQlZp46zZp8TnLWox1xc7xaerJWY5E6DQ6by3mt5lNvnUhOvZyx9fBY9sHP658Ey5es10/Ez3jHxz72sSuWtcfUjy7+CKJm+vGm/tzvnNK4BuT4jozxu2XdfgvfkKzKHvdmq/jYY489swL+FIWh8fPXnhr8bLbjLW95y2UmGnojvNBMm4NjPW5GeOJeA+e6e65SG3Lq4LVe7/yiOnCzejTWiXCa9eQ05weTz/zIT84ecok5Z/q5vhHvWjKnT/+sdz45Ed4aOH341BBjcJiInzX6+bMUnDz6DVb/jPvHIGpP9ncwerB3b69/UpC9PGe9d4831OVi8N28IMOPP9OX24C7d+9+U328ycLeW0PbyTtYXcyDCs+s/MMrwYU4+PADnz8OlhPJcWOJvfmiF5XrL9l0Y80Rs24suaxJX53azK3zpwmWc1i7Wa+sST/r7ZGoFuReoAcxUb/H8iBmHnR0vsfWjHhz9gL7+rqGPhjPWLM+Y3x5nql92YP4DPcjPhrG8KP6+iTxryvHz2Ifrb1p3wqnPo+q/FX1X9s/pWL24LrBus27b+nnnl1twOKm5uDIWHQ3L2zK8RWhBEyWxrsXk5HjH79hcsyLEuf6q19U7XuF7zWjuNerGfHkcuybbeFZA6ZP1r4L5f4x/FwNtX4hQOca5LL3yFcv0gPL2DpxtBZzHRfdFq/mNqtH5/qpRD+qMWdfYnxja1JnLzTmR3rz6tWCX2a/1mC/Jo9/e/HTjzTl08NR7gZzzg3kMljl8iZ04UrUiuYm5NtA3olYJIODxUeIvIvxlYR/YXXO0Pf50I7m6hy13dAkn771IEbOfPpTsl7UzcVZYx+14FbrU4dPL/7r8J3vfe97v/P6669/TX2X8Jc13oMPR44Jyibtwp1e5QnSD8nKzfVDeg1irydOrtfbOOutAdftud7LeeDx7ekcoFzWzmmtu4U9yd4sYvVus/Q5dNOPNIqXiJYxsjl+eLGz4uo8l4P3HSwXPF10fUXYVRfDn6Jg3pBFtHilHl70ZiWq7/WuqdfLgw56jOpT6zxy1hjfkXp6WG9/kQ1nTiS383u+53vuWf++5K8+6lGP+qn6b5UeUt9iH8/AhyNXvx45bVk/Whd9tA29izSend/CQu8tFH7ORR97gebkitqvHk5LXfrk7aVWLvm5ObNX6vmifyt7cvkO1nvyJsEBy3o0Gvy6XOpWB6wX9NiiWazF8nsFv0XkglajLojvj30HG/X2BoCZ1wfVyBW1wdRkXg7hunpz6KyRA+XMgxg8A+u4YBevo5y1zrNBU+9OO375l3/5hfXp7Ndlo/TJvfzlL38B2jL72Sel+H0eOLTw5uRAzF7qFuz+r9aD1nTOeP/qBWNdzrWO631Sm1/k0Zmbajhg7MkazsXaHLuXe3nSHsDLhjmsW/d2jWZYZHFDnnJ+izgtuBbLz2H8neK6dzBaeYGt7X4hOkxcRPvH8oneULis9zq3sgY06rN39pNX13O5jq6ZtH/xF3/xnesOlxOgQbuM181jiRqR+fsa1CaqgcO3Xk2PU69GHOWsF9WCcNTkvF1nPP1oQtHAJk0drFvYk+zNwSHjTYIfabZqo2tZ1W52wFbCLTgsigOGcSHTqAsg5quFB4w4DYE3T95FT8WSSzQn3TWjXtY4F7Vdl9xIb77fsz4/Os1c9jMnqjGe1vWQhzzkyRKb4VKb15PzJU8rc7bN+c2J5oi7D6cu/d5XjXzG+lmffp+TOGvoqSb7q+m5SbPci9M7WB2y/l3X7spP3xLY8M5g3yx3phcHjMWu3p5robX+6VNELmb6M5TBBNwMbkTeDH1vVJapHeXQ9byxPeytVl5UT3/XRs75Mp+9sl4/a3oPYuuda6Wv/2ziATbZDJdaeym3p+uVV0de35wov1qPiWVN53OOdbW0GWnlxXU9zKEdWfZ3nRt0y714xPJwqRf5FJEfae4SuysPWF/Q9BE9h6xGz41iboY3RFTXG2R+5MNZYz5Rf13/Xq8WtD+YvXpsj6y1XrRXarJn8pv5WcfcDDkxe8Ax+jrVJi9HffrEGJyD2Fq1Irn01WZtz2dN6pLH10b15hJd4+pNIZN3hX9XHjC+PaQfi/b7YA4Z72r84Dj9PWL568wL7uhNlaeHvogGPzF1+Bo66+B8IL2+67Ime9ljlFcHjvLJ6e+tP4y+LAvX+Uut1z03jy3yWtWOOPUd0c5tSNdPTe8Jl/nU4GPkqVMnkkuDNyc637r6Sbvci7fzxT/60J/r4t3LH3Xg7pTdlQeMPzNhcV7whFxEGW+76w6YN6dfTPL2TU59ctykjPWtpwbOQazBobMmNVmvfoQjnf1G+s5N9R/84Aff0hNz8VJL3Whuy9bl1Kxbp/1B74t6kT59HnOdd05QDf5m/bueOG1Ub36aZ7kX+cKPNgc69jB7+S6xzQ4Yk2/V8oC5aL/S7a7f3/jLu7yZ9lbvetQ4vwivVk1y9JNXl7WZQ2tOhNO2Wt979ph+9u85+M5N8WMf+9g31f+36v0uZg7RoF3m7SVmGRwj15Lzd23GWQNvnKjv3MQ5qMscsTXq4LTk1GW9vjjS2EuctB6wQvcntfoHesCc1zk2oBu6i3q8oWgU1DsVB4wPOqh1IK3UXr5aeMDgunHheaOcX06kLrWjPjm3enX2NRazvxzY5xrV9/nUZE99c9k7OfipX/0fQXb84A/+4MXrDhk5NGitC4TTcn59cvjD+S1cojVd22Qb+lGTY6TtnLHzOK8or24OnXeYr4N1NHuyBnlesi8HbO4Tb/Rzlj1WGg/YiihnKFzy63L8Ipl+aNT51/R8i+gBM1eylcFxU0QSxvjJW99RPZiGzqHGvNrei3hdjvrU2G/UB86vjtaBcFqvm/jXvva1V9f/Q/j//Ku/+qv/t/6H8R+s3yXeyMCHq9z/habE1lPnuvHhR/PLo8GsB7PenHlzHdHBbVaPTvP6qbG/OVFezDnkQNfT64w3IHuxhj9nUe9gTf5Kyf4bapfazhlnzeSv+4Vaim0Awu+Xq68G/PkJ/+acOZBPELl4PuQgh/WbIbehrsipviFazZvdv0hYh865ROewh1ryaqzLnPpE9F1jj8zZL2vlej283IS8Oz3ykY/k5zF/Jss8esz58N24yWc+eXpljC8n9jyxpib7y4nkMGIHMbxrTY05tPYV7akm0X2QGvIj4x2Mf3+D76ww58fngPlXR8Rarr3P0WNrVn8qBTErmsk5oXX8nqsf2OlTxLoQ/iNM/qERLwTMkb3UlGS/NVljjtj54bCuWbD7Xu1vXc4tZx8wuTlejZg6/DTXrBZ0pA5fPjH5kd+vP2vxe43xIrPxGcl1tE+/lyMdh8g1kM8affjUEGPOk7l+kMypzevXF+mJfyJ7cvnFnzrXCLKH/Z1t712plTnfighnlXOxkdvPXYn3ywRRX2n5VoX/bRF6FsqY/pq+gAN29Pd93/fxD+Nwgd28Abke+nTtaC1qMoc/V5861tHrrZ3WjyDMXFCTm7w+9fhp5pzTnPxmsf1GmFzO7Vyiuj6XPMiYu/5eR2xNzzFnDvOJ5J27r9G498hYDT3ls3/6O9mDdbj4Sw3/y3vyeb3H1V7+Qhat8V33rCQ39EjUG/R4VVOL+mQFLHx6F+OrQw3yBXu5mB1PecpT7g8OrN8kJH1tOTd+1qAfxVmTmuTTTw395nLyICPn1hfVpA4fE1ObvLXrOHukFj2WnDr5ROeH0+CsF8nZxxpiffKa9cQHUk+d/ZzLHqKH37x7xRidPfBX9vSnP33ag8s9yd70TQANe/fo2sufWBVs7uScqDfELsw2G5KSyyJzoEPJ3vrHRD6+DKZ3sfoq4VdRtPzf3HfU/wP3HLDMi8+bCe8c8OmT6+Yacp6s0acufed0Dfbtcdakbz11vQZOrZgaOXQYMSM3DDE1qU2/UpPJgXP+UroWej3inD/Xb26uoevoNVk3ytnPtYjJ61OfPdR2Hn1yU839ypaN2JNTbexV9u6O5V4mpzlHR/Oz2A+YQhsR50TmxZWu/kGby5ek3ybyTwXw18popgN2yimn3MfCht6IXI+cUnN9PanDd034mjVgP5DqyFlPnTy+lvVw9jXfkbzD3jl/6tGpsW9HarPeGvuM1kyOGgy9PSeiXqyRV5Nr6Tlr4a2HS18NaL2+c3TeOdFlr5wna9CxL9Qm6qNZ2amnnuoevIG9iVXScQLC+h+if2xZIL8M9wPXMqtjcYqs7rE8ONvoTW960z8thSwSXX2iPD1XroEfGncfd9xxZyw1ADfAm5Bz5g1Tjk6NNeZAc/hq5UA586BGPrXwcxy5zea3Hkxzk6+rz3WkTx/rsye+axWT09/s+tG5LpF++h3XzeWcaPSpN16wG1+dS7ROHNXDuS50+qLzqZvi5T/OxJ9J8UkhnIMe0zvY6173OvcyXFpqk9ef5jAo3Ou7QnAbXAt6Y+MVvuxlL+MHQ35B5zvYhtq6oOuPPvroc5bdvQnLcHVziO2J33X5BcH+qcta+JFZJ6ZmxGUeX41onjhH8vqgdanlOjNWo34Uq0eDGYu950I1/w5onah+hPbOHHXYna1fdNn/2Sef+0Lf+VOnD057vf7jVN7B+Pdh+IJlDUjMv/h7y6tf/Wr+7XqvI7HoyeQI8GdtswNG4doG0RkdC5v+LyrU1Z9H+XsGZF+o/4PgmThh3pygJheeQc/UELNm85krej++16sRrZ9D6jV8Y5Fc+sSuLfXwadagndPB57vWnC43Sp+DGq/NemO1WW9OpEaznrjz6snhG6eOnAafuvRTg28v+URy2cs+I5x09a9FnVU1q08JY4+SZ+96uMrd1KhZa3MHjEKHDYzncMftt9/+6RKfXGPaGPUtIhc6PcD6eeya8o//xV/8xbML6UEO6zdjwS5euwbW+fHdHHKgHHnqzRFjxqlNTh9tr3c95DC0mDWJ8FmfOetYa1pq4LOeOPP68Jg9xQW7sUadtaDXlJz3sM+f9ebkQMw++GrkRHKY8ySfPppRDO+6Rbh1trP23lm1D/kOi71IX++/c9yt3sE+s2wiN4dL2Wp96PazPGA26qI5fj9d/QnPh4rkZzD+2ausq3Xvnb5qfNu3fdsjKpfzVrgybtbohvXFo4Eb6bO+1zmRGutHOjjnoA6tHHE3e8mrdS550F5ybjRj0Hp9c/CafuLIR++c5HNNxNagw8zLd7QXqD8VLl+yXl/sus3q1VsP6pPTT17f3KT79m//dvYeH8uzF6drWn5OwP3nv/Y4sfbwPxZuxaj3vqR+Az/a6KMiGlg4h/yzxH+1nIlfKPMt4h4GfhlvvXvOPPPMhyw1HbgZzu0NQpM3qdcQZ80on5zaOc58oj41+K5HPjG/Ino95FNjn87Jd0xd9k8/NdSbs1fPE3dO7Qjh0qwXzdkz5zcnju7fiFPfUS289xjUH+3pqebe9773Q0vHJ9sesGmP0qjsVF4uu+wy9rDXtQ6Rd/P6V/xoMSZtTmyh3BCf//znv6+03NxpsdQtv01Ezyc319UHHQ8qP82bAzfdiEwu/Tk+pbmm5PXJa6nFH/V3XeasF+3V0c3VdcYidfjG+j22v7yxKD+H6lyXccdeP5eH997gU+c9GsVwGDrHRCxfnFeux53vedciP3ede+tTbP6F6WurIZ8NoHcwxz1r7PmJn/iJ9y55OE2dc8Drm1O7AecOmMW9URbbeIXvfOc7+d3C50o0LbbQDzrUfL4+6LjvySfzY9oGy/lMyIneSFAuEb8/aDhH76vWftaDGA/KWjlrjBP1UwPnoCeWMX7Ob15Um5sGzlhUR50mJ3aemBzWNcmpmYRLbd4beGLXQozZU4TLe6OmX39qem3mqNdcI3n2tDry+HvrC/uO+m6Kn8E+T8xYfndV7rR29uxn2cMQZc5t7wW7j1eTvP4K5w6YApvnZPpqQLm99UHHRytmsZjvYFNQF/epco5929ve9uiJWNTh5g1ZpiaAz5zrIZl8j9VZL6LDzK/zsz++10jNOsve6uxFzl7mun40jzVdSw8568RR/9SO8vZT57pHWnLm0+/zW2vvjEd+zm1f5yGnL2YPOOvh1ex8xzvewZ47tt4A+BBDDeg4tf7nfOxd43VYsg09iIe27oAxAeZE6cvth9ddd93flZD/9ov/Fef0DlZfKXhLru8Wp/+F7J4LLrjgWyrGvCE5FzyxaxvlrFOb64DTkrcPuawnHuWyNr86q01MP/vZw6/4mbOnGnLJqSWf9WpEdZvh3BqzLnvKOz9x3jfX5PpFNGlz8yafPrX26mjOvcFczufajNFqex/2sIex5/j5i7+Z5d3MXyFxHXevcXT9B6x/U9jn7HFJNmiMwf3MhdJEs6GxqMb8CPe8//3v/+/LgntZuPw5jJDfnn++/pmxry2k3odU7spyHsi8YemTUwtvTo68Zs5YVJv53GTyInoHPdLvPclZJ3Y9cTe5xKxHnzl9+xiL8iP0Wu0vorUejkEsV+7KrBHViCthc+wJje9ImT17zt7uH3XUmrMP8c4TTjjh4YV8ezj9BcdyT3r9pyN+97vf/Z4C9HMDmTn8NHkQm9ADtqCWpMFSZCF0Fst7kVN84YUXfqC+SnyptPxCD878hJX7VH31OKM+EDmtcpq9iPNmyidaozZjOXpkTfpojPExYkxcRPt0qfdhzmmttZ+1qZfbikZt1lvnXOs0mbMHyPPwPuFjmTf2+dnH658KljXmrCdn764jRuecxvYgdg45ET5zuX/VUK9N3E//9E+fXj+enOG7VyXz5y8096ncdU972tP+gdzMKHqVSx/9rOUCu6gXzk0sv3oQ9XPYX1ezr6hhf3uBvEXvfO5zn3thYZp9RPrlDfXGUqPG+ozxfXhZo08+zdoRnzp8tSNeTk3vt67enOi9zJ7m7J+55PS9B7kOc9YmquuoJu+ffdSONH1+69HiO6y111xvdOasAeljrXOkbueznvWsb1vq2HvmRPboGbfeeit7Vs77bzzCkq+M/NA8AMNkkaPGyfWFTPEVV1zx9qo9sgZ/3Dt9tVh+YlNfKPZeXdxNp59++jcVos8eFa5ulj55/cTRjV0o9732tZrxhog+mLm8PGjPka/OvmrFzMul1ryohjh1+t671KvN+5N9zINZnxr7i1kj5z0zBvXRm7fWHOi8Pls0WtbJieayF/6Ip2aa6173utf/Vj7/BfP0CaJ7cZlnjx5Z/zEIexb9ZqMk+2nghjZ3wJgkzUnh9BO9YXB7nvSkJ/1RId/rnl0DSy3xx+vj+gue+tSn8lcfUw1kmTccTvPmzcXZ23WgtYf1oJy91MmLXQufOevsY07MvPNnj6xLvq/ffh2zv/WJ5LNXzqefaH84fVHOuF+PfNclT06j3h4gOrUjX23W64NZQ5x7aG/99caJtdceUofrE0stn7ahw6g9u8bNF110EXuW2Psm2j+xZPsZ+f1sdMAUdqQ4J9F3IeA0PvrRj95aF/Ghiv05zI/rqeGTnMsKj3rFK17xzEKNHDfTfvD65DDnTMwHMOdbb4+p2fLFGjX2ls8ac6kljza57hvby1iUt0/y5kRy5kVymvnslbq8p8nrz9Xbz3rng9fUGGdPOOKsN28P6+Hl8NWN/KxJXZXt2PvKV77yGYX8l/aXEtdY/XXRMj67zFxizQAAIERJREFUfqT5YP03YLeSU9PQeUdY0g3rI15ZHjAXt0qWIzdq7GLI4W+Ir7nmmncWxx9WTr8Ti49F+bsp/ij4+vpnx76jkI9LrQW9YfianLEon+sk53r11RHjY2rEBbtvfnnQGjWJ5HPd5uAxMf3Oea3wrhXfkbX4mD1GmhHnHIvqfa9qnddrtT9Kc/uq9nno6N37WC9aYX9jUA3Y51KvxliEd9iLmDXtqT+PYo9dv9xz5DH1fNJ93Oc//3nevSb9Es13rPSqlhwmLqLF64rLA5aC9BWDfbgoeeM9r3rVq3639Bye+y3rCqZ6NNil9cnOeWeddRb/0CP18GK5K5OHcJ7uG4Mjyzr7waWp2Yw3r94eXlfnySdnveuwXo0or84682Lq8FOXsb551wuP5TzZW19cqPfpiec2u1rQeTuq6XyP1eU65cTM7f3t3/7t8+oL+7mV/KelYPq97NJHe06N3fUp45sKmc9Bzl6iuUqtzDWuiO6sO2DZ0EZyHV3QCi+++OLP1beJfOzJBWK+NePXF5S9/EHw7V/7tV/rAes9iemH4Ws+TJEcvrE6+xGbU6sGzN4ZZ728WlEeTHM+12/OOhE+fXXymcPPeE7TexhnffZJX604l5PnOvVFar3+5PTNjeboGmO0+BnLcY/hxRX/5Cc/+T8R1P/Xmr/QmPLL33+hZx0PqH34j7/+67/Or5XIO5zLnsYdq2S4LvjJ5g4YjTT9xD6RC9uA9f8QfkM14YMM/x2E6RPFeud6bI371n8a8Jo3v/nNN1bebxO9IJE15LzGOX9y6fsg1ZLDjMnbe0rEi7waYyT6oL68HOvHsl6tSF7fOjCvXc1IZ806Tc/12LnslYg210+MqSHndcJp5o1B86BzJp9+1o/mR4ulTt/+07rq7w/vX7ov1167fqqomvgEkT15wmc+85nfKUQ/Gtm3+7SE09KXW/2eSmIoqmRvbuyiejzxT3ziE19btV+u8e+ixzfUBT/opptu+p2TTjrpZ4PPHvj0ADF8zJgbnybfOXmRPL4PTj1cDnhjNb1GXm3GcvTQF+c4+UXFxvkzp5+o7xyifEfzORd+3ldqrEsdXL8XXYd+xNkn54Hz+ZoHqc8ezimf6F6B0999/fXX85cZJ9V++/fRz55fVdwN3/qt3/r/LWuomxs5l/VilW2wDfzcO5gV2RjOYtAL0e+L233JJZfcUr/Ae0dpz67BL56/scZX3nzzza+vP5f6v8unxncv+xQ18WByxnKg3NJdrS9jdWrzQcmB+dCtSex+xtRjyeE7puRM3hyY9cb2EOG992pADB4T8a3rSA6D17IvnLmslTdnrXxHa73v5JnHuciTMy8WNVw7POb81oP2nPDBD37wS+sTwvfUAXt4jYfFuxcfvp1Te/OP6n/9xK+TXI9Irxz2hcM6LtjB67oDZhPLcsL0nTzRhe554xvf+HPVgG8Dn1zjQXVRr6v/LsfDpY5+HDSx3NXNwoe3P3G3/lDM++CIc83mE80nl755eqbJw6WfGnzWPzJqtKxPnry55PXNqct+3c/1W5919hJ7vbGYPbKPebFffz6brFOX+dGaXR96hjE4cVddddXuc84555n1M9hfcsiKf1gN7ME19tZ/mvKyQuvFVT2aTUalVxr8/SwXbjI5L3IOOaDm0pebsP4PIPeuXz4/rT4O/VD946N/XjUsHEvER8+FYsTpT+SStw6OGsw59e03yqtJTN+aziVPDuO6XU+uYUrWS9bouzY0c5w97aNWnjr7dM4aeWNRvteTz1zXZz59anovudSxZp8pPL7X4bzw1iaHLt8QiHNQZ16c8ve973131u+53lC/cP760lxR48z6cOPv6h3tovJzLtZDvBlmjX6VTUa8MhYwMvlE/NHgYka8HP3xNfwNi1jG3mxQc/EjvZreG340t7qO6kXmsl7tKAeHdc2CnedH+eScX+5Asd8r65N3js6NtHDqErlunxl85qjB5PSNRfmOmSen5b1m36GD80CJcI5yd+ysd7Kd9QcQL6t/tu1xdbiufMMb3vC9z3zmM68kWUYfhgcr/eSSt8b6RPzJcsFyYPIuVC7jrfi9X86DnwvNmN6Zw8dAcyCWaC4fgJrUyYFY5pjDhzUll3l7pzbz+Obkk5ur95p6jdcsb/1cLG+/Xk++cxlblwen16hXC8qpHeXUiGgxYrk5VMf1O+C6D+dzI4d1dA5y+qBjswOlTux9iFfG76BG5qLIdT/jUa0cC8ASXRQXgXkx9jRPLuuI09Az0OiTt89m2LXq4THjRNeTeX11xCMd+REvZ32P6dcNTer11dnDOLHnPEjrNDlf6pjX55h8nyNz3Xf+vAbrRWoybw84NebBXJN5EB7c6thMX60mcw7jDTh3wBDlojPuPrGWk+kn4jusAfNi5NW5DvuQz5z5RH17JWZOP3vDyWedmsyln1p7WENOv9cQmwOtzRp8LfVyc2hf8/aX773kU7/Op16j1np5ubl55K0DrRXt4Tx+Z5Jacl1HjHngjNXdEVx0XLzaT67HE+9FKErMnH7iVnz6qcve+Cwocy4QDt9857OmZFMPteZGKGdNIj7WNcbiSDMVLl9Sl9oR75qzvvu9Lmu632uN53TyIANjvowncsnhqxv563LosZGmz2cMup6peFkP1+8L+eStHenQaugw50xfTsxc943BDbaVdzAKcqHpb2i2DHLRUC6wI326dtlixVuv1rmtUy8vwqeffbqfOnxjEb2WnL440sCZZ834c2s3T82dNXv1uegLZ97YNRKnZb2+iC79rNPPPO8kXr886Nxy1natPDjSymcu373g141en9pRDm5T8+LmhJkf+XJzSF9zfY68Eerg1Js3VtP7yI90cJ3P2F6py7y868pc1roGdZmjZu5aRvyo15xOPmucOzF18MSuK/25mlG9fTK3mW9e7D0673rgGaP7r6bnNtNb55yJ6aMjHnG9h/EK172DIeqLzlhfXDUtx8XA5eJGMfVq9NF1M2dv5xXR64vZI793n9NaBzKcK/VyqSWPWdPrqXF+daC8vvXEaeicL/mRn+vTt97YuuTTzzx+5rKHfNe4VvOiOhDLXsT9+s2LaDS1ORc5tWD61olz+RG/ro/9hujihskiR/nk5nz6ZW6uf/Kp54Iy7r755N3AciBDLXPJ6YtqrIXHjLPPiEvtVLh8USuXsT3nauVdGzji7CMuZRP0mszhmxfNZ4zfe5vvmPW9bt23iL3PKLYfc+irc96+TvnN0D4iev2OmbOvGuMVbvYOhpBFd+vcZnGv77EL7OgNk3cekT76aPAZ6sudTE1i16gVR72sR5PzWZOYWn3QOjFr0rcmufR7PfHIOm8sOo8xPfDl7SnnzzVd1+uzDt9+qUuN/cHUpK8elKevPtgH2nVmLZoD9XvNfvPc0QNmI2+aMTjiMj/yRzXJ4Xvx8iL99EEHPDaK5SfBUtM5c513ruThWJ85YzUZw3WzrvPGWT/y5+rznunbU8x1yzlH5qyfm8vaRGvg0h9pnHOU6/W5Btdof3PGYvZNv+czTr+vIXvM+ls5YBS76LlGdySfi8fPeK6fvOjaMrYPHMNYLZiWtfJyYueJey7nUb8Oqaem97FG3r5qjXu9vPWivCgPds4YpL9zoNXUjGJz1qNJrteYm9Pl/K4ntfaTU5994dZZatXdGc4eE271gCHebKE23qpOvTi6KHuJaPF7bA9+DsscPDG9sy41c3nX0/Pw/ee9oiazb9b0XNabE603nkP7k9f3Gq1x/caiusynry6x512nvJg1+PJicqnNvLycc1krb5x6coysMb8ZZt/UzvGpmfUP5IDR5I4sfHbymYRziMp6DC8nenNFa9V23jrzIjoPERyWWmI0Wubw+zzq5K1dp7UGtL/1cN2H6+Y88PTwgwbizBFj9kxcZBav1oAjzRxnj6zvHHHPz8Ujrf28p8Z3BJ13Xe1WNDsO9IDlhD705O4qn97ZP302viYvwnPhxHIiOa1zHqbOo+9cxvjO1zF1zjvql1w+tLn67NX9rdTP9bVWTJ0cKC+6htTAzeV7zp693r5zqN48sUMO7OvIHH7v0/OjeMs1d+aAjSbe7GJGNSMu++iD+tToi3McPGa9N4cYX0SDZb8Fs+81c/q93h7OY7X6jJ0fLn01idbb13nFUb3a7IOffNanLjXJW0+d74hoGXCa9WLyctaAcnO6zve5er36uxIPeI67+oDd2YvxYdPHG9jRXPJcOLGcmkR8DE3eqM1qMm+9mH1GXK9VA44s16Y/6tFrXYc15Ed13qe5enh7rdP0nHHOn5x+7z3Sdw21XkvmRrXOc1dhzneHeh5sBywvwps64ry56zRZp9/rsl4/MW+wvL069nyP0cP1nsaplxvNkTn7wY3qU2svtYnpqwOzXk2+a6lVJ67j1djPOOczJ7cVjVrnHuHoHo10dxl3MB8wLtIbIuaFw3nj8VPT/c3y9O01cFjyGcPnRui61OKnqbXeGI3XhN/ngEtTO1efWnz18s5PbA+5rrUmcZ1mlINj5FzZb85Xn3m4/KU3uZEua/7F/YP1gM3dKPmOeeO2klOv1hiEk++bxFzfKL0+4/Ttm1z6ufnkR2uYm7/X91p7gpnTF9URy4mZ6z4arlEt2Dnzauixzjcnpj7vZ+bRHBR2sB4wb443UITHZ3BDk69wFY/yqdUXqcWM82HJLRQbX82pN0bl+sSsRJe89alJXz1c1iWf+q4zl/NkH/PWiV6PaL3ziqlHow4e6/ULdh9vLPZ6eHukRm6kV/evigf7AePmcBMZ3ERvaLkrTh/E1Iibcevy/cH1nuZHfHLMgcFZMxHxMtKnFt/69Ed10XY/N3tm0p7J4asXk+vaHo9qRtxcT7QMr1tdctmP/EFlh8oB86a5mRK9wXJo5/xRLuvT73P2WmNr1IvyrAV/tCY11ozQenPZR26EOefcPJ03dk5Qf24Oa0R1GeMz7KcG7Dpz8s5vbL7XJn/Q+IfKAfPhcOO44VjH5NL3AfnLZHLYXL0P0vxCvU/fY/tnz+67fnvbo6O9nFt91suNtJ2zf9bLgfLp9/6jXNa5VnSY9emrB3ve+tRQi6kV57hJfDC+HAoHjPuWG8cH0u+nvFrrRmitNXMae4F9bFbjHOrcQPLZu+fU3Bm0Z+JcPzXkXdecNnnq0ozFzOnTv1vq+/yZ0wdHfXrff/X4UDlg3ihvqg8BlFMjbpZLXfrZb64HvA879fTJGnOJbg7RuUdInfOQNxaTw9+K2c/5XVuvTT59dMaiPXsPYnOiGn+fZtzz8qJ5Uf6gxvy7voN6ocvFeXNF6PR94F4LD9E8mL4auF5HLrn0uWfEoPePeDSK3tBnFI/WhA7L3/OsW/9CvfFVfe+f67QCDuuY3CRYauyZnLVyYOq6rz6vsdf2GmLrUnvQ+ofaO1jeSG+0mDl9cvmQurbHHJh8iB4m+qH1QBmL9lFv3BG9Ri7ngpfTzxgubS4nDzKw9BfMPi415qzpsdpcd3Lovd8d7QlvfR4u9dmj+8SHlB15SK1232J5qD6kfexGLx8YmV7jxsgqavIQWQfC55zWJzpnctRi9mVT9bx94Rn2KXelxe9mn6zvGueVR+u1yIGjueWpcU0gX5jzOsz1tVOPmQcZqcPf7KD1mio5NOxQfgfrd5gHhYmLaOOrDzo3GHqGG9H6RDWJdM5YvX3y3qrLmpEvJ9rTGOxmb7WgGzK5kc61imqYA84+xqDmvTQGU2/c88Zz9dZ5HeoPSTxU38G82T4EEMuHJieaM0avD7o5RDdYbj5qjPGznhiznpx9p8TyxRrXAzoXEuuX8tUc8llvfzlr6NdzvV6ttSK8tdmHekydaF9yatRljN+1zoNes0YcadQe9OhNOugXumaB+QDcqHld+qA+7dBiIrn01cJZK1JnXkwO3w2ir67z5kE0mYdL2yyPts9jLHaNPPPqoyH220B883DGIAanNrHr0Mrha3LMb09RzSGJh/o7GDc9H4QPCj43S+rgzflA5ajPHH4/dMTo+BbQue1jrlKrutSw+dC4Cc2J1NnLdcBp6Jyj6zKHnrw9xK6hl0bOnnDWW8Oa1ZDX5NTDw2k5t9dNDp44jbqszdwh6Xvxh+TiZxbNNfGQcvMoletIjYMcviifHP3k9ROdv28gNG4yNPRIjRw6jHgrRh8s6+F6PInqpefkRedlbfqgA505uPTVyKOV009c55M7pG07vIP1B8DDxEA3HrG+m4sDpAaO4cHLWD8xdVU21ZJPUy/nulIHlx+GELsm0HnokTwxfeAw5yJW5zziJFy+yHWth9181vD/0Ib3MOHn/GqTUyOicU5967YlbscDxoPigWI+7EW0ePVhk2MDqyUrl7wcOoY5Y+rskRx8zo9PXm6E2Sfz1pm3dx5ANeTwja2hn3pzaNO8NjgOErHrsA+cB1FfDagOP3n9oie+x/DbzrbrAePh+aB9aG4qcmwMbKSB9+GjQ8OY87OH2qyv0snkQHRsUpDYYS83t/nkS77a+PLW+27oHHmdctY7PzG5NOeHwydPb3yMviPf9aJ3PntbI0+fbW/b9YCNHhwPlocM+pBzI7E5GGgS5ZMryaQTyWGi/Rfs4lXOjdkPg3zORyV1GJg1rBPLOYm9RnmR+szZixrM9SVmDd8iWp/fLlJLLziMGg3fIcd6usbctsPD5YDlJvMBd86Hy8N388LhM3aecsopO0888cSjPvGJT3gw6WGfjpUamjo3mcgmxbenvk3UkR/lXLP9qdvMt6dzeF3wc8P51YKux35qnD97OddhgT6Uw+Ji4yJ98FD4xiN/yt3jHvc44rOf/ex/u+KKK/725ptv/oV3vvOdX72s4x5yOEC+YIFy8ObkO6YmtelnP/3so1YcaVKvj94Bl+tXs+t3f/d3z7vyyiv/4/K68hAVtd/9g9PUGh926Mbajhee16YP9sFGgmOjdZw2Wb1zTYfryCOPfPzevXs/vnPnzvuU9sg9e/Zcce21177tpS996e+88IUv/HxxGD1G1jebsUjNnD/q17mcd+Qn12uJnRvc84IXvOD0Zz/72U87+eSTL9y1a9e5CG688cbfOOGEE36qXL4dRAfyDua7GGguObTZX7/oFY+/7Wyzm34oX3Bemz7YhwfMr9getOmr+T3vec+dn/70p1+zPFx/VAfsj+tgnXjEEUd8dR20h1e/s2vsvv322y+pbx1//8UvfvGfvupVr/pSzFPuhk3k5uqITjNnvBX0GrtWXjTPHMnt/e7v/u4TX/SiFz353ve+N4fq/Mrvquv9VOElNe7F9da793877rjjLq64HyYPloeO/gwPmtckX6mVmVsR28XJG7xdrsnryGvTB3Pk4YIn5oBNh+2000474qqrrvqt5eH6w9ps76jcjt27d9tvR2260+uwPbzwYZU6uUadvz2fuOGGGy659NJL3/PjP/7j733Xu951I3XN3FQi6Tm/lQ7D1ZqWWWOR3lyXtvexj33sCfXu+3XnnXfeI+pny6+pazi3Bl9Yrq5rvaSu828Kr6agrnFv5f5jja9bHrL/p2gPmcgcHrQ8WPgYecdELF/gtqV587fjxeW14Rvrg3nA9KcDdq973euIT33qU6+tjfXNtck4XH88ukkettJxsu5XeF5twvNKe04NNuvtxV923XXX/c+PfOQj73/Tm9700Ze85CWfKR7LjYXvGtmQ+uiwzOuL5j1AyU/F9bLz6U9/+t2e//znP/zcc899RH2r99X1LnX/4rnePXV9nyz858K/L/xEXBe9tJ1V88wKHlGH7NX1Tvafy/dA+c7lwRKp74N+2Td9ctvG+kPcNhdWF5LXhm+sD3qowNU488wzd9WHGb9dh+Vbiudgva0OifUVTr322xRuSgRVe2Rt1vvXhvTAnV00c2A3Vb9P33bbbZ/48pe//Imrr776sksuueSff/Znf/bSj370o7ctJNPrfnNELt3V2h7xiEcc+2M/9mMPuOCCCx5w6qmn3q8O0tn1DnyfGveugrsti26vtV1Z/qUc/vqC8LHyb3H9tfZ183LI+MDjEbfccst/OfbYY59fPofJQW36xH0U9W8HjJtwKNtq09VF4Bvrg/2AwR3x4Q9/+OFf+ZVf+ary71vj+hr/vcZ7alznQatNtle/eIxaNpIINxkbtzbtsbWp71t1pxd5rxqn18bG59tKajDqb61xc2lvLryp8Kaqv7Hmwr+hOL4tPa76HL/E4wqPZVSKcRySGtq1Vce3edMo/xPV6+NVf2s7UK5btF7kYFXpHvCMIp9T46T6IvHrRx999E+Un4cq/X64iDGx+1Nyu7zkg9gu1+R15LXpgznygMGv3sXKP+Lyyy//trPOOuvZdTi+tmI2zQdr/FVtsg/XJuNbP/RsFPvnpoHbL1ebmhre4fbg18E4qsLTqx8H7p7lH1+Dg3LMcnB4Vn5x2C2OOjC3VH6K8Yvni8DVxV0NFje9IzIfhcxZPutybSJpfG3D+mt9rJP78Kga59S4rXr9j3r3/Y2v+IqveEvFHiqQPiJ+H0VtmCvnJbdtzI2xbS4oLiSvTR/sIw9ZHrCV/yd/8ifnP+Yxj/n++kr9rVV/9xq8q72/xl/XJv5Ubb5p8y4PXNGT9U2zszYk72STthSsA404bf6psl7ULWv2cjCWub0cEGI0IrnQrOqXNcDa+esaeEd2jh1eU9Xdr8aja/z7GsfUgb2yPq5/46tf/er/+rznPe+zxXE9fXBdcKB+uasYLq3HmTukfR7udrW8Nn1wNDxM5PTF6UMP+Ac+8IFH1y+YL6qf0Z5Rm5uP6PkQ4ws1+GDg72uDXlYbkx/2+cBjtVmJl8ZGci1yojk320inZvokk4NmcaE5ubX1UcdhomY6YOWTOrfGBTUeUuO0GjfXryH+rD6k+c2HPOQhf1lxHqjRhxv9cE39qw5Lf8EsOP1thaOHsF0uMK9NH5wbHigQjfHqgAW3qz6Nu2d9Bb+ofk/2LfUBwtdU7uga/Iz0T8vxz4X5aeHOOnT0ZYOBaZ1bF/ccfTq3Lt67PER8EeDnKbT8LPjAGg+q8e9q8HPcjfWO+Pdf+MIX3vXc5z73d8quKy4P1jqfnnnIiBlY+sZTYju+9Ae9na4xr00/EZ/hgdL3YPVYfj984hOfeOIrXvGKb6mfRR53zDHHfHX15Ks+dm2NS2tcUYMPFz5ZG5pD6OZmE3rwoA/I/v92zZ+3jiqI4kaKG0MTpUCisEXSgYRER0PpypU/hBt/Bxdu/CVc+oNEokqBRGVRIAGFU2AJhcgIpEDBnPfeLz6MZ++760eQvJuR9p0zZ+bevf/Ga69f9BVdlk/KxVNJBUSHKiT5gSoefRNF17O49LTS20W9qv8hfv17cXl5+fzw8PBF/A9Qf79RLK2C8hj5FFLG6PJtsWUuf1L2dgMmNavlZPLc5KPBHSk0xzvFFH1UcfpZxM7Pz58eHBx8HU+3r+Lp9nm8cKDgNDJ9peoqLr3Vu17513H4f4vD779e6kmjw/kvWxXJQm/wR9FWbyd1X7040aXX9CqqJ3Fh12/evPn26urqm7Ozs+fxd5V+IPDkcfQCcq5xVD5FRR+6HxpcKFvMZUmn98mBm97MbouJuTFXikE6nKKRDxdmXmneJnP5W0dHR4+Pj4+/3Nvb+yK+MfHZ9vb2bsh6Va+3g5gOmr7xoRcov6/wz8C/7Vq8EQxfb/T0qyv4YfCP7NKbSI0V+yueTr/E31E/xv/dvo+vdF1eXFx8F9/i+DUSOPhCCsJ5VUBDmrfzfsVlGV1bJEztY3EApjYpm4/PD+4oni8vKsXWFVXOz/3ha1jisg/ijeTWycnJJ/v7+093d3c/3dnZ+Ti0J1F8j/X0iaeeLr2uVxHperTCgC0VGoWn4vkjrtfxN9PreKq9in8Av7q5uXkZT6af42taP52enr6MJ5Xa+QHPBeA+hebYw72PivsYxGXKm6yx4VOdYJ4fvjBzNApGPrwX6aNCrTE6XCiT7pZ9j7V4Pqz4FbomTgGJu4/ei7R31Jjly8Cld9dHnwTqp+JcTRvtB5mNB7UuOlQqLiG5jspVnL4Ua10RvtOPa5nLd+PePkaPi3us4tK4yMcXUkho+BmrXNqA6l8mf5Y21wLThuuw+sYPHV6KywtN7Xiq0VersOibHB02tBZXTOa5S2X56eNHdy1zfGHmaCAFVfmtGOMQcg+0dT55k8G5FZg2mMOaed5U4iokGYVGkXgczVFthnxiQpnyMOdowqzr/pW5Dq/QNfHWlQuKXNcZCzGhDFx6M/uceoFpc6uD6Ro5fhDQdBxyYamtX+S6Rv+uqS/XK1+ajLyl1//pc1Ar/ApdE9/04n70K99tSPecyfH7buRDWoihOaK3UDGP42fUemQttyOnQtcyl99rfogrjibMvPLJc9RY3Iejt1AxTO0mb1N/gmkDtZEcdt9Q9HUbTZ735cUkfcj3GLxC18Rl1ZiXkfozz8N9eIWuiVf+Ok0j8rb4juKzs7Gb+JAXaGiurldcGrrjWK618zbuZ1750lpGEZDjPryFHss8+7qHa5XvmrgbbV2bJGfDJzm5YlKt+Xqs4mgV9moaUs51jSGTg9+L+eDig+oH7uicnEoj1kLFZLRferefQ/ptxoTYfTfyIS/Bujl7fB0nPha1frkNa4qOD2Z96KBmHR9Uf/BN0ftinPSJ79iKed5keN60yUyscyKt+efYkO86PKOG09IYLjn43s41+NCBzTo+qPZw8D7aunH0xsmbHFYbOrlJdkxo3TpUcdc24Rqet6/8jiksUrxYJLR8j43lVd+LAdiH92nyvGje2HnNvp5tz5pUOa45113G+owst0PPOHSYsz7Gz7m6Z6X1jiXnzcLv3cBZLMbAJHvWqMrp0aochtGKkePYOvw5ln3106v5PYfa5ZzZ+mM3cbYLtZp473q18oZiQ/p917wqGPU1pK+LMY5We3Le42oF/utNnePCjlnD3tzevLzevYe/N0/9j8nN45m9f9+NnP3CdSzApms7tv2mhbBp+44lmV/K2E2c3wq92xn/X+v/vnje7T4O9v4PRqxOxnwQYu4AAAAASUVORK5CYII=",Z1=`
  <style>
  .range-piece__container {
    position: absolute;
    top: 39%;
    left: 50%;
    margin-left: -54px;
    width: 108px;
    height: 108px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: pieceContainer 0.3s ease-in-out;
    animation-fill-mode: forwards;
  }
  .range-piece__content {
    width: 100%;
    height: 100%;
    background-image: url(${Nd});
    opacity: 0.4;
    background-size: 100%;
    background-repeat: no-repeat;
    transition: linear transform 0.1s;
  }
  .range-piece__content--active {
    animation: dotting ease-in-out 0.5s;
  }
  .range-piece__aim {
    width: 100%;
    height: 100%;
    opacity: 1;
    position: absolute;
    background: url(data:image/png;base64,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) center / contain no-repeat;
  }
  @keyframes dotting {
    0% {
      opacity: 0.4;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(0.8);
    }
    100% {
      opacity: 0.4;
      transform: scale(1);
    }
  }
  @keyframes pieceContainer {
    from {
      top: 49%;
    }
    to {
      top: 39%;
    }
  }
  </style>
  <div class="range-piece__container">
    <div class='range-piece__content'></div>
    <div class="range-piece__aim"></div>
  </div>
`,J1=`
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`,q1=`
varying vec2 vUv;
void main() {
  vec2 uv = vec2(vUv.x, vUv.y);
  float a = 1.0;
  float match = 1.0 - uv.x;
  gl_FragColor = vec4(1.0,1.0,1.0,match);
}
`;function K1(){const n=new P.PlaneGeometry(.4,.4),t=Vd,e=new P.TextureLoader().load(t);e.encoding=P.sRGBEncoding,e.minFilter=P.LinearFilter;const i=new P.MeshBasicMaterial({map:e,transparent:!0,depthTest:!1});return new P.Mesh(n,i)}function $1(){const n=new P.CurvePath;n.add(new P.LineCurve3(new P.Vector3(0,0,0),new P.Vector3(0,0,.1)));const t=new P.TubeGeometry(n,8,.003),e=new P.ShaderMaterial({vertexShader:J1,fragmentShader:q1,depthTest:!1,transparent:!0});return new P.Mesh(t,e)}function eA(){const n=new P.SphereGeometry(.01,20,20),t=new P.MeshBasicMaterial({color:10349931,depthTest:!1,transparent:!0,side:P.DoubleSide}),e=new P.Mesh(n,t);return e.position.set(0,0,.1),e}function tA(){const t=new Fd({pointerEvents:"none",cornerPoints:[new P.Vector3(-.2,.2,0),new P.Vector3(-.2,-.2,0),new P.Vector3(.2,-.2,0),new P.Vector3(.2,.2,0)]}),e=document.createElement("div");return e.style.width="100%",e.style.height="100%",e.style.backgroundImage=`url(${Nd})`,e.style.backgroundSize="100%",e.style.backgroundRepeat="no-repeat",t.container.appendChild(e),t}class Gd extends P.Object3D{constructor(e){super();u(this,"planeMesh");u(this,"lineMesh");u(this,"ballMesh");u(this,"borderMesh");u(this,"five");this.planeMesh=K1(),this.lineMesh=$1(),this.ballMesh=eA(),this.borderMesh=tA(),this.addEventListener("added",()=>{this.add(this.planeMesh,this.lineMesh,this.ballMesh,this.borderMesh)}),this.addEventListener("removed",()=>{this.remove(this.planeMesh,this.lineMesh,this.ballMesh,this.borderMesh)}),Fr(e),this.five=e}updateWithIntersect(e){var s;const i=(s=e==null?void 0:e.face)!=null&&s.normal?new P.Vector3().addVectors(e.point,e.face.normal):this.five.camera.position;this.position.copy(e.point),this.lookAt(i)}show(){this.visible=!0,this.borderMesh.parent||this.add(this.borderMesh)}hide(){this.visible=!1,this.remove(this.borderMesh)}dispose(){var e;(e=this.planeMesh.material.map)==null||e.dispose()}}class Hd extends P.Object3D{constructor(){super(...arguments);u(this,"children",[])}getRaycastIntersects(e){const i=[];return this.raycast(e,i),i}getRaycastIntersection(e){return this.getRaycastIntersects(e)[0]}}class Wd extends B.LineSegments{constructor(t,e){super(t,e)}}const Nl=new P.Vector3;class iA extends P.Sphere{expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Nl.subVectors(t,this.center);const e=Nl.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),s=(i-this.radius)*.5;this.center.addScaledVector(Nl,s/i),this.radius+=s}return this}}function nA(n){const{max:t,min:e}=n;return[new P.Vector3(t.x,t.y,t.z),new P.Vector3(e.x,t.y,t.z),new P.Vector3(e.x,e.y,t.z),new P.Vector3(t.x,e.y,t.z),new P.Vector3(t.x,t.y,e.z),new P.Vector3(e.x,t.y,e.z),new P.Vector3(e.x,e.y,e.z),new P.Vector3(t.x,e.y,e.z)]}function kn(n,t){const{max:e,min:i}=n;switch(t){case 0:return new P.Vector3(e.x,e.y,e.z);case 1:return new P.Vector3(i.x,e.y,e.z);case 2:return new P.Vector3(i.x,i.y,e.z);case 3:return new P.Vector3(e.x,i.y,e.z);case 4:return new P.Vector3(e.x,e.y,i.z);case 5:return new P.Vector3(i.x,e.y,i.z);case 6:return new P.Vector3(i.x,i.y,i.z);case 7:return new P.Vector3(e.x,i.y,i.z)}}function as(n){return Gl(n,"box3")}function Ud(n){return Gl(n,"sphere")}function sA(n){return ta(n,"box3")}function Qd(n){return ta(n,"sphere")}function ta(n,t){const e=t==="box3"?new P.Box3:new iA,i=new P.Vector3;if(n.updateWorldMatrix(!1,!1),n.traverse(s=>{var o;if(s.name==="shadow"||s.type==="Line2")return;const r=s.geometry;if(s.updateWorldMatrix(!1,!1),r!==void 0){const a=(o=r==null?void 0:r.attributes)==null?void 0:o.position;if(a)for(let l=0,c=a.count;l<c;l++)i.fromBufferAttribute(a,l).applyMatrix4(s.matrixWorld),e.expandByPoint(i);else r.vertices&&r.vertices.forEach(l=>{const c=l.clone().applyMatrix4(s.matrixWorld);e.expandByPoint(c)})}}),!e.isEmpty())return e}function Gl(n,t){const e=ta(n,t);return e&&e.applyMatrix4(rA(n.matrixWorld.clone())),e}const rA=n=>{const t=n.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],d=t[9],f=t[10],g=t[11],p=t[12],m=t[13],v=t[14],b=t[15],w=d*v*c-m*f*c+m*l*g-a*v*g-d*l*b+a*f*b,x=p*f*c-h*v*c-p*l*g+o*v*g+h*l*b-o*f*b,E=h*m*c-p*d*c+p*a*g-o*m*g-h*a*b+o*d*b,L=p*d*l-h*m*l-p*a*f+o*m*f+h*a*v-o*d*v,S=e*w+i*x+s*E+r*L;if(S===0)return n.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/S;return t[0]=w*R,t[1]=(m*f*r-d*v*r-m*s*g+i*v*g+d*s*b-i*f*b)*R,t[2]=(a*v*r-m*l*r+m*s*c-i*v*c-a*s*b+i*l*b)*R,t[3]=(d*l*r-a*f*r-d*s*c+i*f*c+a*s*g-i*l*g)*R,t[4]=x*R,t[5]=(h*v*r-p*f*r+p*s*g-e*v*g-h*s*b+e*f*b)*R,t[6]=(p*l*r-o*v*r-p*s*c+e*v*c+o*s*b-e*l*b)*R,t[7]=(o*f*r-h*l*r+h*s*c-e*f*c-o*s*g+e*l*g)*R,t[8]=E*R,t[9]=(p*d*r-h*m*r-p*i*g+e*m*g+h*i*b-e*d*b)*R,t[10]=(o*m*r-p*a*r+p*i*c-e*m*c-o*i*b+e*a*b)*R,t[11]=(h*a*r-o*d*r-h*i*c+e*d*c+o*i*g-e*a*g)*R,t[12]=L*R,t[13]=(h*m*s-p*d*s+p*i*f-e*m*f-h*i*v+e*d*v)*R,t[14]=(p*a*s-o*m*s-p*i*l+e*m*l+o*i*v-e*a*v)*R,t[15]=(o*d*s-h*a*s+h*i*l-e*d*l-o*i*f+e*a*f)*R,n};var Xd={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Hl={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},oA=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ia={CSS:{},springs:{}};function Ri(n,t,e){return Math.min(Math.max(n,t),e)}function Hr(n,t){return n.indexOf(t)>-1}function Wl(n,t){return n.apply(null,t)}var _e={arr:function(n){return Array.isArray(n)},obj:function(n){return Hr(Object.prototype.toString.call(n),"Object")},pth:function(n){return _e.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||_e.svg(n)},str:function(n){return typeof n=="string"},fnc:function(n){return typeof n=="function"},und:function(n){return typeof n=="undefined"},nil:function(n){return _e.und(n)||n===null},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return _e.hex(n)||_e.rgb(n)||_e.hsl(n)},key:function(n){return!Xd.hasOwnProperty(n)&&!Hl.hasOwnProperty(n)&&n!=="targets"&&n!=="keyframes"}};function Yd(n){var t=/\(([^)]+)\)/.exec(n);return t?t[1].split(",").map(function(e){return parseFloat(e)}):[]}function Zd(n,t){var e=Yd(n),i=Ri(_e.und(e[0])?1:e[0],.1,100),s=Ri(_e.und(e[1])?100:e[1],.1,100),r=Ri(_e.und(e[2])?10:e[2],.1,100),o=Ri(_e.und(e[3])?0:e[3],.1,100),a=Math.sqrt(s/i),l=r/(2*Math.sqrt(s*i)),c=l<1?a*Math.sqrt(1-l*l):0,h=1,d=l<1?(l*a+-o)/c:-o+a;function f(p){var m=t?t*p/1e3:p;return l<1?m=Math.exp(-m*l*a)*(h*Math.cos(c*m)+d*Math.sin(c*m)):m=(h+d*m)*Math.exp(-m*a),p===0||p===1?p:1-m}function g(){var p=ia.springs[n];if(p)return p;for(var m=1/6,v=0,b=0;;)if(v+=m,f(v)===1){if(b++,b>=16)break}else b=0;var w=v*m*1e3;return ia.springs[n]=w,w}return t?f:g}function aA(n){return n===void 0&&(n=10),function(t){return Math.ceil(Ri(t,1e-6,1)*n)*(1/n)}}var lA=function(){var n=11,t=1/(n-1);function e(h,d){return 1-3*d+3*h}function i(h,d){return 3*d-6*h}function s(h){return 3*h}function r(h,d,f){return((e(d,f)*h+i(d,f))*h+s(d))*h}function o(h,d,f){return 3*e(d,f)*h*h+2*i(d,f)*h+s(d)}function a(h,d,f,g,p){var m,v,b=0;do v=d+(f-d)/2,m=r(v,g,p)-h,m>0?f=v:d=v;while(Math.abs(m)>1e-7&&++b<10);return v}function l(h,d,f,g){for(var p=0;p<4;++p){var m=o(d,f,g);if(m===0)return d;var v=r(d,f,g)-h;d-=v/m}return d}function c(h,d,f,g){if(!(0<=h&&h<=1&&0<=f&&f<=1))return;var p=new Float32Array(n);if(h!==d||f!==g)for(var m=0;m<n;++m)p[m]=r(m*t,h,f);function v(b){for(var w=0,x=1,E=n-1;x!==E&&p[x]<=b;++x)w+=t;--x;var L=(b-p[x])/(p[x+1]-p[x]),S=w+L*t,R=o(S,h,f);return R>=.001?l(b,S,h,f):R===0?S:a(b,w,w+t,h,f)}return function(b){return h===d&&f===g||b===0||b===1?b:r(v(b),d,g)}}return c}(),Jd=function(){var n={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Expo:function(){return function(i){return i?Math.pow(2,10*i-10):0}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var s,r=4;i<((s=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((s*3-2)/22-i,2)}},Elastic:function(i,s){i===void 0&&(i=1),s===void 0&&(s=.5);var r=Ri(i,1,10),o=Ri(s,.1,2);return function(a){return a===0||a===1?a:-r*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/r))*(Math.PI*2)/o)}}},e=["Quad","Cubic","Quart","Quint"];return e.forEach(function(i,s){t[i]=function(){return function(r){return Math.pow(r,s+2)}}}),Object.keys(t).forEach(function(i){var s=t[i];n["easeIn"+i]=s,n["easeOut"+i]=function(r,o){return function(a){return 1-s(r,o)(1-a)}},n["easeInOut"+i]=function(r,o){return function(a){return a<.5?s(r,o)(a*2)/2:1-s(r,o)(a*-2+2)/2}},n["easeOutIn"+i]=function(r,o){return function(a){return a<.5?(1-s(r,o)(1-a*2))/2:(s(r,o)(a*2-1)+1)/2}}}),n}();function Ul(n,t){if(_e.fnc(n))return n;var e=n.split("(")[0],i=Jd[e],s=Yd(n);switch(e){case"spring":return Zd(n,t);case"cubicBezier":return Wl(lA,s);case"steps":return Wl(aA,s);default:return Wl(i,s)}}function qd(n){try{var t=document.querySelectorAll(n);return t}catch(e){return}}function na(n,t){for(var e=n.length,i=arguments.length>=2?arguments[1]:void 0,s=[],r=0;r<e;r++)if(r in n){var o=n[r];t.call(i,o,r,n)&&s.push(o)}return s}function sa(n){return n.reduce(function(t,e){return t.concat(_e.arr(e)?sa(e):e)},[])}function Kd(n){return _e.arr(n)?n:(_e.str(n)&&(n=qd(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function Ql(n,t){return n.some(function(e){return e===t})}function Xl(n){var t={};for(var e in n)t[e]=n[e];return t}function Yl(n,t){var e=Xl(n);for(var i in n)e[i]=t.hasOwnProperty(i)?t[i]:n[i];return e}function ra(n,t){var e=Xl(n);for(var i in t)e[i]=_e.und(n[i])?t[i]:n[i];return e}function cA(n){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);return t?"rgba("+t[1]+",1)":n}function hA(n){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,e=n.replace(t,function(a,l,c,h){return l+l+c+c+h+h}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),s=parseInt(i[1],16),r=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+s+","+r+","+o+",1)"}function dA(n){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(n),e=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,s=parseInt(t[3],10)/100,r=t[4]||1;function o(f,g,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?f+(g-f)*6*p:p<1/2?g:p<2/3?f+(g-f)*(2/3-p)*6:f}var a,l,c;if(i==0)a=l=c=s;else{var h=s<.5?s*(1+i):s+i-s*i,d=2*s-h;a=o(d,h,e+1/3),l=o(d,h,e),c=o(d,h,e-1/3)}return"rgba("+a*255+","+l*255+","+c*255+","+r+")"}function uA(n){if(_e.rgb(n))return cA(n);if(_e.hex(n))return hA(n);if(_e.hsl(n))return dA(n)}function sn(n){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(t)return t[1]}function fA(n){if(Hr(n,"translate")||n==="perspective")return"px";if(Hr(n,"rotate")||Hr(n,"skew"))return"deg"}function Zl(n,t){return _e.fnc(n)?n(t.target,t.id,t.total):n}function Fi(n,t){return n.getAttribute(t)}function Jl(n,t,e){var i=sn(t);if(Ql([e,"deg","rad","turn"],i))return t;var s=ia.CSS[t+e];if(!_e.und(s))return s;var r=100,o=document.createElement(n.tagName),a=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=r+e;var l=r/o.offsetWidth;a.removeChild(o);var c=l*parseFloat(t);return ia.CSS[t+e]=c,c}function $d(n,t,e){if(t in n.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=n.style[t]||getComputedStyle(n).getPropertyValue(i)||"0";return e?Jl(n,s,e):s}}function ql(n,t){if(_e.dom(n)&&!_e.inp(n)&&(!_e.nil(Fi(n,t))||_e.svg(n)&&n[t]))return"attribute";if(_e.dom(n)&&Ql(oA,t))return"transform";if(_e.dom(n)&&t!=="transform"&&$d(n,t))return"css";if(n[t]!=null)return"object"}function eu(n){if(_e.dom(n)){for(var t=n.style.transform||"",e=/(\w+)\(([^)]*)\)/g,i=new Map,s;s=e.exec(t);)i.set(s[1],s[2]);return i}}function pA(n,t,e,i){var s=Hr(t,"scale")?1:0+fA(t),r=eu(n).get(t)||s;return e&&(e.transforms.list.set(t,r),e.transforms.last=t),i?Jl(n,r,i):r}function Kl(n,t,e,i){switch(ql(n,t)){case"transform":return pA(n,t,i,e);case"css":return $d(n,t,e);case"attribute":return Fi(n,t);default:return n[t]||0}}function $l(n,t){var e=/^(\*=|\+=|-=)/.exec(n);if(!e)return n;var i=sn(n)||0,s=parseFloat(t),r=parseFloat(n.replace(e[0],""));switch(e[0][0]){case"+":return s+r+i;case"-":return s-r+i;case"*":return s*r+i}}function tu(n,t){if(_e.col(n))return uA(n);if(/\s/g.test(n))return n;var e=sn(n),i=e?n.substr(0,n.length-e.length):n;return t?i+t:i}function ec(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function mA(n){return Math.PI*2*Fi(n,"r")}function gA(n){return Fi(n,"width")*2+Fi(n,"height")*2}function vA(n){return ec({x:Fi(n,"x1"),y:Fi(n,"y1")},{x:Fi(n,"x2"),y:Fi(n,"y2")})}function iu(n){for(var t=n.points,e=0,i,s=0;s<t.numberOfItems;s++){var r=t.getItem(s);s>0&&(e+=ec(i,r)),i=r}return e}function AA(n){var t=n.points;return iu(n)+ec(t.getItem(t.numberOfItems-1),t.getItem(0))}function nu(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return mA(n);case"rect":return gA(n);case"line":return vA(n);case"polyline":return iu(n);case"polygon":return AA(n)}}function bA(n){var t=nu(n);return n.setAttribute("stroke-dasharray",t),t}function yA(n){for(var t=n.parentNode;_e.svg(t)&&_e.svg(t.parentNode);)t=t.parentNode;return t}function su(n,t){var e=t||{},i=e.el||yA(n),s=i.getBoundingClientRect(),r=Fi(i,"viewBox"),o=s.width,a=s.height,l=e.viewBox||(r?r.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o,h:a,vW:l[2],vH:l[3]}}function wA(n,t){var e=_e.str(n)?qd(n)[0]:n,i=t||100;return function(s){return{property:s,el:e,svg:su(e),totalLength:nu(e)*(i/100)}}}function PA(n,t,e){function i(h){h===void 0&&(h=0);var d=t+h>=1?t+h:0;return n.el.getPointAtLength(d)}var s=su(n.el,n.svg),r=i(),o=i(-1),a=i(1),l=e?1:s.w/s.vW,c=e?1:s.h/s.vH;switch(n.property){case"x":return(r.x-s.x)*l;case"y":return(r.y-s.y)*c;case"angle":return Math.atan2(a.y-o.y,a.x-o.x)*180/Math.PI}}function ru(n,t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=tu(_e.pth(n)?n.totalLength:n,t)+"";return{original:i,numbers:i.match(e)?i.match(e).map(Number):[0],strings:_e.str(n)||t?i.split(e):[]}}function tc(n){var t=n?sa(_e.arr(n)?n.map(Kd):Kd(n)):[];return na(t,function(e,i,s){return s.indexOf(e)===i})}function ou(n){var t=tc(n);return t.map(function(e,i){return{target:e,id:i,total:t.length,transforms:{list:eu(e)}}})}function CA(n,t){var e=Xl(t);if(/^spring/.test(e.easing)&&(e.duration=Zd(e.easing)),_e.arr(n)){var i=n.length,s=i===2&&!_e.obj(n[0]);s?n={value:n}:_e.fnc(t.duration)||(e.duration=t.duration/i)}var r=_e.arr(n)?n:[n];return r.map(function(o,a){var l=_e.obj(o)&&!_e.pth(o)?o:{value:o};return _e.und(l.delay)&&(l.delay=a?0:t.delay),_e.und(l.endDelay)&&(l.endDelay=a===r.length-1?t.endDelay:0),l}).map(function(o){return ra(o,e)})}function IA(n){for(var t=na(sa(n.map(function(r){return Object.keys(r)})),function(r){return _e.key(r)}).reduce(function(r,o){return r.indexOf(o)<0&&r.push(o),r},[]),e={},i=function(r){var o=t[r];e[o]=n.map(function(a){var l={};for(var c in a)_e.key(c)?c==o&&(l.value=a[c]):l[c]=a[c];return l})},s=0;s<t.length;s++)i(s);return e}function MA(n,t){var e=[],i=t.keyframes;i&&(t=ra(IA(i),t));for(var s in t)_e.key(s)&&e.push({name:s,tweens:CA(t[s],n)});return e}function kA(n,t){var e={};for(var i in n){var s=Zl(n[i],t);_e.arr(s)&&(s=s.map(function(r){return Zl(r,t)}),s.length===1&&(s=s[0])),e[i]=s}return e.duration=parseFloat(e.duration),e.delay=parseFloat(e.delay),e}function EA(n,t){var e;return n.tweens.map(function(i){var s=kA(i,t),r=s.value,o=_e.arr(r)?r[1]:r,a=sn(o),l=Kl(t.target,n.name,a,t),c=e?e.to.original:l,h=_e.arr(r)?r[0]:c,d=sn(h)||sn(l),f=a||d;return _e.und(o)&&(o=c),s.from=ru(h,f),s.to=ru($l(o,h),f),s.start=e?e.end:0,s.end=s.start+s.delay+s.duration+s.endDelay,s.easing=Ul(s.easing,s.duration),s.isPath=_e.pth(r),s.isPathTargetInsideSVG=s.isPath&&_e.svg(t.target),s.isColor=_e.col(s.from.original),s.isColor&&(s.round=1),e=s,s})}var au={css:function(n,t,e){return n.style[t]=e},attribute:function(n,t,e){return n.setAttribute(t,e)},object:function(n,t,e){return n[t]=e},transform:function(n,t,e,i,s){if(i.list.set(t,e),t===i.last||s){var r="";i.list.forEach(function(o,a){r+=a+"("+o+") "}),n.style.transform=r}}};function lu(n,t){var e=ou(n);e.forEach(function(i){for(var s in t){var r=Zl(t[s],i),o=i.target,a=sn(r),l=Kl(o,s,a,i),c=a||sn(l),h=$l(tu(r,c),l),d=ql(o,s);au[d](o,s,h,i.transforms,!0)}})}function xA(n,t){var e=ql(n.target,t.name);if(e){var i=EA(t,n),s=i[i.length-1];return{type:e,property:t.name,animatable:n,tweens:i,duration:s.end,delay:i[0].delay,endDelay:s.endDelay}}}function DA(n,t){return na(sa(n.map(function(e){return t.map(function(i){return xA(e,i)})})),function(e){return!_e.und(e)})}function cu(n,t){var e=n.length,i=function(r){return r.timelineOffset?r.timelineOffset:0},s={};return s.duration=e?Math.max.apply(Math,n.map(function(r){return i(r)+r.duration})):t.duration,s.delay=e?Math.min.apply(Math,n.map(function(r){return i(r)+r.delay})):t.delay,s.endDelay=e?s.duration-Math.max.apply(Math,n.map(function(r){return i(r)+r.duration-r.endDelay})):t.endDelay,s}var hu=0;function SA(n){var t=Yl(Xd,n),e=Yl(Hl,n),i=MA(e,n),s=ou(n.targets),r=DA(s,i),o=cu(r,e),a=hu;return hu++,ra(t,{id:a,children:[],animatables:s,animations:r,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var Ei=[],du=function(){var n;function t(){!n&&(!uu()||!ot.suspendWhenDocumentHidden)&&Ei.length>0&&(n=requestAnimationFrame(e))}function e(s){for(var r=Ei.length,o=0;o<r;){var a=Ei[o];a.paused?(Ei.splice(o,1),r--):(a.tick(s),o++)}n=o>0?requestAnimationFrame(e):void 0}function i(){ot.suspendWhenDocumentHidden&&(uu()?n=cancelAnimationFrame(n):(Ei.forEach(function(s){return s._onDocumentVisibility()}),du()))}return typeof document!="undefined"&&document.addEventListener("visibilitychange",i),t}();function uu(){return!!document&&document.hidden}function ot(n){n===void 0&&(n={});var t=0,e=0,i=0,s,r=0,o=null;function a(w){var x=window.Promise&&new Promise(function(E){return o=E});return w.finished=x,x}var l=SA(n);a(l);function c(){var w=l.direction;w!=="alternate"&&(l.direction=w!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,s.forEach(function(x){return x.reversed=l.reversed})}function h(w){return l.reversed?l.duration-w:w}function d(){t=0,e=h(l.currentTime)*(1/ot.speed)}function f(w,x){x&&x.seek(w-x.timelineOffset)}function g(w){if(l.reversePlayback)for(var E=r;E--;)f(w,s[E]);else for(var x=0;x<r;x++)f(w,s[x])}function p(w){for(var x=0,E=l.animations,L=E.length;x<L;){var S=E[x],R=S.animatable,z=S.tweens,O=z.length-1,A=z[O];O&&(A=na(z,function(ce){return w<ce.end})[0]||A);for(var C=Ri(w-A.start-A.delay,0,A.duration)/A.duration,I=isNaN(C)?1:A.easing(C),M=A.to.strings,D=A.round,T=[],H=A.to.numbers.length,W=void 0,J=0;J<H;J++){var te=void 0,q=A.to.numbers[J],ne=A.from.numbers[J]||0;A.isPath?te=PA(A.value,I*q,A.isPathTargetInsideSVG):te=ne+I*(q-ne),D&&(A.isColor&&J>2||(te=Math.round(te*D)/D)),T.push(te)}var se=M.length;if(!se)W=T[0];else{W=M[0];for(var ue=0;ue<se;ue++){M[ue];var ze=M[ue+1],Ce=T[ue];isNaN(Ce)||(ze?W+=Ce+ze:W+=Ce+" ")}}au[S.type](R.target,S.property,W,R.transforms),S.currentValue=W,x++}}function m(w){l[w]&&!l.passThrough&&l[w](l)}function v(){l.remaining&&l.remaining!==!0&&l.remaining--}function b(w){var x=l.duration,E=l.delay,L=x-l.endDelay,S=h(w);l.progress=Ri(S/x*100,0,100),l.reversePlayback=S<l.currentTime,s&&g(S),!l.began&&l.currentTime>0&&(l.began=!0,m("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,m("loopBegin")),S<=E&&l.currentTime!==0&&p(0),(S>=L&&l.currentTime!==x||!x)&&p(x),S>E&&S<L?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,m("changeBegin")),m("change"),p(S)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,m("changeComplete")),l.currentTime=Ri(S,0,x),l.began&&m("update"),w>=x&&(e=0,v(),l.remaining?(t=i,m("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&c()):(l.paused=!0,l.completed||(l.completed=!0,m("loopComplete"),m("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)))))}return l.reset=function(){var w=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=w==="reverse",l.remaining=l.loop,s=l.children,r=s.length;for(var x=r;x--;)l.children[x].reset();(l.reversed&&l.loop!==!0||w==="alternate"&&l.loop===1)&&l.remaining++,p(l.reversed?l.duration:0)},l._onDocumentVisibility=d,l.set=function(w,x){return lu(w,x),l},l.tick=function(w){i=w,t||(t=i),b((i+(e-t))*ot.speed)},l.seek=function(w){b(h(w))},l.pause=function(){l.paused=!0,d()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,Ei.push(l),d(),du())},l.reverse=function(){c(),l.completed=!l.reversed,d()},l.restart=function(){l.reset(),l.play()},l.remove=function(w){var x=tc(w);pu(x,l)},l.reset(),l.autoplay&&l.play(),l}function fu(n,t){for(var e=t.length;e--;)Ql(n,t[e].animatable.target)&&t.splice(e,1)}function pu(n,t){var e=t.animations,i=t.children;fu(n,e);for(var s=i.length;s--;){var r=i[s],o=r.animations;fu(n,o),!o.length&&!r.children.length&&i.splice(s,1)}!e.length&&!i.length&&t.pause()}function LA(n){for(var t=tc(n),e=Ei.length;e--;){var i=Ei[e];pu(t,i)}}function TA(n,t){t===void 0&&(t={});var e=t.direction||"normal",i=t.easing?Ul(t.easing):null,s=t.grid,r=t.axis,o=t.from||0,a=o==="first",l=o==="center",c=o==="last",h=_e.arr(n),d=parseFloat(h?n[0]:n),f=h?parseFloat(n[1]):0,g=sn(h?n[1]:n)||0,p=t.start||0+(h?d:0),m=[],v=0;return function(b,w,x){if(a&&(o=0),l&&(o=(x-1)/2),c&&(o=x-1),!m.length){for(var E=0;E<x;E++){if(!s)m.push(Math.abs(o-E));else{var L=l?(s[0]-1)/2:o%s[0],S=l?(s[1]-1)/2:Math.floor(o/s[0]),R=E%s[0],z=Math.floor(E/s[0]),O=L-R,A=S-z,C=Math.sqrt(O*O+A*A);r==="x"&&(C=-O),r==="y"&&(C=-A),m.push(C)}v=Math.max.apply(Math,m)}i&&(m=m.map(function(M){return i(M/v)*v})),e==="reverse"&&(m=m.map(function(M){return r?M<0?M*-1:-M:Math.abs(v-M)}))}var I=h?(f-d)/v:d;return p+I*(Math.round(m[w]*100)/100)+g}}function zA(n){n===void 0&&(n={});var t=ot(n);return t.duration=0,t.add=function(e,i){var s=Ei.indexOf(t),r=t.children;s>-1&&Ei.splice(s,1);function o(f){f.passThrough=!0}for(var a=0;a<r.length;a++)o(r[a]);var l=ra(e,Yl(Hl,n));l.targets=l.targets||n.targets;var c=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=_e.und(i)?c:$l(i,c),o(t),t.seek(l.timelineOffset);var h=ot(l);o(h),r.push(h);var d=cu(r,n);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}ot.version="3.2.1",ot.speed=1,ot.suspendWhenDocumentHidden=!0,ot.running=Ei,ot.remove=LA,ot.get=Kl,ot.set=lu,ot.convertPx=Jl,ot.path=wA,ot.setDashoffset=bA,ot.stagger=TA,ot.timeline=zA,ot.easing=Ul,ot.penner=Jd,ot.random=function(n,t){return Math.floor(Math.random()*(t-n+1))+n};const xi=new Map,Wr=new Map;function OA(n){nn(n).forEach(e=>{var i,s,r;xi.has(e)||(e instanceof HTMLElement?xi.set(e,{opacity:e.style.opacity===""?void 0:e.style.opacity,visible:{display:e.style.display,visibility:e.style.visibility}}):e.isObject3D&&(e.material?e.material instanceof P.ShaderMaterial?xi.set(e,{opacity:(i=e.material.uniforms.opacity)==null?void 0:i.value,transparent:e.material.transparent,visible:e.visible}):xi.set(e,{opacity:(s=e.material)==null?void 0:s.opacity,transparent:(r=e.material)==null?void 0:r.transparent,visible:e.visible}):xi.set(e,{visible:e.visible})))})}function mu(n){nn(n).forEach(e=>{const i=xi.get(e);i&&(e instanceof HTMLElement&&(e.style.opacity=i.opacity===void 0?"":i.opacity,e.style.display=i.visible.display,e.style.visibility=i.visible.visibility),e.isObject3D&&(e.visible=i.visible,e.material&&(e.material instanceof P.ShaderMaterial?(e.material.uniforms.opacity&&(e.material.uniforms.opacity.value=i.opacity),e.material.transparent=i.transparent):(e.material.opacity=i.opacity,e.material.transparent=i.transparent))),xi.delete(e))})}function oa(n,t){var a;const e=(a=t==null?void 0:t.traverseTHREEObject)!=null?a:!0;let i=nn(n);const s=[];i.forEach(l=>{l&&(l instanceof HTMLElement?s.push(l):l.isObject3D&&(e?(s.push(l),l.traverse(c=>{c&&s.push(c)})):s.push(l)))}),i=[...new Set(s.filter(Boolean))],OA(i);const r=ot(F({targets:i,duration:300,easing:"linear",direction:"alternate",loop:4,autoplay:!1,update:l=>{var c;l.animatables.forEach(h=>{var p;const d=h.target;if(!xi.has(d))return;const g=Number((p=xi.get(d).opacity)!=null?p:1)*(100-l.progress)/100;d instanceof HTMLElement?d.style.opacity=String(g):d.material&&(d.material instanceof P.ShaderMaterial?(d.material.uniforms.opacity&&(d.material.uniforms.opacity.value=g),d.material.transparent=!0):(d.material.opacity=g,d.material.transparent=!0))}),(c=t==null?void 0:t.updateRender)==null||c.call(t)}},t));r.preComplete=()=>{r!=null&&r.completed||(r==null||r.pause(),mu(i),setTimeout(()=>{var l;return(l=t==null?void 0:t.updateRender)==null?void 0:l.call(t)}))};const o=Wr.get(n);return o==null||o.pause(),o==null||o.seek(0),Wr.set(n,r),r.play(),r.finished.then(()=>{var l;mu(i),setTimeout(()=>{Wr.get(n)===r&&Wr.delete(n)},1e3),(l=t==null?void 0:t.updateRender)==null||l.call(t)}),r}function gu(n,t){return oa(n,F({update:e=>{var i;e.animatables.forEach(s=>{var c,h;const r=s.target;if(!xi.has(r))return;const o=xi.get(r),l=Number((h=(c=o==null?void 0:o.opacity)!=null?c:t==null?void 0:t.maxOpacity)!=null?h:1)*(e.progress/100);r instanceof HTMLElement?(r.style.opacity=String(l),r.style.visibility="visible"):r.isObject3D&&(nn(n).includes(r)&&(r.visible=!0),r.material&&(r.material instanceof P.ShaderMaterial?(r.material.uniforms.opacity&&(r.material.uniforms.opacity.value=l),r.material.transparent=!0):(r.material.opacity=l,r.material.transparent=!0)))}),(i=t==null?void 0:t.updateRender)==null||i.call(t)}},t))}function jA(n,t){const e=gi(n),{x:i,y:s}=t,r=i*2-1,o=s*2-1,a=new P.Raycaster;a.setFromCamera({x:r,y:o},n.camera);const c=e.intersectRaycaster(a)[0];if(c)return fe(F({},c),{raycaster:a,isVirtual:!1})}function VA(n,t){const e=n.getElement();if(!e)return;const i=Ed(t,e),s=new P.Raycaster;return s.setFromCamera(i,n.camera),s}const BA="data:image/png;base64,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";function Ws(n){const t=[];return nn(n).forEach(i=>{i.traverse(s=>{(s.isCSS3DObjectPlus||s.isCSS3DObject||s.isCSS3DSprite)&&t.push(s)})}),t}class _A extends P.Scene{constructor(){super()}add(...t){return super.add(...t),Ws(t).forEach(e=>{e.mode="front"}),this}}class RA extends P.Scene{constructor(e){super();u(this,"scene");if(!e)throw new Error("CSS3DBehindScene: scene is required");this.scene=e}add(...e){return super.add(...e),Ws(e).forEach(i=>{i.mode="behind",this.scene.add(i.getOpacityMesh())}),this}remove(...e){return Ws(e).forEach(i=>{var s;(s=i.opacityMesh)==null||s.removeFromParent(),i.opacityMesh=null}),super.remove(...e),this}}class vu extends P.Group{constructor(e){super();u(this,"isCSS3DGroup",!0);u(this,"mode");u(this,"CSS3DObjectLength",0);this.mode=e}add(...e){return Ws(e).forEach(i=>{i.mode=this.mode}),super.add(...e),this.updateLength(),this}setVisible(e){this.visible=e,this.traverse(i=>{i.isCSS3DObjectPlus&&i.updateVisible()})}remove(...e){return super.remove(...e),this.updateLength(),this}updateLength(){this.CSS3DObjectLength=Ws(this).length}}class FA extends vu{constructor(){super("front")}}class NA extends vu{constructor(e){super("behind");u(this,"scene");if(!e)throw new Error("CSS3DBehindScene: scene is required");this.scene=e}add(...e){return Ws(e).forEach(i=>{this.scene.add(i.getOpacityMesh())}),super.add(...e),this}}const GA=3,ic="CSS3DRenderer",Ur=`${ic}@${GA}`,Us=()=>{console.error(`${Ur} is disposed`)},Mt={css3DObjects:[],frontModeStore:{css3DRenderer:new Ko},behindModeStore:{css3DRenderer:new Ko}};function Au(n){return Mt.css3DObjects.find(t=>t.id===n)}function HA(n){Mt.frontModeStore.css3DRenderer.setWrapper(n)}function WA(n){Mt.behindModeStore.css3DRenderer.setWrapper(n)}class Qs{constructor(t){u(this,"hooks",new Pt);u(this,"state",{enabled:!0,visible:!0,disposed:!1});u(this,"_scene");u(this,"store",{frontModeGroup:new FA});u(this,"create3DElement",(t,e,i)=>{if(this.state.disposed)return Us();const s=(()=>{const L={ratio:.00216,devicePixelRatio:1,mode:"front",autoRender:!0,container:document.createElement("div"),pointerEvents:"none",wrapperStyle:{}};return Object.assign(L,i)})(),r=e.map(Qe);if((r==null?void 0:r.length)<4)return console.error(`${Ur}: requires 4 point but params may have fewer`);const{ratio:o,devicePixelRatio:a,mode:l,autoRender:c,container:h,pointerEvents:d,wrapperStyle:f}=s;let g=!1;const p=this.createObject(r,{ratio:o,dpr:a,container:h,mode:l,pointerEvents:d,wrapperStyle:f});Mt.css3DObjects.push(p),s.scene&&this.setScene(s.scene);const m=()=>{if(g)return;const L=p.mode==="front"?this.getFrontCSS3DObjectGroup():this.getBehindCSS3DObjectGroup();L&&L.add(p)},v=()=>{g||(m(),this.render(t),this.hooks.emit("render"))},b=L=>this.setVisibleById(p.id,L),w=L=>this.setEnabledById(p.id,L),x=()=>(g=!0,p.removeFromParent(),!0),E=l==="front"?Mt.frontModeStore.css3DRenderer:Mt.behindModeStore.css3DRenderer;return c&&v(),{id:p.uuid,container:h,css3DObject:p,render:c?void 0:v,show:()=>b(!0),hide:()=>b(!1),setVisible:b,enable:()=>w(!0),disable:()=>w(!1),setEnabled:w,dispose:x,appendToElement:L=>E.setWrapper(L)}});u(this,"setVisibleById",(t,e)=>{var i;(i=Au(t))==null||i.setVisible(e)});u(this,"setEnabledById",(t,e)=>{const i=Au(t);if(!i)return;const s=i.mode==="front"?this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}):this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1});s&&(e?s.add(i):s.remove(i))});u(this,"createObject",(t,e)=>{const i=new Fd(fe(F({cornerPoints:t},e),{style:e.wrapperStyle}));return i.element.classList.add(`${ic}__container`),i.element.id=`${ic}__container--${i.uuid}`,i});t&&this.setScene(t)}get scene(){return this._scene||console.error("scene doesn't exist!, please call setScene(scene) first"),this._scene}static get frontModeCSS3DRenderer(){return Mt.frontModeStore.css3DRenderer}static get behindModeCSS3DRenderer(){return Mt.behindModeStore.css3DRenderer}get frontModeCSS3DRenderer(){return Mt.frontModeStore.css3DRenderer}get behindModeCSS3DRenderer(){return Mt.behindModeStore.css3DRenderer}setScene(t){this._scene=t}getCurrentState(){return this.state}setState(t,e={userAction:!0}){if(this.state.disposed)return Us();const i=F({},this.state);this.state=Object.assign(this.state,t),i.visible!==this.state.visible&&(t.visible?this.handleShow():this.handleHide()),i.enabled!==this.state.enabled&&(t.enabled?this.handleEnable():this.handleDisable()),i.disposed!==this.state.disposed&&this.handleDispose(),this.hooks.emit("stateChange",{state:this.state,prevState:i,userAction:e.userAction})}dispose(){this.setState({disposed:!0}),this.hooks.emit("dispose")}show(){return ee(this,arguments,function*({userAction:t}={userAction:!0}){if(this.state.disposed)return Us();this.setState({visible:!0},{userAction:t}),this.hooks.emit("show",{userAction:t})})}hide(){return ee(this,arguments,function*({userAction:t}={userAction:!0}){if(this.state.disposed)return Us();this.setState({visible:!1},{userAction:t}),this.hooks.emit("hide",{userAction:t})})}enable({userAction:t}={userAction:!0}){if(this.state.disposed)return Us();this.setState({enabled:!0},{userAction:t}),this.hooks.emit("enable",{userAction:t})}disable({userAction:t}={userAction:!0}){if(this.state.disposed)return Us();this.setState({enabled:!1},{userAction:t}),this.hooks.emit("disable",{userAction:t})}getFrontCSS3DScene({createSceneIfNotExists:t=!1}={}){var i;const e=(i=Mt.frontModeStore)==null?void 0:i.css3DScene;if(e)return e;if(t){const s=new _A;Mt.frontModeStore.css3DScene=s}return Mt.frontModeStore.css3DScene}getBehindCSS3DScene({createSceneIfNotExists:t=!1}={}){var i,s;const e=(i=Mt.behindModeStore)==null?void 0:i.css3DScene;if(e)return e;if(t){const r=(s=Mt.behindModeStore.scene)!=null?s:this.scene;if(!r){console.error(`${Ur}: scene is required when mode is behind`);return}const o=new RA(r);Mt.behindModeStore.css3DScene=o,Mt.behindModeStore.scene=r}return Mt.behindModeStore.css3DScene}getFrontCSS3DObjectGroup({addGroupIfNotExists:t=!0}={}){const e=this.getFrontCSS3DScene({createSceneIfNotExists:t});return t&&e&&(e.getObjectById(this.store.frontModeGroup.id)||e.add(this.store.frontModeGroup)),this.store.frontModeGroup}getBehindCSS3DObjectGroup({addGroupIfNotExists:t=!0}={}){var i;const e=this.getBehindCSS3DScene({createSceneIfNotExists:t});if(t&&e&&this.scene){const s=(i=this.store.behindModeGroup)!=null?i:new NA(this.scene);this.store.behindModeGroup=s,e.getObjectById(s.id)||e.add(s)}return this.store.behindModeGroup}render(t){var e,i;if(this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}).CSS3DObjectLength>0){const s=this.getFrontCSS3DScene({createSceneIfNotExists:!0});if(!s)return console.error(`${Ur}: css3DScene is required when mode is front`);Mt.frontModeStore.css3DRenderer.renderEveryFrame(s,t)}if(((i=(e=this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1}))==null?void 0:e.CSS3DObjectLength)!=null?i:0)>0){const s=this.getBehindCSS3DScene({createSceneIfNotExists:!0});if(!s)return console.error(`${Ur}: css3DScene is required when mode is behind`);Mt.behindModeStore.css3DRenderer.renderEveryFrame(s,t)}}handleShow(){return ee(this,null,function*(){var t;this.store.frontModeGroup.setVisible(!0),(t=this.store.behindModeGroup)==null||t.setVisible(!0)})}handleHide(){return ee(this,null,function*(){var t;this.store.frontModeGroup.setVisible(!1),(t=this.store.behindModeGroup)==null||t.setVisible(!1)})}handleEnable(){var t,e;(t=this.getFrontCSS3DScene())==null||t.add(this.store.frontModeGroup),this.store.behindModeGroup&&((e=this.getBehindCSS3DScene())==null||e.add(this.store.behindModeGroup))}handleDisable(){var t,e,i;this.store.frontModeGroup.children.forEach(s=>{s instanceof tn&&s.element instanceof Element&&s.element.parentNode!==null&&s.element.remove()}),(t=this.store.behindModeGroup)==null||t.children.forEach(s=>{s instanceof tn&&s.element instanceof Element&&s.element.parentNode!==null&&s.element.remove()}),(e=this.getFrontCSS3DScene())==null||e.remove(this.store.frontModeGroup),this.store.behindModeGroup&&((i=this.getBehindCSS3DScene())==null||i.remove(this.store.behindModeGroup))}handleDispose(){this.handleDisable()}}u(Qs,"setFrontModeContainer",HA),u(Qs,"setBehindModeContainer",WA);const bu="v2.0.1",yu=`CSS3DRenderPlugin@${bu}`;let UA=class extends Qs{constructor(e){super();u(this,"five");u(this,"behindFiveContainer");u(this,"frontFiveContainer");u(this,"VERSION",bu);u(this,"staticPrefix","//vr-image-4.realsee-cdn.cn");u(this,"created3DElementResults",[]);u(this,"create3DDomContainer",(e,i)=>{if(this.state.disposed)return;const s=(()=>{var d;(i==null?void 0:i.dpr)!==void 0&&console.warn(`${yu}: please use "config.devicePixelRatio" replace "config.dpr"`);const h={ratio:.00216,devicePixelRatio:(d=i==null?void 0:i.dpr)!=null?d:1,mode:"front",autoRender:!0,wrapperStyle:{}};return Object.assign(h,i,(i==null?void 0:i.mode)==="behind"?{scene:this.five.scene}:void 0)})(),{autoRender:r}=s;s.mode==="behind"&&s.behindFiveContainer&&(this.behindFiveContainer=s.behindFiveContainer);const o=this.create3DElement(this.five.camera,e,fe(F({},s),{autoRender:!1}));if(!o)return;const a=o.dispose;o.dispose=()=>(this.created3DElementResults.includes(o)&&this.created3DElementResults.splice(this.created3DElementResults.indexOf(o),1),a());const l=()=>{var d,f;const h=o.css3DObject.mode==="front"?(f=this.frontFiveContainer)!=null?f:(d=this.five.getElement())==null?void 0:d.parentElement:this.getBehindFiveElement();if(!h)return console.error(`${yu}: wrapper is ${h}; mode is ${o.css3DObject.mode}`);o.appendToElement(h),o.render(),this.created3DElementResults.push(o)},c=()=>{ai(this.five).then(()=>l())};return r&&c(),fe(F({},o),{render:r?void 0:c})});this.five=e}disposeAll(){return this.dispose()}setState(...e){const i=super.setState(...e);return this.five.needsRender=!0,i}appendToFrontFiveContainer(e){this.frontFiveContainer=e,this.created3DElementResults.forEach(i=>{i.css3DObject.mode==="front"&&i.appendToElement(e)})}appendToBehindFiveContainer(e){this.behindFiveContainer=e,this.created3DElementResults.forEach(i=>{i.css3DObject.mode==="behind"&&i.appendToElement(e)})}getBehindFiveElement(){return this.behindFiveContainer?this.behindFiveContainer:(this.behindFiveContainer=jl(this.five),this.behindFiveContainer)}absoluteUrl(e){return rc(this.staticPrefix,e)}clear(){this.created3DElementResults.forEach(e=>{e.dispose()}),this.created3DElementResults=[]}};const Qr=n=>new UA(n);class QA{constructor(t){u(this,"five");u(this,"contentElement",document.createElement("div"));u(this,"animeIns");u(this,"container");u(this,"css3DObject");u(this,"disposeCss3DObject");u(this,"state",{enabled:!1});this.five=t;const i=.4/2,r=Qr(t).create3DDomContainer([[-i,i,0],[-i,-i,0],[i,-i,0],[i,i,0]].map(o=>new P.Vector3().fromArray(o)));if(r){const{container:o,dispose:a,css3DObject:l}=r;this.container=o,this.css3DObject=l,this.disposeCss3DObject=a}this.contentElement.style.width="100%",this.contentElement.style.height="100%",this.contentElement.style.backgroundImage=`url(${BA})`,this.contentElement.style.backgroundSize="100%",this.contentElement.style.backgroundRepeat="no-repeat"}enable(){var t;this.state.enabled||(this.state.enabled=!0,(t=this.container)==null||t.appendChild(this.contentElement))}disable(){this.state.enabled&&(this.state.enabled=!1,this.contentElement.remove())}updateWithIntersect(t){if(!t.face||!this.css3DObject)return;const e=new P.Vector3().addVectors(t.point,t.face.normal);this.css3DObject.position.copy(t.point),this.css3DObject.lookAt(e),this.five.needsRender=!0}doAnimation(){var t;(t=this.animeIns)==null||t.dispose(),new ls({progress:0}).to({progress:[1,0]}).duration(500).easing(Mi.Quadratic.InOut).onUpdate(({progress:e})=>{}).play()}dispose(){var t;(t=this.disposeCss3DObject)==null||t.call(this)}}const XA=`
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`,YA=`
varying vec2 vUv;
void main() {
  vec2 uv = vec2(vUv.x, vUv.y);
  float a = 1.0;
  float match = 1.0 - uv.x;
  gl_FragColor = vec4(1.0,1.0,1.0,match);
}
`;function ZA(){const n=new P.PlaneGeometry(.4,.4),t=Vd,e=new P.TextureLoader().load(t);e.encoding=P.sRGBEncoding,e.minFilter=P.LinearFilter;const i=new P.MeshBasicMaterial({map:e,transparent:!0,depthTest:!1});return new P.Mesh(n,i)}function JA(){const n=new P.CurvePath;n.add(new P.LineCurve3(new P.Vector3(0,0,0),new P.Vector3(0,0,.1)));const t=new P.TubeGeometry(n,8,.003),e=new P.ShaderMaterial({vertexShader:XA,fragmentShader:YA,depthTest:!1,transparent:!0});return new P.Mesh(t,e)}function qA(){const n=new P.SphereGeometry(.01,20,20),t=new P.MeshBasicMaterial({color:10349931,depthTest:!1,transparent:!0,side:P.DoubleSide}),e=new P.Mesh(n,t);return e.position.set(0,0,.1),e}class KA extends P.Object3D{constructor(){super();u(this,"planeMesh");u(this,"lineMesh");u(this,"ballMesh");this.planeMesh=ZA(),this.lineMesh=JA(),this.ballMesh=qA(),this.add(this.planeMesh,this.lineMesh,this.ballMesh)}updateWithIntersect(e){if(!e.face)return;const i=new P.Vector3().addVectors(e.point,e.face.normal);this.position.copy(e.point),this.lookAt(i)}dispose(){var e;(e=this.planeMesh.material.map)==null||e.dispose()}}const nc=Math.PI*2;function sc(n){return(n%nc+nc)%nc}function Xr(n){return{longitude:sc(-Math.atan2(n.x,-n.z)),latitude:-Math.asin(n.y/1)}}function $A(n,t,e){return ee(this,null,function*(){var w,x,E;if(!t)return;const i=Qd(t);if(!i)return;const s=new Qo(n),r=(w=e==null?void 0:e.scale)!=null?w:1.4,o=i.center,a=n.camera.position.clone().sub(o).setY(0).normalize(),l=n.state.mode==="Mapview"?n.state.fov:60,h=Math.max(1.5,i.radius*r),d=h*(1/Math.tan(P.MathUtils.degToRad(l/2)));let f=0;const g=[],p=L=>{const S=P.MathUtils.degToRad(L);return a.clone().applyAxisAngle(new P.Vector3(0,1,0),S).clone().multiplyScalar(d).add(new P.Vector3(0,h,0)).add(o)};for(;f!==360;){let L=0;const S=p(f),R=A=>{const C=A.distanceTo(S),I=new P.Raycaster(A,S.clone().sub(A).normalize()),M=s.model.intersectRaycaster(I,void 0,!0)[0],D=M==null?void 0:M.distance;Fe(D)?D>C&&(L+=1):L+=1},z=i.clampPoint(S,new P.Vector3);R(z);const O=new P.Vector3(o.x,S.y,o.z);if(R(O),Fe(g[L])&&f>g[L]||(g[L]=f),L===2)break;f+=30}const m=p((E=(x=g[2])!=null?x:g[1])!=null?E:0),v=m.distanceTo(o),b=Xr(o.clone().sub(m).normalize());if(n.state.mode==="Mapview")return n.updateCamera(F({offset:o,distance:v},b),800);n.setState(F({mode:"Mapview",offset:o,distance:v},b)),yield n.ready()})}function wu(n,t,e){return ee(this,null,function*(){var m,v;if(!t)return;const i=(m=e==null?void 0:e.distance)!=null?m:3,s=new Qo(n),r=n.camera.position.clone().sub(t).setY(0).normalize(),o=n.state.mode==="Mapview"?n.state.fov:60,a=i,l=a*Math.cos(P.MathUtils.degToRad(o/2)),c=a*Math.sin(P.MathUtils.degToRad(o/2));let h=0;const d=[],f=b=>{const w=P.MathUtils.degToRad(b);return r.clone().applyAxisAngle(new P.Vector3(0,1,0),w).clone().multiplyScalar(l).add(new P.Vector3(0,c,0)).add(t)};for(;h!==360;){let b=0;const w=f(h);if((E=>{const L=E.distanceTo(w),S=new P.Raycaster(E,w.clone().sub(E).normalize()),R=s.model.intersectRaycaster(S,void 0,!0)[0],z=R==null?void 0:R.distance;Fe(z)?z>L&&(b+=1):b+=1})(t),d[b]=h,b===1)break;h+=30}const g=f((v=d[1])!=null?v:0),p=Xr(t.clone().sub(g).normalize());if(n.state.mode==="Mapview")return n.updateCamera(F({offset:t,distance:i},p),800);n.setState(F({mode:"Mapview",offset:t,distance:i},p)),yield n.ready()})}function Pu(n,t){const{top:e,left:i,width:s,height:r}=t.getBoundingClientRect();return new P.Vector2((n.x-i)/s*2-1,-(n.y-e)/r*2+1)}class Xs{constructor(t,e){u(this,"_five");u(this,"dragging",!1);u(this,"boundObject",{});u(this,"config");u(this,"handleWantsGesture",(t,e)=>{if(e.length!==1)return;const i=e[0];if(i.raycaster){const s=new Vr;s.ray=i.raycaster.ray,s.near=i.raycaster.near,s.far=i.raycaster.far,s.camera=i.raycaster.camera,s.layers=i.raycaster.layers,s.params=i.raycaster.params,i.raycaster=s}if(i){if(t==="mouseMove"&&this.onDomEvent("hover",i),t==="tap"){const s=new MouseEvent("click",{clientX:i.x,clientY:i.y}),r=this.onDomEvent("click",i,s),o=this.onDomEvent("wantDblclick",i,s,this.boundObject.dblclick);if(r===!1||o===!1)return!1}if(this.dragging)return!1}});u(this,"handleDomEvent",(t,e,i)=>{const s={x:e.clientX,y:e.clientY};this.onDomEvent(t,s,e,i)});u(this,"handleMouseEvent",t=>{this.handleDomEvent(t.type,t)});u(this,"handleMousedown",t=>{this.handleDomEvent("mousedown",t),this.handleDomEvent("dragstart",t,this.haveDragEventObject)});u(this,"handleMouseup",t=>{var e;this.dragging=!1,(e=this.haveDragEventObject)==null||e.forEach(i=>{i._dragging&&(i._dragging=!1,this.notify({eventName:"dragend",object:i,originEvent:t,raycaster:this.getRaycaster({x:t.clientX,y:t.clientY})}))}),this.handleDomEvent("mouseup",t)});u(this,"handleMousemove",t=>{var e;this.dragging&&((e=this.boundObject.drag)==null||e.forEach(i=>{i._dragging&&this.notify({eventName:"drag",object:i,originEvent:t,raycaster:this.getRaycaster({x:t.clientX,y:t.clientY})})}))});u(this,"onDomEvent",(t,e,i,s=this.boundObject[t])=>{var f,g,p,m,v;if(!e||!s||(s==null?void 0:s.length)===0)return;const r=[];((f=this.config)==null?void 0:f.fiveModels)!==null&&((g=this.config)!=null&&g.fiveModels?r.push(...this.config.fiveModels):r.push(this.model));const o=r.filter(b=>b.loaded),a=(p=e.raycaster)!=null?p:this.getRaycaster(e);a.params.Points.threshold=.04;const l=a.intersectObjects(s,!0),c=[];o.forEach(b=>{const w=b.intersectRaycaster(a);c.push(...w)});const h=.01;if(c.length>0&&l.length>0&&c[0].distance+h<l[0].distance)return;const d=(m=l==null?void 0:l[0])==null?void 0:m.object;if(t==="wantDblclick")return!1;if((!d||!this.objectIsBound(d))&&t==="hover")for(const b of(v=this.boundObject.hover)!=null?v:[])b._hovered&&this.notify({eventName:"unHover",object:b});if(d&&d&&this.notify({eventName:t,object:d,originEvent:i,raycaster:a,intersects:l,fiveModelIntersects:c}))return!1});u(this,"objectIsBound",t=>{let e=t._domEvent,i=t.parent;for(;typeof e=="undefined"&&i;)e=i._domEvent,i=i.parent;return!!e});u(this,"notify",t=>{var m,v,b,w,x,E,L;const{eventName:e,object:i,originEvent:s,raycaster:r,intersects:o,fiveModelIntersects:a}=t;if(!i)return!1;let l=!1,c=[];const h=[],d=()=>{if(!o)return!1;const S=o.slice(1);return S[0]?this.notify(fe(F({},t),{object:S[0].object,intersects:S})):!1};let f=i;for(h.push(f);f.parent;)f=f.parent,h.push(f);const g=h[h.length-1];if((m=this.config)!=null&&m.noEmitWhenNotInScene&&g.type!=="Scene")return d();let p=!1;for(const S of h){if(l)break;S.draggable&&(e==="dragstart"&&(S._dragging=!0,this.dragging=!0),e==="dragend"&&(S._dragging=!1,this.dragging=!1));const R=S._domEvent;if(!R)continue;const z=R[`${e}Handler`];if(z)for(const[O,A]of z){if(A!=null&&A.noEmitWhenNotInScene&&g.type!=="Scene")continue;if(A.skipPano&&a){const I=(v=a[0])==null?void 0:v.point;if(I&&((x=(w=(b=this.five.observers)==null?void 0:b[this.five.panoIndex])==null?void 0:w.accessibleNodes)!=null&&x.some(M=>{var T;const D=(T=this.five.works.getResolvedObserver({workCode:this.five.state.workCode,panoIndex:M}))==null?void 0:T.standingPosition;return(D==null?void 0:D.distanceTo(I))<.3})))continue}if(((E=this.config)!=null&&E.noEmitWhenHide||A!=null&&A.noEmitWhenHide)&&!Fl(S))continue;if(p=!0,e==="hover"){if(S._hovered)continue;S._hovered=!0;for(const I of(L=this.boundObject.hover)!=null?L:[])I!==S&&I._hovered&&this.notify({eventName:"unHover",object:I})}if(e==="unHover"){if(!S._hovered)continue;S._hovered=!1}const C=O({type:e,target:S,origDomEvent:s,raycaster:r,intersects:o,stopPropagation:()=>{l=!0}});c.push(C!=null?C:!0)}}if(p===!1)return d();if(e==="click"||e==="wantDblclick")return c.some(S=>S===!0)});var i;this.five=t,this.config=e,t.off("wantsGesture",this.handleWantsGesture),t.on("wantsGesture",this.handleWantsGesture),document.addEventListener("mousedown",this.handleMousedown),document.addEventListener("dblclick",this.handleMouseEvent),document.addEventListener("mouseup",this.handleMouseup),document.addEventListener("mousemove",this.handleMousemove),window.__FIVE_DOM_EVENTS__=(i=window.__FIVE_DOM_EVENTS__)!=null?i:[],window.__FIVE_DOM_EVENTS__.push(this)}get five(){return this._five}set five(t){var e;(e=this._five)==null||e.off("wantsGesture",this.handleWantsGesture),this._five=t,this._five.on("wantsGesture",this.handleWantsGesture)}get haveDragEventObject(){return[...new Set([this.boundObject.dragend,this.boundObject.drag,this.boundObject.dragstart].flat())].filter(Boolean)}get model(){return gi(this.five)}addAutoBindEventListener(t,e,i,s){const r=()=>this.addEventListener(t,e,i,s),o=()=>this.removeEventListener(t,e,i,s);return t.addEventListener("added",r),t.addEventListener("removed",o),t.addEventListener("dispose",o),()=>{t.removeEventListener("added",r),t.removeEventListener("removed",o),t.removeEventListener("dispose",o)}}addEventListener(t,e,i,s){t._domEvent||(t._domEvent={}),t._domEvent[`${e}Handler`]||(t._domEvent[`${e}Handler`]=[]),this.boundObject[e]||(this.boundObject[e]=[]),this.boundObject[e].includes(t)||this.boundObject[e].push(t),t._domEvent[`${e}Handler`].push([i,F({noEmitWhenHide:!1,noEmitWhenNotInScene:!1},s)])}removeEventListener(t,e,i,...s){var o,a;if(!t._domEvent||(e===void 0&&(Object.keys(this.boundObject).forEach(l=>{var h,d;const c=(h=this.boundObject[l])==null?void 0:h.findIndex(f=>f===t);c!==-1&&((d=this.boundObject[l])==null||d.splice(c,1))}),t._domEvent={}),!t._domEvent[`${e}Handler`]))return;if(i===void 0){delete t._domEvent[`${e}Handler`];return}const r=t._domEvent[`${e}Handler`].findIndex(l=>l[0]===i);if(r!==-1&&(t._domEvent[`${e}Handler`].splice(r,1),t._domEvent[`${e}Handler`].length===0&&delete t._domEvent[`${e}Handler`],t._domEvent&&Object.keys(t._domEvent).length===0&&delete t._domEvent,!t._domEvent)){const l=(o=this.boundObject[e])==null?void 0:o.findIndex(c=>c===t);l!==-1&&((a=this.boundObject[e])==null||a.splice(l,1))}}clear(){this.boundObject={}}dispose(){var t;(t=this.five)==null||t.off("wantsGesture",this.handleWantsGesture),document.removeEventListener("mousedown",this.handleMousedown),document.removeEventListener("mouseup",this.handleMouseup),document.removeEventListener("mousemove",this.handleMousemove),this.boundObject={}}toJSON(){return{boundObject:this.boundObject}}getRaycaster(t){const e=this.five.getElement();if(!e)return;const i=Pu(t,e),s=new Vr;return s.setFromCamera(i,this.five.camera),s}}function eb(n){return n.model?n.work?n.model.loaded?n.model.name!==n.work.model.file?{result:!1,msg:"five.model.name 与 five.work.model.file 不一致"}:{result:!0,msg:""}:{result:!1,msg:"five.model 未加载完成"}:{result:!1,msg:"five 数据未加载"}:{result:!1,msg:"five.model 不存在"}}function Cu(n){return/^https?:\/\/|^\/\//.test(n)||/^data:/.test(n)}function rc(n,t){return Cu(t)?t:`${n}${t}`}class ls extends Ho{constructor(){super(...arguments);u(this,"disposeMethods",[]);u(this,"animationFrameDisposer");u(this,"onDispose",e=>(this.disposeMethods.push(e),this));u(this,"play",()=>{var e;return this.start(0),(e=this.animationFrameDisposer)==null||e.call(this),this.animationFrameDisposer=Zs(i=>this.update(i)),this});u(this,"stop",()=>{var e;return super.stop(),(e=this.animationFrameDisposer)==null||e.call(this),this});u(this,"dispose",()=>{var e;this.stop(),(e=this.animationFrameDisposer)==null||e.call(this),this.disposeMethods.forEach(i=>i()),this.disposeMethods=[],wd(this)})}}function Yr(n,t=Mi.Linear.None){const e=new ls({progress:0}).to({progress:1});return n!==void 0&&e.duration(n),t!==void 0&&e.easing(t),e}const Ys=window.requestAnimationFrame||(n=>setTimeout(n,16)),tb=window.cancelAnimationFrame||clearTimeout;function Zr(n,t=0){t<=0?Ys(n):Ys(()=>Zr(n,t-1))}function ib(){return ee(this,null,function*(){return new Promise(n=>{Ys(()=>n())})})}function Zs(n,t=60){let e=-1,i=0,s=-1;const r=1e3/t;function o(a){s===-1&&(s=a),e=Ys(o),!(a-i<r)&&(i=a,n==null||n(a-s))}return e=Ys(o),function(){tb(e)}}function nb(){const n=Date.now();return new Promise(t=>{Ys(()=>{t(Date.now()-n)})})}function aa(n){return Object.prototype.toString.call(n)==="[object Object]"}function la(n,t){return n===t?!0:typeof n!=typeof t?!1:!!(Number.isNaN(n)&&Number.isNaN(t))}function sb(n,t){const e=Object.getOwnPropertyNames(n),i=Object.getOwnPropertyNames(t);if(e.length!==i.length)return!1;for(let s=0,r=e.length;s<r;s++){const o=e[s];if(!la(n[o],t[o]))return!1}return!0}function rb(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(!la(n[e],t[e]))return!1;return!0}function ob(n,t){return la(n,t)?!0:aa(n)&&aa(t)?sb(n,t):Array.isArray(n)&&Array.isArray(t)?rb(n,t):!1}function oc(n,t){return la(n,t)?!0:aa(n)&&aa(t)?lb(n,t):Array.isArray(n)&&Array.isArray(t)?ab(n,t):!1}function ab(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(!oc(n[e],t[e]))return!1;return!0}function lb(n,t){const e=Object.getOwnPropertyNames(n),i=Object.getOwnPropertyNames(t);if(e.length!==i.length)return!1;for(let s=0,r=e.length;s<r;s++){const o=e[s];if(!oc(n[o],t[o]))return!1}return!0}function Nt(n,t,e={deep:!1}){return e.deep?oc(n,t):ob(n,t)}const cb=new P.Vector2;class hb{constructor(t,e){u(this,"scene",new P.Scene);u(this,"five");u(this,"renderer");u(this,"cancelRequestAnimationFrameId");u(this,"camera",new P.Camera);u(this,"domInited",!1);u(this,"canvasWrapper");u(this,"params");u(this,"_rendererCache");u(this,"_cameraCache");u(this,"animate",()=>{var s,r,o;if(this.cancelRequestAnimationFrameId=requestAnimationFrame(this.animate),!this.five.renderer)return;const t=this.five.renderer.getSize(cb),e=t.toArray().join(",");e!==this._rendererCache&&(this._rendererCache=e,this.renderer.setSize(t.x,t.y));const i=this.five.camera.projectionMatrix.toArray().join(",")+this.five.camera.matrixWorld.toArray().join(",");if(i!==this._cameraCache&&(this._cameraCache=i,this.camera.copy(this.five.camera)),this.renderer.render(this.scene,this.camera),!this.domInited){const a=(s=this.five.getElement())==null?void 0:s.parentElement;a&&(this.canvasWrapper=document.createElement("div"),this.canvasWrapper.classList.add("five-puppet"),this.canvasWrapper.style.position="absolute",this.canvasWrapper.style.pointerEvents="none",this.canvasWrapper.style.left="0",this.canvasWrapper.style.top="0",this.canvasWrapper.style.zIndex=`${(o=(r=this.params)==null?void 0:r.zIndex)!=null?o:1}`,this.canvasWrapper.appendChild(this.renderer.domElement),a.appendChild(this.canvasWrapper),this.domInited=!0)}});u(this,"stopAnimate",()=>{this.cancelRequestAnimationFrameId&&cancelAnimationFrame(this.cancelRequestAnimationFrameId)});u(this,"destory",()=>{var t;this.stopAnimate(),this.renderer.dispose(),this.renderer.domElement.remove(),(t=this.canvasWrapper)==null||t.remove()});this.five=t,this.params=e,this.renderer=new Ye.InternalWebGLRenderer({webgl2:!0,pixelRatio:window.devicePixelRatio,backgroundAlpha:0,backgroundColor:0}),this.renderer.domElement.style.pointerEvents="none",this.renderer.setSize(1,1),window.__FIVEPUPPET_DEBUG__=this,this.animate()}}const db=(n,t)=>{var C,I;const e=new Pt;let i=(I=(C=t==null?void 0:t.initialState)==null?void 0:C.enabled)!=null?I:!0,s=!1,r=!0,o=null;const l=F(F({},{lookAtCurrentCamera:!1,lockedPanoIndex:null,lockedLatitude:null,lockedLongitude:null}),t==null?void 0:t.config),c=new P.Scene,h=new Ye.Camera(60);h.near=1,h.updateTime(Date.now());let d=new P.Object3D,f,g;{const M=new P.DirectionalLight(16777215,.5);M.position.copy(new P.Vector3(1,1,1)),c.add(M)}{const M=new P.DirectionalLight(16777215,.3);c.add(M)}{const M=new P.AmbientLight(16777215,.3);c.add(M)}c.add(d);const p=()=>ee(this,null,function*(){var W,J,te,q;if(s||!((J=(W=n.work)==null?void 0:W.model)!=null&&J.file))return;c.remove(d),d=yield Ye.loadAt3d(n.work.model.file,{textureOptions:{size:128,quality:70},textureArray:(te=n.work.model)==null?void 0:te.textures,textureBaseUri:(q=n.work.model)==null?void 0:q.textureBase}).then(ne=>{const se=ne.scene;return se.rotateX(-Math.PI/2),se});const M=as(d),D=new P.Box3;D.expandByPoint(new P.Vector3(M.min.x,M.min.z,-M.min.y)),D.expandByPoint(new P.Vector3(M.max.x,M.max.z,-M.max.y));const T=Math.pow(Math.pow(D.max.x-D.min.x+1,2)+Math.pow(D.max.y-D.min.y+1,2)+Math.pow(D.max.z-D.min.z+1,2),1/2);let H=T/2/Math.tan(Math.PI*h.fov/360);h.aspect<1&&(H=f/h.aspect),f=isNaN(H)?T:H,g=D.getCenter(new P.Vector3),c.add(d),s=!0,e.emit("loaded"),S()});i&&p();const m=()=>{if(n.renderer)return o||(o=new P.WebGLRenderer({antialias:!1,alpha:!0}),o.setPixelRatio(n.renderer.getPixelRatio()),o.outputEncoding=P.sRGBEncoding,o.setClearColor(1579548,0),o.autoClear=!0),o},v=()=>{c.remove(d),d=new P.Object3D,c.add(d),s=!1,e.emit("willLoad"),S()},b=()=>{i&&(s||p())},w=()=>{var M,D;i||(i=!0,c.add(d),!s&&((D=(M=n.work)==null?void 0:M.model)!=null&&D.file)&&p(),S())},x=()=>{i&&(c.remove(d),r=!0,R(),i=!1)},E=(M,D={})=>{const T=m();if(!T)return;M.appendChild(T.domElement),L(D);const H=window.getComputedStyle(M).position;H!=="relative"&&H!=="absolute"&&H!=="fixed"&&H!=="sticky"&&(M.style.position="relative")},L=(M={})=>{if(!o)return;const T=o.domElement.parentNode;if(T!=null&&T.nodeName){const{width:H=T.offsetWidth,height:W=T.offsetHeight}=M;o.setSize(H,W),h.aspect=H/W,h.updateProjectionMatrix()}S()},S=()=>{if(!i||!f||!g)return;const M=n.getPose();M.fov=h.fov,M.offset=g,M.distance=f,typeof l.lockedLatitude=="number"&&(M.latitude=l.lockedLatitude),typeof l.lockedLongitude=="number"&&(M.longitude=l.lockedLongitude),typeof l.lockedPanoIndex=="number"&&(M.offset=n.work.observers[l.lockedPanoIndex].standingPosition.clone()),l.lookAtCurrentCamera&&(M.offset=n.camera.position.clone().setY(n.camera.position.y+1)),h.setFromPose(M),r=!0},R=()=>{!i||r!==!0||!o||!o.domElement.parentNode||o.domElement.parentNode.offsetWidth===0||(o.render(c,h),r=!1)},z=()=>{o&&o.dispose(),o=null},O=M=>{Object.assign(l,M),S()},A=()=>({enabled:i});return n.on("loaded",b),n.on("willLoad",v),n.on("cameraDirectionUpdate",S),n.on("dispose",z),n.on("renderFrame",R),n.on("cameraPositionUpdate",S),{appendTo:E,refresh:L,changeConfigs:O,enable:w,disable:x,getCurrentState:A,hooks:e}};class Iu extends nt.Line{constructor(...t){super(...t)}toJSON(){return{type:"FiveLine",points:this.points.toJSON()}}}function ac(n,t,e=new B.Vector3(1,1,1),i=!1){const s=new Iu(n,t);return s.setMaterial({dashed:i,color:e,linewidth:1}),s.remove(s.points),s}const ub=n=>{const t={intersection:null,disposers:[]},e=h=>{t.intersection=h},i=()=>{t.intersection=null};n.on("modelLoaded",()=>{n.on("intersectionOnModelUpdate",e),n.on("intersectionHidden",i)}),n.on("dispose",()=>{n.off("intersectionOnModelUpdate",e),n.off("intersectionHidden",i)});const s=(h,d=2,f=.1)=>{const g=d/2,m=c(h,f),v=new B.Group;v.add(ac(new B.Vector3(m.x+g,m.y,m.z),new B.Vector3(m.x-g,m.y,m.z),new B.Vector3(1,0,0)),ac(new B.Vector3(m.x,m.y+g,m.z),new B.Vector3(m.x,m.y-g,m.z),new B.Vector3(0,1,0)),ac(new B.Vector3(m.x,m.y,m.z+g),new B.Vector3(m.x,m.y,m.z-g),new B.Vector3(0,0,1))),n.scene.add(v),n.needsRender=!0;const b=()=>{n.scene.remove(v)};return t.disposers.push(b),{clear:b,pointAxesHelperMesh:v}},r=(h,d=0)=>{var b,w;const f=(b=n==null?void 0:n.camera)==null?void 0:b.position;if(!f)return!1;const g=h.distanceTo(f),p=h.sub(f).normalize(),m=new B.Raycaster(f,p),v=(w=n.model.intersectRaycaster(m))==null?void 0:w[0];return!(v&&v.distance+d<g)},o=()=>t.intersection,a=()=>{var h,d;(d=(h=t.disposers)==null?void 0:h.forEach)==null||d.call(h,f=>f==null?void 0:f()),n.off("intersectionOnModelUpdate",e),n.off("intersectionHidden",i)},l=a,c=(h,d)=>{const f=h.clone();return n.camera.position.clone().sub(f).setLength(d).add(f)};return{intersection:o,pointAxesHelper:s,movePointTowardsCamera:c,destroy:a,dispose:l,canSeePoint:r}};function re(){}const rn=n=>n;function xt(n,t){for(const e in t)n[e]=t[e];return n}function fb(n){return!!n&&(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function Mu(n){return n()}function ku(){return Object.create(null)}function ut(n){n.forEach(Mu)}function Di(n){return typeof n=="function"}function Pe(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}let ca;function ft(n,t){return ca||(ca=document.createElement("a")),ca.href=t,n===ca.href}function pb(n){return Object.keys(n).length===0}function En(n,t,e,i){if(n){const s=Eu(n,t,e,i);return n[0](s)}}function Eu(n,t,e,i){return n[1]&&i?xt(e.ctx.slice(),n[1](i(t))):e.ctx}function xn(n,t,e,i){if(n[2]&&i){const s=n[2](i(e));if(t.dirty===void 0)return s;if(typeof s=="object"){const r=[],o=Math.max(t.dirty.length,s.length);for(let a=0;a<o;a+=1)r[a]=t.dirty[a]|s[a];return r}return t.dirty|s}return t.dirty}function Dn(n,t,e,i,s,r){if(s){const o=Eu(t,e,i,r);n.p(o,s)}}function Sn(n){if(n.ctx.length>32){const t=[],e=n.ctx.length/32;for(let i=0;i<e;i++)t[i]=-1;return t}return-1}function yt(n){return n==null?"":n}function Ai(n){return n&&Di(n.destroy)?n.destroy:re}function xu(n){const t=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[n,"px"]}const Du=typeof window!="undefined";let lc=Du?()=>window.performance.now():()=>Date.now(),cc=Du?n=>requestAnimationFrame(n):re;const Js=new Set;function Su(n){Js.forEach(t=>{t.c(n)||(Js.delete(t),t.f())}),Js.size!==0&&cc(Su)}function hc(n){let t;return Js.size===0&&cc(Su),{promise:new Promise(e=>{Js.add(t={c:n,f:e})}),abort(){Js.delete(t)}}}function V(n,t){n.appendChild(t)}function De(n,t,e){const i=dc(n);if(!i.getElementById(t)){const s=U("style");s.id=t,s.textContent=e,Lu(i,s)}}function dc(n){if(!n)return document;const t=n.getRootNode?n.getRootNode():n.ownerDocument;return t&&t.host?t:n.ownerDocument}function mb(n){const t=U("style");return Lu(dc(n),t),t.sheet}function Lu(n,t){return V(n.head||n,t),t.sheet}function Y(n,t,e){n.insertBefore(t,e||null)}function X(n){n.parentNode&&n.parentNode.removeChild(n)}function ci(n,t){for(let e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function U(n){return document.createElement(n)}function ye(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Ve(n){return document.createTextNode(n)}function ae(){return Ve(" ")}function Ne(){return Ve("")}function je(n,t,e,i){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e,i)}function gb(n){return function(t){return t.stopPropagation(),n.call(this,t)}}function y(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function vb(n){return Array.from(n.childNodes)}function Ge(n,t){t=""+t,n.data!==t&&(n.data=t)}function Q(n,t,e,i){e===null?n.style.removeProperty(t):n.style.setProperty(t,e,i?"important":"")}let ha;function Ab(){if(ha===void 0){ha=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch(n){ha=!0}}return ha}function uc(n,t){getComputedStyle(n).position==="static"&&(n.style.position="relative");const i=U("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=Ab();let r;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=je(window,"message",o=>{o.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{r=je(i.contentWindow,"resize",t),t()}),V(n,i),()=>{(s||r&&i.contentWindow)&&r(),X(i)}}function we(n,t,e){n.classList[e?"add":"remove"](t)}function Tu(n,t,{bubbles:e=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(n,e,i,t),s}class da{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,i=null){this.e||(this.is_svg?this.e=ye(e.nodeName):this.e=U(e.nodeType===11?"TEMPLATE":e.nodeName),this.t=e.tagName!=="TEMPLATE"?e:e.content,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)Y(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(X)}}const ua=new Map;let fa=0;function bb(n){let t=5381,e=n.length;for(;e--;)t=(t<<5)-t^n.charCodeAt(e);return t>>>0}function yb(n,t){const e={stylesheet:mb(t),rules:{}};return ua.set(n,e),e}function pa(n,t,e,i,s,r,o,a=0){const l=16.666/i;let c=`{
`;for(let v=0;v<=1;v+=l){const b=t+(e-t)*r(v);c+=v*100+`%{${o(b,1-b)}}
`}const h=c+`100% {${o(e,1-e)}}
}`,d=`__svelte_${bb(h)}_${a}`,f=dc(n),{stylesheet:g,rules:p}=ua.get(f)||yb(f,n);p[d]||(p[d]=!0,g.insertRule(`@keyframes ${d} ${h}`,g.cssRules.length));const m=n.style.animation||"";return n.style.animation=`${m?`${m}, `:""}${d} ${i}ms linear ${s}ms 1 both`,fa+=1,d}function ma(n,t){const e=(n.style.animation||"").split(", "),i=e.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),s=e.length-i.length;s&&(n.style.animation=i.join(", "),fa-=s,fa||wb())}function wb(){cc(()=>{fa||(ua.forEach(n=>{const{ownerNode:t}=n.stylesheet;t&&X(t)}),ua.clear())})}let Jr;function on(n){Jr=n}function Ln(){if(!Jr)throw new Error("Function called outside component initialization");return Jr}function zu(n){Ln().$$.before_update.push(n)}function zt(n){Ln().$$.on_mount.push(n)}function fc(n){Ln().$$.after_update.push(n)}function ti(n){Ln().$$.on_destroy.push(n)}function qs(){const n=Ln();return(t,e,{cancelable:i=!1}={})=>{const s=n.$$.callbacks[t];if(s){const r=Tu(t,e,{cancelable:i});return s.slice().forEach(o=>{o.call(n,r)}),!r.defaultPrevented}return!0}}function pc(n,t){return Ln().$$.context.set(n,t),t}function Ni(n){return Ln().$$.context.get(n)}function an(n,t){const e=n.$$.callbacks[t.type];e&&e.slice().forEach(i=>i.call(this,t))}const Ks=[],Je=[];let $s=[];const mc=[],Ou=Promise.resolve();let gc=!1;function ju(){gc||(gc=!0,Ou.then(Ac))}function Vu(){return ju(),Ou}function pt(n){$s.push(n)}function ga(n){mc.push(n)}const vc=new Set;let er=0;function Ac(){if(er!==0)return;const n=Jr;do{try{for(;er<Ks.length;){const t=Ks[er];er++,on(t),Pb(t.$$)}}catch(t){throw Ks.length=0,er=0,t}for(on(null),Ks.length=0,er=0;Je.length;)Je.pop()();for(let t=0;t<$s.length;t+=1){const e=$s[t];vc.has(e)||(vc.add(e),e())}$s.length=0}while(Ks.length);for(;mc.length;)mc.pop()();gc=!1,vc.clear(),on(n)}function Pb(n){if(n.fragment!==null){n.update(),ut(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(pt)}}function Cb(n){const t=[],e=[];$s.forEach(i=>n.indexOf(i)===-1?t.push(i):e.push(i)),e.forEach(i=>i()),$s=t}let qr;function bc(){return qr||(qr=Promise.resolve(),qr.then(()=>{qr=null})),qr}function cs(n,t,e){n.dispatchEvent(Tu(`${t?"intro":"outro"}${e}`))}const va=new Set;let Gi;function Ee(){Gi={r:0,c:[],p:Gi}}function xe(){Gi.r||ut(Gi.c),Gi=Gi.p}function N(n,t){n&&n.i&&(va.delete(n),n.i(t))}function Z(n,t,e,i){if(n&&n.o){if(va.has(n))return;va.add(n),Gi.c.push(()=>{va.delete(n),i&&(e&&n.d(1),i())}),n.o(t)}else i&&i()}const yc={duration:0};function Tn(n,t,e){const i={direction:"in"};let s=t(n,e,i),r=!1,o,a,l=0;function c(){o&&ma(n,o)}function h(){const{delay:f=0,duration:g=300,easing:p=rn,tick:m=re,css:v}=s||yc;v&&(o=pa(n,0,1,g,f,p,v,l++)),m(0,1);const b=lc()+f,w=b+g;a&&a.abort(),r=!0,pt(()=>cs(n,!0,"start")),a=hc(x=>{if(r){if(x>=w)return m(1,0),cs(n,!0,"end"),c(),r=!1;if(x>=b){const E=p((x-b)/g);m(E,1-E)}}return r})}let d=!1;return{start(){d||(d=!0,ma(n),Di(s)?(s=s(i),bc().then(h)):h())},invalidate(){d=!1},end(){r&&(c(),r=!1)}}}function tr(n,t,e){const i={direction:"out"};let s=t(n,e,i),r=!0,o;const a=Gi;a.r+=1;function l(){const{delay:c=0,duration:h=300,easing:d=rn,tick:f=re,css:g}=s||yc;g&&(o=pa(n,1,0,h,c,d,g));const p=lc()+c,m=p+h;pt(()=>cs(n,!1,"start")),hc(v=>{if(r){if(v>=m)return f(0,1),cs(n,!1,"end"),--a.r||ut(a.c),!1;if(v>=p){const b=d((v-p)/h);f(1-b,b)}}return r})}return Di(s)?bc().then(()=>{s=s(i),l()}):l(),{end(c){c&&s.tick&&s.tick(1,0),r&&(o&&ma(n,o),r=!1)}}}function bi(n,t,e,i){const s={direction:"both"};let r=t(n,e,s),o=i?0:1,a=null,l=null,c=null;function h(){c&&ma(n,c)}function d(g,p){const m=g.b-o;return p*=Math.abs(m),{a:o,b:g.b,d:m,duration:p,start:g.start,end:g.start+p,group:g.group}}function f(g){const{delay:p=0,duration:m=300,easing:v=rn,tick:b=re,css:w}=r||yc,x={start:lc()+p,b:g};g||(x.group=Gi,Gi.r+=1),a||l?l=x:(w&&(h(),c=pa(n,o,g,m,p,v,w)),g&&b(0,1),a=d(x,m),pt(()=>cs(n,g,"start")),hc(E=>{if(l&&E>l.start&&(a=d(l,m),l=null,cs(n,a.b,"start"),w&&(h(),c=pa(n,o,a.b,a.duration,0,v,r.css))),a){if(E>=a.end)b(o=a.b,1-o),cs(n,a.b,"end"),l||(a.b?h():--a.group.r||ut(a.group.c)),a=null;else if(E>=a.start){const L=E-a.start;o=a.a+a.d*v(L/a.duration),b(o,1-o)}}return!!(a||l)}))}return{run(g){Di(r)?bc().then(()=>{r=r(s),f(g)}):f(g)},end(){h(),a=l=null}}}function Aa(n,t){const e=t.token={};function i(s,r,o,a){if(t.token!==e)return;t.resolved=a;let l=t.ctx;o!==void 0&&(l=l.slice(),l[o]=a);const c=s&&(t.current=s)(l);let h=!1;t.block&&(t.blocks?t.blocks.forEach((d,f)=>{f!==r&&d&&(Ee(),Z(d,1,1,()=>{t.blocks[f]===d&&(t.blocks[f]=null)}),xe())}):t.block.d(1),c.c(),N(c,1),c.m(t.mount(),t.anchor),h=!0),t.block=c,t.blocks&&(t.blocks[r]=c),h&&Ac()}if(fb(n)){const s=Ln();if(n.then(r=>{on(s),i(t.then,1,t.value,r),on(null)},r=>{if(on(s),i(t.catch,2,t.error,r),on(null),!t.hasCatch)throw r}),t.current!==t.pending)return i(t.pending,0),!0}else{if(t.current!==t.then)return i(t.then,1,t.value,n),!0;t.resolved=n}}function Bu(n,t,e){const i=t.slice(),{resolved:s}=n;n.current===n.then&&(i[n.value]=s),n.current===n.catch&&(i[n.error]=s),n.block.p(i,e)}const Ib=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function wc(n,t){n.d(1),t.delete(n.key)}function ln(n,t){Z(n,1,1,()=>{t.delete(n.key)})}function yi(n,t,e,i,s,r,o,a,l,c,h,d){let f=n.length,g=r.length,p=f;const m={};for(;p--;)m[n[p].key]=p;const v=[],b=new Map,w=new Map,x=[];for(p=g;p--;){const R=d(s,r,p),z=e(R);let O=o.get(z);O?i&&x.push(()=>O.p(R,t)):(O=c(z,R),O.c()),b.set(z,v[p]=O),z in m&&w.set(z,Math.abs(p-m[z]))}const E=new Set,L=new Set;function S(R){N(R,1),R.m(a,h),o.set(R.key,R),h=R.first,g--}for(;f&&g;){const R=v[g-1],z=n[f-1],O=R.key,A=z.key;R===z?(h=R.first,f--,g--):b.has(A)?!o.has(O)||E.has(O)?S(R):L.has(A)?f--:w.get(O)>w.get(A)?(L.add(O),S(R)):(E.add(A),f--):(l(z,o),f--)}for(;f--;){const R=n[f];b.has(R.key)||l(R,o)}for(;g;)S(v[g-1]);return ut(x),v}function Ot(n,t){const e={},i={},s={$$scope:1};let r=n.length;for(;r--;){const o=n[r],a=t[r];if(a){for(const l in o)l in a||(i[l]=1);for(const l in a)s[l]||(e[l]=a[l],s[l]=1);n[r]=a}else for(const l in o)s[l]=1}for(const o in i)o in e||(e[o]=void 0);return e}function _u(n){return typeof n=="object"&&n!==null?n:{}}function ba(n,t,e){const i=n.$$.props[t];i!==void 0&&(n.$$.bound[i]=e,e(n.$$.ctx[i]))}function Ae(n){n&&n.c()}function ge(n,t,e,i){const{fragment:s,after_update:r}=n.$$;s&&s.m(t,e),i||pt(()=>{const o=n.$$.on_mount.map(Mu).filter(Di);n.$$.on_destroy?n.$$.on_destroy.push(...o):ut(o),n.$$.on_mount=[]}),r.forEach(pt)}function ve(n,t){const e=n.$$;e.fragment!==null&&(Cb(e.after_update),ut(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Mb(n,t){n.$$.dirty[0]===-1&&(Ks.push(n),ju(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function Ie(n,t,e,i,s,r,o,a=[-1]){const l=Jr;on(n);const c=n.$$={fragment:null,ctx:[],props:r,update:re,not_equal:s,bound:ku(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ku(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(c.root);let h=!1;if(c.ctx=e?e(n,t.props||{},(d,f,...g)=>{const p=g.length?g[0]:f;return c.ctx&&s(c.ctx[d],c.ctx[d]=p)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](p),h&&Mb(n,d)),f}):[],c.update(),h=!0,ut(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const d=vb(t.target);c.fragment&&c.fragment.l(d),d.forEach(X)}else c.fragment&&c.fragment.c();t.intro&&N(n.$$.fragment),ge(n,t.target,t.anchor,t.customElement),Ac()}on(l)}class Me{$destroy(){ve(this,1),this.$destroy=re}$on(t,e){if(!Di(e))return re;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const s=i.indexOf(e);s!==-1&&i.splice(s,1)}}$set(t){this.$$set&&!pb(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const kb="data:image/png;base64,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";function Eb(n){De(n,"svelte-1d7uzh5",".room-label-item.svelte-1d7uzh5{position:absolute;font-size:0.5rem;z-index:0;transform:none;cursor:pointer;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.room-label-item__text.svelte-1d7uzh5{position:absolute;left:0;top:-4rem;transform:translate(-50%, 0);display:flex;justify-content:center;align-items:center;height:1.25rem;min-width:2rem;padding:0 0.375rem;pointer-events:all;background-size:100% 100%;background-repeat:no-repeat;white-space:nowrap}.room-label-item__bar.svelte-1d7uzh5{position:absolute;top:-2.75rem;height:3rem;width:0.0625rem;background-image:linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0))}.wide.svelte-1d7uzh5{font-size:0.625rem}")}function xb(n){let t,e,i=n[0].name+"",s,r,o,a,l;return{c(){t=U("div"),e=U("span"),s=Ve(i),r=ae(),o=U("div"),y(e,"class","room-label-item__text svelte-1d7uzh5"),Q(e,"background-image","url("+kb+")"),we(e,"wide",n[0].name.length>3),y(o,"class","room-label-item__bar svelte-1d7uzh5"),y(t,"class","room-label-item svelte-1d7uzh5"),Q(t,"z-index",n[0].zIndex),Q(t,"transform",n[0].transform),Q(t,"opacity",n[0].visible?1:0)},m(c,h){Y(c,t,h),V(t,e),V(e,s),V(t,r),V(t,o),a||(l=je(e,"click",n[1]),a=!0)},p(c,[h]){h&1&&i!==(i=c[0].name+"")&&Ge(s,i),h&1&&we(e,"wide",c[0].name.length>3),h&1&&Q(t,"z-index",c[0].zIndex),h&1&&Q(t,"transform",c[0].transform),h&1&&Q(t,"opacity",c[0].visible?1:0)},i:re,o:re,d(c){c&&X(t),a=!1,l()}}}function Db(n,t,e){let{five:i}=t,{roomLabel:s}=t;function r(){i.setState({panoIndex:s.panoIndex,mode:"Panorama",longitude:s.longitude})}return n.$$set=o=>{"five"in o&&e(2,i=o.five),"roomLabel"in o&&e(0,s=o.roomLabel)},[s,r,i]}class Sb extends Me{constructor(t){super(),Ie(this,t,Db,xb,Pe,{five:2,roomLabel:0},Eb)}}var Ru=function(){if(typeof Map!="undefined")return Map;function n(t,e){var i=-1;return t.some(function(s,r){return s[0]===e?(i=r,!0):!1}),i}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var i=n(this.__entries__,e),s=this.__entries__[i];return s&&s[1]},t.prototype.set=function(e,i){var s=n(this.__entries__,e);~s?this.__entries__[s][1]=i:this.__entries__.push([e,i])},t.prototype.delete=function(e){var i=this.__entries__,s=n(i,e);~s&&i.splice(s,1)},t.prototype.has=function(e){return!!~n(this.__entries__,e)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,i){i===void 0&&(i=null);for(var s=0,r=this.__entries__;s<r.length;s++){var o=r[s];e.call(i,o[1],o[0])}},t}()}(),Pc=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,ya=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),Lb=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ya):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),Tb=2;function zb(n,t){var e=!1,i=!1,s=0;function r(){e&&(e=!1,n()),i&&a()}function o(){Lb(r)}function a(){var l=Date.now();if(e){if(l-s<Tb)return;i=!0}else e=!0,i=!1,setTimeout(o,t);s=l}return a}var Ob=20,jb=["top","right","bottom","left","width","height","size","weight"],Vb=typeof MutationObserver!="undefined",Bb=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=zb(this.refresh.bind(this),Ob)}return n.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},n.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},n.prototype.updateObservers_=function(){var t=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return t.forEach(function(e){return e.broadcastActive()}),t.length>0},n.prototype.connect_=function(){!Pc||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Vb?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!Pc||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=e===void 0?"":e,s=jb.some(function(r){return!!~i.indexOf(r)});s&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),Fu=function(n,t){for(var e=0,i=Object.keys(t);e<i.length;e++){var s=i[e];Object.defineProperty(n,s,{value:t[s],enumerable:!1,writable:!1,configurable:!0})}return n},ir=function(n){var t=n&&n.ownerDocument&&n.ownerDocument.defaultView;return t||ya},Nu=Pa(0,0,0,0);function wa(n){return parseFloat(n)||0}function Gu(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.reduce(function(i,s){var r=n["border-"+s+"-width"];return i+wa(r)},0)}function _b(n){for(var t=["top","right","bottom","left"],e={},i=0,s=t;i<s.length;i++){var r=s[i],o=n["padding-"+r];e[r]=wa(o)}return e}function Rb(n){var t=n.getBBox();return Pa(0,0,t.width,t.height)}function Fb(n){var t=n.clientWidth,e=n.clientHeight;if(!t&&!e)return Nu;var i=ir(n).getComputedStyle(n),s=_b(i),r=s.left+s.right,o=s.top+s.bottom,a=wa(i.width),l=wa(i.height);if(i.boxSizing==="border-box"&&(Math.round(a+r)!==t&&(a-=Gu(i,"left","right")+r),Math.round(l+o)!==e&&(l-=Gu(i,"top","bottom")+o)),!Gb(n)){var c=Math.round(a+r)-t,h=Math.round(l+o)-e;Math.abs(c)!==1&&(a-=c),Math.abs(h)!==1&&(l-=h)}return Pa(s.left,s.top,a,l)}var Nb=function(){return typeof SVGGraphicsElement!="undefined"?function(n){return n instanceof ir(n).SVGGraphicsElement}:function(n){return n instanceof ir(n).SVGElement&&typeof n.getBBox=="function"}}();function Gb(n){return n===ir(n).document.documentElement}function Hb(n){return Pc?Nb(n)?Rb(n):Fb(n):Nu}function Wb(n){var t=n.x,e=n.y,i=n.width,s=n.height,r=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(r.prototype);return Fu(o,{x:t,y:e,width:i,height:s,top:e,right:t+i,bottom:s+e,left:t}),o}function Pa(n,t,e,i){return{x:n,y:t,width:e,height:i}}var Ub=function(){function n(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Pa(0,0,0,0),this.target=t}return n.prototype.isActive=function(){var t=Hb(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},n}(),Qb=function(){function n(t,e){var i=Wb(e);Fu(this,{target:t,contentRect:i})}return n}(),Xb=function(){function n(t,e,i){if(this.activeObservations_=[],this.observations_=new Ru,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return n.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof ir(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Ub(t)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof ir(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(i){return new Qb(i.target,i.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),Hu=typeof WeakMap!="undefined"?new WeakMap:new Ru,Wu=function(){function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=Bb.getInstance(),i=new Xb(t,e,this);Hu.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){Wu.prototype[n]=function(){var t;return(t=Hu.get(this))[n].apply(t,arguments)}});var Yb=function(){return typeof ya.ResizeObserver!="undefined"?ya.ResizeObserver:Wu}();function cn(n){new Yb((e,i)=>{var s,r,o,a,l,c;for(const h of e){const{borderBoxSize:d,contentRect:f}=h,g=(o=(r=(s=d==null?void 0:d[0])==null?void 0:s.inlineSize)!=null?r:f.width)!=null?o:n.clientWidth,p=(c=(l=(a=d==null?void 0:d[0])==null?void 0:a.blockSize)!=null?l:f.height)!=null?c:n.clientHeight;n.dispatchEvent(new CustomEvent("clientWidth",{detail:g})),n.dispatchEvent(new CustomEvent("clientHeight",{detail:p}))}}).observe(n)}const{Map:Zb}=Ib;function Jb(n){De(n,"svelte-9eg4zi",".room-labels-container.svelte-9eg4zi{width:100%;height:100%;position:relative;color:#fff}")}function Uu(n,t,e){const i=n.slice();return i[13]=t[e],i}function Qu(n,t){let e,i,s;return i=new Sb({props:{roomLabel:t[13],five:t[1]}}),{key:n,first:null,c(){e=Ne(),Ae(i.$$.fragment),this.first=e},m(r,o){Y(r,e,o),ge(i,r,o),s=!0},p(r,o){t=r;const a={};o&1&&(a.roomLabel=t[13]),o&2&&(a.five=t[1]),i.$set(a)},i(r){s||(N(i.$$.fragment,r),s=!0)},o(r){Z(i.$$.fragment,r),s=!1},d(r){r&&X(e),ve(i,r)}}}function qb(n){let t,e=[],i=new Zb,s,r,o,a=n[0];const l=c=>c[13].id;for(let c=0;c<a.length;c+=1){let h=Uu(n,a,c),d=l(h);i.set(d,e[c]=Qu(d,h))}return{c(){t=U("div");for(let c=0;c<e.length;c+=1)e[c].c();y(t,"class","room-labels-container svelte-9eg4zi")},m(c,h){Y(c,t,h);for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(t,null);s=!0,r||(o=[Ai(cn.call(null,t)),je(t,"clientWidth",n[6]),je(t,"clientHeight",n[7])],r=!0)},p(c,[h]){h&3&&(a=c[0],Ee(),e=yi(e,h,l,1,c,a,i,t,ln,Qu,null,Uu),xe())},i(c){if(!s){for(let h=0;h<a.length;h+=1)N(e[h]);s=!0}},o(c){for(let h=0;h<e.length;h+=1)Z(e[h]);s=!1},d(c){c&&X(t);for(let h=0;h<e.length;h+=1)e[h].d();r=!1,ut(o)}}}function Kb(n,t,e){var v;let i,{five:s}=t,{roomLabels:r}=t,o,a,l=(v=s.model.shownFloor)!=null?v:null;function c(b){if(!(l===null||b.floorIndex===l))return!1;const x=new B.Raycaster,E=s.camera.position.clone(),L=new B.Vector3(b.position.x,b.position.y,b.position.z),S=L.distanceTo(E);x.set(E.clone(),L.clone().sub(E).normalize());const[R]=s.model.intersectRaycaster(x);return!(R&&R.distance+1<S)}function h(b,w){const E=new B.Vector3(b.position.x,b.position.y,b.position.z).clone().project(s.camera),L=Math.ceil((E.x+1)/2*w.x),S=Math.ceil((-E.y+1)/2*w.y);return`translate(${L}px, ${S}px)`}function d(b){const{rendererSize:w}=b,x=new Map;function E(S){const R=x.get(S.id);if(R)return R;const{x:z,y:O,z:A}=S.position,C=new B.Vector3(z,O,A).clone().distanceTo(s.camera.position);return x.set(S.id,C),C}return r.map(S=>{const R=c(S),z=R?h(S,w):S.transform,O=E(S),C=r.filter(I=>I.visible&&E(I)<O).length*10;return fe(F({},S),{visible:R,transform:z,zIndex:C})})}function f(){e(0,r=d({rendererSize:i,shownFloor:l}))}function g(b){e(4,l=b)}s.on("cameraUpdate",f),s.on("modelShownFloorChange",g),fc(()=>{e(0,r=d({rendererSize:i,shownFloor:l}))}),ti(()=>{s.off("cameraUpdate",f),s.off("modelShownFloorChange",g)});const p=b=>{e(2,o=b.detail)},m=b=>{e(3,a=b.detail)};return n.$$set=b=>{"five"in b&&e(1,s=b.five),"roomLabels"in b&&e(0,r=b.roomLabels)},n.$$.update=()=>{n.$$.dirty&12&&e(5,i={x:o,y:a}),n.$$.dirty&48&&e(0,r=d({rendererSize:i,shownFloor:l}))},[r,s,o,a,l,i,p,m]}class $b extends Me{constructor(t){super(),Ie(this,t,Kb,qb,Pe,{five:1,roomLabels:0},Jb)}}function ey(n){return n.model_room_labels.map(({id:t,pano_index:e,floor_index:i,name:s,position:r,longitude:o})=>({id:t,name:s,position:r,longitude:o,panoIndex:e,floorIndex:i,zIndex:0,visible:!1,transform:""}))}class ty{constructor(t){u(this,"five");u(this,"enabled",!0);u(this,"fiveModeEnabled");u(this,"app");u(this,"wrapper");u(this,"roomLabels",[]);u(this,"container",document.createElement("div"));u(this,"onFiveModeChange",t=>{if(!this.checkFiveMode(t)){this.fiveModeEnabled=!1,this.render();return}this.five.once("initAnimationEnded",()=>{this.fiveModeEnabled=this.checkFiveMode(this.five.getCurrentState().mode),this.render()})});this.five=t,this.fiveModeEnabled=this.checkFiveMode(t.getCurrentState().mode),this.container.classList.add("model-room-label-plugin-container"),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="absolute",this.container.style.pointerEvents="none",this.container.style.left="0",this.container.style.top="0",this.container.style.zIndex="5",this.five.once("dispose",()=>this.dispose()),this.five.on("modeChange",this.onFiveModeChange),this.render()}dispose(){this.five.off("modeChange",this.onFiveModeChange),this.container.remove()}load(t){this.roomLabels=ey(t),this.render()}appendTo(t){return this.wrapper=t,t.appendChild(this.container),this.render(),this}disable(){return this.enabled=!1,this.render(),this}enable(){return this.enabled=!0,this.render(),this}checkFiveMode(t){return t==="Floorplan"||t==="Mapview"}render(){var t;if(this.wrapper){if(!this.enabled||!this.fiveModeEnabled){(t=this.app)==null||t.$destroy(),this.app=void 0;return}this.app?this.app.$set({five:this.five,roomLabels:this.roomLabels}):this.app=new $b({target:this.container,props:{five:this.five,roomLabels:this.roomLabels}})}}}const iy=n=>new ty(n),ny={name:"ModelRoomLabelPlugin",version:0};var zn=(n=>(n[n.FLOOR=1]="FLOOR",n[n.CEILING=2]="CEILING",n[n.BOUNDING_CENTER=3]="BOUNDING_CENTER",n))(zn||{});function hs(n){return ee(this,null,function*(){try{return[null,yield n]}catch(t){return t instanceof Error?[t,null]:[new Error(""),null]}})}function nr(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function Kr(n){const t=n-1;return t*t*t+1}function jt(n,{delay:t=0,duration:e=400,easing:i=rn}={}){const s=+getComputedStyle(n).opacity;return{delay:t,duration:e,easing:i,css:r=>`opacity: ${r*s}`}}function Xu(n,{delay:t=0,duration:e=400,easing:i=Kr,x:s=0,y:r=0,opacity:o=0}={}){const a=getComputedStyle(n),l=+a.opacity,c=a.transform==="none"?"":a.transform,h=l*(1-o),[d,f]=xu(s),[g,p]=xu(r);return{delay:t,duration:e,easing:i,css:(m,v)=>`
			transform: ${c} translate(${(1-m)*d}${f}, ${(1-m)*g}${p});
			opacity: ${l-h*v}`}}function Ca(n,{delay:t=0,speed:e,duration:i,easing:s=nr}={}){let r=n.getTotalLength();const o=getComputedStyle(n);return o.strokeLinecap!=="butt"&&(r+=parseInt(o.strokeWidth)),i===void 0?e===void 0?i=800:i=r/e:typeof i=="function"&&(i=i(r)),{delay:t,duration:i,easing:s,css:(a,l)=>`
			stroke-dasharray: ${r};
			stroke-dashoffset: ${l*r};
		`}}const sr=[];function Cc(n,t=re){let e;const i=new Set;function s(a){if(Pe(n,a)&&(n=a,e)){const l=!sr.length;for(const c of i)c[1](),sr.push(c,n);if(l){for(let c=0;c<sr.length;c+=2)sr[c][0](sr[c+1]);sr.length=0}}}function r(a){s(a(n))}function o(a,l=re){const c=[a,l];return i.add(c),i.size===1&&(e=t(s)||re),a(n),()=>{i.delete(c),i.size===0&&e&&(e(),e=null)}}return{set:s,update:r,subscribe:o}}function sy(n){De(n,"svelte-1gfoniz","img.svelte-1gfoniz{width:100%;height:100%}")}function ry(n){let t,e;return{c(){t=U("img"),ft(t.src,e=n[0])||y(t,"src",e),y(t,"alt","floorplan iamge"),y(t,"class","svelte-1gfoniz")},m(i,s){Y(i,t,s)},p(i,[s]){s&1&&!ft(t.src,e=i[0])&&y(t,"src",e)},i:re,o:re,d(i){i&&X(t)}}}function oy(n,t,e){let{url:i}=t;return n.$$set=s=>{"url"in s&&e(0,i=s.url)},[i]}class ay extends Me{constructor(t){super(),Ie(this,t,oy,ry,Pe,{url:0},sy)}}function ly(n){De(n,"svelte-ub47ya",".floorplan-plugin__base-image.svelte-ub47ya{width:100%;height:100%}")}function cy(n){let t,e,i,s;return{c(){t=U("div"),e=new da(!1),i=ae(),s=new da(!1),e.a=i,s.a=null,y(t,"class","floorplan-plugin__base-image svelte-ub47ya")},m(r,o){Y(r,t,o),e.m(n[1],t),V(t,i),s.m(n[0],t)},p(r,[o]){o&1&&s.p(r[0])},i:re,o:re,d(r){r&&X(t)}}}function hy(n,t,e){let{content:i}=t;const s=`
    <style>
      svg [type='lineGroup'] path {
        fill: #ffffff;
        stroke: #ffffff;
      }
      svg [type='lineItemGroup'] g g g g {
        stroke: #ffffff;
      }</style>
  `;return n.$$set=r=>{"content"in r&&e(0,i=r.content)},[i,s]}class dy extends Me{constructor(t){super(),Ie(this,t,hy,cy,Pe,{content:0},ly)}}function uy(n){De(n,"svelte-ozpg4a",".floorplan-plugin__base-image.svelte-ozpg4a{position:absolute;z-index:10;width:100%;height:100%;pointer-events:none}")}function fy(n){let t,e;return t=new ay({props:{url:n[1].url}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&2&&(r.url=i[1].url),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function py(n){let t,e;return t=new dy({props:{content:n[0]}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.content=i[0]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function my(n){let t,e,i,s;const r=[py,fy],o=[];function a(l,c){return l[0]?0:l[1]?1:-1}return~(e=a(n))&&(i=o[e]=r[e](n)),{c(){t=U("div"),i&&i.c(),y(t,"class","floorplan-plugin__base-image svelte-ozpg4a")},m(l,c){Y(l,t,c),~e&&o[e].m(t,null),s=!0},p(l,[c]){let h=e;e=a(l),e===h?~e&&o[e].p(l,c):(i&&(Ee(),Z(o[h],1,1,()=>{o[h]=null}),xe()),~e?(i=o[e],i?i.p(l,c):(i=o[e]=r[e](l),i.c()),N(i,1),i.m(t,null)):i=null)},i(l){s||(N(i),s=!0)},o(l){Z(i),s=!1},d(l){l&&X(t),~e&&o[e].d()}}}function gy(n,t,e){let i,s,{floorIndex:r}=t,{floorplanData:o}=t;return n.$$set=a=>{"floorIndex"in a&&e(2,r=a.floorIndex),"floorplanData"in a&&e(3,o=a.floorplanData)},n.$$.update=()=>{var a,l;n.$$.dirty&12&&e(1,i=o.outlines[r]),n.$$.dirty&12&&e(0,s=(l=(a=o.outlines)==null?void 0:a[r])==null?void 0:l.svgContent)},[s,i,r,o]}class Yu extends Me{constructor(t){super(),Ie(this,t,gy,my,Pe,{floorIndex:2,floorplanData:3},uy)}}function vy(n){De(n,"svelte-2r6702",".floorplan-plugin__item.svelte-2r6702{position:absolute;display:flex;flex-flow:column;align-items:center;line-height:1;color:#fff;transform:translate(-50%, -50%);white-space:nowrap;will-change:opacity;transition:opacity 300ms}.floorplan-plugin__img.svelte-2r6702{width:100%;height:100%}.floorplan-plugin__notes.svelte-2r6702{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);padding:0.25rem;line-height:1;border-radius:0.25rem;color:#fff;background:rgba(0,0,0,.6);font-size:0.75rem}")}function Ay(n){let t,e,i,s,r,o=n[0].notes+"",a;return{c(){t=U("div"),e=U("img"),s=ae(),r=U("span"),a=Ve(o),y(e,"class","floorplan-plugin__img svelte-2r6702"),ft(e.src,i=n[6])||y(e,"src",i),y(e,"alt",""),Q(e,"transform",n[5]),y(r,"class","floorplan-plugin__notes svelte-2r6702"),y(t,"class","floorplan-plugin__item svelte-2r6702"),Q(t,"left",n[1]),Q(t,"top",n[2]),Q(t,"width",n[3]),Q(t,"height",n[4])},m(l,c){Y(l,t,c),V(t,e),V(t,s),V(t,r),V(r,a)},p(l,[c]){c&1&&o!==(o=l[0].notes+"")&&Ge(a,o)},i:re,o:re,d(l){l&&X(t)}}}function by(n,t,e){let{item:i}=t;const s=i.positionInImage.x*100+"%",r=i.positionInImage.y*100+"%",o=i.width*100+"%",a=i.height*100+"%",l=`rotate(${i.rotateZ}deg) scaleX(${i.rotateX?-1:1}) scaleY(${i.rotateY?-1:1})`,c=i.src;return n.$$set=h=>{"item"in h&&e(0,i=h.item)},[i,s,r,o,a,l,c]}class yy extends Me{constructor(t){super(),Ie(this,t,by,Ay,Pe,{item:0},vy)}}function wy(n){De(n,"svelte-1c5mqz0",".floorplan-plugin__room-items.svelte-1c5mqz0{width:100%;height:100%;position:absolute;left:0;top:0;z-index:20;pointer-events:none}")}function Zu(n,t,e){const i=n.slice();return i[6]=t[e],i}function Ju(n){let t,e=[],i=new Map,s,r,o,a=n[1];const l=c=>c[6].id;for(let c=0;c<a.length;c+=1){let h=Zu(n,a,c),d=l(h);i.set(d,e[c]=qu(d,h))}return{c(){t=U("div");for(let c=0;c<e.length;c+=1)e[c].c();y(t,"class","floorplan-plugin__room-items svelte-1c5mqz0")},m(c,h){Y(c,t,h);for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(t,null);s=!0,r||(o=[Ai(cn.call(null,t)),je(t,"clientWidth",n[4])],r=!0)},p(c,h){h&2&&(a=c[1],Ee(),e=yi(e,h,l,1,c,a,i,t,ln,qu,null,Zu),xe())},i(c){if(!s){for(let h=0;h<a.length;h+=1)N(e[h]);s=!0}},o(c){for(let h=0;h<e.length;h+=1)Z(e[h]);s=!1},d(c){c&&X(t);for(let h=0;h<e.length;h+=1)e[h].d();r=!1,ut(o)}}}function qu(n,t){let e,i,s;const r=[{item:t[6]}];let o={};for(let a=0;a<r.length;a+=1)o=xt(o,r[a]);return i=new yy({props:o}),{key:n,first:null,c(){e=Ne(),Ae(i.$$.fragment),this.first=e},m(a,l){Y(a,e,l),ge(i,a,l),s=!0},p(a,l){t=a;const c=l&2?Ot(r,[{item:t[6]}]):{};i.$set(c)},i(a){s||(N(i.$$.fragment,a),s=!0)},o(a){Z(i.$$.fragment,a),s=!1},d(a){a&&X(e),ve(i,a)}}}function Py(n){let t,e,i=n[1]&&Ju(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[1]?i?(i.p(s,r),r&2&&N(i,1)):(i=Ju(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function Cy(n,t,e){let i,{floorIndex:s}=t,{floorplanData:r}=t,o=0;const a=l=>{e(0,o=l.detail)};return n.$$set=l=>{"floorIndex"in l&&e(2,s=l.floorIndex),"floorplanData"in l&&e(3,r=l.floorplanData)},n.$$.update=()=>{if(n.$$.dirty&12&&e(1,i=r.floorDatas[s].items),n.$$.dirty&9){const{max:l,min:c}=r.bounding;l.x-c.x}},[o,i,s,r,a]}class Iy extends Me{constructor(t){super(),Ie(this,t,Cy,Py,Pe,{floorIndex:2,floorplanData:3},wy)}}function My(n){De(n,"svelte-9vzn2f",".floorplan-plugin__room-label-item.svelte-9vzn2f{position:absolute;display:flex;flex-flow:column;align-items:center;line-height:1;color:#fff;transform:translate(-50%, -50%);white-space:nowrap;will-change:opacity;transition:opacity 300ms}.floorplan-plugin__room-part1.svelte-9vzn2f{display:flex;flex-flow:column;align-items:center;color:#fff;white-space:nowrap}.floorplan-plugin__room-area.svelte-9vzn2f{opacity:0.6;line-height:1.25;margin-top:0.125rem}")}function ky(n){let t,e=n[16].outerHTML+"",i;return{c(){t=new da(!1),i=Ne(),t.a=i},m(s,r){t.m(e,s,r),Y(s,i,r)},p(s,r){r[0]&65536&&e!==(e=s[16].outerHTML+"")&&t.p(e)},d(s){s&&X(i),s&&t.d()}}}function Ey(n){let t,e,i,s,r,o,a=n[1]&&Ku(n),l=n[0]&&$u(n),c=n[3]&&ef(n);return{c(){t=U("div"),a&&a.c(),e=ae(),l&&l.c(),i=ae(),c&&c.c(),s=Ne(),y(t,"class","floorplan-plugin__room-part1 svelte-9vzn2f"),Q(t,"opacity",n[12]?"1":"0")},m(h,d){Y(h,t,d),a&&a.m(t,null),V(t,e),l&&l.m(t,null),Y(h,i,d),c&&c.m(h,d),Y(h,s,d),r||(o=[Ai(cn.call(null,t)),je(t,"clientWidth",n[33]),je(t,"clientHeight",n[34])],r=!0)},p(h,d){h[1]?a?a.p(h,d):(a=Ku(h),a.c(),a.m(t,e)):a&&(a.d(1),a=null),h[0]?l?l.p(h,d):(l=$u(h),l.c(),l.m(t,null)):l&&(l.d(1),l=null),d[0]&4096&&Q(t,"opacity",h[12]?"1":"0"),h[3]?c?c.p(h,d):(c=ef(h),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},d(h){h&&X(t),a&&a.d(),l&&l.d(),h&&X(i),c&&c.d(h),h&&X(s),r=!1,ut(o)}}}function Ku(n){let t,e=(n[2]?n[4].name:n[4].roomType==="100900000012"?n[4].customizedName:n[4].name)+"",i;return{c(){t=U("span"),i=Ve(e),y(t,"class","floorplan-plugin__room-name")},m(s,r){Y(s,t,r),V(t,i)},p(s,r){r[0]&20&&e!==(e=(s[2]?s[4].name:s[4].roomType==="100900000012"?s[4].customizedName:s[4].name)+"")&&Ge(i,e)},d(s){s&&X(t)}}}function $u(n){let t,e;return{c(){t=U("span"),e=Ve(n[15]),y(t,"class","floorplan-plugin__room-area svelte-9vzn2f"),Q(t,"font-size",n[20])},m(i,s){Y(i,t,s),V(t,e)},p(i,s){s[0]&32768&&Ge(e,i[15])},d(i){i&&X(t)}}}function ef(n){let t,e;return{c(){t=U("span"),e=Ve(n[14]),y(t,"class","floorplan-plugin__room-size"),Q(t,"font-size",n[20]),Q(t,"opacity",n[11]?"0.6":"0")},m(i,s){Y(i,t,s),V(t,e)},p(i,s){s[0]&16384&&Ge(e,i[14]),s[0]&2048&&Q(t,"opacity",i[11]?"0.6":"0")},d(i){i&&X(t)}}}function xy(n){let t,e,i;function s(a,l){if(a[5]===void 0)return Ey;if(a[16])return ky}let r=s(n),o=r&&r(n);return{c(){t=U("div"),o&&o.c(),y(t,"class","floorplan-plugin__room-label-item svelte-9vzn2f"),Q(t,"left",n[17]),Q(t,"top",n[18]),Q(t,"font-size",n[19]),Q(t,"opacity",n[13]?"1":"0"),Q(t,"transform",n[10]?"translate(-50%, calc(-50% + 6px))":"translate(-50%, -50%)")},m(a,l){Y(a,t,l),o&&o.m(t,null),e||(i=[Ai(cn.call(null,t)),je(t,"clientWidth",n[35]),je(t,"clientHeight",n[36])],e=!0)},p(a,l){r===(r=s(a))&&o?o.p(a,l):(o&&o.d(1),o=r&&r(a),o&&(o.c(),o.m(t,null))),l[0]&8192&&Q(t,"opacity",a[13]?"1":"0"),l[0]&1024&&Q(t,"transform",a[10]?"translate(-50%, calc(-50% + 6px))":"translate(-50%, -50%)")},i:re,o:re,d(a){a&&X(t),o&&o.d(),e=!1,ut(i)}}}function Dy(n,t){const e=n[0],i=n[1];let s=!1;for(let r=0,o=t.length-1;r<t.length;o=r++){const a=t[r][0],l=t[r][1],c=t[o][0],h=t[o][1];l>i!=h>i&&e<(c-a)*(i-l)/(h-l)+a&&(s=!s)}return s}function Sy(n,t,e){let i,s,r,o,a,l,c,h,d,f,g,p,m,{pxmm:v}=t,{roomAreaEnable:b}=t,{roomNameEnable:w}=t,{roomNameOtherTypeEnable:x}=t,{roomDimensionEnable:E}=t,{room:L}=t,{hoveredRoom:S}=t,{getRoomAreaText:R}=t,{getRoomDimensionText:z}=t,{getLabelElement:O}=t,{adaptiveRoomLabelVisibleEnable:A}=t;function C(he,ke){if(ke.width===0||ke.height===0)return()=>!1;const be=he.path.map(({x:rt,y:st})=>[rt,st]),We=he.roomLabel.position,{x:Re,y:Te}=We,{width:He,height:pe}=ke,Le=He/2,Oe=pe/2;return function(st){const bt=Re*st,et=Te*st,tt=be.map(([dt,Xt])=>[dt*st,Xt*st]);return[[bt+Le,et-Oe],[bt-Le,et-Oe],[bt-Le,et+Oe],[bt+Le,et+Oe]].every(dt=>Dy(dt,tt))}}const I=document.body.clientWidth,M=document.body.clientHeight,D=L.roomLabel,T=D.positionInImage.x*100+"%",H=D.positionInImage.y*100+"%",W=(I<500||M<500?10:14)+"px",J=(I<500||M<500?8:12)+"px";let te=0,q=0,ne=0,se=0,ue=!1;S.subscribe(function(ke){e(26,ue=!!ke&&ke.id===L.id)});const ze=he=>{e(8,ne=he.detail)},Ce=he=>{e(9,se=he.detail)},ce=he=>{e(6,te=he.detail)},le=he=>{e(7,q=he.detail)};return n.$$set=he=>{"pxmm"in he&&e(21,v=he.pxmm),"roomAreaEnable"in he&&e(0,b=he.roomAreaEnable),"roomNameEnable"in he&&e(1,w=he.roomNameEnable),"roomNameOtherTypeEnable"in he&&e(2,x=he.roomNameOtherTypeEnable),"roomDimensionEnable"in he&&e(3,E=he.roomDimensionEnable),"room"in he&&e(4,L=he.room),"hoveredRoom"in he&&e(22,S=he.hoveredRoom),"getRoomAreaText"in he&&e(23,R=he.getRoomAreaText),"getRoomDimensionText"in he&&e(24,z=he.getRoomDimensionText),"getLabelElement"in he&&e(5,O=he.getLabelElement),"adaptiveRoomLabelVisibleEnable"in he&&e(25,A=he.adaptiveRoomLabelVisibleEnable)},n.$$.update=()=>{var he,ke;n.$$.dirty[0]&48&&e(16,i=O==null?void 0:O(L)),n.$$.dirty[0]&8388624&&e(15,s=L.size?R(L.size):""),n.$$.dirty[0]&16777232&&e(14,r=L!=null&&L.dimension?z((he=L.dimension)==null?void 0:he.width,(ke=L.dimension)==null?void 0:ke.height):""),n.$$.dirty[0]&768&&e(32,o={width:ne,height:se}),n.$$.dirty[0]&16|n.$$.dirty[1]&2&&e(31,a=o?C(L,o):void 0),n.$$.dirty[0]&35651584|n.$$.dirty[1]&1&&e(28,l=A?!!(a!=null&&a(v)):!0),n.$$.dirty[0]&192&&e(30,c={width:te,height:q}),n.$$.dirty[0]&1073741840&&e(29,h=c?C(L,c):void 0),n.$$.dirty[0]&572522496&&e(27,d=A?!!(h!=null&&h(v)):!0),n.$$.dirty[0]&469762048&&e(13,f=d||l||ue),n.$$.dirty[0]&335544320&&e(12,g=l||ue),n.$$.dirty[0]&201326592&&e(11,p=d||ue),n.$$.dirty[0]&402653184&&e(10,m=l&&!d)},[b,w,x,E,L,O,te,q,ne,se,m,p,g,f,r,s,i,T,H,W,J,v,S,R,z,A,ue,d,l,h,c,a,o,ze,Ce,ce,le]}class Ly extends Me{constructor(t){super(),Ie(this,t,Sy,xy,Pe,{pxmm:21,roomAreaEnable:0,roomNameEnable:1,roomNameOtherTypeEnable:2,roomDimensionEnable:3,room:4,hoveredRoom:22,getRoomAreaText:23,getRoomDimensionText:24,getLabelElement:5,adaptiveRoomLabelVisibleEnable:25},My,[-1,-1])}}function Ty(n){De(n,"svelte-13xux0b",".floorplan-plugin__room-labels.svelte-13xux0b{width:100%;height:100%;position:absolute;left:0;top:0;z-index:20;pointer-events:none}")}function tf(n,t,e){const i=n.slice();return i[15]=t[e],i}function nf(n){let t,e=[],i=new Map,s,r,o,a=n[11];const l=c=>c[15].id;for(let c=0;c<a.length;c+=1){let h=tf(n,a,c),d=l(h);i.set(d,e[c]=sf(d,h))}return{c(){t=U("div");for(let c=0;c<e.length;c+=1)e[c].c();y(t,"class","floorplan-plugin__room-labels svelte-13xux0b")},m(c,h){Y(c,t,h);for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(t,null);s=!0,r||(o=[Ai(cn.call(null,t)),je(t,"clientWidth",n[14])],r=!0)},p(c,h){h&3583&&(a=c[11],Ee(),e=yi(e,h,l,1,c,a,i,t,ln,sf,null,tf),xe())},i(c){if(!s){for(let h=0;h<a.length;h+=1)N(e[h]);s=!0}},o(c){for(let h=0;h<e.length;h+=1)Z(e[h]);s=!1},d(c){c&&X(t);for(let h=0;h<e.length;h+=1)e[h].d();r=!1,ut(o)}}}function sf(n,t){let e,i,s;const r=[{pxmm:t[10],room:t[15],hoveredRoom:t[4],roomAreaEnable:t[0],roomNameEnable:t[1],roomNameOtherTypeEnable:t[2],roomDimensionEnable:t[3],getLabelElement:t[7],getRoomAreaText:t[5],getRoomDimensionText:t[6],adaptiveRoomLabelVisibleEnable:t[8]}];let o={};for(let a=0;a<r.length;a+=1)o=xt(o,r[a]);return i=new Ly({props:o}),{key:n,first:null,c(){e=Ne(),Ae(i.$$.fragment),this.first=e},m(a,l){Y(a,e,l),ge(i,a,l),s=!0},p(a,l){t=a;const c=l&3583?Ot(r,[{pxmm:t[10],room:t[15],hoveredRoom:t[4],roomAreaEnable:t[0],roomNameEnable:t[1],roomNameOtherTypeEnable:t[2],roomDimensionEnable:t[3],getLabelElement:t[7],getRoomAreaText:t[5],getRoomDimensionText:t[6],adaptiveRoomLabelVisibleEnable:t[8]}]):{};i.$set(c)},i(a){s||(N(i.$$.fragment,a),s=!0)},o(a){Z(i.$$.fragment,a),s=!1},d(a){a&&X(e),ve(i,a)}}}function zy(n){let t,e,i=n[11]&&nf(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[11]?i?(i.p(s,r),r&2048&&N(i,1)):(i=nf(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function Oy(n,t,e){let i,{floorIndex:s}=t,{roomAreaEnable:r}=t,{roomNameEnable:o}=t,{roomNameOtherTypeEnable:a}=t,{roomDimensionEnable:l}=t,{floorplanData:c}=t,{hoveredRoom:h}=t,{getRoomAreaText:d}=t,{getRoomDimensionText:f}=t,{getLabelElement:g}=t,{adaptiveRoomLabelVisibleEnable:p}=t,m=0,v=0;const b=w=>{e(9,m=w.detail)};return n.$$set=w=>{"floorIndex"in w&&e(12,s=w.floorIndex),"roomAreaEnable"in w&&e(0,r=w.roomAreaEnable),"roomNameEnable"in w&&e(1,o=w.roomNameEnable),"roomNameOtherTypeEnable"in w&&e(2,a=w.roomNameOtherTypeEnable),"roomDimensionEnable"in w&&e(3,l=w.roomDimensionEnable),"floorplanData"in w&&e(13,c=w.floorplanData),"hoveredRoom"in w&&e(4,h=w.hoveredRoom),"getRoomAreaText"in w&&e(5,d=w.getRoomAreaText),"getRoomDimensionText"in w&&e(6,f=w.getRoomDimensionText),"getLabelElement"in w&&e(7,g=w.getLabelElement),"adaptiveRoomLabelVisibleEnable"in w&&e(8,p=w.adaptiveRoomLabelVisibleEnable)},n.$$.update=()=>{if(n.$$.dirty&12288&&e(11,i=c.floorDatas[s].rooms),n.$$.dirty&8704){const{max:w,min:x}=c.bounding,E=w.x-x.x;e(10,v=m/E)}},[r,o,a,l,h,d,f,g,p,m,v,i,s,c,b]}class jy extends Me{constructor(t){super(),Ie(this,t,Oy,zy,Pe,{floorIndex:12,roomAreaEnable:0,roomNameEnable:1,roomNameOtherTypeEnable:2,roomDimensionEnable:3,floorplanData:13,hoveredRoom:4,getRoomAreaText:5,getRoomDimensionText:6,getLabelElement:7,adaptiveRoomLabelVisibleEnable:8},Ty)}}function Vy(n){De(n,"svelte-1fuyezq",".floorplan-plugin__rule-labels.svelte-1fuyezq.svelte-1fuyezq{position:absolute;display:flex}.floorplan-plugin__rule-labels--top.svelte-1fuyezq.svelte-1fuyezq{left:0;top:-1.25rem}.floorplan-plugin__rule-labels--bottom.svelte-1fuyezq.svelte-1fuyezq{left:0;bottom:-1.25rem}.floorplan-plugin__rule-labels--left.svelte-1fuyezq.svelte-1fuyezq{top:0;left:-1.25rem}.floorplan-plugin__rule-labels--right.svelte-1fuyezq.svelte-1fuyezq{top:0;right:-1.25rem}.floorplan-plugin__rule-line.svelte-1fuyezq.svelte-1fuyezq{background:#fff;opacity:0.2;width:100%;height:100%}.floorplan-plugin__rule-scale-wrapper.svelte-1fuyezq.svelte-1fuyezq{position:absolute;width:0.3125rem;height:100%;left:50%;top:0;transform:translateX(-50%)}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-scale-wrapper.svelte-1fuyezq{width:100%;height:0.3125rem;top:50%;left:0;transform:translateY(-50%)}.floorplan-plugin__rule-scale.svelte-1fuyezq.svelte-1fuyezq{position:absolute;background:#fff;opacity:0.2;width:100%;height:0.0625rem}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-scale.svelte-1fuyezq{width:0.0625rem;height:100%}.floorplan-plugin__rule-text-wrapper.svelte-1fuyezq.svelte-1fuyezq{position:absolute}.floorplan-plugin__rule-labels--top.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:100%;height:0;top:0.625rem}.floorplan-plugin__rule-labels--bottom.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:100%;height:0;bottom:0.625rem}.floorplan-plugin__rule-labels--left.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:0;height:100%;left:0.625rem}.floorplan-plugin__rule-labels--right.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:0;height:100%;right:0.625rem}.floorplan-plugin__rule-text-item.svelte-1fuyezq.svelte-1fuyezq{width:0;height:0;position:absolute;transform:rotate(90deg)}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-text-item.svelte-1fuyezq{transform:rotate(0)}.floorplan-plugin__rule-text.svelte-1fuyezq.svelte-1fuyezq{width:-moz-max-content;width:max-content;transform:translate(-50%, -50%);font-size:0.625rem;color:#fff;opacity:0.35}")}function rf(n,t,e){const i=n.slice();return i[11]=t[e],i[13]=e,i}function of(n,t,e){const i=n.slice();return i[14]=t[e],i}function af(n){let t;return{c(){t=U("div"),y(t,"class","floorplan-plugin__rule-scale svelte-1fuyezq"),Q(t,"left",n[14].left*100+"%"),Q(t,"bottom",n[14].bottom*100+"%")},m(e,i){Y(e,t,i)},p:re,d(e){e&&X(t)}}}function lf(n,t){let e,i,s=t[1](t[11].distance)+"",r,o;return{key:n,first:null,c(){e=U("div"),i=U("div"),r=Ve(s),o=ae(),y(i,"class","floorplan-plugin__rule-text svelte-1fuyezq"),we(i,"is-row",t[2]),y(e,"class","floorplan-plugin__rule-text-item svelte-1fuyezq"),Q(e,"left",t[11].left*100+"%"),Q(e,"bottom",t[11].bottom*100+"%"),this.first=e},m(a,l){Y(a,e,l),V(e,i),V(i,r),V(e,o)},p(a,l){t=a,l&2&&s!==(s=t[1](t[11].distance)+"")&&Ge(r,s)},d(a){a&&X(e)}}}function By(n){let t,e,i,s,r,o,a=[],l=new Map,c,h=n[3],d=[];for(let p=0;p<h.length;p+=1)d[p]=af(of(n,h,p));let f=n[4];const g=p=>p[13];for(let p=0;p<f.length;p+=1){let m=rf(n,f,p),v=g(m);l.set(v,a[p]=lf(v,m))}return{c(){t=U("div"),e=U("div"),i=ae(),s=U("div");for(let p=0;p<d.length;p+=1)d[p].c();r=ae(),o=U("div");for(let p=0;p<a.length;p+=1)a[p].c();y(e,"class","floorplan-plugin__rule-line svelte-1fuyezq"),y(s,"class","floorplan-plugin__rule-scale-wrapper svelte-1fuyezq"),we(s,"is-row",n[2]),y(o,"class","floorplan-plugin__rule-text-wrapper svelte-1fuyezq"),y(t,"class",c="floorplan-plugin__rule-labels floorplan-plugin__rule-labels--"+n[0]+" svelte-1fuyezq"),we(t,"is-row",n[2]),Q(t,"width",n[2]?"100%":1/16+"rem"),Q(t,"height",n[2]?1/16+"rem":"100%")},m(p,m){Y(p,t,m),V(t,e),V(t,i),V(t,s);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(s,null);V(t,r),V(t,o);for(let v=0;v<a.length;v+=1)a[v]&&a[v].m(o,null)},p(p,[m]){if(m&8){h=p[3];let v;for(v=0;v<h.length;v+=1){const b=of(p,h,v);d[v]?d[v].p(b,m):(d[v]=af(b),d[v].c(),d[v].m(s,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=h.length}m&22&&(f=p[4],a=yi(a,m,g,1,p,f,l,o,wc,lf,null,rf)),m&1&&c!==(c="floorplan-plugin__rule-labels floorplan-plugin__rule-labels--"+p[0]+" svelte-1fuyezq")&&y(t,"class",c),m&5&&we(t,"is-row",p[2])},i:re,o:re,d(p){p&&X(t),ci(d,p);for(let m=0;m<a.length;m+=1)a[m].d()}}}const rr=1e3,or=180;function _y(n,t,e){let{type:i}=t,{data:s}=t,{bounding:r}=t,{getRuleDistanceText:o}=t;const a=i==="top"||i==="bottom",l=r.max.x-r.min.x-(rr-or)*2,c=r.max.y-r.min.y-(rr-or)*2,h=s.map(([p,m])=>a?[p.x,m.x]:[p.y,m.y]).flat().sort().filter((p,m,v)=>m===0?!0:p!==v[m-1]),d=h.map(p=>{const m=a?(p-r.min.x-rr+or)/l:0,v=a?0:(p-r.min.y-rr+or)/c;return{left:m,bottom:v}});d.unshift({left:0,bottom:0}),d.push(a?{left:1,bottom:0}:{left:0,bottom:1});const f=h[h.length-1]-h[0],g=h.map((p,m,v)=>{const b=m===0?0:p-v[m-1],w=m===0?0:(p+v[m-1])/2,x=a?(w-r.min.x-rr+or)/l:0,E=a?0:(w-r.min.y-rr+or)/c;return{left:x,bottom:E,distance:b}}).filter(({distance:p})=>p/f>.1);return n.$$set=p=>{"type"in p&&e(0,i=p.type),"data"in p&&e(5,s=p.data),"bounding"in p&&e(6,r=p.bounding),"getRuleDistanceText"in p&&e(1,o=p.getRuleDistanceText)},[i,o,a,d,g,s,r]}class Ry extends Me{constructor(t){super(),Ie(this,t,_y,By,Pe,{type:0,data:5,bounding:6,getRuleDistanceText:1},Vy)}}function Fy(n){De(n,"svelte-1mzj9p3",".floorplan-plugin__rule-labels-wrapper.svelte-1mzj9p3{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);pointer-events:none}")}function cf(n,t,e){const i=n.slice();return i[13]=t[e][0],i[14]=t[e][1],i}function hf(n,t){let e,i,s;const r=[{type:t[13],data:t[14],bounding:t[1],getRuleDistanceText:t[0]}];let o={};for(let a=0;a<r.length;a+=1)o=xt(o,r[a]);return i=new Ry({props:o}),{key:n,first:null,c(){e=Ne(),Ae(i.$$.fragment),this.first=e},m(a,l){Y(a,e,l),ge(i,a,l),s=!0},p(a,l){t=a;const c=l&19?Ot(r,[{type:t[13],data:t[14],bounding:t[1],getRuleDistanceText:t[0]}]):{};i.$set(c)},i(a){s||(N(i.$$.fragment,a),s=!0)},o(a){Z(i.$$.fragment,a),s=!1},d(a){a&&X(e),ve(i,a)}}}function Ny(n){let t,e=[],i=new Map,s,r=n[4];const o=a=>a[13];for(let a=0;a<r.length;a+=1){let l=cf(n,r,a),c=o(l);i.set(c,e[a]=hf(c,l))}return{c(){t=U("div");for(let a=0;a<e.length;a+=1)e[a].c();y(t,"class","floorplan-plugin__rule-labels-wrapper svelte-1mzj9p3"),Q(t,"width",n[3]),Q(t,"height",n[2])},m(a,l){Y(a,t,l);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null);s=!0},p(a,[l]){l&19&&(r=a[4],Ee(),e=yi(e,l,o,1,a,r,i,t,ln,hf,null,cf),xe()),l&8&&Q(t,"width",a[3]),l&4&&Q(t,"height",a[2])},i(a){if(!s){for(let l=0;l<r.length;l+=1)N(e[l]);s=!0}},o(a){for(let l=0;l<e.length;l+=1)Z(e[l]);s=!1},d(a){a&&X(t);for(let l=0;l<e.length;l+=1)e[l].d()}}}const df=1e3,uf=180;function Gy(n,t,e){let i,s,r,o,a,l,c,h,d,f,{floorIndex:g}=t,{floorplanData:p}=t,{getRuleDistanceText:m}=t;return n.$$set=v=>{"floorIndex"in v&&e(5,g=v.floorIndex),"floorplanData"in v&&e(6,p=v.floorplanData),"getRuleDistanceText"in v&&e(0,m=v.getRuleDistanceText)},n.$$.update=()=>{n.$$.dirty&64&&e(1,i=p.bounding),n.$$.dirty&96&&e(11,s=p.floorDatas[g].rules),n.$$.dirty&2048&&e(12,r=Object.keys(s)),n.$$.dirty&6144&&e(4,o=r.map(v=>[v,s[v]])),n.$$.dirty&2&&e(9,a=i.max.x-i.min.x),n.$$.dirty&2&&e(7,l=i.max.y-i.min.y),n.$$.dirty&2&&e(10,c=i.max.x-i.min.x-(df-uf)*2),n.$$.dirty&2&&e(8,h=i.max.y-i.min.y-(df-uf)*2),n.$$.dirty&1536&&e(3,d=c/a*100+"%"),n.$$.dirty&384&&e(2,f=h/l*100+"%")},[m,i,f,d,o,g,p,l,h,a,c,s,r]}class Hy extends Me{constructor(t){super(),Ie(this,t,Gy,Ny,Pe,{floorIndex:5,floorplanData:6,getRuleDistanceText:0},Fy)}}function On(n,t={}){let e="";const{needZ:i,needA:s}=t;return(i?n.slice().concat(n[0]):n.slice()).forEach((o,a)=>{const{x:l,y:c}=t.format?t.format(o):o,h=l+","+c;return a===0?(e+="M"+h,e):s!=null&&s[a]?(e+="A"+s[a]+","+h,e):(e+="L"+h,e)}),e+(i?"Z":"")}function ff({x:n,y:t},e){const{max:i,min:s}=e;return{x:n-s.x,y:i.y-t}}function Wy(n,t){const e=n.x*1e3+t.bounding.origin.x,i=-n.z*1e3+t.bounding.origin.y;return{x:e,y:i}}function Uy(n,t){const e=t.bounding,i=e.max.x-e.min.x,s=e.max.y-e.min.y;return{x:(n.x-e.min.x)/i,y:(e.max.y-n.y)/s}}function Qy(n,t){return Math.max(...t.work.observers.map(i=>n.z>=i.standingPosition.z?i.floorIndex:0))}function Xy(n){let t;return{c(){t=ye("path"),y(t,"d",n[0]),y(t,"fill","#2F313A")},m(e,i){Y(e,t,i)},p(e,[i]){i&1&&y(t,"d",e[0])},i:re,o:re,d(e){e&&X(t)}}}function Yy(n,t,e){let i,{path:s}=t;return n.$$set=r=>{"path"in r&&e(1,s=r.path)},n.$$.update=()=>{n.$$.dirty&2&&e(0,i=On(s,{needZ:!0}))},[i,s]}class Zy extends Me{constructor(t){super(),Ie(this,t,Yy,Xy,Pe,{path:1})}}function Jy(n){let t,e,i,s,r,o;return{c(){t=ye("defs"),e=ye("pattern"),i=ye("rect"),s=ye("path"),r=ae(),o=ye("path"),y(i,"x","0"),y(i,"y","0"),y(i,"width",n[1]),y(i,"height",n[1]),y(i,"fill","#323747"),y(s,"d",n[2]),y(s,"stroke","#ffffff"),y(s,"stroke-opacity","0.06"),y(s,"stroke-width","0.5"),y(s,"fill","none"),y(e,"id","fpm-room-pattern-0"),y(e,"x","0"),y(e,"y","0"),y(e,"width",n[1]),y(e,"height",n[1]),y(e,"patternUnits","userSpaceOnUse"),y(e,"patternTransform","scale(50 50)"),y(o,"d",n[0]),y(o,"fill","url(#fpm-room-pattern-0)")},m(a,l){Y(a,t,l),V(t,e),V(e,i),V(e,s),Y(a,r,l),Y(a,o,l)},p(a,[l]){l&1&&y(o,"d",a[0])},i:re,o:re,d(a){a&&X(t),a&&X(r),a&&X(o)}}}const Ic=6;function qy(n,t,e){let i,{path:s}=t;const r=Ic*2,o=`M0 ${Ic} h ${r} M${Ic} 0 v ${r}`;return n.$$set=a=>{"path"in a&&e(3,s=a.path)},n.$$.update=()=>{n.$$.dirty&8&&e(0,i=On(s,{needZ:!0}))},[i,r,o,s]}class Ky extends Me{constructor(t){super(),Ie(this,t,qy,Jy,Pe,{path:3})}}function $y(n){let t,e,i,s,r,o,a,l,c,h,d;return{c(){t=ye("defs"),e=ye("pattern"),i=ye("rect"),s=ye("pattern"),r=ye("rect"),o=ae(),a=ye("path"),l=ae(),c=ye("path"),h=ae(),d=ye("path"),y(i,"x","0"),y(i,"y","0"),y(i,"width","6"),y(i,"height","50"),y(i,"fill","none"),y(i,"stroke","#4B4B57"),y(i,"stroke-width","0.5"),y(e,"id","room-material-pattern-1"),y(e,"x","0"),y(e,"y","0"),y(e,"width","12"),y(e,"height","50"),y(e,"patternUnits","userSpaceOnUse"),y(e,"patternTransform","scale(50 50)"),y(r,"x","0"),y(r,"y","0"),y(r,"width","6"),y(r,"height","50"),y(r,"fill","none"),y(r,"stroke","#4B4B57"),y(r,"stroke-width","0.5"),y(s,"id","room-material-pattern-2"),y(s,"x","6"),y(s,"y","25"),y(s,"width","12"),y(s,"height","50"),y(s,"patternUnits","userSpaceOnUse"),y(s,"patternTransform","scale(50 50)"),y(a,"d",n[0]),y(a,"fill","#43434D"),y(c,"d",n[0]),y(c,"fill","url(#room-material-pattern-1)"),y(d,"d",n[0]),y(d,"fill","url(#room-material-pattern-2)")},m(f,g){Y(f,t,g),V(t,e),V(e,i),V(t,s),V(s,r),Y(f,o,g),Y(f,a,g),Y(f,l,g),Y(f,c,g),Y(f,h,g),Y(f,d,g)},p(f,[g]){g&1&&y(a,"d",f[0]),g&1&&y(c,"d",f[0]),g&1&&y(d,"d",f[0])},i:re,o:re,d(f){f&&X(t),f&&X(o),f&&X(a),f&&X(l),f&&X(c),f&&X(h),f&&X(d)}}}function ew(n,t,e){let i,{path:s}=t;return n.$$set=r=>{"path"in r&&e(1,s=r.path)},n.$$.update=()=>{n.$$.dirty&2&&e(0,i=On(s,{needZ:!0}))},[i,s]}class tw extends Me{constructor(t){super(),Ie(this,t,ew,$y,Pe,{path:1})}}function iw(n){let t;return{c(){t=ye("path"),y(t,"d",n[0]),y(t,"fill","#969696"),y(t,"stroke","#969696"),y(t,"stroke-width","1"),y(t,"fill-rule","evenodd")},m(e,i){Y(e,t,i)},p:re,i:re,o:re,d(e){e&&X(t)}}}function nw(n,t,e){let{dimension:i}=t;const s=On([{x:i.vertical[1].x,y:i.vertical[1].y+53},{x:i.vertical[1].x-60,y:i.vertical[1].y+124},{x:i.vertical[1].x+60,y:i.vertical[1].y+124}],{needZ:!0}),r=On([{x:i.vertical[0].x,y:i.vertical[0].y-53},{x:i.vertical[0].x-60,y:i.vertical[0].y-124},{x:i.vertical[0].x+60,y:i.vertical[0].y-124}],{needZ:!0}),o=On([{x:i.horizontal[0].x+53,y:i.horizontal[0].y},{x:i.horizontal[0].x+124,y:i.horizontal[0].y+60},{x:i.horizontal[0].x+124,y:i.horizontal[0].y-60}],{needZ:!0}),a=On([{x:i.horizontal[1].x-53,y:i.horizontal[1].y},{x:i.horizontal[1].x-124,y:i.horizontal[1].y+60},{x:i.horizontal[1].x-124,y:i.horizontal[1].y-60}],{needZ:!0}),l=`${s} ${r} ${o} ${a}`;return n.$$set=c=>{"dimension"in c&&e(1,i=c.dimension)},[l,i]}class sw extends Me{constructor(t){super(),Ie(this,t,nw,iw,Pe,{dimension:1})}}function rw(n){De(n,"svelte-1dykexu",".floorplan-plugin__room-material.svelte-1dykexu{position:absolute;left:0;top:0;width:100%;height:100%}svg.svelte-1dykexu{position:absolute;left:0;top:0;width:100%;height:100%;overflow:visible}")}function pf(n,t,e){const i=n.slice();return i[8]=t[e],i}function ow(n){let t,e;return t=new Ky({props:{path:n[8].path}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.path=i[8].path),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function aw(n){let t,e;return t=new tw({props:{path:n[8].path}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.path=i[8].path),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function lw(n){let t,e;return t=new Zy({props:{path:n[8].path}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.path=i[8].path),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function mf(n){let t,e,i;return e=new sw({props:{dimension:n[8].dimension}}),{c(){t=ye("svg"),Ae(e.$$.fragment),y(t,"width","100%"),y(t,"height","100%"),y(t,"viewBox",`0 0 ${n[1]} ${n[2]}`),y(t,"class","svelte-1dykexu")},m(s,r){Y(s,t,r),ge(e,t,null),i=!0},p(s,r){const o={};r&1&&(o.dimension=s[8].dimension),e.$set(o)},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e)}}}function gf(n){let t,e,i,s,r=n[3]&&n[8].dimension&&Array.isArray(n[8].dimension.vertical)&&n[8].dimension.vertical.length>0&&Array.isArray(n[8].dimension.horizontal)&&n[8].dimension.horizontal.length>0,o,a;const l=[lw,aw,ow],c=[];function h(f,g){return f[8].floorType===1?0:f[8].floorType===0?1:2}e=h(n),i=c[e]=l[e](n);let d=r&&mf(n);return{c(){t=ye("svg"),i.c(),s=ae(),d&&d.c(),o=Ne(),y(t,"width","100%"),y(t,"height","100%"),y(t,"viewBox",`0 0 ${n[1]} ${n[2]}`),y(t,"class","svelte-1dykexu")},m(f,g){Y(f,t,g),c[e].m(t,null),Y(f,s,g),d&&d.m(f,g),Y(f,o,g),a=!0},p(f,g){let p=e;e=h(f),e===p?c[e].p(f,g):(Ee(),Z(c[p],1,1,()=>{c[p]=null}),xe(),i=c[e],i?i.p(f,g):(i=c[e]=l[e](f),i.c()),N(i,1),i.m(t,null)),g&1&&(r=f[3]&&f[8].dimension&&Array.isArray(f[8].dimension.vertical)&&f[8].dimension.vertical.length>0&&Array.isArray(f[8].dimension.horizontal)&&f[8].dimension.horizontal.length>0),r?d?(d.p(f,g),g&1&&N(d,1)):(d=mf(f),d.c(),N(d,1),d.m(o.parentNode,o)):d&&(Ee(),Z(d,1,1,()=>{d=null}),xe())},i(f){a||(N(i),N(d),a=!0)},o(f){Z(i),Z(d),a=!1},d(f){f&&X(t),c[e].d(),f&&X(s),d&&d.d(f),f&&X(o)}}}function cw(n){let t,e,i=n[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=gf(pf(n,i,o));const r=o=>Z(s[o],1,1,()=>{s[o]=null});return{c(){t=U("div");for(let o=0;o<s.length;o+=1)s[o].c();y(t,"class","floorplan-plugin__room-material svelte-1dykexu")},m(o,a){Y(o,t,a);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null);e=!0},p(o,[a]){if(a&15){i=o[0];let l;for(l=0;l<i.length;l+=1){const c=pf(o,i,l);s[l]?(s[l].p(c,a),N(s[l],1)):(s[l]=gf(c),s[l].c(),N(s[l],1),s[l].m(t,null))}for(Ee(),l=i.length;l<s.length;l+=1)r(l);xe()}},i(o){if(!e){for(let a=0;a<i.length;a+=1)N(s[a]);e=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)Z(s[a]);e=!1},d(o){o&&X(t),ci(s,o)}}}function hw(n,t,e){let i,{roomLabelsEnable:s}=t,{roomDimensionEnable:r}=t,{floorIndex:o}=t,{floorplanData:a}=t;const l=a.bounding.max.x-a.bounding.min.x,c=a.bounding.max.y-a.bounding.min.y,h=s&&r;return n.$$set=d=>{"roomLabelsEnable"in d&&e(4,s=d.roomLabelsEnable),"roomDimensionEnable"in d&&e(5,r=d.roomDimensionEnable),"floorIndex"in d&&e(6,o=d.floorIndex),"floorplanData"in d&&e(7,a=d.floorplanData)},n.$$.update=()=>{n.$$.dirty&192&&e(0,i=a.floorDatas[o].rooms.map(d=>fe(F({},d),{path:d.path.map(f=>ff(f,a.bounding))})))},[i,l,c,h,s,r,o,a]}class dw extends Me{constructor(t){super(),Ie(this,t,hw,cw,Pe,{roomLabelsEnable:4,roomDimensionEnable:5,floorIndex:6,floorplanData:7},rw)}}function uw(n){De(n,"svelte-qq2273","path.svelte-qq2273{--opacity:0;opacity:var(--opacity)}path.svelte-qq2273:hover{opacity:calc(var(--opacity) + 0.1)}")}function fw(n){let t,e,i,s;return{c(){t=ye("path"),y(t,"d",n[5]),y(t,"fill","#fff"),y(t,"style",n[2]),y(t,"id",e=`${n[1]}_${n[0].id}`),y(t,"class","svelte-qq2273")},m(r,o){Y(r,t,o),i||(s=[je(t,"mouseenter",n[3]),je(t,"mouseleave",n[4])],i=!0)},p(r,[o]){o&4&&y(t,"style",r[2]),o&3&&e!==(e=`${r[1]}_${r[0].id}`)&&y(t,"id",e)},i:re,o:re,d(r){r&&X(t),i=!1,ut(s)}}}function pw(n,t,e){let i,s,{room:r}=t,{floorIndex:o}=t,{floorplanData:a}=t,{highlightData:l}=t,{hoveredRoom:c}=t;function h(){c==null||c.set(r)}function d(){c==null||c.set(void 0)}const{bounding:f}=a,g=On(r.path,{needZ:!0,format:p=>ff(p,f)});return n.$$set=p=>{"room"in p&&e(0,r=p.room),"floorIndex"in p&&e(1,o=p.floorIndex),"floorplanData"in p&&e(6,a=p.floorplanData),"highlightData"in p&&e(7,l=p.highlightData),"hoveredRoom"in p&&e(8,c=p.hoveredRoom)},n.$$.update=()=>{n.$$.dirty&131&&e(9,i=l[`${o}_${r.id}`]),n.$$.dirty&512&&e(2,s=i?`fill: ${i.color}; --opacity: ${i.opacity}; pointer-events: ${i.disabled?"none":"auto"}`:null)},[r,o,s,h,d,g,a,l,c,i]}class mw extends Me{constructor(t){super(),Ie(this,t,pw,fw,Pe,{room:0,floorIndex:1,floorplanData:6,highlightData:7,hoveredRoom:8},uw)}}function gw(n){De(n,"svelte-1kqo6e4",".floorplan-plugin__room-highlight.svelte-1kqo6e4{position:absolute;width:100%;height:100%}svg.svelte-1kqo6e4{width:100%;height:100%;overflow:visible}")}function vf(n,t,e){const i=n.slice();return i[6]=t[e],i}function Af(n,t){let e,i,s;const r=[{room:t[6],floorplanData:t[1],hoveredRoom:t[3],floorIndex:t[0],highlightData:t[2]}];let o={};for(let a=0;a<r.length;a+=1)o=xt(o,r[a]);return i=new mw({props:o}),{key:n,first:null,c(){e=Ne(),Ae(i.$$.fragment),this.first=e},m(a,l){Y(a,e,l),ge(i,a,l),s=!0},p(a,l){t=a;const c=l&15?Ot(r,[{room:t[6],floorplanData:t[1],hoveredRoom:t[3],floorIndex:t[0],highlightData:t[2]}]):{};i.$set(c)},i(a){s||(N(i.$$.fragment,a),s=!0)},o(a){Z(i.$$.fragment,a),s=!1},d(a){a&&X(e),ve(i,a)}}}function vw(n){let t,e,i=[],s=new Map,r,o=n[1].floorDatas[n[0]].rooms;const a=l=>l[6].id;for(let l=0;l<o.length;l+=1){let c=vf(n,o,l),h=a(c);s.set(h,i[l]=Af(h,c))}return{c(){t=U("div"),e=ye("svg");for(let l=0;l<i.length;l+=1)i[l].c();y(e,"width","100%"),y(e,"height","100%"),y(e,"viewBox",`0 0 ${n[4]} ${n[5]}`),y(e,"class","svelte-1kqo6e4"),y(t,"class","floorplan-plugin__room-highlight svelte-1kqo6e4")},m(l,c){Y(l,t,c),V(t,e);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(e,null);r=!0},p(l,[c]){c&15&&(o=l[1].floorDatas[l[0]].rooms,Ee(),i=yi(i,c,a,1,l,o,s,e,ln,Af,null,vf),xe())},i(l){if(!r){for(let c=0;c<o.length;c+=1)N(i[c]);r=!0}},o(l){for(let c=0;c<i.length;c+=1)Z(i[c]);r=!1},d(l){l&&X(t);for(let c=0;c<i.length;c+=1)i[c].d()}}}function Aw(n,t,e){let{floorIndex:i}=t,{floorplanData:s}=t,{highlightData:r}=t,{hoveredRoom:o}=t;const a=s.bounding.max.x-s.bounding.min.x,l=s.bounding.max.y-s.bounding.min.y;return n.$$set=c=>{"floorIndex"in c&&e(0,i=c.floorIndex),"floorplanData"in c&&e(1,s=c.floorplanData),"highlightData"in c&&e(2,r=c.highlightData),"hoveredRoom"in c&&e(3,o=c.hoveredRoom)},[i,s,r,o,a,l]}class bf extends Me{constructor(t){super(),Ie(this,t,Aw,vw,Pe,{floorIndex:0,floorplanData:1,highlightData:2,hoveredRoom:3},gw)}}function bw(n){De(n,"svelte-3vzs9z",".missing-floor.svelte-3vzs9z{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;flex-direction:column;align-items:center}.text.svelte-3vzs9z{margin-top:0.75rem;color:#fff;opacity:0.3;white-space:nowrap}")}function yf(n){let t,e=n[0].text+"",i;return{c(){t=U("span"),i=Ve(e),y(t,"class","text svelte-3vzs9z"),Q(t,"font-size",n[0].textFontSize+"px")},m(s,r){Y(s,t,r),V(t,i)},p(s,r){r&1&&e!==(e=s[0].text+"")&&Ge(i,e),r&1&&Q(t,"font-size",s[0].textFontSize+"px")},d(s){s&&X(t)}}}function yw(n){let t,e,i,s,r=n[0].text&&yf(n);return{c(){t=U("div"),e=U("img"),s=ae(),r&&r.c(),y(e,"class","image"),y(e,"alt","缺省楼层展位图"),ft(e.src,i=n[0].imageURL)||y(e,"src",i),Q(e,"width",n[0].imageWidth+"px"),Q(e,"height",n[0].imageHeight+"px"),Q(e,"max-width","none"),y(t,"class","missing-floor svelte-3vzs9z")},m(o,a){Y(o,t,a),V(t,e),V(t,s),r&&r.m(t,null)},p(o,[a]){a&1&&!ft(e.src,i=o[0].imageURL)&&y(e,"src",i),a&1&&Q(e,"width",o[0].imageWidth+"px"),a&1&&Q(e,"height",o[0].imageHeight+"px"),o[0].text?r?r.p(o,a):(r=yf(o),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},i:re,o:re,d(o){o&&X(t),r&&r.d()}}}function ww(n,t,e){let{missingFloorConfig:i}=t;return n.$$set=s=>{"missingFloorConfig"in s&&e(0,i=s.missingFloorConfig)},[i]}class Pw extends Me{constructor(t){super(),Ie(this,t,ww,yw,Pe,{missingFloorConfig:0},bw)}}const jn="data:image/png;base64,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";function Ia(n){return n*180/Math.PI}function Cw(n){De(n,"svelte-17hhq1b",".floorplan__camera-position.svelte-17hhq1b{pointer-events:none;position:absolute;width:0;height:0}.floorplan__camera-rotate.svelte-17hhq1b{position:absolute;background-repeat:no-repeat;background-size:100%}")}function Iw(n){let t,e;return{c(){t=U("div"),e=U("div"),y(e,"class","floorplan__camera-rotate svelte-17hhq1b"),Q(e,"background-image",`url(${n[0]||jn})`),Q(e,"width",n[4]),Q(e,"height",n[4]),Q(e,"left","-"+n[4]),Q(e,"top","-"+n[4]),Q(e,"transform",`rotate(${n[3]}deg)`),Q(e,"transform-origin",`${n[4]} ${n[4]}`),y(t,"class","floorplan__camera-position svelte-17hhq1b"),Q(t,"left",n[1]),Q(t,"top",n[2])},m(i,s){Y(i,t,s),V(t,e)},p(i,[s]){s&1&&Q(e,"background-image",`url(${i[0]||jn})`);const r=s&1;r&&Q(e,"width",i[4]),r&&Q(e,"height",i[4]),r&&Q(e,"left","-"+i[4]),r&&Q(e,"top","-"+i[4]),r&&Q(e,"transform",`rotate(${i[3]}deg)`),r&&Q(e,"transform-origin",`${i[4]} ${i[4]}`)},i:re,o:re,d(i){i&&X(t)}}}function Mw(n,t,e){let{panoIndex:i}=t,{floorplanData:s}=t,{lastPanoramaLongitude:r}=t,{cameraImageUrl:o}=t;const{observers:a}=s,l=a[i],c=l.positionInImage.x,h=l.positionInImage.y,d=c*100+"%",f=h*100+"%",g=-Ia(r)+45,p=document.body.clientWidth,m=document.body.clientHeight,b=`${(p<500||m<500?17:37)/16}rem`;return n.$$set=w=>{"panoIndex"in w&&e(5,i=w.panoIndex),"floorplanData"in w&&e(6,s=w.floorplanData),"lastPanoramaLongitude"in w&&e(7,r=w.lastPanoramaLongitude),"cameraImageUrl"in w&&e(0,o=w.cameraImageUrl)},[o,d,f,g,b,i,s,r]}let kw=class extends Me{constructor(t){super(),Ie(this,t,Mw,Iw,Pe,{panoIndex:5,floorplanData:6,lastPanoramaLongitude:7,cameraImageUrl:0},Cw)}};const Ew="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArUAAAB7CAMAAABdA4ieAAAC91BMVEUAAACOpP/H0P+yxP/a4/+asv/W3/+/z/+cs//S3f+mu//Q2//5+v/H1P/d5f/l6//y9f++zf/i6f+ww/+ovP/7/P/u8v/N2f+Mp//q7/+4yf+uwf+Wr/+7y/+1xv+Ho//x9P+9zP+2x/+swP+gt/+Oqf/Y4v/r8P/l7P/b4//F0/+juf+Zsv+XsP+Trf/p7v97mv9wj/+kuv+ftf/x9P92lf/3+f/I1f+5yv+Eof98m//8/f/4+f90lf+9zf/j6f/T3f/L1/+Bnv/6+/+SrP/m7P/f5v/O2v/L2P/E0v/Az//+///s8P/e5v+rv/+pvv+Anv+qvv+Pqv+Kpv+CoP93l/9xlP/z9v/p7v90lf9uj//P2//v8//o7f/k6v/K1v+6yv9rjv98nv/E0v/9/v/09//h6P/X4f9pjP/9/f/N2f/K1v/C0f+Ho/99nP/1+P9sj//6+//u8/+iuP/u8//g6P/U3v+3x/+0xv+etf+Vrv9pjf/B0P9ukf+ht/+Vr/94mP/G0/+8zP+2x//+/v/09v/W4f9ojv/c5P+xxP/d5v+xw/+vwv+Jo//g6P+nvP+SrP/R3P/1+f/W3//U3//C0P+Jp/9nh/+Kpv+Fov/Y4f/J1/+Pqf+rv/+Oqv+Oqv+muv+twP/f5//t8P97mf/h5/+twP+kuf/L2P+juP+Ipf+huP+Pqf/d5v+zxf+cs/+Zsf+wwv/V3v+8zP+Go/+zxP+GpP/T3f/r8P/u8v/o7f/d5P/m7P/H1P/w9P/D0f+uwf/Z4v/F0v/09//D0v/v8//s8v/d5P/Y4f/s8P+etv/X4f+gt/+ovf+bsv+xw/+Vr//j6v+1x//J1v+4yf/r8P+yxf/T3f/B0f+Fo//09//W4P/h6P/L1v/i6f/x9f/t8v/G0/+uwf/z9f/7/P/n7f/z9v/T3f+4yf/J1v/z9f/w8//q7v/O2v/8/f/5+v/y9f/w8//g6P/z9v+/zv+5yf+9zf/5+v/Q3P/B0P/u8f/R2//////LSJnaAAAA/HRSTlMAAwGMx2jAn2u7ebn0q8zX7J3TiHz45bRS35SFYZmPSembkYNwVMXh2cmodWVjXN43DHZu6gfyrJZGOvrzLAbVvbBB91raz7aypqH+4s6Bfj9/Vk9EMint3C8gt+fc1q+XGAml/O/SxBz7s66kSz3wI/bjc+fQvpOObV8VoyZyXjSpmgv97sMPyorNiYZN0XpYuvHCv6JNEhEWw61YgCUdGBIP5CIgHypaUEU6NS9JQy8lGlY6NCuMfVtPSzspJoRxcExBNTMUyn9zaWRfVkk9Oad9emtkY0RBMLGsnJaQj4ZmXVHhsaKbeW9owb466dnVy7mYj45wyaGV3bdGzuNnAAASkklEQVR42uyaS0iUURiGTUQZ1MaMURSEbOFt4ybGQClFHO9rBS8F3nAURHG0hZvyQrgQRsfNuKmRCTcGGaEzThNqMyouwswKNTVMLe/a/bLo+845/5z/dzIiumj971I3gz6+Puc9x0POT6bRaXfYrJa18YHFhYXXKzMz6+/fb2+/ePFia8uvWlXelFkcr6pO2NqCr2xv77xfn5lZWXm9sDgwvmZZGnHYzaZjHnLk/PaYzL0jS9Pji6+XN3Z3gvJPnTkTEJCT01xSUtWuVick+PlVJ6tUqvj44uLipkxIU3F5fLxKlZxc7efnl6BWt1eVlDTn5AQEnDl16lR+be2n3fWZlYWBNcugze485yFHzq/Kub7eEcv44tzyekpsbEhIZGRWVk1NUFBtPqU2gFGbANRWVycnI7XlCO0XQm25mFp1VRWjFrDNz68NCqqpyYqMDAmJjc3NzQ3cmJwfmLba7CZPDzlyfg5Wh3V6YG559HyhUhkVlZJSUJDLqK3pDkJqoS8ZtVWEWiCTUltejl37BaCVdG2Cul1MLUIb1M2pLShIiYpSKpWF58+37U3Oj1ue2E0ecuT8EK1mm3VoYG4vW6MrLQ0MDDwvUIvQ8q6tBWqZIeRQQ+DU8q51NwQxtbVAbRajNrZARG1gaWBpm0anyY6enB+bGOyV6ZVzIK6bPUPzs17Rx48fb80GaHVtpQRaF7XYtZFIbTcRBAFb7rWc2uJM1rVoCCqgFquWdy0TBDCEbqSWlm2KQC38rZSW6nS67OxW+CxXr0Z7ec/J8MqRxtQ7ONQ/2xIREeHlFR191UVtqRu1wBep2hpqCNxrpYYg6dp4Ude2Y9cG8K5FQ8hyNwSglnZtNoE22svLKyKirKxFsTo28cQsH9v+81Bevb29O1qMZQAtUhs9SqnVsK5199osRi3fENwNgXitcBqrrmZly7r2DKUWq7Zb8FrBEAoptW1tGg3rWk5tC3xSQ53ig8zuf5pzd4df9c8qFIrEOgOhtgyphdCubaVdC9iyrkVo+Wnsm12bID6NZYqWLxX32qpm0fKVD9ii10bSrkVDiJJ2bWuriFqjsaUDPmpdXWIifG7f1bGezT55bfhfYrrfM7Wamufrq9cjtIkGA+1aZgiArdRrlUBtirRr2YbAvBZGBLV71/INAcuWbwjcEERey7tWKe7abGnXdiC1DFq9r29eampF/3O5dv/1ODd7pj5og4ODU13UQtdyQ+Beq9FovnMaE20IAdwQJHut2BCE05jaffkSDAGwxbJl1CK27DQ2iqcxCFKLXWsgXatX+BJqg4O1aWlJz14N35XR/RfTeP/2VOeFpKS0tDQCLVDrq9AjtXVIrdFYVsaoHWWGQKgN3EdtCNVa91sGtdQQmvhpjFUtX74QWjoioNdm0a5lGwL3Wp1GI/HaCCP1WkMddi1Cm5cH1BJsky5UxGHrysLw7wQd9pl/XFfFBaRWq9UCtalIrZ56rcG7A7u2jHktMQQN91qllFq2fImoba468G5M6rVq4rV8Q0CvZdTGgtcitrxrNUgtli1QCyFe6+0yBL3eF6Cl1CYBtYBtnL9/0b2ezWseco56QGLvpV++7O8fF1dRAdhC16Ih0K4lhpBoQBaMLS6vZacxTdu+DSFXsiHkU689YENgd2MSQ0iQ7rXiG90Qvnxh2eJhTOfqWihb7rXUEIBalyFotaRru+IQ28uXY9LBF27JD3OObPqePn9TlJ4eExNDqO0CapOQWsCWdq2CUmtgGwKnli9f6LWFrg0hhFEr7doS1rXSu7HM8nK3DaHd7W6shnutyxACqdficYxSyzYEgVqEVsENQYtdi9j6U2rTi4oqfaZu32n0kHO04nlr+N3HjIaGoqIipNafUNsF1KIicK9VUK8FQ8Cu5YbAqQVslfv2Wuq1+TU7uxszK/DycG1t2mJZWrKOjIzYHA673Wx2Ok3nPImbNJqcfWa7vdfhsMG3rUtLFss0PG3Eh43ruzvC8sW7lhkCgxYMQXzLYCReyzYESGoePY0JXesPiYlBbCsbOjMyMu713L/uIedo5NiNm+8++vhkALSVlaRrqSEAtNKu1VNqWddKN4Rs3f6uLdxYnsTXsdNLg7Ze8y95WOhp6rM7RqyW6fGB+bnJ5Q0lNQRyo+u+fOGGIMFWOI2Rqq2ghgDUYtcSbH18fE4AuXLnHvr0PX30JvzEiRM+gG0nYFsE2IIgQARD0LINIY9vCNLla1R8ozu6PLc4brE6zH/iEcAxp90GD83mJ/dAqjU64TTGvNYodC0uX2SvJV1LNwSkFg3B1bWEWvhBhIdfeSjbwiHO9QeP34aFXQkPp9AitWgIgtfGYdcecBrrMJYJy1c0gLIHb62GrE96+/7aCmoyOwYnhvrnJo3otXz5Yl6roNCmptLTGHYtei1imy50rQ+lFrANC7v48ra86B6+HLs1/PDs2YsA7RWAlmLb0MkNgXStdENwv2WIUKzi2yrnoZo98ekkPpYQ7saQWtq1dPlCr+WGIO1axJZSe/Hs2bePHsiae4jSeOfxpdBQhJZULe/aSmIISG0cNwTetQoIMQTDbP9Qj818mP+Pejp7ByfGVmeF5WufIVw4wGuxahm1oaGh9S9vyqPYYYgnnL1O19cDtEAt7VrqtXCIdnWtsCEkYdfyWwaF4jMp174j9JtsvGvrGer/oMcNQXzL0CVZvhoaMii1iG2YQG19/enTp08+li33K/tm7JNGGIbxqiEht5m7iasMcBuwwOJk0tEFcn9BG7s1bizQGBycCCbXpUkTo9VFJVpRSeNkuBqnq6BRoiwOMtldm3Tr+37fJ9+dtFEUbNX3+RPIj+d+93zf/ctgyZb1YDAUAmx510J410JY1wqvbTeEma3vJ9uP9571yObu8rfTd6xrhSEIahFb2bXCayW1wWAwM2CvLf5XFvSMMr9fzw9kMhnEFqmVXSsMYQI3hFFJLUD7GixwZuvHU/kuoG+zsXx0CtS+Yl4runZ0fHzcvSEAtUPcEEKCWshhdYlezx44I0vV80J+AILQQgIuagdby9e1vXbm9Ogp3kmd2j45q7z1Ll/tXRuAoCEAtQzbQkE93qdLCw+Wsa9NXVXVfB6xdXftsOxauSHwszHgtfG0L6IufNkBdhm0vGul10Kk14quzQO1qqqDK7yg9Dwj682wrk+raqEgoGXUtrp2yGUI3Gt/we3T5/L+0Q+6W/mIXTvR7rWArTSEfJ5Rq+the40at5dBMTDDCC2jVhoCYjscAGo5tBC+fA0elXefhsF2dqTdOKtMyLlWvo2F3NQCtNPTiG04aZcI3B6lb6mqJZPhK2rVFrVBFATRtXKvrZw1Fh/RotXdoOzu/LwYhLj3Wo8hCGrDQG1y1jTIcbufvo2ilTJnZxFbnRsC81qxIYQ8XntRpy9SWOZ3y+dv2pevjPRaQa1pplIph87OuoxsXEulTJND6zWEjPRagDZwXqbredd94bgiqfUYgsq6Ngldi9hqmna8Qj9etw6/bMvSNIYt/MAtQ8i7DQG79rLeoPH8b75QPg8wbINyQ+CGILtW0yxLUZoE7v2RrRmKolgaUouGwL1W93gtdu1lnY57bj5IPBRei+GGAHF3rYKJ7608l82lF5lacSLxOFLLutaUXeuhNlOnOyEdkMu9VnYtJGnysrUshDYej6SLG9QBd5TZdASgjSsQhNZFrS69FoilF6+OsgDkIrauDWEWu1ZjhoDYRiKRdNohU+g4CyUnl2tRa1nSEKTXFmwi9s7kNg89G4IwBNG1SG0uZ9BVhQ4PEwzDyKWBWoEtUis2BNG19toSydc9bx81D91dC9hKaiNIrWE4dPxwy8yXnEQCoL3WtSnetQhtsklXRLv1YajNli8BraYgtozaXBqgTSQS2cl1+q1vytj6pD+bBWpF10qvFV2btIukBV2WhVRrQxDQCkNAbLNZv1N7zoeMt/jr13x+P1LLyhawlYLAX8fobl33g0ZWtE2+11oearFr/RDf3gEV7p/z6WDS5/MJaF1eqwhslSo9q3qW/vn9Y63Na7Fqs0gtpDZHhXs9/Z9r0ShC6+5aQS1C65ToEKHXmVqvRtoNwQ9BbKPR96vUGt5H1IcYg9YjCDkxIcSrNB32ONLRSg7H1msIEMA2GqNJoZWp1ckYQCuoRWwZtUYaFSFdpNHwYbOwsodde7UhtLAFaGOxl7U5eub9Ztfscd0Eoihsu8oSKJBoQpUYyYULmhSIBVjACuip0tFQpEaaagTSyLiI9GSMZArEKp4it95N7oXBk6dUr7Ln59sB4uNw7p0BTlfb3s7Wcm0fvfbbV7MveAYo7k9eEB5h+x0Aa22b9OlKb9bHP7kNgLZC2slawKTs80Bx/2sIW8DO7dy7VSt9SfuoyHMurei1k7bnt/3K8ExQXLT2Y0MA8qLwro2mRaG6hV5RTNpuuba81345v+n+E3oR6su7aAjc2hyt9cL4qN+fcNNcw9DzPJG1i7VG2dfidHlHaYW1qK0H2oauZvvz/ZEyhtLyrBUN4WzuxLweIO6HrOXWhiQa6pUupHeLkRCYrbWB2dqzZh+vPGxOl1xoW3iztYyxqNWj4KadG0URm7z9tyHoPZi+PnBJRExjk7WEEHiTrtMof9T7q7NctJYwcBaYGgJwVf/R5Sft3bkh8KydrXVV93aHzs7WklBMY2b+kob65uE0NhcEQhhaa1mWo+7VmqqzgElaRlDbKWtD0wykAg6GikJkretO2saKelt1cRyjtQAD5qw1zUBCdr2L1jIWAdzaWEVvq44+pI0AErLQs/rdyiAjm9ONiF5rATGlpaPWwUM1ZHSxFokIY9FNn12fivw4toQwkbWobemPynhbD1lW0hKtfYTtVa3PUk+q3pp7LYDW0jLL2lGJ+yP14DhZltFFW5DW6swApgbrpn1kbVmCtJnj+KP0GyFwFsCspZRLq1j70Z2qsxC0loK0qK0vd95Wne/7IC1Q8qgd9DgB1Il0dKx4CVsH8P1E3n3C7t76AM/aErKW3s1FAxVZNweUllvrIwc5V5r7MUiSWVoMW5C2NdVAXao7DmNL1vpJkgy1dH/V9W9wNmmTxdqy7OR7CMMnV2EiaxMgkGzoXjdDEKC2S0HwR3OeoD6beuBZ26K0QXC4y/Pa/7Jrx7gJw1AYx2su0iuYgYFI7sAJstiS2ZKpk8UeWfKWKyQLLJ5Qxyp34TZ9D15YOkBpm9ji/U/A8CP+HFj0styMapHtZ54bh/t5y2E9LoQNVppMXoN1uixLQns8rl9PeZ0T3O96O5T4rL2wBQkuZnCbWQ7OXdUe1zwNni8YCsh2VOuK1I/a2jtHapHtZp/J+cD9bf0HoiW1rpAp38TfYlEUgJaetWUOZwP3P3UnetYCW1ChU52JogoS1UKIlq9gT95yILSugKRKciq2VhLaEpIVm3366j2pxaSMyf07YRUlND5qTynvGG6aaDOSWgnptFiIKoQLWmQ7pLphuOkTB0lqoZDSTGiVBrXE1iT0wbgEEn0gtSEEncoNfRV1uKKN/KqL+/4C1xYSA7XapjATRGU1hGxT3NtcGnUK0UJgZf7TuDWEls1yt9wiWsja7awzYRWttYgWYrPcLbejWqua2WaCqBSixQLvWe5mi06RWqv8TDOhNUrZC9sdm+Xuu5cpUqvU+wwzYbVVkIXYLHd/olekVpmpZ8KiMYbU7ma/EXJZBW5JrZl2V9bRnNWyWe4xt8TWTPd3FdEYSEFslnsoURlAi01FqN56f2br2xeOe9ytgbyf4nErGg/hl6RN4Jc5Lt++2rVjHMdCIIqiqtoRQW2mMogIyZFjlsB2B9wjjaY1PXa3wcbSPaEDR1fP9fVt8aPai2+f2+TlWu2l0yweZHlEO5S9cyu1lDKj5T/fWCH4jLaUnXMbvFyrzby8xRrayqUM2+ZWqvuM1nmpgHWkl8F9z9yG7LNa5yEMa0n8yHb93Er1oXjnoMVyFn3KQVcP7VRpFn+sDiznaiuHNufsHnkIwy7aPA/r5jbFGW3m7S12ku55WPN7Li1PPIRhN6sjtBjTmm+KmYcwPEOKs9tHF1JDHCoHLZ5DQ8yPBic9DoHjAKvsb85qjbFxHOCprMZaf5qdhlorxwGeTsPIttvPlno0y3GAZfbHp6n3ynGAV0m99u/2J6H3znGAvW4n+J25tdY7xwFey1pvQe6/DlrjOMDLqfXW7N5pbs0YWhxgtpj0rl1uiaHFISzccSWohUCzOIemm0VKChwHOMutKCVwHOA4av/JVi0xtDiRpCRfRcvQ4lBfxSnG0OJc/+xTjKHFyVRMP38iDC0O92lZVRhanO+vcVWGFu9BRWkW7+Z3rapEizdy7ZVm8V5Gtr8AtSnix59eOmYAAAAASUVORK5CYII=";function xw(n){De(n,"svelte-rpkaro",".floorplan-plugin__compass.svelte-rpkaro{position:absolute;left:50%;top:-2.875rem;width:14.4375rem;height:2.5625rem;will-change:opacity;transform-origin:center 11.5rem}.floorplan-plugin__compass-image.svelte-rpkaro{width:100%;height:100%;position:absolute;left:0;top:0;opacity:0.1;background-repeat:no-repeat;background-size:100% 100%}.floorplan-plugin__compass-text.svelte-rpkaro{position:absolute;left:50%;top:0.9375rem;transform:translateX(-50%);opacity:0.2;font-weight:bold;font-size:0.625rem;color:#fff}")}function Dw(n){let t,e,i,s,r;return{c(){t=U("div"),e=U("div"),i=ae(),s=U("span"),r=Ve(n[0]),y(e,"class","floorplan-plugin__compass-image svelte-rpkaro"),Q(e,"background-image",`url(${Ew})`),y(s,"class","floorplan-plugin__compass-text svelte-rpkaro"),y(t,"class","floorplan-plugin__compass svelte-rpkaro"),Q(t,"transform",n[2])},m(o,a){Y(o,t,a),V(t,e),V(t,i),V(t,s),V(s,r)},p(o,a){a&1&&Ge(r,o[0])},d(o){o&&X(t)}}}function Sw(n){let t,e=n[1]&&Dw(n);return{c(){e&&e.c(),t=Ne()},m(i,s){e&&e.m(i,s),Y(i,t,s)},p(i,[s]){i[1]&&e.p(i,s)},i:re,o:re,d(i){e&&e.d(i),i&&X(t)}}}function Lw(n,t,e){var c;let{floorplanData:i}=t,{northDesc:s}=t;const r=(c=i.entrance)==null?void 0:c.northRad,o=typeof r=="number",l=`translateX(-50%) translateZ(10px) rotate(${-(r?Ia(r):0)+90}deg)`;return n.$$set=h=>{"floorplanData"in h&&e(3,i=h.floorplanData),"northDesc"in h&&e(0,s=h.northDesc)},[s,o,l,i]}class Tw extends Me{constructor(t){super(),Ie(this,t,Lw,Sw,Pe,{floorplanData:3,northDesc:0},xw)}}function zw(n){De(n,"svelte-bl8zrz",".floorplan-plugin__floor.svelte-bl8zrz{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;pointer-events:none}.floorplan-plugin__floor--is-current.svelte-bl8zrz{opacity:1;pointer-events:auto}")}function Ow(n){let t,e,i,s,r,o,a,l,c,h,d,f;const g=[{floorIndex:n[2],floorplanData:n[12],roomLabelsEnable:n[6],roomDimensionEnable:n[10]}];let p={};for(let z=0;z<g.length;z+=1)p=xt(p,g[z]);t=new dw({props:p});let m=(n[3]||n[5])&&wf(n);const v=[{floorplanData:n[12],floorIndex:n[2]}];let b={};for(let z=0;z<v.length;z+=1)b=xt(b,v[z]);s=new Yu({props:b});const w=[{floorplanData:n[12],floorIndex:n[2]}];let x={};for(let z=0;z<w.length;z+=1)x=xt(x,w[z]);o=new Iy({props:x});let E=n[6]&&Pf(n),L=n[11]&&Cf(n),S=n[4]&&If(n),R=n[23]&&Mf(n);return{c(){Ae(t.$$.fragment),e=ae(),m&&m.c(),i=ae(),Ae(s.$$.fragment),r=ae(),Ae(o.$$.fragment),a=ae(),E&&E.c(),l=ae(),L&&L.c(),c=ae(),S&&S.c(),h=ae(),R&&R.c(),d=Ne()},m(z,O){ge(t,z,O),Y(z,e,O),m&&m.m(z,O),Y(z,i,O),ge(s,z,O),Y(z,r,O),ge(o,z,O),Y(z,a,O),E&&E.m(z,O),Y(z,l,O),L&&L.m(z,O),Y(z,c,O),S&&S.m(z,O),Y(z,h,O),R&&R.m(z,O),Y(z,d,O),f=!0},p(z,O){const A=O&5188?Ot(g,[{floorIndex:z[2],floorplanData:z[12],roomLabelsEnable:z[6],roomDimensionEnable:z[10]}]):{};t.$set(A),z[3]||z[5]?m?(m.p(z,O),O&40&&N(m,1)):(m=wf(z),m.c(),N(m,1),m.m(i.parentNode,i)):m&&(Ee(),Z(m,1,1,()=>{m=null}),xe());const C=O&4100?Ot(v,[{floorplanData:z[12],floorIndex:z[2]}]):{};s.$set(C);const I=O&4100?Ot(w,[{floorplanData:z[12],floorIndex:z[2]}]):{};o.$set(I),z[6]?E?(E.p(z,O),O&64&&N(E,1)):(E=Pf(z),E.c(),N(E,1),E.m(l.parentNode,l)):E&&(Ee(),Z(E,1,1,()=>{E=null}),xe()),z[11]?L?(L.p(z,O),O&2048&&N(L,1)):(L=Cf(z),L.c(),N(L,1),L.m(c.parentNode,c)):L&&(Ee(),Z(L,1,1,()=>{L=null}),xe()),z[4]?S?(S.p(z,O),O&16&&N(S,1)):(S=If(z),S.c(),N(S,1),S.m(h.parentNode,h)):S&&(Ee(),Z(S,1,1,()=>{S=null}),xe()),z[23]?R?(R.p(z,O),O&8388608&&N(R,1)):(R=Mf(z),R.c(),N(R,1),R.m(d.parentNode,d)):R&&(Ee(),Z(R,1,1,()=>{R=null}),xe())},i(z){f||(N(t.$$.fragment,z),N(m),N(s.$$.fragment,z),N(o.$$.fragment,z),N(E),N(L),N(S),N(R),f=!0)},o(z){Z(t.$$.fragment,z),Z(m),Z(s.$$.fragment,z),Z(o.$$.fragment,z),Z(E),Z(L),Z(S),Z(R),f=!1},d(z){ve(t,z),z&&X(e),m&&m.d(z),z&&X(i),ve(s,z),z&&X(r),ve(o,z),z&&X(a),E&&E.d(z),z&&X(l),L&&L.d(z),z&&X(c),S&&S.d(z),z&&X(h),R&&R.d(z),z&&X(d)}}}function jw(n){let t,e;return t=new Pw({props:{missingFloorConfig:n[19]}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&524288&&(r.missingFloorConfig=i[19]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function wf(n){let t,e;const i=[{floorIndex:n[2],floorplanData:n[12],hoveredRoom:n[25],highlightData:n[18]}];let s={};for(let r=0;r<i.length;r+=1)s=xt(s,i[r]);return t=new bf({props:s}),{c(){Ae(t.$$.fragment)},m(r,o){ge(t,r,o),e=!0},p(r,o){const a=o&33820676?Ot(i,[{floorIndex:r[2],floorplanData:r[12],hoveredRoom:r[25],highlightData:r[18]}]):{};t.$set(a)},i(r){e||(N(t.$$.fragment,r),e=!0)},o(r){Z(t.$$.fragment,r),e=!1},d(r){ve(t,r)}}}function Pf(n){let t,e;const i=[{floorplanData:n[12],roomAreaEnable:n[7],roomNameEnable:n[8],roomNameOtherTypeEnable:n[9],roomDimensionEnable:n[10],floorIndex:n[2],getRoomAreaText:n[13],getRoomDimensionText:n[14],getLabelElement:n[15],hoveredRoom:n[25],adaptiveRoomLabelVisibleEnable:n[17]}];let s={};for(let r=0;r<i.length;r+=1)s=xt(s,i[r]);return t=new jy({props:s}),{c(){Ae(t.$$.fragment)},m(r,o){ge(t,r,o),e=!0},p(r,o){const a=o&33748868?Ot(i,[{floorplanData:r[12],roomAreaEnable:r[7],roomNameEnable:r[8],roomNameOtherTypeEnable:r[9],roomDimensionEnable:r[10],floorIndex:r[2],getRoomAreaText:r[13],getRoomDimensionText:r[14],getLabelElement:r[15],hoveredRoom:r[25],adaptiveRoomLabelVisibleEnable:r[17]}]):{};t.$set(a)},i(r){e||(N(t.$$.fragment,r),e=!0)},o(r){Z(t.$$.fragment,r),e=!1},d(r){ve(t,r)}}}function Cf(n){let t,e;const i=[{floorplanData:n[12],floorIndex:n[2],getRuleDistanceText:n[16]}];let s={};for(let r=0;r<i.length;r+=1)s=xt(s,i[r]);return t=new Hy({props:s}),{c(){Ae(t.$$.fragment)},m(r,o){ge(t,r,o),e=!0},p(r,o){const a=o&69636?Ot(i,[{floorplanData:r[12],floorIndex:r[2],getRuleDistanceText:r[16]}]):{};t.$set(a)},i(r){e||(N(t.$$.fragment,r),e=!0)},o(r){Z(t.$$.fragment,r),e=!1},d(r){ve(t,r)}}}function If(n){let t,e;const i=[{panoIndex:n[0],floorplanData:n[12],lastPanoramaLongitude:n[20],cameraImageUrl:n[21]}];let s={};for(let r=0;r<i.length;r+=1)s=xt(s,i[r]);return t=new kw({props:s}),{c(){Ae(t.$$.fragment)},m(r,o){ge(t,r,o),e=!0},p(r,o){const a=o&3149825?Ot(i,[{panoIndex:r[0],floorplanData:r[12],lastPanoramaLongitude:r[20],cameraImageUrl:r[21]}]):{};t.$set(a)},i(r){e||(N(t.$$.fragment,r),e=!0)},o(r){Z(t.$$.fragment,r),e=!1},d(r){ve(t,r)}}}function Mf(n){let t,e;return t=new Tw({props:{floorplanData:n[12],northDesc:n[22]}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&4096&&(r.floorplanData=i[12]),s&4194304&&(r.northDesc=i[22]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function Vw(n){let t,e,i,s,r;const o=[jw,Ow],a=[];function l(c,h){return c[24]?1:0}return e=l(n),i=a[e]=o[e](n),{c(){t=U("div"),i.c(),y(t,"class",s=yt(`floorplan-plugin__floor${n[1]?" floorplan-plugin__floor--is-current":""}`)+" svelte-bl8zrz")},m(c,h){Y(c,t,h),a[e].m(t,null),r=!0},p(c,[h]){let d=e;e=l(c),e===d?a[e].p(c,h):(Ee(),Z(a[d],1,1,()=>{a[d]=null}),xe(),i=a[e],i?i.p(c,h):(i=a[e]=o[e](c),i.c()),N(i,1),i.m(t,null)),(!r||h&2&&s!==(s=yt(`floorplan-plugin__floor${c[1]?" floorplan-plugin__floor--is-current":""}`)+" svelte-bl8zrz"))&&y(t,"class",s)},i(c){r||(N(i),r=!0)},o(c){Z(i),r=!1},d(c){c&&X(t),a[e].d()}}}function Bw(n,t,e){let i,s,{panoIndex:r}=t,{isCurrent:o}=t,{floorIndex:a}=t,{highlightEnable:l}=t,{cameraEnable:c}=t,{hoverEnable:h}=t,{roomLabelsEnable:d}=t,{roomAreaEnable:f}=t,{roomNameEnable:g}=t,{roomNameOtherTypeEnable:p}=t,{roomDimensionEnable:m}=t,{ruleLabelsEnable:v}=t,{floorplanData:b}=t,{getRoomAreaText:w}=t,{getRoomDimensionText:x}=t,{getLabelElement:E}=t,{getRuleDistanceText:L}=t,{adaptiveRoomLabelVisibleEnable:S}=t,{highlightData:R}=t,{missingFloorConfig:z}=t,{lastPanoramaLongitude:O}=t,{cameraImageUrl:A}=t,{northDesc:C}=t,{compassEnable:I}=t,{store:M=void 0}=t;const D=Cc(void 0);return D.subscribe(T=>{M&&e(26,M.roomOnMouse=T,M)}),n.$$set=T=>{"panoIndex"in T&&e(0,r=T.panoIndex),"isCurrent"in T&&e(1,o=T.isCurrent),"floorIndex"in T&&e(2,a=T.floorIndex),"highlightEnable"in T&&e(3,l=T.highlightEnable),"cameraEnable"in T&&e(4,c=T.cameraEnable),"hoverEnable"in T&&e(5,h=T.hoverEnable),"roomLabelsEnable"in T&&e(6,d=T.roomLabelsEnable),"roomAreaEnable"in T&&e(7,f=T.roomAreaEnable),"roomNameEnable"in T&&e(8,g=T.roomNameEnable),"roomNameOtherTypeEnable"in T&&e(9,p=T.roomNameOtherTypeEnable),"roomDimensionEnable"in T&&e(10,m=T.roomDimensionEnable),"ruleLabelsEnable"in T&&e(11,v=T.ruleLabelsEnable),"floorplanData"in T&&e(12,b=T.floorplanData),"getRoomAreaText"in T&&e(13,w=T.getRoomAreaText),"getRoomDimensionText"in T&&e(14,x=T.getRoomDimensionText),"getLabelElement"in T&&e(15,E=T.getLabelElement),"getRuleDistanceText"in T&&e(16,L=T.getRuleDistanceText),"adaptiveRoomLabelVisibleEnable"in T&&e(17,S=T.adaptiveRoomLabelVisibleEnable),"highlightData"in T&&e(18,R=T.highlightData),"missingFloorConfig"in T&&e(19,z=T.missingFloorConfig),"lastPanoramaLongitude"in T&&e(20,O=T.lastPanoramaLongitude),"cameraImageUrl"in T&&e(21,A=T.cameraImageUrl),"northDesc"in T&&e(22,C=T.northDesc),"compassEnable"in T&&e(23,I=T.compassEnable),"store"in T&&e(26,M=T.store)},n.$$.update=()=>{n.$$.dirty&4100&&e(27,i=b.floorDatas[a]),n.$$.dirty&134217728&&e(24,s=i.rooms.length>0||i.is_has_wall)},[r,o,a,l,c,h,d,f,g,p,m,v,b,w,x,E,L,S,R,z,O,A,C,I,s,D,M,i]}let _w=class extends Me{constructor(t){super(),Ie(this,t,Bw,Vw,Pe,{panoIndex:0,isCurrent:1,floorIndex:2,highlightEnable:3,cameraEnable:4,hoverEnable:5,roomLabelsEnable:6,roomAreaEnable:7,roomNameEnable:8,roomNameOtherTypeEnable:9,roomDimensionEnable:10,ruleLabelsEnable:11,floorplanData:12,getRoomAreaText:13,getRoomDimensionText:14,getLabelElement:15,getRuleDistanceText:16,adaptiveRoomLabelVisibleEnable:17,highlightData:18,missingFloorConfig:19,lastPanoramaLongitude:20,cameraImageUrl:21,northDesc:22,compassEnable:23,store:26},zw)}};function Rw(n){De(n,"svelte-86bqav",".floorplan-main.svelte-86bqav{width:100%;height:100%;pointer-events:none}")}function kf(n,t,e){const i=n.slice();return i[26]=t[e],i}function Ef(n){let t,e,i,s=n[15].floorDatas,r=[];for(let a=0;a<s.length;a+=1)r[a]=xf(kf(n,s,a));const o=a=>Z(r[a],1,1,()=>{r[a]=null});return{c(){t=U("div");for(let a=0;a<r.length;a+=1)r[a].c();y(t,"class","floorplan-main svelte-86bqav")},m(a,l){Y(a,t,l);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(t,null);i=!0},p(a,l){if(n=a,l&67108860){s=n[15].floorDatas;let c;for(c=0;c<s.length;c+=1){const h=kf(n,s,c);r[c]?(r[c].p(h,l),N(r[c],1)):(r[c]=xf(h),r[c].c(),N(r[c],1),r[c].m(t,null))}for(Ee(),c=s.length;c<r.length;c+=1)o(c);xe()}},i(a){if(!i){for(let l=0;l<s.length;l+=1)N(r[l]);e||pt(()=>{e=Tn(t,jt,{duration:n[0],easing:rn}),e.start()}),i=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)Z(r[l]);i=!1},d(a){a&&X(t),ci(r,a)}}}function xf(n){let t,e;const i=[{hoverEnable:n[6],highlightEnable:n[7],floorplanData:n[15],getRoomAreaText:n[18],getRoomDimensionText:n[19],getLabelElement:n[20],getRuleDistanceText:n[21],roomLabelsEnable:n[9],roomAreaEnable:n[10],roomNameEnable:n[11],roomNameOtherTypeEnable:n[12],roomDimensionEnable:n[13],ruleLabelsEnable:n[14],adaptiveRoomLabelVisibleEnable:n[22],highlightData:n[23],missingFloorConfig:n[24],panoIndex:n[3],cameraEnable:n[5],cameraImageUrl:n[17],lastPanoramaLongitude:n[16],compassEnable:n[8],northDesc:n[2],store:n[25]},{floorIndex:n[26].floorIndex},{isCurrent:n[26].floorIndex===n[4]},{items:n[26].items}];let s={};for(let r=0;r<i.length;r+=1)s=xt(s,i[r]);return t=new _w({props:s}),{c(){Ae(t.$$.fragment)},m(r,o){ge(t,r,o),e=!0},p(r,o){const a=o&67108860?Ot(i,[o&67108844&&{hoverEnable:r[6],highlightEnable:r[7],floorplanData:r[15],getRoomAreaText:r[18],getRoomDimensionText:r[19],getLabelElement:r[20],getRuleDistanceText:r[21],roomLabelsEnable:r[9],roomAreaEnable:r[10],roomNameEnable:r[11],roomNameOtherTypeEnable:r[12],roomDimensionEnable:r[13],ruleLabelsEnable:r[14],adaptiveRoomLabelVisibleEnable:r[22],highlightData:r[23],missingFloorConfig:r[24],panoIndex:r[3],cameraEnable:r[5],cameraImageUrl:r[17],lastPanoramaLongitude:r[16],compassEnable:r[8],northDesc:r[2],store:r[25]},o&32768&&{floorIndex:r[26].floorIndex},o&32784&&{isCurrent:r[26].floorIndex===r[4]},o&32768&&{items:r[26].items}]):{};t.$set(a)},i(r){e||(N(t.$$.fragment,r),e=!0)},o(r){Z(t.$$.fragment,r),e=!1},d(r){ve(t,r)}}}function Fw(n){let t,e,i=n[1]&&Ef(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[1]?i?(i.p(s,r),r&2&&N(i,1)):(i=Ef(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function Nw(n,t,e){let{duration:i=0}=t,{visible:s}=t,{northDesc:r}=t,{panoIndex:o}=t,{floorIndex:a}=t,{cameraEnable:l}=t,{hoverEnable:c}=t,{highlightEnable:h}=t,{compassEnable:d}=t,{roomLabelsEnable:f}=t,{roomAreaEnable:g}=t,{roomNameEnable:p}=t,{roomNameOtherTypeEnable:m}=t,{roomDimensionEnable:v}=t,{ruleLabelsEnable:b}=t,{floorplanData:w}=t,{lastPanoramaLongitude:x}=t,{cameraImageUrl:E}=t,{getRoomAreaText:L}=t,{getRoomDimensionText:S}=t,{getLabelElement:R}=t,{getRuleDistanceText:z}=t,{adaptiveRoomLabelVisibleEnable:O}=t,{highlightData:A}=t,{missingFloorConfig:C}=t,{store:I=void 0}=t;return n.$$set=M=>{"duration"in M&&e(0,i=M.duration),"visible"in M&&e(1,s=M.visible),"northDesc"in M&&e(2,r=M.northDesc),"panoIndex"in M&&e(3,o=M.panoIndex),"floorIndex"in M&&e(4,a=M.floorIndex),"cameraEnable"in M&&e(5,l=M.cameraEnable),"hoverEnable"in M&&e(6,c=M.hoverEnable),"highlightEnable"in M&&e(7,h=M.highlightEnable),"compassEnable"in M&&e(8,d=M.compassEnable),"roomLabelsEnable"in M&&e(9,f=M.roomLabelsEnable),"roomAreaEnable"in M&&e(10,g=M.roomAreaEnable),"roomNameEnable"in M&&e(11,p=M.roomNameEnable),"roomNameOtherTypeEnable"in M&&e(12,m=M.roomNameOtherTypeEnable),"roomDimensionEnable"in M&&e(13,v=M.roomDimensionEnable),"ruleLabelsEnable"in M&&e(14,b=M.ruleLabelsEnable),"floorplanData"in M&&e(15,w=M.floorplanData),"lastPanoramaLongitude"in M&&e(16,x=M.lastPanoramaLongitude),"cameraImageUrl"in M&&e(17,E=M.cameraImageUrl),"getRoomAreaText"in M&&e(18,L=M.getRoomAreaText),"getRoomDimensionText"in M&&e(19,S=M.getRoomDimensionText),"getLabelElement"in M&&e(20,R=M.getLabelElement),"getRuleDistanceText"in M&&e(21,z=M.getRuleDistanceText),"adaptiveRoomLabelVisibleEnable"in M&&e(22,O=M.adaptiveRoomLabelVisibleEnable),"highlightData"in M&&e(23,A=M.highlightData),"missingFloorConfig"in M&&e(24,C=M.missingFloorConfig),"store"in M&&e(25,I=M.store)},[i,s,r,o,a,l,c,h,d,f,g,p,m,v,b,w,x,E,L,S,R,z,O,A,C,I]}let Mc=class extends Me{constructor(t){super(),Ie(this,t,Nw,Fw,Pe,{duration:0,visible:1,northDesc:2,panoIndex:3,floorIndex:4,cameraEnable:5,hoverEnable:6,highlightEnable:7,compassEnable:8,roomLabelsEnable:9,roomAreaEnable:10,roomNameEnable:11,roomNameOtherTypeEnable:12,roomDimensionEnable:13,ruleLabelsEnable:14,floorplanData:15,lastPanoramaLongitude:16,cameraImageUrl:17,getRoomAreaText:18,getRoomDimensionText:19,getLabelElement:20,getRuleDistanceText:21,adaptiveRoomLabelVisibleEnable:22,highlightData:23,missingFloorConfig:24,store:25},Rw)}};const Gw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAYAAACFUvPfAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAMAAAAADe2FZjAAAEF0lEQVRoBe2WzWskRRiHf13V092TxI2oEzYeVDwITtyDuCiihwiCePGgxIM3vYgHL4J4UIhBRA8i/gPqyUvWg7AiIuIeloDiYUHJLOK6BPwIk9nNODM9Xf1RVe1b3elJRjCZmQ6euqGmuqer33rq4e23GqiOykBloDJQGagMVAYqA5WBykBlYFYD1qwP/tdzaZqOx9zYOLxeX0+L5yzLGp0X/03a25MOnGRcBtx+6Rlo9SL08G4EooFnxa8Yiivox5/h5Ys/4cl7NVorNDRnngX+0MIkVMeMSf23zyKML8J7/Dy8hwF2Buh9CnS+AEQIdLspBuGb+M7/qLW4qJrNpsLapjYhpwVnx3BMfCtNNx3Etc9xywvnMf80wG8HmQainw0RxSGrnmeBp+8k5/j9S0HbvXb5io0Lz880/0wPHV1NlhLd316He+4xOCv5ragF7L9PrH1qBJyB0626x/lC+qrSvH5r/W+n1WpxUM5nMY4GPeH8lHJaPgfeAFQHCL+ntkXT+vnUc3W6pvTIwC0wy3rA4dwLmK2avZ7Eo9uKBuYJfgJscbs8dLCxDMt+EOEPBEZNEWyBYHqTz6bPXrzUnNrSShxHIsYiOL69zrCGLLcLqJP68tB+9w5wj+YhWDafQ2s61wNqxjZhmrQ2pvMFCEvXuCUZ7wqH794ZWs28LJqlTXSUyuksF2M/yOwqgkx2c1ADa4wLAQRk2sAGQQakhN6yFC2hltfz5kSY44NKQeeh+vtI/SSzWhg2CzCgmWISmKUGmaYFBDfCSymnfxJ6/+ospVcWOLLp5DGP/y0P/Rp66O99DQNq7Po3Ds0a0wY+My2QSv2N2mO/OyxR2o6UQk+Lv7yJ06JYSnnolZVU9cUn2O9SmaMWGFBqYXRwbqAJWIi94TX5biotpcGl1DXZ6LnqIbNDTnmUgi52Mv5l5ysMxIcZcGjy2DTK4ZHlcBC14zeSge4qphICjj3bS0A7o9nSp2TOkm7aZ8bGZy/jxhO87V91G0+dfY/Z7BWIIK9KYUi5qy/Hf8YfBG3sqJTHiQWhmTVkbip+wX3x6volVSx+LPAxF+VLXhZ8VQ+iP2Rta/iWe5v42Fngj0BbdnRTXh12ZIcKhTaGbcYjybRwXBU1lu9KlndXp04NM52poKWO0RZsviNaP9a6grkO972+st05pXhE5c1hTEluJy7XUejGUQNLMbAmTdWY1rKBLW3aTJqBZ7nZkb36DhYCreeYHbMUXHvaYi5XDK70EcgulmRjm77wNtenzuXCbmnTRaAx493rbGf3Jr/njMzj920CnKdUaFCjlDioy7NYNvOdGrQJNgI32/L2tkXfFPlxgToqjWVhD6KdLnQRdARf/HHQz2r2X2Gqy8pAZaAyUBmoDFQGKgP/q4F/AJYg9/s0ZoABAAAAAElFTkSuQmCC";function Hw(n){return ee(this,null,function*(){const t=new Headers({"Content-Type":"text/plain"}),e=function(s){return ee(this,null,function*(){const r={index:s.index,url:s.url,svgUrl:s.svg_url};if(s.svg_url){const o=yield fetch(s.svg_url,{headers:t}).then(a=>a.text());r.svgContent=o}return r})};return yield Promise.all(n.map(e))})}function Ww(n){const t={id:n.id,size:n.size,name:n.name,customizedName:n.customizedName||"",path:n.path,roomType:n.room_type,floorType:n.floor_type,roomLabel:{position:n.room_label.position,positionInImage:n.room_label.position_in_image},observerIndexs:n.observer_indexs};return n.dimension&&Object.assign(t,{dimension:n.dimension}),t}function Uw(n){return{floorName:n.floor_name,floorIndex:n.floor_index,rooms:n.rooms.map(Ww),rules:n.rules,is_has_wall:n.is_has_wall}}function Qw(n){return{index:n.index,floorIndex:n.floor_index,position:n.position,positionInImage:n.position_in_image}}function Xw(n){return{rad:n.rad,position:n.position,positionInImage:n.position_in_image,northRad:n.north_rad,roomId:n.room_id,floorIndex:n.floor_index}}function Vn(n){return ee(this,null,function*(){const t=yield Hw(n.outlines),e=n.computed_data.bounding,i=n.computed_data.floor_datas.map(Uw),s=n.computed_data.entrance?Xw(n.computed_data.entrance):null;return{outlines:t,entrance:s,bounding:e,floorDatas:i,observers:n.computed_data.observers.map(Qw)}})}function Yw(n,t,e){return n.map(s=>{const r=s.position,o=s.icon?s.icon:{url:Gw,width:45,height:48},a=Qy(r,t),l=Wy(r,e),c=Uy(l,e);return{floorIndex:a,icon:o,id:s.id,position:l,positionInImage:c}})}function Zw(n,t){return t(n),n}function ar(n,t){return Zw({},e=>{for(const i in n)t.indexOf(i)===-1&&(e[i]=n[i])})}function Df(n,t){const e=Math.max(...n.work.observers.map(i=>i.floorIndex));return t>e?n.model.bounding.max.y:Math.max(...n.work.observers.filter(i=>i.floorIndex===t).map(i=>i.standingPosition.y))}function kc(n,t,e=zn.BOUNDING_CENTER){const i=Df(n,t),s=Df(n,t+1);return e===zn.BOUNDING_CENTER?(n.model.bounding.max.y+n.model.bounding.min.y)/2:e===zn.CEILING?s:i}function Ec(n,t,e,i){const s=kc(n,e,i==null?void 0:i.attachedTo),r=new P.Vector3(0,s,0),o=new P.Vector3(1,s,0),a=r.clone().project(n.camera),l=o.clone().project(n.camera);return Math.abs((l.x-a.x)/1e3)*(t.getBoundingClientRect().width/2)}let Bn=class{constructor(t,e){u(this,"VERSION","3.66.2");u(this,"NAME");u(this,"five");u(this,"workUtil");u(this,"fiveUtil");u(this,"hooks",new Pt);u(this,"staticPrefix","//vr-image-4.realsee-cdn.cn");this.five=t,this.fiveUtil=new Qo(t),this.workUtil=this.fiveUtil.workUtil,e!=null&&e.staticPrefix&&(this.staticPrefix=e.staticPrefix)}set workCode(t){this.workUtil.workCode=t,this.onWorkCodeChange()}get workCode(){return this.workUtil.workCode}updateFive(t){this.five=t,this.fiveUtil.five=t,this.workUtil.five=t}getCurrentState(){return this.state}absoluteUrl(t){return rc(this.staticPrefix,t)}onWorkCodeChange(){}},hn=class extends Bn{};var ii=(n=>(n.UnknownError="UnknownError",n.DataNotLoaded="DataNotLoaded",n.UpdateSizeError="UpdateSizeError",n.BreakOffByHide="BreakOffByHide",n.BreakOffByDisable="BreakOffByDisable",n.ModelNotLoaded="ModelNotLoaded",n.ChangeModeError="ChangeModeError",n.UpdateCameraError="UpdateCameraError",n))(ii||{});const Sf=500,Jw=80;function ds(n,t,e=4){return Math.abs(n-t)<Math.pow(10,-e)}function Lf(n,t,e=4){const i=Math.PI*2,s=n%i,r=t%i,o=Math.min(s,r),a=Math.max(s,r);return ds(o,a,e)||ds(o+i,a,e)}Object.assign(window,{nearlyEqual:ds,nearlyEqualRad:Lf});function qw(n){return Object.prototype.toString.call(n)==="[object Object]"}function Tf(n){return qw(n)&&!!n.isVector3}function xc(n,t){return ee(this,null,function*(){const[e]=yield hs(n.changeMode(...t));if(e)throw new Error("change mode canceled");yield new Promise(o=>{n.once("initAnimationWillStart",()=>{n.once("initAnimationEnded",()=>o())})});const i=t[1];if(!i)return!0;const s=n.getCurrentState();if(!Kw(i,s))throw new Error("pose 与预期不符")})}function Kw(n,t){return Object.keys(n).every(e=>{const i=t[e],s=n[e];return i===void 0||s===void 0?!0:e==="longitude"||e==="latitude"?Lf(i,s,2):typeof i=="number"&&typeof s=="number"?ds(i,s,2):Tf(s)&&Tf(i)?s.distanceTo(i)<.01:i===s})}function $w(n,t){if(n.currentMode!==t.mode)return!1;const{latitude:e,longitude:i,fov:s,offset:r}=t,{latitude:o,longitude:a,offset:l}=n.getCurrentState(),c=n.camera.fov;return!(!ds(e,o,2)||!ds(i,a,2)||r!==void 0&&r.distanceTo(l)>.01||!ds(s,c,2))}function zf(n,t,e=!0){return ee(this,null,function*(){if($w(n,t)===!0)return;const s=n.getCurrentState();if(s.mode!==t.mode){const[h]=yield hs(xc(n,[t.mode,t,void 0,e]));if(h)throw h;return}const{latitude:r,longitude:o,fov:a}=s,l=Math.min(1e3,Math.max(200,Math.abs(r-Math.PI/2)*1e3,(o>Math.PI?2*Math.PI-o:o)*500,typeof t.fov=="number"?Math.abs(a-t.fov)*10:1/0)),[c]=yield hs(n.updateCamera(ar(t,["mode"]),l,e));if(c)throw new Error(ii.UpdateCameraError)})}function lr(n,t,e=300){var s,r;const i=n.getElement();if(i){i.style.opacity=t+"";for(let o=0;o<((r=(s=i.parentElement)==null?void 0:s.children)==null?void 0:r.length);o++){const a=i.parentElement.children[o];a instanceof HTMLElement&&a.dataset.infive==="1"&&(a.style.opacity=t+"")}i.style.transition=e===0?"none":`opacity ${e}ms linear`,e!==0&&Promise.race([new Promise(o=>i.addEventListener("transitionend",o,{once:!0})),new Promise(o=>setTimeout(o,e))]).then(()=>{i.style.transition="none"})}}function e2(n){const{latitude:t,longitude:e}=n,i=Math.abs(t-Math.PI/2)>5*Math.PI/180,s=e>5*(Math.PI/180)&&e<355*(Math.PI/180);return i||s}function t2(n){const{latitude:t,longitude:e}=n,i=Math.abs(t-Math.PI/2)<10*Math.PI/180,s=e<30*(Math.PI/180)||e>330*(Math.PI/180);return i&&s}let i2=class extends hn{constructor(e,i){var l,c,h;super(e);u(this,"name","modelFloorplanPlugin");u(this,"state");u(this,"data");u(this,"showState");u(this,"showPromise");u(this,"app");u(this,"panoIndex",0);u(this,"floorIndex",0);u(this,"selector");u(this,"showRejection");u(this,"wrapper");u(this,"container",document.createElement("div"));u(this,"lastPanoramaLongitude",0);u(this,"size",{width:0,height:0});u(this,"defaultMissingFloorConfig");u(this,"hasAddedEventListener",!1);u(this,"isHiddenByHideFunc",!1);u(this,"highlightData",{});u(this,"store",{roomOnMouse:null});u(this,"dispose",()=>{var e,i;this.removeEventListener(),(e=this.app)==null||e.$destroy(),this.app=void 0,(i=this.container)==null||i.remove(),this.data=void 0,this.wrapper=void 0,this.selector=void 0,this.hooks.emit("dispose")});u(this,"show",(...i)=>ee(this,[...i],function*(e={}){if(!this.state.enabled||!this.showPromise&&this.state.visible)return;const s=e.userAction!==void 0?e.userAction:!0;this.updateState({visible:!0},s),this._show(e)}));u(this,"hide",(...i)=>ee(this,[...i],function*(e={}){this.state.enabled&&(this.isHiddenByHideFunc=!0,this.state.visible!==!1&&(this.updateState({visible:!1},e.userAction||!0),this._hide(e)))}));u(this,"updateSize",()=>{if(!this.data||!this.container||!this.wrapper)return!1;const{min:e,max:i}=this.data.bounding,s=i.x-e.x,r=i.y-e.y,o=this.state.config.attachedTo?{attachedTo:this.state.config.attachedTo}:void 0,a=Ec(this.five,this.wrapper,this.floorIndex,o),l=Math.ceil(s*a),c=Math.ceil(r*a);return this.size.width===l&&this.size.height===c||(this.container.style.width=l+"px",this.container.style.height=c+"px",this.size={width:l,height:c}),!0});u(this,"highlight",e=>{this.state.config.highlightEnable&&(this.highlightData=e,this.render())});u(this,"unhighlight",()=>{this.highlightData={},this.render()});u(this,"_disable",e=>{var s,r,o;const{userAction:i}=e;this.hooks.emit("disable",{userAction:i}),(s=this.showRejection)==null||s.call(this,ii.BreakOffByDisable),this.showPromise=void 0,(r=this.app)==null||r.$destroy(),this.app=void 0,(o=this.container)==null||o.remove(),this.removeEventListener()});u(this,"_enable",e=>{const{userAction:i}=e;this.addEventListener(),this.wrapper&&(this.wrapper.append(this.container),this.hooks.emit("enable",{userAction:i}),this.state.visible&&this._show({userAction:i}))});u(this,"_show",e=>ee(this,null,function*(){var o;if(!this.state.enabled)return;if(!((o=this.five.model)!=null&&o.loaded))throw new Error(ii.ModelNotLoaded);if(!this.data)throw new Error(ii.DataNotLoaded);if(this.showPromise)return this.showPromise;const i={floorIndex:this.floorIndex,modelOpacity:this.state.config.modelOpacity,immediately:!1,isAutoShow:!1,userAction:!0},s=F(F({},i),e),r=()=>ee(this,null,function*(){this.hooks.emit("show",{userAction:s.userAction,auto:s.isAutoShow});let a=!1,l;this.showRejection=d=>{a=!0,l=d};const[c]=yield hs(zf(this.five,this.showState,s.userAction));if(c)throw c;if(a)throw l?new Error(l):new Error(ii.UnknownError);if(!this.updateSize())throw new Error(ii.UpdateSizeError);this.floorIndex=s.floorIndex,this.five.model.show(this.floorIndex)});return this.isHiddenByHideFunc=!1,this.showPromise=r().then(()=>{this.showPromise=void 0,this.showRejection=void 0;const a=s.modelOpacity,l=s.immediately?0:Sf;lr(this.five,a,l),this.render(l),this.hooks.emit("showAnimationEnded",{auto:s.isAutoShow,userAction:s.userAction})}).catch(a=>{if(this.showPromise=void 0,this.showRejection=void 0,this.updateState({visible:!1},s.userAction),!s.isAutoShow&&a instanceof Error)throw a}),this.showPromise}));u(this,"_hide",e=>{var r;(r=this.showRejection)==null||r.call(this,ii.BreakOffByHide),this.showPromise=void 0;const s=F(F({},{userAction:!0,isAutoHide:!1}),e);lr(this.five,1,0),this.hooks.emit("hide",{auto:s.isAutoHide,userAction:s.userAction}),this.render()});u(this,"handleClick",()=>{if(!this.state.visible)return;if(this.hooks.emit("click",this.store.roomOnMouse))return!1});u(this,"onFiveModelLoaded",()=>{if(this.state.enabled===!1||this.wrapper||!this.selector)return;const e=this.selector instanceof Element?this.selector:document.querySelector(this.selector);if(!e)throw new Error("不正确的父容器选择器");this.wrapper=e,e.append(this.container)});u(this,"onFiveModeChange",e=>{e!==this.showState.mode&&(this.updateState({visible:!1},!1),this._hide({userAction:!1}))});u(this,"onFiveInteriaPan",(e,i)=>{if(!i||this.state.config.autoShowEnable===!1||this.isHiddenByHideFunc)return;const s=this.five.getCurrentState();s.mode==="Floorplan"&&(this.state.visible||t2(s)&&(this.updateState({visible:!0},!0),this._show({isAutoShow:!0})))});u(this,"onFivePanoArrived",e=>{var i;(i=this.five)!=null&&i.work&&(this.panoIndex=e,this.floorIndex=this.workUtil.observers[e].floorIndex)});u(this,"onFiveCameraUpdate",(e,i)=>{if(!this.state.visible||this.showPromise)return;const s=this.five.getCurrentState();e2(s)&&(this.updateState({visible:!1},i),this._hide({userAction:i,isAutoHide:!0}))});u(this,"onFiveWantsGesture",(e,i)=>{if(this.state.visible&&(i.length>1||e==="mouseWheel"))return!1});u(this,"onFiveWantsPanGesture",(e,i)=>{if(this.five.getCurrentState().mode==="Floorplan"&&this.state.config.autoShowEnable!==!1&&i&&this.state.visible)return this.five.updateCamera(this.showState,0),!1});u(this,"onFiveWantsTapGesture",()=>this.handleClick());u(this,"onFiveWantsChangeMode",(e,i)=>{i==="Panorama"&&e==="Floorplan"&&(this.lastPanoramaLongitude=this.five.getCurrentState().longitude)});u(this,"onModelShownFloorChange",e=>{if(this.floorIndex!==e){if(e===null){const i=this.five.getCurrentState().panoIndex;this.floorIndex=this.workUtil.observers[i].floorIndex;return}this.floorIndex=e,this.updateSize(),this.render()}});i!=null&&i.selector&&(this.selector=i.selector,console.warn("不推荐继续使用 params.selector 配置父容器，请使用 appendTo 方法")),this.showState={mode:"Floorplan",longitude:0,latitude:Math.PI/2,fov:Jw/((l=i==null?void 0:i.scale)!=null?l:1)},this.defaultMissingFloorConfig={imageURL:this.staticPrefix+"/release/web/saas/missing-floorplan.e274c596.png",imageWidth:200,imageHeight:120,text:(h=(c=i.i18n)==null?void 0:c.call(i,"暂无平面图"))!=null?h:"暂无平面图",textFontSize:14};const s={northDesc:"北",modelOpacity:1,cameraEnable:!0,highlightEnable:!1,hoverEnable:!0,compassEnable:!0,autoShowEnable:!0,ruleLabelsEnable:!0,roomLabelsEnable:!0,roomAreaEnable:!0,roomNameEnable:!0,roomNameOtherTypeEnable:!0,roomDimensionEnable:!0,adaptiveRoomLabelVisibleEnable:!0,cameraImageUrl:jn,attachedTo:zn.BOUNDING_CENTER,getLabelElement:void 0,missingFloorConfig:F(F({},this.defaultMissingFloorConfig),i.missingFloorConfig),i18n:d=>d,getRoomAreaText:d=>(d/1e6).toFixed(1)+"㎡",getRoomDimensionText:(d,f)=>(d/1e3).toFixed(1)+"m × "+(f/1e3).toFixed(1)+"m",getRuleDistanceText:d=>d.toString()},r=i?ar(i,["selector","scale"]):{},o=F(F({},s.missingFloorConfig),r.missingFloorConfig),a=fe(F(F({},s),r),{missingFloorConfig:o});this.state={enabled:!0,visible:!1,config:a},this.initContainer(),e.once("dispose",this.dispose),this.addEventListener()}load(e,i,s=!0){return ee(this,null,function*(){function r(h){return Object.prototype.hasOwnProperty.apply(h,["version"])}const o=e;o&&ei(o.version)&&console.warn("传入 serverData.data 的方式后续可能不再支持，请把 serverData 整体传入 load 函数");const a=JSON.parse(JSON.stringify(e)),l=r(a)?a.data:a,c=this.data;this.data=yield Vn(l),this.hooks.emit("dataLoaded",this.data),this.hooks.emit("dataChange",this.data,c),i&&this.updateState(i,s),this.render()})}appendTo(e){if(this.wrapper=e,!!this.state.enabled)return e.appendChild(this.container),this.render(),this}enable(e={}){if(this.state.enabled)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({enabled:!0},e.userAction||i),this._enable({userAction:i})}disable(e={}){if(!this.state.enabled)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({enabled:!1},e.userAction||i),this._disable({userAction:i})}setState(e,i={}){const s=this.state,r=i.userAction!==void 0?i.userAction:!0;if(this.updateState(e,r),e.enabled!==void 0&&s.enabled!==e.enabled&&(e.enabled?this._enable({userAction:r}):this._disable({userAction:r})),e.visible!==void 0&&s.visible!==e.visible){const o={userAction:r};e.visible?this._show(o):this._hide(o)}this.render()}changeConfigs(e,i=!0){this.updateState({config:e},i),this.render()}formatData(e){return ee(this,null,function*(){return yield Vn(e.data)})}updateState(e,i){var a;const s=this.state,r=(a=e.config)!=null&&a.missingFloorConfig?F(F({},s.config.missingFloorConfig),e.config.missingFloorConfig):s.config.missingFloorConfig,o=e.config?fe(F(F({},s.config),e.config),{missingFloorConfig:r}):s.config;this.state=fe(F(F({},this.state),e),{config:o}),!Nt(this.state,s,{deep:!0})&&this.hooks.emit("stateChange",{state:this.state,prevState:s,userAction:i})}initContainer(){this.container.classList.add("floorplan-plugin"),Object.assign(this.container.style,{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:10,pointerEvents:"none"}),this.five.addExtraElement(this.container)}addEventListener(){if(!this.state.enabled||this.hasAddedEventListener)return;const e=this.five;e.model.loaded?this.onFiveModelLoaded():e.once("modelLoaded",this.onFiveModelLoaded),e.on("modeChange",this.onFiveModeChange),e.on("interiaPan",this.onFiveInteriaPan),e.on("panoArrived",this.onFivePanoArrived),e.on("cameraUpdate",this.onFiveCameraUpdate),e.on("wantsGesture",this.onFiveWantsGesture),e.on("wantsPanGesture",this.onFiveWantsPanGesture),e.on("wantsTapGesture",this.onFiveWantsTapGesture),e.on("wantsChangeMode",this.onFiveWantsChangeMode),e.on("modelShownFloorChange",this.onModelShownFloorChange)}removeEventListener(){const e=this.five;this.hasAddedEventListener=!1,e.off("modelLoaded",this.onFiveModelLoaded),e.off("modeChange",this.onFiveModeChange),e.off("interiaPan",this.onFiveInteriaPan),e.off("panoArrived",this.onFivePanoArrived),e.off("cameraUpdate",this.onFiveCameraUpdate),e.off("wantsGesture",this.onFiveWantsGesture),e.off("wantsPanGesture",this.onFiveWantsPanGesture),e.off("wantsTapGesture",this.onFiveWantsTapGesture),e.off("wantsChangeMode",this.onFiveWantsChangeMode),e.off("modelShownFloorChange",this.onModelShownFloorChange)}render(e){if(!this.state.enabled||!this.container||!this.data||this.size.width===0||this.showPromise)return;const i=fe(F({},this.state.config),{visible:this.state.visible,duration:e!=null?e:0,panoIndex:this.panoIndex,floorIndex:this.floorIndex,floorplanData:this.data,lastPanoramaLongitude:this.lastPanoramaLongitude,highlightData:this.highlightData,store:this.store});if(this.app)return this.app.$set(i);this.app=new Mc({target:this.container,intro:!0,props:i})}};const n2=(n,t)=>new i2(n,t),Of=[{type:0,description:"车-2",href:"resource/items/{{ theme }}/car_2.png",width:4200,height:1800,tag:"其他",direction:3,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:1,description:"车-1",href:"resource/items/{{ theme }}/car_1.png",width:1900,height:4300,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:2,description:"中厨-1",href:"resource/items/{{ theme }}/kitchen_1.png",width:3158,height:1400,tag:"厨房",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:3,description:"8人餐桌",href:"resource/items/{{ theme }}/table_for_8.png",width:3240,height:1800,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:4,description:"衣柜-1",href:"resource/items/{{ theme }}/wardrobe_1.png",width:1820,height:600,tag:"卧室",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:5,description:"浴缸-2",href:"resource/items/{{ theme }}/bathtub_2.png",width:1500,height:694,tag:"卫生间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:6,description:"衣柜-3",href:"resource/items/{{ theme }}/wardrobe_3.png",width:2830,height:600,tag:"卧室",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:7,description:"植物-4",href:"resource/items/{{ theme }}/plant_4.png",width:700,height:628,tag:"装饰类",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:8,description:"植物-1",href:"resource/items/{{ theme }}/plant_1.png",width:700,height:565,tag:"装饰类",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:9,description:"植物-6",href:"resource/items/{{ theme }}/plant_6.png",width:800,height:758,tag:"装饰类",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:10,description:"书桌-1",href:"resource/items/{{ theme }}/desk_1.png",width:1200,height:930,tag:"书房",direction:0,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:11,description:"瓶艺-1",href:"resource/items/{{ theme }}/bottle_art_1.png",width:530,height:520,tag:"装饰类",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:12,description:"衣柜-2",href:"resource/items/{{ theme }}/wardrobe_2.png",width:2310,height:600,tag:"卧室",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:13,description:"植物-2",href:"resource/items/{{ theme }}/plant_2.png",width:600,height:600,tag:"装饰类",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:14,description:"西厨-1",href:"resource/items/{{ theme }}/western_kitchen_1.png",width:2180,height:550,tag:"厨房",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:15,description:"西厨-2",href:"resource/items/{{ theme }}/western_kitchen_2.png",width:1480,height:550,tag:"厨房",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:16,description:"浴缸-1",href:"resource/items/{{ theme }}/bathtub_1.png",width:1500,height:956,tag:"卫生间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:17,description:"植物-3",href:"resource/items/{{ theme }}/plant_3.png",width:700,height:639,tag:"装饰类",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:18,description:"书桌-2",href:"resource/items/{{ theme }}/desk_2.png",width:2200,height:2470,tag:"书房",direction:3,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:19,description:"吧台",href:"resource/items/{{ theme }}/bar_counter.png",width:1800,height:1130,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:20,description:"书柜-短",href:"resource/items/{{ theme }}/bookcase_short.png",width:1460,height:350,tag:"书房",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:21,description:"鞋柜-长",href:"resource/items/{{ theme }}/shoe_cabinet_long.png",width:2059,height:550,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:22,description:"鞋柜-短",href:"resource/items/{{ theme }}/shoe_cabinet_short.png",width:1308,height:550,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:23,description:"中厨-2",href:"resource/items/{{ theme }}/kitchen_2.png",width:2020,height:650,tag:"厨房",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:24,description:"椅子",href:"resource/items/{{ theme }}/chair.png",width:1050,height:950,tag:"客厅",direction:1,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:25,description:"秋千",href:"resource/items/{{ theme }}/swing.png",width:1600,height:1370,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:26,description:"茶几",href:"resource/items/{{ theme }}/tea_table.png",width:1090,height:800,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:27,description:"庭院",href:"resource/items/{{ theme }}/courtyard.png",width:2100,height:3020,tag:"其他",direction:3,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:28,description:"躺椅",href:"resource/items/{{ theme }}/deck_chair.png",width:900,height:1850,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:29,description:"钢琴",href:"resource/items/{{ theme }}/piano.png",width:1900,height:2260,tag:"其他",direction:0,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:30,description:"音响",href:"resource/items/{{ theme }}/sound.png",width:2500,height:550,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:31,description:"马桶",href:"resource/items/{{ theme }}/flush_toilet.png",width:450,height:750,tag:"卫生间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:32,description:"植物-5",href:"resource/items/{{ theme }}/plant_5.png",width:544,height:600,tag:"装饰类",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:33,description:"书柜-长",href:"resource/items/{{ theme }}/bookcase_long.png",width:2040,height:350,tag:"书房",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:34,description:"燃气灶-1",href:"resource/items/{{ theme }}/gas_stove_1.png",width:820,height:450,tag:"厨房",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:35,description:"洗脸池-单",href:"resource/items/{{ theme }}/wash_basin_single.png",width:1150,height:500,tag:"卫生间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:36,description:"洗手池-单",href:"resource/items/{{ theme }}/sink_single.png",width:1200,height:500,tag:"卫生间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:37,description:"双人床-4",href:"resource/items/{{ theme }}/double_4.png",width:2743,height:2e3,tag:"卧室",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:38,description:"电视柜-短",href:"resource/items/{{ theme }}/tv_cabinet_short.png",width:1580,height:350,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:39,description:"储物柜-1",href:"resource/items/{{ theme }}/locker_1.png",width:1400,height:600,tag:"储物间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:40,description:"双人床-3",href:"resource/items/{{ theme }}/double_3.png",width:2791,height:2300,tag:"卧室",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:41,description:"双人床-2",href:"resource/items/{{ theme }}/double_2.png",width:2791,height:2300,tag:"卧室",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:42,description:"洗手池-双",href:"resource/items/{{ theme }}/sink_double.png",width:2777,height:600,tag:"卫生间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:43,description:"洗脸池-双",href:"resource/items/{{ theme }}/wash_basin_double.png",width:2550,height:600,tag:"卫生间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:44,description:"双人床（无床头柜）-1",href:"resource/items/{{ theme }}/double_bed_without_bedside_table_1.png",width:1914,height:2e3,tag:"卧室",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:45,description:"电视柜-长",href:"resource/items/{{ theme }}/tv_cabinet_long.png",width:2040,height:350,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:46,description:"洽谈桌组合",href:"resource/items/{{ theme }}/negotiation_table_combination.png",width:2830,height:950,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:47,description:"哑铃架",href:"resource/items/{{ theme }}/dumbbell_rack.png",width:900,height:650,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:48,description:"沙发组合-1",href:"resource/items/{{ theme }}/sofa_combination_1.png",width:4e3,height:2792,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:49,description:"游泳池-2",href:"resource/items/{{ theme }}/swimming_pool_2.png",width:7680,height:3800,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:50,description:"美人榻",href:"resource/items/{{ theme }}/beauty_couch.png",width:1600,height:520,tag:"卧室",direction:1,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:51,description:"单人床（无床头柜）",href:"resource/items/{{ theme }}/single_bed_without_bedside_table.png",width:1200,height:2120,tag:"卧室",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:52,description:"沙发组合-2",href:"resource/items/{{ theme }}/sofa_combination_2.png",width:2e3,height:2054,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:53,description:"跑步机",href:"resource/items/{{ theme }}/treadmill.png",width:2120,height:950,tag:"其他",direction:1,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:54,description:"储物柜-3",href:"resource/items/{{ theme }}/lockers_3.png",width:2400,height:1360,tag:"储物间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:55,description:"洗菜池-1",href:"resource/items/{{ theme }}/vegetable_washing_pool_1.png",width:760,height:470,tag:"厨房",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:56,description:"组合沙发-4",href:"resource/items/{{ theme }}/combination_sofa_4.png",width:1800,height:1595,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:57,description:"台球桌",href:"resource/items/{{ theme }}/pool_table.png",width:2540,height:1400,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:58,description:"置物台-1",href:"resource/items/{{ theme }}/shelf_1.png",width:1632,height:560,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:59,description:"储物柜-2",href:"resource/items/{{ theme }}/locker_2.png",width:2640,height:600,tag:"储物间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:60,description:"户外桌椅",href:"resource/items/{{ theme }}/outdoor_tables_and_chairs.png",width:3e3,height:2800,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:61,description:"洗衣机-1",href:"resource/items/{{ theme }}/washing_machine_1.png",width:850,height:600,tag:"卫生间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:62,description:"双人床-1",href:"resource/items/{{ theme }}/double_1.png",width:2851,height:2200,tag:"卧室",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:63,description:"六人餐桌",href:"resource/items/{{ theme }}/table_for_six.png",width:2230,height:1700,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:64,description:"洽谈沙发椅",href:"resource/items/{{ theme }}/sofa_chair.png",width:1e3,height:950,tag:"其他",direction:1,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:65,description:"三人沙发",href:"resource/items/{{ theme }}/three_seat_sofa.png",width:2670,height:950,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:66,description:"会客桌",href:"resource/items/{{ theme }}/reception_table.png",width:1800,height:1800,tag:"其他",direction:1,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:67,description:"健身机",href:"resource/items/{{ theme }}/fitness_machine.png",width:2200,height:800,tag:"其他",direction:1,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:68,description:"沙发组合-3",href:"resource/items/{{ theme }}/sofa_combination_3.png",width:2670,height:2330,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:69,description:"双开冰箱",href:"resource/items/{{ theme }}/double_refrigerator.png",width:720,height:600,tag:"厨房",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:70,description:"车库工具箱",href:"resource/items/{{ theme }}/garage_toolbox.png",width:1280,height:500,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:71,description:"储物柜-4",href:"resource/items/{{ theme }}/locker_4.png",width:2440,height:2440,tag:"储物间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:72,description:"临时餐台",href:"resource/items/{{ theme }}/temporary_dining_table.png",width:1e3,height:1500,tag:"厨房",direction:1,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:73,description:"置物台-2",href:"resource/items/{{ theme }}/shelf_2.png",width:1590,height:600,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:74,description:"四人餐桌",href:"resource/items/{{ theme }}/table_for_four.png",width:1700,height:1700,tag:"客厅",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:75,description:"洽谈桌",href:"resource/items/{{ theme }}/negotiating_table.png",width:950,height:950,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:76,description:"游泳池-1",href:"resource/items/{{ theme }}/swimming_pool_1.png",width:4300,height:5340,tag:"其他",direction:1,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:77,description:"毛巾凳",href:"resource/items/{{ theme }}/towel_stool.png",width:800,height:500,tag:"卫生间",direction:0,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:78,description:"电梯",href:"resource/items/{{ theme }}/lift.png",width:2e3,height:2e3,tag:"楼梯",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:79,description:"AC",href:"resource/items/{{ theme }}/ac.png",width:850,height:320,tag:"其他",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:80,description:"二人餐桌",href:"resource/items/{{ theme }}/table_for_two.png",width:780,height:1500,tag:"客厅",direction:1,keywords:["default"],themes:["realsee"],label:!0},{type:81,description:"双人床（无床头柜）-2",href:"resource/items/{{ theme }}/double_bed_without_bedside_table_2.png",width:1500,height:2200,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:82,description:"双人床（无床头柜）-3",href:"resource/items/{{ theme }}/double_bed_without_bedside_table_3.png",width:1800,height:2200,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:83,description:"床头柜",href:"resource/items/{{ theme }}/bedstand.png",width:500,height:500,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:84,description:"单开门冰箱",href:"resource/items/{{ theme }}/refrigerator.png",width:650,height:670,tag:"厨房",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:85,description:"沙发组合-5",href:"resource/items/{{ theme }}/sofa_combination_5.png",width:1598,height:1418,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:86,description:"沙发组合-6",href:"resource/items/{{ theme }}/sofa_combination_6.png",width:2680,height:1790,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:87,description:"四人餐桌-1",href:"resource/items/{{ theme }}/table_for_four_1.png",width:1600,height:1700,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:88,description:"小单人沙发",href:"resource/items/{{ theme }}/chair_2.png",width:460,height:416,tag:"客厅",direction:1,keywords:["default"],themes:["realsee"],label:!0},{type:89,description:"小洗手池",href:"resource/items/{{ theme }}/sink_small.png",width:600,height:500,tag:"卫生间",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:90,description:"小厨",href:"resource/items/{{ theme }}/kitchen_small.png",width:740,height:550,tag:"厨房",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:91,description:"小衣柜",href:"resource/items/{{ theme }}/wardrobe_small.png",width:910,height:600,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:92,description:"淋浴房",href:"resource/items/{{ theme }}/shower.png",width:650,height:670,tag:"卫生间",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:93,description:"鞋柜-1",href:"resource/items/{{ theme }}/shoe_cabinet_1.png",width:900,height:400,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:94,description:"鞋柜-2",href:"resource/items/{{ theme }}/shoe_cabinet_2.png",width:1500,height:400,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:95,description:"鞋柜-3",href:"resource/items/{{ theme }}/shoe_cabinet_3.png",width:2e3,height:400,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:96,description:"电视柜-1",href:"resource/items/{{ theme }}/tv_cabinet_1.png",width:1500,height:350,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:97,description:"电视柜-2",href:"resource/items/{{ theme }}/tv_cabinet_2.png",width:2040,height:350,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:98,description:"电视柜-3",href:"resource/items/{{ theme }}/tv_cabinet_3.png",width:3e3,height:350,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:99,description:"餐边柜-1",href:"resource/items/{{ theme }}/sideboard_1.png",width:900,height:550,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:100,description:"餐边柜-2",href:"resource/items/{{ theme }}/sideboard_2.png",width:1500,height:550,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:101,description:"餐边柜-3",href:"resource/items/{{ theme }}/sideboard_3.png",width:2e3,height:550,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:102,description:"燃气灶-2",href:"resource/items/{{ theme }}/gas_stove_2.png",width:900,height:550,tag:"厨房",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:103,description:"洗菜池-2",href:"resource/items/{{ theme }}/vegetable_washing_pool_2.png",width:900,height:550,tag:"厨房",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:104,description:"橱柜-1",href:"resource/items/{{ theme }}/kitchen_cabinet_1.png",width:550,height:550,tag:"厨房",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:105,description:"橱柜-2",href:"resource/items/{{ theme }}/kitchen_cabinet_2.png",width:900,height:550,tag:"厨房",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:106,description:"花洒",href:"resource/items/{{ theme }}/shower_head.png",width:260,height:200,tag:"卫生间",direction:1,keywords:["default"],themes:["realsee"],label:!0},{type:107,description:"淋浴屏",href:"resource/items/{{ theme }}/shower_panel.png",width:1500,height:100,tag:"卫生间",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:108,description:"洗衣机-2",href:"resource/items/{{ theme }}/washing_machine_2.png",width:600,height:500,tag:"卫生间",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:109,description:"双人床-5",href:"resource/items/{{ theme }}/double_5.png",width:1500,height:2e3,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:110,description:"双人床-6",href:"resource/items/{{ theme }}/double_6.png",width:1800,height:2e3,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:111,description:"双人床-7",href:"resource/items/{{ theme }}/double_7.png",width:2e3,height:2200,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:112,description:"双人床-8",href:"resource/items/{{ theme }}/double_8.png",width:2300,height:2200,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:113,description:"梳妆台",href:"resource/items/{{ theme }}/dressing_table.png",width:1200,height:900,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:114,description:"儿童床-1",href:"resource/items/{{ theme }}/children_bed_1.png",width:1400,height:2e3,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:115,description:"儿童床-2",href:"resource/items/{{ theme }}/children_bed_2.png",width:1700,height:2e3,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:116,description:"儿童床-3",href:"resource/items/{{ theme }}/children_bed_3.png",width:2e3,height:2200,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:117,description:"儿童书桌-1",href:"resource/items/{{ theme }}/children_desk_1.png",width:1e3,height:800,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:118,description:"儿童书桌-2",href:"resource/items/{{ theme }}/children_desk_2.png",width:1200,height:800,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:119,description:"儿童书桌-3",href:"resource/items/{{ theme }}/children_desk_3.png",width:1500,height:800,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:120,description:"儿童活动区域-1",href:"resource/items/{{ theme }}/children_carpet_1.png",width:600,height:600,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:121,description:"儿童活动区域-2",href:"resource/items/{{ theme }}/children_carpet_2.png",width:1200,height:1200,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:122,description:"儿童活动区域-3",href:"resource/items/{{ theme }}/children_carpet_3.png",width:1800,height:1800,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:123,description:"茶榻组合-1",href:"resource/items/{{ theme }}/tea_table_combination_1.png",width:2e3,height:1400,tag:"其他",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:124,description:"茶榻组合-2",href:"resource/items/{{ theme }}/tea_table_combination_2.png",width:2500,height:1400,tag:"其他",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:125,description:"茶榻组合-3",href:"resource/items/{{ theme }}/tea_table_combination_3.png",width:3e3,height:1800,tag:"其他",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:126,description:"儿童衣柜-1",href:"resource/items/{{ theme }}/children_wardrobe_1.png",width:900,height:500,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:127,description:"儿童衣柜-2",href:"resource/items/{{ theme }}/children_wardrobe_2.png",width:1200,height:500,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:128,description:"儿童衣柜-3",href:"resource/items/{{ theme }}/children_wardrobe_3.png",width:1500,height:500,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:129,description:"儿童书柜-1",href:"resource/items/{{ theme }}/children_bookcase_1.png",width:800,height:450,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:130,description:"儿童书柜-2",href:"resource/items/{{ theme }}/children_bookcase_2.png",width:1200,height:450,tag:"卧室",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:131,description:"折行双跑楼梯",href:"resource/items/{{ theme }}/folding_double_running_stairs.png",width:3e3,height:3e3,tag:"楼梯",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:132,description:"平行双跑楼梯",href:"resource/items/{{ theme }}/parallel_double_running_stairs.png",width:2500,height:3600,tag:"楼梯",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:133,description:"折行三跑楼梯",href:"resource/items/{{ theme }}/folding_treble_running_stairs.png",width:4300,height:2700,tag:"楼梯",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!0},{type:134,description:"手枪",href:"resource/items/{{ theme }}/pistol.png",width:500,height:500,tag:"物证痕迹",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!1},{type:135,description:"血迹",href:"resource/items/{{ theme }}/bloodstain.png",width:500,height:500,tag:"物证痕迹",direction:2,keywords:["default"],themes:["legacy","realsee"],label:!1},{type:136,description:"手印",href:"resource/items/{{ theme }}/handprint.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["legacy","realsee"],label:!1},{type:137,description:"足迹",href:"resource/items/{{ theme }}/footprint.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["legacy","realsee"],label:!1},{type:138,description:"车轮轨迹",href:"resource/items/{{ theme }}/wheelprint.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["legacy","realsee"],label:!1},{type:139,description:"弹头",href:"resource/items/{{ theme }}/bullet.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["legacy","realsee"],label:!1},{type:140,description:"弹壳",href:"resource/items/{{ theme }}/shell.png",width:500,height:500,tag:"物证痕迹",direction:1,keywords:["default"],themes:["legacy","realsee"],label:!1},{type:141,description:"尸体",href:"resource/items/{{ theme }}/corpse.png",width:1500,height:1500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["legacy","realsee"],label:!1},{type:142,description:"空气净化器",href:"resource/items/{{ theme }}/airscrubber.png",width:580,height:380,tag:"其他",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:143,description:"吹风机",href:"resource/items/{{ theme }}/airblower.png",width:640,height:600,tag:"其他",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:144,description:"除湿器",href:"resource/items/{{ theme }}/dehumidifier.png",width:480,height:430,tag:"其他",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:145,description:"冰柜",href:"resource/items/{{ theme }}/freezer.png",width:800,height:460,tag:"厨房",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:146,description:"架子",href:"resource/items/{{ theme }}/shelf.png",width:1e3,height:380,tag:"其他",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:147,description:"杂物",href:"resource/items/{{ theme }}/sundries.png",width:800,height:800,tag:"其他",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:148,description:"L型沙发",href:"resource/items/{{ theme }}/L_sofa.png",width:3500,height:1800,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:149,description:"书桌3",href:"resource/items/{{ theme }}/desk_3.png",width:1200,height:680,tag:"书房",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:150,description:"会议桌-1",href:"resource/items/{{ theme }}/conference_table_1.png",width:1600,height:1100,tag:"客厅",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:151,description:"衣架",href:"resource/items/{{ theme }}/coat_hanger.png",width:1200,height:400,tag:"卧室",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:152,description:"上下铺",href:"resource/items/{{ theme }}/bunk_beds.png",width:2e3,height:1040,tag:"卧室",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:153,description:"蹲坑",href:"resource/items/{{ theme }}/squatting.png",width:600,height:480,tag:"卫生间",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:154,description:"男尸",href:"resource/items/{{ theme }}/male_corpse.png",width:1600,height:800,tag:"物证痕迹",direction:1,keywords:["default"],themes:["realsee"],label:!1},{type:155,description:"女尸",href:"resource/items/{{ theme }}/female_corpse.png",width:1500,height:800,tag:"物证痕迹",direction:1,keywords:["default"],themes:["realsee"],label:!1},{type:156,description:"擦蹭状血迹",href:"resource/items/{{ theme }}/rub-like-bookd-stains.png",width:1200,height:800,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:157,description:"擦拭物",href:"resource/items/{{ theme }}/wipes.png",width:300,height:60,tag:"物证痕迹",direction:3,keywords:["default"],themes:["realsee"],label:!1},{type:158,description:"纸团",href:"resource/items/{{ theme }}/paper_ball.png",width:400,height:400,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:159,description:"未整理的被子",href:"resource/items/{{ theme }}/unarranged_quilts.png",width:800,height:500,tag:"其他",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:160,description:"手机",href:"resource/items/{{ theme }}/mobile_phone.png",width:400,height:280,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:161,description:"菜刀",href:"resource/items/{{ theme }}/kitchen_knife.png",width:500,height:220,tag:"物证痕迹",direction:3,keywords:["default"],themes:["realsee"],label:!1},{type:162,description:"矩形",href:"resource/items/{{ theme }}/rectangle.png",width:900,height:600,tag:"自定义",direction:0,keywords:["default"],themes:["realsee"],label:!0,svgWidth:90,svgHeight:60,svg:'<rect x=".75" y=".75" width="88.5" height="58.5" rx="4" fill="#FFF" stroke="#3D404E" fill-rule="evenodd" vector-effect="non-scaling-stroke"/>'},{type:163,description:"圆形",href:"resource/items/{{ theme }}/circle.png",width:600,height:600,tag:"自定义",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:164,description:"三角形",href:"resource/items/{{ theme }}/triangle.png",width:600,height:600,tag:"自定义",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:165,description:"五角星形",href:"resource/items/{{ theme }}/five_pointedstar.png",width:800,height:800,tag:"自定义",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:166,description:"会议桌-2",href:"resource/items/{{ theme }}/conference_table_2.png",width:2800,height:1800,tag:"客厅",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:167,description:"餐椅",href:"resource/items/{{ theme }}/dining_chair.png",width:500,height:580,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:168,description:"转椅-1",href:"resource/items/{{ theme }}/rotating_chair_1.png",width:500,height:580,tag:"书房",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:169,description:"转椅-2",href:"resource/items/{{ theme }}/rotating_chair_2.png",width:640,height:640,tag:"书房",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:170,description:"长方形茶几",href:"resource/items/{{ theme }}/rectangular_coffee_table.png",width:1090,height:800,tag:"客厅",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:171,description:"抽油烟机",href:"resource/items/{{ theme }}/smoke_lampblack_machine.png",width:1200,height:800,tag:"厨房",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:172,description:"电话机",href:"resource/items/{{ theme }}/telephone.png",width:500,height:500,tag:"日常用品",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:173,description:"对讲机",href:"resource/items/{{ theme }}/walkie_talkie.png",width:240,height:540,tag:"日常用品",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:174,description:"花盆",href:"resource/items/{{ theme }}/flower_pot.png",width:500,height:500,tag:"其他",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:175,description:"剪刀",href:"resource/items/{{ theme }}/scissors.png",width:500,height:460,tag:"日常用品",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:176,description:"角柜",href:"resource/items/{{ theme }}/corner_cabinet.png",width:1e3,height:1e3,tag:"其他",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:177,description:"口杯",href:"resource/items/{{ theme }}/mouth_cup.png",width:500,height:400,tag:"日常用品",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:178,description:"盘子",href:"resource/items/{{ theme }}/plate.png",width:500,height:500,tag:"日常用品",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:179,description:"勺子",href:"resource/items/{{ theme }}/spoon.png",width:600,height:180,tag:"日常用品",direction:1,keywords:["default"],themes:["realsee"],label:!1},{type:180,description:"手提包",href:"resource/items/{{ theme }}/handbag.png",width:500,height:500,tag:"日常用品",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:181,description:"双人沙发",href:"resource/items/{{ theme }}/double_sofa.png",width:1600,height:850,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:182,description:"藤椅",href:"resource/items/{{ theme }}/cane_chair.png",width:640,height:640,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!0},{type:183,description:"拖把",href:"resource/items/{{ theme }}/mop.png",width:490,height:1e3,tag:"日常用品",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:184,description:"卫生纸",href:"resource/items/{{ theme }}/toilet_paper.png",width:280,height:300,tag:"日常用品",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:185,description:"烟盒",href:"resource/items/{{ theme }}/cigarette_case.png",width:220,height:300,tag:"日常用品",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:186,description:"烟头",href:"resource/items/{{ theme }}/cigarette_butt.png",width:280,height:220,tag:"日常用品",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:187,description:"鱼缸",href:"resource/items/{{ theme }}/fish_tank.png",width:1e3,height:500,tag:"客厅",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:188,description:"笔记本电脑",href:"resource/items/{{ theme }}/notebook_computer.png",width:500,height:500,tag:"日常用品",direction:2,keywords:["default"],themes:["realsee"],label:!1},{type:189,description:"微波炉",href:"resource/items/{{ theme }}/microwave_oven.png",width:600,height:400,tag:"厨房",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:190,description:"断口",href:"resource/items/{{ theme }}/fracture.png",width:1200,height:300,tag:"其他",direction:0,keywords:["default"],themes:["realsee"],label:!0},{type:191,description:"遗物堆",href:"resource/items/{{ theme }}/relic_pile.png",width:800,height:800,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:192,description:"衣物",href:"resource/items/{{ theme }}/clothing.png",width:830,height:810,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:193,description:"浴巾",href:"resource/items/{{ theme }}/bath_towel.png",width:420,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:194,description:"水渍",href:"resource/items/{{ theme }}/water_stains.png",width:1070,height:600,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:195,description:"螺丝刀",href:"resource/items/{{ theme }}/bolt_driver.png",width:300,height:300,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:196,description:"凉鞋",href:"resource/items/{{ theme }}/sandals.png",width:430,height:460,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:197,description:"水果刀",href:"resource/items/{{ theme }}/fruit_knife.png",width:300,height:260,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:198,description:"匕首",href:"resource/items/{{ theme }}/dragger.png",width:400,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:199,description:"玻璃弹孔",href:"resource/items/{{ theme }}/glass_bullet_hole.png",width:1160,height:1e3,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:200,description:"电视",href:"resource/items/{{ theme }}/tv.png",width:1120,height:160,tag:"客厅",direction:2,keywords:["default"],themes:["realsee"],label:!1},{type:201,description:"单向楼梯",href:"resource/items/{{ theme }}/stairs.png",width:1400,height:3600,tag:"楼梯",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:202,description:"电脑",href:"resource/items/{{ theme }}/computer.png",width:700,height:120,tag:"书房",direction:2,keywords:["default"],themes:["realsee"],label:!1},{type:203,description:"工具",href:"resource/items/{{ theme }}/tool.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:204,description:"特殊",href:"resource/items/{{ theme }}/special.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:205,description:"生物",href:"resource/items/{{ theme }}/biology.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:206,description:"毒化",href:"resource/items/{{ theme }}/poison.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:207,description:"理化",href:"resource/items/{{ theme }}/physics&chemistry.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:208,description:"文检",href:"resource/items/{{ theme }}/document.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:209,description:"电子",href:"resource/items/{{ theme }}/electronic.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:210,description:"人像",href:"resource/items/{{ theme }}/portrait.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:211,description:"提取物品",href:"resource/items/{{ theme }}/extract_items.png",width:500,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:212,description:"左脚足迹",href:"resource/items/{{ theme }}/footprint_l.png",width:220,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:213,description:"右脚足迹",href:"resource/items/{{ theme }}/footprint_r.png",width:220,height:500,tag:"物证痕迹",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:214,description:"电动车",href:"resource/items/{{ theme }}/electric_car.png",width:480,height:1320,tag:"交通工具",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:215,description:"自行车",href:"resource/items/{{ theme }}/bike.png",width:380,height:1480,tag:"交通工具",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:216,description:"摩托车",href:"resource/items/{{ theme }}/motorcycle.png",width:500,height:1780,tag:"交通工具",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:217,description:"越野车",href:"resource/items/{{ theme }}/off_road_vehicle.png",width:1700,height:4360,tag:"交通工具",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:218,description:"卡车",href:"resource/items/{{ theme }}/truck.png",width:1880,height:6800,tag:"交通工具",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:219,description:"客车",href:"resource/items/{{ theme }}/bus.png",width:3160,height:8e3,tag:"交通工具",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:220,description:"叉车",href:"resource/items/{{ theme }}/forklift.png",width:940,height:2720,tag:"交通工具",direction:0,keywords:["default"],themes:["realsee"],label:!1},{type:221,description:"拖拉机",href:"resource/items/{{ theme }}/tractor.png",width:1740,height:3060,tag:"交通工具",direction:0,keywords:["default"],themes:["realsee"],label:!1}],s2="//vr-image-4.realsee-cdn.cn/release/static/image/doctorstrange/0.6.201-beta/";function r2(n){const{latitude:t,longitude:e}=n,i=Math.abs(t-Math.PI/2)>5*Math.PI/180,s=e>5*(Math.PI/180)&&e<355*(Math.PI/180);return i||s}function o2(n){const{latitude:t,longitude:e}=n,i=Math.abs(t-Math.PI/2)<10*Math.PI/180,s=e<30*(Math.PI/180)||e>330*(Math.PI/180);return i&&s}let a2=class extends hn{constructor(e,i){var l,c;super(e);u(this,"name","modelFloorplanPlugin");u(this,"state");u(this,"data");u(this,"showState");u(this,"showPromise");u(this,"app");u(this,"panoIndex",0);u(this,"floorIndex",0);u(this,"selector");u(this,"showRejection");u(this,"wrapper");u(this,"container",document.createElement("div"));u(this,"lastPanoramaLongitude",0);u(this,"size",{width:0,height:0});u(this,"defaultMissingFloorConfig");u(this,"hasAddedEventListener",!1);u(this,"isHiddenByHideFunc",!1);u(this,"highlightData",{});u(this,"items");u(this,"store",{roomOnMouse:null});u(this,"dispose",()=>{var e,i;this.removeEventListener(),(e=this.app)==null||e.$destroy(),this.app=void 0,(i=this.container)==null||i.remove(),this.data=void 0,this.wrapper=void 0,this.selector=void 0,this.hooks.emit("dispose")});u(this,"show",(...i)=>ee(this,[...i],function*(e={}){if(!this.state.enabled||!this.showPromise&&this.state.visible)return;const s=e.userAction!==void 0?e.userAction:!0;this.updateState({visible:!0},s),this._show(e)}));u(this,"hide",(...i)=>ee(this,[...i],function*(e={}){this.state.enabled&&(this.isHiddenByHideFunc=!0,this.state.visible!==!1&&(this.updateState({visible:!1},e.userAction||!0),this._hide(e)))}));u(this,"updateSize",()=>{if(!this.data||!this.container||!this.wrapper)return!1;const{min:e,max:i}=this.data.bounding,s=i.x-e.x,r=i.y-e.y,o=this.state.config.attachedTo?{attachedTo:this.state.config.attachedTo}:void 0,a=Ec(this.five,this.wrapper,this.floorIndex,o),l=Math.ceil(s*a),c=Math.ceil(r*a);return this.size.width===l&&this.size.height===c||(this.container.style.width=l+"px",this.container.style.height=c+"px",this.size={width:l,height:c}),!0});u(this,"highlight",e=>{this.state.config.highlightEnable&&(this.highlightData=e,this.render())});u(this,"unhighlight",()=>{this.highlightData={},this.render()});u(this,"_disable",e=>{var s,r,o;const{userAction:i}=e;this.hooks.emit("disable",{userAction:i}),(s=this.showRejection)==null||s.call(this,ii.BreakOffByDisable),this.showPromise=void 0,(r=this.app)==null||r.$destroy(),this.app=void 0,(o=this.container)==null||o.remove(),this.removeEventListener()});u(this,"_enable",e=>{const{userAction:i}=e;this.addEventListener(),this.wrapper&&(this.wrapper.append(this.container),this.hooks.emit("enable",{userAction:i}),this.state.visible&&this._show({userAction:i}))});u(this,"_show",e=>ee(this,null,function*(){var o;if(!this.state.enabled)return;if(!((o=this.fiveUtil.model)!=null&&o.loaded))throw new Error(ii.ModelNotLoaded);if(!this.data)throw new Error(ii.DataNotLoaded);if(this.showPromise)return this.showPromise;const i={floorIndex:this.floorIndex,modelOpacity:this.state.config.modelOpacity,immediately:!1,isAutoShow:!1,userAction:!0},s=F(F({},i),e),r=()=>ee(this,null,function*(){this.hooks.emit("show",{userAction:s.userAction,auto:s.isAutoShow});let a=!1,l;this.showRejection=d=>{a=!0,l=d};const[c]=yield hs(zf(this.five,this.showState,s.userAction));if(c)throw c;if(a)throw l?new Error(l):new Error(ii.UnknownError);if(!this.updateSize())throw new Error(ii.UpdateSizeError);this.updatePosition(),this.floorIndex=s.floorIndex,this.fiveUtil.model.show(this.floorIndex)});return this.isHiddenByHideFunc=!1,this.showPromise=r().then(()=>{this.showPromise=void 0,this.showRejection=void 0;const a=s.modelOpacity,l=s.immediately?0:Sf;lr(this.five,a,l),this.render(l),this.hooks.emit("showAnimationEnded",{auto:s.isAutoShow,userAction:s.userAction})}).catch(a=>{if(this.showPromise=void 0,this.showRejection=void 0,this.updateState({visible:!1},s.userAction),!s.isAutoShow&&a instanceof Error)throw a}),this.showPromise}));u(this,"_hide",e=>{var r;(r=this.showRejection)==null||r.call(this,ii.BreakOffByHide),this.showPromise=void 0;const s=F(F({},{userAction:!0,isAutoHide:!1}),e);lr(this.five,1,0),this.hooks.emit("hide",{auto:s.isAutoHide,userAction:s.userAction}),this.render()});u(this,"handleClick",()=>{if(!this.state.visible)return;if(this.hooks.emit("click",this.store.roomOnMouse))return!1});u(this,"onFiveModelLoaded",()=>{const i=this.five.model.bounding.getCenter(new P.Vector3);if(this.showState.offset=i,this.state.enabled===!1||this.wrapper||!this.selector)return;const s=this.selector instanceof Element?this.selector:document.querySelector(this.selector);if(!s)throw new Error("不正确的父容器选择器");this.wrapper=s,s.append(this.container)});u(this,"onFiveModeChange",e=>{e!==this.showState.mode&&(this.updateState({visible:!1},!1),this._hide({userAction:!1}))});u(this,"onFiveInteriaPan",(e,i)=>{if(!i||this.state.visible||this.state.config.autoShowEnable===!1||this.isHiddenByHideFunc)return;const s=this.five.getCurrentState();s.mode===this.showState.mode&&o2(s)&&(this.updateState({visible:!0},!0),this._show({isAutoShow:!0}))});u(this,"onFivePanoArrived",e=>{var i;(i=this.five)!=null&&i.work&&(this.panoIndex=e,this.floorIndex=this.workUtil.observers[e].floorIndex)});u(this,"onFiveCameraUpdate",(e,i)=>{if(!this.state.visible||this.showPromise)return;const s=this.five.getCurrentState();this.updatePosition(),this.updateSize(),r2(s)&&(this.updateState({visible:!1},i),this._hide({userAction:i}))});u(this,"onFiveWantsPanGesture",(e,i)=>{if(this.five.getCurrentState().mode===this.showState.mode&&this.state.config.autoShowEnable!==!1&&i&&this.state.visible)return this.five.updateCamera(ar(this.showState,["offset"]),0),!1});u(this,"onFiveWantsTapGesture",()=>this.handleClick());u(this,"onFiveWantsChangeMode",(e,i)=>{i==="Panorama"&&e===this.showState.mode&&(this.lastPanoramaLongitude=this.five.getCurrentState().longitude)});u(this,"onModelShownFloorChange",e=>{if(this.floorIndex!==e){if(e===null){const i=this.five.getCurrentState().panoIndex;this.floorIndex=this.workUtil.observers[i].floorIndex;return}this.floorIndex=e,this.updateSize(),this.render()}});i!=null&&i.selector&&(this.selector=i.selector,console.warn("不推荐继续使用 params.selector 配置父容器，请使用 appendTo 方法")),this.showState={mode:"Mapview",longitude:0,latitude:Math.PI/2},this.defaultMissingFloorConfig={imageURL:this.staticPrefix+"/release/web/saas/missing-floorplan.e274c596.png",imageWidth:200,imageHeight:120,text:(c=(l=i.i18n)==null?void 0:l.call(i,"暂无平面图"))!=null?c:"暂无平面图",textFontSize:14};const s={northDesc:"北",modelOpacity:1,cameraEnable:!0,highlightEnable:!1,hoverEnable:!0,compassEnable:!0,autoShowEnable:!0,ruleLabelsEnable:!0,roomLabelsEnable:!0,roomAreaEnable:!0,roomNameEnable:!0,roomNameOtherTypeEnable:!0,roomDimensionEnable:!0,cameraImageUrl:jn,attachedTo:zn.BOUNDING_CENTER,getLabelElement:void 0,adaptiveRoomLabelVisibleEnable:!0,missingFloorConfig:F(F({},this.defaultMissingFloorConfig),i.missingFloorConfig),i18n:h=>h,getRoomAreaText:h=>(h/1e6).toFixed(1)+"㎡",getRoomDimensionText:(h,d)=>(h/1e3).toFixed(1)+"m × "+(d/1e3).toFixed(1)+"m",getRuleDistanceText:h=>h.toString()},r=i?ar(i,["selector","scale"]):{},o=F(F({},s.missingFloorConfig),r.missingFloorConfig),a=fe(F(F({},s),r),{missingFloorConfig:o});this.state={enabled:!0,visible:!1,config:a},this.initContainer(),ai(e).then(this.onFiveModelLoaded),e.once("dispose",this.dispose),this.addEventListener()}load(e,i,s=!0){return ee(this,null,function*(){function r(h){return Object.prototype.hasOwnProperty.apply(h,["version"])}const o=e;o&&ei(o.version)&&console.warn("传入 serverData.data 的方式后续可能不再支持，请把 serverData 整体传入 load 函数");const a=JSON.parse(JSON.stringify(e)),l=r(a)?a.data:a,c=this.data;this.data=yield Vn(l),this.hooks.emit("dataLoaded",this.data),this.hooks.emit("dataChange",this.data,c),i&&this.updateState(i,s),this.render()})}loadItems(e){const{min:i,max:s}=this.data.bounding,r=s.x-i.x,o=s.y-i.y;this.data.floorDatas.forEach((a,l)=>{a.items=e[l].filter(c=>c.displayName==="Item-SimpleItem").map(c=>{const{x:h,y:d,width:f,height:g,notes:p,type:m,id:v,rotateX:b,rotateY:w,rotateZ:x=0}=c;return{id:v,positionInImage:{x:(h-i.x)/r,y:(s.y-d)/o},width:f/r,height:g/o,src:s2+Of[m].href.replace(/\{\{\stheme\s\}\}/,"realsee"),notes:p||Of[m].description,rotateX:b,rotateY:w,rotateZ:x}})})}appendTo(e){if(this.wrapper=e,!!this.state.enabled)return e.appendChild(this.container),this.render(),this}enable(e={}){if(this.state.enabled)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({enabled:!0},e.userAction||i),this._enable({userAction:i})}disable(e={}){if(!this.state.enabled)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({enabled:!1},e.userAction||i),this._disable({userAction:i})}setState(e,i={}){const s=this.state,r=i.userAction!==void 0?i.userAction:!0;if(this.updateState(e,r),e.enabled!==void 0&&s.enabled!==e.enabled&&(e.enabled?this._enable({userAction:r}):this._disable({userAction:r})),e.visible!==void 0&&s.visible!==e.visible){const o={userAction:r};e.visible?this._show(o):this._hide(o)}}changeConfigs(e,i=!0){this.updateState({config:e},i),this.render()}updatePosition(){var a;const e=kc(this.five,this.floorIndex,this.state.config.attachedTo),i=(a=this.fiveUtil.model)==null?void 0:a.bounding.getCenter(new P.Vector3).setY(e);if(!i)return;const s=i.clone().project(this.five.camera),r=(s.x+1)/2,o=-(s.y-1)/2;this.container.style.left=r*100+"%",this.container.style.top=o*100+"%"}formatData(e){return ee(this,null,function*(){return yield Vn(e.data)})}updateState(e,i){var a;const s=this.state,r=(a=e.config)!=null&&a.missingFloorConfig?F(F({},s.config.missingFloorConfig),e.config.missingFloorConfig):s.config.missingFloorConfig,o=e.config?fe(F(F({},s.config),e.config),{missingFloorConfig:r}):s.config;this.state=fe(F(F({},this.state),e),{config:o}),!Nt(this.state,s,{deep:!0})&&this.hooks.emit("stateChange",{state:this.state,prevState:s,userAction:i})}initContainer(){this.container.classList.add("floorplan-plugin"),Object.assign(this.container.style,{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:10,pointerEvents:"none"}),this.five.addExtraElement(this.container)}addEventListener(){if(!this.state.enabled||this.hasAddedEventListener)return;const e=this.five;e.on("modeChange",this.onFiveModeChange),e.on("interiaPan",this.onFiveInteriaPan),e.on("panoArrived",this.onFivePanoArrived),e.on("cameraUpdate",this.onFiveCameraUpdate),e.on("wantsPanGesture",this.onFiveWantsPanGesture),e.on("wantsTapGesture",this.onFiveWantsTapGesture),e.on("wantsChangeMode",this.onFiveWantsChangeMode),e.on("modelShownFloorChange",this.onModelShownFloorChange)}removeEventListener(){const e=this.five;this.hasAddedEventListener=!1,e.off("modelLoaded",this.onFiveModelLoaded),e.off("modeChange",this.onFiveModeChange),e.off("panoArrived",this.onFivePanoArrived),e.off("cameraUpdate",this.onFiveCameraUpdate),e.off("wantsPanGesture",this.onFiveWantsPanGesture),e.off("wantsTapGesture",this.onFiveWantsTapGesture),e.off("wantsChangeMode",this.onFiveWantsChangeMode),e.off("modelShownFloorChange",this.onModelShownFloorChange)}render(e){if(!this.state.enabled||!this.container||!this.data||this.size.width===0||this.showPromise)return;const i=fe(F({},this.state.config),{visible:this.state.visible,duration:e!=null?e:0,panoIndex:this.panoIndex,floorIndex:this.floorIndex,floorplanData:this.data,lastPanoramaLongitude:this.lastPanoramaLongitude,highlightData:this.highlightData,items:this.items,store:this.store});if(this.app)return this.app.$set(i);this.app=new Mc({target:this.container,intro:!0,props:i})}};const l2=(n,t)=>new a2(n,t);let c2=class extends hn{constructor(e,i){var l,c;super(e);u(this,"name","topviewFloorplanPlugin");u(this,"state");u(this,"data");u(this,"app");u(this,"selector");u(this,"panoIndex",0);u(this,"floorIndex",0);u(this,"wrapper");u(this,"container",document.createElement("div"));u(this,"lastPanoramaLongitude",0);u(this,"size",{width:0,height:0});u(this,"defaultMissingFloorConfig");u(this,"hasAddedEventListener",!1);u(this,"isHiddenByHideFunc",!1);u(this,"highlightData",{});u(this,"updateSize",()=>{if(!this.data||!this.container||!this.wrapper||this.five.getCurrentState().mode!=="Topview")return!1;const{min:e,max:i}=this.data.bounding,s=i.x-e.x,r=i.y-e.y,o=this.state.config.attachedTo?{attachedTo:this.state.config.attachedTo}:void 0,a=Ec(this.five,this.wrapper,this.floorIndex,o),l=Math.ceil(s*a),c=Math.ceil(r*a);return this.size.width===l&&this.size.height===c||(this.container.style.width=l+"px",this.container.style.height=c+"px",this.size={width:l,height:c}),!0});u(this,"dispose",()=>{var e,i;this.removeEventListener(),(e=this.app)==null||e.$destroy(),this.app=void 0,(i=this.container)==null||i.remove(),this.data=void 0,this.wrapper=void 0,this.selector=void 0,this.hooks.emit("dispose")});u(this,"highlight",e=>{this.state.config.highlightEnable&&(this.highlightData=e,this.render())});u(this,"unhighlight",()=>{this.highlightData={},this.render()});u(this,"_disable",e=>{var s,r;const{userAction:i}=e;(s=this.app)==null||s.$destroy(),this.app=void 0,(r=this.container)==null||r.remove(),this.removeEventListener(),this.hooks.emit("disable",{userAction:i})});u(this,"onFiveModelLoaded",()=>{if(this.state.enabled===!1||this.wrapper||!this.selector)return;const e=this.selector instanceof Element?this.selector:document.querySelector(this.selector);if(!e)throw new Error("不正确的父容器选择器");this.wrapper=e,e.append(this.container)});u(this,"onFiveModeChange",(...[e,,,,i])=>{e!=="Topview"&&this.state.visible&&(this.updateState({visible:!1},i),this._hide({userAction:i}))});u(this,"onFivePanoArrived",e=>{var i;(i=this.five)!=null&&i.work&&(this.panoIndex=e,this.floorIndex=this.workUtil.observers[e].floorIndex)});u(this,"onFiveCameraUpdate",(e,i)=>{this.state.visible&&(this.updatePosition(),this.updateSize())});u(this,"onFiveWantsGesture",e=>{if(!(e!=="pan"&&e!=="pinch"&&e!=="mouseWheel")&&this.state.visible&&!this.state.config.gestureEnable)return!1});u(this,"onFiveWantsMoveToPano",()=>{if(this.state.visible&&this.state.config.preventRoomClick)return!1});u(this,"onFiveInitAnimationEnded",(...[,,e])=>{const{mode:i}=this.five.getCurrentState();i==="Topview"&&!this.isHiddenByHideFunc&&!this.state.visible&&this.state.config.autoShowEnable&&(this.updateState({visible:!0},e),this._show({userAction:e}))});u(this,"onModelShownFloorChange",e=>{if(this.floorIndex!==e){if(e===null){const i=this.five.getCurrentState().panoIndex;this.floorIndex=this.workUtil.observers[i].floorIndex;return}this.floorIndex=e,this.updateSize(),this.render()}});i!=null&&i.selector&&(this.selector=i.selector,console.warn("不推荐继续使用 params.selector 配置父容器，请使用 appendTo 方法")),this.defaultMissingFloorConfig={imageURL:this.staticPrefix+"/release/web/saas/missing-floorplan.e274c596.png",imageWidth:200,imageHeight:120,text:(c=(l=i.i18n)==null?void 0:l.call(i,"暂无平面图"))!=null?c:"暂无平面图",textFontSize:14};const s={northDesc:"北",modelOpacity:1,cameraEnable:!0,hoverEnable:!0,highlightEnable:!1,compassEnable:!0,gestureEnable:!1,autoShowEnable:!0,ruleLabelsEnable:!0,roomLabelsEnable:!0,roomAreaEnable:!0,roomNameEnable:!0,roomNameOtherTypeEnable:!0,roomDimensionEnable:!0,cameraImageUrl:jn,attachedTo:zn.BOUNDING_CENTER,getLabelElement:void 0,missingFloorConfig:F(F({},this.defaultMissingFloorConfig),i.missingFloorConfig),i18n:h=>h,adaptiveRoomLabelVisibleEnable:!0,getRoomAreaText:h=>(h/1e6).toFixed(1)+"㎡",getRoomDimensionText:(h,d)=>(h/1e3).toFixed(1)+"m × "+(d/1e3).toFixed(1)+"m",getRuleDistanceText:h=>h.toString()},r=i?ar(i,["selector","scale"]):{},o=F(F({},s.missingFloorConfig),r.missingFloorConfig),a=fe(F(F({},s),r),{missingFloorConfig:o});this.state={enabled:!0,visible:!1,config:a},this.initContainer(),e.model.loaded?this.onFiveModelLoaded():e.once("modelLoaded",this.onFiveModelLoaded),e.once("dispose",this.dispose),this.addEventListener()}load(e,i,s=!0){return ee(this,null,function*(){function r(h){return Object.prototype.hasOwnProperty.apply(h,["version"])}const o=e;o&&ei(o.version)&&console.warn("传入 serverData.data 的方式后续可能不再支持，请把 serverData 整体传入 load 函数");const a=JSON.parse(JSON.stringify(e)),l=r(a)?a.data:a,c=this.data;this.data=yield Vn(l),this.hooks.emit("dataLoaded",this.data),this.hooks.emit("dataChange",this.data,c),i&&this.updateState(i,s),this.render()})}updatePosition(){var a;const e=kc(this.five,this.floorIndex,this.state.config.attachedTo),i=(a=this.five.model)==null?void 0:a.bounding.getCenter(new P.Vector3).setY(e);if(!i)return;const s=i.clone().project(this.five.camera),r=(s.x+1)/2,o=-(s.y-1)/2;this.container.style.left=r*100+"%",this.container.style.top=o*100+"%"}appendTo(e){if(this.wrapper=e,!!this.state.enabled)return e.appendChild(this.container),this.render(),this}show(){return ee(this,arguments,function*(e={}){if(this.state.visible)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({visible:!0},i),this._show({userAction:i})})}hide(){return ee(this,arguments,function*(e={}){if(this.isHiddenByHideFunc=!0,!this.state.visible)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({visible:!1},i),this._hide({userAction:i})})}enable(e={}){if(this.state.enabled)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({enabled:!0},e.userAction||i),this._enable({userAction:i})}disable(e={}){if(!this.state.enabled)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({enabled:!1},e.userAction||i),this._disable({userAction:i})}setState(e,i={}){const s=this.state,r=i.userAction!==void 0?i.userAction:!0;if(this.updateState(e,r),e.enabled!==void 0&&s.enabled!==e.enabled){const o={userAction:r};e.enabled?this._enable(o):this._disable(o)}if(e.visible!==void 0&&s.visible!==e.visible){const o={userAction:r};e.visible?this._show(o):this._hide(o)}}changeConfigs(e,i=!0){this.updateState({config:e},i),this.render()}formatData(e){return ee(this,null,function*(){return yield Vn(e.data)})}_show(e){return ee(this,null,function*(){if(!this.state.enabled)return;this.isHiddenByHideFunc=!1;const{userAction:i}=e;this.hooks.emit("show",{userAction:i,auto:!1}),this.five.getCurrentState().mode!=="Topview"&&(yield xc(this.five,["Topview",void 0,void 0,i])),this.five.model.show(this.floorIndex),this.updatePosition(),this.updateSize();const s=500,r=this.state.config.modelOpacity;lr(this.five,r,s),this.hooks.emit("showAnimationEnded",{userAction:i,auto:!1}),this.render()})}_hide(e){return ee(this,null,function*(){if(!this.state.enabled)return;const{userAction:i}=e;this.hooks.emit("hide",{userAction:i,auto:!1});const s=1,r=0;lr(this.five,s,r),this.render()})}_enable(e){const{userAction:i}=e;this.addEventListener(),this.wrapper&&this.wrapper.append(this.container),this.hooks.emit("enable",{userAction:i}),this.state.visible&&this._show({userAction:i})}updateState(e,i){var a;const s=this.state,r=(a=e.config)!=null&&a.missingFloorConfig?F(F({},s.config.missingFloorConfig),e.config.missingFloorConfig):s.config.missingFloorConfig,o=e.config?fe(F(F({},s.config),e.config),{missingFloorConfig:r}):s.config;this.state=fe(F(F({},this.state),e),{config:o}),!Nt(this.state,s,{deep:!0})&&this.hooks.emit("stateChange",{state:this.state,prevState:s,userAction:i})}addEventListener(){if(!this.state.enabled||this.hasAddedEventListener)return;const e=this.five;e.on("modeChange",this.onFiveModeChange),e.on("panoArrived",this.onFivePanoArrived),e.on("cameraUpdate",this.onFiveCameraUpdate),e.on("wantsGesture",this.onFiveWantsGesture),e.on("wantsMoveToPano",this.onFiveWantsMoveToPano),e.on("initAnimationEnded",this.onFiveInitAnimationEnded),e.on("modelShownFloorChange",this.onModelShownFloorChange)}removeEventListener(){const e=this.five;this.hasAddedEventListener=!1,e.off("modeChange",this.onFiveModeChange),e.off("panoArrived",this.onFivePanoArrived),e.off("cameraUpdate",this.onFiveCameraUpdate),e.off("wantsGesture",this.onFiveWantsGesture),e.off("wantsMoveToPano",this.onFiveWantsMoveToPano),e.off("initAnimationEnded",this.onFiveInitAnimationEnded),e.off("modelShownFloorChange",this.onModelShownFloorChange)}initContainer(){this.container.classList.add("floorplan-plugin"),Object.assign(this.container.style,{position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 10px)",zIndex:10,pointerEvents:"none","will-change":"width, height"}),this.five.addExtraElement(this.container)}render(e){if(!this.state.enabled||!this.container||!this.data||this.size.width===0)return;const i=fe(F({},this.state.config),{visible:this.state.visible,duration:e!=null?e:0,panoIndex:this.panoIndex,floorIndex:this.floorIndex,floorplanData:this.data,lastPanoramaLongitude:this.lastPanoramaLongitude,highlightData:this.highlightData});if(this.app)return this.app.$set(i);this.app=new Mc({target:this.container,intro:!0,props:i})}};const h2=(n,t)=>new c2(n,t);function d2(n){De(n,"svelte-1nqrlxd",".plugin-radar__camera-wrapper.svelte-1nqrlxd{width:100%;height:100%;position:absolute;pointer-events:none}.plugin-radar__camera-position.svelte-1nqrlxd{position:absolute;left:0;top:0;width:0;height:0;transform:none;pointer-events:none;transition:transform 1s linear}.plugin-radar__camera-rotate.svelte-1nqrlxd{position:absolute;left:-0.9375rem;top:-0.9375rem;width:1.0625rem;height:1.0625rem;transform-origin:0.9375rem 0.9375rem;transform:rotate(45deg);background-repeat:no-repeat;background-size:100%}")}function u2(n){let t,e,i;return{c(){t=U("div"),e=U("div"),i=U("div"),y(i,"class","plugin-radar__camera-rotate svelte-1nqrlxd"),Q(i,"background-image","url("+(n[0]||jn)+")"),Q(i,"transform",n[1]),y(e,"class","plugin-radar__camera-position svelte-1nqrlxd"),Q(e,"transform",n[2]),y(t,"class","plugin-radar__camera-wrapper svelte-1nqrlxd"),Q(t,"opacity",n[3]?1:0)},m(s,r){Y(s,t,r),V(t,e),V(e,i)},p(s,[r]){r&1&&Q(i,"background-image","url("+(s[0]||jn)+")"),(r&1||r&3)&&Q(i,"transform",s[1]),r&4&&Q(e,"transform",s[2]),r&8&&Q(t,"opacity",s[3]?1:0)},i:re,o:re,d(s){s&&X(t)}}}function f2(n){return`rotate(${Math.floor(n/Math.PI*180)*-1+45}deg)`}function p2(n,t,e){var w,x;let i,s,r,o,{five:a}=t,{pxmm:l}=t,{floorplanData:c}=t,{cameraImageUrl:h}=t,d=a.getCurrentState().panoIndex,f=a.getCurrentState().longitude,g=(x=(w=a.work.observers[a.getCurrentState().panoIndex])==null?void 0:w.floorIndex)!=null?x:0;function p(E,L){const S=E.bounding,R=E.observers[L];if(!R)return"";const z=(S.max.x-S.min.x)*l,O=(S.max.y-S.min.y)*l,A=Math.floor(R.positionInImage.x*z),C=Math.floor(R.positionInImage.y*O);return`translate(${A}px, ${C}px)`}function m(E){e(7,d=E)}function v(E){e(9,g=a.work.observers[E].floorIndex)}const b=Yo(E=>{e(8,f=E.longitude)},1e3/60);return zt(()=>(a.on("panoWillArrive",m),a.on("panoArrived",v),a.on("cameraDirectionUpdate",b),function(){a.off("panoWillArrive",m),a.off("panoArrived",v),a.off("cameraDirectionUpdate",b)})),n.$$set=E=>{"five"in E&&e(4,a=E.five),"pxmm"in E&&e(5,l=E.pxmm),"floorplanData"in E&&e(6,c=E.floorplanData),"cameraImageUrl"in E&&e(0,h=E.cameraImageUrl)},n.$$.update=()=>{n.$$.dirty&576&&e(10,i=c.floorDatas[g]),n.$$.dirty&1024&&e(3,s=i.rooms.length>0),n.$$.dirty&192&&e(2,r=p(c,d)),n.$$.dirty&256&&e(1,o=f2(f))},[h,o,r,s,a,l,c,d,f,g,i]}class m2 extends Me{constructor(t){super(),Ie(this,t,p2,u2,Pe,{five:4,pxmm:5,floorplanData:6,cameraImageUrl:0},d2)}}function g2(n){De(n,"svelte-1i87fz7",".plugin-pano-floorplan__extra-objects.svelte-1i87fz7{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.plugin-pano-floorplan__extra-object-item--position.svelte-1i87fz7{position:absolute;width:0;height:0}.plugin-pano-floorplan__extra-object-item.svelte-1i87fz7{transform:translate(-50%, -50%)}")}function jf(n,t,e){const i=n.slice();return i[1]=t[e],i}function Vf(n,t){let e,i,s=`${t[1].icon.width/16}rem`,r=`${t[1].icon.height/16}rem`,o,a=`${t[1].positionInImage.y*100}%`,l=`${t[1].positionInImage.x*100}%`;return{key:n,first:null,c(){e=U("div"),i=U("div"),o=ae(),y(i,"class","plugin-pano-floorplan__extra-object-item svelte-1i87fz7"),Q(i,"background-image",`url(${t[1].icon.url})`),Q(i,"width",s),Q(i,"height",r),y(e,"class","plugin-pano-floorplan__extra-object-item--position svelte-1i87fz7"),Q(e,"top",a),Q(e,"left",l),this.first=e},m(c,h){Y(c,e,h),V(e,i),V(e,o)},p(c,h){t=c,h&1&&Q(i,"background-image",`url(${t[1].icon.url})`);const d=h&1;d&&Q(i,"width",s),d&&Q(i,"height",r),h&1&&a!==(a=`${t[1].positionInImage.y*100}%`)&&Q(e,"top",a),h&1&&l!==(l=`${t[1].positionInImage.x*100}%`)&&Q(e,"left",l)},d(c){c&&X(e)}}}function v2(n){let t,e=[],i=new Map,s=n[0];const r=o=>o[1].id;for(let o=0;o<s.length;o+=1){let a=jf(n,s,o),l=r(a);i.set(l,e[o]=Vf(l,a))}return{c(){t=U("div");for(let o=0;o<e.length;o+=1)e[o].c();y(t,"class","plugin-pano-floorplan__extra-objects svelte-1i87fz7")},m(o,a){Y(o,t,a);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(t,null)},p(o,[a]){a&1&&(s=o[0],e=yi(e,a,r,1,o,s,i,t,wc,Vf,null,jf))},i:re,o:re,d(o){o&&X(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function A2(n,t,e){let{extraObjects:i=[]}=t;return n.$$set=s=>{"extraObjects"in s&&e(0,i=s.extraObjects)},[i]}class b2 extends Me{constructor(t){super(),Ie(this,t,A2,v2,Pe,{extraObjects:0},g2)}}function y2(n){De(n,"svelte-18287ai",".missing-floor-wrapper.svelte-18287ai{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:flex;justify-content:center;align-items:center}.missing-floor-image.svelte-18287ai{max-width:100%;max-height:100%}")}function w2(n){let t,e,i,s,r,o;const a=[{floorIndex:n[2],floorplanData:n[4]}];let l={};for(let h=0;h<a.length;h+=1)l=xt(l,a[h]);t=new Yu({props:l}),i=new b2({props:{extraObjects:n[7]}});let c=n[3]&&Bf(n);return{c(){Ae(t.$$.fragment),e=ae(),Ae(i.$$.fragment),s=ae(),c&&c.c(),r=Ne()},m(h,d){ge(t,h,d),Y(h,e,d),ge(i,h,d),Y(h,s,d),c&&c.m(h,d),Y(h,r,d),o=!0},p(h,d){const f=d&20?Ot(a,[{floorIndex:h[2],floorplanData:h[4]}]):{};t.$set(f);const g={};d&128&&(g.extraObjects=h[7]),i.$set(g),h[3]?c?(c.p(h,d),d&8&&N(c,1)):(c=Bf(h),c.c(),N(c,1),c.m(r.parentNode,r)):c&&(Ee(),Z(c,1,1,()=>{c=null}),xe())},i(h){o||(N(t.$$.fragment,h),N(i.$$.fragment,h),N(c),o=!0)},o(h){Z(t.$$.fragment,h),Z(i.$$.fragment,h),Z(c),o=!1},d(h){ve(t,h),h&&X(e),ve(i,h),h&&X(s),c&&c.d(h),h&&X(r)}}}function P2(n){let t,e,i;return{c(){t=U("div"),e=U("img"),y(e,"class","missing-floor-image svelte-18287ai"),ft(e.src,i=n[6])||y(e,"src",i),y(e,"alt","缺省楼层"),y(t,"class","missing-floor-wrapper svelte-18287ai")},m(s,r){Y(s,t,r),V(t,e)},p(s,r){r&64&&!ft(e.src,i=s[6])&&y(e,"src",i)},i:re,o:re,d(s){s&&X(t)}}}function Bf(n){let t,e;const i=[{five:n[0],pxmm:n[1],floorIndex:n[2],floorplanData:n[4],onRoomHeightClick:n[9],highlightData:n[5],hoveredRoom:void 0}];let s={};for(let r=0;r<i.length;r+=1)s=xt(s,i[r]);return t=new bf({props:s}),{c(){Ae(t.$$.fragment)},m(r,o){ge(t,r,o),e=!0},p(r,o){const a=o&567?Ot(i,[{five:r[0],pxmm:r[1],floorIndex:r[2],floorplanData:r[4],onRoomHeightClick:r[9],highlightData:r[5],hoveredRoom:void 0}]):{};t.$set(a)},i(r){e||(N(t.$$.fragment,r),e=!0)},o(r){Z(t.$$.fragment,r),e=!1},d(r){ve(t,r)}}}function C2(n){let t,e,i,s;const r=[P2,w2],o=[];function a(l,c){return l[8]?1:0}return t=a(n),e=o[t]=r[t](n),{c(){e.c(),i=Ne()},m(l,c){o[t].m(l,c),Y(l,i,c),s=!0},p(l,[c]){let h=t;t=a(l),t===h?o[t].p(l,c):(Ee(),Z(o[h],1,1,()=>{o[h]=null}),xe(),e=o[t],e?e.p(l,c):(e=o[t]=r[t](l),e.c()),N(e,1),e.m(i.parentNode,i))},i(l){s||(N(e),s=!0)},o(l){Z(e),s=!1},d(l){o[t].d(l),l&&X(i)}}}function I2(n,t,e){let i,s,r,{five:o}=t,{pxmm:a}=t,{floorIndex:l}=t,{hoverEnable:c}=t,{floorplanData:h}=t,{extraObjects:d=[]}=t,{highlightData:f}=t,{missingFloorImageUrl:g}=t;const p=void 0;return n.$$set=m=>{"five"in m&&e(0,o=m.five),"pxmm"in m&&e(1,a=m.pxmm),"floorIndex"in m&&e(2,l=m.floorIndex),"hoverEnable"in m&&e(3,c=m.hoverEnable),"floorplanData"in m&&e(4,h=m.floorplanData),"extraObjects"in m&&e(10,d=m.extraObjects),"highlightData"in m&&e(5,f=m.highlightData),"missingFloorImageUrl"in m&&e(6,g=m.missingFloorImageUrl)},n.$$.update=()=>{n.$$.dirty&20&&e(11,i=h.floorDatas[l]),n.$$.dirty&2048&&e(8,s=i.rooms.length>0),n.$$.dirty&1028&&e(7,r=d==null?void 0:d.filter(m=>m.floorIndex===l))},[o,a,l,c,h,f,g,r,s,p,d,i]}class M2 extends Me{constructor(t){super(),Ie(this,t,I2,C2,Pe,{five:0,pxmm:1,floorIndex:2,hoverEnable:3,floorplanData:4,extraObjects:10,highlightData:5,missingFloorImageUrl:6},y2)}}function k2(n){De(n,"svelte-1mvqyqq",".plugin-floorplan-radar.svelte-1mvqyqq{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.plugin-floorplan-radar-container.svelte-1mvqyqq{position:relative}")}function _f(n){let t,e,i,s,r=n[8]!==0&&Rf(n);return{c(){t=U("div"),r&&r.c(),y(t,"class","plugin-floorplan-radar svelte-1mvqyqq")},m(o,a){Y(o,t,a),r&&r.m(t,null),e=!0,i||(s=[Ai(cn.call(null,t)),je(t,"clientWidth",n[14]),je(t,"clientHeight",n[15])],i=!0)},p(o,a){o[8]!==0?r?(r.p(o,a),a&256&&N(r,1)):(r=Rf(o),r.c(),N(r,1),r.m(t,null)):r&&(Ee(),Z(r,1,1,()=>{r=null}),xe())},i(o){e||(N(r),e=!0)},o(o){Z(r),e=!1},d(o){o&&X(t),r&&r.d(),i=!1,ut(s)}}}function Rf(n){let t,e,i,s,r=`${n[10]}px`,o=`${n[13]}px`,a;const l=[{five:n[0],pxmm:n[11],floorIndex:n[12],floorplanData:n[3],hoverEnable:n[2],extraObjects:n[5],highlightData:n[6],missingFloorImageUrl:n[7]}];let c={};for(let f=0;f<l.length;f+=1)c=xt(c,l[f]);e=new M2({props:c});const h=[{pxmm:n[11],five:n[0],floorplanData:n[3],cameraImageUrl:n[4]}];let d={};for(let f=0;f<h.length;f+=1)d=xt(d,h[f]);return s=new m2({props:d}),{c(){t=U("div"),Ae(e.$$.fragment),i=ae(),Ae(s.$$.fragment),y(t,"class","plugin-floorplan-radar-container svelte-1mvqyqq"),Q(t,"width",r),Q(t,"height",o)},m(f,g){Y(f,t,g),ge(e,t,null),V(t,i),ge(s,t,null),a=!0},p(f,g){const p=g&6381?Ot(l,[{five:f[0],pxmm:f[11],floorIndex:f[12],floorplanData:f[3],hoverEnable:f[2],extraObjects:f[5],highlightData:f[6],missingFloorImageUrl:f[7]}]):{};e.$set(p);const m=g&2073?Ot(h,[{pxmm:f[11],five:f[0],floorplanData:f[3],cameraImageUrl:f[4]}]):{};s.$set(m),g&1024&&r!==(r=`${f[10]}px`)&&Q(t,"width",r),g&8192&&o!==(o=`${f[13]}px`)&&Q(t,"height",o)},i(f){a||(N(e.$$.fragment,f),N(s.$$.fragment,f),a=!0)},o(f){Z(e.$$.fragment,f),Z(s.$$.fragment,f),a=!1},d(f){f&&X(t),ve(e),ve(s)}}}function E2(n){let t,e,i=n[1]&&_f(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[1]?i?(i.p(s,r),r&2&&N(i,1)):(i=_f(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function x2(n,t,e){var E,L;let{five:i}=t,{visible:s}=t,{hoverEnable:r}=t,{floorplanData:o}=t,{cameraImageUrl:a}=t,{extraObjects:l=[]}=t,{highlightData:c}=t,{missingFloorImageUrl:h}=t,d=0,f=(L=(E=i.work.observers[i.getCurrentState().panoIndex])==null?void 0:E.floorIndex)!=null?L:0,g=0,p=0,m=0,v=0;function b(S){e(12,f=i.work.observers[S].floorIndex)}zt(()=>(i.on("panoArrived",b),()=>{i.off("panoArrived",b)}));const w=S=>{e(8,g=S.detail)},x=S=>{e(9,p=S.detail)};return n.$$set=S=>{"five"in S&&e(0,i=S.five),"visible"in S&&e(1,s=S.visible),"hoverEnable"in S&&e(2,r=S.hoverEnable),"floorplanData"in S&&e(3,o=S.floorplanData),"cameraImageUrl"in S&&e(4,a=S.cameraImageUrl),"extraObjects"in S&&e(5,l=S.extraObjects),"highlightData"in S&&e(6,c=S.highlightData),"missingFloorImageUrl"in S&&e(7,h=S.missingFloorImageUrl)},n.$$.update=()=>{if(n.$$.dirty&1800){const S=Math.min(g,p),{max:R,min:z}=o.bounding,O=R.x-z.x,A=R.y-z.y,C=function(){return O>A?[S,S/O*A]:[S/A*O,S]}();e(10,m=C[0]),e(13,v=C[1]),e(11,d=m/O)}},[i,s,r,o,a,l,c,h,g,p,m,d,f,v,w,x]}class D2 extends Me{constructor(t){super(),Ie(this,t,x2,E2,Pe,{five:0,visible:1,hoverEnable:2,floorplanData:3,cameraImageUrl:4,extraObjects:5,highlightData:6,missingFloorImageUrl:7},k2)}}let S2=class extends hn{constructor(e,i){super(e);u(this,"name","panoFloorplanRadarPlugin");u(this,"state");u(this,"data");u(this,"app");u(this,"wrapperSelector","");u(this,"wrapper",null);u(this,"disposed",!1);u(this,"extraObjects",[]);u(this,"highlightData",{});u(this,"dispose",()=>{var e;this.disposed=!0,(e=this.app)==null||e.$destroy(),this.wrapper=null,this.wrapperSelector="",this.hooks.emit("dispose")});u(this,"highlight",e=>{this.state.config.highlightEnable&&(this.highlightData=e,this.render())});u(this,"unhighlight",()=>{this.highlightData={},this.render()});u(this,"_disable",e=>{var s;const{userAction:i}=e;(s=this.app)==null||s.$destroy(),this.app=void 0,this.hooks.emit("disable",{userAction:i})});this.five=e;const s={hoverEnable:!1,highlightEnable:!1,cameraImageUrl:jn,missingFloorImageUrl:this.staticPrefix+"/release/web/saas/missing-floor.d687a5ed.png"},r=F(F({},s),i==null?void 0:i.configs);this.state={enabled:!0,visible:!0,config:r},i!=null&&i.wrapper&&console.warn("不推荐继续使用 params.selector 配置父容器，请使用 appendTo 方法"),typeof(i==null?void 0:i.wrapper)=="string"?this.wrapperSelector=i.wrapper:(i==null?void 0:i.wrapper)instanceof Element&&(this.wrapper=i.wrapper),e.once("dispose",this.dispose)}load(e,i,s=!0){return ee(this,null,function*(){function r(c){return Object.prototype.hasOwnProperty.apply(c,["version"])}const o=JSON.parse(JSON.stringify(e)),a=r(o)?o.data:o,l=this.data;this.data=yield Vn(a),this.hooks.emit("dataLoaded",this.data),this.hooks.emit("dataChange",this.data,l),i&&this.updateState(i,s),this.render()})}show(){return ee(this,arguments,function*(e={}){if(this.state.visible)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({visible:!0},i),this._show({userAction:i})})}hide(){return ee(this,arguments,function*(e={}){if(!this.state.visible)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({visible:!1},i),this._hide({userAction:i})})}enable(e={}){if(this.state.enabled)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({enabled:!0},e.userAction||i),this._enable({userAction:i})}disable(e={}){if(!this.state.enabled)return;const i=e.userAction!==void 0?e.userAction:!0;this.updateState({enabled:!1},e.userAction||i),this._disable({userAction:i})}setState(e,i={}){const s=this.state,r=i.userAction!==void 0?i.userAction:!0;if(this.updateState(e,r),e.enabled!==void 0&&s.enabled!==e.enabled){const o={userAction:r};e.enabled?this._enable(o):this._disable(o)}if(e.visible!==void 0&&s.visible!==e.visible){const o={userAction:r};e.visible?this._show(o):this._hide(o)}}appendTo(e){this.wrapper!==e&&this.app&&(this.app.$destroy(),this.app=void 0),this.wrapper=e,this.render()}changeConfigs(e,i=!0){this.setState({config:e},{userAction:i}),this.render()}setExtraObjectsWith3DPositions(e){this.data&&(this.extraObjects=Yw(e,this.five,this.data),this.render())}formatData(e){return ee(this,null,function*(){return yield Vn(e.data)})}_enable(e){const{userAction:i}=e;this.hooks.emit("enable",{userAction:i}),this.state.visible&&this._show({userAction:i})}_show(e){if(this.disposed||!this.state.enabled)return;const{userAction:i}=e;this.hooks.emit("show",{userAction:i}),this.render()}_hide(e){if(this.disposed||!this.state.enabled)return;const{userAction:i}=e;this.hooks.emit("hide",{userAction:i}),this.render()}updateState(e,i){const s=this.state,r=e.config?F(F({},s.config),e.config):s.config;this.state=fe(F(F({},this.state),e),{config:r}),!Nt(this.state,s,{deep:!0})&&this.hooks.emit("stateChange",{state:this.state,prevState:s,userAction:i})}render(){if(this.disposed||!this.state.enabled)return;if(!this.wrapper&&this.wrapperSelector){const i=document.querySelector(this.wrapperSelector);this.wrapper=i}if(!this.data||!this.wrapper)return;const e=fe(F({},this.state.config),{five:this.five,floorplanData:this.data,visible:this.state.visible,extraObjects:this.extraObjects,highlightData:this.highlightData});this.app?this.app.$set(e):this.app=new D2({target:this.wrapper,props:e})}};const L2=(n,t)=>new S2(n,t),T2=[{type:0,floorType:1,roomType:"100900000012",name:"其他"},{type:1,floorType:1,roomType:"100900000002",name:"客厅"},{type:2,floorType:1,roomType:"100900000002",name:"餐厅"},{type:3,floorType:0,roomType:"100900000001",name:"卧室"},{type:4,floorType:0,roomType:"100900000001",name:"书房"},{type:5,floorType:3,roomType:"100900000004",name:"卫生间"},{type:6,floorType:3,roomType:"100900000004",name:"淋浴间"},{type:7,floorType:3,roomType:"100900000004",name:"洗手间"},{type:8,floorType:3,roomType:"100900000003",name:"厨房"},{type:9,floorType:1,roomType:"100900000003",name:"开放厨房",onlySubArea:!0},{type:10,floorType:0,roomType:"100900000001",name:"多功能间"},{type:11,floorType:0,roomType:"100900000009",name:"保姆间"},{type:12,floorType:4,roomType:"100900000005",name:"阳台"},{type:13,floorType:4,roomType:"100900000006",name:"露台"},{type:14,floorType:0,roomType:"100900000008",name:"储物间"},{type:15,floorType:0,roomType:"100900000013",name:"衣帽间"},{type:16,floorType:0,roomType:"100900000011",name:"阁楼"},{type:17,floorType:2,roomType:"100900000007",name:"花园"},{type:18,floorType:5,roomType:"100900000010",name:"车库"},{type:19,floorType:1,roomType:"100900000012",name:"电梯"},{type:20,floorType:1,roomType:"100900000012",name:"地下室"},{type:21,floorType:1,roomType:"100900000012",name:"天井"},{type:22,floorType:1,roomType:"100900000012",name:"阳光房"},{type:23,floorType:1,roomType:"100900000012",name:"过道"},{type:24,floorType:1,roomType:"100900000012",name:"楼梯间"},{type:25,floorType:1,roomType:"100900000012",name:"门厅"},{type:26,floorType:2,roomType:"100900000012",name:"入户花园"},{type:27,floorType:1,roomType:"100900000012",name:"玄关"},{type:28,floorType:1,roomType:"100900000012",name:"挑空"},{type:29,floorType:4,roomType:"100900000012",name:"晾晒区"},{type:30,floorType:4,roomType:"100900000012",name:"洗衣房"},{type:31,floorType:0,roomType:"100900000012",name:"娱乐区"},{type:32,floorType:0,roomType:"100900000012",name:"健身区"},{type:33,floorType:0,roomType:"100900000012",name:"接待区"},{type:34,floorType:0,roomType:"100900000012",name:"影音区"},{type:35,floorType:1,roomType:"100900000012",name:"餐饮区"},{type:36,floorType:1,roomType:"100900000012",name:"其他",onlySubArea:!0},{type:37,floorType:1,roomType:"100900000002",name:"起居室"},{type:38,floorType:0,roomType:"100900000001",name:"主卧"},{type:39,floorType:0,roomType:"100900000001",name:"次卧"},{type:40,floorType:0,roomType:"100900000001",name:"优化间"},{type:41,floorType:0,roomType:"100900000001",name:"办公室"},{type:42,floorType:0,roomType:"100900000001",name:"会议室"},{type:43,floorType:0,roomType:"100900000001",name:"洽谈间"},{type:44,floorType:1,roomType:"100900000002",name:"共享大厅"},{type:45,floorType:1,roomType:"100900000012",name:"水吧"},{type:46,floorType:0,roomType:"100900000015",name:"出入口"},{type:47,floorType:0,roomType:"100900000015",name:"大厅"},{type:48,floorType:0,roomType:"100900000015",name:"包厢"},{type:49,floorType:0,roomType:"100900000015",name:"其他"},{type:50,floorType:0,roomType:"100900000016",name:"出入口"},{type:51,floorType:0,roomType:"100900000016",name:"办公区"},{type:52,floorType:0,roomType:"100900000016",name:"老板间"},{type:53,floorType:0,roomType:"100900000016",name:"会议室"},{type:54,floorType:0,roomType:"100900000016",name:"休息区/水吧"},{type:55,floorType:0,roomType:"100900000016",name:"其他"},{type:56,floorType:2,roomType:"100900000012",name:"空中花园"},{type:57,floorType:0,roomType:"100900000001",name:"洋室"},{type:58,floorType:0,roomType:"100900000001",name:"和室"}],z2=[{type:0,description:"木质地板"},{type:1,description:"瓷砖地面"},{type:2,description:"户外地面"},{type:3,description:"卫生间地面"},{type:4,description:"阳台地面"},{type:5,description:"车库地面"}],O2=[{roomType:"100900000001",description:"室"},{roomType:"100900000002",description:"厅"},{roomType:"100900000003",description:"厨"},{roomType:"100900000004",description:"卫"},{roomType:"100900000005",description:"阳台"},{roomType:"100900000006",description:"露台"},{roomType:"100900000007",description:"花园"},{roomType:"100900000008",description:"储"},{roomType:"100900000009",description:"保姆间"},{roomType:"100900000010",description:"车库"},{roomType:"100900000011",description:"阁楼"},{roomType:"100900000012",description:"其他"},{roomType:"100900000013",description:"衣"},{roomType:"100900000015",description:"商铺"},{roomType:"100900000016",description:"写字楼"}],Dc=(n,t,e)=>{const i=new P.Matrix4,s=new P.Euler(n,t,e,"YXZ");return i.makeRotationFromEuler(s),i},j2=(n,{scale:t,rotation:e,position:i})=>{if(t&&n.scale.set(t,t,t),e){const[s,r,o]=e;s&&n.applyMatrix4(Dc(s,0,0)),r&&n.applyMatrix4(Dc(0,r,0)),o&&n.applyMatrix4(Dc(0,0,o))}return i&&n.position.set(i.x,i.y,i.z),n};function Ff(n,t){n.traverse(e=>{var i;if(e.type==="Mesh"){const s=e,r=F({map:s.material.map||{}},t);s.material=new B.MeshBasicMaterial(r),s.renderOrder=1,((i=e.parent)==null?void 0:i.type)==="Mesh"&&(e.renderOrder=e.parent.renderOrder+1)}})}/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var Nf={},hi=void 0,V2=Nf;function Sc(n,t){var e=n.split("."),i=V2;!(e[0]in i)&&i.execScript&&i.execScript("var "+e[0]);for(var s;e.length&&(s=e.shift());)!e.length&&t!==hi?i[s]=t:i=i[s]?i[s]:i[s]={}}var at=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined"&&typeof DataView!="undefined";function us(n){var t=n.length,e=0,i=Number.POSITIVE_INFINITY,s,r,o,a,l,c,h,d,f,g;for(d=0;d<t;++d)n[d]>e&&(e=n[d]),n[d]<i&&(i=n[d]);for(s=1<<e,r=new(at?Uint32Array:Array)(s),o=1,a=0,l=2;o<=e;){for(d=0;d<t;++d)if(n[d]===o){for(c=0,h=a,f=0;f<o;++f)c=c<<1|h&1,h>>=1;for(g=o<<16|d,f=c;f<s;f+=l)r[f]=g;++a}++o,a<<=1,l<<=1}return[r,e,i]}function _n(n,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=at?new Uint8Array(n):n,this.m=!1,this.i=Ma,this.r=!1,(t||!(t={}))&&(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case Lc:this.b=32768,this.c=new(at?Uint8Array:Array)(32768+this.h+258);break;case Ma:this.b=0,this.c=new(at?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var Lc=0,Ma=1,Gf={t:Lc,s:Ma};_n.prototype.k=function(){for(;!this.m;){var n=wi(this,3);switch(n&1&&(this.m=!0),n>>>=1,n){case 0:var t=this.input,e=this.a,i=this.c,s=this.b,r=t.length,o=hi,a=hi,l=i.length,c=hi;if(this.d=this.f=0,e+1>=r)throw Error("invalid uncompressed block header: LEN");if(o=t[e++]|t[e++]<<8,e+1>=r)throw Error("invalid uncompressed block header: NLEN");if(a=t[e++]|t[e++]<<8,o===~a)throw Error("invalid uncompressed block header: length verify");if(e+o>t.length)throw Error("input buffer is broken");switch(this.i){case Lc:for(;s+o>i.length;){if(c=l-s,o-=c,at)i.set(t.subarray(e,e+c),s),s+=c,e+=c;else for(;c--;)i[s++]=t[e++];this.b=s,i=this.e(),s=this.b}break;case Ma:for(;s+o>i.length;)i=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(at)i.set(t.subarray(e,e+o),s),s+=o,e+=o;else for(;o--;)i[s++]=t[e++];this.a=e,this.b=s,this.c=i;break;case 1:this.j(B2,_2);break;case 2:for(var h=wi(this,5)+257,d=wi(this,5)+1,f=wi(this,4)+4,g=new(at?Uint8Array:Array)(Tc.length),p=hi,m=hi,v=hi,b=hi,w=hi,x=hi,E=hi,S=hi,L=hi,S=0;S<f;++S)g[Tc[S]]=wi(this,3);if(!at)for(S=f,f=g.length;S<f;++S)g[Tc[S]]=0;for(p=us(g),b=new(at?Uint8Array:Array)(h+d),S=0,L=h+d;S<L;)switch(w=$r(this,p),w){case 16:for(E=3+wi(this,2);E--;)b[S++]=x;break;case 17:for(E=3+wi(this,3);E--;)b[S++]=0;x=0;break;case 18:for(E=11+wi(this,7);E--;)b[S++]=0;x=0;break;default:x=b[S++]=w}m=us(at?b.subarray(0,h):b.slice(0,h)),v=us(at?b.subarray(h):b.slice(h)),this.j(m,v);break;default:throw Error("unknown BTYPE: "+n)}}return this.n()};var Hf=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Tc=at?new Uint16Array(Hf):Hf,Wf=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],Uf=at?new Uint16Array(Wf):Wf,Qf=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],ka=at?new Uint8Array(Qf):Qf,Xf=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Yf=at?new Uint16Array(Xf):Xf,Zf=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ea=at?new Uint8Array(Zf):Zf,zc=new(at?Uint8Array:Array)(288),fs,Jf;for(fs=0,Jf=zc.length;fs<Jf;++fs)zc[fs]=143>=fs?8:255>=fs?9:279>=fs?7:8;var B2=us(zc),Oc=new(at?Uint8Array:Array)(30),xa,qf;for(xa=0,qf=Oc.length;xa<qf;++xa)Oc[xa]=5;var _2=us(Oc);function wi(n,t){for(var e=n.f,i=n.d,s=n.input,r=n.a,o=s.length,a;i<t;){if(r>=o)throw Error("input buffer is broken");e|=s[r++]<<i,i+=8}return a=e&(1<<t)-1,n.f=e>>>t,n.d=i-t,n.a=r,a}function $r(n,t){for(var e=n.f,i=n.d,s=n.input,r=n.a,o=s.length,a=t[0],l=t[1],c,h;i<l&&!(r>=o);)e|=s[r++]<<i,i+=8;if(c=a[e&(1<<l)-1],h=c>>>16,h>i)throw Error("invalid code length: "+h);return n.f=e>>h,n.d=i-h,n.a=r,c&65535}_n.prototype.j=function(n,t){var e=this.c,i=this.b;this.o=n;for(var s=e.length-258,r,o,a,l;(r=$r(this,n))!==256;)if(256>r)i>=s&&(this.b=i,e=this.e(),i=this.b),e[i++]=r;else for(o=r-257,l=Uf[o],0<ka[o]&&(l+=wi(this,ka[o])),r=$r(this,t),a=Yf[r],0<Ea[r]&&(a+=wi(this,Ea[r])),i>=s&&(this.b=i,e=this.e(),i=this.b);l--;)e[i]=e[i++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=i},_n.prototype.w=function(n,t){var e=this.c,i=this.b;this.o=n;for(var s=e.length,r,o,a,l;(r=$r(this,n))!==256;)if(256>r)i>=s&&(e=this.e(),s=e.length),e[i++]=r;else for(o=r-257,l=Uf[o],0<ka[o]&&(l+=wi(this,ka[o])),r=$r(this,t),a=Yf[r],0<Ea[r]&&(a+=wi(this,Ea[r])),i+l>s&&(e=this.e(),s=e.length);l--;)e[i]=e[i++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=i},_n.prototype.e=function(){var n=new(at?Uint8Array:Array)(this.b-32768),t=this.b-32768,e,i,s=this.c;if(at)n.set(s.subarray(32768,n.length));else for(e=0,i=n.length;e<i;++e)n[e]=s[e+32768];if(this.g.push(n),this.l+=n.length,at)s.set(s.subarray(t,t+32768));else for(e=0;32768>e;++e)s[e]=s[t+e];return this.b=32768,s},_n.prototype.z=function(n){var t,e=this.input.length/this.a+1|0,i,s,r,o=this.input,a=this.c;return n&&(typeof n.p=="number"&&(e=n.p),typeof n.u=="number"&&(e+=n.u)),2>e?(i=(o.length-this.a)/this.o[2],r=258*(i/2)|0,s=r<a.length?a.length+r:a.length<<1):s=a.length*e,at?(t=new Uint8Array(s),t.set(a)):t=a,this.c=t},_n.prototype.n=function(){var n=0,t=this.c,e=this.g,i,s=new(at?Uint8Array:Array)(this.l+(this.b-32768)),r,o,a,l;if(e.length===0)return at?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(r=0,o=e.length;r<o;++r)for(i=e[r],a=0,l=i.length;a<l;++a)s[n++]=i[a];for(r=32768,o=this.b;r<o;++r)s[n++]=t[r];return this.g=[],this.buffer=s},_n.prototype.v=function(){var n,t=this.b;return at?this.r?(n=new Uint8Array(t),n.set(this.c.subarray(0,t))):n=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),n=this.c),this.buffer=n};function jc(n,t){var e,i;switch(this.input=n,this.a=0,(t||!(t={}))&&(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),e=n[this.a++],i=n[this.a++],e&15){case Kf:this.method=Kf;break;default:throw Error("unsupported compression method")}if(((e<<8)+i)%31!==0)throw Error("invalid fcheck flag:"+((e<<8)+i)%31);if(i&32)throw Error("fdict flag is not supported");this.q=new _n(n,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}jc.prototype.k=function(){var n=this.input,t,e;if(t=this.q.k(),this.a=this.q.a,this.A){e=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var i=t;if(typeof i=="string"){var s=i.split(""),r,o;for(r=0,o=s.length;r<o;r++)s[r]=(s[r].charCodeAt(0)&255)>>>0;i=s}for(var a=1,l=0,c=i.length,h,d=0;0<c;){h=1024<c?1024:c,c-=h;do a+=i[d++],l+=a;while(--h);a%=65521,l%=65521}if(e!==(l<<16|a)>>>0)throw Error("invalid adler-32 checksum")}return t};var Kf=8;Sc("Zlib.Inflate",jc),Sc("Zlib.Inflate.prototype.decompress",jc.prototype.k);var Vc={ADAPTIVE:Gf.s,BLOCK:Gf.t},eo,to,cr,$f;if(Object.keys)eo=Object.keys(Vc);else for(to in eo=[],cr=0,Vc)eo[cr++]=to;for(cr=0,$f=eo.length;cr<$f;++cr)to=eo[cr],Sc("Zlib.Inflate.BufferType."+to,Vc[to]);var ep=Nf.Zlib,tp={findSpan:function(n,t,e){var i=e.length-n-1;if(t>=e[i])return i-1;if(t<=e[n])return n;for(var s=n,r=i,o=Math.floor((s+r)/2);t<e[o]||t>=e[o+1];)t<e[o]?r=o:s=o,o=Math.floor((s+r)/2);return o},calcBasisFunctions:function(n,t,e,i){var s=[],r=[],o=[];s[0]=1;for(var a=1;a<=e;++a){r[a]=t-i[n+1-a],o[a]=i[n+a]-t;for(var l=0,c=0;c<a;++c){var h=o[c+1],d=r[a-c],f=s[c]/(h+d);s[c]=l+h*f,l=d*f}s[a]=l}return s},calcBSplinePoint:function(n,t,e,i){for(var s=this.findSpan(n,i,t),r=this.calcBasisFunctions(s,i,n,t),o=new B.Vector4(0,0,0,0),a=0;a<=n;++a){var l=e[s-n+a],c=r[a],h=l.w*c;o.x+=l.x*h,o.y+=l.y*h,o.z+=l.z*h,o.w+=l.w*c}return o},calcBasisFunctionDerivatives:function(n,t,e,i,s){for(var r=[],o=0;o<=e;++o)r[o]=0;for(var a=[],o=0;o<=i;++o)a[o]=r.slice(0);for(var l=[],o=0;o<=e;++o)l[o]=r.slice(0);l[0][0]=1;for(var c=r.slice(0),h=r.slice(0),d=1;d<=e;++d){c[d]=t-s[n+1-d],h[d]=s[n+d]-t;for(var f=0,O=0;O<d;++O){var g=h[O+1],p=c[d-O];l[d][O]=g+p;var m=l[O][d-1]/l[d][O];l[O][d]=f+g*m,f=p*m}l[d][d]=f}for(var d=0;d<=e;++d)a[0][d]=l[d][e];for(var O=0;O<=e;++O){for(var v=0,b=1,w=[],o=0;o<=e;++o)w[o]=r.slice(0);w[0][0]=1;for(var x=1;x<=i;++x){var E=0,L=O-x,S=e-x;O>=x&&(w[b][0]=w[v][0]/l[S+1][L],E=w[b][0]*l[L][S]);for(var R=L>=-1?1:-L,z=O-1<=S?x-1:e-O,d=R;d<=z;++d)w[b][d]=(w[v][d]-w[v][d-1])/l[S+1][L+d],E+=w[b][d]*l[L+d][S];O<=S&&(w[b][x]=-w[v][x-1]/l[S+1][O],E+=w[b][x]*l[O][S]),a[x][O]=E;var d=v;v=b,b=d}}for(var O=e,x=1;x<=i;++x){for(var d=0;d<=e;++d)a[x][d]*=O;O*=e-x}return a},calcBSplineDerivatives:function(n,t,e,i,s){for(var r=s<n?s:n,o=[],a=this.findSpan(n,i,t),l=this.calcBasisFunctionDerivatives(a,i,n,r,t),c=[],h=0;h<e.length;++h){var d=e[h].clone(),f=d.w;d.x*=f,d.y*=f,d.z*=f,c[h]=d}for(var g=0;g<=r;++g){for(var d=c[a-n].clone().multiplyScalar(l[g][0]),p=1;p<=n;++p)d.add(c[a-n+p].clone().multiplyScalar(l[g][p]));o[g]=d}for(var g=r+1;g<=s+1;++g)o[g]=new B.Vector4(0,0,0);return o},calcKoverI:function(n,t){for(var e=1,i=2;i<=n;++i)e*=i;for(var s=1,i=2;i<=t;++i)s*=i;for(var i=2;i<=n-t;++i)s*=i;return e/s},calcRationalCurveDerivatives:function(n){for(var t=n.length,e=[],i=[],s=0;s<t;++s){var r=n[s];e[s]=new B.Vector3(r.x,r.y,r.z),i[s]=r.w}for(var o=[],a=0;a<t;++a){for(var l=e[a].clone(),s=1;s<=a;++s)l.sub(o[a-s].clone().multiplyScalar(this.calcKoverI(a,s)*i[s]));o[a]=l.divideScalar(i[0])}return o},calcNURBSDerivatives:function(n,t,e,i,s){var r=this.calcBSplineDerivatives(n,t,e,i,s);return this.calcRationalCurveDerivatives(r)},calcSurfacePoint:function(n,t,e,i,s,r,o,a){for(var l=this.findSpan(n,r,e),c=this.findSpan(t,o,i),h=this.calcBasisFunctions(l,r,n,e),d=this.calcBasisFunctions(c,o,t,i),f=[],g=0;g<=t;++g){f[g]=new B.Vector4(0,0,0,0);for(var p=0;p<=n;++p){var m=s[l-n+p][c-t+g].clone(),v=m.w;m.x*=v,m.y*=v,m.z*=v,f[g].add(m.multiplyScalar(h[p]))}}for(var b=new B.Vector4(0,0,0,0),g=0;g<=t;++g)b.add(f[g].multiplyScalar(d[g]));b.divideScalar(b.w),a.set(b.x,b.y,b.z)}},ps=function(n,t,e,i,s){B.Curve.call(this),this.degree=n,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(var r=0;r<e.length;++r){var o=e[r];this.controlPoints[r]=new B.Vector4(o.x,o.y,o.z,o.w)}};ps.prototype=Object.create(B.Curve.prototype),ps.prototype.constructor=ps,ps.prototype.getPoint=function(n,t){var e=t||new B.Vector3,i=this.knots[this.startKnot]+n*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=tp.calcBSplinePoint(this.degree,this.knots,this.controlPoints,i);return s.w!=1&&s.divideScalar(s.w),e.set(s.x,s.y,s.z)},ps.prototype.getTangent=function(n,t){var e=t||new B.Vector3,i=this.knots[0]+n*(this.knots[this.knots.length-1]-this.knots[0]),s=tp.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,i,1);return e.copy(s[1]).normalize(),e};var ip=function(){var n,t,e;function i(A){B.Loader.call(this,A)}i.prototype=Object.assign(Object.create(B.Loader.prototype),{constructor:i,load:function(A,C,I,M){var D=this,T=D.path===""?B.LoaderUtils.extractUrlBase(A):D.path,H=new B.FileLoader(this.manager);H.setPath(D.path),H.setResponseType("arraybuffer"),H.load(A,function(W){try{C(D.parse(W,T))}catch(J){M?M(J):console.error(J),D.manager.itemError(A)}},I,M)},parse:function(A,C){if(d(A))n=new l().parse(A);else{var I=S(A);if(!f(I))throw new Error("THREE.FBXLoader: Unknown format.");if(g(I)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+g(I));n=new a().parse(I)}var M=new B.TextureLoader(this.manager).setPath(this.resourcePath||C).setCrossOrigin(this.crossOrigin);return new s(M,this.manager).parse(n)}});function s(A,C){this.textureLoader=A,this.manager=C}s.prototype={constructor:s,parse:function(){t=this.parseConnections();var A=this.parseImages(),C=this.parseTextures(A),I=this.parseMaterials(C),M=this.parseDeformers(),D=new r().parse(M);return this.parseScene(M,D,I),e},parseConnections:function(){var A=new Map;if("Connections"in n){var C=n.Connections.connections;C.forEach(function(I){var M=I[0],D=I[1],T=I[2];A.has(M)||A.set(M,{parents:[],children:[]});var H={ID:D,relationship:T};A.get(M).parents.push(H),A.has(D)||A.set(D,{parents:[],children:[]});var W={ID:M,relationship:T};A.get(D).children.push(W)})}return A},parseImages:function(){var A={},C={};if("Video"in n.Objects){var I=n.Objects.Video;for(var M in I){var D=I[M],T=parseInt(M);if(A[T]=D.RelativeFilename||D.Filename,"Content"in D){var H=D.Content instanceof ArrayBuffer&&D.Content.byteLength>0,W=typeof D.Content=="string"&&D.Content!=="";if(H||W){var J=this.parseImage(I[M]);C[D.RelativeFilename||D.Filename]=J}}}}for(var T in A){var te=A[T];C[te]!==void 0?A[T]=C[te]:A[T]=A[T].split("\\").pop()}return A},parseImage:function(A){var C=A.Content,I=A.RelativeFilename||A.Filename,M=I.slice(I.lastIndexOf(".")+1).toLowerCase(),D;switch(M){case"bmp":D="image/bmp";break;case"jpg":case"jpeg":D="image/jpeg";break;case"png":D="image/png";break;case"tif":D="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",I),D="image/tga";break;default:console.warn('FBXLoader: Image type "'+M+'" is not supported.');return}if(typeof C=="string")return"data:"+D+";base64,"+C;var T=new Uint8Array(C);return window.URL.createObjectURL(new Blob([T],{type:D}))},parseTextures:function(A){var C=new Map;if("Texture"in n.Objects){var I=n.Objects.Texture;for(var M in I){var D=this.parseTexture(I[M],A);C.set(parseInt(M),D)}}return C},parseTexture:function(A,C){var I=this.loadTexture(A,C);I.ID=A.id,I.name=A.attrName;var M=A.WrapModeU,D=A.WrapModeV,T=M!==void 0?M.value:0,H=D!==void 0?D.value:0;if(I.wrapS=T===0?B.RepeatWrapping:B.ClampToEdgeWrapping,I.wrapT=H===0?B.RepeatWrapping:B.ClampToEdgeWrapping,"Scaling"in A){var W=A.Scaling.value;I.repeat.x=W[0],I.repeat.y=W[1]}return I},loadTexture:function(A,C){var I,M=this.textureLoader.path,D=t.get(A.id).children;D!==void 0&&D.length>0&&C[D[0].ID]!==void 0&&(I=C[D[0].ID],(I.indexOf("blob:")===0||I.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var T,H=A.FileName.slice(-3).toLowerCase();if(H==="tga"){var W=this.manager.getHandler(".tga");W===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",A.RelativeFilename),T=new B.Texture):T=W.load(I)}else H==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",A.RelativeFilename),T=new B.Texture):T=this.textureLoader.load(I);return this.textureLoader.setPath(M),T},parseMaterials:function(A){var C=new Map;if("Material"in n.Objects){var I=n.Objects.Material;for(var M in I){var D=this.parseMaterial(I[M],A);D!==null&&C.set(parseInt(M),D)}}return C},parseMaterial:function(A,C){var I=A.id,M=A.attrName,D=A.ShadingModel;if(typeof D=="object"&&(D=D.value),!t.has(I))return null;var T=this.parseParameters(A,C,I),H;switch(D.toLowerCase()){case"phong":H=new B.MeshPhongMaterial;break;case"lambert":H=new B.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',D),H=new B.MeshPhongMaterial;break}return H.setValues(T),H.name=M,H},parseParameters:function(A,C,I){var M={};A.BumpFactor&&(M.bumpScale=A.BumpFactor.value),A.Diffuse?M.color=new B.Color().fromArray(A.Diffuse.value):A.DiffuseColor&&A.DiffuseColor.type==="Color"&&(M.color=new B.Color().fromArray(A.DiffuseColor.value)),A.DisplacementFactor&&(M.displacementScale=A.DisplacementFactor.value),A.Emissive?M.emissive=new B.Color().fromArray(A.Emissive.value):A.EmissiveColor&&A.EmissiveColor.type==="Color"&&(M.emissive=new B.Color().fromArray(A.EmissiveColor.value)),A.EmissiveFactor&&(M.emissiveIntensity=parseFloat(A.EmissiveFactor.value)),A.Opacity&&(M.opacity=parseFloat(A.Opacity.value)),M.opacity<1&&(M.transparent=!0),A.ReflectionFactor&&(M.reflectivity=A.ReflectionFactor.value),A.Shininess&&(M.shininess=A.Shininess.value),A.Specular?M.specular=new B.Color().fromArray(A.Specular.value):A.SpecularColor&&A.SpecularColor.type==="Color"&&(M.specular=new B.Color().fromArray(A.SpecularColor.value));var D=this;return t.get(I).children.forEach(function(T){var H=T.relationship;switch(H){case"Bump":M.bumpMap=D.getTexture(C,T.ID);break;case"Maya|TEX_ao_map":M.aoMap=D.getTexture(C,T.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":M.map=D.getTexture(C,T.ID),M.map.encoding=B.sRGBEncoding;break;case"DisplacementColor":M.displacementMap=D.getTexture(C,T.ID);break;case"EmissiveColor":M.emissiveMap=D.getTexture(C,T.ID),M.emissiveMap.encoding=B.sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":M.normalMap=D.getTexture(C,T.ID);break;case"ReflectionColor":M.envMap=D.getTexture(C,T.ID),M.envMap.mapping=B.EquirectangularReflectionMapping,M.envMap.encoding=B.sRGBEncoding;break;case"SpecularColor":M.specularMap=D.getTexture(C,T.ID),M.specularMap.encoding=B.sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":M.alphaMap=D.getTexture(C,T.ID),M.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",H);break}}),M},getTexture:function(A,C){return"LayeredTexture"in n.Objects&&C in n.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),C=t.get(C).children[0].ID),A.get(C)},parseDeformers:function(){var A={},C={};if("Deformer"in n.Objects){var I=n.Objects.Deformer;for(var M in I){var D=I[M],T=t.get(parseInt(M));if(D.attrType==="Skin"){var H=this.parseSkeleton(T,I);H.ID=M,T.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),H.geometryID=T.parents[0].ID,A[M]=H}else if(D.attrType==="BlendShape"){var W={id:M};W.rawTargets=this.parseMorphTargets(T,I),W.id=M,T.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),C[M]=W}}}return{skeletons:A,morphTargets:C}},parseSkeleton:function(A,C){var I=[];return A.children.forEach(function(M){var D=C[M.ID];if(D.attrType==="Cluster"){var T={ID:M.ID,indices:[],weights:[],transformLink:new B.Matrix4().fromArray(D.TransformLink.a)};"Indexes"in D&&(T.indices=D.Indexes.a,T.weights=D.Weights.a),I.push(T)}}),{rawBones:I,bones:[]}},parseMorphTargets:function(A,C){for(var I=[],M=0;M<A.children.length;M++){var D=A.children[M],T=C[D.ID],H={name:T.attrName,initialWeight:T.DeformPercent,id:T.id,fullWeights:T.FullWeights.a};if(T.attrType!=="BlendShapeChannel")return;H.geoID=t.get(parseInt(D.ID)).children.filter(function(W){return W.relationship===void 0})[0].ID,I.push(H)}return I},parseScene:function(A,C,I){e=new B.Group;var M=this.parseModels(A.skeletons,C,I),D=n.Objects.Model,T=this;M.forEach(function(W){var J=D[W.ID];T.setLookAtProperties(W,J);var te=t.get(W.ID).parents;te.forEach(function(q){var ne=M.get(q.ID);ne!==void 0&&ne.add(W)}),W.parent===null&&e.add(W)}),this.bindSkeleton(A.skeletons,C,M),this.createAmbientLight(),this.setupMorphMaterials(),e.traverse(function(W){if(W.userData.transformData){W.parent&&(W.userData.transformData.parentMatrixWorld=W.parent.matrix);var J=x(W.userData.transformData);W.applyMatrix4(J)}});var H=new o().parse();e.children.length===1&&e.children[0].isGroup&&(e.children[0].animations=H,e=e.children[0]),e.animations=H},parseModels:function(A,C,I){var M=new Map,D=n.Objects.Model;for(var T in D){var H=parseInt(T),W=D[T],J=t.get(H),te=this.buildSkeleton(J,A,H,W.attrName);if(!te){switch(W.attrType){case"Camera":te=this.createCamera(J);break;case"Light":te=this.createLight(J);break;case"Mesh":te=this.createMesh(J,C,I);break;case"NurbsCurve":te=this.createCurve(J,C);break;case"LimbNode":case"Root":te=new B.Bone;break;case"Null":default:te=new B.Group;break}te.name=W.attrName?B.PropertyBinding.sanitizeNodeName(W.attrName):"",te.ID=H}this.getTransformData(te,W),M.set(H,te)}return M},buildSkeleton:function(A,C,I,M){var D=null;return A.parents.forEach(function(T){for(var H in C){var W=C[H];W.rawBones.forEach(function(J,te){if(J.ID===T.ID){var q=D;D=new B.Bone,D.matrixWorld.copy(J.transformLink),D.name=M?B.PropertyBinding.sanitizeNodeName(M):"",D.ID=I,W.bones[te]=D,q!==null&&D.add(q)}})}}),D},createCamera:function(A){var C,I;if(A.children.forEach(function(ne){var se=n.Objects.NodeAttribute[ne.ID];se!==void 0&&(I=se)}),I===void 0)C=new B.Object3D;else{var M=0;I.CameraProjectionType!==void 0&&I.CameraProjectionType.value===1&&(M=1);var D=1;I.NearPlane!==void 0&&(D=I.NearPlane.value/1e3);var T=1e3;I.FarPlane!==void 0&&(T=I.FarPlane.value/1e3);var H=window.innerWidth,W=window.innerHeight;I.AspectWidth!==void 0&&I.AspectHeight!==void 0&&(H=I.AspectWidth.value,W=I.AspectHeight.value);var J=H/W,te=45;I.FieldOfView!==void 0&&(te=I.FieldOfView.value);var q=I.FocalLength?I.FocalLength.value:null;switch(M){case 0:C=new B.PerspectiveCamera(te,J,D,T),q!==null&&C.setFocalLength(q);break;case 1:C=new B.OrthographicCamera(-H/2,H/2,W/2,-W/2,D,T);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+M+"."),C=new B.Object3D;break}}return C},createLight:function(A){var C,I;if(A.children.forEach(function(q){var ne=n.Objects.NodeAttribute[q.ID];ne!==void 0&&(I=ne)}),I===void 0)C=new B.Object3D;else{var M;I.LightType===void 0?M=0:M=I.LightType.value;var D=16777215;I.Color!==void 0&&(D=new B.Color().fromArray(I.Color.value));var T=I.Intensity===void 0?1:I.Intensity.value/100;I.CastLightOnObject!==void 0&&I.CastLightOnObject.value===0&&(T=0);var H=0;I.FarAttenuationEnd!==void 0&&(I.EnableFarAttenuation!==void 0&&I.EnableFarAttenuation.value===0?H=0:H=I.FarAttenuationEnd.value);var W=1;switch(M){case 0:C=new B.PointLight(D,T,H,W);break;case 1:C=new B.DirectionalLight(D,T);break;case 2:var J=Math.PI/3;I.InnerAngle!==void 0&&(J=B.MathUtils.degToRad(I.InnerAngle.value));var te=0;I.OuterAngle!==void 0&&(te=B.MathUtils.degToRad(I.OuterAngle.value),te=Math.max(te,1)),C=new B.SpotLight(D,T,H,J,te,W);break;default:console.warn("THREE.FBXLoader: Unknown light type "+I.LightType.value+", defaulting to a PointLight."),C=new B.PointLight(D,T);break}I.CastShadows!==void 0&&I.CastShadows.value===1&&(C.castShadow=!0)}return C},createMesh:function(A,C,I){var M,D=null,T=null,H=[];return A.children.forEach(function(W){C.has(W.ID)&&(D=C.get(W.ID)),I.has(W.ID)&&H.push(I.get(W.ID))}),H.length>1?T=H:H.length>0?T=H[0]:(T=new B.MeshPhongMaterial({color:13421772}),H.push(T)),"color"in D.attributes&&H.forEach(function(W){W.vertexColors=!0}),D.FBX_Deformer?(H.forEach(function(W){W.skinning=!0}),M=new B.SkinnedMesh(D,T),M.normalizeSkinWeights()):M=new B.Mesh(D,T),M},createCurve:function(A,C){var I=A.children.reduce(function(D,T){return C.has(T.ID)&&(D=C.get(T.ID)),D},null),M=new B.LineBasicMaterial({color:3342591,linewidth:1});return new B.Line(I,M)},getTransformData:function(A,C){var I={};"InheritType"in C&&(I.inheritType=parseInt(C.InheritType.value)),"RotationOrder"in C?I.eulerOrder=E(C.RotationOrder.value):I.eulerOrder="ZYX","Lcl_Translation"in C&&(I.translation=C.Lcl_Translation.value),"PreRotation"in C&&(I.preRotation=C.PreRotation.value),"Lcl_Rotation"in C&&(I.rotation=C.Lcl_Rotation.value),"PostRotation"in C&&(I.postRotation=C.PostRotation.value),"Lcl_Scaling"in C&&(I.scale=C.Lcl_Scaling.value),"ScalingOffset"in C&&(I.scalingOffset=C.ScalingOffset.value),"ScalingPivot"in C&&(I.scalingPivot=C.ScalingPivot.value),"RotationOffset"in C&&(I.rotationOffset=C.RotationOffset.value),"RotationPivot"in C&&(I.rotationPivot=C.RotationPivot.value),A.userData.transformData=I},setLookAtProperties:function(A,C){if("LookAtProperty"in C){var I=t.get(A.ID).children;I.forEach(function(M){if(M.relationship==="LookAtProperty"){var D=n.Objects.Model[M.ID];if("Lcl_Translation"in D){var T=D.Lcl_Translation.value;A.target!==void 0?(A.target.position.fromArray(T),e.add(A.target)):A.lookAt(new B.Vector3().fromArray(T))}}})}},bindSkeleton:function(A,C,I){var M=this.parsePoseNodes();for(var D in A){var T=A[D],H=t.get(parseInt(T.ID)).parents;H.forEach(function(W){if(C.has(W.ID)){var J=W.ID,te=t.get(J);te.parents.forEach(function(q){if(I.has(q.ID)){var ne=I.get(q.ID);ne.bind(new B.Skeleton(T.bones),M[q.ID])}})}})}},parsePoseNodes:function(){var A={};if("Pose"in n.Objects){var C=n.Objects.Pose;for(var I in C)if(C[I].attrType==="BindPose"){var M=C[I].PoseNode;Array.isArray(M)?M.forEach(function(D){A[D.Node]=new B.Matrix4().fromArray(D.Matrix.a)}):A[M.Node]=new B.Matrix4().fromArray(M.Matrix.a)}}return A},createAmbientLight:function(){if("GlobalSettings"in n&&"AmbientColor"in n.GlobalSettings){var A=n.GlobalSettings.AmbientColor.value,C=A[0],I=A[1],M=A[2];if(C!==0||I!==0||M!==0){var D=new B.Color(C,I,M);e.add(new B.AmbientLight(D,1))}}},setupMorphMaterials:function(){var A=this;e.traverse(function(C){C.isMesh&&C.geometry.morphAttributes.position&&C.geometry.morphAttributes.position.length&&(Array.isArray(C.material)?C.material.forEach(function(I,M){A.setupMorphMaterial(C,I,M)}):A.setupMorphMaterial(C,C.material))})},setupMorphMaterial:function(A,C,I){var M=A.uuid,D=C.uuid,T=!1;if(e.traverse(function(W){W.isMesh&&(Array.isArray(W.material)?W.material.forEach(function(J){J.uuid===D&&W.uuid!==M&&(T=!0)}):W.material.uuid===D&&W.uuid!==M&&(T=!0))}),T===!0){var H=C.clone();H.morphTargets=!0,I===void 0?A.material=H:A.material[I]=H}else C.morphTargets=!0}};function r(){}r.prototype={constructor:r,parse:function(A){var C=new Map;if("Geometry"in n.Objects){var I=n.Objects.Geometry;for(var M in I){var D=t.get(parseInt(M)),T=this.parseGeometry(D,I[M],A);C.set(parseInt(M),T)}}return C},parseGeometry:function(A,C,I){switch(C.attrType){case"Mesh":return this.parseMeshGeometry(A,C,I);case"NurbsCurve":return this.parseNurbsGeometry(C)}},parseMeshGeometry:function(A,C,I){var M=I.skeletons,D=[],T=A.parents.map(function(q){return n.Objects.Model[q.ID]});if(T.length!==0){var H=A.children.reduce(function(q,ne){return M[ne.ID]!==void 0&&(q=M[ne.ID]),q},null);A.children.forEach(function(q){I.morphTargets[q.ID]!==void 0&&D.push(I.morphTargets[q.ID])});var W=T[0],J={};"RotationOrder"in W&&(J.eulerOrder=E(W.RotationOrder.value)),"InheritType"in W&&(J.inheritType=parseInt(W.InheritType.value)),"GeometricTranslation"in W&&(J.translation=W.GeometricTranslation.value),"GeometricRotation"in W&&(J.rotation=W.GeometricRotation.value),"GeometricScaling"in W&&(J.scale=W.GeometricScaling.value);var te=x(J);return this.genGeometry(C,H,D,te)}},genGeometry:function(A,C,I,M){var D=new B.BufferGeometry;A.attrName&&(D.name=A.attrName);var T=this.parseGeoNode(A,C),H=this.genBuffers(T),W=new B.Float32BufferAttribute(H.vertex,3);if(W.applyMatrix4(M),D.setAttribute("position",W),H.colors.length>0&&D.setAttribute("color",new B.Float32BufferAttribute(H.colors,3)),C&&(D.setAttribute("skinIndex",new B.Uint16BufferAttribute(H.weightsIndices,4)),D.setAttribute("skinWeight",new B.Float32BufferAttribute(H.vertexWeights,4)),D.FBX_Deformer=C),H.normal.length>0){var J=new B.Matrix3().getNormalMatrix(M),te=new B.Float32BufferAttribute(H.normal,3);te.applyNormalMatrix(J),D.setAttribute("normal",te)}if(H.uvs.forEach(function(ze,Ce){var ce="uv"+(Ce+1).toString();Ce===0&&(ce="uv"),D.setAttribute(ce,new B.Float32BufferAttribute(H.uvs[Ce],2))}),T.material&&T.material.mappingType!=="AllSame"){var q=H.materialIndex[0],ne=0;if(H.materialIndex.forEach(function(ze,Ce){ze!==q&&(D.addGroup(ne,Ce-ne,q),q=ze,ne=Ce)}),D.groups.length>0){var se=D.groups[D.groups.length-1],ue=se.start+se.count;ue!==H.materialIndex.length&&D.addGroup(ue,H.materialIndex.length-ue,q)}D.groups.length===0&&D.addGroup(0,H.materialIndex.length,H.materialIndex[0])}return this.addMorphTargets(D,A,I,M),D},parseGeoNode:function(A,C){var I={};if(I.vertexPositions=A.Vertices!==void 0?A.Vertices.a:[],I.vertexIndices=A.PolygonVertexIndex!==void 0?A.PolygonVertexIndex.a:[],A.LayerElementColor&&(I.color=this.parseVertexColors(A.LayerElementColor[0])),A.LayerElementMaterial&&(I.material=this.parseMaterialIndices(A.LayerElementMaterial[0])),A.LayerElementNormal&&(I.normal=this.parseNormals(A.LayerElementNormal[0])),A.LayerElementUV){I.uv=[];for(var M=0;A.LayerElementUV[M];)I.uv.push(this.parseUVs(A.LayerElementUV[M])),M++}return I.weightTable={},C!==null&&(I.skeleton=C,C.rawBones.forEach(function(D,T){D.indices.forEach(function(H,W){I.weightTable[H]===void 0&&(I.weightTable[H]=[]),I.weightTable[H].push({id:T,weight:D.weights[W]})})})),I},genBuffers:function(A){var C={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},I=0,M=0,D=!1,T=[],H=[],W=[],J=[],te=[],q=[],ne=this;return A.vertexIndices.forEach(function(se,ue){var ze=!1;se<0&&(se=se^-1,ze=!0);var Ce=[],ce=[];if(T.push(se*3,se*3+1,se*3+2),A.color){var le=v(ue,I,se,A.color);W.push(le[0],le[1],le[2])}if(A.skeleton){if(A.weightTable[se]!==void 0&&A.weightTable[se].forEach(function(Re){ce.push(Re.weight),Ce.push(Re.id)}),ce.length>4){D||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),D=!0);var he=[0,0,0,0],ke=[0,0,0,0];ce.forEach(function(Re,Te){var He=Re,pe=Ce[Te];ke.forEach(function(Le,Oe,rt){if(He>Le){rt[Oe]=He,He=Le;var st=he[Oe];he[Oe]=pe,pe=st}})}),Ce=he,ce=ke}for(;ce.length<4;)ce.push(0),Ce.push(0);for(var be=0;be<4;++be)te.push(ce[be]),q.push(Ce[be])}if(A.normal){var le=v(ue,I,se,A.normal);H.push(le[0],le[1],le[2])}if(A.material&&A.material.mappingType!=="AllSame")var We=v(ue,I,se,A.material)[0];A.uv&&A.uv.forEach(function(Re,Te){var He=v(ue,I,se,Re);J[Te]===void 0&&(J[Te]=[]),J[Te].push(He[0]),J[Te].push(He[1])}),M++,ze&&(ne.genFace(C,A,T,We,H,W,J,te,q,M),I++,M=0,T=[],H=[],W=[],J=[],te=[],q=[])}),C},genFace:function(A,C,I,M,D,T,H,W,J,te){for(var q=2;q<te;q++)A.vertex.push(C.vertexPositions[I[0]]),A.vertex.push(C.vertexPositions[I[1]]),A.vertex.push(C.vertexPositions[I[2]]),A.vertex.push(C.vertexPositions[I[(q-1)*3]]),A.vertex.push(C.vertexPositions[I[(q-1)*3+1]]),A.vertex.push(C.vertexPositions[I[(q-1)*3+2]]),A.vertex.push(C.vertexPositions[I[q*3]]),A.vertex.push(C.vertexPositions[I[q*3+1]]),A.vertex.push(C.vertexPositions[I[q*3+2]]),C.skeleton&&(A.vertexWeights.push(W[0]),A.vertexWeights.push(W[1]),A.vertexWeights.push(W[2]),A.vertexWeights.push(W[3]),A.vertexWeights.push(W[(q-1)*4]),A.vertexWeights.push(W[(q-1)*4+1]),A.vertexWeights.push(W[(q-1)*4+2]),A.vertexWeights.push(W[(q-1)*4+3]),A.vertexWeights.push(W[q*4]),A.vertexWeights.push(W[q*4+1]),A.vertexWeights.push(W[q*4+2]),A.vertexWeights.push(W[q*4+3]),A.weightsIndices.push(J[0]),A.weightsIndices.push(J[1]),A.weightsIndices.push(J[2]),A.weightsIndices.push(J[3]),A.weightsIndices.push(J[(q-1)*4]),A.weightsIndices.push(J[(q-1)*4+1]),A.weightsIndices.push(J[(q-1)*4+2]),A.weightsIndices.push(J[(q-1)*4+3]),A.weightsIndices.push(J[q*4]),A.weightsIndices.push(J[q*4+1]),A.weightsIndices.push(J[q*4+2]),A.weightsIndices.push(J[q*4+3])),C.color&&(A.colors.push(T[0]),A.colors.push(T[1]),A.colors.push(T[2]),A.colors.push(T[(q-1)*3]),A.colors.push(T[(q-1)*3+1]),A.colors.push(T[(q-1)*3+2]),A.colors.push(T[q*3]),A.colors.push(T[q*3+1]),A.colors.push(T[q*3+2])),C.material&&C.material.mappingType!=="AllSame"&&(A.materialIndex.push(M),A.materialIndex.push(M),A.materialIndex.push(M)),C.normal&&(A.normal.push(D[0]),A.normal.push(D[1]),A.normal.push(D[2]),A.normal.push(D[(q-1)*3]),A.normal.push(D[(q-1)*3+1]),A.normal.push(D[(q-1)*3+2]),A.normal.push(D[q*3]),A.normal.push(D[q*3+1]),A.normal.push(D[q*3+2])),C.uv&&C.uv.forEach(function(ne,se){A.uvs[se]===void 0&&(A.uvs[se]=[]),A.uvs[se].push(H[se][0]),A.uvs[se].push(H[se][1]),A.uvs[se].push(H[se][(q-1)*2]),A.uvs[se].push(H[se][(q-1)*2+1]),A.uvs[se].push(H[se][q*2]),A.uvs[se].push(H[se][q*2+1])})},addMorphTargets:function(A,C,I,M){if(I.length!==0){A.morphTargetsRelative=!0,A.morphAttributes.position=[];var D=this;I.forEach(function(T){T.rawTargets.forEach(function(H){var W=n.Objects.Geometry[H.geoID];W!==void 0&&D.genMorphGeometry(A,C,W,M,H.name)})})}},genMorphGeometry:function(A,C,I,M,D){for(var T=C.PolygonVertexIndex!==void 0?C.PolygonVertexIndex.a:[],H=I.Vertices!==void 0?I.Vertices.a:[],W=I.Indexes!==void 0?I.Indexes.a:[],J=A.attributes.position.count*3,te=new Float32Array(J),q=0;q<W.length;q++){var ne=W[q]*3;te[ne]=H[q*3],te[ne+1]=H[q*3+1],te[ne+2]=H[q*3+2]}var se={vertexIndices:T,vertexPositions:te},ue=this.genBuffers(se),ze=new B.Float32BufferAttribute(ue.vertex,3);ze.name=D||I.attrName,ze.applyMatrix4(M),A.morphAttributes.position.push(ze)},parseNormals:function(A){var C=A.MappingInformationType,I=A.ReferenceInformationType,M=A.Normals.a,D=[];return I==="IndexToDirect"&&("NormalIndex"in A?D=A.NormalIndex.a:"NormalsIndex"in A&&(D=A.NormalsIndex.a)),{dataSize:3,buffer:M,indices:D,mappingType:C,referenceType:I}},parseUVs:function(A){var C=A.MappingInformationType,I=A.ReferenceInformationType,M=A.UV.a,D=[];return I==="IndexToDirect"&&(D=A.UVIndex.a),{dataSize:2,buffer:M,indices:D,mappingType:C,referenceType:I}},parseVertexColors:function(A){var C=A.MappingInformationType,I=A.ReferenceInformationType,M=A.Colors.a,D=[];return I==="IndexToDirect"&&(D=A.ColorIndex.a),{dataSize:4,buffer:M,indices:D,mappingType:C,referenceType:I}},parseMaterialIndices:function(A){var C=A.MappingInformationType,I=A.ReferenceInformationType;if(C==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:I};for(var M=A.Materials.a,D=[],T=0;T<M.length;++T)D.push(T);return{dataSize:1,buffer:M,indices:D,mappingType:C,referenceType:I}},parseNurbsGeometry:function(A){if(ps===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new B.BufferGeometry;var C=parseInt(A.Order);if(isNaN(C))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",A.Order,A.id),new B.BufferGeometry;for(var I=C-1,M=A.KnotVector.a,D=[],T=A.Points.a,H=0,W=T.length;H<W;H+=4)D.push(new B.Vector4().fromArray(T,H));var J,te;if(A.Form==="Closed")D.push(D[0]);else if(A.Form==="Periodic"){J=I,te=M.length-1-J;for(var H=0;H<I;++H)D.push(D[H])}var q=new ps(I,M,D,J,te),ne=q.getPoints(D.length*7),se=new Float32Array(ne.length*3);ne.forEach(function(ze,Ce){ze.toArray(se,Ce*3)});var ue=new B.BufferGeometry;return ue.setAttribute("position",new B.BufferAttribute(se,3)),ue}};function o(){}o.prototype={constructor:o,parse:function(){var A=[],C=this.parseClips();if(C!==void 0)for(var I in C){var M=C[I],D=this.addClip(M);A.push(D)}return A},parseClips:function(){if(n.Objects.AnimationCurve!==void 0){var A=this.parseAnimationCurveNodes();this.parseAnimationCurves(A);var C=this.parseAnimationLayers(A),I=this.parseAnimStacks(C);return I}},parseAnimationCurveNodes:function(){var A=n.Objects.AnimationCurveNode,C=new Map;for(var I in A){var M=A[I];if(M.attrName.match(/S|R|T|DeformPercent/)!==null){var D={id:M.id,attr:M.attrName,curves:{}};C.set(D.id,D)}}return C},parseAnimationCurves:function(A){var C=n.Objects.AnimationCurve;for(var I in C){var M={id:C[I].id,times:C[I].KeyTime.a.map(p),values:C[I].KeyValueFloat.a},D=t.get(M.id);if(D!==void 0){var T=D.parents[0].ID,H=D.parents[0].relationship;H.match(/X/)?A.get(T).curves.x=M:H.match(/Y/)?A.get(T).curves.y=M:H.match(/Z/)?A.get(T).curves.z=M:H.match(/d|DeformPercent/)&&A.has(T)&&(A.get(T).curves.morph=M)}}},parseAnimationLayers:function(A){var C=n.Objects.AnimationLayer,I=new Map;for(var M in C){var D=[],T=t.get(parseInt(M));if(T!==void 0){var H=T.children;H.forEach(function(W,J){if(A.has(W.ID)){var te=A.get(W.ID);if(te.curves.x!==void 0||te.curves.y!==void 0||te.curves.z!==void 0){if(D[J]===void 0){var q=t.get(W.ID).parents.filter(function(ce){return ce.relationship!==void 0})[0].ID;if(q!==void 0){var ne=n.Objects.Model[q.toString()];if(ne===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",W);return}var se={modelName:ne.attrName?B.PropertyBinding.sanitizeNodeName(ne.attrName):"",ID:ne.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};e.traverse(function(ce){ce.ID===ne.id&&(se.transform=ce.matrix,ce.userData.transformData&&(se.eulerOrder=ce.userData.transformData.eulerOrder))}),se.transform||(se.transform=new B.Matrix4),"PreRotation"in ne&&(se.preRotation=ne.PreRotation.value),"PostRotation"in ne&&(se.postRotation=ne.PostRotation.value),D[J]=se}}D[J]&&(D[J][te.attr]=te)}else if(te.curves.morph!==void 0){if(D[J]===void 0){var ue=t.get(W.ID).parents.filter(function(ke){return ke.relationship!==void 0})[0].ID,ze=t.get(ue).parents[0].ID,Ce=t.get(ze).parents[0].ID,q=t.get(Ce).parents[0].ID,ne=n.Objects.Model[q],se={modelName:ne.attrName?B.PropertyBinding.sanitizeNodeName(ne.attrName):"",morphName:n.Objects.Deformer[ue].attrName};D[J]=se}D[J][te.attr]=te}}}),I.set(parseInt(M),D)}}return I},parseAnimStacks:function(A){var C=n.Objects.AnimationStack,I={};for(var M in C){var D=t.get(parseInt(M)).children;D.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var T=A.get(D[0].ID);I[M]={name:C[M].attrName,layer:T}}return I},addClip:function(A){var C=[],I=this;return A.layer.forEach(function(M){C=C.concat(I.generateTracks(M))}),new B.AnimationClip(A.name,-1,C)},generateTracks:function(A){var C=[],I=new B.Vector3,M=new B.Quaternion,D=new B.Vector3;if(A.transform&&A.transform.decompose(I,M,D),I=I.toArray(),M=new B.Euler().setFromQuaternion(M,A.eulerOrder).toArray(),D=D.toArray(),A.T!==void 0&&Object.keys(A.T.curves).length>0){var T=this.generateVectorTrack(A.modelName,A.T.curves,I,"position");T!==void 0&&C.push(T)}if(A.R!==void 0&&Object.keys(A.R.curves).length>0){var H=this.generateRotationTrack(A.modelName,A.R.curves,M,A.preRotation,A.postRotation,A.eulerOrder);H!==void 0&&C.push(H)}if(A.S!==void 0&&Object.keys(A.S.curves).length>0){var W=this.generateVectorTrack(A.modelName,A.S.curves,D,"scale");W!==void 0&&C.push(W)}if(A.DeformPercent!==void 0){var J=this.generateMorphTrack(A);J!==void 0&&C.push(J)}return C},generateVectorTrack:function(A,C,I,M){var D=this.getTimesForAllAxes(C),T=this.getKeyframeTrackValues(D,C,I);return new B.VectorKeyframeTrack(A+"."+M,D,T)},generateRotationTrack:function(A,C,I,M,D,T){C.x!==void 0&&(this.interpolateRotations(C.x),C.x.values=C.x.values.map(B.MathUtils.degToRad)),C.y!==void 0&&(this.interpolateRotations(C.y),C.y.values=C.y.values.map(B.MathUtils.degToRad)),C.z!==void 0&&(this.interpolateRotations(C.z),C.z.values=C.z.values.map(B.MathUtils.degToRad));var H=this.getTimesForAllAxes(C),W=this.getKeyframeTrackValues(H,C,I);M!==void 0&&(M=M.map(B.MathUtils.degToRad),M.push(T),M=new B.Euler().fromArray(M),M=new B.Quaternion().setFromEuler(M)),D!==void 0&&(D=D.map(B.MathUtils.degToRad),D.push(T),D=new B.Euler().fromArray(D),D=new B.Quaternion().setFromEuler(D).inverse());for(var J=new B.Quaternion,te=new B.Euler,q=[],ne=0;ne<W.length;ne+=3)te.set(W[ne],W[ne+1],W[ne+2],T),J.setFromEuler(te),M!==void 0&&J.premultiply(M),D!==void 0&&J.multiply(D),J.toArray(q,ne/3*4);return new B.QuaternionKeyframeTrack(A+".quaternion",H,q)},generateMorphTrack:function(A){var C=A.DeformPercent.curves.morph,I=C.values.map(function(D){return D/100}),M=e.getObjectByName(A.modelName).morphTargetDictionary[A.morphName];return new B.NumberKeyframeTrack(A.modelName+".morphTargetInfluences["+M+"]",C.times,I)},getTimesForAllAxes:function(A){var C=[];return A.x!==void 0&&(C=C.concat(A.x.times)),A.y!==void 0&&(C=C.concat(A.y.times)),A.z!==void 0&&(C=C.concat(A.z.times)),C=C.sort(function(I,M){return I-M}).filter(function(I,M,D){return D.indexOf(I)==M}),C},getKeyframeTrackValues:function(A,C,I){var M=I,D=[],T=-1,H=-1,W=-1;return A.forEach(function(J){if(C.x&&(T=C.x.times.indexOf(J)),C.y&&(H=C.y.times.indexOf(J)),C.z&&(W=C.z.times.indexOf(J)),T!==-1){var te=C.x.values[T];D.push(te),M[0]=te}else D.push(M[0]);if(H!==-1){var q=C.y.values[H];D.push(q),M[1]=q}else D.push(M[1]);if(W!==-1){var ne=C.z.values[W];D.push(ne),M[2]=ne}else D.push(M[2])}),D},interpolateRotations:function(A){for(var C=1;C<A.values.length;C++){var I=A.values[C-1],M=A.values[C]-I,D=Math.abs(M);if(D>=180){for(var T=D/180,H=M/T,W=I+H,J=A.times[C-1],te=A.times[C]-J,q=te/T,ne=J+q,se=[],ue=[];ne<A.times[C];)se.push(ne),ne+=q,ue.push(W),W+=H;A.times=O(A.times,C,se),A.values=O(A.values,C,ue)}}}};function a(){}a.prototype={constructor:a,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(A){this.nodeStack.push(A),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(A,C){this.currentProp=A,this.currentPropName=C},parse:function(A){this.currentIndent=0,this.allNodes=new h,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var C=this,I=A.split(/[\r\n]+/);return I.forEach(function(M,D){var T=M.match(/^[\s\t]*;/),H=M.match(/^[\s\t]*$/);if(!(T||H)){var W=M.match("^\\t{"+C.currentIndent+"}(\\w+):(.*){",""),J=M.match("^\\t{"+C.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),te=M.match("^\\t{"+(C.currentIndent-1)+"}}");W?C.parseNodeBegin(M,W):J?C.parseNodeProperty(M,J,I[++D]):te?C.popStack():M.match(/^[^\s\t}]/)&&C.parseNodePropertyContinued(M)}}),this.allNodes},parseNodeBegin:function(A,C){var I=C[1].trim().replace(/^"/,"").replace(/"$/,""),M=C[2].split(",").map(function(W){return W.trim().replace(/^"/,"").replace(/"$/,"")}),D={name:I},T=this.parseNodeAttr(M),H=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(I,D):I in H?(I==="PoseNode"?H.PoseNode.push(D):H[I].id!==void 0&&(H[I]={},H[I][H[I].id]=H[I]),T.id!==""&&(H[I][T.id]=D)):typeof T.id=="number"?(H[I]={},H[I][T.id]=D):I!=="Properties70"&&(I==="PoseNode"?H[I]=[D]:H[I]=D),typeof T.id=="number"&&(D.id=T.id),T.name!==""&&(D.attrName=T.name),T.type!==""&&(D.attrType=T.type),this.pushStack(D)},parseNodeAttr:function(A){var C=A[0];A[0]!==""&&(C=parseInt(A[0]),isNaN(C)&&(C=A[0]));var I="",M="";return A.length>1&&(I=A[1].replace(/^(\w+)::/,""),M=A[2]),{id:C,name:I,type:M}},parseNodeProperty:function(A,C,I){var M=C[1].replace(/^"/,"").replace(/"$/,"").trim(),D=C[2].replace(/^"/,"").replace(/"$/,"").trim();M==="Content"&&D===","&&(D=I.replace(/"/g,"").replace(/,$/,"").trim());var T=this.getCurrentNode(),H=T.name;if(H==="Properties70"){this.parseNodeSpecialProperty(A,M,D);return}if(M==="C"){var W=D.split(",").slice(1),J=parseInt(W[0]),te=parseInt(W[1]),q=D.split(",").slice(3);q=q.map(function(ne){return ne.trim().replace(/^"/,"")}),M="connections",D=[J,te],R(D,q),T[M]===void 0&&(T[M]=[])}M==="Node"&&(T.id=D),M in T&&Array.isArray(T[M])?T[M].push(D):M!=="a"?T[M]=D:T.a=D,this.setCurrentProp(T,M),M==="a"&&D.slice(-1)!==","&&(T.a=L(D))},parseNodePropertyContinued:function(A){var C=this.getCurrentNode();C.a+=A,A.slice(-1)!==","&&(C.a=L(C.a))},parseNodeSpecialProperty:function(A,C,I){var M=I.split('",').map(function(te){return te.trim().replace(/^\"/,"").replace(/\s/,"_")}),D=M[0],T=M[1],H=M[2],W=M[3],J=M[4];switch(T){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":J=parseFloat(J);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":J=L(J);break}this.getPrevNode()[D]={type:T,type2:H,flag:W,value:J},this.setCurrentProp(this.getPrevNode(),D)}};function l(){}l.prototype={constructor:l,parse:function(A){var C=new c(A);C.skip(23);var I=C.getUint32();console.info("THREE.FBXLoader: FBX binary version: "+I);for(var M=new h;!this.endOfContent(C);){var D=this.parseNode(C,I);D!==null&&M.add(D.name,D)}return M},endOfContent:function(A){return A.size()%16===0?(A.getOffset()+160+16&-16)>=A.size():A.getOffset()+160+16>=A.size()},parseNode:function(A,C){var I={},M=C>=7500?A.getUint64():A.getUint32(),D=C>=7500?A.getUint64():A.getUint32();C>=7500?A.getUint64():A.getUint32();var T=A.getUint8(),H=A.getString(T);if(M===0)return null;for(var W=[],J=0;J<D;J++)W.push(this.parseProperty(A));var te=W.length>0?W[0]:"",q=W.length>1?W[1]:"",ne=W.length>2?W[2]:"";for(I.singleProperty=D===1&&A.getOffset()===M;M>A.getOffset();){var se=this.parseNode(A,C);se!==null&&this.parseSubNode(H,I,se)}return I.propertyList=W,typeof te=="number"&&(I.id=te),q!==""&&(I.attrName=q),ne!==""&&(I.attrType=ne),H!==""&&(I.name=H),I},parseSubNode:function(A,C,I){if(I.singleProperty===!0){var M=I.propertyList[0];Array.isArray(M)?(C[I.name]=I,I.a=M):C[I.name]=M}else if(A==="Connections"&&I.name==="C"){var D=[];I.propertyList.forEach(function(ne,se){se!==0&&D.push(ne)}),C.connections===void 0&&(C.connections=[]),C.connections.push(D)}else if(I.name==="Properties70"){var T=Object.keys(I);T.forEach(function(ne){C[ne]=I[ne]})}else if(A==="Properties70"&&I.name==="P"){var H=I.propertyList[0],W=I.propertyList[1],J=I.propertyList[2],te=I.propertyList[3],q;H.indexOf("Lcl ")===0&&(H=H.replace("Lcl ","Lcl_")),W.indexOf("Lcl ")===0&&(W=W.replace("Lcl ","Lcl_")),W==="Color"||W==="ColorRGB"||W==="Vector"||W==="Vector3D"||W.indexOf("Lcl_")===0?q=[I.propertyList[4],I.propertyList[5],I.propertyList[6]]:q=I.propertyList[4],C[H]={type:W,type2:J,flag:te,value:q}}else C[I.name]===void 0?typeof I.id=="number"?(C[I.name]={},C[I.name][I.id]=I):C[I.name]=I:I.name==="PoseNode"?(Array.isArray(C[I.name])||(C[I.name]=[C[I.name]]),C[I.name].push(I)):C[I.name][I.id]===void 0&&(C[I.name][I.id]=I)},parseProperty:function(A){var C=A.getString(1);switch(C){case"C":return A.getBoolean();case"D":return A.getFloat64();case"F":return A.getFloat32();case"I":return A.getInt32();case"L":return A.getInt64();case"R":var I=A.getUint32();return A.getArrayBuffer(I);case"S":var I=A.getUint32();return A.getString(I);case"Y":return A.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var M=A.getUint32(),D=A.getUint32(),T=A.getUint32();if(D===0)switch(C){case"b":case"c":return A.getBooleanArray(M);case"d":return A.getFloat64Array(M);case"f":return A.getFloat32Array(M);case"i":return A.getInt32Array(M);case"l":return A.getInt64Array(M)}typeof ep=="undefined"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var H=new ep.Inflate(new Uint8Array(A.getArrayBuffer(T))),W=new c(H.decompress().buffer);switch(C){case"b":case"c":return W.getBooleanArray(M);case"d":return W.getFloat64Array(M);case"f":return W.getFloat32Array(M);case"i":return W.getInt32Array(M);case"l":return W.getInt64Array(M)}default:throw new Error("THREE.FBXLoader: Unknown property type "+C)}}};function c(A,C){this.dv=new DataView(A),this.offset=0,this.littleEndian=C!==void 0?C:!0}c.prototype={constructor:c,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(A){this.offset+=A},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(A){for(var C=[],I=0;I<A;I++)C.push(this.getBoolean());return C},getUint8:function(){var A=this.dv.getUint8(this.offset);return this.offset+=1,A},getInt16:function(){var A=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,A},getInt32:function(){var A=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,A},getInt32Array:function(A){for(var C=[],I=0;I<A;I++)C.push(this.getInt32());return C},getUint32:function(){var A=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,A},getInt64:function(){var A,C;return this.littleEndian?(A=this.getUint32(),C=this.getUint32()):(C=this.getUint32(),A=this.getUint32()),C&2147483648?(C=~C&4294967295,A=~A&4294967295,A===4294967295&&(C=C+1&4294967295),A=A+1&4294967295,-(C*4294967296+A)):C*4294967296+A},getInt64Array:function(A){for(var C=[],I=0;I<A;I++)C.push(this.getInt64());return C},getUint64:function(){var A,C;return this.littleEndian?(A=this.getUint32(),C=this.getUint32()):(C=this.getUint32(),A=this.getUint32()),C*4294967296+A},getFloat32:function(){var A=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,A},getFloat32Array:function(A){for(var C=[],I=0;I<A;I++)C.push(this.getFloat32());return C},getFloat64:function(){var A=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,A},getFloat64Array:function(A){for(var C=[],I=0;I<A;I++)C.push(this.getFloat64());return C},getArrayBuffer:function(A){var C=this.dv.buffer.slice(this.offset,this.offset+A);return this.offset+=A,C},getString:function(A){for(var C=[],I=0;I<A;I++)C[I]=this.getUint8();var M=C.indexOf(0);return M>=0&&(C=C.slice(0,M)),B.LoaderUtils.decodeText(new Uint8Array(C))}};function h(){}h.prototype={constructor:h,add:function(A,C){this[A]=C}};function d(A){var C="Kaydara FBX Binary  \0";return A.byteLength>=C.length&&C===S(A,0,C.length)}function f(A){var C=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],I=0;function M(H){var W=A[H-1];return A=A.slice(I+H),I++,W}for(var D=0;D<C.length;++D){var T=M(1);if(T===C[D])return!1}return!0}function g(A){var C=/FBXVersion: (\d+)/,I=A.match(C);if(I){var M=parseInt(I[1]);return M}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function p(A){return A/46186158e3}var m=[];function v(A,C,I,M){var D;switch(M.mappingType){case"ByPolygonVertex":D=A;break;case"ByPolygon":D=C;break;case"ByVertice":D=I;break;case"AllSame":D=M.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+M.mappingType)}M.referenceType==="IndexToDirect"&&(D=M.indices[D]);var T=D*M.dataSize,H=T+M.dataSize;return z(m,M.buffer,T,H)}var b=new B.Euler,w=new B.Vector3;function x(A){var C=new B.Matrix4,I=new B.Matrix4,M=new B.Matrix4,D=new B.Matrix4,T=new B.Matrix4,H=new B.Matrix4,W=new B.Matrix4,J=new B.Matrix4,te=new B.Matrix4,q=new B.Matrix4,ne=new B.Matrix4,se=A.inheritType?A.inheritType:0;if(A.translation&&C.setPosition(w.fromArray(A.translation)),A.preRotation){var ue=A.preRotation.map(B.MathUtils.degToRad);ue.push(A.eulerOrder),I.makeRotationFromEuler(b.fromArray(ue))}if(A.rotation){var ue=A.rotation.map(B.MathUtils.degToRad);ue.push(A.eulerOrder),M.makeRotationFromEuler(b.fromArray(ue))}if(A.postRotation){var ue=A.postRotation.map(B.MathUtils.degToRad);ue.push(A.eulerOrder),D.makeRotationFromEuler(b.fromArray(ue))}A.scale&&T.scale(w.fromArray(A.scale)),A.scalingOffset&&W.setPosition(w.fromArray(A.scalingOffset)),A.scalingPivot&&H.setPosition(w.fromArray(A.scalingPivot)),A.rotationOffset&&J.setPosition(w.fromArray(A.rotationOffset)),A.rotationPivot&&te.setPosition(w.fromArray(A.rotationPivot)),A.parentMatrixWorld&&(q=A.parentMatrixWorld);var ze=I.multiply(M).multiply(D),Ce=new B.Matrix4;q.extractRotation(Ce);var ce=new B.Matrix4;ce.copyPosition(q);var le=new B.Matrix4;le.getInverse(Ce).multiply(q);var he=new B.Matrix4;if(se===0)he.copy(Ce).multiply(ze).multiply(le).multiply(T);else if(se===1)he.copy(Ce).multiply(le).multiply(ze).multiply(T);else{var ke=new B.Matrix4().getInverse(T),be=new B.Matrix4().multiply(le).multiply(ke);he.copy(Ce).multiply(ze).multiply(be).multiply(T)}var We=new B.Matrix4().getInverse(te),Re=new B.Matrix4().getInverse(H),Te=new B.Matrix4;Te.copy(C).multiply(J).multiply(te).multiply(I).multiply(M).multiply(D).multiply(We).multiply(W).multiply(H).multiply(T).multiply(Re);var He=new B.Matrix4().copyPosition(Te),pe=new B.Matrix4().copy(q).multiply(He);return ne.copyPosition(pe),Te=new B.Matrix4().multiply(ne).multiply(he),Te}function E(A){A=A||0;var C=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return A===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),C[0]):C[A]}function L(A){var C=A.split(",").map(function(I){return parseFloat(I)});return C}function S(A,C,I){return C===void 0&&(C=0),I===void 0&&(I=A.byteLength),B.LoaderUtils.decodeText(new Uint8Array(A,C,I))}function R(A,C){for(var I=0,M=A.length,D=C.length;I<D;I++,M++)A[M]=C[I]}function z(A,C,I,M){for(var D=I,T=0;D<M;D++,T++)A[T]=C[D];return A}function O(A,C,I){return A.slice(0,C).concat(I).concat(A.slice(C))}return i}();const R2=(n,t)=>{var m;const e=t.fbx_url||"//vrlab-image4.ljcdn.com/release/web/dipan2.f38a21cc.FBX",i=(m=t.north_rad)!=null?m:void 0,s={};let r={x:0,y:0,z:0},o=[0,0,0],a=1,l=i;n.on("modelLoaded",p);const c=v=>ee(this,null,function*(){var E;const b=(v==null?void 0:v.fbx_url)||e;if(l=(E=v==null?void 0:v.north_rad)!=null?E:i,typeof l!="number")throw new Error('"northRad"配置参数缺失：未配置指南针指向！');const x=yield new ip().loadAsync(b);return Ff(x,{transparent:!0,side:P.DoubleSide,blending:P.AdditiveBlending}),s.object=x,p(),!0}),h=({latitude:v})=>{if(!s.object)return;const b=d(v);b&&(s.object.position.y=b)},d=v=>{if(s.yBase===void 0)return;const b=.6;if(v>=Math.PI/4)return s.yBase-(b+1.6);const w=v*(4/Math.PI);return s.yBase-(b*w+1.6)},f=()=>{if(!s.object)return;const v=d(n.getPose().latitude);v&&(s.object.position.y=v),n.scene.add(s.object),n.needsRender=!0,n.on("cameraDirectionUpdate",h)},g=()=>{s.object&&(n.scene.remove(s.object),n.needsRender=!0,n.off("cameraDirectionUpdate",h))};function p(){const v=s.object;if(!v)return;const b=n.model.bounding,w=b.max.x-b.min.x,x=b.max.z-b.min.z,E=Math.max(w,x),{max:{x:L,z:S},min:{x:R,y:z,z:O}}=b;s.yBase=z,r={x:(L+R)/2,y:z-1.6,z:(S+O)/2},o=[0,l-Math.PI/2,0],a=.0045*E,j2(v,{position:r,rotation:o,scale:a})}return{load:c,disable:g,enable:f}};function F2(n,t){var c,h,d,f,g;const e=(c=t==null?void 0:t.size)!=null?c:512,i=(h=t==null?void 0:t.fontSize)!=null?h:e*(35/256)*1.2,s=(d=t==null?void 0:t.backgroundColor)!=null?d:"rgba(0,0,0,0)",r=(f=t==null?void 0:t.fontColor)!=null?f:"#fff",o=(g=t==null?void 0:t.textAlign)!=null?g:"center",a=document.createElement("canvas");a.setAttribute("width",e+""),a.setAttribute("height",e+"");const l=a.getContext("2d");return l.fillStyle=s,l.fillRect(0,0,e,e),l.font=`${i}px "微软雅黑"`,l.textAlign=o,l.fillStyle=r,l.fillText(n,e/2,e*.7),new B.CanvasTexture(a)}const N2=({x:n,y:t,z:e})=>new B.Vector3(n,t,e),G2=(n,t)=>{var m,v,b;const e={},i=(m=t.animationEnabled)!=null?m:!0,s=(v=t.position)!=null?v:void 0,r=(b=t.rad)!=null?b:void 0,o=t.fbx_url||"//vrlab-image4.ljcdn.com/release/web/entryDoorMini/Anim_Door1.fbx",a=[],l=w=>ee(this,null,function*(){var A,C,I,M,D,T,H,W;const x=(A=w==null?void 0:w.position)!=null?A:s;if(!x)return Promise.reject(new Error("ModelEntryDoorGuidePlugin.load(): position is undefined"));const E=N2(x),L=(C=w==null?void 0:w.rad)!=null?C:r,S=(I=w==null?void 0:w.fbx_url)!=null?I:o;if(e.rad=L,L===void 0)return Promise.reject(new Error(`ModelEntryDoorGuidePlugin.load(): rad is ${L}`));const R=yield new ip().loadAsync(S);R.position.copy(E),R.rotation.z=L,R.scale.set(.8,.8,.8),Ff(R,{transparent:!0,side:P.DoubleSide});const z=(H=(T=(D=(M=R.children)==null?void 0:M[0])==null?void 0:D.children)==null?void 0:T[3])==null?void 0:H.clone();if(!z)return Promise.reject(new Error(`ModelEntryDoorGuidePlugin.load(): textMesh is ${z}`));const O=(W=t.name)!=null?W:"入户门";return z.material=new B.MeshBasicMaterial({transparent:!0,map:F2(O)}),z.renderOrder=3,R.children[0].add(z),e.object=R,!0}),c=()=>{if(e.animation)return;if(!e.object)return console.error("ModelEntryDoorGuidePlugin.initAnimation(): state.object is ",e.object);const w=1,x=new B.AnimationMixer(e.object);a.push(x);const E=x.clipAction(e.object.animations[0]);E.timeScale=w;let L;const S=()=>{let A=0,C=0;const I=1e3/30,M=D=>{A=requestAnimationFrame(M);const T=D-C;T<I||(C=D,a.forEach(H=>H.update(T/1e3)),n.needsRender=!0)};return A=requestAnimationFrame(M),()=>{cancelAnimationFrame(A)}},O={play:()=>{L||(E.play(),L=S(),requestAnimationFrame(()=>{e.object&&e.object.rotation.z!==e.rad&&(e.object.rotation.z=e.rad)}))},stop:()=>{E.stop(),L==null||L(),L=void 0}};e.animation=O},h=w=>{var E;if(!e.object)return console.error("ModelEntryDoorGuidePlugin.enable(): object is ",e.object);((E=w==null?void 0:w.animationEnable)!=null?E:i)&&(e.animation||c(),e.animation.play()),n.scene.add(e.object),n.needsRender=!0},d=()=>{e.object&&(e.animation&&e.animation.stop(),n.scene.remove(e.object),n.needsRender=!0)},f=w=>w==="Floorplan"?h():d();return{load:l,enable:w=>(e.enabled||(e.enabled=!0,f(n.currentMode),n.on("modeChange",f),h(w)),!0),disable:()=>(e.enabled&&(e.enabled=!1,d(),n.off("modeChange",f)),!0)}},H2=Mi;function W2(n,t,e,i=H2.Linear.None){const s=new Ho(n).to(t,e).easing(i);Zr(()=>s.start(0));const r=Zs(a=>{s.update(a)===!1&&r()}),o=[];return s.onDestroy=a=>(o.push(a),s),s.destroy=function(){this.stop(),Object.assign(s,{_onStartCallback:null,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallbackL:null});let a;for(;a=o.shift();)a();r()},s}function U2(n,t){return W2({progress:0},{progress:1},n,t)}var np=(n=>(n.Move="Move",n.Rotate="Rotate",n))(np||{}),Hi=(n=>(n.Clockwise="Clockwise",n.Anticlockwise="Anticlockwise",n.Loop="Loop",n))(Hi||{});const Da=Math.PI*2;function sp(n){return(n%Da+Da)%Da}function rp(n){return n%Da}function Bc(n,t,e){return n+(t-n)*e}const _c=(n,t,e)=>{const i=Math.PI,s=i*2;let r=sp(n),o=sp(t);return e===Hi.Anticlockwise&&r<o&&(r+=s),e===Hi.Clockwise&&o<r&&(o+=s),e===Hi.Loop&&o-r>i?_c(r,o,Hi.Anticlockwise):e===Hi.Loop&&r-o>i?_c(r,o,Hi.Clockwise):{from:r,to:o}},Q2=n=>{const t={},e=(l,c,...h)=>ee(this,[l,c,...h],function*(r,o,a={preload:!0}){return t.interruptCallback&&t.interruptCallback(!1),a.asyncStartCallback&&(yield a.asyncStartCallback()),r.mode&&r.mode!==n.currentMode&&(yield n.changeMode(r.mode)),a.preload&&r.panoIndex!==void 0&&r.panoIndex!==n.panoIndex&&(yield n.preloadPano(r.panoIndex)),a.asyncEndCallback&&(yield a.asyncEndCallback()),r.panoIndex===void 0&&r.fov===void 0&&r.latitude===void 0&&r.longitude===void 0?!0:yield new Promise((d,f)=>{const g=r.panoIndex!==void 0?r.panoIndex:n.panoIndex;g!==void 0?n.moveToPano(g,F({duration:o,moveEndCallback:()=>d(!0),moveCancelCallback:()=>f(new Error("move canceled"))},r)):f(new Error("unexpected error"))})}),i=r=>{const o=n.state,a=rp(o.latitude),l=rp(r.latitude),{from:c,to:h}=_c(o.longitude,r.longitude,r.rotation||Hi.Loop),d=o.fov,f=r.fov;return{from:{latitude:a,longitude:c,fov:d},to:{latitude:l,longitude:h,fov:f}}};return{move:e,rotate:(l,c,...h)=>ee(this,[l,c,...h],function*(r,o,a={}){t.interruptCallback&&t.interruptCallback(!1),a.asyncStartCallback&&(yield a.asyncStartCallback()),n.currentMode!==Ye.Five.Mode.Panorama&&(yield n.changeMode(Ye.Five.Mode.Panorama)),r.panoIndex!==void 0&&r.panoIndex!==n.panoIndex&&(a.preload&&(yield n.preloadPano(r.panoIndex)),yield new Promise((g,p)=>{if(!r.panoIndex){g(!0);return}n.moveToPano(r.panoIndex,{moveEndCallback:()=>g(!0),moveCancelCallback:()=>p(new Error("move canceled"))})})),a.asyncEndCallback&&(yield a.asyncEndCallback());const{from:d,to:f}=i(r);return yield new Promise(g=>{const p=({progress:x})=>{const E={};E.longitude=Bc(d.longitude,f.longitude,x),E.latitude=Bc(d.latitude,f.latitude,x),E.fov=Bc(d.fov,f.fov,x),n.setState(E,!0)},m=()=>{g(!0)},v=()=>{g(!1)},b=r.rotateSpeed?Math.ceil(Math.abs(f.longitude-d.longitude)/r.rotateSpeed*1e3):o,w=U2(b,Mi.Linear.None).onUpdate(p).onComplete(m).onDestroy(v);r.rotation===Hi.Loop&&w.repeat(1/0).yoyo(!0),t.interruptCallback=(x=!0)=>{w.destroy(),t.interruptCallback=void 0,t.timeoutId&&(clearTimeout(t.timeoutId),t.timeoutId=void 0),g(x)},t.timeoutId=setTimeout(()=>{t.interruptCallback&&t.interruptCallback(!0)},o)})})}};function op(n,t){return n.x===t.x&&n.y===t.y}function ap(n,t){return Math.abs(n)===1/0&&Math.abs(t)===1/0?!0:Math.abs(n-t)<.001}function Sa(n,t){return(t.y-n.y)/(t.x-n.x)}function lp(n,t,e){const i=Sa(n[1],n[0]),s=Sa(t[1],t[0]);if(isNaN(i)||isNaN(s)||ap(i,s))return!1;if(La(n[0],t))return n[0];if(La(n[1],t))return n[1];if(La(t[0],n))return t[0];if(La(t[1],n))return t[1];if(e&&!Y2(n,t))return!1;const r=n[0],o=t[0];if(Math.abs(i)===1/0)return{x:r.x,y:t[1].y-(t[1].x-r.x)*s};if(Math.abs(s)===1/0)return{x:o.x,y:n[1].y-(n[1].x-o.x)*i};const a=(o.y-r.y+i*r.x-s*o.x)/(i-s),l=i*a-i*r.x+r.y;return{x:a,y:l}}function La(n,t){return op(n,t[0])||op(n,t[1])?!0:(t[0].x-n.x)*(n.x-t[1].x)>=0&&(t[0].y-n.y)*(n.y-t[1].y)>=0&&ap(Sa(t[0],n),Sa(n,t[1]))}function X2(n){let t=1/0,e=-1/0,i=1/0,s=-1/0;return n.forEach(r=>{t=Math.min(t,r.x),e=Math.max(e,r.x),i=Math.min(i,r.y),s=Math.max(s,r.y)}),{x:(t+e)/2,y:(i+s)/2}}function Ta(n,t,e){return(n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y)}function Y2(n,t){return Math.max(n[0].x,n[1].x)>=Math.min(t[0].x,t[1].x)&&Math.max(t[0].x,t[1].x)>=Math.min(n[0].x,n[1].x)&&Math.max(n[0].y,n[1].y)>=Math.min(t[0].y,t[1].y)&&Ta(t[0],n[1],n[0])*Ta(n[1],t[1],n[0])>0&&Ta(n[0],t[1],t[0])*Ta(t[1],n[1],t[0])>0?1:0}function cp(n,t=0){t<=0?requestAnimationFrame(n):requestAnimationFrame(()=>cp(n,t-1))}const Z2=`<style type="text/css">
.PanoRulerPlugin-rule-line {
  position: absolute;
  transform-origin: left center;
  width: 0;
  height: 0.0625rem;
}

.PanoRulerPlugin-rule-line::after {
  content: '';
  position: absolute;
  left: -0.125rem;
  top: -0.1rem;
  width: 0.25rem;
  height: 0.25rem;
  border-radius: 50%;
  background: #FFFFFF;
  z-index: 1;
  animation: viewport-rule-point 0.1s 1s;
  animation-fill-mode: both;
}

.PanoRulerPlugin-rule-line::before {
  content: '';
  position: absolute;
  right: -0.125rem;
  top: -0.1rem;
  width: 0.25rem;
  height: 0.25rem;
  border-radius: 50%;
  background: #FFFFFF;
  animation: viewport-rule-point 0.1s 1.5s;
  animation-fill-mode: both;
}

.PanoRulerPlugin-rule-line em {
  background: #fff;
  display: block;
  height: 100%;
  animation: viewport-rule-line 0.5s ease 1s;
  animation-fill-mode: both;
  box-shadow: 0 0 0.25rem rgb(0 0 0 / 40%);
}

.PanoRulerPlugin-rule-label {
  position: absolute;
  width: 0;
  height: 0;
  top: 0.0625rem;
}

.PanoRulerPlugin-rule-label-name {
  position: absolute;
  padding: 0.1875rem 0.375rem;
  background: rgba(195,195,195,0.30);
  backdrop-filter: blur(0.25rem);
  -webkit-backdrop-filter: blur(0.25rem);
  border-radius: 6.25rem;
  border: 0.0625rem solid rgba(255,255,255,0.6);
  white-space: nowrap;
  overflow: hidden;
  color: #FFFFFF;
  font-weight: 500;
  font-size: 0.75rem;
  line-height: 1;
  -webkit-animation: viewport-rule-label 0.25s ease 1s;
  animation: viewport-rule-label 0.25s ease 1s;
  animation-fill-mode: both;
  box-shadow: inset 0 0 0.625rem 0 rgba(255,255,255,0.30);
}

@keyframes viewport-rule-line {
  0% { width: 0% }
  100% { width: 100% }
}

@keyframes viewport-rule-label {
  0% { opacity: 0; transform: scaleX(0); }
  100% { opacity: 1; transform: translate(-50%, -50%) scaleX(1); }
}

@keyframes viewport-rule-point {
  0% { transform: scaleX(0); }
  100% { transform: scaleX(1); }
}
</style>
`,J2=(n,t)=>Math.sqrt(Math.pow(n.z-t.z,2)+Math.pow(n.x-t.x,2)),q2=(n,t)=>{const e={},i=new B.Raycaster,s=t.work;if(!s)return e;const r=n.observers;s.observers.forEach((o,a)=>{const{standingPosition:l}=o,c=new B.Vector3(l.x,l.y,l.z);i.set(c,new B.Vector3(0,1,0));const[h]=t.model.intersectRaycaster(i),d=h?h.point.y:2.7,f=r[a];if(!f)return e;const g=n.rooms[f].name;e[g]===void 0?e[g]={__roof:[d],__floor:[c.y]}:(e[g].__roof.push(d),e[g].__floor.push(c.y))});for(const o in e){const a=e[o];a.__roof.sort(),a.__floor.sort(),a.floor=a.__floor[~~(a.__floor.length/2)],a.roof=a.__roof[a.__roof.length-1]}return e},K2=(n,t)=>{const e={enable:!1,loaded:!1,options:t.options||{distanceText:m=>`${m.toFixed(1)}m`}},i=(m,v)=>{const b=`
      <div class="PanoRulerPlugin-rule-line">
        <em></em>
        <div class="PanoRulerPlugin-rule-label">
          <div class="PanoRulerPlugin-rule-label-name">${e.options.distanceText(v)}</div>
        </div>
      </div>
    `,w=document.createElement("div");return w.setAttribute("class","PanoRulerPlugin-rule"),w.setAttribute("data-name",m),w.setAttribute("style","display: none"),w.innerHTML=b,w},s=document.createElement("div");s.setAttribute("style","position: absolute;pointer-events: none;width: 100%;height: 100%;left: 0;top: 0;overflow: hidden;");const r=document.createElement("div");r.innerHTML=Z2,s.appendChild(r);const o={},a=(m,v)=>{var x;if(e.loaded)throw new Error("标尺被重复初始化！");const b=q2(m,n),w=n.work;if(!w)return!1;for(const E in v){const L=v[E],S=(x=w.observers[0])==null?void 0:x.standingPosition;if(!S)return;const R=L.map(({x:z,z:O,observers:A})=>{const C=A.length>0?m.rooms[m.observers[A[0]]].name:"",I=b[C]?b[C].floor:null;let M=1/0,D={index:0,x:S.x,y:S.y,z:S.z};A.forEach(q=>{if(!w.observers[q])return;const{standingPosition:ne}=w.observers[q],se={index:q,x:ne.x,y:ne.y,z:ne.z},ue=J2({x:z,z:O},se);I?ue<M&&Math.abs(se.y-I)<.3&&(M=ue,D=se):ue<M&&(M=ue,D=se)});const T=new B.Vector3(z,D.y,O);Object.assign(T,{observers:A});const H=b[C]?b[C].roof:null,W=H?new B.Vector3(z,H,O):null;return W&&Object.assign(W,{observers:A}),{origin:T,vertical:W}});o[E]={origins:R.map(z=>z.origin),rules:[]};for(const{origin:z,vertical:O}of R){if(!O)continue;const A=i(E,z.distanceTo(O));s.append(A),o[E].rules.push({vertical:!0,rule:[z,O],$element:A})}for(let z=0;z<R.length;z++){let O=z+1;O>=R.length&&(O=0);const{origin:A}=R[z],{origin:C}=R[O],I=i(E,A.distanceTo(C));s.append(I),o[E].rules.push({vertical:!1,rule:[A,C],$element:I})}}return e.loaded=!0,!0},l=(m,v,b)=>ee(this,null,function*(){const w=m||t.roomInfo,x=v||t.roomRules;if(!w||!x)throw new Error("标尺数据依赖不齐全！");return e.loaded=!1,e.options=F(F({},e.options),b||{}),n.model.loaded?a(w,x):yield new Promise(E=>n.once("modelLoaded",()=>E(a(w,x))))});t.roomInfo&&t.roomRules&&l(t.roomInfo,t.roomRules);const c=(m,v,b,w)=>{const x=[[{x:0,y:0},{x:b,y:0}],[{x:0,y:0},{x:0,y:w}],[{x:b,y:0},{x:b,y:w}],[{x:0,y:w},{x:b,y:w}]],E=[];for(let L=0;L<x.length;L++){const S=lp([m,v],[x[L][0],x[L][1]],!0);S&&E.push(S)}return E.length===0?!1:E},h=()=>{var O;const m=(O=n.getElement())==null?void 0:O.parentElement;if(!m||!e.loaded||Object.keys(o).length<=0)return;const{panoIndex:v,camera:b,currentMode:w}=n;if(v===void 0)return;let x;for(const A in o)A.split(",").indexOf(v.toString())>=0&&(x=A);if(!x){for(const A in o)for(const{$element:C}of o[A].rules)C.style.display="none";return}const E=b.position,L=b.getWorldDirection(new B.Vector3),S=m.clientWidth,R=m.clientHeight;if(w!==Ye.Five.Mode.Panorama){for(const A in o)for(const{$element:C}of o[A].rules)C.style.display="none";return}for(const A in o)for(const{$element:C}of o[A].rules)C.style.display=A===x?"block":"none";const[z]=o[x].origins.slice().filter(A=>A.observers.indexOf(v)>=0).sort((A,C)=>{const I=A.clone().setY(0).sub(E).normalize().angleTo(L.clone().setY(0)),M=C.clone().setY(0).sub(E).normalize().angleTo(L.clone().setY(0));return I-M});for(const{rule:A,vertical:C,$element:I}of o[x].rules){const[M,D]=A,T=I.querySelector(".PanoRulerPlugin-rule-line");if(!T)return;if(!z){I.style.display="none";continue}if(M!==z&&D!==z){I.style.display="none";continue}if(M.distanceTo(D)<.3){I.style.display="none";continue}if(M.observers.indexOf(v)===-1||D.observers.indexOf(v)===-1){I.style.display="none";continue}if(M.clone().sub(E).normalize().angleTo(L)>Math.PI/2){I.style.display="none";continue}if(D.clone().sub(E).normalize().angleTo(L)>Math.PI/2){I.style.display="none";continue}const J=M.distanceTo(D);if(D.clone().sub(D.clone().sub(M).divide(new B.Vector3(2,2,2))).distanceTo(E)/J>8){I.style.display="none";continue}const ne=M.clone().project(b),se=(ne.x+1)/2*S,ue=(-ne.y+1)/2*R,ze=D.clone().project(b),Ce=(ze.x+1)/2*S,ce=(-ze.y+1)/2*R,le=Math.sqrt(Math.pow(Ce-se,2)+Math.pow(ce-ue,2));let he=le,ke=50;const be=c({x:~~se,y:~~ue},{x:~~Ce,y:~~ce},S,R);if(be&&be.length===1&&(z===M?(he=Math.sqrt(Math.pow(be[0].x-se,2)+Math.pow(be[0].y-ue,2)),ke=he/le*50):z===D&&(he=Math.sqrt(Math.pow(be[0].x-Ce,2)+Math.pow(be[0].y-ce,2)),ke=100-he/le*50)),be&&be.length===2){const pe={x:(be[0].x+be[1].x)/2,y:(be[0].y+be[1].y)/2};ke=Math.sqrt(Math.pow(pe.x-se,2)+Math.pow(pe.y-ue,2))/le*100}const Re=(Math.PI/2-Math.atan2(Ce-se,ue-ce))/Math.PI*180,Te=T.querySelector(".PanoRulerPlugin-rule-label"),He=Te.children[0].clientWidth;He>=le||He/2>=ke/100*le||He/2>=(1-ke/100)*le?T.style.display="none":(T.style.display="block",T.style.width=le+"px",T.style.left=se+"px",T.style.top=ue+"px",T.style.transform=`rotate(${-Re}deg)`,Te.style.left=`${ke}%`)}},d=()=>cp(h),f=()=>{var m,v;return e.loaded?(e.enable||(s.setAttribute("class","PanoRulerPlugin"+(e.options.className?" "+e.options.className:"")),(v=(m=n.getElement())==null?void 0:m.parentElement)==null||v.append(s),h(),n.on("modeChange",h),n.on("cameraUpdate",d),e.enable=!0),!0):!1},g=()=>(e.enable&&(n.off("modeChange",h),n.off("cameraUpdate",d),s&&s.remove(),e.enable=!1),!0);function p(m){if(m.distanceText&&m.distanceText!==e.options.distanceText){const v=m.distanceText;e.options.distanceText=v,Object.values(o).forEach(b=>{b.rules.forEach(w=>{const[x,E]=w.rule,L=x.distanceTo(E),S=w.$element.querySelector(".PanoRulerPlugin-rule-label-name");S&&(S.innerText=v(L))})})}}return{enable:f,disable:g,load:l,state:e,changeConfigs:p}};function $2(n){De(n,"svelte-1h27ktp",".PanoRulerPlugin-rule-line.svelte-1h27ktp.svelte-1h27ktp{position:absolute;transform-origin:left 0.0625rem;width:0;height:0.125rem;pointer-events:none}.PanoRulerPlugin-rule-line.svelte-1h27ktp.svelte-1h27ktp::after{content:'';position:absolute;left:-0.125rem;top:-0.1rem;width:0.25rem;height:0.25rem;border-radius:50%;background:#fff;z-index:1;animation:svelte-1h27ktp-viewport-rule-point 0.1s 1s;animation-fill-mode:both}.PanoRulerPlugin-rule-line.svelte-1h27ktp.svelte-1h27ktp::before{content:'';position:absolute;right:-0.125rem;top:-0.1rem;width:0.25rem;height:0.25rem;border-radius:50%;background:#fff;z-index:1;animation:svelte-1h27ktp-viewport-rule-point 0.1s 1.5s;animation-fill-mode:both}.PanoRulerPlugin-rule-line.svelte-1h27ktp em.svelte-1h27ktp{display:block;height:0.0625rem;animation:svelte-1h27ktp-viewport-rule-line 0.5s ease 1s;animation-fill-mode:both;box-shadow:0 0 0.25rem rgb(0 0 0 / 40%);position:relative}.rule-mixed-line.svelte-1h27ktp.svelte-1h27ktp{display:flex;height:0.0625rem;animation:svelte-1h27ktp-viewport-rule-line 0.5s ease 1s;animation-fill-mode:both;align-items:center}.em-solid.svelte-1h27ktp.svelte-1h27ktp{height:100%;background:#ffffff}.em-dotted.svelte-1h27ktp.svelte-1h27ktp{height:0.125rem;background:var(--background-image);background-position:center;background-repeat:repeat}.PanoRulerPlugin-rule-label.svelte-1h27ktp.svelte-1h27ktp{position:absolute;width:0;height:0;top:0.0625rem;pointer-events:none}.PanoRulerPlugin-rule-label-name.svelte-1h27ktp.svelte-1h27ktp{position:absolute;padding:0.1875rem 0.375rem;background:rgba(195, 195, 195, 0.3);backdrop-filter:blur(0.25rem);-webkit-backdrop-filter:blur(0.25rem);border-radius:6.25rem;border:0.0625rem solid rgba(255, 255, 255, 0.6);white-space:nowrap;overflow:hidden;color:#ffffff;font-weight:500;font-size:0.75rem;line-height:1;animation:svelte-1h27ktp-viewport-rule-label 0.25s ease 1s;animation-fill-mode:both;box-shadow:inset 0 0 0.625rem 0 rgba(255, 255, 255, 0.3)}@keyframes svelte-1h27ktp-viewport-rule-line{0%{width:0%}100%{width:100%}}@keyframes svelte-1h27ktp-viewport-rule-label{0%{opacity:0;transform:scaleX(0)}100%{opacity:1;transform:translate(-50%, -50%) scaleX(1)}}@keyframes svelte-1h27ktp-viewport-rule-point{0%{transform:scaleX(0)}100%{transform:scaleX(1)}}")}function hp(n,t,e){const i=n.slice();return i[6]=t[e],i}function e3(n){let t,e=n[0].children,i=[];for(let s=0;s<e.length;s+=1)i[s]=dp(hp(n,e,s));return{c(){t=U("div");for(let s=0;s<i.length;s+=1)i[s].c();y(t,"class","rule-mixed-line svelte-1h27ktp")},m(s,r){Y(s,t,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(t,null)},p(s,r){if(r&9){e=s[0].children;let o;for(o=0;o<e.length;o+=1){const a=hp(s,e,o);i[o]?i[o].p(a,r):(i[o]=dp(a),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=e.length}},d(s){s&&X(t),ci(i,s)}}}function t3(n){let t,e;return{c(){t=U("em"),y(t,"class",e=yt(n[0].state?"em-solid":"em-dotted")+" svelte-1h27ktp"),y(t,"style",n[3])},m(i,s){Y(i,t,s)},p(i,s){s&1&&e!==(e=yt(i[0].state?"em-solid":"em-dotted")+" svelte-1h27ktp")&&y(t,"class",e),s&8&&y(t,"style",i[3])},d(i){i&&X(t)}}}function dp(n){let t,e,i=`${n[6].width}px`;return{c(){t=U("div"),y(t,"class",e=yt(n[6].state?"em-solid":"em-dotted")+" svelte-1h27ktp"),y(t,"style",n[3]),Q(t,"width",i)},m(s,r){Y(s,t,r)},p(s,r){r&1&&e!==(e=yt(s[6].state?"em-solid":"em-dotted")+" svelte-1h27ktp")&&y(t,"class",e),r&8&&y(t,"style",s[3]),(r&8||r&9&&i!==(i=`${s[6].width}px`))&&Q(t,"width",i)},d(s){s&&X(t)}}}function i3(n){let t,e,i,s,r=n[0].labelElement+"",o,a,l=`${n[0].labelOffset}%`,c=`${n[0].width}px`,h=`${n[0].left}px`,d=`${n[0].top}px`,f=`rotate(${n[0].rotateDeg}deg)`;function g(v,b){return v[0].children.length===0?t3:e3}let p=g(n),m=p(n);return{c(){t=U("div"),m.c(),e=ae(),i=U("div"),s=U("div"),o=Ve(r),y(s,"class","PanoRulerPlugin-rule-label-name svelte-1h27ktp"),pt(()=>n[4].call(s)),y(i,"class","PanoRulerPlugin-rule-label svelte-1h27ktp"),Q(i,"left",l),y(t,"class","PanoRulerPlugin-rule-line svelte-1h27ktp"),Q(t,"width",c),Q(t,"left",h),Q(t,"top",d),Q(t,"transform",f),Q(t,"display",n[0].visible&&n[2]?"block":"none")},m(v,b){Y(v,t,b),m.m(t,null),V(t,e),V(t,i),V(i,s),V(s,o),a=uc(s,n[4].bind(s))},p(v,[b]){p===(p=g(v))&&m?m.p(v,b):(m.d(1),m=p(v),m&&(m.c(),m.m(t,e))),b&1&&r!==(r=v[0].labelElement+"")&&Ge(o,r),b&1&&l!==(l=`${v[0].labelOffset}%`)&&Q(i,"left",l),b&1&&c!==(c=`${v[0].width}px`)&&Q(t,"width",c),b&1&&h!==(h=`${v[0].left}px`)&&Q(t,"left",h),b&1&&d!==(d=`${v[0].top}px`)&&Q(t,"top",d),b&1&&f!==(f=`rotate(${v[0].rotateDeg}deg)`)&&Q(t,"transform",f),b&5&&Q(t,"display",v[0].visible&&v[2]?"block":"none")},i:re,o:re,d(v){v&&X(t),m.d(),a()}}}function n3(n,t,e){let i,{rulerItemProp:s}=t,r=!0,o,a="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjQiIHdpZHRoPSIxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PGZpbHRlciBpZD0icHJlZml4X19hIiBoZWlnaHQ9IjQwMCUiIHdpZHRoPSIxMzcuNCUiIHg9Ii0xOC43JSIgeT0iLTE1MCUiPjxmZU1vcnBob2xvZ3kgaW49IlNvdXJjZUFscGhhIiBvcGVyYXRvcj0iZGlsYXRlIiByYWRpdXM9Ii41IiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSIvPjxmZU9mZnNldCBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSIvPjxmZU1vcnBob2xvZ3kgaW49IlNvdXJjZUFscGhhIiByYWRpdXM9IjEiIHJlc3VsdD0ic2hhZG93SW5uZXIiLz48ZmVPZmZzZXQgaW49InNoYWRvd0lubmVyIiByZXN1bHQ9InNoYWRvd0lubmVyIi8+PGZlQ29tcG9zaXRlIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIGluMj0ic2hhZG93SW5uZXIiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIi8+PGZlR2F1c3NpYW5CbHVyIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSIgc3RkRGV2aWF0aW9uPSIuNSIvPjxmZUNvbG9yTWF0cml4IGluPSJzaGFkb3dCbHVyT3V0ZXIxIiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAuMiAwIi8+PC9maWx0ZXI+PHBhdGggaWQ9InByZWZpeF9fYiIgZD0iTS44ODkgMkgxMS41OCIvPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1kYXNoYXJyYXk9IjUgNiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48dXNlIGZpbGw9IiMwMDAiIGZpbHRlcj0idXJsKCNwcmVmaXhfX2EpIiB4bGluazpocmVmPSIjcHJlZml4X19iIi8+PHVzZSBzdHJva2U9IiNmZmYiIHN0cm9rZS1vcGFjaXR5PSIuNCIgeGxpbms6aHJlZj0iI3ByZWZpeF9fYiIvPjwvZz48L3N2Zz4=";function l(){o=this.offsetWidth,e(1,o)}return n.$$set=c=>{"rulerItemProp"in c&&e(0,s=c.rulerItemProp)},n.$$.update=()=>{n.$$.dirty&3&&(o>=s.width||o/2>=s.labelOffset/100*s.width||o/2>=(1-s.labelOffset/100)*s.width?e(2,r=!1):e(2,r=!0))},e(3,i=`--background-image: url(${a})`),[s,o,r,i,l]}class s3 extends Me{constructor(t){super(),Ie(this,t,n3,i3,Pe,{rulerItemProp:0},$2)}}function up(n,t,e){const i=n.slice();return i[12]=t[e],i}function fp(n){let t,e;return t=new s3({props:{rulerItemProp:n[12]}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.rulerItemProp=i[12]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function r3(n){let t,e,i=n[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=fp(up(n,i,o));const r=o=>Z(s[o],1,1,()=>{s[o]=null});return{c(){t=U("div");for(let o=0;o<s.length;o+=1)s[o].c()},m(o,a){Y(o,t,a);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null);e=!0},p(o,[a]){if(a&1){i=o[0];let l;for(l=0;l<i.length;l+=1){const c=up(o,i,l);s[l]?(s[l].p(c,a),N(s[l],1)):(s[l]=fp(c),s[l].c(),N(s[l],1),s[l].m(t,null))}for(Ee(),l=i.length;l<s.length;l+=1)r(l);xe()}},i(o){if(!e){for(let a=0;a<i.length;a+=1)N(s[a]);e=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)Z(s[a]);e=!1},d(o){o&&X(t),ci(s,o)}}}function o3(n,t,e){var m,v,b,w;let{five:i}=t,{rulerDatas:s}=t,{options:r}=t,o=[];const a=((v=(m=i.getElement())==null?void 0:m.parentElement)==null?void 0:v.clientWidth)||0,l=((w=(b=i.getElement())==null?void 0:b.parentElement)==null?void 0:w.clientHeight)||0,c=(x,E)=>{const L=[[{x:0,y:0},{x:a,y:0}],[{x:0,y:0},{x:0,y:l}],[{x:a,y:0},{x:a,y:l}],[{x:0,y:l},{x:a,y:l}]],S=[];for(let R=0;R<L.length;R++){const z=lp([x,E],[L[R][0],L[R][1]],!0);z&&S.push(z)}return S.length===0?!1:S},h=(x,E)=>{const L=x.clone().project(i.camera),S=(L.x+1)/2*a,R=(-L.y+1)/2*l,z=E.clone().project(i.camera),O=(z.x+1)/2*a,A=(-z.y+1)/2*l,C=Math.sqrt(Math.pow(O-S,2)+Math.pow(A-R,2));return{startLeft:S,startTop:R,endLeft:O,endTop:A,distance:C}},d=(x,E,L)=>{const S=i.camera.position,R=i.camera.getWorldDirection(new B.Vector3),z=x.clone().sub(S).normalize().angleTo(R),O=E.clone().sub(S).normalize().angleTo(R),A=x.distanceTo(E),I=E.clone().sub(E.clone().sub(x).divide(new B.Vector3(2,2,2))).distanceTo(S),{startLeft:M,startTop:D,endLeft:T,endTop:H,distance:W}=h(x,E),te=-((Math.PI/2-Math.atan2(T-M,D-H))/Math.PI)*180;let q=!0;L||(q=!1),!Nt(x,L)&&!Nt(E,L)&&(q=!1),A<.3&&(q=!1),z>Math.PI/2&&(q=!1),O>Math.PI/2&&(q=!1),I/A>8&&(q=!1);let ne=50,se=W;const ue=c({x:~~M,y:~~D},{x:~~T,y:~~H});if(ue&&ue.length===1&&(Nt(x,L)?(se=Math.sqrt(Math.pow(ue[0].x-M,2)+Math.pow(ue[0].y-D,2)),ne=se/W*50):Nt(E,L)&&(se=Math.sqrt(Math.pow(ue[0].x-T,2)+Math.pow(ue[0].y-H,2)),ne=100-se/W*50)),ue&&ue.length===2){const ze={x:(ue[0].x+ue[1].x)/2,y:(ue[0].y+ue[1].y)/2};ne=Math.sqrt(Math.pow(ze.x-M,2)+Math.pow(ze.y-D,2))/W*100}return{startLeft:M,startTop:D,distance:W,deg:te,visible:q,labelOffset:ne,ruleLength:A}},f=()=>{const x=i.panoIndex,E=s.find(C=>C.panoIndex===x);if(!E)return e(0,o=[]);if(i.currentMode!==Ye.Five.Mode.Panorama)return e(0,o=[]);const L=i.camera.position,S=i.camera.getWorldDirection(new B.Vector3),R=E.lines.map(C=>new B.Vector3(C.start[0],-C.start[1],-C.start[2])),z=E.lines.map(C=>new B.Vector3(C.end[0],-C.end[1],-C.end[2])),[O]=R.concat(z).sort((C,I)=>{const M=C.clone().setY(0).sub(L).normalize().angleTo(S.clone().setY(0)),D=I.clone().setY(0).sub(L).normalize().angleTo(S.clone().setY(0));return M-D}),A=E.lines.map(C=>{var se,ue;const I=C.start,M=C.end,{startLeft:D,startTop:T,distance:H,deg:W,visible:J,labelOffset:te,ruleLength:q}=d(new B.Vector3(I[0],-I[1],-I[2]),new B.Vector3(M[0],-M[1],-M[2]),O),ne=[];return C.children&&((se=C.children)==null?void 0:se.length)>0&&((ue=C.children)==null||ue.forEach(ze=>{const Ce=ze.start,ce=ze.end,{distance:le}=h(new B.Vector3(Ce[0],-Ce[1],-Ce[2]),new B.Vector3(ce[0],-ce[1],-ce[2]));ne.push({width:le,state:ze.state})})),{width:H,left:D,top:T,rotateDeg:W,state:C.state,children:ne,labelOffset:te,visible:J,labelElement:r.distanceText(q)}});e(0,o=A)},g=()=>Zr(f),p=Yo(f,80);return zt(()=>{f(),i.on("panoArrived",f),i.on("modeChange",f),i.on("cameraDirectionUpdate",g),i.on("movingToPano",g),i.on("mouseWheel",()=>p()),i.on("pinchGesture",()=>p())}),ti(()=>{i.off("panoArrived",f),i.off("modeChange",f),i.off("cameraDirectionUpdate",g),i.off("movingToPano",g),i.off("mouseWheel",()=>p()),i.off("pinchGesture",()=>p())}),n.$$set=x=>{"five"in x&&e(1,i=x.five),"rulerDatas"in x&&e(2,s=x.rulerDatas),"options"in x&&e(3,r=x.options)},[o,i,s,r]}class a3 extends Me{constructor(t){super(),Ie(this,t,o3,r3,Pe,{five:1,rulerDatas:2,options:3})}}let l3=class{constructor(t,e){u(this,"five");u(this,"container",document.createElement("div"));u(this,"panoRulerProData");u(this,"rulerItems");u(this,"state",{enabled:!1,loaded:!1,options:{className:"",distanceText:t=>`${t.toFixed(1)}m`}});var i,s;this.five=t,this.container.classList.add("panoRulerProPlugin-container"),this.container.setAttribute("style","position: absolute;pointer-events: none;width: 100%;height: 100%;left: 0;top: 0;overflow: hidden;"),e&&(e.data&&this.load(e.data),this.state.options=F(F({},this.state.options),e.options||{}),(i=e.options)!=null&&i.className&&this.container.classList.add((s=e.options)==null?void 0:s.className)),this.five.once("modelLoaded",()=>ee(this,null,function*(){var r,o;(o=(r=this.five.getElement())==null?void 0:r.parentNode)==null||o.append(this.container)})),this.five.once("dispose",()=>this.dispose())}load(t){return ee(this,null,function*(){if(!this.five.work)return;const e=t.data;if(!e)throw new Error("标尺数据依赖不齐全！");this.panoRulerProData=e,this.state.loaded=!0})}enable(){return this.state.loaded?(this.state.enabled||(this.state.enabled=!0,this.render()),!0):!1}disable(){return this.state.enabled&&(this.state.enabled=!1,this.render()),!0}render(){return ee(this,null,function*(){var t;if(this.state.enabled){if(!this.panoRulerProData||!this.container)return;this.rulerItems=new a3({target:this.container,props:{five:this.five,rulerDatas:this.panoRulerProData,options:this.state.options}})}else(t=this.rulerItems)==null||t.$destroy(),this.rulerItems=void 0})}dispose(){var t;this.container&&((t=this.rulerItems)==null||t.$destroy(),this.rulerItems=void 0),this.container.remove()}};const c3=(n,t)=>new l3(n,t),h3="data:image/png;base64,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";function d3(){const n=document.createElement("div"),t=document.createElement("i"),e=document.createElement("span");return n.appendChild(t),n.appendChild(e),n.style.position="relative",n.style.width="100%",n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="center",n.style.marginTop=`${150/16}rem`,n.style.opacity="0",n.style.transition="opacity 1000ms linear",t.style.display="block",t.style.width=`${134/16}rem`,t.style.height=`${22/16}rem`,t.style.backgroundSize="100%",t.style.backgroundRepeat="no-repeat",t.style.backgroundImage=`url(${h3})`,e.style.marginTop=`${10/16}rem`,e.style.fontSize=`${16/16}rem`,e.style.color="#fff",e.style.opacity="0.7",e.style.textShadow="0 2px 16px rgb(22 34 83 / 24%)",e.style.fontWeight="bold",{appendTo(i){i.appendChild(n)},dispose(){n.remove()},setRoom(i){e.innerHTML=i.name+" "+Math.floor(i.size/1e6)+"㎡"},show(){n.style.opacity="1"},hide(){n.style.opacity="0"}}}const u3=new P.TextureLoader;function ms(n){return ee(this,null,function*(){return new Promise((t,e)=>{u3.load(n,t,void 0,e)}).then(t=>(t.encoding=P.sRGBEncoding,t.minFilter=P.NearestFilter,t.magFilter=P.NearestFilter,t))})}function pp(n){return ee(this,null,function*(){return ms(n).then(t=>{const e=n.startsWith("data:")?n.includes("png"):new URL(n,location.href).pathname.toLowerCase().endsWith(".png");return{texture:t,transparent:e}})})}const za={userAction:!0};class f3 extends hn{constructor(e,i){super(e,i);u(this,"state",{visible:!0,enabled:!0,config:{compassImageUrl:this.absoluteUrl("/release/web/v3/north-point-circle.96498e69.png"),entryDoorImageUrl:this.absoluteUrl("/release/web/enterDoor.831b8208.png")}});u(this,"data");u(this,"group",new P.Group);u(this,"roomInfoInstance");u(this,"roomInfoWrapperInstance");u(this,"compassMeshTween");u(this,"compassMesh");u(this,"logoMesh");u(this,"logoMeshTween");u(this,"entryDoorMesh");u(this,"dispose",()=>{var e,i,s,r;this.five.scene.remove(this.group),this.group.remove(...this.group.children),(i=(e=this.compassMesh)==null?void 0:e.material.map)==null||i.dispose(),(r=(s=this.entryDoorMesh)==null?void 0:s.material.map)==null||r.dispose(),this.five.off("dispose",this.dispose),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("panoWillArrive",this.onFivePanoWillArrive),this.five.off("cameraDirectionUpdate",this.onFiveCameraDirectionUpdate)});u(this,"_addEventListener",()=>{this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("panoWillArrive",this.onFivePanoWillArrive),this.five.on("modeChange",this.onFiveModeChange),this.five.on("cameraDirectionUpdate",this.onFiveCameraDirectionUpdate)});u(this,"_removeEventListener",()=>{this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("panoWillArrive",this.onFivePanoWillArrive),this.five.off("modeChange",this.onFiveModeChange),this.five.off("cameraDirectionUpdate",this.onFiveCameraDirectionUpdate)});u(this,"_enable",()=>{this.five.scene.add(this.group),this.init(),this.onFivePanoArrived(this.five.panoIndex||0),this._addEventListener()});u(this,"_disable",()=>{this._clearCompassIfNeed(),this._clearEntryDoorIfNeed(),this.five.scene.remove(this.group),this._removeEventListener()});u(this,"_toggleVisible",()=>{this.group.visible=this.state.visible,this.five.needsRender=!0});u(this,"_clearCompassIfNeed",()=>{var e;this.compassMesh&&(this.group.remove(this.compassMesh),(e=this.compassMesh.material.map)==null||e.dispose(),this.compassMesh=null)});u(this,"_clearLogoIfNeed",()=>{var e;this.logoMesh&&(this.group.remove(this.logoMesh),(e=this.logoMesh.material.map)==null||e.dispose(),this.logoMesh=null)});u(this,"_clearEntryDoorIfNeed",()=>{var e;this.entryDoorMesh&&(this.group.remove(this.entryDoorMesh),(e=this.entryDoorMesh.material.map)==null||e.dispose(),this.entryDoorMesh=null),this.roomInfoInstance&&(this.roomInfoInstance.dispose(),this.roomInfoInstance=null),this.roomInfoWrapperInstance&&(this.roomInfoWrapperInstance.dispose(),this.roomInfoWrapperInstance=null)});u(this,"onFivePanoWillArrive",e=>{var i,s,r,o;e!==this.five.panoIndex&&((i=this.compassMeshTween)==null||i.dispose(),(s=this.compassMesh)==null||s.material.setValues({opacity:0}),(r=this.logoMeshTween)==null||r.dispose(),(o=this.logoMesh)==null||o.material.setValues({opacity:0}))});u(this,"onFivePanoArrived",e=>{var s,r,o,a,l,c,h,d;const i=(o=(r=(s=this.five.work)==null?void 0:s.observers)==null?void 0:r[e])==null?void 0:o.standingPosition;if(this.compassMesh&&i&&(this.compassMesh.position.copy(i.clone().setY(i.y+.01)),this.compassMesh.material.opacity===0&&((a=this.compassMeshTween)==null||a.dispose(),this.compassMeshTween=Yr(1e3).onUpdate(({progress:f})=>{var g;(g=this.compassMesh)==null||g.material.setValues({opacity:f}),this.five.needsRender=!0}).play())),this.logoMesh&&i&&(this.logoMesh.position.copy(i.clone().setY(i.y+.011)),this.logoMesh.material.opacity===0&&((l=this.logoMeshTween)==null||l.dispose(),this.logoMeshTween=Yr(1e3).onUpdate(({progress:f})=>{var g;(g=this.logoMesh)==null||g.material.setValues({opacity:f}),this.five.needsRender=!0}).play())),this.entryDoorMesh){const g=new P.Vector3(this.data.entrance.position.x,this.data.entrance.position.y,this.data.entrance.position.z).clone().setY(i.y).sub(i).normalize(),p=i.clone().add(g.clone().multiplyScalar(.7)).setY(i.y+.01);this.entryDoorMesh.rotation.z=new P.Vector3(0,0,-1).angleTo(g),this.entryDoorMesh.position.copy(p),((c=this.data)==null?void 0:c.room_observers[e].room.type)===1?(h=this.entryDoorMesh)==null||h.material.setValues({opacity:1}):(d=this.entryDoorMesh)==null||d.material.setValues({opacity:0})}this.roomInfoInstance&&this.roomInfoWrapperInstance&&i&&(this.roomInfoWrapperInstance.css3DObject.position.copy(i.clone().setY(i.y+.01)),this.roomInfoInstance.setRoom(this.data.room_observers[e].room)),this.five.needsRender=!0});u(this,"onFiveCameraDirectionUpdate",({longitude:e,latitude:i})=>{var s,r;this.roomInfoWrapperInstance&&(this.roomInfoWrapperInstance.css3DObject.rotation.z=e,i>.66&&this.five.getCurrentState().mode==="Panorama"?(s=this.roomInfoInstance)==null||s.show():(r=this.roomInfoInstance)==null||r.hide())});u(this,"onFiveModeChange",(e,i,s,r,o)=>{e!==i&&this.setState({visible:e===Ye.Five.Mode.Panorama},{userAction:o})});this.five.scene.add(this.group),this.five.once("dispose",this.dispose),this.setState({visible:!0,enabled:!0,config:F(F({},this.state.config),i||{})})}enable(e=za){this.setState({enabled:!0},e)}disable(e=za){this.setState({enabled:!1},e)}show(e=za){if(this.state.enabled)return this.setState({visible:!0},e),Promise.resolve()}hide(e=za){if(this.state.enabled)return this.setState({visible:!1},e),Promise.resolve()}setState(e,i={userAction:!0}){var r,o;const s=JSON.parse(JSON.stringify(this.state));this.state={visible:(r=e.visible)!=null?r:s.visible,enabled:(o=e.enabled)!=null?o:s.enabled,config:F(F({},s.config),e.config||{})},this.hooks.emit("stateChange",{state:this.state,prevState:s,userAction:i.userAction}),e.enabled===!0&&(this._enable(),this.hooks.emit("enable",i)),e.enabled===!1&&(this._disable(),this.hooks.emit("disable",i)),e.visible===!1&&(this._toggleVisible(),this.hooks.emit("hide",i)),e.visible===!0&&(this._toggleVisible(),this.hooks.emit("show",i)),e.config&&this.init()}load(e,i,s=!0){return ee(this,null,function*(){const r=yield this.formatData(e);JSON.stringify(this.data)!==JSON.stringify(r)&&(this.hooks.emit("dataChange",r,this.data),this.data=F({},r),this.init(),i&&this.setState(i,{userAction:s}),this.hooks.emit("dataLoaded",this.data))})}formatData(e){return e.version&&e.data?Promise.resolve(e.data):Promise.resolve(e)}init(){return ee(this,null,function*(){var s,r,o,a;const e=(r=(s=this.data)==null?void 0:s.north_rad)!=null?r:null;this._clearCompassIfNeed(),e!==null&&(this.compassMesh=yield this.loadCompassMesh(),this.compassMesh&&(this.compassMesh.rotateX(-Math.PI/2),this.compassMesh.rotateZ(e-Math.PI/2),this.group.add(this.compassMesh))),this._clearLogoIfNeed(),this.logoMesh=yield this.loadLogoMesh(),this.logoMesh&&(this.logoMesh.rotateX(-Math.PI/2),this.group.add(this.logoMesh));const i=(a=(o=this.data)==null?void 0:o.entrance)!=null?a:null;this._clearEntryDoorIfNeed(),i!==null&&(this.entryDoorMesh=yield this.loadEntryDoorMesh(),this.roomInfoWrapperInstance=this.loadRoomInfo(),this.roomInfoInstance=d3(),this.entryDoorMesh.rotateX(-Math.PI/2),this.roomInfoWrapperInstance&&this.roomInfoInstance.appendTo(this.roomInfoWrapperInstance.container),this.group.add(this.entryDoorMesh)),this.onFivePanoArrived(this.five.panoIndex||0),this.five.needsRender=!0})}loadCompassMesh(){return ee(this,null,function*(){const e=this.state.config.compassImageUrl,i=yield ms(e),s=new P.CircleGeometry(.7,32),r=new P.MeshBasicMaterial({map:i,transparent:!0,opacity:0,depthTest:!1}),o=new P.Mesh(s,r);return o.name="pano-compass-mesh",o})}loadLogoMesh(){return ee(this,null,function*(){if(!this.state.config.logoURL)return;const e=this.state.config.logoURL,i=yield ms(e);i.minFilter=P.NearestFilter,i.magFilter=P.NearestFilter;const s=new P.PlaneBufferGeometry(.4,.4),r=new P.MeshBasicMaterial({map:i,opacity:0,transparent:!0,depthTest:!1}),o=new P.Mesh(s,r);return o.name="pano-compass-logo-mesh",o})}loadEntryDoorMesh(){return ee(this,null,function*(){const e=this.state.config.entryDoorImageUrl,i=yield ms(e),s=new P.PlaneGeometry(.2,.16),r=new P.MeshBasicMaterial({map:i,transparent:!0,opacity:.8,depthTest:!1}),o=new P.Mesh(s,r);return o.name="pano-compass-entry-door",o})}loadRoomInfo(){const e=[new P.Vector3(-.7,0,-.7),new P.Vector3(.7,0,-.7),new P.Vector3(.7,0,.7),new P.Vector3(-.7,0,.7)];return Qr(this.five).create3DDomContainer(e)}}const p3=(n,t)=>new f3(n,t),m3=1,g3=3,v3=new B.Color(16777215),A3=new B.Color(6522623),b3=new B.Color(16777215),y3=new B.Color(6522623),w3=6,P3=8,C3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",mp=new B.TextureLoader().load(C3),I3={pointTexture:mp,pointSize:w3,lineWidth:m3,lineColor:v3,pointColor:b3,lineRenderOrder:20,pointsRenderOrder:20},M3={pointTexture:mp,pointSize:P3,lineWidth:g3,lineColor:A3,pointColor:y3,lineRenderOrder:10,pointsRenderOrder:10};function k3(n,t,e){var h,d,f,g,p;const i=(h=e==null?void 0:e.lineWidth)!=null?h:2,s=(d=e==null?void 0:e.lineColor)!=null?d:new B.Color(16777215),r=(f=e==null?void 0:e.pointSize)!=null?f:5,o=(g=e==null?void 0:e.lineRenderOrder)!=null?g:10,a=(p=e==null?void 0:e.lineRenderOrder)!=null?p:20,l=new Iu(n,t);l.setMaterial({linewidth:i,color:s}),l.line.material.depthTest=!1,l.line.material.transparent=!0,l.line.renderOrder=o,l.points.renderOrder=a;const c=l.points.material;return c.depthTest=!1,c.size=r,e!=null&&e.pointColor&&c.color.set(e.pointColor).convertSRGBToLinear(),e!=null&&e.pointTexture&&(c.map=e.pointTexture),l}function gp(n,t){const[e,i]=n.points,s=t==="light"?M3:I3,r=k3(e.position,i.position,s);return r.name="normalLine_"+n.id,r}function gs(n){const{x:t,y:e,z:i}=n;return!(Math.abs(t)>1||Math.abs(e)>1||Math.abs(i)>1)}function Oa(n){const{z:t}=n;return!(Math.abs(t)>1)}function E3(n){const t=document.createElement("div");return t.setAttribute("style","backdrop-filter: blur(4px);-webkit-backdrop-filter: blur(4px);-webkit-tap-highlight-color: rgba(0,0,0,0);"),t.style.width="max-content",t.style.padding="3px 6px",t.style.lineHeight="1",t.style.textAlign="center",t.style.transform="translate(-50%, -50%)",t.style.fontSize="14px",t.style.color="#fff",t.style.cursor="pointer",t.style.userSelect="none",n!=null&&n.style&&Object.assign(t.style,n==null?void 0:n.style),t}function x3(n){const t=document.createElement("div");return n!=null&&n.id&&(t.id=n==null?void 0:n.id),t.classList.add("five-plugin-measure__distance"),t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.width="0",t.style.height="0",t.style.transform="translate(-10px, -10px)",t.style.transformOrigin="left top",n!=null&&n.style&&Object.assign(t.style,n.style),t}class vp{constructor(t){u(this,"ndcPosition");u(this,"contentDom");u(this,"containerDom");u(this,"params");u(this,"canSelected");u(this,"handleClick",t=>{var e,i;(i=(e=this.params).clickCallback)==null||i.call(e,t,this)});this.params=t,this.contentDom=E3({style:t.contentStyle}),this.containerDom=x3({style:t.containerStyle}),this.setCanSelect(!0)}setCanSelect(t){this.canSelected=t,this.containerDom.style.pointerEvents=t?"all":"none"}highlight(){this.contentDom.style.border="0.5px solid #95AEFF",this.contentDom.style.background="linear-gradient(90deg, #95AEFF 0%, #6386FF 100%)"}unHighlight(){this.contentDom.style.border="0.5px solid rgba(255,255,255,0.6)",this.contentDom.style.background="rgba(195,195,195,0.70)"}appendTo(t){return t.appendChild(this.containerDom),this.containerDom.addEventListener("click",this.handleClick),this}remove(){this.contentDom.removeEventListener("click",this.handleClick),this.containerDom.remove()}show(){this.containerDom.style.visibility="visible"}hide(){this.containerDom.style.visibility="hidden"}tempHide(){this.containerDom.style.opacity="0"}tempShow(){this.containerDom.style.opacity="1"}updateDomPosition(t){if(!this.ndcPosition){this.tempHide();return}const e=t.getElement();if(!e)return;const i=e.clientWidth,s=e.clientHeight,r=this.ndcPosition.clone().project(t.camera);if(!Oa(r)){this.tempHide();return}const o=(r.x+1)/2*i,a=-(r.y-1)/2*s;this.containerDom.style.transform=`translate(${o}px, ${a}px)`,this.tempShow()}}class D3 extends vp{constructor(e){var i;e.contentStyle=fe(F({},e.contentStyle),{background:"#FFFFFF",color:"#041066",fontFamily:"Arial-BoldMT",fontWeight:"BoldMT",letterSpacing:"0",lineHeight:"20px",padding:"2px 8px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center","--distance-scale":"1",transition:"font-size 0.5s ease"});super(e);u(this,"line");u(this,"lastFOV");u(this,"cameraUpdateHandler",null);u(this,"onPanoChange",()=>{const e=this.getFiveInstance();e&&setTimeout(()=>this.update(e),100)});if(this.line=e.line,(i=this.params.userDistanceItem)!=null&&i.element?this.containerDom.appendChild(this.params.userDistanceItem.element):this.containerDom.appendChild(this.contentDom),!document.getElementById("PanoMeasurePluginFontSizes")){const s=document.createElement("style");s.id="PanoMeasurePluginFontSizes",document.head.appendChild(s),s.innerHTML=`
        .pano-measure-item-content {
          transition: font-size 0.5s ease; /* Smooth transition for font size */
        }
        
        /* sm screen */
        @media screen and (max-width: 499px) {
          .pano-measure-item-content {
            font-size: calc(12px + (14px - 12px) * var(--distance-scale));
          }
        }
        
        /* md screen */
        @media screen and (min-width: 500px) and (max-width: 929px) {
          .pano-measure-item-content {
            font-size: calc(12px + (14px - 12px) * var(--distance-scale));
          }
        }
        
        /* lg screen */
        @media screen and (min-width: 930px) and (max-width: 1365px) {
          .pano-measure-item-content {
            font-size: calc(14px + (16px - 14px) * var(--distance-scale));
          }
        }
        
        /* xl screen */
        @media screen and (min-width: 1366px) and (max-width: 2549px) {
          .pano-measure-item-content {
            font-size: calc(14px + (16px - 14px) * var(--distance-scale));
          }
        }
        
        /* xxl screen */
        @media screen and (min-width: 2550px) {
          .pano-measure-item-content {
            font-size: calc(0.875rem + (1rem - 0.875rem) * var(--distance-scale));
          }
        }
      `}this.contentDom.classList.add("pano-measure-item-content")}appendTo(e){if(super.appendTo(e),!this.cameraUpdateHandler){this.cameraUpdateHandler=()=>this.onCameraUpdate();const i=this.getFiveInstance();i&&(i.on("cameraUpdate",this.cameraUpdateHandler),i.on("cameraFovUpdate",this.cameraUpdateHandler),i.on("panoArrived",this.onPanoChange))}return this}remove(){if(this.cameraUpdateHandler){const e=this.getFiveInstance();e&&(e.off("cameraUpdate",this.cameraUpdateHandler),e.off("cameraFovUpdate",this.cameraUpdateHandler),e.off("panoArrived",this.onPanoChange)),this.cameraUpdateHandler=null}super.remove()}getCurrentContent(){var l,c,h,d;if(this.line.points.length<2)return"";const[e,i]=this.line.points,s=e.position.clone().distanceTo(i.position),r=(c=this.line.text)!=null?c:(l=this.line.model.config)==null?void 0:l.defaultText,o=(d=(h=this.line.model.config)==null?void 0:h.getDistanceText)==null?void 0:d.call(h,s),a=r!=null?r:o;return a!=null?a:s.toFixed(2)+"m"}update(e){var I;if(this.line.mesh.visible===!1){this.hide();return}const i=e.getElement();if(!i)return;const s=i.clientWidth,r=i.clientHeight,o=s/2,a=r/2;if(this.line.points.length<2)return;const[l,c]=this.line.points.map(M=>M.position.clone().applyMatrix4(this.line.mesh.matrixWorld)),h=l.clone().project(e.camera),d=c.clone().project(e.camera),f=Ut(l,c).clone().project(e.camera),g=new B.Vector2(h.x*o,h.y*a),p=new B.Vector2(d.x*o,d.y*a),m=g.distanceTo(p);if((()=>!(Math.abs(h.z)>1||Math.abs(d.z)>1||!Oa(h)&&!Oa(d)||!Oa(f)||m===0))()===!1){this.hide();return}const w=Ut(l,c).distanceTo(e.camera.position),x=e.camera.fov||60,E=2*Math.tan(.5*x/180*Math.PI),L=Math.max(Math.min(1-E*w/40,1),0);this.contentDom.style.setProperty("--distance-scale",L.toString());const S=(f.x+1)/2*s,R=-(f.y-1)/2*r,O=-(Math.atan((g.y-p.y)/(g.x-p.x))*180)/Math.PI,A=this.containerDom.parentElement&&this.contentDom.clientWidth>m?-20:0;this.containerDom.style.transform=`translate(${S}px, ${R}px) rotate(${O}deg) translateY(${A}px)`,this.show(),(I=this.params.userDistanceItem)==null||I.update({line:this.line,polyline:this.line.getPolyline()});const C=this.getCurrentContent();this.contentDom.innerText=C}getFiveInstance(){var e,i;return(i=(e=this.line.model)==null?void 0:e.config)==null?void 0:i.five}onCameraUpdate(){const e=this.getFiveInstance();e!=null&&e.camera&&this.lastFOV!==e.camera.fov&&(this.lastFOV=e.camera.fov,this.update(e))}}let vs=class Yv{constructor(t,e,i){u(this,"id");u(this,"selected",!1);u(this,"text");u(this,"type","line");u(this,"model");u(this,"mesh");u(this,"points");u(this,"lightMesh");u(this,"hook");u(this,"distanceItem");u(this,"polyline");u(this,"visible");var s;if(this.id=Et(),this.model=i,t.id===e.id)throw new Error("无效的线段, 一个点无法构成线段");typeof i.config.defaultText=="string"&&(this.text=i.config.defaultText),this.hook=new Ye.Subscribe,this.points=[t,e],this.mesh=gp(this,"normal"),this.lightMesh=gp(this,"light"),this.distanceItem=new D3({line:this,clickCallback:()=>this.hook.emit("selected",this),userDistanceItem:(s=this.model.config)!=null&&s.userDistanceItemCreator?this.model.config.userDistanceItemCreator():void 0})}hide(){this.visible&&(this.visible=!1,this.mesh.visible=!1,this.distanceItem.hide())}show(){this.visible||(this.visible=!0,this.mesh.visible=!0,this.distanceItem.show())}setPoints(t,e){this.points[0].position.copy(t),this.points[1].position.copy(e),this.mesh.setPoints(t,e)}remove(){this.mesh.parent&&this.mesh.parent.remove(this.mesh),this.distanceItem.remove()}clear(){this.selected=!1,this.polyline=void 0}isEmpty(){return this.points.length===0}getPolyline(){if(this.polyline)return this.polyline;const t=this.model.polylines.find(e=>e.lines.includes(this));if(t)return this.polyline=t,t}findAnotherPoint(t){return this.points.find(({id:e})=>e!==t.id)}setText(t){this.text=t,this.hook.emit("textChanged",t)}toJSON(){return this.toJson()}toJson(){return{id:this.id,points:this.points.map(t=>t.toJson()),text:this.text}}clone(){const t=new Yv(this.points[0].clone(),this.points[1].clone(),this.model);return t.text=this.text,t}},di=class Zv{constructor(t){u(this,"id");u(this,"position");u(this,"type","point");if(this.id=Et(),this.position=new B.Vector3,Array.isArray(t))this.position.fromArray(t);else if(typeof t=="object"&&t.isVector3)this.position.copy(t);else throw new Error("position must be Vector3 or number[]")}toJson(){return{id:this.id,position:this.position.toArray()}}clone(){return new Zv(this.position)}};const ja=n=>n.preventDefault();let Va=class{constructor(t){u(this,"model");u(this,"five");u(this,"group");u(this,"config");u(this,"dashed");u(this,"perpendicularDashed");u(this,"disposed",!1);u(this,"isMobile");u(this,"editParams");u(this,"magnifierParams");u(this,"mouseGroup");u(this,"container");u(this,"hook");u(this,"magnifier");u(this,"userDistanceItemCreator");u(this,"pointSelectorConfig");u(this,"workUtil");u(this,"getMeasureType");u(this,"updateDistanceUI",()=>{this.dashed.distanceItem.update(this.five),this.model.getAllLines().forEach(t=>t.distanceItem.update(this.five))});u(this,"updateAreaUI",()=>{this.dashed.distanceItem.update(this.five),this.model.getAllAreas().forEach(t=>{t.areaItem.updateArea(this.five),t.polyline.lines.forEach(e=>{e.distanceItem.update(this.five)})})});var i,s,r;this.five=t.five,this.hook=t.hook,this.model=t.model,this.getMeasureType=t.getMeasureType,this.config=t.config,this.editParams=t.editParams,this.magnifierParams=t.magnifierParams,this.magnifier=t.magnifier,this.pointSelectorConfig=fe(F({},t.pointSelectorConfig),{helper:F({magnifierParams:t.magnifierParams},(i=t.pointSelectorConfig)==null?void 0:i.helper)}),this.container=t.container,this.isMobile=(r=(s=t.openParams)==null?void 0:s.isMobile)!=null?r:!1,this.workUtil=t.workUtil,this.userDistanceItemCreator=t.userDistanceItemCreator,this.group=t.group,this.mouseGroup=t.mouseGroup,this.dashed=new vs(new di([0,0,0]),new di([0,0,0]),this.model),this.dashed.distanceItem.setCanSelect(!1),this.dashed.mesh.setMaterial({dashed:!0,dashScale:100}),this.dashed.mesh.name="dashLine",this.perpendicularDashed=new vs(new di([0,0,0]),new di([0,0,0]),this.model),this.perpendicularDashed.distanceItem.setCanSelect(!1),this.perpendicularDashed.mesh.setMaterial({dashed:!0,dashScale:40,color:new B.Color(10218089)}),this.perpendicularDashed.mesh.name="perpendicularDashLine";const e=this.five.getElement();e&&(e.addEventListener("touchstart",ja),e.addEventListener("contextmenu",ja))}get currentMeasureType(){return this.getMeasureType()}removeLine(t){this.group.remove(t.mesh,t.lightMesh),t.distanceItem.remove(),this.five.needsRender=!0}updateMouseGroup(t,e){if(!t)return this.mouseGroup;if(this.mouseGroup.position.copy(t.point),e)this.mouseGroup.quaternion.copy(e.quaternion);else if(t.face){const s=t.face.normal.clone().multiplyScalar(.05),o=t.point.clone().add(s).clone().add(s);this.mouseGroup.lookAt(o)}return this.mouseGroup}dispose(){var e;this.disposed=!0,(e=this.magnifier)==null||e.disable(),this.model.getAllLines().forEach(i=>this.removeLine(i)),this.model.areas.forEach(i=>i.remove());const t=this.five.getElement();t&&(t.removeEventListener("touchstart",ja),t.removeEventListener("contextmenu",ja))}},As=class{constructor(t){u(this,"id",Et());u(this,"lines",[]);u(this,"visiblePanoIndexes");u(this,"visibleFiveMode");u(this,"model");u(this,"type","polyline");u(this,"hook",new Ye.Subscribe);this.model=t.model}get points(){const t=new Set;return this.lines.forEach(e=>{t.add(e.points[0]),t.add(e.points[1])}),Array.from(t)}addLine(t){if(this.includes(t)){console.error(new Error("不能重复添加线段"));return}const e=this.getLastPoint(),i=e&&t.findAnotherPoint(e);if(e&&!i){console.error(new Error("传入线段无法与当前折线进行连接"));return}this.lines.push(t),this.hook.emit("lineAdded",t)}removeLine(t){if(this.lines.length===0)return;if(!this.isLastLine(t)){console.error(new Error("传入线段不是当前折线的最后一段"));return}this.lines.pop()&&this.hook.emit("lineRemoved",t)}isLastLine(t){const e=this.getLastLine();return e?t.id===e.id:!1}getLastLine(){return this.lines.slice(-1)[0]}getPointLength(){return this.lines.length+1}clear(){const t=this.lines.slice();this.lines.length=0,t.reduceRight((e,i)=>this.hook.emit("lineRemoved",i),void 0)}overlapWith(t){return t.type==="point"?this.includes(t):t.type==="line"?t.points.some(e=>this.includes(e)):t.type==="polyline"?t.points.some(e=>this.includes(e)):!0}includes(t){return t.type==="point"?this.points.find(({id:e})=>e===t.id)!==void 0:t.type==="line"?this.lines.find(({id:e})=>e===t.id)!==void 0:!1}isEmpty(){return this.lines.length===0}getLastPoint(){return this.points.slice(-1)[0]}toJSON(){return this.toJson()}toJson(){return{id:this.id,lines:this.lines.map(t=>t.toJson()),visiblePanoIndexes:this.visiblePanoIndexes,visibleFiveMode:this.visibleFiveMode}}getPointByID(t){return this.points.find(({id:e})=>e===t)}fromJson(t){this.clear(),this.id=t.id;const{getPoint:e}=s(),i=t.lines.map(r=>{const[o,a]=r.points,l=e(o),c=e(a);if(!l||!c)throw new Error("线上的点不存在");const h=new vs(l,c,this.model);return h.id=r.id,h.text=r.text,h});this.lines.push(...i),this.visiblePanoIndexes=t.visiblePanoIndexes,this.visibleFiveMode=t.visibleFiveMode;function s(){const r=new Map;function o(l){const c=r.get(l.id);if(c)return c;const h=new di(l.position);return h.id=l.id,r.set(l.id,h),h}function a(){return Array.from(r.values())}return{getPoint:o,getAllPoints:a}}return this}replace(t){this.id=t.id,this.clear(),this.lines.push(...t.lines)}};var Ba={},S3={get exports(){return Ba},set exports(n){Ba=n}};S3.exports=_a,Ba.default=_a;function _a(n,t,e){e=e||2;var i=t&&t.length,s=i?t[0]*e:n.length,r=Ap(n,0,s,e,!0),o=[];if(!r||r.next===r.prev)return o;var a,l,c,h,d,f,g;if(i&&(r=j3(n,t,r,e)),n.length>80*e){a=c=n[0],l=h=n[1];for(var p=e;p<s;p+=e)d=n[p],f=n[p+1],d<a&&(a=d),f<l&&(l=f),d>c&&(c=d),f>h&&(h=f);g=Math.max(c-a,h-l),g=g!==0?32767/g:0}return io(r,o,e,a,l,g,0),o}function Ap(n,t,e,i,s){var r,o;if(s===Nc(n,t,e,i)>0)for(r=t;r<e;r+=i)o=wp(r,n[r],n[r+1],o);else for(r=e-i;r>=t;r-=i)o=wp(r,n[r],n[r+1],o);return o&&Ra(o,o.next)&&(so(o),o=o.next),o}function bs(n,t){if(!n)return n;t||(t=n);var e=n,i;do if(i=!1,!e.steiner&&(Ra(e,e.next)||mt(e.prev,e,e.next)===0)){if(so(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function io(n,t,e,i,s,r,o){if(n){!o&&r&&F3(n,i,s,r);for(var a=n,l,c;n.prev!==n.next;){if(l=n.prev,c=n.next,r?T3(n,i,s,r):L3(n)){t.push(l.i/e|0),t.push(n.i/e|0),t.push(c.i/e|0),so(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=z3(bs(n),t,e),io(n,t,e,i,s,r,2)):o===2&&O3(n,t,e,i,s,r):io(bs(n),t,e,i,s,r,1);break}}}}function L3(n){var t=n.prev,e=n,i=n.next;if(mt(t,e,i)>=0)return!1;for(var s=t.x,r=e.x,o=i.x,a=t.y,l=e.y,c=i.y,h=s<r?s<o?s:o:r<o?r:o,d=a<l?a<c?a:c:l<c?l:c,f=s>r?s>o?s:o:r>o?r:o,g=a>l?a>c?a:c:l>c?l:c,p=i.next;p!==t;){if(p.x>=h&&p.x<=f&&p.y>=d&&p.y<=g&&hr(s,a,r,l,o,c,p.x,p.y)&&mt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function T3(n,t,e,i){var s=n.prev,r=n,o=n.next;if(mt(s,r,o)>=0)return!1;for(var a=s.x,l=r.x,c=o.x,h=s.y,d=r.y,f=o.y,g=a<l?a<c?a:c:l<c?l:c,p=h<d?h<f?h:f:d<f?d:f,m=a>l?a>c?a:c:l>c?l:c,v=h>d?h>f?h:f:d>f?d:f,b=Rc(g,p,t,e,i),w=Rc(m,v,t,e,i),x=n.prevZ,E=n.nextZ;x&&x.z>=b&&E&&E.z<=w;){if(x.x>=g&&x.x<=m&&x.y>=p&&x.y<=v&&x!==s&&x!==o&&hr(a,h,l,d,c,f,x.x,x.y)&&mt(x.prev,x,x.next)>=0||(x=x.prevZ,E.x>=g&&E.x<=m&&E.y>=p&&E.y<=v&&E!==s&&E!==o&&hr(a,h,l,d,c,f,E.x,E.y)&&mt(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;x&&x.z>=b;){if(x.x>=g&&x.x<=m&&x.y>=p&&x.y<=v&&x!==s&&x!==o&&hr(a,h,l,d,c,f,x.x,x.y)&&mt(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;E&&E.z<=w;){if(E.x>=g&&E.x<=m&&E.y>=p&&E.y<=v&&E!==s&&E!==o&&hr(a,h,l,d,c,f,E.x,E.y)&&mt(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function z3(n,t,e){var i=n;do{var s=i.prev,r=i.next.next;!Ra(s,r)&&bp(s,i,i.next,r)&&no(s,r)&&no(r,s)&&(t.push(s.i/e|0),t.push(i.i/e|0),t.push(r.i/e|0),so(i),so(i.next),i=n=r),i=i.next}while(i!==n);return bs(i)}function O3(n,t,e,i,s,r){var o=n;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&H3(o,a)){var l=yp(o,a);o=bs(o,o.next),l=bs(l,l.next),io(o,t,e,i,s,r,0),io(l,t,e,i,s,r,0);return}a=a.next}o=o.next}while(o!==n)}function j3(n,t,e,i){var s=[],r,o,a,l,c;for(r=0,o=t.length;r<o;r++)a=t[r]*i,l=r<o-1?t[r+1]*i:n.length,c=Ap(n,a,l,i,!1),c===c.next&&(c.steiner=!0),s.push(G3(c));for(s.sort(V3),r=0;r<s.length;r++)e=B3(s[r],e);return e}function V3(n,t){return n.x-t.x}function B3(n,t){var e=_3(n,t);if(!e)return t;var i=yp(e,n);return bs(i,i.next),bs(e,e.next)}function _3(n,t){var e=t,i=n.x,s=n.y,r=-1/0,o;do{if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){var a=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>r&&(r=a,o=e.x<e.next.x?e:e.next,a===i))return o}e=e.next}while(e!==t);if(!o)return null;var l=o,c=o.x,h=o.y,d=1/0,f;e=o;do i>=e.x&&e.x>=c&&i!==e.x&&hr(s<h?i:r,s,c,h,s<h?r:i,s,e.x,e.y)&&(f=Math.abs(s-e.y)/(i-e.x),no(e,n)&&(f<d||f===d&&(e.x>o.x||e.x===o.x&&R3(o,e)))&&(o=e,d=f)),e=e.next;while(e!==l);return o}function R3(n,t){return mt(n.prev,n,t.prev)<0&&mt(t.next,n,n.next)<0}function F3(n,t,e,i){var s=n;do s.z===0&&(s.z=Rc(s.x,s.y,t,e,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,N3(s)}function N3(n){var t,e,i,s,r,o,a,l,c=1;do{for(e=n,n=null,r=null,o=0;e;){for(o++,i=e,a=0,t=0;t<c&&(a++,i=i.nextZ,!!i);t++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||e.z<=i.z)?(s=e,e=e.nextZ,a--):(s=i,i=i.nextZ,l--),r?r.nextZ=s:n=s,s.prevZ=r,r=s;e=i}r.nextZ=null,c*=2}while(o>1);return n}function Rc(n,t,e,i,s){return n=(n-e)*s|0,t=(t-i)*s|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function G3(n){var t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function hr(n,t,e,i,s,r,o,a){return(s-o)*(t-a)>=(n-o)*(r-a)&&(n-o)*(i-a)>=(e-o)*(t-a)&&(e-o)*(r-a)>=(s-o)*(i-a)}function H3(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!W3(n,t)&&(no(n,t)&&no(t,n)&&U3(n,t)&&(mt(n.prev,n,t.prev)||mt(n,t.prev,t))||Ra(n,t)&&mt(n.prev,n,n.next)>0&&mt(t.prev,t,t.next)>0)}function mt(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Ra(n,t){return n.x===t.x&&n.y===t.y}function bp(n,t,e,i){var s=Na(mt(n,t,e)),r=Na(mt(n,t,i)),o=Na(mt(e,i,n)),a=Na(mt(e,i,t));return!!(s!==r&&o!==a||s===0&&Fa(n,e,t)||r===0&&Fa(n,i,t)||o===0&&Fa(e,n,i)||a===0&&Fa(e,t,i))}function Fa(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function Na(n){return n>0?1:n<0?-1:0}function W3(n,t){var e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&bp(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function no(n,t){return mt(n.prev,n,n.next)<0?mt(n,t,n.next)>=0&&mt(n,n.prev,t)>=0:mt(n,t,n.prev)<0||mt(n,n.next,t)<0}function U3(n,t){var e=n,i=!1,s=(n.x+t.x)/2,r=(n.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&s<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function yp(n,t){var e=new Fc(n.i,n.x,n.y),i=new Fc(t.i,t.x,t.y),s=n.next,r=t.prev;return n.next=t,t.prev=n,e.next=s,s.prev=e,i.next=e,e.prev=i,r.next=i,i.prev=r,i}function wp(n,t,e,i){var s=new Fc(n,t,e);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function so(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Fc(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}_a.deviation=function(n,t,e,i){var s=t&&t.length,r=s?t[0]*e:n.length,o=Math.abs(Nc(n,0,r,e));if(s)for(var a=0,l=t.length;a<l;a++){var c=t[a]*e,h=a<l-1?t[a+1]*e:n.length;o-=Math.abs(Nc(n,c,h,e))}var d=0;for(a=0;a<i.length;a+=3){var f=i[a]*e,g=i[a+1]*e,p=i[a+2]*e;d+=Math.abs((n[f]-n[p])*(n[g+1]-n[f+1])-(n[f]-n[g])*(n[p+1]-n[f+1]))}return o===0&&d===0?0:Math.abs((d-o)/o)};function Nc(n,t,e,i){for(var s=0,r=t,o=e-i;r<e;r+=i)s+=(n[o]-n[r])*(n[r+1]+n[o+1]),o=r;return s}_a.flatten=function(n){for(var t=n[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,s=0;s<n.length;s++){for(var r=0;r<n[s].length;r++)for(var o=0;o<t;o++)e.vertices.push(n[s][r][o]);s>0&&(i+=n[s-1].length,e.holes.push(i))}return e};function Rn(n){if(n.length<3){console.error("points.length < 3");return}const[t,e,i]=n;return new B.Vector3().subVectors(i,e).cross(new B.Vector3().subVectors(t,e)).normalize()}function Pp(n){if(n.length<3)return[];const t=Rn(n),e=new P.Quaternion().setFromUnitVectors(t,new P.Vector3(0,1,0)),s=n.map(o=>o.clone().applyQuaternion(e)).flatMap(o=>[o.x,o.z]);return Ba(s)}function Gc(n,t){const e=Array.isArray(t)?t:[t];for(let i=0;i<e.length;i++){const s=n.start,r=n.end,o=e[i].start,a=e[i].end;if(!(ro(s,o)||ro(s,a)||ro(r,o)||ro(r,a)||ro(s,r))&&Q3([s.x,s.y,s.z],[r.x,r.y,r.z],[o.x,o.y,o.z],[a.x,a.y,a.z]))return!0}return!1}function Q3(n,t,e,i){const s=[t[0]-n[0],t[1]-n[1],t[2]-n[2]],r=[i[0]-e[0],i[1]-e[1],i[2]-e[2]],o=[[s[0],-r[0]],[s[1],-r[1]],[s[2],-r[2]]],a=[e[0]-n[0],e[1]-n[1],e[2]-n[2]],l=X3(o,a);if(l===null)return!1;const[c,h]=l;return!!(Cp(c)&&Cp(h))}function X3(n,t){if(Y3(n)===0)return null;const i=Z3(n);return J3(i,t)}function Y3(n){return n[0][0]*n[1][1]-n[0][1]*n[1][0]}function Z3(n){const t=n[0][0]*n[1][1]-n[0][1]*n[1][0];return[[n[1][1]/t,-n[0][1]/t],[-n[1][0]/t,n[0][0]/t]]}function J3(n,t){return[n[0][0]*t[0]+n[0][1]*t[1],n[1][0]*t[0]+n[1][1]*t[1]]}function Cp(n){return n>=0&&n<=1}function ro(n,t){return n.x===t.x&&n.y===t.y&&n.z===t.z}function Ip(n,t){const e=[...new Set(n)];if(e.length<3)return;if(e.at(-1).equals(e[0])||e.push(e[0]),t!=null&&t.checkLinesIntersect&&e.length>=5){const a=e.map((l,c)=>c===0?null:{start:e[c-1],end:e[c]}).filter(Boolean);for(let l=0;l<a.length;l++)if(Gc(a[l],a.slice(l)))return}const i=e.flatMap(a=>[a.x,a.y,a.z]),s=new P.Float32BufferAttribute(i,3),r=Pp(e),o=new P.BufferGeometry;return o.setAttribute("position",s),o.setIndex(r),o.name="PolygonGeometry",o}const q3=new P.BufferGeometry;let Mp=class extends $t{constructor(e){super();u(this,"isPolygonMesh",!0);u(this,"geometry",new P.BufferGeometry);u(this,"isBlank",!0);u(this,"points",[]);const i=new P.MeshBasicMaterial({color:4090367,transparent:!0,side:P.DoubleSide,depthTest:!0,opacity:.5}),s=new P.MeshBasicMaterial({color:16777215,transparent:!0,side:P.DoubleSide,depthTest:!1,depthWrite:!1,opacity:.3}),r=new P.Mesh(this.geometry,i),o=new P.Mesh(this.geometry,s);r.renderOrder=1,o.renderOrder=0,e&&this.updatePoints(e),this.add(r,o)}updatePoints(e){this.points=e;const i=Ip(e);i?(this.geometry.copy(i),this.isBlank=!1):(this.geometry.copy(q3),this.isBlank=!0)}};function kp(n){const t=K3(n);if(t.length===0){console.warn("No geometry triangles found"),console.debug({geometry:n,triangles:t});return}let e=0,i=new B.Vector3;for(const[s,r,o]of t){const a=Hc(s,r,o),l=Ep(s,r,o,a);e+=a,i.add(l)}return i=i.divideScalar(e),{center:i,area:e}}function Hc(n,t,e){return t.clone().sub(n).cross(e.clone().sub(n)).length()/2}function Ep(n,t,e,i){const s=i!=null?i:Hc(n,t,e);return Ut(n,t,e).multiplyScalar(s)}function K3(n){var s;const t=n.getAttribute("position"),e=(s=n.getIndex())==null?void 0:s.array;if(!t||!e)return[];let i=[];for(let r=0;r<e.length;r+=3){const o=e[r],a=e[r+1],l=e[r+2],c=new B.Vector3().fromArray([t.getX(o),t.getY(o),t.getZ(o)]),h=new B.Vector3().fromArray([t.getX(a),t.getY(a),t.getZ(a)]),d=new B.Vector3().fromArray([t.getX(l),t.getY(l),t.getZ(l)]);i.push([c,h,d])}return i}class $3 extends vp{constructor(e){e.containerStyle=fe(F({},e.containerStyle),{zIndex:"1"}),e.contentStyle=fe(F({},e.contentStyle),{background:"#6386FF",borderRadius:"2px"});super(e);u(this,"area");this.area=e.area,this.containerDom.appendChild(this.contentDom)}updateArea(e,i){var l,c;const s=i!=null?i:this.area.polygon.geometry,r=kp(s);if(!r){this.ndcPosition=null,this.updateDomPosition(e);return}const{area:o,center:a}=r;this.ndcPosition=a.clone(),this.updateDomPosition(e),(c=(l=this.area.model)==null?void 0:l.config)!=null&&c.getAreaText?this.contentDom.innerText=this.area.model.config.getAreaText(o):this.updateAreaText(o,{fix:2})}updateAreaText(e,i){const{unit:s="m²",fix:r}=i!=null?i:{};this.contentDom.innerText=`${ei(r)?e:e.toFixed(r)}${s}`}}class Wc{constructor(t,e){u(this,"id",Et());u(this,"selected",!1);u(this,"text");u(this,"type","area");u(this,"lightMesh");u(this,"areaItem");u(this,"hook",new Ye.Subscribe);u(this,"model");u(this,"polygon");u(this,"points",[]);u(this,"planeHelper");u(this,"polyline");u(this,"meshContainer");u(this,"domContainer");u(this,"five");u(this,"updateDom",()=>{this.five&&(this.polyline.lines.forEach(t=>t.distanceItem.update(this.five)),this.areaItem.updateDomPosition(this.five))});var i;t&&(this.points=t),this.model=e.model,this.polygon=new Mp(t),this.polyline=new As({model:e.model}),this.areaItem=new $3({area:this,clickCallback:(s,r)=>{const o=s.clientX+"px",a=s.clientY+"px";this.hook.emit("selected",this,{left:o,top:a})}}),this.domContainer=e.domContainer||null,this.meshContainer=e.meshContainer||null,this.five=e.five||null,this.areaItem.appendTo(this.domContainer),(i=this.five)==null||i.on("cameraUpdate",this.updateDom)}get isClosed(){var t;return this.points.length>=4&&((t=this.points.at(0))==null?void 0:t.equals(this.points.at(-1)))}addPoints(t){var s;this.points=this.points.concat(t);const e=this.points.at(-2),i=this.points.at(-1);if(e&&i){const r=new vs(new di(e),new di(i),this.polyline.model);this.polyline.addLine(r),this.meshContainer.add(r.mesh),this.five&&(r.distanceItem.setCanSelect(!1),r.distanceItem.appendTo(this.domContainer),r.distanceItem.update(this.five))}(s=this.meshContainer)!=null&&s.children.includes(this.polygon)||this.meshContainer.add(this.polygon),this.polygon.updatePoints(this.points),this.areaItem.updateArea(this.five),this.points.length===3?this.planeHelper=new P.Plane().setFromCoplanarPoints(this.points[0],this.points[1],this.points[2]):this.points.length<3&&(this.planeHelper=null)}popPoint(){this.points.pop();const t=this.polyline.lines.pop();t==null||t.remove(),this.polygon.updatePoints(this.points),this.areaItem.updateArea(this.five),this.points.length<3&&(this.planeHelper=null)}complete(){this.points.at(-1).equals(this.points[0])||this.addPoints(this.points[0])}hideArea(){this.polygon.visible=!1,this.areaItem.hide()}showArea(){this.polygon.visible=!0,this.areaItem.show()}projectPoint(t){return t&&(this.planeHelper?this.planeHelper.projectPoint(t,new P.Vector3):t)}remove(){this.polygon.removeFromParent(),this.areaItem.remove(),this.polyline.lines.forEach(t=>t.remove())}dispose(){this.remove(),this.model.areas.splice(this.model.areas.indexOf(this),1),this.planeHelper=null,this.five.off("cameraUpdate",this.updateDom),this.five.needsRender=!0}toJSON(){return{id:this.id,points:this.points.map(t=>t.toArray()),text:this.text}}}const e5=`
<svg class="fpm__delete-icon" width="16px" height="17px" viewBox="0 0 16 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <linearGradient x1="22.185491%" y1="100%" x2="66.8316686%" y2="6.67239121%" id="linearGradient-1">
            <stop stop-color="#FFFCFC" stop-opacity="0.6" offset="0%"></stop>
            <stop stop-color="#FFFFFF" offset="100%"></stop>
        </linearGradient>
    </defs>   
     <path fill="url(#linearGradient-1)" fill-rule="nonzero" transform="translate(2.16 2.16)" d="M11.2979686,2.71818182 C11.611378,2.71818182 11.8654465,2.97561809 11.8654465,3.29318182 C11.8654465,3.58428191 11.6519584,3.82485822 11.374972,3.86293275 L11.2979686,3.86818182 L10.464,3.868 L9.7236795,10.6246222 C9.64153248,11.3737453 9.04854423,11.9512142 8.32013277,12.0165596 L8.18206028,12.0227273 L3.68338622,12.0227273 C2.89302127,12.0227273 2.22904821,11.4205655 2.141767,10.6246222 L2.141767,10.6246222 L1.4,3.868 L0.567477876,3.86818182 C0.254068499,3.86818182 0,3.61074555 0,3.29318182 C0,3.00208173 0.213488114,2.76150541 0.49047449,2.72343089 L0.567477876,2.71818182 L11.2979686,2.71818182 Z M9.322,3.868 L2.542,3.868 L3.26978106,10.4976259 C3.28762252,10.6603274 3.39528004,10.7928487 3.53932022,10.8467307 L3.61412483,10.866894 L3.68338622,10.8727273 L8.18206028,10.8727273 C8.39410941,10.8727273 8.57224853,10.7111717 8.59566544,10.4976259 L8.59566544,10.4976259 L9.322,3.868 Z M8.16824216,0 C8.48165153,0 8.73572003,0.257436269 8.73572003,0.575 C8.73572003,0.866100087 8.52223192,1.1066764 8.24524554,1.14475093 L8.16824216,1.15 L3.69720434,1.15 C3.38379497,1.15 3.12972647,0.892563731 3.12972647,0.575 C3.12972647,0.283899913 3.34321458,0.0433235966 3.62020096,0.00524907226 L3.69720434,0 L8.16824216,0 Z"></path>                 
</svg>
`,xp="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTciIGhlaWdodD0iMjUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSIxMC43MDYlIiB5MT0iNDIuNzQ0JSIgeDI9Ijg5LjA2NCUiIHkyPSI1Ny4yMDglIiBpZD0icHJlZml4X19hIj48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMCUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9Ii4zMDgiIG9mZnNldD0iNDkuNTY5JSIvPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3QgeD0iLS4yNSIgeT0iLS4yNSIgd2lkdGg9IjU3LjUiIGhlaWdodD0iMjMuNSIgcng9IjExLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDEpIiBmaWxsPSIjMkMyQzJDIiBzdHJva2U9InVybCgjcHJlZml4X19hKSIgc3Ryb2tlLXdpZHRoPSIuNSIgZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsLW9wYWNpdHk9Ii4zMDMiLz48L3N2Zz4=",t5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAABUCAYAAAA/HINRAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAw6ADAAQAAAABAAAAVAAAAAA6J+OeAAA2+UlEQVR4Ac2de8y16VXW9/vNodM50hqjHMIfQqESi4SDJk1opCaUiolGzBRoQ9KoQIsW5C9ixUxCWxsIhzQRpB4wSIkdIVZ7mkC0pgQSEAzhYApF/8AKakIK05lOp3N4vX7Xva611/Ps/X7fN22neLf7ude61nVda93P3nve4/d9F4f/D9YP//Tln3n66cOLLm49fOHhUo/D4QWXl4fna7/n6cvD3RcXh7uF355RVfNiV+0gzoH4WsVgWXsueLDJwRIZu1cFyd1LBXLH+x4UNgZ2aT80oTAvVObMLNTiG8xne7p4y85X84qfntakP3uteHVdeLDQoQYrmQBFNZ95ygvy/aYW/QW1FGsn7/q1w8eVP8JDGPsfXF4cPnjtcPitpy8Ov3Xx9OHX3/zai//Rvf+YAub9tK8feeflZ18+cfhq3a2X6sb8pcPTh8/xndMkyn2z9eboJyOvKO4zsXdiLWKeDK+6+6TGa19FYeEVQI8LPSOX9NLavzhtF42Svf5cbg/5WYZBnYPzpY+biaAXxCKy14qn99RTY8cYr8wVjD043uS7NTWuc4lmhUs3xGg4E+usHtzV44U3OwtZv/G5z3iB6+KH4mj1PHxIz+N/FuF9T996+Jnv/TsXH1L507rqmM9+z594z+W9j378cP9Tl4dXqelLdJMuuDm8ILlhTz91OKh2dm2eBHH8gtPeOKcgR82l8uzGqWn5CVGd/Yb6JdnwWlNeRfE2a8F7pgL2szRvFgJqP9EDnDlv9646ed+nkmBrXvQ2X8Xopy63MRrn0cQLUy3DurBH5wK1oQnmHVxvklv14KP6LbxhtGvuS/3v/Yp/4q57Dw8+8KqLhze6Zylh7md1/dN3XH6RzvxdavR1Tz19uJNmTz6pF37913Nzo+qmeeMi0awT5wnO0CVZqRLnA+wwtQhr3/inVlxujuu7OUJj/4T0GWrnu/GC4wFWN0t2mPuvsq8n+qtqwrFmbTQL2mB5dZ/jebycBa8zenQnz1mI43xI4fKmuHbL4XDbrUun9KMa9qf1RnnzP/7Wi/9WLZ6VjXGelfWj77z8Un1a8Ho9/roOeY3/6j+lNwEfBbgXvknsdPdFu6YB76V4psHhbPCRWJ9TneNVj02fGGtvfD9L1bCmXfMq75ZzFtV60J3fRl+akxfN1A8rPEebnsWzUahhZg9bpYY+Mb7EWVfhqk/eJo62OG6f817ht9Gnf2lqfH8KexsfOXhj6KWjyzuke+P3/d2L/zpafsrC9P2UGf6Td1/+6VueOvyQRn8FnwLxEeAJvQlYuS++EXQWsMEgCc+NYs8LJFhyqKxw8rlpsPhUm/a0aFzsWz3hsvYYM6b/Iuha5ODszMbaY+R49CKBO/Bo5vmMhRcD5eDVajNr/F0vXveJfrUNvAYLtww2+oGd+AOUb88KVPMF8x5x6md6mlK4tj4bPW67bX20gKN79HZt3/F933bxv8k/VYuen5L14IOXt/zB7YfXadAHNPy9vAGe1NcB+xtBs2DcRx+6JgheqbeJNZ9Aq/OVtm8Xi1Nl1/cvtk0OcWfq/nWXiK8375x19uxYgfVj/tTYp77HKK7rId+Mvg0iKv9xgD7bGb85SxwmZsmux0ldQrC6fb61eLU2xrXfSA/Nbwp9GqX1sHwf+Io/dXjL/fdf6JX2ya/M+Uk5/ei/u/y8i1sOb9dHgi/jo8ETGo2d5ZuhLjlo9ryqnDOF7pBvkkKnJEOnzOusPrXaF3El8UQ3X/ihtp+AnqXiGstU68GdrcvUgnQ+5x7n6HNBnhxyrdYnHgN03wTRVx7YRtEnSV4abFnW6NJagirOWcwtUrjQ4CSH00n1aWzk8c1zcVY/rOy506N97nPW1xeq/4rSV3zf6y7+u/t9Ehf5fHLrrf/h8n4d8K163JePBtMxh1+v8OP9yo3b3AwJm18mJ3nMS7jRK3HOpU429Zu4KBPDuvUkWq5f4ZUndDHX9cTPhqrJY9aIr9KP8bea0ch65bF3SQl5vMH2Pc0D14NjbepVjDepP/284vx5TkvW9y7erSc4c/7r6dsTMy3PukJfmfFWfYS4Qz990rdl/0jgt+jTJj59+oRXHfOZ6x+8vLzlD999eMvlU4fXcsM+/sT6aMATzMpN9l4nyU1KzTyzERyfIONF3nCF7V9A5/xbv2xJj/6aZe9ZZXPsD51etc8ncmLWMaeWNy4QtK7Sr6Kvm3DORMG5my3u9G9vE3UR76x+SX3t+p475z/HrzO1XhzH+3Oi3Z3fkLCzzxlFrUimv/HRt2/DwCyuy536KEEPfXbyw3/hTx5e94l+2lRHmtY3jn/sfZd3PPHI4af0naKv5esCvlXKnKz9oc5huZnh+rBlEJ/o9jcyeO/cBCXxOtFTM1kXEcMzFLINQEZ9x82zdla/pFs9XsEVEHebSqYX1LN5ic7q+VSUutZeu8dar2DGFs+zUmRNTCn+eS5O9NTRsDoYobDWQFESL2umbOqHaMBn9bfrC+zb9V0n/dzi3XffefibD7z64mPxvtm9buXN0g8HvRE+Q2+Ed+u7RS/Op0UZ9NwhcZ5PlGO6RpR63fwupV44PqzptZDCpr60bPar4Jx2eu5niz6fKpzoReifIme2OgBaFmm+02UspmjN0KWw+J/Dy7ZFzUGuZL644mN7CfnJ96yDn+jLZ/8mMHf4o+tZKGq5f+1X6U0Ml5nGACfzh1z7CRefwYk+nzYp/4Wnnjp87Q/9/Ys/HLQbhpzrple9Ed6vH5u/6PGP10+MNdUcDLP98LNBcwnqrhpL4cyN2uiHDnyjLWKsKHacWgFs1b5JGwy+gD5L3ank7PMFhpZlzyTKw3eRvIITfRWmJ9QTPby6R3P++Ja9t2hLchazTpfr6lVkLlZ7Ftb5Kq9rmXnThb1nLR66nDU8lwYRPP4Nl1lwNDPmDcEX1/L+9SfuOrzkh15982+IOqLHuO6lPjX6j3ojvHj/RuhBd4PlwBgT1znW8CXyQcYUzncH7pvWBmtU0qPpDqsSaOaz96L5us8BJ2b/8JV0TiDTyW1a8dyzeK4Vnrj1k6MinvbN0AgqDs7e5ejZtdjMc3a8uDw40dtLSWvEKdpRvPOcGrjxsmDqU7yeXhw/vxbXHNGxszJf4e4vmHTOAhWMX+/gDaH1C/fcc/jLN/spk2Q3Xnyx/NSjh5/ijcAXymd/h8iTrYPFkUOycqMrXWCuAo1Ln0MuYHlRix7c3NLOuNqvCgW4RaCWFYy8Y/FaXxrXI6JYuLcZF4cZPadqVT76jwGm3tIit55W5dHzRV/c2qrz2qA0DX09QmoNeEDtMzZc9cwAxmw9C5qIimtdBogesHjWm7Qu6DNrOHkCkHRvJ3VfkZYfYetJxoLypD4tfEyfuYj/4o/oa1t+BjYoV4Y39Wb4yHv0XSN9seyvEfj8EztNk4G8C0yebnmC++YhE8m59vC956DZi9scBZTQ56Z0XDVVejbPF3HpWg9Ry3oHR91o3/NhGm4syRNjkTNu9BB4oIek1T4BFnzUl4GlgxPdxo86fO37vp7vKv2SjKF2eurSRs7Zur9qLOdFYMv5XaM+AuvJ5yptjX8cgF7ibfRDR9/Zq2fb3ID1TZ3HH/ecX/tL/+fwlmFxZTgtzpL+2XsuX6Gf7/0b3gg8WL4RQ9k3hoPUIRezDmVRkPMcHxLvI83R3g9wj6G5kd71mvlELwM8KHf/CpJP/+kliXsHO/GGoDVxcwGrIT1mnVJW8MwB3nriIoZXaW/Bve/OP88b3lGoSITg2alPL/M1RGMMVLqr/NtrEBqz4fFcOWDOSXnPPYeF/xx9l4mH/hv+9T/w967/cwjGuXL964cuP//xJw+/rF+vvu9j+vSIwdLkGAysnOawHdfBnScW3yGmmaR6wOt3ffmytR9x8ATxLY9Kw9poAecsTSocy56NopLZG2ifg7HAM1IH0bfx4CxZa+OxBjgW7Vn6Te80Gz0CHdXbec95+bwSTG/i/Jd4g3vI5Z5eV+lh5bmM34kXHD3wco0g59nV4iXYq73KwPPUUGx33eEf0P2Rvpb48jd/28XvlOxku/LTJL5O0NcHb9d09/EFs6ekmZY3BlXMo+D1Iqgh4LFyI000cNSTmo6BAg4VeXTZ4WY1BplHDWB95YZ0qZKl0WU3OPXYTT3WMRDesYWnl+6Prh49AHok8csOpjW15PTa8MEo1Oq45mXz7JVDy7xArOQYTX3weCSHQ+zZpp5Yj6zEOUNy6vHybCNvHAyimm/0ZTJ50Ka3ZdKFE4/mKCD+qD5d0re379PXEm+/3tcPV74ZHn3X4dvl86V+I5Q7wxJy01gZYuZFXQRdfROiRxNsHgK2CtSK2k1yE6G4vwjB3D8C7Q65ZCDtCXOj4sOe+Y8kQD2GLvPjk74KvVrfgAIPse0LZn14lUz9jKHRC1pms4TLOJ9bVb/WV26pDUqiOPNnb41qkYGlbjk1ilNfY7W+xsLEeprXwmvygMHcA37xwqlWhS5eOL4XSjIfpNYVadOfPpB0+Zj+g643xJf+0v/16xr0ZHWfWdGnR5+pnyx/QI97/VV5inY+NtjBTuegAJ3TaejBGyocoPkWt4SsF5xIDI7E+pzqHK96bPq08+i/n0UcNFjTburJuyVJLYfJd34bfXH8RIYvj40+Od4qDFrP4tko1DCzh2WpoU+MHXHWVbjqk7eJoy2O2+e8V/ht9Olfmhr/yvNPLa1nPqw2OLzn6tOl2245PHz77YcXvulbLn4fbK6zHxn0W6c/qHfRvXyd4MHokC6oiSkwfIWp550q2MN0LmJbKGgc/Th9x+hHjQPPQ1d7k9DE2/pKrJcHy/rayeF1r70eQi36sNLb1rpMPZzU29OiY4/UgRnWeidbzl6/eWG7ueW5/e1VtjI7zmL7OkD3lwc23admqVFO9VVovXJi68vbG6Za4A658CDXflaPQGs/i/UUoq8QKCsaU2oOapkF3D41D/0/tn5B4159lPjB+Mx92Cz4X73r8sueujj88hN6I/DdIx8iLLtXE5opp1Tw5sBpMm/CHkP3TPTNr4adl/Gm1+DMvn6yUtO+ySHuTOf5b3TeTf8zM7V1+mewm+BCKVkHnZ/Td7Mqot9hJ/mResPn0r3P+WWW7OLsXj7rHDYYDRXO+5cy2Ik+xa18q4cjYfSW6PIc/TDuOfwO0+Xhy7//2y9+ZVqcfmS4dni9frjW30bF0MPYbTsweMHT8/hOLzTvYtI+cPl2Poxmv2nsfuFNPVjwKRixb4o03U+1+UYwFQ83H3bJVSO8QRvbQITX3MqtD0hyvSVeqNA6ThA9uR7zXG0bLhRi5hhYDgRkeNbaZAXRhdvtBQRrSYoCHNK3ivZRktdEtKm3RwVn9fhWD/z6sRdPU2Jp/LMHwlsOr9/Ty3LB//I9l1+kqX9d30W6dvZnCsPch5La+3C9MqcTg4dbQeeFX6lP/Xr6+GNaJ5t+m7goE8Pa84yhXL/C6+TNhH5o7Zd8d6/gXaVHUi03frGKL5yJ5f7GOzx21pwtPfZYeOnvXzKsZMNtA1v74ll0SQnQegJ5PBM9ElY0+7MGX6x1DeZ9N7P1HlAfGfRnIO64zaO96Ptfd/xLBjYfGfSXOf0D2V7j17JPVh0SfDabPHCe4Lxru1Yn6ZtUQ3WdAH/0Cnlsn2WAY31Tixd6cayvfud4mc097LouaNPfT9yoEfrM2jNbfEKLfg2wZknNfhCyFMenIWGzB/FO0kDmdL1Ik89szocBuRe1CrOTztj6wjwn8SA4rkJg71yET70QYyd6cPFbT1CJrVNY8lUq7JzXxPzc7Py6LnO+Q6ofwl3T/3i996ojHQ78vUb6MuH39VHhTn7/yM9WmkMnhq294L5BBcNqzEldepCZSxTc+tlr8PLEnvOzXuLr6iW0NZfRE7/0z7n2WNdd0OUqPfVaU5P7lHvmOeGdmcVwC5ZZznelXs+oZ8dyp937VUvzZuxO81zxmVj557k40VO30Qy2WGt2XieyNqoz1U0bsM+QWVo/CN2rsFHyUOT8gSD9GYiP3n15+MwHXrf+Xqb+yPDxi8PX6/eP7tTvga81HRJrT0jAnDWrNTwhfleWxbltPsGtx1RJbUtW/nuP+aTTy/33enIeWalPTDXrbbCIPRtpcTf+ez08CLWmPtTYZ+9DhoB2xpVOiHijhxOw4nnfqbmumu+rcuvRLGi1BNQDLmFmg9b6ivG3r3K4tiIALyyB9cKyzFViXJd4dR2MpIjmkRtsGKRnPTufGZAWzyke5Wu8OI/rP/iC7/zItcPXF8TfZ7aWPkV6FRo+x/PKIDMvrLYethRn3whz6Om7iWtg+8acXY8TPcJwFGY8goZLy+Z6FTYvGHy0Wk8inqlcKqa/MaAEij0XeRmkTyjsLk+9sJjBbz8Rc06waF3f64cHvKTRO8cjRTcqXrCVZpQ1Z4y0e4Yd12V8S9v3u+ajTYpwJm+UjnPBCUl7z68YOKXgyb0nwbgWvMA9vwDru7DIpPwVRvylFfpLy14VD9P0KdLn6Luov6t3y4U/RUoD7fHBlAOTd4OJRQNpxDnwlfqYDk0auY9wPKwPt3p4uwqTrmhrZvIAs1fF2SZnQ1fSOUHNFF12z7nKx/tE8Sp9eW30wdhZvuk1f/UtaA3VyUrnGZbBwnOAaQ8399dc5WkbLfv0nJrpdaJP8Xp6cdzf4uoTHTurzuzBduefs0C1pHSxOYeD8ZcJ6Adwl7deHj73e1938SF/ZHjy4vAymV7wKVJevJC5xyzfCCXJj8GqLxLEnb4E1qvc+iEDNC6tD0atiMxCGH1zS180ZxychxcFtEVoHHiIOhbW+llfbqtYuLcZF4cZPadqVT72GgNMvaVFbn3NCNzzRV/c2qrz2nr+6EVqPVjY4IknHqzqaMNjto1XCoPTN7AwU4pnffzpKTxHOjZRgT5Vbz3ckA0uo0ArO16nLjNvuMOD75jqxwgXT99yeBkOfjPoa4WXIuBDx1xgPGxajs4hKSho7QwNPlae4AxFqW/sGb2lY1jry8+60ucGgjnWHpl3cPzZa230A3MYffbUa8c8XrEkTwwtZ8wcYNZAQg+g1T4BFnzUlwHlcKfORvErb7B9X883erRXYd5S177RV++UOVvra17nRWDL+T0r+hFYTz5XaenrMAPQK1gFKSGn7+zVs21IZSAuFi5VMPX+rqlwfbr0Urz9ZtBf6voS3ggZOs3ij08WmG+EAnjh0tX6QXZNnAFtOHjxYHnI2g3o0t4jNlaGxNbrAkTsEoEeUy/kBLMerpb1ilsvrEquc0meG7rRS0jue1MK948oLsUBtr7w6LKnHlk33+ldB2ti+Qpz/4HbY3B7voFBz1wn+vLyjNLEj7Cxug9Q259krJwxZ0LfB0AfbgcBlmfrC3afcQO6r/R7C2rRE/On4vSr3S/B6uJfvefy81T8Hb5W4G/CY4W8iXFVw+7ZwcAQaF1Xj254OQxm8fLDYw5OibXxXtBxgPhKG0v2rKkFc16acIK3PgbindVPYcXwIusg+jYenOGRHudms2fpw7M0zUaPQMN6M/85r9yK6U3sF5eMNjjG1SS9rtJDzXMZvxMvOGXpGqY5z64WL8Fe7VUGnufcbMLKNqP7D/7wtYM+Knz+NRl/Meb+c82Q9SDP6jguKrisC9CAre3BymCjB5MuelL0BhSgdQ5k0nGHlpXafgDrMRg9ysbS6LIbLD4xoeePXnlzVewY8pnV/VWjr3tnAPRokmcH05pacnpt+GAUanVc8/fslUPLvECs5BhNffB4JIdD7NmmnliPrMQ5Q3Lq8aI288bhUFB9oy+TybOey1howolH91eQ2O2TZBfIp0rX9E64vHb44mvKXwjRfzcqYj0yOD1nM8dgFLQyxMzTZzHKq0B4hPZXEr25KlArajc5N0sw6yMo/WpgR3tkttwoKhu9geKz4SdRdOYKI48OGmszvwFAgqPewuhXqcy2+r0XvTxDDdL9az6s3Kr6tb5y6pnXEvziVXtrlEcG1jyb1JxTj7cerSeGq4v1xLXwmjxgMPeAX7xwyPHOsr4TBSJYW1jrymjTnz5LYna8Wi8N/0iOSU8dXsib4gu6CF6TpImbYyVh9SNbBuJusIJdn5eaqLkK3KZ6OSlOIBt3ssx6purTZYIk7DTqZopZyg0Xzjlz1kUoSfn0TS1+eldqbfRp7Vr0Mg1OEL17iUit9UqIJ2fGaOyd5mjrQQ2t9U64bL02uTywscaFrVdm7f7Vs3O80VXPCj2PY86hIPySdw4ntYgyP0LOZT1ErdbPxJXjpfWC0LPSY+qNBSgifwkcnxXpF/e+gH9E5AVLvq4xgcvD2iQhpqBiwkwRPVQ/QaM5XC8Fk9fxDrd36eeB8QB2qTRwWfaqxPoF95OPDwte91W80S/K4lUcnXm6TD1zpN6e6IrnMA0G7vmVR4NHYmjHm1v+5cGG1vqhcVlgZsFikQYmkvVpPvThb/QGh155z1kemQMq83sOLm60+NOz9Qi0+sw1i/UUoq8QKCsaU3IWFTMLuH1qHvc3sBxaL6xme8E1fWh4fv76eGgu4CiSNwwIeGRV7EMJcw9h5GVspm+Mi0s4LRBRAjMFPbGT4pcnmYffGJS+dO6F3uQVQI9dDp8dmucvUrjuP7EyiI5S7sW5Wc9hQxKpB8tsrtt4zUROzT1n/+LUdjxruAi10M1zBFvFHr+aCFWPeIY7zxHMel3sT+IhF9qzlpfHrjnwnv4kV/rfjJ7WbnD0df81St+33Af33gywRve5mWX9SOH512Sq31VaiwYYbHTJi5QhUMCLdjms6xwMZOatL9/Oh5H7jzze7hd86sGCh7zbc7bup3puVlPxcPNhl1w192/ydQIRNyNVbn3mJLneEi9UaB0niJ5cj3mutg0XCjFzDCwHAjI8a22ygujC7fYCgrUkRQEO6VtF+yjJayLa1NujgrN6fKsHfv3Yi6cpMXMU1r7K13vhcPc1TXk3f5iH5ReH9ggMquZyNYfjELAw80gr3+iFOw+XnUf1bA9hrVe5ceK5zukLY/PKbA0s7zlX2kfCnv7M1tIiUpsavJpfJp2Xfnq0HhCv6+jpA7/1S7K6TD1I5ZMf754HGryaC5l7EGiVRTe0vnBiVrzCNa4kOXsG3ujB6WvC2omvq0dTi/bxA0Lb+pEbh6AV755HGPWcv0Koi7Lmu5t/XPGuemd0UwtNHRcJGIzVzVbaVw9dwzZIUN3RE7YRcRb+elC/ipP6Rt9DLVvruYCnRo+Kczb3AK9lui7GdZlSKD6zdtfh7QyizwE2evwmgN6mXNaiHg415ymSE5cHNXN2WJX7xRI/07rYNrGjvIk5G3QenpM4+sRVCOy9BFMvuk1O9ODit56gElunsOSrVNg5r4n5udn5db3ORnsWNP9y6uXhrmucNk+sD6GqhXXY1BB2XLU0qPTsk2BNHSI8vOhbcN9w6mDGqSvonkg2Bqvu+VVjnegLc5G4PJNn/nh0vfpmDvh4u55Ee+tHPQfILD1UcZB7MUti7fuzOYeAUa1wDKXBqIfHHm5j4rUndQoZYHqA6dH6UZtY9KO8TKPHX+uk54Lbv/UEnRx13dNmJYZa3OzHyjpWcGg+ZvydrFZ5/sLlzfBobsrmxVciN0msPaFvGEOlGbuKMbbuzMUDlKjnw1RJbUuF11X6wukFJ56tJ+CRVQXzgmm33gYLjI+z0m/8pyd6iL5Y0XOQhRr77H3IECZ52ZiyL2/0+EOo3sTzvpO7jp84rkdTMvujH/XMRq31FeNv33P6wjZ6YVnupSS+8eq6CoxiQnjkBhsGOTlLY8xnBqTFc4pHCuDFYc/zb4reB/wE+pE0pdir4r4p5IU1rYOl2ujLqPUxnprE7JrO6cQUn+jxCWfJQI56Yup6sPnwxZ/zzZuCxKs0G33mEmGjx6AbHPtUq1j0k4e/a0WwfJBzTnoA+8Fl9seEBX7cnEZvXPWeNXPCLx0cVlJ2aAE8Q4rgtTKb08xV+0YvQstdOOZzho5F7vkVo40+eHLvSWouNniBe34B1ndhCZK2fAGP3Kp/k+2RW0Y1zbk7nCMDgzuvxu48sXJuffFuqI9pzWB9YfHCw/3DZcc/F7R77Ahl1OMNV82S0mDD2mMuA7KUNF1BZlrFpTWteO11Iz2m4mzuU2Hd0GbqXzh7QWso9NS02HLfDOiy4RYnmL2SIJBBWZF57c8aDTtc5L2mvoq2J6610Qu3f5lQa1NqaHSZuPVFm15Q3caXo83EPQtALfT6RVVaPMKnSR9eHVc1TwqZB9HuQZQkPwZL4ysD6LHRl8B6lVs/ZIDGpfXBqBURL8Lom1v6ojmr9qtCAW0RqGUFI+9YvNaXxvWIKBbubcbFYUbPqVqVj/5jgKm3tMitp1V59HzRF7e26rw2KE1DX4+QWgMeUPuMDVc9M4AxW8+CJqLiWpcBogcsnvUmrQv6zBpOngAk3dtJ3Vek5UfYepKxTCld5txwh0dkxfswv47xQb6lxPKTucKVg+lhcjk6p6qgoLXLIzllVp7gDBUsfuF7z5DZo0eklRvqGee8xDKIzDuGeszzbPQYanU9+uyrfDyPTMPFmkWemDxnzBzhmIQeQKt9Aiz4qC8DyuFO3cYPEnzt+76eb/Ror8K8pa59o6/eKXO21jOMlvMisOX8rlEfgfXkc5W2xj8OQC/xNvqho+/s1bOdHGCZ4ONSBVPvWHW//i/1PhDzt0kQZOg0i78HU50F5huBph4u1JCuGVh1BBs9eQEK7Qc9g6UGljlmbCx6+ru4ehC7VMZTDw3yxIiToyNu/aKj6oUty7OWtvUSWm+DxXMtogWJVHrl1FPOubODx9vSELW7/6yDmbQu9hW20VPCY3Bd32GmoYXK5czyjKWDSNhY3Qdk7b/zyBkthEc9B0AffgcBlmfrC3af6IV1X+n3FtSiJ9a/IX24Rf+uj8Lf5ifQH6AIyEIcsgGa8KCg5Z4mVWJAcdU9CMSsvX7vBU9YDlA22xniBTX9lmzNgx6OLt6Vmze4uQkbPTx0Wunb+gUvgkjWF5Yz4hW/YNnxtXcFwfus1NEPz+bsalAyX/Rlu9RKqLce33osQtVKFK/Mnn3ipg6P9t71YR64DGC9LvGbHtFTS5zDtx4D9Pj5sjZCewMraT08rfQLqfUKiHlYQ65HvNDy9QK/jqRf2PsA3036Nb87eDOEPNjd2I7Iy6yGHrAb9WCLehwcIks621cPw8QK0Dat6t3f4nVpDDKPeKGv3JAuVbIwuuwGpx67qcc6BsI7tvD04vnRayGzdOpTmDux1tSS02ujB6NQq+Oal82zVw4t89ZInWM09ZOHR3I4xJ5t+NmbS6145QzJKcfLs428cTCI6rvRl8nkQZvelo1549EcBYl9D5JkF8ibga8V9P9fM/zj7738kP6U22c/pn/UIQ1WtAbc3BAVbFyEHDJ8D9TJ0nsiidDRsDVKOkZTxt6KPOvEmQU6qySdtHYhx7oKG27qA+ywuD3rfs7Ssm3mC34jfRrtfDdecDzAMrVkh1GJleORTK+TmgCsWZMX+cTcYD/nkm6fS7wKn3rik+csxHE+pNGlHKxpFHazwMna6MukJJ7Ns4g8/e95rv+6yf/15tdefA4fDyi+n3eI42LmHenmFDQEQ/WCp8cGW1BTOoA79YrdxpcSFSeQjTtZTj3TkLgCL1x2htoPVv3jwY3JzbNHJOXjJ5BC+UQX26lPa9eilzS471OE5Ukt/eOVHqZMvgCnA7MeolbrnRjq/yKvTPpotRNaQ1HJ9Mqsk29a9EtiUc8vLGcFgxp9ZMk3XiXK/JnFeoharZ+JK8dL6wVljvSbemMBingb/97b5eH9uPktoJ8zvA+iv5AuMlweTpOgYKWgYsJMkSFMU7FzxXC9Ji5gcjoWDj/5PDAezJXZ4MTb/Eqsh6xlfe3k8OKN0UYPoZZ7KEbP8qbL1MNJvT2LnDx1YEysd3KcA0744a1Dlr+brxno6dmGxmWBm14mDUwkeN1n6N1zrzc49Mp7zvL25ubL1yEXHuU3Z2p9ee9nKaujvqyK7i0at6g5KGSWtHd/4e7fxmvOfADQ/j60eTM8JPPL2/T31luEo4TeMCBwF+2sin0ope4hjNx6k0QrrNLIVgpXEVatJ3ayKFPvw1ffVS09PQSYi55imbZ31V0aHp5/x3X/idU87l/WOci5Wc9h7stFq9vLt6wXXoXoqbnn7F+ceLgULGDp5jlokPkZoKluoqL2xqYeYa3WKyd27+gLM1hersOrfPrTLOc88b8ZvUTRx3c/n880+m8OiF4P/hVQfb1wee3pw0PM4TfDN7zs4n8q/vlb+RaTDNIAAolzn+44RJXWTTHxeJmDmTcMc4j4dl7+8T1njE3zay7naIcej/2C5ydx8Pa5PWrWpiVHL9PG9w1mLiK85lZufUCS6y3xQoXWcYLoyfXo+zI9w4VCzBwDy4GADM/a9Im+eNC6vRLyjTTF8OirmOX+SvIaiTb1xTpebbXXq9x6CfH04yhb0TQlxqcwfPmr6ZX//Bu/za//9WYoj7flK+sIjNOIwFOtIRyWeWm9zQEnbr/S24e4hoove+sRhz+Ngu/15OjDzWwNLO95rrSPxNbhq5gwczLb1OCVeePReemnR+sB8bqOnj7wW78kq83Ug1Q++fHueaDBq7mQuQeBVll0Q+sLJ2bFK1zjSpKzZ+CNHpy+Jqyd+Lp6NLVoHz8gtK0fuXEIWvHueYRRz/kJ+dlC/XzhbUq9/JGBSB8qflLbY7frUyULXR4XTVX35dhslAk9dA27KdUg6AnbaJLw14P6VZzUN/oeatlazwU8NfpUnLO5B3gt03UxrsuUQvEN1u46vJ1B9DnARo/fBNDblMta1MOh5jxFcuLyoGbODqtyv1jiZ1oX2yZ2lDcxZ4POw3MSR5+4CoG9l2DqRbfJiR5c/NYTVGLrFJZ8lQo75zUxPzc7v67X2fi7khQ+dseTft0zzfEjw6v+ysXDMnkHnyq5cx3WxqZKXFjuUBo0rAAsOLIejLh8vMGtPDh7n4G6ku6p2oyRuo94V+rRQKyFfs7WcXl0vfp6vjJgcx2vwlpfkOerA0BpvYOW4eCk4JWWpxPKMRi4sSVdZhiMerTs4TYmXntSp5ABpgeYHq0ftYlFP8rLNHr8tU56Lrj9W0/QyVHXPW1WYqjFzX6srGMFh+Zjxr/OxptB4TvybzOg748MJPop3Jv0BcXT+kccygFUy25rT+gbJqibUa5GCq9cfgGVqOfDVEltS4vXGZfNC1AEOPFsPQGPrCpMLSVumG9aceNjWWEb/+mJ3iZmL0n1IQnVeuXZ+5AhTDKxFqV9eaOnDsEDrDhPvlDX+qziEFtfpu1FMOqZDVrrK8YfjNqJvrAUrReWRc4yrku8Frp88TQhPHKDDYOcnKUx5jMD0uI57WEL1/Zc/UMlmuFpvfjfZE5dNm+Gb3rZxW8IeKffDBkkHcgLq63zGM4nJNi8qcZafPTL3XUpdXY9TvSYhKMw4xE0XFo216sw54suO7YYmMqlYvobA0qg2HORl4G30gi1xuWpT6Fk7SdizgmGzg8ue/3woJw0eucqtDeDFbExqxp2OfOf6IvbePLMVftGL05my/1JPmfoWMWeXzHc8IMn954ks2iHFxhfe2u3vgsL51/tEf2db3rNxW8Mi+1HBgr6IvoNGPHPg3LANlaSht0ADA7CWq6NuPXCmpsAPTELEz2cF5aaD6ayc3ipKzyaklSJuh5F6/niB882xSNnbbDoAatn61Vjps6LEn369rwUtIITtL7A3Cc0fsCPIHry6uteMVVCzoMVj5UtHGn8ysbzGIvQ4jN61acncebHa7MEgBnnIq25g7TRi+P2XEaf6A2Doy8/68svXpWu3uKBh4eHlzDeCPTRz9beUGhvm48MoN/w1Re/rO3f8m2n/KEfTH0oCKx2X6mvcPTg4FmJrRc4SqEcfaXN8CGiRxM9yfSYcbVfvhTgFoFaVjDyjsVrfWlcj4hi4d5mXBxm9JyqVfnoPwaYekuL3HpalUfPF31xa6vOa4PSNPT1CKk14AG1z9hw1TMDGLP1LGgiKq51GSB6wOJZb9K6oM+s4eQJQNK9ndR9RVp+hK0nGcuU0mXOcPlu6V369QvhP/XGb/XrfCh3XzOkcvsth+/QT6MfvmN9OFmHL0c2N1SQJt4FJo9PnuAMBd439ozeOpsvB+tXuHSlz02h7lh7ZJmNYVw/px+Yw+izp1475vESxWvOBpAzZg4waxCgB9BqnwALPurLgHK4U2ej+JU32L6v5xs92qswb6lr3+ird8qcrfU1r/MisOX8nhX9CKwnn6u09HWYAegVrIKUkNN39urZNqQyEBcLlxTcfRcOh4f1w7Zvd7S7nHxkoK6PDr+nv1npe/jO0m16YJiFsW+EAgbpwUTqwYrsmjgbPXkBCvtJ8CHjPfW72J7R0586nmtbvcq4ZysPeBMjTm59+WQobOZKnidko5cBec6Gzt4Rxag4wNYXHl321CPLTD4rvUrvOp5NLF9h7j/wJTpye75z+uk/PRR7Rg8Aac3SWN0HJO1PMlbO6HmEY9UHqLOZ7oKjvuDZ+kLdZ9yA7luzQeMzHX5soGZveOBv6fV9Zp19M8B7zssPPyjhr/KVt0k1mHsSE+SBoOoehDwrnOjJEw9ODlClkwM3FX2tWDOHdbp4V+4bNrj4g80b6by8rFPc+l0T68Mt8vTLubPT2u0rCO5Zp354Ngcts1aNLfNFX7aLoYR669HWYxGqVqJ4wWFln7ipw6O9xe+4/GwjsfW6xG96REMtcQ7YegzQeyguKya3N/nUQ9BKv5Bar4CYX9G+505Tf/VLnnf4AUdnLle+Ge6/uHhK/6LJ/TJ6+M47pMS1JvJWQw/YQ/Vg1Wx/cDyih4LegAK0zoFMOu7QslIzGUFxra88PapkaXTZDU69AM8vUXTNFa9jC08v3V8l9PaIEXokybODaU0tOb02fDAKtTqu+dk8e+XQMi8QKzlGUx88HsnhEHu2qSfWIytxzpCcerw828gbB4Oo5ht9mUwetOltmXThxKM5Cojv0adH4jysF/v9999/Uf8kD+rtuvLNAO2VX33xQf2jh6/h0yX/kILGwrlprAwx8x5kUdYTVCA86wn0iN5UFagVtZvkJsIhRhPM+gi0O+SCP0t7QseVbPTFM59L6aMzVxh5dOFu5o/WQ2z74ml9hJVM/Yyh0QvaupQeoOaj5FbVr/WVU8+8luBnw+PeGuGRgTXPJqrZYIt7lIjGLNajq4VX9xmYe0gfi3CqVeSeJRzfCyWZD1LrirTpr958wayvgfkLVV/zhm+9+GAbnwmu+2aA/+qvvfhJbW99jj5d4rf8enE3OGgDKwA+WYAiNleBeSGzFyeQyZ0sxxycLBJXZkJMo25mRvePBzd03lRYlqAnzozlE11sp74kW708ghNEv8xr/iLEa3Jm7Hn6YofN+VtPqTxP9BlcO6E18JUgKZkDtK2HrNU5MYAEeFTYejDq4Ze8c/ipRZT5M4v1ELVaPxNXjpfWC8o56MGn+P5Wql6/b3qtX8dH0Znohm8GNHd8zeG1+nt5HsKcX/N2x5qY5h64puiDQuPG5DSKi+KgcfSD03HaVG0eWKV1wwmqR7ytr4StrZWQ48OC170UF3zEFm2jBzJPl6mnx/Qtqcnpkbpr0RdxchKHlwGsryHZ6Mkj56/Q4KaXScf54Ftf+NTjgelGb3CLUfec5eENUy1wh1x4lN/0bD0CrT6z+K2nEH2FQFnRmFJzUMss+vedD3fzdcIth4f+/PMPr43uevtNvRn4+uGO+w5/QwP8Il8/3MobQsuHYic5c2gfzEUINegKLaqzHvWqzZs29T78ODQ2uRFzdzt4CmqD2jfcPkZWL+eD6/5Tb8Oht9kyODfrOWxI1pMFIN+ytlnmip5aZoPguM5f29IHC1jceY7WO5AXO8tN1t6YUnplDmiszJfYs0efOrkeeLlePuQ8ehXeuYL2vxm9+Jkvvq1Xje8c3ac3gn488It/Qq/b632dMGe4qTcDgvtffPHYLXcdXq7wN/k8jI8QDOJDQxhrDgY88xwCsfUxyA4f0chJWRv+1MM9w7eoLvRlju6P3y63B0202i45+ombdcUF38mt3PoYk1xviRcqtI4TRE+uxzxX24YLhZg5BpYDARmetTZZQXThdnsBwVqSogCH9K2ifZTkNRFt6u1RwVk9vtUDv34I543wGXdDOPym/tHzl3/n/RePldUNt7K8Ia8Jb/u5y+c99ejhvfrrNf7iYx8/HB7XY67ctGCd04nBu7CCzgtv/lX59fTxx3TcrJaMZqGc9IM8eSEC7/CTN9OOY6toNM/N6kfLrQbDWnjVLQ3kudG69gmcP6PGG2P+uvb5wkszn2U3gPW6sFf7pUckwJoyuJG+aK3ZtWo8PHa+yeNvoV4efvGJuw8vf/MrLz486zeKb/ojQ4xe+ZUXH77j3sNX6VuuD/HFCV9HZPkmaurcvOB51vom+a51dQXcRD04NI/5glyEY31Tixf60ro/SWoYVJzZ3AO8lum6GNdlSqHkicxs8dnrc4CNHr8JpM/AqIdDD+cxJycuPjVzdliVff+nn2ldbJvYUd7EnA06D/qwMlvHVYit9xJMvcX4hTi9hAV2vRJbpyA+udPCznndpU/feSPoN68fet7zDl/1TN8IzFlHInxm68HLy1s++t7DD0v1zU/pL2F6VB+M+K/IHDSOe8z5uEE+bA4akXZ4vrFVSyl+8bmuHh+EXEZPQ/G1AciYf8e9rn5Jt3q8giuo9gurJOdoWgsWkvMhOqvnX5lhdq291x5r/fQCZM2znsNEwT/PBRTfsnCp6+HVwRZrjUjTq1Tn9UM0bDd6fqB2n36O4D+Hc3F464vuO7z2Zr9GSO/sdSuTPvP9xx+6/Ea9CX5EB7yXNwT/yPT+iZm5Y9/JY69g7F3K6QWc6I9SRyf60rLZr4LpMy2CxyfPTPT5VCG81orAP53a/AjAi0TZ+tDOcEwe54x24t2mis3BV0leqLTdzImv3jSzbg6XWtYrtm7MsakXTt+e5Rnoz3ldhc2zwZnn6VmF863+e/mBmn7fSG+K1zzwt2/87dP0PLdzrk96/dg7L1+gf0f3QU31JU8+qY8SH9MLgP9qac2DODdKQY+6qz587oCwqZmx9UPnvC8Ea8WKHh2nVgBbtW/SBoMvoPvXnUrOPl9gaFn2TKI8fBfJKzjRV2F6Qj3Rw6t7NOePb9l7i7YkZzHrdLmuXkXmYrVnYZ2v8rqWmTdd2HvW4qHLWcNzaRDB49+wQP7s8t36Jg5vBqW/eu3y8IoHvvnit8v6E97qiJ+wvoUPPnh5y6P3HL5T0323Hvd8TF9Y88jiUBzOh+qgDjum8OGr3jdCdeuHDl/SoynJwBJrd09yCxTU2ufAE9vQlXROUDOVVW+ec5WXV852lb68YmB9MHZWHcCzVd+C1lCdrHSeYRnU7OU37eHmRWmu8qJFuuABTg3waG9xU1MUZ8600Yvj/tXNvOhiNM58p94EfK2qb5t+RLrv+bP3HH7gE/20qFr2xjk+petf/MzlZ1178vAWGX8dB3v8Cf2pa/21lfubkTvY51bQ8ZyocKCuE9Syb92sYHPf99088SKe1U9/zKoxXG5YlxUk7j4bQtWLxDbLrcEzRornmnhTht+cbeoSb/S7AWxT2OTFk50ytf19w5/auiwO6Tyg61DQs1OvFS27a7M4OVXn51t8s6beOD+tN8Prrvrt05I/4405npX1E++9/IonLw//UDfir6rBNb4F+7g+heLTqNzY/fn3N508a1OrO+v6uMv7Gzvk55+QSVCjTQ/yNK/aSM2dOfGJPgaa0bOapMvMwWpNvaXRq259zho99WBwhk+FvXX/cNgjmBjwDjd1h00OJY9RQdeiybzVZ+8XmucZXP74AN8ure9YPq2vz97Fn8T8R6+++C/D6lMWcoZndf3zd13+OR3g9fqi/6/pC8nn8rUEnz7pByIHvgvF4mZwA31DjRwvfWOP0MmTdTN6+9dp957keGz6A2jVtplvepmDXo+8yS2sy9QHN5ekGsIBO7eCz3Lr0ZUovL1HcO+788/zhtd6jEUInp369DJf3MaG7ir/9hqEYHxXiK8F+F04/mSa7uljqv17HfSN+gJ582eW3ftTeGGcT8t68Gcv73vkicM36necXqmb/GJ9h+OC77LwkcJvDMW8OfjOB/eTm3P2xUWxVocJ6uaiBRr32orc8NafI6m40Q/vs/qYjT16Q3v96JnSkK4XlQD32h3A/NJvZomR+MaVBzrnDeY6l2hW2PceDgs/nofEKxp6AemVcedsifNcxi87L36+IOYP3vgXQWUi7qVeB7+g18Pb7rzv8JPfdf/FH6Xvs7nXMZ/NFqfeP/6zl5+rN8HX6NdqX6on4yu1fxZ3lJvKG4SPHuzk3LS8QXDKTTQOgVXPglMueVYmbuJWn55+sukDZ+gTMouX/Og7V+YB29eM9YWgeqxwwz+nbf7smaG0G6689TOv8/MBmJBlXuHz/NGz54W7FEeNZW66Kg7Tz+ZrpthHTx88eehzfe+8CcKr/fdE+zk9/tPh1sNDD3zTxe+2/tMUMMcf+/K3Zq8dvlgvuhfqyfhC3aXP10eQ5+lzxLt1c+7SkHcJv/3sEzWnF1n/r8sqON9hq1L1Jmxk9vGTRF0Bvc+ts7i4JesX34YXr51vYPqY7wFG1zY9YieaKm36xS817VizJm96rSoEPa6Y0+MNUcKNp0D9l//jem4fFf6ontdHFH9Yz+3v6I3xW3qjfkDfGv2173719f+sQc/zLAb/D0EI6cG68deIAAAAAElFTkSuQmCC";class Uc{constructor(t,e){u(this,"visible",!1);u(this,"five");u(this,"lines",[]);u(this,"points",[]);u(this,"onClick");u(this,"cancel");u(this,"content",document.createElement("div"));u(this,"container",document.createElement("div"));u(this,"masking",document.createElement("div"));u(this,"target");u(this,"clickHandler",t=>{this.onClick(t,this.target)});u(this,"cancelHandler",()=>{this.cancel(this.target)});u(this,"hover",()=>{this.content.style.backgroundImage=`url(${t5})`});u(this,"unHover",()=>{this.content.style.backgroundImage=`url(${xp})`});var s,r;this.five=t,this.onClick=(e==null?void 0:e.onClick)||(()=>{}),this.cancel=(e==null?void 0:e.cancel)||(()=>{}),this.container.classList.add("fpm__delete"),this.container.style.opacity="0",this.container.style.position="absolute",this.container.style.left="0",this.container.style.top="10px",this.container.style.transform="translate3d(0, 0, 10px)",this.container.style.pointerEvents="none",this.container.style.transition="opacity 200ms ease",this.container.style.zIndex="99",this.content.classList.add("fpm__delete-content"),this.content.style.width="62px",this.content.style.height="26px",this.content.style.display="flex",this.content.style.alignItems="center",this.content.style.justifyContent="center",this.content.style.transform="translate(-50%, -50%)",this.content.style.color="#fff",this.content.style.fontSize="12px",this.content.style.lineHeight="17px",this.content.style.borderRadius="11px",this.content.style.backgroundSize="100% 100%",this.content.style.cursor="pointer",this.content.style.userSelect="none",this.content.style.backgroundImage=`url(${xp})`,this.content.innerHTML=`
      ${e5}
      <span>${(r=(s=e.i18n)==null?void 0:s.call(e,"删除"))!=null?r:"删除"}</span>
    `,this.container.append(this.content);const i=this.content.querySelector(".fpm__delete-icon");i&&(i.style.width="16px",i.style.height="17px",i.style.marginRight="1px"),this.content.addEventListener("click",this.clickHandler),this.content.addEventListener("mouseenter",this.hover),this.content.addEventListener("mouseleave",this.unHover),this.masking.setAttribute("style","position: absolute;top: 0;left: 0;bottom: 0;right: 0;pointer-events: none;"),this.masking.addEventListener("click",this.cancelHandler),this.masking.addEventListener("touchstart",this.cancelHandler)}dispose(){this.content.removeEventListener("click",this.clickHandler),this.content.removeEventListener("mouseenter",this.hover),this.content.removeEventListener("mouseleave",this.unHover),this.container.remove(),this.masking.removeEventListener("click",this.cancelHandler),this.masking.removeEventListener("touchstart",this.cancelHandler),this.masking.remove()}appendTo(t){return t.append(this.container),t.append(this.masking),this}setLines(t){return this.lines=t,this.points=Array.from(new Set(this.lines.map(e=>[e.points[0],e.points[1]]).flat(1))),this}setTarget(t){return this.target=t,this}updatePosition(t,e){if(t&&e)return this.container.style.left=t,this.container.style.top=e,this.container.style.transform="",this.show();if(this.lines.length===0)return this;const i=this.points.map(p=>p.position).map(p=>p.clone().applyMatrix4(this.lines[0].mesh.matrixWorld)),s=i.map(p=>p.clone().project(this.five.camera));if(s.some(p=>Math.abs(p.z)>1))return this.hide();const r=s.map(p=>p.x),o=s.map(p=>p.y),a=(Math.min(...r)+Math.max(...r))/2,l=Math.max(...o),c=this.container.parentElement;if(!c)return this;const h=(a+1)/2*c.clientWidth,d=-(l-1)/2*c.clientHeight;let f=h,g=d-34;if(this.lines.length===1&&i.length===2){const p=(o[1]-o[0])/(r[1]-r[0]),v=-((o[1]+o[0])/2-1)/2*c.clientHeight;Math.abs(p)>.4&&(f=h+57,g=v)}return this.container.style.top="0",this.container.style.left="0",this.container.style.transform=`translate3d(${f}px, ${g}px, 0)`,this.show()}hide(){return this.visible=!1,this.masking.style.pointerEvents="none",this.container.style.opacity="0",this.container.style.pointerEvents="none",this.unHover(),this}show(){return this.visible=!0,this.masking.style.pointerEvents="auto",this.container.style.opacity="1",this.container.style.pointerEvents="auto",this}}function Qc(n,t){const e=n.x-t[0].x,i=n.y-t[0].y,s=t[1].x-t[0].x,r=t[1].y-t[0].y,o=e*s+i*r,a=s*s+r*r,l=o/a;let c,h;return l<0||i5(t[0],t[1])?(c=t[0].x,h=t[0].y):l>1?(c=t[1].x,h=t[1].y):(c=t[0].x+l*s,h=t[0].y+l*r),new B.Vector2(c,h)}function i5(n,t){return n.x===t.x&&n.y===t.y}const Dp=()=>!1;class Fn extends Va{constructor(e){super(e);u(this,"type","edit");u(this,"polyline");u(this,"area");u(this,"hasAppendDashed",!1);u(this,"fiveElement");u(this,"lastPoint",null);u(this,"pointSelector");u(this,"deleteDom");u(this,"onIntersectionUpdate",Yo(e=>{e&&(this.currentMeasureType==="area"&&typeof e.isAdsorbed=="boolean"&&(e.isAdsorbed?this.hook.emit("readyComplete"):this.hook.emit("notReadyComplete")),this.updateDashed())},20));u(this,"revoke",()=>{this.currentMeasureType==="area"?this.revokeArea():this.currentMeasureType==="line"&&this.revokeLine()});u(this,"revokeArea",()=>{if(this.area.points.length!==0){if(this.area.popPoint(),this.hook.emit("pointsChange",this.area.points),this.area.points.length===0){this.lastPoint=null,this.hasAppendDashed=!1,this.dashed.remove(),this.five.needsRender=!0,this.hook.emit("revoke",{isEmpty:!0});return}else this.lastPoint=new di(this.area.points[this.area.points.length-1]),this.updateDashed();this.five.needsRender=!0}});u(this,"revokeLine",e=>{const i=e||this.polyline;if(i.lines.length===0&&this.lastPoint){this.lastPoint=null,this.hasAppendDashed=!1,this.pointSelector.setAdherePoints(null),this.dashed.remove(),this.hook.emit("anchorChange",null),this.hook.emit("editedDashedLineChange",null),this.five.needsRender=!0,this.hook.emit("pointsChange",[]);return}if(i.lines.length===0&&!this.lastPoint||!this.lastPoint)return;const s=i.lines[i.lines.length-1],r=s.findAnotherPoint(this.lastPoint);r&&(this.lastPoint=r,this.hook.emit("anchorChange",r.position),this.group.remove(s.mesh),i.removeLine(s),s.distanceItem.remove(),this.updateDashed(),this.five.needsRender=!0)});u(this,"checkMouseLeave",e=>{e||(this.dashed.hide(),this.perpendicularDashed.hide(),this.area.hideArea())});u(this,"onLineChanged",()=>{this.hook.emit("editedPolylineChange",this.polyline)});u(this,"onWantsSelect",()=>{if(this.currentMeasureType==="area"){const e=this.area.polygon.isBlank||this.area.polygon.visible===!1;if(this.area.points.length>=3&&e)return!1}});u(this,"wantsMoveToPano",()=>{if(this.lastPoint)return!1});u(this,"onSelect",()=>{var o,a,l,c;this.hasAppendDashed||(this.dashed.distanceItem.appendTo(this.container),this.group.add(this.dashed.mesh),this.currentMeasureType==="area"&&this.group.add(this.perpendicularDashed.mesh)),this.hasAppendDashed=!0;const e=(()=>{var h,d;if(this.currentMeasureType==="area")return this.area.projectPoint((h=this.pointSelector.position)==null?void 0:h.point);if(this.currentMeasureType==="line")return(d=this.pointSelector.position)==null?void 0:d.point})();if(!e)return;const i=new di(e),s=this.lastPoint;if(s!=null&&s.position&&i.position.equals(s==null?void 0:s.position))return;this.lastPoint=i;const r=h=>{if(!this.lastPoint)return[];const{intersection:d,pointSelectorInstance:f}=h,g=f.pointSelectorHelper.pointHelper,p=new P.Vector3(0,0,1).applyQuaternion(g.quaternion);if(p.x>.9999||p.y>.9999||p.z>.9999||p.x<-.9999||p.y<-.9999||p.z<-.9999){const m=d.point,v=this.lastPoint.position.clone().sub(m);f.pointSelectorHelper.updateWithIntersect(d,{emitEvent:!1});const b=new P.Line3(g.localToWorld(new P.Vector3(1,0,0)).add(v),g.localToWorld(new P.Vector3(-1,0,0)).add(v)),w=new P.Line3(g.localToWorld(new P.Vector3(0,1,0)).add(v),g.localToWorld(new P.Vector3(0,-1,0)).add(v)),x=b.closestPointToPoint(m,!1,new P.Vector3),E=w.closestPointToPoint(m,!1,new P.Vector3);return[x,E]}return[]};if(this.pointSelector.setAdherePoints(r),this.currentMeasureType==="line"){if(i&&s){const d=new vs(s,i,this.model);d.distanceItem.setCanSelect(!1),d.distanceItem.appendTo(this.container),this.polyline.addLine(d),this.group.add(d.mesh),d.distanceItem.update(this.five)}const h=(a=(o=this.editParams)==null?void 0:o.autoEndConfig)==null?void 0:a.line;typeof h=="number"&&(this.polyline.getPointLength()>=h?this.complete():this.polyline.getPointLength()===h-1&&this.hook.emit("readyComplete")),this.hook.emit("pointsChange",this.polyline.points)}else if(this.currentMeasureType==="area"){if(this.area.addPoints(i.position),this.area.isClosed){this.complete();return}this.area.points.length>=3&&this.pointSelector.setAdherePoints((...d)=>{var f;return[this.area.points[0],...(f=r(...d))!=null?f:[]].filter(Fe)});const h=(c=(l=this.editParams)==null?void 0:l.autoEndConfig)==null?void 0:c.area;typeof h=="number"&&(this.area.points.length>=h?this.complete():this.area.points.length===h-1&&this.hook.emit("readyComplete")),this.hook.emit("pointsChange",this.area.points)}this.updateDashed(),this.five.needsRender=!0,this.hook.emit("anchorChange",i.position)});u(this,"onCameraUpdate",()=>{this.updateDistanceUI()});u(this,"updateDashed",()=>{var s;if(!this.lastPoint)return;const e=this.lastPoint.position,i=(()=>{var r,o;if(this.currentMeasureType==="area")return this.area.projectPoint((r=this.pointSelector.position)==null?void 0:r.point);if(this.currentMeasureType==="line")return(o=this.pointSelector.position)==null?void 0:o.point})();if(!i){this.dashed.hide();return}if(this.dashed.show(),this.dashed.setPoints(e,i),this.dashed.distanceItem.update(this.five),this.hook.emit("editedDashedLineChange",this.dashed),this.currentMeasureType==="area")if(this.area.areaItem.setCanSelect(!1),this.area.points.length>=2){const r=(s=this.pointSelector.position)==null?void 0:s.point;if(r){const h=r,d=i;this.perpendicularDashed.setPoints(h,d),this.perpendicularDashed.show()}else this.perpendicularDashed.hide();const o=this.area.polyline.lines.map(h=>({start:h.points[0].position,end:h.points[1].position})),a=Gc({start:e,end:i},o),l=Gc({start:i,end:this.area.points[0]},o);if(a||l)this.area.hideArea(),this.hook.emit("allowAddPointStateChange","forbid");else{this.area.showArea();const h=[...this.area.points,i];this.area.polygon.updatePoints(h),this.area.areaItem.updateArea(this.five),this.hook.emit("allowAddPointStateChange","allow")}}else this.area.hideArea(),this.perpendicularDashed.hide();this.five.needsRender=!0});u(this,"wantsTapGesture",e=>{var m,v;if(this.editParams.pointSelectorMode==="cursor"||this.lastPoint)return!1;const i=this.model.areas.map(b=>e.intersectObject(b.polygon,!0)[0]).sort((b,w)=>b.distance-w.distance),s=(v=(m=i[0])==null?void 0:m.object)==null?void 0:v.parent;if(s!=null&&s.isPolygonMesh){const b=this.model.areas.find(w=>w.polygon===s);if(b){const{x:w,y:x}=i[0].point.clone().project(this.five.camera),E=`${(w+1)/2*100}%`,L=`${(-x+1)/2*100}%`;return this.chooseArea(b,{left:E,top:L}),!1}}const[r]=gi(this.five).intersectRaycaster(e);if(!r)return;const o=this.five.camera,a=r.point.clone().project(o),l=this.container.clientWidth,c=this.container.clientHeight,h=new B.Vector2(a.x*l,a.y*c),d=this.model.getAllLines().map(b=>{const[w,x]=b.points,E=w.position.clone().project(o),L=x.position.clone().project(o);if(!gs(E)&&!gs(L))return null;const S=new B.Vector2(E.x*l,E.y*c),R=new B.Vector2(L.x*l,L.y*c);return{id:b.id,points:[S,R]}}).filter(b=>!!b);if(d.length===0)return;const g=d.map(b=>{const w=Qc(h,b.points);return{id:b.id,distance:w.distanceTo(h)}}).sort((b,w)=>b.distance-w.distance)[0];if(g.distance>20)return;const p=this.model.getAllLines().find(({id:b})=>b===g.id);if(p)return this.chooseLine(p),!1});u(this,"chooseLine",e=>{const i=e.getPolyline().lines;this.deleteDom.setTarget(i).setLines(i).updatePosition().show(),this.highlightLines(i),this.hook.emit("selectedChange",i)});u(this,"chooseArea",(e,i)=>{this.deleteDom.setTarget(e).updatePosition(i.left,`calc(${i.top} - 1.5rem)`).show(),this.highlightArea(e)});u(this,"deleteArea",e=>{this.unHighlightArea(e),e.dispose(),this.deleteDom.hide()});u(this,"deleteLine",e=>{const i=e[0],s=this.model.getPolylineByLine(i);s&&(this.model.removePolyline(s),s.lines.forEach(r=>this.removeLine(r)),this.deleteDom.setLines([]).hide())});this.fiveElement=this.five.getElement(),this.deleteDom=new Uc(this.five,{i18n:this.config.i18n,onClick:(i,s)=>{var a;const r=s.type==="area",o=Array.isArray(s)&&((a=s[0])==null?void 0:a.type)==="line";r&&this.deleteArea(s),o&&this.deleteLine(s)},cancel:i=>{var o;this.deleteDom.hide();const s=i.type==="area",r=Array.isArray(i)&&((o=i[0])==null?void 0:o.type)==="line";s&&this.unHighlightArea(i),r&&this.unHighlightLines(i)}}).appendTo(this.container),this.pointSelector=new ea(this.five,fe(F({},this.pointSelectorConfig),{mode:this.editParams.pointSelectorMode,helper:F({magnifierParams:this.magnifierParams,container:this.container},this.pointSelectorConfig.helper)})),this.pointSelector.enable(),this.polyline=new As({model:this.model}),this.area=new Wc(void 0,{five:this.five,model:this.model,meshContainer:this.group,domContainer:this.container}),this.model.addPolyline(this.polyline),this.model.addArea(this.area),this.model.getAllLines().forEach(i=>{i.distanceItem.appendTo(this.container),i.distanceItem.update(this.five),i.distanceItem.setCanSelect(!0),i.hook.on("selected",this.chooseLine),this.group.add(i.mesh)}),this.model.getAllAreas().forEach(i=>{i.areaItem.appendTo(this.container),i.areaItem.updateDomPosition(this.five),i.areaItem.setCanSelect(!0),i.hook.on("selected",this.chooseArea),this.group.add(i.polygon),i.polyline.lines.forEach(s=>{s.distanceItem.appendTo(this.container),s.distanceItem.update(this.five),this.group.add(s.mesh)})}),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("wantsTapGesture",this.wantsTapGesture),this.five.on("wantsMoveToPano",this.wantsMoveToPano),this.five.on("wantsChangeMode",Dp),this.pointSelector.on("intersectionUpdate",this.onIntersectionUpdate),this.pointSelector.on("intersectionUpdate",this.checkMouseLeave),this.pointSelector.on("select",this.onSelect),this.pointSelector.on("wantsSelect",this.onWantsSelect),this.polyline.hook.on("lineAdded",this.onLineChanged),this.polyline.hook.on("lineRemoved",this.onLineChanged),this.five.helperVisible=!1,this.hook.emit("anchorChange",null),this.hook.emit("editedDashedLineChange",null),this.five.refresh()}dispose(){super.dispose(),this.model.areas.forEach(e=>{(e.points.length<2||e.polygon.isBlank)&&this.model.removeArea(e)}),this.five.helperVisible=!0,this.pointSelector.disable(),this.dashed.remove(),this.perpendicularDashed.remove(),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("wantsTapGesture",this.wantsTapGesture),this.five.off("wantsMoveToPano",this.wantsMoveToPano),this.five.off("wantsChangeMode",Dp),this.pointSelector.off("intersectionUpdate",this.onIntersectionUpdate),this.pointSelector.off("intersectionUpdate",this.checkMouseLeave),this.pointSelector.off("select",this.onSelect),this.pointSelector.off("wantsSelect",this.onWantsSelect),this.polyline.hook.off("lineAdded",this.onLineChanged),this.polyline.hook.off("lineRemoved",this.onLineChanged),this.magnifier.dispose(),this.deleteDom.dispose(),this.dashed.distanceItem.remove(),this.five.needsRender=!0}getEditingLines(){return this.polyline.lines}selectPoint(){this.onSelect()}complete(){this.hook.emit("complete"),this.currentMeasureType==="area"?(this.area.points.length<3?this.deleteArea(this.area):(this.area.showArea(),this.area.complete(),this.area.hook.on("selected",this.chooseArea)),this.area=new Wc(void 0,{five:this.five,model:this.model,meshContainer:this.group,domContainer:this.container}),this.model.addArea(this.area)):this.currentMeasureType==="line"&&(this.polyline.lines.forEach(e=>{e.hook.on("selected",this.chooseLine),e.distanceItem.setCanSelect(!0)}),this.polyline=new As({model:this.model}),this.model.addPolyline(this.polyline)),this.pointSelector.setAdherePoints(null),this.dashed.hide(),this.perpendicularDashed.hide(),this.lastPoint=void 0}highlightArea(e){this.highlightLines(e.polyline.lines),this.five.needsRender=!0}unHighlightArea(e){this.unHighlightLines(e.polyline.lines),this.five.needsRender=!0}highlightLines(e){e.forEach(i=>this.highlightLine(i))}unHighlightLines(e){e.forEach(i=>{i.selected=!1,i.distanceItem.unHighlight(),this.group.remove(i.lightMesh),this.five.needsRender=!0})}highlightLine(e){this.unHighlightLines(this.model.getAllLines()),!e.selected&&(e.selected=!0,this.group.add(e.lightMesh),e.distanceItem.highlight(),this.five.needsRender=!0)}}class Sp extends Va{constructor(e){super(e);u(this,"type","view");u(this,"hammer");u(this,"polylineRemoved",e=>{e.lines.forEach(i=>this.removeLine(i)),this.hook.emit("selectedChange",this.model.getAllLines().filter(i=>i.selected).map(i=>i))});u(this,"polylineAdded",e=>{const{panoIndex:i,mode:s}=this.five.getCurrentState();e.lines.forEach(r=>{e.visibleFiveMode&&!e.visibleFiveMode.includes(s)&&(r.mesh.visible=!1),e.visiblePanoIndexes&&!e.visiblePanoIndexes.includes(i)&&(r.mesh.visible=!1),r.distanceItem.appendTo(this.container),r.distanceItem.update(this.five),this.group.add(r.mesh)}),this.updateDistanceUI()});u(this,"onCameraUpdate",()=>{this.updateDistanceUI()});u(this,"onFiveModeChange",e=>{e!=="Panorama"&&(this.model.polylines.forEach(i=>{i.visibleFiveMode&&!i.visibleFiveMode.includes(e)&&i.lines.forEach(s=>{s.mesh.visible=!1,s.distanceItem.update(this.five)})}),this.five.ready().then(()=>{const i=this.five.getCurrentState().mode;i!=="Panorama"&&this.model.polylines.forEach(s=>{s.visibleFiveMode&&s.visibleFiveMode.includes(i)&&s.lines.forEach(r=>{r.mesh.visible=!0,r.distanceItem.update(this.five)})})}))});u(this,"onFivePanoWillArrive",e=>{this.model.polylines.forEach(i=>{(i.visiblePanoIndexes&&!i.visiblePanoIndexes.includes(e)||i.visibleFiveMode&&!i.visibleFiveMode.includes(this.five.getCurrentState().mode))&&i.lines.forEach(s=>{s.mesh.visible=!1,s.distanceItem.update(this.five)})})});u(this,"onFivePanoArrived",e=>{this.model.polylines.forEach(i=>{i.visiblePanoIndexes&&i.visiblePanoIndexes.includes(e)&&i.visibleFiveMode&&i.visibleFiveMode.includes(this.five.getCurrentState().mode)&&i.lines.forEach(s=>{s.mesh.visible=!0,s.distanceItem.update(this.five)})})});this.model.getAllLines().forEach(s=>{s.distanceItem.appendTo(this.container),s.distanceItem.update(this.five),this.group.add(s.mesh),s.mesh.updateMatrixWorld()});const i=this.five.getElement();if(i){const s=new _r(i);this.hammer=s}this.onFiveModeChange(this.five.getCurrentState().mode),this.onFivePanoWillArrive(this.five.getCurrentState().panoIndex),this.onFivePanoArrived(this.five.getCurrentState().panoIndex),this.updateDistanceUI(),this.five.needsRender=!0,this.model.hook.on("polylineAdded",this.polylineAdded),this.model.hook.on("polylineRemoved",this.polylineRemoved),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("modeChange",this.onFiveModeChange),this.five.on("panoWillArrive",this.onFivePanoWillArrive)}dispose(){var e;super.dispose(),this.model.hook.off("polylineAdded",this.polylineAdded),this.model.hook.off("polylineRemoved",this.polylineRemoved),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("modeChange",this.onFiveModeChange),this.five.off("panoWillArrive",this.onFivePanoWillArrive),this.five.needsRender=!0,this.hook.emit("selectedChange",[]),(e=this.hammer)==null||e.destroy()}}function n5(n,t){const e=(n.x+1)/2*t.width,i=-(n.y-1)/2*t.height;return new B.Vector2(e,i)}function s5(n,t,e,i){const s=n.getElement();if(!s||t.length===0)return null;const r={width:s.clientWidth,height:s.clientHeight},o=t.map(a=>{const l=a.position.clone().project(n.camera);return gs(l)?{distance:n5(l,r).distanceTo(e),point:a}:{distance:1/0,point:a}}).sort((a,l)=>a.distance-l.distance);return typeof i=="number"&&o[0].distance>i?null:o[0]}function Lp(n){const{x:t,y:e}=n.center,{clientWidth:i,clientHeight:s}=n.target,r=n.target.getBoundingClientRect(),o=new B.Vector2(t,e).sub(new B.Vector2(r.left,r.top)),a=new B.Vector2(o.x/i*2-1,-(o.y/s)*2+1);return{point:o,ndcPoint:a}}const Tp=()=>!1;class zp extends Va{constructor(e){super(e);u(this,"type","watch");u(this,"deleteDom");u(this,"choose");u(this,"highlightedLines",[]);u(this,"highlightedArea");u(this,"fiveElement");u(this,"editPointState");u(this,"hammer");u(this,"onPanStart",e=>{var l;if(this.model.getAllLines().length===0||!this.fiveElement)return;const i=Lp(e).point,s=(l=s5(this.five,this.model.getAllPoints(),i,20))==null?void 0:l.point;if(!s){this.editPointState=void 0;return}const r=this.model.polylines.find(c=>c.includes(s)),o={point:s,associatedLines:r.lines};this.hook.emit("wantsDragLine",{point:s.id,lines:o.associatedLines.map(({id:c})=>c)})||(this.editPointState=o,this.magnifier.appendTo(this.container),this.magnifier.enable(),this.group.add(this.mouseGroup))});u(this,"onPanEnd",()=>{this.editPointState&&(this.editPointState.associatedLines.forEach(e=>e.mesh.setMaterial({dashed:!1})),this.highlightLines(this.editPointState.associatedLines),this.editPointState=void 0,this.magnifier.disable(),this.group.remove(this.mouseGroup))});u(this,"onPan",e=>{if(!this.editPointState||!this.fiveElement)return;const i=Lp(e).ndcPoint,s=new B.Raycaster;s.setFromCamera(i,this.five.camera);const[r]=gi(this.five).intersectRaycaster(s);r&&this.onIntersectionUpdate(r)});u(this,"onIntersectionUpdate",(e,i)=>{if(this.editPointState){if(this.clearHighlightLines(),this.editPointState.point.position.copy(e.point),this.editPointState.associatedLines.forEach(s=>{s.mesh.setPoints(s.points[0].position.clone(),s.points[1].position.clone()),s.lightMesh.setPoints(s.points[0].position.clone(),s.points[1].position.clone()),s.mesh.setMaterial({dashed:!0})}),this.updateDistanceUI(),this.magnifier.renderWithPoint(e.point),this.mouseGroup.position.copy(e.point),i)this.mouseGroup.quaternion.copy(i.quaternion);else if(e.face){const r=e.face.normal.clone().multiplyScalar(.05),a=e.point.clone().add(r).clone().add(r);this.mouseGroup.lookAt(a)}this.five.needsRender=!0,this.hook.emit("selectedChange",this.editPointState.associatedLines.map(s=>s))}});u(this,"wantsPanGesture",()=>{if(this.editPointState)return!1});u(this,"wantsTapGesture",e=>{var v;const i=this.model.areas.map(b=>e.intersectObject(b.polygon,!0)[0]).sort((b,w)=>b.distance-w.distance),s=(v=i[0])==null?void 0:v.object.parent;if(s instanceof Mp){const b=this.model.areas.find(w=>w.polygon===s);if(b){const{x:w,y:x}=i[0].point.clone().project(this.five.camera),E=`${(w+1)/2*100}%`,L=`${(-x+1)/2*100}%`;return this.chooseArea(b,{left:E,top:L}),!1}}const r=gi(this.five),[o]=r.intersectRaycaster(e);if(!o)return;const a=this.five.camera,l=o.point.clone().project(a),c=this.container.clientWidth,h=this.container.clientHeight,d=new B.Vector2(l.x*c,l.y*h),f=this.model.getAllLines().map(b=>{const[w,x]=b.points,E=w.position.clone().project(a),L=x.position.clone().project(a);if(!gs(E)&&!gs(L))return null;const S=new B.Vector2(E.x*c,E.y*h),R=new B.Vector2(L.x*c,L.y*h);return{id:b.id,points:[S,R]}}).filter(b=>!!b);if(f.length===0)return;const p=f.map(b=>{const w=Qc(d,b.points);return{id:b.id,distance:w.distanceTo(d)}}).sort((b,w)=>b.distance-w.distance)[0];if(p.distance>20)return;const m=this.model.getAllLines().find(({id:b})=>b===p.id);if(m)return this.chooseLine(m),!1});u(this,"chooseLine",e=>{this.choose="line";const i=e.getPolyline().lines;this.deleteDom.setLines(i).updatePosition().show(),this.highlightLines(i),this.five.needsRender=!0,this.hook.emit("selectedChange",i.map(s=>s))});u(this,"chooseArea",(e,i)=>{this.choose=e,this.deleteDom.updatePosition(i.left,`calc(${i.top} - 20px)`).show(),this.highlightArea(e)});u(this,"polylineRemoved",e=>{e.lines.forEach(i=>this.removeLine(i)),this.hook.emit("selectedChange",this.model.getAllLines().filter(i=>i.selected).map(i=>i))});u(this,"onCameraUpdate",()=>{this.updateDistanceUI(),this.highlightedLines.length>0&&this.deleteDom.updatePosition()});u(this,"deleteArea",e=>{this.unHighlightArea(e),e.dispose(),this.deleteDom.hide()});u(this,"deleteLine",()=>{const e=this.highlightedLines[0],i=this.model.getPolylineByLine(e);i&&(this.model.removePolyline(i),this.highlightedLines=[],this.deleteDom.setLines([]).hide())});u(this,"cancelDeleteClickCallback",()=>{this.deleteDom.hide(),this.clearHighlightLines(),this.unHighlightArea()});this.deleteDom=new Uc(this.five,{i18n:this.config.i18n,onClick:()=>{this.choose==="line"?this.deleteLine():this.choose instanceof Wc&&this.deleteArea(this.choose)},cancel:this.cancelDeleteClickCallback}).appendTo(this.container),this.model.getAllLines().forEach(s=>{s.distanceItem.appendTo(this.container),s.distanceItem.update(this.five),s.hook.on("selected",this.chooseLine),s.distanceItem.setCanSelect(!0),this.group.add(s.mesh)}),this.model.getAllAreas().forEach(s=>{s.areaItem.appendTo(this.container),s.areaItem.updateArea(this.five),s.hook.on("selected",this.chooseArea),s.areaItem.setCanSelect(!0),this.group.add(s.polygon),s.polyline.lines.forEach(r=>{r.distanceItem.appendTo(this.container),r.distanceItem.update(this.five),this.group.add(r.mesh)})});const i=this.five.getElement();if(i){this.fiveElement=i;const s=new _r(i);this.hammer=s,s.on("pan",this.onPan),s.on("panstart",this.onPanStart),s.on("panend",this.onPanEnd)}this.updateDistanceUI(),this.five.needsRender=!0,this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("wantsTapGesture",this.wantsTapGesture),this.five.on("wantsPanGesture",this.wantsPanGesture),this.five.on("wantsChangeMode",Tp),this.model.hook.on("polylineRemoved",this.polylineRemoved)}dispose(){var e;super.dispose(),this.deleteDom.dispose(),this.model.hook.off("polylineRemoved",this.polylineRemoved),this.model.getAllLines().forEach(i=>i.hook.off("selected",this.chooseLine)),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("wantsPanGesture",this.wantsPanGesture),this.five.off("wantsTapGesture",this.wantsTapGesture),this.five.off("wantsChangeMode",Tp),this.five.needsRender=!0,this.hook.emit("selectedChange",[]),(e=this.hammer)==null||e.destroy()}highlightLine(e){e.selected||(e.selected=!0,this.group.add(e.lightMesh),e.distanceItem.highlight(),this.five.needsRender=!0)}clearHighlightLines(){this.group.children.length!==0&&(this.unHighlightLines(this.highlightedLines),this.highlightedLines=[])}highlightArea(e){this.unHighlightLines(),this.unHighlightArea(),this.highlightLines(e.polyline.lines),this.five.needsRender=!0}unHighlightArea(e){const i=e!=null?e:this.highlightedArea;i&&(this.unHighlightLines(i.polyline.lines),this.five.needsRender=!0)}highlightLines(e){this.unHighlightLines(),this.highlightedLines=e,e.forEach(i=>this.highlightLine(i))}unHighlightLines(e){this.unHighlightArea();const i=e!=null?e:this.highlightedLines;i&&i.forEach(s=>{s.selected=!1,s.distanceItem.unHighlight(),this.group.remove(s.lightMesh),this.five.needsRender=!0})}}class Xc{constructor(t){u(this,"config");u(this,"polylines",[]);u(this,"areas",[]);u(this,"hook",new Pt);this.config=t}addPolyline(t){if(this.includes(t)){console.error(new Error("不能重复添加 polyline"));return}this.polylines.push(t),this.hook.emit("polylineAdded",t)}addArea(t){if(this.areas.find(({id:e})=>e===t.id)!==void 0){console.error(new Error("不能重复添加 area"));return}this.areas.push(t),this.hook.emit("areaAdded",t)}replacePolylineByID(t,e){const i=this.getPolylineByID(t);i==null||i.replace(e)}removePolyline(t){const e=this.polylines.findIndex(({id:i})=>i===t.id);if(e===-1){console.error(new Error("polyline 不存在"));return}this.polylines.splice(e,1),this.hook.emit("polylineRemoved",t)}removeArea(t){const e=this.areas.findIndex(({id:i})=>i===t.id);if(e===-1){console.error(new Error("area 不存在"));return}this.areas.splice(e,1)}getPolylineByID(t){return this.polylines.find(e=>e.id===t)}getPolylineByLine(t){return this.polylines.find(e=>e.includes(t))}getLineByID(t){return this.getAllLines().find(e=>e.id===t)}getAllLines(){return this.polylines.map(t=>t.lines).flat(1)}getAllAreas(){return this.areas}getAllPoints(){return this.polylines.map(t=>t.points).flat(1)}includes(t){return this.polylines.find(({id:e})=>e===t.id)!==void 0}clear(){this.polylines.forEach(t=>this.hook.emit("polylineRemoved",t)),this.areas.forEach(t=>t.dispose()),this.polylines.splice(0,this.polylines.length),this.areas.splice(0,this.areas.length)}dispose(){this.clear()}getClosestPoint(){}parse(t){this.clear(),this.polylines.push(...t.polylines.map(e=>new As({model:this}).fromJson(e))),this.polylines.forEach(e=>this.hook.emit("polylineAdded",e))}toJson(){return{polylines:this.polylines.map(t=>t.toJson()).filter(t=>t.lines.length>0)}}}function r5(){}const o5="data:image/png;base64,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",a5="data:image/png;base64,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",l5=`
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`,c5=`
varying vec2 vUv;
void main() {
  vec2 uv = vec2(vUv.x, vUv.y);
  float a = 1.0;
  float match = 1.0 - uv.x;
  gl_FragColor = vec4(1.0,1.0,1.0,match);
}
`;function Op(n){var b,w;const t=(b=n.isMobile)!=null?b:!0,e=(w=n.useNormalVector)!=null?w:!0;let i=10349931;e&&n.ballColor>=0&&(i=n.ballColor);const s=new B.Group,r=new B.PlaneGeometry(.3,.3),o=t?o5:a5,a=new B.TextureLoader().load(o);a.encoding=B.sRGBEncoding,a.minFilter=B.LinearFilter;const l=new B.MeshBasicMaterial({map:a,transparent:!0,depthTest:!1}),c=new B.Mesh(r,l),h=new B.CurvePath;h.add(new B.LineCurve3(new B.Vector3(0,0,0),new B.Vector3(0,0,.1)));const d=new B.TubeGeometry(h,8,.003),f=new B.ShaderMaterial({vertexShader:l5,fragmentShader:c5,depthTest:!1,transparent:!0}),g=new B.Mesh(d,f),p=new B.SphereGeometry(.01,20,20),m=new B.MeshBasicMaterial({color:i,depthTest:!1,transparent:!0,side:B.DoubleSide}),v=new B.Mesh(p,m);return v.position.set(0,0,.1),s.name="mouse-current",s.add(c),e&&s.add(g,v),s}class h5{constructor(t){u(this,"container",document.createElement("div"));u(this,"five");u(this,"group");u(this,"mouseGroup");u(this,"hasAppendMouseGroup",!1);u(this,"hook");u(this,"content");u(this,"intersectMesh");u(this,"centerMouseXY");u(this,"raycaster",new B.Raycaster);u(this,"pieceStyl",{matrix3d:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],scale:1,opacity:.4});u(this,"onCameraDirectionUpdate",()=>{const t=this.getIntersection();if(t){this.pieceChange(t),this.updateMouseGroup(t);const e=new di(this.mouseGroup.position);this.hook.emit("nowPointChange",e)}});u(this,"onWillChangeState",(t,e)=>{var s;this.dotAnimation();const i=(s=this.getIntersection())==null?void 0:s.point;i&&(e==="editing"?this.hook.emit("getStartPoint",new di(i)):this.hook.emit("getEndPoint",new di(i)))});u(this,"computedCenterMouseXY",()=>{const t=this.container.querySelector(".range-piece__aim");if(!t)return null;const{left:e,top:i,width:s,height:r}=t.getBoundingClientRect(),o=Math.round(e+s/2),a=Math.round(i+r/2),c=Pu({x:o,y:a},this.five.getElement());this.centerMouseXY=c});u(this,"getIntersection",()=>{if(!this.centerMouseXY)return null;this.raycaster.setFromCamera(this.centerMouseXY,this.five.camera);const t=gi(this.five).intersectRaycaster(this.raycaster)[0];return t||null});this.five=t.five,this.hook=t.hook,this.group=t.group,this.mouseGroup=Op(F({isMobile:!0},t.openParams.crossHairParameter)),this.container.innerHTML=Z1,this.container.classList.add("range-piece-controller"),this.content=this.container.querySelector(".range-piece__content"),this.content&&(this.content.style.transform=`matrix3d(${this.pieceStyl.matrix3d.toString()}) scale(${this.pieceStyl.scale})`,this.content.style.opacity=`${this.pieceStyl.opacity}`),t.container.append(this.container),this.intersectMesh=new B.Mesh(new B.RingGeometry(.04,.08,32),new B.MeshBasicMaterial({color:1245179,opacity:0,side:B.DoubleSide,transparent:!0})),this.container.addEventListener("animationend",this.computedCenterMouseXY),this.five.on("cameraUpdate",this.onCameraDirectionUpdate),this.hook.on("willChangeState",this.onWillChangeState)}dispose(){this.container.removeEventListener("animationend",this.computedCenterMouseXY),this.five.off("cameraUpdate",this.onCameraDirectionUpdate),this.hook.off("willChangeState",this.onWillChangeState),this.container.remove(),this.group.remove(this.mouseGroup),this.mouseGroup.remove(),this.hasAppendMouseGroup=!1,this.five.scene.remove(this.intersectMesh)}pieceChange(t){const e=t.face,i=t.point;if(e&&i){const r=e.normal.clone().clone().multiplyScalar(.05),o=i.clone().add(r);this.intersectMesh.position.copy(o);const a=o.clone().add(r);this.intersectMesh.lookAt(a),this.five.scene.add(this.intersectMesh);const l=this.intersectMesh.modelViewMatrix.clone().toArray();this.changePieceStyl("matrix3d",l);const c=this.calculateSize(i);this.changePieceStyl("scale",c)}}calculateSize(t){if(!t)return;const e=this.five.camera.position;let i=t.distanceTo(e);const s=4,r=1;return i>s&&(i=s),i<r&&(i=r),-.51/(s-r)*i+1}dotAnimation(){const t=Pd.Easing.Quadratic.InOut,e={opacity:.4,scale:this.pieceStyl.scale},i={opacity:[1,.4],scale:[this.pieceStyl.scale*.8,this.pieceStyl.scale]};let s=r5;const r=new Pd.Tween(e).to(i,500).easing(t).start(0).onUpdate(({opacity:o,scale:a})=>{this.changePieceStyl("scale",a),this.changePieceStyl("opacity",o)}).onComplete(()=>{s()});s=Zs(o=>{r.update(o)})}changePieceStyl(t,e){this.content&&(this.pieceStyl[t]=e,this.content.style.transform=`matrix3d(${this.pieceStyl.matrix3d.toString()}) scale(${this.pieceStyl.scale})`,this.content.style.opacity=`${this.pieceStyl.opacity}`)}updateMouseGroup(t,e){if(!this.hasAppendMouseGroup){this.group.add(this.mouseGroup),this.hasAppendMouseGroup=!0;const i=this.container.querySelector(".range-piece__aim");i&&(i.style.opacity="0")}if(!t)return this.mouseGroup;if(this.mouseGroup.position.copy(t.point),e)this.mouseGroup.quaternion.copy(e.quaternion);else if(t.face){const s=t.face.normal.clone().multiplyScalar(.05),o=t.point.clone().add(s).clone().add(s);this.mouseGroup.lookAt(o)}return this.mouseGroup}}class oo extends Va{constructor(e){super(e);u(this,"state","watching");u(this,"polyline");u(this,"hasAppendDashed",!1);u(this,"mobileStartPoint",null);u(this,"mobileNowPoint",null);u(this,"highlightedLines",[]);u(this,"deleteDom");u(this,"rangePieceController");u(this,"disposers",[]);u(this,"onWantsTapGesture",e=>{if(this.state==="editing")return!1;const i=gi(this.five),[s]=i.intersectRaycaster(e);if(!s)return;const r=this.five.camera,o=s.point.clone().project(r),a=this.container.clientWidth,l=this.container.clientHeight,c=new B.Vector2(o.x*a,o.y*l),h=this.model.getAllLines().map(p=>{const[m,v]=p.points,b=m.position.clone().project(r),w=v.position.clone().project(r);if(!gs(b)&&!gs(w))return null;const x=new B.Vector2(b.x*a,b.y*l),E=new B.Vector2(w.x*a,w.y*l);return{id:p.id,points:[x,E]}}).filter(p=>!!p);if(h.length===0)return;const f=h.map(p=>{const m=Qc(c,p.points);return{id:p.id,distance:m.distanceTo(c)}}).sort((p,m)=>p.distance-m.distance)[0];if(f.distance>20)return;const g=this.model.getAllLines().find(({id:p})=>p===f.id);if(g)return this.chooseLine(g),!1});u(this,"onWantsToMoveToPano",()=>this.state==="watching");u(this,"onCameraUpdate",()=>{this.updateDistanceUI(),this.dashed.distanceItem.update(this.five)});u(this,"updateMobileDashed",()=>{!this.mobileStartPoint||!this.mobileNowPoint||(this.dashed.setPoints(this.mobileStartPoint.position,this.mobileNowPoint.position),this.dashed.distanceItem.update(this.five),this.hook.emit("editedDashedLineChange",this.dashed))});u(this,"updateMagnifier",e=>{this.magnifier.containerDom!==this.container&&this.magnifier.appendTo(this.container),this.magnifier.state.enabled||this.magnifier.enable(),requestAnimationFrame(()=>this.magnifier.renderWithPoint(e.position)),this.five.needsRender=!0});u(this,"onGetStartPoint",e=>{this.mobileStartPoint=e,this.polyline=new As({model:this.model}),this.polyline.hook.on("lineAdded",()=>this.hook.emit("editedPolylineChange",this.polyline)),this.polyline.hook.on("lineRemoved",()=>this.hook.emit("editedPolylineChange",this.polyline))});u(this,"onGetEndPoint",()=>{const e=this.mobileNowPoint;if(this.removeLine(this.dashed),this.hasAppendDashed=!1,this.mobileStartPoint&&e){const i=new vs(this.mobileStartPoint,e,this.model);this.polyline.addLine(i),i.distanceItem.appendTo(this.container),i.distanceItem.update(this.five),i.hook.on("selected",this.chooseLine),this.disposers.push(()=>i.hook.off("selected",this.chooseLine)),this.group.add(i.mesh),this.model.addPolyline(this.polyline)}this.mobileStartPoint=null,this.mobileNowPoint=null,this.five.needsRender=!0});u(this,"onNowPointChange",e=>{if(this.state==="watching"){this.mobileNowPoint=e,this.updateMagnifier(e);return}this.hasAppendDashed||(this.dashed.distanceItem.appendTo(this.container),this.group.add(this.dashed.mesh),this.hasAppendDashed=!0),this.five.needsRender=!0,this.mobileNowPoint=e,this.updateMobileDashed(),this.updateMagnifier(e),this.five.needsRender=!0});u(this,"onWillChangeState",(e,i)=>{this.state=i,this.state==="watching"?this.five.helperVisible=!0:this.five.helperVisible=!1});u(this,"chooseLine",e=>{const i=e.getPolyline().lines;this.highlightLines(i),this.five.needsRender=!0,this.hook.emit("selectedChange",i.map(s=>s))});u(this,"deleteDomClickCallback",()=>{this.highlightedLines.forEach(e=>{this.removeLine(e);const i=this.model.getPolylineByLine(e);this.model.removePolyline(i)}),this.highlightedLines=[],this.deleteDom.setLines([]).hide()});u(this,"cancelDeleteClickCallback",()=>{this.clearHighlightLines()});this.model=new Xc(this.config),this.polyline=new As({model:this.model}),this.rangePieceController=new h5(e),this.deleteDom=new Uc(this.five,{i18n:this.config.i18n,onClick:this.deleteDomClickCallback,cancel:this.cancelDeleteClickCallback}).appendTo(this.container),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("wantsTapGesture",this.onWantsTapGesture),this.five.on("wantsToMoveToPano",this.onWantsToMoveToPano),this.five.helperVisible=!1,this.hook.emit("editedDashedLineChange",null),this.hook.on("getStartPoint",this.onGetStartPoint),this.hook.on("getEndPoint",this.onGetEndPoint),this.hook.on("nowPointChange",this.onNowPointChange),this.hook.on("willChangeState",this.onWillChangeState),this.five.refresh()}dispose(){super.dispose(),this.disposers.forEach(e=>e()),this.five.helperVisible=!0,this.rangePieceController.dispose(),this.group.remove(this.mouseGroup),this.dashed.remove(),this.perpendicularDashed.remove(),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("wantsTapGesture",this.onWantsTapGesture),this.five.off("wantsToMoveToPano",this.onWantsToMoveToPano),this.hook.off("getStartPoint",this.onGetStartPoint),this.hook.off("getEndPoint",this.onGetEndPoint),this.hook.off("nowPointChange",this.onNowPointChange),this.hook.off("willChangeState",this.onWillChangeState),this.hook.emit("selectedChange",[]),this.five.needsRender=!0}highlightLine(e){e.selected||(e.selected=!0,this.group.add(e.lightMesh),e.distanceItem.highlight(),this.five.needsRender=!0)}clearHighlightLines(){this.group.children.length!==0&&(this.deleteDom.setLines([]).hide(),this.model.getAllLines().forEach(e=>{e.selected=!1,e.distanceItem.unHighlight(),this.group.remove(e.lightMesh)}),this.highlightedLines=[],this.five.needsRender=!0)}getEditingLines(){return this.model.polylines}highlightLines(e){this.clearHighlightLines(),this.highlightedLines=e,this.deleteDom.setLines(e).updatePosition().show(),e.forEach(i=>this.highlightLine(i))}}const Ga="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxmaWx0ZXIgeD0iLTUuMyUiIHk9Ii01LjMlIiB3aWR0aD0iMTEwLjUlIiBoZWlnaHQ9IjExMC41JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0icHJlZml4X19hIj48ZmVPZmZzZXQgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSIvPjxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIi8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDEgMCAwIDAgMCAxIDAgMCAwIDAgMSAwIDAgMCAwLjUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiLz48L2ZpbHRlcj48ZmlsdGVyIHg9Ii0xMS40JSIgeT0iLTExLjQlIiB3aWR0aD0iMTIyLjklIiBoZWlnaHQ9IjEyMi45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0icHJlZml4X19jIj48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI0LjUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dCbHVySW5uZXIxIi8+PGZlT2Zmc2V0IGluPSJzaGFkb3dCbHVySW5uZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldElubmVyMSIvPjxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93T2Zmc2V0SW5uZXIxIiBpbjI9IlNvdXJjZUFscGhhIiBvcGVyYXRvcj0iYXJpdGhtZXRpYyIgazI9Ii0xIiBrMz0iMSIgcmVzdWx0PSJzaGFkb3dJbm5lcklubmVyMSIvPjxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAxIDAgMCAwIDAgMSAwIDAgMCAwIDEgMCAwIDAgMC4zIDAiIGluPSJzaGFkb3dJbm5lcklubmVyMSIvPjwvZmlsdGVyPjxmaWx0ZXIgeD0iLTEyNi42JSIgeT0iLTMzNy41JSIgd2lkdGg9IjM1My4xJSIgaGVpZ2h0PSI3NzUlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJwcmVmaXhfX2UiPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjE2IiBpbj0iU291cmNlR3JhcGhpYyIvPjwvZmlsdGVyPjxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMTAwJSIgeDI9IjUwJSIgeTI9IjAlIiBpZD0icHJlZml4X19kIj48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9Ii43IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjI2LjQzMiUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iODIuMzA1JSIvPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iLjQiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiIGlkPSJwcmVmaXhfX2YiPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iLjA1IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIuMiIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48Y2lyY2xlIGlkPSJwcmVmaXhfX2IiIGN4PSIzNiIgY3k9IjM2IiByPSIyOC40NDQiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48dXNlIGZpbGw9IiMwMDAiIGZpbHRlcj0idXJsKCNwcmVmaXhfX2EpIiB4bGluazpocmVmPSIjcHJlZml4X19iIi8+PHVzZSBmaWxsPSIjMDAwIiBmaWx0ZXI9InVybCgjcHJlZml4X19jKSIgeGxpbms6aHJlZj0iI3ByZWZpeF9fYiIvPjxjaXJjbGUgc3Ryb2tlPSJ1cmwoI3ByZWZpeF9fZCkiIHN0cm9rZS13aWR0aD0iLjQiIGZpbGwtb3BhY2l0eT0iLjI0MSIgZmlsbD0iI0ZGRiIgc3Ryb2tlLWxpbmVqb2luPSJzcXVhcmUiIGN4PSIzNiIgY3k9IjM2IiByPSIyOC4yNDQiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBvcGFjaXR5PSIuNTk2IiBmaWx0ZXI9InVybCgjcHJlZml4X19lKSIgY3g9IjM2IiBjeT0iMzYiIHJ4PSIxOC45NjMiIHJ5PSI3LjExMSIvPjxwYXRoIGQ9Ik0zNiAwQzE2LjExOCAwIDAgMTYuMTE4IDAgMzZzMTYuMTE4IDM2IDM2IDM2IDM2LTE2LjExOCAzNi0zNlM1NS44ODIgMCAzNiAwem0wIDQuNDQ0YzE3LjQyOCAwIDMxLjU1NiAxNC4xMjggMzEuNTU2IDMxLjU1NlM1My40MjggNjcuNTU2IDM2IDY3LjU1NiA0LjQ0NCA1My40MjggNC40NDQgMzYgMTguNTcyIDQuNDQ0IDM2IDQuNDQ0eiIgZmlsbD0idXJsKCNwcmVmaXhfX2YpIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+",Yc="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSIxNS41MSUiIHkxPSIxMi40OTclIiB4Mj0iODUuMjY1JSIgeTI9Ijg2LjE0MyUiIGlkPSJwcmVmaXhfX2IiPjxzdG9wIHN0b3AtY29sb3I9IiM5NUFFRkYiIG9mZnNldD0iMCUiLz48c3RvcCBzdG9wLWNvbG9yPSIjNjM4NkZGIiBvZmZzZXQ9IjEwMCUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMTAwJSIgeDI9IjUwJSIgeTI9IjAlIiBpZD0icHJlZml4X19hIj48c3RvcCBzdG9wLWNvbG9yPSIjOTlBRUZGIiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjI2LjQzMiUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iODIuMzA1JSIvPjxzdG9wIHN0b3AtY29sb3I9IiM5OUFFRkYiIHN0b3Atb3BhY2l0eT0iLjQiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiIGlkPSJwcmVmaXhfX2QiPjxzdG9wIHN0b3AtY29sb3I9IiM4Nzk3RDIiIHN0b3Atb3BhY2l0eT0iLjA1IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iIzYyNzdDNyIgc3RvcC1vcGFjaXR5PSIuMiIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48ZmlsdGVyIHg9Ii02My4zJSIgeT0iLTE2OC44JSIgd2lkdGg9IjIyNi42JSIgaGVpZ2h0PSI0MzcuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9InByZWZpeF9fYyI+PGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iOCIgaW49IlNvdXJjZUdyYXBoaWMiLz48L2ZpbHRlcj48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIHN0cm9rZT0idXJsKCNwcmVmaXhfX2EpIiBzdHJva2Utd2lkdGg9Ii40IiBmaWxsPSJ1cmwoI3ByZWZpeF9fYikiIG9wYWNpdHk9Ii43IiBjeD0iMzYiIGN5PSIzNiIgcj0iMjguMjQ0Ii8+PGVsbGlwc2UgZmlsbD0iIzdDOTBEQSIgb3BhY2l0eT0iLjU5NiIgZmlsdGVyPSJ1cmwoI3ByZWZpeF9fYykiIGN4PSIzNiIgY3k9IjM2IiByeD0iMTguOTYzIiByeT0iNy4xMTEiLz48cGF0aCBkPSJNMzYgMEMxNi4xMTggMCAwIDE2LjExOCAwIDM2czE2LjExOCAzNiAzNiAzNiAzNi0xNi4xMTggMzYtMzZTNTUuODgyIDAgMzYgMHptMCA0LjQ0NGMxNy40MjggMCAzMS41NTYgMTQuMTI4IDMxLjU1NiAzMS41NTZTNTMuNDI4IDY3LjU1NiAzNiA2Ny41NTYgNC40NDQgNTMuNDI4IDQuNDQ0IDM2IDE4LjU3MiA0LjQ0NCAzNiA0LjQ0NHoiIGZpbGw9InVybCgjcHJlZml4X19kKSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==",d5=`
  <style>
  .mobile .fpm__exit {
    position: absolute;
    top: 53px;
    left: 16px;
    width: 24px;
    height: 24px;
    z-index: 10;
    pointer-events: all;
  }
  .mobile .fpm__exit-icon {
    width: 100%;
    height: 100%;
    cursor: pointer;
  }
  .fpm_operating--mobile {
    padding-bottom: 23px;
  }
  .fpm__main-btn {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 !important;
  }
  .fpm__main-btn-text {
    position: absolute;
    font-weight: 500;
    font-size: 14px;
    color: #FFFFFF;
    text-align: center;
    text-shadow: 0 2px 8px rgba(0,0,0,0.50);
    transition: all 200ms ease-in-out;
  }
  .fpm__main-text__hide {
    transform: scale(0.8) translateY(4px);
    opacity: 0;
  }
  .fpm__main-text__show {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
  .fpm__main__start {
    background-image: url(${Ga});
  }
  .fpm__main__end {
    background-image: url(${Yc});
  }

  </style>
  <div class="fpm__exit">
    
  <svg class="fpm__exit-icon width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="86.3016741%" id="radialGradient-1">
        <stop stop-color="#FFFFFF" offset="0%"></stop>
        <stop stop-color="#FFFFFF" stop-opacity="0.3" offset="100%"></stop>
      </radialGradient>
      <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70.7106781%" id="radialGradient-2">
        <stop stop-color="#FFFFFF" offset="0%"></stop>
        <stop stop-color="#FFFFFF" stop-opacity="0" offset="100%"></stop>
      </radialGradient>
    </defs>
      <g fill="url(#radialGradient-1)" fill-rule="nonzero" stroke="url(#radialGradient-2)" stroke-width="0.2">
        <path d="M19.1859205,4.10000004 C19.3691554,4.09993923 19.5526088,4.16602323 19.6925352,4.29904206 C19.8171021,4.41745965 19.8858582,4.56899486 19.8980316,4.7239943 C19.9103475,4.88080848 19.8647874,5.04088037 19.7661957,5.16777131 L19.7661957,5.16777131 L14.3769795,11.1697063 C14.1649599,11.4058657 14.0589501,11.7029328 14.0589501,12 C14.0589501,12.2970672 14.1649599,12.5941343 14.3769795,12.8302937 L14.3769795,12.8302937 L19.6928862,18.7509889 C19.8173649,18.8694879 19.8860087,19.0210672 19.8980683,19.1760728 C19.9102693,19.3328965 19.8645908,19.4929392 19.7701664,19.6153111 C19.6099275,19.772809 19.4324896,19.8610254 19.2586274,19.8856752 C19.0810547,19.910851 18.9081905,19.8692156 18.765363,19.7704965 L18.765363,19.7704965 L11.9999322,13.2904645 L5.32508998,19.6962598 C5.16077108,19.8156635 4.99335965,19.8785989 4.83451361,19.8898888 C4.67442082,19.9012674 4.52389835,19.8596921 4.3968979,19.7731206 C4.23619359,19.588506 4.14871527,19.4164558 4.12392544,19.2589757 C4.09801173,19.094356 4.14341261,18.9485987 4.23380428,18.8322287 L4.23380428,18.8322287 L9.62302046,12.8302937 C9.81773049,12.6134147 9.92302682,12.3451662 9.93892926,12.0727274 C9.95499717,11.7974536 9.87975312,11.5179151 9.70614397,11.2737767 L9.70614397,11.2737767 L4.31595492,5.25860214 C4.17860663,5.08857057 4.11166276,4.9104714 4.11172409,4.7432513 C4.11178577,4.57506821 4.18051603,4.41972395 4.30746483,4.29904206 C4.43371817,4.17902131 4.59543385,4.11349344 4.76041858,4.10187732 L4.76041858,4.10187732 L12.0000677,10.7085251 L18.6794563,4.29937602 C18.8192839,4.16626546 19.0026873,4.10006086 19.1859205,4.10000004 Z" id="形状结合"></path>
      </g>
  </svg>

  </div>
  <div class="fpm_ui-bg"></div>
  <div class="fpm_operating-space fpm_operating--mobile">
    <div class="fpm__main fpm__main-btn">
      <div class="fpm__main-icon fpm__main__start"></div>
      <div class="fpm__text fpm__main-text fpm__main-btn-text"></div>
    </div>
  </div>
`,u5=`
  <style>
    .fpm__other-btn {
      height: 40px;
      width: 88px;
      background: rgba(0, 0, 0, 0.15);
      border-radius: 20px;
      overflow: hidden;    
    }

    .fpm__other-content {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .fpm__revoke {
      opacity: 0.3;
    }  
    .fpm__revoke.enabled {
      opacity: 0.85;
    }    
    .fpm__revoke.enabled:hover {
      opacity: 1;
    }
    
    .fpm__revoke-icon {
      width: 24px;
      height: 24px;
      margin-right: 4px;
      cursor: pointer;
    }
    
    .fpm__main-btn {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .fpm__main-btn-text {
      position: absolute;
      font-weight: 500;
      font-size: 14px;
      color: #FFFFFF;
      text-align: center;
      text-shadow: 0 2px 8px rgba(0,0,0,0.50);
      transition: all 200ms ease-in-out;
    }
    .fpm__main-text__hide {
      transform: scale(0.8) translateY(4px);
      opacity: 0;
    }
    .fpm__main-text__show {
      transform: scale(1) translateY(0);
      opacity: 1;
    }
    .fpm__main__start {
      background-image: url(${Ga});
    }
    .fpm__main__end {
      background-image: url(${Yc});
    }
    
  </style>
  <div class="fpm_ui-bg"></div>
  <div class="fpm_operating-space">
    <div class="fpm__other-btn">
      <div class="fpm__other-content fpm__revoke">
        
  <svg class="fpm__revoke-icon" width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient x1="47.631%" y1="55.183%" x2="2.967%" y2="86.323%" id="fpm__revoke-a">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".5" offset="100%" />
      </linearGradient>
      <linearGradient x1="5.297%" y1="43.016%" x2="38.238%" y2="79.932%" id="fpm__revoke-b">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity="0" offset="100%" />
      </linearGradient>
    </defs>
    <path
      d="M13.388 7.108c.552 0 1.005.42 1.06.957l.006.11v1.224c0 .921.745 1.667 1.666 1.667h7.184c5.804 0 10.509 4.616 10.509 10.309 0 5.595-4.544 10.15-10.21 10.305l-.3.004H8.924c-.917 0-1.66-.729-1.66-1.628 0-.846.658-1.541 1.5-1.62l.16-.008h14.38c3.972 0 7.191-3.158 7.191-7.053 0-3.81-3.08-6.916-6.933-7.049l-.257-.004H10.029l-.109-.005H8.212c-.245 0-.482-.085-.67-.237l-.09-.082a1.066 1.066 0 0 1-.065-1.422l.079-.086 5.175-5.077c.2-.195.468-.305.747-.305z"
      fill="url(#fpm__revoke-a)"
      fill-rule="nonzero"
      stroke="url(#fpm__revoke-b)"
      stroke-width=".5"
    />
  </svg>

        <span class="fpm__text fpm__revoke-text"></span>
      </div>
    </div>
    <div class="fpm__main fpm__main-btn">
      <div class="fpm__main-icon fpm__main__start"></div>
      <div class="fpm__text fpm__main-text fpm__main-btn-text"></div>
    </div>
    <div class="fpm__other-btn">
      <div class="fpm__other-content fpm__exit">
        
  <svg class="fpm__exit-icon width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient x1="36.288%" y1="73.736%" x2="54.242%" y2="97.166%" id="fpm__exit-a">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".5" offset="100%" />
      </linearGradient>
      <linearGradient x1="100%" y1="47.234%" x2="24.047%" y2="47.234%" id="fpm__exit-b">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".005" offset="99.535%" />
        <stop stop-color="#FFF" stop-opacity="0" offset="100%" />
      </linearGradient>
    </defs>
    <path
      d="M22 7a1.5 1.5 0 0 1 .144 2.993L22 10h-9a1.5 1.5 0 0 0-1.493 1.356l-.007.144v17a1.5 1.5 0 0 0 1.356 1.493L13 30h9a1.5 1.5 0 0 1 .144 2.993L22 33h-9a4.5 4.5 0 0 1-4.495-4.288L8.5 28.5v-17a4.5 4.5 0 0 1 4.288-4.495L13 7h9zm6.317 7.755a1 1 0 0 1 .7.286l4.856 4.764a1 1 0 0 1-.7 1.713h-5.856V21.5h-8.032a1.5 1.5 0 1 1 0-3h6.365c.92 0 1.666-.746 1.667-1.667v-1.078a1 1 0 0 1 1-1z"
      fill="url(#fpm__exit-a)"
      fill-rule="nonzero"
      stroke="url(#fpm__exit-b)"
      stroke-width=".5"
    />
  </svg>

        <span class="fpm__text fpm__exit-text"></span>
      </div>
    </div>
  </div>
`,f5={display:"none",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",opacity:"0",transform:"translate(0, 10px)",transition:"opacity 500ms ease-in-out, transform 500ms ease-in-out"},p5={position:"absolute",left:"50%",bottom:"32px",transform:"translateX(-50%)",height:"89px",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"14px",pointerEvents:"all",color:"#fff",zIndex:"10"},m5={position:"absolute",bottom:"0",left:"0",opacity:"0.5",width:"100%",height:"184px",background:"linear-gradient(180deg, rgba(0,0,0,0.00) 0%, #000000 100%)",zIndex:"0"},jp={margin:"0 64px"},g5={opacity:"0.85"},Vp={width:"72px",height:"72px",backgroundSize:"100%",cursor:"pointer",transition:"all 200ms ease-in-out"},v5={width:"24px",height:"24px",marginRight:"4px",backgroundSize:"100%",cursor:"pointer"},A5={userSelect:"none",pointerEvents:"none"};class b5{constructor(t,e,i){u(this,"container");u(this,"measureController");u(this,"mainElement");u(this,"_params");u(this,"_btnTexts",{start:"开始",end:"结束",revoke:"撤销",exit:"退出"});u(this,"onMouseEnter",()=>{const{mainItem:t}=this.mainElement;t.style.opacity="1"});u(this,"onMouseLeave",()=>{const{mainItem:t}=this.mainElement;t.style.opacity="0.85"});u(this,"onClick",()=>{this.measureController.getCurrentMode()!=="Edit"?this.measureController.changeMode("Edit"):this.measureController.save().changeMode("Watch")});u(this,"modeChangeHandler",t=>{t==="Edit"?this.change2Done():this.change2Add()});var o,a,l,c;this._params=i,this._btnTexts={start:(o=this._params.startButtonText)!=null?o:this._btnTexts.start,end:(a=this._params.endButtonText)!=null?a:this._btnTexts.end,revoke:(l=this._params.revokeButtonText)!=null?l:this._btnTexts.revoke,exit:(c=this._params.exitButtonText)!=null?c:this._btnTexts.exit},this.measureController=t,this.container=e,this.mainElement=this.getMainElement(),Object.assign(this.mainElement.mainIcon.style,Vp),Object.assign(this.mainElement.mainItem.style,jp);const{revokeTextDom:s,exitTextDom:r}=this._getTextElement();s&&(s.innerText=this._btnTexts.revoke),r&&(r.innerText=this._btnTexts.exit),this.change2Add(),this.measureController.hook.on("modeChange",this.modeChangeHandler),this.mainElement.mainItem.addEventListener("click",this.onClick),this.mainElement.mainItem.addEventListener("mouseenter",this.onMouseEnter),this.mainElement.mainItem.addEventListener("mouseleave",this.onMouseLeave)}dispose(){this.measureController.hook.off("modeChange",this.modeChangeHandler),this.mainElement.mainItem.removeEventListener("click",this.onClick),this.mainElement.mainItem.removeEventListener("mouseenter",this.onMouseEnter),this.mainElement.mainItem.removeEventListener("mouseleave",this.onMouseLeave)}getMainElement(){const t=this.container.querySelector(".fpm__main-text"),e=this.container.querySelector(".fpm__main"),i=this.container.querySelector(".fpm__main-icon");if(!e||!t||!i)throw new Error("cannot find dom");return{mainTextDom:t,mainItem:e,mainIcon:i}}_getTextElement(){const t=this.container.querySelector(".fpm__revoke-text"),e=this.container.querySelector(".fpm__exit-text");return{revokeTextDom:t,exitTextDom:e}}change2Add(){const{mainIcon:t,mainTextDom:e}=this.mainElement;if(t.className.includes("fpm__main__start")){e.innerText=this._btnTexts.start;return}t.className.includes("fpm__main__end")&&(t.style.transform="scale(0.8)",e.className.includes("fpm__main-text__show")?e.classList.replace("fpm__main-text__show","fpm__main-text__hide"):e.classList.add("fpm__main-text__hide"),setTimeout(()=>{t.classList.replace("fpm__main__end","fpm__main__start"),t.style.transform="scale(1)",e.innerText=this._btnTexts.start,e.classList.replace("fpm__main-text__hide","fpm__main-text__show")},200))}change2Done(){const{mainTextDom:t,mainIcon:e}=this.getMainElement();t.innerText!==this._btnTexts.end&&(e.className.includes("fpm__main__end")||e.className.includes("fpm__main__start")&&(e.style.transform="scale(0.8)",t.className.includes("fpm__main-text__show")?t.classList.replace("fpm__main-text__show","fpm__main-text__hide"):t.classList.add("fpm__main-text__hide"),setTimeout(()=>{e.classList.replace("fpm__main__start","fpm__main__end"),e.style.transform="scale(1)",t.innerText=this._btnTexts.end,t.classList.replace("fpm__main-text__hide","fpm__main-text__show")},200)))}}class y5{constructor(t,e,i){u(this,"container");u(this,"measureController");u(this,"mainElement");u(this,"_params");u(this,"_btnTexts",{start:"开始",end:"结束"});u(this,"onClick",()=>{var t;this.mainElement.mainTextDom.innerText===((t=this._params.startButtonText)!=null?t:"开始")?(this.measureController.hook.emit("willChangeState","watching","editing"),this.change2Done()):(this.measureController.hook.emit("willChangeState","editing","watching"),this.change2Add())});var s,r;this._params=i,this._btnTexts={start:(s=this._params.startButtonText)!=null?s:this._btnTexts.start,end:(r=this._params.endButtonText)!=null?r:this._btnTexts.end},this.measureController=t,this.container=e,this.mainElement=this.getMainElement(),this.mainElement.mainIcon.setAttribute("style","-webkit-tap-highlight-color: rgba(0,0,0,0);"),Object.assign(this.mainElement.mainIcon.style,Vp),Object.assign(this.mainElement.mainItem.style,jp),this.change2Add(),this.mainElement.mainItem.addEventListener("click",this.onClick)}dispose(){this.mainElement.mainItem.removeEventListener("click",this.onClick)}getMainElement(){const t=this.container.querySelector(".fpm__main-text"),e=this.container.querySelector(".fpm__main"),i=this.container.querySelector(".fpm__main-icon");if(!e||!t||!i)throw new Error("cannot find dom");return{mainTextDom:t,mainItem:e,mainIcon:i}}change2Add(){const{mainIcon:t,mainTextDom:e}=this.mainElement;if(t.className.includes("fpm__main__start")){e.innerText=this._btnTexts.start;return}t.className.includes("fpm__main__end")&&(t.style.transform="scale(0.8)",e.className.includes("fpm__main-text__show")?e.classList.replace("fpm__main-text__show","fpm__main-text__hide"):e.classList.add("fpm__main-text__hide"),setTimeout(()=>{t.classList.replace("fpm__main__end","fpm__main__start"),t.style.transform="scale(1)",e.innerText=this._btnTexts.start,e.classList.replace("fpm__main-text__hide","fpm__main-text__show")},200))}change2Done(){const{mainTextDom:t,mainIcon:e}=this.mainElement;t.innerText!==this._btnTexts.end&&(e.className.includes("fpm__main__end")||e.className.includes("fpm__main__start")&&(e.style.transform="scale(0.8)",t.className.includes("fpm__main-text__show")?t.classList.replace("fpm__main-text__show","fpm__main-text__hide"):t.classList.add("fpm__main-text__hide"),setTimeout(()=>{e.classList.replace("fpm__main__start","fpm__main__end"),e.style.transform="scale(1)",t.innerText=this._btnTexts.end,t.classList.replace("fpm__main-text__hide","fpm__main-text__show")},200)))}}class w5{constructor(t,e){u(this,"container");u(this,"revokeIcon");u(this,"revokeItem");u(this,"measureController");u(this,"onClick",()=>{this.measureController.revoke()});u(this,"onModeChange",t=>{if(t!=="Edit"&&this.revokeItem.className.includes("enabled")){this.revokeItem.classList.remove("enabled"),this.measureController.hook.off("anchorChange",this.onAnchorChange);return}this.measureController.hook.on("anchorChange",this.onAnchorChange)});u(this,"onAnchorChange",t=>{t&&this.revokeItem.classList.add("enabled")});this.measureController=t,this.container=e;const i=this.container.querySelector(".fpm__revoke-icon"),s=this.container.querySelector(".fpm__revoke");if(!i||!s)throw new Error("不正确的选择器");this.revokeIcon=i,this.revokeItem=s,this.revokeItem.addEventListener("click",this.onClick),t.hook.on("modeChange",this.onModeChange)}dispose(){this.revokeItem.removeEventListener("click",this.onClick),this.measureController.hook.off("modeChange",this.onModeChange)}}function P5(n){De(n,"svelte-1v1ixi2",'.Switcher.svelte-1v1ixi2.svelte-1v1ixi2{position:relative;box-sizing:border-box;width:-moz-max-content;width:max-content}.Switcher.svelte-1v1ixi2 .content.svelte-1v1ixi2,.Switcher.svelte-1v1ixi2 .active-slider.svelte-1v1ixi2{transition-property:transform, width, opacity;transition-duration:300ms;transition-timing-function:ease-out}.Switcher-bg.svelte-1v1ixi2.svelte-1v1ixi2{content:"";position:absolute;box-sizing:border-box;top:50%;left:0;width:100%;height:3.75rem;transform:translateY(-50%);border-style:solid;border-width:0rem 1.875rem;-o-border-image:url("data:image/png;base64,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");border-image:url("data:image/png;base64,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");border-image-slice:0 90 fill}.Switcher-buttons.svelte-1v1ixi2.svelte-1v1ixi2{display:flex;align-items:center;box-sizing:border-box;padding:0 0.1875rem;height:100%}.Switcher-buttons.has-divider.svelte-1v1ixi2 .button.svelte-1v1ixi2:not(:last-child)::after{content:"";position:absolute;right:0;top:10%;height:80%;width:0.0625rem;background-image:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.3), transparent);background-size:100%;background-repeat:no-repeat;background-position:center}.active-slider.svelte-1v1ixi2.svelte-1v1ixi2{box-sizing:border-box;position:absolute;height:3.25rem;top:50%;transform:translate(0, -50%);border-style:solid;border-width:0rem 1.875rem;-o-border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXQAAACcCAMAAABY3aA6AAAAhFBMVEX///////8AAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////88i7DIAAAALHRSTlNmawBvc3d6BAcZDid8NwyFja/XEhYkHTErIS41gpajnUyRVEE7XKpiRczDuH1q6FcAAA1mSURBVHja7Ndtk5owFAXg2KKtiiUdlTdBYH1Z//8vbC4SjkmuDlpmOht7AWfdLyaPZw4ovo06PzydcZX+Eh3QP99gXvsCRkbvsX91s/B29A41/rch9mOjq09twUl6TbNRM/d4aH9rmsWVfkDmx0XX4ORN1HGcZdlWzdLbod2pTcYx8St5Dc/7jIiOjGtw4lbSaZ4nSbJTs/J0aG9qi3meKn+i1/AM+/joWlyBk3eaJ7tj/RlEsiyr/fm3t3PeV2Upo+CzPu6SPFXyBM+4j4oO8k6cwI+nUFbdihopI49HyqbLVSXD05HgO3ejZsZDR5OrkHfiCnxWns9VKaNQzczzCa+vaiJZVudzOVPwnbuKO9RHRidyCnkrLqQCb6I73FNvhtsdyTcKXorWneIO9jHRf1zJ5/F2ma9O0X5fEriXzvfHgi/3++i0ypfbeA72EdF78jS5TKtW/J20efvWvZpekvRJdjH49rneEHld7CsZhhx44Pm48OQuq31RE/tmPfhJRgwzBzlC7mhPA2/hsTXYI+5gH/YgI4aWebZM6qhqil4c4P5ac/o0lntRVlGdLLOhHSMGxnyZH6Y9Od8n3z0fvm069qaaHvLlwLCLQTfQbbr7LEuD3NUOPD9c+1v2qCw/d+n2GvbX0RFzahbd5ZZ4z+190G/xLXfd7apjdNhfQof5PEtXk1K65AB3ZmJfX2bshbP47TDsspys0mwO9RfQ1YPiYh1v80PRFA656327dPui40uczsIxVurhDnYFdci38XqBh8cn0anOqVo+JMXcJg8c7W7V7sq/UNCZvOjDtmfYKezygyoGxf4celvnVC1N1Mdci2M099eSfWVu8cGu3fuwRw1VTFvsT6Kjzo+hLBBzM+Tv4+3gq4G7GfZChseu2J9GJ3Oq8+tDC0f+ftwmPPIO9utjDBX7I3XBk3fmF9tck99vauHhcQcecXfULw/VxaOc11Ff5yhzltxYoWjfejDYDcuPuKNjumKP6kfq4kHOP6KCi7klrpej10kXnf88n6McAvHR+nbcubAX0QfUB6Hz5qhyC3yirenwibw/8Y+eHoO0D1YX97ul0OZGzA3yFlyvx5NO4QdfQPvGZDfCrtWL+w0juHJZbLL8EoaGeRdzDKxNbM/ozd0AHnlH2A31MLzk2WaBn6YP0ck8PUxhTuRWzNHd7BInHp3cJp28f0fFQH16SEmdQefKJU6PgTZHtZi1AvL+deJfzu12wVs6NDvCHhjqwTGNuYIRnPlyN2HMEXOUm9/SIL/zp8nuZn2yW3Lqwi50uokmJyp0Mmfq3Ptb5uDvQKcd6mbWFeIpoZupXeuCKfS8hjlyDvPbRnmDmLPkcKerd6cx1OucqXXBFPphZuccde57dz+Dj7bH2FmfHZhaF065GIVOOaeYo1n+c1vuZGIXu1nrTsEIu1yo0GFu5Zw+431un0NyDosb9QDqba3bBSOccrmETrl8R7P4+hvoNXeIo2KcWr+gYFh0XS5uoaNd/jfMH/bNYDlhGAai8gS4NO2lw6HNhQkw/P8fFuLEa6lKS+yUQ1l/ws7O05MIc/E7qSfA6NBV0a/m0o9wsT1/SlFZUHY39QiY/mowqLoJ/bYWnWAuuue0lt9XVo11GMzptiKp0PUUvSi4aJ6T5m7ajsQYwFzMLBXoIqZoVnT2fMlzvBGzNA8dRb/u/8Fm3qDnz7l/Fgm7TT1crwGoOkKfio4pip7z2nLnKQZdV7PUVl1U0cUtOkt+Z/LzVRdVdcmLfkTRM6BL4Ay9fz9VBoOqH/OqCxwd6qLNhcvQAo3RF0clMHB1yZZRv+hBuIcuazyonlc9W0slW0bPtuicoSXT1K/6OVtLJY3Rl27btrro3P9Leu5VvW233UsapYIxekDRjblwhi67BohX9QNGqSS6xDFqHP2/fJX4iIdyGlefRmniiyS6nHYYoyA66VJk6/GpUbo7Jb5IoksPuqiiU9ALgkfVwZf+xheEPtAlOGOUNC94oLoepWHgyxD6RJfXVtOFSC8co5bqUPXXgS8p9O/uwoNuVfZhzl8Q+tt72ozMF12comXP8CXtRxHqEpG+N0hn4nUHGFP1dFWPUJdJGEe6UNLXyd71l0ka5Qek84uLP4K6REs3SA8Nb7rVDoOqA+rR1GW0dFGhEy5Vkc9BXUZTlzhHu422dH4wWh29Y+qbbh9Dx2pkkc6w14U61iMZfzQCXSgv9ZG7po6fjwTyYucoxaX0+VCHvkiUl16Hzh+k68/qnr70UV8kHgEupumkSy3SJTh4uXx+IHTXGHnsqnu+M8bQ4zE9GSOPXWsU3W36bjqpy6DpJnR+v7geYEzoe4TeNTe6cCFdNXVH1JsuD33DG+PKfHG3o40KfZuHzj8ZrYeXRoW+VaHzmi6PwEs7Hzot/Yu9K8aBGIRhqtLbKvW2Wxju/688daiskmBRSKczT7AiA4ljP0UvG6EX7V/kvV4Ivayq9GfoxchFauJ0nLQ2I38yfuzyOdIEY/rEekbD5+hoA2ha9xDskbIubnhpcpTfe0HDK27tmsy6Unu7vrWLIYYu0nxONz/EaIzrtMo4CTg06q1xHQbTB+qm5kvCiVbsMJg+JRhqvqSXO5FgQGykeV3+5rRFYiPI6kTqmYfK6iAg1fPlWTEABKReKo1Sl95oDnUilcZSgKakiZSOQvdLAc31F1NHfRJ5vv7iF71WuTFkIA7M/aLXhdQlZ0zcCYgpnS3vmpbURw8wJ8u715a65qQJnuowUw/X1GHIoGWM6ePcGZ0hA7cesUW9gME6PyEn1iMw2RG/pH9HvckOs5NCf1duUoO3aGQnRY3TVr0ax/B2OgBnnEYtAoG6GGZgJm3EIpCZYeImlUVAt31XyOgYGnHbV9kbTSVjGLN95QbHB+wSet22B0ShxwbH3MobOQFqrfchz628+0zrbVGt9xJLVefUtJ7HM5xH5q/d/yK4p/N4BpR6cajLiLSvzl2hA/OCQo8jd4rP89LX9B6hWxW5UxC50wiX2soWJDQK8X4+X2rMN4RLtWLUdtylFa1rptElAKhv0R0xas3AwNdeE4x4vSPzpRkYuL8QGNiMxvy+Szum8V8jjn/t3W2bkkAYhmE7fKlVTDCVF2EQcGmB////mifHrhAlLD60sA+aH2vOvbtn2uqYp/5UVC8X+/T4akz20ol9e/Hux79tbPGm0JvmGt2esIu2XXdsoX5zgpHXx727d+rl4cW7tsV1x+0Xe9vUOlm/zEe9tMW8Weh2Rrm0X2GfRre1Ttgv7B/f7a1vo5BLzin0KG2/wp6C2bvTyLrJOmGfjP5/gPG73YBDXs+5lUzdPeVyD52CWa03CbVO1msdM/a/3DAInBSvOafQk816Rbk8QKfWzzbqZL3WMSO8SJCwydLZQDGf1sztM4X+EJ1a996iRtZJO+cY3If9LXcWZhbdJG/mPHrzKPQ/oF8201PMwdGwE3aqncQznwb3YmksGvJazDksxqfLJtqKTtRlMw1S1GEn7Njr1/A3V84PiN+NOeZpsH+hXFrRUX9VRp1ir4fd/NREYsDPNfJ4182pc2OuXjHvgo56gjpZh51+v2SeHWZQb8NusFtijnmCeUd0GkZFok6xU+3AI0/0if+7/mRhfDCI1+pczCNFt3RER/2kYouwk3bizlDy5geZd/7JEYVBXJ57MbdidcK8e9Kv6m+xClEn7A/jLvNfePX2+ZDciDfMQxW/Yd4Vnaz7XhblG6MOe9OdGZR7S8Sb5MZ8k8eZ52P+FLqo73xvHTq62Ak77LiPaKZEHHJiruvcCdeev8O8IzpZX+4OK/e7o0LCjntNfvj6Zo1NcSGnWpzv7uqwW2LeEZ2sf1l+O0ixO7a1aLAbeOiH/aCNeI1cTueO1Pnh2/IL5h3RYTfFvt5UEnbYjTvszXmvX5BOM7tLHqpqszZ1jvkz6KhLxaSqiqwbdgLfNK6939m0/uIBvyW3okqlUi2YP49Oseuzo3ecVdIxMnPckZdn2DO7PjVxITfNUs2Onj4pUud/j34Ne5AlZb75xY479MN+fmkjDvkmL5MsIOZ/iQ77Jez+yn1Vhh33+WyUM0fckKtXd+VLzDH/B3Safe+5aVzqksHdwI+Ifm7AEdfFUsap6+2J+b+how57WcWhtcAd+wHrz9FGXMjDuCoh1+Z9odMxwn5KysJJJO4GfnSzuIpbiVOUyUnIaZYe0Jvsq2A9iYsy1+4CPyb7BWNp8bws1GQdrGrkPaLDvtNbqudmC6coKmX/Dj/IrwBrqoHbqioKZ5G5nt4+d5D3j/6T/atmP4j7+VNSafg8tkOhH8XohYZ2nMu6k09nET9o8q+Q943Olro07oGbTSOn3G6L0smViqMosQc6SRTFSuVOWWy3pRN9ytzAiOuQ18j7RofduO8F/nhOZ7Zyqqosiu1gpyjKqnKUPUvPRwHfG/EGeb/oTXeBF3lNH7iue9SzHujI2vQSA80t3gLeIt4/+md5i7uB370Ive/v9awGO7I63xful50BbzmV94nOAC/yMjs9LwMeWZ+sU7w7gvePDrzQm1kOdswChfsZ8P7RkRf8EYys81+8Qe91Pg90+lX6AR/0YeY+uzgBAAAAAElFTkSuQmCC");border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXQAAACcCAMAAABY3aA6AAAAhFBMVEX///////8AAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////88i7DIAAAALHRSTlNmawBvc3d6BAcZDid8NwyFja/XEhYkHTErIS41gpajnUyRVEE7XKpiRczDuH1q6FcAAA1mSURBVHja7Ndtk5owFAXg2KKtiiUdlTdBYH1Z//8vbC4SjkmuDlpmOht7AWfdLyaPZw4ovo06PzydcZX+Eh3QP99gXvsCRkbvsX91s/B29A41/rch9mOjq09twUl6TbNRM/d4aH9rmsWVfkDmx0XX4ORN1HGcZdlWzdLbod2pTcYx8St5Dc/7jIiOjGtw4lbSaZ4nSbJTs/J0aG9qi3meKn+i1/AM+/joWlyBk3eaJ7tj/RlEsiyr/fm3t3PeV2Upo+CzPu6SPFXyBM+4j4oO8k6cwI+nUFbdihopI49HyqbLVSXD05HgO3ejZsZDR5OrkHfiCnxWns9VKaNQzczzCa+vaiJZVudzOVPwnbuKO9RHRidyCnkrLqQCb6I73FNvhtsdyTcKXorWneIO9jHRf1zJ5/F2ma9O0X5fEriXzvfHgi/3++i0ypfbeA72EdF78jS5TKtW/J20efvWvZpekvRJdjH49rneEHld7CsZhhx44Pm48OQuq31RE/tmPfhJRgwzBzlC7mhPA2/hsTXYI+5gH/YgI4aWebZM6qhqil4c4P5ac/o0lntRVlGdLLOhHSMGxnyZH6Y9Od8n3z0fvm069qaaHvLlwLCLQTfQbbr7LEuD3NUOPD9c+1v2qCw/d+n2GvbX0RFzahbd5ZZ4z+190G/xLXfd7apjdNhfQof5PEtXk1K65AB3ZmJfX2bshbP47TDsspys0mwO9RfQ1YPiYh1v80PRFA656327dPui40uczsIxVurhDnYFdci38XqBh8cn0anOqVo+JMXcJg8c7W7V7sq/UNCZvOjDtmfYKezygyoGxf4celvnVC1N1Mdci2M099eSfWVu8cGu3fuwRw1VTFvsT6Kjzo+hLBBzM+Tv4+3g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");border-image-slice:0 90 fill}.button.svelte-1v1ixi2.svelte-1v1ixi2{height:3.5rem;display:flex;position:relative;cursor:pointer;align-items:center;justify-content:center;pointer-events:all;width:7.25rem}.button.svelte-1v1ixi2 .content.svelte-1v1ixi2{position:absolute;display:flex;align-items:center;font-size:1rem;color:#fff;text-shadow:0 0.125rem 0.5rem rgba(0, 0, 0, 0.5);font-weight:bold}.button.svelte-1v1ixi2 .content .icon.svelte-1v1ixi2{display:inline-block;width:1.15625rem;height:1.15625rem;background-repeat:no-repeat;background-size:100%;margin-right:0.125rem}.button.svelte-1v1ixi2:not(.active) .content.svelte-1v1ixi2{opacity:0.65;transform:scale(0.875)}.button.svelte-1v1ixi2:not(.active) .content.svelte-1v1ixi2:hover{opacity:0.85}.button.active.svelte-1v1ixi2 .content.svelte-1v1ixi2{opacity:1;transform:scale(1)}')}function Bp(n,t,e){const i=n.slice();return i[13]=t[e],i[14]=t,i[15]=e,i}function _p(n){let t;return{c(){t=U("div"),y(t,"class","active-slider svelte-1v1ixi2"),Q(t,"width",n[6]+"px"),Q(t,"transform",`translate(${n[7]}px, -50%)`)},m(e,i){Y(e,t,i)},p(e,i){i&64&&Q(t,"width",e[6]+"px"),i&128&&Q(t,"transform",`translate(${e[7]}px, -50%)`)},d(e){e&&X(t)}}}function Rp(n){let t;return{c(){t=U("span"),y(t,"class","icon svelte-1v1ixi2"),Q(t,"background-image",`url(${n[13].icon})`)},m(e,i){Y(e,t,i)},p(e,i){i&1&&Q(t,"background-image",`url(${e[13].icon})`)},d(e){e&&X(t)}}}function Fp(n){let t,e,i,s=n[13].value+"",r,o,a=n[15],l,c,h=n[13].icon&&Rp(n);const d=()=>n[10](t,a),f=()=>n[10](null,a);function g(){return n[11](n[13],n[15])}return{c(){t=U("div"),e=U("div"),h&&h.c(),i=ae(),r=Ve(s),o=ae(),y(e,"class","content svelte-1v1ixi2"),y(t,"class","button svelte-1v1ixi2"),we(t,"active",n[4]===n[15])},m(p,m){Y(p,t,m),V(t,e),h&&h.m(e,null),V(e,i),V(e,r),V(t,o),d(),l||(c=je(t,"click",g),l=!0)},p(p,m){n=p,n[13].icon?h?h.p(n,m):(h=Rp(n),h.c(),h.m(e,i)):h&&(h.d(1),h=null),m&1&&s!==(s=n[13].value+"")&&Ge(r,s),a!==n[15]&&(f(),a=n[15],d()),m&16&&we(t,"active",n[4]===n[15])},d(p){p&&X(t),h&&h.d(),f(),l=!1,c()}}}function C5(n){let t,e,i,s,r,o=n[5]&&_p(n),a=n[0],l=[];for(let c=0;c<a.length;c+=1)l[c]=Fp(Bp(n,a,c));return{c(){t=U("div"),e=U("div"),i=ae(),o&&o.c(),s=ae(),r=U("div");for(let c=0;c<l.length;c+=1)l[c].c();y(e,"class","Switcher-bg svelte-1v1ixi2"),y(r,"class","Switcher-buttons svelte-1v1ixi2"),we(r,"has-divider",!n[5]),y(t,"class","Switcher svelte-1v1ixi2")},m(c,h){Y(c,t,h),V(t,e),V(t,i),o&&o.m(t,null),V(t,s),V(t,r);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(r,null);n[12](t)},p(c,[h]){if(c[5]?o?o.p(c,h):(o=_p(c),o.c(),o.m(t,s)):o&&(o.d(1),o=null),h&23){a=c[0];let d;for(d=0;d<a.length;d+=1){const f=Bp(c,a,d);l[d]?l[d].p(f,h):(l[d]=Fp(f),l[d].c(),l[d].m(r,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=a.length}h&32&&we(r,"has-divider",!c[5])},i:re,o:re,d(c){c&&X(t),o&&o.d(),ci(l,c),n[12](null)}}}function I5(n,t,e){let i;const r=v=>{e(4,h=v)};let{options:o}=t,{onChange:a}=t;const l=[];let c,h=null,d,f;function g(v,b){Je[v?"unshift":"push"](()=>{l[b]=v,e(2,l)})}const p=(v,b)=>{a(v.key),e(4,h=b)};function m(v){Je[v?"unshift":"push"](()=>{c=v,e(3,c)})}return n.$$set=v=>{"options"in v&&e(0,o=v.options),"onChange"in v&&e(1,a=v.onChange)},n.$$.update=()=>{n.$$.dirty&20&&e(5,i=l[h]),n.$$.dirty&40&&i&&c&&setTimeout(()=>{e(6,d=i.clientWidth),e(7,f=i.getBoundingClientRect().left-c.getBoundingClientRect().left)},0)},[o,a,l,c,h,i,d,f,null,r,g,p,m]}class M5 extends Me{constructor(t){super(),Ie(this,t,I5,C5,Pe,{defaultIndex:8,setIndex:9,options:0,onChange:1},P5)}get defaultIndex(){return this.$$.ctx[8]}get setIndex(){return this.$$.ctx[9]}}function k5(n){De(n,"svelte-1m0stw",".exit.svelte-1m0stw{position:relative;pointer-events:all;cursor:pointer;left:1.5rem;top:1.5rem;width:1.5rem;height:1.5rem;background-image:url(data:image/png;base64,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);background-repeat:no-repeat;background-size:100% 100%}")}function E5(n){let t,e,i;return{c(){t=U("div"),y(t,"class","exit svelte-1m0stw")},m(s,r){Y(s,t,r),e||(i=je(t,"click",function(){Di(n[0])&&n[0].apply(this,arguments)}),e=!0)},p(s,[r]){n=s},i:re,o:re,d(s){s&&X(t),e=!1,i()}}}function x5(n,t,e){let{onClick:i=null}=t;return n.$$set=s=>{"onClick"in s&&e(0,i=s.onClick)},[i]}class Np extends Me{constructor(t){super(),Ie(this,t,x5,E5,Pe,{onClick:0},k5)}}const Gp="data:image/png;base64,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",Hp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAAFO0lEQVR4Ae2YWYgdRRSG78SFOG6Ju4MxIRnRgCCKBlSC24P64IO4h7wI6oMPCioqAX1TfFIQRFFBETQmIioqGhDBh3GJiMSAZnABNSIuUQTFbcz4fZcup297b9+t7525wznwU11d1aervj6nurprtbAgEASCQBAIAkEgCASBIBAEgkAQCAJBIAgEgSAQBIJAEMgIzM7OLkHL0STaJ8DMgRkDyDK0CX2MptEUOrMbSGPddB6VvkAwUo5Hd6OzCuP+hfr5Y2NjvxbON60uaXp2hE8CZ3+GfzJ6ABXhOLND0VoPOrF9O+k0Kn2AM85Y16M70UTJuL8taWtoWjSAgHMYM7sQ3YyWN8yysbKZ9NrdeKp1bVGsQcBxvbkUXYsOaD3d2jbabgXQ3yV9GppGPoKA43pyDboclb3G36T9rm7g0L82soAAY/S7CG9E56GybHiLduH4BuvKRhIQcIyUi5BwTmsz47dpvwftadOvafPIAQLOUmZiSl2JVjed1dzJ7Rzei74iembnTnd+NFKAgHMIU7seXYKObTPN92kXzue9wtH/yAACjkBuQecgN3tltoNGN4rTwNlb1rFd20gAAs4JTOR2dAYqe407351IOB/2C0dnlQBiAm7vZ6oYkIPKG77XUd+E1iDvU2bTND6I3qtqLH0BYvDuWP3uORHNUHeAOxlcRx+C9C01/F1MhzvQUahsj6OfT9HDaKoqODot2zvY3tIYvOuAi+W5SD++Xf5BU+h1BvklZc+G/+u4+AbkwtxunF/QRzivcl/HUJn1E0GTjMKNmtGin7+QKeD30AQTfI1ye7dPk+uMFFPqMtRuvaFLzQfxOKocjs57ApRNwrfKDPKJ+YSV9Z/RKcj2lfR9BUi/cdzW6GsU3o98U3Uytq/p9wR6serIwWfdevoflA3mh8yHGzBfpYJK5U8cuz5dhW5k4isoS40+ptJDaD3qBM439HsKbR0UHHzXegLkhdhnaBcyrfJwhKSMGtPuAnQbAM6mbGq0HU3DI+h01Akc/+c8owYJB/9tFz/7NDUmZUqtRFegVehP5OSU64jlfpkOp/wRbUNbmNQflHXDzyoO7kMnIX16rWr18L6nbTN6FD+m9EDNAfVsGaRJHAjpOGTEJDgJViqX0WakvYu2ot3oVHQT0odRJxT7C1Y/RUtwHgNOx/90ik66qfcFyBvlIG2gOoGMjgTFMg/sQOoHo++QQFynjC7BJjjpWq/LQ3LNM62GBod79Z5iXpwsg7SWul/YQiqmW4qINPmD6OM5zUU+QbQs9vUhzgsc7tsyz23r2Ah3J/kJegE5mXFkOjVbvNMC7v7JaHMd8ZzST/4a6/MGh3vXU8GybxMS9hGOfOJG0jFIAGnylk7edpXOm1qpzWPb7Ge0mYrPoaGmFff7zxxEZZZB2oFD00RIRyAhJSh5MHkoAhFOeit5vQvyFvTksBZk7vU/qxSQ3jNIH2R3cqPoh+bvKEVMiqJ8tKSo8TLXIdPqWfT0fMLh/tWlmM6SMam9pFsRkgt3ihRhGS3FiHLT6X7JfY475KG8yrlXS6s8gtKdCpCu5ryR5Os8H0H5NDNyhGNaPc/1Kd2ozp8NDJBTKkDawKkjkZFkeuVBOY49yMh5eaHAYSyDSTEdJytAcuF2n2TqmF5pD5Tg+B9pQUQOY6ubgxyKsSYZNf4GEdJqJJylyA/Pl9AbCw0OY6o/RcuhGJB8IMJZh1Ygf4u8g3YBx5QLk4DRhMaRC3NYEAgCQSAIBIEgEASCQBAIAkEgCASBIBAEgkAQCAJBYJEQ+BdpRqKi3IjqNwAAAABJRU5ErkJggg==",Wp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAMAAAAADbN2wMAAABi0lEQVRoBe2Yu20DMRBEdW7EuVLX4NQVuAEVoUhFuAFV4FQ1OHWuRkzNABRwMLhDfbhcBhyA0IEjnvYNjjxoN5upmcBMYCYQmcCifjyl9AL/E+Md4xXjjHHCOC7L8ofPcJkAufgvVPhWqPIHc7sRIJiwJSZfKp7f5zz9cCkAPjZKNV+tbeYpAD7zSjVfrW3mKQBuWKWar9Y28xQATxsl7PNkHgJqYUtPARzxQzxtLG1h7KMhZIL5KP3/HkgonMVf9Y2LA45UzneXBChVkxPfw/tY+WEQdwOw6JEgHgIYCeJhgFEgngIYAeJpgGiIJgCREM0AoiCaAkRANAfoDeEC0BPCDaAXhCtADwh3AG+ILgCeEN0AvCC6AnhAdAdoDRECICB+4bEmtmzOGNU2ZhgAirP+2dFaS7YxVVdifROX69wIOODmTN6SbGOGArDiDFF7Esw2ZjhAjr3WpjT9UQC4YZVMfxSAWhvT9EcBUG1MnkL0i6ptnuIij0mjjVl9D3jUMu85E5gJzARuT+ACS7KuMQ7rOEcAAAAASUVORK5CYII=",Up="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAMAAAAADbN2wMAAAByElEQVRoBe1ZMU4DMRC8Q7yCJjVNKCh4ARVfAPo0PCYNPeQLVLyAggIa6jQ8g2NGsiJjeUfHrdGd0K60Sm7t3R3P+hx503UhwUAwEAzMyUCvkg/DcITxa+gldAXdQ5+hu77vv/DZTKbmMheQAt4D4XkF5Stsm1aL8OQiw5aQ+Rp4zqed461kci5VgUegO22F0BnnA9W+qcVQFeCeX4qYWNQC+MIuRUwsxwIhTxu1hV4w/ib8fzN0hskXwoFYqqIqsIMHT5uafML4XhuYaGMsxqwJMRBLVcyXmLOzs/ku8ybzTDhkthZfiWUNzSuxxbP8zVEV6HjOQx8KdNw2rcEzBWP+2JLMTQwctEQuwHJakj0WMHc1ogJRAScDsYWcBLrdowJuCp0BogJOAt3uUQE3hc4AUQEngW73/10BXimhtwVNvIDLq2gxf+wjYzL2QZg7XWsPtvKLCSQ5Wq1FXsCfoK2ulsRxBT2BliLbmGoLqXYfE/EC3koYqwae8WUbU1UgWoutyoM4KyuW2kJ7y2kGu4nF01rcVnpGk9aWTrq8eVbGad5alO2+MvuIZ9XGlLnMl5hJ01HK02ixfzGNICemBAPBQDDwhwx8A43PdoQvgLfYAAAAAElFTkSuQmCC";function D5(n){De(n,"svelte-468fdd",'*.forbid.svelte-468fdd.svelte-468fdd{pointer-events:none !important;opacity:0.5}.Measure-Controller.svelte-468fdd.svelte-468fdd{pointer-events:none;position:relative;width:100%;height:100%;z-index:2}.Measure-Controller.svelte-468fdd .mode-switcher.svelte-468fdd{margin-top:2.25rem}.Measure-Controller.svelte-468fdd .bottom.svelte-468fdd{position:absolute;width:100%;bottom:0}.Measure-Controller.svelte-468fdd .bottom .mask.svelte-468fdd{position:absolute;bottom:0;width:100%;height:11.5rem;background-size:100%;background-image:linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.3))}.Measure-Controller.svelte-468fdd .bottom .center.svelte-468fdd{display:flex;flex-direction:column;align-items:center;margin-bottom:2.5rem}.Measure-Controller.svelte-468fdd .buttons.svelte-468fdd{pointer-events:all;display:flex;align-items:center;height:2.5rem;background:rgba(0, 0, 0, 0.2);color:rgba(255, 255, 255, 0.85);width:-moz-max-content;width:max-content;border-radius:624.9375rem;overflow:hidden}.Measure-Controller.svelte-468fdd .buttons .button.svelte-468fdd{cursor:pointer;display:flex;align-items:center;position:relative;font-size:0.875rem;padding:0rem 1rem}.Measure-Controller.svelte-468fdd .buttons .button .icon.svelte-468fdd{width:1.5rem;height:1.5rem;background-repeat:no-repeat;background-size:100%;margin-right:0.25rem}.Measure-Controller.svelte-468fdd .buttons .button.svelte-468fdd::after{content:"";position:absolute;display:block;right:-0.03125rem;height:1.5rem;width:0.0625rem;background-image:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.3), transparent);background-size:100%;background-repeat:no-repeat;background-position:center}.Measure-Controller.svelte-468fdd .buttons .button.svelte-468fdd:last-child::after{display:none}')}function Qp(n){let t,e;return t=new Np({props:{onClick:n[0].disable}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.onClick=i[0].disable),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function Xp(n){let t,e,i,s,r=n[2]("撤销")+"",o,a,l,c,h,d=n[2]("结束")+"",f,g,p;return{c(){t=U("div"),e=U("div"),i=U("div"),s=ae(),o=Ve(r),a=ae(),l=U("div"),c=U("div"),h=ae(),f=Ve(d),y(i,"class","icon svelte-468fdd"),Q(i,"background-image",`url(${Gp})`),y(e,"class","button svelte-468fdd"),we(e,"forbid",!n[3]),y(c,"class","icon svelte-468fdd"),Q(c,"background-image",`url(${Hp})`),y(l,"class","button svelte-468fdd"),y(t,"class","buttons svelte-468fdd")},m(m,v){Y(m,t,v),V(t,e),V(e,i),V(e,s),V(e,o),V(t,a),V(t,l),V(l,c),V(l,h),V(l,f),g||(p=[je(e,"click",n[7]),je(l,"click",n[6])],g=!0)},p(m,v){v&4&&r!==(r=m[2]("撤销")+"")&&Ge(o,r),v&8&&we(e,"forbid",!m[3]),v&4&&d!==(d=m[2]("结束")+"")&&Ge(f,d)},d(m){m&&X(t),g=!1,ut(p)}}}function S5(n){let t,e,i,s,r,o,a,l,c,h,d,f=n[1]&&Qp(n),g=n[5]&&Xp(n);function p(v){n[9](v)}let m={options:[{key:"line",value:n[2]("测距离"),icon:Wp},{key:"area",value:n[2]("测面积"),icon:Up}],onChange:n[8]};return n[4]!==void 0&&(m.setIndex=n[4]),c=new M5({props:m}),Je.push(()=>ba(c,"setIndex",p)),{c(){t=U("div"),f&&f.c(),e=ae(),i=U("div"),s=U("div"),r=ae(),o=U("div"),g&&g.c(),a=ae(),l=U("div"),Ae(c.$$.fragment),y(s,"class","mask svelte-468fdd"),y(l,"class","mode-switcher svelte-468fdd"),y(o,"class","center svelte-468fdd"),y(i,"class","bottom svelte-468fdd"),y(t,"class","Measure-Controller svelte-468fdd")},m(v,b){Y(v,t,b),f&&f.m(t,null),V(t,e),V(t,i),V(i,s),V(i,r),V(i,o),g&&g.m(o,null),V(o,a),V(o,l),ge(c,l,null),d=!0},p(v,[b]){v[1]?f?(f.p(v,b),b&2&&N(f,1)):(f=Qp(v),f.c(),N(f,1),f.m(t,e)):f&&(Ee(),Z(f,1,1,()=>{f=null}),xe()),v[5]?g?g.p(v,b):(g=Xp(v),g.c(),g.m(o,a)):g&&(g.d(1),g=null);const w={};b&4&&(w.options=[{key:"line",value:v[2]("测距离"),icon:Wp},{key:"area",value:v[2]("测面积"),icon:Up}]),b&1&&(w.onChange=v[8]),!h&&b&16&&(h=!0,w.setIndex=v[4],ga(()=>h=!1)),c.$set(w)},i(v){d||(N(f),N(c.$$.fragment,v),d=!0)},o(v){Z(f),Z(c.$$.fragment,v),d=!1},d(v){v&&X(t),f&&f.d(),g&&g.d(),ve(c)}}}function L5(n,t,e){let{measureController:i}=t,{showExit:s=!1}=t,{i18n:r=v=>v}=t,o=!1,a;function l(v){v==="Edit"?e(5,f=!0):(a(null),e(5,f=!1))}function c(){i.controller instanceof Fn&&i.controller.complete(),i.save({mode:"Watch"})}function h(v){e(3,o=v.length>0)}function d(){e(3,o=!1)}zt(()=>{i.hook.on("modeChange",l),i.hook.on("complete",d),i.hook.on("pointsChange",h)}),ti(()=>{i.hook.off("modeChange",l),i.hook.off("complete",d),i.hook.off("pointsChange",h)});let f=!1;const g=()=>i.revoke(),p=v=>{i.save().changeMode("Edit"),i.changeMeasureType(v)};function m(v){a=v,e(4,a)}return n.$$set=v=>{"measureController"in v&&e(0,i=v.measureController),"showExit"in v&&e(1,s=v.showExit),"i18n"in v&&e(2,r=v.i18n)},[i,s,r,o,a,f,c,g,p,m]}class T5 extends Me{constructor(t){super(),Ie(this,t,L5,S5,Pe,{measureController:0,showExit:1,i18n:2},D5)}}function z5(n){De(n,"svelte-1mfj5mk",'.Switcher.svelte-1mfj5mk.svelte-1mfj5mk{pointer-events:all;position:relative;margin-bottom:1.5rem;box-sizing:border-box;width:-moz-max-content;width:max-content}.Switcher.svelte-1mfj5mk .svelte-1mfj5mk{transition-duration:300ms;transition-timing-function:ease-out}.Switcher.svelte-1mfj5mk .content.svelte-1mfj5mk{transition-property:opacity}.Switcher.svelte-1mfj5mk .highlight.svelte-1mfj5mk{transition-property:width}.Switcher.svelte-1mfj5mk .Switcher-buttons.svelte-1mfj5mk{transition-property:transform}.Switcher.svelte-1mfj5mk .Switcher-buttons.svelte-1mfj5mk{position:absolute;top:50%;left:0;transform:translate(0, -50%);width:-moz-max-content;width:max-content}.Switcher.svelte-1mfj5mk .Switcher-buttons .button.svelte-1mfj5mk{display:inline-block;margin:0 0.5625rem}.Switcher.svelte-1mfj5mk .highlight.svelte-1mfj5mk{height:2rem;background:rgba(0, 0, 0, 0.3);border-radius:624.9375rem}.Switcher.svelte-1mfj5mk .content.svelte-1mfj5mk{position:relative;padding:0 0.75rem}.Switcher.svelte-1mfj5mk .button:not(.active) .content.svelte-1mfj5mk::before{content:"";position:absolute;top:50%;left:10%;width:80%;transform:translateY(-50%);height:0;box-shadow:0 0 0.9375rem 0.3125rem rgba(0, 0, 0, 0.3)}')}function Yp(n,t,e){const i=n.slice();return i[13]=t[e],i[14]=t,i[15]=e,i}function Zp(n){let t;return{c(){t=U("span"),y(t,"class","icon svelte-1mfj5mk"),Q(t,"background-image",n[13].icon)},m(e,i){Y(e,t,i)},p(e,i){i&1&&Q(t,"background-image",e[13].icon)},d(e){e&&X(t)}}}function Jp(n){let t,e,i,s=n[13].value+"",r,o,a=n[15],l,c,h=n[13].icon&&Zp(n);const d=()=>n[9](t,a),f=()=>n[9](null,a);function g(){return n[10](n[13],n[15])}return{c(){t=U("div"),e=U("div"),h&&h.c(),i=ae(),r=Ve(s),o=ae(),y(e,"class","content svelte-1mfj5mk"),y(t,"class","button svelte-1mfj5mk"),we(t,"active",n[4]===n[15])},m(p,m){Y(p,t,m),V(t,e),h&&h.m(e,null),V(e,i),V(e,r),V(t,o),d(),l||(c=je(t,"click",g),l=!0)},p(p,m){n=p,n[13].icon?h?h.p(n,m):(h=Zp(n),h.c(),h.m(e,i)):h&&(h.d(1),h=null),m&1&&s!==(s=n[13].value+"")&&Ge(r,s),a!==n[15]&&(f(),a=n[15],d()),m&16&&we(t,"active",n[4]===n[15])},d(p){p&&X(t),h&&h.d(),f(),l=!1,c()}}}function O5(n){let t,e,i,s,r=n[0],o=[];for(let a=0;a<r.length;a+=1)o[a]=Jp(Yp(n,r,a));return{c(){t=U("div"),e=U("div"),i=ae(),s=U("div");for(let a=0;a<o.length;a+=1)o[a].c();y(e,"class","highlight svelte-1mfj5mk"),Q(e,"width",n[5]?`${n[5]}px`:void 0),y(s,"class","Switcher-buttons svelte-1mfj5mk"),Q(s,"transform",`translate(${n[6]}px, -50%)`),y(t,"class","Switcher svelte-1mfj5mk")},m(a,l){Y(a,t,l),V(t,e),V(t,i),V(t,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,null);n[11](t)},p(a,[l]){if(l&32&&Q(e,"width",a[5]?`${a[5]}px`:void 0),l&23){r=a[0];let c;for(c=0;c<r.length;c+=1){const h=Yp(a,r,c);o[c]?o[c].p(h,l):(o[c]=Jp(h),o[c].c(),o[c].m(s,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}l&64&&Q(s,"transform",`translate(${a[6]}px, -50%)`)},i:re,o:re,d(a){a&&X(t),ci(o,a),n[11](null)}}}function j5(n,t,e){let i,s,{options:r}=t,{defaultKey:o=null}=t,{onChange:a}=t;const l=[];let c,h,d=0;function f(){if(s&&c){e(5,h=s.clientWidth);const v=d+c.getBoundingClientRect().left-s.getBoundingClientRect().left;e(6,d=v)}}function g(v,b){Je[v?"unshift":"push"](()=>{l[b]=v,e(2,l)})}const p=(v,b)=>{a(v.key),e(4,i=b)};function m(v){Je[v?"unshift":"push"](()=>{c=v,e(3,c)})}return n.$$set=v=>{"options"in v&&e(0,r=v.options),"defaultKey"in v&&e(7,o=v.defaultKey),"onChange"in v&&e(1,a=v.onChange)},n.$$.update=()=>{n.$$.dirty&129&&e(4,i=o?r.findIndex(v=>v.key===o):0),n.$$.dirty&20&&e(8,s=l[i]),n.$$.dirty&264&&s&&c&&setTimeout(()=>f(),0)},[r,a,l,c,i,h,d,o,s,g,p,m]}class V5 extends Me{constructor(t){super(),Ie(this,t,j5,O5,Pe,{options:0,defaultKey:7,onChange:1},z5)}}function B5(n){De(n,"svelte-82ysdl",".CircleButton.svelte-82ysdl.svelte-82ysdl{position:relative;display:flex;justify-content:center;align-items:center;width:4.5rem;height:4.5rem;background-image:inherit;background-size:100% auto;background-repeat:no-repeat;transition:transform 200ms ease-in-out}.CircleButton.svelte-82ysdl.svelte-82ysdl:active{transform:scale(0.8)}.CircleButton.svelte-82ysdl .text.svelte-82ysdl{position:absolute}")}function qp(n){let t,e,i,s;return{c(){t=U("div"),e=Ve(n[0]),y(t,"class","text svelte-82ysdl")},m(r,o){Y(r,t,o),V(t,e),s=!0},p(r,o){(!s||o&1)&&Ge(e,r[0])},i(r){s||(pt(()=>{s&&(i||(i=bi(t,jt,{duration:300},!0)),i.run(1))}),s=!0)},o(r){i||(i=bi(t,jt,{duration:300},!1)),i.run(0),s=!1},d(r){r&&X(t),r&&i&&i.end()}}}function _5(n){let t,e=n[0],i,s,r,o=qp(n);return{c(){t=U("div"),o.c(),y(t,"class","CircleButton svelte-82ysdl"),Q(t,"background-image",`url(${n[2]})`)},m(a,l){Y(a,t,l),o.m(t,null),i=!0,s||(r=je(t,"click",function(){Di(n[1])&&n[1].apply(this,arguments)}),s=!0)},p(a,[l]){n=a,l&1&&Pe(e,e=n[0])?(Ee(),Z(o,1,1,re),xe(),o=qp(n),o.c(),N(o,1),o.m(t,null)):o.p(n,l),l&4&&Q(t,"background-image",`url(${n[2]})`)},i(a){i||(N(o),i=!0)},o(a){Z(o),i=!1},d(a){a&&X(t),o.d(a),s=!1,r()}}}function R5(n,t,e){let i,{text:s}=t,{onClick:r=null}=t,{color:o="white"}=t;return n.$$set=a=>{"text"in a&&e(0,s=a.text),"onClick"in a&&e(1,r=a.onClick),"color"in a&&e(3,o=a.color)},n.$$.update=()=>{n.$$.dirty&8&&e(2,i=(()=>o==="white"?Ga:o==="blue"?Yc:Ga)())},[s,r,i,o]}class F5 extends Me{constructor(t){super(),Ie(this,t,R5,_5,Pe,{text:0,onClick:1,color:3},B5)}}function N5(n){De(n,"svelte-ldjbp8","*.forbid.svelte-ldjbp8.svelte-ldjbp8{pointer-events:none !important;opacity:0.5}.Measure-Controller.svelte-ldjbp8.svelte-ldjbp8{pointer-events:none;position:relative;width:100%;height:100%;z-index:2;color:white}.Measure-Controller.svelte-ldjbp8 .mode-switcher.svelte-ldjbp8{margin-top:2.25rem}.Measure-Controller.svelte-ldjbp8 .bottom.svelte-ldjbp8{position:absolute;width:100%;bottom:0}.Measure-Controller.svelte-ldjbp8 .bottom .mask.svelte-ldjbp8{position:absolute;bottom:0;width:100%;height:12.5rem;background-size:100%;z-index:-1;background-image:linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.5))}.Measure-Controller.svelte-ldjbp8 .bottom .center.svelte-ldjbp8{display:flex;flex-direction:column;align-items:center;margin-bottom:2.5rem}.Measure-Controller.svelte-ldjbp8 .controller.svelte-ldjbp8{pointer-events:all;display:flex;align-items:center}.Measure-Controller.svelte-ldjbp8 .controller .button.svelte-ldjbp8{cursor:pointer;display:flex;align-items:center;height:2.5rem;padding-left:1rem;padding-right:1rem;border-radius:624.9375rem;font-size:0.875rem;color:#fff;background-color:rgba(0, 0, 0, 0.2)}.Measure-Controller.svelte-ldjbp8 .controller .button .icon.svelte-ldjbp8{width:1.5rem;height:1.5rem;background-repeat:no-repeat;background-size:100%;margin:0 0.25rem}.Measure-Controller.svelte-ldjbp8 .controller .main-button.svelte-ldjbp8{margin-left:1.75rem;margin-right:1.75rem;font-size:0.875rem;font-weight:bold}")}function Kp(n){let t,e;return t=new Np({props:{onClick:n[0].disable}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.onClick=i[0].disable),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function $p(n){let t,e,i,s;return e=new V5({props:{options:[{key:"line",value:n[2]("测距离")},{key:"area",value:n[2]("测面积")}],defaultKey:n[0].currentMeasureType,onChange:n[0].changeMeasureType}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","mode-switcher svelte-ldjbp8")},m(r,o){Y(r,t,o),ge(e,t,null),s=!0},p(r,o){n=r;const a={};o&4&&(a.options=[{key:"line",value:n[2]("测距离")},{key:"area",value:n[2]("测面积")}]),o&1&&(a.defaultKey=n[0].currentMeasureType),o&1&&(a.onChange=n[0].changeMeasureType),e.$set(a)},i(r){s||(N(e.$$.fragment,r),r&&pt(()=>{s&&(i||(i=bi(t,jt,{duration:dr},!0)),i.run(1))}),s=!0)},o(r){Z(e.$$.fragment,r),r&&(i||(i=bi(t,jt,{duration:dr},!1)),i.run(0)),s=!1},d(r){r&&X(t),ve(e),r&&i&&i.end()}}}function em(n){let t,e,i,s=n[2]("撤销")+"",r,o,a,l,c;return{c(){t=U("div"),e=U("div"),i=ae(),r=Ve(s),y(e,"class","icon svelte-ldjbp8"),Q(e,"background-image",`url(${Gp})`),y(t,"class","button svelte-ldjbp8"),we(t,"forbid",n[3]==="start")},m(h,d){Y(h,t,d),V(t,e),V(t,i),V(t,r),a=!0,l||(c=je(t,"click",n[13]),l=!0)},p(h,d){n=h,(!a||d&4)&&s!==(s=n[2]("撤销")+"")&&Ge(r,s),(!a||d&8)&&we(t,"forbid",n[3]==="start")},i(h){a||(h&&pt(()=>{a&&(o||(o=bi(t,jt,{duration:dr},!0)),o.run(1))}),a=!0)},o(h){h&&(o||(o=bi(t,jt,{duration:dr},!1)),o.run(0)),a=!1},d(h){h&&X(t),h&&o&&o.end(),l=!1,c()}}}function tm(n){let t,e,i,s=n[2]("结束")+"",r,o,a,l,c;return{c(){t=U("div"),e=U("div"),i=ae(),r=Ve(s),y(e,"class","icon svelte-ldjbp8"),Q(e,"background-image",`url(${Hp})`),y(t,"class","button svelte-ldjbp8")},m(h,d){Y(h,t,d),V(t,e),V(t,i),V(t,r),a=!0,l||(c=je(t,"click",n[10]),l=!0)},p(h,d){n=h,(!a||d&4)&&s!==(s=n[2]("结束")+"")&&Ge(r,s)},i(h){a||(h&&pt(()=>{a&&(o||(o=bi(t,jt,{duration:dr},!0)),o.run(1))}),a=!0)},o(h){h&&(o||(o=bi(t,jt,{duration:dr},!1)),o.run(0)),a=!1},d(h){h&&X(t),h&&o&&o.end(),l=!1,c()}}}function G5(n){let t,e,i,s,r,o,a,l,c,h,d,f,g,p=n[1]&&Kp(n),m=n[0].allowMeasureType.length>=2&&n[3]==="start"&&$p(n),v=n[4]&&em(n);d=new F5({props:{onClick:n[14],text:n[6][n[3]],color:n[7][n[3]]}});let b=n[4]&&tm(n);return{c(){t=U("div"),p&&p.c(),e=ae(),i=U("div"),s=U("div"),r=ae(),o=U("div"),m&&m.c(),a=ae(),l=U("div"),v&&v.c(),c=ae(),h=U("div"),Ae(d.$$.fragment),f=ae(),b&&b.c(),y(s,"class","mask svelte-ldjbp8"),y(h,"class","main-button svelte-ldjbp8"),we(h,"forbid",!n[5]),y(l,"class","controller svelte-ldjbp8"),y(o,"class","center svelte-ldjbp8"),y(i,"class","bottom svelte-ldjbp8"),y(t,"class","Measure-Controller svelte-ldjbp8")},m(w,x){Y(w,t,x),p&&p.m(t,null),V(t,e),V(t,i),V(i,s),V(i,r),V(i,o),m&&m.m(o,null),V(o,a),V(o,l),v&&v.m(l,null),V(l,c),V(l,h),ge(d,h,null),V(l,f),b&&b.m(l,null),g=!0},p(w,[x]){w[1]?p?(p.p(w,x),x&2&&N(p,1)):(p=Kp(w),p.c(),N(p,1),p.m(t,e)):p&&(Ee(),Z(p,1,1,()=>{p=null}),xe()),w[0].allowMeasureType.length>=2&&w[3]==="start"?m?(m.p(w,x),x&9&&N(m,1)):(m=$p(w),m.c(),N(m,1),m.m(o,a)):m&&(Ee(),Z(m,1,1,()=>{m=null}),xe()),w[4]?v?(v.p(w,x),x&16&&N(v,1)):(v=em(w),v.c(),N(v,1),v.m(l,c)):v&&(Ee(),Z(v,1,1,()=>{v=null}),xe());const E={};x&8&&(E.onClick=w[14]),x&8&&(E.text=w[6][w[3]]),x&8&&(E.color=w[7][w[3]]),d.$set(E),(!g||x&32)&&we(h,"forbid",!w[5]),w[4]?b?(b.p(w,x),x&16&&N(b,1)):(b=tm(w),b.c(),N(b,1),b.m(l,null)):b&&(Ee(),Z(b,1,1,()=>{b=null}),xe())},i(w){g||(N(p),N(m),N(v),N(d.$$.fragment,w),N(b),g=!0)},o(w){Z(p),Z(m),Z(v),Z(d.$$.fragment,w),Z(b),g=!1},d(w){w&&X(t),p&&p.d(),m&&m.d(),v&&v.d(),ve(d),b&&b.d()}}}const dr=100;function H5(n,t,e){let{measureController:i}=t,{showExit:s=!1}=t,{i18n:r=A=>A}=t;const o={start:r("开始"),add:r("添加"),end:r("结束"),complete:r("完成")},a={start:"white",add:"white",end:"blue",complete:"blue"};let l=!1,c=!0,h="start",d=i.currentMeasureType;const f=()=>{i.getCurrentMode()!=="Edit"?i.changeMode("Edit"):(m("add"),g())},g=()=>{i.controller instanceof Fn&&i.controller.selectPoint()},p=()=>{i.controller instanceof Fn&&i.controller.complete()},m=A=>{e(3,h=A)},v=()=>{g(),L("allow")},b=()=>{m("complete")},w=()=>{i.currentMeasureType==="area"&&h==="complete"&&m("add")},x=A=>{A.length},E=()=>{m("start"),L("allow")},L=A=>{e(5,c=A==="allow")},S=A=>{e(12,d=A)},R=A=>{A.isEmpty&&m("start")};zt(()=>{i.hook.on("revoke",R),i.hook.on("measureTypeChange",S),i.hook.on("modeChange",E),i.hook.on("pointsChange",x),i.hook.on("allowAddPointStateChange",L),i.hook.on("readyComplete",b),i.hook.on("notReadyComplete",w),i.hook.on("complete",E)}),ti(()=>{i.hook.off("measureTypeChange",S),i.hook.off("modeChange",E),i.hook.off("allowAddPointStateChange",L),i.hook.off("readyComplete",b),i.hook.off("pointsChange",x),i.hook.off("notReadyComplete",w),i.hook.off("complete",E)});const z=()=>i.revoke(),O=()=>{h==="start"?f():h==="add"?g():(h==="end"||h==="complete")&&v()};return n.$$set=A=>{"measureController"in A&&e(0,i=A.measureController),"showExit"in A&&e(1,s=A.showExit),"i18n"in A&&e(2,r=A.i18n)},n.$$.update=()=>{n.$$.dirty&4104&&e(4,l=d==="area"&&h!=="start")},[i,s,r,h,l,c,o,a,f,g,p,v,d,z,O]}class W5 extends Me{constructor(t){super(),Ie(this,t,H5,G5,Pe,{measureController:0,showExit:1,i18n:2},N5)}}class U5{constructor(t,e){u(this,"revoke");u(this,"container");u(this,"wrapper");u(this,"mainController");u(this,"disposers",[]);u(this,"measureController");u(this,"mode");u(this,"svelteDom");u(this,"_params");u(this,"useNewUI",!1);u(this,"handleExit",()=>{const t=this.container.querySelector(".fpm__exit-icon"),e=this.container.querySelector(".fpm__exit");if(!e||!t)throw new Error("cannot find dom");this.mode==="pc"&&(Object.assign(e.style,g5),Object.assign(t==null?void 0:t.style,v5));const i=()=>{e.style.opacity="1"},s=()=>{e.style.opacity="0.85"},r=()=>{this.measureController.disable()};return e.addEventListener("click",r),e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",s),()=>{e.removeEventListener("click",r),e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",s)}});var s,r;this._params=e,this.measureController=t,this.mode=(s=e.mode)!=null?s:"pc",this.wrapper=e.container,this.container=document.createElement("div"),this.wrapper.appendChild(this.container);const i=(r=e.useNewUI)!=null?r:!1;if(this.useNewUI=i,i&&(this.container.style.position="absolute",this.container.style.top="0",this.container.style.left="0",this.container.style.width="100%",this.container.style.height="100%",e.pointSelectorMode==="cursor"?this.svelteDom=new T5({target:this.container,props:{measureController:this.measureController,i18n:e.i18n,showExit:e.showExit}}):e.pointSelectorMode==="fixed"&&(this.svelteDom=new W5({target:this.container,props:{measureController:this.measureController,i18n:e.i18n,showExit:e.showExit}}))),!i){this.container.innerHTML=this.mode==="mobile"?d5:u5,this.container.classList.add("fpm__ui-controller",this.mode),this.container.style.background="rgba(0, 0, 0, 0.15)";const o=this.container.querySelectorAll(".fpm__text"),a=this.container.querySelector(".fpm_ui-bg"),l=this.container.querySelector(".fpm_operating-space");Object.assign(a==null?void 0:a.style,m5),Object.assign(l==null?void 0:l.style,p5),Object.assign(this.container.style,f5),o.forEach(c=>Object.assign(c.style,A5))}}dispose(){var t;this.hide(),(t=this.svelteDom)==null||t.$destroy(),this.container.remove()}show(){return this.container.style.display="block",this.container.style.opacity="1",this.container.style.transform="translate(0, 0)",this.useNewUI===!1&&(this.mode==="pc"?(this.revoke=new w5(this.measureController,this.container),this.mainController=new b5(this.measureController,this.container,this._params)):this.mainController=new y5(this.measureController,this.container,this._params),this.disposers.push(this.handleExit())),this}hide(){var t,e;return this.container.style.display="none",this.container.style.opacity="0",this.container.style.transform="translate(0, 10px)",this.useNewUI===!1&&this.mode==="pc"&&((t=this.revoke)==null||t.dispose()),(e=this.mainController)==null||e.dispose(),this.disposers.forEach(i=>i()),this.disposers=[],this}}var Ke={},Q5={get exports(){return Ke},set exports(n){Ke=n}};function Ha(n){return n===null?"null":typeof n=="undefined"?"undefined":typeof n=="object"?Array.isArray(n)?"array":"object":typeof n}function im(n){return Ha(n)==="object"?Jc(n):Ha(n)==="array"?Zc(n):n}function Zc(n){return n.map(im)}function Jc(n){const t={};for(const e in n)n.hasOwnProperty(e)&&(t[e]=im(n[e]));return t}function Wa(n,t=[],e={}){const i={arrayBehaviour:e.arrayBehaviour||"replace"},s=t.map(o=>o||{}),r=n||{};for(let o=0;o<s.length;o++){const a=s[o],l=Object.keys(a);for(let c=0;c<l.length;c++){const h=l[c],d=a[h],f=Ha(d),g=Ha(r[h]);if(f==="object")if(g!=="undefined"){const p=g==="object"?r[h]:{};r[h]=Wa({},[p,Jc(d)],i)}else r[h]=Jc(d);else if(f==="array")if(g==="array"){const p=Zc(d);r[h]=i.arrayBehaviour==="merge"?r[h].concat(p):p}else r[h]=Zc(d);else r[h]=d}}return r}Q5.exports=function(t,...e){return Wa(t,e)},Ke.noMutate=function(...t){return Wa({},t)},Ke.withOptions=function(t,e,i){return Wa(t,e,i)};function X5(n){De(n,"svelte-1q8gtp4",".Measure-Tips.svelte-1q8gtp4.svelte-1q8gtp4{box-sizing:border-box;position:absolute;pointer-events:none;top:0;width:100%;padding:0 2.5rem}.Measure-Tips.svelte-1q8gtp4 .text.svelte-1q8gtp4{text-align:center;position:relative;max-width:100%;top:3.125rem;color:#fff;word-break:break-all;word-wrap:break-word;text-shadow:0 0.0625rem 0.375rem rgba(0, 0, 0, 0.5);font-size:1.25rem;font-weight:bold}")}function nm(n){let t,e,i,s,r;return{c(){t=U("div"),e=U("div"),i=Ve(n[2]),y(e,"class","text svelte-1q8gtp4"),y(t,"class","Measure-Tips svelte-1q8gtp4")},m(o,a){Y(o,t,a),V(t,e),V(e,i),n[7](e),r=!0},p(o,a){(!r||a&4)&&Ge(i,o[2])},i(o){r||(pt(()=>{r&&(s||(s=bi(t,jt,{},!0)),s.run(1))}),r=!0)},o(o){s||(s=bi(t,jt,{},!1)),s.run(0),r=!1},d(o){o&&X(t),n[7](null),o&&s&&s.end()}}}function Y5(n){let t,e,i=n[0]&&nm(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[0]?i?(i.p(s,r),r&1&&N(i,1)):(i=nm(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function Z5(n,t,e){let{measureController:i}=t,{i18n:s=w=>w}=t,{tips:r}=t,{tipStyle:o={}}=t,{visible:a=!0}=t,l=null;const c=w=>{const x=i.currentMeasureType;let E="";return E=r[w],E===void 0&&(E=r[x][w]),E},h=w=>{e(2,f=s(c(w)))},d=()=>{e(2,f="")};let f="";const g=w=>{w==="Edit"&&i.changeMeasureType?h("start"):d()},p=()=>{i.getCurrentMode()==="Watch"&&d()},m=()=>{i.getCurrentMode()==="Edit"&&h("start")},v=w=>{i.currentMeasureType==="area"&&(w.length>=2?h("close"):w.length===0?h("start"):d())};zt(()=>{g(i.getCurrentMode()),i.hook.on("modeChange",g),i.hook.on("complete",p),i.hook.on("pointsChange",v),i.hook.on("measureTypeChange",m)}),ti(()=>{i.hook.off("modeChange",g),i.hook.off("complete",p),i.hook.off("pointsChange",v),i.hook.off("measureTypeChange",m),d()});function b(w){Je[w?"unshift":"push"](()=>{l=w,e(1,l),e(6,o)})}return n.$$set=w=>{"measureController"in w&&e(3,i=w.measureController),"i18n"in w&&e(4,s=w.i18n),"tips"in w&&e(5,r=w.tips),"tipStyle"in w&&e(6,o=w.tipStyle),"visible"in w&&e(0,a=w.visible)},n.$$.update=()=>{if(n.$$.dirty&66&&l)for(const w in o)o.hasOwnProperty(w)&&e(1,l.style[w]=o[w],l)},[a,l,f,i,s,r,o,b]}class J5 extends Me{constructor(t){super(),Ie(this,t,Z5,Y5,Pe,{measureController:3,i18n:4,tips:5,tipStyle:6,visible:0},X5)}}const q5={line:{start:"选择一个合适的位置开始测量，点击【结束】或【鼠标右键】结束测量"},area:{start:"选择一个合适的位置开始绘制平面",close:"选择3个点后将闭合平面，点击【结束】或【鼠标右键】将自动闭合"}},K5={line:{start:""},area:{start:"",close:"选择3个点后将闭合平面，点击结束自动闭合"}};class $5{constructor(t,e){u(this,"tipSvelteDom");this.tipSvelteDom=new J5({target:e.container,props:{measureController:t,tips:Ke({},e.pointSelectorMode==="fixed"?K5:q5,e.tips),i18n:e.i18n,visible:!0,tipStyle:e.tipStyle}})}dispose(){var t;(t=this.tipSvelteDom)==null||t.$destroy()}show(){var t;return(t=this.tipSvelteDom)==null||t.$set({visible:!0}),this}hide(){var t;return(t=this.tipSvelteDom)==null||t.$set({visible:!1}),this}}class eP{constructor(t,e){u(this,"five");u(this,"measureController");u(this,"onKeyDown",t=>{if(t.metaKey&&t.code==="KeyS"){this.measureController.save().changeMode("Watch"),t.preventDefault();return}if(t.code==="Escape")return this.escape()});u(this,"onMouseDown",t=>{t.button===2&&(t.preventDefault(),this.measureController.save().changeMode("Watch"))});this.five=e,this.measureController=t;const i=this.five.getElement();i&&(document.body.addEventListener("keydown",this.onKeyDown),i.addEventListener("mousedown",this.onMouseDown))}dispose(){const t=this.five.getElement();t&&(document.body.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("mousedown",this.onMouseDown))}escape(){return this.measureController.getCurrentMode()==="Watch"?this.measureController.disable():this.measureController.save().changeMode("Watch")}}function ys(n){return typeof n=="object"?n===null?{}:n:{}}class tP extends Bn{constructor(e,i){var o,a,l,c,h,d,f,g,p,m,v,b;super(e);u(this,"state",{enabled:!0});u(this,"hasOpen",!1);u(this,"hook");u(this,"magnifier");u(this,"controller",null);u(this,"allowMeasureType");u(this,"currentMeasureType");u(this,"model");u(this,"group");u(this,"config");u(this,"isMobile");u(this,"useUIController");u(this,"params");u(this,"useGuideController");u(this,"container",document.createElement("div"));u(this,"shortcutKeyController");u(this,"disable",()=>{var e,i,s,r;this.hasOpen=!1,this.state.enabled=!1,this.container.style.visibility="hidden",this.container.style.opacity="0",(e=this.controller)==null||e.dispose(),(i=this.useUIController)==null||i.hide(),(s=this.useGuideController)==null||s.hide(),(r=this.shortcutKeyController)==null||r.dispose(),this.controller=null,this.five.helperVisible=!0,this.five.scene.remove(this.group),this.five.needsRender=!0,this.hook.emit("disable",!0)});u(this,"getCurrentMode",()=>this.controller instanceof Fn?"Edit":this.controller instanceof zp?"Watch":this.controller instanceof oo?"Mixed":this.controller instanceof Sp?"View":null);u(this,"changeMode",e=>{var r,o,a,l,c;if(!this.hasOpen||this.getCurrentMode()===e)return;(r=this.controller)==null||r.dispose();const i={View:Sp,Watch:zp,Edit:Fn,Mixed:oo};if(!i[e])throw new Error("不存在的 Mode");const s=this.createControllerParams();this.controller=new i[e](s),e==="View"?((o=this.useUIController)==null||o.hide(),(a=this.useGuideController)==null||a.hide()):((l=this.useUIController)==null||l.show(),(c=this.useGuideController)==null||c.show()),this.hook.emit("modeChange",e)});u(this,"changeMeasureType",e=>{this.currentMeasureType=e,this.hook.emit("measureTypeChange",e)});this.five=e,this.hook=this.hooks,this.params=i,this.config=ar(i,["openParams","magnifierParams"]),this.model=new Xc(this.config),this.isMobile=(a=(o=i==null?void 0:i.openParams)==null?void 0:o.isMobile)!=null?a:!1,this.magnifier=new Zo(e,(d=(h=i.magnifierParams)!=null?h:(c=(l=i.pointSelectorConfig)==null?void 0:l.helper)==null?void 0:c.magnifierParams)!=null?d:{width:190,height:190,scale:2}),this.allowMeasureType=Array.from(new Set((g=(f=i.editParams)==null?void 0:f.allowMeasureType)!=null?g:["line"])),this.currentMeasureType=(p=this.allowMeasureType[0])!=null?p:"line",this.group=new B.Group,this.group.name="plugin-measure-group",this.container.classList.add("five-plugin-measure-container"),this.container.style.position="absolute",this.container.style.left="0",this.container.style.top="0",this.container.style.visibility="hidden",this.container.style.pointerEvents="none",this.container.style.width="100%",this.container.style.height="100%",this.container.style.opacity="0",this.container.style.zIndex="1";const s=(v=(m=i.editParams)==null?void 0:m.pointSelectorMode)!=null?v:Td?"fixed":"cursor",r=(b=this.params.openParams)!=null?b:{};if(this.params.useUIController!==!1){const w=F({container:this.container,openParams:r,i18n:i.i18n,pointSelectorMode:s,useNewUI:this.allowMeasureType.length>1},ys(this.params.useUIController));this.useUIController=new U5(this,w)}if(this.params.useGuideController!==!1){const w=F({container:this.container,pointSelectorMode:s,i18n:i.i18n},ys(this.params.useGuideController));this.useGuideController=new $5(this,w)}}appendTo(e){e.append(this.container)}clear(){this.model.clear()}dispose(){var e,i;this.disable(),this.clear(),(e=this.useUIController)==null||e.dispose(),(i=this.magnifier)==null||i.dispose(),this.five.needsRender=!0}load(e){let i=e;e.list&&(i={polylines:e.list.map(r=>r.polyline).map(r=>{var o;return fe(F({},r),{visibleFiveMode:(o=r.visibleFiveMode)!=null?o:["Panorama"]})})}),this.model.parse(i),this.save()}enable(e){var i,s,r;this.hasOpen||(!this.container.parentElement&&((i=this.five.getElement())!=null&&i.parentElement)&&this.appendTo(this.five.getElement().parentElement),this.state.enabled=!0,this.hasOpen=!0,this.group.matrix.copy(this.workUtil.transform),this.group.matrix.decompose(this.group.position,this.group.quaternion,this.group.scale),this.group.updateMatrixWorld(),this.five.scene.add(this.group),this.container.style.visibility="visible",this.container.style.opacity="1",e!=null&&e.mode?this.changeMode(e.mode):this.isMobile?this.changeMode("Mixed"):this.changeMode("Watch"),(e==null?void 0:e.mode)!=="View"&&((s=this.useUIController)==null||s.show(),(r=this.useGuideController)==null||r.show()),this.shortcutKeyController=new eP(this,this.five),this.hook.emit("enable",!0))}edit(e){e&&this.changeMeasureType(e);const i=this.isMobile?"Mixed":"Edit";this.changeMode(i)}revoke(){this.controller instanceof Fn&&this.controller.revoke()}removePolyline(e){this.model.removePolyline(e)}removeArea(e){this.model.removeArea(e)}removePolylineByID(e){const i=this.model.getPolylineByID(e);i&&this.model.removePolyline(i)}getPolylineByID(e){return this.model.getPolylineByID(e)}getEditedPolyline(){}highlightLine(e){if(this.getCurrentMode()!=="Watch")return!1;const i=this.model.getLineByID(e);return i?(this.controller.highlightLine(i),!0):!1}clearHighlightLines(){return this.getCurrentMode()!=="Watch"?!1:(this.controller.clearHighlightLines(),!0)}save(e){var r;if(!(this.controller instanceof Fn)&&!(this.controller instanceof oo))return this;const i=(r=e==null?void 0:e.mode)!=null?r:"View",s=this.controller.model.areas;return this.controller instanceof Fn?this.controller.complete():s.forEach(o=>{o.showArea(),this.model.addArea(o)}),this.changeMode(i),this}addStartPoint(){this.controller instanceof oo&&this.hook.emit("willChangeState","watching","editing")}addEndPoint(){this.controller instanceof oo&&this.hook.emit("willChangeState","editing","watching")}toJson(){return this.model.toJson()}changeIsMobile(e){}changeConfigs(e){var i,s;Object.assign(this.config,e),(i=this.controller)==null||i.updateDistanceUI(),(s=this.controller)==null||s.updateAreaUI()}setCustomText(e,i){var r;const s=this.model.getLineByID(e);if(!s)throw new Error("不存在的线段");s.setText(i),(r=this.controller)==null||r.updateDistanceUI()}createControllerParams(){var s,r;const e=(s=this.params.openParams)!=null?s:{},i=(r=this.params.editParams)!=null?r:{};return e.isMobile=this.isMobile,{five:this.five,hook:this.hook,group:this.group,model:this.model,config:this.config,magnifier:this.magnifier,container:this.container,workUtil:this.workUtil,openParams:e,editParams:i,pointSelectorConfig:this.params.pointSelectorConfig,magnifierParams:this.params.magnifierParams,getMeasureType:()=>this.currentMeasureType,mouseGroup:Op(F({},e.crossHairParameter)),userDistanceItemCreator:this.params.userDistanceItemCreator}}}const iP=function(t,e){return new tP(t,e)},nP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==";let sm=null;class Nn extends $t{constructor(e){var f,g,p;super();u(this,"name","PointMesh");u(this,"dom");u(this,"opacityBeforeHighlight");u(this,"highlighted",!1);u(this,"fontMesh");u(this,"backgroundMesh");u(this,"lastRenderDomItem");u(this,"paramsStyle");u(this,"_visible",!0);u(this,"_onAdded",()=>{this.dom||this.updateDom()});u(this,"_onRemoved",()=>{var e;(e=this.dom)==null||e.destroy(),this.dom=void 0});u(this,"_onShowed",()=>{this.dom&&(this.dom.container.style.display="block")});u(this,"_onHidden",()=>{this.dom&&(this.dom.container.style.display="none")});const d=e!=null?e:{},{point:i}=d,s=rs(d,["point"]);this.paramsStyle=s!=null?s:{};const r=new P.BufferGeometry;r.setAttribute("position",new P.Float32BufferAttribute([0,0,0],3));const o={transparent:!0,side:P.DoubleSide,size:(f=e==null?void 0:e.size)!=null?f:8,map:sm||(sm=new P.TextureLoader().load(nP)),sizeAttenuation:!1},a=new P.PointsMaterial(fe(F({},o),{color:(g=e==null?void 0:e.color)!=null?g:16777215,depthTest:!0,opacity:(p=e==null?void 0:e.opacity)!=null?p:1})),l=new P.PointsMaterial(fe(F({},o),{size:a.size,color:a.color,depthWrite:!1,depthTest:!1,opacity:a.opacity*.5})),c=new P.Points(r,a),h=new P.Points(r,l);this.fontMesh=c,this.backgroundMesh=h,c.name="FontMesh",h.name="BackgroundMesh",c.renderOrder=10,h.renderOrder=0,this.add(c,h),e!=null&&e.point&&this.position.copy(Qe(e.point)),e&&this.setStyle(e),this.addEventListener("removed",()=>{Ft.cacheObject.delete(this),Ft.checkDom(this)}),this.addEventListener("added",()=>{Ft.cacheObject.add(this)}),Ft.checkDomEveryFrame()}get color(){return this.fontMesh.material.color}get size(){return this.fontMesh.material.size}get style(){return{color:this.color,size:this.size,opacity:this.fontMesh.material.opacity,occlusionVisibility:this.fontMesh.material.depthTest,occlusionMode:this.backgroundMesh.visible?"depthWrite":"depthTest"}}get five(){var e,i;return(i=(e=window.globalModules)==null?void 0:e.five)!=null?i:window.$five}setStyle(e){Fe(e.color)&&(this.fontMesh.material.setValues({color:e.color}),this.backgroundMesh.material.setValues({color:e.color})),Fe(e.size)&&(this.fontMesh.material.setValues({side:e.size}),this.backgroundMesh.material.setValues({side:e.size})),Fe(e.occlusionVisibility)&&(e.occlusionVisibility?e.occlusionMode==="depthTest"?(this.fontMesh.material.depthTest=!1,this.backgroundMesh.visible=!1):(this.fontMesh.material.depthTest=!0,this.backgroundMesh.visible=!0):(this.fontMesh.material.depthTest=!0,this.backgroundMesh.visible=!1))}highlight(){this.highlighted||(this.highlighted=!0,this.opacityBeforeHighlight=this.fontMesh.material.opacity,this.fontMesh.material.setValues({opacity:this.opacityBeforeHighlight*Bl}))}unhighlight(){this.highlighted&&(this.highlighted=!1,this.fontMesh.material.setValues({opacity:this.opacityBeforeHighlight}))}updateMatrixWorld(e){super.updateMatrixWorld(e);const i=Nr(this,this.position).toArray().join(",");i!==this.lastRenderDomItem&&(this.updateDom(),this.lastRenderDomItem=i)}updateDom(){const e=this.paramsStyle.tip;e&&!this.dom&&(this.dom=new Br(this.five),this.dom.intersectCheck=!1,this.dom.simulate3D=!0,this.dom.container.style.display=this.visible?"block":"none");const i=s=>{this.dom&&this.dom.__text!==s&&(this.dom.__text=s,s instanceof HTMLElement?(this.dom.container.innerHTML="",this.dom.container.appendChild(s)):s?this.dom.container.innerHTML=_l(s,{style:""}):this.dom.container.innerHTML="")};e?(i(e),this.dom.setPosition(this.position.clone())):i(null)}}class ao extends li{constructor(e){super();u(this,"name","LineWithDotsMesh");u(this,"pointGroup",new $t);u(this,"_paramsStyle");u(this,"setStyle",e=>{super.setStyle(e),this._paramsStyle=F(F({},this._paramsStyle),e),this.pointMeshes.forEach(i=>{var s,r,o;return i.setStyle(fe(F({},this._paramsStyle),{color:(o=(s=this._paramsStyle)==null?void 0:s.pointColor)!=null?o:(r=this._paramsStyle)==null?void 0:r.lineColor,tip:void 0}))}),this.updateEdgePointsVisibility(),this.needsRender=!0});u(this,"highlight",e=>{super.highlight(e),this.pointMeshes.forEach(i=>i.highlight())});u(this,"unhighlight",()=>{super.unhighlight(),this.pointMeshes.forEach(e=>e.unhighlight())});u(this,"updateEdgePointsVisibility",()=>{var e;Fe((e=this._paramsStyle)==null?void 0:e.pointVisibility)&&(this.startPoint&&(this.startPoint.visible=typeof this._paramsStyle.pointVisibility=="object"?this._paramsStyle.pointVisibility.startPoint:this._paramsStyle.pointVisibility),this.endPoint&&(this.endPoint.visible=typeof this._paramsStyle.pointVisibility=="object"?this._paramsStyle.pointVisibility.endPoint:this._paramsStyle.pointVisibility))});this.add(this.pointGroup),e&&this.setStyle(e),e!=null&&e.points&&this.setPoints(e.points)}get startPoint(){return this.pointMeshes[0]}get endPoint(){return this.pointMeshes.length<2?null:this.pointMeshes[this.pointMeshes.length-1]}get visiblePointMeshes(){return this.pointMeshes.filter(e=>e.visible)}get pointMeshes(){return this.pointGroup.children}setPoints(e){super.setPoints(e);const i=e.map(Qe).filter(Fe);this.pointGroup.removeChildren(),this.addIfNotExists(this.pointGroup),i.forEach(s=>{var o,a,l;const r=new Nn(fe(F({},this.style),{color:(l=(o=this._paramsStyle)==null?void 0:o.pointColor)!=null?l:(a=this._paramsStyle)==null?void 0:a.lineColor,tip:void 0}));r.position.copy(s),this.pointGroup.add(r)}),this.updateEdgePointsVisibility(),this.needsRender=!0}}class Ua extends $t{constructor(e){var a,l;super();u(this,"name","ColoredMesh");u(this,"meshFont");u(this,"meshBackground");u(this,"paramsStyle",{});u(this,"_geometry",new P.BufferGeometry);u(this,"highlighted",!1);u(this,"opacityBeforeHighlight");u(this,"colorBeforeHighlight");this.paramsStyle=e!=null?e:{};const i=new P.MeshBasicMaterial({color:new P.Color((a=e==null?void 0:e.color)!=null?a:M1).convertSRGBToLinear(),transparent:!0,side:P.DoubleSide,depthTest:!0,depthWrite:!1,opacity:(l=e==null?void 0:e.opacity)!=null?l:x1}),s=new P.MeshBasicMaterial({color:16777215,transparent:!0,side:P.DoubleSide,depthTest:!1,depthWrite:!1,opacity:.3/.5*i.opacity}),r=new P.Mesh(this.geometry,i),o=new P.Mesh(this.geometry,s);r.name="MeshFront",o.name="MeshBackground",r.renderOrder=1,o.renderOrder=0,this.meshFont=r,this.meshBackground=o,this.add(r),this.setOcclusionVisibility({occlusionVisibility:e==null?void 0:e.occlusionVisibility,occlusionMode:e==null?void 0:e.occlusionMode})}get style(){return{color:this.color,opacity:this.opacity,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode}}get color(){return this.meshFont.material.color}get opacity(){return this.meshFont.material.opacity}get occlusionVisibility(){return!!this.meshBackground.parent||this.meshFont.material.depthTest===!1}get occlusionMode(){return this.meshFont.material.depthTest===!1?"depthTest":"translucence"}set geometry(e){this._geometry=e,this.meshFont.geometry=e,this.meshBackground.geometry=e}get geometry(){return this._geometry}setStyle(e){this.paramsStyle=F(F({},this.paramsStyle),e),Fe(e.color)&&(this.meshFont.material.color.set(new P.Color(e.color).convertSRGBToLinear()),this.needsRender=!0),Fe(e.opacity)&&(this.meshFont.material.opacity=e.opacity,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity,this.needsRender=!0),this.setOcclusionVisibility(e)}highlight(e){var i,s;this.highlighted=!0,Fe(e==null?void 0:e.color)?(this.colorBeforeHighlight=(i=this.colorBeforeHighlight)!=null?i:this.meshFont.material.color.clone(),this.meshFont.material.color.set(new P.Color(e.color).convertSRGBToLinear())):(this.opacityBeforeHighlight=(s=this.opacityBeforeHighlight)!=null?s:this.opacity,this.meshFont.material.opacity=this.opacity*Bl,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity),this.needsRender=!0}unhighlight(){this.highlighted=!1,Fe(this.opacityBeforeHighlight)&&(this.meshFont.material.opacity=this.opacityBeforeHighlight,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity,this.opacityBeforeHighlight=void 0),Fe(this.colorBeforeHighlight)&&(this.meshFont.material.color=new P.Color(this.colorBeforeHighlight),this.colorBeforeHighlight=void 0),this.needsRender=!0}setOcclusionVisibility(e){var r,o,a;const i=(o=(r=e.occlusionMode)!=null?r:this.paramsStyle.occlusionMode)!=null?o:"translucence",s=(a=e.occlusionVisibility)!=null?a:this.paramsStyle.occlusionVisibility;Fe(s)&&(s?i==="depthTest"?(this.meshFont.material.depthTest=!1,this.remove(this.meshBackground)):i==="translucence"&&(this.meshFont.material.depthTest=!0,this.addIfNotExists(this.meshBackground)):(this.meshFont.material.depthTest=!0,this.remove(this.meshBackground)))}}const qc=new P.BufferGeometry;qc.name="blankGeometry",qc.isBlank=!0;class ur extends Ua{constructor(e){super(e);u(this,"name","PolygonMesh");u(this,"points",[]);u(this,"planeHelperNeedUpdate",!0);u(this,"geometryInfoNeedUpdate",!0);u(this,"_paramsStyle");u(this,"areaDom");u(this,"planeHelper",null);u(this,"_geometryInfo",null);u(this,"lastRenderAreaItem");u(this,"_onAdded",()=>{this.areaDom||this.updateAreaItems()});u(this,"_onRemoved",()=>{var e;(e=this.areaDom)==null||e.destroy(),this.areaDom=void 0});u(this,"_onShowed",()=>{this.areaDom&&(this.areaDom.container.style.display="block")});u(this,"_onHidden",()=>{this.areaDom&&(this.areaDom.container.style.display="none")});e!=null&&e.points&&this.setPoints(e.points),this._paramsStyle=e!=null?e:{},this.updateAreaItems(),this.addEventListener("removed",()=>{Ft.cacheObject.delete(this),Ft.checkDom(this)}),this.addEventListener("added",()=>{Ft.cacheObject.add(this)}),Ft.checkDomEveryFrame()}get normal(){return this.points.length>=3?new P.Vector3().crossVectors(this.points[1].clone().sub(this.points[0]),this.points[2].clone().sub(this.points[0])).normalize():new P.Vector3(0,0,1)}get style(){return fe(F({},super.style),{lengthEnable:this._paramsStyle.lengthEnable})}get isBlank(){return!!this.geometry.isBlank}get center(){var e;return(e=this.geometryInfo)==null?void 0:e.center.clone()}get geometryInfo(){return this.geometryInfoNeedUpdate&&(this.isBlank?this._geometryInfo=null:this._geometryInfo=kp(this.geometry),this.geometryInfoNeedUpdate=!1),this._geometryInfo}get five(){var e,i;return(i=(e=window.globalModules)==null?void 0:e.five)!=null?i:window.$five}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.center){const i=Nr(this,this.center).toArray().join(",");i!==this.lastRenderAreaItem&&(this.updateAreaItems(),this.lastRenderAreaItem=i)}}setStyle(e){var s;this._paramsStyle=F(F({},this._paramsStyle),e),super.setStyle(this._paramsStyle);const i=(s=this._paramsStyle.occlusionVisibility)!=null?s:!0;this.areaDom&&(this.areaDom.intersectCheck=!i),this.updateAreaItems()}setPoints(e,i){var r,o;const s=e.map(Qe);this.points=s,this.geometry=(o=Ip(this.points,{checkLinesIntersect:(r=i==null?void 0:i.checkLinesIntersect)!=null?r:!0}))!=null?o:qc,this.planeHelperNeedUpdate=!0,this.geometryInfoNeedUpdate=!0,this.updateAreaItems()}projectPoint(e){return e&&(this.planeHelperNeedUpdate&&this.updatePlaneHelper(),this.planeHelper?this.planeHelper.projectPoint(e,new P.Vector3):e)}updatePlaneHelper(){this.points.length>=3?this.planeHelper=new P.Plane().setFromCoplanarPoints(this.points[0],this.points[1],this.points[2]):this.planeHelper=null,this.planeHelperNeedUpdate=!1}updateAreaItems(){var s;const e=()=>{var r;(r=this.areaDom)==null||r.destroy(),this.areaDom=void 0};if(!this._paramsStyle.lengthEnable||!this.geometryInfo)return e();if(!this.five)return console.error("Five not found");this.areaDom=(s=this.areaDom)!=null?s:(()=>{var a;const r=new Br(this.five),o=(a=this._paramsStyle.occlusionVisibility)!=null?a:!0;return r.intersectCheck=!o,r.simulate3D=!0,r})(),this.areaDom.setPosition(this.center);const i=z1(this.geometryInfo.area,this._paramsStyle.lengthUnit);i?this.areaDom.container.innerHTML=_l(i,{style:"color: #FFFFFF; background: #3366FF"}):this.areaDom.container.innerHTML=""}}function Qa(n,t){return!(Math.abs(n.x-t.x)>1e-5||Math.abs(n.y-t.y)>1e-5||Math.abs(n.z-t.z)>1e-5)}function rm(n){if(n.length<3||!Qa(n[0],n.at(-1)))return!1;let t=!0;const e=new P.Vector3().subVectors(n[1],n[0]).normalize();for(let r=2;r<n.length;r++){const o=new P.Vector3().subVectors(n[r],n[0]).normalize();if(!Qa(o,e)&&!Qa(o,e.clone().negate())){t=!1;break}}if(t)return!1;const i=new P.Plane().setFromCoplanarPoints(n[0],n[1],n[2]);return n.every((r,o)=>o<3?!0:i.distanceToPoint(r)<1e-6)}class om extends $t{constructor(e){super();u(this,"name","MeasureMesh");u(this,"isMeasureMesh",!0);u(this,"points",[]);u(this,"isPolygon",!1);u(this,"selected",!1);u(this,"line");u(this,"polygon");this.line=new ao(e==null?void 0:e.lineStyle),this.polygon=new ur(e==null?void 0:e.polygonStyle),this.add(this.line)}changeConfig(e){this.line.setStyle(e==null?void 0:e.lineStyle),this.polygon.setStyle(e==null?void 0:e.polygonStyle)}setPoints(e){this.points=e,this.line.setPoints(this.points);const i=rm(this.points);this.isPolygon=i,i&&(this.addIfNotExists(this.polygon),this.polygon.setPoints(this.points))}select(){this.highlight(3373055),this.selected=!0}unselect(){this.unhighlight(),this.selected=!1}hover(){this.selected||this.highlight()}unhover(){this.selected||this.unhighlight()}highlight(e){this.line.highlight({color:e}),this.polygon.highlight({color:e})}unhighlight(){this.line.unhighlight(),this.polygon.unhighlight()}}const Kc=typeof navigator!="undefined"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function $c(n,t,e,i){n.addEventListener?n.addEventListener(t,e,i):n.attachEvent&&n.attachEvent("on".concat(t),e)}function lo(n,t,e,i){n.removeEventListener?n.removeEventListener(t,e,i):n.detachEvent&&n.detachEvent("on".concat(t),e)}function am(n,t){const e=t.slice(0,t.length-1);for(let i=0;i<e.length;i++)e[i]=n[e[i].toLowerCase()];return e}function lm(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");const t=n.split(",");let e=t.lastIndexOf("");for(;e>=0;)t[e-1]+=",",t.splice(e,1),e=t.lastIndexOf("");return t}function sP(n,t){const e=n.length>=t.length?n:t,i=n.length>=t.length?t:n;let s=!0;for(let r=0;r<e.length;r++)i.indexOf(e[r])===-1&&(s=!1);return s}const co={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Kc?173:189,"=":Kc?61:187,";":Kc?59:186,"'":222,"[":219,"]":221,"\\":220},Wi={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},Xa={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Bt={16:!1,18:!1,17:!1,91:!1},gt={};for(let n=1;n<20;n++)co["f".concat(n)]=111+n;let ht=[],ho=null,cm="all";const dn=new Map,uo=n=>co[n.toLowerCase()]||Wi[n.toLowerCase()]||n.toUpperCase().charCodeAt(0),rP=n=>Object.keys(co).find(t=>co[t]===n),oP=n=>Object.keys(Wi).find(t=>Wi[t]===n);function hm(n){cm=n||"all"}function fo(){return cm||"all"}function aP(){return ht.slice(0)}function lP(){return ht.map(n=>rP(n)||oP(n)||String.fromCharCode(n))}function cP(){const n=[];return Object.keys(gt).forEach(t=>{gt[t].forEach(e=>{let{key:i,scope:s,mods:r,shortcut:o}=e;n.push({scope:s,shortcut:o,mods:r,keys:i.split("+").map(a=>uo(a))})})}),n}function hP(n){const t=n.target||n.srcElement,{tagName:e}=t;let i=!0;const s=e==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(s||e==="TEXTAREA"||e==="SELECT")&&!t.readOnly)&&(i=!1),i}function dP(n){return typeof n=="string"&&(n=uo(n)),ht.indexOf(n)!==-1}function uP(n,t){let e,i;n||(n=fo());for(const s in gt)if(Object.prototype.hasOwnProperty.call(gt,s))for(e=gt[s],i=0;i<e.length;)e[i].scope===n?e.splice(i,1).forEach(o=>{let{element:a}=o;return eh(a)}):i++;fo()===n&&hm(t||"all")}function fP(n){let t=n.keyCode||n.which||n.charCode;const e=ht.indexOf(t);if(e>=0&&ht.splice(e,1),n.key&&n.key.toLowerCase()==="meta"&&ht.splice(0,ht.length),(t===93||t===224)&&(t=91),t in Bt){Bt[t]=!1;for(const i in Wi)Wi[i]===t&&(vt[i]=!1)}}function dm(n){if(typeof n=="undefined")Object.keys(gt).forEach(s=>{Array.isArray(gt[s])&&gt[s].forEach(r=>Ya(r)),delete gt[s]}),eh(null);else if(Array.isArray(n))n.forEach(s=>{s.key&&Ya(s)});else if(typeof n=="object")n.key&&Ya(n);else if(typeof n=="string"){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];let[s,r]=e;typeof s=="function"&&(r=s,s=""),Ya({key:n,scope:s,method:r,splitKey:"+"})}}const Ya=n=>{let{key:t,scope:e,method:i,splitKey:s="+"}=n;lm(t).forEach(o=>{const a=o.split(s),l=a.length,c=a[l-1],h=c==="*"?"*":uo(c);if(!gt[h])return;e||(e=fo());const d=l>1?am(Wi,a):[],f=[];gt[h]=gt[h].filter(g=>{const m=(i?g.method===i:!0)&&g.scope===e&&sP(g.mods,d);return m&&f.push(g.element),!m}),f.forEach(g=>eh(g))})};function um(n,t,e,i){if(t.element!==i)return;let s;if(t.scope===e||t.scope==="all"){s=t.mods.length>0;for(const r in Bt)Object.prototype.hasOwnProperty.call(Bt,r)&&(!Bt[r]&&t.mods.indexOf(+r)>-1||Bt[r]&&t.mods.indexOf(+r)===-1)&&(s=!1);(t.mods.length===0&&!Bt[16]&&!Bt[18]&&!Bt[17]&&!Bt[91]||s||t.shortcut==="*")&&(t.keys=[],t.keys=t.keys.concat(ht),t.method(n,t)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}function fm(n,t){const e=gt["*"];let i=n.keyCode||n.which||n.charCode;if(!vt.filter.call(this,n))return;if((i===93||i===224)&&(i=91),ht.indexOf(i)===-1&&i!==229&&ht.push(i),["metaKey","ctrlKey","altKey","shiftKey"].forEach(a=>{const l=Xa[a];n[a]&&ht.indexOf(l)===-1?ht.push(l):!n[a]&&ht.indexOf(l)>-1?ht.splice(ht.indexOf(l),1):a==="metaKey"&&n[a]&&(ht=ht.filter(c=>c in Xa||c===i))}),i in Bt){Bt[i]=!0;for(const a in Wi)Wi[a]===i&&(vt[a]=!0);if(!e)return}for(const a in Bt)Object.prototype.hasOwnProperty.call(Bt,a)&&(Bt[a]=n[Xa[a]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(ht.indexOf(17)===-1&&ht.push(17),ht.indexOf(18)===-1&&ht.push(18),Bt[17]=!0,Bt[18]=!0);const s=fo();if(e)for(let a=0;a<e.length;a++)e[a].scope===s&&(n.type==="keydown"&&e[a].keydown||n.type==="keyup"&&e[a].keyup)&&um(n,e[a],s,t);if(!(i in gt))return;const r=gt[i],o=r.length;for(let a=0;a<o;a++)if((n.type==="keydown"&&r[a].keydown||n.type==="keyup"&&r[a].keyup)&&r[a].key){const l=r[a],{splitKey:c}=l,h=l.key.split(c),d=[];for(let f=0;f<h.length;f++)d.push(uo(h[f]));d.sort().join("")===ht.sort().join("")&&um(n,l,s,t)}}function vt(n,t,e){ht=[];const i=lm(n);let s=[],r="all",o=document,a=0,l=!1,c=!0,h="+",d=!1,f=!1;for(e===void 0&&typeof t=="function"&&(e=t),Object.prototype.toString.call(t)==="[object Object]"&&(t.scope&&(r=t.scope),t.element&&(o=t.element),t.keyup&&(l=t.keyup),t.keydown!==void 0&&(c=t.keydown),t.capture!==void 0&&(d=t.capture),typeof t.splitKey=="string"&&(h=t.splitKey),t.single===!0&&(f=!0)),typeof t=="string"&&(r=t),f&&dm(n,r);a<i.length;a++)n=i[a].split(h),s=[],n.length>1&&(s=am(Wi,n)),n=n[n.length-1],n=n==="*"?"*":uo(n),n in gt||(gt[n]=[]),gt[n].push({keyup:l,keydown:c,scope:r,mods:s,shortcut:i[a],method:e,key:i[a],splitKey:h,element:o});if(typeof o!="undefined"&&window){if(!dn.has(o)){const g=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return fm(m,o)},p=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;fm(m,o),fP(m)};dn.set(o,{keydownListener:g,keyupListenr:p,capture:d}),$c(o,"keydown",g,d),$c(o,"keyup",p,d)}if(!ho){const g=()=>{ht=[]};ho={listener:g,capture:d},$c(window,"focus",g,d)}}}function pP(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(gt).forEach(e=>{gt[e].filter(s=>s.scope===t&&s.shortcut===n).forEach(s=>{s&&s.method&&s.method()})})}function eh(n){const t=Object.values(gt).flat();if(t.findIndex(i=>{let{element:s}=i;return s===n})<0){const{keydownListener:i,keyupListenr:s,capture:r}=dn.get(n)||{};i&&s&&(lo(n,"keyup",s,r),lo(n,"keydown",i,r),dn.delete(n))}if((t.length<=0||dn.size<=0)&&(Object.keys(dn).forEach(s=>{const{keydownListener:r,keyupListenr:o,capture:a}=dn.get(s)||{};r&&o&&(lo(s,"keyup",o,a),lo(s,"keydown",r,a),dn.delete(s))}),dn.clear(),Object.keys(gt).forEach(s=>delete gt[s]),ho)){const{listener:s,capture:r}=ho;lo(window,"focus",s,r),ho=null}}const th={getPressedKeyString:lP,setScope:hm,getScope:fo,deleteScope:uP,getPressedKeyCodes:aP,getAllKeyCodes:cP,isPressed:dP,filter:hP,trigger:pP,unbind:dm,keyMap:co,modifier:Wi,modifierMap:Xa};for(const n in th)Object.prototype.hasOwnProperty.call(th,n)&&(vt[n]=th[n]);if(typeof window!="undefined"){const n=window.hotkeys;vt.noConflict=t=>(t&&window.hotkeys===vt&&(window.hotkeys=n),vt),window.hotkeys=vt}const mP="data:image/png;base64,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",gP=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <linearGradient id="grad1" x1="22.39%" y1="67.34%" x2="56.24%" y2="-36.34%">
            <stop stop-color="#FFFFFF" offset="0%"/>
            <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="100%"/>
        </linearGradient>
    </defs>
    <g fill-rule="nonzero" transform="translate(3.39, 2.29)">
        <path d="M14.39,3.17C14.82,3.17,15.17,3.52,15.17,3.96C15.17,4.4,14.82,4.75,14.39,4.75L14.06,4.75L13.16,15.72C13.08,16.68,12.29,17.42,11.34,17.42H3.87C2.92,17.42,2.13,16.68,2.06,15.72L1.15,4.75L0.83,4.75C0.4,4.75,0.05,4.4,0.05,3.96C0.05,3.52,0.4,3.17,0.83,3.17L14.39,3.17ZM12.49,4.75L2.72,4.75L3.61,15.59C3.62,15.71,3.7,15.8,3.81,15.82L3.87,15.83H11.34C11.48,15.83,11.59,15.73,11.6,15.59L12.49,4.75ZM6.04,7.39C6.48,7.39,6.83,7.74,6.83,8.18V12.4C6.83,12.84,6.48,13.19,6.04,13.19C5.61,13.19,5.26,12.84,5.26,12.4V8.18C5.26,7.74,5.61,7.39,6.04,7.39ZM9.17,7.39C9.61,7.39,9.96,7.74,9.96,8.18V12.4C9.96,12.84,9.61,13.19,9.17,13.19C8.74,13.19,8.39,12.84,8.39,12.4V8.18C8.39,7.74,8.74,7.39,9.17,7.39ZM10.22,0C10.65,0,11,0.35,11,0.79C11,1.23,10.65,1.58,10.22,1.58H5C4.57,1.58,4.22,1.23,4.22,0.79C4.22,0.35,4.57,0,5,0H10.22Z" fill="url(#grad1)"/>
    </g>
</svg>`,vP={auto:"",pen:"","pen-forbidden":"","pen-crosshair":"","pne-polygon":"","pen-circle":"","crosshair-rectangle":"","crosshair-circle":""},AP={position:"absolute",width:"34px",height:"34px",transform:"translate(-50%, -40px)",borderRadius:"50%",cursor:"pointer",zIndex:"9999",userSelect:"none",display:"flex",pointerEvents:"auto",alignItems:"center",justifyContent:"center",backgroundSize:"34px 34px",backgroundPosition:"center",backgroundRepeat:"no-repeat"},bP=`
  <div style="width: 32px; height: 32px; background-color: rgba(0, 0, 0, 0.5); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
    ${gP}
  </div>
`;class pm{constructor(t){u(this,"container");u(this,"deleteButton");this.container=t!=null?t:document.documentElement}setType(t){const e=vP[t];e?this.container.style.cursor=`url(${e}), auto`:this.container.style.cursor=t}showDeleteButton(t){const{clientX:e,clientY:i,container:s=this.container,onClick:r}=t;let o=this.deleteButton;return o||(o=document.createElement("div"),Object.assign(o.style,AP),o.style.backgroundImage=`url(${mP})`,o.innerHTML=bP),this.deleteButton=o,s.appendChild(o),o.style.left=`${e}px`,o.style.top=`${i}px`,o.onclick=()=>{s.removeChild(o),r()},o}removeDeleteButton(){this.deleteButton&&this.deleteButton.remove()}tip(t){return()=>this.closeTip()}closeTip(){}reset(){this.container.style.cursor="auto"}}class yP extends Pt{constructor(e,i){super();u(this,"name","MeasurePlugin");u(this,"currentMeasureMesh");u(this,"five");u(this,"group");u(this,"_pointSelector");u(this,"_fiveDomEvents");u(this,"_cursor");u(this,"_config");u(this,"lineStyle",{lengthEnable:!0,occlusionVisibility:!0,lengthUnit:"m"});u(this,"polygonStyle",{lengthEnable:!0,occlusionVisibility:!0,opacity:.2,lengthUnit:"m"});u(this,"initEventListeners",()=>{this.group.children.forEach(this.addMeshEventListeners)});u(this,"measure",()=>{this.listener.addMeasureListener(),vt.unbind("delete, backspace"),this.group.children.forEach(p=>p.unselect()),this.cursor.removeDeleteButton();const e=new om({lineStyle:this.lineStyle,polygonStyle:this.polygonStyle});this.currentMeasureMesh=e,e.line.setStyle({cssStyle:"pointer-events: none;"}),this.pointSelector.actionIfNoIntersection="disable",this.updateSelectAdsorbedHelper();const i=new Nn({occlusionMode:"depthTest",occlusionVisibility:!0}),s=new ao(fe(F({},this.lineStyle),{dashed:!0,cssStyle:"pointer-events: none;"})),r=new ur(this.polygonStyle),o=new li(fe(F({},this.lineStyle),{lineOpacity:.5,lineColor:3407837,dashed:!0,cssStyle:"pointer-events: none; opacity: 0.5;"})),a=new li(fe(F({},this.lineStyle),{lineOpacity:.5,lineColor:3407837,dashed:!0,cssStyle:"pointer-events: none; opacity: 0.5;"})),l=new Nn({occlusionMode:"depthTest",occlusionVisibility:!0,color:3407837,opacity:.5}),c=()=>{i.removeFromParent(),s.removeFromParent(),r.removeFromParent(),o.removeFromParent(),a.removeFromParent(),l.removeFromParent()};this.group.add(e);const h=p=>{if(!p){c();return}if(e.points.length===0&&(this.pointSelector.actionIfNoIntersection="disable",this.group.addIfNotExists(i),i.position.copy(p.point)),e.points.length>=1)if(this.pointSelector.actionIfNoIntersection="virtualPoint",i.removeFromParent(),this.group.addIfNotExists(s),s.setPoints([e.points.at(-1),p.point]),p.isAdsorbed)o.removeFromParent(),a.removeFromParent(),l.removeFromParent();else{const m=e.points.at(-1);if(Math.abs(p.point.y-m.y)>.2){const b=new P.Vector3(p.point.x,m.y,p.point.z);o.setPoints([m,b]),a.setPoints([b,p.point]),l.position.copy(b)}else{let b=new P.Vector3;Math.abs(p.point.x-m.x)<Math.abs(p.point.z-m.z)?b=new P.Vector3(p.point.x,m.y,m.z):b=new P.Vector3(m.x,m.y,p.point.z),o.setPoints([m,b]),a.setPoints([b,p.point]),l.position.copy(b)}this.group.addIfNotExists(o,a,l)}if(e.points.length>=2){const m=[...e.points,p.point];rm(m)?(r.setPoints(m),this.group.addIfNotExists(r)):r.removeFromParent()}},d=p=>{p&&(c(),e.setPoints([...e.points,p.point]),this.updateSelectAdsorbedHelper(),e.isPolygon&&this.pointSelector.disable())},f=()=>{var p,m;e==null||e.setPoints(e.points.slice(0,-1)),c(),(m=(p=this.pointSelector.pointSelectorHelper)==null?void 0:p.magnifier)==null||m.render(),this.updateSelectAdsorbedHelper(),this.five.needsRender=!0},g=()=>{this.pointSelector.off("intersectionUpdate",h),this.pointSelector.off("select",d),this.pointSelector.off("disable",g),this.off("undo",f),e.line.setStyle({cssStyle:"pointer-events: auto;"}),c(),e.points.length<2?e.removeFromParent():this.addMeshEventListeners(e),e.__five_pano_index=this.five.panoIndex,this.currentMeasureMesh=null,this.listener.removeMeasureListener(),this.emit("measureEnd")};this.on("undo",f),this.pointSelector.on("intersectionUpdate",h),this.pointSelector.on("select",d),this.pointSelector.on("disable",g),this.pointSelector.enable()});u(this,"endMeasure",()=>{this.pointSelector.disable()});u(this,"setLengthEnable",e=>{this.lineStyle.lengthEnable=e,this.polygonStyle.lengthEnable=e,this.group.children.forEach(i=>{i.changeConfig({lineStyle:F({},this.lineStyle),polygonStyle:F({},this.polygonStyle)}),this.addMeshEventListeners(i)}),this.currentMeasureMesh&&this.currentMeasureMesh.changeConfig({lineStyle:F({},this.lineStyle),polygonStyle:F({},this.polygonStyle)}),this.five.needsRender=!0});u(this,"setUnit",e=>{if(this._config&&(this._config.unit=e),this.lineStyle.lengthUnit=e,this.polygonStyle.lengthUnit=e,this.group.children.forEach(i=>{try{i.changeConfig({lineStyle:F({},this.lineStyle),polygonStyle:F({},this.polygonStyle)}),this.addMeshEventListeners(i)}catch(s){}}),this.currentMeasureMesh)try{this.currentMeasureMesh.changeConfig({lineStyle:F({},this.lineStyle),polygonStyle:F({},this.polygonStyle)})}catch(i){}this.five.needsRender=!0});u(this,"cancel",()=>{var e;(e=this.currentMeasureMesh)==null||e.removeFromParent(),this.pointSelector.disable()});u(this,"undo",()=>{this.emit("undo")});u(this,"clearCurrentMeasure",()=>{var e;(e=this.currentMeasureMesh)==null||e.removeFromParent(),this.currentMeasureMesh=null,this.pointSelector.disable()});u(this,"clear",()=>{this.currentMeasureMesh=null,this.pointSelector.disable(),this.group.children.forEach(this.removeMeshEventListeners),this.group.removeChildren(),this.cursor.removeDeleteButton()});u(this,"dispose",()=>{this.listener.removeMeasureListener(),this.listener.removeClickListener(),this.pointSelector.disable(),this.clear()});u(this,"listener",{addClickListener:()=>{this.five.on("panoArrived",this.onMoveToPano),this.five.on("modeChange",this.onModeChange),vt("delete, backspace",this.deleteSelectedMesh),this.initEventListeners()},removeClickListener:()=>{this.group.children.forEach(e=>{var i,s;(i=e.line.doms)==null||i.forEach(r=>{r!=null&&r.container&&(r.container.onclick=null,r.container.onmouseenter=null,r.container.onmouseleave=null)}),(s=e.polygon.areaDom)!=null&&s.container&&(e.polygon.areaDom.container.onclick=null,e.polygon.areaDom.container.onmouseenter=null,e.polygon.areaDom.container.onmouseleave=null)}),this.fiveDomEvents.clear(),this.five.off("panoArrived",this.onMoveToPano),this.five.off("modeChange",this.onModeChange),vt.unbind("delete, backspace")},addMeasureListener:()=>{vt("ctrl+z, command+z",this.undo),vt("esc",this.cancel),vt("enter",this.endMeasure),this.five.on("mode.change",this.endMeasure),this.five.on("pano.moveTo",this.endMeasure),this.five.on("model.changeShownFloor",this.endMeasure)},removeMeasureListener:()=>{vt.unbind("ctrl+z, command+z"),vt.unbind("esc"),vt.unbind("enter"),this.five.off("mode.change",this.endMeasure),this.five.off("pano.moveTo",this.endMeasure),this.five.off("model.changeShownFloor",this.endMeasure)}});u(this,"onMoveToPano",e=>{const i=this.group.children.filter(r=>r!==this.currentMeasureMesh),s=new Vr;i.forEach(r=>{var a;if(r.unselect(),r.__five_pano_index===e){r.visible=!0;return}((a=r.line.points)==null?void 0:a.some(l=>{var m,v;const c=l.clone().sub(this.five.camera.position).normalize();s.set(this.five.camera.position,c);const h=(v=(m=this.five.model.intersectRaycaster(s,void 0,!0))==null?void 0:m[0])==null?void 0:v.point;if(!h)return!0;const d=.01,f=l.distanceTo(this.five.camera.position);return h.distanceTo(this.five.camera.position)+d>f}))?r.visible=!0:r.visible=!1,this.five.needsRender=!0})});u(this,"onModeChange",e=>{e==="Mapview"&&this.group.children.forEach(i=>{i.visible=!0})});u(this,"onClick",({origDomEvent:e,target:i})=>{var c;const s=i;if(!s)return;if(s.selected){s.unselect(),this.cursor.removeDeleteButton();return}let r,o;if(e&&("touches"in e&&e.touches&&e.touches[0]?(r=e.touches[0].clientX,o=e.touches[0].clientY):"clientX"in e&&"clientY"in e&&(r=e.clientX,o=e.clientY)),r===void 0||o===void 0)return;this.group.children.forEach(h=>h.unselect()),s.select();const a=()=>{this.removeMeshEventListeners(s),s.removeFromParent(),this.cursor.removeDeleteButton(),this.five.needsRender=!0},l=((c=this.five.getElement())==null?void 0:c.parentElement)||document.body;this.cursor.showDeleteButton({clientX:r,clientY:o,container:l,onClick:a}),this.five.once("cameraUpdate",()=>{s.unselect(),this.cursor.removeDeleteButton()})});u(this,"onHover",({target:e})=>{if(this.currentMeasureMesh)return;const i=e;i&&i.hover()});u(this,"onUnHover",({target:e})=>{if(this.currentMeasureMesh)return;const i=e;i&&i.unhover()});u(this,"deleteSelectedMesh",()=>{this.group.children.filter(i=>i.selected).forEach(i=>{this.removeMeshEventListeners(i),i.removeFromParent()}),this.cursor.removeDeleteButton(),this.five.needsRender=!0});u(this,"removeMeshEventListeners",e=>{var i,s;(i=e.line.doms)==null||i.forEach(r=>{r!=null&&r.container&&(r.container.onclick=null,r.container.onmouseenter=null,r.container.onmouseleave=null)}),(s=e.polygon.areaDom)!=null&&s.container&&(e.polygon.areaDom.container.onclick=null,e.polygon.areaDom.container.onmouseenter=null,e.polygon.areaDom.container.onmouseleave=null),this.fiveDomEvents.removeEventListener(e,"click"),this.fiveDomEvents.removeEventListener(e,"hover"),this.fiveDomEvents.removeEventListener(e,"unHover")});u(this,"updateSelectAdsorbedHelper",()=>{if(!this.currentMeasureMesh||this.currentMeasureMesh.points.length===0){this.pointSelector.setAdherePoints(null),this.pointSelector.adhereLine=[],this.pointSelector.adherePlane=[];return}if(this.currentMeasureMesh.points.length>=1){this.pointSelector.setAdherePoints([this.currentMeasureMesh.points[0]]);const e=this.currentMeasureMesh.points.at(-1);this.pointSelector.adhereLine=[new P.Line3(new P.Vector3(1,0,0).add(e),new P.Vector3(-1,0,0).add(e)),new P.Line3(new P.Vector3(0,1,0).add(e),new P.Vector3(0,-1,0).add(e)),new P.Line3(new P.Vector3(0,0,1).add(e),new P.Vector3(0,0,-1).add(e))],this.pointSelector.adherePlane=[]}if(this.currentMeasureMesh.points.length>=3){const e=new P.Plane().setFromCoplanarPoints(this.currentMeasureMesh.points[0],this.currentMeasureMesh.points[1],this.currentMeasureMesh.points[2]);this.pointSelector.adherePlane=[e]}else this.pointSelector.adherePlane=[]});u(this,"addMeshEventListeners",e=>{var i,s;this.removeMeshEventListeners(e),(i=e.line.doms)==null||i.forEach(r=>{r!=null&&r.container&&(r.container.onclick=o=>this.onClick({origDomEvent:o,target:e}),r.container.onmouseenter=()=>this.onHover({target:e}),r.container.onmouseleave=()=>this.onUnHover({target:e}))}),(s=e.polygon.areaDom)!=null&&s.container&&(e.polygon.areaDom.container.onclick=r=>this.onClick({origDomEvent:r,target:e}),e.polygon.areaDom.container.onmouseenter=()=>this.onHover({target:e}),e.polygon.areaDom.container.onmouseleave=()=>this.onUnHover({target:e})),this.fiveDomEvents.addEventListener(e,"click",this.onClick),this.fiveDomEvents.addEventListener(e,"hover",this.onHover),this.fiveDomEvents.addEventListener(e,"unHover",this.onUnHover)});u(this,"load",e=>{this.clear(),e.forEach(i=>{const s=new om({lineStyle:this.lineStyle,polygonStyle:this.polygonStyle});s.setPoints(i.points),this.group.add(s),this.addMeshEventListeners(s),s.__five_pano_index=this.five.panoIndex}),this.five.needsRender=!0});this.five=e;const s={unit:"m",lengthEnable:!0};this.config=i?F(F({},s),i):s,this.group=new $t,this.group.name="MeasureGroup",this.five.scene.add(this.group),this.five.on("panoArrived",this.onMoveToPano),this.five.on("modeChange",this.onModeChange),vt("delete, backspace",this.deleteSelectedMesh),this.initEventListeners()}get pointSelector(){return this._pointSelector?this._pointSelector:(this._pointSelector=new ea(this.five,{mode:"cursor",helper:{pointHelper:"highlight"}}),this._pointSelector)}get fiveDomEvents(){return this._fiveDomEvents?this._fiveDomEvents:(this._fiveDomEvents=new Xs(this.five,{fiveModels:null}),this._fiveDomEvents)}get cursor(){return this._cursor?this._cursor:(this._cursor=new pm,this._cursor)}get config(){return this._config}set config(e){var i,s;this._config=e,this.lineStyle.lengthUnit=e.unit,this.polygonStyle.lengthUnit=e.unit,e.lengthEnable!==void 0&&(this.lineStyle.lengthEnable=e.lengthEnable,this.polygonStyle.lengthEnable=e.lengthEnable),(s=(i=this.group)==null?void 0:i.children)==null||s.forEach(r=>r.changeConfig({lineStyle:this.lineStyle,polygonStyle:this.polygonStyle}))}}const wP=(n,t)=>new yP(n,t),mm=Cc(null);function PP(n){De(n,"svelte-19zi46m",".PanoSpatialTagPlugin__tag-origin.svelte-19zi46m{position:absolute;width:0.5rem;height:0.5rem;border-radius:50%;background:#fff;box-shadow:0 0 .6rem #fff;transform:translate(-50%, -50%) scale(1);transform-origin:center center;animation:svelte-19zi46m-PanoSpatialTagPlugin__tag-origin 1.2s forwards;pointer-events:auto}.PanoSpatialTagPlugin__tag-origin.svelte-19zi46m:after{content:'';position:absolute;top:50%;height:50%;width:2rem;height:2rem;transform:translate(-50%, -50%)}.PanoSpatialTagPlugin__tag-origin-destroy.svelte-19zi46m{transform:translate(-50%, -50%) scale(0.6);animation:svelte-19zi46m-PanoSpatialTagPlugin__tag-origin-destroy 1.2s forwards .7s}@keyframes svelte-19zi46m-PanoSpatialTagPlugin__tag-origin{0%{transform:translate(-50%, -50%) scale(1);opacity:0}100%{transform:translate(-50%, -50%) scale(0.6);opacity:1 }}@keyframes svelte-19zi46m-PanoSpatialTagPlugin__tag-origin-destroy{0%{transform:translate(-50%, -50%) scale(0.6);opacity:1}10%{transform:translate(-50%, -50%) scale(1);opacity:0.9}100%{transform:translate(-50%, -50%) scale(1);opacity:0}}")}function gm(n,t,e){const i=n.slice();return i[3]=t[e],i}function vm(n){let t,e=`${n[3].top}%`,i=`${n[3].left}%`,s,r;function o(){return n[2](n[3])}return{c(){t=U("i"),y(t,"class","svelte-19zi46m"),we(t,"PanoSpatialTagPlugin__tag-origin",!0),we(t,"PanoSpatialTagPlugin__tag-origin-destroy",n[3].destroying),Q(t,"top",e),Q(t,"left",i),Q(t,"visibility",n[3].front?"visible":"hidden")},m(a,l){Y(a,t,l),s||(r=je(t,"click",o),s=!0)},p(a,l){n=a,l&1&&we(t,"PanoSpatialTagPlugin__tag-origin-destroy",n[3].destroying),l&1&&e!==(e=`${n[3].top}%`)&&Q(t,"top",e),l&1&&i!==(i=`${n[3].left}%`)&&Q(t,"left",i),l&1&&Q(t,"visibility",n[3].front?"visible":"hidden")},d(a){a&&X(t),s=!1,r()}}}function CP(n){let t,e=n[0],i=[];for(let s=0;s<e.length;s+=1)i[s]=vm(gm(n,e,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=Ne()},m(s,r){for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(s,r);Y(s,t,r)},p(s,[r]){if(r&3){e=s[0];let o;for(o=0;o<e.length;o+=1){const a=gm(s,e,o);i[o]?i[o].p(a,r):(i[o]=vm(a),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=e.length}},i:re,o:re,d(s){ci(i,s),s&&X(t)}}}function IP(n,t,e){let{origins:i}=t;const s=o=>{mm.update(()=>`${o}-PanoSpatialTagPlugin-${Date.now()}`)},r=o=>s(o.id);return n.$$set=o=>{"origins"in o&&e(0,i=o.origins)},[i,s,r]}class MP extends Me{constructor(t){super(),Ie(this,t,IP,CP,Pe,{origins:0},PP)}}function kP(n){De(n,"svelte-9m6drd",`.PanoSpatialTagPlugin__tag-x.svelte-9m6drd.svelte-9m6drd{position:absolute;top:0;left:0;display:block;white-space:nowrap;box-sizing:border-box;width:25rem;height:14rem;color:#fff;transform:translate(0, -100%);transition:height 0.5s linear}.PanoSpatialTagPlugin__tag-shadow.svelte-9m6drd.svelte-9m6drd{content:'';position:absolute;width:30rem;height:30rem;top:-15rem;left:-15rem;z-index:-1;opacity:0;transition:opacity 0.8s 0.6s;background:url('https://vrlab-image4.ljcdn.com/release/web/PanoSpatialTagPlugin__blur.png');background-size:30rem 30rem}.PanoSpatialTagPlugin__tag-line.svelte-9m6drd.svelte-9m6drd{position:absolute;left:-1rem;width:2rem;height:100%;overflow:hidden}.PanoSpatialTagPlugin__tag-flagpole.svelte-9m6drd.svelte-9m6drd{position:absolute;top:0;left:1rem;height:calc(100% - 1.5rem);width:0.15rem;background:linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.1));box-shadow:0 0.1rem 0.5rem rgba(0, 0, 0, 0.2);opacity:0;transform:translate(-50%, 60%) scaleY(0);transition:transform 0.4s cubic-bezier(0.44, 0.44, 0.74, 0.98), opacity 0.4s cubic-bezier(0.44, 0.44, 0.74, 0.98), width 0.5s linear,
      height 0.5s linear;transform-origin:center bottom}.PanoSpatialTagPlugin__tag-line1.svelte-9m6drd.svelte-9m6drd{position:absolute;top:0;left:0.3rem;height:1.8rem;width:0.1rem;background:#fff;opacity:0;transform:translate(-50%, 200%) scaleY(0);transform-origin:center top}.PanoSpatialTagPlugin__tag-line2.svelte-9m6drd.svelte-9m6drd{position:absolute;top:0;left:0.5rem;height:1.8rem;width:0.1rem;background:#fff;opacity:0;transform:translate(-50%, 200%) scaleY(0);transform-origin:center top}.PanoSpatialTagPlugin__tag-show.svelte-9m6drd .PanoSpatialTagPlugin__tag-line1.svelte-9m6drd{animation:svelte-9m6drd-PanoSpatialTagPlugin__tag-line1 linear 0.5s forwards 0.45s}.PanoSpatialTagPlugin__tag-show.svelte-9m6drd .PanoSpatialTagPlugin__tag-line2.svelte-9m6drd{animation:svelte-9m6drd-PanoSpatialTagPlugin__tag-line2 linear 0.5s forwards 0.65s}.PanoSpatialTagPlugin__tag-x.PanoSpatialTagPlugin__tag-upside-down.svelte-9m6drd.svelte-9m6drd{transform:translate(0, 0)}.PanoSpatialTagPlugin__tag-upside-down.svelte-9m6drd .PanoSpatialTagPlugin__tag-line.svelte-9m6drd{transform:scaleY(-1)}.PanoSpatialTagPlugin__tag-animate.svelte-9m6drd.svelte-9m6drd{position:relative;height:100%;overflow:hidden;transform-origin:left top;transition:transform 0.5s linear}.PanoSpatialTagPlugin__tag-upside-down.svelte-9m6drd .PanoSpatialTagPlugin__tag-animate.svelte-9m6drd{transform-origin:left bottom}.PanoSpatialTagPlugin__tag-content.svelte-9m6drd.svelte-9m6drd{position:absolute;display:inline-block;transform:translate(-100%, 0);transition:transform 0.9s cubic-bezier(0, 0.65, 0.16, 1.08) 0.6s;padding-left:0.5rem;font-size:1rem}.PanoSpatialTagPlugin__tag-upside-down.svelte-9m6drd .PanoSpatialTagPlugin__tag-content.svelte-9m6drd{bottom:0}.PanoSpatialTagPlugin__tag-show.svelte-9m6drd .PanoSpatialTagPlugin__tag-flagpole.svelte-9m6drd{opacity:1;transform:translate(-50%, 0) scaleY(1)}.PanoSpatialTagPlugin__tag-upside-down.svelte-9m6drd .PanoSpatialTagPlugin__tag-shadow.svelte-9m6drd{top:unset;bottom:-15rem}.PanoSpatialTagPlugin__tag-show.svelte-9m6drd .PanoSpatialTagPlugin__tag-shadow.svelte-9m6drd{opacity:0.32}.PanoSpatialTagPlugin__tag-show.svelte-9m6drd .PanoSpatialTagPlugin__tag-content.svelte-9m6drd{transform:translate(0, 0)}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-flagpole.svelte-9m6drd{opacity:0;transform:translate(-50%, 60%) scaleY(0);transition:transform 0.5s 0.55s, opacity 0.4s 0.55s}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-shadow.svelte-9m6drd{opacity:0;transition:opacity 0.8s}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-content.svelte-9m6drd{transform:translate(-100%, 0);transition:transform 0.6s cubic-bezier(0.53, 0.06, 0.88, 0.59)}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-content .svelte-9m6drd{pointer-events:none}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-line1.svelte-9m6drd{opacity:0.5;transform:translate(-50%, 10%) scaleY(0);animation:svelte-9m6drd-PanoSpatialTagPlugin__tag-line1-hide linear 0.28s forwards 0.3s}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-line2.svelte-9m6drd{opacity:0.5;transform:translate(-50%, 0) scaleY(0);animation:svelte-9m6drd-PanoSpatialTagPlugin__tag-line2-hide linear 0.28s forwards 0.45s}@keyframes svelte-9m6drd-PanoSpatialTagPlugin__tag-line1{0%{opacity:0;transform:translate(-50%, 250%) scaleY(1)}50%{opacity:0.5;transform:translate(-50%, 135%) scaleY(1)}100%{opacity:0.5;transform:translate(-50%, 20%) scaleY(0)}}@keyframes svelte-9m6drd-PanoSpatialTagPlugin__tag-line2{0%{opacity:0;transform:translate(-50%, 250%) scaleY(1)}50%{opacity:0.5;transform:translate(-50%, 125%) scaleY(1)}100%{opacity:0.5;transform:translate(-50%, 0) scaleY(0)}}@keyframes svelte-9m6drd-PanoSpatialTagPlugin__tag-line1-hide{0%{opacity:0.5;transform:translate(-50%, 10%) scaleY(0)}50%{opacity:0.2;transform:translate(-50%, 105%) scaleY(1)}100%{opacity:0;transform:translate(-50%, 200%) scaleY(0)}}@keyframes svelte-9m6drd-PanoSpatialTagPlugin__tag-line2-hide{0%{opacity:0.5;transform:translate(-50%, 0) scaleY(0)}50%{opacity:0.2;transform:translate(-50%, 100%) scaleY(1)}100%{opacity:0;transform:translate(-50%, 200%) scaleY(0)}}`)}function EP(n){let t,e,i,s,r,o,a,l,c,h,d,f,g,p,m;return{c(){t=U("div"),e=U("div"),i=ae(),s=U("div"),r=U("i"),o=ae(),a=U("i"),l=ae(),c=U("i"),h=ae(),d=U("div"),f=U("div"),y(e,"class","PanoSpatialTagPlugin__tag-shadow svelte-9m6drd"),Q(e,"transform","translate("+n[7]/2*n[3]*3+"px, "+n[8]/2*(n[1]?-1:1)*n[3]*3+"px) scale("+1/n[3]+")"),y(r,"class","PanoSpatialTagPlugin__tag-flagpole svelte-9m6drd"),Q(r,"width",n[4]+"rem"),y(a,"class","PanoSpatialTagPlugin__tag-line1 svelte-9m6drd"),y(c,"class","PanoSpatialTagPlugin__tag-line2 svelte-9m6drd"),y(s,"class","PanoSpatialTagPlugin__tag-line svelte-9m6drd"),y(f,"class","PanoSpatialTagPlugin__tag-content svelte-9m6drd"),y(d,"class","PanoSpatialTagPlugin__tag-animate svelte-9m6drd"),Q(d,"transform","scale("+n[3]*3+")"),y(t,"id",g="PanoSpatialTagPlugin__"+n[0]),Q(t,"height",20*n[5]+"rem"),y(t,"class","svelte-9m6drd"),we(t,"PanoSpatialTagPlugin__tag-x",!0),we(t,"PanoSpatialTagPlugin__tag-upside-down",n[1]),we(t,"PanoSpatialTagPlugin__tag-show",n[10]),we(t,"PanoSpatialTagPlugin__tag-hide",n[10]===!1||n[6])},m(v,b){Y(v,t,b),V(t,e),V(t,i),V(t,s),V(s,r),V(s,o),V(s,a),V(s,l),V(s,c),V(t,h),V(t,d),V(d,f),f.innerHTML=n[2],n[16](f),p||(m=je(f,"click",n[11]),p=!0)},p(v,[b]){b&394&&Q(e,"transform","translate("+v[7]/2*v[3]*3+"px, "+v[8]/2*(v[1]?-1:1)*v[3]*3+"px) scale("+1/v[3]+")"),b&16&&Q(r,"width",v[4]+"rem"),b&4&&(f.innerHTML=v[2]),b&8&&Q(d,"transform","scale("+v[3]*3+")"),b&1&&g!==(g="PanoSpatialTagPlugin__"+v[0])&&y(t,"id",g),b&32&&Q(t,"height",20*v[5]+"rem"),b&2&&we(t,"PanoSpatialTagPlugin__tag-upside-down",v[1]),b&1024&&we(t,"PanoSpatialTagPlugin__tag-show",v[10]),b&1088&&we(t,"PanoSpatialTagPlugin__tag-hide",v[10]===!1||v[6])},i:re,o:re,d(v){v&&X(t),n[16](null),p=!1,m()}}}function xP(n,t,e){let{id:i}=t,{upsideDown:s}=t,{content:r}=t,{contentZoom:o}=t,{lineWidthZoom:a}=t,{lineHeightZoom:l}=t,{destroying:c=!1}=t,{folded:h}=t,{dispose:d}=t,{events:f}=t,{hooks:g}=t,p=0,m=0,v,b,w=setTimeout(()=>{h||e(10,b=!0),w=void 0},100);const x=S=>{const R=Object.keys(f);let z=S.target;for(;z;){const O=z.getAttribute("class");if(!O){z=z.parentNode;continue}if(O.includes("PanoSpatialTagPlugin__tag-content")){z=null;break}R.forEach(A=>{O.includes(A)&&f[A](i)}),z=z.parentNode}};zt(()=>{g.emit("initTag",{id:i})});const E=mm.subscribe(S=>{if(S===null)return;const[R,z]=S.split("-PanoSpatialTagPlugin-");i===R&&(g.emit("clickOrigin",{id:i,show:b}),w||(e(10,b=h),e(12,h=!h),w=setTimeout(()=>{w=void 0},1500)))});fc(()=>{e(7,p=v.offsetWidth),e(8,m=v.offsetHeight),!w&&e(10,b=!h)}),ti(()=>{g.emit("destroyTag",{id:i}),E(),d()});function L(S){Je[S?"unshift":"push"](()=>{v=S,e(9,v)})}return n.$$set=S=>{"id"in S&&e(0,i=S.id),"upsideDown"in S&&e(1,s=S.upsideDown),"content"in S&&e(2,r=S.content),"contentZoom"in S&&e(3,o=S.contentZoom),"lineWidthZoom"in S&&e(4,a=S.lineWidthZoom),"lineHeightZoom"in S&&e(5,l=S.lineHeightZoom),"destroying"in S&&e(6,c=S.destroying),"folded"in S&&e(12,h=S.folded),"dispose"in S&&e(13,d=S.dispose),"events"in S&&e(14,f=S.events),"hooks"in S&&e(15,g=S.hooks)},[i,s,r,o,a,l,c,p,m,v,b,x,h,d,f,g,L]}let DP=class extends Me{constructor(t){super(),Ie(this,t,xP,EP,Pe,{id:0,upsideDown:1,content:2,contentZoom:3,lineWidthZoom:4,lineHeightZoom:5,destroying:6,folded:12,dispose:13,events:14,hooks:15},kP)}};const SP={position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",pointerEvents:"none"},Am="<",bm=">",ym="%",wm="locals",LP="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",TP={"&":"&amp","<":"&lt",">":"&gt",'"':"&#34","'":"&#39"},Qt={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"};function Pm(n){return n.replace(/;(\s*$)/,"$1")}function zP(n,t){return new OP(n).compileFunction()(t)}class OP{constructor(t){u(this,"templateText");u(this,"mode",null);u(this,"truncate",!1);u(this,"currentLine",1);u(this,"source","");u(this,"regex",new RegExp(LP));this.templateText=t}compileFunction(){let t;const e=`  var __output = "";
  function __append(s) { if (s !== undefined && s !== null) __output += s }
  with (`+wm+` || {}) {
`,i=`  }
  return __output;
`,s=function(r){return r==null?"":String(r).replace(/[&<>'"]/g,function(o){return TP[o]||o})};return this._generateSource(),this.source=e+this.source+i,t=this.source,t="escapeFn = escapeFn || "+s.toString()+`;
`+t,new Function(wm+", escapeFn",t)}_generateSource(){this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");const t=this._parseTemplateText(),e=ym,i=Am,s=bm;t&&t.length&&t.forEach((r,o)=>{let a;if(r.indexOf(i+e)===0&&r.indexOf(i+e+e)!==0&&(a=t[o+2],!(a==e+s||a=="-"+e+s||a=="_"+e+s)))throw new Error('Could not find matching close tag for "'+r+'".');this._scanLine(r)})}_parseTemplateText(){let t=this.templateText;const e=this.regex;let i=e.exec(t);const s=[];let r;for(;i;)r=i.index,r!==0&&(s.push(t.substring(0,r)),t=t.slice(r)),s.push(i[0]),t=t.slice(i[0].length),i=e.exec(t);return t&&s.push(t),s}_addOutput(t){if(this.truncate&&(t=t.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!t)return t;t=t.replace(/\\/g,"\\\\"),t=t.replace(/\n/g,"\\n"),t=t.replace(/\r/g,"\\r"),t=t.replace(/"/g,'\\"'),this.source+='    ; __append("'+t+`")
`}_scanLine(t){const e=ym,i=Am,s=bm;switch(t.split(`
`).length-1,t){case i+e:case i+e+"_":this.mode=Qt.EVAL;break;case i+e+"=":this.mode=Qt.ESCAPED;break;case i+e+"-":this.mode=Qt.RAW;break;case i+e+"#":this.mode=Qt.COMMENT;break;case i+e+e:this.mode=Qt.LITERAL,this.source+='    ; __append("'+t.replace(i+e+e,i+e)+`")
`;break;case e+e+s:this.mode=Qt.LITERAL,this.source+='    ; __append("'+t.replace(e+e+s,e+s)+`")
`;break;case e+s:case"-"+e+s:case"_"+e+s:this.mode==Qt.LITERAL&&this._addOutput(t),this.mode=null,this.truncate=t.indexOf("-")===0||t.indexOf("_")===0;break;default:if(this.mode){switch(this.mode){case Qt.EVAL:case Qt.ESCAPED:case Qt.RAW:t.lastIndexOf("//")>t.lastIndexOf(`
`)&&(t+=`
`)}switch(this.mode){case Qt.EVAL:this.source+="    ; "+t+`
`;break;case Qt.ESCAPED:this.source+="    ; __append(escapeFn("+Pm(t)+`))
`;break;case Qt.RAW:this.source+="    ; __append("+Pm(t)+`)
`;break;case Qt.COMMENT:break;case Qt.LITERAL:this._addOutput(t);break}}else this._addOutput(t)}}}const ih=.001,Cm=.01,jP="https://vrlab-image4.ljcdn.com/release/web/PanoSpatialTagPlugin__blur.png",VP=(n,t)=>{var te,q,ne,se,ue,ze,Ce,ce;let e=t==null?void 0:t.container,i=1.4;const s=(te=t==null?void 0:t.wait)!=null?te:200,r=(q=t==null?void 0:t.maxNumberOnScreen)!=null?q:3,o=(ne=t==null?void 0:t.minRad)!=null?ne:Math.PI/4,a=(se=t==null?void 0:t.nearTolerance)!=null?se:100,l=(ue=t==null?void 0:t.upsideHeight)!=null?ue:1.6,c=(ze=t==null?void 0:t.minDistance)!=null?ze:1.2,h=(Ce=t==null?void 0:t.maxDistance)!=null?Ce:3.5,d=Qr(n),f=document.createElement("div");f.classList.add("PanoSpatialTagPlugin"),Object.assign(f.style,SP);const g=new Ye.Subscribe;let p=new Image;p.src=jP;const m={points:[],origins:[],tags:[],template:"",events:{},render:zP,folded:!1,enabled:!0,forbidden:!0},v=new MP({target:f,props:{origins:m.origins}}),b=(le,he)=>{L(),he&&S()},w=()=>{m.forbidden&&(m.forbidden=!1,S())},x=(le,he)=>{if(m.tags.length===0)return;const ke=he.longitude-n.state.longitude,be=n.camera.clone();be.position.copy(he.offset),be.rotateOnWorldAxis(new P.Vector3(0,1,0),ke),be.updateProjectionMatrix(),be.updateMatrixWorld(!0);const We=new P.Frustum,Re=new P.Matrix4;Re.multiplyMatrices(be.projectionMatrix,be.matrixWorldInverse),We.setFromProjectionMatrix(Re),m.tags.forEach(Te=>{const He=be.position.clone().setY(i).distanceTo(Te.position);if(He<c||He>h||!We.containsPoint(Te.position))return Te.destroying=!0;const pe=Te.position.clone().sub(be.position).setY(0);if(pe.angleTo(Te.normal)>Math.PI/2-o&&pe.angleTo(Te.normal)<Math.PI/2+o)return Te.destroying=!0}),m.tags.forEach(Te=>{Te.destroying?Te.app.$set({contentZoom:.1+be.position.distanceTo(Te.position)/h,lineWidthZoom:.38*(.01+be.position.distanceTo(Te.position)/h),destroying:Te.destroying}):Te.app.$set({lineWidthZoom:.38*(.01+be.position.distanceTo(Te.position)/h),lineHeightZoom:.4+(be.position.distanceTo(Te.position)-c)/h*.6,contentZoom:.1+be.position.distanceTo(Te.position)/h})}),setTimeout(()=>{m.tags.forEach(Te=>{Te.destroying&&(Te.app.$destroy(),Te=null)}),m.tags=m.tags.filter(Te=>!Te.destroying),L()},1900)},E=le=>{le!==Ye.Five.Mode.Panorama&&!m.forbidden&&(v.$set({origins:[]}),m.tags.forEach(he=>{he.app.$destroy(),he=null}),m.origins=[],m.tags=[],m.forbidden=!0)},L=()=>{if(m.forbidden||!m.enabled)return;const le=n.camera,he=le.getWorldDirection(new P.Vector3);m.origins=m.tags.map(ke=>{const be=ke.position.clone().project(le),We=ke.position.clone().sub(le.position).setY(0).angleTo(he.setY(0))<Math.PI/2;return{id:ke.id,front:We,left:(be.x+1)/2*100,top:(-be.y+1)/2*100,destroying:ke.destroying}}),v.$set({origins:m.origins})},S=()=>{m.forbidden||!m.enabled||(m.timeoutId&&clearTimeout(m.timeoutId),m.timeoutId=setTimeout(()=>{m.timeoutId=void 0;const le=R();le.length&&(m.tags=m.tags.concat(le),L())},s))},R=()=>{const{clientWidth:le,clientHeight:he}=n.getElement(),ke=[],be=n.camera,We=new P.Frustum,Re=new P.Matrix4,Te=be.getWorldDirection(new P.Vector3);Re.multiplyMatrices(be.projectionMatrix,be.matrixWorldInverse),We.setFromProjectionMatrix(Re);const He=m.tags.filter(Le=>We.containsPoint(Le.position)&&!Le.destroying).length,pe=m.points.reduce((Le,Oe)=>{if(m.tags.find(ct=>Oe.id===ct.id&&!ct.destroying))return Le;const rt=be.position.clone().setY(i).distanceTo(Oe.position);if(rt<c||rt>h||!We.containsPoint(Oe.position))return Le;const st=Oe.position.clone().sub(be.position).setY(0);if(st.angleTo(Oe.normal)>Math.PI/2-o&&st.angleTo(Oe.normal)<Math.PI/2+o)return Le;const bt=Oe.position.clone().project(be);if(!m.tags.every(ct=>{if(ct.position.clone().sub(be.position).setY(0).angleTo(Te.setY(0))>Math.PI/2)return!0;const dt=ct.position.clone().project(be);return Math.sqrt(Math.pow((bt.x-dt.x)/2*le,2)+Math.pow((bt.y-dt.y)/2*he,2))>a}))return Le;const et={id:Oe.id,position:Oe.position,normal:Oe.normal,replacement:Oe.replacement,weight:Oe.weight,distance:rt};let tt;for(let ct=0,dt=Le.length;ct<dt;ct++){const Xt=Le[ct];if(et.weight>Xt.weight){tt=ct;break}if(et.distance<Xt.distance){tt=ct;break}}return tt!==void 0?Le.splice(tt,0,et):Le.push(et),Le},[]);for(let Le=0,Oe=pe.length;Le<Oe&&!(He+ke.length>=r);Le++){const rt=pe[Le];if(ke.find(tt=>rt.id===tt.id))continue;const st=rt.position.clone().project(be);if(!m.tags.concat(ke).every(tt=>{if(tt.position.clone().sub(be.position).setY(0).angleTo(Te.setY(0))>Math.PI/2)return!0;const ct=tt.position.clone().project(be);return Math.sqrt(Math.pow((st.x-ct.x)/2*le,2)+Math.pow((st.y-ct.y)/2*he,2))>a}))continue;const bt=new P.Raycaster(be.position.clone().setY(i),rt.position.clone().sub(be.position.clone().setY(i)).normalize(),0,rt.distance+Cm),[et]=m.intersectObjects?bt.intersectObjects(m.intersectObjects,!0):n.model.loaded?n.model.intersectRaycaster(bt):bt.intersectObjects(n.model.children,!0);if(et&&rt.distance-et.distance<Cm){const{position:tt,normal:ct,id:dt,replacement:Xt}=rt,Ls=new P.Plane().setFromNormalAndCoplanarPoint(ct,tt),fi=tt.clone().sub(be.position).cross(new P.Vector3(0,1,0)).setLength(ih),zi=[tt.clone(),tt.clone().add(fi),tt.clone().add(new P.Vector3(0,ih,0)).add(fi),tt.clone().add(new P.Vector3(0,ih,0))].map(Qi=>Ls.projectPoint(Qi,new P.Vector3)),{container:Ui,dispose:_t}=d.create3DDomContainer(zi)||{},Oi=new DP({target:Ui,props:{id:dt,content:m.render(m.template,Xt),lineWidthZoom:.38*(.01+be.position.distanceTo(tt)/h),lineHeightZoom:.4+(be.position.distanceTo(tt)-c)/h*.6,contentZoom:.1+be.position.distanceTo(tt)/h,upsideDown:tt.y>l,folded:m.folded,events:m.events,hooks:g,dispose:_t}});ke.push({position:tt,normal:ct,id:dt,app:Oi})}}return ke},z=le=>{m.points=le.points.map(he=>{var ke,be;return{id:he.id,position:new P.Vector3().fromArray(he.position),normal:new P.Vector3().fromArray(he.normal),replacement:(ke=he.replacement)!=null?ke:{},weight:(be=he.weight)!=null?be:-1}}),le.render&&(m.render=le.render),le.template&&(m.template=le.template),le.events&&(m.events=le.events),le.enabled===!1&&(m.enabled=le.enabled),le.folded===!0&&(m.folded=le.folded)},O=le=>{m.intersectObjects=le,S()},A=()=>{m.enabled=!0,S()},C=()=>{m.enabled=!1,v.$set({origins:[]}),m.tags.forEach(le=>{le.app.$destroy(),le=null}),m.origins=[],m.tags=[]},I=()=>{m.folded=!1,m.tags.forEach(le=>{le.app.$set({folded:m.folded})})},M=()=>{m.folded=!0,m.tags.forEach(le=>{le.app.$set({folded:m.folded})})},D=le=>{m.tags.forEach(he=>{he.id===le&&he.app.$set({folded:!1})})},T=le=>{m.tags.forEach(he=>{he.id===le&&he.app.$set({folded:!0})})},H=()=>{n.once("renderFrame",L)},W=()=>{e||(e=n.getElement().parentElement),e&&e.appendChild(f),m.forbidden=!1,i=n.model.bounding.getCenter(new P.Vector3).y,S(),n.on("panoWillArrive",x),n.on("panoArrived",w),n.on("modeChange",E),n.on("cameraUpdate",b)},J=()=>{p=null,d.disposeAll(),v.$destroy(),m.tags.forEach(le=>{le.app.$destroy(),le=null}),m.origins=[],m.tags=[],n.off("modelLoaded",W),n.off("renderFrame",L),n.off("panoWillArrive",x),n.off("panoArrived",w),n.off("modeChange",E),n.off("cameraUpdate",b),n.off("dispose",J),window.removeEventListener("resize",H,!1)};return window.addEventListener("resize",H,!1),(ce=n==null?void 0:n.model)!=null&&ce.loaded?W():n.once("modelLoaded",W),n.on("dispose",J),{load:z,setIntersectObjects:O,unfoldAll:I,foldAll:M,unfold:D,fold:T,enable:A,disable:C,hooks:g,dispose:J}};var ws=(n=>(n.SMALL="small",n.MIDLLE="middle",n.LARGE="large",n.EXTRA_LARGE="x-large",n))(ws||{}),nh={},BP={get exports(){return nh},set exports(n){nh=n}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var t={}.hasOwnProperty;function e(){for(var r="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(r=s(r,i(a)))}return r}function i(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return e.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var o="";for(var a in r)t.call(r,a)&&r[a]&&(o=s(o,a));return o}function s(r,o){return o?r?r+" "+o:r+o:r}n.exports?(e.default=e,n.exports=e):window.classNames=e})()})(BP);const ni=nh;function _P(n){De(n,"svelte-1wufped",".item-label-item.svelte-1wufped{position:absolute;z-index:0;transform:none;cursor:pointer;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:0}.item-label-item.visible.svelte-1wufped{opacity:1;animation:svelte-1wufped-fadeIn 0.3s ease-in}.item-label-item__text-wrap.svelte-1wufped::before{content:'';position:absolute;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.3);filter:blur(1rem);z-index:-1}.item-label-item__text-wrap.svelte-1wufped{padding:0.375rem 0.375rem 0;position:absolute;height:1.25rem;pointer-events:all;background-size:100% 100%;background-repeat:no-repeat;white-space:nowrap;line-height:0.625rem;font-size:0.6875rem;font-weight:bold;color:#ffeac0;transform:translate(-50%, 0);display:flex;justify-content:center;align-items:center}.item-label-item__text.svelte-1wufped{padding-bottom:0.25rem;border-top:0 solid;border-left:0 solid;border-right:0 solid;border-bottom:0.0625rem solid;-o-border-image:linear-gradient(to right, rgba(234, 208, 154, 0), rgba(234, 208, 154, 100), rgba(234, 208, 154, 0)) 4.5 1 4.5;border-image:linear-gradient(to right, rgba(234, 208, 154, 0), rgba(234, 208, 154, 100), rgba(234, 208, 154, 0)) 4.5 1 4.5}.item-label-item__bar.svelte-1wufped{position:absolute;bottom:0;width:0.0625rem;background-image:linear-gradient(to bottom, rgba(234, 208, 154, 0), rgba(234, 208, 154, 1))}@keyframes svelte-1wufped-fadeIn{from{opacity:0}to{opacity:1}}")}function RP(n){let t,e,i,s=(n[0].name.length>6?`${n[0].name.slice(0,6)}...`:n[0].name)+"",r,o,a,l,c,h;return{c(){t=U("div"),e=U("div"),i=U("span"),r=Ve(s),o=ae(),a=U("div"),y(i,"class","item-label-item__text svelte-1wufped"),y(e,"class","item-label-item__text-wrap svelte-1wufped"),Q(e,"top",`-${n[0].strokeLength+26}px`),y(a,"class","item-label-item__bar svelte-1wufped"),Q(a,"height",`${n[0].strokeLength}px`),y(t,"class",l=yt(ni("item-label-item",{visible:n[0].visible}))+" svelte-1wufped"),Q(t,"z-index",n[0].zIndex),Q(t,"transform",n[0].transform)},m(d,f){Y(d,t,f),V(t,e),V(e,i),V(i,r),V(t,o),V(t,a),c||(h=je(i,"click",n[1]),c=!0)},p(d,[f]){f&1&&s!==(s=(d[0].name.length>6?`${d[0].name.slice(0,6)}...`:d[0].name)+"")&&Ge(r,s),f&1&&Q(e,"top",`-${d[0].strokeLength+26}px`),f&1&&Q(a,"height",`${d[0].strokeLength}px`),f&1&&l!==(l=yt(ni("item-label-item",{visible:d[0].visible}))+" svelte-1wufped")&&y(t,"class",l),f&1&&Q(t,"z-index",d[0].zIndex),f&1&&Q(t,"transform",d[0].transform)},i:re,o:re,d(d){d&&X(t),c=!1,h()}}}function FP(n,t,e){let{itemLabel:i}=t,{hooks:s}=t;function r(){s.emit("onLabelClick",i)}return n.$$set=o=>{"itemLabel"in o&&e(0,i=o.itemLabel),"hooks"in o&&e(2,s=o.hooks)},[i,r,s]}let NP=class extends Me{constructor(t){super(),Ie(this,t,FP,RP,Pe,{itemLabel:0,hooks:2},_P)}};function Im(n,t=200){let e;return function(...i){clearTimeout(e),e=setTimeout(()=>{n(...i)},t)}}function GP(n){De(n,"svelte-f82itz",".item-labels-container.svelte-f82itz{width:100%;height:100%;position:relative}")}function Mm(n,t,e){const i=n.slice();return i[26]=t[e],i}function km(n,t){let e,i,s;return i=new NP({props:{itemLabel:t[26],hooks:t[0]}}),{key:n,first:null,c(){e=Ne(),Ae(i.$$.fragment),this.first=e},m(r,o){Y(r,e,o),ge(i,r,o),s=!0},p(r,o){t=r;const a={};o&2&&(a.itemLabel=t[26]),o&1&&(a.hooks=t[0]),i.$set(a)},i(r){s||(N(i.$$.fragment,r),s=!0)},o(r){Z(i.$$.fragment,r),s=!1},d(r){r&&X(e),ve(i,r)}}}function HP(n){let t,e=[],i=new Map,s,r,o=n[1];const a=l=>l[26].id;for(let l=0;l<o.length;l+=1){let c=Mm(n,o,l),h=a(c);i.set(h,e[l]=km(h,c))}return{c(){t=U("div");for(let l=0;l<e.length;l+=1)e[l].c();y(t,"class","item-labels-container svelte-f82itz"),pt(()=>n[9].call(t)),Q(t,"opacity",n[4]?1:0)},m(l,c){Y(l,t,c);for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(t,null);s=uc(t,n[9].bind(t)),r=!0},p(l,[c]){c&3&&(o=l[1],Ee(),e=yi(e,c,a,1,l,o,i,t,ln,km,null,Mm),xe()),c&16&&Q(t,"opacity",l[4]?1:0)},i(l){if(!r){for(let c=0;c<o.length;c+=1)N(e[c]);r=!0}},o(l){for(let c=0;c<e.length;c+=1)Z(e[c]);r=!1},d(l){l&&X(t);for(let c=0;c<e.length;c+=1)e[c].d();s()}}}let Em=26,WP=11;function UP(n,t,e){const{Raycaster:i,Vector3:s}=P;let{five:r}=t,{modelOcclusionEnable:o}=t,{itemLabels:a}=t,{hooks:l}=t,{displayStrategyType:c}=t,h=null,d=null,f,g,p=[],m=!0;const v=(M,D)=>{const T=new i,H=M.camera.position.clone(),W=new s().fromArray(D.modelPosition),J=W.distanceTo(H);T.set(H.clone(),W.clone().sub(H).normalize());const[te]=M.model.intersectRaycaster(T);return!(te&&te.distance+1<J)},b=(M,D)=>{const T=new s(D.modelPosition[0],D.modelPosition[1],D.modelPosition[2]),H=M.project2d(T),W=H==null?void 0:H.x,J=H==null?void 0:H.y;return[W,J]},w=M=>`translate(${M[0]}px, ${M[1]}px)`,x=(M,D)=>p.length===0?!1:!!p.find(H=>M[0]>=H[0]-D&&M[0]<=H[0]+D||M[1]>=H[1]-Em&&M[1]<=H[1]+Em);function E(M,D){switch(D){case ws.SMALL:return Math.ceil(-27.78*M+85);case ws.MIDLLE:return Math.ceil(-38.9*M+130);case ws.LARGE:return Math.ceil(-44.44*M+140);case ws.EXTRA_LARGE:return Math.ceil(-92.59*M+300)}}const L=(M,D)=>{const T=D.map(W=>{const J=b(M,W),te=W.name.length*WP,q=E(W.modelPosition[1],c),se=(o?v(M,W):!0)&&!x([J[0],J[1]+q],te);if(!se)return fe(F({},W),{visible:se});p.push(J);const ue=w(J);return fe(F({},W),{visible:se,transform:ue,strokeLength:q})}),H=T.filter(({visible:W})=>W).map(W=>({itemLabelItem:W,distance:new s(W.modelPosition[0],W.modelPosition[1],W.modelPosition[2]).clone().distanceTo(M.camera.position)})).sort((W,J)=>W.distance-J.distance);return T.map(W=>{const J=H.findIndex(te=>te.itemLabelItem.id===W.id);return J!==void 0?fe(F({},W),{zIndex:J*10}):W})},S=()=>{p=[],e(1,d=L(r,d))};zu(()=>{A()});const R=()=>{e(4,m=!1),z()};zt(()=>{e(1,d=a),h=a,S(),O(),r.on("cameraUpdate",R)});const z=Im(()=>{e(4,m=!0),S()},300),O=()=>{window.addEventListener("resize",C,!1)},A=()=>{h!==a&&(e(1,d=a),h=a,S())},C=()=>{r.once("renderFrame",S)};ti(()=>{r.off("cameraUpdate",R),window.removeEventListener("resize",C,!1)});function I(){f=this.clientWidth,g=this.clientHeight,e(2,f),e(3,g)}return n.$$set=M=>{"five"in M&&e(5,r=M.five),"modelOcclusionEnable"in M&&e(6,o=M.modelOcclusionEnable),"itemLabels"in M&&e(7,a=M.itemLabels),"hooks"in M&&e(0,l=M.hooks),"displayStrategyType"in M&&e(8,c=M.displayStrategyType)},[l,d,f,g,m,r,o,a,c,I]}let QP=class extends Me{constructor(t){super(),Ie(this,t,UP,HP,Pe,{five:5,modelOcclusionEnable:6,itemLabels:7,hooks:0,displayStrategyType:8},GP)}};function XP(n){return n.model_item_labels.map(t=>F({modelPosition:[t.position[0],t.position[1]+t.size[1],t.position[2]]},t))}const YP=(n,t)=>{var f,g;const e={container:document.createElement("div"),data:null,enabled:!0,fiveModeEnabled:void 0,itemLabels:[],wrapper:null,app:void 0,hooks:new Ye.Subscribe,modelOcclusionEnable:(f=t==null?void 0:t.modelOcclusionEnable)!=null?f:!0,displayStrategyType:(g=t==null?void 0:t.displayStrategyType)!=null?g:ws.SMALL};e.container.setAttribute("class","model-item-label-plugin-container"),e.container.style.cssText=`
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        z-index: 5;
    `,e.container.style.pointerEvents="none";const i=p=>(e.wrapper=p,p.appendChild(e.container),l(),!0),s=p=>{e.itemLabels=XP(p),l()},r=()=>(e.enabled||(e.enabled=!0,l()),!0),o=()=>(e.enabled&&(e.enabled=!1,l()),!0),a=()=>{h(),e.container.remove()},l=()=>{var p;if(e.wrapper){if(!e.enabled||!e.fiveModeEnabled){(p=e.app)==null||p.$destroy(),e.app=void 0;return}e.app?e.app.$set({five:n,itemLabels:e.itemLabels}):e.app=new QP({target:e.container,props:{five:n,modelOcclusionEnable:e.modelOcclusionEnable,itemLabels:e.itemLabels,hooks:e.hooks,displayStrategyType:e.displayStrategyType}})}},c=()=>{n.on("modeChange",d),n.once("dispose",a)},h=()=>{n.off("modeChange",d)},d=p=>{if(e.enabled){if(p!==Ye.Five.Mode.Floorplan){e.fiveModeEnabled=!1,l();return}n.once("initAnimationEnded",()=>{e.fiveModeEnabled=n.currentMode===Ye.Five.Mode.Floorplan,l()})}};return c(),{appendTo:i,load:s,enable:r,disable:o,dispose:a,hooks:e.hooks}},ZP={name:"ModelItemLabelPlugin",version:0};var fr=(n=>(n.TOP_LEFT="topLeft",n.TOP_RIGHT="topRight",n.BOTTOM_LEFT="bottomLeft",n.BOTTOM_RIGHT="bottomRight",n))(fr||{});function JP(n){if(n.length===0)return[];if(Array.isArray(n[0]))return n;let t=[];return n.forEach(e=>{const i=[e[fr.TOP_LEFT],e[fr.BOTTOM_LEFT],e[fr.BOTTOM_RIGHT],e[fr.TOP_RIGHT]];t.push(i)}),t}const qP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKqADAAQAAAABAAAAKgAAAADUGqULAAAB0ElEQVRYCe2WSUoEQRBFLVHEiVZU1I03cKW38SSewRt4A5fiTty5cQIFR9pZQWkcUNSe2/Z9yISiSGxRkUAy4BGZSVX168gistraYsQKxArECsQKxApYqkDyU5lmsznMM+ZgAGpQhaUkSRbINgLJCXiCBtSgAkVYtGGIBTKj8AgKSVahDNvQa0IUkUG4Bx91BpLdBTOS/cgUIB3a+gMwI9mFzE3a0I3z5B4r292JzGVA8tSSZILMcUDyzIykthOZvYDk+V9Ktmz4yGzhOhV4/+5YU4N/hzqo0StX3Fg5TcnNlYvgs8bPsM4hkScHoyO46haRnGEYktQVI+4ypUYKyXtxyUu27JCceAMJvjo0HoM5CEZ7cPX7i013q3IWVV5r2aw/2TK+svWbPGU68KQCa6pYeus1V0X99quSfvtVSc39lmfz2mdbz32tg1dAJ0421AVs9E7/FxBSezrMmjI/gm5/nYmMkBq+TqBs7LNgTlZH6EnWlPmORdk+pHQipUNfTxtg7p3NIXWRMvXfoqusmXsNhpC6crIS1Zf9C6yAOdlxpK5BW18CiT7A/G93gE+P0FY/RoO+RWqS62YhB2r4YhlixArECsQKxArECvzjCnwAOr0wF44ggHAAAAAASUVORK5CYII=",sh="data:image/png;base64,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",rh="data:image/png;base64,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",KP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAABcVBMVEUAAAAAAAD////////+/v45OTn////////39/fp6enPz8/7+/vw8PD+/v7x8fHc3NzHx8f////////+/v77+/vr6+v////7+/v5+fn////z8/P////////q6uqgoKD+/v79/f3m5ub+/v7////////////////39/f39/f////z8/P////t7e3s7Oz29vb////5+fn////h4eH////g4ODV1dX////////BwcH///////////+Ojo5zc3MlJSX////////////////////////7+/v////////////v7+/u7u7n5+f////39/f////09PT6+vr09PT+/v76+vr////5+fnv7+/09PTk5OT////////////////Jycn///++vr7///////+0tLT///9TU1P///8SEhL////////+/v76+vr////8/Pz39/ft7e3t7e36+vr////////X19fV1dX///+xsbF9fX1iYmL///////+K8mOEAAAAenRSTlMaAIDy8CD41cWRX9uk7Kl1VVEw6dWT/M/NvKyVkY475eWIgx0Z39rHv7axnZyZmIuKhn56emZjX1FEPTU0Kx4PCAX69fTgxcKkopWL7crJuri2sa6rnIyHhX54bVtZVU9NSUcsJSIcFROno6Hcwp+ekHVxbWhnRC8nDLc9s8oAAAOGSURBVEjHpdd3X9pAGAfwkBBDAoQmBJmWvUWWiIDIHoJb66x7a4d78Op7pBQ1J5DY33987vnyXEIu3CGy/0hvnDthM+l0hj3JScSudDKOdhNPpl1i8Ut624Gi6+trI3zW1tcdqGM7/SIC5/ZRR2SNJEm7JkHt7FAJjR18WIs40P3cAFxIOaIRna6ZOHxGunk+TDR1ukjUkSr0w86bcKShiz1OI4JMP8YAD9+4emM2Gm407IfIhzm0NxrhKNsLH4SvQ+RktyvUfZIMXYcPPsSFCcvY6EYW6ZPsxuiYZaLwAW5bDY70Da5paxjvm8d+UcjAUL/GzPtCnDF/mwFWhJ75Zs68x05gxxFRGQfa+RYXokHVCC4O4yOqYLTwBjNB+ncWEZnsbzrIvOLz4CW9g4jODn0ZPO/iZN0UmhaPp0Omq+Q/nLu6NO0hErJnurjKdTBzEdAhkqILXDAdbFkJ7EnDe4EVy198srpiwhE4X1RKDFOqviBwcNPK6gmPmeWlGDz+VdHqRPEVHo0tLTM8RpcX4G+flLe6kU/Cs1pYRnm8uriQhfoC+0ZDvbMLi6ttfO5fDCDCKFrvooAKAov+c4BZvy8EzaolCHRdIZ+fBThl9G0Ih1RCrBJWbPiMKYAZ409oMSqFWAktzJ9GBuDvRoVGOIQJMSas0CiM39u45v0M9tbaeLc6F5M+7dhcbRfgg+pcU/oNa85VDwDOzBtmpP9UKsN8BuCzeb1P+kPi08+fASyr6fVPUh/PJ72+xj/bZk5PSV0YlJ4z83iC4EipS5LkiAkeHxGcQerLwMARRzyW+QklhUgKpST8nXfYg+fHkjS89MPz0MFnhKdCSWpc8RBnPAZB3RUvLt7i3oob7f5juDzuikY81tjcHlcHg9xabdyUWDvF2ay3slecr1ptimNx9lhhs1bzXQxy5NZa6VMx9pS2Wt1H77cVjFartYvBdlDICDc0cbVa3Twd2NcOyuLwVqo+K1ebjgdcr0k+O1uXwThfl8vlhqm+99kASup5GINsYhhmG8d7UXzcBgo2e21cd9WlUll5/7G958ql8uxu7y0zS5SGSkOGBA51TRiGQAi232Y9v4kVQZGavpt6c6l3tLpNsc38gGOC01IeLg4Xi8NaLz1KkqO0VzvcTrFscYo4oLjiRAsKEXeJPRqxW0bsFWLGLVbiocyZSm5vbW0nU9BsIfyp/AGqAvfOkBaFawAAAABJRU5ErkJggg==",$P=(n,{videoElement:t})=>{const e={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:t},i=Qr(n),s=new Map,r=b=>{e.videoTexture&&(e.videoTexture.image.muted=b)},o=()=>e.videoTexture?e.videoTexture.image.muted:!0,a=()=>{if(e.enabled||!e.videoTexture)return;e.enabled=!0,e.videoMeshes=c(),e.videoMeshes.forEach(w=>n.scene.add(w));const b=()=>{if(!e.videoTexture)return;const w=()=>{var x;e.videoTexture&&((x=e.videoTexture)==null||x.image.removeEventListener("timeupdate",w),e.videoTextureEnabled=!0,e.videoMeshes.forEach(E=>{E.material.map!==e.videoTexture&&(E.material.map=e.videoTexture)}),n.needsRender=!0)};e.videoTexture.image.addEventListener("timeupdate",w),e.videoTexture&&e.videoMeshes.length&&(e.videoTexture.image.play(),e.videoTexture.image.onplay=()=>{i.hide()},e.videoTexture.image.onpause=()=>{i.show()},e.videoTexture.image.onclick=()=>{e.videoTexture.image.muted=!1,e.videoTexture.image.play()})};if(n.model.loaded)b();else return n.once("modelLoaded",()=>b())},l=()=>{e.enabled&&(e.enabled=!1,e.videoMeshes.forEach(b=>{b.geometry.dispose(),b.material.dispose(),n.scene.remove(b),e.videoTexture&&e.videoTexture.image.pause()}),e.videoMeshes=[],n.needsRender=!0)},c=()=>e.rectPoints.map((b,w)=>{const x=new P.BufferGeometry,E=128,L=[];L.push(...b[0].toArray());for(let I=1;I<E;I++)L.push(b[0].x+(b[1].x-b[0].x)*I/E,b[0].y+(b[1].y-b[0].y)*I/E,b[0].z+(b[1].z-b[0].z)*I/E);L.push(...b[1].toArray()),L.push(...b[2].toArray());for(let I=1;I<E;I++)L.push(b[2].x+(b[3].x-b[2].x)*I/E,b[2].y+(b[3].y-b[2].y)*I/E,b[2].z+(b[3].z-b[2].z)*I/E);L.push(...b[3].toArray());const S=[];S.push(0,1);for(let I=1;I<E;I++)S.push(0,1-I/E);S.push(0,0),S.push(1,0);for(let I=1;I<E;I++)S.push(1,I/E);S.push(1,1);const R=[];for(let I=0;I<E;I++)R.push(I,I+1,E*2-I,I,E*2-I,E*2+1-I);x.setAttribute("position",new P.BufferAttribute(new Float32Array(L),3)),x.setAttribute("uv",new P.BufferAttribute(new Float32Array(S),2)),x.setIndex(new P.BufferAttribute(new Uint32Array(R),1));const z=new P.MeshBasicMaterial({map:e.videoTextureEnabled?e.videoTexture:e.imageTexture,side:P.DoubleSide}),O=new P.Mesh(x,z);O.renderOrder=1,O.name=`ModelTVVideoPlugin-${w}-${performance.now()}`;const A=[b[1],b[2],b[3],b[0]],C=i.create3DDomContainer(A);if(C!=null&&C.container){const I=document.createElement("div");I.classList.add("play-icon"),I.style.width="100%",I.style.height="100%",I.style.display="flex",I.style.justifyContent="center",I.style.alignItems="center",I.style.pointerEvents="none",C.container.appendChild(I);const M=document.createElement("img");M.src=sh,M.style.width="200px",M.style.pointerEvents="auto",M.onclick=()=>{e.videoTexture.image.muted=!1,e.videoTexture.image.play()},I.appendChild(M),s.set(O,C)}return O}),h=b=>{const w=new P.TextureLoader().load(b);return w.minFilter=P.LinearFilter,w.magFilter=P.LinearFilter,w.format=P.RGBFormat,w},d=(b,w)=>{let x=w;return new Promise((E,L)=>{const S=new XMLHttpRequest;S.onreadystatechange=()=>{if(S.readyState===4)if(S.status===200){const R=window.URL||window.webkitURL;x=x||document.createElement("video"),x.crossOrigin="anonymous",x.muted=!0,x.loop=!0,x.playsInline=!0,x.src=R.createObjectURL(S.response);const z=new P.VideoTexture(x);z.minFilter=P.LinearFilter,z.magFilter=P.LinearFilter,z.format=P.RGBFormat,E(Object.assign(z,{videoSource:b}))}else L(new Error("Video download Error: "+S.status))},S.onerror=R=>L(R),S.open("GET",b),S.responseType="blob",S.send()})},f=(b,w)=>ee(this,null,function*(){const{video_src:x,video_poster_src:E,points:L}=b;e.videoSource=x,e.rectPoints=JP(L).map(S=>S.map(({x:R,y:z,z:O})=>new P.Vector3(R,z,O))),e.imageTexture=h(E),w&&(e.videoElement=w),e.videoTexture=yield d(e.videoSource,e.videoElement),e.enabled=!!b.enable,e.enabled&&a()}),g=b=>{if(!e.enabled)return;const w=e.videoMeshes;if(!(!w||b.intersectObjects(w).length===0))return e.videoTexture&&(e.videoTexture.image.paused||e.videoTexture.image.pause()),!1},p=b=>{b==="Floorplan"?i.hide():i.show()},m=()=>{if(!e.enabled)return;const b=n.camera.position;if(s.forEach((w,x)=>{const E=w.css3DObject.position.clone(),L=E.clone().sub(b).normalize(),S=new P.Raycaster(b,L),R=n.model.intersectRaycaster(S)[0],z=E.distanceTo(b),O=.01;R&&R.distance+O<z?w.hide():w.show()}),!o()){const w=e.rectPoints.find(x=>{const E=x[0].clone().add(x[1]).add(x[2]).add(x[3]).divideScalar(4);return x.map(L=>L.clone().add(E).divideScalar(2)).filter(L=>{const S=L.distanceTo(b),R=new P.Raycaster(b,L.clone().sub(b).normalize()),z=n.model.intersectRaycaster(R)[0],O=.01;return!(z&&z.distance+O<S)}).length>=2});(!w||w.length===0)&&r(!0)}},v=()=>{l(),e.videoTexture=void 0,n.off("modeChange",p),n.off("wantsTapGesture",g),n.off("panoArrived",m),n.off("renderFrame",()=>{e.videoMeshes.forEach(b=>{b&&(b.needsRender=!0)})})};return n.on("modeChange",p),n.on("wantsTapGesture",g),n.on("panoArrived",m),n.on("renderFrame",()=>{e.videoMeshes.forEach(b=>{b&&(b.needsRender=!0)})}),{enable:a,disable:l,load:f,dispose:v,state:e,css3DRenderPlugin:i}};var Ps=(n=>(n.SMALL="small",n.MIDLLE="middle",n.LARGE="large",n.EXTRA_LARGE="x-large",n))(Ps||{});function eC(n){De(n,"svelte-1jhufeh",`.item-label-item.svelte-1jhufeh.svelte-1jhufeh{position:absolute;z-index:0;transform:none;cursor:pointer;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;animation:svelte-1jhufeh-fadeIn .3s ease-in}.item-label-item.fold.svelte-1jhufeh>.item-label-item__text-wrap.svelte-1jhufeh{visibility:hidden}.item-label-item.fold.svelte-1jhufeh>.item-label-item__bar.anchor.svelte-1jhufeh{visibility:hidden}.item-label-item.fold.svelte-1jhufeh>.item-label-item__bar.anchor.svelte-1jhufeh:after{visibility:visible}.item-label-item__text-wrap.svelte-1jhufeh.svelte-1jhufeh{height:-moz-fit-content;height:fit-content;padding:0.75rem 1.25rem 0.75rem 0.75rem;position:absolute;width:-moz-max-content;width:max-content;max-width:29.5625rem;min-height:5.75rem;background-image:linear-gradient(269deg, rgba(0, 0, 0, 0.50) 0%, rgba(0, 0, 0, 0.60) 49%, rgba(31, 38, 46, 0.70) 100%);border:0.09375rem solid rgba(255, 255, 255, .65);border-radius:0.1875rem;color:white;transform:translate(-50%, 0);display:flex;justify-content:flex-start;align-items:center;box-sizing:border-box;overflow:hidden;pointer-events:all}.item-label-item__custom.svelte-1jhufeh.svelte-1jhufeh{padding:0;max-width:unset;min-height:unset;background-image:unset;border:0;border-radius:0}.icon-wrap.svelte-1jhufeh.svelte-1jhufeh{width:4.25rem;height:100%;display:flex;justify-content:center;align-content:center}.icon.svelte-1jhufeh.svelte-1jhufeh{width:4.25rem;height:4.25rem;background-repeat:no-repeat;background-size:contain;background-position:center}.item-label-text.svelte-1jhufeh.svelte-1jhufeh{margin-left:0.75rem;padding-left:0.75rem;min-height:4.25rem;height:auto;display:flex;flex-flow:column;justify-content:space-around;align-content:flex-start;border-left:solid rgba(255, 255, 255, .2) 0.0625rem;border-top:solid rgba(255, 255, 255, .2) 0;border-right:solid rgba(255, 255, 255, .2) 0;border-bottom:solid rgba(255, 255, 255, .2) 0;pointer-events:auto}.item-model.svelte-1jhufeh.svelte-1jhufeh{white-space:nowrap;font-size:1.375rem;font-weight:bold;line-height:1.875rem}.item-name.svelte-1jhufeh.svelte-1jhufeh{height:auto;word-wrap:break-word;word-break:break-all;font-size:1.25rem;line-height:1.75rem}.item-label-item__bar.svelte-1jhufeh.svelte-1jhufeh{position:absolute;bottom:0;width:0.1875rem;background-image:linear-gradient(to bottom, white, rgba(255, 255, 255, 0));box-shadow:0 0.125rem 0.5rem 0 rgba(0, 0, 0, 0.20);pointer-events:none}.item-label-item__bar.anchor.svelte-1jhufeh.svelte-1jhufeh:after{content:'';position:absolute;bottom:0;width:1.5rem;height:1.5rem;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAABcVBMVEUAAAAAAAD////////+/v45OTn////////39/fp6enPz8/7+/vw8PD+/v7x8fHc3NzHx8f////////+/v77+/vr6+v////7+/v5+fn////z8/P////////q6uqgoKD+/v79/f3m5ub+/v7////////////////39/f39/f////z8/P////t7e3s7Oz29vb////5+fn////h4eH////g4ODV1dX////////BwcH///////////+Ojo5zc3MlJSX////////////////////////7+/v////////////v7+/u7u7n5+f////39/f////09PT6+vr09PT+/v76+vr////5+fnv7+/09PTk5OT////////////////Jycn///++vr7///////+0tLT///9TU1P///8SEhL////////+/v76+vr////8/Pz39/ft7e3t7e36+vr////////X19fV1dX///+xsbF9fX1iYmL///////+K8mOEAAAAenRSTlMaAIDy8CD41cWRX9uk7Kl1VVEw6dWT/M/NvKyVkY475eWIgx0Z39rHv7axnZyZmIuKhn56emZjX1FEPTU0Kx4PCAX69fTgxcKkopWL7crJuri2sa6rnIyHhX54bVtZVU9NSUcsJSIcFROno6Hcwp+ekHVxbWhnRC8nDLc9s8oAAAOGSURBVEjHpdd3X9pAGAfwkBBDAoQmBJmWvUWWiIDIHoJb66x7a4d78Op7pBQ1J5DY33987vnyXEIu3CGy/0hvnDthM+l0hj3JScSudDKOdhNPpl1i8Ut624Gi6+trI3zW1tcdqGM7/SIC5/ZRR2SNJEm7JkHt7FAJjR18WIs40P3cAFxIOaIRna6ZOHxGunk+TDR1ukjUkSr0w86bcKShiz1OI4JMP8YAD9+4emM2Gm407IfIhzm0NxrhKNsLH4SvQ+RktyvUfZIMXYcPPsSFCcvY6EYW6ZPsxuiYZaLwAW5bDY70Da5paxjvm8d+UcjAUL/GzPtCnDF/mwFWhJ75Zs68x05gxxFRGQfa+RYXokHVCC4O4yOqYLTwBjNB+ncWEZnsbzrIvOLz4CW9g4jODn0ZPO/iZN0UmhaPp0Omq+Q/nLu6NO0hErJnurjKdTBzEdAhkqILXDAdbFkJ7EnDe4EVy198srpiwhE4X1RKDFOqviBwcNPK6gmPmeWlGDz+VdHqRPEVHo0tLTM8RpcX4G+flLe6kU/Cs1pYRnm8uriQhfoC+0ZDvbMLi6ttfO5fDCDCKFrvooAKAov+c4BZvy8EzaolCHRdIZ+fBThl9G0Ih1RCrBJWbPiMKYAZ409oMSqFWAktzJ9GBuDvRoVGOIQJMSas0CiM39u45v0M9tbaeLc6F5M+7dhcbRfgg+pcU/oNa85VDwDOzBtmpP9UKsN8BuCzeb1P+kPi08+fASyr6fVPUh/PJ72+xj/bZk5PSV0YlJ4z83iC4EipS5LkiAkeHxGcQerLwMARRzyW+QklhUgKpST8nXfYg+fHkjS89MPz0MFnhKdCSWpc8RBnPAZB3RUvLt7i3oob7f5juDzuikY81tjcHlcHg9xabdyUWDvF2ay3slecr1ptimNx9lhhs1bzXQxy5NZa6VMx9pS2Wt1H77cVjFartYvBdlDICDc0cbVa3Twd2NcOyuLwVqo+K1ebjgdcr0k+O1uXwThfl8vlhqm+99kASup5GINsYhhmG8d7UXzcBgo2e21cd9WlUll5/7G958ql8uxu7y0zS5SGSkOGBA51TRiGQAi232Y9v4kVQZGavpt6c6l3tLpNsc38gGOC01IeLg4Xi8NaLz1KkqO0VzvcTrFscYo4oLjiRAsKEXeJPRqxW0bsFWLGLVbiocyZSm5vbW0nU9BsIfyp/AGqAvfOkBaFawAAAABJRU5ErkJggg==');background-position:center;background-size:contain;transform:translate(-0.65625rem, 50%)}@keyframes svelte-1jhufeh-fadeIn{from{opacity:0
        }to{opacity:1
        }}`)}function tC(n){let t,e,i,s=(n[0].code||n[0].id)+"",r,o,a,l=n[0].name+"",c,h=n[0].icon&&xm(n);return{c(){h&&h.c(),t=ae(),e=U("div"),i=U("span"),r=Ve(s),o=ae(),a=U("span"),c=Ve(l),y(i,"class","item-model svelte-1jhufeh"),y(a,"class","item-name svelte-1jhufeh"),y(e,"class","item-label-text svelte-1jhufeh")},m(d,f){h&&h.m(d,f),Y(d,t,f),Y(d,e,f),V(e,i),V(i,r),V(e,o),V(e,a),V(a,c)},p(d,f){d[0].icon?h?h.p(d,f):(h=xm(d),h.c(),h.m(t.parentNode,t)):h&&(h.d(1),h=null),f&1&&s!==(s=(d[0].code||d[0].id)+"")&&Ge(r,s),f&1&&l!==(l=d[0].name+"")&&Ge(c,l)},d(d){h&&h.d(d),d&&X(t),d&&X(e)}}}function iC(n){let t;return{c(){t=U("div")},m(e,i){Y(e,t,i),n[6](t)},p:re,d(e){e&&X(t),n[6](null)}}}function xm(n){let t,e,i,s,r;return{c(){t=U("div"),e=U("div"),y(e,"class","icon svelte-1jhufeh"),y(e,"style",i=`background-image: url(${n[0].icon})`),y(t,"class","icon-wrap svelte-1jhufeh")},m(o,a){Y(o,t,a),V(t,e),s||(r=je(t,"click",n[7]),s=!0)},p(o,a){a&1&&i!==(i=`background-image: url(${o[0].icon})`)&&y(e,"style",i)},d(o){o&&X(t),s=!1,r()}}}function nC(n){let t,e,i,s,r,o,a,l,c,h;function d(p,m){return m&1&&(i=null),i==null&&(i=typeof p[0].render=="function"),i?iC:tC}let f=d(n,-1),g=f(n);return{c(){t=U("div"),e=U("div"),g.c(),r=ae(),o=U("div"),y(e,"class",s=yt(ni("item-label-item__text-wrap",{"item-label-item__custom":typeof n[0].render=="function"}))+" svelte-1jhufeh"),Q(e,"bottom",`${n[0].strokeLength}px`),y(o,"class",a=yt(ni("item-label-item__bar",{anchor:n[1]}))+" svelte-1jhufeh"),Q(o,"height",`${n[0].strokeLength}px`),y(t,"class",l=yt(ni("item-label-item",{fold:n[0].isFold}))+" svelte-1jhufeh"),Q(t,"z-index",n[0].zIndex),Q(t,"transform",n[0].transform)},m(p,m){Y(p,t,m),V(t,e),g.m(e,null),V(t,r),V(t,o),c||(h=je(e,"click",n[4]),c=!0)},p(p,[m]){f===(f=d(p,m))&&g?g.p(p,m):(g.d(1),g=f(p),g&&(g.c(),g.m(e,null))),m&1&&s!==(s=yt(ni("item-label-item__text-wrap",{"item-label-item__custom":typeof p[0].render=="function"}))+" svelte-1jhufeh")&&y(e,"class",s),m&1&&Q(e,"bottom",`${p[0].strokeLength}px`),m&2&&a!==(a=yt(ni("item-label-item__bar",{anchor:p[1]}))+" svelte-1jhufeh")&&y(o,"class",a),m&1&&Q(o,"height",`${p[0].strokeLength}px`),m&1&&l!==(l=yt(ni("item-label-item",{fold:p[0].isFold}))+" svelte-1jhufeh")&&y(t,"class",l),m&1&&Q(t,"z-index",p[0].zIndex),m&1&&Q(t,"transform",p[0].transform)},i:re,o:re,d(p){p&&X(t),g.d(),c=!1,h()}}}function sC(n,t,e){let{itemLabel:i}=t,{hooks:s}=t,{anchorEnabled:r}=t,{onIconClick:o}=t;function a(){s.emit("onLabelClick",i)}let l;function c(d){Je[d?"unshift":"push"](()=>{l=d,e(3,l)})}const h=d=>o(i);return n.$$set=d=>{"itemLabel"in d&&e(0,i=d.itemLabel),"hooks"in d&&e(5,s=d.hooks),"anchorEnabled"in d&&e(1,r=d.anchorEnabled),"onIconClick"in d&&e(2,o=d.onIconClick)},n.$$.update=()=>{if(n.$$.dirty&9&&typeof i.render=="function"&&l&&l.children.length===0){const d=i.render(i);d&&l.appendChild(d)}},[i,r,o,l,a,s,c,h]}class rC extends Me{constructor(t){super(),Ie(this,t,sC,nC,Pe,{itemLabel:0,hooks:5,anchorEnabled:1,onIconClick:2},eC)}}const{Raycaster:oC,Vector3:QE}=P,Dm=(n,t,e,i)=>{const s=t.clone().sub(e).normalize(),r=new oC;r.set(e,s);const[o]=n.model.intersectRaycaster(r);return o&&o.distance+.01<i},aC=(n,t)=>{switch(t){case Ps.SMALL:return Math.ceil(-27.78*n+85);case Ps.MIDLLE:return Math.ceil(-38.9*n+130);case Ps.LARGE:return Math.ceil(-44.44*n+140);case Ps.EXTRA_LARGE:return Math.ceil(-92.59*n+300)}},lC=n=>`translate(${n[0]}px, ${n[1]}px)`;function Sm(n){return n.map(t=>F({observerIndex:void 0,visible:!1,isFold:!1},t))}function cC(n){De(n,"svelte-f82itz",".item-labels-container.svelte-f82itz{width:100%;height:100%;position:relative}")}function Lm(n,t,e){const i=n.slice();return i[29]=t[e],i}function Tm(n){let t,e;return t=new rC({props:{itemLabel:n[29],hooks:n[0],anchorEnabled:n[2],onIconClick:n[6]}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s[0]&2&&(r.itemLabel=i[29]),s[0]&1&&(r.hooks=i[0]),s[0]&4&&(r.anchorEnabled=i[2]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function zm(n,t){let e,i,s,r=t[29].visible&&Tm(t);return{key:n,first:null,c(){e=Ne(),r&&r.c(),i=Ne(),this.first=e},m(o,a){Y(o,e,a),r&&r.m(o,a),Y(o,i,a),s=!0},p(o,a){t=o,t[29].visible?r?(r.p(t,a),a[0]&2&&N(r,1)):(r=Tm(t),r.c(),N(r,1),r.m(i.parentNode,i)):r&&(Ee(),Z(r,1,1,()=>{r=null}),xe())},i(o){s||(N(r),s=!0)},o(o){Z(r),s=!1},d(o){o&&X(e),r&&r.d(o),o&&X(i)}}}function hC(n){let t,e=[],i=new Map,s,r,o=n[1];const a=l=>l[29].id;for(let l=0;l<o.length;l+=1){let c=Lm(n,o,l),h=a(c);i.set(h,e[l]=zm(h,c))}return{c(){t=U("div");for(let l=0;l<e.length;l+=1)e[l].c();y(t,"class","item-labels-container svelte-f82itz"),pt(()=>n[12].call(t)),Q(t,"opacity",n[5]?1:0)},m(l,c){Y(l,t,c);for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(t,null);s=uc(t,n[12].bind(t)),r=!0},p(l,c){c[0]&71&&(o=l[1],Ee(),e=yi(e,c,a,1,l,o,i,t,ln,zm,null,Lm),xe()),c[0]&32&&Q(t,"opacity",l[5]?1:0)},i(l){if(!r){for(let c=0;c<o.length;c+=1)N(e[c]);r=!0}},o(l){for(let c=0;c<e.length;c+=1)Z(e[c]);r=!1},d(l){l&&X(t);for(let c=0;c<e.length;c+=1)e[c].d();s()}}}let dC=11;function uC(n,t,e){const{Vector3:i}=P;let{five:s}=t,{modelOcclusionEnable:r}=t,{itemLabels:o}=t,{hooks:a}=t,{displayStrategyType:l}=t,{maxVisibleDistance:c}=t,h=null,d=null,f=(s==null?void 0:s.currentMode)===Ye.Five.Mode.Panorama,g,p,m=[],v=!0;const b=(D,T)=>{const H=D.camera.position.clone(),W=new i(T.modelPosition[0],T.modelPosition[1],T.modelPosition[2]),J=W.distanceTo(H);return c!==void 0&&D.state.mode===Ye.Five.Mode.Panorama&&J>c?!1:Dm(D,W.clone().sub(H).normalize(),H,J)},w=D=>{const{camera:T,model:H}=s,{x:W,y:J,z:te}=D.clone().project(T),q=(W+1)/2,ne=(2-(J+1))/2;return!!(Math.abs(te)<1&&[q,ne].every(Ce=>Ce<1&&Ce>=0))},x=(D,T)=>{const H=new i(T.modelPosition[0],T.modelPosition[1],T.modelPosition[2]),W=D.project2d(H),J=W==null?void 0:W.x,te=W==null?void 0:W.y;return[J,te]},E=(D,T)=>{const H=T.map(J=>{if(D.state.panoIndex!==J.panoIndex)return fe(F({},J),{visible:!1});const te=x(D,J);J.name.length*dC;const q=aC(J.modelPosition[1],l),ne=D.currentMode===Ye.Five.Mode.Panorama?w(new i(J.position[0],J.position[1],J.position[2])):!0,se=r?b(D,J):!1,ue=ne&&!se;if(!ue)return fe(F({},J),{visible:ue});m.push(te);const ze=lC(te);return fe(F({},J),{visible:ue,transform:ze,strokeLength:q})}),W=H.filter(({visible:J})=>J).map(J=>({itemLabelItem:J,distance:new i(J.modelPosition[0],J.modelPosition[1],J.modelPosition[2]).clone().distanceTo(D.camera.position)})).sort((J,te)=>J.distance-te.distance);return H.map(J=>{const te=W.findIndex(q=>q.itemLabelItem.id===J.id);return te!==void 0?fe(F({},J),{zIndex:te*10}):J})},L=()=>{m=[],e(1,d=E(s,d))},S=()=>{e(5,v=!1),R()},R=Im(()=>{e(5,v=!0),L()},300),z=()=>{s.once("renderFrame",L)},O=()=>{window.addEventListener("resize",z,!1)},A=()=>{h!==o&&(e(1,d=Sm(o)),h=o,L())},C=(D,T)=>{let H=[];for(const{position:J,panoIndex:te}of T){const q=D.distanceTo(J);(c===void 0||q<=c||s.state.mode!==Ye.Five.Mode.Panorama)&&H.push({panoIndex:te,obVector:J,distance:q})}H=H.sort((J,te)=>J.distance-te.distance);let W;for(const J of H){const{obVector:te,distance:q,panoIndex:ne}=J;if(!Dm(s,D,te,q)){W=ne;break}}return typeof W=="number"?T[W]:void 0},I=D=>{if(s.state.mode===Ye.Five.Mode.Panorama)return;const T=s.work.observers,H=new i().fromArray(D.position),W=C(H,T);if(W&&(D.observerIndex=W.panoIndex),typeof D.observerIndex=="number"){const J=T[D.observerIndex],te=H.clone().sub(J.position).normalize(),q={longitude:Math.PI+Math.atan2(te.x,te.z),latitude:Math.acos(te.y/te.length())-Math.PI/2};s.setState(fe(F({},q),{mode:Ye.Five.Mode.Panorama,panoIndex:D.observerIndex})),s.once("initAnimationEnded",()=>{e(1,d=d.map(ne=>fe(F({},ne),{isFold:ne.id!==D.id}))),s.once("cameraUpdate",()=>{e(1,d=d.map(ne=>fe(F({},ne),{isFold:!1})))})})}};zu(()=>{A()}),zt(()=>{e(1,d=Sm(o)),h=o,L(),O(),s.on("cameraUpdate",S)}),ti(()=>{s.off("cameraUpdate",S),window.removeEventListener("resize",z,!1)});function M(){g=this.clientWidth,p=this.clientHeight,e(3,g),e(4,p)}return n.$$set=D=>{"five"in D&&e(7,s=D.five),"modelOcclusionEnable"in D&&e(8,r=D.modelOcclusionEnable),"itemLabels"in D&&e(9,o=D.itemLabels),"hooks"in D&&e(0,a=D.hooks),"displayStrategyType"in D&&e(10,l=D.displayStrategyType),"maxVisibleDistance"in D&&e(11,c=D.maxVisibleDistance)},[a,d,f,g,p,v,I,s,r,o,l,c,M]}class fC extends Me{constructor(t){super(),Ie(this,t,uC,hC,Pe,{five:7,modelOcclusionEnable:8,itemLabels:9,hooks:0,displayStrategyType:10,maxVisibleDistance:11},cC,[-1,-1])}}function pC(n){return n.item_labels.map(t=>fe(F({},t),{modelPosition:[t.position[0],t.position[1],t.position[2]],observerIndex:void 0}))}const mC=void 0,gC=(n,t)=>{var f,g,p,m;const e={container:document.createElement("div"),data:null,enabled:!0,fiveModeEnabled:!0,itemLabels:[],wrapper:null,app:void 0,hooks:new Ye.Subscribe,modelOcclusionEnable:(f=t==null?void 0:t.modelOcclusionEnable)!=null?f:!0,onlyVisibleInPanorama:(g=t==null?void 0:t.onlyVisibleInPanorama)!=null?g:!0,displayStrategyType:(p=t==null?void 0:t.displayStrategyType)!=null?p:Ps.SMALL,maxVisibleDistance:(m=t==null?void 0:t.maxVisibleDistance)!=null?m:mC};e.container.setAttribute("class","item-label-plugin-container"),e.container.style.cssText=`
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        z-index: 5;
    `,e.container.style.pointerEvents="none";const i=v=>(e.wrapper=v,v.appendChild(e.container),l(),!0),s=v=>{e.itemLabels=pC(v),l()},r=()=>(e.enabled||(e.enabled=!0,l()),!0),o=()=>(e.enabled&&(e.enabled=!1,l()),!0),a=()=>{h(),e.container.remove()},l=()=>{var v;if(e.wrapper){if(!e.enabled||!e.fiveModeEnabled){(v=e.app)==null||v.$destroy(),e.app=void 0;return}e.app?e.app.$set({five:n,itemLabels:e.itemLabels}):e.app=new fC({target:e.container,props:{five:n,modelOcclusionEnable:e.modelOcclusionEnable,itemLabels:e.itemLabels,hooks:e.hooks,displayStrategyType:e.displayStrategyType,maxVisibleDistance:e.maxVisibleDistance}})}},c=()=>{n.on("modeChange",d),n.once("dispose",a)},h=()=>{n.off("modeChange",d)},d=v=>{if(v!==Ye.Five.Mode.Panorama){e.fiveModeEnabled=!1,o();return}n.once("initAnimationEnded",()=>{e.fiveModeEnabled=!0,r()})};return c(),{appendTo:i,load:s,enable:r,disable:o,dispose:a,hooks:e.hooks}},vC={name:"ItemLabelPlugin",version:0};function AC(n){De(n,"svelte-1irjijd",'.plugin-DoorLabelPlugin-item.svelte-1irjijd.svelte-1irjijd{position:absolute;left:0;top:0;width:0;height:0;pointer-events:none;transition:opacity 0.3s ease}.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd{position:absolute;top:50%;left:50%;border-radius:0.125rem;background:rgba(0, 0, 0, 0.35);line-height:0.75rem;padding:0.375rem;white-space:nowrap;font-size:0.75rem;font-style:normal;color:white;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform ease 1s, background ease 0.3s, color ease 0.3s}.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd::after{content:"";display:block;position:absolute;top:-0.0625rem;left:-0.0625rem;bottom:-0.0625rem;right:-0.0625rem;border-radius:0.125rem;border:0.0625rem solid rgba(0, 0, 0, 0);-o-border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlMAIE397fAAAAAVSURBVAjXY2BjgCMQ+PABhIAASRwARxwD8fgzCQAAAAAASUVORK5CYII=") 4;border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlMAIE397fAAAAAVSURBVAjXY2BjgCMQ+PABhIAASRwARxwD8fgzCQAAAAAASUVORK5CYII=") 4;transition:opacity ease 0.3s}.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd:active,.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd:focus{background:rgba(0, 0, 0, 0.5);color:rgba(255, 255, 255, 0.5)}.plugin-DoorLabelPlugin-icon.svelte-1irjijd.svelte-1irjijd{background:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSIxMHB4IiB2aWV3Qm94PSIwIDAgMTAgMTAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aW1hZ2Ut566t5aS0PC90aXRsZT4KICAgIDxkZWZzPgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iNjYuMDYyMTk3NSUiIHkxPSI1MCUiIHgyPSItMS4xMzY4NjgzOGUtMTElIiB5Mj0iNTAlIiBpZD0ibGluZWFyR3JhZGllbnQtMyI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iMCUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgc3RvcC1vcGFjaXR5PSIwLjg1IiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iODQuMzM5NzMxJSIgeTE9IjUwJSIgeDI9IjIzLjQyODMzNzclIiB5Mj0iNTAlIiBpZD0ibGluZWFyR3JhZGllbnQtNCI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIwJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZGRkZGIiBzdG9wLW9wYWNpdHk9IjAuOCIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSLpobXpnaItMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IlZSLeWIhumXtOW8leWvvOagh+etvuWkh+S7vS0zIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzM5LjAwMDAwMCwgLTU0My4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hC0y5aSH5Lu9LTEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMDUuMDAwMDAwLCA1MzYuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iaW1hZ2Ut566t5aS0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC4wMDAwMDAsIDcuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDwvbWFzaz4KICAgICAgICAgICAgICAgICAgICA8dXNlIGlkPSJCRyIgZmlsbC1vcGFjaXR5PSIwIiBmaWxsPSIjRDhEOEQ4IiBvcGFjaXR5PSIwLjUxMTQ2Mjk4NCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuOTM4ODY5OCwxLjE0Mzc2MTI5IEM4LjI1NDY1NDA0LDEuMjU3NTgwMzUgOC4zMTc4Mjg0LDEuMzAyMTY5OTggOC4zMTc3ODUyMSwxLjM1ODE1MjIzIEM4LjMxNzc1MDcyLDEuNDAyODQzMzUgOC4zMDU3NDkwNywxLjQ0NzUyNTI0IDguMjgxNzg0MTEsMS40ODcyMDUyMSBMOC4yODE3ODQxMSwxLjQ4NzIwNTIxIEw2LjIwOTg5MDQxLDQuOTE3NzQyNDUgQzYuMTM3ODg4MDgsNS4wMzY5NjAyOSA2LjEwMTg4NjkxLDUuMTcxMjIwMiA2LjEwMTg4NjkxLDUuMzA1NDgwMTEgQzYuMTAxODg2OTEsNS40Mzk3NDAwMiA2LjEzNzg4ODA4LDUuNTczOTk5OTQgNi4yMDk4OTA0MSw1LjY5MzIxNzc4IEw2LjIwOTg5MDQxLDUuNjkzMjE3NzggTDguMjgxNzg0MTEsOS4xMjM3NTUwMSBDOC4zMTc0NzQzOCw5LjE4Mjg0OTE2IDguMzI1ODMzMjIsOS4yNTA4MTUyIDguMzEwNDk1OTUsOS4zMTI5MzAyOCBDOC4yOTUxNTg2OCw5LjM3NTA0NTM2IDguMjU2MTI1MzEsOS40MzEzMDk0NyA4LjE5NzAzMTE3LDkuNDY2OTk5NzMgQzguMTU3MzUxMTksOS40OTA5NjQ2OSA4LjExMjY2OTMxLDkuNTAyOTY2MzQgOC4wNjc5NzgxOCw5LjUwMzAwMDgzIEM4LjAyMzI4NzA2LDkuNTAzMDM1MzEgNy45Nzg1ODY3MSw5LjQ5MTEwMjYzIDcuOTM4ODY5OCw5LjQ2NzE5ODkzIEw3LjkzODg2OTgsOS40NjcxOTg5MyBMMS4zNzk5MTIxOCw1LjUxOTY3ODE1IEMxLjMyMDc2MzAyLDUuNDg0MDc5MTIgMS4yODE2NDI4Nyw1LjQyNzg3NTMyIDEuMjY2MjA5NzcsNS4zNjU3ODM5OCBDMS4yNTQ2OTI1Niw1LjMxOTQ0NzMyIDEuMjU2MzY2OTgsNS4yNjk4MzE4MiAxLjI3Mjc1MzMzLDUuMjIzMDU0MDUgTDEuMjcyNzUzMzMsNS4yMjMwNTQwNSBaIiBpZD0i566t5aS0IiBzdHJva2U9InVybCgjbGluZWFyR3JhZGllbnQtNCkiIHN0cm9rZS13aWR0aD0iMC41IiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTMpIiBtYXNrPSJ1cmwoI21hc2stMikiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuMDM5MjAwLCA1LjMwNTQ4MCkgc2NhbGUoMSwgLTEpIHJvdGF0ZSgtOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTUuMDM5MjAwLCAtNS4zMDU0ODApICI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=") no-repeat;background-size:100%;display:inline-block;width:0.625rem;height:0.625rem;margin-left:0.25rem;transform-origin:center}.plugin-DoorLabelPlugin-cnt[data-camera-toward=forward].left.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=forward].right.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=forward].right.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt[data-camera-toward=right].forward.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=right].back.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=right].back.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt[data-camera-toward=left].back.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=left].forward.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=left].forward.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt[data-camera-toward=back].right.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=back].left.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=back].left.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd.svelte-1irjijd{color:#f9eac1}.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{background:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCAxMCA4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPueureWktDwvdGl0bGU+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjEwLjYzODU4ODQlIiB5MT0iMCUiIHgyPSI5Ni41MTYxNDc0JSIgeTI9IjEyOS43MzEzNTQlIiBpZD0ibGluZWFyR3JhZGllbnQtMSI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkYyQ0MiIG9mZnNldD0iMCUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0VBRDA5QSIgb2Zmc2V0PSI0OC43MTQ0NDc4JSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRDFCMTdFIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i5pyq5p2l5a625aSH5Lu9LTI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzA1LjAwMDAwMCwgLTU0NS4wMDAwMDApIiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTEpIiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICA8ZyBpZD0i57yW57uELTLlpIfku70tMTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0NS4wMDAwMDAsIDUzNy4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJpbWFnZS3nrq3lpLQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYwLjAwMDAwMCwgNy4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOC40OTU3ODI5NCwxLjYxNjQ1MTEgTDYuNDIzODg5MjUsNS4wNDY5ODgzMyBDNi4zMjc4ODYxMyw1LjIwNTk0NTQ1IDYuMzI3ODg2MTMsNS40MDUwMTQ3NyA2LjQyMzg4OTI1LDUuNTYzOTcxODkgTDguNDk1NzgyOTQsOC45OTQ1MDkxMiBDOC42Mzg1NDQwMSw5LjIzMDg4NTcxIDguNTYyNjUzNjQsOS41MzgyMzc1IDguMzI2Mjc3MDYsOS42ODA5OTg1NiBDOC4xNjc1NTcxNiw5Ljc3Njg1ODQgNy45Njg4MjE5NSw5Ljc3NzAxMTc1IDcuODA5OTU0MzEsOS42ODEzOTY5NyBMMS4yNTA5OTY2OSw1LjczMzg3NjE4IEMxLjAxNDQwMDA4LDUuNTkxNDgwMDcgMC45MzgwMzU0ODEsNS4yODQyNDU3NiAxLjA4MDQzMTU5LDUuMDQ3NjQ5MTQgQzEuMTIyNTE0OCw0Ljk3NzcyNjI4IDEuMTgxMDczODMsNC45MTkxNjcyNSAxLjI1MDk5NjY5LDQuODc3MDg0MDQgTDcuODA5OTU0MzEsMC45Mjk1NjMyNTMgQzguMDQ2NTUwOTMsMC43ODcxNjcxNDIgOC4zNTM3ODUyNCwwLjg2MzUzMTczOSA4LjQ5NjE4MTM1LDEuMTAwMTI4MzUgQzguNTkxNzk2MTMsMS4yNTg5OTYgOC41OTE2NDI3OCwxLjQ1NzczMTIgOC40OTU3ODI5NCwxLjYxNjQ1MTEgWiIgaWQ9IueureWktCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNS4wMzkyMDAsIDUuMzA1NDgwKSBzY2FsZSgxLCAtMSkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtNS4wMzkyMDAsIC01LjMwNTQ4MCkgIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==") no-repeat}.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd.svelte-1irjijd:active,.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd.svelte-1irjijd:focus{background:rgba(0, 0, 0, 0.5);color:rgba(249, 234, 193, 0.5)}')}function bC(n){let t,e,i,s=n[0].name+"",r,o,a,l,c,h,d,f,g;return{c(){t=U("div"),e=U("div"),i=U("span"),r=Ve(s),o=ae(),a=U("i"),y(i,"class","plugin-DoorLabelPlugin-txt svelte-1irjijd"),y(a,"class","plugin-DoorLabelPlugin-icon svelte-1irjijd"),y(e,"class",l=yt(ni("plugin-DoorLabelPlugin-cnt",n[0].toward))+" svelte-1irjijd"),y(e,"style",c=`transform: ${n[0].transform||"initial"};pointer-events: ${n[0].inSight?"auto":"none"};opacity: ${n[0].inSight?1:0}`),y(e,"data-camera-toward",h=n[0].cameraToward),y(t,"style",d=`left: ${n[0].left||0}%;top: ${n[0].top||0}%;opacity: ${n[0].inSight?1:0}`),y(t,"class","plugin-DoorLabelPlugin-item svelte-1irjijd")},m(p,m){Y(p,t,m),V(t,e),V(e,i),V(i,r),V(e,o),V(e,a),n[4](t),f||(g=je(e,"click",n[3]),f=!0)},p(p,[m]){m&1&&s!==(s=p[0].name+"")&&Ge(r,s),m&1&&l!==(l=yt(ni("plugin-DoorLabelPlugin-cnt",p[0].toward))+" svelte-1irjijd")&&y(e,"class",l),m&1&&c!==(c=`transform: ${p[0].transform||"initial"};pointer-events: ${p[0].inSight?"auto":"none"};opacity: ${p[0].inSight?1:0}`)&&y(e,"style",c),m&1&&h!==(h=p[0].cameraToward)&&y(e,"data-camera-toward",h),m&1&&d!==(d=`left: ${p[0].left||0}%;top: ${p[0].top||0}%;opacity: ${p[0].inSight?1:0}`)&&y(t,"style",d)},i:re,o:re,d(p){p&&X(t),n[4](null),f=!1,g()}}}function yC(n,t,e){let{props:i}=t,{onClick:s}=t,r;const o=()=>{const{left:c,top:h,inSight:d,panoIndex:f}=i;if(!c||!h||!d||!r)return;const g=r.current.clientWidth/window.innerWidth*100,p=r.current.clientHeight/window.innerHeight*100;c<=g/2||c>=100-g/2||h<=p/2||h>=100-p/2},a=c=>{s&&s()};function l(c){Je[c?"unshift":"push"](()=>{r=c,e(2,r)})}return n.$$set=c=>{"props"in c&&e(0,i=c.props),"onClick"in c&&e(1,s=c.onClick)},o(),[i,s,r,a,l]}class wC extends Me{constructor(t){super(),Ie(this,t,yC,bC,Pe,{props:0,onClick:1},AC)}}function PC(n,t){const e=Math.abs(n.top+n.height/2-t.top-t.height/2),i=Math.abs(n.left+n.width/2-t.left-t.width/2),s=(n.height+t.height)/2,r=(n.width+t.width)/2;return!(e>s&&i>r)}function CC(n){const{camera:t}=n,e=t.getWorldDirection(new B.Vector3);let i=Math.atan(e.z/e.x)*180/Math.PI,s="";return e.x<0&&(i+=180),i<0&&(i+=360),i>315||i<=45?s="right":i>45&&i<=135?s="back":i>135&&i<=225?s="left":i>225&&i<=315&&(s="forward"),s}function IC(n,t){return Math.sqrt(Math.pow(n.z-t.z,2)+Math.pow(n.x-t.x,2))}function MC(n){const t=Math.PI/4;return n>-t&&n<=t?"left":n>t*3||n<=-t*3?"right":n>-t*3&&n<=-t?"forward":n>t&&n<=t*3?"back":""}const kC={userAction:!0};class EC extends Bn{constructor(e){super(e);u(this,"state",{enabled:!0,visible:!0});u(this,"container");u(this,"MinVisibledistance",1.8);u(this,"MaxVisibledistance",5);u(this,"OffsetHeight",-1.3);u(this,"floorplanServerData");u(this,"visibleLabelMap",new Map);u(this,"labelItems",[]);u(this,"doorLabels");u(this,"roomObservers");u(this,"loadData",(e,i)=>{i&&(this.MaxVisibledistance=i.MaxVisibledistance,this.MinVisibledistance=i.MinVisibledistance,this.OffsetHeight=i.OffsetHeight),this.labelItems=[],this.doorLabels=[],this.floorplanServerData=e,ai(this.five).then(()=>{this.initData(),this.fixDoorVisibleAndPosition(),this.applyState()})});u(this,"dispose",()=>{var e,i,s,r,o,a,l;(e=this.five)==null||e.off("wantsToMoveToPano",this.hideAllLabels),(i=this.five)==null||i.off("modelLoaded",this.fixDoorVisibleAndPosition),(s=this.five)==null||s.off("panoArrived",this.fixDoorVisibleAndPosition),(r=this.five)==null||r.off("initAnimationEnded",this.fixDoorPosition),(o=this.five)==null||o.off("cameraUpdate",this.fixDoorPosition),(a=this.five)==null||a.off("mouseWheel",this.fixDoorPosition),(l=this.five)==null||l.off("pinchGesture",this.fixDoorPosition),this.applyState({enabled:!1})});u(this,"initRoomObservers",()=>{var r,o;const e=this.floorplanServerData.computed_data.floor_datas||[],s=(((o=(r=this.five)==null?void 0:r.work)==null?void 0:o.observers)||[]).map(a=>{const l=a.panoIndex,c=a.floorIndex,h=e==null?void 0:e.find(d=>d.floor_index===c);if(h){const d=h.rooms.find(f=>f.observer_indexs.includes(l));if(d)return{panoIndex:l,floorIndex:c,name:d.name}}}).filter(Boolean);this.roomObservers=s});u(this,"hideAllLabels",()=>{this.labelItems.forEach(e=>{e.visible=!1,e.inSight=!1})});u(this,"fixDoorVisibleAndPosition",()=>{this.initRoomObservers();const{panoIndex:e}=this.five;if(!this.state.visible||this.five.model.empty||e===null||!this.roomObservers.find(a=>a.panoIndex===e))return;const i=this.roomObservers.find(a=>a.panoIndex===e),r=this.five.work.observers.find(a=>a.panoIndex===e).position.clone(),o=(()=>{if(this.visibleLabelMap.has(e))return this.visibleLabelMap.get(e);{const a=[];return this.doorLabels.forEach((l,c)=>{if(l.roomName===i.name)return;const h=l.position.clone(),d=h.distanceTo(r);if(d<this.MinVisibledistance||d>this.MaxVisibledistance)return;const f=new B.Raycaster,g=h.clone().sub(r).normalize();f.set(r,g);const[p]=this.five.model.intersectRaycaster(f);p&&p.distance+.1<d||a.push(c)}),this.visibleLabelMap.set(e,a),a}})();this.labelItems.forEach((a,l)=>{a.visible=o.includes(l)}),this.fixDoorPosition()});u(this,"fixDoorPosition",()=>{var c,h,d,f,g,p,m,v,b,w,x,E;if(!this.state.enabled||!this.state.visible)return;const{panoIndex:e,camera:i}=this.five;if(e===null)return;if(this.five.currentMode!=="Panorama")return this.hideAllLabels();const s=this.five.getElement(),r=s.clientWidth,o=s.clientHeight,a=i.getWorldDirection(new B.Vector3),l=[];if(this.labelItems.forEach((L,S)=>{var A;if(L.visible){const C=i.position.distanceTo(L.position),I=L.position.clone().add(new B.Vector3(0,this.OffsetHeight,0)),D=I.clone().sub(i.position).normalize().angleTo(a),T=I.clone().project(i),H=(T.x+1)/2.2*100,W=(-T.y+1)/2.2*100,J=H>=0&&H<=100&&W>=0&&W<=100&&C>this.MinVisibledistance&&C<=this.MaxVisibledistance;L.left=H,L.top=W,L.inSight=J&&D<Math.PI/2,L.cameraToward=CC(this.five),J?l.push({disFromCameraToLabel:C,left:H,top:W,index:S}):L.transform="translate(-50%, -50%)"}else L.inSight=!1;const O=L,{svelteApp:R}=O,z=rs(O,["svelteApp"]);(A=L.svelteApp)==null||A.$set({props:z})}),l.length>1){let L=0;l.sort((S,R)=>R.disFromCameraToLabel-S.disFromCameraToLabel);for(let S=1;S<l.length;S++){const{index:R,left:z,top:O}=l[S-1],{index:A,left:C,top:I}=l[S],M=this.container.children[R],D=this.container.children[A];if(!M||!D)return;const T={left:r*z/100,top:o*O/100,width:(d=(h=(c=M.children)==null?void 0:c[0])==null?void 0:h.clientWidth)!=null?d:0,height:(p=(g=(f=M.children)==null?void 0:f[0])==null?void 0:g.clientHeight)!=null?p:0},H={left:r*C/100,top:o*I/100,width:(b=(v=(m=D.children)==null?void 0:m[0])==null?void 0:v.clientWidth)!=null?b:0,height:(E=(x=(w=D.children)==null?void 0:w[0])==null?void 0:x.clientHeight)!=null?E:0};PC(T,H)&&(L++,this.labelItems[R].transform=`translate(-50%, ${(L-1)*100-50}%)`,this.labelItems[A].transform=`translate(-50%, ${L*100-50}%)`)}}});u(this,"onClick",(e,i)=>{if(!this.roomObservers)return;const{work:s}=this.five;let r,o,a=1/0;for(const l of s.observers)if(this.roomObservers.find(h=>h.panoIndex===l.panoIndex&&h.name===e)){const h=l.standingPosition,d=i.distanceTo(h);d<a&&(r=l.panoIndex,o=h.clone().sub(i).normalize(),a=d)}if(o!==void 0&&r!==void 0){const l={};if(a>0){const h=new B.Vector3(0,0,-1),d=o.clone(),f=new B.Quaternion;f.setFromUnitVectors(h,d);const g=new B.Euler;g.setFromQuaternion(f,"YXZ"),l.longitude=g.y}this.five.emit("wantsToMoveToPano",r,{},!0)||this.five.moveToPano(r,{longitude:l.longitude})}});u(this,"initData",()=>{var r;this.doorLabels=[],this.labelItems.forEach(o=>{var a;return(a=o.svelteApp)==null?void 0:a.$destroy()}),this.labelItems=[];const e=this.five.panoIndex,i=this.floorplanServerData.computed_data.observers[e].floor_index,s=this.floorplanServerData.computed_data.floor_datas[i];(r=this.floorplanServerData.computed_data.doors)==null||r.forEach(o=>{const a=this.five.work.observers.filter((f,g)=>{var p;return!!((p=s==null?void 0:s.rooms)!=null&&p.find(m=>m.observer_indexs.includes(g)))}),l=o.position;let c=1/0,h;a.forEach(f=>{const g=f.standingPosition,p={x:g.x,y:g.y,z:g.z},m=IC(l,p);m<c&&(c=m,h=p)}),h&&(l.y=h.y+.01);const d=new B.Vector3(l.x,l.y,l.z);d.add(new B.Vector3(-.2,1.8,0).applyEuler(new B.Euler(0,o.rad,0))),this.doorLabels.push({roomName:o.name,name:o.name,position:d,toward:MC(o.rad)})}),this.labelItems=this.doorLabels.map(o=>fe(F({},o),{left:0,top:0,visible:!1,inSight:!1,transform:"",cameraToward:""})),this.five.on("wantsToMoveToPano",this.hideAllLabels),this.five.on("panoArrived",this.fixDoorVisibleAndPosition),this.five.on("initAnimationEnded",this.fixDoorPosition),this.five.on("cameraUpdate",this.fixDoorPosition),this.five.on("mouseWheel",this.fixDoorPosition),this.five.on("pinchGesture",this.fixDoorPosition),this.fixDoorVisibleAndPosition()})}appendTo(e){this.state.enabled&&(this.container=e)}setState(e,i){const s=this.state;this.state=F(F({},s),e);const r=s.enabled&&s.visible,o=this.state.enabled&&this.state.visible;r!==o&&this.applyState()}show(){this.setState({visible:!0})}hide(){this.setState({visible:!1})}enable(){this.setState({enabled:!0})}disable(){this.setState({enabled:!1})}stateChangedCallback(e,i){if(this.hooks.hasListener("stateChange")){const s={state:this.state,prevState:e,userAction:i?i.userAction:kC.userAction};this.hooks.emit("stateChange",s)}}applyState(e){const i=e!=null?e:this.state;i.enabled!==!1&&i.visible!==!1?(this.labelItems.forEach(r=>{r.svelteApp=new wC({target:this.container,props:{props:r,onClick:()=>{this.onClick(r.name,r.position)}}})}),this.fixDoorPosition()):this.labelItems.forEach(r=>{r.svelteApp.$destroy()})}initState(){return{enabled:!0,visible:!0}}}const xC=n=>new EC(n);function Om(n,t){console.warn(`🚫 ==> [${n}]: ${t}`)}var Za={},DC=SC;function SC(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n}var LC=TC;function TC(n,t,e){return n[0]=t,n[1]=e,n}var zC=OC;function OC(n,t){var e=t[0],i=t[1],s=e*e+i*i;return s>0&&(s=1/Math.sqrt(s),n[0]=t[0]*s,n[1]=t[1]*s),n}var jC=VC;function VC(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n}var BC=_C;function _C(n,t){return n[0]*t[0]+n[1]*t[1]}var RC=DC,oh=LC,jm=zC,FC=jC,NC=BC,Vm=[0,0];Za.computeMiter=function(t,e,i,s,r){return RC(t,i,s),jm(t,t),oh(e,-t[1],t[0]),oh(Vm,-i[1],i[0]),r/NC(e,Vm)},Za.normal=function(t,e){return oh(t,-e[1],e[0]),t},Za.direction=function(t,e,i){return FC(t,e,i),jm(t,t),t};var un=Za,Cs=[0,0],Ja=[0,0],Bm=[0,0],po=[0,0],GC=function(n,t){var e=null,i=[];t&&(n=n.slice(),n.push(n[0]));for(var s=n.length,r=1;r<s;r++){var o=n[r-1],a=n[r],l=r<n.length-1?n[r+1]:null;if(un.direction(Cs,a,o),e||(e=[0,0],un.normal(e,Cs)),r===1&&ah(i,e,1),!l)un.normal(e,Cs),ah(i,e,1);else{un.direction(Ja,l,a);var c=un.computeMiter(Bm,po,Cs,Ja,1);ah(i,po,c)}}if(n.length>2&&t){var h=n[s-2],d=n[0],f=n[1];un.direction(Cs,d,h),un.direction(Ja,f,d),un.normal(e,Cs);var g=un.computeMiter(Bm,po,Cs,Ja,1);i[0][0]=po.slice(),i[s-1][0]=po.slice(),i[0][1]=g,i[s-1][1]=g,i.pop()}return i};function ah(n,t,e){n.push([[t[0],t[1]],e])}function _m(n,t){const e=n[0],i=n[1],s=t[0],r=t[1];var o=(r.x-s.x)*(e.y-s.y)-(r.y-s.y)*(e.x-s.x),a=(i.x-e.x)*(e.y-s.y)-(i.y-e.y)*(e.x-s.x),l=(r.y-s.y)*(i.x-e.x)-(r.x-s.x)*(i.y-e.y);if(l!==0){var c=o/l,h=a/l;if(0<=c&&c<=1&&0<=h&&h<=1)return!0}return!1}function HC(n,t){for(let e=0;e<n.length-1;e++)for(let i=0;i<t.length-1;i++)if(_m([n[e],n[e+1]],[t[i],t[i+1]]))return{x:(n[e].x+n[e+1].x)/2,y:(n[e].y+n[e+1].y)/2,line1RelativeIndex:e,line2RelativeIndex:i}}const WC=2,UC=3,QC=3,XC=2;function YC(n){const t=n.width,e=n.unitLength,i=t/2,s=n.path;if(s.length===0)return{geometry:new P.BufferGeometry,maxV:0,curvePath:null,curvePoints:null};const r=new P.CurvePath;s.forEach(O=>{const A=ZC(O);A&&r.add(A)});const o=Math.ceil(r.getLength()*100);r.arcLengthDivisions=o;const a=r.getPoints(o),l=a.length;if(l<=2)return{geometry:new P.BufferGeometry,maxV:0,curvePath:null,curvePoints:null};const c=GC(a.map(O=>[O.x,O.z])),d=(l-1)*WC*UC,f=2*l,g=f*QC,p=f*XC,m=new Uint32Array(d),v=new Float32Array(g),b=new Float32Array(p);let w=0,x=0;for(let O=0;O<l;O++){const[A,C]=c[O][0],I=a[O],{x:M,y:D,z:T}=I,H=new B.Vector3(M+A*i,D+.05,T+C*i);v[O*6+0]=H.x,v[O*6+1]=H.y,v[O*6+2]=H.z;const W=new B.Vector3(M-A*i,D+.05,T-C*i);v[O*6+3]=W.x,v[O*6+4]=W.y,v[O*6+5]=W.z,w+=O>0?a[O-1].clone().sub(a[O]).length():0;const J=w/e;x=J,b[O*4+0]=0,b[O*4+1]=J,b[O*4+2]=1,b[O*4+3]=J;const te=new P.Vector3().lerpVectors(H,W,.5);n.skipPositions&&n.skipPositions.some(ne=>ne.distanceTo(te)<.26)||O!==l-1&&(m[O*6+0]=O*2+0,m[O*6+1]=O*2+2,m[O*6+2]=O*2+1,m[O*6+3]=O*2+2,m[O*6+4]=O*2+3,m[O*6+5]=O*2+1)}const E=[];let L;const S=[];for(let O=0;O<l-1;O++){if(L!==void 0&&O<=L)continue;const A=O+1,C={x:v[O*6+0],y:v[O*6+2]},I={x:v[O*6+3],y:v[O*6+5]},M={x:v[A*6+0],y:v[A*6+2]},D={x:v[A*6+3],y:v[A*6+5]},T=_m([C,I],[M,D]);if(T&&E.push(O),!T&&E.length){E.push(O);const H=new P.Vector2(C.x,C.y).distanceTo(new P.Vector2(M.x,M.y)),W=new P.Vector2(I.x,I.y).distanceTo(new P.Vector2(D.x,D.y)),J=300,te=[],q=[],ne=Math.max(0,E[0]-e*J),se=E[0];for(let ce=ne;ce<se;ce++)H<W?te.push({x:v[ce*6+0],y:v[ce*6+2]}):te.push({x:v[ce*6+3],y:v[ce*6+5]});const ue=E[E.length-1],ze=Math.min(l-1,E[E.length-1]+e*J);for(let ce=ue;ce<ze;ce++)H<W?q.push({x:v[ce*6+0],y:v[ce*6+2]}):q.push({x:v[ce*6+3],y:v[ce*6+5]});const Ce=HC(te,q);if(Ce){const{line1RelativeIndex:ce,line2RelativeIndex:le,x:he,y:ke}=Ce,be=ne+ce,We=ue+le+2;for(let Oe=be;Oe<We;Oe++)H<W?(v[Oe*6+0]=he,v[Oe*6+2]=ke):(v[Oe*6+3]=he,v[Oe*6+5]=ke),L=Oe;let Re,Te,He,pe,Le;H<W?(Re=v[ne*6+1],Te=v[be*6+1],He=v[We*6+1],pe=v[ze*6+1],Le=(Te+He)/2):(Re=v[ne*6+4],Te=v[be*6+4],He=v[We*6+4],pe=v[ze*6+4],Le=(Te+He)/2);for(let Oe=ne;Oe<be;Oe++){const rt=be-ne,st=(Oe-ne)/rt;H<W?v[Oe*6+1]=Re+(Le-Re)*st:v[Oe*6+4]=Re+(Le-Re)*st}for(let Oe=be;Oe<We;Oe++)H<W?v[Oe*6+1]=Le:v[Oe*6+4]=Le;for(let Oe=We;Oe<ze;Oe++){const rt=ze-We,st=(Oe-We+1)/rt;H<W?v[Oe*6+1]=Le+(pe-Le)*st:v[Oe*6+4]=Le+(pe-Le)*st}S.push({start:be,end:We})}E.length=0}}const R=new Float32Array(f);S.forEach(O=>{for(let A=0;A<l-1;A++)A>=O.start&&A<=O.end?(R[A*2+0]=1,R[A*2+1]=1):R[A]!==1&&(R[A*2+0]=0,R[A*2+1]=0)});const z=new P.BufferGeometry;return z.setAttribute("position",new P.BufferAttribute(v,3)),z.setAttribute("uv",new P.BufferAttribute(b,2)),z.setIndex(new P.BufferAttribute(m,1)),{geometry:z,maxV:x,animationWillError:S,curvePath:r,curvePoints:a}}function ZC(n){var t,e;if(JC(n)){const i=n.points.map(r=>new P.Vector3().fromArray(r));return new P.CatmullRomCurve3(i,(t=n.closed)!=null?t:!1,(e=n.curve_type)!=null?e:"centripetal",n.tension)}}function JC(n){return n.type==="CatmullRomCurve3"}function qC(n,t){t.forEach(e=>{const i=new P.SphereGeometry(.02,16,16),s=[],r=[new P.MeshBasicMaterial({color:16776960}),new P.MeshBasicMaterial({color:16711935}),new P.MeshBasicMaterial({color:16711680}),new P.MeshBasicMaterial({color:65535})];if(e.position.length===4)e.position.forEach((o,a)=>{const l=r[a],c=new P.Mesh(i,l);c.position.copy(Cn(o)),s.push(c)});else{const o=r[0],a=new P.Mesh(i,o);a.position.copy(Cn(e.position)),s.push(a)}s.forEach(o=>{o.material.depthTest=!1,n.scene.add(o)})})}const At=n=>n;function Rm(n){if(!n||n.length<3)return;const t=n.map(Qe),e=t[1].clone().sub(t[0]),i=t[2].clone().sub(t[1]);return e.cross(i)}function KC(n){return n.stickType==="Plane"}function $C(n){return n.stickType==="3DPoint"}function Is(n){return n.stickType==="Model"&&n.contentType==="MediaModel"}function e4(n){return n.stickType==="Model"&&n.contentType==="Model"}function t4(n){return n.stickType==="Plane"&&n.contentType==="MediaPlane"}function lh(n){const t=(()=>{if(Is(n)&&n.matrix){const e=new B.Matrix4().fromArray(n.matrix);return n.data.mediaPosition.map(i=>Qe(i).clone().applyMatrix4(e))}else return n.position})();return v1(t)}function Fm(n){const t=lh(n);return Ut(...Array.isArray(t)?t:[t])}function qa(n,t){if(n===void 0)return;const{min:e,max:i}=t!=null?t:{};if(!(e===void 0&&i===void 0))return!(typeof i=="number"&&i<n||typeof e=="number"&&e>n)}function i4(n,t,e){const s=new P.Plane().setFromNormalAndCoplanarPoint(e,t),r=t.clone().sub(n).cross(new P.Vector3(0,1,0)).setLength(.01),o=new P.Vector3(0,.01,0);return[t.clone().sub(r).sub(o),t.clone().add(r).sub(o),t.clone().add(r).add(o),t.clone().sub(r).add(o)].map(l=>s.projectPoint(l,new P.Vector3))}const Nm=(n,t=1e3/60)=>{let e=null;const i=n;return(...r)=>{e&&clearTimeout(e),e=setTimeout(()=>{i==null||i(...r),e&&clearTimeout(e),e=null},t)}};function n4(n,t=200){let e;return function(...i){e||(n.apply(this,i),e=setTimeout(function(){e=null},t))}}function s4(n,t){const[e,i]=t;if(e>=i||i<=1||e<=1)return-1;const s={},r=o=>(s[o]||(s[o]=n(o)),s[o]);for(let o=e;o<i;o++){const a=r(o),l=r(o-1);if(a<l)return o}return-1}function Gm(n){if(!n)return null;try{if(n.includes("youtu.be"))return new URL(n).pathname.substring(1);if(n.includes("youtube.com")){const i=new URL(n),r=new URLSearchParams(i.search).get("v");if(r)return r;if(i.pathname.includes("/embed/"))return i.pathname.split("/embed/")[1];if(i.pathname.includes("/shorts/"))return i.pathname.split("/shorts/")[1];if(i.pathname.includes("/live/"))return i.pathname.split("/live/")[1]}}catch(i){}const t=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/|shorts\/|live\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,e=n.match(t);return e&&e[1]?e[1]:null}function Hm(n){if(!n)return null;try{if(n.includes("vimeo.com")){const s=new URL(n).pathname.split("/").filter(Boolean);if(s.length>0){const r=s[0];if(/^\d+$/.test(r)&&r.length>=5)return r}}}catch(i){}const t=/^.*vimeo\.com\/[A-Za-z\/]*(\d+)/,e=n.match(t);return e&&e[1]&&e[1].length>=5?e[1]:null}function ch(n){return n?/^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+/.test(n):!1}function hh(n){return n?/^(http(s)?:\/\/)?((w){3}.)?vimeo\.com\/(.+)/.test(n):!1}function r4(n,t){if(ch(n)){const e=Gm(n);if(!e)return"";const i=new URL(`https://www.youtube.com/embed/${e}`);return(t==null?void 0:t.start)!==void 0&&i.searchParams.set("start",t.start.toString()),(t==null?void 0:t.autoplay)!==void 0&&i.searchParams.set("autoplay",t.autoplay.toString()),i.toString()}if(hh(n)){const e=Hm(n);if(!e)return"";const i=new URL(`https://player.vimeo.com/video/${e}`);return(t==null?void 0:t.autoplay)!==void 0&&i.searchParams.set("autoplay",t.autoplay.toString()),i.toString()}return n}function dh(n){return n.stickType?n.stickType:n.pointType==="PointTag"&&n.dimensionType==="3D"?"3DPoint":n.pointType==="PlaneTag"?"Plane":"2DPoint"}function o4(n){var t,e,i,s;if(n.stickType||(n.stickType=dh(n)),n.contentType==="VRLink"||n.contentType==="PanoLink"||n.contentType==="Link"){const r=n;!((e=(t=r.data)==null?void 0:t.icon)!=null&&e.url)&&!((s=(i=r.style)==null?void 0:i.point)!=null&&s.url)&&(r.data.icon={url:"//vr-static.realsee-cdn.cn/release/web/test.09dee741.png",steps:28})}return n.extraData&&(n.data?n.data.extraData=n.extraData:n.data={extraData:n.extraData}),n}const pr="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",mo={};var uh=(n=>(n.Default="default",n.GetAudioDuration="getAudioDuration",n.PlayAudio="playAudio",n))(uh||{});function a4(n,t){const e=(t==null?void 0:t.namespace)||"default",i=mo[e]||(mo[e]=[]);let s=i.find(r=>!r.realSrc||r.realSrc===pr);return s||(console.warn("未找到缓存音频，已新建",mo),s=new Wm(pr),i.push(s)),n&&(s.src=n),s}function l4(n,t){const e=(t==null?void 0:t.namespace)||"default",i=mo[e]||(mo[e]=[]),s=n-i.length;if(!(s<=0))for(let r=0;r<s;r++)i.push(new Wm(pr))}class Wm extends(()=>typeof Audio=="undefined"?class{}:Audio)(){constructor(e){super(e);u(this,"preload","auto");u(this,"crossOrigin","anonymous");u(this,"realSrc","");u(this,"inited",!1);u(this,"removeDocumentEventListener");this.realSrc=e!=null?e:"",this.muted=!0,super.autoplay=!0,super.addEventListener("ended",()=>{this.src=""});const i=()=>c4(this);document.addEventListener("click",i),document.addEventListener("touchend",i),this.removeDocumentEventListener=()=>{document.removeEventListener("click",i),document.removeEventListener("touchend",i)}}get isBlankAudio(){return this.realSrc===pr||!this.realSrc}get src(){return super.src}set src(e){super.src=e,this.realSrc=e,this.removeDocumentEventListener()}get muted(){return super.muted}set muted(e){super.muted=e}clear(){this.currentTime=0,this.src=pr}}function c4(n){n&&(n.inited||(n.src&&(n.inited=!0,n.removeDocumentEventListener()),n.src===pr&&n.play()))}const fh={visibleConfig:{intersectRaycaster:{enabled:!0,distanceAccuracy:.01,checkPoints:"corner",needPassed:1}},clickable:!0,simulate3D:!1,renderType:"Dom"};var Um=(n=>(n.PointTag="PointTag",n.PlaneTag="PlaneTag",n))(Um||{}),Qm=(n=>(n.Audio="Audio",n.Text="Text",n.ImageText="ImageText",n.Image="Image",n.Video="Video",n.Link="Link",n.Sticker="Sticker",n.VRLink="VRLink",n.PanoLink="PanoLink",n.Marketing="Marketing",n.MediaPlane="MediaPlane",n.MediaModel="MediaModel",n.Model="Model",n.Panorama="Panorama",n.Custom="Custom",n.Unknown="Unknown",n))(Qm||{}),Xm=(n=>(n.Two="2D",n.Three="3D",n))(Xm||{});const h4={globalConfig:{visibleConfig:{followModelVisibility:!0},unfoldedConfig:{autoUnfold:{enable:!0,strategy:"MinimumDistance",distance:{max:5}}},tag3DConfig:{ratio:.0035},popoverConfig:{enabled:!1,trigger:"hover",triggerDelay:500,placement:"auto",autoPlacementBaseSpace:{top:.2,right:.15,bottom:.2},transitionDuration:100,toolbar:{showMore:!0,showShare:!0},viewMoreText:"查看更多"}},contentTypeConfig:{"[Mapview]":{unfoldedConfig:{autoUnfold:{enable:!1,distance:{max:9999}}}},"[Floorplan]":{unfoldedConfig:{autoUnfold:{enable:!1,distance:{max:9999}}}},"Any-Audio-plane":{unfoldedConfig:{keep:"unfolded"}},Link:{unfoldedConfig:{keep:"unfolded"}},Panorama:{unfoldedConfig:{keep:"unfolded"}},VRLink:{unfoldedConfig:{keep:"unfolded"}},PanoLink:{unfoldedConfig:{keep:"unfolded"}},MediaPlane:{unfoldedConfig:{keep:"unfolded"},initialData:{autoplayConfig:{autoplayCarousel:!0,autoplayVideo:!1,autoplayVideoInCarousel:!1}}},"Model-Any":{unfoldedConfig:{keep:"unfolded"},visibleConfig:{visibleFiveMode:"all"}},Marketing:{popoverConfig:{enabled:!1}},Audio:{popoverConfig:{enabled:!1}}}},d4=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1;navigator.userAgent.toLowerCase().indexOf("android");const Ka=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,u4=d4&&Ka;function f4(n){if(n.length!==4)return!1;const[t,e,i,s]=n,r=t.distanceTo(e),o=e.distanceTo(i),a=i.distanceTo(s),l=s.distanceTo(t),c=t.distanceTo(i),h=e.distanceTo(s);return r===a&&o===l&&c===h}class ph extends P.Mesh{constructor(e,i,s){if(e.length!==4)throw new Error("QuadrangleMesh: Invalid number of points, it's not a quadrangle");const[r,o,a,l]=e,c=Ut(...e),h=[r.clone().sub(c),o.clone().sub(c),a.clone().sub(c),l.clone().sub(c)],d=new Ym(h,s);super(d,i);u(this,"name","QuadrangleMesh");this.position.copy(c)}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}}class Ym extends P.BufferGeometry{constructor(e,i){super();u(this,"name","QuadrangleGeometry");u(this,"points");this.points=e;const s=i!=null?i:f4(e)?64:1;if(e.length!==4){console.error("Invalid number of points, it's not a quadrangle");return}const[r,o,a,l]=e,[c,h,d,f]=[new P.Vector2(0,0),new P.Vector2(1,0),new P.Vector2(1,1),new P.Vector2(0,1)],g=[],p=[];g.push(...r.toArray()),p.push(...c.toArray());for(let v=1;v<s;v++)g.push(r.x+(o.x-r.x)*v/s,r.y+(o.y-r.y)*v/s,r.z+(o.z-r.z)*v/s),p.push(c.x+(h.x-c.x)*v/s,c.y+(h.y-c.y)*v/s);g.push(...o.toArray()),p.push(...h.toArray()),g.push(...a.toArray()),p.push(...d.toArray());for(let v=1;v<s;v++)g.push(a.x+(l.x-a.x)*v/s,a.y+(l.y-a.y)*v/s,a.z+(l.z-a.z)*v/s),p.push(d.x+(f.x-d.x)*v/s,d.y+(f.y-d.y)*v/s);g.push(...l.toArray()),p.push(...f.toArray());const m=[];for(let v=0;v<s;v++)m.push(v,v+1,s*2-v,v,s*2-v,s*2+1-v);this.setAttribute("position",new P.BufferAttribute(new Float32Array(g),3)),this.setAttribute("uv",new P.BufferAttribute(new Float32Array(p),2)),this.setIndex(new P.BufferAttribute(new Uint32Array(m),1))}}function p4(n,t){let e=!Ka;const i=t!=null?t:document.createElement("video");i.preload="metadata",i.crossOrigin="anonymous",i.muted=!0,i.loop=!0,i.playsInline=!0,i.autoplay=!0;const s=new P.VideoTexture(i);s.minFilter=P.LinearFilter,s.magFilter=P.LinearFilter,s.encoding=P.sRGBEncoding,s.metadataLoaded=!1,i.src=n;const r=()=>{s.metadataLoaded||(s.dispatchEvent({type:"videoLoaded"}),s.metadataLoaded=!0)};if(Ka||(i.onloadedmetadata=()=>{r()}),Ka){const o=()=>{if(!e){if(!i.paused){r();return}i.muted=!0,i.play().then(()=>{e=!0,i.pause(),i.currentTime=0,r()}).catch(()=>{console.warn("video auto play error")})}};document.addEventListener("click",o,{once:!0}),document.addEventListener("touchend",o,{once:!0})}return s}function go(n,t,e){if(n==="fill")return t;if(n==="contain"){const[i,s,r,o]=t,a=i.distanceTo(s),l=r.distanceTo(o),c=i.distanceTo(o),h=s.distanceTo(r),d=a,f=c,g=d/f;if(g>e){const m=f*e,v=new P.Vector3().subVectors(s,i).multiplyScalar((a-m)/2/a),b=new P.Vector3().subVectors(r,o).multiplyScalar((l-m)/2/l);return[i.clone().add(v),s.clone().sub(v),r.clone().sub(b),o.clone().add(b)]}else if(g<e){const m=d/e,v=new P.Vector3().subVectors(o,i).multiplyScalar((c-m)/2/c),b=new P.Vector3().subVectors(r,s).multiplyScalar((h-m)/2/h);return[i.clone().add(v),s.clone().add(b),r.clone().sub(b),o.clone().sub(v)]}else return t}else return console.warn(`objectFit: ${n} is not supported yet`),t}class m4 extends P.ShaderMaterial{constructor(e){super();u(this,"transparent",!1);u(this,"blending",P.CustomBlending);u(this,"blendSrc",P.SrcAlphaFactor);u(this,"blendDst",P.OneMinusSrcAlphaFactor);u(this,"blendSrcAlpha",P.OneFactor);u(this,"blendDstAlpha",P.OneMinusSrcAlphaFactor);u(this,"vertexShader",`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `);u(this,"fragmentShader",`
    uniform sampler2D map;
    // 纹理坐标
    varying vec2 vUv;
    void main() {
      gl_FragColor = texture2D(map, vUv);
    }
  `);this.uniforms={map:{value:e}}}}const vo={Z_FIGHTING_OFFSET:.01};let Zm=class extends P.Mesh{constructor(){super(...arguments);u(this,"name","MediaPlane");u(this,"src")}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}dispose(){this.traverse(e=>{if(e.isMesh){const i=e;i.geometry.dispose(),(i.material instanceof Array?i.material:[i.material]).forEach(r=>{r.dispose()})}})}};class mh extends Zm{constructor(e,i,s){var a;super();u(this,"name","PanoTagPluginImagePlane");this.src=e;const r=(a=s==null?void 0:s.resolveZFighting)!=null?a:!0;let o=i;if(r){const l=Rn(i).multiplyScalar(vo.Z_FIGHTING_OFFSET);o=i.map(c=>c.clone().add(l))}pp(e).then(({texture:l,transparent:c})=>{var m;const h=new P.MeshBasicMaterial({map:l,transparent:c}),d=go((m=s==null?void 0:s.objectFit)!=null?m:"contain",o,l.image.width/l.image.height),f=Ut(...d),g=d.map(v=>v.clone().sub(f)),p=new Ym(g);this.position.copy(f),this.geometry=p,this.material=h}).catch(l=>{console.error(`Imageplane error: ${l==null?void 0:l.message}`)})}}class Jm extends Zm{constructor(e,i,s){const{videoCoverSrc:r,objectFit:o="contain",playButton:a="withText",paused:l=!0,videoTextureMap:c,ImageTextureMap:h,domEvents:d}=s!=null?s:{};super();u(this,"isVideoPlane",!0);u(this,"name","PanoTagPluginImagePlane");u(this,"videoInstance");u(this,"onVideoReady");u(this,"objectFit");u(this,"buttonSrc");u(this,"videoCoverSrc");u(this,"domEvents");u(this,"disposers",[]);u(this,"cornerPoints");u(this,"videoMesh");u(this,"coverMesh");u(this,"buttonMesh");u(this,"videoTextureMap");u(this,"ImageTextureMap");this.cornerPoints=i,this.src=e,this.buttonSrc=(()=>a==="withText"?sh:a==="withoutText"?rh:typeof a=="string"?a:rh)(),this.videoCoverSrc=r,this.objectFit=o,this.videoTextureMap=c,this.ImageTextureMap=h,this.domEvents=d,this.position.copy(Ut(...i)),this.videoCoverSrc&&l?this.addCoverMesh().then(()=>this.addButtonMesh()):this.addVideoMesh().then(()=>{l?this.addButtonMesh():this.play(!0)}),this.addEventListener("removed",()=>{this.remove(...this.children)}),this.addEventListener("dispose",()=>{var f;(f=this.disposers)==null||f.forEach(g=>g==null?void 0:g())})}play(e=!1){return ee(this,null,function*(){this.videoMesh||(yield this.addVideoMesh()),this.showPlayUI(),this.videoInstance.paused&&this.videoInstance.play().then(()=>this.showPlayUI()).catch(i=>{this.pause(),console.error("play error",i)}),this.videoInstance.muted=e,this.render()})}pause(){this.videoInstance&&(this.videoInstance.pause(),this.showPauseUI().then(()=>this.render()))}initialRenderHooks(e){const s=e(()=>{var r;this.videoMesh&&((r=this.videoInstance)==null?void 0:r.paused)===!1&&(this.videoMesh.needsRender=!0)});this.disposers.push(()=>s)}showPlayUI(){this.coverMesh&&(this.coverMesh.visible=!1),this.remove(this.buttonMesh),this.videoMesh.visible=!0}showPauseUI(){return ee(this,null,function*(){this.coverMesh?(this.coverMesh.visible=!0,this.videoMesh&&(this.videoMesh.visible=!1)):(yield this.addCoverMesh(),this.coverMesh&&(this.videoMesh.visible=!1)),this.addButtonMesh().then(()=>this.render())})}render(){var e;this.videoMesh&&(this.videoMesh.needsRender=!0),this.coverMesh&&(this.coverMesh.needsRender=!0),this.buttonMesh&&(this.buttonMesh.needsRender=!0),this.videoMesh&&((e=this.videoInstance)==null?void 0:e.paused)===!1&&(this.videoMesh.needsRender=!0)}addCoverMesh(){return ee(this,null,function*(){if(this.children.includes(this.coverMesh))return;const e=yield(()=>ee(this,null,function*(){if(this.coverMesh)return this.coverMesh;if(!this.videoCoverSrc)return;const{texture:i,transparent:s}=yield this.getImageTexture(this.videoCoverSrc),r=new P.MeshBasicMaterial({transparent:!1,map:i}),o=go(this.objectFit,this.cornerPoints,i.image.width/i.image.height),a=new ph(o,r);return a.position.copy(new B.Vector3(0,0,0)),a.name="videoCoverMesh",a}))();return e&&(this.children.includes(this.coverMesh)||(this.add(e),this.coverMesh=e)),e})}addVideoMesh(){return ee(this,null,function*(){var s;if(this.children.includes(this.videoMesh))return;const e=yield(()=>ee(this,null,function*(){if(this.videoMesh)return this.videoMesh;if(!this.src)return;const r=this.getVideoTexture(this.src),o=new P.MeshBasicMaterial({transparent:!1,map:r}),a=yield new Promise(c=>{r.metadataLoaded?c(go(this.objectFit,this.cornerPoints,r.image.videoWidth/r.image.videoHeight)):r.addEventListener("videoLoaded",()=>c(go(this.objectFit,this.cornerPoints,r.image.videoWidth/r.image.videoHeight)))}),l=new ph(a,o);return l.name="videoMesh",l.position.copy(new B.Vector3(0,0,0)),l}))();if(!e)return;this.domEvents.addAutoBindEventListener(e,"click",()=>{!this.videoInstance.paused&&this.videoInstance.muted?this.videoInstance.muted=!1:this.pause()},{noEmitWhenHide:!0});const i=e.material.map.image;return(s=this.onVideoReady)==null||s.call(this,i),i.addEventListener("playing",()=>{this.coverMesh||this.remove(this.buttonMesh),this.render()}),i.addEventListener("pause",()=>{this.videoInstance.paused&&(this.showPauseUI(),this.render())}),this.children.includes(this.videoMesh)||(this.add(e),this.videoMesh=e,this.videoInstance=i),e})}addButtonMesh(){return ee(this,null,function*(){if(this.children.includes(this.buttonMesh))return;const e=yield(()=>ee(this,null,function*(){var g,p,m,v;if(this.buttonMesh)return this.buttonMesh;const i=(p=(g=this.videoMesh)==null?void 0:g.geometry.points[0].distanceTo(this.videoMesh.geometry.points[3]))!=null?p:1/0,s=(v=(m=this.coverMesh)==null?void 0:m.geometry.points[0].distanceTo(this.coverMesh.geometry.points[3]))!=null?v:1/0,r=this.cornerPoints[0].distanceTo(this.cornerPoints[3]),a=Math.min(i,s,r)/r*.3,{texture:l,transparent:c}=yield this.getImageTexture(this.buttonSrc),h=go("contain",this.cornerPoints,l.image.width/l.image.height),d=new ph(h,new m4(l));d.position.copy(new B.Vector3(0,0,0)),d.name="buttonMesh",d.scale.set(a,a,a),this.domEvents.addAutoBindEventListener(d,"click",()=>{this.play()},{noEmitWhenHide:!0});const f=Rn(h).multiplyScalar(vo.Z_FIGHTING_OFFSET);return d.position.add(f),d}))();return this.children.includes(this.buttonMesh)||(this.add(e),this.buttonMesh=e),e})}getImageTexture(e){return ee(this,null,function*(){var s,r;if((s=this.ImageTextureMap)!=null&&s.has(e))return this.ImageTextureMap.get(e);const i=yield pp(e);return(r=this.ImageTextureMap)==null||r.set(e,i),i})}getVideoTexture(e){var s,r;if((s=this.videoTextureMap)!=null&&s.has(e))return this.videoTextureMap.get(e);const i=p4(e);return(r=this.videoTextureMap)==null||r.set(e,i),i}}class Ao{constructor(){u(this,"cache_raycasterDistance",new Map);u(this,"cache_visible",new Map)}clear(){this.cache_visible.clear(),this.cache_raycasterDistance.clear()}static generateCameraTagKey(t,e,i=3){const s=F(F({},e.five.getCurrentState()),t),r=s.mode==="Panorama"?e.workUtil.getObserverPosition(s.panoIndex):e.five.camera.position;return r?[r.x.toFixed(i),r.y.toFixed(i),r.z.toFixed(i),e.id].join(","):void 0}getVisible(t,e,i=1){const s=Ao.generateCameraTagKey(e,t,i);if(s)return this.cache_visible.get(s)}setVisible(t,e,i,s=1){const r=Ao.generateCameraTagKey(e,t,s);r&&this.cache_visible.set(r,i)}}function $a(n){return Object.entries(n)}function el(n){var e,i;typeof n.visibleConfig=="object"&&n.visibleConfig.keep&&(n.visibleConfig.keep==="visible"?n.visibleConfig={keep:n.visibleConfig.keep,visibleFiveMode:(e=n.visibleConfig)==null?void 0:e.visibleFiveMode}:n.visibleConfig.keep==="hidden"&&(n.visibleConfig={keep:n.visibleConfig.keep})),typeof n.unfoldedConfig=="object"&&(n.unfoldedConfig.disableFold&&(n.unfoldedConfig={keep:"unfolded"}),n.unfoldedConfig.disableUnfold&&(n.unfoldedConfig={keep:"folded"}),n.unfoldedConfig.keep&&(n.unfoldedConfig={keep:n.unfoldedConfig.keep}));const t=(i=n.initialState)!=null?i:{};return typeof n.unfoldedConfig=="object"&&(n.unfoldedConfig.keep==="unfolded"?t.unfolded=!0:n.unfoldedConfig.keep==="folded"&&(t.unfolded=!1)),typeof n.visibleConfig=="object"&&(n.visibleConfig.keep==="visible"?t.visible=!0:n.visibleConfig.keep==="hidden"&&(t.visible=!1)),n.initialState=t,n}class g4 extends Bn{constructor(e){super(e);u(this,"tags",[]);u(this,"cache",new Ao);u(this,"config",h4);u(this,"renderQueue",new Map);u(this,"params");u(this,"mediaStore",Cc({currentMediaElement:null}));u(this,"store",{disposers:[],disposed:!1,resizeObserverDisposerAdding:!1,css3DRenderDisposer:new Map});u(this,"domEvents",new Xs(this.five));u(this,"_cache_pointTag");u(this,"_cache_2DPointTag");u(this,"_cache_css3DTag");u(this,"_container",null);u(this,"timeoutIds",[]);u(this,"whyHide",e=>{const i=this.getTagById(e);return i?i.whyHide():{reason:`tag ${e} not found`}});u(this,"loadVideoFirstFrame",()=>{u4&&this.hooks.emit("loadVideoFirstFrame")});u(this,"tagsDo",(e,i,s=!0)=>{let r=[...e!=null?e:this.tags].sort((c,h)=>c.getSquaredDistance()-h.getSquaredDistance());this.timeoutIds.forEach(c=>clearTimeout(c)),this.timeoutIds.length=0;for(let c=0;c<20;c++){const h=r[c];h&&(i(h),s&&(h._updating=!1))}r=r.slice(20);const o=r.length>1e3,a=o?30:17,l=o?1:3;for(let c=0;c<r.length;c+=l){const h=[];for(let f=0;f<l;f++)r[c+f]&&h.push(r[c+f]);h.forEach(f=>{s&&(f._updating=!0)});const d=setTimeout(()=>{h.forEach(f=>{i(f),s&&(f._updating=!1)})},c*a);this.timeoutIds.push(d)}});this.mediaStore.subscribe(({currentMediaElement:i})=>{this.tags.forEach(s=>{var r;if(s.mediaPlane instanceof Jm&&i!==s.mediaPlane.videoInstance){if(!((r=s.mediaPlane.videoInstance)!=null&&r.src)||i===s.mediaPlane.videoInstance)return;s.mediaPlane.pause()}})})}get container(){var e;return this._container||((e=this.five.getElement())==null?void 0:e.parentElement)}set container(e){this._container=e}set tagsLengthWillUpdate(e){e&&(this._cache_pointTag=this.tags.filter(i=>i.stickType==="2DPoint"||i.stickType==="3DPoint").filter(i=>i.position),this._cache_2DPointTag=this.tags.filter(i=>i.stickType==="2DPoint").filter(i=>i.position),this._cache_css3DTag=this.tags.filter(i=>i.stickType==="3DPoint"||i.stickType==="Plane"||i.stickType==="Model"&&i.contentType==="MediaModel").filter(i=>{const s=i.computeRenderType();return s==="BehindDom"||s==="Dom"}))}get filterPointTag(){var e;return(e=this._cache_pointTag)!=null?e:[]}get filter2DPointTag(){var e;return(e=this._cache_2DPointTag)!=null?e:[]}get filterCSS3DTag(){var e;return(e=this._cache_css3DTag)!=null?e:[]}updateFive(e){super.updateFive(e),this.domEvents.dispose(),this.domEvents=new Xs(e)}addRenderQueue(e){var o,a;const{type:i,keys:s=[],tags:r=[]}=e;this.renderQueue.has(i)?this.renderQueue.set(i,{keys:Array.from(new Set([...(o=this.renderQueue.get(i).keys)!=null?o:[],...s])),tags:Array.from(new Set([...(a=this.renderQueue.get(i).tags)!=null?a:[],...r]))}):this.renderQueue.set(i,{keys:s,tags:r})}getTagById(e){const i=this.tags.find(s=>s.id===e);if(!i){console.warn(`getTagById Error: can't find tag id: ${e}`);return}return i}pauseCurrentMedia(){this.mediaStore.set({currentMediaElement:null})}getTagConfig(e,i){var a,l,c;const s=this.calculateTagConfig(e,{useCache:i==null?void 0:i.useCache}),r=(a=i==null?void 0:i.fiveMode)!=null?a:this.five.getCurrentState().mode,o=(l=s.configWithFiveMode)==null?void 0:l[r];return(c=o!=null?o:s)!=null?c:{}}getPositions(e){if(KC(e))return e.position;if(Is(e))return e.data.mediaPosition;if($C(e))return i4(this.five.camera.position,Qe(e.position),Qe(e.normal))}addObjectClickHandler(e,i,s){if(!i||!this.domEvents)return()=>{};const r=()=>!(!e.currentVisible||e.loading),o=a=>{if(!r())return!1;s(a.origDomEvent)};return this.domEvents.addEventListener(i,"click",o),()=>{var a;(a=this.domEvents)==null||a.removeEventListener(i,"click",o)}}checkDisposed(){return this.store.disposed?(console.error("PanoTagPluginController has been disposed"),!0):!1}calculateTagConfig(e,i){var p,m,v,b,w;const s=(p=i==null?void 0:i.useCache)!=null?p:!0;if(!e)return(m=this.config.globalConfig)!=null?m:{};if(s){if((v=e==null?void 0:e.computedConfig)!=null&&v._isMerged)return e.computedConfig;if((b=e==null?void 0:e.config)!=null&&b._isMerged)return e.config}const r={},o={},a={};this.config.contentTypeConfig&&Object.entries(this.config.contentTypeConfig).forEach(([x,E])=>{var C,I;const L=x,S=L.split("-"),R=x.startsWith("["),z=R?S[0].slice(1,-1):void 0,O=R?S.slice(1):S,A=z?["PanoramaLike","ModelLike"].includes(z)?(C=o[z])!=null?C:o[z]={}:(I=a[z])!=null?I:a[z]={}:r;if(!A[L]){if(O.length===0&&(A[L]=E),O.length===1){const[M]=O;(e.contentType===M||M==="Any")&&(A[L]=E)}if(O.length===2){const[M="Any",D="Any"]=O;M==="Mixin"&&e.contentType===D&&(A[L]=E),(e.stickType===M||M==="Any")&&(e.contentType===D||D==="Any")&&(A[L]=E)}if(O.length===3){const[M="Any",D,T]=O;if(D==="Audio"&&e.contentType==="Audio"){const H=e;(H.stickType===M||M==="Any")&&H.data.appearance===T&&(A[L]=E)}}}});const l=(w=e.initialConfig)!=null?w:{},c=Ke({},fh,this.config.globalConfig,...Object.values(r)),h=Ke({},c,l),d={},f=Object.values(Ye.Five.Mode);$a(o).forEach(([x,E])=>{f.forEach(L=>{(x==="PanoramaLike"&&In(L)||x==="ModelLike"&&oi(L))&&(d[L]=Ke({},c,...Object.values(E),l,{_isMerged:!0}))})}),$a(a).forEach(([x,E])=>{const L=d[x];d[x]=Ke({},c,L,...Object.values(E),l,{_isMerged:!0})});const g=fe(F({},h),{configWithFiveMode:d});return el(g),Object.values(d).forEach(x=>el(x)),g._isMerged=!0,g}}class v4 extends g4{constructor(e){super(e);u(this,"rendererMap",new Map);u(this,"contentTypeMap",new Map);u(this,"group",new B.Group);u(this,"imagePlaneGroup",new B.Group);u(this,"gltfObjectGroup",new B.Group);u(this,"enabledModelTagSet",new Set);u(this,"temporaryState",{visible:!0});u(this,"TagContainerSvelte");this.group.name="PanoTagPluginModelGroup",this.gltfObjectGroup.name="PanoTagPluginGLTFObjectGroup",this.imagePlaneGroup.name="ImagePlaneGroup",this.group.add(this.gltfObjectGroup),this.group.add(this.imagePlaneGroup)}registerRenderer(e,i,s){var r;this.rendererMap.set(e,{renderer:i,usePoint:(r=s==null?void 0:s.usePoint)!=null?r:!1})}bindRenderer(e,i){this.contentTypeMap.set(e,i)}disposeAllCSS3DContainer(){for(const[,e]of this.store.css3DRenderDisposer)e==null||e.forEach(i=>i==null?void 0:i());this.store.css3DRenderDisposer=new Map}clearUnusedPanelTag(){this.filter2DPointTag.forEach(e=>{var i;(i=e.tag3DContentSvelte)==null||i.dispose(),e.tag3DContentSvelte=void 0});for(const[e,i]of this.store.css3DRenderDisposer){const s=this.getTagById(e);(!s||s.stickType==="2DPoint")&&(i==null||i.forEach(r=>r==null?void 0:r()),this.store.css3DRenderDisposer.delete(e))}}}class A4{constructor(t){u(this,"plugin");u(this,"logBound",!1);u(this,"bindLogByObject",t=>{Object.getOwnPropertyNames(t).forEach(e=>{try{typeof t[e]=="function"&&(t[e]=new Proxy(t[e],{apply:(i,s,r)=>(["render"].includes(e)||this.log(e,{obj:t},...r),i.apply(s,r))}))}catch(i){}})});this.plugin=t}get debug(){return this.plugin.debug}addDebugPoints(){try{qC(this.plugin.five,this.plugin.tags)}catch(t){console.error(t)}}bindLog(){this.logBound||(this.logBound=!0,this.bindLogByObject(this.plugin),this.bindLogByObject(this.plugin.constructor.prototype))}log(t,...e){let i=new Error().stack;console.debug(`%cPanoTagPlugin%c${t}`,"background-color: #35e0ed; color: black; padding:0 6px; border-radius: 3px","padding: 0 3px; color: #f3f47c",...e,{stack:i})}closeIntersectRaycaster(){this.plugin.tags.forEach(t=>{var e;ys((e=t==null?void 0:t.initialConfig)==null?void 0:e.visibleConfig).intersectRaycaster&&(t.initialConfig.visibleConfig.intersectRaycaster.enabled=!1)}),this.plugin.changeGlobalConfig({visibleConfig:{intersectRaycaster:{enabled:!1}}})}}function gh(n,t,e){var g,p,m,v,b;const i=(g=e==null?void 0:e.useCache)!=null?g:!0;if(!n)return(p=t.globalConfig)!=null?p:{};if(i){if((m=n==null?void 0:n.computedConfig)!=null&&m._isMerged)return n.computedConfig;if((v=n==null?void 0:n.config)!=null&&v._isMerged)return n.config}const s={},r={},o={};t.contentTypeConfig&&Object.entries(t.contentTypeConfig).forEach(([w,x])=>{var A,C;const E=w,L=E.split("-"),S=w.startsWith("["),R=S?L[0].slice(1,-1):void 0,z=S?L.slice(1):L,O=R?["PanoramaLike","ModelLike"].includes(R)?(A=r[R])!=null?A:r[R]={}:(C=o[R])!=null?C:o[R]={}:s;if(!O[E]){if(z.length===0&&(O[E]=x),z.length===1){const[I]=z;(n.contentType===I||I==="Any")&&(O[E]=x)}if(z.length===2){const[I="Any",M="Any"]=z;I==="Mixin"&&n.contentType===M&&(O[E]=x),(n.stickType===I||I==="Any")&&(n.contentType===M||M==="Any")&&(O[E]=x)}if(z.length===3){const[I="Any",M,D]=z;if(M==="Audio"&&n.contentType==="Audio"){const T=n;(T.stickType===I||I==="Any")&&T.data.appearance===D&&(O[E]=x)}}}});const a=(b=n.initialConfig)!=null?b:{},l=Ke({},fh,t.globalConfig,...Object.values(s)),c=Ke({},l,a),h={},d=Object.values(Ye.Five.Mode);$a(r).forEach(([w,x])=>{d.forEach(E=>{(w==="PanoramaLike"&&In(E)||w==="ModelLike"&&oi(E))&&(h[E]=Ke({},l,...Object.values(x),a,{_isMerged:!0}))})}),$a(o).forEach(([w,x])=>{const E=h[w];h[w]=Ke({},l,E,...Object.values(x),a,{_isMerged:!0})});const f=fe(F({},c),{configWithFiveMode:h});return el(f),Object.values(h).forEach(w=>el(w)),f._isMerged=!0,f}function qm(n){const t=n.split("?")[0].split(".").pop();return t?t.toLowerCase():""}function b4(n,t){if(!n)return 0;const e=n.observers;if(!t||!e)return console.error("getFloorIndex: invalid arguments: ",{point:t,observer:e}),0;const i=[];e.forEach(r=>{var a,l,c;const o=(l=(a=r.floorIndex)!=null?a:r.floor_index)!=null?l:0;i[o]||(i[o]=[]),i[o].push(Ns(r.position,(c=n.options)==null?void 0:c.transform).y)});const s=i.map(r=>r.reduce((o,a)=>o+a,0)/r.length);for(let r=s.length-1;r>0;r--)if(t.y>=s[r])return r;return 0}function Ms(){let n,t;return{promise:new Promise((i,s)=>{n=i,t=s}),resolve:n,reject:t}}class vh{constructor(t,e){u(this,"plugin");u(this,"id");u(this,"contentType");u(this,"stickType");u(this,"enabled");u(this,"config");u(this,"data");u(this,"state");u(this,"temporaryState",{visible:!0});u(this,"originPosition");u(this,"position");u(this,"fiveState");u(this,"model");u(this,"matrix");u(this,"screenPosition");u(this,"normal");u(this,"mediaPlane");u(this,"hooks");u(this,"zIndex");u(this,"play");u(this,"pause");u(this,"tag3DContentSvelte");u(this,"dom");u(this,"contentDom");u(this,"initialConfig");u(this,"computedConfig");u(this,"cache");u(this,"entryFromModel");u(this,"_updating",!1);u(this,"hoverEnabled");u(this,"ready",()=>{const{promise:t,resolve:e}=Ms();if(!this._updating)e();else{const i=setInterval(()=>{this._updating||(clearInterval(i),e())},17);setTimeout(()=>{clearInterval(i),e()},300)}return t});var c,h,d,f,g,p;this.plugin=t;const i=dh(e);e.stickType=i;const s=JSON.parse(JSON.stringify(e.data)),r=(c=e.initialConfig)!=null?c:e.config?JSON.parse(JSON.stringify(e.config)):{};e.initialConfig=r;const o=gh(e,t.config),a=this.getConfig(e);e.config=a,this.id=(h=e.id)!=null?h:Et(),this.enabled=(d=e.enabled)!=null?d:!0,this.contentType=e.contentType,this.hoverEnabled=(g=(f=a.popoverConfig)==null?void 0:f.enabled)!=null?g:!0,this.data=(p=a.initialData)!=null&&p.important?Ke(e.data,s,a.initialData):Ke(e.data,a.initialData,s);let l;typeof a.unfoldedConfig=="object"?a.unfoldedConfig.keep==="unfolded"?l=!0:a.unfoldedConfig.keep==="folded"?l=!1:l=!this.can("fold"):l=!this.can("fold"),this.state=F({visible:void 0,unfolded:l},a.initialState),this.isPopoverConfigEnabled()&&(this.state.unfolded=!1),this.originPosition=e.position,e.originPosition=this.originPosition,this.position=(()=>{const m=e.originPosition;if(!m)return;const v=t.workUtil.transform;return Array.isArray(m)&&m.length===4?m.map(Qe).map(b=>Ns(b,v).toArray()):Ns(Qe(m),v).toArray()})(),this.matrix=e.matrix?(()=>{const m=new P.Matrix4().fromArray(e.matrix);return m.premultiply(t.workUtil.transform),m.elements})():e.matrix,this.initialConfig=r,this.computedConfig=o,this.stickType=i,this.config=e.config,this.fiveState=e.fiveState,this.normal=e.normal,this.cache=new Ao,this.hooks=new Pt,Object.keys(e).forEach(m=>{this[m]===void 0&&e[m]!==void 0&&(this[m]=e[m])})}get visible(){var t;return((t=this.temporaryState)==null?void 0:t.visible)!==!1&&this.state.visible!==!1&&this.enabled!==!1}get five(){return this.plugin.five}get fiveUtil(){return this.plugin.fiveUtil}get workUtil(){return this.plugin.workUtil}get centerPosition(){const t=lh(this);return Ut(...Array.isArray(t)?t:[t])}get currentConfig(){var s,r;const t=gh(this,this.plugin.config,{useCache:!0}),e=this.five.getCurrentState().mode,i=(s=t.configWithFiveMode)==null?void 0:s[e];return(r=i!=null?i:t)!=null?r:{}}get currentVisible(){return!(!this.plugin.state.enabled||!this.plugin.state.visible||!this.enabled||!this.state.visible)}get sharedCache(){return this.plugin.cache}applyVisible(){throw new Error("Method not implemented.")}find(t){return ee(this,null,function*(){var s;const e=this.fiveState;if(!this.fiveState)return this;const i=(s=t==null?void 0:t.targetMode)!=null?s:this.five.state.mode;if(i==="Panorama"){const r=e==null?void 0:e.panoIndex;if(ei(r))return this;const o=this.workUtil.getObserverPosition(r),a=this.centerPosition.clone().sub(o).normalize();this.five.setState(F({mode:"Panorama",workCode:this.workUtil.workCode,panoIndex:r},Xr(a))),yield this.five.ready()}else i==="Mapview"&&(yield wu(this.five,this.centerPosition,t==null?void 0:t.pointConfig));return this})}blink(t){return ee(this,null,function*(){var a,l,c,h;yield this.ready();const e=(a=this.enabled)!=null?a:!0,i=(l=this.state)==null?void 0:l.visible,s=e&&i;s===!1&&(this.state.visible=!0,this.enabled=!0,this.applyVisible(),this.plugin.render(),this.computeRenderType()!=="Mesh"?yield new Promise(d=>ee(this,null,function*(){if(this.dom||this.contentDom){d();return}const f=setInterval(()=>{(this.dom||this.contentDom)&&(d(),clearInterval(f))},16.7)})):this.stickType==="Model"&&!((c=this.model)!=null&&c.object)?yield(h=this.model)==null?void 0:h.promise:this.stickType==="Plane"&&(yield new Promise(d=>ee(this,null,function*(){if(this.mediaPlane){d();return}const f=setInterval(()=>{this.mediaPlane&&(d(),clearInterval(f))},16.7)}))),this.dom&&(this.dom.style.visibility="hidden"),this.contentDom&&(this.contentDom.style.visibility="hidden"));const r=(()=>{var f,g,p;const d=[];return d.push(this.dom),d.push((g=(f=this.tag3DContentSvelte)==null?void 0:f.css3DInstance)==null?void 0:g.container),d.push((p=this.model)==null?void 0:p.object),d.push(this.mediaPlane),d.filter(Boolean)})();if(!r.length){console.warn("tagDom is empty");return}yield(s?oa:gu)(r,F({begin:()=>{s===!1&&(this.dom&&(this.dom.style.visibility=""),this.contentDom&&(this.contentDom.style.visibility=""))},updateRender:()=>{this.five.needsRender=!0}},t)).finished,e===!1&&(this.enabled=!1,this.updateVisible()),i===!1&&this.updateVisible(),s===!1&&(this.dom&&(this.dom.style.visibility=""),this.contentDom&&(this.contentDom.style.visibility=""))})}unfold(){}unfoldAndFoldOthers(){}fold(){}enable(){this.enabled=!0,this.hooks.emit("enable"),this.applyVisible()}disable(){this.enabled=!1,this.hooks.emit("disable"),this.applyVisible()}changeData(t,e=!0){return this.setData(t,e)}changePosition(t){return this.setPosition(t)}setData(t,e=!0){e?this.data=Ke(this.data,t):this.data=F(F({},this.data),t),this.hooks.emit("dataChanged",this.data)}setPosition(t){throw new Error("Method not implemented.")}set(t,e=!0){this.plugin.tagsLengthWillUpdate=!0,e?Ke(this,t):Object.assign(this,t),this.cache.clear()}updateConfig(){var i;const t=this.getConfig(void 0,{useCache:!1});this.computedConfig=t;const e=this.getConfig();if(this.config=e,this.config.initialData){const s=JSON.parse(JSON.stringify(this.data));this.data=(i=e.initialData)!=null&&i.important?Ke(this.data,s,e.initialData):Ke(this.data,e.initialData,s)}this.cache.clear()}updateVisible(){this.enabled?(this.state.visible=this.getVisible(),this.applyVisible()):this.applyVisible(),this._updating=!1}updateZIndex(){const t=this.getSquaredDistance();this.zIndex=Math.round((1e4-(t!=null?t:0))*100)}getConfig(t,e){var o,a,l;const i=gh(t!=null?t:this,this.plugin.config,{useCache:e==null?void 0:e.useCache}),s=(o=e==null?void 0:e.fiveMode)!=null?o:this.five.getCurrentState().mode,r=(a=i.configWithFiveMode)==null?void 0:a[s];return(l=r!=null?r:i)!=null?l:{}}getDistance(t,e=3){const i=F(F({},this.five.getCurrentState()),t),{panoIndex:s,mode:r}=i,o=r==="Panorama"?this.workUtil.getObserverPosition(s):this.five.camera.position,a=this.centerPosition;return!o||!a?-1:o.distanceTo(a)}getSquaredDistance(){const t=this.five.camera.position;let e;return Array.isArray(this.position[0])?e=this.position[0]:e=this.position,Il(e[0]-t.x,2)+Il(e[1]-t.y,2)+Il(e[2]-t.z,2)}getVisible(t){if(!this.enabled||!this.plugin.state.enabled||!this.fiveUtil.model)return!1;const e=F(F({},this.five.getCurrentState()),t);let i=this.cache.getVisible(this,e);return ei(i)&&(i=this.computeVisible(e).value,this.cache.setVisible(this,e,i)),i}getUnfoldedByPanoIndex(t){if(!this.currentVisible)return;const i=this.computeUnfoldedByPanoIndex(t);return i&&this.getUnfoldedByCamera()}getUnfoldedByCamera(){return this.currentVisible?this.computeUnfoldedByCamera():void 0}can(t){var i,s;if((t==="fold"||t==="unfold")&&((s=(i=this.currentConfig)==null?void 0:i.popoverConfig)==null?void 0:s.enabled)===!0)return!1;const e=this.currentConfig;if(!e||typeof e!="object")return!0;if(t==="show"||t==="hide"){if(!e.visibleConfig||typeof e.visibleConfig!="object")return!0;if(t==="show"&&e.visibleConfig.keep==="hidden"||t==="hide"&&e.visibleConfig.keep==="visible")return!1}if(t==="fold"||t==="unfold"){if(!e.unfoldedConfig||typeof e.unfoldedConfig!="object")return!0;if(t==="fold"&&e.unfoldedConfig.keep==="unfolded"||t==="unfold"&&e.unfoldedConfig.keep==="folded")return!1}return!0}onClick(t){}computeRenderType(){const t=(()=>{if(this.stickType==="3DPoint")return"Dom";const e=this.getConfig();if(!e||typeof e!="object"||!e.renderType)return;const i=this.data.mediaData;if(!(!i||i.length===0)&&e.renderType==="Mesh"){if(t4(this)){if(i.length===1){if(i[0].type==="Video")return navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1?"Dom":"Mesh";if(i[0].type==="Image")return qm(i[0].url)==="gif"?"Dom":"Mesh"}}else if(Is(this))return i.length===1&&i[0].type==="Image"?qm(i[0].url)==="gif"?"Dom":"Mesh":"BehindDom"}})();return t!=null?t:"Dom"}computeVisible(t){const e=F(F({},this.five.getCurrentState()),t),{panoIndex:i,mode:s}=e,r=[];return(()=>{var c,d,f,g;const l=(c=this.getConfig().visibleConfig)!=null?c:{};if(typeof l=="function")return{value:l(this.five,{tag:this,distance:this.getDistance(e,void 0)}),checkedList:r,reason:"config function result"};{if(l.keep==="hidden")return{value:!1,checkedList:r,reason:"config.keep is hidden"};if(l.keep==="visible")return{value:!0,checkedList:r,reason:"config.keep is visible"};const p=this.computeVisibleByFiveMode(l,s);if((p==null?void 0:p.value)===!1)return p;if(l.followModelVisibility===!0&&["poincare","aerophoto","sand"].includes(this.workUtil.fromType)&&(s==="Floorplan"||s==="Mapview")){const h=this.computeVisibleByFloorIndex(),{value:m}=h,v=rs(h,["value"]);if(m===!1)return F({value:!1,checkedList:r,reason:"followModelVisibility check failed"},v)}if(In(s)&&l.visiblePanoIndex!==void 0&&l.visiblePanoIndex!=="all"&&i!==void 0){if(r.push("visiblePanoIndex"),Array.isArray(l.visiblePanoIndex)&&!l.visiblePanoIndex.includes(i))return{value:!1,checkedList:r,reason:`current panoIndex is not included in visiblePano. currentPanoIndex: ${i}, visiblePanoIndex: ${l.visiblePanoIndex}`};if(l.visiblePanoIndex==="current"&&i!==((d=this.fiveState)==null?void 0:d.panoIndex))return{value:!1,checkedList:r,reason:`current panoIndex is not equal to tag.panoIndex. currentPanoIndex: ${i}, tag.panoIndex: ${(f=this.fiveState)==null?void 0:f.panoIndex}`}}if(l.visibleDistance!==void 0&&(r.push("visibleDistance"),l.visibleDistance!=="unLimited")){const m=this.getDistance(e,1);if(qa(m,l.visibleDistance)===!1)return{value:!1,checkedList:r,panoIndex:i,visibleDistance:l.visibleDistance,reason:`distance is not in visibleDistance. distance: ${m}, visibleDistance: ${l.visibleDistance.min} - ${l.visibleDistance.max}`}}if(l.intersectRaycaster!==!1&&(typeof l.intersectRaycaster!="object"||l.intersectRaycaster.enabled!==!1)){if(r.push("intersectRaycaster"),i===void 0)return{value:!1,checkedList:r,reason:`intersectRaycaster check failed: panoIndex is ${i}`};if(i===((g=this.fiveState)==null?void 0:g.panoIndex))r.push("intersectCheckSkiped");else{const m=this.computeVisibleByIntersect(i);if(m.value===!1)return Object.assign(m,{checkedList:r})}}return{value:!0,checkedList:r,reason:"all check passed"}}})()}computeVisibleByFiveMode(t,e){const i=()=>{var o,a;let r=typeof t.visibleFiveMode=="function"?t.visibleFiveMode(this):t.visibleFiveMode;if(r||(r=(a=(o=this.fiveState)==null?void 0:o.mode)!=null?a:this.workUtil.observers.length?"Panorama":"ModelLike"),Array.isArray(r))return r.includes(e);if(r==="ModelLike")return oi(e);if(r==="PanoramaLike")return!In(e);if(r==="all")return!0;if(typeof r=="string")return r===e};if((()=>{var o;const r=i();if(Fe((o=this.fiveState)==null?void 0:o.panoIndex)&&t.entryFromModel){if(oi(e)&&r?this.entryFromModel=!1:this.entryFromModel=!0,oi(e))return!0}else this.entryFromModel=!1;return r})()===!1)return{value:!1,reason:"current mode is not included in visibleFiveMode",visibleFiveMode:t.visibleFiveMode,mode:e}}computeVisibleByIntersect(t){var l,c,h,d;const e=ys(ys((l=this.getConfig().visibleConfig)!=null?l:{}).intersectRaycaster),i=t!=null?t:this.five.getCurrentState().panoIndex,s=In(this.five.getCurrentState().mode)?this.workUtil.getObserverPosition(i):this.five.camera.position;if(s===void 0)return{value:!1,reason:{type:"startPosition is undefined",fivePanoIndex:i}};const r=nn((()=>{var g;const f=(g=e.checkPoints)!=null?g:"center";return f==="center"?Fm(this):f==="corner"?lh(this):Array.isArray(f)?f:[]})());let o=0,a=0;for(const f of r){const g=new P.Vector3().subVectors(f,s).normalize();let p;en.set(s,g);const[m]=this.fiveUtil.model.intersectRaycaster(en);p=m==null?void 0:m.distance;const v=(()=>{if(!Is(this))return;const L=this.plugin.tags.filter(Is).map(R=>{var z;return(z=R.model)==null?void 0:z.object}).filter(Fe),[S]=en.intersectObjects(L,!0);return S})(),b=s.distanceTo(f),w=(c=e.distanceAccuracy)!=null?c:.01;p=Math.min(p!=null?p:1/0,(h=v==null?void 0:v.distance)!=null?h:1/0),p+w>=b?o++:a++;const E=(d=e.needPassed)!=null?d:1;if(o>=E)return{value:!0}}return a===0?{value:!0}:{value:!1,reason:{type:"intersectRaycaster check failed",passedCount:o,needPassed:e.needPassed,model:this.fiveUtil.model.name}}}computeVisibleByFloorIndex(){var s,r,o,a,l,c,h;let t=0;const e=(s=this.fiveState)==null?void 0:s.panoIndex;e!==void 0?t=(r=this.workUtil.getObserver(e))==null?void 0:r.floorIndex:t=b4(this.workUtil.work,(h=(c=(a=(o=this.model)==null?void 0:o.object)==null?void 0:a.position)!=null?c:(l=this.mediaPlane)==null?void 0:l.position)!=null?h:Fm(this));const i=this.fiveUtil.model.shownFloor;return{value:i===null||i===t,currentFiveFloorIndex:i,tagFloorIndex:t}}computeUnfoldedByPanoIndex(t){const e=this.getConfig().unfoldedConfig;if(e){if(typeof e=="function")return e(this.five,{tag:this,distance:this.getDistance({panoIndex:t})});if(e.keep==="folded")return!1;if(e.keep==="unfolded")return!0;if(e.unfoldDistance&&qa(this.getDistance({panoIndex:t}),e.unfoldDistance)===!1)return!1}}computeUnfoldedByCamera(){var e;if(this.entryFromModel&&oi(this.five.state.mode))return!1;const t=this.getConfig().unfoldedConfig;if(t){if(typeof t=="function")return t(this.five,{tag:this,distance:this.getDistance()});if(t.keep==="folded")return!1;if(t.keep==="unfolded")return!0;if(t.autoUnfold===void 0||t.autoUnfold===!1||t.autoUnfold.enable===!1||!t.autoUnfold.strategy)return;if(t.autoUnfold.strategy==="ScreenPostion"){const i=this.computeTagProject();if(i&&qa(i.x,t.autoUnfold.autoUnfoldProjectX)===!1)return!1}if(t.autoUnfold.strategy==="MinimumDistance"){const r=this.plugin.filterPointTag.filter(a=>a.currentVisible).filter(a=>{const l=this.computeTagProject();if(!l)return!1;const{x:c,y:h,z:d}=l;return!(Math.abs(d)>1||Math.abs(c)>1||Math.abs(h)>1)}).map(a=>({tag:a,id:a.id,tagConfig:a.getConfig().unfoldedConfig})).filter(({tagConfig:a})=>{var l,c;return!(typeof a=="function"||a.keep||a.autoUnfold===!1||((l=a.autoUnfold)==null?void 0:l.enable)===!1||((c=a.autoUnfold)==null?void 0:c.strategy)!=="MinimumDistance")}).map(a=>fe(F({},a),{distance:a.tag.getDistance()})).filter(({distance:a,tagConfig:l})=>{const c=l.autoUnfold.distance;return!(c&&qa(a,c)===!1)}).sort((a,l)=>a.distance-l.distance).findIndex(a=>a.id===this.id);if(r===-1||r<=((e=t.autoUnfold.maxNumber)!=null?e:1)-1===!1)return!1}return t.autoUnfold.strategy!=="FoldWhenMove"}}computeTagProject(){const t=this.centerPosition;if(!t)return;const{x:e,y:i,z:s}=t.project(this.five.camera);if(!(s>1))return{x:e,y:i,z:s}}addObjectClickHandler(t,e,i){if(!e||!this.plugin.domEvents)return()=>{};const s=()=>!(!t.currentVisible||t.loading),r=o=>{if(!s())return!1;i(o.origDomEvent)};return this.plugin.domEvents.addEventListener(e,"click",r),()=>{var o;(o=this.plugin.domEvents)==null||o.removeEventListener(e,"click",r)}}whyHide(){var e;if(!this.plugin.state.enabled)return{reason:`plugin.state.enabled is ${this.plugin.state.enabled}`};if(!this.plugin.state.visible)return{reason:`plugin.state.visible is ${this.plugin.state.visible}`};if(!this.enabled)return{reason:`tag ${this.id} enabled is: ${this.enabled}`};const t=fe(F({},this.computeVisible()),{tagInstance:this});return t.value!==this.state.visible?{reason:"插件故障，请联系维护人员, err: 0",info:t}:this.state.visible?{reason:"应该是能看见才对",info:t}:t.value===!0?{reason:"插件故障，请联系维护人员, err: 1",info:t}:{reason:(e=t.reason.type)!=null?e:t.reason,info:t}}destroy(){var e,i;const t=this.plugin.tags.findIndex(s=>s.id===this.id);if(t===-1){console.warn(`Destroy failed: tag ${this.id} not found`);return}this.disable(),(i=(e=this.tag3DContentSvelte)==null?void 0:e.dispose)==null||i.call(e),this.hooks.off(),this.cache.clear(),this.plugin.tags.splice(t,1),this.plugin.tagsLengthWillUpdate=!0,this.plugin.hooks.emit("tagsLengthChange")}isPopoverConfigEnabled(){var t,e;return((e=(t=this.currentConfig)==null?void 0:t.popoverConfig)==null?void 0:e.enabled)===!0}isHoverEnabled(){var t;return!(((t=this.plugin)==null?void 0:t.globalHoverEnabled)===!1||this.hoverEnabled===!1)}}const y4=new P.Vector2;class w4 extends vh{constructor(e,i){super(e,i);u(this,"__Object__");u(this,"requestIdleCallbackId")}unfoldAndFoldOthers(){if(this.isPopoverConfigEnabled())return;const e=this.can("fold"),i=this.can("unfold");e&&i&&(this.state.unfolded=!this.state.unfolded,this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),this.state.unfolded&&this.plugin.tags.forEach(s=>{s.id!==this.id&&s.fold()}))}onClick(e){e.target==="TagPoint"&&this.unfoldAndFoldOthers()}applyVisible(){var e,i;this.currentVisible&&this.updateScreenPosition(),(e=this.tag3DContentSvelte)!=null&&e.css3DInstance&&(this.tag3DContentSvelte.css3DInstance.visible=this.visible),(i=this.tag3DContentSvelte)==null||i.svelteApp.$set({state:this.plugin.state,temporaryState:this.temporaryState}),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}unfold(){this.isPopoverConfigEnabled()||this.setUnfold(!0)}fold(){this.isPopoverConfigEnabled()||this.setUnfold(!1)}setUnfold(e){if(this.isPopoverConfigEnabled())return;const i=this.can("fold"),s=this.can("unfold");i&&s&&(this.state.unfolded=e,this.hooks.emit(e?"unfolded":"folded"),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}))}setPosition(e){this.originPosition=e,this.position=e,this.cache.clear(),this.updateVisible(),this.updateScreenPosition(),this.updateZIndex(),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}updateScreenPosition(e){var a;if(this.stickType!=="2DPoint"&&this.stickType!=="3DPoint")return;const{force:i=!1}=e!=null?e:{},s=i?this.state.visible:this.currentVisible,r=(a=this.__Object__)!=null?a:{timeoutId:void 0,inAnimation:!1};if(this.__Object__=r,!s&&this.screenPosition?(r.inAnimation=!0,r.timeoutId=setTimeout(()=>{requestAnimationFrame(()=>{this.currentVisible||(r.inAnimation=!1,this.screenPosition=null,this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}))})},1e3)):r.timeoutId&&(clearTimeout(r.timeoutId),r.inAnimation=!1,r.timeoutId=void 0),!s&&!r.inAnimation)return;const o=this.computeTagProject();if(o&&this.five.renderer){const l=(()=>{if(!this.currentConfig.simulate3D)return 1;const h=2*Math.tan(.5*this.five.camera.fov/180*Math.PI),d=this.getDistance(void 0,1);return Math.max(Math.min(1-h*d/40,1),.7)})(),c=this.five.renderer.getSize(y4);this.screenPosition={leftPx:(o.x+1)/2*c.x,topPx:(-o.y+1)/2*c.y,scale:l}}else this.screenPosition=null;this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}set(e,i=!0){super.set(e,i),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),e.position&&this.setPosition(this.position)}setData(...e){super.setData(...e),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}updateUnfoldedByPanoIndex(){if(this.isPopoverConfigEnabled())return;const e=this.getUnfoldedByPanoIndex();if(this.state&&(e!==void 0&&(this.state.unfolded=e),e&&!this.state.visible)){const i=this.getConfig();typeof i.unfoldedConfig=="object"&&i.unfoldedConfig.autoFoldWhenHide!==!1&&(this.state.unfolded=!1)}}computeNormal(){return new P.Vector3().fromArray(this.normal)}}const Km=1,$m=`CSS3DObject@${Km}`,P4=.00216,C4=.003;class eg extends tn{constructor(e){var L,S,R,z,O;if(ei(e.cornerPoints)&&ei(e.width))throw new Error("cornerPoints and width cannot be both empty");const i=(L=e.container)!=null?L:document.createElement("div"),s=(S=e.cornerPoints)!=null?S:(()=>{const A=e.width/2;return[new B.Vector3(-A,A,0),new B.Vector3(-A,-A,0),new B.Vector3(A,-A,0),new B.Vector3(A,A,0)]})(),r=(R=e.ratio)!=null?R:C4,o=(z=e.dpr)!=null?z:1,a=(O=e.pointerEvents)!=null?O:"auto",l=Math.max(P4,r),c=s[0].distanceTo(s[1]),h=s[1].distanceTo(s[2]);let d=Gs(c/r*o),f=Gs(h/r*o);const g=Ut(...s);let p;if(l===r)i.style.width=`${d}px`,i.style.height=`${f}px`,p=i;else{const A=document.createElement("div");A.style.width=`${d}px`,A.style.height=`${f}px`,A.style.pointerEvents="none";const C=r/l;i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.width=`${C*d}px`,i.style.height=`${C*f}px`,A.appendChild(i),p=A}super(p);u(this,"version",Km);u(this,"isCSS3DObject",!0);u(this,"name",$m);u(this,"container");u(this,"width");u(this,"height");u(this,"domWidthPx");u(this,"domHeightPx");u(this,"cornerPoints");u(this,"centerPosition");u(this,"ratio");u(this,"_mode","front");u(this,"_opacityMesh");if(p.id=this.id.toString(),i.style.pointerEvents=a,Object.assign(i.style,e.style),this.scale.set(l,l,l),this.cornerPoints=s,this.ratio=r,this.container=i,e.mode&&(this.mode=e.mode),l===r)this.width=c,this.height=h,this.centerPosition=g;else{const A=r/l;this.width=A*c,this.height=A*h,d=A*d,f=A*f,this.centerPosition=new B.Vector3().subVectors(g,s[0]).multiplyScalar(A).add(s[0])}this.domWidthPx=d,this.domHeightPx=f,i.classList.add(`${$m}__container`);const m=new B.Vector3().subVectors(s[1],s[0]),v=new B.Vector3().subVectors(s[3],s[0]),b=new B.Vector3().crossVectors(m,v).normalize();this.lookAt(b);const w=this.up.clone().applyQuaternion(this.quaternion),x=v.clone(),E=new B.Vector3().crossVectors(w,x).normalize();this.rotateOnWorldAxis(E,w.angleTo(x)),this.position.copy(g),this._opacityMesh=new Bd(d,f),this._opacityMesh.visible=e.mode==="behind",this.add(this._opacityMesh)}get mode(){return this._mode}set mode(e){this._mode=e,this._opacityMesh&&(this._opacityMesh.visible=e==="behind")}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}dispose(){this.container.remove(),this.removeFromParent()}}const I4=new Ro.GLTFLoader;function M4(n){return new Promise((t,e)=>{function i(r){t(r)}function s(r){e(r)}I4.load(n,i,void 0,s)})}function k4(n){De(n,"svelte-xuejcm",".line.svelte-xuejcm{position:absolute;pointer-events:none}.line.vertical.svelte-xuejcm{transform:rotate(-90deg) translate3d(0.03125rem, 0, 0.625rem);transform-origin:0 0}.line.horizontal.svelte-xuejcm{transform:translate3d(0, -0.03125rem, 0.625rem)}.straight-line.svelte-xuejcm{display:block;width:100%;height:100%;overflow:visible}")}function tg(n){let t,e,i,s,r,o,a,l=n[3]&&ig(n);return{c(){t=U("div"),e=ye("svg"),i=ye("defs"),s=ye("linearGradient"),r=ye("stop"),o=ye("stop"),l&&l.c(),y(r,"offset","25%"),y(r,"stop-color",n[5]),y(r,"stop-opacity","1"),y(o,"offset","100%"),y(o,"stop-color",n[5]),y(o,"stop-opacity","0.5"),y(s,"x1",.5),y(s,"y1",.5),y(s,"x2",n[8]),y(s,"y2",.5),y(s,"id",n[10]),y(s,"gradientUnits","userSpaceOnUse"),y(e,"class","straight-line svelte-xuejcm"),y(e,"viewBox",a="0 0 "+n[8]+" "+n[7]),y(e,"preserveAspectRatio","none"),y(t,"class","line svelte-xuejcm"),we(t,"vertical",n[9]),we(t,"horizontal",!n[9]),Q(t,"width",n[8]+"px"),Q(t,"height",n[7]+"px")},m(c,h){Y(c,t,h),V(t,e),V(e,i),V(i,s),V(s,r),V(s,o),l&&l.m(e,null)},p(c,h){h&32&&y(r,"stop-color",c[5]),h&32&&y(o,"stop-color",c[5]),h&256&&y(s,"x2",c[8]),c[3]?l?(l.p(c,h),h&8&&N(l,1)):(l=ig(c),l.c(),N(l,1),l.m(e,null)):l&&(Ee(),Z(l,1,1,()=>{l=null}),xe()),h&384&&a!==(a="0 0 "+c[8]+" "+c[7])&&y(e,"viewBox",a),h&512&&we(t,"vertical",c[9]),h&512&&we(t,"horizontal",!c[9]),h&256&&Q(t,"width",c[8]+"px"),h&128&&Q(t,"height",c[7]+"px")},d(c){c&&X(t),l&&l.d()}}}function ig(n){let t,e,i,s,r;return{c(){t=ye("path"),y(t,"fill","none"),y(t,"stroke",e=n[4]?`url(#${n[10]})`:n[5]),y(t,"stroke-width",1),y(t,"d",n[6])},m(o,a){Y(o,t,a),r=!0},p(o,a){n=o,(!r||a&48&&e!==(e=n[4]?`url(#${n[10]})`:n[5]))&&y(t,"stroke",e),(!r||a&64)&&y(t,"d",n[6])},i(o){r||(o&&pt(()=>{r&&(s&&s.end(1),i=Tn(t,Ca,{duration:n[2],delay:n[0],easing:rn}),i.start())}),r=!0)},o(o){i&&i.invalidate(),o&&(s=tr(t,Ca,{duration:n[2],delay:n[1],easing:rn})),r=!1},d(o){o&&X(t),o&&s&&s.end()}}}function E4(n){let t,e=n[8]&&tg(n);return{c(){e&&e.c(),t=Ne()},m(i,s){e&&e.m(i,s),Y(i,t,s)},p(i,[s]){i[8]?e?e.p(i,s):(e=tg(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:re,o:re,d(i){e&&e.d(i),i&&X(t)}}}function x4(n,t,e){let i,s,r,o,{inDelay:a=0}=t,{outDelay:l=0}=t,{duration:c=1e3}=t,{unfolded:h}=t,{length:d}=t,{direction:f="horizontal"}=t,{useLinearColor:g=!1}=t,{color:p="white"}=t;const m=Et();return n.$$set=v=>{"inDelay"in v&&e(0,a=v.inDelay),"outDelay"in v&&e(1,l=v.outDelay),"duration"in v&&e(2,c=v.duration),"unfolded"in v&&e(3,h=v.unfolded),"length"in v&&e(11,d=v.length),"direction"in v&&e(12,f=v.direction),"useLinearColor"in v&&e(4,g=v.useLinearColor),"color"in v&&e(5,p=v.color)},n.$$.update=()=>{n.$$.dirty&4096&&e(9,i=f==="vertical"),n.$$.dirty&2048&&e(8,s=d),n.$$.dirty&2048&&e(6,o=`M0.5 0.5 H ${d}`)},e(7,r=1),[a,l,c,h,g,p,o,r,s,i,m,d,f]}class Ah extends Me{constructor(t){super(),Ie(this,t,x4,E4,Pe,{inDelay:0,outDelay:1,duration:2,unfolded:3,length:11,direction:12,useLinearColor:4,color:5},k4)}}function D4(n){De(n,"svelte-faoauy",".shadow.svelte-faoauy{position:absolute}")}function ng(n){let t,e,i,s,r;return{c(){t=U("div"),y(t,"class","shadow svelte-faoauy"),y(t,"style",e=`
      left: ${Pi(n[5])};
      bottom: ${Pi(n[6])};
      border-radius: ${n[10]?"9999px":"0"};
      box-shadow: 0 0 ${Pi(n[11])} ${Pi(n[12])} rgba(0, 0, 0, ${n[13]});
      ${n[8]?"transform: translateX(-50%); left: 50%":""}
      ${n[9]?"transform: translateX(-50%); top: 50%":""}
      ${n[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `),Q(t,"width",Pi(n[3])),Q(t,"height",Pi(n[4])),Q(t,"z-index",n[14])},m(o,a){Y(o,t,a),r=!0},p(o,a){n=o,(!r||a&16352&&e!==(e=`
      left: ${Pi(n[5])};
      bottom: ${Pi(n[6])};
      border-radius: ${n[10]?"9999px":"0"};
      box-shadow: 0 0 ${Pi(n[11])} ${Pi(n[12])} rgba(0, 0, 0, ${n[13]});
      ${n[8]?"transform: translateX(-50%); left: 50%":""}
      ${n[9]?"transform: translateX(-50%); top: 50%":""}
      ${n[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `))&&y(t,"style",e);const l=a&16352;(l||a&16360)&&Q(t,"width",Pi(n[3])),(l||a&16368)&&Q(t,"height",Pi(n[4])),(l||a&32736)&&Q(t,"z-index",n[14])},i(o){r||(o&&pt(()=>{r&&(s&&s.end(1),i=Tn(t,jt,{duration:n[0]}),i.start())}),r=!0)},o(o){i&&i.invalidate(),o&&(s=tr(t,jt,{duration:n[1]})),r=!1},d(o){o&&X(t),o&&s&&s.end()}}}function S4(n){let t,e=n[2]&&ng(n);return{c(){e&&e.c(),t=Ne()},m(i,s){e&&e.m(i,s),Y(i,t,s)},p(i,[s]){i[2]?e?(e.p(i,s),s&4&&N(e,1)):(e=ng(i),e.c(),N(e,1),e.m(t.parentNode,t)):e&&(Ee(),Z(e,1,1,()=>{e=null}),xe())},i(i){N(e)},o(i){Z(e)},d(i){e&&e.d(i),i&&X(t)}}}function Pi(n){return typeof n=="number"?n/16+"rem":n}function L4(n,t,e){let{inDelay:i=1e3}=t,{outDelay:s=1e3}=t,{visible:r=!0}=t,{width:o=0}=t,{height:a=0}=t,{left:l=0}=t,{bottom:c=0}=t,{center:h=!1}=t,{horizontalCenter:d=!1}=t,{verticalCenter:f=!1}=t,{round:g=!1}=t,{blurRadius:p}=t,{spreadRadius:m}=t,{opacity:v=.15}=t,{zIndex:b=-1}=t;return n.$$set=w=>{"inDelay"in w&&e(0,i=w.inDelay),"outDelay"in w&&e(1,s=w.outDelay),"visible"in w&&e(2,r=w.visible),"width"in w&&e(3,o=w.width),"height"in w&&e(4,a=w.height),"left"in w&&e(5,l=w.left),"bottom"in w&&e(6,c=w.bottom),"center"in w&&e(7,h=w.center),"horizontalCenter"in w&&e(8,d=w.horizontalCenter),"verticalCenter"in w&&e(9,f=w.verticalCenter),"round"in w&&e(10,g=w.round),"blurRadius"in w&&e(11,p=w.blurRadius),"spreadRadius"in w&&e(12,m=w.spreadRadius),"opacity"in w&&e(13,v=w.opacity),"zIndex"in w&&e(14,b=w.zIndex)},[i,s,r,o,a,l,c,h,d,f,g,p,m,v,b]}class Si extends Me{constructor(t){super(),Ie(this,t,L4,S4,Pe,{inDelay:0,outDelay:1,visible:2,width:3,height:4,left:5,bottom:6,center:7,horizontalCenter:8,verticalCenter:9,round:10,blurRadius:11,spreadRadius:12,opacity:13,zIndex:14},D4)}}function T4(){return Math.random().toString(36).slice(-6)}const tl=T4();function z4(n){De(n,"svelte-1b2n9wi",".text-char.svelte-1b2n9wi{display:inline-block;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function sg(n,t,e){const i=n.slice();return i[19]=t[e].id,i[0]=t[e].content,i[20]=t,i[21]=e,i}function O4(n){let t,e=n[0]+"",i,s=n[21];const r=()=>n[10](t,s),o=()=>n[10](null,s);return{c(){t=U("span"),i=Ve(e),y(t,"class","text-char svelte-1b2n9wi")},m(a,l){Y(a,t,l),V(t,i),r()},p(a,l){n=a,l&4&&e!==(e=n[0]+"")&&Ge(i,e),s!==n[21]&&(o(),s=n[21],r())},d(a){a&&X(t),o()}}}function j4(n){let t;return{c(){t=U("br")},m(e,i){Y(e,t,i)},p:re,d(e){e&&X(t)}}}function V4(n){let t,e=n[21];const i=()=>n[9](t,e),s=()=>n[9](null,e);return{c(){t=U("span"),t.textContent=" ",y(t,"class","text-char svelte-1b2n9wi")},m(r,o){Y(r,t,o),i()},p(r,o){n=r,e!==n[21]&&(s(),e=n[21],i())},d(r){r&&X(t),s()}}}function rg(n,t){let e,i;function s(a,l){return a[0]===a[3]?V4:a[0]===a[4]?j4:O4}let r=s(t),o=r(t);return{key:n,first:null,c(){e=Ne(),o.c(),i=Ne(),this.first=e},m(a,l){Y(a,e,l),o.m(a,l),Y(a,i,l)},p(a,l){t=a,r===(r=s(t))&&o?o.p(t,l):(o.d(1),o=r(t),o&&(o.c(),o.m(i.parentNode,i)))},d(a){a&&X(e),o.d(a),a&&X(i)}}}function B4(n){let t=[],e=new Map,i,s=n[2];const r=o=>o[19];for(let o=0;o<s.length;o+=1){let a=sg(n,s,o),l=r(a);e.set(l,t[o]=rg(l,a))}return{c(){for(let o=0;o<t.length;o+=1)t[o].c();i=Ne()},m(o,a){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(o,a);Y(o,i,a)},p(o,[a]){a&30&&(s=o[2],t=yi(t,a,r,1,o,s,e,i.parentNode,wc,rg,i,sg))},i:re,o:re,d(o){for(let a=0;a<t.length;a+=1)t[a].d(o);o&&X(i)}}}function _4(n,t,e){let i,{inDelay:s=0}=t,{outDelay:r=0}=t,{content:o}=t,{unfolded:a}=t,{isFistUnfoldedUpdate:l=!0}=t;const c=`__EMOJI_SPLIT_${tl}__`,h=`__EMOJI_${tl}__`,d=`__SPACE_${tl}__`,f=`__NEW_LINE_${tl}__`;let g,p,m=[];function v(S){const R=[],z=new RegExp(new RegExp("\\p{Regional_Indicator}\\p{Regional_Indicator}|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?(\\u200D\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?)+|\\p{Emoji_Presentation}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)","gu"));return S.slice().replace(z,O=>`${c}${h}${O}${c}`).split(c).forEach(O=>O.startsWith(h)?R.push({id:Et(),content:O.slice(h.length)}):R.push(...O.split("").map(A=>A===" "?d:A===`
`?f:A).map(A=>({id:Et(),content:A})))),R}function b(){if(!p)return;const S=!a;p.reversed!==S&&p.reverse(),p.play()}function w(S){if(l){e(5,l=!1);return}clearTimeout(g),g=setTimeout(b,S?s:r)}function x(S){const R=function(){const z=s4(O=>S[O].getBoundingClientRect().x,[Math.min(S.length-1,10),Math.min(S.length-1,30)]);if(z>0)return z}();p=ot({targets:S.slice(0,R).filter(Fe),autoplay:!1,duration:400,scale:[.7,1],rotate:[20,0],opacity:[0,1],translateX:[4,0],translateY:[10,0],delay:ot.stagger(50),easing:"easeInOutCubic"}),a&&p.seek(p.duration)}function E(S,R){Je[S?"unshift":"push"](()=>{m[R]=S,e(1,m)})}function L(S,R){Je[S?"unshift":"push"](()=>{m[R]=S,e(1,m)})}return n.$$set=S=>{"inDelay"in S&&e(6,s=S.inDelay),"outDelay"in S&&e(7,r=S.outDelay),"content"in S&&e(0,o=S.content),"unfolded"in S&&e(8,a=S.unfolded),"isFistUnfoldedUpdate"in S&&e(5,l=S.isFistUnfoldedUpdate)},n.$$.update=()=>{n.$$.dirty&1&&e(2,i=v(o)),n.$$.dirty&256&&w(a),n.$$.dirty&2&&x(m.filter(S=>!!S))},[o,m,i,d,f,l,s,r,a,E,L]}class og extends Me{constructor(t){super(),Ie(this,t,_4,B4,Pe,{inDelay:6,outDelay:7,content:0,unfolded:8,isFistUnfoldedUpdate:5},z4)}}function R4(n){De(n,"svelte-1ogmlqq",".arrow.svelte-1ogmlqq{width:100%;height:100%;background-size:100%;transition:transform 400ms ease-in-out;cursor:pointer;pointer-events:auto}.arrow-wrapper.svelte-1ogmlqq{position:relative;width:100%;height:100%}.arrow.left.svelte-1ogmlqq{transform:rotate(0deg)}.arrow.right.svelte-1ogmlqq{transform:rotate(-180deg)}.arrow.top.svelte-1ogmlqq{transform:rotate(90deg)}.arrow.bottom.svelte-1ogmlqq{transform:rotate(-90deg)}")}function ag(n){let t,e,i,s,r,o,a,l,c,h;return e=new Si({props:{center:!0,blurRadius:9,spreadRadius:3}}),{c(){t=U("div"),Ae(e.$$.fragment),i=ae(),s=U("div"),y(s,"class",r="arrow "+n[0]+" svelte-1ogmlqq"),Q(s,"background-image","url("+qP+")"),y(t,"class","arrow-wrapper svelte-1ogmlqq")},m(d,f){Y(d,t,f),ge(e,t,null),V(t,i),V(t,s),l=!0,c||(h=je(s,"click",n[5]),c=!0)},p(d,f){n=d,(!l||f&1&&r!==(r="arrow "+n[0]+" svelte-1ogmlqq"))&&y(s,"class",r)},i(d){l||(N(e.$$.fragment,d),d&&pt(()=>{l&&(a&&a.end(1),o=Tn(s,jt,{duration:n[2],delay:n[3],easing:nr}),o.start())}),l=!0)},o(d){Z(e.$$.fragment,d),o&&o.invalidate(),d&&(a=tr(s,jt,{duration:n[2],delay:n[4],easing:nr})),l=!1},d(d){d&&X(t),ve(e),d&&a&&a.end(),c=!1,h()}}}function F4(n){let t,e,i=n[1]&&ag(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[1]?i?(i.p(s,r),r&2&&N(i,1)):(i=ag(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function N4(n,t,e){let{direction:i="right"}=t,{visible:s=!0}=t,{duration:r=0}=t,{inDelay:o=0}=t,{outDelay:a=0}=t;function l(c){an.call(this,n,c)}return n.$$set=c=>{"direction"in c&&e(0,i=c.direction),"visible"in c&&e(1,s=c.visible),"duration"in c&&e(2,r=c.duration),"inDelay"in c&&e(3,o=c.inDelay),"outDelay"in c&&e(4,a=c.outDelay)},[i,s,r,o,a,l]}let G4=class extends Me{constructor(t){super(),Ie(this,t,N4,F4,Pe,{direction:0,visible:1,duration:2,inDelay:3,outDelay:4},R4)}};function H4(n,t,e=20,i=5){return new Promise((s,r)=>{let o=0;const a=setInterval(()=>{const l=n();t(l)?(clearInterval(a),s(l)):o>=i&&(clearInterval(a),r(l)),o++},e)})}function W4(n){De(n,"svelte-1fuzm7v",".text.svelte-1fuzm7v{pointer-events:auto;box-sizing:border-box;display:inline-block;max-width:7.5rem;transition:transform 400ms ease-in-out;font-size:0.75rem;line-height:1.125rem;white-space:initial;cursor:pointer}.arrow.svelte-1fuzm7v{pointer-events:auto;display:inline-block;vertical-align:top;width:0.875rem;height:0.875rem;margin-left:0.125rem;margin-top:0.125rem}")}function lg(n){let t,e,i;return e=new og({props:{unfolded:n[0],content:n[1],inDelay:500,outDelay:n[5]}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","text svelte-1fuzm7v"),Q(t,"transform",n[7])},m(s,r){Y(s,t,r),ge(e,t,null),n[10](t),i=!0},p(s,r){const o={};r&1&&(o.unfolded=s[0]),r&2&&(o.content=s[1]),r&32&&(o.outDelay=s[5]),e.$set(o),r&128&&Q(t,"transform",s[7])},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e),n[10](null)}}}function cg(n){let t,e,i;return e=new G4({props:{direction:n[6],visible:n[0],inDelay:600,duration:1e3}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","arrow svelte-1fuzm7v")},m(s,r){Y(s,t,r),ge(e,t,null),i=!0},p(s,r){const o={};r&64&&(o.direction=s[6]),r&1&&(o.visible=s[0]),e.$set(o)},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e)}}}function U4(n){let t,e,i,s=n[1]&&lg(n),r=n[3]<n[4]&&cg(n);return{c(){s&&s.c(),t=ae(),r&&r.c(),e=Ne()},m(o,a){s&&s.m(o,a),Y(o,t,a),r&&r.m(o,a),Y(o,e,a),i=!0},p(o,[a]){o[1]?s?(s.p(o,a),a&2&&N(s,1)):(s=lg(o),s.c(),N(s,1),s.m(t.parentNode,t)):s&&(Ee(),Z(s,1,1,()=>{s=null}),xe()),o[3]<o[4]?r?(r.p(o,a),a&24&&N(r,1)):(r=cg(o),r.c(),N(r,1),r.m(e.parentNode,e)):r&&(Ee(),Z(r,1,1,()=>{r=null}),xe())},i(o){i||(N(s),N(r),i=!0)},o(o){Z(s),Z(r),i=!1},d(o){s&&s.d(o),o&&X(t),r&&r.d(o),o&&X(e)}}}function Q4(n,t,e){let i,s,r,{visible:o=!1}=t,{textUnfolded:a=!1}=t,{content:l}=t,c,h=0,d=0,f=0;function g(p){Je[p?"unshift":"push"](()=>{c=p,e(2,c)})}return n.$$set=p=>{"visible"in p&&e(0,o=p.visible),"textUnfolded"in p&&e(8,a=p.textUnfolded),"content"in p&&e(1,l=p.content)},n.$$.update=()=>{if(n.$$.dirty&7&&c&&o&&l){const{lineHeight:p}=getComputedStyle(c);e(4,f=c.offsetHeight),H4(()=>c==null?void 0:c.offsetHeight,Boolean).then(()=>{e(4,f=c.offsetHeight)}),e(3,d=Number(p.replace("px","")))}n.$$.dirty&280&&e(9,h=a?d-f:0),n.$$.dirty&512&&e(7,i=`translateY(${h}px)`),n.$$.dirty&256&&e(6,s=a?"left":"right"),n.$$.dirty&256&&e(5,r=a?450:0)},[o,l,c,d,f,r,s,i,a,h,g]}class hg extends Me{constructor(t){super(),Ie(this,t,Q4,U4,Pe,{visible:0,textUnfolded:8,content:1},W4)}}function X4(n){De(n,"svelte-5hip41",".content.svelte-5hip41{--height:62.4375rem;width:-moz-max-content;width:max-content;height:var(--height);padding:calc(var(--height) - 1.125rem) 0.25rem 0 1rem;position:absolute;left:0;bottom:0;overflow:hidden;box-sizing:border-box;font-size:0;pointer-events:none;white-space:nowrap;font-weight:600}")}function dg(n){var h,d;let t,e,i,s,r,o,a,l,c;return t=new Si({props:{visible:n[2],left:n[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),i=new Ah({props:{unfolded:n[2],length:n[3],outDelay:n[4]+40*Math.min((d=(h=n[6][0])==null?void 0:h.content.length)!=null?d:10,15),useLinearColor:!0}}),o=new hg({props:{visible:n[2],textUnfolded:n[1],content:n[5]}}),{c(){Ae(t.$$.fragment),e=ae(),Ae(i.$$.fragment),s=ae(),r=U("div"),Ae(o.$$.fragment),y(r,"class","content svelte-5hip41")},m(f,g){ge(t,f,g),Y(f,e,g),ge(i,f,g),Y(f,s,g),Y(f,r,g),ge(o,r,null),a=!0,l||(c=[Ai(cn.call(null,r)),je(r,"clientWidth",n[10]),je(r,"click",n[7])],l=!0)},p(f,g){var b,w;const p={};g&4&&(p.visible=f[2]),g&8&&(p.left=f[3]/2+"px"),t.$set(p);const m={};g&4&&(m.unfolded=f[2]),g&8&&(m.length=f[3]),g&16&&(m.outDelay=f[4]+40*Math.min((w=(b=f[6][0])==null?void 0:b.content.length)!=null?w:10,15)),i.$set(m);const v={};g&4&&(v.visible=f[2]),g&2&&(v.textUnfolded=f[1]),g&32&&(v.content=f[5]),o.$set(v)},i(f){a||(N(t.$$.fragment,f),N(i.$$.fragment,f),N(o.$$.fragment,f),a=!0)},o(f){Z(t.$$.fragment,f),Z(i.$$.fragment,f),Z(o.$$.fragment,f),a=!1},d(f){ve(t,f),f&&X(e),ve(i,f),f&&X(s),f&&X(r),ve(o),l=!1,ut(c)}}}function Y4(n){let t,e,i=n[0].state&&dg(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[0].state?i?(i.p(s,r),r&1&&N(i,1)):(i=dg(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function Z4(n,t,e){let i,s,r,o,a,{tag:l}=t,c,h=!1,d=[];function f(){e(1,h=!h)}const g=p=>{e(3,c=p.detail)};return n.$$set=p=>{"tag"in p&&e(0,l=p.tag)},n.$$.update=()=>{var p,m,v,b;n.$$.dirty&1&&e(2,i=!!((p=l.state)!=null&&p.unfolded)),n.$$.dirty&1&&e(9,s=(v=(m=l.data.title)!=null?m:l.data.text)!=null?v:""),n.$$.dirty&1&&e(8,r=(b=l.data.description)!=null?b:""),n.$$.dirty&768&&e(5,o=(()=>{if(s&&r)return s+`
`+r;if(s)return s;if(r)return r})()),n.$$.dirty&4&&(i||setTimeout(()=>{e(1,h=!1)},20)),n.$$.dirty&2&&e(4,a=h?450:0)},[l,h,i,c,a,o,d,f,r,s,g]}class J4 extends Me{constructor(t){super(),Ie(this,t,Z4,Y4,Pe,{tag:0},X4)}}function Li(n){return typeof n=="number"?n/16+"rem":n}function q4(n){De(n,"svelte-1j0cz4o",'.text.svelte-1j0cz4o{display:-webkit-box;display:-ms-box;display:-moz-box;position:relative;width:-moz-max-content;width:max-content;max-width:100%;-webkit-box-orient:vertical;-ms-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}@keyframes svelte-1j0cz4o-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.caret.svelte-1j0cz4o{position:absolute;width:0.0625rem;height:100%;background-color:#fff;animation:svelte-1j0cz4o-blink 1.2s infinite}.placeholder.svelte-1j0cz4o{opacity:0.5}.placeholder.svelte-1j0cz4o:empty::after{content:" "}')}function K4(n){let t;const e=n[6].default,i=En(e,n,n[5],null);return{c(){i&&i.c()},m(s,r){i&&i.m(s,r),t=!0},p(s,r){i&&i.p&&(!t||r&32)&&Dn(i,e,s,s[5],t?xn(e,s[5],r,null):Sn(s[5]),null)},i(s){t||(N(i,s),t=!0)},o(s){Z(i,s),t=!1},d(s){i&&i.d(s)}}}function $4(n){var r,o;let t,e,i=((r=n[3])==null?void 0:r.inputting)&&ug(),s=typeof((o=n[3])==null?void 0:o.placeholder)=="string"&&fg(n);return{c(){i&&i.c(),t=ae(),s&&s.c(),e=Ne()},m(a,l){i&&i.m(a,l),Y(a,t,l),s&&s.m(a,l),Y(a,e,l)},p(a,l){var c,h;(c=a[3])!=null&&c.inputting?i||(i=ug(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),typeof((h=a[3])==null?void 0:h.placeholder)=="string"?s?s.p(a,l):(s=fg(a),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:re,o:re,d(a){i&&i.d(a),a&&X(t),s&&s.d(a),a&&X(e)}}}function eI(n){let t;return{c(){t=Ve(n[2])},m(e,i){Y(e,t,i)},p(e,i){i&4&&Ge(t,e[2])},i:re,o:re,d(e){e&&X(t)}}}function ug(n){let t;return{c(){t=U("div"),y(t,"class","caret svelte-1j0cz4o")},m(e,i){Y(e,t,i)},d(e){e&&X(t)}}}function fg(n){let t,e=n[3].placeholder+"",i;return{c(){t=U("span"),i=Ve(e),y(t,"class","placeholder svelte-1j0cz4o")},m(s,r){Y(s,t,r),V(t,i)},p(s,r){r&8&&e!==(e=s[3].placeholder+"")&&Ge(i,e)},d(s){s&&X(t)}}}function tI(n){let t,e,i,s;const r=[eI,$4,K4],o=[];function a(l,c){return l[2]?0:l[4]?1:2}return e=a(n),i=o[e]=r[e](n),{c(){t=U("div"),i.c(),y(t,"class","text svelte-1j0cz4o"),Q(t,"max-width",typeof n[1]=="number"?Li(n[1]):n[1]),Q(t,"-webkit-line-clamp",n[0])},m(l,c){Y(l,t,c),o[e].m(t,null),s=!0},p(l,[c]){let h=e;e=a(l),e===h?o[e].p(l,c):(Ee(),Z(o[h],1,1,()=>{o[h]=null}),xe(),i=o[e],i?i.p(l,c):(i=o[e]=r[e](l),i.c()),N(i,1),i.m(t,null)),c&2&&Q(t,"max-width",typeof l[1]=="number"?Li(l[1]):l[1]),c&1&&Q(t,"-webkit-line-clamp",l[0])},i(l){s||(N(i),s=!0)},o(l){Z(i),s=!1},d(l){l&&X(t),o[e].d()}}}function iI(n,t,e){let i,{$$slots:s={},$$scope:r}=t,{maxLine:o=null}=t,{maxWidth:a=null}=t,{text:l=null}=t,{edit:c=null}=t;return n.$$set=h=>{"maxLine"in h&&e(0,o=h.maxLine),"maxWidth"in h&&e(1,a=h.maxWidth),"text"in h&&e(2,l=h.text),"edit"in h&&e(3,c=h.edit),"$$scope"in h&&e(5,r=h.$$scope)},n.$$.update=()=>{n.$$.dirty&8&&e(4,i=typeof(c==null?void 0:c.placeholder)=="string"||(c==null?void 0:c.inputting))},[o,a,l,c,i,r,s]}class bh extends Me{constructor(t){super(),Ie(this,t,iI,tI,Pe,{maxLine:0,maxWidth:1,text:2,edit:3},q4)}}function nI(n){De(n,"svelte-1oxrkr1",".plane__container.svelte-1oxrkr1.svelte-1oxrkr1{position:absolute;left:50%;transform:translate(-50%, -100%);width:-moz-max-content;width:max-content}.plane__wrapper.svelte-1oxrkr1.svelte-1oxrkr1{transition:transform 500ms linear, opacity 200ms linear;padding:0.625rem;background-color:rgba(0, 0, 0, 0.5);border:0.03125rem solid rgba(255, 255, 255, 0.3);border-radius:0.25rem}.unfolded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{transition-delay:200ms, 500ms;opacity:1}.folded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{opacity:0}.plane.svelte-1oxrkr1.svelte-1oxrkr1{max-width:11.75rem}.title.svelte-1oxrkr1.svelte-1oxrkr1{white-space:pre-wrap;font-weight:bold;font-size:0.75rem;line-height:1.125rem}.description.svelte-1oxrkr1.svelte-1oxrkr1{margin-top:0.25rem;white-space:pre-wrap;font-size:0.6875rem;line-height:1rem}")}function pg(n){var d,f;let t,e,i,s,r,o,a,l,c;t=new Ah({props:{unfolded:n[1],direction:"vertical",length:15,duration:500,inDelay:200,useLinearColor:!0}}),a=new bh({props:{text:n[4],edit:(d=n[0].data.edit)==null?void 0:d.title,maxLine:n[2]}});let h=(n[0].data.description||((f=n[0].data.edit)==null?void 0:f.description))&&mg(n);return{c(){Ae(t.$$.fragment),e=ae(),i=U("div"),s=U("div"),r=U("div"),o=U("div"),Ae(a.$$.fragment),l=ae(),h&&h.c(),y(o,"class","title svelte-1oxrkr1"),y(r,"class","plane svelte-1oxrkr1"),y(s,"class","plane__wrapper svelte-1oxrkr1"),Q(s,"transform",n[1]?"translateY(-15px)":"translateY(0)"),y(i,"class","plane__container svelte-1oxrkr1"),we(i,"unfolded",n[1]),we(i,"folded",n[5])},m(g,p){ge(t,g,p),Y(g,e,p),Y(g,i,p),V(i,s),V(s,r),V(r,o),ge(a,o,null),V(r,l),h&&h.m(r,null),c=!0},p(g,p){var b,w;const m={};p&2&&(m.unfolded=g[1]),t.$set(m);const v={};p&16&&(v.text=g[4]),p&1&&(v.edit=(b=g[0].data.edit)==null?void 0:b.title),p&4&&(v.maxLine=g[2]),a.$set(v),g[0].data.description||(w=g[0].data.edit)!=null&&w.description?h?(h.p(g,p),p&1&&N(h,1)):(h=mg(g),h.c(),N(h,1),h.m(r,null)):h&&(Ee(),Z(h,1,1,()=>{h=null}),xe()),p&2&&Q(s,"transform",g[1]?"translateY(-15px)":"translateY(0)"),(!c||p&2)&&we(i,"unfolded",g[1]),(!c||p&32)&&we(i,"folded",g[5])},i(g){c||(N(t.$$.fragment,g),N(a.$$.fragment,g),N(h),c=!0)},o(g){Z(t.$$.fragment,g),Z(a.$$.fragment,g),Z(h),c=!1},d(g){ve(t,g),g&&X(e),g&&X(i),ve(a),h&&h.d()}}}function mg(n){var s;let t,e,i;return e=new bh({props:{text:n[0].data.description,edit:(s=n[0].data.edit)==null?void 0:s.description,maxLine:n[3]}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","description svelte-1oxrkr1")},m(r,o){Y(r,t,o),ge(e,t,null),i=!0},p(r,o){var l;const a={};o&1&&(a.text=r[0].data.description),o&1&&(a.edit=(l=r[0].data.edit)==null?void 0:l.description),o&8&&(a.maxLine=r[3]),e.$set(a)},i(r){i||(N(e.$$.fragment,r),i=!0)},o(r){Z(e.$$.fragment,r),i=!1},d(r){r&&X(t),ve(e)}}}function sI(n){let t,e,i=n[0].state&&pg(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[0].state?i?(i.p(s,r),r&1&&N(i,1)):(i=pg(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function rI(n,t,e){let i,s,r,o,a,{tag:l}=t;return n.$$set=c=>{"tag"in c&&e(0,l=c.tag)},n.$$.update=()=>{var c,h,d,f,g;n.$$.dirty&1&&e(1,i=!!((c=l.state)!=null&&c.unfolded)),n.$$.dirty&2&&e(5,s=!i),n.$$.dirty&1&&e(4,r=(d=(h=l.data.title)!=null?h:l.data.text)!=null?d:""),n.$$.dirty&1&&e(3,o=(f=l.data.descriptionMaxRows)!=null?f:null),n.$$.dirty&1&&e(2,a=(g=l.data.titleMaxRows)!=null?g:null)},[l,i,a,o,r,s]}class oI extends Me{constructor(t){super(),Ie(this,t,rI,sI,Pe,{tag:0},nI)}}function aI(n){let t,e;return t=new oI({props:{tag:n[0]}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.tag=i[0]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function lI(n){let t,e;return t=new J4({props:{tag:n[0]}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.tag=i[0]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function cI(n){let t,e,i,s;const r=[lI,aI],o=[];function a(l,c){return l[1]==="line"?0:l[1]==="plane"?1:-1}return~(t=a(n))&&(e=o[t]=r[t](n)),{c(){e&&e.c(),i=Ne()},m(l,c){~t&&o[t].m(l,c),Y(l,i,c),s=!0},p(l,[c]){let h=t;t=a(l),t===h?~t&&o[t].p(l,c):(e&&(Ee(),Z(o[h],1,1,()=>{o[h]=null}),xe()),~t?(e=o[t],e?e.p(l,c):(e=o[t]=r[t](l),e.c()),N(e,1),e.m(i.parentNode,i)):e=null)},i(l){s||(N(e),s=!0)},o(l){Z(e),s=!1},d(l){~t&&o[t].d(l),l&&X(i)}}}function hI(n,t,e){let i,{tag:s}=t;return n.$$set=r=>{"tag"in r&&e(0,s=r.tag)},n.$$.update=()=>{var r;n.$$.dirty&1&&e(1,i=(r=s.data.appearance)!=null?r:"line")},[s,i]}class dI extends Me{constructor(t){super(),Ie(this,t,hI,cI,Pe,{tag:0})}}function uI(n){De(n,"svelte-blgtit",".line.svelte-blgtit{width:100%;height:100%;overflow:visible;pointer-events:none}")}function gg(n){let t,e,i,s;return{c(){t=ye("path"),y(t,"fill","none"),y(t,"stroke","url(#"+n[4]+")"),y(t,"stroke-width","1"),y(t,"d","M0 21 L14 0.5 L105 0.5")},m(r,o){Y(r,t,o),s=!0},p(r,o){n=r},i(r){s||(r&&pt(()=>{s&&(i&&i.end(1),e=Tn(t,Ca,{duration:n[1],delay:n[0],easing:Kr}),e.start())}),s=!0)},o(r){e&&e.invalidate(),r&&(i=tr(t,Ca,{duration:n[1],delay:n[2],easing:nr})),s=!1},d(r){r&&X(t),r&&i&&i.end()}}}function fI(n){let t,e,i,s,r,o=n[3]&&gg(n);return{c(){t=ye("svg"),e=ye("defs"),i=ye("linearGradient"),s=ye("stop"),r=ye("stop"),o&&o.c(),y(s,"offset","25%"),y(s,"stop-color","white"),y(s,"stop-opacity","1"),y(r,"offset","100%"),y(r,"stop-color","white"),y(r,"stop-opacity","0.5"),y(i,"id",n[4]),y(i,"gradientUnits","userSpaceOnUse"),y(t,"class","line svelte-blgtit"),y(t,"viewBox","0 0 105 21")},m(a,l){Y(a,t,l),V(t,e),V(e,i),V(i,s),V(i,r),o&&o.m(t,null)},p(a,[l]){a[3]?o?(o.p(a,l),l&8&&N(o,1)):(o=gg(a),o.c(),N(o,1),o.m(t,null)):o&&(Ee(),Z(o,1,1,()=>{o=null}),xe())},i(a){N(o)},o(a){Z(o)},d(a){a&&X(t),o&&o.d()}}}function pI(n,t,e){let{inDelay:i=0}=t,{duration:s=1e3}=t,{outDelay:r=0}=t,{unfolded:o}=t;const a=Et();return n.$$set=l=>{"inDelay"in l&&e(0,i=l.inDelay),"duration"in l&&e(1,s=l.duration),"outDelay"in l&&e(2,r=l.outDelay),"unfolded"in l&&e(3,o=l.unfolded)},[i,s,r,o,a]}let mI=class extends Me{constructor(t){super(),Ie(this,t,pI,fI,Pe,{inDelay:0,duration:1,outDelay:2,unfolded:3},uI)}};function gI(n){De(n,"svelte-1mgyhhn",`:root{--sc-dot-size:6px;--sc-active-dot-size:8px;--sc-dot-size-animation-time:250ms}.sc-carousel-dot__dot.svelte-1mgyhhn{background-color:var(--sc-color-rgb-light);border-radius:50%;display:inline-block;opacity:0.5;transition:opacity 100ms ease,\r
      height var(--sc-dot-size-animation-time) ease,\r
      width var(--sc-dot-size-animation-time) ease;cursor:pointer;-webkit-tap-highlight-color:transparent;height:var(--sc-dot-size);width:var(--sc-dot-size)}.sc-carousel-dot__dot.svelte-1mgyhhn:hover{opacity:0.9}.sc-carousel-dot__dot_active.svelte-1mgyhhn{opacity:0.7;height:var(--sc-active-dot-size);width:var(--sc-active-dot-size)}`)}function vI(n){let t,e,i;return{c(){t=U("button"),y(t,"class","sc-carousel-button sc-carousel-dot__dot svelte-1mgyhhn"),we(t,"sc-carousel-dot__dot_active",n[0])},m(s,r){Y(s,t,r),e||(i=je(t,"click",n[1]),e=!0)},p(s,[r]){r&1&&we(t,"sc-carousel-dot__dot_active",s[0])},i:re,o:re,d(s){s&&X(t),e=!1,i()}}}function AI(n,t,e){let{active:i=!1}=t;function s(r){an.call(this,n,r)}return n.$$set=r=>{"active"in r&&e(0,i=r.active)},[i,s]}class bI extends Me{constructor(t){super(),Ie(this,t,AI,vI,Pe,{active:0},gI)}}function yI(n){De(n,"svelte-670fde",".sc-carousel-dots__container.svelte-670fde{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;padding:0 30px}.sc-carousel-dots__dot-container.svelte-670fde{height:calc(var(--sc-dot-size) + 14px);width:calc(var(--sc-dot-size) + 10px);display:flex;align-items:center;justify-content:center}")}function vg(n,t,e){const i=n.slice();return i[5]=t[e],i[7]=e,i}function Ag(n,t){let e,i,s,r;function o(){return t[3](t[7])}return i=new bI({props:{active:t[1]===t[7]}}),i.$on("click",o),{key:n,first:null,c(){e=U("div"),Ae(i.$$.fragment),s=ae(),y(e,"class","sc-carousel-dots__dot-container svelte-670fde"),this.first=e},m(a,l){Y(a,e,l),ge(i,e,null),V(e,s),r=!0},p(a,l){t=a;const c={};l&3&&(c.active=t[1]===t[7]),i.$set(c)},i(a){r||(N(i.$$.fragment,a),r=!0)},o(a){Z(i.$$.fragment,a),r=!1},d(a){a&&X(e),ve(i)}}}function wI(n){let t,e=[],i=new Map,s,r=Array(n[0]);const o=a=>a[7];for(let a=0;a<r.length;a+=1){let l=vg(n,r,a),c=o(l);i.set(c,e[a]=Ag(c,l))}return{c(){t=U("div");for(let a=0;a<e.length;a+=1)e[a].c();y(t,"class","sc-carousel-dots__container svelte-670fde")},m(a,l){Y(a,t,l);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null);s=!0},p(a,[l]){l&7&&(r=Array(a[0]),Ee(),e=yi(e,l,o,1,a,r,i,t,ln,Ag,null,vg),xe())},i(a){if(!s){for(let l=0;l<r.length;l+=1)N(e[l]);s=!0}},o(a){for(let l=0;l<e.length;l+=1)Z(e[l]);s=!1},d(a){a&&X(t);for(let l=0;l<e.length;l+=1)e[l].d()}}}function PI(n,t,e){const i=qs();let{pagesCount:s=1}=t,{currentPageIndex:r=0}=t;function o(l){i("pageChange",l)}const a=l=>o(l);return n.$$set=l=>{"pagesCount"in l&&e(0,s=l.pagesCount),"currentPageIndex"in l&&e(1,r=l.currentPageIndex)},[s,r,o,a]}class CI extends Me{constructor(t){super(),Ie(this,t,PI,wI,Pe,{pagesCount:0,currentPageIndex:1},yI)}}const mr="prev",Gn="next";function II(n){De(n,"svelte-1bftafx",":root{--sc-arrow-size:2px}.sc-carousel-arrow__circle.svelte-1bftafx{width:20px;height:20px;border-radius:50%;background-color:var(--sc-color-rgb-light-50p);display:flex;align-items:center;justify-content:center;transition:opacity 100ms ease;cursor:pointer;-webkit-tap-highlight-color:transparent}.sc-carousel-arrow__circle.svelte-1bftafx:hover{opacity:0.9}.sc-carousel-arrow__arrow.svelte-1bftafx{border:solid var(--sc-color-hex-dark);border-width:0 var(--sc-arrow-size) var(--sc-arrow-size) 0;padding:var(--sc-arrow-size);position:relative}.sc-carousel-arrow__arrow-next.svelte-1bftafx{transform:rotate(-45deg);left:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__arrow-prev.svelte-1bftafx{transform:rotate(135deg);right:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__circle_disabled.svelte-1bftafx,.sc-carousel-arrow__circle_disabled.svelte-1bftafx:hover{opacity:0.5}")}function MI(n){let t,e,i,s;return{c(){t=U("button"),e=U("i"),y(e,"class","sc-carousel-arrow__arrow svelte-1bftafx"),we(e,"sc-carousel-arrow__arrow-next",n[0]===Gn),we(e,"sc-carousel-arrow__arrow-prev",n[0]===mr),y(t,"class","sc-carousel-button sc-carousel-arrow__circle svelte-1bftafx"),we(t,"sc-carousel-arrow__circle_disabled",n[1])},m(r,o){Y(r,t,o),V(t,e),i||(s=je(t,"click",n[2]),i=!0)},p(r,[o]){o&1&&we(e,"sc-carousel-arrow__arrow-next",r[0]===Gn),o&1&&we(e,"sc-carousel-arrow__arrow-prev",r[0]===mr),o&2&&we(t,"sc-carousel-arrow__circle_disabled",r[1])},i:re,o:re,d(r){r&&X(t),i=!1,s()}}}function kI(n,t,e){let{direction:i=Gn}=t,{disabled:s=!1}=t;function r(o){an.call(this,n,o)}return n.$$set=o=>{"direction"in o&&e(0,i=o.direction),"disabled"in o&&e(1,s=o.disabled)},[i,s,r]}class bg extends Me{constructor(t){super(),Ie(this,t,kI,MI,Pe,{direction:0,disabled:1},II)}}function EI(n){De(n,"svelte-i7yfid",".sc-carousel-progress__indicator.svelte-i7yfid{height:100%;background-color:var(--sc-color-hex-dark-50p)}")}function xI(n){let t;return{c(){t=U("div"),y(t,"class","sc-carousel-progress__indicator svelte-i7yfid"),Q(t,"width",n[0]+"%")},m(e,i){Y(e,t,i)},p(e,[i]){i&1&&Q(t,"width",e[0]+"%")},i:re,o:re,d(e){e&&X(t)}}}const yg=100;function DI(n,t,e){let i,{value:s=0}=t;return n.$$set=r=>{"value"in r&&e(1,s=r.value)},n.$$.update=()=>{n.$$.dirty&2&&e(0,i=Math.min(Math.max(s*yg,0),yg))},[i,s]}class SI extends Me{constructor(t){super(),Ie(this,t,DI,xI,Pe,{value:1},EI)}}function LI(n,t){n.addEventListener("mousedown",t),n.addEventListener("touchstart",t,{passive:!0})}function TI(n,t){n.removeEventListener("mousedown",t),n.removeEventListener("touchstart",t)}function zI(n,t){n.addEventListener("mouseup",t),n.addEventListener("touchend",t)}function wg(n,t){n.removeEventListener("mouseup",t),n.removeEventListener("touchend",t)}function OI(n,t){n.addEventListener("mousemove",t),n.addEventListener("touchmove",t)}function Pg(n,t){n.removeEventListener("mousemove",t),n.removeEventListener("touchmove",t)}function yh(n){return function(t,e){n.dispatchEvent(new CustomEvent(t,{detail:e}))}}const jI=110,VI=9,BI=111,_I=20;function wh(n){if("TouchEvent"in window&&n instanceof TouchEvent){const t=n.touches[0];return{x:t?t.clientX:0,y:t?t.clientY:0}}return{x:n.clientX,y:n.clientY}}function RI(n,{thresholdProvider:t}){const e=yh(n);let i,s,r=0,o,a=!1;function l(){return Date.now()-o>=BI&&Math.abs(r)>=_I}function c(f){o=Date.now(),r=0,a=!0;const g=wh(f);i=g.x,s=g.y,e("swipeStart",{x:i,y:s}),OI(window,h),zI(window,d)}function h(f){if(!a)return;const g=wh(f),p=g.x-i,m=g.y-s;i=g.x,s=g.y,e("swipeMove",{x:i,y:s,dx:p,dy:m}),p!==0&&Math.sign(p)!==Math.sign(r)&&(r=0),r+=p,Math.abs(r)>t()&&(e("swipeThresholdReached",{direction:r>0?mr:Gn}),wg(window,d),Pg(window,h))}function d(f){if(wg(window,d),Pg(window,h),a=!1,!l()){e("swipeFailed");return}const g=wh(f);e("swipeEnd",{x:g.x,y:g.y})}return LI(n,c),{destroy(){TI(n,c)}}}function FI(n,t){n.addEventListener("mouseenter",t)}function NI(n,t){n.removeEventListener("mouseenter",t)}function GI(n,t){n.addEventListener("mouseleave",t)}function Cg(n,t){n.removeEventListener("mouseleave",t)}function HI(n){const t=yh(n);function e(){GI(n,i),t("hovered",{value:!0})}function i(){t("hovered",{value:!1}),Cg(n,i)}return FI(n,e),{destroy(){NI(n,e),Cg(n,i)}}}const WI=(n,t)=>{const e=t.x-n.x,i=t.y-n.y;return Math.sqrt(e*e+i*i)};function gr(n,t,e){return Math.max(n,Math.min(t,e))}function UI(n,t){n.addEventListener("touchstart",t,{passive:!0})}function QI(n,t){n.removeEventListener("touchstart",t)}function XI(n,t){n.addEventListener("touchend",t)}function Ig(n,t){n.removeEventListener("touchend",t)}function YI(n){const t=yh(n);let e=0,i={x:0,y:0};function s({tapEndedAt:a,tapEndedPos:l}){const c=a-e,h=WI(i,l);return c<=jI&&h<=VI}function r(a){e=Date.now();const l=a.touches[0];i={x:l.clientX,y:l.clientY},XI(n,o)}function o(a){Ig(n,o);const l=a.changedTouches[0];s({tapEndedAt:Date.now(),tapEndedPos:{x:l.clientX,y:l.clientY}})&&t("tapped")}return UI(n,r),{destroy(){QI(n,r),Ig(n,o)}}}function ZI({currentParticleIndex:n,particlesCount:t,clonesCountHead:e,clonesCountTotal:i,particlesToScroll:s}){return n===t-e?0:n===0?Mg({particlesCountWithoutClones:t-i,particlesToScroll:s})-1:Math.floor((n-e)/s)}function JI({currentParticleIndex:n,particlesToScroll:t}){return Math.ceil(n/t)}function qI({currentParticleIndex:n,particlesCount:t,clonesCountHead:e,clonesCountTotal:i,infinite:s,particlesToScroll:r}){return s?ZI({currentParticleIndex:n,particlesCount:t,clonesCountHead:e,clonesCountTotal:i,particlesToScroll:r}):JI({currentParticleIndex:n,particlesToScroll:r})}function Mg({particlesCountWithoutClones:n,particlesToScroll:t}){return Math.ceil(n/t)}function KI({particlesCountWithoutClones:n,particlesToScroll:t,particlesToShow:e}){const i=kg({particlesCountWithoutClones:n,particlesToScroll:t,particlesToShow:e});return Math.ceil(n/t)-i}function $I({infinite:n,particlesCountWithoutClones:t,particlesToScroll:e,particlesToShow:i}){return n?Mg({particlesCountWithoutClones:t,particlesToScroll:e}):KI({particlesCountWithoutClones:t,particlesToScroll:e,particlesToShow:i})}function e8({pageIndex:n,clonesCountHead:t,clonesCountTail:e,particlesToScroll:i,particlesCount:s}){return gr(0,Math.min(t+n*i,s-e),s-1)}function t8({pageIndex:n,particlesToScroll:t,particlesCount:e,particlesToShow:i}){return gr(0,Math.min(n*t,e-i),e-1)}function Ph({infinite:n,pageIndex:t,clonesCountHead:e,clonesCountTail:i,particlesToScroll:s,particlesCount:r,particlesToShow:o}){return n?e8({pageIndex:t,clonesCountHead:e,clonesCountTail:i,particlesToScroll:s,particlesCount:r}):t8({pageIndex:t,particlesToScroll:s,particlesCount:r,particlesToShow:o})}function i8({particlesContainerChildren:n,particleWidth:t}){for(let e=0;e<n.length;e++)n[e].style.minWidth=`${t}px`,n[e].style.maxWidth=`${t}px`}function kg({particlesToScroll:n,particlesToShow:t,particlesCountWithoutClones:e}){const i=n-t;let s=t;for(;;){const r=e-s-i;if(r<t)return Math.max(r,0);s+=t+i}}function n8(n){return new ResizeObserver(t=>{n({width:t[0].contentRect.width})})}function s8({clonesCountHead:n,clonesCountTail:t,particlesContainerChildren:e}){const i=[];for(let o=0;o<t;o++)i.push(e[o].cloneNode(!0));const s=[],r=e.length;for(let o=r-1;o>r-1-n;o--)s.push(e[o].cloneNode(!0));return{clonesToAppend:i,clonesToPrepend:s}}function r8({particlesContainer:n,clonesToAppend:t,clonesToPrepend:e}){for(let i=0;i<t.length;i++)n.append(t[i]);for(let i=0;i<e.length;i++)n.prepend(e[i])}function o8({infinite:n,particlesToShow:t,partialPageSize:e}){const i=n?{head:Math.ceil(e||t),tail:Math.ceil(t)}:{head:0,tail:0};return fe(F({},i),{total:i.head+i.tail})}const bo=(n,t,e)=>{if(n&&n.hasOwnProperty(t))return n[t];if(e===void 0)throw new Error(`Required arg "${t}" was not provided`);return e},Ch=n=>t=>{n[t]&&n[t]()};var a8="Expected a function",Eg="__lodash_hash_undefined__",xg=1/0,l8="[object Function]",c8="[object GeneratorFunction]",h8="[object Symbol]",d8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u8=/^\w*$/,f8=/^\./,p8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m8=/[\\^$.*+?()[\]{}|]/g,g8=/\\(\\)?/g,v8=/^\[object .+?Constructor\]$/,A8=typeof vi=="object"&&vi&&vi.Object===Object&&vi,b8=typeof self=="object"&&self&&self.Object===Object&&self,Ih=A8||b8||Function("return this")();function y8(n,t){return n==null?void 0:n[t]}function w8(n){var t=!1;if(n!=null&&typeof n.toString!="function")try{t=!!(n+"")}catch(e){}return t}var P8=Array.prototype,C8=Function.prototype,Dg=Object.prototype,Mh=Ih["__core-js_shared__"],Sg=function(){var n=/[^.]+$/.exec(Mh&&Mh.keys&&Mh.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Lg=C8.toString,kh=Dg.hasOwnProperty,Tg=Dg.toString,I8=RegExp("^"+Lg.call(kh).replace(m8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zg=Ih.Symbol,M8=P8.splice,k8=Vg(Ih,"Map"),yo=Vg(Object,"create"),Og=zg?zg.prototype:void 0,jg=Og?Og.toString:void 0;function ks(n){var t=-1,e=n?n.length:0;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}function E8(){this.__data__=yo?yo(null):{}}function x8(n){return this.has(n)&&delete this.__data__[n]}function D8(n){var t=this.__data__;if(yo){var e=t[n];return e===Eg?void 0:e}return kh.call(t,n)?t[n]:void 0}function S8(n){var t=this.__data__;return yo?t[n]!==void 0:kh.call(t,n)}function L8(n,t){var e=this.__data__;return e[n]=yo&&t===void 0?Eg:t,this}ks.prototype.clear=E8,ks.prototype.delete=x8,ks.prototype.get=D8,ks.prototype.has=S8,ks.prototype.set=L8;function vr(n){var t=-1,e=n?n.length:0;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}function T8(){this.__data__=[]}function z8(n){var t=this.__data__,e=il(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():M8.call(t,e,1),!0}function O8(n){var t=this.__data__,e=il(t,n);return e<0?void 0:t[e][1]}function j8(n){return il(this.__data__,n)>-1}function V8(n,t){var e=this.__data__,i=il(e,n);return i<0?e.push([n,t]):e[i][1]=t,this}vr.prototype.clear=T8,vr.prototype.delete=z8,vr.prototype.get=O8,vr.prototype.has=j8,vr.prototype.set=V8;function Es(n){var t=-1,e=n?n.length:0;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}function B8(){this.__data__={hash:new ks,map:new(k8||vr),string:new ks}}function _8(n){return nl(this,n).delete(n)}function R8(n){return nl(this,n).get(n)}function F8(n){return nl(this,n).has(n)}function N8(n,t){return nl(this,n).set(n,t),this}Es.prototype.clear=B8,Es.prototype.delete=_8,Es.prototype.get=R8,Es.prototype.has=F8,Es.prototype.set=N8;function il(n,t){for(var e=n.length;e--;)if(K8(n[e][0],t))return e;return-1}function G8(n,t){t=Q8(t,n)?[t]:U8(t);for(var e=0,i=t.length;n!=null&&e<i;)n=n[J8(t[e++])];return e&&e==i?n:void 0}function H8(n){if(!_g(n)||Y8(n))return!1;var t=$8(n)||w8(n)?I8:v8;return t.test(q8(n))}function W8(n){if(typeof n=="string")return n;if(xh(n))return jg?jg.call(n):"";var t=n+"";return t=="0"&&1/n==-xg?"-0":t}function U8(n){return Bg(n)?n:Z8(n)}function nl(n,t){var e=n.__data__;return X8(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Vg(n,t){var e=y8(n,t);return H8(e)?e:void 0}function Q8(n,t){if(Bg(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||xh(n)?!0:u8.test(n)||!d8.test(n)||t!=null&&n in Object(t)}function X8(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function Y8(n){return!!Sg&&Sg in n}var Z8=Eh(function(n){n=t9(n);var t=[];return f8.test(n)&&t.push(""),n.replace(p8,function(e,i,s,r){t.push(s?r.replace(g8,"$1"):i||e)}),t});function J8(n){if(typeof n=="string"||xh(n))return n;var t=n+"";return t=="0"&&1/n==-xg?"-0":t}function q8(n){if(n!=null){try{return Lg.call(n)}catch(t){}try{return n+""}catch(t){}}return""}function Eh(n,t){if(typeof n!="function"||t&&typeof t!="function")throw new TypeError(a8);var e=function(){var i=arguments,s=t?t.apply(this,i):i[0],r=e.cache;if(r.has(s))return r.get(s);var o=n.apply(this,i);return e.cache=r.set(s,o),o};return e.cache=new(Eh.Cache||Es),e}Eh.Cache=Es;function K8(n,t){return n===t||n!==n&&t!==t}var Bg=Array.isArray;function $8(n){var t=_g(n)?Tg.call(n):"";return t==l8||t==c8}function _g(n){var t=typeof n;return!!n&&(t=="object"||t=="function")}function e9(n){return!!n&&typeof n=="object"}function xh(n){return typeof n=="symbol"||e9(n)&&Tg.call(n)==h8}function t9(n){return n==null?"":W8(n)}function i9(n,t,e){var i=n==null?void 0:G8(n,t);return i===void 0?e:i}var sl=i9,rl={},n9={get exports(){return rl},set exports(n){rl=n}};(function(n,t){var e=200,i="__lodash_hash_undefined__",s=9007199254740991,r="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",h="[object Function]",d="[object GeneratorFunction]",f="[object Map]",g="[object Number]",p="[object Object]",m="[object Promise]",v="[object RegExp]",b="[object Set]",w="[object String]",x="[object Symbol]",E="[object WeakMap]",L="[object ArrayBuffer]",S="[object DataView]",R="[object Float32Array]",z="[object Float64Array]",O="[object Int8Array]",A="[object Int16Array]",C="[object Int32Array]",I="[object Uint8Array]",M="[object Uint8ClampedArray]",D="[object Uint16Array]",T="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,W=/\w*$/,J=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,q={};q[r]=q[o]=q[L]=q[S]=q[a]=q[l]=q[R]=q[z]=q[O]=q[A]=q[C]=q[f]=q[g]=q[p]=q[v]=q[b]=q[w]=q[x]=q[I]=q[M]=q[D]=q[T]=!0,q[c]=q[h]=q[E]=!1;var ne=typeof vi=="object"&&vi&&vi.Object===Object&&vi,se=typeof self=="object"&&self&&self.Object===Object&&self,ue=ne||se||Function("return this")(),ze=t&&!t.nodeType&&t,Ce=ze&&!0&&n&&!n.nodeType&&n,ce=Ce&&Ce.exports===ze;function le(k,_){return k.set(_[0],_[1]),k}function he(k,_){return k.add(_),k}function ke(k,_){for(var $=-1,oe=k?k.length:0;++$<oe&&_(k[$],$,k)!==!1;);return k}function be(k,_){for(var $=-1,oe=_.length,Ue=k.length;++$<oe;)k[Ue+$]=_[$];return k}function We(k,_,$,oe){var Ue=-1,Be=k?k.length:0;for(oe&&Be&&($=k[++Ue]);++Ue<Be;)$=_($,k[Ue],Ue,k);return $}function Re(k,_){for(var $=-1,oe=Array(k);++$<k;)oe[$]=_($);return oe}function Te(k,_){return k==null?void 0:k[_]}function He(k){var _=!1;if(k!=null&&typeof k.toString!="function")try{_=!!(k+"")}catch($){}return _}function pe(k){var _=-1,$=Array(k.size);return k.forEach(function(oe,Ue){$[++_]=[Ue,oe]}),$}function Le(k,_){return function($){return k(_($))}}function Oe(k){var _=-1,$=Array(k.size);return k.forEach(function(oe){$[++_]=oe}),$}var rt=Array.prototype,st=Function.prototype,bt=Object.prototype,et=ue["__core-js_shared__"],tt=function(){var k=/[^.]+$/.exec(et&&et.keys&&et.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}(),ct=st.toString,dt=bt.hasOwnProperty,Xt=bt.toString,Ls=RegExp("^"+ct.call(dt).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fi=ce?ue.Buffer:void 0,zi=ue.Symbol,Ui=ue.Uint8Array,_t=Le(Object.getPrototypeOf,Object),Oi=Object.create,Qi=bt.propertyIsEnumerable,Eo=rt.splice,Ts=Object.getOwnPropertySymbols,Qn=fi?fi.isBuffer:void 0,Pr=Le(Object.keys,Object),Xn=G(ue,"DataView"),Ci=G(ue,"Map"),pi=G(ue,"Promise"),Yn=G(ue,"Set"),Zn=G(ue,"WeakMap"),Xi=G(Object,"create"),pn=Kt(Xn),mn=Kt(Ci),zs=Kt(pi),Os=Kt(Yn),Jn=Kt(Zn),Yi=zi?zi.prototype:void 0,Cr=Yi?Yi.valueOf:void 0;function ji(k){var _=-1,$=k?k.length:0;for(this.clear();++_<$;){var oe=k[_];this.set(oe[0],oe[1])}}function qn(){this.__data__=Xi?Xi(null):{}}function xo(k){return this.has(k)&&delete this.__data__[k]}function Do(k){var _=this.__data__;if(Xi){var $=_[k];return $===i?void 0:$}return dt.call(_,k)?_[k]:void 0}function js(k){var _=this.__data__;return Xi?_[k]!==void 0:dt.call(_,k)}function gn(k,_){var $=this.__data__;return $[k]=Xi&&_===void 0?i:_,this}ji.prototype.clear=qn,ji.prototype.delete=xo,ji.prototype.get=Do,ji.prototype.has=js,ji.prototype.set=gn;function Dt(k){var _=-1,$=k?k.length:0;for(this.clear();++_<$;){var oe=k[_];this.set(oe[0],oe[1])}}function Ir(){this.__data__=[]}function So(k){var _=this.__data__,$=Ii(_,k);if($<0)return!1;var oe=_.length-1;return $==oe?_.pop():Eo.call(_,$,1),!0}function Mr(k){var _=this.__data__,$=Ii(_,k);return $<0?void 0:_[$][1]}function kr(k){return Ii(this.__data__,k)>-1}function Er(k,_){var $=this.__data__,oe=Ii($,k);return oe<0?$.push([k,_]):$[oe][1]=_,this}Dt.prototype.clear=Ir,Dt.prototype.delete=So,Dt.prototype.get=Mr,Dt.prototype.has=kr,Dt.prototype.set=Er;function St(k){var _=-1,$=k?k.length:0;for(this.clear();++_<$;){var oe=k[_];this.set(oe[0],oe[1])}}function Vs(){this.__data__={hash:new ji,map:new(Ci||Dt),string:new ji}}function Vi(k){return j(this,k).delete(k)}function vn(k){return j(this,k).get(k)}function An(k){return j(this,k).has(k)}function Kn(k,_){return j(this,k).set(k,_),this}St.prototype.clear=Vs,St.prototype.delete=Vi,St.prototype.get=vn,St.prototype.has=An,St.prototype.set=Kn;function Vt(k){this.__data__=new Dt(k)}function Lo(){this.__data__=new Dt}function To(k){return this.__data__.delete(k)}function $n(k){return this.__data__.get(k)}function Gt(k){return this.__data__.has(k)}function Zi(k,_){var $=this.__data__;if($ instanceof Dt){var oe=$.__data__;if(!Ci||oe.length<e-1)return oe.push([k,_]),this;$=this.__data__=new St(oe)}return $.set(k,_),this}Vt.prototype.clear=Lo,Vt.prototype.delete=To,Vt.prototype.get=$n,Vt.prototype.has=Gt,Vt.prototype.set=Zi;function Yt(k,_){var $=Vo(k)||Lr(k)?Re(k.length,String):[],oe=$.length,Ue=!!oe;for(var Be in k)(_||dt.call(k,Be))&&!(Ue&&(Be=="length"||wt(Be,oe)))&&$.push(Be);return $}function si(k,_,$){var oe=k[_];(!(dt.call(k,_)&&vl(oe,$))||$===void 0&&!(_ in k))&&(k[_]=$)}function Ii(k,_){for(var $=k.length;$--;)if(vl(k[$][0],_))return $;return-1}function Ct(k,_){return k&&ns(_,_o(_),k)}function Zt(k,_,$,oe,Ue,Be,Ze){var qe;if(oe&&(qe=Be?oe(k,Ue,Be,Ze):oe(k)),qe!==void 0)return qe;if(!qi(k))return k;var kt=Vo(k);if(kt){if(qe=me(k),!_)return Bs(k,qe)}else{var it=ie(k),Ht=it==h||it==d;if(Al(k))return Ji(k,_);if(it==p||it==r||Ht&&!Be){if(He(k))return Be?k:{};if(qe=Se(Ht?{}:k),!_)return Oo(k,Ct(qe,k))}else{if(!q[it])return Be?k:{};qe=Xe(k,it,Zt,_)}}Ze||(Ze=new Vt);var ri=Ze.get(k);if(ri)return ri;if(Ze.set(k,qe),!kt)var Tt=$?jo(k):_o(k);return ke(Tt||k,function(Wt,Rt){Tt&&(Rt=Wt,Wt=k[Rt]),si(qe,Rt,Zt(Wt,_,$,oe,Rt,k,Ze))}),qe}function xr(k){return qi(k)?Oi(k):{}}function Dr(k,_,$){var oe=_(k);return Vo(k)?oe:be(oe,$(k))}function es(k){return Xt.call(k)}function Jt(k){if(!qi(k)||Lt(k))return!1;var _=Bo(k)||He(k)?Ls:J;return _.test(Kt(k))}function ts(k){if(!qt(k))return Pr(k);var _=[];for(var $ in Object(k))dt.call(k,$)&&$!="constructor"&&_.push($);return _}function Ji(k,_){if(_)return k.slice();var $=new k.constructor(k.length);return k.copy($),$}function bn(k){var _=new k.constructor(k.byteLength);return new Ui(_).set(new Ui(k)),_}function Bi(k,_){var $=_?bn(k.buffer):k.buffer;return new k.constructor($,k.byteOffset,k.byteLength)}function is(k,_,$){var oe=_?$(pe(k),!0):pe(k);return We(oe,le,new k.constructor)}function yn(k){var _=new k.constructor(k.source,W.exec(k));return _.lastIndex=k.lastIndex,_}function mi(k,_,$){var oe=_?$(Oe(k),!0):Oe(k);return We(oe,he,new k.constructor)}function zo(k){return Cr?Object(Cr.call(k)):{}}function Sr(k,_){var $=_?bn(k.buffer):k.buffer;return new k.constructor($,k.byteOffset,k.length)}function Bs(k,_){var $=-1,oe=k.length;for(_||(_=Array(oe));++$<oe;)_[$]=k[$];return _}function ns(k,_,$,oe){$||($={});for(var Ue=-1,Be=_.length;++Ue<Be;){var Ze=_[Ue],qe=oe?oe($[Ze],k[Ze],Ze,$,k):void 0;si($,Ze,qe===void 0?k[Ze]:qe)}return $}function Oo(k,_){return ns(k,K(k),_)}function jo(k){return Dr(k,_o,K)}function j(k,_){var $=k.__data__;return It(_)?$[typeof _=="string"?"string":"hash"]:$.map}function G(k,_){var $=Te(k,_);return Jt($)?$:void 0}var K=Ts?Le(Ts,Object):pd,ie=es;(Xn&&ie(new Xn(new ArrayBuffer(1)))!=S||Ci&&ie(new Ci)!=f||pi&&ie(pi.resolve())!=m||Yn&&ie(new Yn)!=b||Zn&&ie(new Zn)!=E)&&(ie=function(k){var _=Xt.call(k),$=_==p?k.constructor:void 0,oe=$?Kt($):void 0;if(oe)switch(oe){case pn:return S;case mn:return f;case zs:return m;case Os:return b;case Jn:return E}return _});function me(k){var _=k.length,$=k.constructor(_);return _&&typeof k[0]=="string"&&dt.call(k,"index")&&($.index=k.index,$.input=k.input),$}function Se(k){return typeof k.constructor=="function"&&!qt(k)?xr(_t(k)):{}}function Xe(k,_,$,oe){var Ue=k.constructor;switch(_){case L:return bn(k);case a:case l:return new Ue(+k);case S:return Bi(k,oe);case R:case z:case O:case A:case C:case I:case M:case D:case T:return Sr(k,oe);case f:return is(k,oe,$);case g:case w:return new Ue(k);case v:return yn(k);case b:return mi(k,oe,$);case x:return zo(k)}}function wt(k,_){return _=_==null?s:_,!!_&&(typeof k=="number"||te.test(k))&&k>-1&&k%1==0&&k<_}function It(k){var _=typeof k;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?k!=="__proto__":k===null}function Lt(k){return!!tt&&tt in k}function qt(k){var _=k&&k.constructor,$=typeof _=="function"&&_.prototype||bt;return k===$}function Kt(k){if(k!=null){try{return ct.call(k)}catch(_){}try{return k+""}catch(_){}}return""}function gl(k){return Zt(k,!0,!0)}function vl(k,_){return k===_||k!==k&&_!==_}function Lr(k){return fd(k)&&dt.call(k,"callee")&&(!Qi.call(k,"callee")||Xt.call(k)==r)}var Vo=Array.isArray;function Tr(k){return k!=null&&bl(k.length)&&!Bo(k)}function fd(k){return yl(k)&&Tr(k)}var Al=Qn||md;function Bo(k){var _=qi(k)?Xt.call(k):"";return _==h||_==d}function bl(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=s}function qi(k){var _=typeof k;return!!k&&(_=="object"||_=="function")}function yl(k){return!!k&&typeof k=="object"}function _o(k){return Tr(k)?Yt(k):ts(k)}function pd(){return[]}function md(){return!1}n.exports=gl})(n9,rl);const s9=rl;var ol={},r9={get exports(){return ol},set exports(n){ol=n}};(function(n,t){var e=200,i="__lodash_hash_undefined__",s=1,r=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",h="[object Boolean]",d="[object Date]",f="[object Error]",g="[object Function]",p="[object GeneratorFunction]",m="[object Map]",v="[object Number]",b="[object Null]",w="[object Object]",x="[object Promise]",E="[object Proxy]",L="[object RegExp]",S="[object Set]",R="[object String]",z="[object Symbol]",O="[object Undefined]",A="[object WeakMap]",C="[object ArrayBuffer]",I="[object DataView]",M="[object Float32Array]",D="[object Float64Array]",T="[object Int8Array]",H="[object Int16Array]",W="[object Int32Array]",J="[object Uint8Array]",te="[object Uint8ClampedArray]",q="[object Uint16Array]",ne="[object Uint32Array]",se=/[\\^$.*+?()[\]{}|]/g,ue=/^\[object .+?Constructor\]$/,ze=/^(?:0|[1-9]\d*)$/,Ce={};Ce[M]=Ce[D]=Ce[T]=Ce[H]=Ce[W]=Ce[J]=Ce[te]=Ce[q]=Ce[ne]=!0,Ce[a]=Ce[l]=Ce[C]=Ce[h]=Ce[I]=Ce[d]=Ce[f]=Ce[g]=Ce[m]=Ce[v]=Ce[w]=Ce[L]=Ce[S]=Ce[R]=Ce[A]=!1;var ce=typeof vi=="object"&&vi&&vi.Object===Object&&vi,le=typeof self=="object"&&self&&self.Object===Object&&self,he=ce||le||Function("return this")(),ke=t&&!t.nodeType&&t,be=ke&&!0&&n&&!n.nodeType&&n,We=be&&be.exports===ke,Re=We&&ce.process,Te=function(){try{return Re&&Re.binding&&Re.binding("util")}catch(k){}}(),He=Te&&Te.isTypedArray;function pe(k,_){for(var $=-1,oe=k==null?0:k.length,Ue=0,Be=[];++$<oe;){var Ze=k[$];_(Ze,$,k)&&(Be[Ue++]=Ze)}return Be}function Le(k,_){for(var $=-1,oe=_.length,Ue=k.length;++$<oe;)k[Ue+$]=_[$];return k}function Oe(k,_){for(var $=-1,oe=k==null?0:k.length;++$<oe;)if(_(k[$],$,k))return!0;return!1}function rt(k,_){for(var $=-1,oe=Array(k);++$<k;)oe[$]=_($);return oe}function st(k){return function(_){return k(_)}}function bt(k,_){return k.has(_)}function et(k,_){return k==null?void 0:k[_]}function tt(k){var _=-1,$=Array(k.size);return k.forEach(function(oe,Ue){$[++_]=[Ue,oe]}),$}function ct(k,_){return function($){return k(_($))}}function dt(k){var _=-1,$=Array(k.size);return k.forEach(function(oe){$[++_]=oe}),$}var Xt=Array.prototype,Ls=Function.prototype,fi=Object.prototype,zi=he["__core-js_shared__"],Ui=Ls.toString,_t=fi.hasOwnProperty,Oi=function(){var k=/[^.]+$/.exec(zi&&zi.keys&&zi.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}(),Qi=fi.toString,Eo=RegExp("^"+Ui.call(_t).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ts=We?he.Buffer:void 0,Qn=he.Symbol,Pr=he.Uint8Array,Xn=fi.propertyIsEnumerable,Ci=Xt.splice,pi=Qn?Qn.toStringTag:void 0,Yn=Object.getOwnPropertySymbols,Zn=Ts?Ts.isBuffer:void 0,Xi=ct(Object.keys,Object),pn=K(he,"DataView"),mn=K(he,"Map"),zs=K(he,"Promise"),Os=K(he,"Set"),Jn=K(he,"WeakMap"),Yi=K(Object,"create"),Cr=Kt(pn),ji=Kt(mn),qn=Kt(zs),xo=Kt(Os),Do=Kt(Jn),js=Qn?Qn.prototype:void 0,gn=js?js.valueOf:void 0;function Dt(k){var _=-1,$=k==null?0:k.length;for(this.clear();++_<$;){var oe=k[_];this.set(oe[0],oe[1])}}function Ir(){this.__data__=Yi?Yi(null):{},this.size=0}function So(k){var _=this.has(k)&&delete this.__data__[k];return this.size-=_?1:0,_}function Mr(k){var _=this.__data__;if(Yi){var $=_[k];return $===i?void 0:$}return _t.call(_,k)?_[k]:void 0}function kr(k){var _=this.__data__;return Yi?_[k]!==void 0:_t.call(_,k)}function Er(k,_){var $=this.__data__;return this.size+=this.has(k)?0:1,$[k]=Yi&&_===void 0?i:_,this}Dt.prototype.clear=Ir,Dt.prototype.delete=So,Dt.prototype.get=Mr,Dt.prototype.has=kr,Dt.prototype.set=Er;function St(k){var _=-1,$=k==null?0:k.length;for(this.clear();++_<$;){var oe=k[_];this.set(oe[0],oe[1])}}function Vs(){this.__data__=[],this.size=0}function Vi(k){var _=this.__data__,$=Ji(_,k);if($<0)return!1;var oe=_.length-1;return $==oe?_.pop():Ci.call(_,$,1),--this.size,!0}function vn(k){var _=this.__data__,$=Ji(_,k);return $<0?void 0:_[$][1]}function An(k){return Ji(this.__data__,k)>-1}function Kn(k,_){var $=this.__data__,oe=Ji($,k);return oe<0?(++this.size,$.push([k,_])):$[oe][1]=_,this}St.prototype.clear=Vs,St.prototype.delete=Vi,St.prototype.get=vn,St.prototype.has=An,St.prototype.set=Kn;function Vt(k){var _=-1,$=k==null?0:k.length;for(this.clear();++_<$;){var oe=k[_];this.set(oe[0],oe[1])}}function Lo(){this.size=0,this.__data__={hash:new Dt,map:new(mn||St),string:new Dt}}function To(k){var _=G(this,k).delete(k);return this.size-=_?1:0,_}function $n(k){return G(this,k).get(k)}function Gt(k){return G(this,k).has(k)}function Zi(k,_){var $=G(this,k),oe=$.size;return $.set(k,_),this.size+=$.size==oe?0:1,this}Vt.prototype.clear=Lo,Vt.prototype.delete=To,Vt.prototype.get=$n,Vt.prototype.has=Gt,Vt.prototype.set=Zi;function Yt(k){var _=-1,$=k==null?0:k.length;for(this.__data__=new Vt;++_<$;)this.add(k[_])}function si(k){return this.__data__.set(k,i),this}function Ii(k){return this.__data__.has(k)}Yt.prototype.add=Yt.prototype.push=si,Yt.prototype.has=Ii;function Ct(k){var _=this.__data__=new St(k);this.size=_.size}function Zt(){this.__data__=new St,this.size=0}function xr(k){var _=this.__data__,$=_.delete(k);return this.size=_.size,$}function Dr(k){return this.__data__.get(k)}function es(k){return this.__data__.has(k)}function Jt(k,_){var $=this.__data__;if($ instanceof St){var oe=$.__data__;if(!mn||oe.length<e-1)return oe.push([k,_]),this.size=++$.size,this;$=this.__data__=new Vt(oe)}return $.set(k,_),this.size=$.size,this}Ct.prototype.clear=Zt,Ct.prototype.delete=xr,Ct.prototype.get=Dr,Ct.prototype.has=es,Ct.prototype.set=Jt;function ts(k,_){var $=Lr(k),oe=!$&&vl(k),Ue=!$&&!oe&&Tr(k),Be=!$&&!oe&&!Ue&&yl(k),Ze=$||oe||Ue||Be,qe=Ze?rt(k.length,String):[],kt=qe.length;for(var it in k)(_||_t.call(k,it))&&!(Ze&&(it=="length"||Ue&&(it=="offset"||it=="parent")||Be&&(it=="buffer"||it=="byteLength"||it=="byteOffset")||Xe(it,kt)))&&qe.push(it);return qe}function Ji(k,_){for(var $=k.length;$--;)if(gl(k[$][0],_))return $;return-1}function bn(k,_,$){var oe=_(k);return Lr(k)?oe:Le(oe,$(k))}function Bi(k){return k==null?k===void 0?O:b:pi&&pi in Object(k)?ie(k):qt(k)}function is(k){return qi(k)&&Bi(k)==a}function yn(k,_,$,oe,Ue){return k===_?!0:k==null||_==null||!qi(k)&&!qi(_)?k!==k&&_!==_:mi(k,_,$,oe,yn,Ue)}function mi(k,_,$,oe,Ue,Be){var Ze=Lr(k),qe=Lr(_),kt=Ze?l:Se(k),it=qe?l:Se(_);kt=kt==a?w:kt,it=it==a?w:it;var Ht=kt==w,ri=it==w,Tt=kt==it;if(Tt&&Tr(k)){if(!Tr(_))return!1;Ze=!0,Ht=!1}if(Tt&&!Ht)return Be||(Be=new Ct),Ze||yl(k)?ns(k,_,$,oe,Ue,Be):Oo(k,_,kt,$,oe,Ue,Be);if(!($&s)){var Wt=Ht&&_t.call(k,"__wrapped__"),Rt=ri&&_t.call(_,"__wrapped__");if(Wt||Rt){var ss=Wt?k.value():k,wn=Rt?_.value():_;return Be||(Be=new Ct),Ue(ss,wn,$,oe,Be)}}return Tt?(Be||(Be=new Ct),jo(k,_,$,oe,Ue,Be)):!1}function zo(k){if(!bl(k)||It(k))return!1;var _=Al(k)?Eo:ue;return _.test(Kt(k))}function Sr(k){return qi(k)&&Bo(k.length)&&!!Ce[Bi(k)]}function Bs(k){if(!Lt(k))return Xi(k);var _=[];for(var $ in Object(k))_t.call(k,$)&&$!="constructor"&&_.push($);return _}function ns(k,_,$,oe,Ue,Be){var Ze=$&s,qe=k.length,kt=_.length;if(qe!=kt&&!(Ze&&kt>qe))return!1;var it=Be.get(k);if(it&&Be.get(_))return it==_;var Ht=-1,ri=!0,Tt=$&r?new Yt:void 0;for(Be.set(k,_),Be.set(_,k);++Ht<qe;){var Wt=k[Ht],Rt=_[Ht];if(oe)var ss=Ze?oe(Rt,Wt,Ht,_,k,Be):oe(Wt,Rt,Ht,k,_,Be);if(ss!==void 0){if(ss)continue;ri=!1;break}if(Tt){if(!Oe(_,function(wn,_s){if(!bt(Tt,_s)&&(Wt===wn||Ue(Wt,wn,$,oe,Be)))return Tt.push(_s)})){ri=!1;break}}else if(!(Wt===Rt||Ue(Wt,Rt,$,oe,Be))){ri=!1;break}}return Be.delete(k),Be.delete(_),ri}function Oo(k,_,$,oe,Ue,Be,Ze){switch($){case I:if(k.byteLength!=_.byteLength||k.byteOffset!=_.byteOffset)return!1;k=k.buffer,_=_.buffer;case C:return!(k.byteLength!=_.byteLength||!Be(new Pr(k),new Pr(_)));case h:case d:case v:return gl(+k,+_);case f:return k.name==_.name&&k.message==_.message;case L:case R:return k==_+"";case m:var qe=tt;case S:var kt=oe&s;if(qe||(qe=dt),k.size!=_.size&&!kt)return!1;var it=Ze.get(k);if(it)return it==_;oe|=r,Ze.set(k,_);var Ht=ns(qe(k),qe(_),oe,Ue,Be,Ze);return Ze.delete(k),Ht;case z:if(gn)return gn.call(k)==gn.call(_)}return!1}function jo(k,_,$,oe,Ue,Be){var Ze=$&s,qe=j(k),kt=qe.length,it=j(_),Ht=it.length;if(kt!=Ht&&!Ze)return!1;for(var ri=kt;ri--;){var Tt=qe[ri];if(!(Ze?Tt in _:_t.call(_,Tt)))return!1}var Wt=Be.get(k);if(Wt&&Be.get(_))return Wt==_;var Rt=!0;Be.set(k,_),Be.set(_,k);for(var ss=Ze;++ri<kt;){Tt=qe[ri];var wn=k[Tt],_s=_[Tt];if(oe)var Uv=Ze?oe(_s,wn,Tt,_,k,Be):oe(wn,_s,Tt,k,_,Be);if(!(Uv===void 0?wn===_s||Ue(wn,_s,$,oe,Be):Uv)){Rt=!1;break}ss||(ss=Tt=="constructor")}if(Rt&&!ss){var wl=k.constructor,Pl=_.constructor;wl!=Pl&&"constructor"in k&&"constructor"in _&&!(typeof wl=="function"&&wl instanceof wl&&typeof Pl=="function"&&Pl instanceof Pl)&&(Rt=!1)}return Be.delete(k),Be.delete(_),Rt}function j(k){return bn(k,_o,me)}function G(k,_){var $=k.__data__;return wt(_)?$[typeof _=="string"?"string":"hash"]:$.map}function K(k,_){var $=et(k,_);return zo($)?$:void 0}function ie(k){var _=_t.call(k,pi),$=k[pi];try{k[pi]=void 0;var oe=!0}catch(Be){}var Ue=Qi.call(k);return oe&&(_?k[pi]=$:delete k[pi]),Ue}var me=Yn?function(k){return k==null?[]:(k=Object(k),pe(Yn(k),function(_){return Xn.call(k,_)}))}:pd,Se=Bi;(pn&&Se(new pn(new ArrayBuffer(1)))!=I||mn&&Se(new mn)!=m||zs&&Se(zs.resolve())!=x||Os&&Se(new Os)!=S||Jn&&Se(new Jn)!=A)&&(Se=function(k){var _=Bi(k),$=_==w?k.constructor:void 0,oe=$?Kt($):"";if(oe)switch(oe){case Cr:return I;case ji:return m;case qn:return x;case xo:return S;case Do:return A}return _});function Xe(k,_){return _=_==null?o:_,!!_&&(typeof k=="number"||ze.test(k))&&k>-1&&k%1==0&&k<_}function wt(k){var _=typeof k;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?k!=="__proto__":k===null}function It(k){return!!Oi&&Oi in k}function Lt(k){var _=k&&k.constructor,$=typeof _=="function"&&_.prototype||fi;return k===$}function qt(k){return Qi.call(k)}function Kt(k){if(k!=null){try{return Ui.call(k)}catch(_){}try{return k+""}catch(_){}}return""}function gl(k,_){return k===_||k!==k&&_!==_}var vl=is(function(){return arguments}())?is:function(k){return qi(k)&&_t.call(k,"callee")&&!Xn.call(k,"callee")},Lr=Array.isArray;function Vo(k){return k!=null&&Bo(k.length)&&!Al(k)}var Tr=Zn||md;function fd(k,_){return yn(k,_)}function Al(k){if(!bl(k))return!1;var _=Bi(k);return _==g||_==p||_==c||_==E}function Bo(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=o}function bl(k){var _=typeof k;return k!=null&&(_=="object"||_=="function")}function qi(k){return k!=null&&typeof k=="object"}var yl=He?st(He):Sr;function _o(k){return Vo(k)?ts(k):Bs(k)}function pd(){return[]}function md(){return!1}n.exports=fd})(r9,ol);const o9=ol,a9=(n,t)=>o9(n,t),l9=n=>Object.keys(n||{}),c9=(n,t)=>{const e={};return n.forEach(i=>{e[i]=t[i]}),e},h9=()=>{const n={},t=(e,i)=>{const{watcherName:s,fn:r}=e,{prop:o,value:a}=i;n[s]||(n[s]={deps:{},fn:r}),n[s].deps[o]=a};return{subscribers:n,subscribe(e,i){e&&t(e,i)},notify(e,i){Object.entries(n).forEach(([s,{deps:r,fn:o}])=>{const a=l9(r);if(a.includes(i)){const l=c9(a,e);a9(r,l)||(n[s].deps=l,o())}})}}},d9=()=>{let n=null;return{targetWatcher(t,e){n={watcherName:t,fn:e},n.fn(),n=null},getTarget(){return n}}};function u9(n,t){const e=sl(n,"data",{}),i=sl(n,"watch",{}),s=sl(n,"methods",{}),r=sl(t,"onChange",()=>{}),{subscribe:o,notify:a,subscribers:l}=h9(),{targetWatcher:c,getTarget:h}=d9();let d;const f={},g=()=>({data:d,methods:f});let p=!1;const m=b=>(...w)=>{p=!0;const x=b(...w);return p=!1,x};Object.entries(s).forEach(([b,w])=>{f[b]=m((...x)=>w(g(),...x)),Object.defineProperty(f[b],"name",{value:b})}),d=new Proxy(s9(e),{get(b,w){return h()&&!p&&o(h(),{prop:w,value:b[w]}),Reflect.get(...arguments)},set(b,w,x){return b[w]===x||(Reflect.set(...arguments),h()||(r&&r(w,x),a(d,w))),!0}}),Object.entries(i).forEach(([b,w])=>{c(b,()=>{w(g())})});const v=[d,f];return v._internal={_getSubscribers(){return l}},v}function f9({pageIndex:n,particlesToShow:t,particlesToScroll:e,particlesCount:i}){const s=n===0?0:t-e,r=n*t-n*s,o=r+Math.max(t,e)-1,a=[];for(let l=r;l<=Math.min(i-1,o);l++)a.push(l);return a}function p9({infinite:n,pageIndex:t,pagesCount:e,particlesCount:i,particlesToShow:s,particlesToScroll:r}){const o=gr(0,t,e-1);let a=o-1,l=o+1;a=n?a<0?e-1:a:Math.max(0,a),l=n?l>e-1?0:l:Math.min(e-1,l);const c=[...new Set([a,o,l,0,e-1])].sort((d,f)=>d-f),h=c.flatMap(d=>f9({pageIndex:d,particlesToShow:s,particlesToScroll:r,particlesCount:i}));return{pageIndexes:c,particleIndexes:[...new Set(h)].sort((d,f)=>d-f)}}const m9=(n,t)=>(n(),setInterval(n,t)),g9=35,Rg=1;class v9{constructor({onProgressValueChange:t}){this._onProgressValueChange=t,this._autoplayDuration,this._onProgressValueChange,this._interval,this._paused=!1}setAutoplayDuration(t){this._autoplayDuration=t}start(t){return new Promise(e=>{this.reset();const i=Math.min(g9,Math.max(this._autoplayDuration,1));let s=-i;this._interval=m9(()=>ee(this,null,function*(){if(this._paused)return;s+=i;const r=s/this._autoplayDuration;this._onProgressValueChange(r),r>Rg&&(this.reset(),yield t(),e())}),i)})}pause(){this._paused=!0}resume(){this._paused=!1}reset(){clearInterval(this._interval),this._onProgressValueChange(Rg)}}function A9(n){const t=new v9({onProgressValueChange:o=>{n("progressValue",1-o)}}),e=u9({data:{particlesCountWithoutClones:0,particlesToShow:1,particlesToShowInit:1,particlesToScroll:1,particlesToScrollInit:1,particlesCount:1,currentParticleIndex:1,infinite:!1,autoplayDuration:1e3,clonesCountHead:0,clonesCountTail:0,clonesCountTotal:0,partialPageSize:1,currentPageIndex:1,pagesCount:1,pauseOnFocus:!1,focused:!1,autoplay:!1,autoplayDirection:"next",disabled:!1,durationMsInit:1e3,durationMs:1e3,offset:0,particleWidth:0,loaded:[]},watch:{setLoaded({data:o}){o.loaded=p9({infinite:o.infinite,pageIndex:o.currentPageIndex,pagesCount:o.pagesCount,particlesCount:o.particlesCountWithoutClones,particlesToShow:o.particlesToShow,particlesToScroll:o.particlesToScroll}).particleIndexes},setCurrentPageIndex({data:o}){o.currentPageIndex=qI({currentParticleIndex:o.currentParticleIndex,particlesCount:o.particlesCount,clonesCountHead:o.clonesCountHead,clonesCountTotal:o.clonesCountTotal,infinite:o.infinite,particlesToScroll:o.particlesToScroll})},setPartialPageSize({data:o}){o.partialPageSize=kg({particlesToScroll:o.particlesToScroll,particlesToShow:o.particlesToShow,particlesCountWithoutClones:o.particlesCountWithoutClones})},setClonesCount({data:o}){const{head:a,tail:l}=o8({infinite:o.infinite,particlesToShow:o.particlesToShow,partialPageSize:o.partialPageSize});o.clonesCountHead=a,o.clonesCountTail=l,o.clonesCountTotal=a+l},setProgressManagerAutoplayDuration({data:o}){t.setAutoplayDuration(o.autoplayDuration)},toggleProgressManager({data:{pauseOnFocus:o,focused:a}}){o&&(a?t.pause():t.resume())},initDuration({data:o}){o.durationMs=o.durationMsInit},applyAutoplay({data:o,methods:{_applyAutoplayIfNeeded:a}}){o.autoplay&&a(o.autoplay)},setPagesCount({data:o}){o.pagesCount=$I({infinite:o.infinite,particlesCountWithoutClones:o.particlesCountWithoutClones,particlesToScroll:o.particlesToScroll,particlesToShow:o.particlesToShow})},setParticlesToShow({data:o}){o.particlesToShow=gr(1,o.particlesToShowInit,o.particlesCountWithoutClones)},setParticlesToScroll({data:o}){o.particlesToScroll=gr(1,o.particlesToScrollInit,o.particlesCountWithoutClones)}},methods:{_prev({data:o}){o.currentParticleIndex=Ph({infinite:o.infinite,pageIndex:o.currentPageIndex-1,clonesCountHead:o.clonesCountHead,clonesCountTail:o.clonesCountTail,particlesToScroll:o.particlesToScroll,particlesCount:o.particlesCount,particlesToShow:o.particlesToShow})},_next({data:o}){o.currentParticleIndex=Ph({infinite:o.infinite,pageIndex:o.currentPageIndex+1,clonesCountHead:o.clonesCountHead,clonesCountTail:o.clonesCountTail,particlesToScroll:o.particlesToScroll,particlesCount:o.particlesCount,particlesToShow:o.particlesToShow})},_moveToParticle({data:o},a){o.currentParticleIndex=gr(0,a,o.particlesCount-1)},toggleFocused({data:o}){o.focused=!o.focused},_applyAutoplayIfNeeded(l){return ee(this,arguments,function*({data:o,methods:a}){if(!o.infinite&&(o.autoplayDirection===Gn&&o.currentParticleIndex===o.particlesCount-1||o.autoplayDirection===mr&&o.currentParticleIndex===0)){t.reset();return}if(o.autoplay){const c=()=>Ch({[Gn]:()=>ee(this,null,function*(){return a.showNextPage()}),[mr]:()=>ee(this,null,function*(){return a.showPrevPage()})})(o.autoplayDirection);yield t.start(c)}})},_jumpIfNeeded(l){return ee(this,arguments,function*({data:o,methods:a}){let c=!1;return o.infinite&&(o.currentParticleIndex===0?(yield a.showParticle(o.particlesCount-o.clonesCountTotal,{animated:!1}),c=!0):o.currentParticleIndex===o.particlesCount-o.clonesCountTail&&(yield a.showParticle(o.clonesCountHead,{animated:!1}),c=!0)),c})},changePage(h,d,f){return ee(this,arguments,function*({data:o,methods:a},l,c){if(t.reset(),o.disabled)return;o.disabled=!0,l(),yield a.offsetPage({animated:bo(c,"animated",!0)}),o.disabled=!1,!(yield a._jumpIfNeeded())&&a._applyAutoplayIfNeeded()})},showNextPage(c,h){return ee(this,arguments,function*({data:o,methods:a},l){o.disabled||(yield a.changePage(a._next,l))})},showPrevPage(c,h){return ee(this,arguments,function*({data:o,methods:a},l){o.disabled||(yield a.changePage(a._prev,l))})},showParticle(c,h,d){return ee(this,arguments,function*({methods:o},a,l){yield o.changePage(()=>o._moveToParticle(a),l)})},_getParticleIndexByPageIndex({data:o},a){return Ph({infinite:o.infinite,pageIndex:a,clonesCountHead:o.clonesCountHead,clonesCountTail:o.clonesCountTail,particlesToScroll:o.particlesToScroll,particlesCount:o.particlesCount,particlesToShow:o.particlesToShow})},showPage(c,h,d){return ee(this,arguments,function*({methods:o},a,l){const f=o._getParticleIndexByPageIndex(a);yield o.showParticle(f,l)})},offsetPage({data:o},a){const l=bo(a,"animated",!0);return new Promise(c=>{o.durationMs=l?o.durationMsInit:0,o.offset=-o.currentParticleIndex*o.particleWidth,setTimeout(()=>{c()},o.durationMs)})}}},{onChange:n}),[i,s]=e;return[{data:i,progressManager:t},s,e._internal]}function b9(n){De(n,"svelte-sme1z4",":root{--sc-color-rgb-light-50p:rgba(93, 93, 93, 0.5);--sc-color-rgb-light:#5d5d5d;--sc-color-hex-dark-50p:rgba(30, 30, 30, 0.5);--sc-color-hex-dark:#1e1e1e}.sc-carousel__carousel-container.svelte-sme1z4{display:flex;width:100%;flex-direction:column;align-items:center}.sc-carousel__content-container.svelte-sme1z4{position:relative;display:flex;width:100%}.sc-carousel__pages-window.svelte-sme1z4{flex:1;display:flex;overflow:hidden;box-sizing:border-box;position:relative}.sc-carousel__pages-container.svelte-sme1z4{width:100%;display:flex;transition-property:transform}.sc-carousel__arrow-container.svelte-sme1z4{padding:5px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.sc-carousel-progress__container.svelte-sme1z4{width:100%;height:5px;background-color:var(--sc-color-rgb-light-50p);position:absolute;bottom:0}.sc-carousel-button{all:unset;cursor:pointer}.sc-carousel-button:focus{outline:5px auto}")}const y9=n=>({currentPageIndex:n[0]&32,pagesCount:n[0]&1024,loaded:n[0]&64}),Fg=n=>({currentPageIndex:n[5],pagesCount:n[10],showPage:n[15],loaded:n[6]}),w9=n=>({loaded:n[0]&64,currentPageIndex:n[0]&32}),Ng=n=>({showNextPage:n[14].showNextPage,loaded:n[6],currentPageIndex:n[5]}),P9=n=>({loaded:n[0]&64,currentPageIndex:n[0]&32}),Gg=n=>({loaded:n[6],currentPageIndex:n[5]}),C9=n=>({loaded:n[0]&64,currentPageIndex:n[0]&32}),Hg=n=>({showPrevPage:n[14].showPrevPage,loaded:n[6],currentPageIndex:n[5]});function Wg(n){let t;const e=n[37].prev,i=En(e,n,n[36],Hg),s=i||I9(n);return{c(){s&&s.c()},m(r,o){s&&s.m(r,o),t=!0},p(r,o){i?i.p&&(!t||o[0]&96|o[1]&32)&&Dn(i,e,r,r[36],t?xn(e,r[36],o,C9):Sn(r[36]),Hg):s&&s.p&&(!t||o[0]&36)&&s.p(r,t?o:[-1,-1])},i(r){t||(N(s,r),t=!0)},o(r){Z(s,r),t=!1},d(r){s&&s.d(r)}}}function I9(n){let t,e,i;return e=new bg({props:{direction:"prev",disabled:!n[2]&&n[5]===0}}),e.$on("click",n[23]),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","sc-carousel__arrow-container svelte-sme1z4")},m(s,r){Y(s,t,r),ge(e,t,null),i=!0},p(s,r){const o={};r[0]&36&&(o.disabled=!s[2]&&s[5]===0),e.$set(o)},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e)}}}function Ug(n){let t,e,i;return e=new SI({props:{value:n[7]}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","sc-carousel-progress__container svelte-sme1z4")},m(s,r){Y(s,t,r),ge(e,t,null),i=!0},p(s,r){const o={};r[0]&128&&(o.value=s[7]),e.$set(o)},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e)}}}function Qg(n){let t;const e=n[37].next,i=En(e,n,n[36],Ng),s=i||M9(n);return{c(){s&&s.c()},m(r,o){s&&s.m(r,o),t=!0},p(r,o){i?i.p&&(!t||o[0]&96|o[1]&32)&&Dn(i,e,r,r[36],t?xn(e,r[36],o,w9):Sn(r[36]),Ng):s&&s.p&&(!t||o[0]&1060)&&s.p(r,t?o:[-1,-1])},i(r){t||(N(s,r),t=!0)},o(r){Z(s,r),t=!1},d(r){s&&s.d(r)}}}function M9(n){let t,e,i;return e=new bg({props:{direction:"next",disabled:!n[2]&&n[5]===n[10]-1}}),e.$on("click",n[14].showNextPage),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","sc-carousel__arrow-container svelte-sme1z4")},m(s,r){Y(s,t,r),ge(e,t,null),i=!0},p(s,r){const o={};r[0]&1060&&(o.disabled=!s[2]&&s[5]===s[10]-1),e.$set(o)},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e)}}}function Xg(n){let t;const e=n[37].dots,i=En(e,n,n[36],Fg),s=i||k9(n);return{c(){s&&s.c()},m(r,o){s&&s.m(r,o),t=!0},p(r,o){i?i.p&&(!t||o[0]&1120|o[1]&32)&&Dn(i,e,r,r[36],t?xn(e,r[36],o,y9):Sn(r[36]),Fg):s&&s.p&&(!t||o[0]&1056)&&s.p(r,t?o:[-1,-1])},i(r){t||(N(s,r),t=!0)},o(r){Z(s,r),t=!1},d(r){s&&s.d(r)}}}function k9(n){let t,e;return t=new CI({props:{pagesCount:n[10],currentPageIndex:n[5]}}),t.$on("pageChange",n[41]),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s[0]&1024&&(r.pagesCount=i[10]),s[0]&32&&(r.currentPageIndex=i[5]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function E9(n){let t,e,i,s,r,o,a,l,c,h,d,f,g=n[1]&&Wg(n);const p=n[37].default,m=En(p,n,n[36],Gg);let v=n[3]&&Ug(n),b=n[1]&&Qg(n),w=n[4]&&Xg(n);return{c(){t=U("div"),e=U("div"),g&&g.c(),i=ae(),s=U("div"),r=U("div"),m&&m.c(),a=ae(),v&&v.c(),l=ae(),b&&b.c(),c=ae(),w&&w.c(),y(r,"class","sc-carousel__pages-container svelte-sme1z4"),Q(r,"transform","translateX("+n[8]+"px)"),Q(r,"transition-duration",n[9]+"ms"),Q(r,"transition-timing-function",n[0]),y(s,"class","sc-carousel__pages-window svelte-sme1z4"),y(e,"class","sc-carousel__content-container svelte-sme1z4"),y(t,"class","sc-carousel__carousel-container svelte-sme1z4")},m(x,E){Y(x,t,E),V(t,e),g&&g.m(e,null),V(e,i),V(e,s),V(s,r),m&&m.m(r,null),n[39](r),V(s,a),v&&v.m(s,null),n[40](s),V(e,l),b&&b.m(e,null),V(t,c),w&&w.m(t,null),h=!0,d||(f=[Ai(o=RI.call(null,r,{thresholdProvider:n[38]})),je(r,"swipeStart",n[16]),je(r,"swipeMove",n[18]),je(r,"swipeEnd",n[19]),je(r,"swipeFailed",n[20]),je(r,"swipeThresholdReached",n[17]),Ai(HI.call(null,s)),je(s,"hovered",n[21]),Ai(YI.call(null,s)),je(s,"tapped",n[22])],d=!0)},p(x,E){x[1]?g?(g.p(x,E),E[0]&2&&N(g,1)):(g=Wg(x),g.c(),N(g,1),g.m(e,i)):g&&(Ee(),Z(g,1,1,()=>{g=null}),xe()),m&&m.p&&(!h||E[0]&96|E[1]&32)&&Dn(m,p,x,x[36],h?xn(p,x[36],E,P9):Sn(x[36]),Gg),(!h||E[0]&256)&&Q(r,"transform","translateX("+x[8]+"px)"),(!h||E[0]&512)&&Q(r,"transition-duration",x[9]+"ms"),(!h||E[0]&1)&&Q(r,"transition-timing-function",x[0]),o&&Di(o.update)&&E[0]&2048&&o.update.call(null,{thresholdProvider:x[38]}),x[3]?v?(v.p(x,E),E[0]&8&&N(v,1)):(v=Ug(x),v.c(),N(v,1),v.m(s,null)):v&&(Ee(),Z(v,1,1,()=>{v=null}),xe()),x[1]?b?(b.p(x,E),E[0]&2&&N(b,1)):(b=Qg(x),b.c(),N(b,1),b.m(e,null)):b&&(Ee(),Z(b,1,1,()=>{b=null}),xe()),x[4]?w?(w.p(x,E),E[0]&16&&N(w,1)):(w=Xg(x),w.c(),N(w,1),w.m(t,null)):w&&(Ee(),Z(w,1,1,()=>{w=null}),xe())},i(x){h||(N(g),N(m,x),N(v),N(b),N(w),h=!0)},o(x){Z(g),Z(m,x),Z(v),Z(b),Z(w),h=!1},d(x){x&&X(t),g&&g.d(),m&&m.d(x),n[39](null),v&&v.d(),n[40](null),b&&b.d(),w&&w.d(),d=!1,ut(f)}}}function x9(n,t,e){let{$$slots:i={},$$scope:s}=t,r=[],o,a,l=0,c=0,h=1;const[{data:d,progressManager:f},g,p]=A9((pe,Le)=>{Ch({currentPageIndex:()=>e(5,o=Le),progressValue:()=>e(7,a=Le),offset:()=>e(8,l=Le),durationMs:()=>e(9,c=Le),pagesCount:()=>e(10,h=Le),loaded:()=>e(6,r=Le)})(pe)}),m=qs();let{timingFunction:v="ease-in-out"}=t,{arrows:b=!0}=t,{infinite:w=!0}=t,{initialPageIndex:x=0}=t,{duration:E=500}=t,{autoplay:L=!1}=t,{autoplayDuration:S=3e3}=t,{autoplayDirection:R=Gn}=t,{pauseOnFocus:z=!1}=t,{autoplayProgressVisible:O=!1}=t,{dots:A=!0}=t,{swiping:C=!0}=t,{particlesToShow:I=1}=t,{particlesToScroll:M=1}=t;function D(pe,Le){return ee(this,null,function*(){const Oe=bo(Le,"animated",!0);if(typeof pe!="number")throw new Error("pageIndex should be a number");yield g.showPage(pe,{animated:Oe})})}function T(pe){return ee(this,null,function*(){const Le=bo(pe,"animated",!0);yield g.showPrevPage({animated:Le})})}function H(pe){return ee(this,null,function*(){const Le=bo(pe,"animated",!0);yield g.showNextPage({animated:Le})})}let W=0,J,te;const q=n8(({width:pe})=>{e(11,W=pe),d.particleWidth=W/d.particlesToShow,i8({particlesContainerChildren:te.children,particleWidth:d.particleWidth}),g.offsetPage({animated:!1})});function ne(){const{clonesToAppend:pe,clonesToPrepend:Le}=s8({clonesCountHead:d.clonesCountHead,clonesCountTail:d.clonesCountTail,particlesContainerChildren:te.children});r8({particlesContainer:te,clonesToAppend:pe,clonesToPrepend:Le})}zt(()=>{ee(this,null,function*(){yield Vu(),te&&J&&(d.particlesCountWithoutClones=te.children.length,yield Vu(),d.infinite&&ne(),d.particlesCount=te.children.length,g.showPage(x,{animated:!1}),q.observe(J))})}),ti(()=>{q.disconnect(),f.reset()});function se(pe){return ee(this,null,function*(){yield g.showPage(pe,{animated:!0})})}function ue(){C&&(d.durationMs=0)}function ze(pe){return ee(this,null,function*(){C&&(yield Ch({[Gn]:g.showNextPage,[mr]:g.showPrevPage})(pe.detail.direction))})}function Ce(pe){C&&(d.offset+=pe.detail.dx)}function ce(){C&&g.showParticle(d.currentParticleIndex)}function le(){return ee(this,null,function*(){C&&(yield g.offsetPage({animated:!0}))})}function he(pe){d.focused=pe.detail.value}function ke(){g.toggleFocused()}function be(){g.showPrevPage()}const We=()=>W/3;function Re(pe){Je[pe?"unshift":"push"](()=>{te=pe,e(13,te)})}function Te(pe){Je[pe?"unshift":"push"](()=>{J=pe,e(12,J)})}const He=pe=>se(pe.detail);return n.$$set=pe=>{"timingFunction"in pe&&e(0,v=pe.timingFunction),"arrows"in pe&&e(1,b=pe.arrows),"infinite"in pe&&e(2,w=pe.infinite),"initialPageIndex"in pe&&e(24,x=pe.initialPageIndex),"duration"in pe&&e(25,E=pe.duration),"autoplay"in pe&&e(26,L=pe.autoplay),"autoplayDuration"in pe&&e(27,S=pe.autoplayDuration),"autoplayDirection"in pe&&e(28,R=pe.autoplayDirection),"pauseOnFocus"in pe&&e(29,z=pe.pauseOnFocus),"autoplayProgressVisible"in pe&&e(3,O=pe.autoplayProgressVisible),"dots"in pe&&e(4,A=pe.dots),"swiping"in pe&&e(30,C=pe.swiping),"particlesToShow"in pe&&e(31,I=pe.particlesToShow),"particlesToScroll"in pe&&e(32,M=pe.particlesToScroll),"$$scope"in pe&&e(36,s=pe.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&32&&m("pageChange",o),n.$$.dirty[0]&4&&(d.infinite=w),n.$$.dirty[0]&33554432&&(d.durationMsInit=E),n.$$.dirty[0]&67108864&&(d.autoplay=L),n.$$.dirty[0]&134217728&&(d.autoplayDuration=S),n.$$.dirty[0]&268435456&&(d.autoplayDirection=R),n.$$.dirty[0]&536870912&&(d.pauseOnFocus=z),n.$$.dirty[1]&1&&(d.particlesToShowInit=I),n.$$.dirty[1]&2&&(d.particlesToScrollInit=M)},[v,b,w,O,A,o,r,a,l,c,h,W,J,te,g,se,ue,ze,Ce,ce,le,he,ke,be,x,E,L,S,R,z,C,I,M,D,T,H,s,i,We,Re,Te,He]}class D9 extends Me{constructor(t){super(),Ie(this,t,x9,E9,Pe,{timingFunction:0,arrows:1,infinite:2,initialPageIndex:24,duration:25,autoplay:26,autoplayDuration:27,autoplayDirection:28,pauseOnFocus:29,autoplayProgressVisible:3,dots:4,swiping:30,particlesToShow:31,particlesToScroll:32,goTo:33,goToPrev:34,goToNext:35},b9,[-1,-1])}get goTo(){return this.$$.ctx[33]}get goToPrev(){return this.$$.ctx[34]}get goToNext(){return this.$$.ctx[35]}}function S9(n){De(n,"svelte-159ski6",".media-item.svelte-159ski6.svelte-159ski6{position:relative;height:100%}.media-content.svelte-159ski6.svelte-159ski6{position:relative;pointer-events:auto;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:inherit;object-fit:inherit}.media-content.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none}.video-icon.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem;max-width:60%;max-height:60%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.video-play-button-container.svelte-159ski6.svelte-159ski6{display:none;position:absolute;width:100%;height:100%;top:0;left:0;transform:translate3d(0, 0, 0)}.video-play-button-container.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none;display:block}.video-icon.svelte-159ski6.svelte-159ski6{pointer-events:auto}.video-icon.large.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem}.video-icon.small.svelte-159ski6.svelte-159ski6{width:1.75rem;height:1.75rem}.video-icon.svelte-159ski6 .video-icon-img.svelte-159ski6{width:100%;height:100%;background-position:center center;background-size:contain;background-repeat:no-repeat}.video-icon.svelte-159ski6 .video-icon-img.canPlay.svelte-159ski6{cursor:pointer}")}function Yg(n){let t;function e(r,o){if(r[2].type==="Image")return T9;if(r[2].type==="Video")return L9}let i=e(n),s=i&&i(n);return{c(){t=U("div"),s&&s.c(),y(t,"class","media-item svelte-159ski6"),y(t,"draggable","false")},m(r,o){Y(r,t,o),s&&s.m(t,null)},p(r,o){i===(i=e(r))&&s?s.p(r,o):(s&&s.d(1),s=i&&i(r),s&&(s.c(),s.m(t,null)))},d(r){r&&X(t),s&&s.d()}}}function L9(n){let t,e,i,s,r,o;function a(h,d){return h[8]&&h[2].videoCoverUrl?O9:z9}let l=a(n),c=l(n);return{c(){c.c(),t=ae(),e=U("div"),i=U("div"),s=U("div"),y(s,"class","video-icon-img svelte-159ski6"),Q(s,"background-image","url("+n[21]()+")"),we(s,"canPlay",n[5]),y(i,"class","video-icon svelte-159ski6"),we(i,"large",n[4]==="large"),we(i,"small",n[4]==="small"),y(e,"class","video-play-button-container svelte-159ski6"),we(e,"showPlayButton",n[11])},m(h,d){c.m(h,d),Y(h,t,d),Y(h,e,d),V(e,i),V(i,s),r||(o=je(s,"click",n[22]),r=!0)},p(h,d){l===(l=a(h))&&c?c.p(h,d):(c.d(1),c=l(h),c&&(c.c(),c.m(t.parentNode,t))),d&8&&Q(s,"background-image","url("+h[21]()+")"),d&32&&we(s,"canPlay",h[5]),d&16&&we(i,"large",h[4]==="large"),d&16&&we(i,"small",h[4]==="small"),d&2048&&we(e,"showPlayButton",h[11])},d(h){c.d(h),h&&X(t),h&&X(e),r=!1,o()}}}function T9(n){let t,e,i;return{c(){t=U("img"),y(t,"class","media-content svelte-159ski6"),ft(t.src,e=n[2].url)||y(t,"src",e),y(t,"alt",i=n[2].name),y(t,"draggable",!1),Q(t,"object-fit",n[7])},m(s,r){Y(s,t,r)},p(s,r){r&4&&!ft(t.src,e=s[2].url)&&y(t,"src",e),r&4&&i!==(i=s[2].name)&&y(t,"alt",i),r&128&&Q(t,"object-fit",s[7])},d(s){s&&X(t)}}}function z9(n){let t,e,i,s,r,o;return{c(){t=U("video"),y(t,"class","media-content svelte-159ski6"),ft(t.src,e=n[2].videoCoverUrl?n[2].url:n[2].url+"#t=0.1")||y(t,"src",e),y(t,"poster",i=n[2].videoCoverUrl),y(t,"preload",s=n[2].videoCoverUrl?"none":"auto"),y(t,"disablepictureinpicture",""),t.playsInline=!0,y(t,"paused",""),t.muted=!0,y(t,"draggable",!1),t.loop=!1,y(t,"crossorigin",""),t.autoplay=n[6],t.controls=!1,we(t,"showPlayButton",n[11]),Q(t,"object-fit",n[7])},m(a,l){Y(a,t,l),n[20](t),r||(o=[je(t,"play",n[15]),je(t,"pause",n[16]),je(t,"error",n[17]),je(t,"ended",n[18]),je(t,"click",n[19])],r=!0)},p(a,l){l&4&&!ft(t.src,e=a[2].videoCoverUrl?a[2].url:a[2].url+"#t=0.1")&&y(t,"src",e),l&4&&i!==(i=a[2].videoCoverUrl)&&y(t,"poster",i),l&4&&s!==(s=a[2].videoCoverUrl?"none":"auto")&&y(t,"preload",s),l&64&&(t.autoplay=a[6]),l&2048&&we(t,"showPlayButton",a[11]),l&128&&Q(t,"object-fit",a[7])},d(a){a&&X(t),n[20](null),r=!1,ut(o)}}}function O9(n){let t,e,i;return{c(){t=U("img"),y(t,"class","media-content svelte-159ski6"),ft(t.src,e=n[2].videoCoverUrl)||y(t,"src",e),y(t,"alt",i=n[2].name),y(t,"draggable",!1),Q(t,"object-fit",n[7])},m(s,r){Y(s,t,r)},p(s,r){r&4&&!ft(t.src,e=s[2].videoCoverUrl)&&y(t,"src",e),r&4&&i!==(i=s[2].name)&&y(t,"alt",i),r&128&&Q(t,"object-fit",s[7])},d(s){s&&X(t)}}}function j9(n){let t,e=n[2]&&Yg(n);return{c(){e&&e.c(),t=Ne()},m(i,s){e&&e.m(i,s),Y(i,t,s)},p(i,[s]){i[2]?e?e.p(i,s):(e=Yg(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:re,o:re,d(i){e&&e.d(i),i&&X(t)}}}function V9(n,t,e){let i,s,{mediaInstance:r={videoInstance:void 0,paused:!0}}=t,{tag:o}=t,{media:a}=t,{playButtonIfNeed:l="withoutText"}=t,{playButtonSizeIfNeed:c="small"}=t,{canPlay:h=!0}=t,{autoplayVideo:d=!1}=t,{objectFit:f="fill"}=t,{disableVideoIfHavePoster:g=!1}=t,p=!0,m=!1;function v(){e(9,m=(a==null?void 0:a.type)==="Video"&&!!a.videoCoverUrl)}const b=Ni("mediaStore"),w=Ni("hooks"),x=()=>{m||i&&(e(10,i.muted=!0,i),i.play(),i.pause(),e(10,i.muted=!1,i),e(9,m=!0))};w.on("loadVideoFirstFrame",x),zt(()=>{b.subscribe(({currentMediaElement:I})=>{I!==i&&(i==null||i.pause())})});const E=I=>{e(11,p=!1),e(0,r.paused=!1,r),e(9,m=!0),i&&b.set({currentMediaElement:i}),w.emit("playStateChange",{event:I,state:"playing",tag:o,mediaInstance:i})},L=I=>{e(11,p=!0),e(0,r.paused=!0,r),w.emit("playStateChange",{event:I,state:"paused",tag:o,mediaInstance:i})},S=I=>{e(11,p=!0),e(0,r.paused=!0,r),w.emit("playStateChange",{event:I,state:"paused",tag:o,mediaInstance:i})},R=I=>{e(11,p=!0),e(0,r.paused=!0,r),w.emit("playStateChange",{event:I,state:"paused",tag:o,mediaInstance:i})},z=I=>{i&&i.pause()};function O(I){Je[I?"unshift":"push"](()=>{r.videoInstance=I,e(0,r)})}const A=()=>l==="withText"?sh:l==="withoutText"?rh:l,C=I=>{h&&i&&(e(10,i.muted=!1,i),i.play())};return n.$$set=I=>{"mediaInstance"in I&&e(0,r=I.mediaInstance),"tag"in I&&e(1,o=I.tag),"media"in I&&e(2,a=I.media),"playButtonIfNeed"in I&&e(3,l=I.playButtonIfNeed),"playButtonSizeIfNeed"in I&&e(4,c=I.playButtonSizeIfNeed),"canPlay"in I&&e(5,h=I.canPlay),"autoplayVideo"in I&&e(6,d=I.autoplayVideo),"objectFit"in I&&e(7,f=I.objectFit),"disableVideoIfHavePoster"in I&&e(8,g=I.disableVideoIfHavePoster)},n.$$.update=()=>{if(n.$$.dirty&1&&e(10,i=r.videoInstance),n.$$.dirty&4&&e(14,s=a==null?void 0:a.url),n.$$.dirty&16384&&s&&v(),n.$$.dirty&1024&&i&&e(11,p=i.paused),n.$$.dirty&1540&&(a==null?void 0:a.type)==="Video"&&!m){const I=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,D=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1&&I;i&&D&&i.paused&&(document.removeEventListener("WeixinJSBridgeReady",x),document.removeEventListener("touchstart",x),document.removeEventListener("click",x),document.addEventListener("WeixinJSBridgeReady",x),document.addEventListener("touchstart",x),document.addEventListener("click",x))}},[r,o,a,l,c,h,d,f,g,m,i,p,b,w,s,E,L,S,R,z,O,A,C]}class Zg extends Me{constructor(t){super(),Ie(this,t,V9,j9,Pe,{mediaInstance:0,tag:1,media:2,playButtonIfNeed:3,playButtonSizeIfNeed:4,canPlay:5,autoplayVideo:6,objectFit:7,disableVideoIfHavePoster:8},S9)}}function B9(n){De(n,"svelte-1mrbqlg",".media-list-wrapper.svelte-1mrbqlg.svelte-1mrbqlg{width:100%;height:100%;position:relative;overflow:hidden;border-radius:0.125rem}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg{position:relative;pointer-events:auto;height:100%;left:50%;top:50%;transform:translate(-50%, -50%)}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__carousel-container,.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__content-container{height:100%}")}function Jg(n,t,e){const i=n.slice();return i[28]=t[e],i[29]=t,i[30]=e,i}function qg(n){let t,e,i,s,r,o,a;const l=[R9,_9],c=[];function h(d,f){return d[13]&&d[10].length>1?0:1}return i=h(n),s=c[i]=l[i](n),{c(){t=U("div"),e=U("div"),s.c(),y(e,"class","media-list svelte-1mrbqlg"),we(e,"carouselEnabled",n[13]),y(t,"class","media-list-wrapper svelte-1mrbqlg"),we(t,"unfolded",n[5])},m(d,f){Y(d,t,f),V(t,e),c[i].m(e,null),a=!0},p(d,f){n=d;let g=i;i=h(n),i===g?c[i].p(n,f):(Ee(),Z(c[g],1,1,()=>{c[g]=null}),xe(),s=c[i],s?s.p(n,f):(s=c[i]=l[i](n),s.c()),N(s,1),s.m(e,null)),(!a||f[0]&8192)&&we(e,"carouselEnabled",n[13]),(!a||f[0]&32)&&we(t,"unfolded",n[5])},i(d){a||(N(s),d&&pt(()=>{a&&(o&&o.end(1),r=Tn(t,Xu,n[6]?{y:4,duration:n[4],delay:n[2],easing:rn}:void 0),r.start())}),a=!0)},o(d){Z(s),r&&r.invalidate(),d&&(o=tr(t,Xu,n[6]?{y:4,duration:n[4],delay:n[3],easing:rn}:void 0)),a=!1},d(d){d&&X(t),c[i].d(),d&&o&&o.end()}}}function _9(n){let t,e,i;const s=[{media:n[1][0]},{autoplayVideo:n[14]},n[7],{tag:n[0]}];function r(a){n[21](a)}let o={};for(let a=0;a<s.length;a+=1)o=xt(o,s[a]);return n[8][0]!==void 0&&(o.mediaInstance=n[8][0]),t=new Zg({props:o}),Je.push(()=>ba(t,"mediaInstance",r)),{c(){Ae(t.$$.fragment)},m(a,l){ge(t,a,l),i=!0},p(a,l){const c=l[0]&16515?Ot(s,[l[0]&2&&{media:a[1][0]},l[0]&16384&&{autoplayVideo:a[14]},l[0]&128&&_u(a[7]),l[0]&1&&{tag:a[0]}]):{};!e&&l[0]&256&&(e=!0,c.mediaInstance=a[8][0],ga(()=>e=!1)),t.$set(c)},i(a){i||(N(t.$$.fragment,a),i=!0)},o(a){Z(t.$$.fragment,a),i=!1},d(a){ve(t,a)}}}function R9(n){let t,e,i={dots:!1,arrows:!1,$$slots:{default:[F9]},$$scope:{ctx:n}};return t=new D9({props:i}),n[19](t),t.$on("pageChange",n[20]),{c(){Ae(t.$$.fragment)},m(s,r){ge(t,s,r),e=!0},p(s,r){const o={};r[0]&1409|r[1]&1&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){e||(N(t.$$.fragment,s),e=!0)},o(s){Z(t.$$.fragment,s),e=!1},d(s){n[19](null),ve(t,s)}}}function Kg(n){let t,e,i;const s=[n[7],{media:n[28]},{tag:n[0]}];function r(a){n[18](a,n[30])}let o={};for(let a=0;a<s.length;a+=1)o=xt(o,s[a]);return n[8][n[30]]!==void 0&&(o.mediaInstance=n[8][n[30]]),t=new Zg({props:o}),Je.push(()=>ba(t,"mediaInstance",r)),{c(){Ae(t.$$.fragment)},m(a,l){ge(t,a,l),i=!0},p(a,l){n=a;const c=l[0]&1153?Ot(s,[l[0]&128&&_u(n[7]),l[0]&1024&&{media:n[28]},l[0]&1&&{tag:n[0]}]):{};!e&&l[0]&256&&(e=!0,c.mediaInstance=n[8][n[30]],ga(()=>e=!1)),t.$set(c)},i(a){i||(N(t.$$.fragment,a),i=!0)},o(a){Z(t.$$.fragment,a),i=!1},d(a){ve(t,a)}}}function F9(n){let t,e,i=n[10],s=[];for(let o=0;o<i.length;o+=1)s[o]=Kg(Jg(n,i,o));const r=o=>Z(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();t=Ne()},m(o,a){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(o,a);Y(o,t,a),e=!0},p(o,a){if(a[0]&1409){i=o[10];let l;for(l=0;l<i.length;l+=1){const c=Jg(o,i,l);s[l]?(s[l].p(c,a),N(s[l],1)):(s[l]=Kg(c),s[l].c(),N(s[l],1),s[l].m(t.parentNode,t))}for(Ee(),l=i.length;l<s.length;l+=1)r(l);xe()}},i(o){if(!e){for(let a=0;a<i.length;a+=1)N(s[a]);e=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)Z(s[a]);e=!1},d(o){ci(s,o),o&&X(t)}}}function N9(n){let t,e,i=n[5]&&qg(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,r){s[5]?i?(i.p(s,r),r[0]&32&&N(i,1)):(i=qg(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function G9(n,t,e){let i,s,r,o,{tag:a}=t,{mediaData:l}=t,{inDelay:c=0}=t,{outDelay:h=0}=t,{duration:d=0}=t,{unfolded:f=!0}=t,{animation:g=!0}=t,{mediaItemConfig:p}=t,{enableCarousel:m=!0}=t,{autoplayConfig:v={}}=t;const{autoplayVideo:b=!1,autoplayCarousel:w=!0,autoplayVideoInCarousel:x=!1}=v;let E=[],L=0,S,R=null;const z=Ni("hooks"),O=Ni("mediaStore");function A(){const T=E[L],H=T==null?void 0:T.videoInstance;H&&(H.paused?(H.muted=!1,H.play()):H.pause())}zt(()=>{z.on("click",T=>{var H;(H=a.tag3DContentSvelte)!=null&&H.css3DInstance&&T.tag.id===a.id&&T.target==="TagContent"&&A()}),e(0,a.play=()=>{const T=E[L],H=T==null?void 0:T.videoInstance;H&&(H.muted=!1,H.play())},a),e(0,a.pause=()=>{const T=E[L],H=T==null?void 0:T.videoInstance;H&&H.pause()},a),R=setInterval(()=>{o&&(S==null||S.goToNext())},3e3)}),ti(()=>{clearInterval(R),z.off("click",A)});function C(T,H){n.$$.not_equal(E[H],T)&&(E[H]=T,e(8,E))}function I(T){Je[T?"unshift":"push"](()=>{S=T,e(12,S)})}const M=T=>{i||O.set({currentMediaElement:null}),e(11,L=T.detail)};function D(T){n.$$.not_equal(E[0],T)&&(E[0]=T,e(8,E))}return n.$$set=T=>{"tag"in T&&e(0,a=T.tag),"mediaData"in T&&e(1,l=T.mediaData),"inDelay"in T&&e(2,c=T.inDelay),"outDelay"in T&&e(3,h=T.outDelay),"duration"in T&&e(4,d=T.duration),"unfolded"in T&&e(5,f=T.unfolded),"animation"in T&&e(6,g=T.animation),"mediaItemConfig"in T&&e(7,p=T.mediaItemConfig),"enableCarousel"in T&&e(16,m=T.enableCarousel),"autoplayConfig"in T&&e(17,v=T.autoplayConfig)},n.$$.update=()=>{n.$$.dirty[0]&256&&e(9,i=E.every(T=>T.paused)),n.$$.dirty[0]&65538&&e(13,s=m&&(l==null?void 0:l.length)>1),n.$$.dirty[0]&2&&e(10,r=l),n.$$.dirty[0]&1536&&(o=r.length>1&&w&&i)},[a,l,c,h,d,f,g,p,E,i,r,L,S,s,b,O,m,v,C,I,M,D]}class $g extends Me{constructor(t){super(),Ie(this,t,G9,N9,Pe,{tag:0,mediaData:1,inDelay:2,outDelay:3,duration:4,unfolded:5,animation:6,mediaItemConfig:7,enableCarousel:16,autoplayConfig:17},B9,[-1,-1])}}function H9(n){De(n,"svelte-1f7m1lj",".line.svelte-1f7m1lj{position:absolute;width:6.5625rem;height:1.3125rem;transform:translateY(-100%)}.text.svelte-1f7m1lj{position:absolute;width:6.25rem;left:1rem;bottom:0.0625rem;font-weight:600}.media-wrapper.svelte-1f7m1lj{position:absolute;left:0.875rem;top:-5.3125rem;width:5.625rem;height:3.75rem;font-weight:600}")}function e0(n){let t,e,i,s,r,o,a,l;t=new Si({props:{visible:n[3],left:61,bottom:57,width:2,blurRadius:150,spreadRadius:75}}),s=new mI({props:{unfolded:n[3],outDelay:400}});let c=n[2]&&t0(n),h=n[1]&&i0(n);return{c(){Ae(t.$$.fragment),e=ae(),i=U("div"),Ae(s.$$.fragment),r=ae(),c&&c.c(),o=ae(),h&&h.c(),a=Ne(),y(i,"class","line svelte-1f7m1lj")},m(d,f){ge(t,d,f),Y(d,e,f),Y(d,i,f),ge(s,i,null),Y(d,r,f),c&&c.m(d,f),Y(d,o,f),h&&h.m(d,f),Y(d,a,f),l=!0},p(d,f){const g={};f&8&&(g.visible=d[3]),t.$set(g);const p={};f&8&&(p.unfolded=d[3]),s.$set(p),d[2]?c?(c.p(d,f),f&4&&N(c,1)):(c=t0(d),c.c(),N(c,1),c.m(o.parentNode,o)):c&&(Ee(),Z(c,1,1,()=>{c=null}),xe()),d[1]?h?(h.p(d,f),f&2&&N(h,1)):(h=i0(d),h.c(),N(h,1),h.m(a.parentNode,a)):h&&(Ee(),Z(h,1,1,()=>{h=null}),xe())},i(d){l||(N(t.$$.fragment,d),N(s.$$.fragment,d),N(c),N(h),l=!0)},o(d){Z(t.$$.fragment,d),Z(s.$$.fragment,d),Z(c),Z(h),l=!1},d(d){ve(t,d),d&&X(e),d&&X(i),ve(s),d&&X(r),c&&c.d(d),d&&X(o),h&&h.d(d),d&&X(a)}}}function t0(n){let t,e,i;return e=new og({props:{unfolded:n[3],content:n[2],inDelay:500}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","text svelte-1f7m1lj")},m(s,r){Y(s,t,r),ge(e,t,null),i=!0},p(s,r){const o={};r&8&&(o.unfolded=s[3]),r&4&&(o.content=s[2]),e.$set(o)},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e)}}}function i0(n){let t,e,i;return e=new $g({props:{autoplayConfig:{autoplayCarousel:!1},unfolded:n[3],mediaData:n[1],tag:n[0],enableCarousel:!1,mediaItemConfig:{canPlay:!1,playButtonSizeIfNeed:"small",disableVideoIfHavePoster:!0},inDelay:500,duration:500}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","media-wrapper svelte-1f7m1lj")},m(s,r){Y(s,t,r),ge(e,t,null),i=!0},p(s,r){const o={};r&8&&(o.unfolded=s[3]),r&2&&(o.mediaData=s[1]),r&1&&(o.tag=s[0]),e.$set(o)},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e)}}}function W9(n){let t,e,i=n[0].state&&e0(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[0].state?i?(i.p(s,r),r&1&&N(i,1)):(i=e0(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function U9(n,t,e){let i,s,r,o,{tag:a}=t;return n.$$set=l=>{"tag"in l&&e(0,a=l.tag)},n.$$.update=()=>{var l,c,h;n.$$.dirty&1&&e(3,i=a.state?a.state.unfolded:!1),n.$$.dirty&1&&e(4,s=(c=(l=a.data.title)!=null?l:a.data.text)!=null?c:""),n.$$.dirty&16&&e(2,r=((h=s.length)!=null?h:0)>7?s.substring(0,6)+"...":s),n.$$.dirty&1&&e(1,o=a.data.mediaData)},[a,o,r,i,s]}class Q9 extends Me{constructor(t){super(),Ie(this,t,U9,W9,Pe,{tag:0},H9)}}function X9(n){De(n,"svelte-1707m54",'@charset "UTF-8";.svelte-1707m54.svelte-1707m54{box-sizing:border-box}.marketing.svelte-1707m54.svelte-1707m54{transform:translateY(-100%)}.marketing.svelte-1707m54 .line.svelte-1707m54{position:absolute;height:1.875rem;width:0.0625rem;left:50%;transform:translateX(-50%);background-color:white;bottom:0;transform-origin:bottom;transition:all 500ms}.marketing.svelte-1707m54 .content.svelte-1707m54{position:relative;min-width:7.5rem;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;border-radius:0.25rem;top:-1.875rem;left:-1rem;padding:0.5rem 0rem 0.5625rem;transition-property:opacity, transform;transition-duration:500ms}.marketing.svelte-1707m54 .content .headerImage.svelte-1707m54{position:absolute;width:100%;top:0.25rem;transform:translateY(-100%);border-top-left-radius:0.25rem;border-top-right-radius:0.25rem}.title-wrapper.svelte-1707m54.svelte-1707m54{position:relative;width:100%;height:1.125rem}.title-wrapper.svelte-1707m54 .title.svelte-1707m54{border-radius:0.25rem;width:100%;padding-left:0.625rem;padding-right:0.625rem}.title-wrapper.svelte-1707m54 .title .text.svelte-1707m54{display:block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.75rem;font-weight:bold;line-height:1.125rem}.footer.svelte-1707m54.svelte-1707m54{box-sizing:border-box;width:100%;padding:0.5rem 0.625rem 0;display:flex;justify-content:space-between;align-items:center}.footer.svelte-1707m54 .price-section.svelte-1707m54{flex-shrink:0;max-width:calc(100% - 1.875rem);overflow:hidden;white-space:nowrap}.footer.svelte-1707m54 .price-section .value.svelte-1707m54{font-size:0.875rem;line-height:1rem;font-weight:normal;font-family:TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif;letter-spacing:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.footer.svelte-1707m54 .price-section .unit.svelte-1707m54{font-size:0.625rem;margin-left:0.125rem}.footer.svelte-1707m54 .action-section.svelte-1707m54{display:flex;align-items:center;height:0.875rem}.footer.svelte-1707m54 .action-section .highlight-text.svelte-1707m54{font-size:0.625rem;line-height:0.875rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:8.75rem}.footer.svelte-1707m54 .action-section .arrow.svelte-1707m54{display:flex;align-items:center;margin-left:0.25rem;flex-shrink:0;width:0.625rem}.footer.svelte-1707m54 .action-section .arrow svg.svelte-1707m54{width:0.375rem;height:0.625rem}.tags-wrapper.svelte-1707m54.svelte-1707m54{position:relative;overflow:hidden;height:1rem;margin-top:0.25rem}.tags-wrapper.svelte-1707m54 .tags.svelte-1707m54{position:relative;display:inline-flex;max-width:100%;flex-wrap:wrap;padding-left:0.625rem;padding-right:0.375rem}.tags-wrapper.svelte-1707m54 .tags .tag.svelte-1707m54{display:block;text-align:center;flex-shrink:0;flex-grow:0;font-size:0.625rem;height:1rem;line-height:1rem;margin-right:0.25rem;margin-bottom:0.25rem;padding:0 0.25rem;border-radius:0.125rem;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;box-sizing:border-box}.marketing.light.svelte-1707m54 .content.svelte-1707m54{background-color:white}.marketing.light.svelte-1707m54 .content .title-wrapper .title .text.svelte-1707m54{color:rgba(0, 0, 0, 0.8)}.marketing.light.svelte-1707m54 .content .tags-wrapper .tags .primary-tag.svelte-1707m54{background:rgba(234, 208, 154, 0.5);color:#946700}.marketing.light.svelte-1707m54 .content .tags-wrapper .tags .secondary-tag.svelte-1707m54{background:rgba(0, 0, 0, 0.06);color:rgba(0, 0, 0, 0.5)}.marketing.light.svelte-1707m54 .content .footer.svelte-1707m54{color:#946700;fill:#946700}.marketing.dark.svelte-1707m54 .content.svelte-1707m54{background-color:rgba(0, 0, 0, 0.5)}.marketing.dark.svelte-1707m54 .content .title-wrapper .title .text.svelte-1707m54{color:white}.marketing.dark.svelte-1707m54 .content .tags-wrapper .tags .primary-tag.svelte-1707m54{background:rgba(234, 208, 154, 0.5);color:white}.marketing.dark.svelte-1707m54 .content .tags-wrapper .tags .secondary-tag.svelte-1707m54{background:rgba(255, 255, 255, 0.15);color:rgba(255, 255, 255, 0.85)}.marketing.dark.svelte-1707m54 .content .footer.svelte-1707m54{color:#ead09a;fill:#ead09a}.marketing.unfolded.svelte-1707m54 .line.svelte-1707m54{transform:translateX(-50%) scale(1, 1);transition-timing-function:ease-out}.marketing.folded.svelte-1707m54 .line.svelte-1707m54{transform:translateX(-50%) scale(1, 0);transition-timing-function:ease-in}.marketing.unfolded.svelte-1707m54 .content.svelte-1707m54{opacity:1;transform:translateY(0);transition-timing-function:ease-out}.marketing.folded.svelte-1707m54 .content.svelte-1707m54{opacity:0;transform:translateY(0.425rem);transition-timing-function:ease-in}.tag.svelte-1707m54.svelte-1707m54,.text.svelte-1707m54.svelte-1707m54{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}')}function n0(n,t,e){const i=n.slice();return i[0]=t[e],i}function s0(n,t,e){const i=n.slice();return i[0]=t[e],i}function r0(n){let t,e;return{c(){t=U("img"),y(t,"class","headerImage svelte-1707m54"),ft(t.src,e=n[1].headerPictureUrl)||y(t,"src",e),y(t,"alt","")},m(i,s){Y(i,t,s)},p(i,s){s&2&&!ft(t.src,e=i[1].headerPictureUrl)&&y(t,"src",e)},d(i){i&&X(t)}}}function o0(n){let t,e,i,s,r,o=n[4]||[],a=[];for(let h=0;h<o.length;h+=1)a[h]=a0(s0(n,o,h));let l=n[3]||[],c=[];for(let h=0;h<l.length;h+=1)c[h]=l0(n0(n,l,h));return{c(){t=U("div"),e=U("div");for(let h=0;h<a.length;h+=1)a[h].c();i=ae();for(let h=0;h<c.length;h+=1)c[h].c();y(e,"class","tags svelte-1707m54"),y(t,"class","tags-wrapper svelte-1707m54")},m(h,d){Y(h,t,d),V(t,e);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);V(e,i);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(e,null);s||(r=[Ai(cn.call(null,e)),je(e,"clientHeight",n[18])],s=!0)},p(h,d){if(d&16){o=h[4]||[];let f;for(f=0;f<o.length;f+=1){const g=s0(h,o,f);a[f]?a[f].p(g,d):(a[f]=a0(g),a[f].c(),a[f].m(e,i))}for(;f<a.length;f+=1)a[f].d(1);a.length=o.length}if(d&8){l=h[3]||[];let f;for(f=0;f<l.length;f+=1){const g=n0(h,l,f);c[f]?c[f].p(g,d):(c[f]=l0(g),c[f].c(),c[f].m(e,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=l.length}},d(h){h&&X(t),ci(a,h),ci(c,h),s=!1,ut(r)}}}function a0(n){let t,e=n[0]+"",i;return{c(){t=U("div"),i=Ve(e),y(t,"class","tag primary-tag svelte-1707m54"),Q(t,"min-width",Dh)},m(s,r){Y(s,t,r),V(t,i)},p(s,r){r&16&&e!==(e=s[0]+"")&&Ge(i,e)},d(s){s&&X(t)}}}function l0(n){let t,e=n[0]+"",i;return{c(){t=U("div"),i=Ve(e),y(t,"class","tag secondary-tag svelte-1707m54"),Q(t,"min-width",Dh)},m(s,r){Y(s,t,r),V(t,i)},p(s,r){r&8&&e!==(e=s[0]+"")&&Ge(i,e)},d(s){s&&X(t)}}}function c0(n){let t,e,i,s,r,o=n[2]&&h0(n),a=!n[2]&&n[1].highlightText&&u0(n);return{c(){t=U("div"),o&&o.c(),e=ae(),i=U("div"),a&&a.c(),s=ae(),r=U("span"),r.innerHTML='<svg viewBox="0 0 6 9" class="svelte-1707m54"><g transform="translate(-3, -2)" fill-rule="nonzero" class="svelte-1707m54"><path d="M4.43868724,2.12056563 C4.28121824,1.95989074 4.02582143,1.95979988 3.86824251,2.1203627 C3.72498894,2.26632889 3.71189225,2.49481723 3.82900374,2.65587166 L6.57092402,5.92894326 C6.72651763,6.11470411 6.72651763,6.38529589 6.57092402,6.57105674 L3.86804348,9.79798499 C3.72488984,9.94405307 3.71194952,10.1725507 3.8291712,10.3335217 L3.86824251,10.3796373 C4.01149607,10.5256035 4.23559087,10.5387981 4.39346025,10.4192733 L4.43868724,10.3794344 L8.1144599,6.5985342 C8.30312347,6.40447482 8.30312347,6.09552518 8.1144599,5.9014658 L4.43868724,2.12056563 Z" class="svelte-1707m54"></path></g></svg>',y(r,"class","arrow svelte-1707m54"),y(i,"class","action-section svelte-1707m54"),y(t,"class","footer svelte-1707m54")},m(l,c){Y(l,t,c),o&&o.m(t,null),V(t,e),V(t,i),a&&a.m(i,null),V(i,s),V(i,r)},p(l,c){l[2]?o?o.p(l,c):(o=h0(l),o.c(),o.m(t,e)):o&&(o.d(1),o=null),!l[2]&&l[1].highlightText?a?a.p(l,c):(a=u0(l),a.c(),a.m(i,s)):a&&(a.d(1),a=null)},d(l){l&&X(t),o&&o.d(),a&&a.d()}}}function h0(n){let t,e,i=n[1].price.value+"",s,r,o=n[1].price.unit&&d0(n);return{c(){t=U("div"),e=U("span"),s=Ve(i),r=ae(),o&&o.c(),y(e,"class","value svelte-1707m54"),y(t,"class","price-section svelte-1707m54")},m(a,l){Y(a,t,l),V(t,e),V(e,s),V(t,r),o&&o.m(t,null)},p(a,l){l&2&&i!==(i=a[1].price.value+"")&&Ge(s,i),a[1].price.unit?o?o.p(a,l):(o=d0(a),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(a){a&&X(t),o&&o.d()}}}function d0(n){let t,e=n[1].price.unit+"",i;return{c(){t=U("span"),i=Ve(e),y(t,"class","unit svelte-1707m54")},m(s,r){Y(s,t,r),V(t,i)},p(s,r){r&2&&e!==(e=s[1].price.unit+"")&&Ge(i,e)},d(s){s&&X(t)}}}function u0(n){let t,e=n[1].highlightText+"",i;return{c(){t=U("span"),i=Ve(e),y(t,"class","highlight-text svelte-1707m54")},m(s,r){Y(s,t,r),V(t,i)},p(s,r){r&2&&e!==(e=s[1].highlightText+"")&&Ge(i,e)},d(s){s&&X(t)}}}function Y9(n){let t,e,i,s,r,o,a,l,c,h,d=n[1].title+"",f,g,p,m,v;e=new Si({props:{visible:n[5],outDelay:500,left:61,bottom:87,blurRadius:150,spreadRadius:75}});let b=n[1].headerPictureUrl&&r0(n),w=n[6]&&o0(n),x=(n[2]||n[1].highlightText)&&c0(n);return{c(){t=U("div"),Ae(e.$$.fragment),i=ae(),s=U("div"),r=ae(),o=U("div"),b&&b.c(),a=ae(),l=U("div"),c=U("div"),h=U("div"),f=Ve(d),g=ae(),w&&w.c(),p=ae(),x&&x.c(),y(s,"class","line svelte-1707m54"),Q(s,"transition-delay",n[5]?n[9]+"ms":n[8]+"ms"),y(h,"class","text svelte-1707m54"),y(c,"class","title svelte-1707m54"),y(l,"class","title-wrapper svelte-1707m54"),y(o,"class","content svelte-1707m54"),Q(o,"max-width",Li(n[12])),Q(o,"transition-delay",n[5]?n[7]+"ms":"0ms"),y(t,"class",m=yt(`marketing ${n[10]}`)+" svelte-1707m54"),we(t,"unfolded",n[5]),we(t,"folded",n[11])},m(E,L){Y(E,t,L),ge(e,t,null),V(t,i),V(t,s),V(t,r),V(t,o),b&&b.m(o,null),V(o,a),V(o,l),V(l,c),V(c,h),V(h,f),V(o,g),w&&w.m(o,null),V(o,p),x&&x.m(o,null),v=!0},p(E,[L]){const S={};L&32&&(S.visible=E[5]),e.$set(S),L&800&&Q(s,"transition-delay",E[5]?E[9]+"ms":E[8]+"ms"),E[1].headerPictureUrl?b?b.p(E,L):(b=r0(E),b.c(),b.m(o,a)):b&&(b.d(1),b=null),(!v||L&2)&&d!==(d=E[1].title+"")&&Ge(f,d),E[6]?w?w.p(E,L):(w=o0(E),w.c(),w.m(o,p)):w&&(w.d(1),w=null),E[2]||E[1].highlightText?x?x.p(E,L):(x=c0(E),x.c(),x.m(o,null)):x&&(x.d(1),x=null),L&160&&Q(o,"transition-delay",E[5]?E[7]+"ms":"0ms"),(!v||L&1024&&m!==(m=yt(`marketing ${E[10]}`)+" svelte-1707m54"))&&y(t,"class",m),(!v||L&1056)&&we(t,"unfolded",E[5]),(!v||L&3072)&&we(t,"folded",E[11])},i(E){v||(N(e.$$.fragment,E),v=!0)},o(E){Z(e.$$.fragment,E),v=!1},d(E){E&&X(t),ve(e),b&&b.d(),w&&w.d(),x&&x.d()}}}const Dh=40;function Z9(n,t,e){let i,s,r,o,a,l,c,h,d,f,g,p,{tag:m}=t,v,b=(()=>{var R;const S=(R=m.data.limitWidth)!=null?R:!0;if(typeof S=="number")return S;if(S===!0)return 172})(),w=0,x=!1;function E(S){Math.abs(v-S)>5&&(e(14,v=S),setTimeout(()=>{e(16,x=!1)},100))}const L=S=>E(S.detail);return n.$$set=S=>{"tag"in S&&e(0,m=S.tag)},n.$$.update=()=>{var S,R,z,O;n.$$.dirty&1&&e(5,i=(R=(S=m.state)==null?void 0:S.unfolded)!=null?R:!1),n.$$.dirty&32&&e(11,s=!i),n.$$.dirty&1&&e(1,r=m.data),n.$$.dirty&2&&e(2,o=Fe((z=r.price)==null?void 0:z.value)&&((O=r.price)==null?void 0:O.value)!==""),n.$$.dirty&1&&e(10,a=m.data.theme||"light"),n.$$.dirty&114688&&(!x||b&&b>0)&&(e(15,w=Math.max(1,Math.floor(((b||172)-20)/Dh))),v!==void 0&&v>40&&e(15,w=Math.max(1,w-1)),e(16,x=!0)),n.$$.dirty&32770&&e(4,l=(r.brandTags||[]).filter(Boolean).slice(0,w)),n.$$.dirty&32784&&e(17,c=Math.max(0,w-l.length)),n.$$.dirty&131074&&e(3,h=(r.tags||[]).filter(Boolean).slice(0,c)),n.$$.dirty&24&&e(6,p=l.length>0||h.length>0),n.$$.dirty&6&&(o||r.highlightText)},e(9,d=400),e(8,f=180+500-500-40),e(7,g=400+180),[m,r,o,h,l,i,p,g,f,d,a,s,b,E,v,w,x,c,L]}class J9 extends Me{constructor(t){super(),Ie(this,t,Z9,Y9,Pe,{tag:0},X9)}}class q9 extends Audio{constructor(e){super();u(this,"sharedAudioSrc");u(this,"sharedAudioPaused",!0);u(this,"sharedAudioCurrentTime",0);u(this,"tryplaying",!1);u(this,"audioInstance");u(this,"eventListenerDisposer");this.sharedAudioSrc=e}get paused(){var e;return(e=this.sharedAudioPaused)!=null?e:!0}get currentTime(){return this.sharedAudioCurrentTime}play(){return ee(this,null,function*(){var i,s,r;if(this.tryplaying)return;this.tryplaying=!0,(!this.audioInstance||((i=this.audioInstance)==null?void 0:i.realSrc)!==this.sharedAudioSrc)&&(this.audioInstance=a4(this.sharedAudioSrc,{namespace:uh.PlayAudio})),(s=this.eventListenerDisposer)==null||s.call(this),this.eventListenerDisposer=this.addEventListeners(),this.audioInstance.currentTime=(r=this.currentTime)!=null?r:0;const e=this.audioInstance.currentTime!==this.currentTime;this.audioInstance.play().then(()=>{var o;this.audioInstance.muted=!1,e&&(this.audioInstance.currentTime=(o=this.currentTime)!=null?o:0),this.sharedAudioPaused=!1}).catch(o=>{var a;o.message==="The operation is not supported."?console.error("Error: 音频文件可能损坏或修改过文件后缀",o):console.error("Error: error playing media in Safari",o),this.endedHandler(),(a=this.onerror)==null||a.call(this,o)}).finally(()=>{this.tryplaying=!1})})}pause(e){var i;if(this.audioInstance&&!this.paused){if(this.sharedAudioPaused=!0,(i=this.eventListenerDisposer)==null||i.call(this),this.audioInstance.ended){this.endedHandler();return}this.audioInstance.paused||this.audioInstance.pause(),this.onpause(e!=null?e:new Event("pause")),this.clear()}}dispose(){var e;(e=this.eventListenerDisposer)==null||e.call(this),this.clear(),this.audioInstance=void 0}clear(){var e;(e=this.audioInstance)==null||e.clear()}endedHandler(e){var i,s;(i=this.onended)==null||i.call(this,e!=null?e:new Event("ended")),(s=this.eventListenerDisposer)==null||s.call(this),this.sharedAudioPaused=!0,this.sharedAudioCurrentTime=0,this.clear()}addEventListeners(){const e=this.audioInstance;if(!e)return;const i=f=>{var g;this.sharedAudioCurrentTime=e.currentTime,(g=this.ontimeupdate)==null||g.call(this,f)},s=f=>{var g;e.isBlankAudio||(this.sharedAudioPaused=!1,(g=this.onplay)==null||g.call(this,f))},r=f=>{this.pause(f)},o=f=>{this.endedHandler(f)},a=f=>{var g;this.sharedAudioPaused=!0,(g=this.onerror)==null||g.call(this,f)},l=f=>{var g;return(g=this.oncanplay)==null?void 0:g.call(this,f)},c=f=>{var g;return(g=this.oncanplaythrough)==null?void 0:g.call(this,f)},h=f=>{var g;return(g=this.onloadeddata)==null?void 0:g.call(this,f)},d=f=>{var g;return(g=this.onloadedmetadata)==null?void 0:g.call(this,f)};return e.addEventListener("timeupdate",i),e.addEventListener("play",s),e.addEventListener("pause",r),e.addEventListener("ended",o),e.addEventListener("error",a),e.addEventListener("canplay",l),e.addEventListener("canplaythrough",c),e.addEventListener("loadeddata",h),e.addEventListener("loadedmetadata",d),()=>{e.removeEventListener("timeupdate",i),e.removeEventListener("play",s),e.removeEventListener("pause",r),e.removeEventListener("ended",o),e.removeEventListener("error",a),e.removeEventListener("canplay",l),e.removeEventListener("canplaythrough",c),e.removeEventListener("loadeddata",h),e.removeEventListener("loadedmetadata",d)}}}function K9(n){De(n,"svelte-13e7hxv",".audio.svelte-13e7hxv{pointer-events:auto;cursor:pointer;width:100%;height:100%}")}function $9(n){let t,e,i,s;const r=n[8].default,o=En(r,n,n[7],null);return{c(){t=U("div"),o&&o.c(),y(t,"class","audio svelte-13e7hxv"),y(t,"style",n[0])},m(a,l){Y(a,t,l),o&&o.m(t,null),e=!0,i||(s=je(t,"click",gb(n[1])),i=!0)},p(a,[l]){o&&o.p&&(!e||l&128)&&Dn(o,r,a,a[7],e?xn(r,a[7],l,null):Sn(a[7]),null),(!e||l&1)&&y(t,"style",a[0])},i(a){e||(N(o,a),e=!0)},o(a){Z(o,a),e=!1},d(a){a&&X(t),o&&o.d(a),i=!1,s()}}}function eM(n,t,e){let{$$slots:i={},$$scope:s}=t,{url:r}=t,{enable:o=!0}=t,{style:a=""}=t,{hooksInfo:l}=t;const c=qs(),h=Ni("hooks"),d=Ni("mediaStore");let f,g=!0;function p(){e(5,f.onplay=v=>{h.emit("playStateChange",F({event:v,state:"playing",mediaInstance:f},l)),c("play"),e(6,g=!1)},f),e(5,f.onpause=v=>{h.emit("playStateChange",F({event:v,state:"paused",mediaInstance:f},l)),c("pause"),e(6,g=!0)},f),e(5,f.onended=v=>{h.emit("playStateChange",F({event:v,state:"paused",mediaInstance:f},l)),c("pause"),e(6,g=!0)},f),e(5,f.onloadedmetadata=v=>{typeof f.duration=="number"&&!Number.isNaN(f.duration)&&c("duration",f.duration)},f),e(5,f.onerror=v=>{c("pause"),e(6,g=!0)},f),e(5,f.ontimeupdate=v=>{c("timeupdate",f.currentTime)},f)}d.subscribe(({currentMediaElement:v})=>{v!==f&&(g||f==null||f.pause())});function m(v){f&&(h.emit("click",F({event:v,target:"AudioTagPlayIcon",audioInstance:f},l)),d.set({currentMediaElement:f}),h.emit("playStateChange",F({event:v,state:f.paused?"playing":"paused",mediaInstance:f},l)),f.paused?f.play():f.pause())}return n.$$set=v=>{"url"in v&&e(2,r=v.url),"enable"in v&&e(3,o=v.enable),"style"in v&&e(0,a=v.style),"hooksInfo"in v&&e(4,l=v.hooksInfo),"$$scope"in v&&e(7,s=v.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&(r||c("duration",0)),n.$$.dirty&36&&(f==null||f.dispose(),e(5,f=new q9(r)),c("audioRef",f),setTimeout(()=>c("audioRef",f),200),p()),n.$$.dirty&40&&(o||f==null||f.pause()),n.$$.dirty&72&&c(o&&!g?"play":"pause")},[a,m,r,o,l,f,g,s,i]}let f0=class extends Me{constructor(t){super(),Ie(this,t,eM,$9,Pe,{url:2,enable:3,style:0,hooksInfo:4},K9)}};function tM(n){De(n,"svelte-6pnkgc",".audio-icon__wrapper.svelte-6pnkgc.svelte-6pnkgc{display:inline-block}.audio-icon.svelte-6pnkgc.svelte-6pnkgc{display:flex;justify-content:center;align-items:center;position:relative;width:100%;height:100%;border-radius:50%}.audio-icon.svelte-6pnkgc .sound-wave__container.svelte-6pnkgc{position:absolute;pointer-events:none;top:0;left:0;width:100%;height:100%}@keyframes svelte-6pnkgc-sound_wave_1_animation{0%,10%{opacity:0}25%,100%{opacity:1}}@keyframes svelte-6pnkgc-sound_wave_2_animation{0%,35%{opacity:0}50%,100%{opacity:1}}@keyframes svelte-6pnkgc-sound_wave_3_animation{0%,60%{opacity:0}75%,100%{opacity:1}}")}function p0(n){let t,e;return t=new Si({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function iM(n){let t,e,i,s,r,o,a,l,c,h,d,f,g,p,m=n[0]&&p0();return{c(){t=U("div"),m&&m.c(),e=ae(),i=U("div"),s=U("div"),r=ye("svg"),o=ye("defs"),a=ye("linearGradient"),l=ye("stop"),c=ye("stop"),h=ye("linearGradient"),d=ye("stop"),f=ye("stop"),g=ye("path"),y(l,"stop-color","rgba(255, 255, 255, 1)"),y(l,"stop-opacity",".5"),y(l,"offset","0%"),y(c,"stop-color","rgba(255, 255, 255, 1)"),y(c,"offset","100%"),y(a,"x1","8.653%"),y(a,"y1","15.676%"),y(a,"x2","85.159%"),y(a,"y2","79.274%"),y(a,"id","dnalogel-audio-icon-linear-gradient-1"),y(d,"stop-color","rgba(255, 255, 255, 1)"),y(d,"offset","0%"),y(f,"stop-color","rgba(255, 255, 255, 1)"),y(f,"stop-opacity","0"),y(f,"offset","100%"),y(h,"x1","0%"),y(h,"y1","0%"),y(h,"x2","64.422%"),y(h,"y2","62.326%"),y(h,"id","dnalogel-audio-icon-linear-gradient-2"),y(g,"d",n[3]),y(g,"fill","url(#dnalogel-audio-icon-linear-gradient-1)"),y(g,"fill-rule","nonzero"),y(g,"stroke","url(#dnalogel-audio-icon-linear-gradient-2)"),y(g,"stroke-width",".5"),y(r,"viewBox","0 0 24 24"),y(r,"version","1.1"),y(r,"aria-label","audio-icon"),y(s,"class","sound-wave__container svelte-6pnkgc"),y(i,"class","audio-icon svelte-6pnkgc"),y(t,"class","audio-icon__wrapper svelte-6pnkgc"),y(t,"style",n[1]),Q(t,"width",n[4]),Q(t,"height",n[4])},m(v,b){Y(v,t,b),m&&m.m(t,null),V(t,e),V(t,i),V(i,s),V(s,r),V(r,o),V(o,a),V(a,l),V(a,c),V(o,h),V(h,d),V(h,f),V(r,g),n[10](s),p=!0},p(v,[b]){v[0]?m?b&1&&N(m,1):(m=p0(),m.c(),N(m,1),m.m(t,e)):m&&(Ee(),Z(m,1,1,()=>{m=null}),xe()),(!p||b&8)&&y(g,"d",v[3]),(!p||b&2)&&y(t,"style",v[1]);const w=b&2;(w||b&18)&&Q(t,"width",v[4]),(w||b&18)&&Q(t,"height",v[4])},i(v){p||(N(m),p=!0)},o(v){Z(m),p=!1},d(v){v&&X(t),m&&m.d(),n[10](null)}}}function nM(n,t,e){let i,s,{playing:r}=t,{shadow:o=!1}=t,{style:a=null}=t,{width:l="100%"}=t,{animated:c=!0}=t,h,d=0,f=null;const g=["M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm1.534 3.282-1.29 1.289.186.183a5.86 5.86 0 0 1 1.663 4.095c0 1.555-.605 2.965-1.786 4.236l1.118 1.12.2-.19a7.46 7.46 0 0 0 2.225-5.322 7.46 7.46 0 0 0-2.316-5.411Zm-2.046 2.047-1.245 1.243.14.133a3.04 3.04 0 0 1 .882 2.144c0 .795-.308 1.516-.955 2.24l1.23 1.231.168-.168a4.793 4.793 0 0 0 1.314-3.303c0-1.39-.59-2.643-1.534-3.52Zm-1.752 1.78-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z","M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm-2.264 7.109-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z","M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm-.512 5.329-1.245 1.243.14.133a3.04 3.04 0 0 1 .882 2.144c0 .795-.308 1.516-.955 2.24l1.23 1.231.168-.168a4.793 4.793 0 0 0 1.314-3.303c0-1.39-.59-2.643-1.534-3.52Zm-1.752 1.78-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z"];ti(()=>{f&&(clearInterval(f),e(9,f=null))});function p(m){Je[m?"unshift":"push"](()=>{h=m,e(2,h)})}return n.$$set=m=>{"playing"in m&&e(5,r=m.playing),"shadow"in m&&e(0,o=m.shadow),"style"in m&&e(1,a=m.style),"width"in m&&e(6,l=m.width),"animated"in m&&e(7,c=m.animated)},n.$$.update=()=>{var m;n.$$.dirty&64&&e(4,i=typeof l=="number"?Li(l):l),n.$$.dirty&800&&(r?f||e(9,f=setInterval(()=>{e(8,d=(d+1)%g.length)},500)):(f&&(clearInterval(f),e(9,f=null)),e(8,d=0))),n.$$.dirty&384&&e(3,s=(m=g[c?d:0])!=null?m:g[0])},[o,a,h,s,i,r,l,c,d,f,p]}class m0 extends Me{constructor(t){super(),Ie(this,t,nM,iM,Pe,{playing:5,shadow:0,style:1,width:6,animated:7},tM)}}function sM(n){De(n,"svelte-1s6gk4a",".audio-tag.svelte-1s6gk4a{position:absolute;left:0;top:0;width:0;height:0;overflow:visible}.audio-icon__wrapper.svelte-1s6gk4a{position:relative;vertical-align:top;width:100%;height:100%}.content.svelte-1s6gk4a{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0.125rem;overflow:hidden;box-sizing:border-box;font-size:0;white-space:nowrap;font-weight:600}.wrapper.svelte-1s6gk4a{position:relative;width:100%;height:100%}.audio-icon.svelte-1s6gk4a{pointer-events:none;vertical-align:top;display:inline-block;width:1rem;height:1rem;margin-right:0.25rem;margin-top:0.0625rem}.audio.svelte-1s6gk4a{position:relative;width:100%;height:100%}")}function g0(n){var v,b;let t,e,i,s,r,o,a,l,c,h,d,f,g,p;e=new Si({props:{visible:n[6],left:n[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}});let m=n[6]&&v0(n);return c=new hg({props:{visible:n[6],textUnfolded:n[1],content:n[5]}}),d=new Ah({props:{unfolded:n[6],length:n[3],outDelay:n[4]+20*Math.min((b=(v=n[5])==null?void 0:v.length)!=null?b:10,15),useLinearColor:!0}}),{c(){t=U("div"),Ae(e.$$.fragment),i=ae(),s=U("div"),r=U("div"),o=U("div"),m&&m.c(),a=ae(),l=U("div"),Ae(c.$$.fragment),h=ae(),Ae(d.$$.fragment),y(o,"class","audio-icon svelte-1s6gk4a"),Q(l,"display","inline-block"),y(r,"class","wrapper svelte-1s6gk4a"),y(s,"class","content svelte-1s6gk4a"),y(t,"class","audio-tag svelte-1s6gk4a"),we(t,"unfolded",n[6])},m(w,x){Y(w,t,x),ge(e,t,null),V(t,i),V(t,s),V(s,r),V(r,o),m&&m.m(o,null),V(r,a),V(r,l),ge(c,l,null),V(t,h),ge(d,t,null),f=!0,g||(p=[je(l,"click",n[7]),Ai(cn.call(null,l)),je(l,"clientWidth",n[12])],g=!0)},p(w,x){var R,z;const E={};x&64&&(E.visible=w[6]),x&8&&(E.left=w[3]/2+"px"),e.$set(E),w[6]?m?(m.p(w,x),x&64&&N(m,1)):(m=v0(w),m.c(),N(m,1),m.m(o,null)):m&&(Ee(),Z(m,1,1,()=>{m=null}),xe());const L={};x&64&&(L.visible=w[6]),x&2&&(L.textUnfolded=w[1]),x&32&&(L.content=w[5]),c.$set(L);const S={};x&64&&(S.unfolded=w[6]),x&8&&(S.length=w[3]),x&48&&(S.outDelay=w[4]+20*Math.min((z=(R=w[5])==null?void 0:R.length)!=null?z:10,15)),d.$set(S),(!f||x&64)&&we(t,"unfolded",w[6])},i(w){f||(N(e.$$.fragment,w),N(m),N(c.$$.fragment,w),N(d.$$.fragment,w),f=!0)},o(w){Z(e.$$.fragment,w),Z(m),Z(c.$$.fragment,w),Z(d.$$.fragment,w),f=!1},d(w){w&&X(t),ve(e),m&&m.d(),ve(c),ve(d),g=!1,ut(p)}}}function v0(n){let t,e,i,s,r,o,a;return e=new Si({props:{center:!0,blurRadius:15,spreadRadius:6}}),s=new f0({props:{enable:n[6],url:n[0].data.audioUrl,hooksInfo:{tag:n[0]},$$slots:{default:[rM]},$$scope:{ctx:n}}}),s.$on("play",n[8]),s.$on("pause",n[9]),s.$on("error",n[10]),s.$on("audioRef",n[11]),{c(){t=U("div"),Ae(e.$$.fragment),i=ae(),Ae(s.$$.fragment),y(t,"class","audio svelte-1s6gk4a")},m(l,c){Y(l,t,c),ge(e,t,null),V(t,i),ge(s,t,null),a=!0},p(l,c){n=l;const h={};c&64&&(h.enable=n[6]),c&1&&(h.url=n[0].data.audioUrl),c&1&&(h.hooksInfo={tag:n[0]}),c&8196&&(h.$$scope={dirty:c,ctx:n}),s.$set(h)},i(l){a||(N(e.$$.fragment,l),N(s.$$.fragment,l),l&&pt(()=>{a&&(o&&o.end(1),r=Tn(t,jt,{duration:1e3,delay:0,easing:nr}),r.start())}),a=!0)},o(l){var c,h;Z(e.$$.fragment,l),Z(s.$$.fragment,l),r&&r.invalidate(),l&&(o=tr(t,jt,{duration:1e3,delay:20*Math.min((h=(c=n[5])==null?void 0:c.length)!=null?h:10,15),easing:nr})),a=!1},d(l){l&&X(t),ve(e),ve(s),l&&o&&o.end()}}}function rM(n){let t,e,i;return e=new m0({props:{playing:n[2]}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","audio-icon__wrapper svelte-1s6gk4a")},m(s,r){Y(s,t,r),ge(e,t,null),i=!0},p(s,r){const o={};r&4&&(o.playing=s[2]),e.$set(o)},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e)}}}function oM(n){let t,e,i=n[0].state&&g0(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[0].state?i?(i.p(s,r),r&1&&N(i,1)):(i=g0(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function aM(n,t,e){let i,s,r,{tag:o}=t,a=!1,l=!1,c;function h(){e(1,a=!a)}const d=()=>{e(2,l=!0)},f=()=>{e(2,l=!1)},g=()=>{e(2,l=!1)};function p(v){an.call(this,n,v)}const m=v=>{e(3,c=v.detail)};return n.$$set=v=>{"tag"in v&&e(0,o=v.tag)},n.$$.update=()=>{var v,b,w;n.$$.dirty&1&&e(6,i=!!((v=o.state)!=null&&v.unfolded)),n.$$.dirty&1&&e(5,s=(w=(b=o.data.title)!=null?b:o.data.text)!=null?w:""),n.$$.dirty&2&&e(4,r=a?450:0)},[o,a,l,c,r,s,i,h,d,f,g,p,m]}class lM extends Me{constructor(t){super(),Ie(this,t,aM,oM,Pe,{tag:0},sM)}}function cM(n){De(n,"svelte-nclraj",".audio-tag__wrapper.svelte-nclraj{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.audio-tag.svelte-nclraj{position:relative;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;padding:0.25rem;padding-right:0.625rem;border-radius:624999.9375rem;border:0.0625rem solid rgba(255, 255, 255, 0.6);background:linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));box-shadow:inset 0 0 0.25rem 0 rgba(255, 255, 255, 0.3)}.audio__inner.svelte-nclraj{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.text.svelte-nclraj{font-weight:bold;font-size:0.75rem;margin-left:0.25rem}.audio-icon__wrapper.svelte-nclraj{position:relative;vertical-align:top;pointer-events:none;width:1.5rem;height:1.5rem}")}function A0(n){let t,e,i,s;return i=new f0({props:{style:"width: max-content; height: max-content;",enable:n[0].state.visible,url:n[0].data.audioUrl,hooksInfo:{tag:n[0]},$$slots:{default:[dM]},$$scope:{ctx:n}}}),i.$on("play",n[5]),i.$on("pause",n[6]),i.$on("error",n[7]),i.$on("timeupdate",n[8]),i.$on("duration",n[9]),i.$on("audioRef",n[10]),{c(){t=U("div"),e=U("div"),Ae(i.$$.fragment),y(e,"class","audio-tag svelte-nclraj"),y(t,"class","audio-tag__wrapper svelte-nclraj")},m(r,o){Y(r,t,o),V(t,e),ge(i,e,null),s=!0},p(r,o){const a={};o&1&&(a.enable=r[0].state.visible),o&1&&(a.url=r[0].data.audioUrl),o&1&&(a.hooksInfo={tag:r[0]}),o&2072&&(a.$$scope={dirty:o,ctx:r}),i.$set(a)},i(r){s||(N(i.$$.fragment,r),s=!0)},o(r){Z(i.$$.fragment,r),s=!1},d(r){r&&X(t),ve(i)}}}function hM(n){let t;return{c(){t=Ve(n[4])},m(e,i){Y(e,t,i)},p(e,i){i&16&&Ge(t,e[4])},d(e){e&&X(t)}}}function dM(n){let t,e,i,s,r,o,a;return i=new m0({props:{playing:n[3]}}),o=new bh({props:{maxWidth:72,maxLine:1,$$slots:{default:[hM]},$$scope:{ctx:n}}}),{c(){t=U("div"),e=U("div"),Ae(i.$$.fragment),s=ae(),r=U("div"),Ae(o.$$.fragment),y(e,"class","audio-icon__wrapper svelte-nclraj"),y(r,"class","text svelte-nclraj"),y(t,"class","audio__inner svelte-nclraj")},m(l,c){Y(l,t,c),V(t,e),ge(i,e,null),V(t,s),V(t,r),ge(o,r,null),a=!0},p(l,c){const h={};c&8&&(h.playing=l[3]),i.$set(h);const d={};c&2064&&(d.$$scope={dirty:c,ctx:l}),o.$set(d)},i(l){a||(N(i.$$.fragment,l),N(o.$$.fragment,l),a=!0)},o(l){Z(i.$$.fragment,l),Z(o.$$.fragment,l),a=!1},d(l){l&&X(t),ve(i),ve(o)}}}function uM(n){let t,e,i=n[0].state&&A0(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[0].state?i?(i.p(s,r),r&1&&N(i,1)):(i=A0(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function fM(n,t,e){let i,{tag:s}=t,r=0,o=0,a=!1;const l=()=>{e(3,a=!0)},c=()=>{e(3,a=!1)},h=()=>{e(3,a=!1)},d=p=>{e(1,r=p.detail)},f=p=>{e(2,o=p.detail)};function g(p){an.call(this,n,p)}return n.$$set=p=>{"tag"in p&&e(0,s=p.tag)},n.$$.update=()=>{var p,m;n.$$.dirty&1&&e(4,i=(m=(p=s.data.title)!=null?p:s.data.text)!=null?m:"")},[s,r,o,a,i,l,c,h,d,f,g]}class pM extends Me{constructor(t){super(),Ie(this,t,fM,uM,Pe,{tag:0},cM)}}function mM(n){let t,e;return t=new pM({props:{tag:n[0]}}),t.$on("audioRef",n[2]),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.tag=i[0]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function gM(n){let t,e;return t=new lM({props:{tag:n[0]}}),t.$on("audioRef",n[2]),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.tag=i[0]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function vM(n){let t,e,i,s;const r=[gM,mM],o=[];function a(l,c){return l[1]==="line"?0:l[1]==="plane"?1:-1}return~(t=a(n))&&(e=o[t]=r[t](n)),{c(){e&&e.c(),i=Ne()},m(l,c){~t&&o[t].m(l,c),Y(l,i,c),s=!0},p(l,[c]){let h=t;t=a(l),t===h?~t&&o[t].p(l,c):(e&&(Ee(),Z(o[h],1,1,()=>{o[h]=null}),xe()),~t?(e=o[t],e?e.p(l,c):(e=o[t]=r[t](l),e.c()),N(e,1),e.m(i.parentNode,i)):e=null)},i(l){s||(N(e),s=!0)},o(l){Z(e),s=!1},d(l){~t&&o[t].d(l),l&&X(i)}}}function AM(n,t,e){let i,{tag:s}=t,r;function o(a){r=a.detail}return s.play=()=>r.play(),s.pause=()=>r.pause(),n.$$set=a=>{"tag"in a&&e(0,s=a.tag)},n.$$.update=()=>{var a;n.$$.dirty&1&&e(1,i=(a=s.data.appearance)!=null?a:"line")},[s,i,o]}class bM extends Me{constructor(t){super(),Ie(this,t,AM,vM,Pe,{tag:0})}}function yM(n){De(n,"svelte-10cw0el",".media-wrapper.svelte-10cw0el{position:absolute;width:100%;height:100%}")}function b0(n){var s;let t,e,i;return e=new $g({props:{mediaItemConfig:{canPlay:!0,playButtonSizeIfNeed:"large",playButtonIfNeed:(s=n[4])!=null?s:"withText",disableVideoIfHavePoster:!1,objectFit:n[2]},unfolded:n[6],mediaData:n[5],enableCarousel:n[1],autoplayConfig:n[3],tag:n[0],inDelay:500,duration:500}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","media-wrapper svelte-10cw0el")},m(r,o){Y(r,t,o),ge(e,t,null),i=!0},p(r,o){var l;const a={};o&20&&(a.mediaItemConfig={canPlay:!0,playButtonSizeIfNeed:"large",playButtonIfNeed:(l=r[4])!=null?l:"withText",disableVideoIfHavePoster:!1,objectFit:r[2]}),o&64&&(a.unfolded=r[6]),o&32&&(a.mediaData=r[5]),o&2&&(a.enableCarousel=r[1]),o&8&&(a.autoplayConfig=r[3]),o&1&&(a.tag=r[0]),e.$set(a)},i(r){i||(N(e.$$.fragment,r),i=!0)},o(r){Z(e.$$.fragment,r),i=!1},d(r){r&&X(t),ve(e)}}}function wM(n){let t,e,i=n[0].state&&n[5]&&b0(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[0].state&&s[5]?i?(i.p(s,r),r&33&&N(i,1)):(i=b0(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function PM(n,t,e){let i,s,r,o,a,l,{tag:c}=t;return n.$$set=h=>{"tag"in h&&e(0,c=h.tag)},n.$$.update=()=>{var h,d;n.$$.dirty&1&&e(6,i=c.state?c.state.unfolded:!1),n.$$.dirty&1&&e(5,s=c.data.mediaData),n.$$.dirty&1&&e(1,r=c.data.enableCarousel),n.$$.dirty&1&&e(4,o=c.data.playIcon),n.$$.dirty&3&&e(3,a=(h=c.data.autoplayConfig)!=null?h:{autoplay:r!=null?r:!0,autoplayVideo:!0}),n.$$.dirty&1&&e(2,l=(d=c.data.objectFit)!=null?d:(()=>c.data.adaptationMode==="stretch"?"fill":c.data.adaptationMode==="proportional"?"contain":void 0)())},[c,r,l,a,o,s,i]}class CM extends Me{constructor(t){super(),Ie(this,t,PM,wM,Pe,{tag:0},yM)}}const Sh=new Map;function y0(n){return ee(this,null,function*(){return new Promise((t,e)=>{if(!n){e(Error("url is empty"));return}const i=new Image;i.src=n,i.onload=()=>t({width:i.width,height:i.height}),i.onerror=e})})}function IM(n){return ee(this,null,function*(){const{url:t,ratio:e=3}=n,i=(()=>{if(Sh.has(t))return Sh.get(t);const o=y0(t);return Sh.set(t,o),o})(),{width:s,height:r}=yield i;return fe(F({},n),{width:s/e,height:r/e})})}function MM(n){return ee(this,null,function*(){const{steps:t,url:e,ratio:i=3,fps:s=24}=n;if(!t)throw new Error("KeyframeIcon requires steps");const{width:r,height:o}=yield y0(e),a=r/i,l=o/i,c=a/t,h=l,d=1/s*t+"s";return fe(F({},n),{width:c,height:h,duration:d})})}function kM(n){De(n,"svelte-1j3azjf",'@keyframes svelte-1j3azjf-sprites-animation{0%{background-position:0 0}100%{background-position:100% 0}}.icon-bg.svelte-1j3azjf{position:absolute;width:141%;height:141%;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;overflow:hidden}.icon-bg-circle.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner-shadow.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center, transparent 20%, rgba(255,255,255,0.3))}.icon-bg-circle.svelte-1j3azjf::before{content:"";position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;border-radius:50%;z-index:1;border:0.0625rem solid rgba(255,255,255,0.6)}.icon-image.svelte-1j3azjf{position:relative;display:block;width:auto}.icon-keyframe.svelte-1j3azjf{background-repeat:no-repeat;background-size:auto 100%;animation-direction:normal;animation-iteration-count:infinite;animation-name:svelte-1j3azjf-sprites-animation;animation-delay:0}')}function w0(n){n[1]=n[21].width}function P0(n){n[1]=n[21].width,n[18]=n[21].height,n[19]=n[21].steps,n[20]=n[21].duration}function C0(n){let t,e,i,s=n[0]&&I0();function r(l,c){return l[8]?xM:EM}let o=r(n),a=o(n);return{c(){t=U("div"),s&&s.c(),e=ae(),a.c(),y(t,"class","icon"),Q(t,"width",n[1])},m(l,c){Y(l,t,c),s&&s.m(t,null),V(t,e),a.m(t,null),i=!0},p(l,c){l[0]?s?c&1&&N(s,1):(s=I0(),s.c(),N(s,1),s.m(t,e)):s&&(Ee(),Z(s,1,1,()=>{s=null}),xe()),o===(o=r(l))&&a?a.p(l,c):(a.d(1),a=o(l),a&&(a.c(),a.m(t,null))),c&2&&Q(t,"width",l[1])},i(l){i||(N(s),i=!0)},o(l){Z(s),i=!1},d(l){l&&X(t),s&&s.d(),a.d()}}}function I0(n){let t,e;return t=new Si({props:{center:!0,blurRadius:24,spreadRadius:16}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function EM(n){let t,e,i={ctx:n,current:null,token:null,hasCatch:!1,pending:LM,then:SM,catch:DM,value:21};return Aa(e=n[13](At({url:n[7],ratio:n[5]})),i),{c(){t=Ne(),i.block.c()},m(s,r){Y(s,t,r),i.block.m(s,i.anchor=r),i.mount=()=>t.parentNode,i.anchor=t},p(s,r){n=s,i.ctx=n,r&160&&e!==(e=n[13](At({url:n[7],ratio:n[5]})))&&Aa(e,i)||Bu(i,n,r)},d(s){s&&X(t),i.block.d(s),i.token=null,i=null}}}function xM(n){let t,e,i={ctx:n,current:null,token:null,hasCatch:!1,pending:OM,then:zM,catch:TM,value:21};return Aa(e=n[12](At({url:n[7],steps:n[2],fps:n[6],ratio:n[5]})),i),{c(){t=Ne(),i.block.c()},m(s,r){Y(s,t,r),i.block.m(s,i.anchor=r),i.mount=()=>t.parentNode,i.anchor=t},p(s,r){n=s,i.ctx=n,r&228&&e!==(e=n[12](At({url:n[7],steps:n[2],fps:n[6],ratio:n[5]})))&&Aa(e,i)||Bu(i,n,r)},d(s){s&&X(t),i.block.d(s),i.token=null,i=null}}}function DM(n){return{c:re,m:re,p:re,d:re}}function SM(n){w0(n);let t,e,i,s=n[11]&&M0(n);return{c(){s&&s.c(),t=ae(),e=U("img"),y(e,"alt","tag-icon"),y(e,"class","icon-image svelte-1j3azjf"),ft(e.src,i=n[7])||y(e,"src",i),Q(e,"width",Li(Ar({originWidth:n[1],scale:n[4],wantedWidth:n[3]}).width)),Q(e,"max-width","initial")},m(r,o){s&&s.m(r,o),Y(r,t,o),Y(r,e,o)},p(r,o){w0(r),r[11]?s?s.p(r,o):(s=M0(r),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),o&128&&!ft(e.src,i=r[7])&&y(e,"src",i),o&184&&Q(e,"width",Li(Ar({originWidth:r[1],scale:r[4],wantedWidth:r[3]}).width))},d(r){s&&s.d(r),r&&X(t),r&&X(e)}}}function M0(n){let t,e,i,s,r;return{c(){t=U("div"),e=U("div"),i=U("div"),s=ae(),r=U("div"),y(i,"class","icon-bg-circle-inner svelte-1j3azjf"),Q(i,"background",n[11]),Q(i,"opacity",n[10]),y(r,"class","icon-bg-circle-inner-shadow svelte-1j3azjf"),y(e,"class","icon-bg-circle svelte-1j3azjf"),y(t,"class","icon-bg svelte-1j3azjf")},m(o,a){Y(o,t,a),V(t,e),V(e,i),V(e,s),V(e,r)},p(o,a){a&2048&&Q(i,"background",o[11]),a&1024&&Q(i,"opacity",o[10])},d(o){o&&X(t)}}}function LM(n){return{c:re,m:re,p:re,d:re}}function TM(n){return{c:re,m:re,p:re,d:re}}function zM(n){P0(n);let t,e=`url(${n[7]})`,i=`steps(${n[19]-1})`;return{c(){t=U("div"),y(t,"class","icon-keyframe svelte-1j3azjf"),Q(t,"width",Li(Ar({originWidth:n[1],originHeight:n[18],scale:n[4],wantedWidth:n[3]}).width)),Q(t,"height",Li(Ar({originWidth:n[1],originHeight:n[18],scale:n[4],wantedWidth:n[3]}).height)),Q(t,"background-image",e),Q(t,"animation-duration",n[20]),Q(t,"animation-timing-function",i)},m(s,r){Y(s,t,r)},p(s,r){P0(s),r&252&&Q(t,"width",Li(Ar({originWidth:s[1],originHeight:s[18],scale:s[4],wantedWidth:s[3]}).width)),r&252&&Q(t,"height",Li(Ar({originWidth:s[1],originHeight:s[18],scale:s[4],wantedWidth:s[3]}).height)),r&128&&e!==(e=`url(${s[7]})`)&&Q(t,"background-image",e),r&228&&Q(t,"animation-duration",s[20]),r&228&&i!==(i=`steps(${s[19]-1})`)&&Q(t,"animation-timing-function",i)},d(s){s&&X(t)}}}function OM(n){return{c:re,m:re,p:re,d:re}}function jM(n){let t,e,i=n[9]&&C0(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[9]?i?(i.p(s,r),r&512&&N(i,1)):(i=C0(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function Ar(n){const{originWidth:t,originHeight:e,scale:i=1,wantedWidth:s}=n,r=(s!=null?s:t)*i,o=typeof e=="number"?r*(e/t):void 0;return fe(F({},n),{width:r,height:o})}function VM(n,t,e){let i,s,r,o,a,l,c,h,d,f,g,{width:p=null}=t,{icon:m=null}=t,{shadow:v=!1}=t;const b=qs();function w(L){return ee(this,null,function*(){const S=yield MM(L);return b("iconLoaded",S),S})}function x(L){return ee(this,null,function*(){if(typeof g=="number")return fe(F({},L),{width:g});const S=yield IM(L);return b("iconLoaded",S),S})}function E(){f||b("iconLoaded")}return zt(()=>{E()}),n.$$set=L=>{"width"in L&&e(1,p=L.width),"icon"in L&&e(14,m=L.icon),"shadow"in L&&e(0,v=L.shadow)},n.$$.update=()=>{var L,S,R;n.$$.dirty&16384&&e(7,i=m==null?void 0:m.url),n.$$.dirty&16384&&e(11,s=m==null?void 0:m.bgcolor),n.$$.dirty&16384&&e(10,r=(L=m==null?void 0:m.bgopacity)!=null?L:.6),n.$$.dirty&16384&&e(2,o=(S=m==null?void 0:m.steps)!=null?S:1),n.$$.dirty&16384&&e(6,a=m==null?void 0:m.fps),n.$$.dirty&16384&&e(5,l=m==null?void 0:m.ratio),n.$$.dirty&16384&&e(4,c=(R=m==null?void 0:m.scale)!=null?R:1),n.$$.dirty&16384&&e(3,h=m==null?void 0:m.width),n.$$.dirty&252&&e(9,d=At({url:i,steps:o,fps:a,ratio:l,scale:c,width:h})),n.$$.dirty&4&&e(8,f=o>1),n.$$.dirty&2&&(g=p)},E(),[v,p,o,h,c,l,a,i,f,d,r,s,w,x,m]}class k0 extends Me{constructor(t){super(),Ie(this,t,VM,jM,Pe,{width:1,icon:14,shadow:0},kM)}}function BM(n){De(n,"svelte-e58ijk",".wrapper.svelte-e58ijk{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}.text-wrapper.svelte-e58ijk{position:relative;display:flex;align-items:center;justify-content:center}.text.svelte-e58ijk{position:absolute;top:0;font-size:0.875rem;color:#ffffff;letter-spacing:0;text-align:center;max-width:8.75rem;width:-moz-max-content;width:max-content;line-height:1.125rem;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function E0(n){let t,e,i,s,r,o;return e=new Si({props:{outDelay:0,inDelay:0,center:!0,width:"80%",blurRadius:40,spreadRadius:16,opacity:.08}}),{c(){t=U("div"),Ae(e.$$.fragment),i=ae(),s=U("div"),r=Ve(n[2]),y(s,"class","text svelte-e58ijk"),Q(s,"top",n[1]),y(t,"class","text-wrapper svelte-e58ijk")},m(a,l){Y(a,t,l),ge(e,t,null),V(t,i),V(t,s),V(s,r),o=!0},p(a,l){(!o||l&4)&&Ge(r,a[2]),l&2&&Q(s,"top",a[1])},i(a){o||(N(e.$$.fragment,a),o=!0)},o(a){Z(e.$$.fragment,a),o=!1},d(a){a&&X(t),ve(e)}}}function _M(n){let t,e,i,s;e=new k0({props:{icon:n[0],shadow:!0}}),e.$on("iconLoaded",n[8]);let r=n[2]&&n[3]&&E0(n);return{c(){t=U("div"),Ae(e.$$.fragment),i=ae(),r&&r.c(),y(t,"class","wrapper svelte-e58ijk")},m(o,a){Y(o,t,a),ge(e,t,null),V(t,i),r&&r.m(t,null),s=!0},p(o,[a]){const l={};a&1&&(l.icon=o[0]),e.$set(l),o[2]&&o[3]?r?(r.p(o,a),a&12&&N(r,1)):(r=E0(o),r.c(),N(r,1),r.m(t,null)):r&&(Ee(),Z(r,1,1,()=>{r=null}),xe())},i(o){s||(N(e.$$.fragment,o),N(r),s=!0)},o(o){Z(e.$$.fragment,o),Z(r),s=!1},d(o){o&&X(t),ve(e),r&&r.d()}}}const RM=4;function FM(n,t,e){let i,s,r,o,a,l,c,{tag:h}=t;const d=()=>{e(3,i=!0)};return n.$$set=f=>{"tag"in f&&e(4,h=f.tag)},n.$$.update=()=>{var f,g,p,m,v,b,w,x;n.$$.dirty&16&&e(2,s=(f=h.data.title)!=null?f:h.data.text),n.$$.dirty&16&&e(0,r=(p=h.data.icon)!=null?p:(g=h.style)==null?void 0:g.point),n.$$.dirty&16&&e(6,o=(v=(m=h.style)==null?void 0:m.point)==null?void 0:v.width),n.$$.dirty&16&&e(5,a=(x=(w=(b=h.style)==null?void 0:b.point)==null?void 0:w.scale)!=null?x:1),n.$$.dirty&1&&e(7,l=r==null?void 0:r.bgcolor),n.$$.dirty&224&&e(1,c=l&&o&&typeof o=="number"?Li(o*.414*a/2+RM):0)},e(3,i=!1),[r,c,s,i,h,a,o,l,d]}class NM extends Me{constructor(t){super(),Ie(this,t,FM,_M,Pe,{tag:4},BM)}}function GM(n){De(n,"svelte-ezi5lu",`.icon.svelte-ezi5lu{font-size:0}.icon-bg.svelte-ezi5lu{position:absolute;width:141%;height:141%;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;overflow:hidden;z-index:-1}.icon-bg-circle.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner-shadow.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center, transparent 20%, rgba(255,255,255,0.3))}.icon-bg-circle.svelte-ezi5lu::before{content:"";position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;border-radius:50%;background:linear-gradient(-45deg, rgba(255,255,255,1), rgba(255,255,255,0.2), rgba(255,255,255,1));z-index:1;mask:radial-gradient(circle at center, 
              transparent 65%, 
              black 0%);-webkit-mask:radial-gradient(circle at center, 
              transparent 65%, 
              black 0%)}`)}function x0(n){let t,e;return t=new Si({props:{center:!0,blurRadius:24,spreadRadius:16}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function D0(n){let t,e,i,s,r;return{c(){t=U("div"),e=U("div"),i=U("div"),s=ae(),r=U("div"),y(i,"class","icon-bg-circle-inner svelte-ezi5lu"),Q(i,"background",n[4]),Q(i,"opacity",n[3]),y(r,"class","icon-bg-circle-inner-shadow svelte-ezi5lu"),y(e,"class","icon-bg-circle svelte-ezi5lu"),y(t,"class","icon-bg svelte-ezi5lu")},m(o,a){Y(o,t,a),V(t,e),V(e,i),V(e,s),V(e,r)},p(o,a){a&16&&Q(i,"background",o[4]),a&8&&Q(i,"opacity",o[3])},d(o){o&&X(t)}}}function HM(n){let t,e,i,s,r,o,a,l,c,h,d,f,g,p,m,v=n[1]&&x0(),b=n[4]&&D0(n);return{c(){t=U("div"),v&&v.c(),e=ae(),b&&b.c(),i=ae(),s=ye("svg"),r=ye("linearGradient"),o=ye("stop"),a=ye("stop"),l=ye("linearGradient"),c=ye("stop"),h=ye("stop"),d=ye("g"),f=ye("path"),g=ye("path"),p=ye("path"),y(o,"offset","0"),y(o,"stop-color","#fff"),y(a,"offset","1"),y(a,"stop-color","#fff"),y(a,"stop-opacity",".7"),y(r,"id","a"),y(r,"x1","78.74567%"),y(r,"x2","5.663764%"),y(r,"y1","94.075617%"),y(r,"y2","5.924383%"),y(c,"offset","0"),y(c,"stop-color","#fff"),y(h,"offset","1"),y(h,"stop-color","#fff"),y(h,"stop-opacity","0"),y(l,"id","b"),y(l,"x1","16.588502%"),y(l,"x2","68.285986%"),y(l,"y1","5.924383%"),y(l,"y2","63.800896%"),y(f,"d","m18 5.4v8c0 1.9329966-4.0294373 3.5-9 3.5-4.97056275 0-9-1.5670034-9-3.5v-8c0 1.93299662 4.02943725 3.5 9 3.5 4.8670094 0 8.8316983-1.50239169 8.9947813-3.37967512zm-13.0396582-.5c.259 0 .504-.063.728-.196.441-.259.721-.728.721-1.26 0-.441-.189-.833-.504-1.085.259-.259.434-.63.434-1.022 0-.245-.063-.476-.182-.679-.252-.413-.693-.658-1.197-.658-.238 0-.462.056-.665.175-.42.238-.679.665-.679 1.162v.035h.721v-.035c0-.315.294-.616.623-.616.357 0 .651.287.651.616 0 .371-.287.658-.651.658h-.14v.728h.14c.399 0 .728.322.728.721s-.329.735-.728.735-.728-.336-.728-.735v-.105h-.728v.105c0 .266.063.511.196.728.259.448.728.728 1.26.728zm3.647 0c.273 0 .518-.07.749-.203.448-.273.742-.763.742-1.302 0-.273-.07-.518-.203-.749-.273-.448-.749-.742-1.288-.742-.077 0-.133 0-.168.007l.875-1.911h-.805l-1.274 2.793c-.091.189-.133.392-.133.602 0 .273.07.525.203.756.273.455.749.749 1.302.749zm0-.742c-.427 0-.763-.336-.763-.763 0-.42.343-.77.763-.77s.77.35.77.77-.35.763-.77.763zm3.654.749c.504 0 .952-.273 1.204-.7.126-.21.189-.441.189-.693v-2.086c0-.511-.273-.98-.693-1.239-.217-.126-.448-.189-.7-.189-.511 0-.98.273-1.232.714-.133.217-.196.455-.196.714v2.086c0 .504.273.952.714 1.204.217.126.455.189.714.189zm0-.721c-.371 0-.693-.301-.693-.672v-2.086c0-.399.308-.693.693-.693.371 0 .651.294.651.693v2.086c0 .385-.28.672-.651.672zm3.2140391-2.11266016c.2734375 0 .5132649-.09855143.7194824-.29565429.2062174-.19710287.3093262-.44376628.3093262-.73999024 0-.28710937-.0991211-.53035481-.2973633-.72973633-.1982422-.19938151-.4420573-.29907226-.7314453-.29907226-.2825521 0-.5257976.10026042-.7297364.30078125s-.3059082.44661458-.3059082.73828125c0 .2734375.0968425.51269531.2905274.71777344.1936849.20507812.4420573.30761718.7451172.30761718zm0-.37255859c-.1822917 0-.3383789-.06494141-.4682618-.19482422-.1298828-.12988281-.1948242-.28369141-.1948242-.46142578 0-.18457031.0655111-.34122721.1965332-.4699707.1310222-.12874349.2865397-.19311524.4665528-.19311524.180013 0 .3343912.06494141.4631347.19482422s.1931153.28369141.1931153.46142578c0 .18457031-.0655111.34122722-.1965332.46997071-.1310222.12874349-.2842611.19311523-.4597168.19311523z"),y(f,"fill","url(#a)"),y(f,"fill-rule","nonzero"),y(g,"d","m18 5.4v8c0 1.9329966-4.0294373 3.5-9 3.5-4.97056275 0-9-1.5670034-9-3.5v-8c0 1.93299662 4.02943725 3.5 9 3.5 4.8670094 0 8.8316983-1.50239169 8.9947813-3.37967512zm-.537 1.917-.0556083.04651904c-1.6129673 1.27557869-4.7855335 2.07278608-8.4073917 2.07278608-3.5667171 0-6.69228643-.77164105-8.32741897-2.0099189l-.13658103-.10838622.00030512 6.082c0 1.4658868 3.60570734 2.8999734 8.15878222 2.9616322l.30491266.0020627c4.6959533 0 8.4636949-1.4652329 8.4636949-2.9636949zm-5.2016582-7.317c.252 0 .483.063.7.189.42.259.693.728.693 1.239v2.086l-.00756.14868c-.02016.19488-.08064.37632-.18144.54432-.252.427-.7.7-1.204.7-.259 0-.497-.063-.714-.189-.441-.252-.714-.7-.714-1.204v-2.086l.007616-.15288c.020384-.20048.081984-.38752.188384-.56112.252-.441.721-.714 1.232-.714zm-7.301 0c.504 0 .945.245 1.197.658.119.203.182.434.182.679 0 .392-.175.763-.434 1.022.315.252.504.644.504 1.085 0 .532-.28 1.001-.721 1.26-.224.133-.469.196-.728.196-.532 0-1.001-.28-1.26-.728-.133-.217-.196-.462-.196-.728v-.105h.728v.105c0 .399.329.735.728.735s.728-.336.728-.735-.329-.721-.728-.721h-.14v-.728h.14c.364 0 .651-.287.651-.658 0-.329-.294-.616-.651-.616-.329 0-.623.301-.623.616v.035h-.721v-.035c0-.497.259-.924.679-1.162.203-.119.427-.175.665-.175zm4.354 0-.875 1.911c.035-.007.091-.007.168-.007.539 0 1.015.294 1.288.742.133.231.203.476.203.749 0 .539-.294 1.029-.742 1.302-.231.133-.476.203-.749.203-.553 0-1.029-.294-1.302-.749-.133-.231-.203-.483-.203-.756 0-.21.042-.413.133-.602l1.274-2.793zm2.947.735c-.385 0-.693.294-.693.693v2.086l.0077784.09927273c.051172.32396694.3479489.57272727.6852216.57272727.371 0 .651-.287.651-.672v-2.086l-.0068002-.10607288c-.044861-.34395191-.3069271-.58692712-.6441998-.58692712zm-3.654 1.89c-.42 0-.763.35-.763.77 0 .427.336.763.763.763.42 0 .77-.343.77-.763s-.35-.77-.77-.77zm6.8680391-2.61611328c.289388 0 .5332031.09969075.7314453.29907226.1982422.19938152.2973633.44262696.2973633.72973633 0 .29622396-.1031088.54288737-.3093262.73999024-.2062175.19710286-.4460449.29565429-.7194824.29565429-.3030599 0-.5514323-.10253906-.7451172-.30761718-.1936849-.20507813-.2905274-.44433594-.2905274-.71777344 0-.29166667.1019694-.53776042.3059082-.73828125s.4471843-.30078125.7297364-.30078125zm0 .37255859c-.1800131 0-.3355306.06437175-.4665528.19311524-.1310221.12874349-.1965332.28540039-.1965332.4699707 0 .17773437.0649414.33154297.1948242.46142578.1298829.12988281.2859701.19482422.4682618.19482422.1754557 0 .3286946-.06437174.4597168-.19311523.1310221-.12874349.1965332-.2854004.1965332-.46997071 0-.17773437-.0643718-.33154297-.1931153-.46142578s-.2831217-.19482422-.4631347-.19482422z"),y(g,"fill","url(#b)"),y(g,"fill-rule","nonzero"),y(p,"d","m3.00030998 2.79110119v5.21779762c-1.84142801-.64087734-3.00030998-1.57225753-3.00030998-2.60889881s1.15888197-1.96802147 3.00030998-2.60889881zm12.00038752.00035068c1.8408432.64086639 2.9993025 1.57209591 2.9993025 2.60854813s-1.1584593 1.96768174-2.9993025 2.60854813z"),y(p,"fill","#d8d8d8"),y(p,"opacity",".6"),y(d,"fill","none"),y(d,"fill-rule","evenodd"),y(d,"transform","translate(3 3.1)"),y(s,"height",n[2]),y(s,"width",n[2]),y(s,"viewBox","0 0 24 24"),y(s,"xmlns","http://www.w3.org/2000/svg"),y(s,"xmlns:xlink","http://www.w3.org/1999/xlink"),y(t,"class","icon svelte-ezi5lu"),Q(t,"width",n[0])},m(w,x){Y(w,t,x),v&&v.m(t,null),V(t,e),b&&b.m(t,null),V(t,i),V(t,s),V(s,r),V(r,o),V(r,a),V(s,l),V(l,c),V(l,h),V(s,d),V(d,f),V(d,g),V(d,p),m=!0},p(w,[x]){w[1]?v?x&2&&N(v,1):(v=x0(),v.c(),N(v,1),v.m(t,e)):v&&(Ee(),Z(v,1,1,()=>{v=null}),xe()),w[4]?b?b.p(w,x):(b=D0(w),b.c(),b.m(t,i)):b&&(b.d(1),b=null),(!m||x&4)&&y(s,"height",w[2]),(!m||x&4)&&y(s,"width",w[2]),x&1&&Q(t,"width",w[0])},i(w){m||(N(v),m=!0)},o(w){Z(v),m=!1},d(w){w&&X(t),v&&v.d(),b&&b.d()}}}function WM(n){const{originWidth:t,originHeight:e,scale:i=1,wantedWidth:s}=n,r=(s!=null?s:t)*i,o=typeof e=="number"?r*(e/t):void 0;return fe(F({},n),{width:r,height:o})}function UM(n,t,e){let i,s,r,o,a,{width:l=null}=t,{icon:c=null}=t,{shadow:h=!1}=t;return n.$$set=d=>{"width"in d&&e(0,l=d.width),"icon"in d&&e(5,c=d.icon),"shadow"in d&&e(1,h=d.shadow)},n.$$.update=()=>{var d,f;n.$$.dirty&32&&e(4,i=c==null?void 0:c.bgcolor),n.$$.dirty&32&&e(3,s=(d=c==null?void 0:c.bgopacity)!=null?d:.6),n.$$.dirty&32&&e(7,r=(f=c==null?void 0:c.scale)!=null?f:1),n.$$.dirty&32&&e(6,o=c==null?void 0:c.width),n.$$.dirty&192&&e(2,a=WM({originWidth:24,originHeight:24,scale:r,wantedWidth:o}).width)},[l,h,a,s,i,c,o,r]}let QM=class extends Me{constructor(t){super(),Ie(this,t,UM,HM,Pe,{width:0,icon:5,shadow:1},GM)}};function XM(n){De(n,"svelte-yq4ru9",".wrapper.svelte-yq4ru9{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}")}function YM(n){let t,e,i;return e=new QM({props:{icon:n[0],shadow:!0}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","wrapper svelte-yq4ru9")},m(s,r){Y(s,t,r),ge(e,t,null),i=!0},p(s,[r]){const o={};r&1&&(o.icon=s[0]),e.$set(o)},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e)}}}function ZM(n,t,e){let i,{tag:s}=t;return n.$$set=r=>{"tag"in r&&e(1,s=r.tag)},n.$$.update=()=>{var r,o;n.$$.dirty&2&&e(0,i=(o=s.data.icon)!=null?o:(r=s.style)==null?void 0:r.point)},[i,s]}class JM extends Me{constructor(t){super(),Ie(this,t,ZM,YM,Pe,{tag:1},XM)}}function qM(n){De(n,"svelte-kzl2aj",".customElement__container.svelte-kzl2aj{position:relative}")}function KM(n){let t,e;return{c(){t=new da(!1),e=Ne(),t.a=e},m(i,s){t.m(n[2],i,s),Y(i,e,s)},p:re,d(i){i&&X(e),i&&t.d()}}}function $M(n){let t,e=typeof n[2]=="string"&&KM(n);return{c(){t=U("div"),e&&e.c(),y(t,"class","customElement__container svelte-kzl2aj"),we(t,"unfolded",n[1])},m(i,s){Y(i,t,s),e&&e.m(t,null),n[5](t)},p(i,[s]){typeof i[2]=="string"&&e.p(i,s),s&2&&we(t,"unfolded",i[1])},i:re,o:re,d(i){i&&X(t),e&&e.d(),n[5](null)}}}function ek(n,t,e){var h,d;let i,{tag:s}=t,{rendererMap:r=new Map}=t,o,a=(d=s.element)!=null?d:(h=r.get(s.contentType))==null?void 0:h.renderer,l;zt(()=>{o&&(a instanceof Element?(o.appendChild(a),l=()=>{a instanceof Element&&a.remove()}):typeof a=="function"&&(l=a(o,s)))}),ti(()=>{l==null||l()});function c(f){Je[f?"unshift":"push"](()=>{o=f,e(0,o)})}return n.$$set=f=>{"tag"in f&&e(3,s=f.tag),"rendererMap"in f&&e(4,r=f.rendererMap)},n.$$.update=()=>{n.$$.dirty&8&&e(1,i=s.state.unfolded)},[o,i,a,s,r,c]}class tk extends Me{constructor(t){super(),Ie(this,t,ek,$M,Pe,{tag:3,rendererMap:4},qM)}}function ik(n){De(n,"svelte-1fy4duy",'@font-face{font-family:"TG-TYPE";font-style:normal;font-weight:400;src:local("TG-TYPE-Bold"), url(data:application/font-woff2;charset=utf-8;base64,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) format("woff2")}*{-webkit-tap-highlight-color:transparent}.content__container.svelte-1fy4duy{position:relative;left:50%;top:50%;transform:translate(-50%, -50%);font-family:PingFangSC, Segoe UI, Rototo, sans-serif;transition:opacity 0.2s linear}.content__container.unClickable.svelte-1fy4duy{pointer-events:none !important}.content__container.unClickable.svelte-1fy4duy *{pointer-events:none !important}.content__wrapper.svelte-1fy4duy{pointer-events:none;width:100%;height:100%}.content__container.hide.svelte-1fy4duy{opacity:0;pointer-events:none}.content__container.hide.svelte-1fy4duy *{pointer-events:none !important}.content__container.disable.svelte-1fy4duy{display:none}.content.svelte-1fy4duy{position:relative;width:100%;height:100%;font-size:0.75rem;color:#fff}.content.svelte-1fy4duy:not(.unfolded){pointer-events:none}.content.svelte-1fy4duy:not(.unfolded) *{pointer-events:none !important}.content.unfolded.svelte-1fy4duy{pointer-events:auto;cursor:pointer}')}function nk(n){let t,e;return{c(){t=U("div"),y(t,"data-info","tag content is keep folded"),y(t,"data-id",e=n[0].id)},m(i,s){Y(i,t,s)},p(i,s){s&1&&e!==(e=i[0].id)&&y(t,"data-id",e)},i:re,o:re,d(i){i&&X(t)}}}function sk(n){let t,e,i,s,r,o,a,l,c,h,d,f,g,p,m,v,b;const w=[uk,dk,hk,ck,lk,ak,ok],x=[];function E(L,S){return S&9&&(s=null),S&9&&(r=null),S&9&&(o=null),S&9&&(a=null),S&9&&(l=null),S&9&&(c=null),S&9&&(h=null),s==null&&(s=!!(["Text"].includes(L[0].contentType)||["Text"].includes(L[3].get(L[0].contentType)))),s?0:(r==null&&(r=!!(["ImageText","Image","Video"].includes(L[0].contentType)||["ImageText","Image","Video"].includes(L[3].get(L[0].contentType)))),r?1:(o==null&&(o=!!(["Audio"].includes(L[0].contentType)||["Audio"].includes(L[3].get(L[0].contentType)))),o?2:(a==null&&(a=!!(["Marketing"].includes(L[0].contentType)||["Marketing"].includes(L[3].get(L[0].contentType)))),a?3:(l==null&&(l=!!(["Link","VRLink","PanoLink","Sticker"].includes(L[0].contentType)||["Link","VRLink","PanoLink","Sticker"].includes(L[3].get(L[0].contentType)))),l?4:(c==null&&(c=!!(["MediaPlane","MediaModel"].includes(L[0].contentType)||["MediaPlane","MediaModel"].includes(L[3].get(L[0].contentType)))),c?5:(h==null&&(h=!!(["Panorama"].includes(L[0].contentType)||["Panorama"].includes(L[3].get(L[0].contentType)))),h?6:-1))))))}return~(d=E(n,-1))&&(f=x[d]=w[d](n)),{c(){var L;t=U("div"),e=U("div"),i=U("div"),f&&f.c(),y(i,"class","content svelte-1fy4duy"),we(i,"unfolded",(L=n[0].state)==null?void 0:L.unfolded),y(e,"class","content__wrapper svelte-1fy4duy"),y(t,"class",g=yt(ni("content__container",n[0].className))+" svelte-1fy4duy"),y(t,"data-id",p=n[0].id),we(t,"disable",n[0].enabled===!1),we(t,"hide",n[5]),we(t,"unClickable",n[0].config.clickable===!1),Q(t,"width",n[0].stickType==="Plane"||n[0].contentType==="MediaModel"?"100%":0),Q(t,"height",n[0].stickType==="Plane"||n[0].contentType==="MediaModel"?"100%":0)},m(L,S){Y(L,t,S),V(t,e),V(e,i),~d&&x[d].m(i,null),n[16](t),m=!0,v||(b=je(t,"click",n[17],!0),v=!0)},p(L,S){var z;let R=d;d=E(L,S),d===R?~d&&x[d].p(L,S):(f&&(Ee(),Z(x[R],1,1,()=>{x[R]=null}),xe()),~d?(f=x[d],f?f.p(L,S):(f=x[d]=w[d](L),f.c()),N(f,1),f.m(i,null)):f=null),(!m||S&1)&&we(i,"unfolded",(z=L[0].state)==null?void 0:z.unfolded),(!m||S&1&&g!==(g=yt(ni("content__container",L[0].className))+" svelte-1fy4duy"))&&y(t,"class",g),(!m||S&1&&p!==(p=L[0].id))&&y(t,"data-id",p),(!m||S&1)&&we(t,"disable",L[0].enabled===!1),(!m||S&33)&&we(t,"hide",L[5]),(!m||S&1)&&we(t,"unClickable",L[0].config.clickable===!1),S&1&&Q(t,"width",L[0].stickType==="Plane"||L[0].contentType==="MediaModel"?"100%":0),S&1&&Q(t,"height",L[0].stickType==="Plane"||L[0].contentType==="MediaModel"?"100%":0)},i(L){m||(N(f),m=!0)},o(L){Z(f),m=!1},d(L){L&&X(t),~d&&x[d].d(),n[16](null),v=!1,b()}}}function rk(n){let t,e,i,s,r,o,a;return e=new tk({props:{tag:At(n[0]),rendererMap:n[2]}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class",i=yt(ni("content__container",n[0].className))+" svelte-1fy4duy"),y(t,"data-id",s=n[0].id),we(t,"custom-tag-disable",n[0].enabled===!1),we(t,"custom-tag-hide",n[5])},m(l,c){Y(l,t,c),ge(e,t,null),n[14](t),r=!0,o||(a=je(t,"click",n[15]),o=!0)},p(l,c){const h={};c&1&&(h.tag=At(l[0])),c&4&&(h.rendererMap=l[2]),e.$set(h),(!r||c&1&&i!==(i=yt(ni("content__container",l[0].className))+" svelte-1fy4duy"))&&y(t,"class",i),(!r||c&1&&s!==(s=l[0].id))&&y(t,"data-id",s),(!r||c&1)&&we(t,"custom-tag-disable",l[0].enabled===!1),(!r||c&33)&&we(t,"custom-tag-hide",l[5])},i(l){r||(N(e.$$.fragment,l),r=!0)},o(l){Z(e.$$.fragment,l),r=!1},d(l){l&&X(t),ve(e),n[14](null),o=!1,a()}}}function ok(n){let t,e;return t=new JM({props:{tag:At(n[0])}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.tag=At(i[0])),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function ak(n){let t,e;return t=new CM({props:{tag:At(n[0])}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.tag=At(i[0])),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function lk(n){let t,e;return t=new NM({props:{tag:At(n[0])}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.tag=At(i[0])),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function ck(n){let t,e;return t=new J9({props:{tag:At(n[0])}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.tag=At(i[0])),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function hk(n){let t,e;return t=new bM({props:{tag:At(n[0])}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.tag=At(i[0])),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function dk(n){let t,e;return t=new Q9({props:{tag:At(n[0])}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.tag=At(i[0])),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function uk(n){let t,e;return t=new dI({props:{tag:At(n[0])}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&1&&(r.tag=At(i[0])),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function fk(n){let t,e,i,s,r;const o=[rk,sk,nk],a=[];function l(c,h){return h&5&&(t=null),t==null&&(t=!!(c[0].element||c[2].has(c[0].contentType))),t?0:c[4]?1:2}return e=l(n,-1),i=a[e]=o[e](n),{c(){i.c(),s=Ne()},m(c,h){a[e].m(c,h),Y(c,s,h),r=!0},p(c,[h]){let d=e;e=l(c,h),e===d?a[e].p(c,h):(Ee(),Z(a[d],1,1,()=>{a[d]=null}),xe(),i=a[e],i?i.p(c,h):(i=a[e]=o[e](c),i.c()),N(i,1),i.m(s.parentNode,s))},i(c){r||(N(i),r=!0)},o(c){Z(i),r=!1},d(c){a[e].d(c),c&&X(s)}}}function pk(n,t,e){let i,s,r,o,a,l,{tag:c}=t,{hooks:h}=t,{rendererMap:d=new Map}=t,{contentTypeMap:f=new Map}=t,{state:g}=t,{mediaStore:p}=t,{temporaryState:m}=t;pc("hooks",h),pc("mediaStore",p);let v,b;function w(z){z?h.emit("exposure",{id:o,type:"start"}):h.emit("exposure",{id:o,type:"end"})}function x(z,O,A){var C,I;return!(!z.enabled||!O.visible||!O.enabled||!A.visible||!((C=z.state)!=null&&C.visible)||((I=z.temporaryState)==null?void 0:I.visible)===!1||z instanceof S0&&z.loading)}function E(z){Je[z?"unshift":"push"](()=>{c.contentDom=z,e(0,c)})}const L=z=>h.emit("click",{event:z,target:"TagContent",tag:c});function S(z){Je[z?"unshift":"push"](()=>{c.contentDom=z,e(0,c)})}const R=z=>{c.entryFromModel&&oi(c.five.state.mode)?(z.stopPropagation(),c.find({targetMode:"Panorama"})):h.emit("click",{event:z,target:"TagContent",tag:c})};return n.$$set=z=>{"tag"in z&&e(0,c=z.tag),"hooks"in z&&e(1,h=z.hooks),"rendererMap"in z&&e(2,d=z.rendererMap),"contentTypeMap"in z&&e(3,f=z.contentTypeMap),"state"in z&&e(6,g=z.state),"mediaStore"in z&&e(7,p=z.mediaStore),"temporaryState"in z&&e(8,m=z.temporaryState)},n.$$.update=()=>{var z,O,A,C,I,M,D,T,H,W,J;n.$$.dirty&1&&e(12,i=(z=c.state)==null?void 0:z.unfolded),n.$$.dirty&1&&e(11,s=(O=c.state)==null?void 0:O.visible),n.$$.dirty&321&&e(13,r=g.visible&&m.visible&&((A=c.state)==null?void 0:A.visible)),n.$$.dirty&1&&(o=c.id),n.$$.dirty&321&&e(5,a=!x(c,g,m)),n.$$.dirty&8192&&w(r),n.$$.dirty&7681&&c.hooks&&(i!==void 0&&i!==b&&(e(10,b=i),i?(I=(C=c.hooks).emit)==null||I.call(C,"unfolded"):(D=c==null?void 0:(M=c.hooks).emit)==null||D.call(M,"folded")),s!==void 0&&s!==v&&(e(9,v=s),s?(H=(T=c.hooks).emit)==null||H.call(T,"show"):(J=(W=c.hooks).emit)==null||J.call(W,"hide"))),n.$$.dirty&1&&e(4,l=(()=>!(typeof c.config.unfoldedConfig=="object"&&c.config.unfoldedConfig.keep==="folded"))())},[c,h,d,f,l,a,g,p,m,v,b,s,i,r,E,L,S,R]}let Lh=class extends Me{constructor(t){super(),Ie(this,t,pk,fk,Pe,{tag:0,hooks:1,rendererMap:2,contentTypeMap:3,state:6,mediaStore:7,temporaryState:8},ik)}};class S0 extends vh{constructor(e,i){super(e,i);u(this,"loading",!1);u(this,"loadModel",()=>ee(this,null,function*(){var o,a;const e=this.data.modelUrl;if(!e||(this.loading=!0,yield ai(this.five),!this.plugin.tags.includes(this)))return;const i=M4(e).then(l=>ee(this,null,function*(){var d;const c=Object.assign(l.scene,{customID:this.id,isTagModel:!0,removeEventListener:this.getConfig().clickable===!1?()=>{}:this.addObjectClickHandler(this,l.scene,f=>{this.plugin.hooks.emit("click",{target:"TagModel",tag:this,event:f})})});return new P.Matrix4().fromArray(this.matrix).decompose(c.position,c.quaternion,c.scale),c.updateWorldMatrix(!0,!0),c.visible=this.visible,(d=this.getConfig().modelConfig)!=null&&d.autoLookAtEnabled&&c.lookAt(this.five.camera.position.clone().setY(c.position.y)),c}));this.model={promise:i};const s=yield i;if(this.loading=!1,((o=this.model)==null?void 0:o.promise)!==i||!this.plugin.tags.includes(this))return;this.model.object=s;const r=this.plugin.gltfObjectGroup.children.find(l=>l.customID===this.id);if(r&&(this.plugin.gltfObjectGroup.remove(r),r.removeEventListener()),Is(this)){const l=this.data.mediaPosition.map(Cn);if(this.computeRenderType()==="Mesh"&&!this.mediaPlane){this.mediaPlane=new mh(this.data.mediaData[0].url,l,{objectFit:this.data.objectFit});const c=new P.Vector3().addVectors(l[0],l[2]).divideScalar(2);this.mediaPlane.position.copy(c),s.add(this.mediaPlane)}if(this.computeRenderType()!=="Mesh"){(a=this.tag3DContentSvelte)==null||a.dispose();const c=document.createElement("div");c.classList.add("tag-media-container");const h="black";c.style.backgroundColor=h,c.style.border=`3px solid ${h}`;const d=F({mode:"behind",cornerPoints:l,container:c},this.config.tag3DConfig),f=this.computeRenderType()==="BehindDom"||d.mode==="behind"?"behind":"front",g=new eg(fe(F({},d),{mode:f})),p=this.computeNormal();g.position.add(p.clone().setLength(vo.Z_FIGHTING_OFFSET)),s.add(g);let m;g.mode==="behind"&&this.config.clickable!==!1&&(m=this.addObjectClickHandler(this,g,b=>{this.plugin.hooks.emit("click",{event:b,target:"TagContent",tag:this})}));const v=new Lh({target:c,props:{tag:this,hooks:this.plugin.hooks,state:this.plugin.state,mediaStore:this.plugin.mediaStore,temporaryState:this.plugin.temporaryState}});this.tag3DContentSvelte={svelteApp:v,domContainer:{css3DObject:g},css3DInstance:g,initialNormal:p,currentNormal:p,dispose:()=>{v.$destroy(),g.dispose(),m==null||m()}}}}return this.plugin.gltfObjectGroup.add(s),s}));this.state.unfolded=!0,Fr(this.five),this.loadModel().then(()=>this.updateVisible())}applyVisible(){var e,i;(e=this.tag3DContentSvelte)==null||e.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}),(i=this.model)!=null&&i.object&&(this.model.object.visible=this.visible)}set(...e){super.set(...e),this.loadModel()}setData(...e){var s;super.setData(...e);const i=this.data.mediaPosition.map(Cn);this.computeRenderType()==="Mesh"?this.mediaPlane&&this.mediaPlane.src!==this.data.mediaData[0].url&&(this.mediaPlane.removeFromParent(),this.mediaPlane=new mh(this.data.mediaData[0].url,i,{objectFit:this.data.objectFit})):(s=this.tag3DContentSvelte)==null||s.svelteApp.$set({tag:this})}computeNormal(){return Rm(this.data.mediaPosition)}}const mk=new Map,gk=new Map;class vk extends vh{constructor(t,e){super(t,e),this.state.unfolded=!0,this.loadModel()}applyVisible(){var e,i,s,r,o,a;this.computeRenderType()==="Mesh"?((i=(e=this.data.mediaData)==null?void 0:e[0])==null?void 0:i.type)==="Video"?this.renderVideoPlane():((r=(s=this.data.mediaData)==null?void 0:s[0])==null?void 0:r.type)==="Image"&&this.renderImagePlane():((o=this.tag3DContentSvelte)==null||o.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}),(a=this.tag3DContentSvelte)!=null&&a.css3DInstance&&(this.tag3DContentSvelte.css3DInstance.visible=this.visible,this.five.needsRender=!0))}set(t,e=!0){super.set(t,e),ai(this.five).then(()=>{this.tag3DContentSvelte&&(t.data?this.tag3DContentSvelte.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}):t.position&&this.loadModel())})}setData(...t){var i,s,r,o,a;super.setData(...t),this.computeRenderType()==="Mesh"?((s=(i=this.data.mediaData)==null?void 0:i[0])==null?void 0:s.type)==="Video"?this.renderVideoPlane():((o=(r=this.data.mediaData)==null?void 0:r[0])==null?void 0:o.type)==="Image"&&this.renderImagePlane():(a=this.tag3DContentSvelte)==null||a.svelteApp.$set({tag:this})}loadModel(){return ee(this,null,function*(){var e,i,s,r,o,a;if(yield ai(this.five),this.computeRenderType()==="Mesh")((i=(e=this.data.mediaData)==null?void 0:e[0])==null?void 0:i.type)==="Video"?this.renderVideoPlane():((r=(s=this.data.mediaData)==null?void 0:s[0])==null?void 0:r.type)==="Image"&&this.renderImagePlane();else{Fr(this.five);const l=this.position.map(Qe);(a=(o=this.tag3DContentSvelte)==null?void 0:o.dispose)==null||a.call(o);const c=document.createElement("div");c.classList.add("tag-media-container");const h=F({mode:"front",cornerPoints:l,container:c},this.config.tag3DConfig),d=this.computeRenderType()==="BehindDom"||h.mode==="behind"?"behind":"front",f=new eg(fe(F({},h),{mode:d})),g=this.computeNormal();f.position.add(g.clone().setLength(vo.Z_FIGHTING_OFFSET)),this.plugin.group.add(f);let p;f.mode==="behind"&&this.config.clickable!==!1&&(p=this.addObjectClickHandler(this,f,v=>{this.plugin.hooks.emit("click",{event:v,target:"TagContent",tag:this})}));const m=new Lh({target:c,props:{tag:this,hooks:this.plugin.hooks,state:this.plugin.state,mediaStore:this.plugin.mediaStore,temporaryState:this.plugin.temporaryState}});this.tag3DContentSvelte={svelteApp:m,domContainer:{css3DObject:f},css3DInstance:f,initialNormal:g,currentNormal:g,dispose:()=>{m.$destroy(),f.dispose(),p==null||p()}},this.five.needsRender=!0}})}renderVideoPlane(){var a;const t=this.data.mediaData[0];if(!t)return;const{url:e}=t;if(!e)return;const i=this.currentVisible,s=(()=>!!(this.mediaPlane&&!i))(),r=(()=>!!(!this.mediaPlane&&i))(),o=(()=>!!(this.mediaPlane&&this.mediaPlane.src!==e))();if((s||o)&&this.mediaPlane&&(this.plugin.imagePlaneGroup.remove(this.mediaPlane),this.mediaPlane.dispose(),this.mediaPlane.removeFromParent(),this.mediaPlane=void 0),r||o){const l=this.position.map(Cn),c=new Jm(e,l,{videoCoverSrc:t.videoCoverUrl,playButton:this.data.playIcon,paused:!((a=this.data.autoplayConfig)!=null&&a.autoplayVideo),objectFit:this.data.objectFit,videoTextureMap:mk,ImageTextureMap:gk,domEvents:this.plugin.domEvents});this.plugin.domEvents.addAutoBindEventListener(c,"click",d=>{var f;!((f=c.videoInstance)!=null&&f.paused)&&c.videoInstance.muted===!1&&this.plugin.hooks.emit("playStateChange",{event:d,state:"playing",tag:this,mediaInstance:c.videoInstance})}),c.onVideoReady=d=>{d.addEventListener("play",f=>{this.plugin.mediaStore.set({currentMediaElement:c.videoInstance}),this.plugin.hooks.emit("playStateChange",{event:f,state:"playing",tag:this,mediaInstance:c.videoInstance})}),d.addEventListener("pause",f=>{this.plugin.hooks.emit("playStateChange",{event:f,state:"paused",tag:this,mediaInstance:c.videoInstance})}),d.addEventListener("ended",f=>{this.plugin.hooks.emit("playStateChange",{event:f,state:"paused",tag:this,mediaInstance:c.videoInstance})})};const h=d=>(this.five.on("renderFrame",d),()=>this.five.off("renderFrame",d));c.initialRenderHooks(h),this.mediaPlane=c,this.play=()=>c.play(),this.pause=()=>c.pause(),this.plugin.imagePlaneGroup.add(this.mediaPlane)}this.five.needsRender=!0}renderImagePlane(){const t=this.data.mediaData[0];if(!t)return;const{url:e}=t;if(!e)return;const i=this.position.map(Cn),s=this.currentVisible,r=(()=>!!(this.mediaPlane&&!s))(),o=(()=>!!(!this.mediaPlane&&s))(),a=(()=>!!(this.mediaPlane&&this.mediaPlane.src!==e))();(r||a)&&this.mediaPlane&&(this.plugin.imagePlaneGroup.remove(this.mediaPlane),this.mediaPlane.dispose(),this.mediaPlane.removeFromParent(),this.mediaPlane=void 0),(o||a)&&(this.mediaPlane=new mh(e,i,{objectFit:this.data.objectFit}),this.getConfig().clickable!==!1&&this.plugin.domEvents.addAutoBindEventListener(this.mediaPlane,"click",l=>{this.plugin.hooks.emit("click",{tag:this,target:"TagContent",event:l.origDomEvent})},{noEmitWhenHide:!0}),this.plugin.imagePlaneGroup.add(this.mediaPlane)),this.five.needsRender=!0}computeNormal(){return Rm(this.position)}}function Ak(n){De(n,"svelte-18ithb3",'@charset "UTF-8";.tag-point-click-helper.svelte-18ithb3.svelte-18ithb3{position:absolute;pointer-events:auto;cursor:pointer;width:141%;height:141%;left:50%;top:50%;transform:translate(-50%, -50%);z-index:1000000}.tag-point-wrapper.svelte-18ithb3.svelte-18ithb3{pointer-events:none;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);cursor:pointer;z-index:1040}.tag-folded-point.svelte-18ithb3.svelte-18ithb3,.tag-unfolded-point.svelte-18ithb3.svelte-18ithb3{transition:all 0.5s}.tag-point-wrapper.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3{display:flex;justify-content:center;align-items:center;position:absolute;width:100%;height:100%;border-radius:50%}.tag-point-wrapper.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:0.3125rem;height:0.3125rem;border-radius:50%;background-color:white}.tag-point-wrapper.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3:before{content:"";position:absolute;width:0.875rem;height:0.875rem;border-radius:50%;background-color:rgba(0, 0, 0, 0.2)}.tag-point-wrapper.folded.svelte-18ithb3 .tag-folded-point.svelte-18ithb3{opacity:1;scale:1}.tag-point-wrapper.folded.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3{opacity:0;scale:1}.tag-point-wrapper.unfolded.svelte-18ithb3 .tag-folded-point.svelte-18ithb3{opacity:0;scale:0.2}.tag-point-wrapper.unfolded.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3{opacity:1;scale:1}.tag-point-wrapper.disable-unfold.svelte-18ithb3 .tag-folded-point.svelte-18ithb3{opacity:1 !important;scale:1 !important}.tag-point-wrapper.disable-unfold.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3{opacity:0 !important;scale:1 !important}')}function bk(n){let t,e,i,s,r,o,a,l,c,h,d,f;return s=new Si({props:{center:!0,blurRadius:15,spreadRadius:5,opacity:.3}}),c=new k0({props:{icon:n[7],width:n[6]}}),c.$on("iconLoaded",n[15]),{c(){t=U("div"),e=U("div"),i=ae(),Ae(s.$$.fragment),r=ae(),o=U("div"),a=ae(),l=U("div"),Ae(c.$$.fragment),y(e,"class","tag-point-click-helper svelte-18ithb3"),y(o,"class","tag-unfolded-point svelte-18ithb3"),Q(o,"transition-delay",(n[8]?n[10]:0)+"ms"),y(l,"class","tag-folded-point svelte-18ithb3"),Q(l,"transition-delay",(n[8]?n[10]:0)+"ms"),y(t,"class","tag-point-wrapper svelte-18ithb3"),we(t,"unfolded",n[5]),we(t,"folded",n[8]),we(t,"disable-unfold",n[1].isPopoverConfigEnabled())},m(g,p){Y(g,t,p),V(t,e),n[14](e),V(t,i),ge(s,t,null),V(t,r),V(t,o),V(t,a),V(t,l),ge(c,l,null),h=!0,d||(f=[je(e,"click",n[12]),je(e,"mouseenter",n[13]),je(e,"mouseleave",function(){Di(n[3])&&n[3].apply(this,arguments)})],d=!0)},p(g,[p]){n=g,p&256&&Q(o,"transition-delay",(n[8]?n[10]:0)+"ms");const m={};p&128&&(m.icon=n[7]),p&64&&(m.width=n[6]),c.$set(m),p&256&&Q(l,"transition-delay",(n[8]?n[10]:0)+"ms"),(!h||p&32)&&we(t,"unfolded",n[5]),(!h||p&256)&&we(t,"folded",n[8]),(!h||p&2)&&we(t,"disable-unfold",n[1].isPopoverConfigEnabled())},i(g){h||(N(s.$$.fragment,g),N(c.$$.fragment,g),h=!0)},o(g){Z(s.$$.fragment,g),Z(c.$$.fragment,g),h=!1},d(g){g&&X(t),n[14](null),ve(s),ve(c),d=!1,ut(f)}}}function yk(n,t,e){var z,O;let i,s,r,o;const a=Ni("hooks");let{tag:l}=t,c,h=!1;const d=()=>{c!==void 0&&clearTimeout(c),h=!0,c=setTimeout(()=>{h=!1},800)},f=A=>{h||(l.entryFromModel&&oi(l.five.state.mode)?l.find({targetMode:"Panorama"}).then(()=>l.unfoldAndFoldOthers()):a.emit("click",{event:A,target:"TagPoint",tag:l}))},g=(()=>l.contentType==="Text"&&l.data.appearance==="plane"?500:800)();let{tagPointClickHelper:p=null}=t,{handleMouseEnter:m=()=>{}}=t,{handleMouseLeave:v=()=>{}}=t,{handleTagPointClick:b=()=>{}}=t;const w=()=>!0,x=(O=(z=l.config.popoverConfig)==null?void 0:z.beforeOpen)!=null?O:w,E=A=>{b(A),f(A)},L=A=>{x(l)&&m(A)};function S(A){Je[A?"unshift":"push"](()=>{p=A,e(0,p)})}function R(A){an.call(this,n,A)}return n.$$set=A=>{"tag"in A&&e(1,l=A.tag),"tagPointClickHelper"in A&&e(0,p=A.tagPointClickHelper),"handleMouseEnter"in A&&e(2,m=A.handleMouseEnter),"handleMouseLeave"in A&&e(3,v=A.handleMouseLeave),"handleTagPointClick"in A&&e(4,b=A.handleTagPointClick)},n.$$.update=()=>{var A,C,I,M;n.$$.dirty&2&&e(5,i=(A=l.state)==null?void 0:A.unfolded),n.$$.dirty&32&&e(8,s=!i),n.$$.dirty&2&&e(7,r=(I=(C=l.style)==null?void 0:C.point)!=null&&I.url?(M=l.style)==null?void 0:M.point:{url:KP}),n.$$.dirty&2&&e(6,o=(()=>{var H,W,J,te;const D=(W=(H=l.style)==null?void 0:H.point)==null?void 0:W.width;if(typeof D=="number")return D;const T=(te=(J=l.style)==null?void 0:J.point)==null?void 0:te.size;if(typeof T=="number")return T;if(T==="S")return 18;if(T==="M")return 20;if(T==="L")return 24;if(T==="XL")return 28})())},d(),[p,l,m,v,b,i,o,r,s,f,g,x,E,L,S,R]}class wk extends Me{constructor(t){super(),Ie(this,t,yk,bk,Pe,{tag:1,tagPointClickHelper:0,handleMouseEnter:2,handleMouseLeave:3,handleTagPointClick:4},Ak)}}const Pk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAHgAAAAC3G9N3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACfklEQVRYCe2Yu2tVQRCHb1QQFQRBKzEkooJoISL+ATYW/kXBSrBKLxZaidaKhSCxs1Asg4qgRhHBB6IkKr4f3yd3vCfHezfnsTGnuD/4ZWf3zO7M7M4+biZ6vd5muBsehydg1/EdB6/3uTBR8vYg9dPQoLqILzg1A++Gc+tD6JevKR/AY/BXB3kSn+bhX5QD8MNLuAnugz87xMv4cg0uw7AAVDDKo3Ar7MJKPMWPWeiELsOoAFS8D00l98laBvEN+6fgO/gPRgWg4iL8Ct3Ya5lKl7B/Bw7FhqGtg8ariAZwYND0X6V7WNOHkVg38svgw1nED/2qyykDIRfLsmy93Falvza1nUQqhaLjZ4Q38HA0UOqQ+0LExoqy2PaDipNkGfp+r9L/PHqPVE6hSgD2fw63w51QR7wN3dw6EqVOhhylQSmL0K3S/zb6ydT5MyJ/qgagvhfcEbjRCogZjzLVFjqWRbnYJ+S3CGegAa+IOgE44DPo/RCOrEZp3r+ClVAnAAd0djy5puBqOD/HuLdgZdQNwIEfQ4/WLdB8zsUXjHUBRoohrowmAWhgAbofRI6VMD3PwSUHrIMmATi+Z7S39B6YYwV8pHlp1UbTADTkhp6GPvjarMIT+l+BjdAmAA1q/FDfsmOZCuVgUu3v0b8IvSwboW0AGvaVuDdh3YCGwXYvK1eyMdoGoGF/xW2D3tTl2U/V59G/CVvBMz0HbjDILujRWgUfUbJPa+RYAZ0w970998Mqp5I/D30gtkauAHTEH0BuyimYSp05vj+EWZAzAB1yP/jc2AFNz2Ign6ibNj4KsyGeutkGLAw0iewdIfx/jkeuz/AxxjMwnoGMM/AbzDbNM/bhiRQAAAAASUVORK5CYII=",Ck="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAMAAABdem3zAAAAb1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt6r1GAAAAJXRSTlMApb6gupm3s7CprZWRfoeOg4qdenZzLG9ka04KJR4EET04MBlfDzTkzgAAAMpJREFUOMvd0dsSgiAQBuA1o7KMTJRUEE+9/zOGjhmjIHvdtyizM1zAv/C3lOS8BjxZlNpbAhJ/zTig1PkCdS1RZotSgF/FDBXiAXcT8z6jyZLp5PfPGthXJCsF7GrpRgs7BvrcoAM4qexhkSl3orGVM1t5c5COEVPiQIU9UZISvXRNi6S/3pptF87S8dNl9p1lxCQIw2CsadfMnmwHzoJdbJNo5LHKto6uHlENBhVfvGJlJnpGMLLtTyg9zPj5iHLhoAmeHw9YORcf/XMbuOSlzkgAAAAASUVORK5CYII=",Ik="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACtUlEQVRYCcWXzUtWQRSHb1ZWL1FYIH2AkSaEBbkMsTYFQVCbdkVQ7Vr3L/RXRQURIrVopxAuBEmIwCBqkfZBz2/0yLV35oz39X4c+HnHuXPOM2c+ztWi6MZ6Q91wi/GuwLe6SPgy0NdtZzwN9LmyPaAfLZg4j9A9tB+1Ah6D8wyNC2jWdMZ3AT1Ahwxoz6bAIwCeoisoyoh22qwGfF7F7zE66vnXCe4Buo9m0UEPqnd1gSeJ9QSNKij2C7nwvYLlfxupElWKVWkwwct2ml8eorOlzt9b7cOlvmhzUPA1oinT/6+J4oUCEaWVOquCdU1UfSZQDKCM1V/rHqu4qyAcQSmzRNyDJWcbmAqkfl2Tm0jg3PjaMladvYOOb0GzmTBOlh3nZaAMdU3Ke5nbO4uXG1ekvseTAG+gqmbXKeuXAs9kPeMDLOPsUsfA2le3wMeZodcy1lK7FgMfcz3yL//khxTJPU755pZQS10+jKk4UfB6cvRmRXJeh1cDZ7yMuwf3wFZAcisTzVjOb7zozjs71QMdLsVdQq8cwJ5feQfhC9FX0Xmk76vdAPmoHdNf+vch+1zGxoQ+D4x/8Q0tIN3rU8j2LhXQTrXFTY0bsgHETJr26yNaQ+eQskkFVMaC6+mtzK7AxAimpV9EZ9AJFIMLqv7cylQCE6/4iT6gDXQBGcgm0UjGcLZthZayn0AqsQamGSZTe8YKbPaDxjukrJW94LYCte4xcftMAB083fuLSAdPcFlth2szXPznV7rn0Uk0hhpdauLvMF07HbzP6BIaRrb3fc/d3GP8K9knRs8h3XkVnT6o+poAEzdcu7c8de3sz+IdE2gKLLhMB+89mkL6L2Qb3jQYVqj3L3nqPxBNIMDbAMMKtVsHTx+c60gHr3XTnr9oK+NydvrYjHYB1iS+l2fSZrv3D/+KTyvCdHWgAAAAAElFTkSuQmCC",Mk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACpklEQVRYCcWYPYwOURSGP38Rv4lEsZoVkq0oNEQjEopNFCQSlUIkJCqFUiLR0ah1SIROgWQLQSNBKUIhGwUNUZD4K/w/b3wnmZ1v7tx3xsw4ybsz994z57nn3J9lR6PRaCUa3BZD3Dw4FaDAs/8DLOYdtHVouDJeis6hbUPClwA7gjSBPWgFeop+oV5NwKIdoHEBTRc7+3iPjJXhb6TnWqTsv6EXqBcrZxwQrfthdBqti84unylwMLbwch7tjI6unjmwOKvRCXQMdXbLOeDvAGXb0Rk0o8a/WtXm0iaLjabNJskWoeVoB9IeeIlijNdm5mS8bBzyRyH0Xt5PoQ2FvkavDjhKXQ48RcdJtKs84LQdcGSs8pZNS7UPaeM1OnYOODIulro8gY10HEf2LxsHXJdxcQJraBxE+1H22DlgBf+J6jKWT1RGWR9F0+pMmQNWQK1l1Rqn4q5i4BBKlt4Bp4I7/Tp2M1WODjjWOFfqqvjq240mquWAVWqt8cTH9Dmm225T2dEB6xutcc6iMlV+gi8wF9xkVy8ApBou2Mk4xVD/x/KgA44Stl3jz0BftwHHxdB2Vz8sQ9V2Mo7v2mR8j4/nI0Dx6QRTqZV1LuPwU/wv6DaaKLEGZQ44Sv33i/TPmNwzXO6ir2lXDxyZaJJ1WWvsFhI4a00yroO+gnQDfcgSxw4OuC5jXSxz6IELDD8HLN+qm+st/VfRGzk0NQesTRM3V5Rbx0SZRrsp19rVxaDvaVxC88XONu9OxrHGjwBcR7XHxJ2EA9Zdexk9doM6fjnwc4JcRPYxcaDySYG1aa4hXQi9WBVYl4H+HJG8Z7uYSRl8k6BXUOtj4k4qwNqpZ9ET98Mu/O4TJPkP7y4AVTF0I61HKvGgJvAn9G5Q6hiW/Z9dH5P6A8K2bfEUA9VoAAAAAElFTkSuQmCC",kk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAHgAAAAC3G9N3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACfElEQVRYCe2XP2sVQRTFd0VsIgmpTAqx1EAStLAIpowgFmohFkEQ0+UbBEEJCpJvkE4REguVoBY2EaysLJSkSCzFQq1EMQg2z9+Jc2EyziSzb/eZJ7wLlzv37v1zzuy82aRstVr9RVGModfQGfR/kHuAfICulz5ayJzBf4oe9uNdtP4BlktlWb42TDsIKAiJs5gnltBl9jLgV31MfxHQQ0jcxsz6iV2wXgT8rRBHisAhEl+gI2HBPvkbzD0PgV/h/CgBJfEWjmOeoyKznyLQFwD/PgYiSUDJkLiOmYsV/sPYAuDvp+btSkBFkFDx6VSDDsffAF6bmJQcAkNUP0J1tbZcJ6uTr7VZPba1nxuLhblhT12ZVyDwWYkpsaLU8+04b0FX651dk5p/eBPwO67M2IiDsWAYUyNITBCfCp91yH+ZA16zs96AEiGgPzkW0SPyOyhf6D0Lge85M7IJqBkkxjELOY1r5MwBfi23PusIWTM1hsRj/IsWa9g+qwJesysRcGCXsaPoUec3ZT7SSL0rSaUjZJ15C8dYz6NNfaX1tZ1n9z9gK0lbBDQBErpapytNSyc/BPyeV2asvJ0jtN1HAyGho3QC9T9Util+TDVhXDHJZrvgVWxNta4sENDVegPtq1z8p2ALcxcCWVdmbEYtAmoIiVOYq7HmGbElwL/NyEumtH2ErKMAQEJ/ep+0WKZ9Vxe85tQm4MCuYIfRQefvZb6SoJracqB2Bxqwk7oGBUg2R1dcDen1pPZvwB/PURrHP+fHIuvVJo6O9W2UgJq638Mky34b4uxP7CvAR/81DHKz3cYJ2GSI6Gs94Pxv2E9NHRub0bO9HejtQFH8BvWooa9jGY/wAAAAAElFTkSuQmCC",Ek="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAMAAABdem3zAAAAgVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9d3yJTAAAAK3RSTlMA/Pfx6+XZ39TIwry2sJ+qpY3Ok4jNgpl8dnEGmEUfDi5hOycxmn5YGGhjcHcwqwAAAMZJREFUOMvd0e0OgiAUgGEqs9IiLdNCRQS/6v4vMGrNofJxfvfIzuZ2fugL+ls5ZYwiOPEk0ktA95vHD4Pt0/uIgr6fpCOSI7c+UfSAH4gnGtd+lVwnkgrZkSzLCnmK75QPse+XeKG0FsXRAqaWovFZIza3rU9atWmfHQ2YoWgUGkT6tl1g1GmLHiw0bYfgcrvI8xlyyqG+BwOaw3srvCjqO8zaCn/n4IvJFYdbp1C98NQDSJWiG5CxLffWIB5HUsXbFVjLqzcmgh9KFWWqZgAAAABJRU5ErkJggg==",xk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACiElEQVRYCcWYsUscQRSH74LaBE60MU2wsBALBQsbTSuEFCkCKmghYmUjdmohiIUpU6WxSZEQQrqkjZA/IEXESksREbEQBRFEOL+nOzK3O7NvvNudG/g5s29m3je/mbnz2EqlDaVer9detIEryOF2geejG2abJ9BdVDDASXQeDQyoC22hS3SDyncMZBDtInH6BC71cgFa4Cx/o6H0mXakA0U8A3xFno9oHHW5chbuGOgkoJ9ozAU0scIcA6yRdAW9Q06XBip1IWCgI+RaRa8lKaX+WPn/tgQGKM7m0BRSXdrLaBoMtJ9Ey2jATpi0q45YQ6gpMFC5QLPoZUO2Zzw8CwxQLtAikjPN29rizhjoKLAZ1IO00vpWAxRnH5B8LqWtugkZk7vVQOUCCbQPmaK6YaA6xgsGKuf4HqXPMsSxWaS3dn5lAh1kxlvPLNUN89TFOcFMfOOBhobVxWXAybnKx8ZXVDdMVMdkwEzq9hGTuOpGmf/Q7QJr81Q3JFAX5wJfauSAfnVxLvApiW9ykqtumKuOyYCr1eotE//mgEO6mnJcAX5I9j8egprUM68hnHFseoH/p/0VXZhYUqvbyDh1jBcsEOBHVJ/RnjwXWXLBApIzRz9ofkPXEgso6nGoYANJtn6b5wMTy6lb2+p0YuBX6BPx70huv68U59gmAJcbv4mO7bjVLtaxldhcvHViv+x4aDv4jF0JcS4X7wt9a+jMGlPOVluAhybwfRpLaDfpU7daHZAkCq74fy6/uTdQL+pE8tMprc6WtpqEmZJcvGk6/mU6YwVwv4AO0QlqeCNQ+hoAOl9FlA4WAPD4L19sZywg7uumFDz+CzazAJzvmHbUGvBEVKCBAa7dA6h+CDnUpjBPAAAAAElFTkSuQmCC",Dk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACXElEQVRYCcWYQSgFQRjHdyUlRU5ykCMOxMHJSXlnV4nk7OTISRw8N7koJSeKg+Ig5R3l4kBOHF8u5KD3IoVa/692XtPXzOz3Ztfu1jQz35v5ft//2++1uxNEUdQZFHC1gDlcADcg8EIR4ACp/kWbyB0eg9/Ql3KFx+Av9DW0dbS2XAJgYFJeQRv4bzgVF7+GYDgHfJH/kOU8JMVw+IP2bWg3sK2EYfiCPtPLpFgHjGNyguAyL7wkxXomLhDENtTX9ch8x0mKyW8UO59Cvwv1I/E8VScBhxqhB+MyFR5aqr+dBKxxG8NpjDYB729YmhxIwCrV3HUfDGuAexWeBKynmsMp3bOAL6M19XiVgG2K9SAGMVkFfEw3usYSsEux7rsDkznAZ9ASC08C1p1LxqNYtAS4s/AkYEmq+ZpuwOddqZeAJSptt6MEuPFJJwHbnEoCojWTpnsuAfM0moCuNe3Y0Ms3ScBpFROzywfsUqP8NR2cRLFy7uqTgqvxzRKwRI1rTR3P8KoPOEkN98nn19xA86wU24K7hNonE7jVZPSw8VS/w8epKcXKtwRsU6N8UK+vucecoPTWar0kYK7G5IzWfKIdA3hnWsBtErCuhu9X80cM9gEVv4FKwC7FlM4jAK9UBNJeArb5esYPO4BWbQtcdgnYlOozOD0E1FlAacH6/ldMtgB80I0+Y4lidY8rAGT2CSMBfwC44VNArkwkgW+x+V8+U21gKpoyVB64ok71G96H6NRHnYHkdhShjpsUOPfDl8KOmwo5YNtLVSS+m1FY+aulYAFu6rvWVyDf9wc6+wpavsNbLQAAAABJRU5ErkJggg==";function Sk(n){De(n,"svelte-1yhqqec",".tag-popover-arrow-wrapper.svelte-1yhqqec{position:absolute;transform-origin:center;background-position:center;background-repeat:no-repeat;background-size:100% 100%}.tag-popover-arrow-top.svelte-1yhqqec{width:1rem;height:0.625rem;top:0;left:50%;transform:translateX(-50%)}.tag-popover-arrow-bottom.svelte-1yhqqec{width:1rem;height:0.625rem;bottom:0;left:50%;transform:translateX(-50%)}.tag-popover-arrow-left.svelte-1yhqqec{width:0.625rem;height:1rem;top:50%;left:0;transform:translateY(-50%)}.tag-popover-arrow-right.svelte-1yhqqec{width:0.625rem;height:1rem;top:50%;right:0;transform:translateY(-50%)}")}function L0(n){let t,e,i;return{c(){t=U("div"),y(t,"class",e="tag-popover-arrow-wrapper tag-popover-arrow-"+n[0]+" theme-"+n[2]+" svelte-1yhqqec"),y(t,"style",i=`background-image: url(${n[3]})`)},m(s,r){Y(s,t,r)},p(s,r){r&5&&e!==(e="tag-popover-arrow-wrapper tag-popover-arrow-"+s[0]+" theme-"+s[2]+" svelte-1yhqqec")&&y(t,"class",e),r&8&&i!==(i=`background-image: url(${s[3]})`)&&y(t,"style",i)},d(s){s&&X(t)}}}function Lk(n){let t,e=n[1]&&L0(n);return{c(){e&&e.c(),t=Ne()},m(i,s){e&&e.m(i,s),Y(i,t,s)},p(i,[s]){i[1]?e?e.p(i,s):(e=L0(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:re,o:re,d(i){e&&e.d(i),i&&X(t)}}}function Tk(n,t,e){let i,{direction:s="bottom"}=t,{show:r=!0}=t,{theme:o="dark"}=t;return n.$$set=a=>{"direction"in a&&e(0,s=a.direction),"show"in a&&e(1,r=a.show),"theme"in a&&e(2,o=a.theme)},n.$$.update=()=>{n.$$.dirty&5&&e(3,i=(()=>{switch(o){case"dark":switch(s){case"top":return Ck;case"bottom":return Pk;case"left":return Ik;case"right":return Mk}case"light":switch(s){case"top":return Ek;case"bottom":return kk;case"left":return xk;case"right":return Dk}}})())},[s,r,o,i]}class zk extends Me{constructor(t){super(),Ie(this,t,Tk,Lk,Pe,{direction:0,show:1,theme:2},Sk)}}function Ok(n){De(n,"svelte-1d6rvbz",".icon-container.svelte-1d6rvbz{width:3.25rem;height:3.25rem;background-color:var(--bg-color);border-radius:100%;display:flex;align-items:center;justify-content:center;z-index:2}")}function jk(n){let t,e,i,s,r,o,a,l,c,h;return{c(){t=U("div"),e=ye("svg"),i=ye("defs"),s=ye("linearGradient"),r=ye("stop"),o=ye("stop"),a=ye("linearGradient"),l=ye("stop"),c=ye("stop"),h=ye("path"),y(r,"stop-color",n[1]),y(r,"offset","0%"),y(o,"stop-color",n[1]),y(o,"stop-opacity",".5"),y(o,"offset","100%"),y(s,"x1","53.2804066%"),y(s,"y1","100%"),y(s,"x2","64.4764442%"),y(s,"y2","2.52981206%"),y(s,"id","video-icon-gradient-a"),y(l,"stop-color",n[1]),y(l,"offset","0%"),y(c,"stop-color",n[1]),y(c,"stop-opacity","0"),y(c,"offset","100%"),y(a,"x1","50%"),y(a,"y1","-5.89066117%"),y(a,"x2","60.3018289%"),y(a,"y2","32.0415872%"),y(a,"id","video-icon-gradient-b"),y(h,"d","M8.0883645,5.35 C8.27319183,5.35 8.45426937,5.40368245 8.61098984,5.50477659 L20.4341152,13.1314044 C20.6662958,13.2811749 20.8173539,13.5140616 20.8743923,13.7691613 C20.9300733,14.0181899 20.8962437,14.2885953 20.7601668,14.5243865 L8.61098984,22.4950731 C8.38014238,22.6439836 8.11267156,22.6823641 7.86680489,22.6238045 C7.62023287,22.5650769 7.39563144,22.408984 7.25097187,22.1700998 C7.15226844,22.0071054 7.1,21.8187509 7.1,21.6265526 L7.1,6.37329702 C7.1,6.09035119 7.2108925,5.83405961 7.39059316,5.64859123 C7.56916841,5.46428435 7.81578724,5.35 8.0883645,5.35 Z"),y(h,"fill","url(#video-icon-gradient-a)"),y(h,"fill-rule","nonzero"),y(h,"stroke","url(#video-icon-gradient-b)"),y(h,"stroke-width",".2"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"viewBox","0 0 28 28"),y(e,"width",n[0]),y(e,"height",n[0]),y(t,"class","icon-container svelte-1d6rvbz"),Q(t,"--bg-color",n[2])},m(d,f){Y(d,t,f),V(t,e),V(e,i),V(i,s),V(s,r),V(s,o),V(i,a),V(a,l),V(a,c),V(e,h)},p(d,[f]){f&2&&y(r,"stop-color",d[1]),f&2&&y(o,"stop-color",d[1]),f&2&&y(l,"stop-color",d[1]),f&2&&y(c,"stop-color",d[1]),f&1&&y(e,"width",d[0]),f&1&&y(e,"height",d[0]),f&4&&Q(t,"--bg-color",d[2])},i:re,o:re,d(d){d&&X(t)}}}function Vk(n,t,e){let{size:i="28"}=t,{color:s="#ffffff"}=t,{bgColor:r="#0000004d"}=t;return n.$$set=o=>{"size"in o&&e(0,i=o.size),"color"in o&&e(1,s=o.color),"bgColor"in o&&e(2,r=o.bgColor)},[i,s,r]}class T0 extends Me{constructor(t){super(),Ie(this,t,Vk,jk,Pe,{size:0,color:1,bgColor:2},Ok)}}function Bk(n){De(n,"svelte-1d6rvbz",".icon-container.svelte-1d6rvbz{width:3.25rem;height:3.25rem;background-color:var(--bg-color);border-radius:100%;display:flex;align-items:center;justify-content:center;z-index:2}")}function _k(n){let t,e,i,s,r,o,a,l,c,h,d,f,g,p,m,v;return{c(){t=U("div"),e=ye("svg"),i=ye("defs"),s=ye("linearGradient"),r=ye("stop"),o=ye("stop"),a=ye("linearGradient"),l=ye("stop"),c=ye("stop"),h=ye("linearGradient"),d=ye("stop"),f=ye("stop"),g=ye("g"),p=ye("path"),m=ye("path"),v=ye("path"),y(r,"stop-color","#FFF"),y(r,"offset","0%"),y(o,"stop-color","#FFF"),y(o,"stop-opacity",".5"),y(o,"offset","100%"),y(s,"x1","54.417371%"),y(s,"y1","106.742364%"),y(s,"x2","72.619444%"),y(s,"y2","8.15444328%"),y(s,"id","xmfpi7cnc__sgsykm5x9a"),y(l,"stop-color","#FFF"),y(l,"offset","0%"),y(c,"stop-color","#FFF"),y(c,"stop-opacity","0"),y(c,"offset","100%"),y(a,"x1","50%"),y(a,"y1",".73169217%"),y(a,"x2","66.0966077%"),y(a,"y2","34.1694374%"),y(a,"id","xmfpi7cnc__tjqs3iy6kb"),y(d,"stop-color","#FFF"),y(d,"offset","0%"),y(f,"stop-color","#FFF"),y(f,"stop-opacity",".5"),y(f,"offset","100%"),y(h,"x1","55.1256353%"),y(h,"y1","273.650936%"),y(h,"x2","55.1256353%"),y(h,"y2","81.7206937%"),y(h,"id","xmfpi7cnc__rs5hxavsyc"),y(p,"d","M18,5.4 L18,13.4 C18,15.3329966 13.9705627,16.9 9,16.9 C4.02943725,16.9 0,15.3329966 0,13.4 L0,5.4 C0,7.33299662 4.02943725,8.9 9,8.9 C13.8670094,8.9 17.8316983,7.39760831 17.9947813,5.52032488 L18,5.4 Z M4.9603418,4.9 C5.2193418,4.9 5.4643418,4.837 5.6883418,4.704 C6.1293418,4.445 6.4093418,3.976 6.4093418,3.444 C6.4093418,3.003 6.2203418,2.611 5.9053418,2.359 C6.1643418,2.1 6.3393418,1.729 6.3393418,1.337 C6.3393418,1.092 6.2763418,0.861 6.1573418,0.658 C5.9053418,0.245 5.4643418,0 4.9603418,0 C4.7223418,0 4.4983418,0.056 4.2953418,0.175 C3.8753418,0.413 3.6163418,0.84 3.6163418,1.337 L3.6163418,1.372 L4.3373418,1.372 L4.3373418,1.337 C4.3373418,1.022 4.6313418,0.721 4.9603418,0.721 C5.3173418,0.721 5.6113418,1.008 5.6113418,1.337 C5.6113418,1.708 5.3243418,1.995 4.9603418,1.995 L4.8203418,1.995 L4.8203418,2.723 L4.9603418,2.723 C5.3593418,2.723 5.6883418,3.045 5.6883418,3.444 C5.6883418,3.843 5.3593418,4.179 4.9603418,4.179 C4.5613418,4.179 4.2323418,3.843 4.2323418,3.444 L4.2323418,3.339 L3.5043418,3.339 L3.5043418,3.444 C3.5043418,3.71 3.5673418,3.955 3.7003418,4.172 C3.9593418,4.62 4.4283418,4.9 4.9603418,4.9 Z M8.6073418,4.9 C8.8803418,4.9 9.1253418,4.83 9.3563418,4.697 C9.8043418,4.424 10.0983418,3.934 10.0983418,3.395 C10.0983418,3.122 10.0283418,2.877 9.8953418,2.646 C9.6223418,2.198 9.1463418,1.904 8.6073418,1.904 C8.5303418,1.904 8.4743418,1.904 8.4393418,1.911 L9.3143418,0 L8.5093418,0 L7.2353418,2.793 C7.1443418,2.982 7.1023418,3.185 7.1023418,3.395 C7.1023418,3.668 7.1723418,3.92 7.3053418,4.151 C7.5783418,4.606 8.0543418,4.9 8.6073418,4.9 Z M8.6073418,4.158 C8.1803418,4.158 7.8443418,3.822 7.8443418,3.395 C7.8443418,2.975 8.1873418,2.625 8.6073418,2.625 C9.0273418,2.625 9.3773418,2.975 9.3773418,3.395 C9.3773418,3.815 9.0273418,4.158 8.6073418,4.158 Z M12.2613418,4.907 C12.7653418,4.907 13.2133418,4.634 13.4653418,4.207 C13.5913418,3.997 13.6543418,3.766 13.6543418,3.514 L13.6543418,3.514 L13.6543418,1.428 C13.6543418,0.917 13.3813418,0.448 12.9613418,0.189 C12.7443418,0.063 12.5133418,0 12.2613418,0 C11.7503418,0 11.2813418,0.273 11.0293418,0.714 C10.8963418,0.931 10.8333418,1.169 10.8333418,1.428 L10.8333418,1.428 L10.8333418,3.514 C10.8333418,4.018 11.1063418,4.466 11.5473418,4.718 C11.7643418,4.844 12.0023418,4.907 12.2613418,4.907 Z M12.2613418,4.186 C11.8903418,4.186 11.5683418,3.885 11.5683418,3.514 L11.5683418,3.514 L11.5683418,1.428 C11.5683418,1.029 11.8763418,0.735 12.2613418,0.735 C12.6323418,0.735 12.9123418,1.029 12.9123418,1.428 L12.9123418,1.428 L12.9123418,3.514 C12.9123418,3.899 12.6323418,4.186 12.2613418,4.186 Z M15.4753809,2.07333984 C15.7488184,2.07333984 15.9886458,1.97478841 16.1948633,1.77768555 C16.4010807,1.58058268 16.5041895,1.33391927 16.5041895,1.03769531 C16.5041895,0.750585938 16.4050684,0.507340495 16.2068262,0.307958984 C16.008584,0.108577474 15.7647689,0.00888671875 15.4753809,0.00888671875 C15.1928288,0.00888671875 14.9495833,0.109147135 14.7456445,0.309667969 C14.5417057,0.510188802 14.4397363,0.756282552 14.4397363,1.04794922 C14.4397363,1.32138672 14.5365788,1.56064453 14.7302637,1.76572266 C14.9239486,1.97080078 15.172321,2.07333984 15.4753809,2.07333984 Z M15.4753809,1.70078125 C15.2930892,1.70078125 15.137002,1.63583984 15.0071191,1.50595703 C14.8772363,1.37607422 14.8122949,1.22226563 14.8122949,1.04453125 C14.8122949,0.859960938 14.877806,0.703304036 15.0088281,0.574560547 C15.1398503,0.445817057 15.2953678,0.381445313 15.4753809,0.381445313 C15.6553939,0.381445313 15.8097721,0.446386719 15.9385156,0.576269531 C16.0672591,0.706152344 16.1316309,0.859960938 16.1316309,1.03769531 C16.1316309,1.22226563 16.0661198,1.37892253 15.9350977,1.50766602 C15.8040755,1.63640951 15.6508366,1.70078125 15.4753809,1.70078125 Z"),y(p,"fill","url(#xmfpi7cnc__sgsykm5x9a)"),y(p,"transform","translate(3 3.1)"),y(m,"d","M18,5.4 L18,13.4 C18,15.3329966 13.9705627,16.9 9,16.9 C4.02943725,16.9 0,15.3329966 0,13.4 L0,5.4 C0,7.33299662 4.02943725,8.9 9,8.9 C13.8670094,8.9 17.8316983,7.39760831 17.9947813,5.52032488 L18,5.4 Z M17.8,6.499 L17.7806846,6.52607583 C16.6077599,8.0452893 13.108676,9.1 9,9.1 C4.87821133,9.1 1.38089175,8.04047836 0.214303539,6.51942435 L0.2,6.5 L0.2,13.4 C0.2,15.1332693 3.96631253,16.6348245 8.69056715,16.6979358 L9,16.7 C13.8681548,16.7 17.8,15.1709491 17.8,13.4 L17.8,6.499 Z M12.2613418,0 C12.5133418,0 12.7443418,0.063 12.9613418,0.189 C13.3813418,0.448 13.6543418,0.917 13.6543418,1.428 L13.6543418,3.514 L13.6467818,3.66268 C13.6266218,3.85756 13.5661418,4.039 13.4653418,4.207 C13.2133418,4.634 12.7653418,4.907 12.2613418,4.907 C12.0023418,4.907 11.7643418,4.844 11.5473418,4.718 C11.1063418,4.466 10.8333418,4.018 10.8333418,3.514 L10.8333418,1.428 L10.8409578,1.27512 C10.8613418,1.07464 10.9229418,0.8876 11.0293418,0.714 C11.2813418,0.273 11.7503418,0 12.2613418,0 Z M9.3143418,0 L8.4393418,1.911 C8.4743418,1.904 8.5303418,1.904 8.6073418,1.904 C9.1463418,1.904 9.6223418,2.198 9.8953418,2.646 C10.0283418,2.877 10.0983418,3.122 10.0983418,3.395 C10.0983418,3.934 9.8043418,4.424 9.3563418,4.697 C9.1253418,4.83 8.8803418,4.9 8.6073418,4.9 C8.0543418,4.9 7.5783418,4.606 7.3053418,4.151 C7.1723418,3.92 7.1023418,3.668 7.1023418,3.395 C7.1023418,3.185 7.1443418,2.982 7.2353418,2.793 L8.5093418,0 L9.3143418,0 Z M4.9603418,0 C5.4643418,0 5.9053418,0.245 6.1573418,0.658 C6.2763418,0.861 6.3393418,1.092 6.3393418,1.337 C6.3393418,1.729 6.1643418,2.1 5.9053418,2.359 C6.2203418,2.611 6.4093418,3.003 6.4093418,3.444 C6.4093418,3.976 6.1293418,4.445 5.6883418,4.704 C5.4643418,4.837 5.2193418,4.9 4.9603418,4.9 C4.4283418,4.9 3.9593418,4.62 3.7003418,4.172 C3.5673418,3.955 3.5043418,3.71 3.5043418,3.444 L3.5043418,3.339 L4.2323418,3.339 L4.2323418,3.444 C4.2323418,3.843 4.5613418,4.179 4.9603418,4.179 C5.3593418,4.179 5.6883418,3.843 5.6883418,3.444 C5.6883418,3.045 5.3593418,2.723 4.9603418,2.723 L4.8203418,2.723 L4.8203418,1.995 L4.9603418,1.995 C5.3243418,1.995 5.6113418,1.708 5.6113418,1.337 C5.6113418,1.008 5.3173418,0.721 4.9603418,0.721 C4.6313418,0.721 4.3373418,1.022 4.3373418,1.337 L4.3373418,1.372 L3.6163418,1.372 L3.6163418,1.337 C3.6163418,0.84 3.8753418,0.413 4.2953418,0.175 C4.4983418,0.056 4.7223418,0 4.9603418,0 Z M12.2613418,0.2 C11.8228535,0.2 11.4197491,0.433900098 11.199862,0.818512412 C11.0880596,1.00092699 11.0333418,1.20205175 11.0333418,1.428 L11.0333418,3.514 C11.0333418,3.94076817 11.2630074,4.32517296 11.6477689,4.54504221 C11.8340054,4.65317955 12.0373271,4.707 12.2613418,4.707 C12.685768,4.707 13.0724302,4.4792625 13.2938432,4.10410085 C13.4010506,3.92542185 13.4543418,3.73002084 13.4543418,3.514 L13.4543418,1.428 C13.4543418,0.993663172 13.2236099,0.585702454 12.8609147,0.361957789 C12.673578,0.253181671 12.4771013,0.2 12.2613418,0.2 Z M4.9603418,0.2 C4.75293536,0.2 4.56476024,0.248895899 4.39394431,0.349004437 C4.11167513,0.508956972 3.91907748,0.764507622 3.84741774,1.06716925 L3.829,1.171 L4.157,1.171 L4.1635929,1.14325273 C4.24904453,0.829489942 4.53273472,0.571946496 4.86075855,0.527713496 L4.9603418,0.521 C5.42264158,0.521 5.8113418,0.89242465 5.8113418,1.337 C5.8113418,1.78012728 5.4916909,2.13625035 5.06824166,2.18841646 L5.02,2.191 L5.02,2.526 L5.06813812,2.52919506 C5.49271718,2.57829524 5.83232975,2.91371045 5.88206553,3.33657664 L5.8883418,3.444 C5.8883418,3.95419336 5.46908818,4.379 4.9603418,4.379 C4.48793444,4.379 4.09269177,4.01271264 4.03863877,3.55189651 L4.037,3.539 L3.709,3.539 L3.71100539,3.58140766 C3.72435814,3.71571552 3.75785509,3.84083114 3.8121867,3.95771875 L3.87348876,4.07189941 C4.09978468,4.46333019 4.50573915,4.7 4.9603418,4.7 C5.18808795,4.7 5.39698916,4.6443932 5.58705743,4.53154283 C5.97364119,4.30450157 6.2093418,3.89738234 6.2093418,3.444 C6.2093418,3.06849319 6.05147644,2.73203269 5.78040279,2.51517376 L5.60591531,2.37558378 L5.76392044,2.21757864 C5.99772857,1.98377051 6.1393418,1.65985061 6.1393418,1.337 C6.1393418,1.12891147 6.08649325,0.932616859 5.98661394,0.762172929 C5.77036899,0.407771483 5.39348118,0.2 4.9603418,0.2 Z M9.002,0.2 L8.638,0.2 L7.41554213,2.87976312 C7.3587619,2.9976913 7.32347683,3.1241874 7.30938306,3.25833536 L7.3023418,3.395 C7.3023418,3.62951354 7.36137928,3.8474981 7.47684038,4.04810085 C7.72111603,4.45522692 8.1383802,4.7 8.6073418,4.7 C8.83989632,4.7 9.05100342,4.64201988 9.25226776,4.52621184 C9.649754,4.28399367 9.8983418,3.85400396 9.8983418,3.395 C9.8983418,3.16244548 9.84036168,2.95133838 9.72455364,2.75007403 C9.48026964,2.34919774 9.06277079,2.104 8.6073418,2.104 L8.51445661,2.10475811 C8.49442789,2.10527049 8.48389809,2.10604952 8.47856502,2.10711614 L8.0943966,2.18394982 L8.25749731,1.82773787 L9.002,0.2 Z M12.2613418,0.535 C12.7468356,0.535 13.1123418,0.922491584 13.1123418,1.428 L13.1123418,3.514 C13.1123418,4.00744192 12.7448365,4.386 12.2613418,4.386 C11.7777279,4.386 11.3683418,3.99355405 11.3683418,3.514 L11.3683418,1.428 C11.3683418,0.922753743 11.7615956,0.535 12.2613418,0.535 Z M8.6073418,2.425 C9.13779875,2.425 9.5773418,2.86454305 9.5773418,3.395 C9.5773418,3.92471151 9.13856864,4.358 8.6073418,4.358 C8.06988485,4.358 7.6443418,3.93245695 7.6443418,3.395 C7.6443418,2.86377316 8.07763029,2.425 8.6073418,2.425 Z M12.2613418,0.735 C11.8763418,0.735 11.5683418,1.029 11.5683418,1.428 L11.5683418,3.514 L11.5761202,3.61327273 C11.6272922,3.93723967 11.9240691,4.186 12.2613418,4.186 C12.6323418,4.186 12.9123418,3.899 12.9123418,3.514 L12.9123418,1.428 L12.9055416,1.32192712 C12.8606806,0.977975207 12.5986145,0.735 12.2613418,0.735 Z M8.6073418,2.625 C8.1873418,2.625 7.8443418,2.975 7.8443418,3.395 C7.8443418,3.822 8.1803418,4.158 8.6073418,4.158 C9.0273418,4.158 9.3773418,3.815 9.3773418,3.395 C9.3773418,2.975 9.0273418,2.625 8.6073418,2.625 Z M15.4753809,0.00888671875 C15.7647689,0.00888671875 16.008584,0.108577474 16.2068262,0.307958984 C16.4050684,0.507340495 16.5041895,0.750585938 16.5041895,1.03769531 C16.5041895,1.33391927 16.4010807,1.58058268 16.1948633,1.77768555 C15.9886458,1.97478841 15.7488184,2.07333984 15.4753809,2.07333984 C15.172321,2.07333984 14.9239486,1.97080078 14.7302637,1.76572266 C14.5365788,1.56064453 14.4397363,1.32138672 14.4397363,1.04794922 C14.4397363,0.756282552 14.5417057,0.510188802 14.7456445,0.309667969 C14.9495833,0.109147135 15.1928288,0.00888671875 15.4753809,0.00888671875 Z M15.4753809,0.381445313 C15.2953678,0.381445313 15.1398503,0.445817057 15.0088281,0.574560547 C14.877806,0.703304036 14.8122949,0.859960938 14.8122949,1.04453125 C14.8122949,1.22226563 14.8772363,1.37607422 15.0071191,1.50595703 C15.137002,1.63583984 15.2930892,1.70078125 15.4753809,1.70078125 C15.6508366,1.70078125 15.8040755,1.63640951 15.9350977,1.50766602 C16.0661198,1.37892253 16.1316309,1.22226563 16.1316309,1.03769531 C16.1316309,0.859960938 16.0672591,0.706152344 15.9385156,0.576269531 C15.8097721,0.446386719 15.6553939,0.381445313 15.4753809,0.381445313 Z"),y(m,"fill","url(#xmfpi7cnc__tjqs3iy6kb)"),y(m,"transform","translate(3 3.1)"),y(v,"d","M3.00030998,2.79110119 L3.00030998,8.00889881 C1.15888197,7.36802147 0,6.43664128 0,5.4 C0,4.36335872 1.15888197,3.43197853 3.00030998,2.79110119 Z M15.0006975,2.79145187 C16.8415407,3.43231826 18,4.36354778 18,5.4 C18,6.43645222 16.8415407,7.36768174 15.0006975,8.00854813 Z"),y(v,"fill","url(#xmfpi7cnc__rs5hxavsyc)"),y(v,"transform","translate(3 3.1)"),y(g,"fill-rule","nonzero"),y(g,"fill","none"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"viewBox","0 0 24 24"),y(e,"width",n[0]),y(e,"height",n[0]),y(t,"class","icon-container svelte-1d6rvbz"),Q(t,"--bg-color",n[1])},m(b,w){Y(b,t,w),V(t,e),V(e,i),V(i,s),V(s,r),V(s,o),V(i,a),V(a,l),V(a,c),V(i,h),V(h,d),V(h,f),V(e,g),V(g,p),V(g,m),V(g,v)},p(b,[w]){w&1&&y(e,"width",b[0]),w&1&&y(e,"height",b[0]),w&2&&Q(t,"--bg-color",b[1])},i:re,o:re,d(b){b&&X(t)}}}function Rk(n,t,e){let{size:i="28"}=t,{color:s="#ffffff"}=t,{bgColor:r="#0000004d"}=t;return n.$$set=o=>{"size"in o&&e(0,i=o.size),"color"in o&&e(2,s=o.color),"bgColor"in o&&e(1,r=o.bgColor)},[i,r,s]}class Fk extends Me{constructor(t){super(),Ie(this,t,Rk,_k,Pe,{size:0,color:2,bgColor:1},Bk)}}function Nk(n){De(n,"svelte-u1dbzb",'@charset "UTF-8";.tag-popup.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{position:absolute;pointer-events:auto;padding:0.625rem;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;transform-origin:center}.tag-popup-top.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-50%, -100%);left:50%}.tag-popup-bottom.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-50%, 0);left:50%}.tag-popup-left.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-100%, -50%);top:50%}.tag-popup-right.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(0, -50%);top:50%}.tag-popup-top-left.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(calc(2.625rem - 100%), -100%)}.tag-popup-top-right.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-2.625rem, -100%)}.tag-popup-bottom-left.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(calc(2.625rem - 100%), 0)}.tag-popup-bottom-right.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-2.625rem, 0)}.tag-popup-left-top.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-100%, -2.625rem)}.tag-popup-left-bottom.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-100%, calc(2.625rem - 100%))}.tag-popup-right-top.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(0, -2.625rem)}.tag-popup-right-bottom.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(0, calc(2.625rem - 100%))}.tag-popup-content.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{position:relative;pointer-events:auto;cursor:pointer;padding:1.25rem;border-radius:0.375rem;max-width:17.5rem;width:17.5rem;background:rgba(0, 0, 0, 0.7490196078)}.tag-popup-top.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-top-left.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-top-right.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb{box-shadow:0.03125rem 0 0 0 rgba(255, 255, 255, 0.3), -0.03125rem 0 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-bottom.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-bottom-left.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-bottom-right.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb{box-shadow:0.03125rem 0 0 0 rgba(255, 255, 255, 0.3), -0.03125rem 0 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-left.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-left-top.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-left-bottom.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb{box-shadow:0 0.03125rem 0 0 rgba(255, 255, 255, 0.3), 0 -0.03125rem 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-right.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-right-top.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-right-bottom.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb{box-shadow:0 0.03125rem 0 0 rgba(255, 255, 255, 0.3), 0 -0.03125rem 0 0 rgba(255, 255, 255, 0.3)}.light.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{background:#ffffff}.tag-popup-title.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{margin:0;font-size:1rem;font-weight:600;line-height:1.375rem;letter-spacing:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;color:#ffffff}.light.svelte-u1dbzb .tag-popup-title.svelte-u1dbzb.svelte-u1dbzb{color:rgba(0, 0, 0, 0.8509803922)}.tag-popup-description.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{margin:0;font-size:0.875rem;font-weight:400;color:#ffffff;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.light.svelte-u1dbzb .tag-popup-description.svelte-u1dbzb.svelte-u1dbzb{color:rgba(0, 0, 0, 0.8509803922)}.tag-popup-tags.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{display:flex;align-items:center;margin:0;margin-bottom:0}.tag-popup-tags.svelte-u1dbzb .tag-popup-tag.svelte-u1dbzb+.tag-popup-tag.svelte-u1dbzb{margin-left:0.25rem}.tag-popup-tag.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{padding:0.125rem 0.25rem;display:flex;align-items:center;justify-content:center;border-radius:0.25rem;font-size:0.75rem;line-height:1.125rem;letter-spacing:0;border-radius:0.125rem;max-width:7.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tag-popup-tag-primary.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{color:#ffffff;background-image:linear-gradient(90deg, #ead09a 0%, #e0cca3 100%)}.light.svelte-u1dbzb .tag-popup-tag-primary.svelte-u1dbzb.svelte-u1dbzb{color:#946700;background-image:linear-gradient(90deg, #ead09a 0%, #e0cca3 100%)}.tag-popup-tag-secondary.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{color:#ffffff;background:rgba(255, 255, 255, 0.1490196078)}.light.svelte-u1dbzb .tag-popup-tag-secondary.svelte-u1dbzb.svelte-u1dbzb{color:rgba(0, 0, 0, 0.5019607843);background:rgba(0, 0, 0, 0.0588235294)}.tag-popup-price.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{font-family:DINAlternate-Bold;font-weight:700;font-size:1.25rem;color:#ae7900;letter-spacing:0;text-align:center;display:flex;justify-content:flex-start;align-items:center;width:100%;margin:0}.tag-popup-media.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{width:15rem;height:10rem;margin:0 auto;overflow:hidden;border-radius:0.25rem;display:flex;align-items:center;justify-content:center;position:relative}.tag-popup-media.svelte-u1dbzb img.svelte-u1dbzb.svelte-u1dbzb{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;display:block}.tag-popup-media-type.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);z-index:2}.tag-popup-media-index.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{position:absolute;right:0.375rem;bottom:0.375rem;padding:0.0625rem 0.25rem;background:rgba(0, 0, 0, 0.5);border-radius:0.125rem;font-weight:bold;font-size:0.75rem;color:#ffffff;letter-spacing:0;line-height:1.125rem}.iframe-overlay.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{position:absolute;top:0;left:0;width:100%;height:100%;background:transparent;z-index:10}.tag-popup-content.svelte-u1dbzb>.svelte-u1dbzb+.svelte-u1dbzb{margin-top:0.5rem}.tag-popup-content.svelte-u1dbzb>.svelte-u1dbzb.svelte-u1dbzb:first-child{margin-top:0 !important}')}const Gk=n=>({}),z0=n=>({}),Hk=n=>({}),O0=n=>({});function j0(n,t,e){const i=n.slice();return i[1]=t[e],i}function V0(n,t,e){const i=n.slice();return i[1]=t[e],i}function B0(n){let t,e;return{c(){t=U("h3"),e=Ve(n[4]),y(t,"class","tag-popup-title svelte-u1dbzb")},m(i,s){Y(i,t,s),V(t,e)},p(i,s){s[0]&16&&Ge(e,i[4])},d(i){i&&X(t)}}}function _0(n){let t,e,i=n[3],s=[];for(let a=0;a<i.length;a+=1)s[a]=R0(V0(n,i,a));let r=n[9],o=[];for(let a=0;a<r.length;a+=1)o[a]=F0(j0(n,r,a));return{c(){t=U("div");for(let a=0;a<s.length;a+=1)s[a].c();e=ae();for(let a=0;a<o.length;a+=1)o[a].c();y(t,"class","tag-popup-tags svelte-u1dbzb")},m(a,l){Y(a,t,l);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(t,null);V(t,e);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(t,null)},p(a,l){if(l[0]&8){i=a[3];let c;for(c=0;c<i.length;c+=1){const h=V0(a,i,c);s[c]?s[c].p(h,l):(s[c]=R0(h),s[c].c(),s[c].m(t,e))}for(;c<s.length;c+=1)s[c].d(1);s.length=i.length}if(l[0]&512){r=a[9];let c;for(c=0;c<r.length;c+=1){const h=j0(a,r,c);o[c]?o[c].p(h,l):(o[c]=F0(h),o[c].c(),o[c].m(t,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},d(a){a&&X(t),ci(s,a),ci(o,a)}}}function R0(n){let t,e=n[1]+"",i;return{c(){t=U("div"),i=Ve(e),y(t,"class","tag-popup-tag tag-popup-tag-primary svelte-u1dbzb")},m(s,r){Y(s,t,r),V(t,i)},p(s,r){r[0]&8&&e!==(e=s[1]+"")&&Ge(i,e)},d(s){s&&X(t)}}}function F0(n){let t,e=n[1]+"",i;return{c(){t=U("div"),i=Ve(e),y(t,"class","tag-popup-tag tag-popup-tag-secondary svelte-u1dbzb")},m(s,r){Y(s,t,r),V(t,i)},p(s,r){r[0]&512&&e!==(e=s[1]+"")&&Ge(i,e)},d(s){s&&X(t)}}}function Wk(n){let t,e,i,s,r,o,a,l;o=new T0({});let c=n[11]>1&&N0(n);return{c(){t=U("div"),e=U("video"),s=ae(),r=U("div"),Ae(o.$$.fragment),a=ae(),c&&c.c(),ft(e.src,i=n[1].data.mediaData[0].url)||y(e,"src",i),y(e,"class","tag-popup-video-fallback"),e.controls=!1,e.autoplay=!1,e.muted=!0,e.loop=!0,y(e,"preload","metadata"),y(e,"disablepictureinpicture",""),e.playsInline=!0,Q(e,"width","100%"),Q(e,"height","100%"),Q(e,"object-fit","cover"),y(r,"class","tag-popup-media-type svelte-u1dbzb"),y(t,"class","tag-popup-media svelte-u1dbzb")},m(h,d){Y(h,t,d),V(t,e),V(t,s),V(t,r),ge(o,r,null),V(t,a),c&&c.m(t,null),l=!0},p(h,d){(!l||d[0]&2&&!ft(e.src,i=h[1].data.mediaData[0].url))&&y(e,"src",i),h[11]>1?c?c.p(h,d):(c=N0(h),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i(h){l||(N(o.$$.fragment,h),l=!0)},o(h){Z(o.$$.fragment,h),l=!1},d(h){h&&X(t),ve(o),c&&c.d()}}}function Uk(n){let t,e,i,s,r,o,a,l,c;const h=[Yk,Xk],d=[];function f(p,m){return p[6]?0:p[14]?1:-1}~(o=f(n))&&(a=d[o]=h[o](n));let g=n[11]>1&&G0(n);return{c(){t=U("div"),e=U("img"),r=ae(),a&&a.c(),l=ae(),g&&g.c(),ft(e.src,i=n[15])||y(e,"src",i),y(e,"alt",s=n[4]||""),y(e,"draggable","false"),y(e,"class","svelte-u1dbzb"),y(t,"class","tag-popup-media svelte-u1dbzb")},m(p,m){Y(p,t,m),V(t,e),V(t,r),~o&&d[o].m(t,null),V(t,l),g&&g.m(t,null),c=!0},p(p,m){(!c||m[0]&32768&&!ft(e.src,i=p[15]))&&y(e,"src",i),(!c||m[0]&16&&s!==(s=p[4]||""))&&y(e,"alt",s);let v=o;o=f(p),o!==v&&(a&&(Ee(),Z(d[v],1,1,()=>{d[v]=null}),xe()),~o?(a=d[o],a||(a=d[o]=h[o](p),a.c()),N(a,1),a.m(t,l)):a=null),p[11]>1?g?g.p(p,m):(g=G0(p),g.c(),g.m(t,null)):g&&(g.d(1),g=null)},i(p){c||(N(a),c=!0)},o(p){Z(a),c=!1},d(p){p&&X(t),~o&&d[o].d(),g&&g.d()}}}function Qk(n){let t,e,i,s,r,o,a=n[11]>1&&H0(n);return{c(){t=U("div"),e=U("iframe"),s=ae(),r=U("div"),o=ae(),a&&a.c(),y(e,"title",n[12]),ft(e.src,i=n[13])||y(e,"src",i),y(e,"class","tag-popup-video-iframe"),y(e,"frameborder","0"),y(e,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),y(e,"referrerpolicy","strict-origin-when-cross-origin"),e.allowFullscreen=!0,Q(e,"width","100%"),Q(e,"height","100%"),Q(e,"position","absolute"),Q(e,"top","0"),Q(e,"left","0"),y(r,"class","iframe-overlay svelte-u1dbzb"),y(t,"class","tag-popup-media svelte-u1dbzb")},m(l,c){Y(l,t,c),V(t,e),V(t,s),V(t,r),V(t,o),a&&a.m(t,null)},p(l,c){c[0]&4096&&y(e,"title",l[12]),c[0]&8192&&!ft(e.src,i=l[13])&&y(e,"src",i),l[11]>1?a?a.p(l,c):(a=H0(l),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},i:re,o:re,d(l){l&&X(t),a&&a.d()}}}function N0(n){let t,e,i,s;return{c(){t=U("div"),e=Ve(n[10]),i=Ve("/"),s=Ve(n[11]),y(t,"class","tag-popup-media-index svelte-u1dbzb")},m(r,o){Y(r,t,o),V(t,e),V(t,i),V(t,s)},p(r,o){o[0]&1024&&Ge(e,r[10]),o[0]&2048&&Ge(s,r[11])},d(r){r&&X(t)}}}function Xk(n){let t,e,i;return e=new Fk({}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","tag-popup-media-type svelte-u1dbzb")},m(s,r){Y(s,t,r),ge(e,t,null),i=!0},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e)}}}function Yk(n){let t,e,i;return e=new T0({}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","tag-popup-media-type svelte-u1dbzb")},m(s,r){Y(s,t,r),ge(e,t,null),i=!0},i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){Z(e.$$.fragment,s),i=!1},d(s){s&&X(t),ve(e)}}}function G0(n){let t,e,i,s;return{c(){t=U("div"),e=Ve(n[10]),i=Ve("/"),s=Ve(n[11]),y(t,"class","tag-popup-media-index svelte-u1dbzb")},m(r,o){Y(r,t,o),V(t,e),V(t,i),V(t,s)},p(r,o){o[0]&1024&&Ge(e,r[10]),o[0]&2048&&Ge(s,r[11])},d(r){r&&X(t)}}}function H0(n){let t,e,i,s;return{c(){t=U("div"),e=Ve(n[10]),i=Ve("/"),s=Ve(n[11]),y(t,"class","tag-popup-media-index svelte-u1dbzb")},m(r,o){Y(r,t,o),V(t,e),V(t,i),V(t,s)},p(r,o){o[0]&1024&&Ge(e,r[10]),o[0]&2048&&Ge(s,r[11])},d(r){r&&X(t)}}}function W0(n){let t,e;return{c(){t=U("div"),e=Ve(n[16]),y(t,"class","tag-popup-description svelte-u1dbzb")},m(i,s){Y(i,t,s),V(t,e)},p(i,s){s[0]&65536&&Ge(e,i[16])},d(i){i&&X(t)}}}function U0(n){let t,e,i,s,r=n[7]&&Q0(n);return{c(){t=U("div"),r&&r.c(),e=ae(),i=U("span"),s=Ve(n[8]),y(i,"class","tag-popup-price-value"),y(t,"class","tag-popup-price svelte-u1dbzb")},m(o,a){Y(o,t,a),r&&r.m(t,null),V(t,e),V(t,i),V(i,s)},p(o,a){o[7]?r?r.p(o,a):(r=Q0(o),r.c(),r.m(t,e)):r&&(r.d(1),r=null),a[0]&256&&Ge(s,o[8])},d(o){o&&X(t),r&&r.d()}}}function Q0(n){let t,e;return{c(){t=U("span"),e=Ve(n[7]),y(t,"class","tag-popup-price-unit")},m(i,s){Y(i,t,s),V(t,e)},p(i,s){s[0]&128&&Ge(e,i[7])},d(i){i&&X(t)}}}function Zk(n){let t,e,i,s,r,o,a,l,c,h,d,f,g,p=n[4]&&B0(n),m=n[2]&&(n[3].length>0||n[9].length>0)&&_0(n);const v=[Qk,Uk,Wk],b=[];function w(O,A){var C;return O[5]&&O[13]?0:O[15]?1:O[6]&&O[1].data.mediaData&&((C=O[1].data.mediaData[0])!=null&&C.url)?2:-1}~(r=w(n))&&(o=b[r]=v[r](n));let x=n[16]&&W0(n),E=n[8]&&U0(n);const L=n[30].toolbar,S=En(L,n,n[29],O0),R=n[30].arrow,z=En(R,n,n[29],z0);return{c(){t=U("div"),e=U("div"),p&&p.c(),i=ae(),m&&m.c(),s=ae(),o&&o.c(),a=ae(),x&&x.c(),l=ae(),E&&E.c(),c=ae(),S&&S.c(),h=ae(),z&&z.c(),y(e,"class",d="tag-popup-content "+n[17]+" svelte-u1dbzb"),y(t,"class",f="tag-popup tag-popup-"+n[0]+" svelte-u1dbzb")},m(O,A){Y(O,t,A),V(t,e),p&&p.m(e,null),V(e,i),m&&m.m(e,null),V(e,s),~r&&b[r].m(e,null),V(e,a),x&&x.m(e,null),V(e,l),E&&E.m(e,null),V(e,c),S&&S.m(e,null),V(e,h),z&&z.m(e,null),g=!0},p(O,A){O[4]?p?p.p(O,A):(p=B0(O),p.c(),p.m(e,i)):p&&(p.d(1),p=null),O[2]&&(O[3].length>0||O[9].length>0)?m?m.p(O,A):(m=_0(O),m.c(),m.m(e,s)):m&&(m.d(1),m=null);let C=r;r=w(O),r===C?~r&&b[r].p(O,A):(o&&(Ee(),Z(b[C],1,1,()=>{b[C]=null}),xe()),~r?(o=b[r],o?o.p(O,A):(o=b[r]=v[r](O),o.c()),N(o,1),o.m(e,a)):o=null),O[16]?x?x.p(O,A):(x=W0(O),x.c(),x.m(e,l)):x&&(x.d(1),x=null),O[8]?E?E.p(O,A):(E=U0(O),E.c(),E.m(e,c)):E&&(E.d(1),E=null),S&&S.p&&(!g||A[0]&536870912)&&Dn(S,L,O,O[29],g?xn(L,O[29],A,Hk):Sn(O[29]),O0),z&&z.p&&(!g||A[0]&536870912)&&Dn(z,R,O,O[29],g?xn(R,O[29],A,Gk):Sn(O[29]),z0),(!g||A[0]&131072&&d!==(d="tag-popup-content "+O[17]+" svelte-u1dbzb"))&&y(e,"class",d),(!g||A[0]&1&&f!==(f="tag-popup tag-popup-"+O[0]+" svelte-u1dbzb"))&&y(t,"class",f)},i(O){g||(N(o),N(S,O),N(z,O),g=!0)},o(O){Z(o),Z(S,O),Z(z,O),g=!1},d(O){O&&X(t),p&&p.d(),m&&m.d(),~r&&b[r].d(),x&&x.d(),E&&E.d(),S&&S.d(O),z&&z.d(O)}}}function Jk(n,t,e){let i,s,r,o,a,l,c,h,d,f,g,p,m,v,b,w,x,E,L,S,R,z,O,A,C,{$$slots:I={},$$scope:M}=t,{tag:D}=t,{config:T={}}=t,{theme:H=void 0}=t,{placement:W="right-top"}=t;return n.$$set=J=>{"tag"in J&&e(1,D=J.tag),"config"in J&&e(18,T=J.config),"theme"in J&&e(19,H=J.theme),"placement"in J&&e(0,W=J.placement),"$$scope"in J&&e(29,M=J.$$scope)},n.$$.update=()=>{var J,te,q,ne,se,ue;n.$$.dirty[0]&2&&e(2,i=D.contentType==="Marketing"),n.$$.dirty[0]&4&&e(28,s=i?"light":"dark"),n.$$.dirty[0]&268959746&&e(17,r=D.data.theme!==void 0&&D.data.theme!==null?D.data.theme:H!=null?H:s),n.$$.dirty[0]&2&&e(27,o=D.data.title||D.data.name||""),n.$$.dirty[0]&2&&e(26,a=D.data.description||D.data.tooltip||""),n.$$.dirty[0]&134217728&&e(4,l=o||""),n.$$.dirty[0]&67108864&&e(16,c=a||""),n.$$.dirty[0]&6&&e(25,h=(()=>{var ze,Ce,ce,le,he,ke,be,We,Re,Te,He;if(i)return null;if(D.data.mediaData&&D.data.mediaData.length>0){const pe=D.data.mediaData[0];if(pe.type==="Video"){if(pe.videoCoverUrl)return pe.videoCoverUrl;if(pe.url){const Le=pe.url.toLowerCase();if(ch(Le)){const Oe=Gm(Le);if(Oe)return`https://img.youtube.com/vi/${Oe}/hqdefault.jpg`}if(hh(Le)){const Oe=Hm(Le);if(Oe)return`https://vumbnail.com/${Oe}.jpg`}return}}if(D.contentType==="Panorama")return(He=(be=(ce=(Ce=(ze=D.data.mediaData)==null?void 0:ze[0])==null?void 0:Ce.cube)==null?void 0:ce.front)!=null?be:(ke=(he=(le=D.data.mediaData)==null?void 0:le[0])==null?void 0:he.thumbnail)==null?void 0:ke.split("?")[0])!=null?He:(Te=(Re=(We=D.data.mediaData)==null?void 0:We[0])==null?void 0:Re.url)==null?void 0:Te.split("?")[0];if(pe.url||pe.thumbnail)return pe.url||pe.thumbnail}return D.data.imageUrl})()),n.$$.dirty[0]&33816578&&e(15,d=T!=null&&T.imageURLTransform&&(h!=null&&h.includes("realsee-cdn")||h!=null&&h.includes("ljcdn.com"))?T.imageURLTransform(h,{width:280,height:280}):h||D.data.mediaUrl||""),n.$$.dirty[0]&2&&e(6,f=D.contentType==="Video"||D.data.mediaType==="video"),n.$$.dirty[0]&2&&e(14,g=D.contentType==="Panorama"||D.data.mediaType==="panorama"),n.$$.dirty[0]&66&&e(24,p=f&&D.data.mediaData&&((J=D.data.mediaData[0])==null?void 0:J.url)&&ch(D.data.mediaData[0].url)),n.$$.dirty[0]&66&&e(23,m=f&&D.data.mediaData&&((te=D.data.mediaData[0])==null?void 0:te.url)&&hh(D.data.mediaData[0].url)),n.$$.dirty[0]&25165824&&e(5,v=p||m),n.$$.dirty[0]&34&&e(13,b=v&&D.data.mediaData&&((q=D.data.mediaData[0])!=null&&q.url)?r4(D.data.mediaData[0].url,{autoplay:0}):""),n.$$.dirty[0]&25165840&&e(12,w=p?"YouTube video player":m?"Vimeo video player":l),n.$$.dirty[0]&2&&e(11,x=((ne=D.data.mediaData)==null?void 0:ne.length)||0),n.$$.dirty[0]&6&&e(22,L=i?D.data.brandTags||[]:[]),n.$$.dirty[0]&6&&e(21,S=i?D.data.tags||[]:[]),n.$$.dirty[0]&4194304&&e(3,R=L.filter(Boolean).slice(0,2)),n.$$.dirty[0]&8&&e(20,z=Math.max(0,2-R.length)),n.$$.dirty[0]&3145728&&e(9,O=z>0?S.filter(Boolean).slice(0,z):[]),n.$$.dirty[0]&6&&e(8,A=i&&((se=D.data.price)==null?void 0:se.value)||""),n.$$.dirty[0]&6&&e(7,C=i&&((ue=D.data.price)==null?void 0:ue.unit)||"")},e(10,E=1),[W,D,i,R,l,v,f,C,A,O,E,x,w,b,g,d,c,r,T,H,z,S,L,m,p,h,a,o,s,M,I]}class qk extends Me{constructor(t){super(),Ie(this,t,Jk,Zk,Pe,{tag:1,config:18,theme:19,placement:0},Nk,[-1,-1])}}function Kk(n){let t,e,i,s,r,o,a,l,c,h,d,f,g;return{c(){t=ye("svg"),e=ye("defs"),i=ye("linearGradient"),s=ye("stop"),r=ye("stop"),a=ye("linearGradient"),l=ye("stop"),c=ye("stop"),d=ye("path"),y(s,"stop-color",n[1]),y(s,"offset","0%"),y(r,"stop-color",n[1]),y(r,"stop-opacity",".5"),y(r,"offset","100%"),y(i,"id",o="arrow-right-icon-gradient-"+n[1]),y(i,"x1","96.2%"),y(i,"y1","50%"),y(i,"x2","0%"),y(i,"y2","50%"),y(l,"stop-color",n[1]),y(l,"offset","0%"),y(c,"stop-color",n[1]),y(c,"stop-opacity","0"),y(c,"offset","100%"),y(a,"id",h="arrow-right-icon-stroke-"+n[1]),y(a,"x1","50%"),y(a,"y1","9.83%"),y(a,"x2","41.99%"),y(a,"y2","24.46%"),y(d,"d","M4.84572153,2.14166669 C4.94036186,2.14170036 5.03490004,2.17870347 5.10676798,2.25203341 L9.39516942,6.66308361 C9.48635681,6.75687897 9.53195051,6.87843949 9.53195051,7 C9.53195051,7.12156051 9.48635681,7.24312103 9.39516942,7.33691639 L5.11673708,11.7390017 C5.02118573,11.813978 4.92122439,11.8514005 4.82705048,11.851434 C4.73517505,11.8514667 4.65029153,11.8150862 4.59276829,11.7576692 C4.51856427,11.6593496 4.48179951,11.5564146 4.48176638,11.4595899 C4.48173399,11.3649536 4.51747117,11.2773335 4.58937836,11.2035272 L7.74273899,7.43877755 C7.84906128,7.31184097 7.90222243,7.15592048 7.90222243,7 C7.90222243,6.84407952 7.84906128,6.68815903 7.74273449,6.56121708 L4.54804918,2.74803934 C4.65338339,2.20863952 4.74441906,2.14163065 4.84572153,2.14166669 Z"),y(d,"fill",f=`url(#arrow-right-icon-gradient-${n[1]})`),y(d,"fill-rule","nonzero"),y(d,"stroke",g=`url(#arrow-right-icon-stroke-${n[1]})`),y(d,"stroke-width",".2"),y(t,"xmlns","http://www.w3.org/2000/svg"),y(t,"viewBox","0 0 14 14"),y(t,"width",n[0]),y(t,"height",n[0]),Q(t,"opacity",n[2])},m(p,m){Y(p,t,m),V(t,e),V(e,i),V(i,s),V(i,r),V(e,a),V(a,l),V(a,c),V(t,d)},p(p,[m]){m&2&&y(s,"stop-color",p[1]),m&2&&y(r,"stop-color",p[1]),m&2&&o!==(o="arrow-right-icon-gradient-"+p[1])&&y(i,"id",o),m&2&&y(l,"stop-color",p[1]),m&2&&y(c,"stop-color",p[1]),m&2&&h!==(h="arrow-right-icon-stroke-"+p[1])&&y(a,"id",h),m&2&&f!==(f=`url(#arrow-right-icon-gradient-${p[1]})`)&&y(d,"fill",f),m&2&&g!==(g=`url(#arrow-right-icon-stroke-${p[1]})`)&&y(d,"stroke",g),m&1&&y(t,"width",p[0]),m&1&&y(t,"height",p[0]),m&4&&Q(t,"opacity",p[2])},i:re,o:re,d(p){p&&X(t)}}}function $k(n,t,e){let{size:i="14"}=t,{color:s="#ffffff"}=t,{opacity:r=1}=t;return n.$$set=o=>{"size"in o&&e(0,i=o.size),"color"in o&&e(1,s=o.color),"opacity"in o&&e(2,r=o.opacity)},[i,s,r]}class e7 extends Me{constructor(t){super(),Ie(this,t,$k,Kk,Pe,{size:0,color:1,opacity:2})}}function t7(n){let t,e,i,s,r,o,a,l,c,h,d,f,g;return{c(){t=ye("svg"),e=ye("defs"),i=ye("linearGradient"),s=ye("stop"),r=ye("stop"),a=ye("linearGradient"),l=ye("stop"),c=ye("stop"),d=ye("path"),y(s,"stop-color",n[1]),y(s,"offset","0%"),y(r,"stop-color",n[1]),y(r,"stop-opacity",".5"),y(r,"offset","100%"),y(i,"id",o="share-icon-gradient-"+n[1]),y(i,"x1","41.65%"),y(i,"y1","59.05%"),y(i,"x2","66.13%"),y(i,"y2","9.07%"),y(l,"stop-color",n[1]),y(l,"offset","0%"),y(c,"stop-color",n[1]),y(c,"stop-opacity","0"),y(c,"offset","100%"),y(a,"id",h="share-icon-stroke-"+n[1]),y(a,"x1","55.68%"),y(a,"y1","2.48%"),y(a,"x2","60.83%"),y(a,"y2","14.28%"),y(d,"d","M12.4937515,2.60140991 L12.6834904,2.60248871 C13.307774,2.63121157 13.9222065,2.90874077 14.3642696,3.436433 C14.7794904,3.93278385 14.923342,4.60854408 14.8265514,5.24548738 C14.7279361,5.89144103 14.4428997,6.3527969 14.063774,6.65956953 C13.6079793,7.02837949 13.0189069,7.17403325 12.4632035,7.15562178 C11.7380729,7.13162078 11.0390809,7.42803145 10.5261758,7.9357119 C9.96083448,8.49643643 9.67596892,9.19792997 9.69443632,9.91942004 C9.66449732,10.8859455 9.96309104,11.5807243 10.4796578,12.092029 C11.0239965,12.6296813 11.7402488,12.9101676 12.4817091,12.8884813 C13.0940469,12.8705618 13.7481304,13.0495781 14.2150699,13.5117611 C14.6987029,13.9904677 14.9268415,14.6256711 14.8974895,15.2508921 C14.8684928,15.868544 14.5880857,16.4761837 14.055365,16.9134138 C13.5533941,17.3248246 12.8689122,17.4672624 12.2258037,17.3713572 C11.5727886,17.2736846 11.1063284,16.991503 10.7961882,16.6159844 C10.4239402,16.1652655 10.2768519,15.5827583 10.2954352,15.0332376 C10.3197006,14.3149783 10.0202124,13.6224897 9.50703789,13.1145427 C8.94671715,12.5587885 8.2455275,12.2800717 7.51547371,12.2927077 C7.23521908,12.3053648 6.95603622,12.2673623 6.69423123,12.1827116 C6.1605306,11.9588888 5.9529663,11.8380114 5.77703284,11.66387 C5.40155143,11.2922134 5.1829777,10.8272392 5.11950899,10.3459077 C5.05433663,9.85165608 5.15259721,9.34024891 5.41443015,8.89062791 C5.61688125,8.49864777 5.91421421,8.21950306 6.25529625,8.03627882 C6.64911257,7.8247265 7.1008248,7.74055154 7.53306889,7.75691992 L7.73219905,7.75624362 C8.39290266,7.7280909 9.01896921,7.44343917 9.49037385,6.97683639 C10.0339806,6.43762468 10.3173723,5.72806794 10.2954528,4.99382841 C10.2784266,4.38712951 10.4592448,3.74020534 10.9258673,3.27833603 C11.4093877,2.79921041 12.051472,2.57340998 12.6834904,2.60248871 Z"),y(d,"fill",f=`url(#share-icon-gradient-${n[1]})`),y(d,"fill-rule","nonzero"),y(d,"stroke",g=`url(#share-icon-stroke-${n[1]})`),y(d,"stroke-width",".2"),y(t,"xmlns","http://www.w3.org/2000/svg"),y(t,"viewBox","0 0 20 20"),y(t,"width",n[0]),y(t,"height",n[0]),Q(t,"opacity",n[2])},m(p,m){Y(p,t,m),V(t,e),V(e,i),V(i,s),V(i,r),V(e,a),V(a,l),V(a,c),V(t,d)},p(p,[m]){m&2&&y(s,"stop-color",p[1]),m&2&&y(r,"stop-color",p[1]),m&2&&o!==(o="share-icon-gradient-"+p[1])&&y(i,"id",o),m&2&&y(l,"stop-color",p[1]),m&2&&y(c,"stop-color",p[1]),m&2&&h!==(h="share-icon-stroke-"+p[1])&&y(a,"id",h),m&2&&f!==(f=`url(#share-icon-gradient-${p[1]})`)&&y(d,"fill",f),m&2&&g!==(g=`url(#share-icon-stroke-${p[1]})`)&&y(d,"stroke",g),m&1&&y(t,"width",p[0]),m&1&&y(t,"height",p[0]),m&4&&Q(t,"opacity",p[2])},i:re,o:re,d(p){p&&X(t)}}}function i7(n,t,e){let{size:i="20"}=t,{color:s="#ffffff"}=t,{opacity:r=1}=t;return n.$$set=o=>{"size"in o&&e(0,i=o.size),"color"in o&&e(1,s=o.color),"opacity"in o&&e(2,r=o.opacity)},[i,s,r]}class n7 extends Me{constructor(t){super(),Ie(this,t,i7,t7,Pe,{size:0,color:1,opacity:2})}}function s7(n){De(n,"svelte-18owx9v",".tag-popover-toolbar.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;margin-top:0.75rem;padding-top:0;border-top:none}.tag-popover-toolbar.both-buttons.svelte-18owx9v.svelte-18owx9v{justify-content:space-between}.tag-popover-toolbar.single-button.svelte-18owx9v.svelte-18owx9v{justify-content:flex-end}.tag-popover-toolbar-dark.svelte-18owx9v .tag-popover-btn.svelte-18owx9v{color:#ffffff}.tag-popover-toolbar-light.svelte-18owx9v .tag-popover-btn.svelte-18owx9v{color:rgba(0, 0, 0, 0.85)}.tag-popover-btn.view-more.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;justify-content:center;font-weight:500;font-size:0.875rem;letter-spacing:0;line-height:1.25rem}.tag-popover-btn.share.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem}")}function X0(n){let t,e,i,s,r=n[0].showMore&&Y0(n),o=n[0].showShare&&Z0(n);return{c(){t=U("div"),r&&r.c(),e=ae(),o&&o.c(),y(t,"class",i="tag-popover-toolbar tag-popover-toolbar-"+n[1]+" "+(n[0].showMore&&n[0].showShare?"both-buttons":"single-button")+" svelte-18owx9v")},m(a,l){Y(a,t,l),r&&r.m(t,null),V(t,e),o&&o.m(t,null),s=!0},p(a,l){a[0].showMore?r?(r.p(a,l),l&1&&N(r,1)):(r=Y0(a),r.c(),N(r,1),r.m(t,e)):r&&(Ee(),Z(r,1,1,()=>{r=null}),xe()),a[0].showShare?o?(o.p(a,l),l&1&&N(o,1)):(o=Z0(a),o.c(),N(o,1),o.m(t,null)):o&&(Ee(),Z(o,1,1,()=>{o=null}),xe()),(!s||l&3&&i!==(i="tag-popover-toolbar tag-popover-toolbar-"+a[1]+" "+(a[0].showMore&&a[0].showShare?"both-buttons":"single-button")+" svelte-18owx9v"))&&y(t,"class",i)},i(a){s||(N(r),N(o),s=!0)},o(a){Z(r),Z(o),s=!1},d(a){a&&X(t),r&&r.d(),o&&o.d()}}}function Y0(n){let t,e,i,s,r,o,a;return s=new e7({props:{size:"14",color:n[1]==="light"?"#000000":"#ffffff",opacity:n[1]==="light"?.8:1}}),{c(){t=U("div"),e=Ve(n[2]),i=ae(),Ae(s.$$.fragment),y(t,"class","tag-popover-btn view-more svelte-18owx9v")},m(l,c){Y(l,t,c),V(t,e),V(t,i),ge(s,t,null),r=!0,o||(a=je(t,"click",n[3]),o=!0)},p(l,c){(!r||c&4)&&Ge(e,l[2]);const h={};c&2&&(h.color=l[1]==="light"?"#000000":"#ffffff"),c&2&&(h.opacity=l[1]==="light"?.8:1),s.$set(h)},i(l){r||(N(s.$$.fragment,l),r=!0)},o(l){Z(s.$$.fragment,l),r=!1},d(l){l&&X(t),ve(s),o=!1,a()}}}function Z0(n){let t,e,i,s,r;return e=new n7({props:{size:"20",color:n[1]==="light"?"#000000":"#ffffff",opacity:n[1]==="light"?.8:1}}),{c(){t=U("div"),Ae(e.$$.fragment),y(t,"class","tag-popover-btn share svelte-18owx9v")},m(o,a){Y(o,t,a),ge(e,t,null),i=!0,s||(r=je(t,"click",n[4]),s=!0)},p(o,a){const l={};a&2&&(l.color=o[1]==="light"?"#000000":"#ffffff"),a&2&&(l.opacity=o[1]==="light"?.8:1),e.$set(l)},i(o){i||(N(e.$$.fragment,o),i=!0)},o(o){Z(e.$$.fragment,o),i=!1},d(o){o&&X(t),ve(e),s=!1,r()}}}function r7(n){let t,e,i=(n[0].showMore||n[0].showShare)&&X0(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[0].showMore||s[0].showShare?i?(i.p(s,r),r&1&&N(i,1)):(i=X0(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function o7(n,t,e){let i;const s=Ni("hooks");qs();let{tag:r}=t,{toolbar:o={showMore:!0,showShare:!0}}=t,{theme:a="dark"}=t,{closePopover:l=void 0}=t;function c(d){d.stopPropagation(),typeof l=="function"&&l(),s.emit("click",{event:d,target:"TagPopoverViewMore",tag:r})}function h(d){d.stopPropagation(),typeof l=="function"&&l(),s.emit("click",{event:d,target:"TagPopoverShare",tag:r})}return n.$$set=d=>{"tag"in d&&e(5,r=d.tag),"toolbar"in d&&e(0,o=d.toolbar),"theme"in d&&e(1,a=d.theme),"closePopover"in d&&e(6,l=d.closePopover)},n.$$.update=()=>{n.$$.dirty&32&&e(2,i=(()=>Fe(r.data.highlightText)&&r.data.highlightText.trim()!==""?r.data.highlightText:Fe(r.config.popoverConfig.viewMoreText)&&r.config.popoverConfig.viewMoreText.trim()!==""?r.config.popoverConfig.viewMoreText:"查看更多")())},[o,a,i,c,h,r,l]}class a7 extends Me{constructor(t){super(),Ie(this,t,o7,r7,Pe,{tag:5,toolbar:0,theme:1,closePopover:6},s7)}}function l7(n){let t,e;return t=new a7({props:{toolbar:{showMore:n[7].showMore===void 0?!0:n[7].showMore,showShare:n[7].showShare===void 0?!0:n[7].showShare},theme:n[2],tag:n[4],closePopover:n[8]}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s&128&&(r.toolbar={showMore:i[7].showMore===void 0?!0:i[7].showMore,showShare:i[7].showShare===void 0?!0:i[7].showShare}),s&4&&(r.theme=i[2]),s&16&&(r.tag=i[4]),s&256&&(r.closePopover=i[8]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function c7(n){let t,e,i,s;return t=new zk({props:{show:n[0],direction:n[1],theme:n[2]}}),i=new qk({props:{placement:n[3],tag:n[4],config:n[5],theme:n[6],$$slots:{toolbar:[l7]},$$scope:{ctx:n}}}),i.$on("resize",n[9]),{c(){Ae(t.$$.fragment),e=ae(),Ae(i.$$.fragment)},m(r,o){ge(t,r,o),Y(r,e,o),ge(i,r,o),s=!0},p(r,[o]){const a={};o&1&&(a.show=r[0]),o&2&&(a.direction=r[1]),o&4&&(a.theme=r[2]),t.$set(a);const l={};o&8&&(l.placement=r[3]),o&16&&(l.tag=r[4]),o&32&&(l.config=r[5]),o&64&&(l.theme=r[6]),o&1428&&(l.$$scope={dirty:o,ctx:r}),i.$set(l)},i(r){s||(N(t.$$.fragment,r),N(i.$$.fragment,r),s=!0)},o(r){Z(t.$$.fragment,r),Z(i.$$.fragment,r),s=!1},d(r){ve(t,r),r&&X(e),ve(i,r)}}}function h7(n,t,e){let{showArrow:i}=t,{arrowDirection:s}=t,{effectiveTheme:r}=t,{adjustedPlacement:o}=t,{tag:a}=t,{config:l}=t,{theme:c}=t,{toolbar:h}=t,{closePopover:d}=t;function f(g){an.call(this,n,g)}return n.$$set=g=>{"showArrow"in g&&e(0,i=g.showArrow),"arrowDirection"in g&&e(1,s=g.arrowDirection),"effectiveTheme"in g&&e(2,r=g.effectiveTheme),"adjustedPlacement"in g&&e(3,o=g.adjustedPlacement),"tag"in g&&e(4,a=g.tag),"config"in g&&e(5,l=g.config),"theme"in g&&e(6,c=g.theme),"toolbar"in g&&e(7,h=g.toolbar),"closePopover"in g&&e(8,d=g.closePopover)},[i,s,r,o,a,l,c,h,d,f]}class d7 extends Me{constructor(t){super(),Ie(this,t,h7,c7,Pe,{showArrow:0,arrowDirection:1,effectiveTheme:2,adjustedPlacement:3,tag:4,config:5,theme:6,toolbar:7,closePopover:8})}}function u7(n){De(n,"svelte-12m4kzk",".tag-popover.svelte-12m4kzk{position:absolute;z-index:1000010;pointer-events:auto;width:auto;height:auto;padding:0;margin:0;visibility:visible;opacity:1}.tag-popover-content.svelte-12m4kzk{cursor:pointer;pointer-events:auto}")}function J0(n){let t,e,i,s,r,o,a,l,c;return i=new d7({props:{showArrow:n[8],arrowDirection:n[7],effectiveTheme:n[13],adjustedPlacement:n[4],tag:n[0],config:n[1],theme:n[2],toolbar:n[11],closePopover:n[19]}}),i.$on("viewMore",n[15]),i.$on("share",n[16]),i.$on("resize",n[17]),{c(){t=U("div"),e=U("div"),Ae(i.$$.fragment),y(e,"class","tag-popover-content svelte-12m4kzk"),y(t,"class",r="tag-popover tag-popover-"+n[13]+" tag-popover-"+n[4]+" svelte-12m4kzk"),y(t,"data-tag-id",o=n[0].id),Q(t,"z-index",n[12]),Q(t,"left",n[9].x+"px"),Q(t,"top",n[9].y+"px")},m(h,d){Y(h,t,d),V(t,e),ge(i,e,null),n[30](e),n[31](t),a=!0,l||(c=[je(e,"mouseenter",n[28]),je(e,"mouseleave",n[29]),je(e,"click",n[18])],l=!0)},p(h,d){n=h;const f={};d[0]&256&&(f.showArrow=n[8]),d[0]&128&&(f.arrowDirection=n[7]),d[0]&8192&&(f.effectiveTheme=n[13]),d[0]&16&&(f.adjustedPlacement=n[4]),d[0]&1&&(f.tag=n[0]),d[0]&2&&(f.config=n[1]),d[0]&4&&(f.theme=n[2]),d[0]&2048&&(f.toolbar=n[11]),i.$set(f),(!a||d[0]&8208&&r!==(r="tag-popover tag-popover-"+n[13]+" tag-popover-"+n[4]+" svelte-12m4kzk"))&&y(t,"class",r),(!a||d[0]&1&&o!==(o=n[0].id))&&y(t,"data-tag-id",o),(!a||d[0]&4096)&&Q(t,"z-index",n[12]),(!a||d[0]&512)&&Q(t,"left",n[9].x+"px"),(!a||d[0]&512)&&Q(t,"top",n[9].y+"px")},i(h){a||(N(i.$$.fragment,h),pt(()=>{a&&(s||(s=bi(e,n[14],{duration:n[10],easing:Kr,y:n[7]==="top"?-8:n[7]==="bottom"?8:0,x:n[7]==="left"?-8:n[7]==="right"?8:0},!0)),s.run(1))}),a=!0)},o(h){Z(i.$$.fragment,h),s||(s=bi(e,n[14],{duration:n[10],easing:Kr,y:n[7]==="top"?-8:n[7]==="bottom"?8:0,x:n[7]==="left"?-8:n[7]==="right"?8:0},!1)),s.run(0),a=!1},d(h){h&&X(t),ve(i),n[30](null),h&&s&&s.end(),n[31](null),l=!1,ut(c)}}}function f7(n){let t,e,i=n[3]&&n[9]&&J0(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,r){s[3]&&s[9]?i?(i.p(s,r),r[0]&520&&N(i,1)):(i=J0(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function p7(n,t,e){let i,s,r,o,a,l,c,h,d;const f=Ni("hooks");let{tag:g}=t,{config:p={}}=t,{triggerElement:m}=t,{wrapperElement:v=document.body}=t,{popoverContainer:b=null}=t,{theme:w=void 0}=t,{visible:x=!0}=t,{closePopover:E=void 0}=t;const L=qs();let S,R={width:0,height:0},z=null,O=s;function A(ce,{duration:le=400,easing:he=Kr,x:ke=0,y:be=0}){return{duration:le,css:(We,Re)=>`
          opacity: ${We};
          transform: translate(${Re*ke}px, ${Re*be}px);
        `}}const C=()=>{if(!g.screenPosition||!m||!v)return s;const ce=(p==null?void 0:p.autoPlacementBaseSpace)||{top:.2,bottom:.2,right:.15},le=v.clientWidth,he=v.clientHeight,ke=he*ce.top,be=he*(1-ce.bottom),We=le*(1-ce.right),Re=g.screenPosition.leftPx,Te=g.screenPosition.topPx,He=R.width||280,pe=R.height||200;return Te<=ke?Re<=We?Re+He<=le&&Te+pe<=he?"right-top":"bottom-left":Re-He>=0&&Te+pe<=he?"left-top":"bottom-right":Te>=be?Re<=We?Re+He<=le&&Te-pe>=0?"right-bottom":"top-left":Re-He>=0&&Te-pe>=0?"left-bottom":"top-right":Re<=We?Re+He<=le?"right-top":"left-top":Re-He>=0?"left-top":"right-top"},I=(ce,le)=>{if(!ce)return null;const he=8,ke=F({},ce);return["top","top-left","top-right"].includes(le)?ke.y-=he:["bottom","bottom-left","bottom-right"].includes(le)?ke.y+=he:["left","left-top","left-bottom"].includes(le)?ke.x-=he:["right","right-top","right-bottom"].includes(le)&&(ke.x+=he),ke},M=(ce,le)=>{switch(ce){case"top":case"top-left":case"top-right":return{x:le.left+le.width/2,y:le.top};case"bottom":case"bottom-left":case"bottom-right":return{x:le.left+le.width/2,y:le.top+le.height};case"left":case"left-top":case"left-bottom":return{x:le.left,y:le.top+le.height/2};case"right":case"right-top":case"right-bottom":return{x:le.left+le.width,y:le.top+le.height/2};default:return{x:le.left+le.width/2,y:le.top}}},D=ce=>{ne(),f&&f.emit("click",{event:ce.detail.event,target:"TagPopoverViewMore",tag:g})},T=ce=>{ne(),f&&f.emit("click",{event:ce.detail.event,target:"TagPopoverShare",tag:g})},H=ce=>{e(24,R=ce.detail),R.width>0&&R.height>0&&e(4,O=C())},W=ce=>{ne(),ce.stopPropagation(),f.emit("click",{event:ce,target:"TagPopoverContent",tag:g})};let J=null,te=!1;function q(){b&&J&&J.parentNode!==b&&b.appendChild(J)}zt(()=>{(!v||v===document.body)&&console.warn("TagPopover 组件警告：禁止使用 document.body 作为 wrapperElement，请传入自定义容器元素。"),te=!0,q(),v&&v!==document.body&&e(20,v.style.overflow="hidden",v)}),fc(()=>{te&&q()}),ti(()=>{J&&J.parentNode&&J.parentNode.removeChild(J),v&&v!==document.body&&e(20,v.style.overflow="",v)});function ne(){typeof E=="function"&&E(),L("close")}function se(ce){an.call(this,n,ce)}function ue(ce){an.call(this,n,ce)}function ze(ce){Je[ce?"unshift":"push"](()=>{S=ce,e(5,S)})}function Ce(ce){Je[ce?"unshift":"push"](()=>{J=ce,e(6,J)})}return n.$$set=ce=>{"tag"in ce&&e(0,g=ce.tag),"config"in ce&&e(1,p=ce.config),"triggerElement"in ce&&e(21,m=ce.triggerElement),"wrapperElement"in ce&&e(20,v=ce.wrapperElement),"popoverContainer"in ce&&e(22,b=ce.popoverContainer),"theme"in ce&&e(2,w=ce.theme),"visible"in ce&&e(3,x=ce.visible),"closePopover"in ce&&e(23,E=ce.closePopover)},n.$$.update=()=>{if(n.$$.dirty[0]&5&&e(13,i=(()=>Fe(w)?w:Fe(g.data.theme)&&["light","dark"].includes(g.data.theme)?g.data.theme:g.contentType==="Marketing"?"light":"dark")()),n.$$.dirty[0]&2&&e(27,s=(p==null?void 0:p.placement)||"right-top"),n.$$.dirty[0]&2&&e(11,a=(()=>typeof(p==null?void 0:p.toolbar)=="boolean"?p.toolbar?{showMore:!0,showShare:!0}:{showMore:!1,showShare:!1}:(p==null?void 0:p.toolbar)||{showMore:!0,showShare:!0})()),n.$$.dirty[0]&134217728&&(s==="auto"?e(4,O=C()):e(4,O=s)),n.$$.dirty[0]&2&&e(10,l=(p==null?void 0:p.transitionDuration)||350),n.$$.dirty[0]&2097153&&g.screenPosition&&m&&e(4,O=C()),n.$$.dirty[0]&16777216&&R.width>0&&R.height>0&&e(4,O=C()),n.$$.dirty[0]&2097169&&g.screenPosition&&O&&m){const ce=m.getBoundingClientRect();e(25,z=M(O,ce))}n.$$.dirty[0]&33554448&&e(9,c=I(z,O)),n.$$.dirty[0]&67108864&&e(8,h=typeof r=="boolean"?r:!0),n.$$.dirty[0]&16&&e(7,d=(()=>{switch(O){case"top":case"top-left":case"top-right":return"bottom";case"bottom":case"bottom-left":case"bottom-right":return"top";case"left":case"left-top":case"left-bottom":return"right";case"right":case"right-top":case"right-bottom":return"left";default:return"bottom"}})())},e(26,r=!0),e(12,o=1060),[g,p,w,x,O,S,J,d,h,c,l,a,o,i,A,D,T,H,W,ne,v,m,b,E,R,z,r,s,se,ue,ze,Ce]}class m7 extends Me{constructor(t){super(),Ie(this,t,p7,f7,Pe,{tag:0,config:1,triggerElement:21,wrapperElement:20,popoverContainer:22,theme:2,visible:3,closePopover:23},u7,[-1,-1])}}function g7(n){De(n,"svelte-2g2g8a",".tag.svelte-2g2g8a{position:absolute;width:0rem;height:0rem;overflow:visible;pointer-events:auto;will-change:opacity;transition:opacity 0.2s linear}.tag.enableZIndex.svelte-2g2g8a{position:absolute}.tag.hide.svelte-2g2g8a{opacity:0;pointer-events:none}.tag.hide.svelte-2g2g8a *{pointer-events:none !important}.tag.unClickable.svelte-2g2g8a{pointer-events:none !important}.tag.unClickable.svelte-2g2g8a *{pointer-events:none !important}")}function q0(n){let t,e,i,s,r,o,a,l,c,h;const d=[A7,v7],f=[];function g(b,w){return b[10]?0:1}e=g(n),i=f[e]=d[e](n);const p=[y7,b7],m=[];function v(b,w){return b[20]?0:1}return r=v(n),o=m[r]=p[r](n),{c(){t=U("div"),i.c(),s=ae(),o.c(),y(t,"class","tag svelte-2g2g8a"),y(t,"data-tag-id",n[18]),y(t,"data-tag-unfolded",n[8]),y(t,"data-content-type",a=n[0].contentType),y(t,"data-popover-enabled",l=n[0].isPopoverConfigEnabled()),y(t,"id",c=`tag-${n[18]}`),we(t,"unClickable",n[0].config.clickable===!1),we(t,"hide",n[16]),we(t,"enableZIndex",n[13]),Q(t,"z-index",n[13]),Q(t,"transform",`translate3d(${n[15]}, ${n[14]}, 0) scale(${n[9].scale})`)},m(b,w){Y(b,t,w),f[e].m(t,null),V(t,s),m[r].m(t,null),n[29](t),h=!0},p(b,w){let x=e;e=g(b),e===x?f[e].p(b,w):(Ee(),Z(f[x],1,1,()=>{f[x]=null}),xe(),i=f[e],i?i.p(b,w):(i=f[e]=d[e](b),i.c()),N(i,1),i.m(t,s));let E=r;r=v(b),r===E?m[r].p(b,w):(Ee(),Z(m[E],1,1,()=>{m[E]=null}),xe(),o=m[r],o?o.p(b,w):(o=m[r]=p[r](b),o.c()),N(o,1),o.m(t,null)),(!h||w[0]&262144)&&y(t,"data-tag-id",b[18]),(!h||w[0]&256)&&y(t,"data-tag-unfolded",b[8]),(!h||w[0]&1&&a!==(a=b[0].contentType))&&y(t,"data-content-type",a),(!h||w[0]&1&&l!==(l=b[0].isPopoverConfigEnabled()))&&y(t,"data-popover-enabled",l),(!h||w[0]&262144&&c!==(c=`tag-${b[18]}`))&&y(t,"id",c),(!h||w[0]&1)&&we(t,"unClickable",b[0].config.clickable===!1),(!h||w[0]&65536)&&we(t,"hide",b[16]),(!h||w[0]&8192)&&we(t,"enableZIndex",b[13]),w[0]&8192&&Q(t,"z-index",b[13]),w[0]&49664&&Q(t,"transform",`translate3d(${b[15]}, ${b[14]}, 0) scale(${b[9].scale})`)},i(b){h||(N(i),N(o),h=!0)},o(b){Z(i),Z(o),h=!1},d(b){b&&X(t),f[e].d(),m[r].d(),n[29](null)}}}function v7(n){let t;return{c(){t=U("div"),y(t,"data-info","tag point is disable")},m(e,i){Y(e,t,i)},p:re,i:re,o:re,d(e){e&&X(t)}}}function A7(n){let t,e,i;function s(o){n[28](o)}let r={tag:n[0],handleMouseEnter:n[24],handleMouseLeave:n[25],handleTagPointClick:n[26]};return n[12]!==void 0&&(r.tagPointClickHelper=n[12]),t=new wk({props:r}),Je.push(()=>ba(t,"tagPointClickHelper",s)),{c(){Ae(t.$$.fragment)},m(o,a){ge(t,o,a),i=!0},p(o,a){const l={};a[0]&1&&(l.tag=o[0]),!e&&a[0]&4096&&(e=!0,l.tagPointClickHelper=o[12],ga(()=>e=!1)),t.$set(l)},i(o){i||(N(t.$$.fragment,o),i=!0)},o(o){Z(t.$$.fragment,o),i=!1},d(o){ve(t,o)}}}function b7(n){let t;return{c(){t=U("div"),y(t,"data-info","tag content is disable")},m(e,i){Y(e,t,i)},p:re,i:re,o:re,d(e){e&&X(t)}}}function y7(n){let t,e;return t=new Lh({props:{mediaStore:n[1],tag:At(n[0]),hooks:n[21],state:n[4],temporaryState:n[5],rendererMap:n[2],contentTypeMap:n[3]}}),{c(){Ae(t.$$.fragment)},m(i,s){ge(t,i,s),e=!0},p(i,s){const r={};s[0]&2&&(r.mediaStore=i[1]),s[0]&1&&(r.tag=At(i[0])),s[0]&16&&(r.state=i[4]),s[0]&32&&(r.temporaryState=i[5]),s[0]&4&&(r.rendererMap=i[2]),s[0]&8&&(r.contentTypeMap=i[3]),t.$set(r)},i(i){e||(N(t.$$.fragment,i),e=!0)},o(i){Z(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function K0(n){var i;let t,e;return t=new m7({props:{tag:n[0],config:n[0].config.popoverConfig,theme:(i=n[0].config.popoverConfig)==null?void 0:i.theme,wrapperElement:n[6],triggerElement:n[12],popoverContainer:n[7],visible:!0,closePopover:n[27]}}),t.$on("mouseenter",n[22]),t.$on("mouseleave",n[23]),t.$on("close",n[27]),{c(){Ae(t.$$.fragment)},m(s,r){ge(t,s,r),e=!0},p(s,r){var a;const o={};r[0]&1&&(o.tag=s[0]),r[0]&1&&(o.config=s[0].config.popoverConfig),r[0]&1&&(o.theme=(a=s[0].config.popoverConfig)==null?void 0:a.theme),r[0]&64&&(o.wrapperElement=s[6]),r[0]&4096&&(o.triggerElement=s[12]),r[0]&128&&(o.popoverContainer=s[7]),t.$set(o)},i(s){e||(N(t.$$.fragment,s),e=!0)},o(s){Z(t.$$.fragment,s),e=!1},d(s){ve(t,s)}}}function w7(n){var a;let t,e=n[0].isPopoverConfigEnabled()&&n[19]&&(n[11]||((a=n[0].config.popoverConfig)==null?void 0:a.debug)),i,s,r=n[9]&&!n[17]&&q0(n),o=e&&K0(n);return{c(){r&&r.c(),t=ae(),o&&o.c(),i=Ne()},m(l,c){r&&r.m(l,c),Y(l,t,c),o&&o.m(l,c),Y(l,i,c),s=!0},p(l,c){var h;l[9]&&!l[17]?r?(r.p(l,c),c[0]&131584&&N(r,1)):(r=q0(l),r.c(),N(r,1),r.m(t.parentNode,t)):r&&(Ee(),Z(r,1,1,()=>{r=null}),xe()),c[0]&526337&&(e=l[0].isPopoverConfigEnabled()&&l[19]&&(l[11]||((h=l[0].config.popoverConfig)==null?void 0:h.debug))),e?o?(o.p(l,c),c[0]&526337&&N(o,1)):(o=K0(l),o.c(),N(o,1),o.m(i.parentNode,i)):o&&(Ee(),Z(o,1,1,()=>{o=null}),xe())},i(l){s||(N(r),N(o),s=!0)},o(l){Z(r),Z(o),s=!1},d(l){r&&r.d(l),l&&X(t),o&&o.d(l),l&&X(i)}}}function P7(n,t,e){let i,s,r,o,a,l,c,h,d,f,g,{tag:p}=t,{mediaStore:m}=t,{rendererMap:v=new Map}=t,{contentTypeMap:b=new Map}=t,{state:w}=t,{temporaryState:x}=t,{wrapperElement:E=null}=t,{popoverContainer:L=null}=t;const S=Ni("hooks");let R=!1,z,O=null,A=!1,C=!1;const I=()=>{A=!0},M=()=>{A=!1,!A&&!C&&e(11,R=!1)},D=q=>{var ne,se,ue,ze,Ce,ce;C=!0,p.isPopoverConfigEnabled()&&p.isHoverEnabled()&&((se=(ne=p.currentConfig)==null?void 0:ne.popoverConfig)==null?void 0:se.trigger)==="hover"&&(z!==void 0&&clearTimeout(z),((ze=(ue=p.currentConfig)==null?void 0:ue.popoverConfig)==null?void 0:ze.triggerDelay)>0?z=setTimeout(()=>{e(11,R=!0),p.hooks.emit("hover",{event:q,tag:p}),z=void 0},(ce=(Ce=p.currentConfig)==null?void 0:Ce.popoverConfig)==null?void 0:ce.triggerDelay):(e(11,R=!0),p.hooks.emit("hover",{event:q,tag:p})))},T=q=>{var ne,se;C=!1,p.isHoverEnabled()&&p.isPopoverConfigEnabled()&&((se=(ne=p.currentConfig)==null?void 0:ne.popoverConfig)==null?void 0:se.trigger)==="hover"&&(z!==void 0&&(clearTimeout(z),z=void 0),!A&&!C&&e(11,R=!1))},H=q=>{var ne,se;p.isPopoverConfigEnabled()&&p.isHoverEnabled()&&((se=(ne=p.currentConfig)==null?void 0:ne.popoverConfig)==null?void 0:se.trigger)==="click"&&(e(11,R=!R),R&&p.hooks.emit("hover",{event:q,tag:p}))};function W(){e(11,R=!1)}zt(()=>()=>{z&&clearTimeout(z)});function J(q){O=q,e(12,O)}function te(q){Je[q?"unshift":"push"](()=>{p.dom=q,e(0,p)})}return n.$$set=q=>{"tag"in q&&e(0,p=q.tag),"mediaStore"in q&&e(1,m=q.mediaStore),"rendererMap"in q&&e(2,v=q.rendererMap),"contentTypeMap"in q&&e(3,b=q.contentTypeMap),"state"in q&&e(4,w=q.state),"temporaryState"in q&&e(5,x=q.temporaryState),"wrapperElement"in q&&e(6,E=q.wrapperElement),"popoverContainer"in q&&e(7,L=q.popoverContainer)},n.$$.update=()=>{var q,ne,se,ue;n.$$.dirty[0]&5&&e(10,i=(()=>{var ze,Ce,ce;return((Ce=(ze=p.style)==null?void 0:ze.point)==null?void 0:Ce.enabled)===!1||((ce=v.get(p.contentType))==null?void 0:ce.usePoint)===!1||p.contentType==="Sticker"||p.contentType==="Link"||p.contentType==="VRLink"||p.contentType==="PanoLink"?!1:p.contentType==="Panorama"?!0:!(p.contentType==="Audio"&&p.data.appearance==="plane")})()),n.$$.dirty[0]&1025&&e(20,s=(()=>!(p.isPopoverConfigEnabled()&&p.contentType==="Panorama"||p.isPopoverConfigEnabled()&&p.contentType==="ImageText"||p.isPopoverConfigEnabled()&&p.contentType==="Text"||p.stickType!=="2DPoint"||p.entryFromModel&&oi(p.five.state.mode)&&i))()),n.$$.dirty[0]&1&&e(19,r=(()=>{var ze;return p.contentType==="Marketing"?!!(p.data.title||p.data.name||p.data.description||p.data.tooltip||(ze=p.data.price)!=null&&ze.value||p.data.brandTags&&p.data.brandTags.length>0||p.data.tags&&p.data.tags.length>0||p.data.imageUrl||p.data.mediaUrl||p.data.mediaData&&p.data.mediaData.length>0):!!(p.data.title||p.data.name||p.data.text||p.data.description||p.data.tooltip||p.data.imageUrl||p.data.mediaUrl||p.data.mediaData&&p.data.mediaData.length>0)})()),n.$$.dirty[0]&1&&e(18,o=p.id),n.$$.dirty[0]&1&&e(9,a=p.screenPosition),n.$$.dirty[0]&1&&e(17,l=p.enabled===!1||!p.state),n.$$.dirty[0]&513&&e(16,c=!((q=p.state)!=null&&q.visible)||((ne=p.temporaryState)==null?void 0:ne.visible)===!1||!a),n.$$.dirty[0]&1&&e(8,h=((se=p.state)==null?void 0:se.unfolded)&&!p.isPopoverConfigEnabled()),n.$$.dirty[0]&512&&e(15,d=(a==null?void 0:a.leftPx)+"px"),n.$$.dirty[0]&512&&e(14,f=(a==null?void 0:a.topPx)+"px"),n.$$.dirty[0]&257&&e(13,g=h?((ue=p.zIndex)!=null?ue:0)+(h?1e6:0):void 0)},[p,m,v,b,w,x,E,L,h,a,i,R,O,g,f,d,c,l,o,r,s,S,I,M,D,T,H,W,J,te]}class C7 extends Me{constructor(t){super(),Ie(this,t,P7,w7,Pe,{tag:0,mediaStore:1,rendererMap:2,contentTypeMap:3,state:4,temporaryState:5,wrapperElement:6,popoverContainer:7},g7,[-1,-1])}}let fn=null;function I7(n=2e6){return fn&&document.body.contains(fn)?(fn.style.zIndex=String(n),fn):(fn=document.createElement("div"),fn.className="tag-popover-container",Object.assign(fn.style,{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:String(n),pointerEvents:"none",overflow:"hidden"}),document.body.appendChild(fn),fn)}function M7(n){De(n,"svelte-9ehqs9",".tag--container.svelte-9ehqs9{box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;opacity:1;-webkit-user-select:none;-moz-user-select:none;user-select:none;transform:translate3d(0, 0, 0);transition:opacity 0.2s linear;overflow:hidden}.tag--container.hide.svelte-9ehqs9{opacity:0 !important;pointer-events:none}.tag--container.hide.svelte-9ehqs9 *{pointer-events:none !important}")}function $0(n,t,e){const i=n.slice();return i[12]=t[e],i}function ev(n){let t,e=[],i=new Map,s,r,o,a=n[0];const l=c=>c[12].id;for(let c=0;c<a.length;c+=1){let h=$0(n,a,c),d=l(h);i.set(d,e[c]=tv(d,h))}return{c(){var c;t=U("div");for(let h=0;h<e.length;h+=1)e[h].c();y(t,"class","tag--container svelte-9ehqs9"),y(t,"data-infive",s=!n[4].visible||!n[5].visible?"1":"0"),we(t,"hide",!n[4].visible||!n[5].visible),Q(t,"z-index",(c=n[6])!=null?c:"")},m(c,h){Y(c,t,h);for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(t,null);n[10](t),o=!0},p(c,h){var d;h&447&&(a=c[0],Ee(),e=yi(e,h,l,1,c,a,i,t,ln,tv,null,$0),xe()),(!o||h&48&&s!==(s=!c[4].visible||!c[5].visible?"1":"0"))&&y(t,"data-infive",s),(!o||h&48)&&we(t,"hide",!c[4].visible||!c[5].visible),h&64&&Q(t,"z-index",(d=c[6])!=null?d:"")},i(c){if(!o){for(let h=0;h<a.length;h+=1)N(e[h]);r||pt(()=>{r=Tn(t,jt,{}),r.start()}),o=!0}},o(c){for(let h=0;h<e.length;h+=1)Z(e[h]);o=!1},d(c){c&&X(t);for(let h=0;h<e.length;h+=1)e[h].d();n[10](null)}}}function tv(n,t){let e,i,s;return i=new C7({props:{state:t[4],temporaryState:t[5],tag:t[12],mediaStore:t[1],rendererMap:t[2],contentTypeMap:t[3],wrapperElement:t[7],popoverContainer:t[8]}}),{key:n,first:null,c(){e=Ne(),Ae(i.$$.fragment),this.first=e},m(r,o){Y(r,e,o),ge(i,r,o),s=!0},p(r,o){t=r;const a={};o&16&&(a.state=t[4]),o&32&&(a.temporaryState=t[5]),o&1&&(a.tag=t[12]),o&2&&(a.mediaStore=t[1]),o&4&&(a.rendererMap=t[2]),o&8&&(a.contentTypeMap=t[3]),o&128&&(a.wrapperElement=t[7]),o&256&&(a.popoverContainer=t[8]),i.$set(a)},i(r){s||(N(i.$$.fragment,r),s=!0)},o(r){Z(i.$$.fragment,r),s=!1},d(r){r&&X(e),ve(i,r)}}}function k7(n){let t,e,i=n[4].enabled&&ev(n);return{c(){i&&i.c(),t=Ne()},m(s,r){i&&i.m(s,r),Y(s,t,r),e=!0},p(s,[r]){s[4].enabled?i?(i.p(s,r),r&16&&N(i,1)):(i=ev(s),i.c(),N(i,1),i.m(t.parentNode,t)):i&&(Ee(),Z(i,1,1,()=>{i=null}),xe())},i(s){e||(N(i),e=!0)},o(s){Z(i),e=!1},d(s){i&&i.d(s),s&&X(t)}}}function E7(n,t,e){let{tags:i=[]}=t,{hooks:s}=t,{mediaStore:r}=t,{rendererMap:o}=t,{contentTypeMap:a}=t,{state:l}=t,{temporaryState:c}=t,{zIndex:h=void 0}=t,d=null,f=null,g=2e3;pc("hooks",s),zt(()=>{e(8,f=I7(g))});function p(m){Je[m?"unshift":"push"](()=>{d=m,e(7,d)})}return n.$$set=m=>{"tags"in m&&e(0,i=m.tags),"hooks"in m&&e(9,s=m.hooks),"mediaStore"in m&&e(1,r=m.mediaStore),"rendererMap"in m&&e(2,o=m.rendererMap),"contentTypeMap"in m&&e(3,a=m.contentTypeMap),"state"in m&&e(4,l=m.state),"temporaryState"in m&&e(5,c=m.temporaryState),"zIndex"in m&&e(6,h=m.zIndex)},n.$$.update=()=>{var m,v,b,w;n.$$.dirty&1&&i&&i.length>0&&(g=(w=(b=(v=(m=i[0])==null?void 0:m.config)==null?void 0:v.popoverConfig)==null?void 0:b.zIndex)!=null?w:2e6)},[i,r,o,a,l,c,h,d,f,s,p]}class x7 extends Me{constructor(t){super(),Ie(this,t,E7,k7,Pe,{tags:0,hooks:9,mediaStore:1,rendererMap:2,contentTypeMap:3,state:4,temporaryState:5,zIndex:6},M7)}}const iv="Dnalogel-PanoTagPlugin",D7=n=>`${iv}--${n}`;class al extends v4{constructor(e,i){super(e);u(this,"state",{enabled:!0,visible:!0});u(this,"debug");u(this,"debugUtil",new A4(this));u(this,"globalHoverEnabled",!0);u(this,"changeTagModel",(e,i)=>ee(this,null,function*(){var s;e.data=Ke({},e.data,i),yield(s=e.loadModel)==null?void 0:s.call(e)}));u(this,"handleFiveModeChange",e=>{const i=()=>{this.filter2DPointTag.forEach(s=>{s.state.visible=!1,s.applyVisible()}),this.five.ready().then(()=>{this.tagsDo(this.tags,s=>{s.updateVisible(),Is(s)&&e!=="Panorama"&&this.changeTagMode(s,"behind")})})};this.tags.length<500?i():this.five.ready().then(()=>i())});u(this,"handleFiveWantsMoveToPano",e=>{if(this.tags.length>500){this.temporaryState.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]});return}else this.temporaryState.visible=!0,this.tags.forEach(i=>{i.temporaryState.visible=!0}),this.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),this.tags.forEach(i=>i.applyVisible())});u(this,"clickhandler",e=>{e.tag.onClick(e)});u(this,"handleFiveCameraUpdate",()=>{this.filterPointTag.forEach(e=>e.updateScreenPosition())});u(this,"handleFiveCameraFovUpdate",()=>{this.handleFiveCameraUpdate(),this.five.off("render.prepare",this.handleFiveCameraUpdate),this.five.on("render.prepare",this.handleFiveCameraUpdate),setTimeout(()=>{this.five.off("render.prepare",this.handleFiveCameraUpdate)},1e3)});u(this,"handleFivePanoArrived",()=>ee(this,null,function*(){this.filter2DPointTag.forEach(e=>{e.state.visible=!1,e.applyVisible()}),this.tagsDo(this.tags,e=>{e.updateVisible()}),this.temporaryState.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}),yield this.setUnfolded(),this.tags.filter(e4).filter(e=>{var i;return(i=e.getConfig().modelConfig)==null?void 0:i.autoLookAtEnabled}).forEach(e=>{var c;const i=new P.Mesh(new P.BoxGeometry,new P.MeshBasicMaterial),s=(c=e.model)==null?void 0:c.object;if(!s)return;i.position.copy(s.position),i.quaternion.copy(s.quaternion);const r=this.five.camera.position;i.lookAt(r.clone().setY(i.position.y));const o=s.quaternion.clone(),a=i.quaternion.clone(),l=Yr();l.onUpdate(({progress:h})=>{s.quaternion.copy(o.clone().slerp(a,h))}),l.play()})}));u(this,"handleFiveModelShownFloorChange",()=>{this.tagsDo(this.tags,e=>e.updateVisible())});u(this,"onFiveRefined",Nm(()=>{oi(this.five.getCurrentState().mode)?this.setUnfoldedByCamera():this.tags.forEach(e=>e.cache.clear()),this.tagsDo(this.tags,e=>e.updateVisible())}));u(this,"onFiveEveryReady",()=>{this.setUnfoldedByCamera(),oi(this.five.getCurrentState().mode)&&this.tagsDo(this.tags,e=>e.updateVisible())});u(this,"render",()=>{this.renderQueue.forEach((e,i)=>{const{keys:s}=e;if(i==="TagContainerSvelte"){const o=this.filterPointTag.filter(l=>l.screenPosition),a={hooks:this.hooks,tags:o,state:this.state,temporaryState:this.temporaryState,mediaStore:this.mediaStore,rendererMap:this.rendererMap,contentTypeMap:this.contentTypeMap,zIndex:this.params.containerZIndex};if(this.TagContainerSvelte){let l={};if(s.length===0)l=a;else for(const c of s)l[c]=a[c];this.TagContainerSvelte.$set(l)}else{if(!this.container)return console.error("updateRenderPlaneTag: tag2DContainer not found");this.TagContainerSvelte=new x7({target:this.container,props:fe(F({},a),{state:fe(F({},this.state),{enabled:!1})})}),Zr(()=>{var l;(l=this.TagContainerSvelte)==null||l.$set({state:this.state})})}}}),this.renderQueue.clear()});this.params=Ke({},{debug:!1,config:this.config},F({},i)),this.debug=this.params.debug,this.config=this.params.config,this.debug&&this.debugUtil.bindLog(),l4(1,{namespace:uh.PlayAudio});try{Array.isArray(window.__PANOTAGPLUGIN_DEBUG_LIST__)||(window.__PANOTAGPLUGIN_DEBUG_LIST__=[]),this.NAME=iv+"-"+window.__PANOTAGPLUGIN_DEBUG_LIST__.length,window.__PANOTAGPLUGIN_DEBUG_LIST__.push(this),window.__PANOTAGPLUGIN_DEBUG__||Object.defineProperty(window,"__PANOTAGPLUGIN_DEBUG__",{get:function(){return window.__PANOTAGPLUGIN_DEBUG_LIST__.sort((s,r)=>r.tags.length-s.tags.length)[0]}})}catch(s){}}appendTo(e){var s,r,o;this.container=e;const i=(r=(s=this.TagContainerSvelte)==null?void 0:s.$$)==null?void 0:r.root;i&&i!==this.container&&((o=this.TagContainerSvelte)==null||o.$destroy(),this.TagContainerSvelte=void 0)}load(e){return ee(this,null,function*(){var s,r;this.clearTags();try{console.debug(this.NAME," load:",{data:JSON.parse(JSON.stringify(e))})}catch(o){}this.config=Ke({},this.config,{globalConfig:(s=e.globalConfig)!=null?s:{},contentTypeConfig:(r=e.contentTypeConfig)!=null?r:{}});const i=yield this.addTag(e.tagList);return this.hooks.emit("loaded"),i})}addTag(e){return ee(this,null,function*(){const s=(Array.isArray(e)?e:[e]).filter(r=>r.position).map(r=>{const o=dh(r);if(o==="2DPoint"||o==="3DPoint")return new w4(this,r);if(o==="Model")return new S0(this,r);if(o==="Plane")return new vk(this,r)});return s.forEach(o4),this.tags.push(...s),this.tagsLengthWillUpdate=!0,ai(this.five).then(()=>ee(this,null,function*(){var r,o;this.store.eventListenerDisposer&&((o=(r=this.store).eventListenerDisposer)==null||o.call(r)),this.state.enabled&&this.handleEnable(),this.addResizeListener(),this.clearUnusedPanelTag(),this.tagsDo(s,a=>{this.tags.includes(a)&&(a.updateVisible(),a.updateZIndex())}),this.setUnfolded(),this.addRenderQueue({type:"TagContainerSvelte"}),this.hooks.emit("tagsLengthChange")}))})}changeConfig(e,i=!0){i?this.config=Ke({},this.config,e):this.config=e,this.tags.forEach(s=>{s.updateConfig()}),this.tagsDo(this.tags,s=>s.updateVisible())}changeGlobalConfig(e,i=!0){i?this.config.globalConfig=Ke({},this.config.globalConfig,e):this.config.globalConfig=e,this.tags.forEach(s=>{s.updateConfig()}),this.tagsDo(this.tags,s=>{s.updateVisible()})}changeContentTypeConfig(e,i,s=!0){this.config.contentTypeConfig||(this.config.contentTypeConfig={}),s?this.config.contentTypeConfig[e]=Ke({},this.config.contentTypeConfig[e],i):this.config.contentTypeConfig[e]=i,this.tags.forEach(r=>{r.updateConfig()}),this.tagsDo(this.tags,r=>{r.updateVisible()})}show(e){return ee(this,null,function*(){if(this.checkDisposed())return;const{userAction:i=!0}=e!=null?e:{};this.setState({visible:!0},{userAction:i}),this.hooks.emit("show",{userAction:i})})}hide(e){return ee(this,null,function*(){if(this.checkDisposed())return;const{userAction:i=!0}=e!=null?e:{};this.setState({visible:!1},{userAction:i}),this.hooks.emit("hide",{userAction:i})})}enable(e){if(this.checkDisposed())return;const{userAction:i=!0}=e!=null?e:{};this.setState({enabled:!0},{userAction:i}),this.hooks.emit("enable",{userAction:i})}disable(e){if(this.checkDisposed())return;const{userAction:i=!0}=e!=null?e:{};this.setState({enabled:!1},{userAction:i}),this.hooks.emit("disable",{userAction:i})}setState(e,i){if(this.checkDisposed())return;const{userAction:s=!0}=i!=null?i:{},r=F({},this.state);this.state=Object.assign(this.state,e),r.visible!==this.state.visible&&(e.visible?this.handleShow():this.handleHide()),r.enabled!==this.state.enabled&&(e.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:r,userAction:s})}dispose(){var e,i,s,r,o,a;this.pauseCurrentMedia(),this.disposeAllCSS3DContainer(),(e=this.TagContainerSvelte)==null||e.$destroy(),this.filterCSS3DTag.forEach(l=>{var c;return(c=l.tag3DContentSvelte)==null?void 0:c.svelteApp.$destroy()}),this.tags.forEach(l=>l.cache.clear()),this.tags=[],this.tagsLengthWillUpdate=!0,this.hooks.emit("tagsLengthChange"),(i=this.store.disposers)==null||i.forEach(l=>l==null?void 0:l()),this.store.disposers=[],(r=(s=this.store).eventListenerDisposer)==null||r.call(s),this.store.eventListenerDisposer=void 0,(a=(o=this.store).resizeObserverDisposer)==null||a.call(o),this.store.resizeObserverDisposer=void 0,this.store.resizeObserverDisposerAdding=!1,this.five.scene.remove(this.group),this.group.remove(...this.group.children),this.gltfObjectGroup.remove(...this.gltfObjectGroup.children),this.imagePlaneGroup.remove(...this.imagePlaneGroup.children),this.five.needsRender=!0,this.store.disposed=!0,this.hooks.emit("dispose")}blinkTagById(e,i){return ee(this,null,function*(){var s;return(s=this.getTagById(e))==null?void 0:s.blink(i)})}changeUnfoldedById(e,i){const s=this.getTagById(e);i?s==null||s.unfold():s==null||s.fold()}changeEnabledById(e,i){var r;const s=this.getTagById(e);s&&(s.enabled=i,(r=s.hooks)==null||r.emit(i?"enable":"disable"))}changeTagNormalById(e,i){const s=this.getTagById(e);s&&s.tag3DContentSvelte&&(s.tag3DContentSvelte.currentNormal=Cn(i))}changePositionById(e,i){const s=this.getTagById(e);s&&s.setPosition(i)}changeDataById(e,i,s=!0){const r=this.getTagById(e);r&&(r.setData(i,s),this.clearUnusedPanelTag(),r.hooks.emit("dataChanged",r.data))}changeStickTypeById(e,i,s=!0){this.changeTagById(e,i,s)}changeTagById(e,i,s=!0){const r=this.getTagById(e);r&&(r.set(i),r.updateVisible(),this.clearUnusedPanelTag(),r.hooks.emit("dataChanged",r.data))}destroyTagById(e){(Array.isArray(e)?e:[e]).forEach(s=>{var r;return(r=this.getTagById(s))==null?void 0:r.destroy()})}updateRenderAllTags(){this.tagsDo(this.tags,e=>e.updateVisible()),this.five.needsRender=!0}clearTags(){var e;this.tags.length&&(this.tags.forEach(i=>{var s,r,o,a,l,c;(s=i.tag3DContentSvelte)==null||s.dispose(),(o=(r=i.mediaPlane)==null?void 0:r.parent)==null||o.remove(i.mediaPlane),(c=(l=(a=i.model)==null?void 0:a.object)==null?void 0:l.parent)==null||c.remove(i.model.object)}),this.tags=[],this.tagsLengthWillUpdate=!0,this.hooks.emit("tagsLengthChange"),(e=this.TagContainerSvelte)==null||e.$destroy(),this.TagContainerSvelte=void 0,this.disposeAllCSS3DContainer()),this.enabledModelTagSet.clear(),this.cache.clear()}setUnfolded(){return ee(this,null,function*(){return new Promise(e=>{setTimeout(()=>{this.setUnfoldedByCamera(),e()},100)})})}handleShow(){this.state.visible=!0,this.group.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["state"]}),this.updateRenderAllTags(),this.five.needsRender=!0}handleHide(){this.pauseCurrentMedia(),this.state.visible=!1,this.group.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["state"]}),this.five.needsRender=!0}handleEnable(){this.state.enabled=!0,this.store.eventListenerDisposer=this.addEventListener(),this.five.scene.children.includes(this.group)||this.five.scene.add(this.group),this.five.needsRender=!0}handleDisable(){var e,i,s;this.pauseCurrentMedia(),this.state.enabled=!1,(i=(e=this.store).eventListenerDisposer)==null||i.call(e),this.five.scene.remove(this.group),(s=this.TagContainerSvelte)==null||s.$set({tags:[]}),this.five.needsRender=!0}addResizeListener(){if(!this.store.resizeObserverDisposer&&!this.store.resizeObserverDisposerAdding){const e=this.addResizeObserver();this.store.resizeObserverDisposerAdding=!0,setTimeout(()=>{this.store.resizeObserverDisposer=e,this.store.resizeObserverDisposerAdding=!1},200)}}addResizeObserver(){if(this.store.disposed)return;const e=this.five.getElement(),i=()=>{this.state.enabled&&(this.filterPointTag.forEach(c=>c.updateScreenPosition({force:!0})),this.temporaryState.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}))},s=()=>{this.state.enabled&&(this.temporaryState.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}))},{observe:r,unobserve:o}=Xo(n4(()=>{this.store.resizeObserverDisposer&&s()},500),e),{observe:a,unobserve:l}=Xo(Nm(()=>i(),400),e);return r(),a(),()=>{o(),l()}}setUnfoldedByCamera(){let e=!1;this.filterPointTag.forEach(i=>{const s=i.getUnfoldedByCamera();if(i.state&&s!==void 0){if(s===!0&&i.screenPosition){const r=i.getConfig().unfoldedConfig;ys(r).keep!=="unfolded"&&(e=!0)}i.state.unfolded=s}}),e&&this.filterPointTag.forEach(i=>{const s=i.getConfig().unfoldedConfig;typeof s=="object"&&(s.autoUnfold||s.autoUnfold===!1||ys(s.autoUnfold).enable===!1||s.keep)||i.state&&(i.state.unfolded=!1)})}changeTagMode(e,i){var s;(s=e.tag3DContentSvelte)!=null&&s.css3DInstance&&(e.tag3DContentSvelte.css3DInstance.mode=i)}addEventListener(){const{five:e,hooks:i}=this,s=Ol(this.five,this.onFiveEveryReady);return this.handleFivePanoArrived(),e.on("wantsMoveToPano",this.handleFiveWantsMoveToPano),e.on("models.refined",this.onFiveRefined),e.on("modeChange",this.handleFiveModeChange),e.on("modelShownFloorChange",this.handleFiveModelShownFloorChange),e.on("cameraUpdate",this.handleFiveCameraUpdate),e.on("cameraFovUpdate",this.handleFiveCameraFovUpdate),e.on("panoArrived",this.handleFivePanoArrived),e.on("panoArrived",this.loadVideoFirstFrame),e.on("render.prepare",this.render),i.on("click",this.clickhandler),()=>{s(),e.off("wantsMoveToPano",this.handleFiveWantsMoveToPano),e.off("models.refined",this.onFiveRefined),e.off("modeChange",this.handleFiveModeChange),e.off("modelShownFloorChange",this.handleFiveModelShownFloorChange),e.off("cameraUpdate",this.handleFiveCameraUpdate),e.off("cameraFovUpdate",this.handleFiveCameraFovUpdate),e.off("panoArrived",this.handleFivePanoArrived),e.off("panoArrived",this.loadVideoFirstFrame),e.off("render.prepare",this.render),i.off("click",this.clickhandler),this.store.eventListenerDisposer=void 0}}setTagHoverEnabled(e,i){const s=this.getTagById(e);s&&(s.hoverEnabled=i)}getTagHoverEnabled(e){const i=this.getTagById(e);return i==null?void 0:i.hoverEnabled}setGlobalHoverEnabled(e){this.globalHoverEnabled=e}getGlobalHoverEnabled(){return this.globalHoverEnabled}}const S7=(n,t)=>new al(n,t);function L7(n){De(n,"svelte-4qjwer",".guide-line__tag.svelte-4qjwer.svelte-4qjwer{position:relative}.text-with-distance.svelte-4qjwer.svelte-4qjwer{display:flex;flex-direction:column;position:relative;padding:0.125rem 0.25rem;border-radius:0.125rem;background:linear-gradient(to top, rgba(147, 147, 147, 0.3), rgba(74, 74, 74, 0.3));box-shadow:0 0.125rem 0.5rem 0 rgba(0, 0, 0, 0.2)}.text-with-distance.svelte-4qjwer .border.svelte-4qjwer{position:absolute;top:-50%;right:-50%;bottom:-50%;left:-50%;padding:0.0625rem;border-radius:0.25rem;background:linear-gradient(to right, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.2));-webkit-mask:linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);mask:linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);mask-composite:exclude;-webkit-mask-composite:xor;transform:scale(0.5)}.distance-and-name.svelte-4qjwer.svelte-4qjwer{display:flex;gap:0.1875rem}.distance.svelte-4qjwer.svelte-4qjwer{white-space:nowrap;font-size:0.625rem;line-height:0.875rem;color:#66afff}.name.svelte-4qjwer.svelte-4qjwer{opacity:0.6;font-size:0.625rem;line-height:0.875rem;white-space:nowrap;color:#ffffff}.line-name.svelte-4qjwer.svelte-4qjwer{color:#fff;white-space:nowrap;font-size:0.625rem;line-height:0.875rem}.guide-line__tag-point.svelte-4qjwer.svelte-4qjwer{position:absolute;left:50%;bottom:0.0625rem;width:0.4375rem;height:0.125rem;transform:translateX(-50%);background:#fff;border-radius:50%;opacity:0.5}.guide-line__tag-line.svelte-4qjwer.svelte-4qjwer{position:absolute;left:50%;bottom:0.0625rem;width:0.0625rem;height:1.875rem;transform:translateX(-50%);background:linear-gradient(to top, #fff, rgba(255, 255, 255, 0))}.guide-line__tag-content.svelte-4qjwer.svelte-4qjwer{position:absolute;left:-0.9375rem;bottom:1.9375rem;display:flex}.guide-line__tag-icon.svelte-4qjwer.svelte-4qjwer{width:1.875rem;height:1.875rem;background-size:100%}.guide-line__tag-text.svelte-4qjwer.svelte-4qjwer{box-sizing:content-box;height:0.875rem;width:-moz-max-content;width:max-content;margin-top:0.3125rem;transform:translateX(-0.1875rem);white-space:nowrap;font-size:0.625rem;line-height:0.875rem;border:solid transparent;border-width:0.125rem 0.5rem 0.125rem 0.375rem;border-image-slice:6 25 6 18 fill;color:#fff}")}function nv(n){let t,e;return{c(){t=U("div"),e=Ve(n[0]),y(t,"class","guide-line__tag-text svelte-4qjwer"),Q(t,"border-image-source",`url(${n[6]})`)},m(i,s){Y(i,t,s),V(t,e)},p(i,s){s&1&&Ge(e,i[0])},d(i){i&&X(t)}}}function sv(n){let t,e,i,s,r=n[5]("全程")+"",o,a,l=n[5]("米")+"",c,h,d,f,g,p,m=n[4]&&rv(n);return{c(){t=U("div"),m&&m.c(),e=ae(),i=U("div"),s=U("span"),o=Ve(r),a=Ve(n[2]),c=Ve(l),h=ae(),d=U("span"),f=Ve(n[0]),g=ae(),p=U("div"),y(s,"class","distance svelte-4qjwer"),y(d,"class","name svelte-4qjwer"),y(i,"class","distance-and-name svelte-4qjwer"),y(p,"class","border svelte-4qjwer"),y(t,"class","text-with-distance svelte-4qjwer")},m(v,b){Y(v,t,b),m&&m.m(t,null),V(t,e),V(t,i),V(i,s),V(s,o),V(s,a),V(s,c),V(i,h),V(i,d),V(d,f),V(t,g),V(t,p)},p(v,b){v[4]?m?m.p(v,b):(m=rv(v),m.c(),m.m(t,e)):m&&(m.d(1),m=null),b&32&&r!==(r=v[5]("全程")+"")&&Ge(o,r),b&4&&Ge(a,v[2]),b&32&&l!==(l=v[5]("米")+"")&&Ge(c,l),b&1&&Ge(f,v[0])},d(v){v&&X(t),m&&m.d()}}}function rv(n){let t,e;return{c(){t=U("span"),e=Ve(n[4]),y(t,"class","line-name svelte-4qjwer")},m(i,s){Y(i,t,s),V(t,e)},p(i,s){s&16&&Ge(e,i[4])},d(i){i&&X(t)}}}function T7(n){let t,e,i,s,r,o,a,l,c,h=n[0]&&!n[2]&&nv(n),d=n[2]&&sv(n);return{c(){t=U("div"),e=U("div"),i=ae(),s=U("div"),r=ae(),o=U("div"),a=U("div"),l=ae(),h&&h.c(),c=ae(),d&&d.c(),y(e,"class","guide-line__tag-point svelte-4qjwer"),y(s,"class","guide-line__tag-line svelte-4qjwer"),y(a,"class","guide-line__tag-icon svelte-4qjwer"),Q(a,"background-image",`url(${n[1]})`),y(o,"class","guide-line__tag-content svelte-4qjwer"),y(t,"class","guide-line__tag svelte-4qjwer"),Q(t,"opacity",n[3])},m(f,g){Y(f,t,g),V(t,e),V(t,i),V(t,s),V(t,r),V(t,o),V(o,a),V(o,l),h&&h.m(o,null),V(o,c),d&&d.m(o,null)},p(f,[g]){g&2&&Q(a,"background-image",`url(${f[1]})`),f[0]&&!f[2]?h?h.p(f,g):(h=nv(f),h.c(),h.m(o,c)):h&&(h.d(1),h=null),f[2]?d?d.p(f,g):(d=sv(f),d.c(),d.m(o,null)):d&&(d.d(1),d=null),g&8&&Q(t,"opacity",f[3])},i:re,o:re,d(f){f&&X(t),h&&h.d(),d&&d.d()}}}function z7(n,t,e){let{text:i=""}=t,{icon_url:s=""}=t,{distance:r=0}=t,{opacity:o=1}=t,{name:a=""}=t,{i18n:l=h=>h}=t;const c="data:image/png;base64,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";return n.$$set=h=>{"text"in h&&e(0,i=h.text),"icon_url"in h&&e(1,s=h.icon_url),"distance"in h&&e(2,r=h.distance),"opacity"in h&&e(3,o=h.opacity),"name"in h&&e(4,a=h.name),"i18n"in h&&e(5,l=h.i18n)},[i,s,r,o,a,l,c]}class O7 extends Me{constructor(t){super(),Ie(this,t,z7,T7,Pe,{text:0,icon_url:1,distance:2,opacity:3,name:4,i18n:5},L7)}}function j7(n){return n.length===0?[]:n.filter((t,e)=>t!==n[e-1])}function V7(n,t,e){if(n.length<2)return[];const i=[];n.forEach((o,a)=>{var d,f,g,p,m,v,b,w;let l=(d=e==null?void 0:e.route_standing_positions)==null?void 0:d[o];if(l||(l=(g=(f=t.observers[o])==null?void 0:f.standingPosition)==null?void 0:g.toArray()),!l)return;const c=n[a-1],h=(w=(m=(p=e==null?void 0:e.node_pair_to_route_points)==null?void 0:p[`${c}:${o}`])==null?void 0:m.slice())!=null?w:(b=(v=e==null?void 0:e.node_pair_to_route_points)==null?void 0:v[`${o}:${c}`])==null?void 0:b.slice().reverse();h==null||h.forEach(x=>{i.push(x)}),i.push(l)});const s=t.transform,r=i.map(o=>Ns(new P.Vector3().fromArray(o),s).toArray());return[fe(F({},e),{type:"CatmullRomCurve3",points:r})]}const B7=`
  varying vec2 vUv;
  varying float ignoreAnimationMap;
  attribute float animationWillError;

  void main() {
    vUv = uv;
    ignoreAnimationMap = animationWillError;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,_7=`
  precision highp float;
  precision mediump int;
  // 是否使用颜色
  uniform int useMapColor;
  // 贴图
  uniform sampler2D map;
  // 贴图颜色
  uniform vec3 mapColor;
  // 贴图透明度
  uniform float mapOpacity;
  // 背景颜色
  uniform vec3 backgroundColor;
  // 边框颜色
  uniform vec3 borderColor;
  // 边框透明度
  uniform float borderOpacity;
  // 边框宽度
  uniform float borderWidth;
  // 背景透明度
  uniform float backgroundOpacity;
  // @link https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip
  uniform int backgroundClip;
  // 整体透明度
  uniform float opacity;
  // 最大 U 值
  uniform float maxV;
  // v offset
  uniform float vOffset;
  // 闪烁动画值
  uniform float flicker;
  // 纹理坐标
  varying vec2 vUv;
  varying float ignoreAnimationMap;

  // 获取纹理颜色
  vec4 getImage() {
    vec2 uv = vUv;
    uv.y = uv.y - vOffset;

    if (ignoreAnimationMap == 1.0) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    }

    // 原始贴图颜色
    vec4 image = texture2D(map, uv);
    // 如果使用颜色
    if (useMapColor == 1) {
      // 混合颜色
      image = mix(image, vec4(mapColor, image.a), image.a);
    }
    image.a = image.a * mapOpacity;
    return image;
  }

  // 获取线性渐变的透明度
  float linearGradientOpacity() {
    // 当前的 v 值
    float v = vUv.y;
    float gradientLength = 1.0;
    if (v <= gradientLength) {
      return v / gradientLength; // 在 [0, gradientLength] 范围内，透明度为 [0, 1]
    } else if (v <= maxV - gradientLength) {
      return 1.0; // 在 (gradientLength, maxV - gradientLength) 范围内，透明度为 1
    } else {
      return (maxV - v) / gradientLength; // 在 [maxV - gradientLength, maxV] 范围内，透明度为 [1, 0]
    }
  }

  // 获取边框颜色
  vec4 getBorder() {
    float u = vUv.x;
    if (u <= borderWidth || u >= 1.0 - borderWidth) {
      return vec4(borderColor, borderOpacity);
    }
    return vec4(0.0, 0.0, 0.0, 0.0);
  }

  // 获取背景色
  vec4 getBackground() {
    // border-box
    if (backgroundClip == 0) {
      return vec4(backgroundColor, backgroundOpacity);
    } else {
    // padding-box
      float u = vUv.x;
      if (u > borderWidth && u < 1.0 - borderWidth) {
        return vec4(backgroundColor, backgroundOpacity);
      }
      return vec4(0.0, 0.0, 0.0, 0.0);
    }
  }

  // 根据摄像机位置计算透明度
  float distanceOpacity() {
    return 1.0;
  }

  void main() {
    float v = vUv.y;
    vec4 image = getImage();
    vec4 border = getBorder();
    vec4 background = getBackground();
    // 设置背景颜色
    gl_FragColor = background;
    // 混合颜色和背景
    gl_FragColor = mix(background, vec4(image.rgb, image.a * 0.4 + 0.6), image.a); //  image.a * 0.4 + 0.6 先这么写，但是不是最优解
    // 混合边框
    gl_FragColor = mix(gl_FragColor, border, border.a);
    // 设置整体透明度
    gl_FragColor.a = gl_FragColor.a * opacity;
    gl_FragColor.a = gl_FragColor.a * linearGradientOpacity();
    gl_FragColor.a = gl_FragColor.a * distanceOpacity();
    gl_FragColor.a = gl_FragColor.a * flicker;
  }
`;class Th{constructor(t,e){u(this,"name","");u(this,"startTagContainer");u(this,"endTagContainer");u(this,"path",[]);u(this,"geometryStyle",{});u(this,"materialStyle",{});u(this,"meshStyle",{});u(this,"group",new P.Group);u(this,"mesh");u(this,"visible",null);u(this,"five");u(this,"mode");u(this,"_curvePath",null);u(this,"_curvePoints",null);u(this,"_panoGroup",[]);u(this,"skippedPositions",null);u(this,"textureUrl","");u(this,"scale",1);u(this,"width",.5);u(this,"unitLength",.5);u(this,"_visibleFloorIndexes",null);u(this,"modeVisible",!1);u(this,"floorVisible",!0);u(this,"defaultVisible",!1);u(this,"inWalkAnimation",!1);u(this,"customVisible",null);u(this,"parent");u(this,"plugin");u(this,"textureHasLoaded",!1);u(this,"disposed",!1);u(this,"flowAnime",new ls({progress:0}).to({progress:1}).duration(1500).repeat(1/0));u(this,"cacheLengths",[]);u(this,"heightOffset",0);u(this,"dispose",()=>{var t,e;this.disposed||(this.disposed=!0,this.parent.hooks.off("show",this.updateVisible),this.parent.hooks.off("hide",this.updateVisible),this.plugin.hooks.off("show",this.updateVisible),this.plugin.hooks.off("hide",this.updateVisible),this.plugin.hooks.off("enable",this.updateVisible),this.plugin.hooks.off("disable",this.updateVisible),this.five.off("modeChange",this.onFiveModeChange),this.five.off("modelShownFloorChange",this.onFiveModelShownFloorChange),this.doHide(),(t=this.startTagContainer)==null||t.plugin.dispose(),(e=this.endTagContainer)==null||e.plugin.dispose())});u(this,"onWalkAnimationStart",()=>{this.inWalkAnimation=!0,this.updateVisible()});u(this,"onWalkAnimationEnd",()=>{this.inWalkAnimation=!1,this.updateVisible()});u(this,"onFiveModeChange",t=>{this.modeVisible=this.mode==="panorama"?In(t):oi(t),this.updateVisible()});u(this,"onFiveModelShownFloorChange",t=>{this.floorVisible=t===null||this.visibleFloorIndexes===null||this.visibleFloorIndexes.includes(t),this.updateVisible()});u(this,"updateVisible",()=>{const t=(()=>!this.parent.visible||!this.plugin.state.enabled||!this.plugin.state.visible?!1:this.customVisible!==null?this.customVisible:this.inWalkAnimation?!0:this.modeVisible&&this.defaultVisible&&this.floorVisible)();this.visible=t,t&&this.textureHasLoaded?this.doShow():this.doHide()});u(this,"onFlowAnimeUpdate",t=>{const{progress:e}=t;this.mesh.material.uniforms.vOffset.value=e,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0});u(this,"logError",t=>Om("GuideLineModeItem: ",t));var r,o;this.five=t,this.mode=e.mode,this.plugin=e.plugin,this.parent=e.parent,this.group.name="GuideLineModeItem";const i=new P.BufferGeometry,s=new P.ShaderMaterial({vertexShader:B7,fragmentShader:_7,transparent:!0,uniforms:{map:{value:null},useMapColor:{value:0},mapColor:{value:new P.Color},mapOpacity:{value:1},backgroundColor:{value:new P.Color},backgroundOpacity:{value:0},borderColor:{value:new P.Color},borderOpacity:{value:0},backgroundClip:{value:0},borderWidth:{value:.05},opacity:{value:1},flicker:{value:1},maxV:{value:0},vOffset:{value:0}}});this.mesh=new P.Mesh(i,s),this.mesh.name="GuideLineModeItem",this.group.add(this.mesh),this.mode==="panorama"&&(this.parent.hooks.on("walkStart",this.onWalkAnimationStart),this.parent.hooks.on("walkEnded",this.onWalkAnimationEnd)),this.updateVisible(),this.onFiveModeChange(this.five.getCurrentState().mode),this.onFiveModelShownFloorChange((o=(r=this.five.model)==null?void 0:r.shownFloor)!=null?o:null),this.flowAnime.onUpdate(this.onFlowAnimeUpdate),this.parent.hooks.on("show",this.updateVisible),this.parent.hooks.on("hide",this.updateVisible),this.plugin.hooks.on("show",this.updateVisible),this.plugin.hooks.on("hide",this.updateVisible),this.plugin.hooks.on("enable",this.updateVisible),this.plugin.hooks.on("disable",this.updateVisible),this.plugin.hooks.on("dispose",this.dispose),this.five.on("modeChange",this.onFiveModeChange),this.five.on("modelShownFloorChange",this.onFiveModelShownFloorChange),this.five.needsRender=!0}get panoGroup(){return this._panoGroup}get visibleFloorIndexes(){return this._visibleFloorIndexes}get curvePath(){return this._curvePath}get curvePoints(){return this._curvePoints}setCustomVisible(t){if(this.disposed)return this.logError("disposed");this.customVisible!==t&&(this.customVisible=t,this.updateVisible())}setDefaultVisible(t){if(this.disposed)return this.logError("disposed");this.defaultVisible!==t&&(this.defaultVisible=t,this.updateVisible())}setUnitSize(t,e){if(this.disposed)return this.logError("disposed");this.width=t,this.unitLength=e,this.setGeometryByPath(this.path,{width:t,unit_length:e})}setScale(t){if(this.disposed)return this.logError("disposed");this.scale=t,this.setGeometryByPath(this.path,{scale:t})}setGeometryByPanoGroup(t,e){if(this.disposed)return this.logError("disposed");if(!this.five.work)return this.logError("setPathByPanoGroup: work is not ready");const i=j7(t);if(this._panoGroup=i,(e==null?void 0:e.skipPanoGroup)!==void 0){const a=e.skipPanoGroup?i.map(l=>this.plugin.workUtil.getObserverStandingPosition(l)).filter(Fe):null;this.skippedPositions=a}const s=this.five.getCurrentState(),r=this.five.works.getWork(s.workCode),o=V7(i,r,e);this.path=o,this.setGeometryByPath(o,e)}setGeometryByPath(t,e){var h,d,f;if(this.disposed)return this.logError("disposed");const i=(h=e==null?void 0:e.scale)!=null?h:this.scale,s=(d=e==null?void 0:e.width)!=null?d:this.width,r=(f=e==null?void 0:e.unit_length)!=null?f:this.unitLength;this.scale=i,this.width=s,this.unitLength=r;const{geometry:o,maxV:a,curvePath:l,curvePoints:c}=YC({path:t,width:s*i,unitLength:r*i,skipPositions:this.skippedPositions});this._curvePath=l,this._curvePoints=c,this.mesh.geometry.copy(o),this.mesh.material.needsUpdate=!0,this.mesh.material.uniforms.maxV.value=a,this.five.needsRender=!0,this.path=t,this.geometryStyle=F(F({},this.geometryStyle),e)}setMartial(t){var i,s,r,o,a;if(this.disposed)return this.logError("disposed");this.setDefaultVisible((i=t==null?void 0:t.visible)!=null?i:!1),this.setColor((s=t==null?void 0:t.color)!=null?s:"#ffffff"),this.setOpacity((r=t==null?void 0:t.opacity)!=null?r:.5),this.setTextureUrl((a=(o=t==null?void 0:t.texture)==null?void 0:o.url)!=null?a:"https://vr-image-4.realsee-cdn.cn/release/web/arrow1.ebe7d0ff.png"),(t==null?void 0:t.background_color)!==void 0&&this.setBackgroundColor(t.background_color),(t==null?void 0:t.background_opacity)!==void 0&&this.setBackgroundOpacity(t.background_opacity),(t==null?void 0:t.border_color)!==void 0&&this.setBorderColor(t.border_color),(t==null?void 0:t.border_opacity)!==void 0&&this.setBorderOpacity(t.border_opacity),(t==null?void 0:t.border_width)!==void 0&&this.setBorderWidth(t.border_width),(t==null?void 0:t.background_clip)!==void 0&&this.setBackgroundClip(t.background_clip);const e=F(F({},this.materialStyle),t);this.materialStyle=e}setMeshStyle(t){if(t!=null&&t.translate){const s=new P.Vector3,r=new P.Vector3().fromArray(t.translate);r.y+=this.heightOffset,s.add(r),this.group.position.copy(s),i(this.startTagContainer,r),i(this.endTagContainer,r)}const e=F(F({},this.meshStyle),t);this.meshStyle=e;function i(s,r){if(!(s!=null&&s.tag))return;const o=new P.Vector3().fromArray(s.tag.position);o.add(r);const a=o.toArray();s.plugin.changeTagById(s.tag.id,{position:a})}}setHeightOffset(t){const e=new P.Vector3;this.meshStyle.translate&&e.add(new P.Vector3().fromArray(this.meshStyle.translate)),e.setY(e.y+t),this.group.position.copy(e),this.heightOffset=t,this.five.needsRender=!0}setColor(t){if(this.disposed)return this.logError("disposed");t&&(this.mesh.material.uniforms.mapColor.value=new P.Color().set(t)),this.mesh.material.uniforms.useMapColor.value=t?1:0,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBorderColor(t){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.borderColor.value=new P.Color().set(t),this.five.needsRender=!0}setBorderOpacity(t){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.borderOpacity.value=t,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBackgroundClip(t){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.backgroundClip.value=t==="border-box"?0:1,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBorderWidth(t){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.borderWidth.value=t,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBackgroundColor(t){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.backgroundColor.value=new P.Color().set(t),this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBackgroundOpacity(t){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.backgroundOpacity.value=t,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setOpacity(t){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.opacity.value=t,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setMapOpacity(t){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.mapOpacity.value=t,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setTextureUrl(t){if(this.disposed)return this.logError("disposed");this.textureUrl=t,ms(t).then(e=>{this.disposed||this.textureUrl===t&&(e.wrapT=P.RepeatWrapping,this.textureHasLoaded=!0,this.mesh.material.uniforms.map.value=e,this.mesh.material.uniformsNeedUpdate=!0,this.mesh.material.needsUpdate=!0,this.five.needsRender=!0,this.updateVisible())})}setVisibleFloorIndexes(t){var e,i;if(this.disposed)return this.logError("disposed");this._visibleFloorIndexes=t,this.onFiveModelShownFloorChange((i=(e=this.five.model)==null?void 0:e.shownFloor)!=null?i:null)}setStartTag(t){this.setTag("start",t)}setEndTag(t){this.setTag("end",t)}flicker(){var t,e,i,s,r,o;if(this.disposed)return this.logError("disposed");oa([this.group,(i=(e=(t=this.startTagContainer)==null?void 0:t.plugin)==null?void 0:e.tags[0])==null?void 0:i.dom,(o=(r=(s=this.endTagContainer)==null?void 0:s.plugin)==null?void 0:r.tags[0])==null?void 0:o.dom],{loop:6,updateRender:()=>{this.five.needsRender=!0}})}getLengthByPanoGroupIndex(t){return this.disposed?this.logError("disposed"):this.cacheLengths.length!==0?this.cacheLengths[t]:(this.cacheLengths=this.getPanoGroupLengths(),this.cacheLengths[t])}getPanoGroupLengths(){var l,c,h,d;if(!this.curvePoints||!this.curvePath)return[];const t=this.curvePoints.length,e=(c=(l=this.curvePath)==null?void 0:l.getLength())!=null?c:0,i=t-1,s=e/i,r=(d=(h=this.curvePath)==null?void 0:h.getLengths(i))!=null?d:[],o=[];let a=0;for(let f=0;f<t;f++){const g=this.curvePoints[f],p=this.plugin.workUtil.getObserverStandingPosition(a);if(!p)break;p.clone().setY(0).distanceTo(g.clone().setY(0))<s&&(o.push(r[f]),a+=1)}return o}setTag(t,e){var l,c;const i=this.curvePath;if(!(e!=null&&e.data))return;const s=t==="start"?(l=this.startTagContainer)!=null?l:(()=>(this.startTagContainer={tag:null,plugin:new al(this.five,{containerZIndex:10})},this.startTagContainer))():(c=this.endTagContainer)!=null?c:(()=>(this.endTagContainer={tag:null,plugin:new al(this.five,{containerZIndex:10})},this.endTagContainer))(),o=Ke({},{contentType:"Custom",stickType:"2DPoint",config:{visibleConfig:{visibleFiveMode:["Floorplan","Mapview"],followModelVisibility:!1}},style:{point:{enabled:!1}},data:{}},e);s.tag=o,R7(o)&&(s.tag.element=h=>{var g,p;(g=s.app)==null||g.$destroy();const d=t==="start"?fe(F({},o.data),{name:this.name,distance:Math.round((p=i==null?void 0:i.getLength())!=null?p:0),i18n:this.plugin.config.i18n}):o.data,f=new O7({target:h,intro:!0,props:d});return s.app=f,()=>f.$destroy()}),s.plugin.load({tagList:[s.tag]});const a=this.meshStyle.translate;if(a&&o.position){const h=new P.Vector3().fromArray(o.position),d=new P.Vector3().fromArray(a);h.add(d),h.y+=this.heightOffset;const f=h.toArray();s.plugin.changeTagById(s.tag.id,{position:f})}}doShow(){var t,e;this.mode==="model"&&!this.flowAnime.isPlaying()&&this.flowAnime.play(),this.five.scene.add(this.group),(t=this.startTagContainer)==null||t.plugin.show(),(e=this.endTagContainer)==null||e.plugin.show(),this.five.needsRender=!0}doHide(){var t,e;this.mode==="model"&&this.flowAnime.stop(),this.five.scene.remove(this.group),(t=this.startTagContainer)==null||t.plugin.hide(),(e=this.endTagContainer)==null||e.plugin.hide(),this.five.needsRender=!0}}function R7(n){return n.contentType==="Custom"}const F7=Object.freeze(Object.defineProperty({__proto__:null,GuideLineModeItem:Th},Symbol.toStringTag,{value:"Module"})),ov="CruisePlugin",zh=`${ov}`;class av extends Bn{constructor(e,i){super(e,i);u(this,"state",{visible:!0,enabled:!0,disposed:!1,playing:!1,speed:1});u(this,"data");u(this,"config");u(this,"pauseDataMap",new Map);u(this,"privateState",{playing:!1,broke:!1,modeChanging:!1});u(this,"GuideLine");u(this,"disposedErrorLog",()=>{console.error(`${zh} is disposed`)});u(this,"disableWarnLog",()=>{console.warn(`${zh} is disabled`)});u(this,"disableErrorLog",()=>{console.error(`${zh} is disabled`)});this.config=i,Object.assign(window,{[`__${ov}_DEBUG__`]:this})}play(e){this.setState({playing:!0},e)}pause(e){this.setState({playing:!1},e)}show(e){return ee(this,null,function*(){this.setState({visible:!0},e)})}hide(e){return ee(this,null,function*(){this.setState({visible:!1},e)})}enable(e){this.setState({enabled:!0},e)}disable(e){this.setState({enabled:!1},e)}dispose(){this.setState({disposed:!0})}setState(e,i){var r;if(this.state.disposed)return this.disposedErrorLog();if(!this.state.enabled&&e.enabled!==!0&&e.disposed!==!0)return this.disableErrorLog();const s=F({},this.state);this.state=Ke({},this.state,e),e.disposed!==void 0&&e.disposed!==s.disposed&&e.disposed&&this.handleDispose(),e.visible!==void 0&&e.visible!==s.visible&&this.handleVisible(e.visible,i==null?void 0:i.userAction),e.enabled!==void 0&&e.enabled!==s.enabled&&this.handleEnable(e.enabled,i==null?void 0:i.userAction),e.playing!==void 0&&e.playing!==s.playing&&this.changePlayState(e.playing,i),e.speed!==void 0&&e.speed!==s.speed&&this.changeSpeed(e.speed),Nt(s,this.state,{deep:!0})||this.hooks.emit("stateChange",{state:this.state,prevState:s,userAction:(r=i==null?void 0:i.userAction)!=null?r:!0})}clearPauseData(){var e,i;if((e=this.data)!=null&&e.id)return this.pauseDataMap.delete((i=this.data)==null?void 0:i.id)}changePlayState(e,i){this.actionIfStateIsEnabled(()=>{var s;return this.hooks.emit("playStateChange",e?"playing":"pause",{userAction:(s=i==null?void 0:i.userAction)!=null?s:!0})}),e?this.handlePlay(i):this.handlePause(i),this.state.playing=e}handleEnable(e,i=!0){var s,r;e?((s=this.GuideLine)==null||s.enable(),this.hooks.emit("enable",{userAction:i})):((r=this.GuideLine)==null||r.disable(),this.changePlayState(!1,{userAction:i}),this.hooks.emit("disable",{userAction:i})),this.state.enabled=e}handleVisible(e,i=!0){var s,r;e?((s=this.GuideLine)==null||s.show(),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:i}))):((r=this.GuideLine)==null||r.hide(),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:i}))),this.state.visible=e}addInterruptListener(e){const i=()=>{this.privateState.modeChanging||e()},s=r=>{r!=="mouseMove"&&(e(),this.five.off("gesture",s))};return this.five.on("gesture",s),this.five.once("wantsChangeMode",i),()=>{this.five.off("gesture",s),this.five.off("wantsChangeMode",i)}}getSpeededDuration(e){return e/this.state.speed}forceInteruptUpdateCamera(){this.five.updateCamera({},0)}getPauseData(){var e;if((e=this.data)!=null&&e.id)return this.pauseDataMap.get(this.data.id)}setPauseData(){var i;const e=(i=this.data)==null?void 0:i.id;if(e)return this.pauseDataMap.set(e,{fiveState:this.five.getCurrentState(),playedProgress:this.getProgress()})}clear(){this.clearPauseData()}handleDispose(){var e;this.setState({playing:!1}),this.clearPauseData(),this.clear(),(e=this.GuideLine)==null||e.dispose(),this.GuideLine=void 0}actionIfStateIsEnabled(e,i){if(this.state.enabled)return e();i!=null&&i.warnLog&&this.disableWarnLog()}}function Oh(n,t,e){var l,c,h;const i=new P.Vector3().fromArray([(l=e.x)!=null?l:0,(c=e.y)!=null?c:0,(h=e.z)!=null?h:0]),s=n.getPointAt(t).clone().add(i),r=n.getTangentAt(t),{longitude:o,latitude:a}=Xr(r);return{offset:s.clone(),longitude:o,latitude:a,distance:0}}let jh=class extends av{constructor(e,i){var o;super(e,i);u(this,"curve");u(this,"baseCurveOffset");u(this,"curveOffset");u(this,"playStartedTime",performance.now());u(this,"duration");u(this,"changeSpeed",(e,i=!0)=>{this.state.speed=e,this.hooks.emit("speedChange",e,{userAction:i})});u(this,"moveToStart",()=>{this.five.setState(fe(F({},Oh(this.curve,0,this.curveOffset)),{mode:"Model"}))});u(this,"playFromStart",()=>{this.clearPauseData(),this.setState({playing:!0})});u(this,"getDuration",()=>this.getSpeededDuration(this.duration));u(this,"getProgress",()=>{var l;const e=this.getPauseData();let i=(l=e==null?void 0:e.playedProgress)!=null?l:0;(i<0||i>=1)&&(i=0);const s=1-i,r=this.getDuration(),a=(performance.now()-this.playStartedTime)/r;return 1-s+a});const s={config:{speedConfig:{moveSpeed:2,moveSpeedUnit:"m/s"}}},r={allowBroke:!0};this.state=Ke({},s,this.state),this.config=Ke({},r,this.config),this.baseCurveOffset=Ke({x:0,y:0,z:0},{y:2},(o=this.config)==null?void 0:o.offset)}load(e,i){var a,l,c,h,d,f,g,p,m;this.handlePause(),this.clear(),this.data=F({id:Et()},e);const s=(()=>{if(this.data.path instanceof P.Curve)return this.data.path.curves[0];{if(this.data.path.length<2)return null;const v=this.data.path.map(Qe);return new P.CatmullRomCurve3(v,void 0,"catmullrom",.5)}})();if(!s)return;if(this.curve=s,this.curveOffset={x:this.baseCurveOffset.x+((l=(a=this.data.offset)==null?void 0:a.x)!=null?l:0),y:this.baseCurveOffset.y+((h=(c=this.data.offset)==null?void 0:c.y)!=null?h:0),z:this.baseCurveOffset.z+((f=(d=this.data.offset)==null?void 0:d.z)!=null?f:0)},!this.curve)throw new Error("curve is not defined");const r=this.curve.getLength(),o=this.state.config.speedConfig.moveSpeedUnit==="m/ms"?1:1e3;if(this.duration=r/(this.state.config.speedConfig.moveSpeed/o),Array.isArray(this.data.path)){const v=this.data.path.map(Qe).map(b=>b.toArray());!this.GuideLine&&(((g=this.config)==null?void 0:g.useGuideLine)!==!1&&e.useGuildLine||(p=this.config)!=null&&p.useGuideLine&&e.useGuildLine!==!1)&&(this.GuideLine=Y7(this.five,this.config)),(m=this.GuideLine)==null||m.load({lines:[{id:Et(),path:[{type:"CatmullRomCurve3",points:v}],model_style:{visible:!0}}]})}return i?this.setState(i):(this.setState({playing:!1}),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),this.changePlayState(this.state.playing),this.changeSpeed(this.state.speed)),Promise.resolve()}handlePlay(){return new Promise((e,i)=>ee(this,null,function*(){var l;this.hooks.emit("play",{userAction:!0});const s=this.getPauseData();let r=(l=s==null?void 0:s.playedProgress)!=null?l:0;(r<0||r>=1)&&(r=0);const o=Oh(this.curve,r,this.curveOffset);if(this.hooks.emit("progressChange",r),this.five.setState(fe(F({},o),{mode:"Model"})),yield this.five.ready(),this.playStartedTime=performance.now(),this.config.allowBroke){const c=this.addInterruptListener(()=>{this.state.playing&&(this.hooks.emit("broke"),this.handlePause(),c(),i(new Error("broke")))})}const a=()=>{const c=this.getProgress();if(c>=1)this.five.off("renderFrame",a),this.setState({playing:!1},{userAction:!1}),this.hooks.emit("end"),this.hooks.emit("progressChange",1),e("end");else if(this.state.playing===!1)this.five.off("renderFrame",a);else if(c>=0){const h=Oh(this.curve,c,this.curveOffset);this.hooks.emit("progressChange",c),this.five.setState(h,!0)}};this.five.on("renderFrame",a)}))}handlePause(e){var i;this.state.playing=!1,this.hooks.emit("pause",{userAction:(i=e==null?void 0:e.userAction)!=null?i:!0}),this.setPauseData()}};function lv(n){const t=Math.abs(Math.cos(n.latitude));return new P.Vector3(-Math.sin(n.longitude)*t,-Math.sin(n.latitude),-Math.cos(n.longitude)*t)}function N7(n,t){const e=lv(n),i=lv(t);return e.angleTo(i)}const G7=n=>ee(this,null,function*(){try{n().then(()=>{},()=>{}).catch(()=>{})}catch(t){}});function cv(n){return new Promise(t=>{setTimeout(()=>{t()},n)})}function H7(n){return ee(this,null,function*(){return new Promise(t=>{if(n.work){t();return}n.once("loaded",()=>t())})})}class wo extends av{constructor(e,i){super(e,i);u(this,"state",{visible:!0,enabled:!0,disposed:!1,playing:!1,speed:1,config:{speedConfig:{rotateSpeed:.001,rotateSpeedUnit:"rad/ms",moveSpeed:.002,moveSpeedUnit:"m/ms"}}});u(this,"privateState",{playing:!1,currentPlayQueue:[],currentPlayKeyframe:null,broke:!1,modeChanging:!1});this.config=i,Object.assign(window,{__WalkPlugin_DEBUG__:this})}load(e,i,s){return ee(this,null,function*(){var h,d;this.clear();const r=this.data?JSON.parse(JSON.stringify(this.data)):void 0,o=yield this.formatData(e);this.data=F({id:o.keyframesId},o),this.hooks.emit("dataChange",o,r);let a=[],l;const c=this.data.keyframes.filter(f=>f.data.panoIndex!==void 0);c.filter((f,g)=>{var p;return f.data.panoIndex!==((p=c[g-1])==null?void 0:p.data.panoIndex)}).map(f=>f.data.panoIndex).forEach(f=>{var p,m;const g=(p=this.workUtil.getObserver(f))==null?void 0:p.floorIndex;if(g!==void 0)if(l===g){const v=a.length-1;a[v]=[...(m=a[v])!=null?m:[],f]}else{l=g;const v=a.length;a[v]=[f]}}),!this.GuideLine&&((h=this.config)==null?void 0:h.useGuideLine)!==!1&&o.useGuildLine!==!1&&(this.GuideLine=Bh(this.five,this.config)),(d=this.GuideLine)==null||d.load({routes:a.map(f=>({panoIndexList:f})),config:o.guildPluginOptions}),i?this.setState(i,{userAction:s}):(this.setState({playing:!1},{userAction:!1}),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),this.changePlayState(this.state.playing,{userAction:!1}),this.changeSpeed(this.state.speed)),this.clearPauseData(),console.debug("WORKPLUGIN loaded",o),this.hooks.emit("dataLoaded",o)})}playFrom(e){const{index:i,id:s,userAction:r}=e;this.state.playing&&this.setState({playing:!1},{userAction:r}),this.setState({playing:!0},{userAction:r,playFromIndex:i,playFromId:s})}playFromStart(e){return this.playFrom(fe(F({},e),{index:0}))}formatData(e){return ee(this,null,function*(){this.five.work||(yield H7(this.five));const i=(()=>{const s=e;return typeof s=="object"&&s!==null&&Fe(s.version)&&s.data?s.data:s})();if(i.keyframes)return{keyframesId:Et(),keyframes:i.keyframes.map((s,r)=>{var l;const o=i.keyframes[r+1],a=(()=>!o||o.start===void 0||s.end===void 0?0:o.start-s.end)();return fe(F({id:(l=s.uuid)!=null?l:Et(),moveIndex:r,stay:a,index:r},s),{guildPluginOptions:i.guildPluginOptions})})};if(i.panoIndexList){let s=[];const{moveEffect:r,moveToFirstPanoEffect:o,moveToFirstPanoDuration:a}=i;return this.privateState.moveToFirstPanoEffect=o,this.privateState.moveToFirstPanoDuration=a,i.panoIndexList.forEach((l,c)=>{const h=(()=>{var m,v;const d=i.panoIndexList.slice(c).find(b=>b!==l);if(d===void 0)return;const f=this.workUtil.getObserverPosition(l),g=this.workUtil.getObserverPosition(d);if(!g||!f||((m=this.workUtil.getObserver(l))==null?void 0:m.floorIndex)!==((v=this.workUtil.getObserver(d))==null?void 0:v.floorIndex))return;const p=new P.Vector3().subVectors(g,f);return Xr(p.normalize())})();i.moveType===void 0||i.moveType==="justMove"?s.push({moveIndex:c,stay:i.stay,data:F({effect:"Move",panoIndex:l,moveEffect:r},h!=null?h:{})}):i.moveType==="moveAndRotate"&&(s.push({moveIndex:c,stay:i.stay,data:{effect:"Move",panoIndex:l,moveEffect:r}}),h&&s.push({moveIndex:c,stay:i.stay,data:F({effect:"Rotate",panoIndex:l},h)}))}),{keyframesId:Et(),keyframes:s.map((l,c)=>F({id:Et(),index:c},l)),guildPluginOptions:i.guildPluginOptions,useGuildLine:i.useGuildLine}}else throw new Error("format error: data no keyframes or no panoIndexList")})}handlePlay(e){return ee(this,null,function*(){var g;const{data:i,state:s,privateState:r,hooks:o}=this;if(r.playing||!(i!=null&&i.keyframes)||(i==null?void 0:i.keyframes.length)===0)return;const a=Et();r.playId=a,r.playing=!0,r.broke=!1;const l=i.keyframes,c=this.getPauseData();(e==null?void 0:e.notEmitEvent)!==!0&&o.emit("play",{userAction:(g=e==null?void 0:e.userAction)!=null?g:!0});let h=!1;const f=yield(()=>ee(this,null,function*(){var p,m;if((e==null?void 0:e.playFromIndex)!==void 0)return e.playFromIndex;if((e==null?void 0:e.playFromId)!==void 0)return(p=this.data)==null?void 0:p.keyframes.findIndex(v=>v.id===e.playFromId);if(c!=null&&c.id){const v=(m=this.data)==null?void 0:m.keyframes.find(b=>b.id===c.id);if(c!=null&&c.fiveState&&(yield this.move(c.fiveState,{moveEffect:r.moveToFirstPanoEffect,duration:r.moveToFirstPanoDuration})),v){if(v.data.effect==="Move")return v.index;if(v.data.effect==="Rotate"){const b=c.duration!==void 0?c.duration*(1-c.playedProgress):void 0;return yield this.playKeyframe(v,{duration:b}),h=!0,v.index+1}}}}))();this.clearPauseData();for(const p of l){if(r.broke||!s.playing||!r.playing||a!==r.playId)return;if(!(f!==void 0&&p.index<f))try{o.emit("playIndexChange",p.index,p),yield this.playKeyframe(p,{moveEffect:h===!1?r.moveToFirstPanoEffect:void 0,duration:h===!1&&typeof r.moveToFirstPanoDuration=="number"?r.moveToFirstPanoDuration:void 0}),p.stay&&(yield cv(p.stay)),h===!1&&(h=!0)}catch(m){return Promise.resolve("broke")}}s.playing&&a===r.playId&&(this.setState({playing:!1},{userAction:!1}),o.emit("end"),this.clearPauseData())})}handlePause(e){var o;const{state:i,privateState:s,hooks:r}=this;i.playing=!1,s.playing!==!1&&(s.playing=!1,(e==null?void 0:e.userAction)!==!1&&this.setPauseData(),s.broke||this.forceInteruptUpdateCamera(),(e==null?void 0:e.notEmitEvent)!==!0&&r.emit("pause",{userAction:(o=e==null?void 0:e.userAction)!=null?o:!0}))}changeSpeed(e,i=!0){var l;const{state:s,privateState:r,hooks:o}=this,{currentPlayKeyframe:a}=r;if(o.emit("speedChange",e,{userAction:i}),s.playing&&a)try{const c=a.originDuration!==void 0?a.originDuration*(1-this.getProgress()):void 0,h=a.keyframe,{privateState:d}=this;((l=this.privateState.currentPlayKeyframe)==null?void 0:l.keyframe.id)!==h.id&&(this.privateState.currentPlayKeyframe={keyframe:h}),d.currentPlayQueue.push(this.getPlayPromise(h,{duration:c}))}catch(c){console.error(c)}}getProgress(){return this.five.controller.cameraMotion.progress}setPauseData(){var e,i,s;if((e=this.data)!=null&&e.id)return this.pauseDataMap.set(this.data.id,{id:(i=this.privateState.currentPlayKeyframe)==null?void 0:i.keyframe.id,fiveState:this.five.getCurrentState(),duration:(s=this.privateState.currentPlayKeyframe)==null?void 0:s.originDuration,playedProgress:this.getProgress()})}clear(){this.clearPauseData(),this.privateState.currentPlayKeyframe=null}playKeyframe(e,i){return ee(this,null,function*(){var r;const{privateState:s}=this;return((r=this.privateState.currentPlayKeyframe)==null?void 0:r.keyframe.id)!==e.id&&(this.privateState.currentPlayKeyframe={keyframe:e}),s.currentPlayQueue.push(this.getPlayPromise(e,i)),this.actionPromiseQueue()})}getPlayPromise(s){return ee(this,arguments,function*(e,i={}){var o;const r=e.data;if(i.duration=(o=i.duration)!=null?o:e.start!==void 0&&e.end!==void 0?e.end-e.start:void 0,!!r)return new Promise((a,l)=>{let c=!1;this.addInterruptListener(()=>{if(!c)return this.hooks.emit("broke"),this.privateState.broke=!0,this.setState({playing:!1}),c=!0,l(new Error("play is interupted"))});try{if(c)return;const h=()=>{a(),c=!0};switch(r.effect){case"Move":this.move(r,i).then(h);break;case"Rotate":this.rotate(r,i).then(h);break;default:this.rotate(r,i).then(h)}}catch(h){}})})}actionPromiseQueue(){return ee(this,null,function*(){const{privateState:e}=this;return new Promise((i,s)=>{if(e.currentPlayQueue.length===0){i();return}const r=e.currentPlayQueue.shift();if(!r){i();return}r.then(i,s)}).then(()=>e.currentPlayQueue.length===0?Promise.resolve():this.actionPromiseQueue())})}move(e,i){return ee(this,null,function*(){if(e.mode&&e.mode!==this.five.currentMode)yield this.changeMode(e);else if(e.panoIndex!==this.five.panoIndex)yield this.changePano(e,i);else return Promise.resolve()})}rotate(e,i){return ee(this,null,function*(){if(e.mode&&e.mode!==this.five.currentMode)yield this.changeMode({mode:e.mode,panoIndex:e.panoIndex});else if(e.panoIndex&&e.panoIndex!==this.five.panoIndex)return yield this.changePano(e,i);yield this.updateCamera(e,i)})}updateCamera(s){return ee(this,arguments,function*(e,i={}){const{five:r,privateState:o,state:a}=this,l=(()=>{var g,p;const d=(g=a.config)==null?void 0:g.speedConfig,f=(p=e.rotateSpeed)!=null?p:d==null?void 0:d.rotateSpeed;if((d==null?void 0:d.rotateSpeedUnit)===void 0)return f;if(f!==void 0)return d.rotateSpeedUnit==="rad/ms"?f:f/1e3})(),c=(()=>{if(i.duration)return i.duration;if(l){const d=this.five.getCurrentState();return N7(d,e)/l}return 800})();o.currentPlayKeyframe&&(o.currentPlayKeyframe.originDuration=c);const h=this.getSpeededDuration(c);return new Promise(d=>{G7(()=>r.updateCamera(e,h)),setTimeout(()=>d(),h)})})}changePano(e,i){return ee(this,null,function*(){const{five:s,privateState:r,state:o}=this;if(typeof e.panoIndex!="number"||e.panoIndex===s.panoIndex)return;const a=s.getCurrentState().mode!=="Panorama";a&&(this.privateState.modeChanging=!0);const l=(()=>{var f,g;const h=(f=o.config)==null?void 0:f.speedConfig,d=(g=e.moveSpeed)!=null?g:h==null?void 0:h.moveSpeed;if((h==null?void 0:h.moveSpeedUnit)===void 0)return d;if(d!==void 0)return h.moveSpeedUnit==="m/ms"?d:d/1e3})(),c=(()=>{if(i!=null&&i.duration)return i.duration;if(l&&typeof s.panoIndex=="number"&&typeof e.panoIndex=="number"){const h=this.workUtil.getObserverPosition(s.panoIndex),d=this.workUtil.getObserverPosition(e.panoIndex);return h&&d?h.distanceTo(d)/l:800}return 800})();r.currentPlayKeyframe&&(r.currentPlayKeyframe.originDuration=c),yield new Promise(h=>{var f,g,p;const d=this.fiveUtil.moveToPano(e.panoIndex,{latitude:e.latitude,longitude:e.longitude,fov:e.fov,duration:this.getSpeededDuration(c),effect:(p=(g=i==null?void 0:i.moveEffect)!=null?g:(f=this.state.config)==null?void 0:f.moveEffect)!=null?p:e.moveEffect,moveCancelCallback:()=>h(),moveEndCallback:()=>h()});d instanceof Promise&&d.then(()=>h()),a&&s.once("panoArrived",()=>h())}),a&&(this.privateState.modeChanging=!1)})}changeMode(e,i){return ee(this,null,function*(){e.mode&&e.mode!==this.five.currentMode&&(this.privateState.modeChanging=!0,yield this.five.changeMode(e.mode,e,i),this.privateState.modeChanging=!1)})}}class hv{constructor(t){u(this,"id");u(this,"renderID");u(this,"isGuideLine",!0);u(this,"panoramaItem");u(this,"modelItem");u(this,"hooks",new Pt);u(this,"_visible",!0);u(this,"plugin");u(this,"five");u(this,"logError",t=>Om("GuideLineItem: ",t));this.id=t.id,this.five=t.five,this.plugin=t.plugin,this.panoramaItem=new Th(this.five,{mode:"panorama",plugin:this.plugin,parent:this}),this.modelItem=new Th(this.five,{mode:"model",plugin:this.plugin,parent:this})}get visible(){return this._visible}setData(t){this.setDataByMode("panorama",t),this.setDataByMode("model",t)}setDataByMode(t,e){var c;const i=t==="panorama"?this.panoramaItem:this.modelItem,s=t==="panorama"?e.panorama_style:e.model_style,r=e.path,o=s,a=s,l=s;if(e.pano_group){const h=t==="panorama"&&e.panorama_style.skip_group===!0;i.setGeometryByPanoGroup(e.pano_group,F(fe(F({},e),{skipPanoGroup:h}),o))}else e.path&&i.setGeometryByPath(r,F({},o));i.name=e.name,i.setMeshStyle(l),i.setMartial(a),i.setVisibleFloorIndexes((c=e.visible_floor_indexes)!=null?c:null),i.setStartTag(s==null?void 0:s.start_tag),i.setEndTag(s==null?void 0:s.end_tag)}show(){this._visible=!0,this.hooks.emit("show",{userAction:!0})}hide(){this._visible=!1,this.hooks.emit("hide",{userAction:!0})}dispose(){this.panoramaItem.dispose(),this.modelItem.dispose()}walk(t){return ee(this,null,function*(){if(this.hooks.emit("walkStart",{userAction:!0}),this.panoramaItem.panoGroup.length){const e=F({panoIndexList:this.panoramaItem.panoGroup},t),[i]=yield hs(U7(this.five,e));if(i)return this.logError(i.message)}else{const e={path:this.panoramaItem.curvePath},[i]=yield hs(W7(this.five,e));if(i)return this.logError(i.message)}this.hooks.emit("walkEnded",{userAction:!0})})}}function W7(n,t){return ee(this,null,function*(){const e=new jh(n);yield e.load(t),e.playFromStart()})}function U7(n,t){return ee(this,null,function*(){if(t.panoIndexList.length===0)return;const e=n.getCurrentState();e.mode!=="Panorama"&&(yield xc(n,["Panorama",{longitude:e.longitude,latitude:0,panoIndex:t.panoIndexList[0]}]));const i=new wo(n);yield i.load(t),yield new Promise((s,r)=>{const o=n.getCurrentState();let a=t.panoIndexList.slice();o.panoIndex===a[0]&&c(o.panoIndex),i.playFromStart();function l(g){if(g!=="Panorama")return d(new Error("mode not match"))}function c(g){const p=a[0];if(a=a.slice(1),g!==p)return d(new Error("panoIndex not match, wanted: "+p+", got: "+g));if(a.length===0)return f()}function h(){n.off("modeChange",l),n.off("panoArrived",c)}function d(g){h(),r(g)}function f(){h(),s()}n.on("modeChange",l),n.on("panoArrived",c)})})}const Q7=Object.freeze(Object.defineProperty({__proto__:null,GuideLineItem:hv},Symbol.toStringTag,{value:"Module"})),Vh="GuideLinePlugin",dv=`${Vh}`;let X7=class extends hn{constructor(e,i){super(e,i);u(this,"name",Vh);u(this,"cruisePlugin");u(this,"itemMap",new Map);u(this,"state",{visible:!1,enabled:!0});u(this,"data");u(this,"heightOffset",0);u(this,"_config");u(this,"_disposed",!1);u(this,"disposedErrorLog",()=>{console.error(`${dv} is disposed`)});this._config=i!=null?i:{},this.cruisePlugin=new wo(e),Object.assign(window,{[`__${Vh}_DEBUG__`]:this})}get config(){return this._config}get disposed(){return this._disposed}load(e,i,s=!0){return ee(this,null,function*(){var g,p,m,v,b,w,x;const r=this.data?JSON.parse(JSON.stringify(this.data)):void 0,o=yield this.formatData(e);this.hooks.emit("dataChange",o,r),this.data=o;const a=o.config,l=!o.lines&&o.routes,c=fe(F({},a),{panorama_style:{visible:!!l,unit_length:(g=a==null?void 0:a.unitHeight)!=null?g:.4,width:(p=a==null?void 0:a.unitWidth)!=null?p:.6,texture:{url:(m=a==null?void 0:a.arrowTextureUrl)!=null?m:this.staticPrefix+"/release/web/arrow-white.5c2c79a5.png"}}}),h=(b=(v=o.routes)==null?void 0:v.map(E=>{var L;return Ke({},c,{id:(L=E.id)!=null?L:Et(),pano_group:E.panoIndexList})}))!=null?b:[],d=(x=(w=o.lines)==null?void 0:w.map(E=>Ke({},c,E)))!=null?x:[],f=[...h,...d];yield ai(this.five),this.clear(),f.forEach(E=>{this.addGuideLineItem(E)}),this.updateTagsEnable(),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),i&&this.setState(i,{userAction:s}),this.hooks.emit("dataLoaded",o),console.debug(`${dv} loaded`,o)})}formatData(e){return ee(this,null,function*(){return this.getDataWithoutVersion(e)})}show(e){return ee(this,null,function*(){this.setState({visible:!0},e)})}hide(e){return ee(this,null,function*(){this.setState({visible:!1},e)})}enable(e){this.setState({enabled:!0},e)}disable(e){this.setState({enabled:!1},e)}dispose(){this.disposed||(this.clear(),this.hooks.emit("dispose"))}setState(e,i){var r;if(this.disposed)return this.disposedErrorLog();const s=F({},this.state);this.state=F(F({},this.state),e),e.visible!==void 0&&e.visible!==s.visible&&this.handleVisible(e.visible,i==null?void 0:i.userAction),e.enabled!==void 0&&e.enabled!==s.enabled&&this.handleEnable(e.enabled,i==null?void 0:i.userAction),Nt(s,this.state,{deep:!0})||(this.hooks.emit("stateChange",{state:this.state,prevState:s,userAction:(r=i==null?void 0:i.userAction)!=null?r:!0}),this.five.needsRender=!0)}addGuideLineItem(e){const i=e.render_id||e.id,s=this.itemMap.get(i);s&&this.removeGuideLineItem(s);const r=new hv({five:this.five,id:i,plugin:this});return this.itemMap.set(i,r),e&&r.setData(e),this.heightOffset+=1e-4,r.modelItem.setHeightOffset(this.heightOffset),r.panoramaItem.setHeightOffset(this.heightOffset),r}getGuideLineItemByID(e){return this.itemMap.get(e)}removeGuideLineItem(e){this.itemMap.delete(e.id),e.panoramaItem.dispose(),e.modelItem.dispose()}updateTagsEnable(){const e=[];function i(o){return Array.isArray(o)&&o.every(a=>typeof a=="number")}function s(o,a){return new P.Vector3().fromArray(o).distanceTo(new P.Vector3().fromArray(a))<.01}function r(o){var l;const a=(l=o==null?void 0:o.tag)==null?void 0:l.position;return i(a)?e.every(c=>{var h;return i((h=c.tag)==null?void 0:h.position)?!s(a,c.tag.position):!0}):!1}this.itemMap.forEach(o=>{const a=o.modelItem.startTagContainer,l=o.modelItem.endTagContainer,c=r(a);c&&e.push(a),a==null||a.plugin.setState({enabled:c},{});const h=r(l);h&&e.push(l),l==null||l.plugin.setState({enabled:h},{})})}clear(){this.heightOffset=0,this.itemMap.forEach(e=>{this.removeGuideLineItem(e)})}handleEnable(e,i=!0){this.hooks.emit(e?"enable":"disable",{userAction:i})}handleVisible(e,i=!0){this.state.enabled&&this.hooks.emit(e?"show":"hide",{userAction:i})}getDataWithoutVersion(e){return typeof e=="object"&&e!==null&&e.data?e.data:e}};const Bh=(n,t)=>new X7(n,t),Y7=Bh,Z7=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),J7=(n,t)=>new wo(n,t),q7=(n,t)=>new jh(n,t);function _h(n,t,e){if(e){const s=new P.Vector3().subVectors(n.position,e).applyQuaternion(n.quaternion.clone().inverse()).applyQuaternion(t).add(e);n.position.copy(s)}n.quaternion.copy(t)}class Po extends $t{constructor(e,i){var s,r;super();u(this,"originObject3D");u(this,"onRender");u(this,"positionFrom");this.originObject3D=e,this.onRender=(s=i==null?void 0:i.onRender)!=null?s:()=>{},this.positionFrom=(r=i==null?void 0:i.positionFrom)!=null?r:"objectPosition"}get helperObject(){return this}render(){this.onRender()}enable(){this.parent.children.includes(this)||this.parent.add(this)}disable(){this.removeFromParent()}show(){this.visible=!0,this.render()}hide(){this.visible=!1,this.render()}raycasterIntersectObject(e,i=[]){return e.intersectObject(this,!0,i)}initialPosition(e){var i,s;this.positionFrom==="objectPosition"?this.position.copy(this.originObject3D.position):this.positionFrom==="boundingBox"?this.position.copy((i=as(this.originObject3D))==null?void 0:i.getCenter(new P.Vector3).applyMatrix4(this.originObject3D.matrixWorld)):this.positionFrom==="boundingSphere"?this.position.copy((s=Ud(this.originObject3D))==null?void 0:s.center.clone().applyMatrix4(this.originObject3D.matrixWorld)):this.positionFrom instanceof B.Vector3?this.position.copy(this.positionFrom):this.positionFrom instanceof Function&&this.position.copy(this.positionFrom(this.originObject3D)),e&&this.position.add(e)}setScaleByCamera(e){}initQuaternion(e){if(this.quaternion.copy(this.originObject3D.quaternion),e&&(e.xAxis||e.yAxis||e.zAxis)){const i=e.xAxis instanceof Function?e.xAxis():e.xAxis,s=e.yAxis instanceof Function?e.yAxis():e.yAxis,r=e.zAxis instanceof Function?e.zAxis():e.zAxis;let o=i==null?void 0:i.clone(),a=s==null?void 0:s.clone(),l=r==null?void 0:r.clone();if(o&&!a&&!a){const c=new P.Quaternion().setFromUnitVectors(new P.Vector3(1,0,0),o.normalize());this.applyQuaternion(c)}if(a&&!o&&!l){const c=new P.Quaternion().setFromUnitVectors(new P.Vector3(0,1,0),a.normalize());this.applyQuaternion(c)}if(l&&!o&&!a){const c=new P.Quaternion().setFromUnitVectors(new P.Vector3(0,0,1),l.normalize());this.applyQuaternion(c)}if([o,a,l].filter(Fe).length>=2){o||(o=new P.Vector3().crossVectors(a,l).normalize()),a||(a=new P.Vector3().crossVectors(o,l).normalize()),l||(l=new P.Vector3().crossVectors(o,a).normalize()),o.applyQuaternion(this.quaternion),a.applyQuaternion(this.quaternion),l.applyQuaternion(this.quaternion);const c=new P.Matrix4().makeBasis(o,a,l),h=new P.Quaternion().setFromRotationMatrix(c);this.quaternion.copy(h)}}}applyHelperScaleMatrix4(e,i){this.scale.applyMatrix4(e)}setHelperQuaternion(e,i){this.initQuaternion(),_h(this,this.quaternion.clone().premultiply(e),i)}applyHelperQuaternion(e,i){if(i){const s=new B.Vector3().subVectors(this.position,i).applyQuaternion(e).add(i);this.position.copy(s)}this.applyQuaternion(e)}dispose(){this.removeFromParent()}}class K7 extends Po{}class $7 extends Po{}class e6 extends Po{}class t6 extends Po{}class i6 extends Po{}class n6 extends P.Group{constructor(e){super();u(this,"direction");this.direction=e||"x"}}class uv extends P.Mesh{constructor(e,i,s){super(e,i);u(this,"direction");this.direction=s||"x"}}function s6(n,t){const{offsetWidth:e,offsetHeight:i}=t,{top:s,left:r}=t.getBoundingClientRect();return Object.assign(new P.Vector2,{x:(n.x-r)/e*2-1,y:-(n.y-s)/i*2+1})}function ll(n,t,e){if(!t||!e||!n)return;const i=s6(t,e);if(Math.abs(i.x)===1||Math.abs(i.y)===1)return;const s=new P.Raycaster;return s.setFromCamera(i,n),s.params.Points.threshold=.1,s}class Rh extends n6{constructor(e){var h;super(e.direction);u(this,"line");u(this,"arrow");u(this,"lineHeight",.4);u(this,"arrowHeight",.1);u(this,"renderOrder",50);u(this,"name","ArrowGroup");const i=new P.Color((h=e.color)!=null?h:16214315),s=new P.MeshBasicMaterial({color:i,depthTest:!1,depthWrite:!1,transparent:!0}),r=new P.ConeGeometry(.04,.1,32),o=new uv(r,s.clone(),e.direction);o.name=`arrow-${e.direction}`,this.arrow=o;const a=.004,l=new P.CylinderGeometry(a,a,.4,32),c=new uv(l,s.clone(),e.direction);c.name=`line-${e.direction}`,this.line=c,this.formatArrow(),this.formatLine(),this.add(this.arrow,this.line)}formatArrow(){this.arrow.geometry.translate(0,this.lineHeight+this.arrowHeight/2,0),this.direction==="x"?(this.arrow.geometry.rotateX(Math.PI/2),this.arrow.geometry.rotateY(Math.PI/2)):this.direction==="z"&&this.arrow.geometry.rotateX(Math.PI/2)}formatLine(){this.line.geometry.translate(0,this.lineHeight/2,0),this.direction==="x"?(this.line.geometry.rotateX(Math.PI/2),this.line.geometry.rotateY(Math.PI/2)):this.direction==="z"&&this.line.geometry.rotateX(Math.PI/2)}}const Fh={X:15618642,Y:4765519,Z:4227839};class br{static get X(){return new P.Color(Fh.X).convertSRGBToLinear().clone()}static get Y(){return new P.Color(Fh.Y).convertSRGBToLinear().clone()}static get Z(){return new P.Color(Fh.Z).convertSRGBToLinear().clone()}}function Nh(n,t,e){const o=n.position.distanceTo(t),a=n.fov,l=n.distance||3,c=o/3,h=a/90,d=l/3,f=c*h*d,g=(e==null?void 0:e.min)||.6,p=e==null?void 0:e.max;return g&&f<g?g:p&&f>p?p:f}function r6(n,t,e){return n<t?t:n>e?e:n}function o6(n){let t=n.pose.latitude,e=n.pose.longitude;if(ei(t)||ei(e)){const i=n.matrix.elements;t=Math.asin(r6(i[9],-1,1)),Math.abs(i[9])<.9999999?e=sc(Math.atan2(i[8],i[10])):e=sc(Math.atan2(-i[2],i[0]))}return{latitude:t,longitude:e}}function a6(n){const{latitude:t,longitude:e}=n,i=new P.Vector3;return fv-t<.03?i.set(0,1,0):Gh(0,e)?i.set(0,0,1):Gh(Math.PI,e)?i.set(0,0,-1):Gh(fv,e)?i.set(1,0,0):i.set(-1,0,0),i}const fv=Number((Math.PI/2).toFixed(5));function Gh(n,t){return typeof n!="number"||typeof t!="number"?!1:Math.abs(n-t)<.001}class l6 extends K7{constructor(e,i){super(e,i);u(this,"name","MoveHelper");u(this,"xArrow");u(this,"yArrow");u(this,"zArrow");i.xArrowEnable!==!1&&(this.xArrow=new Rh({direction:"x",color:br.X})),i.yArrowEnable!==!1&&(this.yArrow=new Rh({direction:"y",color:br.Y})),i.zArrowEnable!==!1&&(this.zArrow=new Rh({direction:"z",color:br.Z})),this.add(...[this.xArrow,this.yArrow,this.zArrow].filter(Boolean))}update(e){if(this.xArrow&&(this.xArrow.visible=!0),this.yArrow&&(this.yArrow.visible=!0),this.zArrow&&(this.zArrow.visible=!0),e.type==="OrthographicCamera"){const i=new P.Vector3(1,0,0).applyQuaternion(this.quaternion),s=new P.Vector3(0,1,0).applyQuaternion(this.quaternion),r=new P.Vector3(0,0,1).applyQuaternion(this.quaternion),o=o6(e),a=a6(o),l=.0872665;Math.abs(i.angleTo(a)-0)<l||Math.abs(i.angleTo(a)-Math.PI)<l?this.xArrow&&(this.xArrow.visible=!1):Math.abs(s.angleTo(a)-0)<l||Math.abs(s.angleTo(a)-Math.PI)<l?this.yArrow&&(this.yArrow.visible=!1):(Math.abs(r.angleTo(a)-0)<l||Math.abs(r.angleTo(a)-Math.PI)<l)&&this.zArrow&&(this.zArrow.visible=!1)}}show(){super.show(),this.xArrow&&this.add(this.xArrow),this.yArrow&&this.add(this.yArrow),this.zArrow&&this.add(this.zArrow)}setScaleByCamera(e){this.scale.setScalar(Nh(e,this.position))}showDraggingHelper(e){this.xArrow&&(e.includes("x")?this.add(this.xArrow):this.remove(this.xArrow)),this.yArrow&&(e.includes("y")?this.add(this.yArrow):this.remove(this.yArrow)),this.zArrow&&(e.includes("z")?this.add(this.zArrow):this.remove(this.zArrow))}dispose(){this.remove(...[this.xArrow,this.yArrow,this.zArrow].filter(Boolean)),super.dispose()}}function xs(n,t){return c6(document.createElement(t!=null?t:"div"),n)}function c6(n,t){if(!t)return n;for(const e in t)e&&t[e]&&(n.style[e]=t[e]);return n}function h6(n){const t=xs(F({position:"absolute",display:"block",borderRadius:"4px",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"4px",paddingRight:"4px",pointerEvents:"none",userSelect:"none",zIndex:"99999",backgroundColor:"rgba(0,0,0,0.7)",fontSize:"12px",color:"#fff",letterSpacing:"0",lineHeight:"18px"},n)),e=()=>{t.style.display!=="block"&&t.style.top&&t.style.left&&(t.style.display="block")};return{element:t,show:e,hide:()=>{t.style.display="none",t.style.top="",t.style.left=""},setLeftTop:(r,o)=>{t.style.left=r,t.style.top=o,e()}}}class d6 extends e6{constructor(e,i){super(e,i);u(this,"name","RotateHelper");u(this,"xCircle");u(this,"yCircle");u(this,"zCircle");u(this,"children",[]);u(this,"angleTips");u(this,"container");(i==null?void 0:i.yzCircleEnable)!==!1&&(this.xCircle=new Hh({direction:"x",color:br.X})),(i==null?void 0:i.xzCircleEnable)!==!1&&(this.yCircle=new Hh({direction:"y",color:br.Y})),(i==null?void 0:i.xyCircleEnable)!==!1&&(this.zCircle=new Hh({direction:"z",color:br.Z})),i!=null&&i.container&&(i==null?void 0:i.angleTipsEnable)!==!1&&(this.container=i==null?void 0:i.container,this.angleTips=h6({display:"none"}),this.container.appendChild(this.angleTips.element)),this.add(...[this.xCircle,this.yCircle,this.zCircle].filter(Boolean)),this.show()}hide(){this.children.forEach(e=>e.hide())}show(){var e;this.children.forEach(i=>i.showCircle()),(e=this.angleTips)==null||e.hide()}setScaleByCamera(e){this.scale.setScalar(Nh(e,this.position))}showDraggingHelper(e){var i;this.hide(),this.children.filter(s=>e.includes(s.direction)).forEach(s=>s.showRing()),(i=this.angleTips)==null||i.show()}dispose(){var e,i;this.removeFromParent(),(i=(e=this.angleTips)==null?void 0:e.element)==null||i.remove()}}class Hh extends P.Group{constructor(e){super();u(this,"direction");u(this,"circle");u(this,"ring");u(this,"angleSector");this.direction=e.direction,this.circle=new u6(e),this.ring=new f6(e),this.angleSector=new p6(e),this.add(this.circle,this.ring,this.angleSector),this.direction==="y"?this.rotateX(Math.PI/2):this.direction==="x"&&this.rotateY(-Math.PI/2)}showCircle(){this.add(this.circle),this.remove(this.ring,this.angleSector)}showRing(){this.add(this.ring,this.angleSector),this.remove(this.circle)}hide(){this.remove(this.ring,this.angleSector,this.circle)}}let u6=class extends P.Mesh{constructor(e){var i;super();u(this,"direction");u(this,"gapAngle",.02);u(this,"geometry",new P.RingGeometry(.25,.3,20,8,this.gapAngle,Math.PI/2-this.gapAngle*2));this.material=new P.MeshBasicMaterial({opacity:.6,color:(i=e.color)!=null?i:16777215,transparent:!0,side:P.DoubleSide,depthTest:!1,depthWrite:!1}),this.renderOrder=50,this.direction=e.direction,this.geometry.name=`RotateHelperCircleGeometry-${this.direction}`}};class f6 extends P.Group{constructor(e){super();u(this,"direction");this.direction=e.direction;const i=.015,s=new Array(8).fill(null).map((r,o)=>{const a=new P.RingGeometry(.25,.3,20,8,Math.PI/4*o+i,Math.PI/4-i*2),l=new P.MeshBasicMaterial({opacity:1,color:16777215,depthTest:!1,depthWrite:!1,transparent:!0,side:P.DoubleSide});this.renderOrder=50;const c=new P.Mesh(a,l);return c.name=`AxesDashedRing-${this.direction}-${o}`,c});this.add(...s)}}class p6 extends P.Mesh{constructor(e){var s;super();u(this,"direction");u(this,"baseAxes");u(this,"angleDirection");switch(e.direction){case"x":this.baseAxes=new P.Vector3(0,0,1);break;case"y":this.baseAxes=new P.Vector3(1,0,0);break;case"z":this.baseAxes=new P.Vector3(1,0,0);break}const i=.3+5e-4;this.geometry=new P.CircleGeometry(i,48,0,1e-4),this.material=new P.MeshBasicMaterial({opacity:.4,color:(s=e.color)!=null?s:16777215,depthTest:!1,depthWrite:!1,transparent:!0,side:P.DoubleSide}),this.renderOrder=50,this.direction=e.direction,this.angleDirection=this.direction==="z"?1:-1}}function m6(){const n=xs({width:"100%",height:"100%",left:"0",top:"0",position:"absolute",pointerEvents:"none"}),t=xs({boxSizing:"border-box",width:"100%",height:"100%",left:"0",top:"0",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),e=xs({boxSizing:"border-box",width:"100%",height:"100%",left:"0",top:"0",position:"absolute",border:"1px solid rgba(255,255,255,0.4)"});n.appendChild(t),t.appendChild(e);const i="-4px",s={direction:"nesw",element:Hn({cursor:"nesw-resize",left:i,bottom:i})},r={direction:"ns",element:Hn({cursor:"ns-resize",bottom:i})},o={direction:"nwse",element:Hn({cursor:"nwse-resize",right:i,bottom:i})},a={direction:"ew",element:Hn({cursor:"ew-resize",right:i})},l={direction:"nesw",element:Hn({cursor:"nesw-resize",right:i,top:i})},c={direction:"ns",element:Hn({cursor:"ns-resize",top:i})},h={direction:"nwse",element:Hn({cursor:"nwse-resize",left:i,top:i})},d={direction:"ew",element:Hn({cursor:"ew-resize",left:i})};return new Array(r,a,c,d,s,o,l,h).forEach(g=>t.appendChild(g.element)),{container:n,squares:[s,r,o,a,l,c,h,d]}}function Hn(n){const t=xs(F({background:"#FFFFFF",width:"9px",height:"9px",position:"absolute",pointerEvents:"none"},n)),e=xs({width:"15px",height:"15px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"}),i=xs({width:"15px",height:"15px",cursor:n==null?void 0:n.cursor,pointerEvents:"auto",background:"transparent"});return i.draggable=!0,e.appendChild(i),t.appendChild(e),t}class g6 extends i6{constructor(e,i,s,r){super(e);u(this,"name","CSS3DScaleHelper");u(this,"points",[]);u(this,"cornerPositions",[]);u(this,"css3DInstance");u(this,"plane");u(this,"css3DRenderer",new Qs);u(this,"camera");u(this,"scene");u(this,"container");u(this,"enabled",!1);this.camera=s,this.scene=r,this.container=i,this.initRectangleScaleHelper()}get helperObject(){var e;if(!((e=this.css3DInstance)!=null&&e.css3DObject))throw new Error("css3DInstance is not initialized");return this.css3DInstance.css3DObject}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}applyMatrix4(e){var i;super.applyMatrix4(e),this.helperObject.applyMatrix4(e),(i=this.plane)==null||i.applyMatrix4(e),this.cornerPositions.forEach(s=>s.applyMatrix4(e))}showDraggingHelper(){}applyHelperScaleMatrix4(e,i){var s;(s=this.plane)==null||s.scale.applyMatrix4(e),this.helperObject.applyScaleMatrix4(e)}updatePoints(){const e=this.calculatePointPosition(this.cornerPositions);this.points.forEach((i,s)=>{i.position.copy(e[s])})}applyHelperQuaternion(e,i){var r;const s=(r=this.css3DInstance)==null?void 0:r.css3DObject;if(s){const o=new P.Vector3().subVectors(s.position,i).applyQuaternion(e).add(i);s.position.copy(o),s.applyQuaternion(e)}if(this.plane){const o=new P.Vector3().subVectors(this.plane.position,i).applyQuaternion(e).add(i);this.plane.position.copy(o),this.plane.applyQuaternion(e)}this.cornerPositions.forEach(o=>{const a=new P.Vector3().subVectors(o,i).applyQuaternion(e).add(i);o.copy(a)})}enable(){var e;this.enabled||(this.enabled=!0,(e=this.css3DInstance)==null||e.enable(),this.plane&&this.scene.add(this.plane))}disable(){var e;this.enabled&&(this.enabled=!1,(e=this.css3DInstance)==null||e.disable(),this.plane&&this.scene.remove(this.plane))}show(){var e;(e=this.css3DInstance)==null||e.show(),this.plane&&(this.plane.visible=!0)}hide(){var e;(e=this.css3DInstance)==null||e.hide(),this.plane&&(this.plane.visible=!1)}dispose(){this.disable(),this.css3DRenderer.dispose()}initRectangleScaleHelper(){var a,l;const e=this.getCornerPositions();if(!e)return;this.cornerPositions=e;const i=this.css3DRenderer.create3DElement(this.camera,e,{ratio:.003});if(!i)return;this.css3DInstance=i,i.appendToElement(this.container);const s=i.css3DObject.container,{container:r,squares:o}=m6();this.points=o.map((c,h)=>({direction:c.direction,point:c.element,position:this.calculatePointPosition(e)[h]})),s.insertBefore(r,(a=s.children[0])!=null?a:null),this.helperObject.position.copy(this.originObject3D.position),(l=this.plane)==null||l.position.copy(this.originObject3D.position)}getCornerPositions(){const{originObject3D:e}=this;if(e.isCSS3DObject&&e.cornerPoints)return e.cornerPoints;console.error("当前物体暂时不支持 ScaleHelper")}calculatePointPosition(e){return[e[0].clone(),e[0].clone().add(e[1]).divideScalar(2),e[1].clone(),e[1].clone().add(e[2]).divideScalar(2),e[2].clone(),e[2].clone().add(e[3]).divideScalar(2),e[3].clone(),e[3].clone().add(e[0]).divideScalar(2)]}}class v6 extends $7{constructor(e){super(e);u(this,"name","BoundingBoxHelper");u(this,"box");u(this,"outline");u(this,"positionAttribute");this.positionAttribute=new P.BufferAttribute(new Float32Array(8*3),3),this.box=this.createBox(),this.outline=this.createOutline(),this.add(this.box,this.outline),this.update()}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}setHelperQuaternion(e,i){_h(this,e,i)}raycasterIntersectObject(e,i){return e.intersectObject(this,!1,i)}raycast(e,i){this.box.raycast(e,i)}update(){const e=as(this.originObject3D);if(!e)return;const{min:i,max:s}=e;this.positionAttribute.setXYZ(0,s.x,s.y,s.z),this.positionAttribute.setXYZ(1,i.x,s.y,s.z),this.positionAttribute.setXYZ(2,i.x,i.y,s.z),this.positionAttribute.setXYZ(3,s.x,i.y,s.z),this.positionAttribute.setXYZ(4,s.x,s.y,i.z),this.positionAttribute.setXYZ(5,i.x,s.y,i.z),this.positionAttribute.setXYZ(6,i.x,i.y,i.z),this.positionAttribute.setXYZ(7,s.x,i.y,i.z),this.positionAttribute.needsUpdate=!0}createOutline(){const e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new P.BufferGeometry;i.setIndex(new P.BufferAttribute(e,1)),i.setAttribute("position",this.positionAttribute);const s=new P.LineBasicMaterial({color:64767,linewidth:1,opacity:1,toneMapped:!1}),r=new P.LineSegments(i,s);return r.matrixAutoUpdate=!1,r}createBox(){const e=new Uint16Array([0,1,2,0,2,3,0,3,7,0,7,4,0,4,5,0,5,1,6,1,5,6,2,1,6,5,4,6,4,7,6,3,2,6,7,3]),i=new P.BufferGeometry;i.setIndex(new P.BufferAttribute(e,1)),i.setAttribute("position",this.positionAttribute);const s=new P.MeshBasicMaterial({color:64767,opacity:.1,depthTest:!1,transparent:!0});return new P.Mesh(i,s)}}const cl=new Map;function A6(n){if(cl.has(n))return cl.get(n).hooks;const t=new Pt;let e=null,i;const s=()=>{e=requestAnimationFrame(s);const o=n.projectionMatrix.toArray().join(",")+n.matrixWorld.toArray().join(",");o!==i&&(i=o,t.emit("cameraUpdate"))};s();const r=()=>{cl.delete(n),cancelAnimationFrame(e)};return cl.set(n,{hooks:t,dispose:r}),t}class Co{constructor(t,e){u(this,"originObject3D");u(this,"hooks");u(this,"preventTapDefaultEvent",!1);u(this,"internalHooks");u(this,"disposers",[]);u(this,"helperObject3D");u(this,"camera");u(this,"model");u(this,"scene");u(this,"container");u(this,"domEvents");u(this,"isDragging",!1);u(this,"enabled",!1);u(this,"name","BaseController");u(this,"boundingBox");u(this,"config");u(this,"onRender");u(this,"cameraHooks");u(this,"onWantsTapGesture",t=>{if(this.getIntersectObject(t))return!1});u(this,"updateHelperScale",()=>{this.helperObject3D.setScaleByCamera(this.camera)});u(this,"getBox",()=>this.boundingBox?this.boundingBox:(this.boundingBox=as(this.originObject3D),this.boundingBox));var h,d,f;this.hooks=(h=t.sharedHooks)!=null?h:new Pt,this.internalHooks=(d=t.sharedInternalHooks)!=null?d:new Pt,this.camera=t.camera,this.model=t.model,this.originObject3D=t.originObject3D,this.helperObject3D=t.helperObject3D,this.container=t.container,this.scene=t.scene,this.domEvents=t.domEvents,this.onRender=(f=t.onRender)!=null?f:()=>{},this.config=e!=null?e:{},this.initialHelperPosition(),this.initialHelperQuaternion(),this.updateHelperScale(),this.cameraHooks=A6(this.camera),this.enable();const i=this.onSetOriginObjectScale.bind(this),s=this.onSetOriginObjectRotate.bind(this),r=this.onSetOriginObjectPosition.bind(this),o=this.onApplyOriginObjectScale.bind(this),a=this.onApplyOriginObjectRotate.bind(this),l=this.onApplyOriginObjectPosition.bind(this),c=this.initialHelperPosition.bind(this);this.cameraHooks.on("cameraUpdate",this.updateHelperScale),this.internalHooks.on("initialHelperPosition",c),this.internalHooks.on("setObjectScale",i),this.internalHooks.on("setObjectRotate",s),this.internalHooks.on("setObjectPosition",r),this.internalHooks.on("applyObjectPosition",l),this.internalHooks.on("applyObjectRotate",a),this.internalHooks.on("applyObjectScale",o),this.hooks.on("moveEnd",this.updateHelperScale),this.internalHooks.on("setObjectPosition",this.updateHelperScale),this.internalHooks.on("initialHelperPosition",this.updateHelperScale),this.disposers.push(()=>{this.cameraHooks.off("cameraUpdate",this.updateHelperScale),this.internalHooks.off("initialHelperPosition",c),this.internalHooks.off("setObjectScale",i),this.internalHooks.off("setObjectRotate",s),this.internalHooks.off("setObjectPosition",r),this.internalHooks.off("applyObjectPosition",l),this.internalHooks.off("applyObjectRotate",a),this.internalHooks.off("applyObjectScale",o),this.hooks.off("moveEnd",this.updateHelperScale),this.internalHooks.off("setObjectPosition",this.updateHelperScale),this.internalHooks.off("initialHelperPosition",this.updateHelperScale)})}initialHelperPosition(){this.helperObject3D.initialPosition(this.calculateOffset(this.config.offset))}initialHelperQuaternion(){this.helperObject3D.initQuaternion(this.config)}enable(){this.enabled||(this.enabled=!0,this.scene.add(this.helperObject3D),this.helperObject3D.enable(),this.render())}disable(){this.enabled&&(this.enabled=!1,this.helperObject3D.disable(),this.render())}show(){this.helperObject3D.show(),this.render()}hide(){this.helperObject3D.hide(),this.render()}dispose(){var t;(t=this.disposers)==null||t.forEach(e=>e==null?void 0:e()),this.helperObject3D.dispose(),this.render()}applyHelperMatrix4(t){this.helperObject3D.applyMatrix4(t)}applyHelperQuaternion(t,e){this.helperObject3D.applyHelperQuaternion(t,e)}applyHelperScaleMatrix4(t,e){this.helperObject3D.applyHelperScaleMatrix4(t,e)}onWantsGesture(t,e,i){if(this.isDragging)return!1}onIntersectionOnModelUpdate(t){}onApplyOriginObjectScale(t){this.applyHelperScaleMatrix4(t.matrix,t.origin)}onApplyOriginObjectRotate(t){this.applyHelperQuaternion(t.quaternion,t.origin)}onApplyOriginObjectPosition(t){this.applyHelperMatrix4(t.matrix)}onSetOriginObjectScale(t){this.helperObject3D.scale.copy(t),this.updateOffsetByScale(t)}onSetOriginObjectRotate(t,e){this.helperObject3D.setHelperQuaternion(t,e)}onSetOriginObjectPosition(t){this.helperObject3D.position.copy(t.clone().add(this.calculateOffset(this.config.offset)))}render(){this.onRender()}updateOffsetByScale(t){if(this.boundingBox&&this.config.offset){const e=this.originObject3D.position,i=new P.Vector3().subVectors(this.boundingBox.max,e).multiply(t).add(e),s=new P.Vector3().subVectors(this.boundingBox.min,e).multiply(t).add(e),r=this.calculateOffset(this.config.offset,{min:s,max:i});this.helperObject3D.initialPosition(r)}}hoverListener(t,e=16777215,i=1){const s=nn(t).filter(Fe),r=[];for(const o of s)if(o.material||o instanceof P.Group){const a=o instanceof P.Group?o.children.filter(f=>f instanceof P.Mesh):[o];a.forEach(f=>{var g,p;f.__originalColor__=(g=f.__originalColor__)!=null?g:f.material.color.clone(),f.__originalOpacity__=(p=f.__originalOpacity__)!=null?p:f.material.opacity});const l=()=>{a.forEach(f=>{f.material.color.set(e),f.material.opacity=i}),this.render()},c=()=>{a.forEach(f=>{f.material.color.copy(f.__originalColor__),f.material.opacity=f.__originalOpacity__}),this.render()},h=()=>{this.isDragging||l()},d=()=>{this.isDragging||c()};for(const f of a)this.domEvents.addEventListener(f,"mouseover",h),this.domEvents.addEventListener(f,"mouseout",d),this.hooks.on("moveStart",l),this.hooks.on("moveEnd",c),this.hooks.on("rotateEnd",c),this.hooks.on("scaleEnd",c),r.push(()=>{this.domEvents.removeEventListener(f,"mouseover",h),this.domEvents.removeEventListener(f,"mouseout",d),this.hooks.off("moveStart",l),this.hooks.off("moveEnd",c),this.hooks.off("rotateEnd",c),this.hooks.off("scaleEnd",c)})}return()=>r.forEach(o=>o==null?void 0:o())}getIntersectObject(t){const e=this.camera.position,i=this.helperObject3D;if(!i)return;const s=this.helperObject3D.raycasterIntersectObject(t)[0];if(!s)return;const r=s;if(r.object=i,this.model.intersectRaycaster){const o=this.model.intersectRaycaster(t)[0];if(o&&o.point.distanceTo(e)<r.point.distanceTo(e))return}return r.object}calculateOffset(t,e){const i=new P.Vector3(0,0,0);if(!t)return i;const s=()=>e||this.getBox();if(typeof t.x=="number")i.setX(t.x);else if(typeof t.x=="object"){const r=s();i.setX((r.max.x-r.min.x)*t.x.percents)}if(typeof t.y=="number")i.setY(t.y);else if(typeof t.y=="object"){const r=s();i.setY((r.max.y-r.min.y)*t.y.percents)}if(typeof t.z=="number")i.setZ(t.z);else if(typeof t.z=="object"){const r=s();i.setZ((r.max.z-r.min.z)*t.z.percents)}return i}}class b6 extends Co{constructor(...e){super(...e);u(this,"name","MoveController");u(this,"startInfo");u(this,"_moveByMouse",{enabled:!1});u(this,"mouseInfo");u(this,"mousedownEventListenerDisposer");u(this,"dragStart",e=>{if(this.moveByMouseEnable||this.isDragging)return;const i=e==null?void 0:e.intersect;if(!i)return this.dragEnd();const s=(i==null?void 0:i.object).direction;if(!s)return this.dragEnd();const r=new P.Vector3(1,0,0).applyQuaternion(this.helperObject3D.quaternion),o=new P.Vector3(0,1,0).applyQuaternion(this.helperObject3D.quaternion),a=new P.Vector3(0,0,1).applyQuaternion(this.helperObject3D.quaternion),l=(()=>{switch(s){case"x":return r;case"y":return o;case"z":return a}})(),c=i.point.clone(),h=new P.Line3(c.clone().sub(l.normalize()),c.clone().add(l.normalize()));this.startInfo={startVectorProject:c,line:h},this.helperObject3D.showDraggingHelper([s]),this.hooks.emit("moveStart"),this.isDragging=!0});u(this,"dragging",e=>{if(!this.isDragging||!this.startInfo)return;const i="touches"in e?e.touches[0].clientX:e.x,s="touches"in e?e.touches[0].clientY:e.y,r=ll(this.camera,{x:i,y:s},this.container);return r?(this.move(r),!1):this.dragEnd()});u(this,"dragEnd",()=>{this.isDragging&&(this.startInfo=void 0,this.isDragging=!1,this.helperObject3D.show(),this.hooks.emit("moveEnd"))});const i=this.helperObject3D;this.hoverListener([i.xArrow,i.yArrow,i.zArrow]);const s=this.show.bind(this),r=this.hide.bind(this),o=()=>{this.helperObject3D.update(this.camera),this.render()};o(),this.domEvents.addEventListener(this.helperObject3D,"mousedown",this.dragStart),document.addEventListener("mousemove",this.dragging),document.addEventListener("mouseup",this.dragEnd),this.domEvents.addEventListener(this.helperObject3D,"touchstart",this.dragStart),document.addEventListener("touchmove",this.dragging),document.addEventListener("touchend",this.dragEnd),this.hooks.on("rotateStart",r),this.hooks.on("rotateEnd",s),this.hooks.on("scaleStart",r),this.hooks.on("scaleEnd",s),this.hooks.on("moveByMouseEnable",r),this.hooks.on("moveByMouseDisable",s),this.cameraHooks.on("cameraUpdate",o),this.disposers.push(()=>{this.domEvents.removeEventListener(this.helperObject3D,"mousedown",this.dragStart),document.removeEventListener("mousemove",this.dragging),document.removeEventListener("mouseup",this.dragEnd),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",this.dragStart),document.removeEventListener("touchmove",this.dragging),document.removeEventListener("touchend",this.dragEnd),this.hooks.off("rotateStart",r),this.hooks.off("rotateEnd",s),this.hooks.off("scaleStart",r),this.hooks.off("scaleEnd",s),this.hooks.off("moveByMouseEnable",r),this.hooks.off("moveByMouseDisable",s),this.cameraHooks.off("cameraUpdate",o)}),this.moveByMouseEnable&&this.moveByMouse()}get moveByMouseEnable(){return this._moveByMouse.enabled}dispose(){var e;super.dispose(),(e=this.disposers)==null||e.forEach(i=>i==null?void 0:i())}moveByMouse(e){this._moveByMouse={enabled:!0,useFaceNormal:e==null?void 0:e.useFaceNormal},this.preventTapDefaultEvent=!0;const i=this.handleMouseDown.bind(this),s=this.handleMouseUp.bind(this);this.hooks.emit("moveByMouseEnable"),setTimeout(()=>{this.container.addEventListener("mousedown",i),this.container.addEventListener("mouseup",s)}),this.mousedownEventListenerDisposer=()=>{this.container.removeEventListener("mousedown",i),this.container.removeEventListener("mouseup",s)}}disableMoveByMouse(){var e;this._moveByMouse={enabled:!1},this.preventTapDefaultEvent=!1,this.hooks.emit("moveByMouseDisable"),(e=this.mousedownEventListenerDisposer)==null||e.call(this)}onIntersectionOnModelUpdate(e){var o,a,l;if(!this.moveByMouseEnable)return;const{point:i,face:s}=e;if(!this.hooks.emit("wantToMove",i)){if(this.originObject3D.position.copy(i),(this._moveByMouse.useFaceNormal===!0||typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.enable!==!1)&&s!=null&&s.normal){const c=(()=>typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.alignmentVector?this._moveByMouse.useFaceNormal.alignmentVector:{x:0,y:1,z:0})(),h=new P.Vector3((o=c.x)!=null?o:0,(a=c.y)!=null?a:0,(l=c.z)!=null?l:0),d=(()=>typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.fixedFaceNormal?this._moveByMouse.useFaceNormal.fixedFaceNormal(s.normal):s.normal)();this.originObject3D.quaternion.setFromUnitVectors(h,d),this.internalHooks.emit("setObjectRotate",this.originObject3D.quaternion.clone())}this.internalHooks.emit("setObjectPosition",i),this.hooks.emit("move",i)}}handleMouseDown(e){const{x:i,y:s}=e;this.mouseInfo={x:i,y:s,mouseDownTimestamp:Date.now()}}handleMouseUp(e){if(!this.mouseInfo)return;const{x:i,y:s}=e;this.mouseInfo.x===i&&this.mouseInfo.y===s&&Date.now()-this.mouseInfo.mouseDownTimestamp<500&&(this.disableMoveByMouse(),this.mouseInfo=void 0)}move(e){if(!this.startInfo)return this.dragEnd();const{line:i,startVectorProject:s}=this.startInfo,r=this.originObject3D,o=Mn({raycaster:e,line:i,clampToLine:!1}),a=o.clone().sub(s),l=new P.Matrix4;l.setPosition(a);const c=r.position.clone().applyMatrix4(l);this.hooks.emit("wantToMove",c)||(r.applyMatrix4(l),s.copy(o),this.internalHooks.emit("applyObjectPosition",{matrix:l}),this.hooks.emit("move",c))}}class Io{constructor(t,e,i,s,r,o,a,l){u(this,"helperController");u(this,"five");u(this,"onFiveWantsTapGesture",t=>{if(!this.helperController)return;if(this.helperController.preventTapDefaultEvent)return!1;const e=this.helperController.onWantsTapGesture(t);return this.five.needsRender=!0,e});u(this,"onFiveWantsGesture",(...t)=>{if(!this.helperController)return;const e=this.helperController.onWantsGesture(...t);return this.five.needsRender=!0,e});u(this,"onFiveIntersectionOnModelUpdate",(...t)=>{this.helperController&&this.helperController.onIntersectionOnModelUpdate(...t)});const{camera:c,model:h,scene:d}=t,f=t.getElement();if(this.five=t,!c||!h||!f||!d)return;const g=()=>{t.needsRender=!0};this.helperController=new i({camera:c,model:h,domEvents:e,originObject3D:s,helperObject3D:r,container:f,scene:d,onRender:g,sharedHooks:a,sharedInternalHooks:l},o),t.on("wantsTapGesture",this.onFiveWantsTapGesture),t.on("wantsGesture",this.onFiveWantsGesture),t.on("intersectionOnModelUpdate",this.onFiveIntersectionOnModelUpdate)}dispose(){var t;this.five.off("wantsTapGesture",this.onFiveWantsTapGesture),this.five.off("wantsGesture",this.onFiveWantsGesture),this.five.off("intersectionOnModelUpdate",this.onFiveIntersectionOnModelUpdate),(t=this.helperController)==null||t.dispose()}}const Wh="Object3DHelper@v1.0.1",y6=()=>{console.error(`${Wh} is disposed`)},w6=()=>{console.warn(`${Wh} is disabled`)},P6=()=>{console.error(`${Wh} is disabled`)};class C6{constructor(t){u(this,"controllers",{});u(this,"state",{visible:!0,enabled:!0,disposed:!1});u(this,"hooks",new Pt);u(this,"eventListener",{});t&&this.addControllers(t),this.setState(this.state)}show(t){return ee(this,null,function*(){this.setState({visible:!0},t)})}hide(t){return ee(this,null,function*(){this.setState({visible:!1},t)})}enable(t){this.setState({enabled:!0},t)}disable(t){this.setState({enabled:!1},t)}dispose(){this.setState({disposed:!0})}setState(t,e){if(this.state.disposed)return y6();if(!this.state.enabled&&t.enabled!==!0&&t.disposed!==!0)return P6();const i=F({},this.state);this.state=F(F({},this.state),t),t.disposed!==void 0&&t.disposed!==i.disposed&&t.disposed&&this.handleDispose(),t.visible!==void 0&&this.handleVisible(t.visible),t.enabled!==void 0&&this.handleEnable(t.enabled),this.hooks.emit("stateChange",{state:this.state,prevState:i})}addControllers(t){this.controllers=F(F({},this.controllers),t),this.setState(this.state)}initialHelperMatrix(){this.everyControllerDo(t=>{t.initialHelperPosition(),t.initialHelperQuaternion()})}getCurrentState(){return this.state}handleEnable(t,e=!0){t?(this.everyControllerDo(i=>{i.enable()}),this.hooks.emit("enable",{userAction:e})):(this.everyControllerDo(i=>{i.disable()}),this.hooks.emit("disable",{userAction:e})),this.state.enabled=t}handleVisible(t,e=!0){t?(this.everyControllerDo(i=>{i.show()}),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:e}))):(this.everyControllerDo(i=>{i.hide()}),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:e}))),this.state.visible=t}everyControllerDo(t){Object.values(this.controllers).forEach(e=>{e&&t(e)})}handleDispose(){var t,e;Object.values(this.controllers).forEach(i=>{i==null||i.dispose()});for(const i in this.controllers){if(!i)continue;const s=i;(e=(t=this.eventListener)[s])==null||e.call(t)}}actionIfStateIsEnabled(t,e){if(this.state.enabled)return t();e!=null&&e.warnLog&&w6()}}function Uh(n){return n*Math.PI/180}let Qh=new P.Quaternion;class I6 extends Co{constructor(...e){var c,h,d;super(...e);u(this,"name","RotateController");u(this,"startInfo");u(this,"removeListener");const i=this.helperObject3D;this.hoverListener([(c=i.xCircle)==null?void 0:c.circle,(h=i.yCircle)==null?void 0:h.circle,(d=i.zCircle)==null?void 0:d.circle].filter(Boolean));const s=this.dragStart.bind(this),r=this.dragging.bind(this),o=this.dragEnd.bind(this),a=this.show.bind(this),l=this.hide.bind(this);this.domEvents.addEventListener(this.helperObject3D,"mousedown",s),document.addEventListener("mousemove",r),document.addEventListener("mouseup",o),this.domEvents.addEventListener(this.helperObject3D,"touchstart",s),document.addEventListener("touchmove",r),document.addEventListener("touchend",o),this.hooks.on("moveStart",l),this.hooks.on("moveEnd",a),this.hooks.on("scaleStart",l),this.hooks.on("scaleEnd",a),this.hooks.on("moveByMouseEnable",l),this.hooks.on("moveByMouseDisable",a),this.disposers.push(()=>{this.domEvents.removeEventListener(this.helperObject3D,"mousedown",s),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",o),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",s),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",o),this.hooks.off("moveStart",l),this.hooks.off("moveEnd",a),this.hooks.off("scaleStart",l),this.hooks.off("scaleEnd",a),this.hooks.off("moveByMouseEnable",l),this.hooks.off("moveByMouseDisable",a)})}get rotateCenter(){return this.helperObject3D.position.clone()}setRotateAngle(e){const{x:i=0,y:s=0,z:r=0}=e,o=new P.Euler(Uh(i),Uh(s),Uh(r)),a=new P.Quaternion().setFromEuler(o);if(this.hooks.emit("wantToRotate",a))return;const{originObject3D:c,rotateCenter:h}=this;_h(c,a,h),this.internalHooks.emit("setObjectRotate",a,h),this.hooks.emit("rotate",a),this.render()}onApplyOriginObjectRotate(e){this.isDragging||super.onApplyOriginObjectRotate(e)}onApplyOriginObjectScale(e){}dragStart(e){if(this.isDragging)return;const i=e==null?void 0:e.intersect;if(!i)return this.dragEnd();const s=(i==null?void 0:i.object).direction;if(!s)return this.dragEnd();const r=i.point,o=this.getAngleHelper(s);this.setTipsAngle(0);const a=r.clone();a.y+=.2,this.setTipsPosition(a);const l=this.helperObject3D.quaternion.clone(),c=(()=>{if(s==="x")return new P.Vector3(1,0,0).applyQuaternion(l);if(s==="y")return new P.Vector3(0,1,0).applyQuaternion(l);if(s==="z")return new P.Vector3(0,0,1).applyQuaternion(l)})(),h=new P.Plane().setFromNormalAndCoplanarPoint(c,r),f=h.projectPoint(r.clone(),new P.Vector3).clone().sub(this.rotateCenter),g=f.angleTo(o.baseAxes.clone().applyQuaternion(l));this.setAngleHelperStart(s,g),this.setAngleHelperLength(s,0),this.startInfo={direction:s,startVector:f,plane:h,angleHelper:o,angle:0,helperQuaternion:l.clone()},Qh=new P.Quaternion,this.helperObject3D.showDraggingHelper([s]),this.hooks.emit("rotateStart"),this.isDragging=!0}dragging(e){if(!this.isDragging)return;const i="touches"in e?e.touches[0].clientX:e.x,s="touches"in e?e.touches[0].clientY:e.y,r=ll(this.camera,{x:i,y:s},this.container);return r?(this.rotate(r),!1):this.dragEnd()}rotate(e){if(!this.startInfo)return this.dragEnd();const{startVector:i,plane:s,angleHelper:r,direction:o,helperQuaternion:a}=this.startInfo,{originObject3D:l}=this,c=e.ray.intersectPlane(s,new P.Vector3);if(!c)return;const h=this.rotateCenter.clone(),f=s.projectPoint(c.clone(),new P.Vector3).clone().sub(h);if(i.angleTo(f)===0)return;const g=new P.Quaternion().setFromUnitVectors(i.clone().normalize(),f.clone().normalize()),p=l.quaternion.clone().premultiply(g);if(this.hooks.emit("wantToRotate",p))return;const b=new P.Euler().setFromQuaternion(new P.Quaternion().setFromUnitVectors(i.clone().normalize().applyQuaternion(a.clone().inverse()),f.clone().normalize().applyQuaternion(a.clone().inverse())),`${o.toUpperCase()}${"XZY".replace(o.toUpperCase(),"")}`)[o]*r.angleDirection;if(this.startInfo.angle+=b,this.setAngleHelperLength(o,this.startInfo.angle),this.setTipsAngle(Ia(this.startInfo.angle)),h){const w=new P.Vector3().subVectors(l.position,h).applyQuaternion(g).add(h);l.position.copy(w)}l.applyQuaternion(g),Qh.premultiply(g),this.internalHooks.emit("applyObjectRotate",{quaternion:g,origin:h}),this.hooks.emit("rotate",l.quaternion),this.startInfo.startVector=f}dragEnd(){this.isDragging&&(this.applyHelperQuaternion(Qh,this.rotateCenter),this.startInfo=void 0,this.isDragging=!1,this.helperObject3D.show(),this.hooks.emit("rotateEnd"))}getAngleHelper(e){var i,s,r;switch(e){case"x":return(i=this.helperObject3D.xCircle)==null?void 0:i.angleSector;case"y":return(s=this.helperObject3D.yCircle)==null?void 0:s.angleSector;case"z":return(r=this.helperObject3D.zCircle)==null?void 0:r.angleSector}}setAngleHelperStart(e,i){const s=this.getAngleHelper(e);if(!s){console.warn("angleHelper is undefined");return}if(s instanceof P.Mesh&&s.geometry instanceof P.CircleGeometry){const{radius:r,segments:o,thetaLength:a}=s.geometry.parameters;s.geometry=new P.CircleGeometry(r,o,i,a)}else console.warn("only support THREE.CircleGeometry")}setAngleHelperLength(e,i){const r=i>=0?Math.max(i,.001):Math.min(i,-.001),o=this.getAngleHelper(e);if(o instanceof P.Mesh&&o.geometry instanceof P.CircleGeometry){const{radius:a,thetaStart:l}=o.geometry.parameters,c=Math.ceil(Math.abs(r)*(40/(2*Math.PI)));o.geometry=new P.CircleGeometry(a,c,l,r)}else console.warn("only support THREE.CircleGeometry")}setTipsAngle(e){var s;const i=(s=this.helperObject3D.angleTips)==null?void 0:s.element;i&&(i.innerText=`${e.toFixed(0)}°`)}setTipsPosition(e){const i=this.helperObject3D.angleTips;if(!i)return;const s=e.project(this.camera),{x:r,y:o,z:a}=s;if(a>1)return;const l=(r+1)/2*100+"%",c=(-o+1)/2*100+"%";i.setLeftTop(l,c)}}class M6 extends Co{constructor(...e){super(...e);u(this,"startInfo");u(this,"name","RectangleScaleController")}enable(){this.helperObject3D.enable(),super.enable()}disable(){this.helperObject3D.disable(),super.disable()}show(){this.helperObject3D.show(),super.show()}hide(){this.helperObject3D.hide(),super.hide()}onApplyOriginObjectPosition(e){this.isDragging||super.onApplyOriginObjectPosition(e)}onApplyOriginObjectScale(e){this.helperObject3D.applyHelperScaleMatrix4(e.matrix,e.origin)}getDragPlane(){const e=new P.Plane,i=this.helperObject3D.cornerPositions;if(i.length!==0)return i.length<3?e.setFromNormalAndCoplanarPoint(this.originObject3D.getWorldDirection(new B.Vector3),i[0]):e.setFromCoplanarPoints(i[0],i[1],i[2]),e}dragStart(e,i){var r,o;(o=(r=this.helperObject3D).updatePoints)==null||o.call(r);const s=this.getDragPlane();if(!s)return this.dragEnd();this.startInfo={startPoint:{position:i.position.clone(),direction:i.direction},plane:s},this.hooks.emit("scaleStart"),this.render(),this.isDragging=!0}dragging(e){if(!this.isDragging)return;const i=ll(this.camera,e,this.container);if(!i)return this.dragEnd();this.scale(i)}scale(e){var O,A;if(!this.startInfo)return;const i=this.originObject3D,{startPoint:s,plane:r}=this.startInfo,o=this.helperObject3D.cornerPositions;if(o.length<4)return this.dragEnd();const a=e.ray.intersectPlane(r,new B.Vector3);if(!a||Qa(a,this.camera.position))return;const l=new B.Vector3().addVectors(o[0],o[2]).divideScalar(2),{position:c,direction:h}=s,d=new B.Vector3().subVectors(o[1],o[0]),f=new B.Vector3().subVectors(o[3],o[0]),g=C=>{const I=new B.Vector3(0,0,0);if(!this.startInfo)return I;const M=(C==="ew"?d:f).clone(),D=c.clone().projectOnVector(M),T=a.clone().projectOnVector(M),H=l.clone().projectOnVector(M);if(T.equals(D))return I;if(C==="ns"&&typeof this.startInfo.dragPointInCenterBottom!="boolean"){const te=new B.Vector3().subVectors(T,H),q=te.x<0&&M.x>=0,ne=te.y<0&&M.y>=0,se=te.z<0&&M.z>=0;this.startInfo.dragPointInCenterBottom=q||ne||se}if(C==="ew"&&typeof this.startInfo.dragPointInCenterLeft!="boolean"){const te=new B.Vector3().subVectors(T,H),q=te.x<0&&M.x>=0,ne=te.y<0&&M.y>=0,se=te.z<0&&M.z>=0;this.startInfo.dragPointInCenterLeft=q||ne||se}const W=new B.Vector3().subVectors(T,D),J=W.length();return J>.3?(console.warn("offset.length() > 0.3, skipped",J),I):W},p=g("ew"),m=g("ns"),v=()=>{const C=p;this.helperObject3D.cornerPositions.forEach((I,M)=>{var D;(D=this.startInfo)!=null&&D.dragPointInCenterLeft?(M===0||M===3)&&I.add(C):(M===1||M===2)&&I.add(C)})},b=()=>{const C=m;this.helperObject3D.cornerPositions.forEach((I,M)=>{var D;(D=this.startInfo)!=null&&D.dragPointInCenterBottom?(M===0||M===1)&&I.add(C):(M===2||M===3)&&I.add(C)})};switch(h){case"ew":v();break;case"ns":b();break;case"nesw":case"nwse":v(),b()}const w=new B.Vector3().subVectors(o[1],o[0]).length()/d.length(),x=new B.Vector3().subVectors(o[3],o[0]).length()/f.length(),E=new B.Vector3(w,x,1),L=new P.Matrix4().scale(E);i.isCSS3DObjectPlus&&i.applyScaleMatrix4?i.applyScaleMatrix4(L):i.scale.applyMatrix4(L),s.position.copy(a);const S=new B.Vector3().addVectors(o[0],o[2]).divideScalar(2),R=new B.Vector3().subVectors(S,l),z=new P.Matrix4().setPosition(R);i.applyMatrix4(z),(O=this.helperObject3D.css3DInstance)==null||O.css3DObject.applyMatrix4(z),(A=this.helperObject3D.plane)==null||A.applyMatrix4(z),this.internalHooks.emit("applyObjectScale",{matrix:L}),this.internalHooks.emit("applyObjectPosition",{matrix:z}),this.render()}dragEnd(){this.isDragging&&(this.startInfo=void 0,this.isDragging=!1,this.hooks.emit("scaleEnd"),this.render())}}class k6 extends M6{constructor(...e){super(...e);u(this,"name","CSS3DScaleController");this.addHTMLEventListener()}addHTMLEventListener(){this.helperObject3D.points.forEach(e=>{if(!e)return;const i=e.point,s=a=>this.dragStart(a,e),r=this.dragging.bind(this),o=this.dragEnd.bind(this);i.addEventListener("dragstart",s),i.addEventListener("drag",r),i.addEventListener("dragend",o)})}}class E6 extends Co{constructor(...e){super(...e);u(this,"name","BoundingBoxController")}}class x6 extends t6{constructor(e,i){super(e,i);u(this,"name","ScaleHelper");u(this,"scaleMeshes",[]);u(this,"positions",[]);i&&(this.positions=i.positions)}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}initialPosition(e){this.position.copy(this.originObject3D.position);const i=typeof this.positions=="function"?this.positions():this.positions;i&&(this.scaleMeshes=i.map((s,r)=>{var a;const o=(a=this.scaleMeshes[r])!=null?a:D6();return o.position.copy(s.handlePosition),o.scalePosition=s,this.addIfNotExists(o),o}))}setScaleByCamera(e){this.scaleMeshes.forEach(i=>{i.scale.setScalar(Nh(e,i.scalePosition.handlePosition.clone().applyMatrix4(this.matrixWorld)))})}}function D6(){const n=new P.Group;n.name="ScaleHelperCube";const t=.05,e=new P.BoxGeometry(t,t,t),i=new P.MeshBasicMaterial({color:16776960,transparent:!0,side:P.DoubleSide}),s=new P.MeshBasicMaterial({color:16776960,opacity:.4,depthTest:!1,depthWrite:!1,transparent:!0,side:P.DoubleSide}),r=new P.Mesh(e,i),o=new P.Mesh(e,s);return r.name="ScaleHelperCube-front",o.name="ScaleHelperCube-behind",r.renderOrder=11,o.renderOrder=10,n.add(r,o),n}class S6 extends Co{constructor(...e){super(...e);u(this,"name","ScaleController");u(this,"startInfo");u(this,"dragStart",e=>{if(this.isDragging)return;this.isDragging=!0;const{intersect:i}=e,s=this.camera.position;let r=i.object;r.scalePosition||(r=i.object.parent);const o=r.scalePosition.basePosition.clone(),l=r.scalePosition.handlePosition.clone().clone().sub(o).clone(),c=new P.Line3(o,o.clone().add(l.normalize().multiplyScalar(5)));c.applyMatrix4(this.helperObject3D.matrixWorld);const h=new P.Raycaster(s,i.point.clone().sub(s)),d=Mn({raycaster:h,line:c});this.startInfo={line:c,scaleStartPoint:d,draggingObject:r},this.helperObject3D.scaleMeshes.forEach(f=>{f.uuid!==r.uuid&&(f.visible=!1)}),r.visible=!0,this.hooks.emit("scaleStart")});u(this,"dragging",e=>{if(!this.isDragging||!this.startInfo)return;const i="touches"in e?e.touches[0].clientX:e.x,s="touches"in e?e.touches[0].clientY:e.y,r=ll(this.camera,{x:i,y:s},this.container);return r?(this.scale(r),!1):this.dragEnd()});u(this,"scale",e=>{var l,c;if(!this.startInfo)return;const{line:i,scaleStartPoint:s,draggingObject:r}=this.startInfo,{scalePosition:o}=r,a=Mn({raycaster:e,line:i,clampToLine:!1});a.applyMatrix4(new P.Matrix4().getInverse(this.helperObject3D.matrixWorld.clone())),(c=(l=this.config)==null?void 0:l.scaleCallback)==null||c.call(l,{intersectPoint:a,scalePosition:o,offset:a.clone().sub(s)}),r.position.copy(a.clone()),this.hooks.emit("scale",new P.Vector3(1,1,1))});u(this,"dragEnd",()=>{this.isDragging&&(this.startInfo=void 0,this.isDragging=!1,this.helperObject3D.scaleMeshes.forEach(e=>{e.visible=!0}),this.internalHooks.emit("initialHelperPosition"),this.hooks.emit("scaleEnd"))});const i=this.show.bind(this),s=this.hide.bind(this);this.domEvents.addEventListener(this.helperObject3D,"mousedown",this.dragStart),document.addEventListener("mousemove",this.dragging),document.addEventListener("mouseup",this.dragEnd),this.domEvents.addEventListener(this.helperObject3D,"touchstart",this.dragStart),document.addEventListener("touchmove",this.dragging),document.addEventListener("touchend",this.dragEnd),this.hooks.on("rotateStart",s),this.hooks.on("rotateEnd",i),this.hooks.on("moveStart",s),this.hooks.on("moveEnd",i),this.hooks.on("moveByMouseEnable",s),this.hooks.on("moveByMouseDisable",i),this.disposers.push(()=>{this.domEvents.removeEventListener(this.helperObject3D,"mousedown",this.dragStart),document.removeEventListener("mousemove",this.dragging),document.removeEventListener("mouseup",this.dragEnd),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",this.dragStart),document.removeEventListener("touchmove",this.dragging),document.removeEventListener("touchend",this.dragEnd),this.hooks.off("rotateStart",s),this.hooks.off("rotateEnd",i),this.hooks.off("moveStart",s),this.hooks.off("moveEnd",i),this.hooks.off("moveByMouseEnable",s),this.hooks.off("moveByMouseDisable",i)})}initialHelperPosition(){this.helperObject3D.initialPosition();const e=this;e.offHoverListener&&e.offHoverListener(),e.offHoverListener=this.hoverListener(this.helperObject3D.scaleMeshes)}setScale(e){var l,c,h;let i=1,s=1,r=1;typeof e=="number"?(i=e,s=e,r=e):typeof e=="object"&&(i=(l=e.x)!=null?l:1,s=(c=e.y)!=null?c:1,r=(h=e.z)!=null?h:1);const o=new P.Vector3(i,s,r);this.hooks.emit("wantToScale",o)||(this.originObject3D.scale.copy(o),this.internalHooks.emit("setObjectScale",o),this.hooks.emit("scale",o),this.render())}}function $e(n,t){this._camera=n||null,this._domElement=t||document,this._raycaster=new P.Raycaster,this._selected=null,this._boundObjs={};var e=this;this._$onClick=function(){e._onClick.apply(e,arguments)},this._$onDblClick=function(){e._onDblClick.apply(e,arguments)},this._$onMouseMove=function(){e._onMouseMove.apply(e,arguments)},this._$onMouseDown=function(){e._onMouseDown.apply(e,arguments)},this._$onMouseUp=function(){e._onMouseUp.apply(e,arguments)},this._$onTouchMove=function(){e._onTouchMove.apply(e,arguments)},this._$onTouchStart=function(){e._onTouchStart.apply(e,arguments)},this._$onTouchEnd=function(){e._onTouchEnd.apply(e,arguments)},this._$onContextmenu=function(){e._onContextmenu.apply(e,arguments)},this._domElement.addEventListener("click",this._$onClick,!1),this._domElement.addEventListener("dblclick",this._$onDblClick,!1),this._domElement.addEventListener("mousemove",this._$onMouseMove,!1),this._domElement.addEventListener("mousedown",this._$onMouseDown,!1),this._domElement.addEventListener("mouseup",this._$onMouseUp,!1),this._domElement.addEventListener("touchmove",this._$onTouchMove,!1),this._domElement.addEventListener("touchstart",this._$onTouchStart,!1),this._domElement.addEventListener("touchend",this._$onTouchEnd,!1),this._domElement.addEventListener("contextmenu",this._$onContextmenu,!1)}$e.prototype.destroy=function(){this._domElement.removeEventListener("click",this._$onClick,!1),this._domElement.removeEventListener("dblclick",this._$onDblClick,!1),this._domElement.removeEventListener("mousemove",this._$onMouseMove,!1),this._domElement.removeEventListener("mousedown",this._$onMouseDown,!1),this._domElement.removeEventListener("mouseup",this._$onMouseUp,!1),this._domElement.removeEventListener("touchmove",this._$onTouchMove,!1),this._domElement.removeEventListener("touchstart",this._$onTouchStart,!1),this._domElement.removeEventListener("touchend",this._$onTouchEnd,!1),this._domElement.removeEventListener("contextmenu",this._$onContextmenu,!1)},$e.eventNames=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu","touchstart","touchend"],$e.prototype._getRelativeMouseXY=function(n){var t=n.target||n.srcElement;t.nodeType===3&&(t=t.parentNode);var e={x:0,y:0},i=t,s=getComputedStyle(i,null);e.y+=parseInt(s.getPropertyValue("padding-top"),10),e.x+=parseInt(s.getPropertyValue("padding-left"),10);do e.x+=i.offsetLeft,e.y+=i.offsetTop,s=getComputedStyle(i,null),e.x+=parseInt(s.getPropertyValue("border-left-width"),10),e.y+=parseInt(s.getPropertyValue("border-top-width"),10);while(i=i.offsetParent);var r={width:t===window?window.innerWidth:t.offsetWidth,height:t===window?window.innerHeight:t.offsetHeight};return{x:Number((n.pageX-e.x)/r.width)*2-1,y:-((n.pageY-e.y)/r.height)*2+1}},$e.prototype._objectCtxInit=function(n){n._3xDomEvent={}},$e.prototype._objectCtxDeinit=function(n){delete n._3xDomEvent},$e.prototype._objectCtxIsInit=function(n){return!!n._3xDomEvent},$e.prototype._objectCtxGet=function(n){return n._3xDomEvent},$e.prototype.camera=function(n){return n&&(this._camera=n),this._camera},$e.prototype.bind=function(n,t,e,i){console.assert($e.eventNames.indexOf(t)!==-1,"not available events:"+t),this._objectCtxIsInit(n)||this._objectCtxInit(n);var s=this._objectCtxGet(n);s[t+"Handlers"]||(s[t+"Handlers"]=[]),s[t+"Handlers"].push({callback:e,useCapture:i}),this._boundObjs[t]===void 0&&(this._boundObjs[t]=[]),this._boundObjs[t].push(n)},$e.prototype.addEventListener=$e.prototype.bind,$e.prototype.unbind=function(n,t,e,i){console.assert($e.eventNames.indexOf(t)!==-1,"not available events:"+t),this._objectCtxIsInit(n)||this._objectCtxInit(n);var s=this._objectCtxGet(n);s[t+"Handlers"]||(s[t+"Handlers"]=[]);for(var r=s[t+"Handlers"],o=0;o<r.length;o++){var a=r[o];if(e==a.callback&&i==a.useCapture){r.splice(o,1);break}}var l=this._boundObjs[t].indexOf(n);this._boundObjs[t].splice(l,1)},$e.prototype.removeEventListener=$e.prototype.unbind,$e.prototype._bound=function(n,t){var e=this._objectCtxGet(t);return e?!!e[n+"Handlers"]:!1},$e.prototype._onMove=function(n,t,e,i){var s=this._boundObjs[n];if(!(s===void 0||s.length===0)){var r=new P.Vector2;r.set(t,e),this._raycaster.setFromCamera(r,this._camera);var o=this._raycaster.intersectObjects(s),a=this._selected;if(o.length>0){var l,c,h,d=o[0],f=d.object;this._selected=f,h=this._bound("mousemove",f),a!=f&&(l=this._bound("mouseover",f),c=a&&this._bound("mouseout",a))}else c=a&&this._bound("mouseout",a),this._selected=null;h&&this._notify("mousemove",f,i,d),l&&this._notify("mouseover",f,i,d),c&&this._notify("mouseout",a,i,d)}},$e.prototype._onEvent=function(n,t,e,i){var s=this._boundObjs[n];if(!(s===void 0||s.length===0)){var r=new P.Vector2;r.set(t,e),this._raycaster.setFromCamera(r,this._camera);var o=this._raycaster.intersectObjects(s,!0);if(o.length!==0){for(var a=o[0],l=a.object,c=this._objectCtxGet(l),h=l.parent;typeof c=="undefined"&&h;)c=this._objectCtxGet(h),h=h.parent;c&&this._notify(n,l,i,a)}}},$e.prototype._notify=function(n,t,e,i){var s=this._objectCtxGet(t),r=s?s[n+"Handlers"]:null;if(!s||!r||r.length===0){t.parent&&this._notify(n,t.parent,e,i);return}for(var r=s[n+"Handlers"],o=0;o<r.length;o++){var a=r[o],l=!0;a.callback({type:n,target:t,origDomEvent:e,intersect:i,stopPropagation:function(){l=!1}}),l&&a.useCapture===!1&&t.parent&&this._notify(n,t.parent,e,i)}},$e.prototype._onMouseDown=function(n){return this._onMouseEvent("mousedown",n)},$e.prototype._onMouseUp=function(n){return this._onMouseEvent("mouseup",n)},$e.prototype._onMouseEvent=function(n,t){var e=this._getRelativeMouseXY(t);this._onEvent(n,e.x,e.y,t)},$e.prototype._onMouseMove=function(n){var t=this._getRelativeMouseXY(n);this._onMove("mousemove",t.x,t.y,n),this._onMove("mouseover",t.x,t.y,n),this._onMove("mouseout",t.x,t.y,n)},$e.prototype._onClick=function(n){this._onMouseEvent("click",n)},$e.prototype._onDblClick=function(n){this._onMouseEvent("dblclick",n)},$e.prototype._onContextmenu=function(n){this._onMouseEvent("contextmenu",n)},$e.prototype._onTouchStart=function(n){return this._onTouchEvent("touchstart",n)},$e.prototype._onTouchEnd=function(n){return this._onTouchEvent("touchend",n)},$e.prototype._onTouchMove=function(n){if(n.touches.length==1){var t=Number(n.touches[0].pageX/window.innerWidth)*2-1,e=-(n.touches[0].pageY/window.innerHeight)*2+1;this._onMove("mousemove",t,e,n),this._onMove("mouseover",t,e,n),this._onMove("mouseout",t,e,n)}},$e.prototype._onTouchEvent=function(n,t){var e=t.touches;if(e.length==0&&(e=t.changedTouches),e.length==1){var i=Number(e[0].pageX/window.innerWidth)*2-1,s=-(e[0].pageY/window.innerHeight)*2+1;this._onEvent(n,i,s,t)}};const Xh="Object3DHelperPlugin",hl=Xh,L6=()=>{console.error(`${hl} is disposed`)},T6=()=>{console.warn(`${hl} is disabled`)},z6=()=>{console.error(`${hl} is disabled`)};class Yh extends Bn{constructor(e){super(e);u(this,"name",Xh);u(this,"state",{visible:!0,enabled:!0,disposed:!1});u(this,"objectHelperMap",new Map);u(this,"css3DObjectParentMap",new Map);u(this,"css3DObjectModeMap",new Map);u(this,"css3DRender");this.five=e,this.css3DRender=new Qs(this.five.scene),console.warn("Object3DHelper: 使用此插件，需要在初始化five时，设置five参数: { backgroundAlpha: 0, backgroundColor: 0x000000 }"),Object.assign(window,{[`__${Xh.toUpperCase()}_DEBUG__`]:this})}show(e){return ee(this,null,function*(){this.setState({visible:!0},e)})}hide(e){return ee(this,null,function*(){this.setState({visible:!1},e)})}enable(e){this.setState({enabled:!0},e)}disable(e){this.setState({enabled:!1},e)}dispose(){this.setState({disposed:!0})}setState(e,i){if(this.state.disposed)return L6();if(!this.state.enabled&&e.enabled!==!0&&e.disposed!==!0)return z6();const s=F({},this.state);this.state=F(F({},this.state),e),e.disposed!==void 0&&e.disposed!==s.disposed&&e.disposed&&this.handleDispose(),e.visible!==void 0&&e.visible!==s.visible&&this.handleVisible(e.visible),e.enabled!==void 0&&e.enabled!==s.enabled&&this.handleEnable(e.enabled),this.hooks.emit("stateChange",{state:this.state,prevState:s})}getObject3DHelper(e){return this.objectHelperMap.get(e)}addObject3DHelper(e,i={}){var w;if(!e){console.error("Object3D is undefined");return}if(this.objectHelperMap.has(e)){console.warn(`Object3DHelperPlugin: object3D ${e.name} is already has helper`);return}const s=new C6,r=[],o=(w=this.five.getElement())==null?void 0:w.parentElement,a=this.five.camera,c=F(F({},{moveHelper:!0,rotateHelper:!0,scaleHelper:!0,boundingBoxHelper:!1,positionFrom:"objectPosition"}),i),{moveHelper:h,rotateHelper:d,scaleHelper:f,boundingBoxHelper:g}=c,p=s.hooks,m=new Pt,v=new $e(this.five.camera,this.five.getElement()),b=x=>{if(x)return typeof x=="boolean"?x:x.enable};if(b(h)){const x=F(F({},this.getConfig(c.moveHelper)),c),E=new l6(e,F({},x)),L=new Io(this.five,v,b6,e,E,x,p,m);s.addControllers({moveController:L.helperController}),r.push(()=>L.dispose())}if(b(d)){const x=F(F({},this.getConfig(c.rotateHelper)),c),E=new d6(e,F({container:o},x)),L=new Io(this.five,v,I6,e,E,x,p,m);s.addControllers({rotateController:L.helperController}),r.push(()=>L.dispose())}if(b(g)){const x=new v6(e),E=new Io(this.five,v,E6,e,x,void 0,p,m);s.addControllers({boundingBoxController:E.helperController})}if(b(f))if(e.isCSS3DObject&&o){const x=new g6(e,o,a,this.five.scene),E=new Io(this.five,v,k6,e,x,void 0,p,m);s.addControllers({scaleController:E.helperController}),r.push(()=>E.dispose()),ai(this.five).then(()=>{var L,S;if(e.isCSS3DObjectPlus){const R=e;if(!R||R.mode!=="front")return;const z=(L=this.css3DRender.behindModeCSS3DRenderer.wrapper)!=null?L:jl(this.five);z&&(this.css3DObjectParentMap.set(R,R.parent),R.removeFromParent(),this.css3DRender.behindModeCSS3DRenderer.setWrapper(z),(S=this.css3DRender.getBehindCSS3DObjectGroup())==null||S.add(R),this.css3DRender.render(this.five.camera))}else e.isCSS3DObject&&(this.css3DObjectModeMap.set(e,e.mode),e.mode="behind")})}else{const x=F(F({},this.getConfig(c.scaleHelper)),c),E=new x6(e,x),L=new Io(this.five,v,S6,e,E,x,p,m);s.addControllers({scaleController:L.helperController}),r.push(()=>L.dispose())}return this.objectHelperMap.set(e,{helper:s,disposers:r}),s.controllers}removeObject3DHelper(e){if(!this.objectHelperMap.has(e))return;const{helper:i,disposers:s}=this.objectHelperMap.get(e);if(i){if(e.isCSS3DObjectPlus){const r=e,o=this.css3DObjectParentMap.get(r);o&&o.add(r),this.css3DRender.render(this.five.camera)}else if(e.isCSS3DObject){const r=this.css3DObjectModeMap.get(e);e.mode=r}this.objectHelperMap.delete(e),i.dispose(),s==null||s.forEach(r=>r==null?void 0:r())}}handleEnable(e,i=!0){e?(this.everyHelperDo(s=>s.enable()),this.hooks.emit("enable",{userAction:i})):(this.everyHelperDo(s=>s.disable()),this.hooks.emit("disable",{userAction:i})),this.state.enabled=e}handleVisible(e,i=!0){e?(this.everyHelperDo(s=>s.show()),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:i}))):(this.everyHelperDo(s=>s.hide()),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:i}))),this.state.visible=e}handleDispose(){this.everyHelperDo((e,i)=>{e.dispose(),i==null||i.forEach(s=>s==null?void 0:s())})}everyHelperDo(e){this.objectHelperMap.forEach(({helper:i,disposers:s})=>{i&&e(i,s)})}actionIfStateIsEnabled(e,i){if(this.state.enabled)return e();i!=null&&i.warnLog&&T6()}getConfig(e){if(e&&typeof e!="boolean"&&e.enable)return e}}const O6=n=>new Yh(n),j6=`
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`,V6=`
uniform sampler2D map;
uniform vec4 size;
varying vec2 vUv;
uniform float opacity;

void main() {
  float dx = max(size[0] + size[2] - 1.0, 0.0);
  vec2 uv = vec2(((vUv.x <= dx ? vUv.x + 1.0 : vUv.x) - size[0]) / size[2], (vUv.y - size[1]) / size[3]);
  float a = 0.1;
  float transX = uv.x < a ? 1.0 / a * uv.x : (uv.x > (1.0 - a) ? 1.0 / a * (1.0 - uv.x) : 1.0);
  float transY = uv.y < a ? 1.0 / a * uv.y : (uv.y > (1.0 - a) ? 1.0 / a * (1.0 - uv.y) : 1.0);
	float match = (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5))) * (transX < transY ? transX : transY);
  gl_FragColor = vec4(texture2D(map, uv).xyz, match * opacity);
}
`;function B6(n){const t=Math.PI*2;let e=-Math.atan2(n.x,-n.z);e=(e%t+t)%t;const i=-Math.asin(n.y/1);return{longitude:e,latitude:i}}class pv{constructor(t,e){u(this,"video");u(this,"fiveUtil");u(this,"_id");u(this,"url");u(this,"five");u(this,"panoIndex");u(this,"observer");u(this,"origin");u(this,"videoMesh");u(this,"_enabled",!0);u(this,"_disposed",!1);u(this,"videoDataLoaded",!1);u(this,"hasVideoEverPlayed",!1);u(this,"renderFiveDisposer");u(this,"hooks");u(this,"unmute",()=>{this.video.muted=!1});u(this,"uv2Position",(t,e)=>{const s=Math.PI,r=Math.PI*2,o=t,a=1-e,l=new B.Vector3(-1*Math.cos(r*o)*Math.sin(s*a),1*Math.cos(s*a),1*Math.sin(r*o)*Math.sin(s*a));l.setX(-l.x);const c=this.fiveUtil.workUtil.getResolvedObserver(this.panoIndex);if(!c)return this.logWarning(`点位 ${this.panoIndex} 不存在，请检查 Five 数据是否正常。`);const h=c.position.clone(),d=c.quaternion.clone(),f=l.clone();return f.applyAxisAngle(new B.Vector3(0,1,0),Math.PI/2),f.applyQuaternion(d),f.add(h),f});u(this,"onFiveDataLoaded",()=>{const t=this.fiveUtil.workUtil.getResolvedObserver(this.panoIndex);if(!t)return this.logWarning(`点位 ${this.panoIndex} 不存在，请检查 Five 数据是否正常。`);this.observer=t;const{x:e,y:i,z:s,w:r}=t.quaternion,o=new B.Quaternion(e,i,s,r),a=t.position;this.videoMesh.position.fromArray([a.x,a.y,a.z]),this.videoMesh.quaternion.set(0,0,0,1),this.videoMesh.rotateOnAxis(new B.Vector3(0,1,0),Math.PI/2),this.videoMesh.applyQuaternion(o)});u(this,"onFiveWantsMoveToPano",t=>{t===this.panoIndex&&(this.hasVideoEverPlayed||this.video.play().catch(()=>{}))});u(this,"onFivePanoArrived",t=>{if(this.disposed)return this.logWarning("实例已被销毁");this.enabled&&this.panoIndex===t&&this.mount()});u(this,"onFivePanoWillArrive",t=>{if(t!==this.panoIndex)return this.unmount();this.panoIndex!==t&&this.unmount()});u(this,"onFiveModeChange",t=>{t!=="Panorama"&&this.hide()});u(this,"onFiveInitAnimationEnded",()=>{const t=this.five.getCurrentState();t.mode==="Panorama"&&t.panoIndex===this.panoIndex&&this.mount()});u(this,"onFiveWantsTapGesture",t=>{if(!this.five.scene.children.includes(this.videoMesh))return;if(this.disposed)return this.logWarning("实例已被销毁");if(!this.enabled)return this.logWarning("实例已被禁用");const[e]=t.intersectObject(this.videoMesh);if(!e)return;if(this.checkIntersectionInBounding(this.origin,e)){const s={target:this,_preventDefaultReturn:!1,preventDefault:()=>{s._preventDefaultReturn=!0}};return this.hooks.emit("click",s),s._preventDefaultReturn===!1&&(this.video.muted=!this.video.muted),!1}});u(this,"onVideoDataLoaded",()=>{this.videoDataLoaded=!0,this.video.paused===!1&&this.video.src!==""&&this.onVideoPlayingAndLoaded()});u(this,"onVideoPlaying",()=>{this.hasVideoEverPlayed=!0,this.enabled&&this.videoDataLoaded&&this.onVideoPlayingAndLoaded()});u(this,"onVideoPlayingAndLoaded",()=>{if(!this.videoDataLoaded)return this.logWarning("视频数据未加载");if(this.video.paused===!0)return this.logWarning("视频已暂停");this.video.addEventListener("timeupdate",()=>{if(this.enabled&&this.panoIndex===this.five.getCurrentState().panoIndex&&this.five.getCurrentState().mode==="Panorama"&&(this.renderFiveDisposer||(this.renderFiveDisposer=Zs(()=>{this.five.needsRender=!0},30)),this.five.scene.add(this.videoMesh),this.videoMesh.material.uniforms.opacity.value===0)){const t={value:0};ot({targets:t,value:1,duration:300,easing:"linear",update:()=>{this.videoMesh.material.uniforms.opacity.value=t.value},complete:()=>{this.videoMesh.material.uniforms.opacity.value=1}})}},{once:!0})});u(this,"onVideoPaused",()=>{var t;(t=this.renderFiveDisposer)==null||t.call(this),this.renderFiveDisposer=void 0});var l,c;this.five=t,this.panoIndex=e.panoIndex,this.fiveUtil=e.fiveUtil,this._id=e.renderID,this.url=e.url,this.origin=e.origin.slice(),this.hooks=e.hooks,this._enabled=(c=(l=e.initialState)==null?void 0:l.enabled)!=null?c:!0;const i=document.createElement("video");i.crossOrigin="anonymous",i.autoplay=!1,i.muted=!0,i.loop=!0,i.playsInline=!0,this.video=i;const s=new B.VideoTexture(this.video);s.minFilter=B.LinearFilter,s.magFilter=B.LinearFilter;const r=new B.ShaderMaterial({vertexShader:j6,fragmentShader:V6,uniforms:{map:{value:s},size:{value:new B.Vector4(this.origin[0],1-this.origin[1]-this.origin[3],this.origin[2],this.origin[3])},opacity:{value:0}},depthTest:!0,transparent:!0}),o=new B.SphereBufferGeometry(1,64,64);o.scale(-1,1,1);const a=new B.Mesh(o,r);a.name="pano-video-plugin",this.videoMesh=a,this.fiveUtil.workUtil.work&&this.onFiveDataLoaded(),this.enabled&&this.addEventListeners(),this.mountIfNeeded(),window[`__PANOVIDEO_${this.renderID}_DEBUG__`]=this}get renderID(){return this._id}get disposed(){return this._disposed}get enabled(){return this._enabled}dispose(){this.disposed||(this.disable(),this._disposed=!0)}enable(){this.disposed||this.enabled||(this._enabled=!0,!this.observer&&this.five.work&&this.onFiveDataLoaded(),this.addEventListeners(),this.mountIfNeeded())}disable(){this.disposed||this.enabled&&(this._enabled=!1,this.removeEventListeners(),this.unmount())}lookAtVideo(){if(!this.observer)return;const t=this.getUVCenter();if(!t)return;const e=this.uv2Position(t[0],t[1]);if(!e)return;const i=new B.Vector3().subVectors(e,this.observer.position).normalize(),{longitude:s,latitude:r}=B6(i);this.five.setState({panoIndex:this.panoIndex,longitude:s,latitude:r}),this.onFiveWantsMoveToPano(this.panoIndex)}getUVCenter(){if(!this.origin)return;const t=this.origin[0]+this.origin[2]/2,e=this.origin[1]+this.origin[3]/2;return[t,e]}addEventListeners(){this.five.on("loaded",this.onFiveDataLoaded),this.five.on("modeChange",this.onFiveModeChange),this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("panoWillArrive",this.onFivePanoWillArrive),this.five.on("wantsMoveToPano",this.onFiveWantsMoveToPano),this.five.on("wantsTapGesture",this.onFiveWantsTapGesture),this.five.on("initAnimationEnded",this.onFiveInitAnimationEnded),this.video.addEventListener("canplaythrough",this.onVideoDataLoaded),this.video.addEventListener("playing",this.onVideoPlaying),this.video.addEventListener("pause",this.onVideoPaused)}removeEventListeners(){this.five.off("loaded",this.onFiveDataLoaded),this.five.off("modeChange",this.onFiveModeChange),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("panoWillArrive",this.onFivePanoWillArrive),this.five.off("wantsMoveToPano",this.onFiveWantsMoveToPano),this.five.off("wantsTapGesture",this.onFiveWantsTapGesture),this.five.off("initAnimationEnded",this.onFiveInitAnimationEnded),this.video.removeEventListener("canplaythrough",this.onVideoDataLoaded),this.video.removeEventListener("playing",this.onVideoPlaying),this.video.removeEventListener("pause",this.onVideoPaused)}mountIfNeeded(){const t=this.five.getCurrentState();t.mode==="Panorama"&&t.panoIndex===this.panoIndex&&this.enabled&&this.mount()}mount(){if(this.disposed)return this.logWarning("插件已经销毁，无法挂载。");if(this.url==="")return this.logWarning("视频资源不存在。");this.video.src!==this.url&&(this.video.src=this.url),this.video.paused&&this.video.play().catch(t=>{this.logWarning(t instanceof Error?t.message:"视频播放失败。"),this.five.once("gesture",()=>{this.video.play().catch(e=>{this.logWarning(e instanceof Error?e.message:"自动播放视频失败。")})})})}unmount(){this.video.pause(),this.videoMesh.material.uniforms.opacity.value=0,this.video.src!==""&&(this.video.src=""),this.five.scene.remove(this.videoMesh)}hide(){this.video.pause(),this.videoMesh.material.uniforms.opacity.value=0,this.five.scene.remove(this.videoMesh)}logWarning(t){console.warn("⛔ ==> [VideoMeshController]:",t)}checkIntersectionInBounding(t,e){if(!e.uv)return!1;const[i,s]=e.uv.toArray(),[r,o,a,l]=t,c=1-o-l,h=r+a,d=c+l;return i>=r&&i<=h&&s>=c&&s<=d}}class _6 extends Bn{constructor(e){super(e);u(this,"controllerMap",new Map);u(this,"data");u(this,"enabled",!0);u(this,"_disposed",!1)}get state(){return{enabled:this.enabled}}get disposed(){return this._disposed}load(e,i){var s;if(this.disposed)return this.logWarning("插件已被销毁");typeof((s=i==null?void 0:i.initialState)==null?void 0:s.enabled)!="undefined"&&i.initialState.enabled!==this.enabled&&(i.initialState.enabled?this.enable():this.disable()),e.list.forEach(r=>{const o=r.pano_index,a=r.render_id;r.video_list.forEach(l=>{this.controllerMap.set(l.render_id,new pv(this.five,fe(F({},l),{fiveUtil:this.fiveUtil,panoIndex:o,renderID:a,hooks:this.hooks,initialState:{enabled:this.enabled}})))})}),this.data=e,this.hooks.emit("dataLoaded",e)}enable(e){var s;if(this.disposed)return this.logWarning("插件已被销毁");if(this.enabled)return;this.enabled=!0,Array.from(this.controllerMap.values()).forEach(r=>r.enable());const i=(s=e==null?void 0:e.userAction)!=null?s:!0;this.hooks.emit("enable",{userAction:i})}disable(e){var s;if(this.disposed)return this.logWarning("插件已被销毁");if(!this.enabled)return;this.enabled=!1,Array.from(this.controllerMap.values()).forEach(r=>r.disable());const i=(s=e==null?void 0:e.userAction)!=null?s:!0;this.hooks.emit("disable",{userAction:i})}lookAtVideoItemByRenderID(e){if(this.disposed)return this.logWarning("插件已被销毁");const i=this.controllerMap.get(e);if(!i)return this.logWarning(`ID 为 ${e} 的点位视频不存在`);i.lookAtVideo()}unmuteByRenderID(e){if(this.disposed)return this.logWarning("插件已被销毁");const i=this.controllerMap.get(e);if(!i)return this.logWarning(`ID 为 ${e} 的点位视频不存在`);i.unmute()}add(e,i){if(this.disposed)return this.logWarning("插件已被销毁");i.forEach(s=>{if(this.controllerMap.get(s.render_id))return this.logWarning(`ID 为 ${s.render_id} 的点位视频已存在`);const r=s.render_id;this.controllerMap.set(s.render_id,new pv(this.five,fe(F({},s),{fiveUtil:this.fiveUtil,panoIndex:e,renderID:r,hooks:this.hooks,initialState:{enabled:this.enabled}})))})}removeByRenderID(e){if(this.disposed)return this.logWarning("插件已被销毁");const i=this.controllerMap.get(e);if(!i)return this.logWarning(`ID 为 ${e} 的点位视频不存在`);i.dispose(),this.controllerMap.delete(e)}clear(){if(this.disposed)return this.logWarning("插件已被销毁");Array.from(this.controllerMap.values()).forEach(e=>e.dispose()),this.controllerMap.clear()}dispose(){if(this.disposed)return this.logWarning("插件已被销毁");this._disposed=!0,Array.from(this.controllerMap.values()).forEach(e=>e.dispose()),this.controllerMap.clear()}logWarning(e){console.warn("⛔ ==> [PanoVideoPluginController]:",e)}}const R6=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),F6=n=>new _6(n);function mv(n){const t=new Map;return n.forEach(e=>e.pipes.forEach(i=>t.set(i.id,i))),Array.from(t.values())}function N6(n){const t=n.target.map(({startLibraryID:e,endLibraryID:i})=>{const s=n.data.pipelines.find(r=>r.startLibraryID===e&&r.endLibraryID===i);return s||console.warn(`Cannot find pipeline with startLibraryID ${e} and endLibraryID ${i}`),s}).filter(Fe);return mv(t)}function G6(n){if(n.quality===0)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/1.png";if(n.quality===1)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/2.png";if(n.quality===2)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/3.png";if(n.quality===3)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/4.png";if(n.quality===4)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/5.png";if(n.isHot)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/6.png"}function H6(n,t){const e=n.ConnectsDataset.map(s=>{const r=s.data,o=s.start,a=s.end,l={isHot:s.waterType===5,quality:s.waterType},c=r.map(h=>{const d=n.LinesDataset.find(m=>m.id===h);if(!d)return null;const f=d.data,g=t!=null&&t.getPipeRadius?t.getPipeRadius(d):1.6/100,p=t!=null&&t.getPipeUrl?t.getPipeUrl(l):G6(l);return{id:d.id,radius:g,water:l,path:f,texture:p}}).filter(Fe);return{startLibraryID:o,endLibraryID:a,pipes:c}});return{pipes:mv(e),pipelines:e}}function W6(n,t){const e=1-n;return e*e*t}function U6(n,t){return 2*(1-n)*n*t}function Q6(n,t){return n*n*t}function Zh(n,t,e,i){return W6(n,t)+U6(n,e)+Q6(n,i)}function X6(n,t){const e=1-n;return e*e*e*t}function Y6(n,t){const e=1-n;return 3*e*e*n*t}function Z6(n,t){return 3*(1-n)*n*n*t}function J6(n,t){return n*n*n*t}function Jh(n,t,e,i,s){return X6(n,t)+Y6(n,e)+Z6(n,i)+J6(n,s)}function qh(n,t){const e=t.length-1;if(e<1)throw new Error("length of points must greater than 2");if(e===2)return new P.Vector3(Zh(n,t[0].x,t[1].x,t[2].x),Zh(n,t[0].y,t[1].y,t[2].y),Zh(n,t[0].z,t[1].z,t[2].z));if(e===3)return new P.Vector3(Jh(n,t[0].x,t[1].x,t[2].x,t[3].x),Jh(n,t[0].y,t[1].y,t[2].y,t[3].y),Jh(n,t[0].z,t[1].z,t[2].z,t[3].z));if(e===1){const[s,r]=t;return s.clone().add(r.clone().sub(s).multiplyScalar(n))}const i=[];return t.reduce((s,r)=>(i.push(qh(n,[s,r])),r)),qh(n,i)}class q6 extends P.Curve{constructor(e=[]){super();u(this,"type");u(this,"controlPoints");this.type="CustomBezierCurve3",this.controlPoints=e}getPoint(e,i=new P.Vector3){const s=i,r=qh(e,this.controlPoints);return s.copy(r),s}copy(e){return super.copy(e),this.controlPoints=e.controlPoints.map(i=>i.clone()),this}toJSON(){const e=super.toJSON(),i=this.controlPoints.map(r=>r.toArray());return Object.assign(e,{controlPoints:i})}fromJSON(e){return super.fromJSON(e),this.controlPoints=e.controlPoints.map(i=>new P.Vector3().fromArray(i)),this}}const K6=`
  varying vec2 vUv;
  void main() {
    vUv = uv; 
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,$6=`
  varying vec2 vUv;
  uniform float uOffset;
  uniform float vOffset;
  uniform float opacity;
  uniform mediump sampler2D envMap;

  void main(){
    float u = vUv.x + uOffset;
    float v = vUv.y + vOffset;
    vec2 uv = vec2(u, v);
    gl_FragColor = texture2D(envMap, uv);
    gl_FragColor.a = gl_FragColor.a * opacity;
  }
`;class yr extends P.Mesh{constructor(e,i=$6){super();u(this,"geometryConfig",{radius:1.5/100,tubularSegments:20,radialSegments:8});u(this,"customID");u(this,"path");u(this,"pathLength",0);u(this,"pathPoints");u(this,"texture");u(this,"opacityAnime");u(this,"uPreMeter",1);e.geometryConfig&&(this.geometryConfig=F(F({},this.geometryConfig),e.geometryConfig)),this.customID=e.id||this.uuid,this.pathPoints=e.path,this.path=yr.calculatePath(e.path.map(l=>new P.Vector3().fromArray(l))),this.pathLength=this.path.getLength(),this.texture=yr.formatTexture(e.texture);const{radius:s,tubularSegments:r,radialSegments:o}=this.geometryConfig,a=yr.formatTexture(e.texture);this.geometry=yr.formatGeometryUV(new P.TubeBufferGeometry(this.path,r,s,o),this.pathLength,this.uPreMeter),this.material=new P.ShaderMaterial({uniforms:{opacity:{value:1},uOffset:{value:0},vOffset:{value:0},envMap:{value:a}},transparent:!0,vertexShader:K6,fragmentShader:i})}static calculatePath(e){return e.length===2?new P.LineCurve3(e[0],e[1]):new q6(e)}static formatGeometryUV(e,i,s){const r=e.getAttribute("uv");for(let o=0;o<r.count;o++){const a=r.getX(o)*i*s;r.setX(o,a)}return e}static formatTexture(e){return e.wrapS=P.RepeatWrapping,e.wrapT=P.RepeatWrapping,e}hide(e){return ee(this,null,function*(){var r;(r=this.opacityAnime)==null||r.dispose();const i=0;if(typeof(e==null?void 0:e.duration)!="number")return this.setOpacity(i);const s=this.material.uniforms.opacity.value;return s===i?!0:new Promise(o=>{this.opacityAnime=new ls({progress:s}).to({progress:i}).onUpdate(({progress:a})=>this.setOpacity(a)).onComplete(()=>o(!0)).onDispose(()=>{this.setOpacity(i),o(!1)}).play()})})}show(e){return ee(this,null,function*(){var r;(r=this.opacityAnime)==null||r.dispose();const i=1;if(typeof(e==null?void 0:e.duration)!="number")return this.setOpacity(i);const s=this.material.uniforms.opacity.value;return new Promise(o=>{this.opacityAnime=new ls({progress:s}).to({progress:i}).onUpdate(({progress:a})=>this.setOpacity(a)).onComplete(()=>o(!0)).onDispose(()=>{this.setOpacity(i),o(!1)}).play()})})}setOpacity(e){return this.material.uniforms.opacity.value=e,this.material.needsUpdate=!0,this.needsRender=!0,!0}disposeAnime(){var e;(e=this.opacityAnime)==null||e.dispose(),this.opacityAnime=void 0}dispose(){this.disposeAnime(),this.geometry.dispose(),this.material.dispose()}}const eE=`
  varying vec2 vUv;
  uniform float uOffset;
  uniform float vOffset;
  uniform float opacity;
  uniform mediump sampler2D envMap;

  void main(){
    // u > 0 时，不显示。即贴图不向前移动时，全部使用 u = 0 的值进行平铺
    float u = min(vUv.x + uOffset, 0.0);
    float v = vUv.y + vOffset;
    vec2 uv = vec2(u, v);
    gl_FragColor = texture2D(envMap, uv);
    gl_FragColor.a = gl_FragColor.a * opacity;
  }
`;class tE extends yr{constructor(e){super(e,eE);u(this,"initialDisplacement",0);u(this,"oldTime",new Date().getTime());u(this,"flowSpeed",.6);u(this,"rotateSpeed",0);u(this,"flowAnimationDisposer",()=>{})}setInitialDisplacement(e,i="backward"){this.initialDisplacement=Math.abs(e)*(i==="forward"?-1:1),this.moveFromOrigin(this.initialDisplacement)}moveFromOrigin(e){const i=e*this.uPreMeter;return this.material.uniforms.uOffset.value=i,this.material.needsUpdate=!0,this.needsRender=!0,!0}moveForwardFromInitialOffset(e){const i=e*-1,s=this.initialDisplacement+i;this.moveFromOrigin(s)}flow(){this.flowAnimationDisposer(),this.oldTime=new Date().getTime();let e=0,i=0;const s=Zs(()=>{const r=new Date().getTime(),o=r-this.oldTime,a=this.flowSpeed*(o/1e3),l=this.rotateSpeed*(o/1e3);e=e+a,i=i+l;const c=1/360,h=i*c;this.material.uniforms.vOffset.value=h,this.moveForwardFromInitialOffset(e),this.oldTime=r});this.flowAnimationDisposer=function(){s(),this.moveForwardFromInitialOffset(0)}}stopFlow(){this.flowAnimationDisposer()}setSpeed(e){typeof(e==null?void 0:e.flowSpeed)=="number"&&(this.flowSpeed=e.flowSpeed),typeof(e==null?void 0:e.rotateSpeed)=="number"&&(this.rotateSpeed=e.rotateSpeed)}disposeAnime(){super.disposeAnime(),this.flowAnimationDisposer()}}const gv={flowSpeed:.6,rotateSpeed:0};let iE=class extends hn{constructor(e){super(e);u(this,"data");u(this,"state");u(this,"group");u(this,"pipeObjects",[]);u(this,"texturePromiseCache",new Map);u(this,"dispose",()=>{this.disable(),this.five.scene.remove(this.group),this.texturePromiseCache.forEach(e=>e.then(i=>i.dispose())),this.texturePromiseCache.clear()});u(this,"onWantsFiveTapGesture",(...e)=>{const[i]=e,s=i.intersectObjects(this.pipeObjects,!1);if(s.length===0||!this.data)return;const a=s[0].object.customID,l=this.data.pipes.find(({id:h})=>h===a),c=this.data.pipelines.find(h=>l&&h.pipes.includes(l));if(!(!l||!c))return this.hooks.emit("tap",{intersectObjects:s,pipe:l,pipeline:c,wantsFiveTapGestureParams:e}),!1});this.state={target:null,visible:!0,enabled:!0,isFlowing:!1,speed:gv},this.five=e,this.group=new P.Group,this.group.name="water-pipe-group",this.five.scene.add(this.group),this.five.once("dispose",this.dispose),this.five.on("wantsTapGesture",this.onWantsFiveTapGesture)}load(e,i,s,r){return ee(this,null,function*(){const o=this.data;this.data=yield this.formatData(e,r),this.removeAllPipes(),this.hooks.emit("dataChange",this.data,o),this.pipeObjects=yield Promise.all(this.data.pipes.filter(a=>!!(a!=null&&a.texture)).map(d=>ee(this,[d],function*({id:a,texture:l,path:c,radius:h}){const f=yield this.loadPipeTexture(l),g={id:a,path:c,textureURL:l,texture:f,geometryConfig:{radius:h}};return new tE(g)}))),this.data.pipelines.forEach(a=>{a.pipes.reduce((l,c)=>{const h=this.findPipeObjectWithID(c.id);return h==null||h.setInitialDisplacement(l),l+((h==null?void 0:h.pathLength)||0)},0)}),this.hooks.emit("dataLoaded",this.data),this.state.visible===!1&&this.pipeObjects.forEach(a=>a.setOpacity(0)),this.state.enabled&&(this.group.add(...this.pipeObjects),this.five.needsRender=!0),i&&this.setState(i,{userAction:s})})}setState(e,i={}){const s=this.state;if(Nt(e,s,{deep:!0}))return;const r=i.userAction!==void 0?i.userAction:!0;if(this.updateState(e,r),e.enabled!==void 0&&s.enabled!==e.enabled&&(e.enabled?this._enable({userAction:r}):this._disable({userAction:r})),e.visible!==void 0&&s.visible!==e.visible){const o={userAction:r,anime:{duration:500}};e.visible?this._show(o):this._hide(o)}if(e.isFlowing!==void 0&&s.isFlowing!==e.isFlowing&&(e.isFlowing?this._flow():this._stopFlow()),e.speed!==void 0&&!Nt(s.speed,this.state.speed,{deep:!0})&&this._setSpeed(e.speed),e.target!==void 0&&!Nt(s.target,this.state.target,{deep:!0})){const o={target:e.target,showAnime:{duration:500},hideAnime:{duration:500}};this._switchPipelines(o)}}enable(e={}){var s;if(this.state.enabled)return;const i=(s=e.userAction)!=null?s:!0;this.updateState({enabled:!0},i),this._enable({userAction:i})}disable(e={}){var s;if(this.state.enabled===!1)return;const i=(s=e.userAction)!=null?s:!0;this.updateState({enabled:!1,isFlowing:!1},i),this._disable({userAction:i})}show(){return ee(this,arguments,function*(e={}){if(this.state.visible)return;const i=F({userAction:!0,anime:{duration:500}},e);this.updateState({visible:!0},i.userAction),yield this._show(i)})}hide(){return ee(this,arguments,function*(e={}){if(this.state.visible===!1)return;const i=F({userAction:!0,anime:{duration:500}},e);this.updateState({visible:!1},i.userAction),yield this._hide(i)})}switchPipelines(e){return ee(this,null,function*(){var c,h,d,f,g,p;if(!this.data)return;const i=(c=e==null?void 0:e.target)!=null?c:null,s=(h=e==null?void 0:e.userAction)!=null?h:!0;this.updateState({target:i},s);const r={duration:500},o=(f=(d=e==null?void 0:e.hideAnime)!=null?d:e==null?void 0:e.anime)!=null?f:r,a=(p=(g=e==null?void 0:e.showAnime)!=null?g:e==null?void 0:e.anime)!=null?p:r,l={target:i,showAnime:a,hideAnime:o};this._switchPipelines(l)})}flow(e={}){var s;if(this.state.isFlowing)return;const i=(s=e.userAction)!=null?s:!0;this.updateState({isFlowing:!0},i),this._flow()}stopFlow(e={}){var s;if(this.state.isFlowing===!1)return;const i=(s=e.userAction)!=null?s:!0;this.updateState({isFlowing:!1},i),this._stopFlow()}setSpeed(e){var r,o;const i=(r=e==null?void 0:e.speed)!=null?r:gv,s=(o=e.userAction)!=null?o:!0;this.updateState({speed:i},s),this._setSpeed(i)}formatData(e,i){return ee(this,null,function*(){return H6(e,i)})}_enable(e){this.hooks.emit("enable",{userAction:e.userAction}),this.five.scene.add(this.group),this.five.needsRender=!0,this.five.on("wantsTapGesture",this.onWantsFiveTapGesture)}_disable(e){this.hooks.emit("disable",{userAction:e.userAction}),this.disposeAnime(),this.five.scene.remove(this.group),this.five.needsRender=!0,this.five.off("wantsTapGesture",this.onWantsFiveTapGesture)}_show(e){return ee(this,null,function*(){var r;this.hooks.emit("show",{userAction:e.userAction});const i=(r=e==null?void 0:e.anime)!=null?r:{duration:500},s=this.findPipeObjectWithTarget(this.state.target);yield Promise.all(s.map(o=>o==null?void 0:o.show(i))),this.five.needsRender=!0})}_hide(e){return ee(this,null,function*(){var s;this.hooks.emit("hide",{userAction:e.userAction});const i=(s=e==null?void 0:e.anime)!=null?s:{duration:500};yield Promise.all(this.pipeObjects.map(r=>r.hide(i))),this.five.needsRender=!0})}_switchPipelines(e){return ee(this,null,function*(){if(!this.data)return;const i=this.findPipeObjectWithTarget(e.target),s=e.hideAnime;yield Promise.all(this.pipeObjects.map(o=>o.hide(s)));const r=e.showAnime;yield Promise.all(i.map(o=>o.show(r)))})}_flow(){this.pipeObjects.forEach(e=>e.flow())}_stopFlow(){this.pipeObjects.forEach(e=>e.stopFlow())}_setSpeed(e){this.pipeObjects.forEach(i=>i.setSpeed(e))}updateState(e,i){const s=this.state;this.state=F(F({},this.state),e),this.hooks.emit("stateChange",{state:this.state,prevState:s,userAction:i})}loadPipeTexture(e){return ee(this,null,function*(){const i=this.texturePromiseCache.get(e);if(i)return i;const s=ms(e);return this.texturePromiseCache.set(e,s),s})}disposeAnime(){this.pipeObjects.forEach(e=>e.disposeAnime()),this.five.needsRender=!0}removeAllPipes(){this.disposeAnime(),this.group.remove(...this.pipeObjects),this.pipeObjects.forEach(e=>e.dispose()),this.pipeObjects=[],this.five.needsRender=!0}findPipeObjectWithID(e){return this.pipeObjects.find(({customID:i})=>i===e)}findPipeObjectWithTarget(e){return e?N6({data:this.data,target:e}).map(({id:s})=>this.findPipeObjectWithID(s)).filter(Fe):this.pipeObjects}};const nE=n=>new iE(n),sE="data:image/png;base64,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";function rE(n){De(n,"svelte-16mrlad",".room-label-item.svelte-16mrlad{position:absolute;font-size:0.625rem;transform:none;cursor:pointer;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:#fff}.room-label-item__text.svelte-16mrlad{position:absolute;left:0;top:-4rem;transform:translate(-50%, 0);display:flex;justify-content:center;align-items:center;height:1.25rem;min-width:2rem;padding:0 0.375rem;pointer-events:all;background-size:100% 100%;background-repeat:no-repeat;white-space:nowrap}.room-label-item__bar.svelte-16mrlad{position:absolute;transform-origin:top;top:-2.75rem;height:3rem;width:0.0625rem;background-image:linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0))}")}function vv(n){let t,e,i,s,r,o;return{c(){t=U("span"),e=Ve(n[0]),i=ae(),s=U("div"),y(t,"class","room-label-item__text svelte-16mrlad"),Q(t,"background-image","url("+sE+")"),y(s,"class","room-label-item__bar svelte-16mrlad")},m(a,l){Y(a,t,l),V(t,e),n[13](t),Y(a,i,l),Y(a,s,l),n[14](s),r||(o=je(t,"click",function(){Di(n[4])&&n[4].apply(this,arguments)}),r=!0)},p(a,l){n=a,l&1&&Ge(e,n[0])},d(a){a&&X(t),n[13](null),a&&X(i),a&&X(s),n[14](null),r=!1,o()}}}function oE(n){let t,e=!n[5]&&vv(n);return{c(){t=U("div"),e&&e.c(),y(t,"class","room-label-item svelte-16mrlad"),Q(t,"z-index",n[2]),Q(t,"transform",n[3]),Q(t,"opacity",n[1]),Q(t,"visibility",n[9])},m(i,s){Y(i,t,s),e&&e.m(t,null),n[15](t)},p(i,[s]){i[5]?e&&(e.d(1),e=null):e?e.p(i,s):(e=vv(i),e.c(),e.m(t,null)),s&4&&Q(t,"z-index",i[2]),s&8&&Q(t,"transform",i[3]),s&2&&Q(t,"opacity",i[1]),s&512&&Q(t,"visibility",i[9])},i:re,o:re,d(i){i&&X(t),e&&e.d(),n[15](null)}}}function aE(n,t,e){let i,{content:s}=t,{five:r=void 0}=t,{visible:o=!0}=t,{opacity:a=1}=t,{zIndex:l=0}=t,{transform:c=void 0}=t,{onClick:h=()=>{}}=t,{rendererIfNeed:d=void 0}=t,{rendererData:f=void 0}=t,g,p,m,v;const b=L=>{if(r.state.mode!=="Panorama"){const z=-(10+54*(1-Ia(L.latitude)/90)),O=z+20,A=O>=0?0:-O/44;e(7,p.style.transform=`scaleY(${A})`,p),e(7,p.style.top=`${O}px`,p),e(8,m.style.top=`${z}px`,m)}};zt(()=>{g&&typeof d=="function"&&(v=d(g,f)),r&&(b(r.camera.pose),r.on("cameraUpdate",b))}),ti(()=>{v==null||v(),r==null||r.off("cameraUpdate",b)});function w(L){Je[L?"unshift":"push"](()=>{m=L,e(8,m)})}function x(L){Je[L?"unshift":"push"](()=>{p=L,e(7,p)})}function E(L){Je[L?"unshift":"push"](()=>{g=L,e(6,g)})}return n.$$set=L=>{"content"in L&&e(0,s=L.content),"five"in L&&e(10,r=L.five),"visible"in L&&e(11,o=L.visible),"opacity"in L&&e(1,a=L.opacity),"zIndex"in L&&e(2,l=L.zIndex),"transform"in L&&e(3,c=L.transform),"onClick"in L&&e(4,h=L.onClick),"rendererIfNeed"in L&&e(5,d=L.rendererIfNeed),"rendererData"in L&&e(12,f=L.rendererData)},n.$$.update=()=>{n.$$.dirty&2048&&e(9,i=o?"visible":"hidden")},[s,a,l,c,h,d,g,p,m,i,r,o,f,w,x,E]}class Av extends Me{constructor(t){super(),Ie(this,t,aE,oE,Pe,{content:0,five:10,visible:11,opacity:1,zIndex:2,transform:3,onClick:4,rendererIfNeed:5,rendererData:12},rE)}}class lE extends Hd{constructor(e){super();u(this,"areaMakerItem");this.areaMakerItem=e}raycast(e,i){this.areaMakerItem.makerObject.raycast(e,i)}}class cE{constructor(t,e){u(this,"id");u(this,"name","");u(this,"makerObject");u(this,"outline");u(this,"bottomY");u(this,"opacity");u(this,"height");u(this,"floorIndex");u(this,"shape");u(this,"mounted",!1);u(this,"checkMsg",{checkVisibleMsg:"",checkTagVisibleMsg:""});u(this,"modelGroup");u(this,"visible",!0);u(this,"tagApp");u(this,"tagVisible",null);u(this,"tagPosition",new P.Vector3);u(this,"tagNDCPosition",new P.Vector3);u(this,"tagTransform",{left:0,top:0});u(this,"tagZIndex",0);u(this,"hooks",new Pt);u(this,"itemRenderer");u(this,"data");u(this,"plugin");u(this,"opacityAnime");u(this,"isInContainerResizeAnimation",!1);u(this,"containerResizeTimeoutID",null);u(this,"resizeObserver");u(this,"doOpacityAnime",t=>{var a;(a=this.opacityAnime)==null||a.dispose();const e=t.duration,[i,s]=t.makerObjectOpacity,[r,o]=t.outlineOpacity;if(e===0){this.makerObject.material.opacity=s,this.outline.material.opacity=o;return}return new Promise(l=>{this.opacityAnime=new ls({makerObjectOpacity:i,outlineOpacity:r}).to({makerObjectOpacity:s,outlineOpacity:o}).onUpdate(({makerObjectOpacity:c,outlineOpacity:h})=>{this.makerObject.material.opacity=c,this.outline.material.opacity=h,this.plugin.five.needsRender=!0}).onComplete(()=>l(!0)).onDispose(()=>{this.makerObject.material.opacity=s,this.outline.material.opacity=o,this.plugin.five.needsRender=!0,l(!1)}).play()})});u(this,"onPluginConfigChange",t=>{this.makerObject.material.depthTest=t.config.modelDepthTest,this.outline.material.depthTest=t.config.modelDepthTest,this.plugin.five.needsRender=!0});u(this,"onPluginStateChange",()=>{this.updateVisible(),this.updateTagVisible()});u(this,"updateVisible",()=>{var s;const{result:t,msg:e}=this.checkVisible();if(this.checkMsg.checkVisibleMsg=e,this.visible===t)return;this.visible=t;const i=(s=this.data.object_data.visible)!=null?s:!0;this.modelGroup.visible=t&&i,this.plugin.five.needsRender=!0});u(this,"checkVisible",()=>{if(!this.plugin.state.visible)return{result:!1,msg:"插件不可见"};const e=this.plugin.fiveUtil.model.shownFloor;return e===null||e===this.floorIndex?{result:!0,msg:""}:{result:!1,msg:`模型高亮楼层不符合展示条件, 当前高亮楼层为：${e}`}});u(this,"updateTag",()=>{this.tagApp&&(this.updateTagNDCPosition(),this.updateTagDomTransform(),this.updateTagVisible())});u(this,"updateTagNDCPosition",()=>{const e=this.tagPosition.clone().project(this.plugin.five.camera);this.tagNDCPosition.copy(e)});u(this,"updateTagDomTransform",()=>{var s;const t=this.tagNDCPosition,e=Math.round((t.x+1)/2*this.plugin.tagDomContainer.clientWidth),i=Math.round((-t.y+1)/2*this.plugin.tagDomContainer.clientHeight);this.tagTransform.left===e&&this.tagTransform.top===i||(this.tagTransform={left:e,top:i},(s=this.tagApp)==null||s.$set({transform:`translate(${e}px, ${i}px)`}))});u(this,"updateTagVisible",()=>{var i;const{result:t,msg:e}=this.checkTagVisible();this.checkMsg.checkTagVisibleMsg=e,this.tagVisible!==t&&(this.tagVisible=t,this.tagApp&&(this.tagVisible?this.hooks.emit("tagShow"):this.hooks.emit("tagHide"),(i=this.tagApp)==null||i.$set({visible:t})))});u(this,"checkTagVisible",()=>{if(!this.visible)return{result:!1,msg:"标注整体不可见"};if(this.isInContainerResizeAnimation)return{result:!1,msg:"处于容器 resize 动画中"};const e=this.plugin.five,i=e.camera.position.clone();en.set(i.clone(),this.tagPosition.clone().sub(i).normalize());const[s]=this.plugin.fiveUtil.model.intersectRaycaster(en),r=this.tagPosition.distanceTo(e.camera.position);if(s&&s.distance+.1<r)return{result:!1,msg:"标注标签被 Five 模型遮挡"};const o=this.tagNDCPosition;return Math.abs(o.x)>1.2||Math.abs(o.y)>1.2||Math.abs(o.z)>1?{result:!1,msg:"标注标签不在屏幕内"}:{result:!0,msg:""}});u(this,"onFiveCameraUpdate",()=>{this.tagApp&&this.visible&&(this.updateTagNDCPosition(),this.updateTagDomTransform(),this.updateTagVisible())});u(this,"onContainerResize",()=>{this.isInContainerResizeAnimation===!1&&(this.isInContainerResizeAnimation=!0,this.updateTag());const e=()=>{this.isInContainerResizeAnimation=!1,this.containerResizeTimeoutID=null,this.updateTag()};this.containerResizeTimeoutID&&clearTimeout(this.containerResizeTimeoutID),this.containerResizeTimeoutID=setTimeout(e,100)});var l,c,h,d;const i=e.object_data,s=i.bottom_y,r=i.height,o=new P.Color((l=i.color)!=null?l:"#FFFFFF"),a=(c=i.opacity)!=null?c:.4;this.data=e,this.id=e.id,this.name=(h=e.name)!=null?h:"",this.plugin=t,this.height=r,this.bottomY=s,this.opacity=a,this.shape=new P.Shape().fromJSON(i.shape),this.floorIndex=e.floor_index,this.makerObject=new P.Mesh(bv(this.shape,r),hE(o,a)),Kh(this.makerObject,s),this.makerObject.material.depthTest=this.plugin.config.modelDepthTest,this.outline=new Wd(new P.EdgesGeometry(this.makerObject.geometry),new P.LineBasicMaterial({color:o,transparent:!0})),Kh(this.outline,s),this.outline.material.depthTest=this.plugin.config.modelDepthTest,this.setHeight(r),this.modelGroup=new lE(this),this.modelGroup.visible=(d=i.visible)!=null?d:!0}mount(){if(this.mounted)return;this.mounted=!0,this.updateVisible(),this.makerObject.material.depthTest=this.plugin.config.modelDepthTest,this.outline.material.depthTest=this.plugin.config.modelDepthTest,this.modelGroup.add(this.makerObject,this.outline);const t=!!this.name,e=this.plugin.tagDomContainer;t&&(this.tagApp=new Av({target:e,props:{rendererData:this.data,content:this.name,visible:this.tagVisible,rendererIfNeed:this.itemRenderer,transform:`translate(${this.tagTransform.left}px, ${this.tagTransform.top}px)`,onClick:i=>this.hooks.emit("tagClick",{target:this,nativeEvent:i})}}),this.updateTag()),this.plugin.five.needsRender=!0,this.plugin.hooks.on("stateChange",this.onPluginStateChange),this.plugin.hooks.on("configChange",this.onPluginConfigChange),this.plugin.five.on("modeChange",this.updateVisible),this.plugin.five.on("modelShownFloorChange",this.updateVisible),this.plugin.five.on("cameraUpdate",this.onFiveCameraUpdate),this.resizeObserver=Xo(this.onContainerResize,e),this.resizeObserver.observe()}unmount(){var t,e;this.mounted&&(this.mounted=!1,this.modelGroup.remove(...this.modelGroup.children),(t=this.tagApp)==null||t.$destroy(),this.tagApp=null,this.plugin.hooks.off("stateChange",this.onPluginStateChange),this.plugin.hooks.off("configChange",this.onPluginConfigChange),this.plugin.five.off("modeChange",this.updateVisible),this.plugin.five.off("modelShownFloorChange",this.updateVisible),this.plugin.five.off("cameraUpdate",this.onFiveCameraUpdate),(e=this.resizeObserver)==null||e.unobserve())}setOpacity(t){var e;this.opacity=t,(e=this.opacityAnime)==null||e.dispose(),this.makerObject.material.opacity=t,this.plugin.five.needsRender=!0}setColor(t){const e=new P.Color(t);this.makerObject.material.color=e,this.outline.material.color=e,this.plugin.five.needsRender=!0}setHeight(t){if(t<=0)throw new Error("高度必须大于 0");this.height=t,this.makerObject.geometry=bv(this.shape,t),this.outline.geometry=new P.EdgesGeometry(this.makerObject.geometry);const e=this.shape.extractPoints(10).shape.slice(0,-1),i=X2(e),s=new P.Vector3(i.x,i.y,t);Kh(s,this.bottomY),this.tagPosition.copy(s),this.updateTag(),this.plugin.five.needsRender=!0}setTagZIndex(t){var e;this.tagZIndex!==t&&((e=this.tagApp)==null||e.$set({zIndex:t}))}}function bv(n,t){return new P.ExtrudeBufferGeometry(n,{depth:t,bevelEnabled:!1})}function hE(n,t){return new P.MeshBasicMaterial({color:n,opacity:t,transparent:!0})}function Kh(n,t){const e=new P.Matrix4,i=new P.Matrix4().makeRotationX(Math.PI/2),s=new P.Matrix4().makeTranslation(0,0,-t),r=new P.Matrix4().makeScale(1,1,-1);e.multiply(i),e.multiply(s),e.multiply(r),n.applyMatrix4(e)}let dE=class extends hn{constructor(e,i){super(e);u(this,"state");u(this,"itemMap");u(this,"itemRenderer");u(this,"modelGroup");u(this,"data");u(this,"tagDomContainer");u(this,"checkMsg",{childrenMountedState:""});u(this,"isInFiveChangeModeAnime",!1);u(this,"childrenMountedState",!1);u(this,"_config");u(this,"_disposed",!1);u(this,"dispose",()=>{this.five.scene.remove(this.modelGroup)});u(this,"onFiveInitAnimationWillStart",()=>{this.isInFiveChangeModeAnime=!0,this.updateChildrenMountedState()});u(this,"onFiveInitAnimationEnded",()=>{this.isInFiveChangeModeAnime=!1,this.updateChildrenMountedState()});u(this,"onFiveCameraUpdate",()=>{const e=this.five.camera;[...this.itemMap.values()].sort((s,r)=>{const o=s.tagPosition.distanceTo(e.position);return r.tagPosition.distanceTo(e.position)-o}).forEach((s,r)=>{var o;(o=this.getMaskItemByID(s.id))==null||o.setTagZIndex(r*10)})});u(this,"onFiveModeChange",()=>{this.updateChildrenMountedState()});u(this,"onMakerTagClick",e=>{this.hooks.emit("wantsTap",{target:e.target,intersectObjects:[]})});u(this,"onWantsFiveTapGesture",e=>{const i=Array.from(this.itemMap.values()).filter(l=>l.mounted&&l.visible).map(l=>({makerItem:l,intersects:l.modelGroup.getRaycastIntersects(e)})).filter(({intersects:l})=>l.length>0);if(i.length===0)return;const s=i.reduce((l,c)=>{const h=l.intersects[0].distance,d=c.intersects[0].distance;return h<d?l:c}),r=this.fiveUtil.model.intersectRaycaster(e)[0];if(this.config.modelDepthTest&&r&&r.distance<s.intersects[0].distance)return;if(this.hooks.emit("wantsTap",{target:s.makerItem,intersectObjects:s.intersects}))return!1});this.five=e,this.tagDomContainer=document.createElement("div"),this.tagDomContainer.style.position="absolute",this.tagDomContainer.style.top="0",this.tagDomContainer.style.left="0",this.tagDomContainer.style.width="100%",this.tagDomContainer.style.height="100%",this.tagDomContainer.style.pointerEvents="none";const s={enabled:!0,visible:!0};this.state=Object.assign(s,i==null?void 0:i.initialState);const r=F({modelDepthTest:!0},i==null?void 0:i.config);this._config=r,this.modelGroup=new P.Group,this.modelGroup.name="ModelMakerPluginGroup",this.itemMap=new Map,this.state.enabled&&this._enable({userAction:!1})}get config(){return F({},this._config)}get disposed(){return this._disposed}load(e){return ee(this,null,function*(){const i=this.data;this.data=this.formatData(e),this.hooks.emit("dataChange",this.data,i),this.modelGroup.remove(...this.modelGroup.children),this.itemMap.forEach(s=>s.unmount()),this.itemMap.clear(),this.childrenMountedState=!1,this.checkMsg.childrenMountedState="",this.data.list.forEach(s=>{const r=new cE(this,s);r.itemRenderer=this.itemRenderer,this.modelGroup.add(r.modelGroup),this.itemMap.set(s.id,r),r.hooks.on("tagClick",this.onMakerTagClick)}),this.updateChildrenMountedState()})}appendTo(e){e.appendChild(this.tagDomContainer)}enable(e={}){var s;if(this.state.enabled)return;const i=(s=e.userAction)!=null?s:!0;this.updateState({enabled:!0},i),this._enable({userAction:i})}disable(e={}){var s;if(this.state.enabled===!1)return;const i=(s=e.userAction)!=null?s:!0;this.updateState({enabled:!1},i),this._disable({userAction:i})}show(e){return ee(this,null,function*(){if(this.state.visible)return Promise.resolve();if(this.disposed)return Promise.reject(new Error("不能在已销毁的插件上调用 show"));const i=F({userAction:!0},e);this.updateState({visible:!0},i.userAction),yield this._show(i)})}hide(e){return ee(this,null,function*(){if(this.state.visible===!1)return;const i=F({userAction:!0},e);this.updateState({visible:!1},i.userAction),yield this._hide(i)})}setState(e,i={}){const s=this.state;if(Nt(e,s,{deep:!0}))return;const r=i.userAction!==void 0?i.userAction:!0;if(this.updateState(e,r),e.enabled!==void 0&&s.enabled!==e.enabled&&(e.enabled?this._enable({userAction:r}):this._disable({userAction:r})),e.visible!==void 0&&s.visible!==e.visible){const o={userAction:r,anime:{duration:500}};e.visible?this._show(o):this._hide(o)}}updateConfig(e,i={}){var o;const s=this.config,r=F(F({},s),e);this._config=r,this.hooks.emit("configChange",{prevConfig:s,config:r,userAction:(o=i.userAction)!=null?o:!0})}getMaskItemByID(e){return this.itemMap.get(e)}formatData(e){function i(s){return s.list.length===0?!0:!("shape"in s.list[0].object_data)}return i(e)?{list:e.list.filter(s=>s.object_data.points.length>=3).map(s=>{const r=new P.Shape,o=s.object_data.points[0];return r.moveTo(o[0],o[2]),s.object_data.points.slice(1).forEach(l=>r.lineTo(l[0],l[2])),r.lineTo(o[0],o[2]),fe(F({},s),{floor_index:s.object_data.floorIndex,object_data:fe(F({},s.object_data),{bottom_y:o[1]+s.object_data.fixedY,shape:r.toJSON(),height:s.object_data.height+s.object_data.fixedHeight})})})}:e}checkChildrenMountedState(){const e=this.state,i=this.five;if(!e.enabled)return{result:!1,msg:"插件不可用"};const s=i.getCurrentState().mode;return s==="Panorama"?{result:!1,msg:`Five 模态不符合条件, 当前模态为：${s}`}:this.isInFiveChangeModeAnime?{result:!1,msg:"切换模态动画中不展示"}:{result:!0,msg:""}}updateChildrenMountedState(){const{result:e,msg:i}=this.checkChildrenMountedState();this.checkMsg.childrenMountedState=i,e!==this.childrenMountedState&&(this.childrenMountedState=e,this.itemMap.forEach(s=>{this.childrenMountedState?s.mount():s.unmount()}))}updateState(e,i){const s=this.state;this.state=F(F({},this.state),e),this.hooks.emit("stateChange",{state:this.state,prevState:s,userAction:i})}_enable(e){this.hooks.emit("enable",{userAction:e.userAction}),this.five.scene.add(this.modelGroup),this.updateChildrenMountedState(),this.five.needsRender=!0,this.five.on("wantsTapGesture",this.onWantsFiveTapGesture),this.five.on("initAnimationWillStart",this.onFiveInitAnimationWillStart),this.five.on("initAnimationEnded",this.onFiveInitAnimationEnded),this.five.on("modeChange",this.onFiveModeChange),this.five.on("cameraUpdate",this.onFiveCameraUpdate)}_disable(e){this.hooks.emit("disable",{userAction:e.userAction}),this.five.scene.remove(this.modelGroup),this.updateChildrenMountedState(),this.five.needsRender=!0,this.five.off("wantsTapGesture",this.onWantsFiveTapGesture),this.five.off("initAnimationWillStart",this.onFiveInitAnimationWillStart),this.five.off("initAnimationEnded",this.onFiveInitAnimationEnded),this.five.off("modeChange",this.onFiveModeChange),this.five.off("cameraUpdate",this.onFiveCameraUpdate)}_show(e){return ee(this,null,function*(){this.hooks.emit("show",e),this.five.needsRender=!0})}_hide(e){return ee(this,null,function*(){this.hooks.emit("hide",e),this.five.needsRender=!0})}};const uE=(n,t)=>new dE(n,t);class fE extends Bn{constructor(e,i){super(e);u(this,"state");u(this,"checkMsg",{meshHidden:"",pluginDisabled:"",pluginHidden:""});u(this,"group",new P.Group);u(this,"mesh");u(this,"textureLoadingPromise");u(this,"opacityAnimeTween");u(this,"isInPanoMoveAnime",!1);u(this,"lastArrivedPanoIndex",-1);u(this,"_config");u(this,"_disposed",!1);u(this,"dispose",()=>{this.five.scene.remove(this.group),this.group.remove(...this.group.children),this.five.off("dispose",this.dispose),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("panoWillArrive",this.onFivePanoWillArrive)});u(this,"checkMeshVisible",()=>this.state.visible?this.config.imageURL===""?{result:!1,msg:"图片不存在"}:this.mesh.material.map?this.five.work?this.five.getCurrentState().mode!=="Panorama"?{result:!1,msg:"非全景模式"}:this.isInPanoMoveAnime?{result:!1,msg:"处于走点动画中"}:{result:!0,msg:""}:{result:!1,msg:"Five 数据未加载"}:{result:!1,msg:"指南针贴图未加载"}:{result:!1,msg:"插件隐藏"});u(this,"onTextureLoaded",e=>{this.mesh.material.map=e,this.mesh.material.needsUpdate=!0,this.updateMeshVisible()});u(this,"onFiveWillLoad",()=>{this.lastArrivedPanoIndex=-1,this.updateMeshVisible()});u(this,"onFivePanoWillArrive",e=>{var i;e!==this.five.getCurrentState().panoIndex&&(this.isInPanoMoveAnime=!0,(i=this.opacityAnimeTween)==null||i.dispose(),this.updateMeshVisible())});u(this,"onFivePanoArrived",e=>{e!==this.lastArrivedPanoIndex&&(this.lastArrivedPanoIndex=e,this.isInPanoMoveAnime=!1,this.updateMeshPosition(e),this.updateMeshVisible(),this.five.needsRender=!0)});u(this,"onMeshVisibleChange",e=>{var i;if((i=this.opacityAnimeTween)==null||i.dispose(),!e){this.mesh.visible=!1;return}this.mesh.material.setValues({opacity:0}),this.mesh.visible=!0,this.opacityAnimeTween=Yr(1e3).onUpdate(({progress:s})=>{var r;(r=this.mesh)==null||r.material.setValues({opacity:s}),this.five.needsRender=!0}).play()});u(this,"onFiveModeChange",()=>{this.updateMeshVisible()});this.five=e;const s={enabled:!0,visible:!0};this.state=Object.assign(s,i==null?void 0:i.initialState);const r=F({width:1.4,yOffset:.01,yRotate:0,imageURL:this.absoluteUrl("/release/web/logo.7febb17f.png")},i==null?void 0:i.config);this._config=r,this.group.name="current-pano-image-plugin-group",this.mesh=new P.Mesh(new P.PlaneBufferGeometry(this.config.width,this.config.width),new P.MeshBasicMaterial({transparent:!0,opacity:0,depthTest:!1})),this.mesh.visible=!1,this.group.add(this.mesh),this.updateMeshQuaternion(this.config.yRotate),this.state.visible||(this.checkMsg.pluginHidden="初始值设置为隐藏"),this.state.enabled||(this.checkMsg.pluginDisabled="初始值设置为禁用"),this.state.enabled&&this._enable({userAction:!1}),this.five.once("dispose",this.dispose)}get config(){return F({},this._config)}get disposed(){return this._disposed}enable(e={}){var s;if(this.state.enabled)return;const i=(s=e.userAction)!=null?s:!0;this.updateState({enabled:!0},i),this.checkMsg.pluginDisabled="",this._enable({userAction:i})}disable(e={}){var s;if(this.state.enabled===!1)return;const i=(s=e.userAction)!=null?s:!0;this.updateState({enabled:!1},i),this.checkMsg.pluginDisabled="调用 disable 禁用",this._disable({userAction:i})}show(e){return ee(this,null,function*(){if(this.state.visible)return Promise.resolve();if(this.disposed)return Promise.reject(new Error("不能在已销毁的插件上调用 show"));const i=F({userAction:!0},e);this.updateState({visible:!0},i.userAction),this.checkMsg.pluginHidden="",this._show(i)})}hide(e){return ee(this,null,function*(){if(this.state.visible===!1)return;const i=F({userAction:!0},e);this.updateState({visible:!1},i.userAction),this.checkMsg.pluginDisabled="调用 hide 隐藏",this._hide(i)})}setState(e,i={}){const s=this.state;if(Nt(e,s,{deep:!0}))return;const r=i.userAction!==void 0?i.userAction:!0;if(this.updateState(e,r),e.enabled!==void 0&&s.enabled!==e.enabled&&(e.enabled?this.checkMsg.pluginDisabled="":this.checkMsg.pluginDisabled="调用 setState 禁用",e.enabled?this._enable({userAction:r}):this._disable({userAction:r})),e.visible!==void 0&&s.visible!==e.visible){const o={userAction:r,anime:{duration:500}};e.visible?this.checkMsg.pluginHidden="":this.checkMsg.pluginHidden="调用 setState 隐藏",e.visible?this._show(o):this._hide(o)}}updateConfig(e,i={}){var o;const s=this.config,r=F(F({},s),e);this._config=r,s.imageURL!==r.imageURL&&this.reloadTexture(r.imageURL),s.yOffset!==r.yOffset&&this.updateMeshPosition(this.five.getCurrentState().panoIndex),s.yRotate!==r.yRotate&&this.updateMeshQuaternion(r.yRotate),s.width!==r.width&&(this.mesh.geometry=new P.PlaneBufferGeometry(r.width,r.width)),this.hooks.emit("configChange",{prevConfig:s,config:r,userAction:(o=i.userAction)!=null?o:!0})}__whyCantSeeMesh(){if(this.disposed)return"插件已销毁";if(this.checkMsg.pluginDisabled)return this.checkMsg.pluginDisabled;if(this.checkMsg.pluginHidden)return this.checkMsg.pluginHidden;if(this.checkMsg.meshHidden)return this.checkMsg.meshHidden}updateState(e,i){const s=this.state;this.state=F(F({},this.state),e),this.hooks.emit("stateChange",{state:this.state,prevState:s,userAction:i})}updateMeshVisible(){const{result:e,msg:i}=this.checkMeshVisible();this.checkMsg.meshHidden=i,e!==this.mesh.visible&&this.onMeshVisibleChange(e)}updateMeshPosition(e){const i=this.workUtil.getObserverStandingPosition(e);if(!i){console.warn("CurrentPanoImagePlugin: 无法获取到当前点位的 standingPosition");return}const s=i.clone().setY(i.y+this.config.yOffset);s&&this.mesh.position.copy(s)}reloadTexture(e){return ee(this,null,function*(){if(this.mesh.material.map=null,e!==""){const i=ms(e);this.textureLoadingPromise=i;const s=yield i;s.minFilter=P.LinearFilter,this.textureLoadingPromise===i&&(this.onTextureLoaded(s),this.textureLoadingPromise=null)}this.updateMeshVisible()})}updateMeshQuaternion(e){const i=new P.Quaternion;i.multiplyQuaternions(new P.Quaternion().setFromAxisAngle(new P.Vector3(1,0,0),-Math.PI/2),new P.Quaternion().setFromAxisAngle(new P.Vector3(0,0,1),e)),this.mesh.quaternion.copy(i)}_enable(e){this.hooks.emit("enable",{userAction:e.userAction}),this.config.imageURL&&!this.mesh.material.map&&!this.textureLoadingPromise&&this.reloadTexture(this.config.imageURL),this.five.scene.add(this.group),this.five.needsRender=!0,this.five.work&&this.onFiveWillLoad(),this.five.getCurrentState().mode==="Panorama"&&(this.onFiveModeChange(),this.onFivePanoArrived(this.five.getCurrentState().panoIndex)),this.five.on("willLoad",this.onFiveWillLoad),this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("panoWillArrive",this.onFivePanoWillArrive),this.five.on("modeChange",this.onFiveModeChange)}_disable(e){this.hooks.emit("disable",{userAction:e.userAction}),this.five.scene.remove(this.group),this.five.needsRender=!0,this.five.off("willLoad",this.onFiveWillLoad),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("panoWillArrive",this.onFivePanoWillArrive),this.five.off("modeChange",this.onFiveModeChange)}_show(e){this.hooks.emit("show",e),this.updateMeshVisible(),this.five.needsRender=!0}_hide(e){this.hooks.emit("hide",e),this.updateMeshVisible(),this.five.needsRender=!0}}const pE=(n,t)=>new fE(n,t);class mE{constructor(){u(this,"five");u(this,"_cursor");u(this,"_pointSelector");u(this,"_fiveDomEvents");u(this,"_object3DHelper");u(this,"inited",!1);u(this,"init",t=>{this.inited=!0,this.five=t,this._cursor=void 0,this._pointSelector=void 0,this._fiveDomEvents=void 0,this._object3DHelper=void 0})}get cursor(){if(!this.inited)throw new Error("Global not inited");return this._cursor?this._cursor:(this._cursor=new pm(this.five.getElement()),this._cursor)}get pointSelector(){if(!this.inited)throw new Error("Global not inited");return this._pointSelector?this._pointSelector:(this._pointSelector=new ea(this.five,{mode:"cursor"}),this._pointSelector)}get fiveDomEvents(){if(!this.inited)throw new Error("Global not inited");return this._fiveDomEvents?this._fiveDomEvents:(this._fiveDomEvents=new Xs(this.five,{noEmitWhenNotInScene:!0}),this._fiveDomEvents)}get object3DHelper(){if(!this.inited)throw new Error("Global not inited");return this._object3DHelper?this._object3DHelper:(this._object3DHelper=new Yh(this.five),this._object3DHelper)}}const yv=new mE;window.globalModules=yv;function wv(n,t){return n?t(n)?n:n.parent?wv(n.parent,t):null:null}function gE(n){const t=[...n];if(n.length<3)return n;const e=n[n.length-1],i=n[0];return e.equals(i)||t.push(i),t}class Pv extends $t{constructor(e){super();u(this,"name","PolylineBaseMesh");u(this,"lines",[]);u(this,"withDots");u(this,"paramsStyle");const o=e,{withDots:i,points:s}=o,r=rs(o,["withDots","points"]);this.withDots=i!=null?i:!0,s&&this.setPoints(s),r&&this.setStyle(r)}get style(){var e;return{lineColor:this.lineColor,lineWidth:this.lineWidth,opacity:this.opacity,dashed:this.dashed,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode,lengthEnable:(e=this.paramsStyle)==null?void 0:e.lengthEnable}}get opacity(){var e,i,s;return(s=(e=this.lines[0])==null?void 0:e.lineOpacity)!=null?s:(i=this.paramsStyle)==null?void 0:i.lineOpacity}get lineColor(){var e,i,s;return(s=(e=this.lines[0])==null?void 0:e.color)!=null?s:(i=this.paramsStyle)!=null&&i.lineColor?new P.Color(this.paramsStyle.lineColor):void 0}get lineWidth(){var e,i,s;return(s=(e=this.lines[0])==null?void 0:e.lineWidth)!=null?s:(i=this.paramsStyle)==null?void 0:i.lineWidth}get dashed(){var e,i,s;return(s=(e=this.lines[0])==null?void 0:e.dashed)!=null?s:(i=this.paramsStyle)==null?void 0:i.dashed}get occlusionVisibility(){var e,i,s;return(s=(e=this.lines[0])==null?void 0:e.occlusionVisibility)!=null?s:(i=this.paramsStyle)==null?void 0:i.occlusionVisibility}get occlusionMode(){var e,i,s;return(s=(e=this.lines[0])==null?void 0:e.occlusionMode)!=null?s:(i=this.paramsStyle)==null?void 0:i.occlusionMode}get points(){var e,i,s;return this.lines.map(r=>r.points[0]).concat((s=(i=this.lines)==null?void 0:i[((e=this.lines)==null?void 0:e.length)-1])==null?void 0:s.points[1]).filter(Boolean)}setPoints(e,i={closed:!1}){let s=e.map(Qe);i.closed&&(s=gE(s)),s.forEach((r,o)=>{var c;const a=s[o+1];if(o!==0&&a===void 0)return;const l=(c=this.lines[o])!=null?c:(()=>{const h=new ao(fe(F({},this.style),{pointVisibility:this.withDots?{startPoint:o===0,endPoint:!0}:!1}));return this.lines[o]=h,this.add(h),h})();l.setStyle(this.style),l.setPoints([r,a])}),s.length===0?(this.lines.forEach(r=>r.removeFromParent()),this.lines=[]):s.length===1||this.lines.length>s.length-1&&this.lines.splice(s.length-1).forEach(r=>r.removeFromParent())}setStyle(e){this.paramsStyle=F(F({},this.paramsStyle),e),this.lines.forEach(i=>i.setStyle(this.paramsStyle))}highlight(){this.lines.forEach(e=>e.highlight())}unhighlight(){this.lines.forEach(e=>e.unhighlight())}}class Ds extends Pv{constructor(...e){super(fe(F({},e[0]),{withDots:!1}));u(this,"name","PolylineMesh")}}class Wn extends Pv{constructor(...e){super(fe(F({},e[0]),{withDots:!0}));u(this,"name","PolylineWithDotsMesh")}}const $h=new Map;class Ti extends $t{constructor(e,i){var s,r;super();u(this,"name","Sculpt");u(this,"isSculptObject",!0);u(this,"draggable");u(this,"selected");u(this,"config");u(this,"on",(e,i,s)=>lt.modules.fiveDomEvents.addEventListener(this,e,i,s));u(this,"off",(...e)=>lt.modules.fiveDomEvents.removeEventListener(this,...e));u(this,"applyObjectMatrixWorld",(e,i)=>{const s=i!=null?i:this;return s.updateMatrixWorld(),Nr(s,e)});u(this,"applyObjectReversalMatrixWorld",(e,i)=>{const s=i!=null?i:this;return s.updateMatrixWorld(),D1(s,e)});e!=null&&e.id&&(this.uuid=e.id),this.config=F({defaultAction:!0,occlusionVisibility:!0,occlusionMode:"translucence"},i),e&&(Fe((s=this.config)==null?void 0:s.occlusionMode)&&(e.style=fe(F({},e.style),{occlusionMode:this.config.occlusionMode})),Fe((r=this.config)==null?void 0:r.occlusionVisibility)&&(e.style=fe(F({},e.style),{occlusionVisibility:this.config.occlusionVisibility}))),vt("esc",()=>{this.stopCreating()}),this.config.defaultAction&&(vt("backspace, delete",()=>{this.selected&&this.delete()}),this.on("click",()=>{var o;this.editing||(this.select({only:!0}),this.editor.enable(),(o=this.parent)==null||o.children.forEach(a=>{var l;a instanceof Ti&&a!==this&&((l=a._editor)==null||l.disable())}))}),vt("esc",()=>{this.selected&&this.unselect()}))}get editing(){return this.pointSelector.enabled}get baseData(){return{id:this.uuid,type:this.type}}get pointSelector(){return lt.modules.pointSelector}undo(){throw new Error("Method not implemented.")}redo(){throw new Error("Method not implemented.")}canUndo(){throw new Error("Method not implemented.")}canRedo(){throw new Error("Method not implemented.")}stopCreating(){lt.modules.pointSelector.disable()}delete(){var e;this.stopCreating(),this.removeFromParent(),this.off(),(e=this.editor)==null||e.disable()}select(e={only:!1}){if(this.selected)return;this.selected=!0,this.highlight(),$h.has(this.parent.uuid)||$h.set(this.parent.uuid,[]);const i=$h.get(this.parent.uuid);i.push(this),e.only&&(i==null||i.forEach(s=>{s!==this&&s.unselect()}))}unselect(){var e;this.selected&&(this.selected=!1,this.unhighlight(),(e=this._editor)==null||e.disable())}highlight(){}unhighlight(){}showDeleteButton(e,i){lt.modules.cursor.showDeleteButton({clientX:e,clientY:i,container:document.body,onClick:()=>this.delete()}),lt.modules.five.once("cameraUpdate",()=>{lt.modules.cursor.removeDeleteButton()})}}class dl extends $t{constructor(e){super();u(this,"hooks",new Pt);u(this,"originObject");this.originObject=e}enable(){this.originObject.add(this)}disable(){this.originObject.remove(this)}}class Mo extends dl{constructor(e,i){super(e);u(this,"objectHelperConfig");u(this,"onObjectUpdate",()=>{this.hooks.emit("objectUpdate")});this.objectHelperConfig=i}get helper(){var e;return(e=lt.modules.object3DHelper.getObject3DHelper(this.originObject))==null?void 0:e.helper}enable(){super.enable();const e=typeof this.objectHelperConfig=="function"?this.objectHelperConfig():this.objectHelperConfig;lt.modules.object3DHelper.addObject3DHelper(this.originObject,F({positionFrom:"boundingBox"},e));const i=lt.modules.object3DHelper.getObject3DHelper(this.originObject).helper;i.hooks.on("move",this.onObjectUpdate),i.hooks.on("rotate",this.onObjectUpdate),i.hooks.on("scale",this.onObjectUpdate)}disable(){var e,i,s;super.disable(),(e=this.helper)==null||e.hooks.off("move",this.onObjectUpdate),(i=this.helper)==null||i.hooks.off("rotate",this.onObjectUpdate),(s=this.helper)==null||s.hooks.off("scale",this.onObjectUpdate),lt.modules.object3DHelper.removeObject3DHelper(this.originObject)}initialHelperMatrix(){var e;(e=this.helper)==null||e.initialHelperMatrix()}}class ed extends dl{constructor(e){super(e);u(this,"draggingPoints",[]);u(this,"onDragstart",e=>{const i=e.target;this.draggingPoints=this.pointMeshes.filter(s=>s.position.equals(i.position))});u(this,"onDragend",e=>{this.draggingPoints=[]})}get pointMeshes(){return this.children.filter(e=>e instanceof Nn)}get pointHandles(){return this.children}enable(){super.enable(),this.points.filter(Fe).forEach(e=>{const i=new Nn;i.visible=!1,i.position.copy(e),i.draggable=!0,lt.modules.fiveDomEvents.addEventListener(i,"drag",this.onDrag),lt.modules.fiveDomEvents.addEventListener(i,"dragstart",this.onDragstart),lt.modules.fiveDomEvents.addEventListener(i,"dragend",this.onDragend),this.add(i)})}disable(){super.disable(),this.removeChildren()}}class vE extends ed{constructor(e){super(e);u(this,"onDrag",e=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const i=Gr(lt.modules.five,e.raycaster);this.draggingPoints.forEach(s=>s.position.copy(i.point)),this.originObject.lineMesh.setPoints(this.pointMeshes.map(s=>s.position))})}get points(){return this.originObject.lineMesh.points}}class AE extends ed{constructor(e){super(e);u(this,"onDrag",e=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const i=Gr(lt.modules.five,e.raycaster);this.draggingPoints.forEach(s=>s.position.copy(i.point)),this.originObject.polyLineMesh.setPoints(this.pointMeshes.map(s=>s.position))})}get points(){return this.originObject.polyLineMesh.points}}function ui(n){return Array.isArray(n)?n.map(t=>[t.x,t.y,t.z]):[n.x,n.y,n.z]}class Cv extends Ti{constructor(e,i){super(e,i);u(this,"type","Polyline");u(this,"polyLineMesh");u(this,"_editor");u(this,"creatingObject");e&&(this.polyLineMesh=new Wn(F(F({},e.style),e)),this.add(this.polyLineMesh))}get editor(){return this._editor||(this._editor=new AE(this)),this._editor}get data(){return fe(F({},this.baseData),{points:ui(this.applyObjectMatrixWorld(this.polyLineMesh.points)),style:{lineColor:new P.Color(this.polyLineMesh.lineColor).getHex(),lineWidth:this.polyLineMesh.lineWidth,dashed:this.polyLineMesh.dashed}})}setData(e){e.points&&this.polyLineMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Qe))),this.polyLineMesh.setStyle(e.style)}highlight(){var e;(e=this.polyLineMesh)==null||e.highlight()}unhighlight(){var e;(e=this.polyLineMesh)==null||e.unhighlight()}canUndo(){var e;(e=this.creatingObject)==null||e.canUndo()}canRedo(){var e;(e=this.creatingObject)==null||e.canRedo()}undo(){var e;(e=this.creatingObject)==null||e.undo()}redo(){var e;(e=this.creatingObject)==null||e.redo()}create(e){return ee(this,null,function*(){this.removeChildren();const i=new Wn(e);this.polyLineMesh=i,this.add(this.polyLineMesh),this.creatingObject=Iv(i,this.pointSelector,e),yield this.creatingObject.finished,this.config.defaultAction&&this.editor.enable()})}}function Iv(n,t,e){var L;const i=n.parent;if(!i)return;const{promise:s,resolve:r,reject:o}=Ms(),a=(L=e==null?void 0:e.limit)!=null?L:"none",l=new Ds(n.style);i.add(l);const c=new Ds(fe(F({},n.style),{dashed:!0,lengthEnable:!1}));i.add(c),t.enable();const h=[];let d,f,g;const p=[],m=()=>h.length>0,v=()=>p.length>0,b=()=>{m()&&(p.push(h.pop()),n.setPoints(h),E(g),t.pointSelectorHelper.magnifier.render())},w=()=>{v()&&(h.push(p.pop()),n.setPoints(h),E(g),t.pointSelectorHelper.magnifier.render())},x=S=>{p.length=0;const R=h.length===0?S.point:d.clone();h.push(R),n.setPoints(h)},E=S=>{const R=()=>{l.setPoints([]),c.setPoints([]),d=null};if(!S||(g=S,!(h!=null&&h.length)))return R();const z=h.at(-1).clone();a==="none"?(d=S.point,l.setPoints([z,d])):a==="xoz"?(f=f!=null?f:new P.Plane().setFromNormalAndCoplanarPoint(new P.Vector3(0,1,0),h[0]),t.plane=f,d=f.projectPoint(S.point,new P.Vector3),l.setPoints([z,d]),c.setPoints([d,S.point])):a==="y"&&(h.length===1?(d=S.point,l.setPoints([z,d])):(f=f!=null?f:new P.Plane().setFromCoplanarPoints(h[0],h[1],new P.Vector3(0,1,0).add(h[0])),t.plane=f,d=f.projectPoint(S.point,new P.Vector3),l.setPoints([z,d]),c.setPoints([d,S.point])))};return t.on("select",x),t.on("intersectionUpdate",E),t.on("disable",()=>{if(t.off("select",x),t.off("intersectionUpdate",E),t.plane=null,i.remove(l),i.remove(c),h.length<2)return i.remove(n),o(new Error("Cancelled"));r()}),{finished:s,canUndo:m,canRedo:v,undo:b,redo:w}}class bE extends dl{constructor(e){super(e);u(this,"onDrag",e=>{var s;const i=Gr(lt.modules.five,e.raycaster);(s=this.originObject.pointMesh)==null||s.position.copy(i.point)})}enable(){super.enable(),this.originObject.draggable=!0,this.originObject.on("drag",this.onDrag)}disable(){super.disable(),this.originObject.draggable=!1,this.originObject.off("drag",this.onDrag)}}class Mv extends Ti{constructor(e,i){super(e,i);u(this,"type","Point");u(this,"pointMesh");u(this,"_editor");e&&(this.pointMesh=new Nn(F(F({},e.style),e)),this.add(this.pointMesh))}get editor(){return this._editor||(this._editor=new bE(this)),this._editor}get data(){return fe(F({},this.baseData),{point:ui(this.applyObjectMatrixWorld(this.pointMesh.position)),style:{color:this.pointMesh.color.getHex(),size:this.pointMesh.size}})}setData(e){e.point&&this.pointMesh.position.copy(Qe(e.point)),this.pointMesh.setStyle(e.style)}highlight(){var e;(e=this.pointMesh)==null||e.highlight()}unhighlight(){var e;(e=this.pointMesh)==null||e.unhighlight()}setStyle(e){this.pointMesh.setStyle(e)}create(e){return ee(this,null,function*(){this.pointMesh&&this.remove(this.pointMesh),this.add(this.pointMesh=new Nn(e)),yield td(this.pointMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function td(n,t){return new Promise((e,i)=>{t.enable(),n.visible=!1;const s=l=>{l&&(n.visible=!0,n.position.copy(l.point))},r=l=>{l&&(n.visible=!0,n.position.copy(l.point),o())},o=()=>{t.off("select",r),t.off("disable",a),t.off("intersectionUpdate",s),t.disable(),e()},a=()=>{t.off("select",r),t.off("disable",a),t.off("intersectionUpdate",s),n.removeFromParent(),i(new Error("Cancelled"))};t.on("intersectionUpdate",s),t.on("disable",a),t.once("select",r)})}class id extends ur{constructor(e){const r=e!=null?e:{},{points:i}=r,s=rs(r,["points"]);super();u(this,"name","PolygonWithEdgeMesh");u(this,"line",new Ds);i&&this.setPoints(i),s&&this.setStyle(s)}get style(){return fe(F({},super.style),{lineWidth:this.lineWidth,lineColor:this.lineColor})}get lineWidth(){return this.line.lineWidth}get lineColor(){return this.line.lineColor}raycast(e,i){return this.children.forEach(s=>{zl(s,e,i,!0)}),!1}setPoints(e,i){super.setPoints(e,F({closed:!0},i)),this.points&&(this.line.setPoints(this.points,F({closed:!0},i)),this.addIfNotExists(this.line))}setStyle(e){super.setStyle(e),e.lineOpacity!==void 0?this.line.setStyle(fe(F({},e),{lineOpacity:e.lineOpacity})):this.line.setStyle(e),this.needsRender=!0}highlight(){super.highlight(),this.line.highlight()}unhighlight(){super.unhighlight(),this.line.unhighlight()}}class nd extends id{constructor(){super(...arguments);u(this,"name","AreaMesh")}}class yE extends ed{constructor(e){super(e);u(this,"onDrag",e=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const i=Gr(lt.modules.five,e.raycaster),s=this.originObject.areaMesh.projectPoint(i.point);this.draggingPoints.forEach(r=>r.position.copy(s)),this.originObject.areaMesh.setPoints(this.pointMeshes.map(r=>r.position))})}get points(){return this.originObject.areaMesh.points}}class kv extends Ti{constructor(e,i){super(e,i);u(this,"type","Polygon");u(this,"areaMesh");u(this,"_editor");u(this,"creatingObject");e&&(this.areaMesh=new nd(F(F({},e.style),e)),this.add(this.areaMesh))}get editor(){return this._editor||(this._editor=new yE(this)),this._editor}get data(){return this.updateMatrixWorld(),fe(F({},this.baseData),{points:ui(this.applyObjectMatrixWorld(this.areaMesh.points)),style:{color:this.areaMesh.color.getHex(),lineColor:this.areaMesh.lineColor.getHex(),lineWidth:this.areaMesh.lineWidth}})}setData(e){e.points&&this.areaMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Qe))),this.areaMesh.setStyle(e.style)}highlight(){var e;(e=this.areaMesh)==null||e.highlight()}unhighlight(){var e;(e=this.areaMesh)==null||e.unhighlight()}canUndo(){var e;(e=this.creatingObject)==null||e.canUndo()}canRedo(){var e;(e=this.creatingObject)==null||e.canRedo()}undo(){var e;(e=this.creatingObject)==null||e.undo()}redo(){var e;(e=this.creatingObject)==null||e.redo()}create(e){return ee(this,null,function*(){this.children.forEach(s=>{s.parent===this&&this.remove(s)}),this.children.length=0;const i=new nd(e);this.areaMesh=i,this.add(this.areaMesh),this.creatingObject=ul(this.areaMesh,this.pointSelector,e),yield this.creatingObject.finished,this.config.defaultAction&&this.editor.enable()})}}function ul(n,t,e){var z;const{promise:i,resolve:s,reject:r}=Ms(),o=n.parent;if(!o){r(new Error("No container"));return}const a=(z=e==null?void 0:e.limit)!=null?z:"none",l=new Ds(n.style);o==null||o.add(l);const c=new Ds(fe(F({},n.style),{dashed:!0,lengthEnable:!1}));o==null||o.add(c),t.enable();const h=[];let d,f,g=!1,p;const m=[],v=()=>h.length>0,b=()=>m.length>0,w=()=>{v()&&(m.push(h.pop()),L(p),t.pointSelectorHelper.magnifier.render())},x=()=>{b()&&(h.push(m.pop()),L(p),t.pointSelectorHelper.magnifier.render())},E=O=>{m.length=0;const A=h.length===0?O.point:d.clone();h.push(A),n.setPoints(h,{closed:!1}),g&&(S(),s())},L=O=>{const A=()=>{l.setPoints([]),c.setPoints([]),n.setPoints(h),t.pointSelectorHelper.magnifier.render()};if(!O||(p=O,!(h!=null&&h.length)))return A();const C=h.at(-1).clone();if(h.length<3&&(a==="none"?(d=O.point,l.setPoints([C,d]),c.setPoints([])):a==="xoz"?(f=f!=null?f:new P.Plane().setFromNormalAndCoplanarPoint(new P.Vector3(0,1,0),h[0]),t.plane=f,d=f.projectPoint(O.point,new P.Vector3),l.setPoints([C,d]),c.setPoints([d,O.point])):a==="y"&&(h.length===1?(d=O.point,l.setPoints([C,d]),c.setPoints([])):(f=f!=null?f:new P.Plane().setFromCoplanarPoints(h[0],h[1],new P.Vector3(0,1,0).add(h[0])),t.plane=f,d=f.projectPoint(O.point,new P.Vector3),l.setPoints([C,d]),c.setPoints([d,O.point])))),h.length>=3){d=n.projectPoint(O.point);const I=h[0],M=.2;I.distanceTo(d)<M||I.distanceTo(O.point)<M?(d=I,O.point.copy(I),t.pointSelectorHelper.updateWithIntersect(O,{emitEvent:!1}),g=!0):g=!1,l.setPoints([C,d]),c.setPoints([d,O.point])}h.length>=2?(n.setPoints([...h,d],{closed:!1}),n.line.setPoints(n.points.slice(0,-1)),n.isBlank?(t.cursorError=!0,l.setStyle({lineColor:16734553}),c.setStyle({lineColor:16734553})):(t.cursorError=!1,l.setStyle({lineColor:n.lineColor}),c.setStyle({lineColor:n.lineColor}))):n.setPoints([])},S=()=>{t.off("select",E),t.off("intersectionUpdate",L),t.off("disable",R),t.plane=null,t.disable(),o==null||o.remove(l,c)},R=()=>{S(),o==null||o.remove(n,c,l),r(new Error("Cancelled"))};return t.on("select",E),t.on("intersectionUpdate",L),t.on("disable",R),{finished:i,canUndo:v,canRedo:b,undo:w,redo:x}}function wE(n){const t=[...n],e=[];for(let i=0;i<t.length-2;i++)e.push(0,i+1,i+2);return e}function PE(n){const t=n.map(i=>new P.Vector3(i[0],i[1],i[2]));return Pp(t)}class CE extends P.BufferGeometry{constructor(e){super();u(this,"bottomPositions",[]);u(this,"topPosition",[]);u(this,"_type","Concave");e&&this.setPosition(e)}setPosition(e){var l,c,h;const i=(l=e.bottomPositions)!=null?l:this.bottomPositions,s=(c=e.topPosition)!=null?c:this.topPosition;if(this._type=(h=e.type)!=null?h:this._type,this.bottomPositions=i,this.topPosition=s,!i||i.length<3){console.error("PrismGeometry: Invalid parameters",i,s,e),this.bottomPositions=[],this.setAttribute("position",new P.BufferAttribute(new Float32Array([]),3));return}const r=[],o=[];o.push(...i),o[0][0]===o.at(-1)[0]&&o[0][1]===o.at(-1)[1]&&o[0][2]===o.at(-1)[2]&&(o.length-=1);const a=this._type==="Concave"?PE(o):wE(o);if(r.push(...a),s&&s.length===3){const d=[s[0]-i[0][0],s[1]-i[0][1],s[2]-i[0][2]],f=o.map(p=>[p[0]+d[0],p[1]+d[1],p[2]+d[2]]);o.push(...f);const g=r.map(p=>p+o.length/2);r.push(...g);for(let p=0;p<o.length/2-1;p++)r.push(p,p+1,p+o.length/2),r.push(p+1,p+o.length/2+1,p+o.length/2);r.push(0,o.length/2,o.length/2-1),r.push(o.length/2,o.length-1,o.length/2-1)}this.setAttribute("position",new P.Float32BufferAttribute(o.flat(),3)),this.setIndex(r),this.computeBoundingSphere()}}class Ss extends $t{constructor(e){super();u(this,"name","PrismMesh");u(this,"_geometryInfoCache");u(this,"geometryInfoNeedUpdate",!0);u(this,"edgeMesh",new li);u(this,"prismMesh",new Ua);u(this,"paramStyle");this.prismMesh.name="PrismMesh",this.prismMesh.geometry=new CE,this.edgeMesh.name="EdgeMesh",this.addIfNotExists(this.prismMesh,this.edgeMesh),e&&this.setPoints(e),this.setStyle(e)}get topPosition(){return new P.Vector3().fromArray(this.prismMesh.geometry.topPosition)}get bottomPositions(){return this.prismMesh.geometry.bottomPositions.map(e=>new P.Vector3().fromArray(e))}get topPositions(){const e=this.bottomPositions[0].clone().sub(this.topPosition);return this.bottomPositions.map(i=>i.clone().sub(e))}get style(){return{color:this.color,lineColor:this.lineColor,lineWidth:this.lineWidth,opacity:this.opacity,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode}}get opacity(){return this.prismMesh.opacity}get occlusionVisibility(){return this.prismMesh.occlusionVisibility}get occlusionMode(){return this.prismMesh.occlusionMode}get center(){return this.localCenter.clone()}get localCenter(){var e;return(e=this.geometryInfo.center.clone())!=null?e:new P.Vector3(9999,9999,9999)}get geometryInfo(){if(this.geometryInfoNeedUpdate){this.geometryInfoNeedUpdate=!1;const e=this.prismMesh.geometry.bottomPositions,i=this.prismMesh.geometry.topPosition;if(!e||e.length<3||!i){this._geometryInfoCache=void 0;return}const s=e.map((c,h)=>h>=e.length-2?null:[new P.Vector3().fromArray(e[0]),new P.Vector3().fromArray(e[h+1]),new P.Vector3().fromArray(e[h+2])]).filter(Boolean);if(s.length===0){this._geometryInfoCache=void 0;return}let r=0,o=new P.Vector3;for(const[c,h,d]of s){const f=Hc(c,h,d),g=Ep(c,h,d,f);r+=f,o.add(g)}o=o.divideScalar(r);const a=new P.Vector3().fromArray(i).sub(new P.Vector3().fromArray(e[0])),l=o.clone().add(a.divideScalar(2));this._geometryInfoCache={center:l}}return this._geometryInfoCache}get worldCenter(){return this.updateMatrixWorld(),this.localToWorld(this.localCenter)}get color(){return this.prismMesh.color}get lineWidth(){return this.edgeMesh.style.lineWidth}get lineColor(){return this.edgeMesh.color}setStyle(e={}){this.paramStyle=F(F({},this.paramStyle),e),this.prismMesh.setStyle(this.paramStyle),this.edgeMesh.setStyle(this.paramStyle)}setPoints(e){var i;this.prismMesh.geometry.setPosition({bottomPositions:(i=e.points)==null?void 0:i.map(Qe).map(s=>s.toArray()),topPosition:e.heightPoint?Qe(e.heightPoint).toArray():void 0}),this.edgeMesh.geometry=new $o().fromEdgesGeometry(new P.EdgesGeometry(this.prismMesh.geometry)),this.geometryInfoNeedUpdate=!0}highlight(){this.prismMesh.highlight()}unhighlight(){this.prismMesh.unhighlight()}raycast(e,i){return this.children.forEach(s=>zl(s,e,i,!0)),!1}}class Ev extends Mo{constructor(t){super(t,()=>({positionFrom:()=>t.worldCenter,yAxis:()=>t.up,scaleHelper:{enable:!0,positions:()=>{const e=t.bottomPositions,i=t.topPosition,s=new P.Vector3().subVectors(i,e[0]),r=t.geometryInfo.center,o=r.clone().sub(s.clone().divideScalar(2)),a=r.clone().add(s.clone().divideScalar(2));return[{id:"top",handlePosition:a,basePosition:o},{id:"bottom",handlePosition:o,basePosition:a}]},scaleCallback:e=>{const{intersectPoint:i,scalePosition:s}=e,{id:r,basePosition:o,handlePosition:a}=s;if(r==="top"){const l=i.clone().sub(o);t.setPoints({heightPoint:t.bottomPositions[0].clone().add(l)})}else if(r==="bottom"){const l=i.clone().sub(o);t.setPoints({points:t.topPositions.map(c=>c.clone().add(l))})}}}}))}}class xv extends Ti{constructor(e,i){super(e,i);u(this,"type","Prism");u(this,"prismMesh");u(this,"_editor");e&&(this.prismMesh=new Ss(F(F({},e.style),e)),this.add(this.prismMesh))}get editor(){return this._editor||(this._editor=new Ev(this.prismMesh)),this._editor}get data(){return fe(F({},this.baseData),{points:ui(this.applyObjectMatrixWorld(this.prismMesh.bottomPositions,this.prismMesh)),heightPoint:ui(this.applyObjectMatrixWorld(this.prismMesh.topPosition,this.prismMesh)),style:{color:this.prismMesh.color.getHex(),lineWidth:this.prismMesh.lineWidth,lineColor:this.prismMesh.lineColor.getHex()}})}setData(e){this.prismMesh.setPoints({points:e.points?this.applyObjectReversalMatrixWorld(e.points.map(Qe),this.prismMesh):void 0,heightPoint:e.heightPoint?this.applyObjectReversalMatrixWorld(Qe(e.heightPoint),this.prismMesh):void 0}),this.prismMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.prismMesh)==null||e.highlight()}unhighlight(){var e;(e=this.prismMesh)==null||e.unhighlight()}create(e){return ee(this,null,function*(){this.prismMesh=new Ss(e),this.add(this.prismMesh),yield sd(this.prismMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function sd(n,t){return ee(this,null,function*(){const e=n.parent,i=new nd(n.style);e.add(i),yield ul(i,t).finished,e.remove(i),n.setPoints({points:i.points});const s=new li;s.name="LineHelper",e.add(s);const r=i.points.at(-1),o=Rn(i.points),a=r.clone().add(o.clone().multiplyScalar(100)),l=r.clone().sub(o.clone().multiplyScalar(100));return s.setPoints([a,l]),t.enable(),new Promise((c,h)=>{const d=m=>{g(),c()},f=m=>{if(!(m!=null&&m.raycaster))return;const v=Mn({raycaster:m.raycaster,line:new P.Line3(a,l)});v&&n.setPoints({heightPoint:v})},g=()=>{t.off("select",d),t.off("intersectionUpdate",f),t.off("disable",p),e.remove(s),t.disable()},p=()=>{g(),e.remove(n),h(new Error("Cancelled"))};t.on("select",d),t.on("intersectionUpdate",f),t.on("disable",p)})})}class Dv extends Mo{constructor(t){super(t,()=>({yAxis:()=>{const e=t.points;return Rn(e).normalize()},zAxis:()=>{const e=t.points;return e[0].clone().sub(e[1]).normalize()},scaleHelper:{enable:!0,positions:()=>{const e=t.points,i=e[0].clone().lerp(e[3],.5),s=e[1].clone().lerp(e[2],.5),r=e[0].clone().lerp(e[1],.5),o=e[3].clone().lerp(e[2],.5);return[{id:"left",handlePosition:i,basePosition:s},{id:"right",handlePosition:s,basePosition:i},{id:"top",handlePosition:r,basePosition:o},{id:"bottom",handlePosition:o,basePosition:r}]},scaleCallback:e=>{const{intersectPoint:i,scalePosition:s}=e,{id:r,basePosition:o}=s,a=i.clone().sub(o),l=t.points;r==="top"?t.setPoints([l[3].clone().add(a),l[2].clone().add(a),l[2],l[3]]):r==="bottom"?t.setPoints([l[0],l[1],l[1].clone().add(a),l[0].clone().add(a)]):r==="left"?t.setPoints([l[1].clone().add(a),l[1],l[2],l[2].clone().add(a)]):r==="right"&&t.setPoints([l[0],l[0].clone().add(a),l[3].clone().add(a),l[3]])}}}))}}class IE extends P.BufferGeometry{constructor(e){super();u(this,"name","RectangleGeometry");u(this,"points");if(e.length!==4){console.error("Invalid number of points, it's not a rectangle");return}this.points=e.slice(0,4),this.setAttribute("position",new P.BufferAttribute(new Float32Array(this.points.flatMap(i=>i.toArray())),3)),this.setIndex(new P.BufferAttribute(new Uint16Array([0,1,2,0,2,3]),1))}}class rd extends ur{constructor(e){super(e);u(this,"name","RectangleMesh")}get color(){return this.meshFont.material.color}setPoints(e){const i=e.map(Qe).filter(Fe);if(i.length<3){console.error("Invalid position");return}if(e.length===3){const[s,r,o]=i,a=s.clone().add(o).sub(r);i.push(a)}this.points=i,this.geometry=new IE(i),this.planeHelperNeedUpdate=!0,this.geometryInfoNeedUpdate=!0}}class fl extends rd{constructor(e){const r=e!=null?e:{},{points:i}=r,s=rs(r,["points"]);super();u(this,"name","RectangleWithEdgeMesh");u(this,"line",new Ds);i&&this.setPoints(i),s&&this.setStyle(s)}get style(){return F(F({},super.style),this.line.style)}get lineWidth(){return this.line.lineWidth}get lineColor(){return this.line.lineColor}setPoints(e){super.setPoints(e),this.points&&(this.line.setPoints([this.points[0],this.points[1],this.points[2],this.points[3],this.points[0]]),this.addIfNotExists(this.line))}setStyle(e){super.setStyle(e),this.line.setStyle(e)}highlight(){super.highlight(),this.line.highlight()}unhighlight(){super.unhighlight(),this.line.unhighlight()}}function Sv(n,t){const e=Rn(n),i=Ut(...n),s=t.clone().sub(i);return e.dot(s)>=0?n:n.slice().reverse()}class Lv extends Ti{constructor(e,i){super(e,i);u(this,"type","Rectangle");u(this,"rectangleMesh");u(this,"_editor");e&&(this.rectangleMesh=new fl(F(F({},e.style),e)),this.add(this.rectangleMesh))}get editor(){return this._editor||(this._editor=new Dv(this.rectangleMesh)),this._editor}get data(){return fe(F({},this.baseData),{points:ui(this.applyObjectMatrixWorld(this.rectangleMesh.points,this.rectangleMesh)),style:{color:this.rectangleMesh.color.getHex(),opacity:this.rectangleMesh.opacity,lineWidth:this.rectangleMesh.lineWidth,lineColor:this.rectangleMesh.lineColor.getHex()}})}setData(e){e.points&&this.rectangleMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Qe),this.rectangleMesh)),this.rectangleMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.rectangleMesh)==null||e.highlight()}unhighlight(){var e;(e=this.rectangleMesh)==null||e.unhighlight()}create(e){return ee(this,null,function*(){this.removeChildren();const i=new fl(e);this.rectangleMesh=i,this.add(this.rectangleMesh),yield pl(this.rectangleMesh,this.pointSelector,e),this.config.defaultAction&&this.editor.enable()})}}function pl(n,t,e){var s;return((s=e==null?void 0:e.drawMethod)!=null?s:"diagonal")==="diagonal"?kE(n,t,e):EE(n,t,e)}function ME(n,t){const e=[];return n.scene.traverse(i=>{var s;if(i.visible&&!((s=t==null?void 0:t.excludes)!=null&&s.includes(i))&&(i instanceof rd||i instanceof ur)){const r=i.points.map(o=>{const a=new P.Face3(o.x,o.y,o.z,i.normal);return i.style.occlusionVisibility&&(a.IsAlwaysVisible=!0),a});e.push(...r)}}),e}function kE(n,t,e){var x;const{promise:i,reject:s,resolve:r}=Ms(),o=n.parent;if(!o)return s(new Error("No container"));const a=(x=e==null?void 0:e.limit)!=null?x:"none",l=new Wn(fe(F({},n.style),{dashed:!0})),c=new Wn(fe(F({},n.style),{dashed:!0,lengthEnable:!1})),h=new Wn(fe(F({},n.style),{dashed:!1,lengthEnable:!1}));o.add(l,h,c),t.enable();const d=[];let f=new P.Vector3,g=new P.Vector3;const p=new P.Plane,m=()=>{d.push(f.clone()),d.length===1?(a==="xoz"&&p.setFromNormalAndCoplanarPoint(new P.Vector3(0,1,0),d[0]),a==="none"&&p.setFromNormalAndCoplanarPoint(g,d[0])):d.length===2?a==="y"||a==="xoz"?(b(),r()):h.setPoints([d[0],d[1]]):d.length===3&&(b(),r())},v=E=>{var S,R;if(!(E!=null&&E.raycaster))return;const L=(S=d.at(-1))==null?void 0:S.clone();if(d.length===0){f=E.point.clone(),g=(R=E.face)==null?void 0:R.normal;return}if(d.length===1&&a==="y"){const O=new P.Line3(new P.Vector3(0,1,0).add(d[0]),new P.Vector3(0,-1,0).add(d[0])).closestPointToPoint(E.point,!1,new P.Vector3);n.setPoints([d[0],O,E.point]);return}if(d.length===1&&a==="xoz"){const z=new P.Line3(new P.Vector3(1,0,0).add(d[0]),new P.Vector3(-1,0,0).add(d[0])),O=E.raycaster.ray.intersectPlane(p,new P.Vector3),A=z.closestPointToPoint(O,!1,new P.Vector3);n.setPoints([d[0],A,O]);return}if(d.length===1&&a==="none"){p?(f=E.raycaster.ray.intersectPlane(p,new P.Vector3),c.setPoints([f,E.point])):f=E.point.clone(),l.setPoints([L,f]);return}if(d.length===2&&a==="none"){o.remove(l);const z=E.raycaster.ray.intersectPlane(p,new P.Vector3),O=d[0].distanceTo(d[1])/2,A=new P.Vector3().lerpVectors(d[0],d[1],.5),C=new P.Vector3().subVectors(z,A).normalize();f=new P.Vector3().addVectors(A,C.multiplyScalar(O));const I=[d[0],f,d[1]],M=Sv(I,lt.modules.five.camera.position);n.setPoints(M);return}},b=()=>{t.off("select",m),t.off("intersectionUpdate",v),t.off("disable",w),t.disable(),o==null||o.remove(l,h,c)},w=()=>{b(),o==null||o.remove(n),s(new Error("Cancelled"))};return t.on("select",m),t.on("intersectionUpdate",v),t.on("disable",w),i}function EE(n,t,e){var x;const{promise:i,reject:s,resolve:r}=Ms(),o=n.parent;if(!o)return s(new Error("No container"));const a=(x=e==null?void 0:e.limit)!=null?x:"none",l=new Wn(fe(F({},n.style),{dashed:!0})),c=new Wn(fe(F({},n.style),{dashed:!0,lengthEnable:!1})),h=new Wn(fe(F({},n.style),{dashed:!1,lengthEnable:!1}));o.add(l,h,c),t.enable(),t.setAdherePoints(ME(t.five,{excludes:[n]}));const d=[];let f=new P.Vector3,g=new P.Vector3;const p=new P.Plane,m=()=>{if(d.push(f.clone()),d.length===1)t.planeMode="onlyPlane",a==="y"&&(t.adhereLine=[new P.Line3(d[0],new P.Vector3(0,1,0).add(d[0]))]),a==="xoz"&&(p.setFromNormalAndCoplanarPoint(new P.Vector3(0,1,0),d[0]),t.plane=p),a==="none"&&(p.setFromNormalAndCoplanarPoint(g,d[0]),t.plane=p);else if(d.length===2){t.planeMode="vertical",a==="y"&&(t.adhereLine=[]);let E=!1;d[0].x===d[1].x&&d[0].z===d[1].z&&(E=!0),a==="y"&&!E&&(p.setFromCoplanarPoints(d[0],d[1],new P.Vector3(0,1,0).add(d[0])),t.plane=p),h.setPoints([d[0],d[1]])}else d.length===3&&(b(),r())},v=E=>{var S,R,z,O;if(!E||!(E!=null&&E.raycaster))return;const L=(S=d.at(-1))==null?void 0:S.clone();if(d.length===0){f=E.point.clone(),g=(R=E.face)==null?void 0:R.normal;return}if(d.length===1){f=E.point,c.setPoints([(z=E.originalPoint)!=null?z:E.point,E.point]),l.setPoints([L,f]);return}if(d.length===2){if(!t.plane){const D=Rn([d[0],d[1],E.point]);p.setFromNormalAndCoplanarPoint(D,d[0])}c.setPoints([(O=E.originalPoint)!=null?O:E.point,E.point]);const A=new P.Vector3().crossVectors(d[0].clone().sub(d[1]),p.normal).normalize();f=new P.Line3(d[1].clone().add(A),d[1].clone().sub(A)).closestPointToPoint(E.point,!1,new P.Vector3);const I=[d[0],d[1],f],M=Sv(I,lt.modules.five.camera.position);n.setPoints(M);return}},b=()=>{t.setAdherePoints([]),t.adhereLine=[],t.adherePlane=[],t.plane=void 0,t.off("select",m),t.off("intersectionUpdate",v),t.off("disable",w),t.disable(),o==null||o.remove(l,h,c)},w=()=>{b(),o==null||o.remove(n),s(new Error("Cancelled"))};return t.on("select",m),t.on("intersectionUpdate",v),t.on("disable",w),i}class Tv extends Mo{constructor(t){super(t,()=>({yAxis:()=>t.normal}))}}function zv(n){return Math.max(32,Math.min(128,Math.floor(n*40)))}class Ov extends Ua{constructor(e){super(e);u(this,"_normal");u(this,"_center");u(this,"_radius");e!=null&&e.center&&(e!=null&&e.normal)&&(e!=null&&e.radius)&&this.setPoints(e)}get center(){return this.position.clone()}get normal(){return this._normal}set normal(e){this._normal=e}get radius(){var e,i;return(i=(e=this.meshFont.geometry)==null?void 0:e.parameters)==null?void 0:i.radius}setPoints(e){var i,s,r;if(this._center=(i=Qe(e.center))!=null?i:this._center,this._normal=((s=Qe(e.normal))!=null?s:this._normal).normalize(),this._radius=(r=e.radius)!=null?r:this._radius,Fe(this._radius)&&this._radius!==this.radius){const o=zv(this._radius);this.geometry=new P.CircleGeometry(this._radius,o)}this._center&&this.position.copy(this._center),this._normal&&(this.lookAt(this._normal.clone().add(this._center)),this.normal=this._normal.clone()),this.needsRender=!0}}class ko extends Ov{constructor(e){const a=e!=null?e:{},{normal:i,radius:s,center:r}=a,o=rs(a,["normal","radius","center"]);super(o);u(this,"edgeLine");this.edgeLine=new li(o),this.add(this.edgeLine),i&&s&&r&&this.setPoints({normal:i,radius:s,center:r})}setPoints(...e){super.setPoints(...e);const i=this.meshFont.geometry.vertices.slice(1);this.edgeLine.setPoints(i.concat(i[0]))}setStyle(e){super.setStyle(e),this.edgeLine.setStyle(e)}highlight(){super.highlight(),this.edgeLine.highlight()}unhighlight(){super.unhighlight(),this.edgeLine.unhighlight()}}class jv extends Ti{constructor(e,i){super(e,i);u(this,"type","Circle");u(this,"circleMesh");u(this,"_editor");e&&(this.circleMesh=new ko(F(F({},e.style),e)),this.add(this.circleMesh))}get editor(){return this._editor||(this._editor=new Tv(this.circleMesh)),this._editor}get data(){return fe(F({},this.baseData),{center:ui(this.applyObjectMatrixWorld(this.circleMesh.center,this.circleMesh)),normal:ui(this.circleMesh.normal.clone().applyQuaternion(this.circleMesh.quaternion)),radius:this.circleMesh.radius,style:{color:this.circleMesh.color.getHex()}})}setData(e){this.circleMesh.setPoints({center:e.center?this.applyObjectReversalMatrixWorld(Qe(e.center),this.circleMesh):void 0,normal:e.normal?Qe(e.normal):void 0,radius:e.radius}),this.circleMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.circleMesh)==null||e.highlight()}unhighlight(){var e;(e=this.circleMesh)==null||e.unhighlight()}create(e){return ee(this,null,function*(){this.children.forEach(s=>{s.parent===this&&this.remove(s)}),this.children.length=0;const i=new ko(e);this.circleMesh=i,this.add(this.circleMesh),yield ml(this.circleMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function ml(n,t){return new Promise((e,i)=>{const s=n.parent;if(!s){i(new Error("No container"));return}const r=new Ds({dashed:!0});s.add(r),t.enable();let o,a;const l=f=>{if(f){if(!o){o={point:f.point,normal:f.face.normal};return}o&&a&&(h(),e())}},c=f=>{if(!f||!o)return;const g=new P.Plane().setFromNormalAndCoplanarPoint(o.normal,o.point);if(a=f.raycaster.ray.intersectPlane(g,new P.Vector3),a){const p=o.point.distanceTo(a);n.setPoints({center:o.point,normal:o.normal,radius:p})}},h=()=>{t.off("select",l),t.off("intersectionUpdate",c),t.off("disable",d),t.disable(),s==null||s.remove(r)},d=()=>{h(),s==null||s.remove(n,r),i(new Error("Cancelled"))};t.on("select",l),t.on("intersectionUpdate",c),t.on("disable",d)})}class od extends $t{constructor(e){super();u(this,"bottomCircle");u(this,"topCircle");u(this,"edgeMesh");u(this,"highlighted",!1);u(this,"params");u(this,"_topCenter");u(this,"_bottomCenter");u(this,"_radius");this.params=e,this.bottomCircle=new ko(e),this.bottomCircle.name="bottomCircle",this.topCircle=new ko(e),this.topCircle.name="topCircle",this.edgeMesh=new Ua(e),e!=null&&e.bottomCenter&&(e!=null&&e.topCenter)&&(e!=null&&e.radius)&&this.setPoints(e),this.addIfNotExists(this.bottomCircle)}get bottomCenter(){return this.bottomCircle.center}get topCenter(){return this.topCircle.center}get normal(){return this.bottomCircle.normal}get radius(){return this.bottomCircle.radius}get color(){return this.bottomCircle.color}setPoints(e){var i,s;if(this._topCenter=(i=Qe(e.topCenter))!=null?i:this.topCenter,this._bottomCenter=(s=Qe(e.bottomCenter))!=null?s:this.bottomCenter,this._radius=Fe(e.radius)?e.radius:this.radius,this._topCenter&&this._bottomCenter){const r=this._topCenter.clone().sub(this._bottomCenter).normalize();this.bottomCircle.setPoints({center:this._bottomCenter,normal:r,radius:this._radius}),this.setTopCenter(this._topCenter)}this.needsRender=!0}setTopCenter(e){this.addIfNotExists(this.topCircle),this.topCircle.setPoints({center:e,normal:this.normal,radius:this.radius}),this.setEdgeMesh()}setBottomCenter(e){this.addIfNotExists(this.bottomCircle),this.bottomCircle.setPoints({center:e,normal:this.normal,radius:this.radius}),this.setEdgeMesh()}setStyle(e){this.params=F(F({},this.params),e),this.bottomCircle.setStyle(this.params),this.topCircle.setStyle(this.params)}highlight(){this.highlighted||(this.highlighted=!0,this.edgeMesh.highlight(),this.bottomCircle.highlight(),this.topCircle.highlight(),this.needsRender=!0)}unhighlight(){this.highlighted&&(this.highlighted=!1,this.edgeMesh.unhighlight(),this.bottomCircle.unhighlight(),this.topCircle.unhighlight(),this.needsRender=!0)}setEdgeMesh(){this.addIfNotExists(this.edgeMesh);const e=this.topCircle.center,i=this.bottomCircle.center;this.edgeMesh.geometry.dispose(),this.edgeMesh.geometry=new P.CylinderGeometry(this.radius,this.radius,e.distanceTo(i),zv(this.radius),1,!0);const s=new P.Quaternion().setFromUnitVectors(new P.Vector3(0,1,0),this.normal.clone().normalize());this.edgeMesh.position.copy(new P.Vector3().lerpVectors(i,e,.5)),this.edgeMesh.quaternion.copy(s)}}class Vv extends Mo{constructor(t){super(t,()=>{const e=()=>{const i=t.topCenter,s=t.bottomCenter,r=new P.Vector3().lerpVectors(i,s,.5);return{topCenter:i,bottomCenter:s,boxCenter:r}};return{positionFrom:"boundingBox",yAxis:()=>t.normal,scaleHelper:{enable:!0,positions:()=>{const i=e();return[{id:"top",handlePosition:i.topCenter,basePosition:i.bottomCenter},{id:"bottom",handlePosition:i.bottomCenter,basePosition:i.topCenter}]},scaleCallback:i=>{const{intersectPoint:s,scalePosition:r}=i,{id:o}=r;o==="top"?t.setTopCenter(s):o==="bottom"&&t.setBottomCenter(s)}}}})}}class Bv extends Ti{constructor(e,i){super(e,i);u(this,"type","Cylinder");u(this,"cylinderMesh");u(this,"_editor");e&&(this.cylinderMesh=new od(F(F({},e.style),e)),this.add(this.cylinderMesh))}get editor(){return this._editor||(this._editor=new Vv(this.cylinderMesh)),this._editor}get data(){return fe(F({},this.baseData),{bottomCenter:ui(this.applyObjectMatrixWorld(this.cylinderMesh.bottomCenter,this.cylinderMesh)),topCenter:ui(this.applyObjectMatrixWorld(this.cylinderMesh.topCenter,this.cylinderMesh)),radius:this.cylinderMesh.radius,style:{color:this.cylinderMesh.color.getHex()}})}setData(e){this.cylinderMesh.setPoints({bottomCenter:e.bottomCenter?this.applyObjectReversalMatrixWorld(Qe(e.bottomCenter),this.cylinderMesh):void 0,topCenter:e.topCenter?this.applyObjectReversalMatrixWorld(Qe(e.topCenter),this.cylinderMesh):void 0}),this.cylinderMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.cylinderMesh)==null||e.highlight()}unhighlight(){var e;(e=this.cylinderMesh)==null||e.unhighlight()}create(e){return ee(this,null,function*(){this.cylinderMesh=new od(e),this.add(this.cylinderMesh),yield ad(this.cylinderMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function ad(n,t){return ee(this,null,function*(){const e=n.parent;yield ml(n.bottomCircle,t);const i=new li;i.name="LineHelper",e.add(i);const s=t.position.point,r=n.normal.clone().normalize(),o=s.clone().add(r.clone().multiplyScalar(100)),a=s.clone().sub(r.clone().multiplyScalar(100));return i.setPoints([o,a]),t.enable(),new Promise((l,c)=>{const h=p=>{f(),l()},d=p=>{if(!(p!=null&&p.raycaster))return;const m=Mn({raycaster:p.raycaster,line:new P.Line3(o,a)}),b=new P.Plane().setFromNormalAndCoplanarPoint(n.normal,n.bottomCenter).projectPoint(m,new P.Vector3),w=m.clone().sub(b),x=n.bottomCenter.clone().add(w);m&&n.setTopCenter(x)},f=()=>{t.off("select",h),t.off("intersectionUpdate",d),t.off("disable",g),e.remove(i),t.disable()},g=()=>{f(),e.remove(n),c(new Error("Cancelled"))};t.on("select",h),t.on("intersectionUpdate",d),t.on("disable",g)})})}class _v extends Mo{constructor(t){super(t,()=>({positionFrom:()=>t.worldCenter,yAxis:()=>new P.Vector3().subVectors(t.topPosition,t.bottomPositions[0]).normalize(),zAxis:()=>new P.Vector3().subVectors(t.bottomPositions[0],t.bottomPositions[1]).normalize(),scaleHelper:{enable:!0,positions:()=>{const e=t.bottomPositions,i=t.topPosition,s=new P.Vector3().subVectors(i,e[0]),r=new P.Vector3().subVectors(e[1],e[0]),o=new P.Vector3().subVectors(e[2],e[1]),a=t.geometryInfo.center,l=a.clone().sub(s.clone().divideScalar(2)),c=a.clone().add(s.clone().divideScalar(2)),h=a.clone().sub(r.clone().divideScalar(2)),d=a.clone().add(r.clone().divideScalar(2)),f=a.clone().sub(o.clone().divideScalar(2)),g=a.clone().add(o.clone().divideScalar(2));return[{id:"top",handlePosition:c,basePosition:l},{id:"bottom",handlePosition:l,basePosition:c},{id:"left",handlePosition:h,basePosition:d},{id:"right",handlePosition:d,basePosition:h},{id:"front",handlePosition:f,basePosition:g},{id:"back",handlePosition:g,basePosition:f}]},scaleCallback:e=>{const{intersectPoint:i,scalePosition:s}=e,{id:r,basePosition:o}=s,a=t.bottomPositions,l=t.topPositions;let c=new P.Vector3().subVectors(t.topPosition,a[0]),h;if(r==="top")c=i.clone().sub(o),h=a;else if(r==="bottom"){const d=i.clone().sub(o);h=l.map(f=>f.clone().add(d)),c=void 0}else if(r==="left"){const d=i.clone().sub(o);h=[a[1].clone().add(d),a[1],a[2],a[2].clone().add(d)]}else if(r==="right"){const d=i.clone().sub(o);h=[a[0],a[0].clone().add(d),a[3].clone().add(d),a[3]]}else if(r==="front"){const d=i.clone().sub(o);h=[a[3].clone().add(d),a[2].clone().add(d),a[2],a[3]]}else if(r==="back"){const d=i.clone().sub(o);h=[a[0],a[1],a[1].clone().add(d),a[0].clone().add(d)]}t.setPoints({points:h,heightPoint:c?h[0].clone().add(c):void 0})}}}))}}class ld extends Ss{constructor(){super(...arguments);u(this,"name","BoxMesh")}get geometryInfo(){if(this.geometryInfoNeedUpdate){this.geometryInfoNeedUpdate=!1;const e=this.bottomPositions,i=this.topPosition;if(!e||e.length<3||!i){this._geometryInfoCache=void 0;return}const s=Ut(...e),r=i.clone().sub(e[0]),o=s.clone().add(r.clone().divideScalar(2));this._geometryInfoCache={center:o}}return this._geometryInfoCache}}class Rv extends Ti{constructor(e,i){super(e,i);u(this,"type","Box");u(this,"boxMesh");u(this,"_editor");e&&(this.boxMesh=new ld(F(F({},e.style),e)),this.add(this.boxMesh))}get editor(){return this._editor||(this._editor=new _v(this.boxMesh)),this._editor}get data(){return fe(F({},this.baseData),{points:ui(this.applyObjectMatrixWorld(this.boxMesh.bottomPositions,this.boxMesh)),heightPoint:ui(this.applyObjectMatrixWorld(this.boxMesh.topPosition,this.boxMesh)),style:{color:this.boxMesh.color.getHex(),opacity:this.boxMesh.opacity,lineWidth:this.boxMesh.lineWidth,lineColor:this.boxMesh.lineColor.getHex()}})}setData(e){this.boxMesh.setPoints({points:e.points?this.applyObjectReversalMatrixWorld(e.points.map(Qe),this.boxMesh):void 0,heightPoint:e.heightPoint?this.applyObjectReversalMatrixWorld(Qe(e.heightPoint),this.boxMesh):void 0}),this.boxMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.boxMesh)==null||e.highlight()}unhighlight(){var e;(e=this.boxMesh)==null||e.unhighlight()}create(e){return ee(this,null,function*(){this.removeChildren(),this.boxMesh=new ld(e),this.add(this.boxMesh),yield cd(this.boxMesh,this.pointSelector,e),this.config.defaultAction&&this.editor.enable()})}}function cd(n,t,e){return ee(this,null,function*(){return new Promise((i,s)=>ee(this,null,function*(){const r=n.parent;if(!r){s(new Error("No container"));return}const o=new fl(n.style);r.add(o),yield pl(o,t,e),r.remove(o),n.setPoints({points:o.points});const a=new li,l=Rn(n.bottomPositions),c=Ut(...n.bottomPositions),h=c.clone().add(l.clone().multiplyScalar(100)),d=c.clone().sub(l.clone().multiplyScalar(100));a.setPoints([h,d]),r.add(a),t.enable();const f=v=>{p(),i()},g=v=>{if(!(v!=null&&v.raycaster))return;const b=Mn({raycaster:v.raycaster,line:new P.Line3(h,d)});if(b){const w=b.clone().sub(c);n.setPoints({heightPoint:n.bottomPositions[0].clone().add(w)})}},p=()=>{t.off("select",f),t.off("intersectionUpdate",g),t.off("disable",m),t.disable(),r==null||r.remove(a)},m=()=>{p(),r==null||r.remove(n),s(new Error("Cancelled"))};t.on("select",f),t.on("intersectionUpdate",g),t.on("disable",m)}))})}function xE(n,t){for(let e=n.length-1;e>=0;e--)t(n[e])}class Fv extends Ti{constructor(e,i){super(e,i);u(this,"type","Line");u(this,"lineMesh");u(this,"_editor");u(this,"creatingObject");e&&(this.lineMesh=new ao(F(F({},e.style),e)),this.add(this.lineMesh))}get editor(){return this._editor||(this._editor=new vE(this)),this._editor}get data(){return fe(F({},this.baseData),{points:ui(this.applyObjectMatrixWorld(this.lineMesh.points)),style:{lineColor:new P.Color(this.lineMesh.color).getHex(),lineWidth:this.lineMesh.lineWidth,dashed:this.lineMesh.dashed}})}setData(e){e.points&&this.lineMesh.setPoints(e.points),this.lineMesh.setStyle(e.style)}highlight(){var e;(e=this.lineMesh)==null||e.highlight()}unhighlight(){var e;(e=this.lineMesh)==null||e.unhighlight()}canUndo(){var e;(e=this.creatingObject)==null||e.canUndo()}canRedo(){var e;(e=this.creatingObject)==null||e.canRedo()}undo(){var e;(e=this.creatingObject)==null||e.undo()}redo(){var e;(e=this.creatingObject)==null||e.redo()}create(e){return ee(this,null,function*(){this.removeChildren();const i=new ao(e);this.lineMesh=i,this.add(this.lineMesh),this.creatingObject=hd(i,this.pointSelector,e),yield this.creatingObject.finished,this.config.defaultAction&&this.editor.enable()})}}function hd(n,t,e){var R;const i=n.parent;if(!i)return;const{promise:s,resolve:r,reject:o}=Ms(),a=(R=e==null?void 0:e.limit)!=null?R:"none",l=new li(n.style);i.add(l);const c=new li(fe(F({},n.style),{dashed:!0,lengthEnable:!1}));i.add(c),t.enable();const h=[];let d,f,g;const p=[],m=()=>h.length>0,v=()=>p.length>0,b=()=>{m()&&(p.push(h.pop()),n.setPoints(h),E(g),t.pointSelectorHelper.magnifier.render())},w=()=>{v()&&(h.push(p.pop()),n.setPoints(h),E(g),t.pointSelectorHelper.magnifier.render())},x=z=>{if(!z)return;p.length=0;const O=h.length===0?z.point:d.clone();h.push(O),n.setPoints(h),h.length===2&&(L(),r())},E=z=>{const O=()=>{l.setPoints([]),c.setPoints([]),t.pointSelectorHelper.magnifier.render()};if(!(h!=null&&h.length)||!z)return O();g=z;const A=h.at(-1).clone();a==="none"?(d=z.point,l.setPoints([A,d])):a==="xoz"?(t.plane=f,f=f!=null?f:new P.Plane().setFromNormalAndCoplanarPoint(new P.Vector3(0,1,0),h[0]),d=f.projectPoint(z.point,new P.Vector3),l.setPoints([A,d]),c.setPoints([d,z.point])):a==="y"&&(z.isVirtual?(d=Mn({raycaster:z.raycaster,line:new P.Line3(h[0].clone(),new P.Vector3(0,1,0).add(h[0])),clampToLine:!1}),c.setPoints([])):(d=new P.Line3(h[0].clone(),new P.Vector3(0,1,0).add(h[0])).closestPointToPoint(z.point,!1,new P.Vector3),c.setPoints([d,z.point])),l.setPoints([A,d]))},L=()=>{t.off("select",x),t.off("intersectionUpdate",E),t.off("disable",S),t.plane=null,t.disable(),i==null||i.remove(l,c)},S=()=>{L(),h.length!==2&&(i==null||i.remove(n)),o(new Error("Cancelled"))};return t.on("select",x),t.on("intersectionUpdate",E),t.on("disable",S),{finished:s,canUndo:m,canRedo:v,undo:b,redo:w}}const wr=class extends Pt{constructor(e,i){super();u(this,"group");u(this,"theme");u(this,"five");u(this,"creatingItem",null);u(this,"undo",()=>{var e;console.log("undo"),(e=this.creatingItem)==null||e.undo(),this.five.needsRender=!0});u(this,"redo",()=>{var e;console.log("redo"),(e=this.creatingItem)==null||e.redo(),this.five.needsRender=!0});this.five=e,this.theme=i,this.group=new $t,this.group.name="Sculpt",e.scene.add(this.group),wr.modules.init(e),vt("ctrl+z, command+z",this.undo),vt("ctrl+shift+z, command+shift+z",this.redo),wr.modules.fiveDomEvents.addEventListener(this.group,"click",({intersects:s,origDomEvent:r})=>{var a;const o=wv((a=s==null?void 0:s[0])==null?void 0:a.object,l=>l.isSculptObject);return o&&!o.editing?this.emit("click",r,o):!1}),window.__SCULPT_DEBUG__=this,window.__SCULPT_MODULES_DEBUG__=wr.modules}get data(){return{items:this.items.map(e=>{try{return e.data}catch(i){return console.error(i),null}}).filter(Fe)}}get items(){return this.group.children}load(e,i){var r;this.clear();const s=(r=e==null?void 0:e.items)==null?void 0:r.map(o=>{var l;const a=fe(F({},o),{style:F(F({},(l=this.theme)==null?void 0:l[o.type.toLowerCase()]),o.style)});return o.type==="Point"?new Mv(a,i):o.type==="line"?new Fv(a,i):o.type==="Polyline"?new Cv(a,i):o.type==="Polygon"?new kv(a,i):o.type==="Prism"?new xv(a,i):o.type==="Rectangle"?new Lv(a,i):o.type==="Circle"?new jv(a,i):o.type==="Cylinder"?new Bv(a,i):o.type==="Box"?new Rv(a,i):null});this.group.add(...s),this.five.needsRender=!0}getItemById(e){return this.items.find(i=>i.uuid===e)}putObject(e){var r;this.group.add(e);const i=wr.modules.object3DHelper,s=i.addObject3DHelper(e);return(r=s==null?void 0:s.moveController)==null||r.moveByMouse(),i}createPoint(...e){return ee(this,null,function*(){var i,s;return Object.assign((i=e[0])!=null?i:{},(s=this.theme)==null?void 0:s.point,e[0]),this.createItem(Mv,...e)})}createLine(...e){return ee(this,null,function*(){var i,s;return Object.assign((i=e[0])!=null?i:{},(s=this.theme)==null?void 0:s.line,e[0]),this.createItem(Fv,...e)})}createline(...e){return ee(this,null,function*(){this.createLine(...e)})}createPolyline(...e){return ee(this,null,function*(){var i,s;return Object.assign((i=e[0])!=null?i:{},(s=this.theme)==null?void 0:s.polyline,e[0]),this.createItem(Cv,...e)})}createPolygon(...e){return ee(this,null,function*(){var i,s;return Object.assign((i=e[0])!=null?i:{},(s=this.theme)==null?void 0:s.polygon,e[0]),this.createItem(kv,...e)})}createPrism(...e){return ee(this,null,function*(){var i,s;return Object.assign((i=e[0])!=null?i:{},(s=this.theme)==null?void 0:s.prism,e[0]),this.createItem(xv,...e)})}createRectangle(...e){return ee(this,null,function*(){var i,s;return Object.assign((i=e[0])!=null?i:{},(s=this.theme)==null?void 0:s.rectangle,e[0]),this.createItem(Lv,...e)})}createCircle(...e){return ee(this,null,function*(){var i,s;return Object.assign((i=e[0])!=null?i:{},(s=this.theme)==null?void 0:s.circle,e[0]),this.createItem(jv,...e)})}createCylinder(...e){return ee(this,null,function*(){var i,s;return Object.assign((i=e[0])!=null?i:{},(s=this.theme)==null?void 0:s.cylinder,e[0]),this.createItem(Bv,...e)})}createBox(...e){return ee(this,null,function*(){var i,s;return Object.assign((i=e[0])!=null?i:{},(s=this.theme)==null?void 0:s.box,e[0]),this.createItem(Rv,...e)})}canUndo(){var e;return this.creatingItem?(e=this.creatingItem)==null?void 0:e.canUndo():!1}canRedo(){var e;return this.creatingItem?(e=this.creatingItem)==null?void 0:e.canRedo():!1}clear(){xE(this.items,e=>e.delete()),this.five.needsRender=!0}createItem(e,...i){return ee(this,null,function*(){this.creatingItem&&(this.creatingItem.stopCreating(),this.creatingItem=null);const s=new e;this.creatingItem=s,this.group.add(s);const{promise:r,resolve:o,reject:a}=Ms();return yield s.create(...i).then((...l)=>(this.creatingItem=null,o(s),l)).catch(l=>{a(l),this.group.remove(s)}),r})}};let lt=wr;u(lt,"modules",yv);const DE=(n,t)=>new lt(n,t);function SE(n,...t){t.forEach(e=>{n.children.includes(e)||e&&n.add(e)})}class dd extends Pt{constructor(e){var s,r;super();u(this,"__renderer");u(this,"__disposeRenderer");u(this,"type");u(this,"tag");u(this,"rawData");u(this,"model");u(this,"visibles",[]);u(this,"five");u(this,"group");u(this,"fiveDomEvents");u(this,"disposers",[]);this.five=e.five,this.model=e.model,this.group=e.group,this.type=e.type,this.rawData=e.rawData,this.fiveDomEvents=e.fiveDomEvents;const i=(r=(s=e.position)!=null?s:this.model.center)!=null?r:as(this.model).getCenter(new B.Vector3);this.tag=kd(this.five,i,{wrapper:e.tagWrapper,disableOpacityTransition:this.type==="prism"}),this.tag.extraObjectsForIntersectCheck.push(this.group)}get container(){return this.tag.container}get state(){return{visible:this.model.visible,enabled:this.group.children.includes(this.model)}}show(){this.visibles[0]=!0,this.updateVisible(),this.emit("show")}hide(){this.visibles[0]=!1,this.updateVisible(),this.emit("hide")}enable(){SE(this.group,this.model),this.five.needsRender=!0,this.model.updateMatrixWorld(!0),this.tag.setTransformMatrix(this.model.matrixWorld),this.tag.enable();const e=this.onClick.bind(this);this.fiveDomEvents.removeEventListener(this.model,"click"),this.fiveDomEvents.addEventListener(this.model,"click",e,{skipPano:!0}),this.disposers.push(()=>{this.fiveDomEvents.removeEventListener(this.model,"click")}),this.updateVisible(),this.emit("enable")}disable(){this.group.remove(this.model),this.five.needsRender=!0,this.tag.disable(),this.disposers.forEach(e=>e()),this.disposers=[],this.emit("disable")}updateVisible(){!this.visibles.some(i=>i===!1)?(this.tag.show(),this.model.visible=!0):(this.tag.hide(),this.model.visible=!1),this.five.needsRender=!0}onClick(){return this.emit("click",this)}}class Nv extends dd{constructor(...e){super(...e);u(this,"hideTag",()=>{this.tag.hide()});this.enable(),this.tag.hide(),this.updateVisible()}enable(){super.enable(),this.five.on("mode.change.request",this.hideTag),this.five.on("pano.request",this.hideTag)}disable(){super.disable(),this.five.needsRender=!0,this.five.off("mode.change.request",this.hideTag),this.five.off("pano.request",this.hideTag)}show(){super.show(),this.tag.hide()}updateVisible(){!this.visibles.some(i=>i===!1)?this.model.visible=!0:(this.tag.hide(),this.model.visible=!1),this.five.needsRender=!0}onClick(){return this.tag.visible?this.tag.hide():this.tag.show({force:!0}),super.onClick(),!0}}function LE(n){De(n,"svelte-1q9fx3x",".model-maker-tag.svelte-1q9fx3x{position:absolute;width:-moz-max-content;width:max-content;left:50%;top:50%;transform:translate(-50%, -50%);color:#fff;font-size:0.875rem;font-weight:bold;text-shadow:0.125rem 0 0.5rem rgba(0, 0, 0, 0.15)}")}function Gv(n){let t,e;return{c(){t=U("div"),e=Ve(n[0]),y(t,"class","model-maker-tag svelte-1q9fx3x")},m(i,s){Y(i,t,s),V(t,e)},p(i,s){s&1&&Ge(e,i[0])},d(i){i&&X(t)}}}function TE(n){let t,e=n[0]&&Gv(n);return{c(){e&&e.c(),t=Ne()},m(i,s){e&&e.m(i,s),Y(i,t,s)},p(i,[s]){i[0]?e?e.p(i,s):(e=Gv(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:re,o:re,d(i){e&&e.d(i),i&&X(t)}}}function zE(n,t,e){let{text:i}=t;return n.$$set=s=>{"text"in s&&e(0,i=s.text)},[i]}class OE extends Me{constructor(t){super(),Ie(this,t,zE,TE,Pe,{text:0},LE)}}const Hv=(n,t)=>{var i;const e=new OE({target:n,props:{text:(i=t.rawData)==null?void 0:i.name}});return()=>e.$destroy()},jE={box:Hv,triangles:Hv,prism:(n,t,e)=>{var s;const i=new Av({target:n,props:{content:(s=t.rawData)==null?void 0:s.name,five:e}});return()=>i.$destroy()}};class ud extends dd{constructor(...e){const i=e[0],s=as(i.model),r=new P.Vector3().lerpVectors(kn(s,0),kn(s,5),.5);super(fe(F({},i),{position:r}));u(this,"onModelShownFloorChange",e=>{this.updateFiveCurrentFloorState(e),this.updateVisible()});u(this,"updateFiveCurrentFloorState",e=>{var s,r;const i=(r=(s=this.rawData)==null?void 0:s.object_data)==null?void 0:r.floorIndex;ei(i)?this.visibles[1]=!0:this.visibles[1]=e===null?!0:i===e});this.enable(),this.updateVisible(),this.five.on("modelShownFloorChange",this.onModelShownFloorChange),this.disposers.push(()=>{this.five.off("modelShownFloorChange",this.onModelShownFloorChange)})}show(){this.updateFiveCurrentFloorState(this.five.model.shownFloor),super.show()}hide(){super.hide()}}class Wv extends dd{constructor(...e){super(...e);u(this,"onPanoArrived",e=>{this.updatePanoIndex(e),this.updateVisible()});u(this,"onModeChange",e=>{this.updateMode(e),this.updateVisible()});u(this,"updatePanoIndex",e=>{var i,s;this.visibles[1]=((s=(i=this.rawData)==null?void 0:i.object_data)==null?void 0:s.panoIndex)===e});u(this,"updateMode",e=>{this.visibles[2]=e==="Panorama"});this.updatePanoIndex(this.five.state.panoIndex),this.updateMode(this.five.state.mode),this.enable(),this.updateVisible(),this.five.on("panoArrived",this.onPanoArrived),this.five.on("modeChange",this.onModeChange),this.disposers.push(()=>{this.five.off("panoArrived",this.onPanoArrived),this.five.off("modeChange",this.onModeChange)})}show(){this.updatePanoIndex(this.five.state.panoIndex),this.updateMode(this.five.state.mode),super.show()}}class VE extends hn{constructor(e,i){var s,r;super(e);u(this,"state");u(this,"items",[]);u(this,"group",new B.Group);u(this,"data");u(this,"tagRendererMap",{});u(this,"fiveDomEvents");u(this,"zFightingOffset",0);u(this,"tagWrapper");u(this,"occlusionVisibility");u(this,"occlusionMode");u(this,"fiveEveryReadyListenerDisposer");u(this,"originalOpacities",new Map);u(this,"originalTagOpacities",new Map);u(this,"onFiveModeChange",e=>{const i=this.occlusionVisibility;Array.isArray(i)&&[...this.getPrismItems(),...this.getBoxItems()].forEach(r=>{(r.model instanceof Ss||r.model instanceof id)&&r.model.setStyle({occlusionVisibility:i.includes(e)})})});u(this,"handleEnable",()=>{var e,i;this.five.scene.add(this.group),(i=(e=this.five.getElement())==null?void 0:e.parentElement)==null||i.appendChild(this.tagWrapper),this.five.needsRender=!0,this.onFiveModeChange(this.five.getCurrentState().mode),this.onFiveEveryReady(),this.five.on("modeChange",this.onFiveModeChange),this.fiveEveryReadyListenerDisposer=Ol(this.five,this.onFiveEveryReady)});u(this,"handleDisable",()=>{this.five.scene.remove(this.group),this.tagWrapper.remove(),this.five.needsRender=!0,this.five.off("modeChange",this.onFiveModeChange),this.fiveEveryReadyListenerDisposer()});u(this,"onFiveEveryReady",()=>ee(this,null,function*(){if(this.five.state.mode==="Panorama")return;const e=this.items.filter(l=>l instanceof ud).map(l=>l.tag),i=e.filter(l=>l.position&&l.visible&&l.enabled);yield cv(0);const s=this.five.camera.position.clone(),r=i.sort((l,c)=>s.distanceTo(l.position)-s.distanceTo(c.position)),o=[],a=(l,c)=>!(l.right<c.left||l.left>c.right||l.bottom<c.top||l.top>c.bottom);e.forEach(l=>{l.visibles[2]=void 0}),r.forEach(l=>{if(l.visibles[1]===!1)return;const c=l.container.getElementsByClassName("room-label-item__text")[0];if(!c)return;const h=c.getBoundingClientRect();o.every(f=>!a(f.boundingClientRect,h))?(o.push({tag:l,boundingClientRect:h}),l.visibles[2]=!0):l.visibles[2]=!1,l.needsRender=!0})}));u(this,"updateTagRenderer",()=>{this.items.forEach(e=>{var s;const i=(s=this.tagRendererMap[e.type])!=null?s:jE[e.type];i&&e.__renderer!==i&&(e.__renderer=i,typeof e.__disposeRenderer=="function"&&e.__disposeRenderer(),e.tag.container.innerHTML="",e.__disposeRenderer=i(e.tag.container,e,this.five))})});this.group.name="ModelMakerPluginGroup",this.state={enabled:!0,visible:!0},this.occlusionVisibility=(s=i==null?void 0:i.occlusionVisibility)!=null?s:!1,this.occlusionMode=(r=i==null?void 0:i.occlusionMode)!=null?r:"translucence",this.fiveDomEvents=new Xs(e,{noEmitWhenHide:!0,noEmitWhenNotInScene:!0}),this.tagWrapper=(()=>{var a;const o=document.createElement("div");return o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.pointerEvents="none",o.style.zIndex=`${(a=i==null?void 0:i.tagContainerZIndex)!=null?a:""}`,o})(),e.scene.add(this.group),this.handleEnable(),window.__MODELMAKER_DEBUG__=this}load(e){return ee(this,null,function*(){if(this.clear(),this.data=e,this.originalOpacities.clear(),yield ai(this.five),this.data!==e)return;this.clear();const i=s=>{var c;const r=s.object_data.color?new B.Color().setHex(parseInt(s.object_data.color.slice(1),16)):new B.Color(1,1,1);let o=typeof this.occlusionVisibility=="boolean"?this.occlusionVisibility:!1,a=this.occlusionMode;s.type==="triangles"&&(o=!0,a="depthTest");const l=((c=s.object_data.opacity)!=null?c:.4)/2;return s.id&&this.originalOpacities.set(s.id.toString(),{opacity:l,lineOpacity:1}),{color:r,lineColor:r,opacity:l,lineOpacity:1,lineWidth:1,occlusionVisibility:o,occlusionMode:a}};this.items=e.list.map(s=>{var r;switch(s.type){case"triangles":{const o=new id;return Fe(s.id)&&(o.uuid=s.id.toString()),o.setPoints(s.object_data.points,{checkLinesIntersect:!1}),o.setStyle(i(s)),this.fiveDomEvents.addEventListener(o,"hover",()=>o.highlight()),this.fiveDomEvents.addEventListener(o,"unHover",()=>o.unhighlight()),new Wv({five:this.five,tagWrapper:this.tagWrapper,model:o,group:this.group,type:s.type,rawData:s,fiveDomEvents:this.fiveDomEvents})}case"prism":{const o=new Ss;Fe(s.id)&&(o.uuid=s.id.toString()),this.zFightingOffset+=vo.Z_FIGHTING_OFFSET;const a=s.object_data.points.map(d=>{var f;return[d[0],d[1]+((f=s.object_data.fixedY)!=null?f:0),d[2]]});a.push(a[0]);const l=s.object_data.height+((r=s.object_data.fixedHeight)!=null?r:0)+this.zFightingOffset,c=Qe(a[0]).add(new B.Vector3().setY(l));return o.setPoints({points:a,heightPoint:c}),o.setStyle(i(s)),new ud({five:this.five,tagWrapper:this.tagWrapper,model:o,group:this.group,type:s.type,rawData:s,fiveDomEvents:this.fiveDomEvents})}case"box":{const o=new Ss;Fe(s.id)&&(o.uuid=s.id.toString());const{start:a,end:l,rotation:c=[0,0,0,0]}=s.object_data,h=new B.Vector3().fromArray(a),d=new B.Vector3().fromArray(l),f=new B.Euler().fromArray(c),g=new B.Quaternion().setFromEuler(f),p=g.clone().inverse(),m=new B.Vector3().lerpVectors(h,d,.5),v=m.clone().negate(),b=h.clone().add(v).applyQuaternion(p),w=d.clone().add(v).applyQuaternion(p),x=new B.Box3(b.clone().max(w),b.clone().min(w));return o.setPoints({points:[kn(x,2),kn(x,3),kn(x,7),kn(x,6)],heightPoint:kn(x,1)}),o.position.copy(m),o.quaternion.copy(g),o.setStyle(i(s)),new Nv({five:this.five,tagWrapper:this.tagWrapper,model:o,group:this.group,type:s.type,rawData:s,fiveDomEvents:this.fiveDomEvents})}default:return null}}).filter(Boolean),this.state.enabled?this.handleEnable():this.handleDisable(),this.state.visible?this.handleShow():this.handleHide(),this.updateTagRenderer(),this.hooks.emit("dataLoaded",e),this.five.needsRender=!0})}setState(e){Fe(e.enabled)&&this.state.enabled!==e.enabled&&(this.state.enabled=e.enabled,e.enabled?this.handleEnable():this.handleDisable(),this.hooks.emit(e.enabled?"enable":"disable",{userAction:"我不知道捏"}),this.hooks.emit("stateChange",{state:this.state,userAction:"我不知道捏"})),Fe(e.visible)&&this.state.visible!==e.visible&&(this.state.visible=e.visible,e.visible?this.handleShow():this.handleHide(),this.hooks.emit(e.visible?"show":"hide",{userAction:"我不知道捏"}),this.hooks.emit("stateChange",{state:this.state,userAction:"我不知道捏"}))}getItemById(e){return this.items.find(i=>i.rawData.id===e)}registerTagRenderer(e){this.tagRendererMap=F(F({},this.tagRendererMap),e),this.updateTagRenderer()}hasCustomTagRenderer(e){return!!this.tagRendererMap[e]}enable(){this.setState({enabled:!0})}disable(){this.setState({enabled:!1})}show(){this.setState({visible:!0})}hide(){this.setState({visible:!1})}clear(){this.zFightingOffset=0,this.handleDisable(),this.group.children.length=0,this.five.needsRender=!0,this.items=[],this.tagWrapper.innerHTML="",this.fiveDomEvents.clear(),this.originalOpacities.clear(),this.originalTagOpacities.clear()}setModelsOpacity(e,i){if(!this.state.enabled)return;const{type:s,id:r}=i||{},o=s?Array.isArray(s)?s:[s]:[],a=e===1;for(const l of this.items)if(!s||o.includes(l.type)||l.rawData.id===r){switch(l.type){case"box":case"prism":{this.setPrismModelOpacity(l.rawData.id,l.model,e);break}case"triangles":{this.setPolygonModelOpacity(l.rawData.id,l.model,e);break}}if(l.tag){if(!l.tag.visible)continue;const h=l.rawData.id.toString();if(a){const f=this.originalTagOpacities.get(h);f!==void 0&&(l.tag.container.style.opacity=f.toString())}else{if(!this.originalTagOpacities.has(h)){const p=parseFloat(l.tag.container.style.opacity)||1;this.originalTagOpacities.set(h,p)}const g=(this.originalTagOpacities.get(h)||1)*e;l.tag.container.style.opacity=g.toString()}(parseFloat(l.tag.container.style.opacity)||0)<.01?l.tag.container.style.pointerEvents="none":l.tag.container.style.pointerEvents="auto"}}this.five.needsRender=!0}hideItemsByType(e){const i=Array.isArray(e)?e:[e];this.items.forEach(s=>{i.includes(s.type)&&s.hide()})}showItemsByType(e){const i=Array.isArray(e)?e:[e];this.items.forEach(s=>{i.includes(s.type)&&s.show()})}dispose(){this.hooks.emit("dispose"),this.clear()}onWorkCodeChange(){this.group.matrix.copy(this.workUtil.transform.clone()),this.group.matrix.decompose(this.group.position,this.group.quaternion,this.group.scale),this.group.updateMatrixWorld()}setPrismModelOpacity(e,i,s){let{opacity:r,lineOpacity:o}=this.originalOpacities.get(e.toString())||{opacity:.2,lineOpacity:1};r=r*s,o=o*s,i.setStyle({opacity:r,lineOpacity:o})}setPolygonModelOpacity(e,i,s){let{opacity:r,lineOpacity:o}=this.originalOpacities.get(e.toString())||{opacity:.2,lineOpacity:1};r=r*s,o=o*s,i.setStyle({opacity:r,lineOpacity:o})}handleShow(){this.group.visible=!0,this.tagWrapper.style.display="block",this.five.needsRender=!0}handleHide(){this.group.visible=!1,this.tagWrapper.style.display="none",this.five.needsRender=!0}getPrismItems(){return this.items.filter(e=>e instanceof ud)}getPolygonItems(){return this.items.filter(e=>e instanceof Wv)}getBoxItems(){return this.items.filter(e=>e instanceof Nv)}}const BE=(...n)=>new VE(...n),_E=Object.freeze(Object.defineProperty({__proto__:null,BetterTween:ls,FiveDomEvents:Xs,FivePuppet:hb,Interval:Dl,LegacyPointHelper:KA,LightTag:Br,LineSegments:Wd,Magnifier:Zo,Object3D:Hd,PointDomHelper:QA,PointHelper:Gd,PointSelector:ea,PointSelectorHelper:Ld,Rectangle:f1,absoluteUrl:rc,animeMap:Wr,awaitNextFrame:ib,blink:oa,bounding:Gl,boundingBox:as,boundingSphere:Ud,boxVertex:kn,boxVertexes:nA,checkFiveModelLoaded:eb,convexHull:p1,equal:Nt,fiveModelIsLoaded:xd,getCoordsFromClient:P1,getCoordsFromElement:Ed,getFrameTime:nb,getIntersectFromRelativePosition:jA,getRaycasterFromFivePointer:VA,initialCSS3DRender:Fr,inside:Cd,isAbsoluteURL:Cu,isModelLike:oi,isNil:ei,isPanoramaLike:In,lookObject:$A,lookPoint:wu,nextFrame:Zr,notNil:Fe,pointInPolygon:Cd,reblink:gu,requestAnimationFrameInterval:Zs,sculpt:Object.freeze(Object.defineProperty({__proto__:null,BaseEditor:dl,BoxMesh:ld,BoxMeshEditor:_v,CircleMesh:Ov,CircleMeshEditor:Tv,CircleWithEdgeMesh:ko,CylinderMesh:od,CylinderMeshEditor:Vv,LineMesh:li,PointMesh:Nn,PolygonMesh:ur,PrismMesh:Ss,PrismMeshEditor:Ev,RectangleMesh:rd,RectangleMeshEditor:Dv,RectangleWithEdgeMesh:fl,createBox:cd,createCircle:ml,createCylinder:ad,createLine:hd,createPoint:td,createPolygon:ul,createPrism:sd,createRectangle:pl},Symbol.toStringTag,{value:"Module"})),tag:kd,tweenProgress:Yr,uuid:Et,waitFiveModelLoaded:ai,worldBounding:ta,worldBoundingBox:sA,worldBoundingSphere:Qd},Symbol.toStringTag,{value:"Module"}));Ki(),zr(),de.AreaMakerPlugin=uE,de.CSS3DRender=Qs,de.CSS3DRenderPlugin=Qr,de.CameraMovementEffect=np,de.CameraMovementPlugin=Q2,de.ContentType=Qm,de.CruisePlugin=J7,de.CruisePluginController=wo,de.CruisePluginTypes=Z7,de.CurrentPanoImagePlugin=pE,de.DIRECTION=fr,de.DISPLAY_STRATEGY_TYPE=ws,de.DimensionType=Xm,de.FLOOR_PLAN_ATTACHED_TO=zn,de.FLOOR_TYPE_MAP=z2,de.GuideLineItem=Q7,de.GuideLineModeItem=F7,de.GuideLinePlugin=Bh,de.ITEM_LABEL_PLUGIN_DISPLAY_STRATEGY_TYPE=Ps,de.ItemLabelPlugin=gC,de.Magnifier=Zo,de.MapviewFloorplanPlugin=l2,de.MeasurePlugin=wP,de.ModelChassisCompassPlugin=R2,de.ModelEntryDoorGuidePlugin=G2,de.ModelFloorplanPlugin=n2,de.ModelItemLabelPlugin=YP,de.ModelMakerPlugin=BE,de.ModelRoomLabelPlugin=iy,de.ModelTVVideoPlugin=$P,de.ModelViewPlugin=db,de.MoveController=jh,de.MovePlugin=q7,de.Object3DHelperController=Yh,de.Object3DHelperPlugin=O6,de.PLUGIN=hl,de.PaintBrush=h1,de.PaintBrushTypeEnum=$i,de.PanoCompassPlugin=p3,de.PanoCursorRaycasterPlugin=ub,de.PanoDoorLabelPlugin=xC,de.PanoFloorplanRadarPlugin=L2,de.PanoMeasurePlugin=iP,de.PanoMeasurePluginLine=vs,de.PanoMeasurePluginModel=Xc,de.PanoMeasurePluginPoint=di,de.PanoMeasurePluginPolyline=As,de.PanoRulerPlugin=K2,de.PanoRulerProPlugin=c3,de.PanoSpatialTagPlugin=VP,de.PanoTagPlugin=S7,de.PanoTagPluginController=al,de.PanoVideoPlugin=F6,de.PanoVideoPluginType=R6,de.PipelinePlugin=nE,de.PointType=Um,de.ROOM_FETILE_TYPE_MAP=T2,de.ROOM_TYPE_MAP=O2,de.Rotation=Hi,de.Sculpt=lt,de.SculptPlugin=DE,de.TopviewFloorplanPlugin=h2,de.Util=_E,de.WalkController=wo,de.createBox=cd,de.createCircle=ml,de.createCylinder=ad,de.createLine=hd,de.createPoint=td,de.createPolygon=ul,de.createPolyline=Iv,de.createPrism=sd,de.createRectangle=pl,de.defaultGlobalConfig=fh,de.itemLabelPluginServerParams=vC,de.modelItemLabelPluginServerParams=ZP,de.modelRoomLabelPluginServerParams=ny,de.pluginFlag=D7,Object.defineProperty(de,Symbol.toStringTag,{value:"Module"})});
