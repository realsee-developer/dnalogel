var mv = Object.defineProperty, gv = Object.defineProperties;
var vv = Object.getOwnPropertyDescriptors;
var ea = Object.getOwnPropertySymbols;
var Pd = Object.prototype.hasOwnProperty, Cd = Object.prototype.propertyIsEnumerable;
var ta = Math.pow, Ll = (n, t, e) => t in n ? mv(n, t, { enumerable: !0, configurable: !0, writable: !0, value: e }) : n[t] = e, _ = (n, t) => {
  for (var e in t || (t = {}))
    Pd.call(t, e) && Ll(n, e, t[e]);
  if (ea)
    for (var e of ea(t))
      Cd.call(t, e) && Ll(n, e, t[e]);
  return n;
}, de = (n, t) => gv(n, vv(t));
var Rn = (n, t) => {
  var e = {};
  for (var i in n)
    Pd.call(n, i) && t.indexOf(i) < 0 && (e[i] = n[i]);
  if (n != null && ea)
    for (var i of ea(n))
      t.indexOf(i) < 0 && Cd.call(n, i) && (e[i] = n[i]);
  return e;
};
var u = (n, t, e) => (Ll(n, typeof t != "symbol" ? t + "" : t, e), e);
var $ = (n, t, e) => new Promise((i, s) => {
  var r = (l) => {
    try {
      a(e.next(l));
    } catch (c) {
      s(c);
    }
  }, o = (l) => {
    try {
      a(e.throw(l));
    } catch (c) {
      s(c);
    }
  }, a = (l) => l.done ? i(l.value) : Promise.resolve(l.value).then(r, o);
  a((e = e.apply(n, t)).next());
});
import { InternalWebGLRenderer as Av, Camera as bv, loadAt3d as yv, Five as Vt, Subscribe as zr } from "@realsee/five";
import * as P from "three";
import { Vector3 as fe, Vector2 as _t, Object3D as ur, Matrix4 as tt, LineSegments as wv, Group as fn, Raycaster as Or, MeshBasicMaterial as bo, Vector4 as bs, Curve as lg, Loader as Id, LoaderUtils as zl, FileLoader as Pv, TextureLoader as rh, RepeatWrapping as Ed, ClampToEdgeWrapping as Md, Texture as kd, MeshPhongMaterial as Ol, MeshLambertMaterial as Cv, Color as Gt, sRGBEncoding as ro, EquirectangularReflectionMapping as Iv, Bone as xd, PropertyBinding as ia, OrthographicCamera as Ev, PerspectiveCamera as Mv, PointLight as Dd, MathUtils as Ui, SpotLight as kv, DirectionalLight as xv, SkinnedMesh as Dv, Mesh as fr, LineBasicMaterial as Sv, Line as Tv, Skeleton as Lv, AmbientLight as zv, BufferGeometry as na, Float32BufferAttribute as qs, Uint16BufferAttribute as Ov, Matrix3 as jv, BufferAttribute as Rv, AnimationClip as Bv, Quaternion as ys, Euler as Fn, VectorKeyframeTrack as Vv, QuaternionKeyframeTrack as _v, NumberKeyframeTrack as Hv, CanvasTexture as Fv, AnimationMixer as Nv, PlaneGeometry as Gv, LinearFilter as bc, CurvePath as Wv, LineCurve3 as Qv, TubeGeometry as Uv, ShaderMaterial as cg, SphereGeometry as Xv, DoubleSide as hg, RingGeometry as Yv, VideoTexture as Zv, SphereBufferGeometry as Jv, Box3 as qv } from "three";
import { LineGeometry as Kv, LineMaterial as $v, THREE_Line2 as eA, Line as tA } from "@realsee/five/line";
import { GLTFLoader as iA } from "@realsee/five/gltf-loader";
function nA() {
  console.debug(
    "%c %c@realsee/dnalogel %cv3.66.2",
    [
      "background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAMAAACHgmeRAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABLFBMVEUAAAAapPoap/oaqvkbrfkbr/gZnfwZoPsaqfnD4v/E4/8Ylv0clPm93/+/4P/B4f8Yj/683/8Wif+33P8Uhv+x2f8ShP+s1v8Pgf+n0/8Nf/+h0f8Lff8Lff8Nf/9dl/+czv8KfP8KfP+Lxf+Uyv+Xy/+Hwv+Jw/+Mxf+Oxv+RyP8aovsapfoap/oZmfwZm/wZnvsYnPsYkf4YlP0NePsDYfgYcfi43f+63v8Xiv8Xjf4EWfwCV/sWZ/qz2v+02/8Vh/8WiP8EUf8CTf4WXv2u1/+v2P8Thf8Thv8ETf8CR/8VV/+o1f+q1f8Qgv8Rg/8DSv8BRf8UVP+j0v+k0v8OgP8Pgf8DR/8DQv9Nhf+dzv+fz/+Kv/+Vyv+Xy/+azf+Oxv+Qx/+SyP////8MUhLdAAAAK3RSTlMACEWQ2bd98uQECPXxqO7c+Pb49vj2+Pb49vj23Oul8fMHA+TwerXXjEIG2P+bHgAAAAFiS0dEY1y+LaoAAAB+SURBVAjXY2BgZGJmYWVgYGBgY9fW0eVg4ORi4NbTNzDk4eXjZxAwMjYxNTO3EGQQsrSytrG1sxdmEHFwdHJ2cXUTZRBz9/D08vbxFWeQ8PMPCAwKDpFkkAoNC4+IjIqWZpCRlZOPiY2LV2BQVGJQTkhMUlEFWaOmrqGpxQAAyg0S9Dq+VPYAAAAASUVORK5CYII=')",
      "background-repeat: no-repeat",
      "background-position: 0 center",
      "padding-left: 8px"
    ].join(";"),
    "",
    "background-color: #12ce9b;color:black;padding:0 6px;border-radius: 3px"
  );
}
function sA() {
  const n = typeof OffscreenCanvas != "undefined", t = n && new OffscreenCanvas(1, 1).getContext("webgl") !== null;
  n && !t && Object.assign(window, {
    OffscreenCanvas: function(e, i) {
      const s = document.createElement("canvas");
      return s.width = e, s.height = i, s;
    }
  });
}
function dg() {
}
const Sd = () => Promise.resolve(), Td = {
  __queue: Promise.resolve()
};
function rA(n = Sd) {
  Td.__queue = Td.__queue.then(n).catch(Sd);
}
function sa(n, t, e) {
  const i = n.x, s = n.y, r = Math.floor(i / t * 1e4) / 1e4, o = Math.floor(s / e * 1e4) / 1e4;
  return { x: r, y: o };
}
function jl(n, t, e) {
  const { x: i, y: s } = n, r = i * t, o = s * e;
  return { x: r, y: o };
}
function ra(n) {
  if (n.length < 2)
    return {};
  const t = n.slice(-2), e = t[0], i = {
    x: (t[0].x + t[1].x) / 2,
    y: (t[0].y + t[1].y) / 2
  };
  return { control: e, end: i };
}
function oA(n, t, e = dg) {
  new Promise((i) => {
    setTimeout(() => {
      e(), i(!0);
    }, t * n);
  });
}
const aA = window, Ld = window.requestAnimationFrame || aA.webkitRequestAnimationFrame || ((n) => setTimeout(n, 16));
function Ca(n, t = 0) {
  t <= 0 ? Ld(n) : Ld(() => Ca(n, t - 1));
}
var ji = Object.freeze({
  Linear: Object.freeze({
    None: function(n) {
      return n;
    },
    In: function(n) {
      return n;
    },
    Out: function(n) {
      return n;
    },
    InOut: function(n) {
      return n;
    }
  }),
  Quadratic: Object.freeze({
    In: function(n) {
      return n * n;
    },
    Out: function(n) {
      return n * (2 - n);
    },
    InOut: function(n) {
      return (n *= 2) < 1 ? 0.5 * n * n : -0.5 * (--n * (n - 2) - 1);
    }
  }),
  Cubic: Object.freeze({
    In: function(n) {
      return n * n * n;
    },
    Out: function(n) {
      return --n * n * n + 1;
    },
    InOut: function(n) {
      return (n *= 2) < 1 ? 0.5 * n * n * n : 0.5 * ((n -= 2) * n * n + 2);
    }
  }),
  Quartic: Object.freeze({
    In: function(n) {
      return n * n * n * n;
    },
    Out: function(n) {
      return 1 - --n * n * n * n;
    },
    InOut: function(n) {
      return (n *= 2) < 1 ? 0.5 * n * n * n * n : -0.5 * ((n -= 2) * n * n * n - 2);
    }
  }),
  Quintic: Object.freeze({
    In: function(n) {
      return n * n * n * n * n;
    },
    Out: function(n) {
      return --n * n * n * n * n + 1;
    },
    InOut: function(n) {
      return (n *= 2) < 1 ? 0.5 * n * n * n * n * n : 0.5 * ((n -= 2) * n * n * n * n + 2);
    }
  }),
  Sinusoidal: Object.freeze({
    In: function(n) {
      return 1 - Math.sin((1 - n) * Math.PI / 2);
    },
    Out: function(n) {
      return Math.sin(n * Math.PI / 2);
    },
    InOut: function(n) {
      return 0.5 * (1 - Math.sin(Math.PI * (0.5 - n)));
    }
  }),
  Exponential: Object.freeze({
    In: function(n) {
      return n === 0 ? 0 : Math.pow(1024, n - 1);
    },
    Out: function(n) {
      return n === 1 ? 1 : 1 - Math.pow(2, -10 * n);
    },
    InOut: function(n) {
      return n === 0 ? 0 : n === 1 ? 1 : (n *= 2) < 1 ? 0.5 * Math.pow(1024, n - 1) : 0.5 * (-Math.pow(2, -10 * (n - 1)) + 2);
    }
  }),
  Circular: Object.freeze({
    In: function(n) {
      return 1 - Math.sqrt(1 - n * n);
    },
    Out: function(n) {
      return Math.sqrt(1 - --n * n);
    },
    InOut: function(n) {
      return (n *= 2) < 1 ? -0.5 * (Math.sqrt(1 - n * n) - 1) : 0.5 * (Math.sqrt(1 - (n -= 2) * n) + 1);
    }
  }),
  Elastic: Object.freeze({
    In: function(n) {
      return n === 0 ? 0 : n === 1 ? 1 : -Math.pow(2, 10 * (n - 1)) * Math.sin((n - 1.1) * 5 * Math.PI);
    },
    Out: function(n) {
      return n === 0 ? 0 : n === 1 ? 1 : Math.pow(2, -10 * n) * Math.sin((n - 0.1) * 5 * Math.PI) + 1;
    },
    InOut: function(n) {
      return n === 0 ? 0 : n === 1 ? 1 : (n *= 2, n < 1 ? -0.5 * Math.pow(2, 10 * (n - 1)) * Math.sin((n - 1.1) * 5 * Math.PI) : 0.5 * Math.pow(2, -10 * (n - 1)) * Math.sin((n - 1.1) * 5 * Math.PI) + 1);
    }
  }),
  Back: Object.freeze({
    In: function(n) {
      var t = 1.70158;
      return n === 1 ? 1 : n * n * ((t + 1) * n - t);
    },
    Out: function(n) {
      var t = 1.70158;
      return n === 0 ? 0 : --n * n * ((t + 1) * n + t) + 1;
    },
    InOut: function(n) {
      var t = 2.5949095;
      return (n *= 2) < 1 ? 0.5 * (n * n * ((t + 1) * n - t)) : 0.5 * ((n -= 2) * n * ((t + 1) * n + t) + 2);
    }
  }),
  Bounce: Object.freeze({
    In: function(n) {
      return 1 - ji.Bounce.Out(1 - n);
    },
    Out: function(n) {
      return n < 1 / 2.75 ? 7.5625 * n * n : n < 2 / 2.75 ? 7.5625 * (n -= 1.5 / 2.75) * n + 0.75 : n < 2.5 / 2.75 ? 7.5625 * (n -= 2.25 / 2.75) * n + 0.9375 : 7.5625 * (n -= 2.625 / 2.75) * n + 0.984375;
    },
    InOut: function(n) {
      return n < 0.5 ? ji.Bounce.In(n * 2) * 0.5 : ji.Bounce.Out(n * 2 - 1) * 0.5 + 0.5;
    }
  }),
  generatePow: function(n) {
    return n === void 0 && (n = 4), n = n < Number.EPSILON ? Number.EPSILON : n, n = n > 1e4 ? 1e4 : n, {
      In: function(t) {
        return Math.pow(t, n);
      },
      Out: function(t) {
        return 1 - Math.pow(1 - t, n);
      },
      InOut: function(t) {
        return t < 0.5 ? Math.pow(t * 2, n) / 2 : (1 - Math.pow(2 - t * 2, n)) / 2 + 0.5;
      }
    };
  }
}), rr = function() {
  return performance.now();
}, ug = (
  /** @class */
  function() {
    function n() {
      this._tweens = {}, this._tweensAddedDuringUpdate = {};
    }
    return n.prototype.getAll = function() {
      var t = this;
      return Object.keys(this._tweens).map(function(e) {
        return t._tweens[e];
      });
    }, n.prototype.removeAll = function() {
      this._tweens = {};
    }, n.prototype.add = function(t) {
      this._tweens[t.getId()] = t, this._tweensAddedDuringUpdate[t.getId()] = t;
    }, n.prototype.remove = function(t) {
      delete this._tweens[t.getId()], delete this._tweensAddedDuringUpdate[t.getId()];
    }, n.prototype.update = function(t, e) {
      t === void 0 && (t = rr()), e === void 0 && (e = !1);
      var i = Object.keys(this._tweens);
      if (i.length === 0)
        return !1;
      for (; i.length > 0; ) {
        this._tweensAddedDuringUpdate = {};
        for (var s = 0; s < i.length; s++) {
          var r = this._tweens[i[s]], o = !e;
          r && r.update(t, o) === !1 && !e && delete this._tweens[i[s]];
        }
        i = Object.keys(this._tweensAddedDuringUpdate);
      }
      return !0;
    }, n;
  }()
), ws = {
  Linear: function(n, t) {
    var e = n.length - 1, i = e * t, s = Math.floor(i), r = ws.Utils.Linear;
    return t < 0 ? r(n[0], n[1], i) : t > 1 ? r(n[e], n[e - 1], e - i) : r(n[s], n[s + 1 > e ? e : s + 1], i - s);
  },
  Bezier: function(n, t) {
    for (var e = 0, i = n.length - 1, s = Math.pow, r = ws.Utils.Bernstein, o = 0; o <= i; o++)
      e += s(1 - t, i - o) * s(t, o) * n[o] * r(i, o);
    return e;
  },
  CatmullRom: function(n, t) {
    var e = n.length - 1, i = e * t, s = Math.floor(i), r = ws.Utils.CatmullRom;
    return n[0] === n[e] ? (t < 0 && (s = Math.floor(i = e * (1 + t))), r(n[(s - 1 + e) % e], n[s], n[(s + 1) % e], n[(s + 2) % e], i - s)) : t < 0 ? n[0] - (r(n[0], n[0], n[1], n[1], -i) - n[0]) : t > 1 ? n[e] - (r(n[e], n[e], n[e - 1], n[e - 1], i - e) - n[e]) : r(n[s ? s - 1 : 0], n[s], n[e < s + 1 ? e : s + 1], n[e < s + 2 ? e : s + 2], i - s);
  },
  Utils: {
    Linear: function(n, t, e) {
      return (t - n) * e + n;
    },
    Bernstein: function(n, t) {
      var e = ws.Utils.Factorial;
      return e(n) / e(t) / e(n - t);
    },
    Factorial: function() {
      var n = [1];
      return function(t) {
        var e = 1;
        if (n[t])
          return n[t];
        for (var i = t; i > 1; i--)
          e *= i;
        return n[t] = e, e;
      };
    }(),
    CatmullRom: function(n, t, e, i, s) {
      var r = (e - n) * 0.5, o = (i - t) * 0.5, a = s * s, l = s * a;
      return (2 * t - 2 * e + r + o) * l + (-3 * t + 3 * e - 2 * r - o) * a + r * s + t;
    }
  }
}, oh = (
  /** @class */
  function() {
    function n() {
    }
    return n.nextId = function() {
      return n._nextId++;
    }, n._nextId = 0, n;
  }()
), yc = new ug(), sl = (
  /** @class */
  function() {
    function n(t, e) {
      e === void 0 && (e = yc), this._object = t, this._group = e, this._isPaused = !1, this._pauseStart = 0, this._valuesStart = {}, this._valuesEnd = {}, this._valuesStartRepeat = {}, this._duration = 1e3, this._isDynamic = !1, this._initialRepeat = 0, this._repeat = 0, this._yoyo = !1, this._isPlaying = !1, this._reversed = !1, this._delayTime = 0, this._startTime = 0, this._easingFunction = ji.Linear.None, this._interpolationFunction = ws.Linear, this._chainedTweens = [], this._onStartCallbackFired = !1, this._onEveryStartCallbackFired = !1, this._id = oh.nextId(), this._isChainStopped = !1, this._propertiesAreSetUp = !1, this._goToEnd = !1;
    }
    return n.prototype.getId = function() {
      return this._id;
    }, n.prototype.isPlaying = function() {
      return this._isPlaying;
    }, n.prototype.isPaused = function() {
      return this._isPaused;
    }, n.prototype.getDuration = function() {
      return this._duration;
    }, n.prototype.to = function(t, e) {
      if (e === void 0 && (e = 1e3), this._isPlaying)
        throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");
      return this._valuesEnd = t, this._propertiesAreSetUp = !1, this._duration = e < 0 ? 0 : e, this;
    }, n.prototype.duration = function(t) {
      return t === void 0 && (t = 1e3), this._duration = t < 0 ? 0 : t, this;
    }, n.prototype.dynamic = function(t) {
      return t === void 0 && (t = !1), this._isDynamic = t, this;
    }, n.prototype.start = function(t, e) {
      if (t === void 0 && (t = rr()), e === void 0 && (e = !1), this._isPlaying)
        return this;
      if (this._group && this._group.add(this), this._repeat = this._initialRepeat, this._reversed) {
        this._reversed = !1;
        for (var i in this._valuesStartRepeat)
          this._swapEndStartRepeatValues(i), this._valuesStart[i] = this._valuesStartRepeat[i];
      }
      if (this._isPlaying = !0, this._isPaused = !1, this._onStartCallbackFired = !1, this._onEveryStartCallbackFired = !1, this._isChainStopped = !1, this._startTime = t, this._startTime += this._delayTime, !this._propertiesAreSetUp || e) {
        if (this._propertiesAreSetUp = !0, !this._isDynamic) {
          var s = {};
          for (var r in this._valuesEnd)
            s[r] = this._valuesEnd[r];
          this._valuesEnd = s;
        }
        this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat, e);
      }
      return this;
    }, n.prototype.startFromCurrentValues = function(t) {
      return this.start(t, !0);
    }, n.prototype._setupProperties = function(t, e, i, s, r) {
      for (var o in i) {
        var a = t[o], l = Array.isArray(a), c = l ? "array" : typeof a, h = !l && Array.isArray(i[o]);
        if (!(c === "undefined" || c === "function")) {
          if (h) {
            var d = i[o];
            if (d.length === 0)
              continue;
            for (var f = [a], g = 0, p = d.length; g < p; g += 1) {
              var m = this._handleRelativeValue(a, d[g]);
              if (isNaN(m)) {
                h = !1, console.warn("Found invalid interpolation list. Skipping.");
                break;
              }
              f.push(m);
            }
            h && (i[o] = f);
          }
          if ((c === "object" || l) && a && !h) {
            e[o] = l ? [] : {};
            var v = a;
            for (var b in v)
              e[o][b] = v[b];
            s[o] = l ? [] : {};
            var d = i[o];
            if (!this._isDynamic) {
              var w = {};
              for (var b in d)
                w[b] = d[b];
              i[o] = d = w;
            }
            this._setupProperties(v, e[o], d, s[o], r);
          } else
            (typeof e[o] == "undefined" || r) && (e[o] = a), l || (e[o] *= 1), h ? s[o] = i[o].slice().reverse() : s[o] = e[o] || 0;
        }
      }
    }, n.prototype.stop = function() {
      return this._isChainStopped || (this._isChainStopped = !0, this.stopChainedTweens()), this._isPlaying ? (this._group && this._group.remove(this), this._isPlaying = !1, this._isPaused = !1, this._onStopCallback && this._onStopCallback(this._object), this) : this;
    }, n.prototype.end = function() {
      return this._goToEnd = !0, this.update(1 / 0), this;
    }, n.prototype.pause = function(t) {
      return t === void 0 && (t = rr()), this._isPaused || !this._isPlaying ? this : (this._isPaused = !0, this._pauseStart = t, this._group && this._group.remove(this), this);
    }, n.prototype.resume = function(t) {
      return t === void 0 && (t = rr()), !this._isPaused || !this._isPlaying ? this : (this._isPaused = !1, this._startTime += t - this._pauseStart, this._pauseStart = 0, this._group && this._group.add(this), this);
    }, n.prototype.stopChainedTweens = function() {
      for (var t = 0, e = this._chainedTweens.length; t < e; t++)
        this._chainedTweens[t].stop();
      return this;
    }, n.prototype.group = function(t) {
      return t === void 0 && (t = yc), this._group = t, this;
    }, n.prototype.delay = function(t) {
      return t === void 0 && (t = 0), this._delayTime = t, this;
    }, n.prototype.repeat = function(t) {
      return t === void 0 && (t = 0), this._initialRepeat = t, this._repeat = t, this;
    }, n.prototype.repeatDelay = function(t) {
      return this._repeatDelayTime = t, this;
    }, n.prototype.yoyo = function(t) {
      return t === void 0 && (t = !1), this._yoyo = t, this;
    }, n.prototype.easing = function(t) {
      return t === void 0 && (t = ji.Linear.None), this._easingFunction = t, this;
    }, n.prototype.interpolation = function(t) {
      return t === void 0 && (t = ws.Linear), this._interpolationFunction = t, this;
    }, n.prototype.chain = function() {
      for (var t = [], e = 0; e < arguments.length; e++)
        t[e] = arguments[e];
      return this._chainedTweens = t, this;
    }, n.prototype.onStart = function(t) {
      return this._onStartCallback = t, this;
    }, n.prototype.onEveryStart = function(t) {
      return this._onEveryStartCallback = t, this;
    }, n.prototype.onUpdate = function(t) {
      return this._onUpdateCallback = t, this;
    }, n.prototype.onRepeat = function(t) {
      return this._onRepeatCallback = t, this;
    }, n.prototype.onComplete = function(t) {
      return this._onCompleteCallback = t, this;
    }, n.prototype.onStop = function(t) {
      return this._onStopCallback = t, this;
    }, n.prototype.update = function(t, e) {
      var i = this, s;
      if (t === void 0 && (t = rr()), e === void 0 && (e = !0), this._isPaused)
        return !0;
      var r, o = this._startTime + this._duration;
      if (!this._goToEnd && !this._isPlaying) {
        if (t > o)
          return !1;
        e && this.start(t, !0);
      }
      if (this._goToEnd = !1, t < this._startTime)
        return !0;
      this._onStartCallbackFired === !1 && (this._onStartCallback && this._onStartCallback(this._object), this._onStartCallbackFired = !0), this._onEveryStartCallbackFired === !1 && (this._onEveryStartCallback && this._onEveryStartCallback(this._object), this._onEveryStartCallbackFired = !0);
      var a = t - this._startTime, l = this._duration + ((s = this._repeatDelayTime) !== null && s !== void 0 ? s : this._delayTime), c = this._duration + this._repeat * l, h = function() {
        if (i._duration === 0 || a > c)
          return 1;
        var v = Math.trunc(a / l), b = a - v * l, w = Math.min(b / i._duration, 1);
        return w === 0 && a === i._duration ? 1 : w;
      }, d = h(), f = this._easingFunction(d);
      if (this._updateProperties(this._object, this._valuesStart, this._valuesEnd, f), this._onUpdateCallback && this._onUpdateCallback(this._object, d), this._duration === 0 || a >= this._duration)
        if (this._repeat > 0) {
          var g = Math.min(Math.trunc((a - this._duration) / l) + 1, this._repeat);
          isFinite(this._repeat) && (this._repeat -= g);
          for (r in this._valuesStartRepeat)
            !this._yoyo && typeof this._valuesEnd[r] == "string" && (this._valuesStartRepeat[r] = // eslint-disable-next-line
            // @ts-ignore FIXME?
            this._valuesStartRepeat[r] + parseFloat(this._valuesEnd[r])), this._yoyo && this._swapEndStartRepeatValues(r), this._valuesStart[r] = this._valuesStartRepeat[r];
          return this._yoyo && (this._reversed = !this._reversed), this._startTime += l * g, this._onRepeatCallback && this._onRepeatCallback(this._object), this._onEveryStartCallbackFired = !1, !0;
        } else {
          this._onCompleteCallback && this._onCompleteCallback(this._object);
          for (var p = 0, m = this._chainedTweens.length; p < m; p++)
            this._chainedTweens[p].start(this._startTime + this._duration, !1);
          return this._isPlaying = !1, !1;
        }
      return !0;
    }, n.prototype._updateProperties = function(t, e, i, s) {
      for (var r in i)
        if (e[r] !== void 0) {
          var o = e[r] || 0, a = i[r], l = Array.isArray(t[r]), c = Array.isArray(a), h = !l && c;
          h ? t[r] = this._interpolationFunction(a, s) : typeof a == "object" && a ? this._updateProperties(t[r], o, a, s) : (a = this._handleRelativeValue(o, a), typeof a == "number" && (t[r] = o + (a - o) * s));
        }
    }, n.prototype._handleRelativeValue = function(t, e) {
      return typeof e != "string" ? e : e.charAt(0) === "+" || e.charAt(0) === "-" ? t + parseFloat(e) : parseFloat(e);
    }, n.prototype._swapEndStartRepeatValues = function(t) {
      var e = this._valuesStartRepeat[t], i = this._valuesEnd[t];
      typeof i == "string" ? this._valuesStartRepeat[t] = this._valuesStartRepeat[t] + parseFloat(i) : this._valuesStartRepeat[t] = this._valuesEnd[t], this._valuesEnd[t] = e;
    }, n;
  }()
), lA = "23.1.3", cA = oh.nextId, Ji = yc, hA = Ji.getAll.bind(Ji), dA = Ji.removeAll.bind(Ji), uA = Ji.add.bind(Ji), fg = Ji.remove.bind(Ji), fA = Ji.update.bind(Ji), zd = {
  Easing: ji,
  Group: ug,
  Interpolation: ws,
  now: rr,
  Sequence: oh,
  nextId: cA,
  Tween: sl,
  VERSION: lA,
  getAll: hA,
  removeAll: dA,
  add: uA,
  remove: fg,
  update: fA
};
function pA(n, t, e, i = ji.Linear.None) {
  const s = new sl(n).to(t, e).easing(i).start();
  function r(o) {
    s.update(o) && requestAnimationFrame(r);
  }
  return requestAnimationFrame(r), s;
}
var _n = /* @__PURE__ */ ((n) => (n.Drawline = "Drawline", n.Undo = "Undo", n.Exit = "Exit", n))(_n || {});
const ho = Symbol("$$PAINT_BRUSH_EVENT$$");
function oa(n) {
  return n[ho] || (n[ho] = {}), n[ho];
}
function mA(n) {
  n[ho] || delete n[ho];
}
let gA = class {
  /**
   * 判断是否注册了事件
   * @param name  事件类型
   */
  hasListener(t) {
    const e = oa(this);
    return e && e[t] && e[t].length > 0;
  }
  /**
   * 注册事件
   * @param  name    事件类型
   * @param  callback 事件回调函数
   * @param  once     是否只执行一次
   * @returns 解除事件
   * @template K 预设的监听事件名称
   * @template C 回调函数函数上下文
   */
  on(t, e, i) {
    const s = oa(this);
    return s[t] || (s[t] = []), s[t].push([e, i || !1]), () => this.off(t, e);
  }
  /**
   * 注册事件(是否只执行一次)
   * @param  name     事件类型
   * @param  callback 事件回调函数
   * @returns 解除事件
   * @template K 预设的监听事件名称
   * @template C 回调函数函数上下文
   */
  once(t, e) {
    return this.on(t, e, !0);
  }
  /**
   * 解除事件
   *
   * 如果 name 不传的话解除对应所有事件
   * 如果 name, callback 不传的话解除所有name的所有事件
   * @param  name     事件类型
   * @param  callback 事件回调函数
   * @template K 预设的监听事件名称
   */
  off(t, e) {
    if (t === void 0) {
      mA(this);
      return;
    }
    const i = oa(this);
    if (i[t] || (i[t] = []), e === void 0) {
      i[t].length = 0;
      return;
    }
    let s = 0;
    for (; s < i[t].length && i[t][s][0] !== e; s++)
      ;
    s < i[t].length && i[t].splice(s, 1);
  }
  /**
   * 触发事件
   * @param  name  事件类型
   * @param  data  触发事件的数据
   * @returns canceled 是否被触发取消
   * @template K 预设的监听事件名称
   */
  emit(t, ...e) {
    let i = !1;
    const r = oa(this)[t] || [];
    for (let o of r.slice()) {
      const [a, l = !1] = o, c = a(...e);
      l && this.off(t, a), c === !1 && (i = !0);
    }
    return i;
  }
};
function Bn() {
  return ((1 + Math.random()) * 65536 | 0).toString(16).substring(1);
}
function Dt() {
  return (Bn() + Bn() + "-" + Bn() + "-4" + Bn().substr(0, 3) + "-" + Bn() + "-" + Bn() + Bn() + Bn()).toLowerCase();
}
const vA = `
<style type="text/css">

#_gl_paintBrush {
position: fixed;
top: 0;
bottom: 0;
left: 0;
right: 0;
transform: translateZ(0);
z-index: 1997;
pointer-events: none;
opacity: 0;
transition: all 500ms;
}

#_gl_paintBrush.brushing {
  opacity: 1;
}

#_gl_paintBrush ._paintBrush-canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

#_gl_paintBrush ._paintBrush-canvas--sync {
  pointer-events: none;
  z-index: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

#_gl_paintBrush ._paintBrush-canvas {
  pointer-events: none;
  z-index: 1;
}

#_gl_paintBrush.brushing ._paintBrush-canvas {
  pointer-events: auto;
}

#_gl_paintBrush ._paintBrush-ctrl {
  width: 140px;
  height: 52px;
  position: absolute;
  bottom: 28px;
  right: 50%;
  transform: translateX(50%);
  font-size: 10px;
  color: white;
  z-index: 2;
}

#_gl_paintBrush.brushing ._paintBrush-ctrl {
  pointer-events: auto;
}

#_gl_paintBrush ._paintBrush-ctrl ._paintBrush-ctrlinner {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  height: 100%;
  border-radius: 26px;
  padding: 8px 16px;
  box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.2);
  background-image: linear-gradient(180deg, hsl(0deg 0% 0% / 57%), hsl(0deg 0% 0% / 70%) 117%);
}

._paintBrush-ctrlitem {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 38px;
  height: 38px;
  cursor: pointer;
}

._paintBrush-ctrlitem--undo >.brush-icon{
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjUwJSIgeTE9IjQ1LjY3NTI0OCUiIHgyPSItMTYuOTYxMDIzJSIgeTI9Ijg0LjIzODQxOTglIiBpZD0ibGluZWFyR3JhZGllbnQtMSI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iMCUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgc3RvcC1vcGFjaXR5PSIwLjMwMzY3Njc5MiIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNDAuMDAwMDAwLCAtNzQwLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDAuMDAwMDAwLCA3NDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjRDhEOEQ4IiBvcGFjaXR5PSIwIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuMDAwMDAwLCAyLjk5MDY1OSkiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCwzLjc1ODc1NzA5IEw5Ljg0Mzc1LDMuNzU4NzU3MDkgQzEyLjY5MTQ2ODIsMy43NTg3NTcwOSAxNSw2LjA2NzI4ODg1IDE1LDguOTE1MDA3MDkgQzE1LDExLjc2MjcyNTMgMTIuNjkxNDY4MiwxNC4wNzEyNTcxIDkuODQzNzUsMTQuMDcxMjU3MSBMMSwxNC4wNzEyNTcxIiBzdHJva2U9InVybCgjbGluZWFyR3JhZGllbnQtMSkiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBwb2ludHM9IjMuNzkwMjI3MDcgNy41Mzk2NjA2NCAwIDMuNzU4NzU3MDkgMy43OTAyMjcwNyAwIj48L3BvbHlsaW5lPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);
    background-size: 100%;
    width: 22px;
    height: 22px;
}

._paintBrush-ctrlitem--close >.brush-icon {
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjUwLjAyMDY5MyUiIHkxPSItMTMuNzMzMzc1MSUiIHgyPSI1MCUiIHkyPSIxMTQuMTEwOTk0JSIgaWQ9ImxpbmVhckdyYWRpZW50LTEiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZGRkZGIiBvZmZzZXQ9IjAlIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIHN0b3Atb3BhY2l0eT0iMC42MDEwNDM0ODgiIG9mZnNldD0iNDkuMzA4NDg4MiUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjUwJSIgeTE9IjAlIiB4Mj0iNTAlIiB5Mj0iMTAwJSIgaWQ9ImxpbmVhckdyYWRpZW50LTIiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZGRkZGIiBvZmZzZXQ9IjAlIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iNTUuOTY4MTUzNSUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnPgogICAgICAgICAgICA8cmVjdCBmaWxsPSIjRDhEOEQ4IiBvcGFjaXR5PSIwIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiPjwvcmVjdD4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC4wMDAwMDAsIDUuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgIDxnPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LC0yLjk4ODE2NTY4IEM3LjUxMjgzNTg0LC0yLjk4ODE2NTY4IDcuOTM1NTA3MTYsLTIuNjAyMTI1NDkgNy45OTMyNzIyNywtMi4xMDQ3ODY4MSBMOCwtMS45ODgxNjU2OCBMOCwxMy45OTgxMTQ2IEM4LDE0LjU1MDM5OTMgNy41NTIyODQ3NSwxNC45OTgxMTQ2IDcsMTQuOTk4MTE0NiBDNi40ODcxNjQxNiwxNC45OTgxMTQ2IDYuMDY0NDkyODQsMTQuNjEyMDc0NCA2LjAwNjcyNzczLDE0LjExNDczNTcgTDYsMTMuOTk4MTE0NiBMNiwtMS45ODgxNjU2OCBDNiwtMi41NDA0NTA0MyA2LjQ0NzcxNTI1LC0yLjk4ODE2NTY4IDcsLTIuOTg4MTY1NjggWiIgZmlsbD0idXJsKCNsaW5lYXJHcmFkaWVudC0xKSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNy4wMDAwMDAsIDYuMDA0OTc0KSByb3RhdGUoLTQ1LjAwMDAwMCkgdHJhbnNsYXRlKC03LjAwMDAwMCwgLTYuMDA0OTc0KSAiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNywtMi45ODgxNjU2OCBDNy41MTI4MzU4NCwtMi45ODgxNjU2OCA3LjkzNTUwNzE2LC0yLjYwMjEyNTQ5IDcuOTkzMjcyMjcsLTIuMTA0Nzg2ODEgTDgsLTEuOTg4MTY1NjggTDgsMTMuOTk4MTE0NiBDOCwxNC41NTAzOTkzIDcuNTUyMjg0NzUsMTQuOTk4MTE0NiA3LDE0Ljk5ODExNDYgQzYuNDg3MTY0MTYsMTQuOTk4MTE0NiA2LjA2NDQ5Mjg0LDE0LjYxMjA3NDQgNi4wMDY3Mjc3MywxNC4xMTQ3MzU3IEw2LDEzLjk5ODExNDYgTDYsLTEuOTg4MTY1NjggQzYsLTIuNTQwNDUwNDMgNi40NDc3MTUyNSwtMi45ODgxNjU2OCA3LC0yLjk4ODE2NTY4IFoiIGZpbGw9InVybCgjbGluZWFyR3JhZGllbnQtMikiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDcuMDAwMDAwLCA2LjAwNDk3NCkgcm90YXRlKC0xMzUuMDAwMDAwKSB0cmFuc2xhdGUoLTcuMDAwMDAwLCAtNi4wMDQ5NzQpICI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);
    background-size: 100%;
    width: 22px;
    height: 22px;
}

</style>
`;
let AA = class extends gA {
  constructor(e) {
    super();
    u(this, "configs");
    u(this, "clientWidth");
    u(this, "clientHeight");
    u(this, "ready", !1);
    u(this, "uuid", Dt());
    u(this, "tween");
    u(this, "tweening", !1);
    u(this, "container");
    u(this, "canvas");
    u(this, "data", {});
    u(this, "tempLine", {});
    this.configs = e, this.clientWidth = document.body.clientWidth, this.clientHeight = document.body.clientHeight, this.container = this.ifInsertToDOM(), this.canvas = {}, this.initCtrl();
  }
  get color() {
    return this.configs.currentColor;
  }
  get state() {
    return this.data;
  }
  get dpr() {
    return this.configs.DPR || 1;
  }
  ifInsertToDOM() {
    if (this.container)
      return this.container;
    if (this.configs.container)
      this.configs.container.id = "_gl_paintBrush", this.container = this.configs.container;
    else if (document.getElementById("_gl_paintBrush"))
      this.container = document.getElementById("_gl_paintBrush");
    else {
      const e = document.createElement("div");
      e.id = "_gl_paintBrush", document.body.appendChild(e), this.container = e;
    }
    return this.container.innerHTML = vA, this.container;
  }
  /**
   *
   * @param className 初始化画板
   * @returns
   */
  initCanvas(e) {
    const i = document.createElement("canvas");
    i.className = e, i.width = this.clientWidth, i.height = this.clientHeight;
    const s = i.getContext("2d");
    if (s)
      return s.lineWidth = 5 * this.dpr, s.lineCap = "round", s.lineJoin = "round", this.container.appendChild(i), i;
  }
  /**
   * 初始化操作面板
   * @returns
   */
  initCtrl() {
    const e = document.createElement("div");
    e.className = "_paintBrush-ctrl";
    const i = document.createElement("div");
    i.className = "_paintBrush-ctrlinner";
    const s = document.createElement("a");
    s.className = "_paintBrush-ctrlitem _paintBrush-ctrlitem--undo", s.addEventListener("click", (a) => {
      var f;
      if (a.stopPropagation(), this.configs.onClickUndo && this.configs.onClickUndo(), !this.canvas[this.uuid] || !this.data[this.uuid] || this.data[this.uuid].length === 0)
        return;
      const l = this.data[this.uuid].pop();
      l && this.emitStateChange({
        type: _n.Undo,
        color: this.color,
        ready: this.ready,
        state: l,
        uuid: this.uuid
      });
      const c = (f = this.canvas[this.uuid]) == null ? void 0 : f.getContext("2d");
      if (!this.canvas[this.uuid])
        return;
      const { width: h, height: d } = this.canvas[this.uuid];
      c && c.clearRect(0, 0, h, d), this.data[this.uuid].forEach((g) => this.handleDrawLine(this.uuid, g, { withUndo: !0 }));
    });
    const r = document.createElement("a");
    return r.className = "_paintBrush-ctrlitem _paintBrush-ctrlitem--close", r.addEventListener("click", (a) => {
      a.stopPropagation(), this.closeBrush(), this.configs.onClickClose && this.configs.onClickClose();
    }), [s, r].forEach((a) => {
      const l = document.createElement("i");
      l.className = "brush-icon";
      const c = document.createElement("span");
      c.className = "brush-txt", c.innerText = a.className.endsWith("undo") ? this.configs.onUndoText : this.configs.onExitText, a.appendChild(l), a.appendChild(c);
    }), i.appendChild(s), i.appendChild(r), e.appendChild(i), this.container.appendChild(e), e;
  }
  openBrush() {
    if (this.ready)
      return;
    this.canvas[this.uuid] || (this.canvas[this.uuid] = this.initCanvas("_paintBrush-canvas")), this.container.className = "brushing";
    const e = this.canvas[this.uuid];
    e.getContext("2d").clearRect(0, 0, e.width, e.height), this.openBrushHandle(), this.ready = !0, this.emit("readyChange", !0);
  }
  closeBrush() {
    this.ready && (this.container.className = "", this.data = {}, this.tempLine = {}, Object.keys(this.canvas).forEach((e) => {
      this.canvas[e].ontouchstart = () => !1, this.canvas[e].ontouchmove = () => !1, this.canvas[e].ontouchend = () => !1, this.canvas[e].ontouchcancel = () => !1;
      const i = this.canvas[e].getContext("2d");
      i && i.clearRect(0, 0, this.canvas[e].width, this.canvas[e].height);
    }), this.ready = !1, this.emit("readyChange", !1), this.emitStateChange({
      type: _n.Exit,
      color: this.color,
      ready: !1,
      uuid: this.uuid
    }));
  }
  updateCurrentColor(e) {
    const i = this.canvas[this.uuid];
    if (!i)
      return;
    const s = i.getContext("2d");
    s && (this.configs.currentColor = e, s.strokeStyle = e);
  }
  openBrushHandle() {
    const e = this.canvas[this.uuid];
    if (!e)
      return;
    const i = e.getContext("2d");
    if (!i)
      return;
    const s = this.color || "#6D92FF";
    i.strokeStyle = s;
    let r = null, o = [], a, l = [], c = 0;
    const h = (d, f, g) => {
      const p = this.color || "#ff0000";
      i.strokeStyle = p, i.beginPath(), i.moveTo(d.x, d.y), i.quadraticCurveTo(f.x, f.y, g.x, g.y), i.stroke();
    };
    e.onmousedown = (d) => {
      d.preventDefault(), c = Date.now();
      const f = d.clientX, g = d.clientY;
      o = [], o.push({ x: f, y: g }), r = { x: f, y: g }, a = sa({ x: f, y: g }, this.clientWidth, this.clientHeight), l = [];
    }, e.onmousemove = (d) => {
      if (d.preventDefault(), !r)
        return;
      const f = Number(d.clientX), g = Number(d.clientY);
      if (Math.abs(f - r.x) < 5 && Math.abs(g - r.y) < 5 || (o.push({ x: f, y: g }), l.push(sa({ x: f, y: g }, this.clientWidth, this.clientHeight)), o.length < 3))
        return;
      const { control: p, end: m } = ra(o);
      !p || !m || (h(r, p, m), r = m);
    }, e.onmouseup = (d) => {
      if (d.preventDefault(), r = null, o.length < 3)
        return;
      this.data[this.uuid] || (this.data[this.uuid] = []);
      const f = Date.now() - c, g = {
        move: Object.assign({}, a),
        uuid: this.uuid,
        line: [...l],
        color: this.color,
        duration: f < 1280 ? f : f < 2e3 ? 1280 : 0
        // 单次笔迹时长超过2000ms不加动画
      };
      this.data[this.uuid].push(g), Ca(() => {
        this.emitStateChange({
          type: _n.Drawline,
          color: this.color,
          ready: this.ready,
          state: g,
          uuid: this.uuid
        });
      });
    }, e.ontouchstart = (d) => {
      d.preventDefault(), c = Date.now();
      const f = d.touches[0].clientX, g = d.touches[0].clientY;
      o = [], o.push({ x: f, y: g }), r = { x: f, y: g }, a = sa({ x: f, y: g }, this.clientWidth, this.clientHeight), l = [];
    }, e.ontouchmove = (d) => {
      if (d.preventDefault(), !r)
        return;
      const f = Number(d.touches[0].clientX), g = Number(d.touches[0].clientY);
      if (Math.abs(f - r.x) < 5 && Math.abs(g - r.y) < 5 || (o.push({ x: f, y: g }), l.push(sa({ x: f, y: g }, this.clientWidth, this.clientHeight)), o.length < 3))
        return;
      const { control: p, end: m } = ra(o);
      !p || !m || (h(r, p, m), r = m);
    }, e.ontouchend = e.ontouchcancel = (d) => {
      if (d.preventDefault(), r = null, o.length < 3)
        return;
      this.data[this.uuid] || (this.data[this.uuid] = []);
      const f = Date.now() - c, g = {
        move: Object.assign({}, a),
        line: [...l],
        uuid: this.uuid,
        color: this.color,
        duration: f < 1280 ? f : f < 2e3 ? 1280 : 0
        // 单次笔迹时长超过2000ms不加动画
      };
      this.data[this.uuid].push(g), Ca(() => {
        this.emitStateChange({
          type: _n.Drawline,
          color: this.color,
          ready: this.ready,
          state: g,
          uuid: this.uuid
        });
      });
    };
  }
  emitStateChange(e, i = !0) {
    if (e.type !== _n.Drawline) {
      this.emit("stateChange", e, i);
      return;
    }
    const s = Date.now(), r = e.state;
    if (!r || !r.line)
      return;
    const o = Math.ceil(r.line.length / 100);
    for (let a = 0; a < o; a++) {
      const l = {
        uuid: this.uuid,
        color: this.color,
        ready: this.ready,
        type: e.type,
        state: {
          uuid: this.uuid,
          move: r.move,
          duration: r.duration,
          color: this.color,
          line: r.line.slice(a * 100, (a + 1) * 100)
        },
        timestamp: s,
        end: a === o - 1
      };
      oA(a, 20, () => {
        this.emit("stateChange", l, i);
      });
    }
  }
  action(e) {
    const { ready: i, type: s, uuid: r } = e;
    if (!i && this.ready) {
      this.closeBrush();
      return;
    }
    if (i && !this.ready) {
      this.openBrush();
      return;
    }
    if (this.ready)
      switch (s) {
        case _n.Drawline:
          const { state: o, timestamp: a, end: l } = e;
          if (!a || !o)
            return;
          this.tempLine[a] = [].concat(this.tempLine[a] || [], o.line), l && (Object.assign(o, { line: this.tempLine[a] }), this.handleDrawLine(r, o, {}, () => delete this.tempLine[a]));
          break;
        case _n.Undo:
          this.handleUndo(r);
          break;
      }
  }
  handleDrawLine(e, i, { withUndo: s = !1 }, r = dg) {
    !i || Object.prototype.toString.call(i) != "[object Object]" || Object.keys(i).length === 0 || rA(() => new Promise((o) => {
      if (s || (this.canvas[e] || (this.canvas[e] = this.initCanvas("_paintBrush-canvas--sync")), this.data[e] || (this.data[e] = []), this.data[e].push(i)), !this.canvas[e])
        return;
      const a = this.canvas[e].getContext("2d");
      if (!a)
        return;
      const { line: l = [], color: c = "black", duration: h = 0, uuid: d } = i, f = jl(i.move || {}, this.clientWidth, this.clientHeight);
      let g = [f];
      if (a.strokeStyle = c, a.beginPath(), a.moveTo(f.x, f.y), h && !s) {
        let p = [];
        const m = this;
        m.tween = pA({ step: 0 }, { step: l.length - 1 }, h).onUpdate(({ step: v }) => {
          var w;
          if (m.tweening = !0, !m.ready)
            return a.clearRect(0, 0, m.canvas[d].width, m.canvas[d].height), (w = m.tween) == null ? void 0 : w.stop();
          const b = Math.floor(v);
          if (!p.find((x) => x === b)) {
            if (p.push(b), g.push(jl(l[b], m.clientWidth, m.clientHeight)), g.length < 3)
              return;
            const { control: x, end: k } = ra(g);
            if (!x || !k)
              return;
            a.quadraticCurveTo(x.x, x.y, k.x, k.y), a.stroke();
          }
        }).onComplete((v) => {
          m.tween = void 0, m.tweening = !1, p = [], g = [], r && r(), o();
        });
      } else {
        for (let p = 0; p < l.length; p++) {
          if (g.push(jl(l[p], this.clientWidth, this.clientHeight)), g.length < 3)
            continue;
          const { control: m, end: v } = ra(g);
          !m || !v || a.quadraticCurveTo(m.x, m.y, v.x, v.y);
        }
        a.stroke(), g = [], r && r(), o();
      }
    }));
  }
  handleUndo(e) {
    if (!this.canvas[e] || !this.data[e] || this.data[e].length === 0)
      return;
    this.data[e].pop();
    const i = () => {
      var r;
      const s = (r = this.canvas[e]) == null ? void 0 : r.getContext("2d");
      s && s.clearRect(0, 0, this.canvas[e].width, this.canvas[e].height), this.data[e].forEach((o) => this.handleDrawLine(e, o, { withUndo: !0 }));
    };
    if (this.tween && this.tweening) {
      this.tween.stop(), Ca(i, 60);
      return;
    }
    i();
  }
  destroyBrush() {
    this.closeBrush(), this.ready = !1, this.emit("readyChange", !0);
  }
};
class Ex {
  constructor(t = {}) {
    u(this, "controller");
    const e = Object.assign({
      currentColor: "#f44336",
      onUndoText: "回退",
      onExitText: "关闭"
    }, t);
    this.controller = new AA(e);
  }
  on(t, e) {
    this.controller.on(t, e);
  }
  off(t, e) {
    this.controller.off(t, e);
  }
  once(t, e) {
    this.controller.once(t, e);
  }
  /**
   * 显示画笔。
   */
  show() {
    this.controller.openBrush();
  }
  action(t) {
    this.controller.action(t);
  }
  /**
   * 获取画笔状态。
   */
  get state() {
    return this.controller.state;
  }
  get configs() {
    return this.controller.configs;
  }
  /**
   * 销毁。
   *
   * @deprecated
   *
   * @description 画笔应该维护一个 **全局单例**，重复利用。
   */
  dispose() {
    return this.controller.destroyBrush();
  }
  setCurrentColor(t) {
    this.controller.updateCurrentColor(t);
  }
}
function bA(n) {
  return typeof Symbol == "undefined" ? `$Symbol<${n}>$` : Symbol(n);
}
const uo = bA("$$EVENT$$");
function aa(n) {
  return n[uo] || (n[uo] = {}), n[uo];
}
function yA(n) {
  n[uo] && delete n[uo];
}
class Pt {
  /**
   * 判断是否注册了事件
   * @param name - 事件类型
   */
  hasListener(t) {
    const e = aa(this);
    return !!(e != null && e[t] && e[t].length > 0);
  }
  /**
   * 注册事件
   * @param name - 事件类型
   * @param callback - 事件回调函数
   * @param once - 是否只执行一次
   * @returns 解除事件
   * @template K - 预设的监听事件名称
   * @template C - 回调函数函数上下文
   */
  on(t, e, i) {
    const s = aa(this);
    return s[t] || (s[t] = []), s[t].push([e, i || !1]), () => this.off(t, e);
  }
  /**
   * 注册事件(是否只执行一次)
   * @param name - 事件类型
   * @param callback - 事件回调函数
   * @returns 解除事件
   * @template K - 预设的监听事件名称
   * @template C - 回调函数函数上下文
   */
  once(t, e) {
    return this.on(t, e, !0);
  }
  /**
   * 解除事件
   *
   * 如果 name 不传的话解除对应所有事件
   * 如果 name, callback 不传的话解除所有name的所有事件
   * @param name - 事件类型
   * @param callback - 事件回调函数
   * @template K - 预设的监听事件名称
   */
  off(t, e) {
    if (t === void 0) {
      yA(this);
      return;
    }
    const i = aa(this);
    if (i[t] || (i[t] = []), e === void 0) {
      i[t].length = 0;
      return;
    }
    let s = 0;
    for (; s < i[t].length && i[t][s][0] !== e; s++)
      ;
    s < i[t].length && i[t].splice(s, 1);
  }
  /**
   * 触发事件
   * @param name - 事件类型
   * @param data - 触发事件的数据
   * @returns canceled 是否被触发取消
   * @template K - 预设的监听事件名称
   */
  emit(t, ...e) {
    let i = !1;
    const r = aa(this)[t] || [];
    for (let o of r.slice()) {
      const [a, l = !1] = o, c = a(...e);
      l && this.off(t, a), c === !1 && (i = !0);
    }
    return i;
  }
}
class wc {
  constructor(t = 0, e = 0) {
    u(this, "min");
    u(this, "max");
    u(this, "isInterval", !0);
    this.min = t, this.max = e;
  }
  fromArray(t) {
    return this.min = t[0], this.max = t[1], this;
  }
  /** 两个区间是否重叠 */
  isOverlap(t) {
    return Math.min(this.max, t.max) < Math.max(this.min, t.min);
  }
  /** 是否包含区间 */
  contains(t) {
    return this.min < t.min && this.max > t.max;
  }
}
let wA = class {
  constructor(t, e) {
    u(this, "min");
    u(this, "max");
    u(this, "xInterval");
    u(this, "yInterval");
    u(this, "isRectangle", !0);
    this.min = t, this.max = e, this.xInterval = new wc(this.min.x, this.max.x), this.yInterval = new wc(this.min.y, this.max.y);
  }
  /** 是否与矩形是否重叠 */
  isOverlapWithRectangle(t) {
    return !this.xInterval.isOverlap(t.xInterval) && !this.yInterval.isOverlap(t.yInterval);
  }
  /** 是否包含目标矩形 */
  containsRect(t) {
    return this.xInterval.contains(t.xInterval) && this.yInterval.contains(t.yInterval);
  }
};
function PA(n) {
  n.sort(function(i, s) {
    return i.x != s.x ? i.x - s.x : i.y - s.y;
  });
  const t = n.length, e = [];
  for (let i = 0; i < 2 * t; i++) {
    const s = i < t ? i : 2 * t - 1 - i;
    for (; e.length >= 2 && CA(e[e.length - 2], e[e.length - 1], n[s]); )
      e.pop();
    e.push(n[s]);
  }
  return e.pop(), e;
}
function CA(n, t, e) {
  const i = (n.x - t.x) * (e.y - t.y) - (n.y - t.y) * (e.x - t.x), s = (n.x - t.x) * (e.x - t.x) + (n.y - t.y) * (e.y - t.y);
  return i < 0 || i == 0 && s <= 0;
}
function Od(n, t) {
  const e = n[0], i = n[1];
  let s = !1;
  for (let r = 0, o = t.length - 1; r < t.length; o = r++) {
    const a = t[r][0], l = t[r][1], c = t[o][0], h = t[o][1];
    l > i != h > i && e < (c - a) * (i - l) / (h - l) + a && (s = !s);
  }
  return s;
}
const IA = ({ x: n, y: t, z: e }) => new fe(n, t, e), Xn = (n) => new fe().fromArray(n), Qe = (n) => {
  if (n)
    return n instanceof fe ? n : Array.isArray(n) ? Xn(n) : IA(n);
};
function EA(n) {
  if (n)
    return Array.isArray(n) ? typeof n[0] == "number" ? Qe(n) : n.map(Qe) : Qe(n);
}
function Rl(n, t, e) {
  const { x: i, y: s, z: r } = t.clone().project(n);
  return r > 1 ? void 0 : {
    leftPx: (i + 1) / 2 * e.x,
    topPx: (-s + 1) / 2 * e.y
  };
}
function Ci(n) {
  var e;
  return ((e = n.models) == null ? void 0 : e.filter((i) => i.name === n.state.workCode)[0]) || n.model;
}
class pg extends Pt {
  constructor(e) {
    super();
    u(this, "five");
    this.five = e;
  }
}
const br = (n, t) => {
  if (!t)
    return n;
  const e = new P.Vector3(), i = new P.Quaternion(), s = new P.Vector3();
  return t.decompose(e, i, s), n.clone().multiply(s).applyQuaternion(i).add(e);
}, Bl = /* @__PURE__ */ new Map();
class MA extends pg {
  constructor(e) {
    super(e);
    u(this, "_workCode");
  }
  get fromType() {
    var s, r;
    const e = this.workCode;
    if (Bl.has(e))
      return Bl.get(e);
    const i = (r = (s = JSON.parse(this.work.raw.works[0])) == null ? void 0 : s.from_type) != null ? r : "vr";
    return Bl.set(e, i), i;
  }
  /**
   * @description 设置插件当前的 workCode
   */
  set workCode(e) {
    this._workCode = e;
  }
  /**
   * @description 获取插件当前的 workCode
   */
  get workCode() {
    var e;
    return (e = this._workCode) != null ? e : this.five.state.workCode;
  }
  /**
   * @description 获取当前的 work
   */
  get work() {
    var e, i;
    return (i = (e = this.five.works) == null ? void 0 : e.find((s) => s.workCode === this.workCode)) != null ? i : this.five.work;
  }
  get observers() {
    var e;
    return (e = this.work) == null ? void 0 : e.observers;
  }
  get transform() {
    var i, s, r, o;
    const e = (o = (i = this.work) == null ? void 0 : i.transform) != null ? o : (r = (s = this.work) == null ? void 0 : s.options) == null ? void 0 : r.transform;
    return e ? e.clone() : new P.Matrix4();
  }
  getResolvedObserver(e) {
    return this.five.works.getResolvedObserver({ workCode: this.workCode, panoIndex: e });
  }
  /**
   * @description 获取全景点坐标
   */
  getObserverPosition(e) {
    var s;
    const i = (s = this.getObserver(e)) == null ? void 0 : s.position;
    if (i)
      return br(i, this.transform);
  }
  /**
   * @description 获取全景点位和模型的地面坐标
   */
  getObserverStandingPosition(e) {
    var s;
    const i = (s = this.getObserver(e)) == null ? void 0 : s.standingPosition;
    if (i)
      return br(i, this.transform);
  }
  /**
   * @description 获取observer
   */
  getObserver(e) {
    var i;
    return (i = this.observers) == null ? void 0 : i[e];
  }
}
class rl extends pg {
  constructor(e) {
    super(e);
    u(this, "workUtil", new MA(this.five));
  }
  get version() {
    return this.five.constructor.version;
  }
  get majorVersion() {
    return Number(this.version.split(".")[0]);
  }
  get model() {
    return Ci(this.five);
  }
  moveToPano(e, i) {
    const s = this.majorVersion === 5 ? e : {
      workCode: this.workUtil.workCode,
      panoIndex: e
    };
    return this.five.moveToPano(s, i);
  }
}
class yo extends P.Raycaster {
  intersectObject(t, e = !0, i = []) {
    return Pc(t, this, i, e), i.sort(jd), i;
  }
  intersectObjects(t, e = !0, i = []) {
    for (let s = 0, r = t.length; s < r; s++)
      Pc(t[s], this, i, e);
    return i.sort(jd), i;
  }
}
function jd(n, t) {
  return n.distance - t.distance;
}
function Pc(n, t, e, i) {
  let s = !0;
  if (n.layers.test(t.layers) && n.raycast(t, e) === !1 && (s = !1), s === !0 && i === !0) {
    const r = n.children;
    for (let o = 0, a = r.length; o < a; o++)
      Pc(r[o], t, e, !0);
  }
}
function ah(n, t, e, i) {
  let s = !0;
  if (n.type !== "Line2" && (n.layers.test(t.layers) && n.raycast(t, e) === !1 && (s = !1), s === !0 && i === !0)) {
    const r = n.children;
    for (let o = 0, a = r.length; o < a; o++)
      r[o].type !== "Line2" && ah(r[o], t, e, !0);
  }
}
const pn = new yo();
pn.params.Points.threshold = 0.02;
function La(n, t) {
  if (!t || typeof ResizeObserver == "undefined" || !ResizeObserver)
    return {
      observe: () => window.addEventListener("resize", n),
      unobserve: () => window.removeEventListener("resize", n)
    };
  {
    const e = new ResizeObserver(n);
    return {
      observe: () => e.observe(t),
      unobserve: () => e.unobserve(t)
    };
  }
}
function ol(n, t = 200) {
  let e;
  return function(...i) {
    e || (n(...i), e = setTimeout(function() {
      e = null;
    }, t));
  };
}
function lh(n, t) {
  let e = !1;
  const i = ol(() => {
    e || (e = !0, n.ready().then(() => {
      t(), e = !1;
    }));
  }, 150);
  return n.on("camera.update", i), () => {
    n.off("camera.update", i);
  };
}
const kA = new _t();
class Bo {
  constructor(t, e, i) {
    /**
     * @description 单个标签 dom
     */
    u(this, "container");
    u(this, "visible", !1);
    u(this, "enabled", !1);
    /**
     * @description 标签的可见性数组
     * ```
     * [0] this.visible
     * [1] 碰撞检测
     * [2] 元素遮挡
     * [3] 强制显示
     * ```
     */
    u(this, "visibles", []);
    /**
     * @description 标签容器的父容器
     * @default this.five.getElement()?.parentElement
     */
    u(this, "wrapper");
    u(this, "positionsForRotate");
    /**
     * @description 碰撞检测
     * @default true
     */
    u(this, "intersectCheck", !0);
    /**
     * @description 用于碰撞检测的额外 Object3D
     */
    u(this, "extraObjectsForIntersectCheck", []);
    /**
     * @description 模拟3D
     * @default false
     */
    u(this, "simulate3D", !1);
    /**
     * @description 标签的容器，根据 namespace 区分
     */
    u(this, "tagWrapper");
    u(this, "five");
    u(this, "originPosition");
    u(this, "transformedPosition");
    u(this, "disposer");
    u(this, "config");
    u(this, "fiveUtil");
    u(this, "disposers", []);
    u(this, "onModeChange", () => {
      this.visibles[3] = void 0, this.updateVisible();
    });
    u(this, "onPanoArrived", () => {
      this.visibles[3] = void 0, this.updateVisible();
    });
    u(this, "onCameraUpdate", () => {
      this.visible !== !1 && this.updateScreenPosition();
    });
    u(this, "onCameraFovUpdate", () => {
      this.onCameraUpdate(), this.five.off("render.prepare", this.onCameraUpdate), this.five.on("render.prepare", this.onCameraUpdate), setTimeout(() => {
        this.five.off("render.prepare", this.onCameraUpdate);
      }, 1e3);
    });
    u(this, "onFiveEveryReady", () => {
      this.five.state.mode !== "Panorama" && this.updateVisible();
    });
    u(this, "updateVisible", () => {
      this.visible && (this.updateIntersectCheckVisible(), this.needsRender = !0);
    });
    u(this, "applyVisible", () => {
      this.visibles[3] === !0 || this.visibles.every((e) => e !== !1) ? (this.container.style.opacity = "1", this.container.style.pointerEvents = "auto") : (this.container.style.opacity = "0", this.container.style.pointerEvents = "none");
    });
    u(this, "updateIntersectCheckVisible", () => {
      var l, c;
      if (!this.position)
        return;
      if (!this.intersectCheck) {
        this.visibles[1] = !0;
        return;
      }
      let t = !1, e = 0.01;
      this.fiveUtil.workUtil.fromType === "poincare" && (e = 0.05);
      const i = this.transformedPosition.clone().sub(this.five.camera.position).normalize();
      pn.set(this.five.camera.position, i);
      const s = (l = Ci(this.five).intersectRaycaster(pn)) != null ? l : [], r = (c = pn.intersectObjects(this.extraObjectsForIntersectCheck, !0)) != null ? c : [], a = [...s, ...r].sort((h, d) => h.distance - d.distance)[0];
      a ? t = (a == null ? void 0 : a.distance) + e > this.transformedPosition.distanceTo(this.five.camera.position) : t = !0, this.visibles[1] = t;
    });
    var s, r, o;
    this.five = t, this.fiveUtil = (s = t.__fiveUtil__) != null ? s : t.__fiveUtil__ = new rl(t), this.originPosition = e ? Qe(e).clone() : void 0, this.transformedPosition = (r = this.originPosition) == null ? void 0 : r.clone(), this.positionsForRotate = (o = i == null ? void 0 : i.positionsForRotate) == null ? void 0 : o.map((a) => Qe(a).clone()), this.config = i != null ? i : {}, this.container = (() => {
      const a = document.createElement("div");
      return a.classList.add("light-tag"), a.style.width = "0", a.style.height = "0", a.style.position = "absolute", i != null && i.disableOpacityTransition || (a.style.transition = "opacity 0.2s linear"), a;
    })(), this.addResizeListener(), this.show(), this.enable(), setTimeout(() => {
      this.updateVisible(), this.needsRender = !0;
    }, 0);
  }
  get position() {
    return this.transformedPosition;
  }
  // eslint-disable-next-line accessor-pairs
  set needsRender(t) {
    this.applyVisible();
  }
  /**
   * @description 显示标签
   */
  show(t) {
    this.visible = !0, this.visibles[0] = !0, t != null && t.force && (this.visibles[3] = !0), this.container.style.opacity = "1", this.container.style.pointerEvents = "auto", this.updateVisible(), this.onCameraUpdate();
  }
  /**
   * @description 隐藏标签
   */
  hide() {
    this.visible = !1, this.visibles[0] = !1, this.container.style.opacity = "0", this.container.style.pointerEvents = "none";
  }
  /**
   * @description 启用标签
   */
  enable() {
    return $(this, null, function* () {
      var i, s, r, o;
      if (this.enabled || (this.enabled = !0, yield ui(this.five), !this.enabled))
        return;
      if (this.wrapper = (s = this.config.wrapper) != null ? s : (i = this.five.getElement()) == null ? void 0 : i.parentElement, !this.wrapper) {
        console.error("lighttag: wrapper is required");
        return;
      }
      const t = `light-tag-wrapper-${(o = (r = this.config) == null ? void 0 : r.namespace) != null ? o : "default"}`;
      if (!this.tagWrapper) {
        let a = Array.from(this.wrapper.children).find((l) => l.id === t);
        if (!a) {
          const l = document.createElement("div");
          a = l, l.id = t, l.style.position = "absolute", l.style.overflow = "hidden", l.style.top = "0", l.style.left = "0", l.style.width = "100%", l.style.height = "100%", l.style.pointerEvents = "none", l.style.zIndex = "1", this.wrapper.appendChild(a);
        }
        this.tagWrapper = a;
      }
      this.tagWrapper.appendChild(this.container), this.updateVisible();
      const e = lh(this.five, this.onFiveEveryReady);
      this.five.on("cameraUpdate", this.onCameraUpdate), this.five.on("cameraFovUpdate", this.onCameraFovUpdate), this.five.on("panoArrived", this.onPanoArrived), this.five.on("modeChange", this.onModeChange), this.disposer = () => {
        e(), this.five.off("cameraUpdate", this.onCameraUpdate), this.five.off("cameraFovUpdate", this.onCameraFovUpdate), this.five.off("panoArrived", this.onPanoArrived), this.five.off("modeChange", this.onModeChange);
      };
    });
  }
  /**
   * @description 禁用标签
   */
  disable() {
    var t, e;
    this.enabled && (this.enabled = !1, (t = this.tagWrapper) == null || t.removeChild(this.container), (e = this.disposer) == null || e.call(this));
  }
  /**
   * @description 销毁标签，并释放相关资源
   */
  destroy() {
    this.disable(), this.container.remove(), this.disposers.forEach((t) => t());
  }
  /**
   * @description 设置标签位置
   * @param position 位置
   * @param positionsForRotate 用于 css 旋转的斜线的两个端点
   */
  setPosition(t, e) {
    this.transformedPosition = Qe(t).clone(), this.positionsForRotate = e == null ? void 0 : e.map((i) => Qe(i).clone()), this.onCameraUpdate(), setTimeout(() => this.onCameraUpdate(), 0);
  }
  setTransformMatrix(t) {
    var e;
    this.transformedPosition = (e = this.originPosition) == null ? void 0 : e.clone().applyMatrix4(t), this.onCameraUpdate();
  }
  updateScreenPosition() {
    var r;
    if (!this.transformedPosition) {
      this.container.style.left = "-100%", this.container.style.top = "-100%";
      return;
    }
    const t = (r = this.five.renderer) == null ? void 0 : r.getSize(kA);
    if (!t) {
      this.container.style.left = "-100%", this.container.style.top = "-100%";
      return;
    }
    const e = Rl(this.five.camera, this.transformedPosition, t);
    if (!e) {
      this.container.style.left = "-100%", this.container.style.top = "-100%";
      return;
    }
    const i = (() => {
      if (!this.simulate3D)
        return 1;
      const a = 3 * Math.tan(0.5 * this.five.camera.fov / 180 * Math.PI), l = this.transformedPosition.distanceTo(this.five.camera.position);
      return Math.max(Math.min(1 - a * l / 40, 1), 0.75);
    })(), s = (() => {
      if (this.positionsForRotate === void 0 || this.positionsForRotate.length !== 2)
        return 0;
      const [o, a] = this.positionsForRotate, l = Rl(this.five.camera, o, t), c = Rl(this.five.camera, a, t);
      if (!l || !c)
        return 0;
      const h = l.leftPx > c.leftPx ? c : l, d = l.leftPx > c.leftPx ? l : c, f = d.leftPx - h.leftPx, g = d.topPx - h.topPx;
      return Math.atan2(g, f) * (180 / Math.PI);
    })();
    this.container.style.left = e.leftPx + "px", this.container.style.top = e.topPx + "px", this.container.style.transformOrigin = "center", this.container.style.transform = `scale(${i})`, s && (this.container.style.transform += ` rotate(${s}deg)`);
  }
  addResizeListener() {
    const t = this.five.getElement();
    if (t) {
      const { observe: e, unobserve: i } = La(this.onCameraUpdate, t);
      e(), this.disposers.push(i);
    }
  }
}
function mg(...n) {
  return new Bo(...n);
}
function Qn(n) {
  return n.toLowerCase().includes("panorama");
}
function di(n) {
  return !Qn(n);
}
var yi = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : {}, wo = {}, xA = {
  get exports() {
    return wo;
  },
  set exports(n) {
    wo = n;
  }
};
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
(function(n) {
  (function(t, e, i, s) {
    var r = ["", "webkit", "Moz", "MS", "ms", "o"], o = e.createElement("div"), a = "function", l = Math.round, c = Math.abs, h = Date.now;
    function d(j, H, q) {
      return setTimeout(x(j, q), H);
    }
    function f(j, H, q) {
      return Array.isArray(j) ? (g(j, q[H], q), !0) : !1;
    }
    function g(j, H, q) {
      var te;
      if (j)
        if (j.forEach)
          j.forEach(H, q);
        else if (j.length !== s)
          for (te = 0; te < j.length; )
            H.call(q, j[te], te, j), te++;
        else
          for (te in j)
            j.hasOwnProperty(te) && H.call(q, j[te], te, j);
    }
    function p(j, H, q) {
      var te = "DEPRECATED METHOD: " + H + `
` + q + ` AT 
`;
      return function() {
        var pe = new Error("get-stack-trace"), xe = pe && pe.stack ? pe.stack.replace(/^[^\(]+?[\n$]/gm, "").replace(/^\s+at\s+/gm, "").replace(/^Object.<anonymous>\s*\(/gm, "{anonymous}()@") : "Unknown Stack Trace", Ue = t.console && (t.console.warn || t.console.log);
        return Ue && Ue.call(t.console, te, xe), j.apply(this, arguments);
      };
    }
    var m;
    typeof Object.assign != "function" ? m = function(H) {
      if (H === s || H === null)
        throw new TypeError("Cannot convert undefined or null to object");
      for (var q = Object(H), te = 1; te < arguments.length; te++) {
        var pe = arguments[te];
        if (pe !== s && pe !== null)
          for (var xe in pe)
            pe.hasOwnProperty(xe) && (q[xe] = pe[xe]);
      }
      return q;
    } : m = Object.assign;
    var v = p(function(H, q, te) {
      for (var pe = Object.keys(q), xe = 0; xe < pe.length; )
        (!te || te && H[pe[xe]] === s) && (H[pe[xe]] = q[pe[xe]]), xe++;
      return H;
    }, "extend", "Use `assign`."), b = p(function(H, q) {
      return v(H, q, !0);
    }, "merge", "Use `assign`.");
    function w(j, H, q) {
      var te = H.prototype, pe;
      pe = j.prototype = Object.create(te), pe.constructor = j, pe._super = te, q && m(pe, q);
    }
    function x(j, H) {
      return function() {
        return j.apply(H, arguments);
      };
    }
    function k(j, H) {
      return typeof j == a ? j.apply(H && H[0] || s, H) : j;
    }
    function T(j, H) {
      return j === s ? H : j;
    }
    function S(j, H, q) {
      g(A(H), function(te) {
        j.addEventListener(te, q, !1);
      });
    }
    function V(j, H, q) {
      g(A(H), function(te) {
        j.removeEventListener(te, q, !1);
      });
    }
    function z(j, H) {
      for (; j; ) {
        if (j == H)
          return !0;
        j = j.parentNode;
      }
      return !1;
    }
    function O(j, H) {
      return j.indexOf(H) > -1;
    }
    function A(j) {
      return j.trim().split(/\s+/g);
    }
    function C(j, H, q) {
      if (j.indexOf && !q)
        return j.indexOf(H);
      for (var te = 0; te < j.length; ) {
        if (q && j[te][q] == H || !q && j[te] === H)
          return te;
        te++;
      }
      return -1;
    }
    function I(j) {
      return Array.prototype.slice.call(j, 0);
    }
    function E(j, H, q) {
      for (var te = [], pe = [], xe = 0; xe < j.length; ) {
        var Ue = H ? j[xe][H] : j[xe];
        C(pe, Ue) < 0 && te.push(j[xe]), pe[xe] = Ue, xe++;
      }
      return q && (H ? te = te.sort(function(wt, kt) {
        return wt[H] > kt[H];
      }) : te = te.sort()), te;
    }
    function D(j, H) {
      for (var q, te, pe = H[0].toUpperCase() + H.slice(1), xe = 0; xe < r.length; ) {
        if (q = r[xe], te = q ? q + pe : H, te in j)
          return te;
        xe++;
      }
      return s;
    }
    var L = 1;
    function N() {
      return L++;
    }
    function G(j) {
      var H = j.ownerDocument || j;
      return H.defaultView || H.parentWindow || t;
    }
    var Z = /mobile|tablet|ip(ad|hone|od)|android/i, ee = "ontouchstart" in t, J = D(t, "PointerEvent") !== s, ie = ee && Z.test(navigator.userAgent), ne = "touch", he = "pen", Le = "mouse", we = "kinect", le = 25, ae = 1, ce = 2, Ee = 4, Ae = 8, Ge = 1, Be = 2, Te = 4, Ne = 8, ue = 16, Se = Be | Te, ze = Ne | ue, nt = Se | ze, it = ["x", "y"], ht = ["clientX", "clientY"];
    function Ke(j, H) {
      var q = this;
      this.manager = j, this.callback = H, this.element = j.element, this.target = j.options.inputTarget, this.domHandler = function(te) {
        k(j.options.enable, [j]) && q.handler(te);
      }, this.init();
    }
    Ke.prototype = {
      /**
       * should handle the inputEvent data and trigger the callback
       * @virtual
       */
      handler: function() {
      },
      /**
       * bind the events
       */
      init: function() {
        this.evEl && S(this.element, this.evEl, this.domHandler), this.evTarget && S(this.target, this.evTarget, this.domHandler), this.evWin && S(G(this.element), this.evWin, this.domHandler);
      },
      /**
       * unbind the events
       */
      destroy: function() {
        this.evEl && V(this.element, this.evEl, this.domHandler), this.evTarget && V(this.target, this.evTarget, this.domHandler), this.evWin && V(G(this.element), this.evWin, this.domHandler);
      }
    };
    function $e(j) {
      var H, q = j.options.inputClass;
      return q ? H = q : J ? H = $i : ie ? H = xn : ee ? H = tn : H = gi, new H(j, st);
    }
    function st(j, H, q) {
      var te = q.pointers.length, pe = q.changedPointers.length, xe = H & ae && te - pe === 0, Ue = H & (Ee | Ae) && te - pe === 0;
      q.isFirst = !!xe, q.isFinal = !!Ue, xe && (j.session = {}), q.eventType = H, at(j, q), j.emit("hammer.input", q), j.recognize(q), j.session.prevInput = q;
    }
    function at(j, H) {
      var q = j.session, te = H.pointers, pe = te.length;
      q.firstInput || (q.firstInput = ai(H)), pe > 1 && !q.firstMultiple ? q.firstMultiple = ai(H) : pe === 1 && (q.firstMultiple = !1);
      var xe = q.firstInput, Ue = q.firstMultiple, At = Ue ? Ue.center : xe.center, wt = H.center = Mi(te);
      H.timeStamp = h(), H.deltaTime = H.timeStamp - xe.timeStamp, H.angle = Hi(At, wt), H.distance = ki(At, wt), Ut(q, H), H.offsetDirection = jt(H.deltaX, H.deltaY);
      var kt = _i(H.deltaTime, H.deltaX, H.deltaY);
      H.overallVelocityX = kt.x, H.overallVelocityY = kt.y, H.overallVelocity = c(kt.x) > c(kt.y) ? kt.x : kt.y, H.scale = Ue ? cs(Ue.pointers, te) : 1, H.rotation = Ue ? Hr(Ue.pointers, te) : 0, H.maxPointers = q.prevInput ? H.pointers.length > q.prevInput.maxPointers ? H.pointers.length : q.prevInput.maxPointers : H.pointers.length, ls(q, H);
      var Jt = j.element;
      z(H.srcEvent.target, Jt) && (Jt = H.srcEvent.target), H.target = Jt;
    }
    function Ut(j, H) {
      var q = H.center, te = j.offsetDelta || {}, pe = j.prevDelta || {}, xe = j.prevInput || {};
      (H.eventType === ae || xe.eventType === Ee) && (pe = j.prevDelta = {
        x: xe.deltaX || 0,
        y: xe.deltaY || 0
      }, te = j.offsetDelta = {
        x: q.x,
        y: q.y
      }), H.deltaX = pe.x + (q.x - te.x), H.deltaY = pe.y + (q.y - te.y);
    }
    function ls(j, H) {
      var q = j.lastInterval || H, te = H.timeStamp - q.timeStamp, pe, xe, Ue, At;
      if (H.eventType != Ae && (te > le || q.velocity === s)) {
        var wt = H.deltaX - q.deltaX, kt = H.deltaY - q.deltaY, Jt = _i(te, wt, kt);
        xe = Jt.x, Ue = Jt.y, pe = c(Jt.x) > c(Jt.y) ? Jt.x : Jt.y, At = jt(wt, kt), j.lastInterval = H;
      } else
        pe = q.velocity, xe = q.velocityX, Ue = q.velocityY, At = q.direction;
      H.velocity = pe, H.velocityX = xe, H.velocityY = Ue, H.direction = At;
    }
    function ai(j) {
      for (var H = [], q = 0; q < j.pointers.length; )
        H[q] = {
          clientX: l(j.pointers[q].clientX),
          clientY: l(j.pointers[q].clientY)
        }, q++;
      return {
        timeStamp: h(),
        pointers: H,
        center: Mi(H),
        deltaX: j.deltaX,
        deltaY: j.deltaY
      };
    }
    function Mi(j) {
      var H = j.length;
      if (H === 1)
        return {
          x: l(j[0].clientX),
          y: l(j[0].clientY)
        };
      for (var q = 0, te = 0, pe = 0; pe < H; )
        q += j[pe].clientX, te += j[pe].clientY, pe++;
      return {
        x: l(q / H),
        y: l(te / H)
      };
    }
    function _i(j, H, q) {
      return {
        x: H / j || 0,
        y: q / j || 0
      };
    }
    function jt(j, H) {
      return j === H ? Ge : c(j) >= c(H) ? j < 0 ? Be : Te : H < 0 ? Ne : ue;
    }
    function ki(j, H, q) {
      q || (q = it);
      var te = H[q[0]] - j[q[0]], pe = H[q[1]] - j[q[1]];
      return Math.sqrt(te * te + pe * pe);
    }
    function Hi(j, H, q) {
      q || (q = it);
      var te = H[q[0]] - j[q[0]], pe = H[q[1]] - j[q[1]];
      return Math.atan2(pe, te) * 180 / Math.PI;
    }
    function Hr(j, H) {
      return Hi(H[1], H[0], ht) + Hi(j[1], j[0], ht);
    }
    function cs(j, H) {
      return ki(H[0], H[1], ht) / ki(j[0], j[1], ht);
    }
    var Cn = {
      mousedown: ae,
      mousemove: ce,
      mouseup: Ee
    }, Hs = "mousedown", In = "mousemove mouseup";
    function gi() {
      this.evEl = Hs, this.evWin = In, this.pressed = !1, Ke.apply(this, arguments);
    }
    w(gi, Ke, {
      /**
       * handle mouse events
       * @param {Object} ev
       */
      handler: function(H) {
        var q = Cn[H.type];
        q & ae && H.button === 0 && (this.pressed = !0), q & ce && H.which !== 1 && (q = Ee), this.pressed && (q & Ee && (this.pressed = !1), this.callback(this.manager, q, {
          pointers: [H],
          changedPointers: [H],
          pointerType: Le,
          srcEvent: H
        }));
      }
    });
    var li = {
      pointerdown: ae,
      pointermove: ce,
      pointerup: Ee,
      pointercancel: Ae,
      pointerout: Ae
    }, En = {
      2: ne,
      3: he,
      4: Le,
      5: we
      // see https://twitter.com/jacobrossi/status/480596438489890816
    }, Mn = "pointerdown", Fi = "pointermove pointerup pointercancel";
    t.MSPointerEvent && !t.PointerEvent && (Mn = "MSPointerDown", Fi = "MSPointerMove MSPointerUp MSPointerCancel");
    function $i() {
      this.evEl = Mn, this.evWin = Fi, Ke.apply(this, arguments), this.store = this.manager.session.pointerEvents = [];
    }
    w($i, Ke, {
      /**
       * handle mouse events
       * @param {Object} ev
       */
      handler: function(H) {
        var q = this.store, te = !1, pe = H.type.toLowerCase().replace("ms", ""), xe = li[pe], Ue = En[H.pointerType] || H.pointerType, At = Ue == ne, wt = C(q, H.pointerId, "pointerId");
        xe & ae && (H.button === 0 || At) ? wt < 0 && (q.push(H), wt = q.length - 1) : xe & (Ee | Ae) && (te = !0), !(wt < 0) && (q[wt] = H, this.callback(this.manager, xe, {
          pointers: q,
          changedPointers: [H],
          pointerType: Ue,
          srcEvent: H
        }), te && q.splice(wt, 1));
      }
    });
    var en = {
      touchstart: ae,
      touchmove: ce,
      touchend: Ee,
      touchcancel: Ae
    }, hs = "touchstart", ds = "touchstart touchmove touchend touchcancel";
    function kn() {
      this.evTarget = hs, this.evWin = ds, this.started = !1, Ke.apply(this, arguments);
    }
    w(kn, Ke, {
      handler: function(H) {
        var q = en[H.type];
        if (q === ae && (this.started = !0), !!this.started) {
          var te = Ni.call(this, H, q);
          q & (Ee | Ae) && te[0].length - te[1].length === 0 && (this.started = !1), this.callback(this.manager, q, {
            pointers: te[0],
            changedPointers: te[1],
            pointerType: ne,
            srcEvent: H
          });
        }
      }
    });
    function Ni(j, H) {
      var q = I(j.touches), te = I(j.changedTouches);
      return H & (Ee | Ae) && (q = E(q.concat(te), "identifier", !0)), [q, te];
    }
    var Fs = {
      touchstart: ae,
      touchmove: ce,
      touchend: Ee,
      touchcancel: Ae
    }, xi = "touchstart touchmove touchend touchcancel";
    function xn() {
      this.evTarget = xi, this.targetIds = {}, Ke.apply(this, arguments);
    }
    w(xn, Ke, {
      handler: function(H) {
        var q = Fs[H.type], te = Fr.call(this, H, q);
        te && this.callback(this.manager, q, {
          pointers: te[0],
          changedPointers: te[1],
          pointerType: ne,
          srcEvent: H
        });
      }
    });
    function Fr(j, H) {
      var q = I(j.touches), te = this.targetIds;
      if (H & (ae | ce) && q.length === 1)
        return te[q[0].identifier] = !0, [q, q];
      var pe, xe, Ue = I(j.changedTouches), At = [], wt = this.target;
      if (xe = q.filter(function(kt) {
        return z(kt.target, wt);
      }), H === ae)
        for (pe = 0; pe < xe.length; )
          te[xe[pe].identifier] = !0, pe++;
      for (pe = 0; pe < Ue.length; )
        te[Ue[pe].identifier] && At.push(Ue[pe]), H & (Ee | Ae) && delete te[Ue[pe].identifier], pe++;
      if (At.length)
        return [
          // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'
          E(xe.concat(At), "identifier", !0),
          At
        ];
    }
    var Nr = 2500, us = 25;
    function tn() {
      Ke.apply(this, arguments);
      var j = x(this.handler, this);
      this.touch = new xn(this.manager, j), this.mouse = new gi(this.manager, j), this.primaryTouch = null, this.lastTouches = [];
    }
    w(tn, Ke, {
      /**
       * handle mouse and touch events
       * @param {Hammer} manager
       * @param {String} inputEvent
       * @param {Object} inputData
       */
      handler: function(H, q, te) {
        var pe = te.pointerType == ne, xe = te.pointerType == Le;
        if (!(xe && te.sourceCapabilities && te.sourceCapabilities.firesTouchEvents)) {
          if (pe)
            Et.call(this, q, te);
          else if (xe && Gr.call(this, te))
            return;
          this.callback(H, q, te);
        }
      },
      /**
       * remove the event listeners
       */
      destroy: function() {
        this.touch.destroy(), this.mouse.destroy();
      }
    });
    function Et(j, H) {
      j & ae ? (this.primaryTouch = H.changedPointers[0].identifier, Ns.call(this, H)) : j & (Ee | Ae) && Ns.call(this, H);
    }
    function Ns(j) {
      var H = j.changedPointers[0];
      if (H.identifier === this.primaryTouch) {
        var q = { x: H.clientX, y: H.clientY };
        this.lastTouches.push(q);
        var te = this.lastTouches, pe = function() {
          var xe = te.indexOf(q);
          xe > -1 && te.splice(xe, 1);
        };
        setTimeout(pe, Nr);
      }
    }
    function Gr(j) {
      for (var H = j.srcEvent.clientX, q = j.srcEvent.clientY, te = 0; te < this.lastTouches.length; te++) {
        var pe = this.lastTouches[te], xe = Math.abs(H - pe.x), Ue = Math.abs(q - pe.y);
        if (xe <= us && Ue <= us)
          return !0;
      }
      return !1;
    }
    var Gs = D(o.style, "touchAction"), Ws = Gs !== s, Qs = "compute", Mt = "auto", fs = "manipulation", Di = "none", nn = "pan-x", sn = "pan-y", Dn = Qr();
    function Tt(j, H) {
      this.manager = j, this.set(H);
    }
    Tt.prototype = {
      /**
       * set the touchAction value on the element or enable the polyfill
       * @param {String} value
       */
      set: function(j) {
        j == Qs && (j = this.compute()), Ws && this.manager.element.style && Dn[j] && (this.manager.element.style[Gs] = j), this.actions = j.toLowerCase().trim();
      },
      /**
       * just re-set the touchAction value
       */
      update: function() {
        this.set(this.manager.options.touchAction);
      },
      /**
       * compute the value for the touchAction property based on the recognizer's settings
       * @returns {String} value
       */
      compute: function() {
        var j = [];
        return g(this.manager.recognizers, function(H) {
          k(H.options.enable, [H]) && (j = j.concat(H.getTouchAction()));
        }), Wr(j.join(" "));
      },
      /**
       * this method is called on each input cycle and provides the preventing of the browser behavior
       * @param {Object} input
       */
      preventDefaults: function(j) {
        var H = j.srcEvent, q = j.offsetDirection;
        if (this.manager.session.prevented) {
          H.preventDefault();
          return;
        }
        var te = this.actions, pe = O(te, Di) && !Dn[Di], xe = O(te, sn) && !Dn[sn], Ue = O(te, nn) && !Dn[nn];
        if (pe) {
          var At = j.pointers.length === 1, wt = j.distance < 2, kt = j.deltaTime < 250;
          if (At && wt && kt)
            return;
        }
        if (!(Ue && xe) && (pe || xe && q & Se || Ue && q & ze))
          return this.preventSrc(H);
      },
      /**
       * call preventDefault to prevent the browser's default behavior (scrolling in most cases)
       * @param {Object} srcEvent
       */
      preventSrc: function(j) {
        this.manager.session.prevented = !0, j.preventDefault();
      }
    };
    function Wr(j) {
      if (O(j, Di))
        return Di;
      var H = O(j, nn), q = O(j, sn);
      return H && q ? Di : H || q ? H ? nn : sn : O(j, fs) ? fs : Mt;
    }
    function Qr() {
      if (!Ws)
        return !1;
      var j = {}, H = t.CSS && t.CSS.supports;
      return ["auto", "manipulation", "pan-y", "pan-x", "pan-x pan-y", "none"].forEach(function(q) {
        j[q] = H ? t.CSS.supports("touch-action", q) : !0;
      }), j;
    }
    var Sn = 1, Ht = 2, Gi = 4, Xt = 8, ei = Xt, vi = 16, yt = 32;
    function Yt(j) {
      this.options = m({}, this.defaults, j || {}), this.id = N(), this.manager = null, this.options.enable = T(this.options.enable, !0), this.state = Sn, this.simultaneous = {}, this.requireFail = [];
    }
    Yt.prototype = {
      /**
       * @virtual
       * @type {Object}
       */
      defaults: {},
      /**
       * set options
       * @param {Object} options
       * @return {Recognizer}
       */
      set: function(j) {
        return m(this.options, j), this.manager && this.manager.touchAction.update(), this;
      },
      /**
       * recognize simultaneous with an other recognizer.
       * @param {Recognizer} otherRecognizer
       * @returns {Recognizer} this
       */
      recognizeWith: function(j) {
        if (f(j, "recognizeWith", this))
          return this;
        var H = this.simultaneous;
        return j = Tn(j, this), H[j.id] || (H[j.id] = j, j.recognizeWith(this)), this;
      },
      /**
       * drop the simultaneous link. it doesnt remove the link on the other recognizer.
       * @param {Recognizer} otherRecognizer
       * @returns {Recognizer} this
       */
      dropRecognizeWith: function(j) {
        return f(j, "dropRecognizeWith", this) ? this : (j = Tn(j, this), delete this.simultaneous[j.id], this);
      },
      /**
       * recognizer can only run when an other is failing
       * @param {Recognizer} otherRecognizer
       * @returns {Recognizer} this
       */
      requireFailure: function(j) {
        if (f(j, "requireFailure", this))
          return this;
        var H = this.requireFail;
        return j = Tn(j, this), C(H, j) === -1 && (H.push(j), j.requireFailure(this)), this;
      },
      /**
       * drop the requireFailure link. it does not remove the link on the other recognizer.
       * @param {Recognizer} otherRecognizer
       * @returns {Recognizer} this
       */
      dropRequireFailure: function(j) {
        if (f(j, "dropRequireFailure", this))
          return this;
        j = Tn(j, this);
        var H = C(this.requireFail, j);
        return H > -1 && this.requireFail.splice(H, 1), this;
      },
      /**
       * has require failures boolean
       * @returns {boolean}
       */
      hasRequireFailures: function() {
        return this.requireFail.length > 0;
      },
      /**
       * if the recognizer can recognize simultaneous with an other recognizer
       * @param {Recognizer} otherRecognizer
       * @returns {Boolean}
       */
      canRecognizeWith: function(j) {
        return !!this.simultaneous[j.id];
      },
      /**
       * You should use `tryEmit` instead of `emit` directly to check
       * that all the needed recognizers has failed before emitting.
       * @param {Object} input
       */
      emit: function(j) {
        var H = this, q = this.state;
        function te(pe) {
          H.manager.emit(pe, j);
        }
        q < Xt && te(H.options.event + Us(q)), te(H.options.event), j.additionalEvent && te(j.additionalEvent), q >= Xt && te(H.options.event + Us(q));
      },
      /**
       * Check that all the require failure recognizers has failed,
       * if true, it emits a gesture event,
       * otherwise, setup the state to FAILED.
       * @param {Object} input
       */
      tryEmit: function(j) {
        if (this.canEmit())
          return this.emit(j);
        this.state = yt;
      },
      /**
       * can we emit?
       * @returns {boolean}
       */
      canEmit: function() {
        for (var j = 0; j < this.requireFail.length; ) {
          if (!(this.requireFail[j].state & (yt | Sn)))
            return !1;
          j++;
        }
        return !0;
      },
      /**
       * update the recognizer
       * @param {Object} inputData
       */
      recognize: function(j) {
        var H = m({}, j);
        if (!k(this.options.enable, [this, H])) {
          this.reset(), this.state = yt;
          return;
        }
        this.state & (ei | vi | yt) && (this.state = Sn), this.state = this.process(H), this.state & (Ht | Gi | Xt | vi) && this.tryEmit(H);
      },
      /**
       * return the state of the recognizer
       * the actual recognizing happens in this method
       * @virtual
       * @param {Object} inputData
       * @returns {Const} STATE
       */
      process: function(j) {
      },
      // jshint ignore:line
      /**
       * return the preferred touch-action
       * @virtual
       * @returns {Array}
       */
      getTouchAction: function() {
      },
      /**
       * called when the gesture isn't allowed to recognize
       * like when another is being recognized or it is disabled
       * @virtual
       */
      reset: function() {
      }
    };
    function Us(j) {
      return j & vi ? "cancel" : j & Xt ? "end" : j & Gi ? "move" : j & Ht ? "start" : "";
    }
    function Xs(j) {
      return j == ue ? "down" : j == Ne ? "up" : j == Be ? "left" : j == Te ? "right" : "";
    }
    function Tn(j, H) {
      var q = H.manager;
      return q ? q.get(j) : j;
    }
    function Zt() {
      Yt.apply(this, arguments);
    }
    w(Zt, Yt, {
      /**
       * @namespace
       * @memberof AttrRecognizer
       */
      defaults: {
        /**
         * @type {Number}
         * @default 1
         */
        pointers: 1
      },
      /**
       * Used to check if it the recognizer receives valid input, like input.distance > 10.
       * @memberof AttrRecognizer
       * @param {Object} input
       * @returns {Boolean} recognized
       */
      attrTest: function(j) {
        var H = this.options.pointers;
        return H === 0 || j.pointers.length === H;
      },
      /**
       * Process the input and return the state for the recognizer
       * @memberof AttrRecognizer
       * @param {Object} input
       * @returns {*} State
       */
      process: function(j) {
        var H = this.state, q = j.eventType, te = H & (Ht | Gi), pe = this.attrTest(j);
        return te && (q & Ae || !pe) ? H | vi : te || pe ? q & Ee ? H | Xt : H & Ht ? H | Gi : Ht : yt;
      }
    });
    function Ln() {
      Zt.apply(this, arguments), this.pX = null, this.pY = null;
    }
    w(Ln, Zt, {
      /**
       * @namespace
       * @memberof PanRecognizer
       */
      defaults: {
        event: "pan",
        threshold: 10,
        pointers: 1,
        direction: nt
      },
      getTouchAction: function() {
        var j = this.options.direction, H = [];
        return j & Se && H.push(sn), j & ze && H.push(nn), H;
      },
      directionTest: function(j) {
        var H = this.options, q = !0, te = j.distance, pe = j.direction, xe = j.deltaX, Ue = j.deltaY;
        return pe & H.direction || (H.direction & Se ? (pe = xe === 0 ? Ge : xe < 0 ? Be : Te, q = xe != this.pX, te = Math.abs(j.deltaX)) : (pe = Ue === 0 ? Ge : Ue < 0 ? Ne : ue, q = Ue != this.pY, te = Math.abs(j.deltaY))), j.direction = pe, q && te > H.threshold && pe & H.direction;
      },
      attrTest: function(j) {
        return Zt.prototype.attrTest.call(this, j) && (this.state & Ht || !(this.state & Ht) && this.directionTest(j));
      },
      emit: function(j) {
        this.pX = j.deltaX, this.pY = j.deltaY;
        var H = Xs(j.direction);
        H && (j.additionalEvent = this.options.event + H), this._super.emit.call(this, j);
      }
    });
    function Wi() {
      Zt.apply(this, arguments);
    }
    w(Wi, Zt, {
      /**
       * @namespace
       * @memberof PinchRecognizer
       */
      defaults: {
        event: "pinch",
        threshold: 0,
        pointers: 2
      },
      getTouchAction: function() {
        return [Di];
      },
      attrTest: function(j) {
        return this._super.attrTest.call(this, j) && (Math.abs(j.scale - 1) > this.options.threshold || this.state & Ht);
      },
      emit: function(j) {
        if (j.scale !== 1) {
          var H = j.scale < 1 ? "in" : "out";
          j.additionalEvent = this.options.event + H;
        }
        this._super.emit.call(this, j);
      }
    });
    function rn() {
      Yt.apply(this, arguments), this._timer = null, this._input = null;
    }
    w(rn, Yt, {
      /**
       * @namespace
       * @memberof PressRecognizer
       */
      defaults: {
        event: "press",
        pointers: 1,
        time: 251,
        // minimal time of the pointer to be pressed
        threshold: 9
        // a minimal movement is ok, but keep it low
      },
      getTouchAction: function() {
        return [Mt];
      },
      process: function(j) {
        var H = this.options, q = j.pointers.length === H.pointers, te = j.distance < H.threshold, pe = j.deltaTime > H.time;
        if (this._input = j, !te || !q || j.eventType & (Ee | Ae) && !pe)
          this.reset();
        else if (j.eventType & ae)
          this.reset(), this._timer = d(function() {
            this.state = ei, this.tryEmit();
          }, H.time, this);
        else if (j.eventType & Ee)
          return ei;
        return yt;
      },
      reset: function() {
        clearTimeout(this._timer);
      },
      emit: function(j) {
        this.state === ei && (j && j.eventType & Ee ? this.manager.emit(this.options.event + "up", j) : (this._input.timeStamp = h(), this.manager.emit(this.options.event, this._input)));
      }
    });
    function Si() {
      Zt.apply(this, arguments);
    }
    w(Si, Zt, {
      /**
       * @namespace
       * @memberof RotateRecognizer
       */
      defaults: {
        event: "rotate",
        threshold: 0,
        pointers: 2
      },
      getTouchAction: function() {
        return [Di];
      },
      attrTest: function(j) {
        return this._super.attrTest.call(this, j) && (Math.abs(j.rotation) > this.options.threshold || this.state & Ht);
      }
    });
    function zn() {
      Zt.apply(this, arguments);
    }
    w(zn, Zt, {
      /**
       * @namespace
       * @memberof SwipeRecognizer
       */
      defaults: {
        event: "swipe",
        threshold: 10,
        velocity: 0.3,
        direction: Se | ze,
        pointers: 1
      },
      getTouchAction: function() {
        return Ln.prototype.getTouchAction.call(this);
      },
      attrTest: function(j) {
        var H = this.options.direction, q;
        return H & (Se | ze) ? q = j.overallVelocity : H & Se ? q = j.overallVelocityX : H & ze && (q = j.overallVelocityY), this._super.attrTest.call(this, j) && H & j.offsetDirection && j.distance > this.options.threshold && j.maxPointers == this.options.pointers && c(q) > this.options.velocity && j.eventType & Ee;
      },
      emit: function(j) {
        var H = Xs(j.offsetDirection);
        H && this.manager.emit(this.options.event + H, j), this.manager.emit(this.options.event, j);
      }
    });
    function on() {
      Yt.apply(this, arguments), this.pTime = !1, this.pCenter = !1, this._timer = null, this._input = null, this.count = 0;
    }
    w(on, Yt, {
      /**
       * @namespace
       * @memberof PinchRecognizer
       */
      defaults: {
        event: "tap",
        pointers: 1,
        taps: 1,
        interval: 300,
        // max time between the multi-tap taps
        time: 250,
        // max time of the pointer to be down (like finger on the screen)
        threshold: 9,
        // a minimal movement is ok, but keep it low
        posThreshold: 10
        // a multi-tap can be a bit off the initial position
      },
      getTouchAction: function() {
        return [fs];
      },
      process: function(j) {
        var H = this.options, q = j.pointers.length === H.pointers, te = j.distance < H.threshold, pe = j.deltaTime < H.time;
        if (this.reset(), j.eventType & ae && this.count === 0)
          return this.failTimeout();
        if (te && pe && q) {
          if (j.eventType != Ee)
            return this.failTimeout();
          var xe = this.pTime ? j.timeStamp - this.pTime < H.interval : !0, Ue = !this.pCenter || ki(this.pCenter, j.center) < H.posThreshold;
          this.pTime = j.timeStamp, this.pCenter = j.center, !Ue || !xe ? this.count = 1 : this.count += 1, this._input = j;
          var At = this.count % H.taps;
          if (At === 0)
            return this.hasRequireFailures() ? (this._timer = d(function() {
              this.state = ei, this.tryEmit();
            }, H.interval, this), Ht) : ei;
        }
        return yt;
      },
      failTimeout: function() {
        return this._timer = d(function() {
          this.state = yt;
        }, this.options.interval, this), yt;
      },
      reset: function() {
        clearTimeout(this._timer);
      },
      emit: function() {
        this.state == ei && (this._input.tapCount = this.count, this.manager.emit(this.options.event, this._input));
      }
    });
    function ci(j, H) {
      return H = H || {}, H.recognizers = T(H.recognizers, ci.defaults.preset), new ps(j, H);
    }
    ci.VERSION = "2.0.7", ci.defaults = {
      /**
       * set if DOM events are being triggered.
       * But this is slower and unused by simple implementations, so disabled by default.
       * @type {Boolean}
       * @default false
       */
      domEvents: !1,
      /**
       * The value for the touchAction property/fallback.
       * When set to `compute` it will magically set the correct value based on the added recognizers.
       * @type {String}
       * @default compute
       */
      touchAction: Qs,
      /**
       * @type {Boolean}
       * @default true
       */
      enable: !0,
      /**
       * EXPERIMENTAL FEATURE -- can be removed/changed
       * Change the parent input target element.
       * If Null, then it is being set the to main element.
       * @type {Null|EventTarget}
       * @default null
       */
      inputTarget: null,
      /**
       * force an input class
       * @type {Null|Function}
       * @default null
       */
      inputClass: null,
      /**
       * Default recognizer setup when calling `Hammer()`
       * When creating a new Manager these will be skipped.
       * @type {Array}
       */
      preset: [
        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]
        [Si, { enable: !1 }],
        [Wi, { enable: !1 }, ["rotate"]],
        [zn, { direction: Se }],
        [Ln, { direction: Se }, ["swipe"]],
        [on],
        [on, { event: "doubletap", taps: 2 }, ["tap"]],
        [rn]
      ],
      /**
       * Some CSS properties can be used to improve the working of Hammer.
       * Add them to this method and they will be set when creating a new Manager.
       * @namespace
       */
      cssProps: {
        /**
         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.
         * @type {String}
         * @default 'none'
         */
        userSelect: "none",
        /**
         * Disable the Windows Phone grippers when pressing an element.
         * @type {String}
         * @default 'none'
         */
        touchSelect: "none",
        /**
         * Disables the default callout shown when you touch and hold a touch target.
         * On iOS, when you touch and hold a touch target such as a link, Safari displays
         * a callout containing information about the link. This property allows you to disable that callout.
         * @type {String}
         * @default 'none'
         */
        touchCallout: "none",
        /**
         * Specifies whether zooming is enabled. Used by IE10>
         * @type {String}
         * @default 'none'
         */
        contentZooming: "none",
        /**
         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.
         * @type {String}
         * @default 'none'
         */
        userDrag: "none",
        /**
         * Overrides the highlight color shown when the user taps a link or a JavaScript
         * clickable element in iOS. This property obeys the alpha value, if specified.
         * @type {String}
         * @default 'rgba(0,0,0,0)'
         */
        tapHighlightColor: "rgba(0,0,0,0)"
      }
    };
    var Ur = 1, Ys = 2;
    function ps(j, H) {
      this.options = m({}, ci.defaults, H || {}), this.options.inputTarget = this.options.inputTarget || j, this.handlers = {}, this.session = {}, this.recognizers = [], this.oldCssProps = {}, this.element = j, this.input = $e(this), this.touchAction = new Tt(this, this.options.touchAction), On(this, !0), g(this.options.recognizers, function(q) {
        var te = this.add(new q[0](q[1]));
        q[2] && te.recognizeWith(q[2]), q[3] && te.requireFailure(q[3]);
      }, this);
    }
    ps.prototype = {
      /**
       * set options
       * @param {Object} options
       * @returns {Manager}
       */
      set: function(j) {
        return m(this.options, j), j.touchAction && this.touchAction.update(), j.inputTarget && (this.input.destroy(), this.input.target = j.inputTarget, this.input.init()), this;
      },
      /**
       * stop recognizing for this session.
       * This session will be discarded, when a new [input]start event is fired.
       * When forced, the recognizer cycle is stopped immediately.
       * @param {Boolean} [force]
       */
      stop: function(j) {
        this.session.stopped = j ? Ys : Ur;
      },
      /**
       * run the recognizers!
       * called by the inputHandler function on every movement of the pointers (touches)
       * it walks through all the recognizers and tries to detect the gesture that is being made
       * @param {Object} inputData
       */
      recognize: function(j) {
        var H = this.session;
        if (!H.stopped) {
          this.touchAction.preventDefaults(j);
          var q, te = this.recognizers, pe = H.curRecognizer;
          (!pe || pe && pe.state & ei) && (pe = H.curRecognizer = null);
          for (var xe = 0; xe < te.length; )
            q = te[xe], H.stopped !== Ys && // 1
            (!pe || q == pe || // 2
            q.canRecognizeWith(pe)) ? q.recognize(j) : q.reset(), !pe && q.state & (Ht | Gi | Xt) && (pe = H.curRecognizer = q), xe++;
        }
      },
      /**
       * get a recognizer by its event name.
       * @param {Recognizer|String} recognizer
       * @returns {Recognizer|Null}
       */
      get: function(j) {
        if (j instanceof Yt)
          return j;
        for (var H = this.recognizers, q = 0; q < H.length; q++)
          if (H[q].options.event == j)
            return H[q];
        return null;
      },
      /**
       * add a recognizer to the manager
       * existing recognizers with the same event name will be removed
       * @param {Recognizer} recognizer
       * @returns {Recognizer|Manager}
       */
      add: function(j) {
        if (f(j, "add", this))
          return this;
        var H = this.get(j.options.event);
        return H && this.remove(H), this.recognizers.push(j), j.manager = this, this.touchAction.update(), j;
      },
      /**
       * remove a recognizer by name or instance
       * @param {Recognizer|String} recognizer
       * @returns {Manager}
       */
      remove: function(j) {
        if (f(j, "remove", this))
          return this;
        if (j = this.get(j), j) {
          var H = this.recognizers, q = C(H, j);
          q !== -1 && (H.splice(q, 1), this.touchAction.update());
        }
        return this;
      },
      /**
       * bind event
       * @param {String} events
       * @param {Function} handler
       * @returns {EventEmitter} this
       */
      on: function(j, H) {
        if (j !== s && H !== s) {
          var q = this.handlers;
          return g(A(j), function(te) {
            q[te] = q[te] || [], q[te].push(H);
          }), this;
        }
      },
      /**
       * unbind event, leave emit blank to remove all handlers
       * @param {String} events
       * @param {Function} [handler]
       * @returns {EventEmitter} this
       */
      off: function(j, H) {
        if (j !== s) {
          var q = this.handlers;
          return g(A(j), function(te) {
            H ? q[te] && q[te].splice(C(q[te], H), 1) : delete q[te];
          }), this;
        }
      },
      /**
       * emit event to the listeners
       * @param {String} event
       * @param {Object} data
       */
      emit: function(j, H) {
        this.options.domEvents && Xr(j, H);
        var q = this.handlers[j] && this.handlers[j].slice();
        if (!(!q || !q.length)) {
          H.type = j, H.preventDefault = function() {
            H.srcEvent.preventDefault();
          };
          for (var te = 0; te < q.length; )
            q[te](H), te++;
        }
      },
      /**
       * destroy the manager and unbinds all events
       * it doesn't unbind dom events, that is the user own responsibility
       */
      destroy: function() {
        this.element && On(this, !1), this.handlers = {}, this.session = {}, this.input.destroy(), this.element = null;
      }
    };
    function On(j, H) {
      var q = j.element;
      if (q.style) {
        var te;
        g(j.options.cssProps, function(pe, xe) {
          te = D(q.style, xe), H ? (j.oldCssProps[te] = q.style[te], q.style[te] = pe) : q.style[te] = j.oldCssProps[te] || "";
        }), H || (j.oldCssProps = {});
      }
    }
    function Xr(j, H) {
      var q = e.createEvent("Event");
      q.initEvent(j, !0, !0), q.gesture = H, H.target.dispatchEvent(q);
    }
    m(ci, {
      INPUT_START: ae,
      INPUT_MOVE: ce,
      INPUT_END: Ee,
      INPUT_CANCEL: Ae,
      STATE_POSSIBLE: Sn,
      STATE_BEGAN: Ht,
      STATE_CHANGED: Gi,
      STATE_ENDED: Xt,
      STATE_RECOGNIZED: ei,
      STATE_CANCELLED: vi,
      STATE_FAILED: yt,
      DIRECTION_NONE: Ge,
      DIRECTION_LEFT: Be,
      DIRECTION_RIGHT: Te,
      DIRECTION_UP: Ne,
      DIRECTION_DOWN: ue,
      DIRECTION_HORIZONTAL: Se,
      DIRECTION_VERTICAL: ze,
      DIRECTION_ALL: nt,
      Manager: ps,
      Input: Ke,
      TouchAction: Tt,
      TouchInput: xn,
      MouseInput: gi,
      PointerEventInput: $i,
      TouchMouseInput: tn,
      SingleTouchInput: kn,
      Recognizer: Yt,
      AttrRecognizer: Zt,
      Tap: on,
      Pan: Ln,
      Swipe: zn,
      Pinch: Wi,
      Rotate: Si,
      Press: rn,
      on: S,
      off: V,
      each: g,
      merge: b,
      extend: v,
      assign: m,
      inherit: w,
      bindFn: x,
      prefixed: D
    });
    var Yr = typeof t != "undefined" ? t : typeof self != "undefined" ? self : {};
    Yr.Hammer = ci, typeof s == "function" && s.amd ? s(function() {
      return ci;
    }) : n.exports ? n.exports = ci : t[i] = ci;
  })(window, document, "Hammer");
})(xA);
class ch {
  constructor(t, e) {
    u(this, "width");
    u(this, "height");
    u(this, "containerDom");
    u(this, "hooks", new Pt());
    u(this, "canvas", document.createElement("canvas"));
    u(this, "config");
    u(this, "state", { enabled: !1 });
    u(this, "five");
    u(this, "scale");
    u(this, "offset", { x: 0, y: 0 });
    u(this, "context");
    u(this, "renderCenter", new P.Vector3());
    u(this, "hammer");
    u(this, "offsetRange");
    u(this, "isPanning", !1);
    u(this, "imageData", new ImageData(1, 1));
    u(this, "onPanstart", () => {
      this.isPanning = !0, this.canvas.style.boxShadow = "0 2px 30px 0 rgba(0,0,0,0.20)";
    });
    u(this, "onPan", (t) => {
      if (!this.isPanning || !this.offsetRange || this.hooks.emit("wantsPanGesture", t))
        return;
      const { translateX: i, translateY: s } = this.getPanOffset(t, this.offsetRange);
      this.canvas.style.transform = `translate3d(${i}px, ${s}px, 100px)`;
    });
    u(this, "onPanend", (t) => {
      if (this.isPanning = !1, this.canvas.style.boxShadow = "none", !this.offsetRange)
        return;
      const { translateX: e, translateY: i } = this.getPanOffset(t, this.offsetRange);
      this.canvas.style.transform = `translate3d(${e}px, ${i}px, 100px)`, this.offset = { x: e, y: i };
    });
    var s, r, o, a;
    if (!t.renderer) {
      console.error("Five Render 未初始化");
      return;
    }
    this.five = t, this.scale = (s = e == null ? void 0 : e.scale) != null ? s : 2, this.width = (r = e == null ? void 0 : e.width) != null ? r : 190, this.height = (a = (o = e == null ? void 0 : e.height) != null ? o : e == null ? void 0 : e.width) != null ? a : 190, this.config = {
      dragEnabled: (e == null ? void 0 : e.dragEnabled) || !1,
      autoFixPCPosition: (e == null ? void 0 : e.autoFixPCPosition) || !1,
      initialPosition: (e == null ? void 0 : e.initialPosition) || { left: "0", top: "0" }
    };
    const i = this.canvas.getContext("2d");
    if (!i)
      throw new Error("CANNOT CREATE CONTEXT2D");
    this.context = i, this.config.dragEnabled && (this.hammer = new wo(this.canvas), this.hammer.on("pan", this.onPan), this.hammer.on("panstart", this.onPanstart), this.hammer.on("panend", this.onPanend)), this.initStyle();
  }
  enable() {
    if (!this.state.enabled)
      return this.state.enabled = !0, this.containerDom && this._appendTo(this.containerDom), this;
  }
  disable() {
    if (this.state.enabled)
      return this.state.enabled = !1, this.canvas.style.visibility = "hidden", this.canvas.remove(), this;
  }
  dispose() {
    var t;
    this.clear(), this.disable(), (t = this.hammer) == null || t.destroy();
  }
  /** 把放大镜放到某一个容器中 */
  appendTo(t) {
    var e;
    return this.containerDom && ((e = this.containerDom) == null || e.removeChild(this.canvas)), this.containerDom = t, this.state.enabled && this._appendTo(t), this;
  }
  /** 清除放大镜渲染内容 */
  clear() {
    var t;
    return (t = this.context) == null || t.clearRect(0, 0, this.canvas.width, this.canvas.height), this;
  }
  /** 放大传入点位周围的内容 */
  renderWithPoint(t) {
    this.containerDom && this.state.enabled && (this.renderCenter = t, this.render(), this.config.autoFixPCPosition && this.autoFixPCPosition());
  }
  /** 放大传入点位周围的内容 */
  renderWithScreenPoint(t) {
    this.containerDom && this.state.enabled && (this.renderCenter = t, this.render(), this.config.autoFixPCPosition && this.autoFixPCPosition());
  }
  resetOffset() {
    this.offset = { x: 0, y: 0 }, this.canvas.style.transform = "translate3d(0px, 0px, 100px)";
  }
  render() {
    if (!this.five.renderer || !this.containerDom)
      return;
    const { scale: t, context: e, width: i, height: s } = this, r = this.five.renderer.getSize(new P.Vector2()), [o, a] = (() => {
      if (this.renderCenter.isVector3) {
        const v = this.renderCenter.clone().project(this.five.camera);
        return [(v.x + 1) / 2 * r.x, (v.y + 1) / 2 * r.y];
      } else
        return [this.renderCenter.x, r.y - this.renderCenter.y];
    })(), l = 1, c = i / t, h = s / t, d = l * t, f = /* @__PURE__ */ new Map();
    this.five.scene.traverse((v) => {
      v.disableGetPixel === !0 && (f.set(v, v.visible), v.visible = !1);
    });
    const g = this.five.getPixels(o - c / 2, a - c / 2, c, h, d);
    f.forEach((v, b) => {
      b.visible = v;
    });
    const p = Math.floor(i * l), m = Math.floor(s * l);
    DA(g, p, m), (this.imageData.width !== p || this.imageData.height !== m) && (this.imageData = new ImageData(p, m)), this.imageData.data.set(g), e.putImageData(this.imageData, 0, 0), this.canvas.style.visibility = "visible";
  }
  getRenderCenter() {
    return this.renderCenter;
  }
  _appendTo(t) {
    if (this.resetOffset(), t.appendChild(this.canvas), !this.offsetRange) {
      const e = this.canvas.getBoundingClientRect(), i = t.getBoundingClientRect(), s = i.right - e.right, r = i.bottom - e.bottom, o = i.left - e.left, a = i.top - e.top;
      this.offsetRange = {
        min: { x: o, y: a },
        max: { x: s, y: r }
      };
    }
  }
  autoFixPCPosition() {
    if (!this.containerDom)
      return;
    const { width: t, height: e } = this, { clientWidth: i, clientHeight: s } = this.containerDom, [r, o, a] = (() => {
      if (this.renderCenter.isVector3) {
        const l = this.renderCenter.clone().project(this.five.camera);
        return [
          //
          (l.x + 1) / 2 * i,
          -(l.x - 1) / 2 * i,
          -(l.y - 1) / 2 * s
        ];
      } else
        return [this.renderCenter.x, i - this.renderCenter.x, this.renderCenter.y];
    })();
    r < 183 ? (this.canvas.style.top = -e / 2 + "px", this.canvas.style.left = "90px") : a < 183 ? (this.canvas.style.top = "90px", this.canvas.style.left = -t / 2 + "px") : o < 183 ? (this.canvas.style.top = -e / 2 + "px", this.canvas.style.left = -t - 90 + "px") : (this.canvas.style.left = -t / 2 + "px", this.canvas.style.top = -e - 90 + "px"), this.canvas.style.transform = `translate3d(${r}px, ${a}px, 10px)`, this.offset = { x: r, y: a };
  }
  initStyle() {
    const t = this.canvas;
    t.classList.add("five-plugin__magnifier"), t.style.position = "absolute", t.style.pointerEvents = this.config.dragEnabled ? "all" : "none", t.style.borderRadius = "50%", t.style.zIndex = "99";
    const e = 1;
    t.setAttribute("width", (this.width * e).toString()), t.setAttribute("height", (this.height * e).toString()), t.style.border = "2px solid rgba(255,255,255,0.20)", t.style.width = this.width + "px", t.style.height = this.height + "px", t.style.top = this.config.initialPosition.top, t.style.left = this.config.initialPosition.left, t.style.transform = "translate(0,0,100px)", t.style.visibility = "hidden", this.config.dragEnabled && (this.canvas.style.cursor = "pointer");
  }
  getPanOffset(t, e) {
    const {
      min: { x: i, y: s },
      max: { x: r, y: o }
    } = e, a = this.offset.x + t.deltaX, l = this.offset.y + t.deltaY, c = Math.min(Math.max(a, i), r), h = Math.min(Math.max(l, s), o);
    return { translateX: c, translateY: h };
  }
}
function la(n, t, e) {
  const i = n[t], s = n[e];
  i === void 0 || s === void 0 || (n[t] = s, n[e] = i);
}
function DA(n, t, e) {
  const i = e / 2;
  for (let s = 1; s <= i; s++) {
    const r = e - (s - 1);
    for (let o = 1; o <= t; o++) {
      const a = (s - 1) * t + o - 1, l = (r - 1) * t + o - 1;
      la(n, a * 4 + 0, l * 4 + 0), la(n, a * 4 + 1, l * 4 + 1), la(n, a * 4 + 2, l * 4 + 2), la(n, a * 4 + 3, l * 4 + 3);
    }
  }
}
function SA(n, t) {
  const { offsetWidth: e, offsetHeight: i } = t, { top: s, left: r } = t.getBoundingClientRect();
  return new P.Vector2().set((n.x - r) / e * 2 - 1, -(n.y - s) / i * 2 + 1);
}
function gg(n, t) {
  const { offsetWidth: e, offsetHeight: i } = t;
  return new P.Vector2().set(n.x / e * 2 - 1, -n.y / i * 2 + 1);
}
var gn = function(n) {
  ur.call(this), this.element = n, this.element.style.position = "absolute", this.element.style.pointerEvents = "auto", this.element.style.userSelect = "none", this.element.setAttribute("draggable", !1), this.addEventListener("removed", function() {
    this.traverse(function(t) {
      t.element instanceof Element && t.element.parentNode !== null && t.element.remove();
    });
  });
};
gn.prototype = Object.create(ur.prototype);
gn.prototype.constructor = gn;
var za = function(n) {
  gn.call(this, n);
};
za.prototype = Object.create(gn.prototype);
za.prototype.constructor = za;
let TA = function(n) {
  let t = this, e, i, s, r, o = new tt(), a = {
    camera: { fov: 0, style: "" },
    objects: /* @__PURE__ */ new Map()
  }, l = document.createElement("div");
  l.style.overflow = "hidden", this.domElement = l;
  let c = document.createElement("div");
  c.style.WebkitTransformStyle = "preserve-3d", c.style.transformStyle = "preserve-3d", c.style.pointerEvents = "none", l.appendChild(c), this.getSize = function() {
    return {
      width: e,
      height: i
    };
  }, this.setSize = function(m, v) {
    e = m, i = v, s = e / 2, r = i / 2, l.style.width = m + "px", l.style.height = v + "px", c.style.width = m + "px", c.style.height = v + "px";
  };
  function h(m) {
    return Math.abs(m) < 1e-10 ? 0 : m;
  }
  function d(m) {
    let v = m.elements;
    return "matrix3d(" + h(v[0]) + "," + h(-v[1]) + "," + h(v[2]) + "," + h(v[3]) + "," + h(v[4]) + "," + h(-v[5]) + "," + h(v[6]) + "," + h(v[7]) + "," + h(v[8]) + "," + h(-v[9]) + "," + h(v[10]) + "," + h(v[11]) + "," + h(v[12]) + "," + h(-v[13]) + "," + h(v[14]) + "," + h(v[15]) + ")";
  }
  function f(m, v) {
    let b = m.elements;
    return "translate(-50%,-50%)" + ("matrix3d(" + h(b[0]) + "," + h(b[1]) + "," + h(b[2]) + "," + h(b[3]) + "," + h(-b[4]) + "," + h(-b[5]) + "," + h(-b[6]) + "," + h(-b[7]) + "," + h(b[8]) + "," + h(b[9]) + "," + h(b[10]) + "," + h(b[11]) + "," + h(b[12]) + "," + h(b[13]) + "," + h(b[14]) + "," + h(b[15]) + ")");
  }
  function g(m) {
    var v;
    if (m.isCSS3DObject) {
      const b = (v = m.mode) != null ? v : "front";
      (!n || b === n) && (m.element.style.display = "none");
    }
    for (let b = 0, w = m.children.length; b < w; b++)
      g(m.children[b]);
  }
  function p(m, v, b, w, x) {
    var k;
    if (m.visible === !1) {
      g(m);
      return;
    }
    if (m.isCSS3DObject) {
      const T = (k = m.mode) != null ? k : "front";
      if (n && T !== n)
        return;
      m.flag = x;
      const S = m.layers.test(b.layers) === !0, V = m.element;
      if (V.style.display = S === !0 ? "" : "none", S) {
        m.onBeforeRender(t, v, b);
        let z;
        m.isCSS3DSprite ? (o.copy(b.matrixWorldInverse), o.transpose(), o.copyPosition(m.matrixWorld), o.scale(m.scale), o.elements[3] = 0, o.elements[7] = 0, o.elements[11] = 0, o.elements[15] = 1, z = f(o)) : z = f(m.matrixWorld);
        let O = a.objects.get(m);
        if (O === void 0 || O.style !== z) {
          V.style.WebkitTransform = z, V.style.transform = z;
          let A = { style: z };
          a.objects.set(m, A);
        }
        V.style.display = m.visible ? "" : "none", V.parentNode !== c && c.appendChild(V), m.onAfterRender(t, v, b);
      }
    }
    for (let T = 0, S = m.children.length; T < S; T++)
      p(m.children[T], v, b, w, x);
  }
  this.render = function(m, v) {
    let b = v.projectionMatrix.elements[5] * r;
    if (a.camera.fov !== b && (v.isPerspectiveCamera ? (l.style.WebkitPerspective = b + "px", l.style.perspective = b + "px") : (l.style.WebkitPerspective = "", l.style.perspective = ""), a.camera.fov = b), m.autoUpdate === !0 && m.updateMatrixWorld(), v.parent === null && v.updateMatrixWorld(), v.isOrthographicCamera)
      var w = -(v.right + v.left) / 2, x = (v.top + v.bottom) / 2;
    let k = v.isOrthographicCamera ? "scale(" + b + ")translate(" + h(w) + "px," + h(x) + "px)" + d(v.matrixWorldInverse) : "translateZ(" + b + "px)" + d(v.matrixWorldInverse), T = k + "translate(" + s + "px," + r + "px)";
    a.camera.style !== T && (c.style.WebkitTransform = T, c.style.transform = T, a.camera.style = T);
    const S = m.uuid + "_" + performance.now().toString();
    p(m, m, v, k, S), a.objects.forEach(function(V, z) {
      z.flag !== S && (z.element.remove(), a.objects.delete(z));
    });
  };
};
function yr(n, t) {
  const e = Math.round(n);
  return e % 2 === 0 ? e : e + (t != null && t.floor ? -1 : 1);
}
function LA(n, t, e = !0) {
  if (!n)
    return console.error("createResizeObserver: element is undefined"), { observe: () => {
    }, unobserve: () => {
    } };
  const i = () => {
    const r = yr(n.clientWidth, { floor: !0 }), o = yr(n.clientHeight, { floor: !0 });
    t(r, o);
  };
  if (typeof ResizeObserver == "undefined" || !ResizeObserver)
    return console.warn("createResizeObserver: ResizeObserver is undefined"), { observe: () => i(), unobserve: () => {
    } };
  const s = new ResizeObserver(i);
  return e && i(), {
    observe: () => s.observe(n),
    unobserve: () => s.unobserve(n)
  };
}
class Oa extends TA {
  constructor(e) {
    super(e);
    u(this, "wrapper");
    u(this, "domElementWrapper", document.createElement("div"));
    u(this, "requestAnimationFrameId");
    u(this, "resizeDisoper");
    this.domElementWrapper.classList.add("ICSS3DRendererWrapper"), this.domElementWrapper.style.position = "absolute", this.domElementWrapper.style.top = "0", this.domElementWrapper.style.left = "0", this.domElementWrapper.style.width = "100%", this.domElementWrapper.style.height = "100%", this.domElementWrapper.style.userSelect = "none", this.domElementWrapper.style.pointerEvents = "none", this.domElement.classList.add("ICSS3DRenderer"), this.domElement.style.position = "absolute", this.domElement.style.top = "0", this.domElement.style.left = "0", this.domElement.style.userSelect = "none", this.domElement.style.pointerEvents = "none", this.domElementWrapper.appendChild(this.domElement);
  }
  setWrapper(e) {
    if (!e)
      throw new Error("CSS3DRenderer: wrapper is required");
    if ((() => {
      for (let r = 0; r < e.children.length; r++)
        if (e.children.item(r) === this.domElementWrapper)
          return !0;
      return !1;
    })())
      return;
    const s = this.wrapper;
    return s && s.contains(this.domElementWrapper) && this.domElementWrapper.remove(), this.appendToElement(e), this.wrapper = e, this;
  }
  appendToElement(e) {
    e.appendChild(this.domElementWrapper);
    const i = (o, a) => this.setSize(o, a), { observe: s, unobserve: r } = LA(this.domElementWrapper, i, !0);
    s(), this.resizeDisoper = r, this.wrapper = e;
  }
  renderEveryFrame(e, i) {
    if (this.wrapper || console.warn("wrapper is not find, creating a html element and call setWrapper(wrapper)", this, e), this.requestAnimationFrameId)
      return;
    const s = () => {
      this.requestAnimationFrameId = requestAnimationFrame(s), e.visible && this.render(e, i);
    };
    s();
  }
  stopRender() {
    this.requestAnimationFrameId && cancelAnimationFrame(this.requestAnimationFrameId);
  }
  dispose() {
    var e;
    this.stopRender(), (e = this.resizeDisoper) == null || e.call(this), this.domElementWrapper.remove();
  }
}
function ui(n) {
  return $(this, null, function* () {
    return new Promise((t) => {
      if (vg(n))
        t();
      else {
        const e = (i) => {
          const s = Ci(n);
          i === s && (n.off("modelLoaded", e), t());
        };
        n.on("modelLoaded", e);
      }
    });
  });
}
function vg(n) {
  var t;
  return (t = Ci(n)) == null ? void 0 : t.loaded;
}
const zi = document.createElement("div");
zi.classList.add("behindFiveElement");
zi.style.position = "absolute";
zi.style.top = "0";
zi.style.left = "0";
zi.style.width = "100%";
zi.style.height = "100%";
zi.style.pointerEvents = "none";
function hh(n) {
  var i, s, r, o, a;
  const t = (a = (s = Vl(n.getElement())) != null ? s : Vl((i = n.getElement()) == null ? void 0 : i.parentElement)) != null ? a : Vl((o = (r = n.getElement()) == null ? void 0 : r.parentElement) == null ? void 0 : o.parentElement), e = t == null ? void 0 : t.parentElement;
  if (e)
    return e.contains(zi) || t.parentElement.insertBefore(zi, t), zi;
  console.error(
    "Can not find a valid element to insert behindFiveElement. How to fix it: https://github.com/realsee-developer/dnalogel/tree/main/plugins/src/CSS3DRenderPlugin/README.md"
  );
}
function Vl(n) {
  var a;
  if (!n)
    return;
  const t = (a = n.style.position) != null ? a : getComputedStyle(n).position;
  if (t !== "fixed" && t !== "absolute" && t !== "relative")
    return;
  const e = getComputedStyle(n), i = e.backgroundColor, s = e.backgroundImage;
  if (!(i !== "transparent" && i !== "rgba(0, 0, 0, 0)" && i !== "" || s !== "none" && s !== ""))
    return n;
}
let Kr = [null, null, () => null];
function Vo(n) {
  var s;
  if (Kr) {
    if (Kr[0] === n)
      return Kr[2];
    (s = Kr[1]) == null || s.dispose();
  }
  const t = new Oa("front");
  t.domElementWrapper.style.zIndex = "1";
  const e = new Oa("behind");
  ui(n).then(() => {
    var a;
    const r = (a = n.getElement()) == null ? void 0 : a.parentElement, o = hh(n);
    if (!r)
      return console.error("initialCSS3DRender: five element is not exist"), () => null;
    if (t.appendToElement(r), t.renderEveryFrame(n.scene, n.camera), !o)
      return console.error("initialCSS3DRender: behindWrapper is not exist"), () => null;
    e.appendToElement(o), e.renderEveryFrame(n.scene, n.camera);
  });
  const i = () => {
    t.dispose(), e.dispose();
  };
  return Kr = [n, t, i], i;
}
const zA = 16777215, OA = 16777215, jA = 1, RA = 0.5, dh = 0.6;
class ri extends ur {
  constructor() {
    super();
    u(this, "name", "IObject3D");
    u(this, "needsRender");
  }
  removeChildren() {
    for (; this.children.length > 0; )
      this.remove(this.children[0]);
    return this;
  }
  add(...e) {
    const i = e.filter(Boolean);
    return i.length === 0 ? this : super.add(...i);
  }
  addIfNotExists(...e) {
    return e.forEach((i) => {
      this.children.includes(i) || this.add(i);
    }), this;
  }
  remove(...e) {
    if (e.length === 0)
      return this;
    const i = e.filter(Boolean);
    return super.remove(...i);
  }
  removeFromParent() {
    const e = this.parent;
    return e !== null && e.remove(this), this;
  }
}
function $t(...n) {
  const t = new fe();
  return n.forEach((e) => t.add(e)), t.divideScalar(n.length), t;
}
function uh(n, t) {
  if (!document.getElementById("LineLengthTagStyle")) {
    const r = document.createElement("style");
    r.id = "LineLengthTagStyle", document.head.appendChild(r), r.innerHTML = `
    .LineLengthTag {
      cursor: default;
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: Arial-BoldMT;
      font-weight: BoldMT;
      color: #041066;
      letter-spacing: 0;
      line-height: 20px;
      background-color: #FFFFFF;
      border-radius: 12px;
      padding: 2px 8px;
      left: 50%;
      transform: translate(-50%, -50%);
      word-break: keep-all;
      --distance-scale: 1; /* Default scale if not provided */
      transition: font-size 0.5s ease; /* Smooth transition for font size */
    }
    
    /* sm screen */
    @media screen and (max-width: 499px) {
      .LineLengthTag {
        font-size: calc(12px + (14px - 12px) * var(--distance-scale));
      }
    }
    
    /* md screen */
    @media screen and (min-width: 500px) and (max-width: 929px) {
      .LineLengthTag {
        font-size: calc(12px + (14px - 12px) * var(--distance-scale));
      }
    }
    
    /* lg screen */
    @media screen and (min-width: 930px) and (max-width: 1365px) {
      .LineLengthTag {
        font-size: calc(14px + (16px - 14px) * var(--distance-scale));
      }
    }
    
    /* xl screen */
    @media screen and (min-width: 1366px) and (max-width: 2549px) {
      .LineLengthTag {
        font-size: calc(14px + (16px - 14px) * var(--distance-scale));
      }
    }
    
    /* xxl screen */
    @media screen and (min-width: 2550px) {
      .LineLengthTag {
        font-size: calc(0.875rem + (1rem - 0.875rem) * var(--distance-scale));
      }
    }
    `;
  }
  const e = t != null && t.offsetY ? `translateY(${t.offsetY}px)` : "";
  return `
    <div class="LineLengthTag" style="${e ? `transform: translate(-50%, -50%) ${e};` : ""}${t != null && t.style ? " " + t.style : ""}">
      ${n}
    </div>
  `;
}
function bn(n) {
  return arguments.length === 0 ? [] : Array.isArray(n) ? n : [n];
}
function Po(n, t) {
  const i = bn(t).map((s) => n.localToWorld(s.clone()));
  return Array.isArray(t) ? i : i[0];
}
function BA(n, t) {
  const i = bn(t).map((s) => n.worldToLocal(s.clone()));
  return Array.isArray(t) ? i : i[0];
}
class Ia extends Kv {
  constructor(...t) {
    super(...t), this.setAttribute("instanceStart", new P.BufferAttribute(new Float32Array(), 3)), this.setAttribute("instanceEnd", new P.BufferAttribute(new Float32Array(), 3));
  }
  fromEdgesGeometry(t) {
    if (t.attributes.position.array.length < 6)
      return this.setAttribute("position", new P.BufferAttribute(new Float32Array(), 3)), this.setAttribute("instanceStart", new P.BufferAttribute(new Float32Array(), 3)), this.setAttribute("instanceEnd", new P.BufferAttribute(new Float32Array(), 3)), this;
    if (t instanceof P.EdgesGeometry) {
      const e = new P.InstancedInterleavedBuffer(t.attributes.position.array, 6, 1);
      this.setPositions(t.attributes.position.array), this.setAttribute("instanceStart", new P.InterleavedBufferAttribute(e, 3, 0)), this.setAttribute("instanceEnd", new P.InterleavedBufferAttribute(e, 3, 3));
    } else
      super.fromEdgesGeometry(t);
    return this;
  }
  toJSON() {
    return {
      type: "FiveLineGeometry",
      attributes: this.attributes
    };
  }
}
function si(n) {
  return !_e(n);
}
function _e(n) {
  return n != null;
}
class VA extends $v {
  constructor(e) {
    var i;
    super(e);
    u(this, "_three_color");
    u(this, "_dashed");
    _e(e == null ? void 0 : e.color) && (this.three_color = (i = e == null ? void 0 : e.color) != null ? i : 16777215), Object.keys(e).forEach((s) => {
      ["color", "dashed", "dashScale", "dashSize", "gapSize", "resolution"].includes(s) || s in this && (this[s] = e[s]);
    }), Object.defineProperties(this, {
      dashed: {
        get() {
          return this._dashed;
        },
        set(s) {
          this._dashed = s, s ? this.defines.USE_DASH = "" : delete this.defines.USE_DASH, this.needsUpdate = !0;
        }
      }
    });
  }
  get three_color() {
    return this._three_color;
  }
  set three_color(e) {
    this._three_color = e, this.color = e;
  }
  toJSON() {
    return {
      type: "FiveLineMaterial",
      color: this.color
    };
  }
}
class Rd extends eA {
  constructor(t, e) {
    super(t, e);
  }
  toJSON() {
    return {
      type: "Five_THREE_Line2",
      geometryAttributes: this.geometry.attributes
    };
  }
}
const _l = {
  uniforms: P.UniformsUtils.merge([
    P.UniformsLib.common,
    P.UniformsLib.fog,
    {
      linewidth: { value: 1 },
      resolution: { value: new P.Vector2(1, 1) },
      dashScale: { value: 1 },
      dashSize: { value: 1 },
      gapSize: { value: 1 },
      // todo FIX - maybe change to totalSize
      opacity: { value: 1 }
    }
  ]),
  vertexShader: `
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,
  fragmentShader: `
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) < dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`
};
class Ag extends P.ShaderMaterial {
  // to be set by renderer
  constructor(e) {
    super({
      uniforms: P.UniformsUtils.clone(_l.uniforms),
      vertexShader: _l.vertexShader,
      fragmentShader: _l.fragmentShader,
      clipping: !0
      // required for clipping support
    });
    u(this, "color");
    u(this, "dashed");
    u(this, "dashScale");
    u(this, "dashSize");
    u(this, "gapSize");
    u(this, "resolution");
    this.type = "LineMaterial", this.dashed = !1, Object.defineProperties(this, {
      color: {
        enumerable: !0,
        get() {
          return this.uniforms.diffuse.value;
        },
        set(i) {
          this.uniforms.diffuse.value = i;
        }
      },
      linewidth: {
        enumerable: !0,
        get() {
          return this.uniforms.linewidth.value;
        },
        set(i) {
          this.uniforms.linewidth.value = i;
        }
      },
      dashScale: {
        enumerable: !0,
        get() {
          return this.uniforms.dashScale.value;
        },
        set(i) {
          this.uniforms.dashScale.value = i;
        }
      },
      dashSize: {
        enumerable: !0,
        get() {
          return this.uniforms.dashSize.value;
        },
        set(i) {
          this.uniforms.dashSize.value = i;
        }
      },
      gapSize: {
        enumerable: !0,
        get() {
          return this.uniforms.gapSize.value;
        },
        set(i) {
          this.uniforms.gapSize.value = i;
        }
      },
      opacity: {
        enumerable: !0,
        get() {
          return this.uniforms.opacity.value;
        },
        set(i) {
          this.uniforms.opacity.value = i;
        }
      },
      resolution: {
        enumerable: !0,
        get() {
          return this.uniforms.resolution.value;
        },
        set(i) {
          this.uniforms.resolution.value.copy(i);
        }
      }
    }), this.setValues(e);
  }
}
Object.assign(Ag.prototype, { isLineMaterial: !0 });
class _A extends Ag {
  constructor(e) {
    var i;
    super(e);
    u(this, "_three_color");
    u(this, "_dashed");
    _e(e == null ? void 0 : e.color) && (this.three_color = (i = e == null ? void 0 : e.color) != null ? i : 16777215), Object.keys(e).forEach((s) => {
      ["color", "dashed", "dashScale", "dashSize", "gapSize", "resolution"].includes(s) || s in this && (this[s] = e[s]);
    }), Object.defineProperties(this, {
      dashed: {
        get() {
          return this._dashed;
        },
        set(s) {
          this._dashed = s, s ? this.defines.USE_DASH = "" : delete this.defines.USE_DASH, this.needsUpdate = !0;
        }
      }
    });
  }
  get three_color() {
    return this._three_color;
  }
  set three_color(e) {
    this._three_color = e, this.color = e;
  }
  toJSON() {
    return {
      type: "FiveLineMaterial",
      color: this.color
    };
  }
}
function HA(n, t = "m") {
  let e;
  if (t === "m")
    return e = n.toFixed(2), e === "0.00" ? void 0 : e + "m";
  if (t === "mm")
    return e = (n * 1e3).toFixed(0), e === "0" ? void 0 : e + "mm";
  if (t === "ft") {
    const i = Math.floor(n / 0.3048), s = Math.floor(n % 0.3048 / 0.0254);
    return i === 0 && s === 0 ? void 0 : `${i}′${s}″`;
  }
}
function FA(n, t = "m") {
  let e;
  if (t === "m")
    return e = n.toFixed(2), e === "0.00" ? void 0 : e + "m²";
  if (t === "mm")
    return e = (n * 1e3 * 1e3).toFixed(0), e === "0" ? void 0 : e + "mm²";
  if (t === "ft") {
    const i = (n * 10.76).toFixed(1);
    return i === "0.0" ? void 0 : i + "ft²";
  }
}
const Hn = class {
  static checkDom(t) {
    let e = t, i = !0;
    for (; e.parent; )
      i === !0 && e.visible === !1 && (i = !1), e = e.parent;
    e.type === "Scene" ? (t._onAdded(), i ? t._onShowed() : t._onHidden()) : t._onRemoved();
  }
  static checkDomEveryFrame() {
    Hn.checkDomEveryFrameIsRunning || (Hn.checkDomEveryFrameIsRunning = !0, Hn._checkDomEveryFrame());
  }
  static _checkDomEveryFrame() {
    Hn.cacheObject.forEach((t) => Hn.checkDom(t)), requestAnimationFrame(Hn._checkDomEveryFrame);
  }
};
let Wt = Hn;
u(Wt, "cacheObject", /* @__PURE__ */ new Set()), u(Wt, "checkDomEveryFrameIsRunning", !1);
class fi extends ri {
  constructor(e) {
    var o, a, l, c;
    super();
    u(this, "name", "LineMesh");
    u(this, "type", "Line2");
    u(this, "object");
    u(this, "points", []);
    u(this, "doms", []);
    u(this, "highlighted", !1);
    u(this, "_geometry");
    u(this, "line1");
    u(this, "line2");
    u(this, "opacityBeforeHighlight");
    u(this, "colorBeforeHighlight");
    u(this, "paramsStyle", {});
    u(this, "lastRenderDomItem");
    u(this, "lastFOV");
    u(this, "_onAdded", () => {
      this.doms.length === 0 && this.paramsStyle.lengthEnable && this.updateDomItems();
    });
    u(this, "_onRemoved", () => {
      this.doms.forEach((e) => e.destroy()), this.doms = [];
    });
    u(this, "_onShowed", () => {
      this.doms.forEach((e) => e.container.style.display = "block");
    });
    u(this, "_onHidden", () => {
      this.doms.forEach((e) => e.container.style.display = "none");
    });
    // Handle camera updates (zoom changes)
    u(this, "onCameraUpdate", () => {
      var e;
      (e = this.five) != null && e.camera && this.lastFOV !== this.five.camera.fov && (this.lastFOV = this.five.camera.fov, this.updateDomItems({ force: !0 }));
    });
    // Handle panorama point changes
    u(this, "onPanoArrived", () => {
      setTimeout(() => this.updateDomItems({ force: !0 }), 100);
    });
    this.paramsStyle = _({ dashed: !1, lineOpacity: 1 }, e), this.geometry = new Ia();
    const i = {
      color: new P.Color((o = e == null ? void 0 : e.lineColor) != null ? o : OA),
      linewidth: (a = e == null ? void 0 : e.lineWidth) != null ? a : jA,
      dashScale: 1,
      dashSize: 0.02,
      gapSize: 0.02,
      opacity: (l = e == null ? void 0 : e.lineOpacity) != null ? l : 1,
      depthWrite: !1,
      transparent: !0
    }, s = new VA(de(_({}, i), { dashed: !1, depthTest: !0 })), r = new _A(de(_({}, i), { dashed: !0, depthTest: !1 }));
    if (this.line1 = new Rd(this.geometry, s), this.line2 = new Rd(this.geometry, r), this.line1.renderOrder = 2, this.line2.renderOrder = 2, this.line1.name = "line1", this.line2.name = "line2", this.add(this.line1), this.five) {
      const h = (c = this.five.renderer) == null ? void 0 : c.getSize(new P.Vector2());
      h && this.setResolution(h.width, h.height), this.five.on("cameraUpdate", this.onCameraUpdate), this.five.on("cameraFovUpdate", this.onCameraUpdate), this.five.on("panoArrived", this.onPanoArrived);
    }
    e && this.setStyle(e), e != null && e.points && this.setPoints(e.points), this.addEventListener("removed", () => {
      this.five && (this.five.off("cameraUpdate", this.onCameraUpdate), this.five.off("cameraFovUpdate", this.onCameraUpdate), this.five.off("panoArrived", this.onPanoArrived)), Wt.cacheObject.delete(this), Wt.checkDom(this);
    }), this.addEventListener("added", () => {
      Wt.cacheObject.add(this);
    }), Wt.checkDomEveryFrame();
  }
  get style() {
    return {
      lineColor: this.color,
      lineWidth: this.lineWidth,
      lineOpacity: this.lineOpacity,
      dashed: this.dashed,
      occlusionVisibility: this.occlusionVisibility,
      occlusionMode: this.occlusionMode,
      lengthEnable: this.paramsStyle.lengthEnable,
      tip: this.paramsStyle.tip
    };
  }
  get lineOpacity() {
    var e;
    return (e = this.line1.material.opacity) != null ? e : this.paramsStyle.lineOpacity;
  }
  get lineWidth() {
    var e;
    return (e = this.line1.material.linewidth) != null ? e : this.paramsStyle.lineWidth;
  }
  get color() {
    var e;
    return new P.Color((e = this.line1.material.three_color) != null ? e : this.paramsStyle.lineColor);
  }
  get dashed() {
    return this.paramsStyle.dashed;
  }
  get occlusionVisibility() {
    return this.paramsStyle.occlusionVisibility;
  }
  get occlusionMode() {
    return this.paramsStyle.occlusionMode;
  }
  get five() {
    var i, s;
    const e = (s = (i = window.globalModules) == null ? void 0 : i.five) != null ? s : window.$five;
    return e || console.error("请先调用 Sculpt.modules.init(five) "), e;
  }
  set geometry(e) {
    var i;
    this._geometry = e, this.line1 && (this.line1.geometry = e), this.line2 && (this.line2.geometry = e), (i = this.line1) == null || i.computeLineDistances();
  }
  get geometry() {
    return this._geometry;
  }
  updateMatrixWorld(e) {
    var i;
    if (super.updateMatrixWorld(e), this.points) {
      const s = (i = Po(this, this.points)) == null ? void 0 : i.map((r) => r.toArray().join(",")).join(",");
      s !== this.lastRenderDomItem && (this.updateDomItems(), this.lastRenderDomItem = s);
    }
  }
  setPoints(e) {
    if (this.points.length === 0 && e.length === 0)
      return;
    const i = e.map(Qe).filter(_e);
    if (this.points = i, i.length < 2) {
      const r = new Ia();
      this.line1.geometry = r, this.line2.geometry = r, this.updateDomItems();
      return;
    }
    const s = i.flatMap((r) => [r.x, r.y, r.z]);
    if (s.length > 2) {
      this.line1.geometry.dispose();
      const r = new Ia();
      this.line1.geometry = r, this.line2.geometry = r;
    }
    this.line1.geometry.setPositions(s), this.line1.computeLineDistances(), this.updateDomItems(), this.needsRender = !0;
  }
  setResolution(e, i) {
    const s = this.line1.material.resolution;
    (s.x !== e || s.y !== i) && (s.set(e, i), this.needsRender = !0);
    const r = this.line2.material.resolution;
    (r.x !== e || r.y !== i) && (r.set(e, i), this.needsRender = !0);
  }
  setStyle(e) {
    var r, o, a, l;
    if (this.paramsStyle = _(_({}, this.paramsStyle), e), _e(e.lineColor)) {
      const c = new P.Color(e.lineColor);
      this.line1.material.three_color = c, this.line2.material.three_color = c;
    }
    _e(e.lineWidth) && (this.line1.material.linewidth = e.lineWidth, this.line2.material.linewidth = e.lineWidth), _e(e.dashed) && (this.line1.material.dashed = e.dashed), _e(e.lineOpacity) && (this.line1.material.opacity = e.lineOpacity, this.line2.material.opacity = e.lineOpacity), this.updateDomItems({ force: !0 });
    const i = (o = (r = e.occlusionVisibility) != null ? r : this.paramsStyle.occlusionVisibility) != null ? o : !0, s = (l = (a = e.occlusionMode) != null ? a : this.paramsStyle.occlusionMode) != null ? l : "translucence";
    i ? this.dashed ? (this.remove(this.line2), this.line1.material.dashed = !0, this.line1.material.depthTest = !1) : s === "depthTest" ? (this.remove(this.line2), this.line1.material.dashed = !1, this.line1.material.depthTest = !1) : s === "translucence" && (this.line1.material.depthTest = !0, this.line2.material.depthTest = !1, this.line1.material.dashed = !0, this.line2.material.dashed = !0, this.addIfNotExists(this.line2)) : (this.remove(this.line2), this.line1.material.depthTest = !0, this.line1.material.dashed = this.paramsStyle.dashed), this.doms.forEach((c) => c.intersectCheck = !i), this.needsRender = !0;
  }
  highlight(e) {
    var i, s;
    if (this.highlighted = !0, e != null && e.color) {
      const r = new P.Color(e.color);
      this.colorBeforeHighlight = (i = this.colorBeforeHighlight) != null ? i : this.line1.material.three_color, this.line1.material.three_color = r, this.line2.material.three_color = r;
    } else {
      this.opacityBeforeHighlight = (s = this.opacityBeforeHighlight) != null ? s : this.line1.material.opacity;
      const r = this.opacityBeforeHighlight * dh;
      this.line1.material.opacity = r, this.line2.material.opacity = r;
    }
    this.needsRender = !0;
  }
  unhighlight() {
    this.highlighted && (this.highlighted = !1, _e(this.opacityBeforeHighlight) && (this.line1.material.opacity = this.opacityBeforeHighlight, this.line2.material.opacity = this.line1.material.opacity, this.opacityBeforeHighlight = void 0), _e(this.colorBeforeHighlight) && (this.line1.material.three_color = this.colorBeforeHighlight, this.line2.material.three_color = this.colorBeforeHighlight, this.colorBeforeHighlight = void 0), this.needsRender = !0);
  }
  updateDomItems(e) {
    const i = () => {
      this.doms.forEach((r) => r.destroy()), this.doms = [];
    };
    if (!this.points || this.points.length < 2 || !this.paramsStyle.lengthEnable && !this.paramsStyle.tip)
      return i();
    if (!this.five)
      return console.error("Five not found");
    const s = this.points.map((r, o) => o !== 0 ? [this.points[o - 1], r] : null).filter(_e).map((r) => Po(this, r));
    s.forEach(([r, o], a) => {
      var h;
      const l = $t(r, o);
      this.doms[a] = (h = this.doms[a]) != null ? h : (() => {
        var g;
        const d = new Bo(this.five), f = (g = this.paramsStyle.occlusionVisibility) != null ? g : !0;
        return d.intersectCheck = !f, d.simulate3D = !0, d;
      })(), this.doms[a].setPosition(l, [r, o]);
      const c = (d, f) => {
        var p, m, v;
        const g = (p = f == null ? void 0 : f.force) != null ? p : !1;
        if (!(this.doms[a].__text === d && !g))
          if (this.doms[a].__text = d, d instanceof HTMLElement)
            this.doms[a].container.innerHTML = "", this.doms[a].container.appendChild(d);
          else if (d) {
            const b = (() => {
              if (!this.five || !this.five.camera)
                return 0;
              const A = this.five.getElement();
              if (!A)
                return 0;
              const C = A.clientWidth, I = A.clientHeight, E = C / 2, D = I / 2, L = r.clone().project(this.five.camera), N = o.clone().project(this.five.camera), G = {
                x: L.x * E,
                y: L.y * D
              }, Z = {
                x: N.x * E,
                y: N.y * D
              };
              return Math.sqrt(Math.pow(Z.x - G.x, 2) + Math.pow(Z.y - G.y, 2));
            })(), w = (() => !this.five || !this.five.camera ? 20 : $t(r, o).distanceTo(this.five.camera.position))(), x = ((v = (m = this.five) == null ? void 0 : m.camera) == null ? void 0 : v.fov) || 60, k = 2 * Math.tan(0.5 * x / 180 * Math.PI), S = `--distance-scale: ${Math.max(Math.min(1 - k * w / 40, 1), 0)};`, V = (A) => {
              const C = document.createElement("div");
              C.classList.add("LineLengthTag"), C.style.visibility = "hidden", C.style.position = "absolute", C.style.padding = "2px 8px", C.style.fontFamily = "Arial-BoldMT", C.style.fontSize = "14px", C.innerText = A, document.body.appendChild(C);
              const I = C.offsetWidth;
              return document.body.removeChild(C), I;
            };
            let z = 0;
            const O = V(d);
            b > 0 && O > b && (z = -20), this.doms[a].container.innerHTML = uh(d, {
              style: `${S} ${this.paramsStyle.cssStyle || ""}`,
              offsetY: z
            });
          } else
            this.doms[a].container.innerHTML = "";
      };
      if (this.paramsStyle.tip)
        c(this.paramsStyle.tip, e);
      else {
        const d = HA(r.distanceTo(o), this.paramsStyle.lengthUnit);
        c(d || null, e);
      }
    }), this.doms.length > s.length && (this.doms.slice(s.length).forEach((r) => r.destroy()), this.doms.length = s.length);
  }
}
class NA extends za {
  constructor() {
    super(...arguments);
    u(this, "isCSS3DSprite", !0);
    u(this, "isCSS3DObject", !0);
  }
}
const GA = (
  /* glsl */
  `
varying vec2 vUv;
varying float vRadius;
varying float vDistanceToCamera;
varying float vCenterDistanceToCamera;
void main() {
  vUv = uv;
  // 计算顶点到圆心的距离
  vRadius = length(position.xy);
  // 计算顶点到摄像机的距离
  vec3 worldPosition = vec3(modelViewMatrix * vec4(position, 1.0));
  vDistanceToCamera = distance(cameraPosition, worldPosition);
  vCenterDistanceToCamera = distance(cameraPosition, vec3(0.0));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1);
}
`
), WA = (
  /* glsl */
  `
varying vec2 vUv;
varying float vRadius;

uniform float borderWidth;
uniform float radius;

void main() {
  vec2 uv = vUv;

  if (vRadius > radius - borderWidth && vRadius < radius) {
    // 如果顶点在边框区域，则使用边框颜色
    gl_FragColor = vec4(1.0, 1.0, 1.0, 0.3);
  } else {
    // 如果顶点在填充区域，则使用填充颜色
    gl_FragColor = vec4(1.0, 1.0, 1.0, 0.2);
  }
}
`
);
function QA() {
  const t = new P.CircleGeometry(0.2, 64), e = new P.ShaderMaterial({
    side: P.DoubleSide,
    uniforms: {
      borderWidth: { value: 0.01 },
      radius: { value: 0.2 }
    },
    vertexShader: GA,
    fragmentShader: WA,
    depthTest: !1,
    transparent: !0,
    blending: P.CustomBlending,
    blendEquation: P.AddEquation,
    blendSrc: P.DstColorFactor,
    blendDst: P.SrcAlphaFactor,
    blendDstAlpha: P.DstAlphaFactor
  });
  return new P.Mesh(t, e);
}
function UA() {
  const t = new P.Group(), e = {
    lineWidth: 1,
    lineColor: 3407837,
    lineOpacity: 0.7,
    occlusionVisibility: !0
  }, i = new fi(de(_({ points: [{ x: -0.5 }, { x: 0.5 }] }, e), { lineColor: 3407837 })), s = new fi(de(_({ points: [{ y: -0.5 }, { y: 0.5 }] }, e), { lineColor: 3407837 }));
  return t.add(i, s), t;
}
function XA(n) {
  const t = new P.CurvePath();
  t.add(new P.LineCurve3(new P.Vector3(0, 0, 0), new P.Vector3(0, 0, n)));
  const e = new P.TubeGeometry(t, 32, 3e-3), i = new P.MeshBasicMaterial({
    color: 10994687,
    depthTest: !1,
    transparent: !0
    // 必须要开启透明度，要和PlaneMesh一起渲染
  });
  return new P.Mesh(e, i);
}
function YA() {
  const n = new P.RingGeometry(0.03, 0.035, 64), t = new P.MeshBasicMaterial({
    color: 16777215,
    depthTest: !1,
    transparent: !0,
    // 必须要开启透明度，要和PlaneMesh一起渲染
    side: P.DoubleSide
  });
  return new P.Mesh(n, t);
}
function ZA() {
  const n = new P.SphereGeometry(0.018, 32, 32), t = new P.MeshBasicMaterial({
    color: 5085183,
    depthTest: !1,
    transparent: !0
    // 必须要开启透明度，要和PlaneMesh一起渲染
  });
  return new P.Mesh(n, t);
}
function JA() {
  const n = document.createElement("img");
  n.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAMAAAB8FU7dAAAAw1BMVEUAAACDuuiAsu11q/x8r/+HxtKHxtKIx9J4ut6Hx9Jcn/uNwNlmmf+RuP9ppf9orel3ud2HxtJrpf9oremev/9ppP9orelQmP9ZoPWSuP92q/9cnv9prel4ut53qv9orelYoPWIxdJPmP+HxtGRuP9oo/+Suf9Qmf92q/+RuP+DsP9Pmv+FxdFtre2SyMiRuP9PmP+evv9ppf9cnv+rxf9orepZofV4ut52q/+Dsf+Esv+5y/93q/9aofbF0f93rP9qpf8IzZ1iAAAAL3RSTlMAEg4s3dK5nodgVQoF/Pf39vbt7evr39rV1NTOzs6srJ+fiIZ9fWlpW09ERCwcHMH8LhIAAADRSURBVBjTjdDHkoMwEIThBrzOm3POOQwSYCRhe/f9n2p75FD2zX/VXL5qOAjzkixLsFL6fOFF5PwpXUj/eEwx7Oh9Jq+FdV5MqZkXlU9K4KZsmqY02x/A8LSwv14o0ylJWkP087WVhDfcjmjj5b/E3+CEpDPdGY58C7tKfzSiiA9uB4dV/NIF7yVQ7AGuq0lOIzrvnLP2Et2aMzUqryge8FVX0Zjl5XkG3KsR593pM2zVEScjvbMU7IdGjF19IzZ43Ceyve4Ai5Jep93u9BJs3j/gXjHbRgy31AAAAABJRU5ErkJggg==";
  const t = new NA(n);
  return n.style.pointerEvents = "none", t.scale.set(3e-3, 3e-3, 3e-3), t;
}
class qA extends P.Object3D {
  constructor(e) {
    super();
    u(this, "disableGetPixel", !0);
    u(this, "planeMesh");
    u(this, "ringMesh");
    u(this, "crossline");
    u(this, "lineMesh");
    u(this, "ballMesh");
    u(this, "cssBallMesh");
    const i = 0.18;
    this.planeMesh = QA(), this.ringMesh = YA(), this.crossline = UA(), this.lineMesh = XA(i), this.ballMesh = ZA(), this.cssBallMesh = JA(), this.ballMesh.position.setZ(i), this.cssBallMesh.position.setZ(i), this.planeMesh.renderOrder = 0, this.ringMesh.renderOrder = 1, this.crossline.renderOrder = 2, this.lineMesh.renderOrder = 3, this.ballMesh.renderOrder = 4, this.add(this.planeMesh, this.lineMesh, this.ballMesh, this.ringMesh, this.cssBallMesh), Vo(e);
  }
  updateWithIntersect(e) {
    if (!e.face)
      return;
    const i = (() => {
      const r = e.face.normal.clone().normalize();
      return r.y > 0.99 ? new P.Vector3(0, 1, 0) : r.y < -0.99 ? new P.Vector3(0, -1, 0) : r.x > 0.99 ? new P.Vector3(1, 0, 0) : r.x < -0.99 ? new P.Vector3(-1, 0, 0) : r.z > 0.99 ? new P.Vector3(0, 0, 1) : r.z < -0.99 ? new P.Vector3(0, 0, -1) : r.y < 0.01 && r.y > -0.01 ? new P.Vector3(r.x, 0, r.z) : r;
    })(), s = new P.Vector3().addVectors(e.point, i);
    this.position.copy(e.point), this.lookAt(s);
  }
  show() {
    this.visible = !0, this.add(this.cssBallMesh);
  }
  hide() {
    this.visible = !1, this.remove(this.cssBallMesh);
  }
  dispose() {
  }
}
class bg {
  constructor(t, e) {
    u(this, "five");
    u(this, "hooks", new Pt());
    u(this, "position", null);
    u(this, "magnifier", null);
    u(this, "pointHelper", null);
    u(this, "state", { enabled: !1, visible: !0 });
    u(this, "group", new P.Group());
    u(this, "show", () => {
      var t, e;
      this.state.visible || (this.state.visible = !0, (t = this.pointHelper) == null || t.show(), (e = this.magnifier) == null || e.enable(), this.five.needsRender = !0);
    });
    u(this, "hide", () => {
      var t, e;
      this.state.visible && (this.state.visible = !1, (t = this.pointHelper) == null || t.hide(), (e = this.magnifier) == null || e.disable(), this.five.needsRender = !0);
    });
    u(this, "updateWithIntersect", (t, e = { emitEvent: !0 }) => {
      var s;
      if (!t)
        return;
      this.abortUpdateMagnifier(), this.position = t, e.emitEvent && this.hooks.emit("intersectionUpdate", t), (s = this.pointHelper) == null || s.updateWithIntersect(t);
      const i = () => {
        var r;
        return (r = this.magnifier) == null ? void 0 : r.renderWithPoint(t.point);
      };
      this.abortUpdateMagnifier = () => this.five.off("renderFrame", i), this.five.once("renderFrame", i), this.five.needsRender = !0;
    });
    u(this, "abortUpdateMagnifier", () => {
    });
    var s, r, o, a, l;
    this.five = t, this.magnifier = (e == null ? void 0 : e.magnifier) !== void 0 ? e.magnifier : new ch(t, (s = e == null ? void 0 : e.magnifierParams) != null ? s : { dragEnabled: !0 });
    let i;
    (e == null ? void 0 : e.pointHelper) === "default" || (e == null ? void 0 : e.pointHelper) === void 0 ? i = new kg(t) : (e == null ? void 0 : e.pointHelper) === "highlight" ? i = new qA(t) : i = e.pointHelper, this.pointHelper = i, this.group.name = "five-point-selector", this.five.scene.add(this.group), (l = this.magnifier) == null || l.appendTo((a = (o = e.container) != null ? o : (r = t.getElement()) == null ? void 0 : r.parentElement) != null ? a : document.body);
  }
  enable() {
    var t;
    this.state.enabled || (this.state.enabled = !0, this.pointHelper && this.group.add(this.pointHelper), (t = this.magnifier) == null || t.enable(), this.five.needsRender = !0, this.hooks.emit("enabled"));
  }
  disable() {
    var t;
    this.state.enabled && (this.state.enabled = !1, this.pointHelper && this.group.remove(this.pointHelper), (t = this.magnifier) == null || t.disable(), this.hooks.emit("disabled"));
  }
  dispose() {
    this.hooks.off(), this.disable(), this.magnifier = null, this.pointHelper = null;
  }
}
const yg = "ontouchstart" in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
function KA(n, t) {
  const { x: e, y: i } = t, s = e * 2 - 1, r = i * 2 - 1, o = new P.Raycaster();
  return o.setFromCamera({ x: s, y: r }, n.camera), o.params.Points.threshold = 0.02, o;
}
function _o(n, t, e) {
  const i = $A(n, t);
  return e != null && e.virtualPoint ? i != null ? i : wg(t) : i;
}
function wg(n, t = 3) {
  const e = new P.Vector3().addVectors(
    n.ray.origin,
    n.ray.direction.clone().normalize().multiplyScalar(t)
  ), i = n.ray.direction.clone().negate();
  return {
    distance: t,
    point: e,
    object: new P.Object3D(),
    face: new P.Face3(0, 0, 0, i),
    raycaster: n,
    isVirtual: !0
  };
}
function $A(n, t) {
  const s = Ci(n).intersectRaycaster(t)[0];
  if (s)
    return de(_({}, s), { raycaster: t, isVirtual: !1 });
}
const Bd = `url("data:image/svg+xml,%3Csvg width='12px' height='12px' viewBox='0 0 12 12' xmlns='http://www.w3.org/2000/svg'%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cpath d='M6,12 C9.3137085,12 12,9.3137085 12,6 C12,2.6862915 9.3137085,0 6,0 C2.6862915,0 0,2.6862915 0,6 C0,9.3137085 2.6862915,12 6,12 Z' fill='%23FF5959'%3E%3C/path%3E%3Cg transform='translate(2, 2)' stroke='%23FFFFFF'%3E%3Ccircle cx='4' cy='4' r='4'%3E%3C/circle%3E%3Cline x1='1.07141075' y1='1.23997894' x2='6.64700843' y2='6.81557662'%3E%3C/line%3E%3C/g%3E%3C/g%3E%3C/svg%3E") 6 6, auto`, eb = new P.Vector3();
function Yn(n) {
  const { raycaster: t, line: e, clampToLine: i = !0 } = n, s = new P.Plane().setFromNormalAndCoplanarPoint(t.ray.direction.clone().normalize(), new P.Vector3()), r = s.projectPoint(e.start, new P.Vector3()), o = s.projectPoint(e.end, new P.Vector3()), a = new P.Line3(r, o), l = a.closestPointToPoint(t.ray.origin, i, eb), c = l.distanceTo(o), h = l.distanceTo(r), d = a.distance();
  if (c > h && c > d) {
    const f = -l.distanceTo(r) / d, g = e.start.clone().sub(e.end).normalize();
    return e.start.clone().sub(g.clone().multiplyScalar(f * e.distance()));
  } else {
    const f = l.distanceTo(r) / d;
    return new P.Vector3().lerpVectors(e.start, e.end, f);
  }
}
const Vd = new P.Vector3(), Ks = () => !1;
class al extends Pt {
  constructor(e, i) {
    var o, a, l, c;
    super();
    u(this, "_cursorError", !1);
    u(this, "actionIfNoIntersection", "virtualPoint");
    u(this, "plane");
    /**
     * @description 结果区别：vertical: 射线和模型的交点在plane上的投影点；onlyPlane: 不论射线和模型是否有交点，都为射线和plane的焦点；onlyVirtual: 仅当射线和模型没有交点时，为射线和plane的焦点
     */
    u(this, "planeMode", "onlyVirtual");
    u(this, "pointSelectorHelper");
    u(this, "five");
    /** @deprecated directly use `pointSelector.on/off` instead */
    u(this, "hook", this);
    /**
     * @description 吸附功能总开关，方便临时的一键开启/关闭
     */
    u(this, "adhereEnabled", !0);
    /**
     * @description 吸附半径
     */
    u(this, "adhereRadius", 0.1);
    /**
     * @description 吸附面
     */
    u(this, "adherePlane", []);
    /**
     * @description 吸附线
     */
    u(this, "adhereLine", []);
    u(this, "_outOfFive", !1);
    u(this, "_enabled", !1);
    u(this, "mode");
    /** 长按屏幕的动作触发后为true，手指抬起后为false */
    u(this, "pressDown", !1);
    /** 一组吸附的点，光标靠近这些点时，会将helper以及放大镜的位置设置为这些点 */
    u(this, "adherePoints");
    /** 有值时表明处于按压检查阶段 */
    u(this, "setPressDown");
    u(this, "lastFiveHelperVisible");
    u(this, "lastIntersection");
    u(this, "mousePosition");
    u(this, "_mouseDownInfo");
    u(this, "_touchStartInfo");
    u(this, "config", {});
    /**
     * @description: 主动触发一次选点
     * @return: select 是否成功
     */
    u(this, "select", (e) => {
      e && this.updatePointSelectorHelperIntersect(e);
      const i = this.emit("wantsSelect", this.position);
      return i || (this.pointSelectorHelper.hide(), this.emit("select", this.position), console.debug(this.position)), !i;
    });
    u(this, "onKeyDown", (e) => {
      e.key === "Shift" && (this.adhereEnabled = !1);
    });
    u(this, "onKeyUp", (e) => {
      e.key === "Shift" && (this.adhereEnabled = !0);
    });
    u(this, "onMouseWheel", (e) => {
      this.updateByMousePosition(e);
      const i = () => this.updateByMousePosition();
      this.five.off("render.prepare", i), this.five.on("render.prepare", i), setTimeout(() => {
        this.five.off("render.prepare", i);
      }, 200);
    });
    /**
     * @description: 鼠标进入five canvas时
     */
    u(this, "onEnter", () => {
      this.cursorError || this.pointSelectorHelper.show(), this.outOfFive = !1;
    });
    /**
     * @description: 鼠标进入five canvas时
     */
    u(this, "onMouseEnter", () => {
      this.onEnter(), this.emit("intersectionUpdate", this.position);
    });
    /**
     * @description: 鼠标离开five canvas时
     */
    u(this, "onMouseLeave", () => {
      this.pointSelectorHelper.hide(), this.outOfFive = !0, this.emit("intersectionUpdate", void 0);
    });
    u(this, "onMouseDown", (e) => {
      this._mouseDownInfo = {
        clientX: e.clientX,
        clientY: e.clientY,
        timestamp: performance.now()
      };
    });
    u(this, "onMouseUp", (e) => {
      if (!this._mouseDownInfo)
        return;
      const { clientX: i, clientY: s, timestamp: r } = this._mouseDownInfo;
      Math.abs(e.clientX - i) < 2 && Math.abs(e.clientY - s) < 2 && performance.now() - r < 500 ? this.select() : this._mouseDownInfo = null;
    });
    u(this, "onTouchStart", (e) => {
      this._touchStartInfo = {
        clientX: e.touches[0].clientX,
        clientY: e.touches[0].clientY,
        timestamp: performance.now()
      }, this.setPressDown = setTimeout(() => {
        if (this.setPressDown = void 0, this.mousePosition = {
          clientX: e.touches[0].clientX,
          clientY: e.touches[0].clientY
        }, !this.mouseNdcPosition)
          return;
        const i = this.updateByNdcPosition(this.mouseNdcPosition);
        this.pressDown = i;
      }, 200);
    });
    u(this, "onTouchMove", (e) => {
      if (this.setPressDown) {
        let i = !1;
        if (this._touchStartInfo) {
          const { clientX: s, clientY: r } = this._touchStartInfo;
          (Math.abs(e.touches[0].clientX - s) > 2 || Math.abs(e.touches[0].clientY - r) > 2) && (i = !0);
        }
        i && (clearTimeout(this.setPressDown), this.setPressDown = void 0);
        return;
      }
      if (this.pressDown) {
        if (this.mousePosition = {
          clientX: e.touches[0].clientX,
          clientY: e.touches[0].clientY
        }, !this.mouseNdcPosition)
          return;
        this.updateByNdcPosition(this.mouseNdcPosition);
      }
    });
    u(this, "onTouchEnd", (e) => {
      if (this.setPressDown) {
        clearTimeout(this.setPressDown), this.setPressDown = void 0;
        return;
      }
      this.pressDown && (setTimeout(() => {
        this.pressDown = !1;
      }, 100), this.select());
    });
    u(this, "updateByMousePosition", (e) => {
      if (this.five.getElement()) {
        if (!e || (e == null ? void 0 : e.buttons) !== 0) {
          this.pointSelectorHelper.hide();
          return;
        } else
          this.pointSelectorHelper.show();
        e && (this.mousePosition = {
          clientX: e.clientX,
          clientY: e.clientY
        }), this.updateByNdcPosition(this.mouseNdcPosition);
      }
    });
    /**
     * @description: 根据鼠标位置计算焦点位置并更新
     */
    u(this, "updateByNdcPosition", (e) => {
      var r, o, a;
      const i = KA(this.five, e);
      let s = _o(this.five, i);
      if (s) {
        if (this.plane && this.planeMode === "vertical" && (s = de(_({}, s), {
          point: this.plane.projectPoint(s.point, new P.Vector3()),
          face: new P.Face3(0, 0, 0, this.plane.normal.clone()),
          originalPoint: s.point.clone()
        })), this.plane && this.planeMode === "onlyPlane") {
          const l = i.ray.intersectPlane(this.plane, Vd);
          if (!l)
            return !1;
          s = {
            distance: this.five.camera.position.distanceTo(l),
            point: l.clone(),
            originalPoint: s.point.clone(),
            face: new P.Face3(0, 0, 0, this.plane.normal.clone()),
            raycaster: i
          };
        }
        return this.updatePointSelectorHelperIntersect(s), this.lastIntersection = s, !0;
      }
      if (this.plane) {
        const l = i.ray.intersectPlane(this.plane, Vd);
        if (l) {
          const c = {
            distance: this.five.camera.position.distanceTo(l),
            point: l.clone(),
            object: new P.Object3D(),
            face: new P.Face3(0, 0, 0, this.plane.normal.clone()),
            raycaster: i,
            isVirtual: !0
          };
          return this.updatePointSelectorHelperIntersect(c), !0;
        }
      }
      if (this.actionIfNoIntersection === "lastPoint")
        return this.updatePointSelectorHelperIntersect(this.lastIntersection), !0;
      if (this.actionIfNoIntersection === "virtualPoint") {
        const l = wg(i, (r = this.lastIntersection) == null ? void 0 : r.distance);
        return l.face = new P.Face3(0, 0, 0, (a = (o = this.lastIntersection) == null ? void 0 : o.face) == null ? void 0 : a.normal), l.isVirtual = !0, this.lastIntersection = l, this.updatePointSelectorHelperIntersect(l), !0;
      } else if (this.actionIfNoIntersection === "disable")
        return this.updatePointSelectorHelperIntersect(null), !1;
    });
    /**
     * @description: 更新 pointSelectorHelper 的焦点位置
     */
    u(this, "updatePointSelectorHelperIntersect", (e) => {
      var s, r, o, a, l, c, h, d;
      if (!e) {
        this.pointSelectorHelper.hide(), this.pointSelectorHelper.position = e, this.emit("intersectionUpdate", e), this.five.getElement().style.cursor = Bd;
        return;
      }
      this.onEnter(), this.cursorError || (this.five.getElement().style.cursor = "");
      const i = _({}, e);
      if (this.adhereEnabled && this.mouseNdcPosition && this.five.renderer) {
        const f = {
          x: this.mouseNdcPosition.x,
          y: 1 - this.mouseNdcPosition.y
        }, g = this.five.renderer.getSize(new P.Vector2());
        if (this.adhereEnabled && typeof this.adherePoints == "function" && typeof this.adhereRadius == "number") {
          for (const p of this.adherePlane) {
            const m = p.distanceToPoint(e.point);
            let v = p.projectPoint(e.point, new P.Vector3());
            (!this.plane || this.plane.distanceToPoint(v) < 0.01) && (v = (r = (s = this.plane) == null ? void 0 : s.projectPoint(v, new P.Vector3())) != null ? r : v, m < this.adhereRadius && (i.point = v.clone(), i.adherePoint = v.clone(), this.plane || (i.face = new P.Face3(0, 0, 0, p.normal.clone())), i.isAdsorbed = !0));
          }
          for (const p of this.adhereLine) {
            let m = p.closestPointToPoint(e.point, !1, new P.Vector3());
            if (m.distanceTo(e.point) < this.adhereRadius)
              (!this.plane || this.plane.distanceToPoint(m) < 0.01) && (m = (a = (o = this.plane) == null ? void 0 : o.projectPoint(m, new P.Vector3())) != null ? a : m, i.point = m.clone(), i.adhereLine = p.clone(), i.isAdsorbed = !0);
            else {
              const v = Yn({
                raycaster: new yo(this.five.camera.position, e.point.clone().sub(this.five.camera.position).normalize()),
                line: p,
                clampToLine: !1
              }), b = v.clone().project(this.five.camera);
              if (b.z <= 1) {
                const w = {
                  x: (b.x + 1) / 2,
                  y: (1 - b.y) / 2
                }, x = {
                  x: Math.abs(w.x - f.x) * g.width,
                  y: Math.abs(w.y - f.y) * g.height
                };
                let k = v.clone();
                x.x < 10 && x.y < 10 && (!this.plane || this.plane.distanceToPoint(k) < 0.01) && (k = (c = (l = this.plane) == null ? void 0 : l.projectPoint(k, new P.Vector3())) != null ? c : k, i.point = k.clone(), i.adhereLine = p.clone(), i.isAdsorbed = !0);
              }
            }
          }
          for (const p of this.adherePoints({ intersection: e, pointSelectorInstance: this })) {
            const m = p instanceof P.Face3 ? new P.Vector3(p.a, p.b, p.c) : p;
            if (m.IsAlwaysVisible = p.IsAlwaysVisible, this.plane && this.plane.distanceToPoint(m) > 0.01)
              continue;
            if (m.distanceTo(e.point) < this.adhereRadius) {
              i.point = (d = (h = this.plane) == null ? void 0 : h.projectPoint(m, new P.Vector3())) != null ? d : m.clone(), !this.plane && p instanceof P.Face3 && (i.face = p), i.isAdsorbed = !0;
              break;
            } else {
              const b = m.clone().project(this.five.camera);
              if (b.z > 1)
                continue;
              const w = this.five.renderer.getSize(new P.Vector2()), x = {
                x: (b.x + 1) / 2,
                y: (1 - b.y) / 2
              }, k = {
                x: Math.abs(x.x - f.x) * w.width,
                y: Math.abs(x.y - f.y) * w.height
              };
              if (k.x < 10 && k.y < 10) {
                let T = !1;
                if (m.IsAlwaysVisible)
                  T = !0;
                else {
                  const S = new P.Raycaster();
                  S.setFromCamera(m.clone(), this.five.camera);
                  const V = this.five.model.intersectRaycaster(S, void 0, !0)[0], z = 0.1, O = this.five.camera.position.distanceTo(m);
                  V && V.distance < O + z && (T = !0);
                }
                if (T) {
                  i.point = m.clone(), !this.plane && p instanceof P.Face3 && (i.face = p), i.isAdsorbed = !0;
                  break;
                }
              }
            }
          }
        }
      }
      this.pointSelectorHelper.updateWithIntersect(i, { emitEvent: !1 }), this.emit("intersectionUpdate", i);
    });
    u(this, "mousePositionToNdcPosition", (e) => {
      const i = this.five.getElement();
      if (!i)
        return null;
      const { top: s, left: r, width: o, height: a } = i.getBoundingClientRect(), { clientX: l, clientY: c } = e;
      return {
        x: (l - r) / o,
        y: 1 - (c - s) / a
      };
    });
    u(this, "onFiveWantsPanGesture", () => {
      if (this.pressDown)
        return !1;
    });
    u(this, "renderScreenCenter", () => {
      this.updateByNdcPosition({ x: 0.5, y: 0.5 });
    });
    u(this, "emitIntersectionUpdate", (e) => {
      this.emit("intersectionUpdate", e);
    });
    this.five = e, this.config = _(_({}, this.config), i), this.actionIfNoIntersection = (a = (o = i == null ? void 0 : i.actionIfNoIntersection) != null ? o : i == null ? void 0 : i.actionIfNoModelUnderMouse) != null ? a : "virtualPoint";
    const s = (l = i == null ? void 0 : i.mode) != null ? l : "auto";
    s === "auto" ? this.mode = yg ? "fixed" : "cursor" : this.mode = s;
    const r = {
      autoFixPCPosition: this.mode === "cursor",
      initialPosition: this.mode === "fixed" ? { left: "35%", top: "20%" } : void 0
    };
    this.pointSelectorHelper = new bg(this.five, de(_({}, i == null ? void 0 : i.helper), {
      magnifierParams: _(_({}, r), (c = i == null ? void 0 : i.helper) == null ? void 0 : c.magnifierParams)
    })), this.pointSelectorHelper.hide();
  }
  get position() {
    if (!this.outOfFive)
      return this.pointSelectorHelper.position;
  }
  /**
   * @description: 不在 five canvas 上时为 true
   */
  get outOfFive() {
    return this._outOfFive;
  }
  get enabled() {
    return this._enabled;
  }
  get cursorError() {
    return this._cursorError;
  }
  set cursorError(e) {
    this._cursorError = e, this.five.getElement().style.cursor = e ? Bd : "", e ? this.pointSelectorHelper.hide() : this.pointSelectorHelper.show();
  }
  set outOfFive(e) {
    this._outOfFive = e;
  }
  set enabled(e) {
    this._enabled = e;
  }
  get mouseNdcPosition() {
    return this.mousePosition ? this.mousePositionToNdcPosition(this.mousePosition) : null;
  }
  enable() {
    if (this.enabled)
      return;
    this.enabled = !0, this.outOfFive = !1, this.pointSelectorHelper.enable(), this.pointSelectorHelper.hide();
    const e = this.five.getElement();
    if (!e)
      throw new Error("five element not found");
    this.mode === "cursor" ? (this.five.on("wantsMoveToPano", Ks), this.five.on("wantsChangeMode", Ks), this.five.on("wantsTapGesture", Ks), e.addEventListener("touchstart", this.onTouchStart, { passive: !0 }), e.addEventListener("touchmove", this.onTouchMove), e.addEventListener("touchend", this.onTouchEnd), e.addEventListener("mousedown", this.onMouseDown), e.addEventListener("mouseup", this.onMouseUp), e.addEventListener("mousemove", this.updateByMousePosition), e.addEventListener("wheel", this.onMouseWheel), e.addEventListener("mouseenter", this.onMouseEnter), e.addEventListener("mouseout", this.onMouseLeave), this.five.on("wantsPanGesture", this.onFiveWantsPanGesture)) : this.mode === "fixed" && (this.five.on("panoArrived", this.renderScreenCenter), this.five.on("panGesture", this.renderScreenCenter), this.five.on("interiaPan", this.renderScreenCenter), this.renderScreenCenter(), this.pointSelectorHelper.show()), document.addEventListener("keydown", this.onKeyDown), document.addEventListener("keyup", this.onKeyUp), this.pointSelectorHelper.hooks.on("intersectionUpdate", this.emitIntersectionUpdate), this.lastFiveHelperVisible = this.five.helperVisible, this.five.helperVisible = !1, this.emit("enable");
  }
  disable() {
    if (!this.enabled)
      return;
    this.enabled = !1, this.adherePoints = null, this.adhereLine = [], this.adherePlane = [], this.plane = void 0, this.pointSelectorHelper.disable(), this.five.getElement().style.cursor = "";
    const e = this.five.getElement();
    this.five.off("wantsPanGesture", this.onFiveWantsPanGesture), this.five.off("wantsMoveToPano", Ks), this.five.off("wantsChangeMode", Ks), this.five.off("wantsTapGesture", Ks), this.five.helperVisible = this.lastFiveHelperVisible, e == null || e.removeEventListener("touchstart", this.onTouchStart), e == null || e.removeEventListener("touchmove", this.onTouchMove), e == null || e.removeEventListener("touchend", this.onTouchEnd), e == null || e.removeEventListener("mousedown", this.onMouseDown), e == null || e.removeEventListener("mouseup", this.onMouseUp), e == null || e.removeEventListener("mousemove", this.updateByMousePosition), e == null || e.removeEventListener("wheel", this.onMouseWheel), e == null || e.removeEventListener("mouseenter", this.onMouseEnter), e == null || e.removeEventListener("mouseout", this.onMouseLeave), this.five.off("panoArrived", this.renderScreenCenter), this.five.off("panGesture", this.renderScreenCenter), this.five.off("interiaPan", this.renderScreenCenter), document.removeEventListener("keydown", this.onKeyDown), document.removeEventListener("keyup", this.onKeyUp), this.pointSelectorHelper.hooks.off("intersectionUpdate", this.emitIntersectionUpdate), this.emit("disable");
  }
  dispose() {
    this.disable(), this.pointSelectorHelper.dispose();
  }
  setAdherePoints(e, i) {
    e ? typeof e == "function" ? this.adherePoints = e : this.adherePoints = () => e : this.adherePoints = null;
  }
}
const Pg = "data:image/png;base64,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";
class Cg extends P.Mesh {
  constructor(e, i) {
    const s = new P.MeshBasicMaterial({ opacity: 0, color: 0, transparent: !1, side: P.DoubleSide }), r = new P.PlaneGeometry(e, i);
    super(r, s);
    u(this, "name", "opacity-mesh");
  }
  removeFromParent() {
    const e = this.parent;
    return e !== null && e.remove(this), this;
  }
}
const fh = (n) => n ? n.visible === !1 ? !1 : fh(n.parent) : !0, Ig = 1, _d = `CSS3DObjectPlus@${Ig}`, tb = 216e-5, ib = 3e-3;
let Eg = class extends gn {
  constructor(e) {
    var T, S, V, z, O;
    if (si(e.cornerPoints) && si(e.width))
      throw new Error("cornerPoints and width cannot be both empty");
    const i = (T = e.container) != null ? T : document.createElement("div"), s = (S = e.cornerPoints) != null ? S : (() => {
      const A = e.width / 2;
      return [
        new fe(-A, A, 0),
        new fe(-A, -A, 0),
        new fe(A, -A, 0),
        new fe(A, A, 0)
      ];
    })(), r = (V = e.ratio) != null ? V : ib, o = (z = e.dpr) != null ? z : 1, a = (O = e.pointerEvents) != null ? O : "auto", l = Math.max(tb, r), c = s[0].distanceTo(s[1]), h = s[1].distanceTo(s[2]), d = yr(c / r * o), f = yr(h / r * o), g = $t(...s);
    let p;
    if (l === r)
      i.style.width = `${d}px`, i.style.height = `${f}px`, p = i;
    else {
      const A = document.createElement("div");
      A.style.width = `${d}px`, A.style.height = `${f}px`, A.style.pointerEvents = "none";
      const C = r / l;
      i.style.position = "absolute", i.style.left = "0", i.style.top = "0", i.style.width = `${C * d}px`, i.style.height = `${C * f}px`, A.appendChild(i), p = A;
    }
    super(p);
    u(this, "version", Ig);
    u(this, "isCSS3DObjectPlus", !0);
    u(this, "isCSS3DObject", !0);
    u(this, "name", _d);
    u(this, "container");
    u(this, "width");
    u(this, "height");
    u(this, "domWidthPx");
    u(this, "domHeightPx");
    u(this, "cornerPoints");
    u(this, "centerPosition");
    u(this, "ratio");
    u(this, "mode", "front");
    u(this, "hooks", new Pt());
    u(this, "opacityMesh");
    u(this, "selfVisible", !0);
    u(this, "setVisible", (e) => {
      this.selfVisible = e, this.visible = fh(this.parent) && this.selfVisible, this.opacityMesh && (this.opacityMesh.visible = this.visible);
    });
    u(this, "updateVisible", () => {
      this.setVisible(this.selfVisible);
    });
    /**
     * @description: 生成透明Mesh
     */
    u(this, "createOpacityMesh", (e) => {
      const { domWidthPx: i, domHeightPx: s } = e, r = new Cg(i, s);
      return r.position.copy(e.position), r.rotation.copy(e.rotation), r.scale.copy(e.scale), r;
    });
    if (i.style.pointerEvents = a, Object.assign(i.style, e.style), this.scale.set(l, l, l), this.cornerPoints = s, this.ratio = r, this.container = i, e.mode && (this.mode = e.mode), l === r)
      this.width = c, this.height = h, this.domWidthPx = d, this.domHeightPx = f, this.centerPosition = g;
    else {
      const A = r / l;
      this.width = A * c, this.height = A * h, this.domWidthPx = A * d, this.domHeightPx = A * f, this.centerPosition = new fe().subVectors(g, s[0]).multiplyScalar(A).add(s[0]);
    }
    i.classList.add(`${_d}__container`);
    const m = new fe().subVectors(s[1], s[0]), v = new fe().subVectors(s[3], s[0]), b = new fe().crossVectors(m, v).normalize();
    this.lookAt(b);
    const w = this.up.clone().applyQuaternion(this.quaternion), x = v.clone(), k = new fe().crossVectors(w, x).normalize();
    this.rotateOnWorldAxis(k, w.angleTo(x)), this.position.copy(g), this.addEventListener("added", () => {
      var A;
      this.mode === "front" && ((A = this.opacityMesh) == null || A.removeFromParent());
    }), this.addEventListener("removed", () => {
      var A;
      (A = this.opacityMesh) == null || A.removeFromParent();
    });
  }
  removeFromParent() {
    var i;
    const e = this.parent;
    return e !== null && e.remove(this), (i = this.opacityMesh) == null || i.removeFromParent(), this;
  }
  removeOpacityMesh() {
    var e;
    return (e = this.opacityMesh) == null || e.removeFromParent(), this.opacityMesh = void 0, this;
  }
  dispose() {
    var e;
    this.container.remove(), this.removeFromParent(), (e = this.opacityMesh) == null || e.removeFromParent();
  }
  getOpacityMesh() {
    if (this.opacityMesh)
      return this.opacityMesh;
    {
      const e = this.createOpacityMesh(this);
      return this.opacityMesh = e, e;
    }
  }
  applyMatrix4(e) {
    var i;
    super.applyMatrix4(e), (i = this.opacityMesh) == null || i.applyMatrix4(e);
  }
  applyQuaternion(e) {
    var i;
    return super.applyQuaternion(e), (i = this.opacityMesh) == null || i.applyQuaternion(e), this;
  }
  applyScaleMatrix4(e) {
    var i;
    this.scale.applyMatrix4(e), (i = this.opacityMesh) == null || i.scale.applyMatrix4(e);
  }
};
const Mg = "data:image/png;base64,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", nb = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbYAAAGwCAYAAADFUEBtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABtqADAAQAAAABAAABsAAAAABTZ8U6AAAtiklEQVR4Ae2dAXJbSbJdp+d7AfYSHOGVeAPek5fkNXgLjviLmRkZl+CRbtc8UBKRRalZpyIesiorMx/eIcjb+QCh//Y3hwQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkMEbgj7FKFpLA4QS+fPnyx23czJc//V498h2Oy8uXwDYCf/oF3HYWC0vgAAI3QfuP22V+uR35vYplrOsX/03w/kWAVgISmCPwX+ZKWUkCErgR+PvtiKjF9uj/iMx+C1/HOZeABJ4koLA9CdB0CRQBxKxFrLa/Tung7Ni+InEigTkCCtscSytJIATo2BC3dGYIWfvs2Hy9SGATAYVtE1jLHkkgohbxQsACgTkWn8IWEg4JbCCgsG2AasljCXArMgB6DpAWs3/i1EpAArMEFLZZnlY7m0C6snwyMuPqFiT+2Cvhi98hAQk8SUBhexKg6RIoAtyKjItbj1jCWGPxayUggSECCtsQSMtI4EYgYhVx624tYOK/8mXPIQEJDBNQ2IaBWu5oAnRh3GZkHSiIG8J3NCgvXgI7CShsO+la+zQCEa0ciBgWDlnji3VIQAIbCChsG6Ba8mgCdGSxjCsRu/IRr5WABJ4goLA9Ac9UCSwE6Nj6Y/0RsBxXviXdpQQkMEFAYZugaA0J3AnQhdG1xYsPccPKTAIS2ERAYdsE1rJHEohocQsy8xwZdGuse+8e4aMEJDBGQGEbQ2khCXz94AgCxkf8gwZf5u3P2iEBCQwSUNgGYVpKAjcC+eYRRKw7NeaBpLCFgkMCmwgobJvAWvZIAhE1bkUGAAK3zq/W8TkkIIEBAgrbAERLSOCVQISsPzgSd3x0a8xjczgkIIENBBS2DVAteSwBBGsVrV4zxx4LywuXwC4CCtsustY9kUDEio4t8/W9tO7cTuTjNUvgQwgobB+C2ZMcQoD317BX4kanhj0EjZcpgY8joLB9HGvP9PkJRKwiai1odm2f/+fuFf5mBBS23+wH4tP5yxPgViRdWy6I7iwihx/fX/6CvQAJ/G4EFLbf7Sfi8/krE+DfsEW0umvrOdensEFCK4FhAgrbMFDLHU0AQUO0sHRq3JaMdUhAApsIKGybwFr2SAIRsr7ViLAFRsSsha33su+QgASGCChsQyAtI4EbgYhabkdmRLi6M1uFbF2/JPkgAQk8T0Bhe56hFSQAgYgVHVt8iBsWX2zHZe2QgASGCChsQyAtI4EbgQhYjh6s23Yn17HOJSCBAQIK2wBES0jglUC6sBy8l9Zg8MUmBqHrGOcSkMAAAYVtAKIlJPBKIGLFsULBT7emsK2EXEtgiIDCNgTSMhK4EUC8EK0WsZ6zLzQJSGADAYVtA1RLHksggtUfCmkB63kAretjoXnhEpgmoLBNE7XeyQQQNrqzlUX22VPYVjquJTBEQGEbAmkZCdwI8KGQt0SLPazgJCCBYQIK2zBQyx1PgE9FAiICli4NG7+iFgoOCWwioLBtAmvZIwnw/hpfhsxtxxUGQrf6XUtAAgMEFLYBiJaQwCuBCBu/UxEvhG4F9NbeGutaAhL4SQL8Ev5kmuESkMAFgdxi5Fbko9uNj/wX5XRJQALvIaCwvYeaORK4JhBRQ7hi37rlSNx1Jb0SkMC7CShs70ZnogT+jUDEiiObLV6ZR+gYvYdPKwEJDBBQ2AYgWkICrwQQNUSsxWt9X633BCgBCQwSUNgGYVrqeAIRKz4wsgrX99bHwxOABKYIKGxTJK0jgfutx/XDI7zPxm1IBA4rNwlIYJiAwjYM1HJHE+DDIy1azLFHA/LiJfARBBS2j6DsOU4hEPFaOzauvTu3xCl0kNFKYJiAwjYM1HJHE0CwEC3W3IZE3AKJmKOBefES2EFAYdtB1ZqnEki3lq/TYiBkLWL4iNFKQALDBBS2YaCWO5oAHRoQ1tuSLWrZc0hAAhsIKGwboFryWAIRKwQLEYvYPZofC8oLl8BOAgrbTrrWPo1Ad2x0a2FwNe/bk6dx8nolsJWAwrYVr8UPIxCxomPj0hGw2O7c2NdKQALDBBS2YaCWO5pAxGsVsgbSe8x737kEJDBAQGEbgGgJCbwSSLdGx5bujPkKiM5t9buWgAQGCChsAxAtIYFXAmvH9gjMI8F7FK9fAhL4CQIK20/AMlQC3yEQYYto0ZHFZvRtR/bad4/yUQISGCGgsI1gtIgEXgjQsSFa2MaDD9t7ziUggQECCtsAREtI4JVAurUIFscVmKsu7ipOnwQk8E4CCts7wZkmgQcE8jvF7cYrEbvyPSilWwISeA8Bhe091MyRwDWBfE9kd2tXtxvxYa8r6ZWABN5NQGF7NzoTJfBvBBC1WDozgvC1ZU8rAQkMElDYBmFa6ngCES0+Fbl+pD9Chy9xORwSkMAGAgrbBqiWPJYAgoW4NQj24lu7uY5zLgEJPElAYXsSoOkSKAIRtO7KEDC6M9aJwVfpTiUggQkCCtsERWtI4E6gu7J4unPLHsKWPYUtFBwS2EBAYdsA1ZLHEohY0bFFxBC6R/NjQXnhEthJQGHbSdfapxFAyHLd3a09mp/Gx+uVwIcQUNg+BLMnOYRABIyOjUtmna6NW5HxeSsSQloJDBNQ2IaBWu54AnRtCFeLGbck/3WjxP7xwAQggWkCCts0UeudTCDfPJKjRwsYc76hpOOcS0ACQwQUtiGQlpHAjUCEK7cZ6cwChTmdG+KGTYxDAhIYJKCwDcK01PEEIlYcwEDAsKuftVYCEhgioLANgbSMBG4EHolad22JYS00CUhgAwGFbQNUSx5LILch+RRkQ6Bba8u845xLQAIDBBS2AYiWkMArgYhVv8fW76vRpeETmgQksImAwrYJrGWPJBBh4wiAtSt7a+9IYF60BHYQUNh2ULXmqQQQrti1M0Pk2GN9KiuvWwLbCChs29Ba+EACvMcWUVvfa+NWZLBE1BS2kHBIYAMBhW0DVEseTQDRamFrUcs8h0MCEthEQGHbBNayRxKImPGtIi1e3Z1l3kJ3JCgvWgI7CShsO+la+zQCb92KbBYKW9NwLoFhAgrbMFDLHU2A25DdoV0ByX7fqryK0ScBCbyTgML2TnCmSeCCAILVHRlzbNIyd0hAApsIKGybwFr2SALpwujaAED3ho1/jSFWKwEJDBBQ2AYgWkICrwRasBCytTvDLzQJSGATAYVtE1jLHkkgorW+d/ZIyNa4I4F50RLYQUBh20HVmqcSQNjo0rJmDpNHQse+VgISeJKAwvYkQNMlUATW99giao86MwWuwDmVwCQBhW2SprUk8OevyqKD+9cNDN1bW3lJQAIbCChsG6Ba8lgC6c440q0hYvk2Egb+7DkkIIENBBS2DVAteSyBiFVEbL0F2SKWPYcEJLCRgMK2Ea6ljyPQ3RoXH1HLgaAhco/eeyNPKwEJvJOAwvZOcKZJ4IIAYhW7Chni1vaihC4JSOBZAgrbswTNl8A3AhEtxI3ODCFLVPu+ZTmTgARGCShsozgtdjiBCBdHUKRruxKz9ifOIQEJDBJQ2AZhWup4AhGxdGyxLV6IG4CyXn3saSUggScJKGxPAjRdAkUgYsX7a9ySbIEjND6HBCSwiYDCtgmsZY8kQLfW3VjPgRLflZ99rQQk8AQBhe0JeKZK4IIAHRvCRceGTUrPL0rokoAEniGgsD1Dz1wJ/JnA2rGtnVm+Witj9d+9PkpAAiMEFLYRjBaRwAsBhC2W0d0Z++0jTisBCQwRUNiGQFpGAq8E8pVa6cgQLyyAWHOrEr9WAhIYIqCwDYG0jARuBNKR5Yh4ddeGiLUf3y3UIQEJTBJQ2CZpWut0AtxqjGjl6O6MOYwUNkhoJTBMQGEbBmq5owkgaIgWlk4NccMeDcuLl8AuAgrbLrLWPZEAtyK59ghbixjC1z5itRKQwBABhW0IpGUk8EqA99jo1uLuuaLmS0UCmwkobJsBW/4oAnRsES9Gd2nxIXJY4rQSkMAQAYVtCKRlJHAjgFjRtQVKfBE6fKyz55CABDYQUNg2QLXksQQiWhGwDESuhax9zO/RPkpAAmMEFLYxlBaSwIuYRbA4rpCke/N9tisy+iQwREBhGwJpGQncCETQeJ8tQHivLf51Hp9DAhLYQEBh2wDVkscSiFjlK7UYLV49Z18rAQlsIKCwbYBqyWMJRNT4kMgVhIhbd25XMfokIIEnCShsTwI0XQJFIMJFZ4Zlm/fV8PMhE/a1EpDAEAGFbQikZSRwIxDRWju2+CJq7Y8PgbtNHRKQwCQBhW2SprVOJ0AXhg0PRA02CBoWv1YCEhgioLANgbSMBG4EIlYRtVhuPcZm4LuvfJSABLYRUNi2obXwoQS45dhdG6IWmyMDe1/5KAEJjBFQ2MZQWkgCLx/1R7xi6dqYNyKFrWk4l8AgAYVtEKaljifQohYY3bVF5BA6bk8eD0wAEthBQGHbQdWaJxNAzBC5sEDQ6NxYn8zJa5fANgIK2za0Fj6QQIQrwhbbo9eZ/+t2tK9jnUtAAk8SUNieBGi6BIpARC3fPtIdGfPYDAQNe/f6KAEJjBFQ2MZQWkgCL6IVwWrRYo4Npv4+SbFJQALDBBS2YaCWO5rA+l2RLWbducXfe0dD8+IlME1AYZsmar2TCSBYV6KFD8uHTE7m5bVLYAsBhW0LVoseSmAVtn5fjXnQIG6HYvKyJbCXgMK2l6/VzyPQnVgLWM9DpePOo+QVS2AjAYVtI1xLH0cgYpWju7OGEHFjbxW6jnMuAQk8QUBhewKeqRJYCETUECwsIRG0+HIgbuxpJSCBQQIK2yBMS0ngRqA7NoQMMPmH2Rmr/+71UQISGCGgsI1gtIgEXghE1DJiW+BenLcH/vE2a60EJLCBgMK2AaoljyWQTqxFDaFrIN21td+5BCQwREBhGwJpGQncCCBsb91qpGtLjEMCEthAQGHbANWSxxJIh4aoxfIhkRaxK9+xwLxwCewgoLDtoGrNkwn090C2oMEkPm5H4tNKQAKDBBS2QZiWOp5Ad2x8vD9Q6NIyj7ARl7VDAhIYJqCwDQO13NEEEK1AoFuLqK0fImnROxqYFy+BHQQUth1UrXkqAYQN4cLGn3kGc4Tv7vVRAhIYI6CwjaG0kARe/p1aBKtFizk2mHouNglIYJiAwjYM1HLHE8htR7qzfi+tPzASYVPcjn+pCGAXAYVtF1nrnkiA99KwLV78+zW49B4+rQQkMEBAYRuAaAkJvBKIoHWXBhhEjK4ta3zEaCUggSECCtsQSMtI4JVAhC23IhE4bksiZr0WmgQksIGAwrYBqiWPJRDxQtgQstiIGevu2o4F5YVLYCcBhW0nXWufRgDxynX3e2qIXfzME+uQgAQ2EFDYNkC15LEEIlqrcCFgsd6GPPal4YV/JAGF7SNpe65TCETEELi+ZsWtaTiXwCYCCtsmsJY9kgCChqhh42f4HhsktBLYREBh2wTWskcSQNhyyzGiltGiljX+zB0SkMAGAscI25cvX/IHhj8y+ePCmj807QvqK3/7EkMNbO8zZ++RTdy6l9rk9/6Vb41lfRW7nidr6pPXMfERs+53feKI7Rr4Oqb3OX/73po/E881XFmeZyz7PA+ulfVqEx/ff3+1mSen31Pjk5F0bP/r9pr8H68x2SM2+6yxN9fX/9UN+T9iiaHO9+zVuR/l/ExsarwVv14fzxvLc2Dddt1jvdrkxIddz5l175PPua7W1GLvkU3tf77WJyY+ancd5uwnnnnb+FMzg5rYl7p//PEH9e9RBz3mF/CIUcLWfxjzyTXWWP4oscYmlr237Fs11zxi8zPIeTjXapPHf4QkJ4P42AxyqMm58K9xWa+xySEPS17Oj6/j2E8t/Fd1E7fmX8URs8ZTf/Wva/K7Nr63bNd/VLPzmV/FZi9HRvb5gxObwR8c/ohhs88c2778IYu/97LffzTZw2b/H7ej6/Temk9s/OQQv1rOu/rJw2afA99b9lHd9TzUbD/ztT6x+L8X92h/zU8cz5e9tsw7rmtnP/kZ8ffRudknjvNhqYcl78tN3DI/buSX7tTRf3xggC82Lwj+OF3tx3e1T+yP2h954fHHkfPFMu98fFfn5nrIJbbzH+Vx/t7vfObZT2zWnC++jPU8iem8xLSv89e4xDK6buJy/hw/Ovqcb51nrbcKZ+dSExZXNvU6Z62/ruGxXh/X/1YtePC8sDkHdcnnua7nz5o8LHWJpQZrLPGssWt8r3lexLYlLpbrz37W7K35+BOXwfpR/j3q22PHrfl93m8Z386Bjzhs/OvzJLZt4juO/B/l37WOmK9gPvtF8wLJdeaFwos1/gzWvIiIaU74Ov6t/MSxj8XH+fCzXm3iGZwfG3/nM8dSa81nPzYHce0nJxY/cdj2r/PEXMVR79Fe7yeGutjsM+Jb/dSNfZTfeeR3Xup3fmLyOiCPvcSR3zEdmzlHxxLfIpl6/Zx5TvFnsE5u1+rnc5Wf82cQh717v/m7bmIyOE/m5GGv4snDJi+j62TNPv5ex5d1DvaxxMXC+Tb9Wi/zq/yOoUbi1rqPfJ2feY/Uy0GtWHyJw48Pm72MrDPIyxxf5gzysPF37ayzhy/r4wYv9k9/4a8tef/A84Pnhx//jwziyMPiTw3q9rmofRXHXudSF9sxV3HU/dGf51r36rlyzr4ezt2245ivNjV4jn1u5uyteVn3Na1xa37WHMntedbkU3PNT8w6Eksce6yx1GUfm33yiY3lIK7zE5+jfcTFdp2sE8ugLjH4Y1MP/2qzT27mGTzv++r+yHMiljr4OzZz9vE/Wnc+tcnBJqbj4qfe6ienY/CRg43/rXzyiOm8dd5r8rDkZ524PvDFZvAzfVRvzb2q3b571YMeAfjpL/n1Pba+zrw4+OH3PDH9guo5+eRhOx9fYpljyWfvkZ+43ud5cK7ssc8eddtSizwsfmpc2fiI73N0/TUvex17lc8+ucRQt9f4YtfR+WvNxLKPJZ81ltzVEo9NfD+3zo8fMcDGx4Gva2VOjbbUwpe4+HqwF9t77WeePGJi8WOzz7xtzxOTQX722Mf3EvAakzn7+B+t33pu1CaGWmt9aseusexd5RLfMZyz49eanJ+/oeSvljxqYhPHQa2265w19ThP/PioHd/fTn1/LdfODyXzTz0e/JB5QeTae86Lpn0dgx+77nV+Yoh7ZJPfo/Px44td6xATyx4+1uRhiWW/4zlX7+HrOOarJfYqfz3/mpucNYY6jyznoxbrjseXmPaT05bYxBGb/cyzhw+bPQYxWWfOQU0sudi38rNHHpa678knB8u5Y+N7dA72yMOSx3rNz34G+6u97357TH5iOo6aiWp/1j2yR2zH4cNmjwMfdXpNjfYRxx7r2PgSu+7hwxIb26PzMl/XV8+j8zN/ibn4j/k17tOujxG2+lQkP8x8goixvlh4MeHHrvHxc/Re56/7iVvrxUdOz78Xl1gG+Vc5xMQmjueExR8bH7WyZsTX/vU87LW/5+THwj77HFf5OTf7mTPwYePPnLHWyh7nJ2a12adG5+MjvuPwJSZHrquvjXUsMV375r48Z/xdJ2tG51Mztv3MyYmND3/i19F7PeccxLPHOpZ6WGLIxU9O+5l3nc7HH9/qp17s1R7njWUfy3mJaT/ztX77yefnxB7noi412Mfix+LvPM7RPuLIi+39rK9i4j9mHCNsrz9RXihZXv3wr3zJwc8LiHUs80c128/51xz8if3e4DkQl1rk9x7naB9x2euDWm2pm1/crtX1Et97VzWJ59ysySW/1+27On+fp2NT42oQc/UcEo+fuK7B3vfisr/m57nnWGskltE5mRPLnDhs9nsQv/qpiz+Wj4uzlzqchzhq95r4+NpPPjnEscbih0XWfaxxrGNzPvI5P+uOy/yqJn5ief5Xsfg6h3jOzZrY2Az899WfnzP71CAmlvz2vVVr3eu8P80f3KX6U8xnXZwmbPk58kLqF8jqYy/+HPmFzFjj7t5/93c+MdjUyD4xsWtd9vAnt+dZM9b8R3Hx9x5/ZDgXlpi1LudjnzV5WfOHE1+fkzwsTK/Oc5XP+ZLPfizz7HfNrDlX5gzyk0c8cdTC4k9ufBzkxZ9BXPyJiSWG9ZVdfc0ve9S9Tb/O8WU/R0b77p5ve71+FNf+zHnu+FMj817Hl5HnjJ/ng8WfOOax7MefwR7+Pv8av66JTS75WOq+nOT1AR/xxGabeWoyf037+hy/l8/+Vd66lxjOg01Mz7vOVX728ZP3Yr0VCbozLD98XgyPrjpxxK4x5LKPTVz2Hu3jX+utecRR961fNGr1eeMjl3mv4+McmWes67v3/sgfj6yos8ZzfvZjmd+r3B/xJT5zbMdk3vmcfz1n4lZf53Eu7NW5spf62buqdXN/vY7OJy+5OThH4vGtlpyOTXwG58fevffHxJPDudbnSt7qT4Xk9CD2ytexnLPPT05qJPbqfPg6n1h8qdPzrMlj72q/fT3v3DU/cVwXOcRjk3M12CcPi5+crNtHHPucn3XHxtfrnmcvtdZ6iemaWZOHvbnOHEcBuP0XTDpUXgBYutZ13X7y2kf8lU3cz8RSI69C8mLxY/FdxcXXcdTBh1391GT/LftWLM+J/D7P1RzfWzUf1cLfdj0/e12fmCvb8ez3c4yPmNWy9z9vk/+WxW2Qmz9Iicfyx+g/b77/9+rnD9dqb9tf/3iRF9txicn60X7HMu9Y8qlBzCOb+OSvz+Mqntiuje+RvapDfnJ6/3vPoc+RzjK5Gev1v1Vnje3zrx127/U85/zR8/dzuXquXZfzr8+R9bHfPMLXNAXgpx+3e878wD/9tXqBH0/g9h9O//d21v96O/LHpwfr2LwGI3T/5/Z6/N8d5FwCEpghcJSwzSCzigQeEmjhajFLAl1b/BwPC7khAQm8n4DC9n52ZkpgJYBgxUbIesSXQcx95aMEJDBOQGEbR2rBwwlwu/vqPbagQfQQusNxefkSmCegsM0zteK5BOjGrsQLISPmXEpeuQQ2E1DYNgO2/FEE0q3RsWEDIPN+jy0+hC5zhwQkMEhAYRuEaanjCXQ31mIWMAjZao+HJgAJTBNQ2KaJWu9kAhEtOrV0aHRpfJCkhQ+BO5mX1y6BLQQUti1YLXoogVW4ELTg6D3Wh2LysiWwl4DCtpev1c8ikG5tvQWZT0ciarF0cZk7JCCBDQQUtg1QLXk0gQgW4hYQfO1Ri9rRgLx4CewmoLDtJmz9kwhExBC12Aw6tPvq/hiRs2NrIs4lMEhAYRuEaanjCSBYLVrrPOsrsTsengAkMEVAYZsiaR0J/Pt7aWGCkPU83VwLXvYcEpDAEAGFbQikZSRwIxCx4hZkC9c677XgJCCBYQIK2zBQyx1NIKKW99lyqzFHRkSMW4/47Nhe0PgggT0EFLY9XK16JoGIGN0YNiSYt2V+JimvWgIbCShsG+Fa+jgCEat0Y2vHFhB0bYlhHr9DAhIYJqCwDQO13NEEIlociFvWDPZ4Hw6/VgISGCSgsA3CtNTxBHjvDDHjW0cicuxlnkHMfeWjBCQwRkBhG0NpIQm8EOhu7B83D0IGHgQNi18rAQkMEVDYhkBaRgI3AhG1FjagRMQicG0VNuhoJTBMQGEbBmq5owlErFbBYr3ao0F58RLYSUBh20nX2qcRQNhi6dDCgDk2vqvOLn6HBCTwJAGF7UmApkugCETQECw6tGwzx1aKUwlIYJqAwjZN1HonE+A9tu7M4IEPiwCyr5WABIYIKGxDIC0jgRuBiFW6sqvODB9WYBKQwCYCCtsmsJY9kkBEK+JGVxYIzGMZCCBrrQQkMEhAYRuEaanjCUTY8iXI/3E76MxWG0jx4c/aIQEJDBJQ2AZhWup4AnRi+YfZ+daRq5GYDIXtzsFHCYwTUNjGkVrwcAII1ipu+GP7tuThuLx8CcwTUNjmmVrxXALpxujIIl65LZnB+2zM6exeNn2QgARmCShsszytdjaBdGPdmdGdtY9uDd/ZxLx6CWwgoLBtgGrJYwlErLpjy3oVsKy7gzsWlhcugV0EFLZdZK17IoEWslXQmgfi1z7nEpDAEAGFbQikZSRwI8B7Z4jaVWfmrUhfKhLYTEBh2wzY8kcRiKB1N5Y5QgYIRA+LXysBCQwRUNiGQFpGAjcCq7ABJX66N2wLIHFaCUhggIDCNgDREhJ4JcCtyAZCZ7bajnEuAQkMElDYBmFa6ngCEbb827V0ZXRmgZI5IwLHgU8rAQkMElDYBmFa6ngCCFYErr9Si24tgJhjj4cmAAlME1DYpola72QCESveO+NbRx7xUNgekdEvgScJKGxPAjRdAkUgYsXRtx8TEv/qi98hAQkME1DYhoFa7mgCES86tsyvBn7sVYw+CUjgCQIK2xPwTJXAQgBhozNDvFgjelmzt5RwKQEJPEtAYXuWoPkS+EYgwhXBQrQQsKyZJ7pjsnZIQAKDBBS2QZiWOp5ACxZiFiiP5scDE4AEdhBQ2HZQteapBCJgfbvxrXliHRKQwAYCCtsGqJY8lkDECsFi3rcgA6b3jwXlhUtgJwGFbSdda59GIP92rbs0xG3lsIrduu9aAhJ4goDC9gQ8UyWwEIiQRdzyrSN0ZkvIyzIxb+1f5eiTgAR+kIDC9oOgDJPADxCgQ+NbR1aBazHr+Q+UNkQCEvhRAgrbj5IyTgLfJ4CwxeZ24z9eU7j1iI1bYXuFo5HANAGFbZqo9U4mELHiPbYWLubYMOr5ycy8dgmME1DYxpFa8GACEasIG51ZbEaLGL77jo8SkMA4AYVtHKkFDyYQUYuIIWTYRoIP23vOJSCBAQIK2wBES0jglUDEahWsrOngEkbHtsZlzyEBCQwQUNgGIFpCAq8EIlZ9KxIwq4hlvfqI1UpAAk8SUNieBGi6BIoAgoW41daLkHXn1nvOJSCBQQIK2yBMSx1PIIKWI+OtjgwBvEf6KAEJjBJQ2EZxWuxwAqtgIW68r4boZc38cGRevgTmCShs80yteC6BfONIDoSMW48RuJ6fS8grl8AHEFDYPgCypziGAB1bd2P5Wi3WiFuA0M0dA8cLlcBHEVDYPoq05zmFACLG9fK9kVm3mPWcWK0EJDBAQGEbgGgJCbwSiKjRtdGdxTIQM/bwayUggUECCtsgTEsdTyDCxXtsiBg2cDJX1ELCIYGNBBS2jXAtfRwBRCy2Ray7Nm5VEnscJC9YArsJKGy7CVv/JAIRK4Qr1414YWFh1wYJrQQ2EFDYNkC15LEEImAcLV7dsWW/946F5YVLYBcBhW0XWeueSCDdGh1bd2k9DxfE70RGXrMEthNQ2LYj9gQHEYhgRdjoyK46tYNweKkS+DUEFLZfw92zfk4C+UQk3VhEje6Nq6Vz686OPa0EJDBEQGEbAmkZCdwI0LHF5htHMjLvDg6xQ+RegnyQgATmCChscyytJIEQ4N+x0b1d3Y5U1HytSGAjAYVtI1xLH0eAbgxLpxYQiFl3cMcB8oIl8BEEFLaPoOw5TiEQ0aJjyzUjZuv1x/9ob411LQEJ/CQBhe0ngRkugTcIrIKFeHXnlvR1/UZJtyQggZ8loLD9LDHjJfCYQG5BruKWaASOzHWNXysBCQwQUNgGIFpCAq8EELVHwtWd2qMYYUpAAk8SUNieBGi6BIpAxIoPjpT767TFrOdfA5xIQALPE1DYnmdoBQlAIGLFQXcWy0DM2MOvlYAEBgkobIMwLXU8gQhXd2yI3ArmkX+Ncy0BCbyDgML2DmimSOABgXzUP0e+dSQCR2e2dm0K2w2OQwK7CChsu8ha90QCCNY/bhePmCFudHL4E+uQgAQ2EFDYNkC15NEEELBAQLwQt/YdDcmLl8BOAgrbTrrWPo1ARK1vQXL97UPkED1itBKQwBABhW0IpGUkcCPArUhECxELHHzMex2fQwISGCKgsA2BtIwEbgTSmSFuiFrWmTPYV9ggopXAMAGFbRio5Y4msIpWi1fPj4bkxUtgNwGFbTdh659EIOKVri0DkaNzu3u/PSp031g4k8AoAYVtFKfFDieAmCFaLWr4gqj9hyPz8iUwT0Bhm2dqxXMJRLzo2EKhxaypxP9or+OcS0AC7yCgsL0DmikSeEAg3zrCR/sTgnitHdq6flBOtwQk8B4CCtt7qJkjgWsCETI+GZmv1WIgcFlnzsG+VgISGCSgsA3CtNTxBBC2gEj35pCABH4BAYXtF0D3lJ+WAN1aBC63GzOYY/H1e3EvgT5IQAIzBBS2GY5WkQAEImAc7cs8fkbP8WklIIEBAgrbAERLSOCVQMSKW5DdsWWbD4ys/tdUjQQkMEVAYZsiaR0JfPvgSFhE5BAz2MRnpwYNrQQ2EVDYNoG17JEE1vfYELIIHO+p2bEd+dLwoj+SgML2kbQ91wkEELBca3dnzLEnsPAaJfBLCChsvwS7J/2kBCJaEbb1FmT72FPgPumLwMv69QQUtl//M/AZfB4CESsEKxYRyxXiZ97r+BwSkMAQAYVtCKRlJHAjkE9ERrAQLea8rxZI+PqWZfwOCUhgiIDCNgTSMhK4EYho8XH/ALkStPgdEpDARgIK20a4lj6OQLqwfj+tAXBbEktX1zHOJSCBAQIK2wBES0igCHCrsVwvU4RstWucawlI4EkCCtuTAE2XQBG46tjo0LwtWaCcSmAnAYVtJ11rn0agu7W1M2N9GhOvVwIfTkBh+3DknvATE0DYeJ/t0aUmLjEOCUhgAwGFbQNUSx5LoAXLDu3Yl4EX/qsJKGy/+ifg+T8TgXRhdG28p5b1+j4bMZ/p2r0WCfw2BBS23+ZH4RP5BAQQLGwuKaLGrcm+/ZgYhwQksIGAwrYBqiWPJRCxyj/QplsLCEQNseu97DskIIFhAgrbMFDLHU0gIpbj77cjQsYtSOY318s+cVk7JCCBYQIK2zBQyx1NIIIVEfvHKwWEraHQsSXOIQEJbCCgsG2AasmjCUTcGJkjZPgUNEhoJbCJgMK2CaxljySw3mKkY+NWZFsF7siXiBf9EQQUto+g7DlOIRCxasG6muPDnsLG65TAhxFQ2D4MtSc6gEDEioNuLZfdtyMRNOwBWLxECXwsAYXtY3l7ts9NIGLFe2wtXD3/3AS8Ogn8BgQUtt/gh+BT+DQEELa1W4sfH1ax+zQ/di/kdyOgsP1uPxGfz1+ZQLq1CNYqWu1jD/tXvl6fuwR+SwIK22/5Y/FJ/UUJRKz6I/5Z06HFMuJX2KChlcAwAYVtGKjljieAYD2yAGKftVYCEhgioLANgbSMBG4E8o0j/E7la7XWwQdL4lfYVjquJTBEgF/CoXKWkcDxBBCsiBy3H+Nb58QdD0wAEpgmoLBNE7XeyQTSkdGV8d4aotZ+5iez8tolsI2AwrYNrYUPJBARoxPDBsPVvH0HovKSJbCPgMK2j62VzyMQsaIbo2O7ovDW3lW8PglI4CcIKGw/ActQCXyHQISNTgx7ldJxV/v6JCCBJwgobE/AM1UCC4F0ay1adGbYhGee8Zbw3SN8lIAE3kVAYXsXNpMkcEkgYsWtyAQgXtj2Ze6QgAQ2EFDYNkC15LEEEDY6tO7O2pe4FrtjgXnhEthBQGHbQdWapxJAsFq0mGPDhrhTOXndEthKQGHbitfihxH45+168zsV4UqHxm1JOreb68WnsIWEQwKbCChsm8Ba9lgCEbceiFxsBiLH+u71UQISGCOgsI2htJAEXrqxdGm8nwaSVcSyXn3EaiUggScJKGxPAjRdAkUAwULcauvr7UkEDdsxziUggQECCtsAREtI4JVAxIr31d4Sruy9tS9QCUjgCQIK2xPwTJXAQmAVLMSL99UQPdZLuksJSGCCgMI2QdEaErgTWG9B8l5bBI55IlcBvGf7KAEJjBBQ2EYwWkQCLwRasBCzbFzN43NIQAIbCChsG6Ba8lgCCBtCxjrdWt+GZH4sKC9cAjsJKGw76Vr7NAIRMkQrc8bVvH3EaSUggQECCtsAREtI4JVAC1u/p7YCemtvjXUtAQn8JAGF7SeBGS6BNwjkW0f+/rof8boaVx3dVZw+CUjgnQQUtneCM00CFwS6Y7vY/uqyY/uKwokE5gkobPNMrXguAd43i23x6u5t3TuXllcugU0EFLZNYC17JIGIVosbEPD1evWxp5WABJ4koLA9CdB0CRQBhI1u7apTq3CnEpDADgIK2w6q1jyVQH8wJKLGunnYqTUN5xLYQEBh2wDVkscSaNF6mf/xxx9fbuNm7vZYMl64BCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQn8NQn8fyHnyuSABiy2AAAAAElFTkSuQmCC", sb = `
  <style>
  .range-piece__container {
    position: absolute;
    top: 39%;
    left: 50%;
    margin-left: -54px;
    width: 108px;
    height: 108px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: pieceContainer 0.3s ease-in-out;
    animation-fill-mode: forwards;
  }
  .range-piece__content {
    width: 100%;
    height: 100%;
    background-image: url(${Mg});
    opacity: 0.4;
    background-size: 100%;
    background-repeat: no-repeat;
    transition: linear transform 0.1s;
  }
  .range-piece__content--active {
    animation: dotting ease-in-out 0.5s;
  }
  .range-piece__aim {
    width: 100%;
    height: 100%;
    opacity: 1;
    position: absolute;
    background: url(${nb}) center / contain no-repeat;
  }
  @keyframes dotting {
    0% {
      opacity: 0.4;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(0.8);
    }
    100% {
      opacity: 0.4;
      transform: scale(1);
    }
  }
  @keyframes pieceContainer {
    from {
      top: 49%;
    }
    to {
      top: 39%;
    }
  }
  </style>
  <div class="range-piece__container">
    <div class='range-piece__content'></div>
    <div class="range-piece__aim"></div>
  </div>
`, rb = `
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`, ob = `
varying vec2 vUv;
void main() {
  vec2 uv = vec2(vUv.x, vUv.y);
  float a = 1.0;
  float match = 1.0 - uv.x;
  gl_FragColor = vec4(1.0,1.0,1.0,match);
}
`;
function ab() {
  const n = new P.PlaneGeometry(0.4, 0.4), t = Pg, e = new P.TextureLoader().load(t);
  e.encoding = P.sRGBEncoding, e.minFilter = P.LinearFilter;
  const i = new P.MeshBasicMaterial({
    map: e,
    transparent: !0,
    depthTest: !1
  });
  return new P.Mesh(n, i);
}
function lb() {
  const n = new P.CurvePath();
  n.add(new P.LineCurve3(new P.Vector3(0, 0, 0), new P.Vector3(0, 0, 0.1)));
  const t = new P.TubeGeometry(n, 8, 3e-3), e = new P.ShaderMaterial({
    vertexShader: rb,
    fragmentShader: ob,
    depthTest: !1,
    transparent: !0
  });
  return new P.Mesh(t, e);
}
function cb() {
  const n = new P.SphereGeometry(0.01, 20, 20), t = new P.MeshBasicMaterial({
    color: 10349931,
    depthTest: !1,
    transparent: !0,
    side: P.DoubleSide
  }), e = new P.Mesh(n, t);
  return e.position.set(0, 0, 0.1), e;
}
function hb() {
  const t = new Eg({
    pointerEvents: "none",
    cornerPoints: [
      new P.Vector3(-0.2, 0.2, 0),
      new P.Vector3(-0.2, -0.2, 0),
      new P.Vector3(0.2, -0.2, 0),
      new P.Vector3(0.2, 0.2, 0)
    ]
  }), e = document.createElement("div");
  return e.style.width = "100%", e.style.height = "100%", e.style.backgroundImage = `url(${Mg})`, e.style.backgroundSize = "100%", e.style.backgroundRepeat = "no-repeat", t.container.appendChild(e), t;
}
class kg extends P.Object3D {
  constructor(e) {
    super();
    u(this, "planeMesh");
    u(this, "lineMesh");
    u(this, "ballMesh");
    u(this, "borderMesh");
    u(this, "five");
    this.planeMesh = ab(), this.lineMesh = lb(), this.ballMesh = cb(), this.borderMesh = hb(), this.addEventListener("added", () => {
      this.add(this.planeMesh, this.lineMesh, this.ballMesh, this.borderMesh);
    }), this.addEventListener("removed", () => {
      this.remove(this.planeMesh, this.lineMesh, this.ballMesh, this.borderMesh);
    }), Vo(e), this.five = e;
  }
  updateWithIntersect(e) {
    var s;
    const i = (s = e == null ? void 0 : e.face) != null && s.normal ? new P.Vector3().addVectors(e.point, e.face.normal) : this.five.camera.position;
    this.position.copy(e.point), this.lookAt(i);
  }
  show() {
    this.visible = !0, this.borderMesh.parent || this.add(this.borderMesh);
  }
  hide() {
    this.visible = !1, this.remove(this.borderMesh);
  }
  dispose() {
    var e;
    (e = this.planeMesh.material.map) == null || e.dispose();
  }
}
class xg extends P.Object3D {
  constructor() {
    super(...arguments);
    u(this, "children", []);
  }
  /** 获取 raycaster 与当前物体的交点 */
  getRaycastIntersects(e) {
    const i = [];
    return this.raycast(e, i), i;
  }
  /** 获取 raycaster 与当前物体的第一个交点 */
  getRaycastIntersection(e) {
    return this.getRaycastIntersects(e)[0];
  }
}
class Dg extends wv {
  constructor(t, e) {
    super(t, e);
  }
}
const Hl = new P.Vector3();
class db extends P.Sphere {
  expandByPoint(t) {
    if (this.isEmpty())
      return this.center.copy(t), this.radius = 0, this;
    Hl.subVectors(t, this.center);
    const e = Hl.lengthSq();
    if (e > this.radius * this.radius) {
      const i = Math.sqrt(e), s = (i - this.radius) * 0.5;
      this.center.addScaledVector(Hl, s / i), this.radius += s;
    }
    return this;
  }
}
function ub(n) {
  const { max: t, min: e } = n;
  return [
    new P.Vector3(t.x, t.y, t.z),
    new P.Vector3(e.x, t.y, t.z),
    new P.Vector3(e.x, e.y, t.z),
    new P.Vector3(t.x, e.y, t.z),
    new P.Vector3(t.x, t.y, e.z),
    new P.Vector3(e.x, t.y, e.z),
    new P.Vector3(e.x, e.y, e.z),
    new P.Vector3(t.x, e.y, e.z)
  ];
}
function Nn(n, t) {
  const { max: e, min: i } = n;
  switch (t) {
    case 0:
      return new P.Vector3(e.x, e.y, e.z);
    case 1:
      return new P.Vector3(i.x, e.y, e.z);
    case 2:
      return new P.Vector3(i.x, i.y, e.z);
    case 3:
      return new P.Vector3(e.x, i.y, e.z);
    case 4:
      return new P.Vector3(e.x, e.y, i.z);
    case 5:
      return new P.Vector3(i.x, e.y, i.z);
    case 6:
      return new P.Vector3(i.x, i.y, i.z);
    case 7:
      return new P.Vector3(e.x, i.y, i.z);
  }
}
function Bs(n) {
  return ph(n, "box3");
}
function Sg(n) {
  return ph(n, "sphere");
}
function fb(n) {
  return ll(n, "box3");
}
function Tg(n) {
  return ll(n, "sphere");
}
function ll(n, t) {
  const e = t === "box3" ? new P.Box3() : new db(), i = new P.Vector3();
  if (n.updateWorldMatrix(!1, !1), n.traverse((s) => {
    var o;
    if (s.name === "shadow" || s.type === "Line2")
      return;
    const r = s.geometry;
    if (s.updateWorldMatrix(!1, !1), r !== void 0) {
      const a = (o = r == null ? void 0 : r.attributes) == null ? void 0 : o.position;
      if (a)
        for (let l = 0, c = a.count; l < c; l++)
          i.fromBufferAttribute(a, l).applyMatrix4(s.matrixWorld), e.expandByPoint(i);
      else
        r.vertices && r.vertices.forEach((l) => {
          const c = l.clone().applyMatrix4(s.matrixWorld);
          e.expandByPoint(c);
        });
    }
  }), !e.isEmpty())
    return e;
}
function ph(n, t) {
  const e = ll(n, t);
  return e && e.applyMatrix4(pb(n.matrixWorld.clone())), e;
}
const pb = (n) => {
  const t = n.elements, e = t[0], i = t[1], s = t[2], r = t[3], o = t[4], a = t[5], l = t[6], c = t[7], h = t[8], d = t[9], f = t[10], g = t[11], p = t[12], m = t[13], v = t[14], b = t[15], w = d * v * c - m * f * c + m * l * g - a * v * g - d * l * b + a * f * b, x = p * f * c - h * v * c - p * l * g + o * v * g + h * l * b - o * f * b, k = h * m * c - p * d * c + p * a * g - o * m * g - h * a * b + o * d * b, T = p * d * l - h * m * l - p * a * f + o * m * f + h * a * v - o * d * v, S = e * w + i * x + s * k + r * T;
  if (S === 0)
    return n.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
  const V = 1 / S;
  return t[0] = w * V, t[1] = (m * f * r - d * v * r - m * s * g + i * v * g + d * s * b - i * f * b) * V, t[2] = (a * v * r - m * l * r + m * s * c - i * v * c - a * s * b + i * l * b) * V, t[3] = (d * l * r - a * f * r - d * s * c + i * f * c + a * s * g - i * l * g) * V, t[4] = x * V, t[5] = (h * v * r - p * f * r + p * s * g - e * v * g - h * s * b + e * f * b) * V, t[6] = (p * l * r - o * v * r - p * s * c + e * v * c + o * s * b - e * l * b) * V, t[7] = (o * f * r - h * l * r + h * s * c - e * f * c - o * s * g + e * l * g) * V, t[8] = k * V, t[9] = (p * d * r - h * m * r - p * i * g + e * m * g + h * i * b - e * d * b) * V, t[10] = (o * m * r - p * a * r + p * i * c - e * m * c - o * i * b + e * a * b) * V, t[11] = (h * a * r - o * d * r - h * i * c + e * d * c + o * i * g - e * a * g) * V, t[12] = T * V, t[13] = (h * m * s - p * d * s + p * i * f - e * m * f - h * i * v + e * d * v) * V, t[14] = (p * a * s - o * m * s - p * i * l + e * m * l + o * i * v - e * a * v) * V, t[15] = (o * d * s - h * a * s + h * i * l - e * d * l - o * i * f + e * a * f) * V, n;
};
var Lg = {
  update: null,
  begin: null,
  loopBegin: null,
  changeBegin: null,
  change: null,
  changeComplete: null,
  loopComplete: null,
  complete: null,
  loop: 1,
  direction: "normal",
  autoplay: !0,
  timelineOffset: 0
}, mh = {
  duration: 1e3,
  delay: 0,
  endDelay: 0,
  easing: "easeOutElastic(1, .5)",
  round: 0
}, mb = ["translateX", "translateY", "translateZ", "rotate", "rotateX", "rotateY", "rotateZ", "scale", "scaleX", "scaleY", "scaleZ", "skew", "skewX", "skewY", "perspective", "matrix", "matrix3d"], ja = {
  CSS: {},
  springs: {}
};
function Xi(n, t, e) {
  return Math.min(Math.max(n, t), e);
}
function fo(n, t) {
  return n.indexOf(t) > -1;
}
function Fl(n, t) {
  return n.apply(null, t);
}
var Ve = {
  arr: function(n) {
    return Array.isArray(n);
  },
  obj: function(n) {
    return fo(Object.prototype.toString.call(n), "Object");
  },
  pth: function(n) {
    return Ve.obj(n) && n.hasOwnProperty("totalLength");
  },
  svg: function(n) {
    return n instanceof SVGElement;
  },
  inp: function(n) {
    return n instanceof HTMLInputElement;
  },
  dom: function(n) {
    return n.nodeType || Ve.svg(n);
  },
  str: function(n) {
    return typeof n == "string";
  },
  fnc: function(n) {
    return typeof n == "function";
  },
  und: function(n) {
    return typeof n == "undefined";
  },
  nil: function(n) {
    return Ve.und(n) || n === null;
  },
  hex: function(n) {
    return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n);
  },
  rgb: function(n) {
    return /^rgb/.test(n);
  },
  hsl: function(n) {
    return /^hsl/.test(n);
  },
  col: function(n) {
    return Ve.hex(n) || Ve.rgb(n) || Ve.hsl(n);
  },
  key: function(n) {
    return !Lg.hasOwnProperty(n) && !mh.hasOwnProperty(n) && n !== "targets" && n !== "keyframes";
  }
};
function zg(n) {
  var t = /\(([^)]+)\)/.exec(n);
  return t ? t[1].split(",").map(function(e) {
    return parseFloat(e);
  }) : [];
}
function Og(n, t) {
  var e = zg(n), i = Xi(Ve.und(e[0]) ? 1 : e[0], 0.1, 100), s = Xi(Ve.und(e[1]) ? 100 : e[1], 0.1, 100), r = Xi(Ve.und(e[2]) ? 10 : e[2], 0.1, 100), o = Xi(Ve.und(e[3]) ? 0 : e[3], 0.1, 100), a = Math.sqrt(s / i), l = r / (2 * Math.sqrt(s * i)), c = l < 1 ? a * Math.sqrt(1 - l * l) : 0, h = 1, d = l < 1 ? (l * a + -o) / c : -o + a;
  function f(p) {
    var m = t ? t * p / 1e3 : p;
    return l < 1 ? m = Math.exp(-m * l * a) * (h * Math.cos(c * m) + d * Math.sin(c * m)) : m = (h + d * m) * Math.exp(-m * a), p === 0 || p === 1 ? p : 1 - m;
  }
  function g() {
    var p = ja.springs[n];
    if (p)
      return p;
    for (var m = 1 / 6, v = 0, b = 0; ; )
      if (v += m, f(v) === 1) {
        if (b++, b >= 16)
          break;
      } else
        b = 0;
    var w = v * m * 1e3;
    return ja.springs[n] = w, w;
  }
  return t ? f : g;
}
function gb(n) {
  return n === void 0 && (n = 10), function(t) {
    return Math.ceil(Xi(t, 1e-6, 1) * n) * (1 / n);
  };
}
var vb = function() {
  var n = 11, t = 1 / (n - 1);
  function e(h, d) {
    return 1 - 3 * d + 3 * h;
  }
  function i(h, d) {
    return 3 * d - 6 * h;
  }
  function s(h) {
    return 3 * h;
  }
  function r(h, d, f) {
    return ((e(d, f) * h + i(d, f)) * h + s(d)) * h;
  }
  function o(h, d, f) {
    return 3 * e(d, f) * h * h + 2 * i(d, f) * h + s(d);
  }
  function a(h, d, f, g, p) {
    var m, v, b = 0;
    do
      v = d + (f - d) / 2, m = r(v, g, p) - h, m > 0 ? f = v : d = v;
    while (Math.abs(m) > 1e-7 && ++b < 10);
    return v;
  }
  function l(h, d, f, g) {
    for (var p = 0; p < 4; ++p) {
      var m = o(d, f, g);
      if (m === 0)
        return d;
      var v = r(d, f, g) - h;
      d -= v / m;
    }
    return d;
  }
  function c(h, d, f, g) {
    if (!(0 <= h && h <= 1 && 0 <= f && f <= 1))
      return;
    var p = new Float32Array(n);
    if (h !== d || f !== g)
      for (var m = 0; m < n; ++m)
        p[m] = r(m * t, h, f);
    function v(b) {
      for (var w = 0, x = 1, k = n - 1; x !== k && p[x] <= b; ++x)
        w += t;
      --x;
      var T = (b - p[x]) / (p[x + 1] - p[x]), S = w + T * t, V = o(S, h, f);
      return V >= 1e-3 ? l(b, S, h, f) : V === 0 ? S : a(b, w, w + t, h, f);
    }
    return function(b) {
      return h === d && f === g || b === 0 || b === 1 ? b : r(v(b), d, g);
    };
  }
  return c;
}(), jg = function() {
  var n = { linear: function() {
    return function(i) {
      return i;
    };
  } }, t = {
    Sine: function() {
      return function(i) {
        return 1 - Math.cos(i * Math.PI / 2);
      };
    },
    Expo: function() {
      return function(i) {
        return i ? Math.pow(2, 10 * i - 10) : 0;
      };
    },
    Circ: function() {
      return function(i) {
        return 1 - Math.sqrt(1 - i * i);
      };
    },
    Back: function() {
      return function(i) {
        return i * i * (3 * i - 2);
      };
    },
    Bounce: function() {
      return function(i) {
        for (var s, r = 4; i < ((s = Math.pow(2, --r)) - 1) / 11; )
          ;
        return 1 / Math.pow(4, 3 - r) - 7.5625 * Math.pow((s * 3 - 2) / 22 - i, 2);
      };
    },
    Elastic: function(i, s) {
      i === void 0 && (i = 1), s === void 0 && (s = 0.5);
      var r = Xi(i, 1, 10), o = Xi(s, 0.1, 2);
      return function(a) {
        return a === 0 || a === 1 ? a : -r * Math.pow(2, 10 * (a - 1)) * Math.sin((a - 1 - o / (Math.PI * 2) * Math.asin(1 / r)) * (Math.PI * 2) / o);
      };
    }
  }, e = ["Quad", "Cubic", "Quart", "Quint"];
  return e.forEach(function(i, s) {
    t[i] = function() {
      return function(r) {
        return Math.pow(r, s + 2);
      };
    };
  }), Object.keys(t).forEach(function(i) {
    var s = t[i];
    n["easeIn" + i] = s, n["easeOut" + i] = function(r, o) {
      return function(a) {
        return 1 - s(r, o)(1 - a);
      };
    }, n["easeInOut" + i] = function(r, o) {
      return function(a) {
        return a < 0.5 ? s(r, o)(a * 2) / 2 : 1 - s(r, o)(a * -2 + 2) / 2;
      };
    }, n["easeOutIn" + i] = function(r, o) {
      return function(a) {
        return a < 0.5 ? (1 - s(r, o)(1 - a * 2)) / 2 : (s(r, o)(a * 2 - 1) + 1) / 2;
      };
    };
  }), n;
}();
function gh(n, t) {
  if (Ve.fnc(n))
    return n;
  var e = n.split("(")[0], i = jg[e], s = zg(n);
  switch (e) {
    case "spring":
      return Og(n, t);
    case "cubicBezier":
      return Fl(vb, s);
    case "steps":
      return Fl(gb, s);
    default:
      return Fl(i, s);
  }
}
function Rg(n) {
  try {
    var t = document.querySelectorAll(n);
    return t;
  } catch (e) {
    return;
  }
}
function cl(n, t) {
  for (var e = n.length, i = arguments.length >= 2 ? arguments[1] : void 0, s = [], r = 0; r < e; r++)
    if (r in n) {
      var o = n[r];
      t.call(i, o, r, n) && s.push(o);
    }
  return s;
}
function hl(n) {
  return n.reduce(function(t, e) {
    return t.concat(Ve.arr(e) ? hl(e) : e);
  }, []);
}
function Hd(n) {
  return Ve.arr(n) ? n : (Ve.str(n) && (n = Rg(n) || n), n instanceof NodeList || n instanceof HTMLCollection ? [].slice.call(n) : [n]);
}
function vh(n, t) {
  return n.some(function(e) {
    return e === t;
  });
}
function Ah(n) {
  var t = {};
  for (var e in n)
    t[e] = n[e];
  return t;
}
function Cc(n, t) {
  var e = Ah(n);
  for (var i in n)
    e[i] = t.hasOwnProperty(i) ? t[i] : n[i];
  return e;
}
function dl(n, t) {
  var e = Ah(n);
  for (var i in t)
    e[i] = Ve.und(n[i]) ? t[i] : n[i];
  return e;
}
function Ab(n) {
  var t = /rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);
  return t ? "rgba(" + t[1] + ",1)" : n;
}
function bb(n) {
  var t = /^#?([a-f\d])([a-f\d])([a-f\d])$/i, e = n.replace(t, function(a, l, c, h) {
    return l + l + c + c + h + h;
  }), i = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e), s = parseInt(i[1], 16), r = parseInt(i[2], 16), o = parseInt(i[3], 16);
  return "rgba(" + s + "," + r + "," + o + ",1)";
}
function yb(n) {
  var t = /hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n) || /hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(n), e = parseInt(t[1], 10) / 360, i = parseInt(t[2], 10) / 100, s = parseInt(t[3], 10) / 100, r = t[4] || 1;
  function o(f, g, p) {
    return p < 0 && (p += 1), p > 1 && (p -= 1), p < 1 / 6 ? f + (g - f) * 6 * p : p < 1 / 2 ? g : p < 2 / 3 ? f + (g - f) * (2 / 3 - p) * 6 : f;
  }
  var a, l, c;
  if (i == 0)
    a = l = c = s;
  else {
    var h = s < 0.5 ? s * (1 + i) : s + i - s * i, d = 2 * s - h;
    a = o(d, h, e + 1 / 3), l = o(d, h, e), c = o(d, h, e - 1 / 3);
  }
  return "rgba(" + a * 255 + "," + l * 255 + "," + c * 255 + "," + r + ")";
}
function wb(n) {
  if (Ve.rgb(n))
    return Ab(n);
  if (Ve.hex(n))
    return bb(n);
  if (Ve.hsl(n))
    return yb(n);
}
function mn(n) {
  var t = /[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);
  if (t)
    return t[1];
}
function Pb(n) {
  if (fo(n, "translate") || n === "perspective")
    return "px";
  if (fo(n, "rotate") || fo(n, "skew"))
    return "deg";
}
function Ic(n, t) {
  return Ve.fnc(n) ? n(t.target, t.id, t.total) : n;
}
function Yi(n, t) {
  return n.getAttribute(t);
}
function bh(n, t, e) {
  var i = mn(t);
  if (vh([e, "deg", "rad", "turn"], i))
    return t;
  var s = ja.CSS[t + e];
  if (!Ve.und(s))
    return s;
  var r = 100, o = document.createElement(n.tagName), a = n.parentNode && n.parentNode !== document ? n.parentNode : document.body;
  a.appendChild(o), o.style.position = "absolute", o.style.width = r + e;
  var l = r / o.offsetWidth;
  a.removeChild(o);
  var c = l * parseFloat(t);
  return ja.CSS[t + e] = c, c;
}
function Bg(n, t, e) {
  if (t in n.style) {
    var i = t.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase(), s = n.style[t] || getComputedStyle(n).getPropertyValue(i) || "0";
    return e ? bh(n, s, e) : s;
  }
}
function yh(n, t) {
  if (Ve.dom(n) && !Ve.inp(n) && (!Ve.nil(Yi(n, t)) || Ve.svg(n) && n[t]))
    return "attribute";
  if (Ve.dom(n) && vh(mb, t))
    return "transform";
  if (Ve.dom(n) && t !== "transform" && Bg(n, t))
    return "css";
  if (n[t] != null)
    return "object";
}
function Vg(n) {
  if (Ve.dom(n)) {
    for (var t = n.style.transform || "", e = /(\w+)\(([^)]*)\)/g, i = /* @__PURE__ */ new Map(), s; s = e.exec(t); )
      i.set(s[1], s[2]);
    return i;
  }
}
function Cb(n, t, e, i) {
  var s = fo(t, "scale") ? 1 : 0 + Pb(t), r = Vg(n).get(t) || s;
  return e && (e.transforms.list.set(t, r), e.transforms.last = t), i ? bh(n, r, i) : r;
}
function wh(n, t, e, i) {
  switch (yh(n, t)) {
    case "transform":
      return Cb(n, t, i, e);
    case "css":
      return Bg(n, t, e);
    case "attribute":
      return Yi(n, t);
    default:
      return n[t] || 0;
  }
}
function Ph(n, t) {
  var e = /^(\*=|\+=|-=)/.exec(n);
  if (!e)
    return n;
  var i = mn(n) || 0, s = parseFloat(t), r = parseFloat(n.replace(e[0], ""));
  switch (e[0][0]) {
    case "+":
      return s + r + i;
    case "-":
      return s - r + i;
    case "*":
      return s * r + i;
  }
}
function _g(n, t) {
  if (Ve.col(n))
    return wb(n);
  if (/\s/g.test(n))
    return n;
  var e = mn(n), i = e ? n.substr(0, n.length - e.length) : n;
  return t ? i + t : i;
}
function Ch(n, t) {
  return Math.sqrt(Math.pow(t.x - n.x, 2) + Math.pow(t.y - n.y, 2));
}
function Ib(n) {
  return Math.PI * 2 * Yi(n, "r");
}
function Eb(n) {
  return Yi(n, "width") * 2 + Yi(n, "height") * 2;
}
function Mb(n) {
  return Ch(
    { x: Yi(n, "x1"), y: Yi(n, "y1") },
    { x: Yi(n, "x2"), y: Yi(n, "y2") }
  );
}
function Hg(n) {
  for (var t = n.points, e = 0, i, s = 0; s < t.numberOfItems; s++) {
    var r = t.getItem(s);
    s > 0 && (e += Ch(i, r)), i = r;
  }
  return e;
}
function kb(n) {
  var t = n.points;
  return Hg(n) + Ch(t.getItem(t.numberOfItems - 1), t.getItem(0));
}
function Fg(n) {
  if (n.getTotalLength)
    return n.getTotalLength();
  switch (n.tagName.toLowerCase()) {
    case "circle":
      return Ib(n);
    case "rect":
      return Eb(n);
    case "line":
      return Mb(n);
    case "polyline":
      return Hg(n);
    case "polygon":
      return kb(n);
  }
}
function xb(n) {
  var t = Fg(n);
  return n.setAttribute("stroke-dasharray", t), t;
}
function Db(n) {
  for (var t = n.parentNode; Ve.svg(t) && Ve.svg(t.parentNode); )
    t = t.parentNode;
  return t;
}
function Ng(n, t) {
  var e = t || {}, i = e.el || Db(n), s = i.getBoundingClientRect(), r = Yi(i, "viewBox"), o = s.width, a = s.height, l = e.viewBox || (r ? r.split(" ") : [0, 0, o, a]);
  return {
    el: i,
    viewBox: l,
    x: l[0] / 1,
    y: l[1] / 1,
    w: o,
    h: a,
    vW: l[2],
    vH: l[3]
  };
}
function Sb(n, t) {
  var e = Ve.str(n) ? Rg(n)[0] : n, i = t || 100;
  return function(s) {
    return {
      property: s,
      el: e,
      svg: Ng(e),
      totalLength: Fg(e) * (i / 100)
    };
  };
}
function Tb(n, t, e) {
  function i(h) {
    h === void 0 && (h = 0);
    var d = t + h >= 1 ? t + h : 0;
    return n.el.getPointAtLength(d);
  }
  var s = Ng(n.el, n.svg), r = i(), o = i(-1), a = i(1), l = e ? 1 : s.w / s.vW, c = e ? 1 : s.h / s.vH;
  switch (n.property) {
    case "x":
      return (r.x - s.x) * l;
    case "y":
      return (r.y - s.y) * c;
    case "angle":
      return Math.atan2(a.y - o.y, a.x - o.x) * 180 / Math.PI;
  }
}
function Fd(n, t) {
  var e = /[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g, i = _g(Ve.pth(n) ? n.totalLength : n, t) + "";
  return {
    original: i,
    numbers: i.match(e) ? i.match(e).map(Number) : [0],
    strings: Ve.str(n) || t ? i.split(e) : []
  };
}
function Ih(n) {
  var t = n ? hl(Ve.arr(n) ? n.map(Hd) : Hd(n)) : [];
  return cl(t, function(e, i, s) {
    return s.indexOf(e) === i;
  });
}
function Gg(n) {
  var t = Ih(n);
  return t.map(function(e, i) {
    return { target: e, id: i, total: t.length, transforms: { list: Vg(e) } };
  });
}
function Lb(n, t) {
  var e = Ah(t);
  if (/^spring/.test(e.easing) && (e.duration = Og(e.easing)), Ve.arr(n)) {
    var i = n.length, s = i === 2 && !Ve.obj(n[0]);
    s ? n = { value: n } : Ve.fnc(t.duration) || (e.duration = t.duration / i);
  }
  var r = Ve.arr(n) ? n : [n];
  return r.map(function(o, a) {
    var l = Ve.obj(o) && !Ve.pth(o) ? o : { value: o };
    return Ve.und(l.delay) && (l.delay = a ? 0 : t.delay), Ve.und(l.endDelay) && (l.endDelay = a === r.length - 1 ? t.endDelay : 0), l;
  }).map(function(o) {
    return dl(o, e);
  });
}
function zb(n) {
  for (var t = cl(hl(n.map(function(r) {
    return Object.keys(r);
  })), function(r) {
    return Ve.key(r);
  }).reduce(function(r, o) {
    return r.indexOf(o) < 0 && r.push(o), r;
  }, []), e = {}, i = function(r) {
    var o = t[r];
    e[o] = n.map(function(a) {
      var l = {};
      for (var c in a)
        Ve.key(c) ? c == o && (l.value = a[c]) : l[c] = a[c];
      return l;
    });
  }, s = 0; s < t.length; s++)
    i(s);
  return e;
}
function Ob(n, t) {
  var e = [], i = t.keyframes;
  i && (t = dl(zb(i), t));
  for (var s in t)
    Ve.key(s) && e.push({
      name: s,
      tweens: Lb(t[s], n)
    });
  return e;
}
function jb(n, t) {
  var e = {};
  for (var i in n) {
    var s = Ic(n[i], t);
    Ve.arr(s) && (s = s.map(function(r) {
      return Ic(r, t);
    }), s.length === 1 && (s = s[0])), e[i] = s;
  }
  return e.duration = parseFloat(e.duration), e.delay = parseFloat(e.delay), e;
}
function Rb(n, t) {
  var e;
  return n.tweens.map(function(i) {
    var s = jb(i, t), r = s.value, o = Ve.arr(r) ? r[1] : r, a = mn(o), l = wh(t.target, n.name, a, t), c = e ? e.to.original : l, h = Ve.arr(r) ? r[0] : c, d = mn(h) || mn(l), f = a || d;
    return Ve.und(o) && (o = c), s.from = Fd(h, f), s.to = Fd(Ph(o, h), f), s.start = e ? e.end : 0, s.end = s.start + s.delay + s.duration + s.endDelay, s.easing = gh(s.easing, s.duration), s.isPath = Ve.pth(r), s.isPathTargetInsideSVG = s.isPath && Ve.svg(t.target), s.isColor = Ve.col(s.from.original), s.isColor && (s.round = 1), e = s, s;
  });
}
var Wg = {
  css: function(n, t, e) {
    return n.style[t] = e;
  },
  attribute: function(n, t, e) {
    return n.setAttribute(t, e);
  },
  object: function(n, t, e) {
    return n[t] = e;
  },
  transform: function(n, t, e, i, s) {
    if (i.list.set(t, e), t === i.last || s) {
      var r = "";
      i.list.forEach(function(o, a) {
        r += a + "(" + o + ") ";
      }), n.style.transform = r;
    }
  }
};
function Qg(n, t) {
  var e = Gg(n);
  e.forEach(function(i) {
    for (var s in t) {
      var r = Ic(t[s], i), o = i.target, a = mn(r), l = wh(o, s, a, i), c = a || mn(l), h = Ph(_g(r, c), l), d = yh(o, s);
      Wg[d](o, s, h, i.transforms, !0);
    }
  });
}
function Bb(n, t) {
  var e = yh(n.target, t.name);
  if (e) {
    var i = Rb(t, n), s = i[i.length - 1];
    return {
      type: e,
      property: t.name,
      animatable: n,
      tweens: i,
      duration: s.end,
      delay: i[0].delay,
      endDelay: s.endDelay
    };
  }
}
function Vb(n, t) {
  return cl(hl(n.map(function(e) {
    return t.map(function(i) {
      return Bb(e, i);
    });
  })), function(e) {
    return !Ve.und(e);
  });
}
function Ug(n, t) {
  var e = n.length, i = function(r) {
    return r.timelineOffset ? r.timelineOffset : 0;
  }, s = {};
  return s.duration = e ? Math.max.apply(Math, n.map(function(r) {
    return i(r) + r.duration;
  })) : t.duration, s.delay = e ? Math.min.apply(Math, n.map(function(r) {
    return i(r) + r.delay;
  })) : t.delay, s.endDelay = e ? s.duration - Math.max.apply(Math, n.map(function(r) {
    return i(r) + r.duration - r.endDelay;
  })) : t.endDelay, s;
}
var Nd = 0;
function _b(n) {
  var t = Cc(Lg, n), e = Cc(mh, n), i = Ob(e, n), s = Gg(n.targets), r = Vb(s, i), o = Ug(r, e), a = Nd;
  return Nd++, dl(t, {
    id: a,
    children: [],
    animatables: s,
    animations: r,
    duration: o.duration,
    delay: o.delay,
    endDelay: o.endDelay
  });
}
var Ti = [], Xg = function() {
  var n;
  function t() {
    !n && (!Gd() || !ot.suspendWhenDocumentHidden) && Ti.length > 0 && (n = requestAnimationFrame(e));
  }
  function e(s) {
    for (var r = Ti.length, o = 0; o < r; ) {
      var a = Ti[o];
      a.paused ? (Ti.splice(o, 1), r--) : (a.tick(s), o++);
    }
    n = o > 0 ? requestAnimationFrame(e) : void 0;
  }
  function i() {
    ot.suspendWhenDocumentHidden && (Gd() ? n = cancelAnimationFrame(n) : (Ti.forEach(
      function(s) {
        return s._onDocumentVisibility();
      }
    ), Xg()));
  }
  return typeof document != "undefined" && document.addEventListener("visibilitychange", i), t;
}();
function Gd() {
  return !!document && document.hidden;
}
function ot(n) {
  n === void 0 && (n = {});
  var t = 0, e = 0, i = 0, s, r = 0, o = null;
  function a(w) {
    var x = window.Promise && new Promise(function(k) {
      return o = k;
    });
    return w.finished = x, x;
  }
  var l = _b(n);
  a(l);
  function c() {
    var w = l.direction;
    w !== "alternate" && (l.direction = w !== "normal" ? "normal" : "reverse"), l.reversed = !l.reversed, s.forEach(function(x) {
      return x.reversed = l.reversed;
    });
  }
  function h(w) {
    return l.reversed ? l.duration - w : w;
  }
  function d() {
    t = 0, e = h(l.currentTime) * (1 / ot.speed);
  }
  function f(w, x) {
    x && x.seek(w - x.timelineOffset);
  }
  function g(w) {
    if (l.reversePlayback)
      for (var k = r; k--; )
        f(w, s[k]);
    else
      for (var x = 0; x < r; x++)
        f(w, s[x]);
  }
  function p(w) {
    for (var x = 0, k = l.animations, T = k.length; x < T; ) {
      var S = k[x], V = S.animatable, z = S.tweens, O = z.length - 1, A = z[O];
      O && (A = cl(z, function(le) {
        return w < le.end;
      })[0] || A);
      for (var C = Xi(w - A.start - A.delay, 0, A.duration) / A.duration, I = isNaN(C) ? 1 : A.easing(C), E = A.to.strings, D = A.round, L = [], N = A.to.numbers.length, G = void 0, Z = 0; Z < N; Z++) {
        var ee = void 0, J = A.to.numbers[Z], ie = A.from.numbers[Z] || 0;
        A.isPath ? ee = Tb(A.value, I * J, A.isPathTargetInsideSVG) : ee = ie + I * (J - ie), D && (A.isColor && Z > 2 || (ee = Math.round(ee * D) / D)), L.push(ee);
      }
      var ne = E.length;
      if (!ne)
        G = L[0];
      else {
        G = E[0];
        for (var he = 0; he < ne; he++) {
          E[he];
          var Le = E[he + 1], we = L[he];
          isNaN(we) || (Le ? G += we + Le : G += we + " ");
        }
      }
      Wg[S.type](V.target, S.property, G, V.transforms), S.currentValue = G, x++;
    }
  }
  function m(w) {
    l[w] && !l.passThrough && l[w](l);
  }
  function v() {
    l.remaining && l.remaining !== !0 && l.remaining--;
  }
  function b(w) {
    var x = l.duration, k = l.delay, T = x - l.endDelay, S = h(w);
    l.progress = Xi(S / x * 100, 0, 100), l.reversePlayback = S < l.currentTime, s && g(S), !l.began && l.currentTime > 0 && (l.began = !0, m("begin")), !l.loopBegan && l.currentTime > 0 && (l.loopBegan = !0, m("loopBegin")), S <= k && l.currentTime !== 0 && p(0), (S >= T && l.currentTime !== x || !x) && p(x), S > k && S < T ? (l.changeBegan || (l.changeBegan = !0, l.changeCompleted = !1, m("changeBegin")), m("change"), p(S)) : l.changeBegan && (l.changeCompleted = !0, l.changeBegan = !1, m("changeComplete")), l.currentTime = Xi(S, 0, x), l.began && m("update"), w >= x && (e = 0, v(), l.remaining ? (t = i, m("loopComplete"), l.loopBegan = !1, l.direction === "alternate" && c()) : (l.paused = !0, l.completed || (l.completed = !0, m("loopComplete"), m("complete"), !l.passThrough && "Promise" in window && (o(), a(l)))));
  }
  return l.reset = function() {
    var w = l.direction;
    l.passThrough = !1, l.currentTime = 0, l.progress = 0, l.paused = !0, l.began = !1, l.loopBegan = !1, l.changeBegan = !1, l.completed = !1, l.changeCompleted = !1, l.reversePlayback = !1, l.reversed = w === "reverse", l.remaining = l.loop, s = l.children, r = s.length;
    for (var x = r; x--; )
      l.children[x].reset();
    (l.reversed && l.loop !== !0 || w === "alternate" && l.loop === 1) && l.remaining++, p(l.reversed ? l.duration : 0);
  }, l._onDocumentVisibility = d, l.set = function(w, x) {
    return Qg(w, x), l;
  }, l.tick = function(w) {
    i = w, t || (t = i), b((i + (e - t)) * ot.speed);
  }, l.seek = function(w) {
    b(h(w));
  }, l.pause = function() {
    l.paused = !0, d();
  }, l.play = function() {
    l.paused && (l.completed && l.reset(), l.paused = !1, Ti.push(l), d(), Xg());
  }, l.reverse = function() {
    c(), l.completed = !l.reversed, d();
  }, l.restart = function() {
    l.reset(), l.play();
  }, l.remove = function(w) {
    var x = Ih(w);
    Yg(x, l);
  }, l.reset(), l.autoplay && l.play(), l;
}
function Wd(n, t) {
  for (var e = t.length; e--; )
    vh(n, t[e].animatable.target) && t.splice(e, 1);
}
function Yg(n, t) {
  var e = t.animations, i = t.children;
  Wd(n, e);
  for (var s = i.length; s--; ) {
    var r = i[s], o = r.animations;
    Wd(n, o), !o.length && !r.children.length && i.splice(s, 1);
  }
  !e.length && !i.length && t.pause();
}
function Hb(n) {
  for (var t = Ih(n), e = Ti.length; e--; ) {
    var i = Ti[e];
    Yg(t, i);
  }
}
function Fb(n, t) {
  t === void 0 && (t = {});
  var e = t.direction || "normal", i = t.easing ? gh(t.easing) : null, s = t.grid, r = t.axis, o = t.from || 0, a = o === "first", l = o === "center", c = o === "last", h = Ve.arr(n), d = parseFloat(h ? n[0] : n), f = h ? parseFloat(n[1]) : 0, g = mn(h ? n[1] : n) || 0, p = t.start || 0 + (h ? d : 0), m = [], v = 0;
  return function(b, w, x) {
    if (a && (o = 0), l && (o = (x - 1) / 2), c && (o = x - 1), !m.length) {
      for (var k = 0; k < x; k++) {
        if (!s)
          m.push(Math.abs(o - k));
        else {
          var T = l ? (s[0] - 1) / 2 : o % s[0], S = l ? (s[1] - 1) / 2 : Math.floor(o / s[0]), V = k % s[0], z = Math.floor(k / s[0]), O = T - V, A = S - z, C = Math.sqrt(O * O + A * A);
          r === "x" && (C = -O), r === "y" && (C = -A), m.push(C);
        }
        v = Math.max.apply(Math, m);
      }
      i && (m = m.map(function(E) {
        return i(E / v) * v;
      })), e === "reverse" && (m = m.map(function(E) {
        return r ? E < 0 ? E * -1 : -E : Math.abs(v - E);
      }));
    }
    var I = h ? (f - d) / v : d;
    return p + I * (Math.round(m[w] * 100) / 100) + g;
  };
}
function Nb(n) {
  n === void 0 && (n = {});
  var t = ot(n);
  return t.duration = 0, t.add = function(e, i) {
    var s = Ti.indexOf(t), r = t.children;
    s > -1 && Ti.splice(s, 1);
    function o(f) {
      f.passThrough = !0;
    }
    for (var a = 0; a < r.length; a++)
      o(r[a]);
    var l = dl(e, Cc(mh, n));
    l.targets = l.targets || n.targets;
    var c = t.duration;
    l.autoplay = !1, l.direction = t.direction, l.timelineOffset = Ve.und(i) ? c : Ph(i, c), o(t), t.seek(l.timelineOffset);
    var h = ot(l);
    o(h), r.push(h);
    var d = Ug(r, n);
    return t.delay = d.delay, t.endDelay = d.endDelay, t.duration = d.duration, t.seek(0), t.reset(), t.autoplay && t.play(), t;
  }, t;
}
ot.version = "3.2.1";
ot.speed = 1;
ot.suspendWhenDocumentHidden = !0;
ot.running = Ti;
ot.remove = Hb;
ot.get = wh;
ot.set = Qg;
ot.convertPx = bh;
ot.path = Sb;
ot.setDashoffset = xb;
ot.stagger = Fb;
ot.timeline = Nb;
ot.easing = gh;
ot.penner = jg;
ot.random = function(n, t) {
  return Math.floor(Math.random() * (t - n + 1)) + n;
};
const Li = /* @__PURE__ */ new Map(), oo = /* @__PURE__ */ new Map();
function Gb(n) {
  bn(n).forEach((e) => {
    var i, s, r;
    Li.has(e) || (e instanceof HTMLElement ? Li.set(e, {
      opacity: e.style.opacity === "" ? void 0 : e.style.opacity,
      visible: {
        display: e.style.display,
        visibility: e.style.visibility
      }
    }) : e.isObject3D && (e.material ? e.material instanceof P.ShaderMaterial ? Li.set(e, {
      opacity: (i = e.material.uniforms.opacity) == null ? void 0 : i.value,
      transparent: e.material.transparent,
      visible: e.visible
    }) : Li.set(e, {
      opacity: (s = e.material) == null ? void 0 : s.opacity,
      transparent: (r = e.material) == null ? void 0 : r.transparent,
      visible: e.visible
    }) : Li.set(e, {
      visible: e.visible
    })));
  });
}
function Qd(n) {
  bn(n).forEach((e) => {
    const i = Li.get(e);
    i && (e instanceof HTMLElement && (e.style.opacity = i.opacity === void 0 ? "" : i.opacity, e.style.display = i.visible.display, e.style.visibility = i.visible.visibility), e.isObject3D && (e.visible = i.visible, e.material && (e.material instanceof P.ShaderMaterial ? (e.material.uniforms.opacity && (e.material.uniforms.opacity.value = i.opacity), e.material.transparent = i.transparent) : (e.material.opacity = i.opacity, e.material.transparent = i.transparent))), Li.delete(e));
  });
}
function ul(n, t) {
  var a;
  const e = (a = t == null ? void 0 : t.traverseTHREEObject) != null ? a : !0;
  let i = bn(n);
  const s = [];
  i.forEach((l) => {
    l && (l instanceof HTMLElement ? s.push(l) : l.isObject3D && (e ? (s.push(l), l.traverse((c) => {
      c && s.push(c);
    })) : s.push(l)));
  }), i = [...new Set(s.filter(Boolean))], Gb(i);
  const r = ot(_({
    targets: i,
    duration: 300,
    easing: "linear",
    direction: "alternate",
    loop: 4,
    autoplay: !1,
    update: (l) => {
      var c;
      l.animatables.forEach((h) => {
        var p;
        const d = h.target;
        if (!Li.has(d))
          return;
        const g = Number((p = Li.get(d).opacity) != null ? p : 1) * (100 - l.progress) / 100;
        d instanceof HTMLElement ? d.style.opacity = String(g) : d.material && (d.material instanceof P.ShaderMaterial ? (d.material.uniforms.opacity && (d.material.uniforms.opacity.value = g), d.material.transparent = !0) : (d.material.opacity = g, d.material.transparent = !0));
      }), (c = t == null ? void 0 : t.updateRender) == null || c.call(t);
    }
  }, t));
  r.preComplete = () => {
    r != null && r.completed || (r == null || r.pause(), Qd(i), setTimeout(() => {
      var l;
      return (l = t == null ? void 0 : t.updateRender) == null ? void 0 : l.call(t);
    }));
  };
  const o = oo.get(n);
  return o == null || o.pause(), o == null || o.seek(0), oo.set(n, r), r.play(), r.finished.then(() => {
    var l;
    Qd(i), setTimeout(() => {
      oo.get(n) === r && oo.delete(n);
    }, 1e3), (l = t == null ? void 0 : t.updateRender) == null || l.call(t);
  }), r;
}
function Zg(n, t) {
  return ul(n, _({
    update: (e) => {
      var i;
      e.animatables.forEach((s) => {
        var c, h;
        const r = s.target;
        if (!Li.has(r))
          return;
        const o = Li.get(r), l = Number((h = (c = o == null ? void 0 : o.opacity) != null ? c : t == null ? void 0 : t.maxOpacity) != null ? h : 1) * (e.progress / 100);
        r instanceof HTMLElement ? (r.style.opacity = String(l), r.style.visibility = "visible") : r.isObject3D && (bn(n).includes(r) && (r.visible = !0), r.material && (r.material instanceof P.ShaderMaterial ? (r.material.uniforms.opacity && (r.material.uniforms.opacity.value = l), r.material.transparent = !0) : (r.material.opacity = l, r.material.transparent = !0)));
      }), (i = t == null ? void 0 : t.updateRender) == null || i.call(t);
    }
  }, t));
}
function Wb(n, t) {
  const e = Ci(n), { x: i, y: s } = t, r = i * 2 - 1, o = s * 2 - 1, a = new P.Raycaster();
  a.setFromCamera({ x: r, y: o }, n.camera);
  const c = e.intersectRaycaster(a)[0];
  if (c)
    return de(_({}, c), { raycaster: a, isVirtual: !1 });
}
function Qb(n, t) {
  const e = n.getElement();
  if (!e)
    return;
  const i = gg(t, e), s = new P.Raycaster();
  return s.setFromCamera(i, n.camera), s;
}
const Ub = "data:image/png;base64,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";
function wr(n) {
  const t = [];
  return bn(n).forEach((i) => {
    i.traverse((s) => {
      (s.isCSS3DObjectPlus || s.isCSS3DObject || s.isCSS3DSprite) && t.push(s);
    });
  }), t;
}
class Xb extends P.Scene {
  constructor() {
    super();
  }
  add(...t) {
    return super.add(...t), wr(t).forEach((e) => {
      e.mode = "front";
    }), this;
  }
}
class Yb extends P.Scene {
  constructor(e) {
    super();
    u(this, "scene");
    if (!e)
      throw new Error("CSS3DBehindScene: scene is required");
    this.scene = e;
  }
  add(...e) {
    return super.add(...e), wr(e).forEach((i) => {
      i.mode = "behind", this.scene.add(i.getOpacityMesh());
    }), this;
  }
  remove(...e) {
    return wr(e).forEach((i) => {
      var s;
      (s = i.opacityMesh) == null || s.removeFromParent(), i.opacityMesh = null;
    }), super.remove(...e), this;
  }
}
class Jg extends P.Group {
  constructor(e) {
    super();
    u(this, "isCSS3DGroup", !0);
    u(this, "mode");
    u(this, "CSS3DObjectLength", 0);
    this.mode = e;
  }
  add(...e) {
    return wr(e).forEach((i) => {
      i.mode = this.mode;
    }), super.add(...e), this.updateLength(), this;
  }
  setVisible(e) {
    this.visible = e, this.traverse((i) => {
      i.isCSS3DObjectPlus && i.updateVisible();
    });
  }
  remove(...e) {
    return super.remove(...e), this.updateLength(), this;
  }
  updateLength() {
    this.CSS3DObjectLength = wr(this).length;
  }
}
class Zb extends Jg {
  constructor() {
    super("front");
  }
}
class Jb extends Jg {
  constructor(e) {
    super("behind");
    u(this, "scene");
    if (!e)
      throw new Error("CSS3DBehindScene: scene is required");
    this.scene = e;
  }
  add(...e) {
    return wr(e).forEach((i) => {
      this.scene.add(i.getOpacityMesh());
    }), super.add(...e), this;
  }
}
const qb = 3, Ec = "CSS3DRenderer", ao = `${Ec}@${qb}`, $s = () => {
  console.error(`${ao} is disposed`);
}, It = {
  css3DObjects: [],
  frontModeStore: {
    css3DRenderer: new Oa()
  },
  behindModeStore: {
    css3DRenderer: new Oa()
  }
};
function Ud(n) {
  return It.css3DObjects.find((t) => t.id === n);
}
function Kb(n) {
  It.frontModeStore.css3DRenderer.setWrapper(n);
}
function $b(n) {
  It.behindModeStore.css3DRenderer.setWrapper(n);
}
class Co {
  // eslint-disable-next-line @typescript-eslint/no-useless-constructor
  constructor(t) {
    u(this, "hooks", new Pt());
    u(this, "state", {
      enabled: !0,
      visible: !0,
      disposed: !1
    });
    u(this, "_scene");
    u(this, "store", {
      frontModeGroup: new Zb()
    });
    /**
     * @description 根据传入的四个点位创建一个 3d dom容器，可以通过ReactDom.render()的方式将react组件放到容器中
     * @param { Vector3Position[] } points 矩形四个点坐标
     * @param params 均为可选值
     * @config_document `params` 均为可选值
     *  | key                   | type                       | defaultValue        | comment |
     *  | -                     | -                          | -                   | -       |
     *  | `ratio`               | *`number`*                 | `0.00216`           | 1px对应多少米，默认为 0.00216，即1px对应2.16mm |
     *  | `devicePixelRatio`    | *`number`*                 | `1`                 | 设备的物理像素分辨率与CSS像素分辨率的比值 |
     *  | `container`           | *`HTMLElement`*            | `undefined`         | 自定义 return 中的 `container`
     *  | `pointerEvents`       | *`'none'\|'auto'`*         | `'none'`            | container 的 css属性：`pointer-events` 的值 |
     *  | `autoRender`          | *`boolean`*                | `true`              | 是否自动渲染，通常为true |
     *  | `mode`                | *`'front'\|'behind'`*      | `front`             | 两种模式:|
     *  |                                                                          | | | `front`  模式：DOM 处于 five Canvas 上方，所以无法模拟遮挡效果，需要手动检测是否可见去设置显隐 |
     *  |                                                                          | | | `behind` 模式：DOM 处于 five Canvas 下方，可以模拟真实的遮挡效果，但是 DOM 必须是非透明的 |
     *  | `scene`               | *`THREE.Scene`*            | `undefined`         | 如果 mode 为 `behind`，需要传入 |
     *
     * @return
     * ```typescript
     *    {
     *      id: string,                             // id
     *      container: HTMLDIVElement               // dom容器
     *      dispose: () => void                     // 销毁
     *      css3DObject: CSS3DObject                // THREE.CSS3DObject 实例
     *      render?: () => void                     // 渲染函数，当 config.autoRender = true || undefined 时为 undefined
     *      setVisible: (visible: boolean) => void  // 设置显隐, 同 setVisibleById(id, visible)
     *      show: () => void                        // 同 setVisible(true)
     *      hide: () => void                        // 同 setVisible(false)
     *      setEnabled: (enabled: boolean) => void   // 添加/移除 container, 同 setEnabledById(id, enabled)
     *      enable: () => void                      // 同 setEnabled(true)
     *      disable: () => void                     // 同 setEnabled(false)
     *    } | void
     * ```
     */
    u(this, "create3DElement", (t, e, i) => {
      if (this.state.disposed)
        return $s();
      const s = (() => {
        const T = {
          ratio: 216e-5,
          devicePixelRatio: 1,
          mode: "front",
          autoRender: !0,
          container: document.createElement("div"),
          pointerEvents: "none",
          wrapperStyle: {}
        };
        return Object.assign(T, i);
      })(), r = e.map(Qe);
      if ((r == null ? void 0 : r.length) < 4)
        return console.error(`${ao}: requires 4 point but params may have fewer`);
      const { ratio: o, devicePixelRatio: a, mode: l, autoRender: c, container: h, pointerEvents: d, wrapperStyle: f } = s;
      let g = !1;
      const p = this.createObject(r, { ratio: o, dpr: a, container: h, mode: l, pointerEvents: d, wrapperStyle: f });
      It.css3DObjects.push(p), s.scene && this.setScene(s.scene);
      const m = () => {
        if (g)
          return;
        const T = p.mode === "front" ? this.getFrontCSS3DObjectGroup() : this.getBehindCSS3DObjectGroup();
        T && T.add(p);
      }, v = () => {
        g || (m(), this.render(t), this.hooks.emit("render"));
      }, b = (T) => this.setVisibleById(p.id, T), w = (T) => this.setEnabledById(p.id, T), x = () => (g = !0, p.removeFromParent(), !0), k = l === "front" ? It.frontModeStore.css3DRenderer : It.behindModeStore.css3DRenderer;
      return c && v(), {
        id: p.uuid,
        container: h,
        css3DObject: p,
        render: c ? void 0 : v,
        show: () => b(!0),
        hide: () => b(!1),
        setVisible: b,
        enable: () => w(!0),
        disable: () => w(!1),
        setEnabled: w,
        dispose: x,
        appendToElement: (T) => k.setWrapper(T)
      };
    });
    u(this, "setVisibleById", (t, e) => {
      var i;
      (i = Ud(t)) == null || i.setVisible(e);
    });
    u(this, "setEnabledById", (t, e) => {
      const i = Ud(t);
      if (!i)
        return;
      const s = i.mode === "front" ? this.getFrontCSS3DObjectGroup({ addGroupIfNotExists: !1 }) : this.getBehindCSS3DObjectGroup({ addGroupIfNotExists: !1 });
      s && (e ? s.add(i) : s.remove(i));
    });
    u(this, "createObject", (t, e) => {
      const i = new Eg(de(_({ cornerPoints: t }, e), { style: e.wrapperStyle }));
      return i.element.classList.add(`${Ec}__container`), i.element.id = `${Ec}__container--${i.uuid}`, i;
    });
    t && this.setScene(t);
  }
  get scene() {
    return this._scene || console.error("scene doesn't exist!, please call setScene(scene) first"), this._scene;
  }
  static get frontModeCSS3DRenderer() {
    return It.frontModeStore.css3DRenderer;
  }
  static get behindModeCSS3DRenderer() {
    return It.behindModeStore.css3DRenderer;
  }
  get frontModeCSS3DRenderer() {
    return It.frontModeStore.css3DRenderer;
  }
  get behindModeCSS3DRenderer() {
    return It.behindModeStore.css3DRenderer;
  }
  setScene(t) {
    this._scene = t;
  }
  getCurrentState() {
    return this.state;
  }
  setState(t, e = { userAction: !0 }) {
    if (this.state.disposed)
      return $s();
    const i = _({}, this.state);
    this.state = Object.assign(this.state, t), i.visible !== this.state.visible && (t.visible ? this.handleShow() : this.handleHide()), i.enabled !== this.state.enabled && (t.enabled ? this.handleEnable() : this.handleDisable()), i.disposed !== this.state.disposed && this.handleDispose(), this.hooks.emit("stateChange", { state: this.state, prevState: i, userAction: e.userAction });
  }
  dispose() {
    this.setState({ disposed: !0 }), this.hooks.emit("dispose");
  }
  show() {
    return $(this, arguments, function* ({ userAction: t } = { userAction: !0 }) {
      if (this.state.disposed)
        return $s();
      this.setState({ visible: !0 }, { userAction: t }), this.hooks.emit("show", { userAction: t });
    });
  }
  hide() {
    return $(this, arguments, function* ({ userAction: t } = { userAction: !0 }) {
      if (this.state.disposed)
        return $s();
      this.setState({ visible: !1 }, { userAction: t }), this.hooks.emit("hide", { userAction: t });
    });
  }
  enable({ userAction: t } = { userAction: !0 }) {
    if (this.state.disposed)
      return $s();
    this.setState({ enabled: !0 }, { userAction: t }), this.hooks.emit("enable", { userAction: t });
  }
  disable({ userAction: t } = { userAction: !0 }) {
    if (this.state.disposed)
      return $s();
    this.setState({ enabled: !1 }, { userAction: t }), this.hooks.emit("disable", { userAction: t });
  }
  getFrontCSS3DScene({ createSceneIfNotExists: t = !1 } = {}) {
    var i;
    const e = (i = It.frontModeStore) == null ? void 0 : i.css3DScene;
    if (e)
      return e;
    if (t) {
      const s = new Xb();
      It.frontModeStore.css3DScene = s;
    }
    return It.frontModeStore.css3DScene;
  }
  getBehindCSS3DScene({ createSceneIfNotExists: t = !1 } = {}) {
    var i, s;
    const e = (i = It.behindModeStore) == null ? void 0 : i.css3DScene;
    if (e)
      return e;
    if (t) {
      const r = (s = It.behindModeStore.scene) != null ? s : this.scene;
      if (!r) {
        console.error(`${ao}: scene is required when mode is behind`);
        return;
      }
      const o = new Yb(r);
      It.behindModeStore.css3DScene = o, It.behindModeStore.scene = r;
    }
    return It.behindModeStore.css3DScene;
  }
  getFrontCSS3DObjectGroup({ addGroupIfNotExists: t = !0 } = {}) {
    const e = this.getFrontCSS3DScene({ createSceneIfNotExists: t });
    return t && e && (e.getObjectById(this.store.frontModeGroup.id) || e.add(this.store.frontModeGroup)), this.store.frontModeGroup;
  }
  getBehindCSS3DObjectGroup({ addGroupIfNotExists: t = !0 } = {}) {
    var i;
    const e = this.getBehindCSS3DScene({ createSceneIfNotExists: t });
    if (t && e && this.scene) {
      const s = (i = this.store.behindModeGroup) != null ? i : new Jb(this.scene);
      this.store.behindModeGroup = s, e.getObjectById(s.id) || e.add(s);
    }
    return this.store.behindModeGroup;
  }
  render(t) {
    var e, i;
    if (this.getFrontCSS3DObjectGroup({ addGroupIfNotExists: !1 }).CSS3DObjectLength > 0) {
      const s = this.getFrontCSS3DScene({ createSceneIfNotExists: !0 });
      if (!s)
        return console.error(`${ao}: css3DScene is required when mode is front`);
      It.frontModeStore.css3DRenderer.renderEveryFrame(s, t);
    }
    if (((i = (e = this.getBehindCSS3DObjectGroup({ addGroupIfNotExists: !1 })) == null ? void 0 : e.CSS3DObjectLength) != null ? i : 0) > 0) {
      const s = this.getBehindCSS3DScene({ createSceneIfNotExists: !0 });
      if (!s)
        return console.error(`${ao}: css3DScene is required when mode is behind`);
      It.behindModeStore.css3DRenderer.renderEveryFrame(s, t);
    }
  }
  handleShow() {
    return $(this, null, function* () {
      var t;
      this.store.frontModeGroup.setVisible(!0), (t = this.store.behindModeGroup) == null || t.setVisible(!0);
    });
  }
  handleHide() {
    return $(this, null, function* () {
      var t;
      this.store.frontModeGroup.setVisible(!1), (t = this.store.behindModeGroup) == null || t.setVisible(!1);
    });
  }
  handleEnable() {
    var t, e;
    (t = this.getFrontCSS3DScene()) == null || t.add(this.store.frontModeGroup), this.store.behindModeGroup && ((e = this.getBehindCSS3DScene()) == null || e.add(this.store.behindModeGroup));
  }
  handleDisable() {
    var t, e, i;
    this.store.frontModeGroup.children.forEach((s) => {
      s instanceof gn && s.element instanceof Element && s.element.parentNode !== null && s.element.remove();
    }), (t = this.store.behindModeGroup) == null || t.children.forEach((s) => {
      s instanceof gn && s.element instanceof Element && s.element.parentNode !== null && s.element.remove();
    }), (e = this.getFrontCSS3DScene()) == null || e.remove(this.store.frontModeGroup), this.store.behindModeGroup && ((i = this.getBehindCSS3DScene()) == null || i.remove(this.store.behindModeGroup));
  }
  handleDispose() {
    this.handleDisable();
  }
}
u(Co, "setFrontModeContainer", Kb), u(Co, "setBehindModeContainer", $b);
const qg = "v2.0.1", Xd = `CSS3DRenderPlugin@${qg}`;
let ey = class extends Co {
  constructor(e) {
    super();
    u(this, "five");
    u(this, "behindFiveContainer");
    u(this, "frontFiveContainer");
    u(this, "VERSION", qg);
    u(this, "staticPrefix", "//vr-image-4.realsee-cdn.cn");
    u(this, "created3DElementResults", []);
    /**
     * @description 根据传入的四个点位创建一个 3d dom容器，可以通过ReactDom.render()的方式将react组件放到容器中
     * @param { Vector3Position[] } points 矩形四个点坐标
     * @param config 均为可选值
     * @config_document `config` 均为可选值
     *  | key                   | type                       | defaultValue        | comment |
     *  | -                     | -                          | -                   | -       |
     *  | `ratio`               | *`number`*                 | `0.00216`           | 1px对应多少米，默认为 0.00216，即1px对应2.16mm |
     *  | ~~`dpr`~~             | ~~*`number`*~~             | ~~`undefined`~~     | ~~**已改名**，请使用~~ `devicePixelRatio` |
     *  | `devicePixelRatio`    | *`number`*                 | `1`                 | 设备的物理像素分辨率与CSS像素分辨率的比值 |
     *  | `container`           | *`HTMLElement`*            | `undefined`         | 自定义 return 中的 `container`
     *  | `pointerEvents`       | *`'none'\|'auto'`*         | `'none'`            | container 的 css属性：`pointer-events` 的值 |
     *  | `autoRender`          | *`boolean`*                | `true`              | 是否自动渲染，通常为true |
     *  | `mode`                | *`'front'\|'behind'`*      | `front`             | 两种模式:|
     *  |                                                                          | | | `front`  模式：DOM 处于 five Canvas 上方，所以无法模拟遮挡效果，需要手动检测是否可见去设置显隐 |
     *  |                                                                          | | | `behind` 模式：DOM 处于 five Canvas 下方，可以模拟真实的遮挡效果，但是 DOM 必须是非透明的 |
     *  | `behindFiveContainer` | *`HTMLElement`*            | `undefined`         | 如果 mode 为 `behind`，需要传入容器，并确保此容器位five下方，且中间无其他不透明的dom元素遮挡 |
     *
     * @return
     * ```typescript
     *    {
     *      id: string,                             // id
     *      container: HTMLDIVElement               // dom容器
     *      dispose: () => void                     // 销毁
     *      css3DObject: CSS3DObject                // THREE.CSS3DObject 实例
     *      render?: () => void                     // 渲染函数，当 config.autoRender = true || undefined 时为 undefined
     *      setVisible: (visible: boolean) => void  // 设置显隐, 同 setVisibleById(id, visible)
     *      show: () => void                        // 同 setVisible(true)
     *      hide: () => void                        // 同 setVisible(false)
     *      setEnabled: (enabled: boolean) => void  // 添加/移除 container, 同 setEnabledById(id, enabled)
     *      enable: () => void                      // 同 setEnabled(true)
     *      disable: () => void                     // 同 setEnabled(false)
     *    } | void
     * ```
     */
    u(this, "create3DDomContainer", (e, i) => {
      if (this.state.disposed)
        return;
      const s = (() => {
        var d;
        (i == null ? void 0 : i.dpr) !== void 0 && console.warn(`${Xd}: please use "config.devicePixelRatio" replace "config.dpr"`);
        const h = {
          ratio: 216e-5,
          devicePixelRatio: (d = i == null ? void 0 : i.dpr) != null ? d : 1,
          mode: "front",
          autoRender: !0,
          wrapperStyle: {}
        };
        return Object.assign(h, i, (i == null ? void 0 : i.mode) === "behind" ? { scene: this.five.scene } : void 0);
      })(), { autoRender: r } = s;
      s.mode === "behind" && s.behindFiveContainer && (this.behindFiveContainer = s.behindFiveContainer);
      const o = this.create3DElement(this.five.camera, e, de(_({}, s), { autoRender: !1 }));
      if (!o)
        return;
      const a = o.dispose;
      o.dispose = () => (this.created3DElementResults.includes(o) && this.created3DElementResults.splice(this.created3DElementResults.indexOf(o), 1), a());
      const l = () => {
        var d, f;
        const h = o.css3DObject.mode === "front" ? (f = this.frontFiveContainer) != null ? f : (d = this.five.getElement()) == null ? void 0 : d.parentElement : this.getBehindFiveElement();
        if (!h)
          return console.error(`${Xd}: wrapper is ${h}; mode is ${o.css3DObject.mode}`);
        o.appendToElement(h), o.render(), this.created3DElementResults.push(o);
      }, c = () => {
        ui(this.five).then(() => l());
      };
      return r && c(), de(_({}, o), { render: r ? void 0 : c });
    });
    this.five = e;
  }
  /** @deprecated disposeAll() renamed as dispose() */
  disposeAll() {
    return this.dispose();
  }
  setState(...e) {
    const i = super.setState(...e);
    return this.five.needsRender = !0, i;
  }
  appendToFrontFiveContainer(e) {
    this.frontFiveContainer = e, this.created3DElementResults.forEach((i) => {
      i.css3DObject.mode === "front" && i.appendToElement(e);
    });
  }
  appendToBehindFiveContainer(e) {
    this.behindFiveContainer = e, this.created3DElementResults.forEach((i) => {
      i.css3DObject.mode === "behind" && i.appendToElement(e);
    });
  }
  getBehindFiveElement() {
    return this.behindFiveContainer ? this.behindFiveContainer : (this.behindFiveContainer = hh(this.five), this.behindFiveContainer);
  }
  /**
   * @description: 获取静态资源的url
   */
  absoluteUrl(e) {
    return Eh(this.staticPrefix, e);
  }
  clear() {
    this.created3DElementResults.forEach((e) => {
      e.dispose();
    }), this.created3DElementResults = [];
  }
};
const fl = (n) => new ey(n);
class ty {
  constructor(t) {
    u(this, "five");
    u(this, "contentElement", document.createElement("div"));
    u(this, "animeIns");
    u(this, "container");
    u(this, "css3DObject");
    u(this, "disposeCss3DObject");
    u(this, "state", { enabled: !1 });
    this.five = t;
    const i = 0.4 / 2, r = fl(t).create3DDomContainer(
      [
        [-i, i, 0],
        [-i, -i, 0],
        [i, -i, 0],
        [i, i, 0]
      ].map((o) => new P.Vector3().fromArray(o))
    );
    if (r) {
      const { container: o, dispose: a, css3DObject: l } = r;
      this.container = o, this.css3DObject = l, this.disposeCss3DObject = a;
    }
    this.contentElement.style.width = "100%", this.contentElement.style.height = "100%", this.contentElement.style.backgroundImage = `url(${Ub})`, this.contentElement.style.backgroundSize = "100%", this.contentElement.style.backgroundRepeat = "no-repeat";
  }
  enable() {
    var t;
    this.state.enabled || (this.state.enabled = !0, (t = this.container) == null || t.appendChild(this.contentElement));
  }
  disable() {
    this.state.enabled && (this.state.enabled = !1, this.contentElement.remove());
  }
  updateWithIntersect(t) {
    if (!t.face || !this.css3DObject)
      return;
    const e = new P.Vector3().addVectors(t.point, t.face.normal);
    this.css3DObject.position.copy(t.point), this.css3DObject.lookAt(e), this.five.needsRender = !0;
  }
  /** 缩放动画 */
  doAnimation() {
    var t;
    (t = this.animeIns) == null || t.dispose(), new Ds({ progress: 0 }).to({ progress: [1, 0] }).duration(500).easing(ji.Quadratic.InOut).onUpdate(({ progress: e }) => {
    }).play();
  }
  dispose() {
    var t;
    (t = this.disposeCss3DObject) == null || t.call(this);
  }
}
const iy = `
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`, ny = `
varying vec2 vUv;
void main() {
  vec2 uv = vec2(vUv.x, vUv.y);
  float a = 1.0;
  float match = 1.0 - uv.x;
  gl_FragColor = vec4(1.0,1.0,1.0,match);
}
`;
function sy() {
  const n = new P.PlaneGeometry(0.4, 0.4), t = Pg, e = new P.TextureLoader().load(t);
  e.encoding = P.sRGBEncoding, e.minFilter = P.LinearFilter;
  const i = new P.MeshBasicMaterial({
    map: e,
    transparent: !0,
    depthTest: !1
  });
  return new P.Mesh(n, i);
}
function ry() {
  const n = new P.CurvePath();
  n.add(new P.LineCurve3(new P.Vector3(0, 0, 0), new P.Vector3(0, 0, 0.1)));
  const t = new P.TubeGeometry(n, 8, 3e-3), e = new P.ShaderMaterial({
    vertexShader: iy,
    fragmentShader: ny,
    depthTest: !1,
    transparent: !0
  });
  return new P.Mesh(t, e);
}
function oy() {
  const n = new P.SphereGeometry(0.01, 20, 20), t = new P.MeshBasicMaterial({
    color: 10349931,
    depthTest: !1,
    transparent: !0,
    side: P.DoubleSide
  }), e = new P.Mesh(n, t);
  return e.position.set(0, 0, 0.1), e;
}
class ay extends P.Object3D {
  constructor() {
    super();
    u(this, "planeMesh");
    u(this, "lineMesh");
    u(this, "ballMesh");
    this.planeMesh = sy(), this.lineMesh = ry(), this.ballMesh = oy(), this.add(this.planeMesh, this.lineMesh, this.ballMesh);
  }
  updateWithIntersect(e) {
    if (!e.face)
      return;
    const i = new P.Vector3().addVectors(e.point, e.face.normal);
    this.position.copy(e.point), this.lookAt(i);
  }
  dispose() {
    var e;
    (e = this.planeMesh.material.map) == null || e.dispose();
  }
}
const Nl = Math.PI * 2;
function Mc(n) {
  return (n % Nl + Nl) % Nl;
}
function Ho(n) {
  return {
    longitude: Mc(-Math.atan2(n.x, -n.z)),
    latitude: -Math.asin(n.y / 1)
  };
}
function ly(n, t, e) {
  return $(this, null, function* () {
    var w, x, k;
    if (!t)
      return;
    const i = Tg(t);
    if (!i)
      return;
    const s = new rl(n), r = (w = e == null ? void 0 : e.scale) != null ? w : 1.4, o = i.center, a = n.camera.position.clone().sub(o).setY(0).normalize(), l = n.state.mode === "Mapview" ? n.state.fov : 60, h = Math.max(1.5, i.radius * r), d = h * (1 / Math.tan(P.MathUtils.degToRad(l / 2)));
    let f = 0;
    const g = [], p = (T) => {
      const S = P.MathUtils.degToRad(T);
      return a.clone().applyAxisAngle(new P.Vector3(0, 1, 0), S).clone().multiplyScalar(d).add(new P.Vector3(0, h, 0)).add(o);
    };
    for (; f !== 360; ) {
      let T = 0;
      const S = p(f), V = (A) => {
        const C = A.distanceTo(S), I = new P.Raycaster(A, S.clone().sub(A).normalize()), E = s.model.intersectRaycaster(I, void 0, !0)[0], D = E == null ? void 0 : E.distance;
        _e(D) ? D > C && (T += 1) : T += 1;
      }, z = i.clampPoint(S, new P.Vector3());
      V(z);
      const O = new P.Vector3(o.x, S.y, o.z);
      if (V(O), _e(g[T]) && f > g[T] || (g[T] = f), T === 2)
        break;
      f += 30;
    }
    const m = p((k = (x = g[2]) != null ? x : g[1]) != null ? k : 0), v = m.distanceTo(o), b = Ho(o.clone().sub(m).normalize());
    if (n.state.mode === "Mapview")
      return n.updateCamera(
        _({
          offset: o,
          distance: v
        }, b),
        800
      );
    n.setState(_({
      mode: "Mapview",
      offset: o,
      distance: v
    }, b)), yield n.ready();
  });
}
function Kg(n, t, e) {
  return $(this, null, function* () {
    var m, v;
    if (!t)
      return;
    const i = (m = e == null ? void 0 : e.distance) != null ? m : 3, s = new rl(n), r = n.camera.position.clone().sub(t).setY(0).normalize(), o = n.state.mode === "Mapview" ? n.state.fov : 60, a = i, l = a * Math.cos(P.MathUtils.degToRad(o / 2)), c = a * Math.sin(P.MathUtils.degToRad(o / 2));
    let h = 0;
    const d = [], f = (b) => {
      const w = P.MathUtils.degToRad(b);
      return r.clone().applyAxisAngle(new P.Vector3(0, 1, 0), w).clone().multiplyScalar(l).add(new P.Vector3(0, c, 0)).add(t);
    };
    for (; h !== 360; ) {
      let b = 0;
      const w = f(h);
      if (((k) => {
        const T = k.distanceTo(w), S = new P.Raycaster(k, w.clone().sub(k).normalize()), V = s.model.intersectRaycaster(S, void 0, !0)[0], z = V == null ? void 0 : V.distance;
        _e(z) ? z > T && (b += 1) : b += 1;
      })(t), d[b] = h, b === 1)
        break;
      h += 30;
    }
    const g = f((v = d[1]) != null ? v : 0), p = Ho(t.clone().sub(g).normalize());
    if (n.state.mode === "Mapview")
      return n.updateCamera(
        _({
          offset: t,
          distance: i
        }, p),
        800
      );
    n.setState(_({
      mode: "Mapview",
      offset: t,
      distance: i
    }, p)), yield n.ready();
  });
}
function $g(n, t) {
  const { top: e, left: i, width: s, height: r } = t.getBoundingClientRect();
  return new P.Vector2((n.x - i) / s * 2 - 1, -(n.y - e) / r * 2 + 1);
}
class Pr {
  constructor(t, e) {
    u(this, "_five");
    /**
     * @description: 拖动中
     */
    u(this, "dragging", !1);
    u(this, "boundObject", {});
    u(this, "config");
    u(this, "handleWantsGesture", (t, e) => {
      if (e.length !== 1)
        return;
      const i = e[0];
      if (i.raycaster) {
        const s = new yo();
        s.ray = i.raycaster.ray, s.near = i.raycaster.near, s.far = i.raycaster.far, s.camera = i.raycaster.camera, s.layers = i.raycaster.layers, s.params = i.raycaster.params, i.raycaster = s;
      }
      if (i) {
        if (t === "mouseMove" && this.onDomEvent("hover", i), t === "tap") {
          const s = new MouseEvent("click", { clientX: i.x, clientY: i.y }), r = this.onDomEvent("click", i, s), o = this.onDomEvent("wantDblclick", i, s, this.boundObject.dblclick);
          if (r === !1 || o === !1)
            return !1;
        }
        if (this.dragging)
          return !1;
      }
    });
    u(this, "handleDomEvent", (t, e, i) => {
      const s = { x: e.clientX, y: e.clientY };
      this.onDomEvent(t, s, e, i);
    });
    u(this, "handleMouseEvent", (t) => {
      this.handleDomEvent(t.type, t);
    });
    u(this, "handleMousedown", (t) => {
      this.handleDomEvent("mousedown", t), this.handleDomEvent("dragstart", t, this.haveDragEventObject);
    });
    u(this, "handleMouseup", (t) => {
      var e;
      this.dragging = !1, (e = this.haveDragEventObject) == null || e.forEach((i) => {
        i._dragging && (i._dragging = !1, this.notify({
          eventName: "dragend",
          object: i,
          originEvent: t,
          raycaster: this.getRaycaster({ x: t.clientX, y: t.clientY })
        }));
      }), this.handleDomEvent("mouseup", t);
    });
    u(this, "handleMousemove", (t) => {
      var e;
      this.dragging && ((e = this.boundObject.drag) == null || e.forEach((i) => {
        i._dragging && this.notify({
          eventName: "drag",
          object: i,
          originEvent: t,
          raycaster: this.getRaycaster({ x: t.clientX, y: t.clientY })
        });
      }));
    });
    // eslint-disable-next-line complexity
    u(this, "onDomEvent", (t, e, i, s = this.boundObject[t]) => {
      var f, g, p, m, v;
      if (!e || !s || (s == null ? void 0 : s.length) === 0)
        return;
      const r = [];
      ((f = this.config) == null ? void 0 : f.fiveModels) !== null && ((g = this.config) != null && g.fiveModels ? r.push(...this.config.fiveModels) : r.push(this.model));
      const o = r.filter((b) => b.loaded), a = (p = e.raycaster) != null ? p : this.getRaycaster(e);
      a.params.Points.threshold = 0.04;
      const l = a.intersectObjects(s, !0), c = [];
      o.forEach((b) => {
        const w = b.intersectRaycaster(a);
        c.push(...w);
      });
      const h = 0.01;
      if (c.length > 0 && l.length > 0 && c[0].distance + h < l[0].distance)
        return;
      const d = (m = l == null ? void 0 : l[0]) == null ? void 0 : m.object;
      if (t === "wantDblclick")
        return !1;
      if ((!d || !this.objectIsBound(d)) && t === "hover")
        for (const b of (v = this.boundObject.hover) != null ? v : [])
          b._hovered && this.notify({ eventName: "unHover", object: b });
      if (d && d && this.notify({ eventName: t, object: d, originEvent: i, raycaster: a, intersects: l, fiveModelIntersects: c }))
        return !1;
    });
    u(this, "objectIsBound", (t) => {
      let e = t._domEvent, i = t.parent;
      for (; typeof e == "undefined" && i; )
        e = i._domEvent, i = i.parent;
      return !!e;
    });
    u(this, "notify", (t) => {
      var m, v, b, w, x, k, T;
      const { eventName: e, object: i, originEvent: s, raycaster: r, intersects: o, fiveModelIntersects: a } = t;
      if (!i)
        return !1;
      let l = !1, c = [];
      const h = [], d = () => {
        if (!o)
          return !1;
        const S = o.slice(1);
        return S[0] ? this.notify(de(_({}, t), { object: S[0].object, intersects: S })) : !1;
      };
      let f = i;
      for (h.push(f); f.parent; )
        f = f.parent, h.push(f);
      const g = h[h.length - 1];
      if ((m = this.config) != null && m.noEmitWhenNotInScene && g.type !== "Scene")
        return d();
      let p = !1;
      for (const S of h) {
        if (l)
          break;
        S.draggable && (e === "dragstart" && (S._dragging = !0, this.dragging = !0), e === "dragend" && (S._dragging = !1, this.dragging = !1));
        const V = S._domEvent;
        if (!V)
          continue;
        const z = V[`${e}Handler`];
        if (z)
          for (const [O, A] of z) {
            if (A != null && A.noEmitWhenNotInScene && g.type !== "Scene")
              continue;
            if (A.skipPano && a) {
              const I = (v = a[0]) == null ? void 0 : v.point;
              if (I && ((x = (w = (b = this.five.observers) == null ? void 0 : b[this.five.panoIndex]) == null ? void 0 : w.accessibleNodes) != null && x.some((E) => {
                var L;
                const D = (L = this.five.works.getResolvedObserver({
                  workCode: this.five.state.workCode,
                  panoIndex: E
                })) == null ? void 0 : L.standingPosition;
                return (D == null ? void 0 : D.distanceTo(I)) < 0.3;
              })))
                continue;
            }
            if (((k = this.config) != null && k.noEmitWhenHide || A != null && A.noEmitWhenHide) && !fh(S))
              continue;
            if (p = !0, e === "hover") {
              if (S._hovered)
                continue;
              S._hovered = !0;
              for (const I of (T = this.boundObject.hover) != null ? T : [])
                I !== S && I._hovered && this.notify({ eventName: "unHover", object: I });
            }
            if (e === "unHover") {
              if (!S._hovered)
                continue;
              S._hovered = !1;
            }
            const C = O({
              type: e,
              target: S,
              origDomEvent: s,
              raycaster: r,
              intersects: o,
              stopPropagation: () => {
                l = !0;
              }
            });
            c.push(C != null ? C : !0);
          }
      }
      if (p === !1)
        return d();
      if (e === "click" || e === "wantDblclick")
        return c.some((S) => S === !0);
    });
    var i;
    this.five = t, this.config = e, t.off("wantsGesture", this.handleWantsGesture), t.on("wantsGesture", this.handleWantsGesture), document.addEventListener("mousedown", this.handleMousedown), document.addEventListener("dblclick", this.handleMouseEvent), document.addEventListener("mouseup", this.handleMouseup), document.addEventListener("mousemove", this.handleMousemove), window.__FIVE_DOM_EVENTS__ = (i = window.__FIVE_DOM_EVENTS__) != null ? i : [], window.__FIVE_DOM_EVENTS__.push(this);
  }
  get five() {
    return this._five;
  }
  set five(t) {
    var e;
    (e = this._five) == null || e.off("wantsGesture", this.handleWantsGesture), this._five = t, this._five.on("wantsGesture", this.handleWantsGesture);
  }
  get haveDragEventObject() {
    return [...new Set([this.boundObject.dragend, this.boundObject.drag, this.boundObject.dragstart].flat())].filter(Boolean);
  }
  get model() {
    return Ci(this.five);
  }
  /**
   * @description: added 时自动绑定事件，removed时自动解绑事件，也就是说只有物体在场景中的时候才会触发事件
   * @note: 注意：目前需要触发物体的 added 事件和 removed 事件才会生效
   * @todo: added 和 removed 还是不太智能
   */
  addAutoBindEventListener(t, e, i, s) {
    const r = () => this.addEventListener(t, e, i, s), o = () => this.removeEventListener(t, e, i, s);
    return t.addEventListener("added", r), t.addEventListener("removed", o), t.addEventListener("dispose", o), () => {
      t.removeEventListener("added", r), t.removeEventListener("removed", o), t.removeEventListener("dispose", o);
    };
  }
  /**
   * @description: add event listener
   * @param params.object: object
   * @param params.event: event name
   * @param params.callback: 返回 false 可以不阻止 five 的 tap 事件; default: true
   * @return {void}
   */
  addEventListener(t, e, i, s) {
    t._domEvent || (t._domEvent = {}), t._domEvent[`${e}Handler`] || (t._domEvent[`${e}Handler`] = []), this.boundObject[e] || (this.boundObject[e] = []), this.boundObject[e].includes(t) || this.boundObject[e].push(t), t._domEvent[`${e}Handler`].push([i, _({ noEmitWhenHide: !1, noEmitWhenNotInScene: !1 }, s)]);
  }
  removeEventListener(t, e, i, ...s) {
    var o, a;
    if (!t._domEvent || (e === void 0 && (Object.keys(this.boundObject).forEach((l) => {
      var h, d;
      const c = (h = this.boundObject[l]) == null ? void 0 : h.findIndex((f) => f === t);
      c !== -1 && ((d = this.boundObject[l]) == null || d.splice(c, 1));
    }), t._domEvent = {}), !t._domEvent[`${e}Handler`]))
      return;
    if (i === void 0) {
      delete t._domEvent[`${e}Handler`];
      return;
    }
    const r = t._domEvent[`${e}Handler`].findIndex((l) => l[0] === i);
    if (r !== -1 && (t._domEvent[`${e}Handler`].splice(r, 1), t._domEvent[`${e}Handler`].length === 0 && delete t._domEvent[`${e}Handler`], t._domEvent && Object.keys(t._domEvent).length === 0 && delete t._domEvent, !t._domEvent)) {
      const l = (o = this.boundObject[e]) == null ? void 0 : o.findIndex((c) => c === t);
      l !== -1 && ((a = this.boundObject[e]) == null || a.splice(l, 1));
    }
  }
  clear() {
    this.boundObject = {};
  }
  dispose() {
    var t;
    (t = this.five) == null || t.off("wantsGesture", this.handleWantsGesture), document.removeEventListener("mousedown", this.handleMousedown), document.removeEventListener("mouseup", this.handleMouseup), document.removeEventListener("mousemove", this.handleMousemove), this.boundObject = {};
  }
  toJSON() {
    return {
      boundObject: this.boundObject
    };
  }
  getRaycaster(t) {
    const e = this.five.getElement();
    if (!e)
      return;
    const i = $g(t, e), s = new yo();
    return s.setFromCamera(i, this.five.camera), s;
  }
}
function cy(n) {
  return n.model ? n.work ? n.model.loaded ? n.model.name !== n.work.model.file ? { result: !1, msg: "five.model.name 与 five.work.model.file 不一致" } : { result: !0, msg: "" } : { result: !1, msg: "five.model 未加载完成" } : { result: !1, msg: "five 数据未加载" } : { result: !1, msg: "five.model 不存在" };
}
function e0(n) {
  return /^https?:\/\/|^\/\//.test(n) || /^data:/.test(n);
}
function Eh(n, t) {
  return e0(t) ? t : `${n}${t}`;
}
class Ds extends sl {
  constructor() {
    super(...arguments);
    u(this, "disposeMethods", []);
    u(this, "animationFrameDisposer");
    u(this, "onDispose", (e) => (this.disposeMethods.push(e), this));
    u(this, "play", () => {
      var e;
      return this.start(0), (e = this.animationFrameDisposer) == null || e.call(this), this.animationFrameDisposer = jr((i) => this.update(i)), this;
    });
    u(this, "stop", () => {
      var e;
      return super.stop(), (e = this.animationFrameDisposer) == null || e.call(this), this;
    });
    u(this, "dispose", () => {
      var e;
      this.stop(), (e = this.animationFrameDisposer) == null || e.call(this), this.disposeMethods.forEach((i) => i()), this.disposeMethods = [], fg(this);
    });
  }
}
function Io(n, t = ji.Linear.None) {
  const e = new Ds({ progress: 0 }).to({ progress: 1 });
  return n !== void 0 && e.duration(n), t !== void 0 && e.easing(t), e;
}
const Cr = window.requestAnimationFrame || ((n) => setTimeout(n, 16)), hy = window.cancelAnimationFrame || clearTimeout;
function Fo(n, t = 0) {
  t <= 0 ? Cr(n) : Cr(() => Fo(n, t - 1));
}
function dy() {
  return $(this, null, function* () {
    return new Promise((n) => {
      Cr(() => n());
    });
  });
}
function jr(n, t = 60) {
  let e = -1, i = 0, s = -1;
  const r = 1e3 / t;
  function o(a) {
    s === -1 && (s = a), e = Cr(o), !(a - i < r) && (i = a, n == null || n(a - s));
  }
  return e = Cr(o), function() {
    hy(e);
  };
}
function uy() {
  const n = Date.now();
  return new Promise((t) => {
    Cr(() => {
      t(Date.now() - n);
    });
  });
}
function Ra(n) {
  return Object.prototype.toString.call(n) === "[object Object]";
}
function pl(n, t) {
  return n === t ? !0 : typeof n != typeof t ? !1 : !!(Number.isNaN(n) && Number.isNaN(t));
}
function fy(n, t) {
  const e = Object.getOwnPropertyNames(n), i = Object.getOwnPropertyNames(t);
  if (e.length !== i.length)
    return !1;
  for (let s = 0, r = e.length; s < r; s++) {
    const o = e[s];
    if (!pl(n[o], t[o]))
      return !1;
  }
  return !0;
}
function py(n, t) {
  if (n.length !== t.length)
    return !1;
  for (let e = 0, i = n.length; e < i; e++)
    if (!pl(n[e], t[e]))
      return !1;
  return !0;
}
function my(n, t) {
  return pl(n, t) ? !0 : Ra(n) && Ra(t) ? fy(n, t) : Array.isArray(n) && Array.isArray(t) ? py(n, t) : !1;
}
function Mh(n, t) {
  return pl(n, t) ? !0 : Ra(n) && Ra(t) ? vy(n, t) : Array.isArray(n) && Array.isArray(t) ? gy(n, t) : !1;
}
function gy(n, t) {
  if (n.length !== t.length)
    return !1;
  for (let e = 0, i = n.length; e < i; e++)
    if (!Mh(n[e], t[e]))
      return !1;
  return !0;
}
function vy(n, t) {
  const e = Object.getOwnPropertyNames(n), i = Object.getOwnPropertyNames(t);
  if (e.length !== i.length)
    return !1;
  for (let s = 0, r = e.length; s < r; s++) {
    const o = e[s];
    if (!Mh(n[o], t[o]))
      return !1;
  }
  return !0;
}
function Qt(n, t, e = { deep: !1 }) {
  return e.deep ? Mh(n, t) : my(n, t);
}
const Ay = new P.Vector2();
class by {
  constructor(t, e) {
    u(this, "scene", new P.Scene());
    u(this, "five");
    u(this, "renderer");
    u(this, "cancelRequestAnimationFrameId");
    u(this, "camera", new P.Camera());
    u(this, "domInited", !1);
    u(this, "canvasWrapper");
    u(this, "params");
    u(this, "_rendererCache");
    u(this, "_cameraCache");
    u(this, "animate", () => {
      var s, r, o;
      if (this.cancelRequestAnimationFrameId = requestAnimationFrame(this.animate), !this.five.renderer)
        return;
      const t = this.five.renderer.getSize(Ay), e = t.toArray().join(",");
      e !== this._rendererCache && (this._rendererCache = e, this.renderer.setSize(t.x, t.y));
      const i = this.five.camera.projectionMatrix.toArray().join(",") + this.five.camera.matrixWorld.toArray().join(",");
      if (i !== this._cameraCache && (this._cameraCache = i, this.camera.copy(this.five.camera)), this.renderer.render(this.scene, this.camera), !this.domInited) {
        const a = (s = this.five.getElement()) == null ? void 0 : s.parentElement;
        a && (this.canvasWrapper = document.createElement("div"), this.canvasWrapper.classList.add("five-puppet"), this.canvasWrapper.style.position = "absolute", this.canvasWrapper.style.pointerEvents = "none", this.canvasWrapper.style.left = "0", this.canvasWrapper.style.top = "0", this.canvasWrapper.style.zIndex = `${(o = (r = this.params) == null ? void 0 : r.zIndex) != null ? o : 1}`, this.canvasWrapper.appendChild(this.renderer.domElement), a.appendChild(this.canvasWrapper), this.domInited = !0);
      }
    });
    u(this, "stopAnimate", () => {
      this.cancelRequestAnimationFrameId && cancelAnimationFrame(this.cancelRequestAnimationFrameId);
    });
    u(this, "destory", () => {
      var t;
      this.stopAnimate(), this.renderer.dispose(), this.renderer.domElement.remove(), (t = this.canvasWrapper) == null || t.remove();
    });
    this.five = t, this.params = e, this.renderer = new Av({
      webgl2: !0,
      pixelRatio: window.devicePixelRatio,
      backgroundAlpha: 0,
      backgroundColor: 0
    }), this.renderer.domElement.style.pointerEvents = "none", this.renderer.setSize(1, 1), window.__FIVEPUPPET_DEBUG__ = this, this.animate();
  }
}
const Dx = (n, t) => {
  var C, I;
  const e = new Pt();
  let i = (I = (C = t == null ? void 0 : t.initialState) == null ? void 0 : C.enabled) != null ? I : !0, s = !1, r = !0, o = null;
  const l = _(_({}, {
    lookAtCurrentCamera: !1,
    lockedPanoIndex: null,
    lockedLatitude: null,
    lockedLongitude: null
  }), t == null ? void 0 : t.config), c = new P.Scene(), h = new bv(60);
  h.near = 1, h.updateTime(Date.now());
  let d = new P.Object3D(), f, g;
  {
    const E = new P.DirectionalLight(16777215, 0.5);
    E.position.copy(new P.Vector3(1, 1, 1)), c.add(E);
  }
  {
    const E = new P.DirectionalLight(16777215, 0.3);
    c.add(E);
  }
  {
    const E = new P.AmbientLight(16777215, 0.3);
    c.add(E);
  }
  c.add(d);
  const p = () => $(void 0, null, function* () {
    var G, Z, ee, J;
    if (s || !((Z = (G = n.work) == null ? void 0 : G.model) != null && Z.file))
      return;
    c.remove(d), d = yield yv(n.work.model.file, {
      textureOptions: { size: 128, quality: 70 },
      textureArray: (ee = n.work.model) == null ? void 0 : ee.textures,
      textureBaseUri: (J = n.work.model) == null ? void 0 : J.textureBase
    }).then((ie) => {
      const ne = ie.scene;
      return ne.rotateX(-Math.PI / 2), ne;
    });
    const E = Bs(d), D = new P.Box3();
    D.expandByPoint(new P.Vector3(E.min.x, E.min.z, -E.min.y)), D.expandByPoint(new P.Vector3(E.max.x, E.max.z, -E.max.y));
    const L = Math.pow(
      Math.pow(D.max.x - D.min.x + 1, 2) + Math.pow(D.max.y - D.min.y + 1, 2) + Math.pow(D.max.z - D.min.z + 1, 2),
      1 / 2
    );
    let N = L / 2 / Math.tan(Math.PI * h.fov / 360);
    h.aspect < 1 && (N = f / h.aspect), f = isNaN(N) ? L : N, g = D.getCenter(new P.Vector3()), c.add(d), s = !0, e.emit("loaded"), S();
  });
  i && p();
  const m = () => {
    if (n.renderer)
      return o || (o = new P.WebGLRenderer({ antialias: !1, alpha: !0 }), o.setPixelRatio(n.renderer.getPixelRatio()), o.outputEncoding = P.sRGBEncoding, o.setClearColor(1579548, 0), o.autoClear = !0), o;
  }, v = () => {
    c.remove(d), d = new P.Object3D(), c.add(d), s = !1, e.emit("willLoad"), S();
  }, b = () => {
    i && (s || p());
  }, w = () => {
    var E, D;
    i || (i = !0, c.add(d), !s && ((D = (E = n.work) == null ? void 0 : E.model) != null && D.file) && p(), S());
  }, x = () => {
    i && (c.remove(d), r = !0, V(), i = !1);
  }, k = (E, D = {}) => {
    const L = m();
    if (!L)
      return;
    E.appendChild(L.domElement), T(D);
    const N = window.getComputedStyle(E).position;
    N !== "relative" && N !== "absolute" && N !== "fixed" && N !== "sticky" && (E.style.position = "relative");
  }, T = (E = {}) => {
    if (!o)
      return;
    const L = o.domElement.parentNode;
    if (L != null && L.nodeName) {
      const { width: N = L.offsetWidth, height: G = L.offsetHeight } = E;
      o.setSize(N, G), h.aspect = N / G, h.updateProjectionMatrix();
    }
    S();
  }, S = () => {
    if (!i || !f || !g)
      return;
    const E = n.getPose();
    E.fov = h.fov, E.offset = g, E.distance = f, typeof l.lockedLatitude == "number" && (E.latitude = l.lockedLatitude), typeof l.lockedLongitude == "number" && (E.longitude = l.lockedLongitude), typeof l.lockedPanoIndex == "number" && (E.offset = n.work.observers[l.lockedPanoIndex].standingPosition.clone()), l.lookAtCurrentCamera && (E.offset = n.camera.position.clone().setY(n.camera.position.y + 1)), h.setFromPose(E), r = !0;
  }, V = () => {
    !i || r !== !0 || !o || !o.domElement.parentNode || o.domElement.parentNode.offsetWidth === 0 || (o.render(c, h), r = !1);
  }, z = () => {
    o && o.dispose(), o = null;
  }, O = (E) => {
    Object.assign(l, E), S();
  }, A = () => ({
    enabled: i
  });
  return n.on("loaded", b), n.on("willLoad", v), n.on("cameraDirectionUpdate", S), n.on("dispose", z), n.on("renderFrame", V), n.on("cameraPositionUpdate", S), { appendTo: k, refresh: T, changeConfigs: O, enable: w, disable: x, getCurrentState: A, hooks: e };
};
class t0 extends tA {
  constructor(...t) {
    super(...t);
  }
  toJSON() {
    return {
      type: "FiveLine",
      points: this.points.toJSON()
    };
  }
}
function Gl(n, t, e = new fe(1, 1, 1), i = !1) {
  const s = new t0(n, t);
  return s.setMaterial({ dashed: i, color: e, linewidth: 1 }), s.remove(s.points), s;
}
const Sx = (n) => {
  const t = {
    intersection: null,
    disposers: []
  }, e = (h) => {
    t.intersection = h;
  }, i = () => {
    t.intersection = null;
  };
  n.on("modelLoaded", () => {
    n.on("intersectionOnModelUpdate", e), n.on("intersectionHidden", i);
  }), n.on("dispose", () => {
    n.off("intersectionOnModelUpdate", e), n.off("intersectionHidden", i);
  });
  const s = (h, d = 2, f = 0.1) => {
    const g = d / 2, m = c(h, f), v = new fn();
    v.add(
      Gl(
        new fe(m.x + g, m.y, m.z),
        new fe(m.x - g, m.y, m.z),
        new fe(1, 0, 0)
      ),
      Gl(
        new fe(m.x, m.y + g, m.z),
        new fe(m.x, m.y - g, m.z),
        new fe(0, 1, 0)
      ),
      Gl(
        new fe(m.x, m.y, m.z + g),
        new fe(m.x, m.y, m.z - g),
        new fe(0, 0, 1)
      )
    ), n.scene.add(v), n.needsRender = !0;
    const b = () => {
      n.scene.remove(v);
    };
    return t.disposers.push(b), { clear: b, pointAxesHelperMesh: v };
  }, r = (h, d = 0) => {
    var b, w;
    const f = (b = n == null ? void 0 : n.camera) == null ? void 0 : b.position;
    if (!f)
      return !1;
    const g = h.distanceTo(f), p = h.sub(f).normalize(), m = new Or(f, p), v = (w = n.model.intersectRaycaster(m)) == null ? void 0 : w[0];
    return !(v && v.distance + d < g);
  }, o = () => t.intersection, a = () => {
    var h, d;
    (d = (h = t.disposers) == null ? void 0 : h.forEach) == null || d.call(h, (f) => f == null ? void 0 : f()), n.off("intersectionOnModelUpdate", e), n.off("intersectionHidden", i);
  }, l = a, c = (h, d) => {
    const f = h.clone();
    return n.camera.position.clone().sub(f).setLength(d).add(f);
  };
  return { intersection: o, pointAxesHelper: s, movePointTowardsCamera: c, destroy: a, dispose: l, canSeePoint: r };
};
function se() {
}
const vn = (n) => n;
function St(n, t) {
  for (const e in t)
    n[e] = t[e];
  return n;
}
function yy(n) {
  return !!n && (typeof n == "object" || typeof n == "function") && typeof n.then == "function";
}
function i0(n) {
  return n();
}
function Yd() {
  return /* @__PURE__ */ Object.create(null);
}
function vt(n) {
  n.forEach(i0);
}
function Ri(n) {
  return typeof n == "function";
}
function Pe(n, t) {
  return n != n ? t == t : n !== t || n && typeof n == "object" || typeof n == "function";
}
let ca;
function pt(n, t) {
  return ca || (ca = document.createElement("a")), ca.href = t, n === ca.href;
}
function wy(n) {
  return Object.keys(n).length === 0;
}
function Zn(n, t, e, i) {
  if (n) {
    const s = n0(n, t, e, i);
    return n[0](s);
  }
}
function n0(n, t, e, i) {
  return n[1] && i ? St(e.ctx.slice(), n[1](i(t))) : e.ctx;
}
function Jn(n, t, e, i) {
  if (n[2] && i) {
    const s = n[2](i(e));
    if (t.dirty === void 0)
      return s;
    if (typeof s == "object") {
      const r = [], o = Math.max(t.dirty.length, s.length);
      for (let a = 0; a < o; a += 1)
        r[a] = t.dirty[a] | s[a];
      return r;
    }
    return t.dirty | s;
  }
  return t.dirty;
}
function qn(n, t, e, i, s, r) {
  if (s) {
    const o = n0(t, e, i, r);
    n.p(o, s);
  }
}
function Kn(n) {
  if (n.ctx.length > 32) {
    const t = [], e = n.ctx.length / 32;
    for (let i = 0; i < e; i++)
      t[i] = -1;
    return t;
  }
  return -1;
}
function bt(n) {
  return n == null ? "" : n;
}
function Pi(n) {
  return n && Ri(n.destroy) ? n.destroy : se;
}
function Zd(n) {
  const t = typeof n == "string" && n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);
  return t ? [parseFloat(t[1]), t[2] || "px"] : [n, "px"];
}
const s0 = typeof window != "undefined";
let kh = s0 ? () => window.performance.now() : () => Date.now(), xh = s0 ? (n) => requestAnimationFrame(n) : se;
const pr = /* @__PURE__ */ new Set();
function r0(n) {
  pr.forEach((t) => {
    t.c(n) || (pr.delete(t), t.f());
  }), pr.size !== 0 && xh(r0);
}
function Dh(n) {
  let t;
  return pr.size === 0 && xh(r0), {
    promise: new Promise((e) => {
      pr.add(t = { c: n, f: e });
    }),
    abort() {
      pr.delete(t);
    }
  };
}
function R(n, t) {
  n.appendChild(t);
}
function De(n, t, e) {
  const i = Sh(n);
  if (!i.getElementById(t)) {
    const s = W("style");
    s.id = t, s.textContent = e, o0(i, s);
  }
}
function Sh(n) {
  if (!n)
    return document;
  const t = n.getRootNode ? n.getRootNode() : n.ownerDocument;
  return t && t.host ? t : n.ownerDocument;
}
function Py(n) {
  const t = W("style");
  return o0(Sh(n), t), t.sheet;
}
function o0(n, t) {
  return R(n.head || n, t), t.sheet;
}
function X(n, t, e) {
  n.insertBefore(t, e || null);
}
function U(n) {
  n.parentNode && n.parentNode.removeChild(n);
}
function pi(n, t) {
  for (let e = 0; e < n.length; e += 1)
    n[e] && n[e].d(t);
}
function W(n) {
  return document.createElement(n);
}
function be(n) {
  return document.createElementNS("http://www.w3.org/2000/svg", n);
}
function je(n) {
  return document.createTextNode(n);
}
function oe() {
  return je(" ");
}
function Fe() {
  return je("");
}
function Oe(n, t, e, i) {
  return n.addEventListener(t, e, i), () => n.removeEventListener(t, e, i);
}
function Cy(n) {
  return function(t) {
    return t.stopPropagation(), n.call(this, t);
  };
}
function y(n, t, e) {
  e == null ? n.removeAttribute(t) : n.getAttribute(t) !== e && n.setAttribute(t, e);
}
function Iy(n) {
  return Array.from(n.childNodes);
}
function He(n, t) {
  t = "" + t, n.data !== t && (n.data = t);
}
function Q(n, t, e, i) {
  e === null ? n.style.removeProperty(t) : n.style.setProperty(t, e, i ? "important" : "");
}
let ha;
function Ey() {
  if (ha === void 0) {
    ha = !1;
    try {
      typeof window != "undefined" && window.parent && window.parent.document;
    } catch (n) {
      ha = !0;
    }
  }
  return ha;
}
function Th(n, t) {
  getComputedStyle(n).position === "static" && (n.style.position = "relative");
  const i = W("iframe");
  i.setAttribute("style", "display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"), i.setAttribute("aria-hidden", "true"), i.tabIndex = -1;
  const s = Ey();
  let r;
  return s ? (i.src = "data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>", r = Oe(window, "message", (o) => {
    o.source === i.contentWindow && t();
  })) : (i.src = "about:blank", i.onload = () => {
    r = Oe(i.contentWindow, "resize", t), t();
  }), R(n, i), () => {
    (s || r && i.contentWindow) && r(), U(i);
  };
}
function ye(n, t, e) {
  n.classList[e ? "add" : "remove"](t);
}
function a0(n, t, { bubbles: e = !1, cancelable: i = !1 } = {}) {
  const s = document.createEvent("CustomEvent");
  return s.initCustomEvent(n, e, i, t), s;
}
class Ba {
  constructor(t = !1) {
    this.is_svg = !1, this.is_svg = t, this.e = this.n = null;
  }
  c(t) {
    this.h(t);
  }
  m(t, e, i = null) {
    this.e || (this.is_svg ? this.e = be(e.nodeName) : this.e = W(e.nodeType === 11 ? "TEMPLATE" : e.nodeName), this.t = e.tagName !== "TEMPLATE" ? e : e.content, this.c(t)), this.i(i);
  }
  h(t) {
    this.e.innerHTML = t, this.n = Array.from(this.e.nodeName === "TEMPLATE" ? this.e.content.childNodes : this.e.childNodes);
  }
  i(t) {
    for (let e = 0; e < this.n.length; e += 1)
      X(this.t, this.n[e], t);
  }
  p(t) {
    this.d(), this.h(t), this.i(this.a);
  }
  d() {
    this.n.forEach(U);
  }
}
const Va = /* @__PURE__ */ new Map();
let _a = 0;
function My(n) {
  let t = 5381, e = n.length;
  for (; e--; )
    t = (t << 5) - t ^ n.charCodeAt(e);
  return t >>> 0;
}
function ky(n, t) {
  const e = { stylesheet: Py(t), rules: {} };
  return Va.set(n, e), e;
}
function Ha(n, t, e, i, s, r, o, a = 0) {
  const l = 16.666 / i;
  let c = `{
`;
  for (let v = 0; v <= 1; v += l) {
    const b = t + (e - t) * r(v);
    c += v * 100 + `%{${o(b, 1 - b)}}
`;
  }
  const h = c + `100% {${o(e, 1 - e)}}
}`, d = `__svelte_${My(h)}_${a}`, f = Sh(n), { stylesheet: g, rules: p } = Va.get(f) || ky(f, n);
  p[d] || (p[d] = !0, g.insertRule(`@keyframes ${d} ${h}`, g.cssRules.length));
  const m = n.style.animation || "";
  return n.style.animation = `${m ? `${m}, ` : ""}${d} ${i}ms linear ${s}ms 1 both`, _a += 1, d;
}
function Fa(n, t) {
  const e = (n.style.animation || "").split(", "), i = e.filter(
    t ? (r) => r.indexOf(t) < 0 : (r) => r.indexOf("__svelte") === -1
    // remove all Svelte animations
  ), s = e.length - i.length;
  s && (n.style.animation = i.join(", "), _a -= s, _a || xy());
}
function xy() {
  xh(() => {
    _a || (Va.forEach((n) => {
      const { ownerNode: t } = n.stylesheet;
      t && U(t);
    }), Va.clear());
  });
}
let Eo;
function un(n) {
  Eo = n;
}
function ns() {
  if (!Eo)
    throw new Error("Function called outside component initialization");
  return Eo;
}
function l0(n) {
  ns().$$.before_update.push(n);
}
function Ot(n) {
  ns().$$.on_mount.push(n);
}
function Lh(n) {
  ns().$$.after_update.push(n);
}
function oi(n) {
  ns().$$.on_destroy.push(n);
}
function Rr() {
  const n = ns();
  return (t, e, { cancelable: i = !1 } = {}) => {
    const s = n.$$.callbacks[t];
    if (s) {
      const r = a0(t, e, { cancelable: i });
      return s.slice().forEach((o) => {
        o.call(n, r);
      }), !r.defaultPrevented;
    }
    return !0;
  };
}
function kc(n, t) {
  return ns().$$.context.set(n, t), t;
}
function qi(n) {
  return ns().$$.context.get(n);
}
function An(n, t) {
  const e = n.$$.callbacks[t.type];
  e && e.slice().forEach((i) => i.call(this, t));
}
const sr = [], Ze = [];
let mr = [];
const xc = [], c0 = /* @__PURE__ */ Promise.resolve();
let Dc = !1;
function h0() {
  Dc || (Dc = !0, c0.then(zh));
}
function Jd() {
  return h0(), c0;
}
function mt(n) {
  mr.push(n);
}
function ml(n) {
  xc.push(n);
}
const Wl = /* @__PURE__ */ new Set();
let er = 0;
function zh() {
  if (er !== 0)
    return;
  const n = Eo;
  do {
    try {
      for (; er < sr.length; ) {
        const t = sr[er];
        er++, un(t), Dy(t.$$);
      }
    } catch (t) {
      throw sr.length = 0, er = 0, t;
    }
    for (un(null), sr.length = 0, er = 0; Ze.length; )
      Ze.pop()();
    for (let t = 0; t < mr.length; t += 1) {
      const e = mr[t];
      Wl.has(e) || (Wl.add(e), e());
    }
    mr.length = 0;
  } while (sr.length);
  for (; xc.length; )
    xc.pop()();
  Dc = !1, Wl.clear(), un(n);
}
function Dy(n) {
  if (n.fragment !== null) {
    n.update(), vt(n.before_update);
    const t = n.dirty;
    n.dirty = [-1], n.fragment && n.fragment.p(n.ctx, t), n.after_update.forEach(mt);
  }
}
function Sy(n) {
  const t = [], e = [];
  mr.forEach((i) => n.indexOf(i) === -1 ? t.push(i) : e.push(i)), e.forEach((i) => i()), mr = t;
}
let $r;
function Oh() {
  return $r || ($r = Promise.resolve(), $r.then(() => {
    $r = null;
  })), $r;
}
function Ps(n, t, e) {
  n.dispatchEvent(a0(`${t ? "intro" : "outro"}${e}`));
}
const Ea = /* @__PURE__ */ new Set();
let Zi;
function Me() {
  Zi = {
    r: 0,
    c: [],
    p: Zi
    // parent group
  };
}
function ke() {
  Zi.r || vt(Zi.c), Zi = Zi.p;
}
function F(n, t) {
  n && n.i && (Ea.delete(n), n.i(t));
}
function Y(n, t, e, i) {
  if (n && n.o) {
    if (Ea.has(n))
      return;
    Ea.add(n), Zi.c.push(() => {
      Ea.delete(n), i && (e && n.d(1), i());
    }), n.o(t);
  } else
    i && i();
}
const jh = { duration: 0 };
function ss(n, t, e) {
  const i = { direction: "in" };
  let s = t(n, e, i), r = !1, o, a, l = 0;
  function c() {
    o && Fa(n, o);
  }
  function h() {
    const { delay: f = 0, duration: g = 300, easing: p = vn, tick: m = se, css: v } = s || jh;
    v && (o = Ha(n, 0, 1, g, f, p, v, l++)), m(0, 1);
    const b = kh() + f, w = b + g;
    a && a.abort(), r = !0, mt(() => Ps(n, !0, "start")), a = Dh((x) => {
      if (r) {
        if (x >= w)
          return m(1, 0), Ps(n, !0, "end"), c(), r = !1;
        if (x >= b) {
          const k = p((x - b) / g);
          m(k, 1 - k);
        }
      }
      return r;
    });
  }
  let d = !1;
  return {
    start() {
      d || (d = !0, Fa(n), Ri(s) ? (s = s(i), Oh().then(h)) : h());
    },
    invalidate() {
      d = !1;
    },
    end() {
      r && (c(), r = !1);
    }
  };
}
function Br(n, t, e) {
  const i = { direction: "out" };
  let s = t(n, e, i), r = !0, o;
  const a = Zi;
  a.r += 1;
  function l() {
    const { delay: c = 0, duration: h = 300, easing: d = vn, tick: f = se, css: g } = s || jh;
    g && (o = Ha(n, 1, 0, h, c, d, g));
    const p = kh() + c, m = p + h;
    mt(() => Ps(n, !1, "start")), Dh((v) => {
      if (r) {
        if (v >= m)
          return f(0, 1), Ps(n, !1, "end"), --a.r || vt(a.c), !1;
        if (v >= p) {
          const b = d((v - p) / h);
          f(1 - b, b);
        }
      }
      return r;
    });
  }
  return Ri(s) ? Oh().then(() => {
    s = s(i), l();
  }) : l(), {
    end(c) {
      c && s.tick && s.tick(1, 0), r && (o && Fa(n, o), r = !1);
    }
  };
}
function Ii(n, t, e, i) {
  const s = { direction: "both" };
  let r = t(n, e, s), o = i ? 0 : 1, a = null, l = null, c = null;
  function h() {
    c && Fa(n, c);
  }
  function d(g, p) {
    const m = g.b - o;
    return p *= Math.abs(m), {
      a: o,
      b: g.b,
      d: m,
      duration: p,
      start: g.start,
      end: g.start + p,
      group: g.group
    };
  }
  function f(g) {
    const { delay: p = 0, duration: m = 300, easing: v = vn, tick: b = se, css: w } = r || jh, x = {
      start: kh() + p,
      b: g
    };
    g || (x.group = Zi, Zi.r += 1), a || l ? l = x : (w && (h(), c = Ha(n, o, g, m, p, v, w)), g && b(0, 1), a = d(x, m), mt(() => Ps(n, g, "start")), Dh((k) => {
      if (l && k > l.start && (a = d(l, m), l = null, Ps(n, a.b, "start"), w && (h(), c = Ha(n, o, a.b, a.duration, 0, v, r.css))), a) {
        if (k >= a.end)
          b(o = a.b, 1 - o), Ps(n, a.b, "end"), l || (a.b ? h() : --a.group.r || vt(a.group.c)), a = null;
        else if (k >= a.start) {
          const T = k - a.start;
          o = a.a + a.d * v(T / a.duration), b(o, 1 - o);
        }
      }
      return !!(a || l);
    }));
  }
  return {
    run(g) {
      Ri(r) ? Oh().then(() => {
        r = r(s), f(g);
      }) : f(g);
    },
    end() {
      h(), a = l = null;
    }
  };
}
function Na(n, t) {
  const e = t.token = {};
  function i(s, r, o, a) {
    if (t.token !== e)
      return;
    t.resolved = a;
    let l = t.ctx;
    o !== void 0 && (l = l.slice(), l[o] = a);
    const c = s && (t.current = s)(l);
    let h = !1;
    t.block && (t.blocks ? t.blocks.forEach((d, f) => {
      f !== r && d && (Me(), Y(d, 1, 1, () => {
        t.blocks[f] === d && (t.blocks[f] = null);
      }), ke());
    }) : t.block.d(1), c.c(), F(c, 1), c.m(t.mount(), t.anchor), h = !0), t.block = c, t.blocks && (t.blocks[r] = c), h && zh();
  }
  if (yy(n)) {
    const s = ns();
    if (n.then((r) => {
      un(s), i(t.then, 1, t.value, r), un(null);
    }, (r) => {
      if (un(s), i(t.catch, 2, t.error, r), un(null), !t.hasCatch)
        throw r;
    }), t.current !== t.pending)
      return i(t.pending, 0), !0;
  } else {
    if (t.current !== t.then)
      return i(t.then, 1, t.value, n), !0;
    t.resolved = n;
  }
}
function d0(n, t, e) {
  const i = t.slice(), { resolved: s } = n;
  n.current === n.then && (i[n.value] = s), n.current === n.catch && (i[n.error] = s), n.block.p(i, e);
}
const Ty = typeof window != "undefined" ? window : typeof globalThis != "undefined" ? globalThis : global;
function Rh(n, t) {
  n.d(1), t.delete(n.key);
}
function yn(n, t) {
  Y(n, 1, 1, () => {
    t.delete(n.key);
  });
}
function Ei(n, t, e, i, s, r, o, a, l, c, h, d) {
  let f = n.length, g = r.length, p = f;
  const m = {};
  for (; p--; )
    m[n[p].key] = p;
  const v = [], b = /* @__PURE__ */ new Map(), w = /* @__PURE__ */ new Map(), x = [];
  for (p = g; p--; ) {
    const V = d(s, r, p), z = e(V);
    let O = o.get(z);
    O ? i && x.push(() => O.p(V, t)) : (O = c(z, V), O.c()), b.set(z, v[p] = O), z in m && w.set(z, Math.abs(p - m[z]));
  }
  const k = /* @__PURE__ */ new Set(), T = /* @__PURE__ */ new Set();
  function S(V) {
    F(V, 1), V.m(a, h), o.set(V.key, V), h = V.first, g--;
  }
  for (; f && g; ) {
    const V = v[g - 1], z = n[f - 1], O = V.key, A = z.key;
    V === z ? (h = V.first, f--, g--) : b.has(A) ? !o.has(O) || k.has(O) ? S(V) : T.has(A) ? f-- : w.get(O) > w.get(A) ? (T.add(O), S(V)) : (k.add(A), f--) : (l(z, o), f--);
  }
  for (; f--; ) {
    const V = n[f];
    b.has(V.key) || l(V, o);
  }
  for (; g; )
    S(v[g - 1]);
  return vt(x), v;
}
function Lt(n, t) {
  const e = {}, i = {}, s = { $$scope: 1 };
  let r = n.length;
  for (; r--; ) {
    const o = n[r], a = t[r];
    if (a) {
      for (const l in o)
        l in a || (i[l] = 1);
      for (const l in a)
        s[l] || (e[l] = a[l], s[l] = 1);
      n[r] = a;
    } else
      for (const l in o)
        s[l] = 1;
  }
  for (const o in i)
    o in e || (e[o] = void 0);
  return e;
}
function u0(n) {
  return typeof n == "object" && n !== null ? n : {};
}
function gl(n, t, e) {
  const i = n.$$.props[t];
  i !== void 0 && (n.$$.bound[i] = e, e(n.$$.ctx[i]));
}
function ve(n) {
  n && n.c();
}
function me(n, t, e, i) {
  const { fragment: s, after_update: r } = n.$$;
  s && s.m(t, e), i || mt(() => {
    const o = n.$$.on_mount.map(i0).filter(Ri);
    n.$$.on_destroy ? n.$$.on_destroy.push(...o) : vt(o), n.$$.on_mount = [];
  }), r.forEach(mt);
}
function ge(n, t) {
  const e = n.$$;
  e.fragment !== null && (Sy(e.after_update), vt(e.on_destroy), e.fragment && e.fragment.d(t), e.on_destroy = e.fragment = null, e.ctx = []);
}
function Ly(n, t) {
  n.$$.dirty[0] === -1 && (sr.push(n), h0(), n.$$.dirty.fill(0)), n.$$.dirty[t / 31 | 0] |= 1 << t % 31;
}
function Ce(n, t, e, i, s, r, o, a = [-1]) {
  const l = Eo;
  un(n);
  const c = n.$$ = {
    fragment: null,
    ctx: [],
    // state
    props: r,
    update: se,
    not_equal: s,
    bound: Yd(),
    // lifecycle
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(t.context || (l ? l.$$.context : [])),
    // everything else
    callbacks: Yd(),
    dirty: a,
    skip_bound: !1,
    root: t.target || l.$$.root
  };
  o && o(c.root);
  let h = !1;
  if (c.ctx = e ? e(n, t.props || {}, (d, f, ...g) => {
    const p = g.length ? g[0] : f;
    return c.ctx && s(c.ctx[d], c.ctx[d] = p) && (!c.skip_bound && c.bound[d] && c.bound[d](p), h && Ly(n, d)), f;
  }) : [], c.update(), h = !0, vt(c.before_update), c.fragment = i ? i(c.ctx) : !1, t.target) {
    if (t.hydrate) {
      const d = Iy(t.target);
      c.fragment && c.fragment.l(d), d.forEach(U);
    } else
      c.fragment && c.fragment.c();
    t.intro && F(n.$$.fragment), me(n, t.target, t.anchor, t.customElement), zh();
  }
  un(l);
}
class Ie {
  $destroy() {
    ge(this, 1), this.$destroy = se;
  }
  $on(t, e) {
    if (!Ri(e))
      return se;
    const i = this.$$.callbacks[t] || (this.$$.callbacks[t] = []);
    return i.push(e), () => {
      const s = i.indexOf(e);
      s !== -1 && i.splice(s, 1);
    };
  }
  $set(t) {
    this.$$set && !wy(t) && (this.$$.skip_bound = !0, this.$$set(t), this.$$.skip_bound = !1);
  }
}
const zy = "data:image/png;base64,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";
function Oy(n) {
  De(n, "svelte-1d7uzh5", ".room-label-item.svelte-1d7uzh5{position:absolute;font-size:0.5rem;z-index:0;transform:none;cursor:pointer;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.room-label-item__text.svelte-1d7uzh5{position:absolute;left:0;top:-4rem;transform:translate(-50%, 0);display:flex;justify-content:center;align-items:center;height:1.25rem;min-width:2rem;padding:0 0.375rem;pointer-events:all;background-size:100% 100%;background-repeat:no-repeat;white-space:nowrap}.room-label-item__bar.svelte-1d7uzh5{position:absolute;top:-2.75rem;height:3rem;width:0.0625rem;background-image:linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0))}.wide.svelte-1d7uzh5{font-size:0.625rem}");
}
function jy(n) {
  let t, e, i = (
    /*roomLabel*/
    n[0].name + ""
  ), s, r, o, a, l;
  return {
    c() {
      t = W("div"), e = W("span"), s = je(i), r = oe(), o = W("div"), y(e, "class", "room-label-item__text svelte-1d7uzh5"), Q(e, "background-image", "url(" + zy + ")"), ye(
        e,
        "wide",
        /*roomLabel*/
        n[0].name.length > 3
      ), y(o, "class", "room-label-item__bar svelte-1d7uzh5"), y(t, "class", "room-label-item svelte-1d7uzh5"), Q(
        t,
        "z-index",
        /*roomLabel*/
        n[0].zIndex
      ), Q(
        t,
        "transform",
        /*roomLabel*/
        n[0].transform
      ), Q(
        t,
        "opacity",
        /*roomLabel*/
        n[0].visible ? 1 : 0
      );
    },
    m(c, h) {
      X(c, t, h), R(t, e), R(e, s), R(t, r), R(t, o), a || (l = Oe(
        e,
        "click",
        /*onClick*/
        n[1]
      ), a = !0);
    },
    p(c, [h]) {
      h & /*roomLabel*/
      1 && i !== (i = /*roomLabel*/
      c[0].name + "") && He(s, i), h & /*roomLabel*/
      1 && ye(
        e,
        "wide",
        /*roomLabel*/
        c[0].name.length > 3
      ), h & /*roomLabel*/
      1 && Q(
        t,
        "z-index",
        /*roomLabel*/
        c[0].zIndex
      ), h & /*roomLabel*/
      1 && Q(
        t,
        "transform",
        /*roomLabel*/
        c[0].transform
      ), h & /*roomLabel*/
      1 && Q(
        t,
        "opacity",
        /*roomLabel*/
        c[0].visible ? 1 : 0
      );
    },
    i: se,
    o: se,
    d(c) {
      c && U(t), a = !1, l();
    }
  };
}
function Ry(n, t, e) {
  let { five: i } = t, { roomLabel: s } = t;
  function r() {
    i.setState({
      panoIndex: s.panoIndex,
      mode: "Panorama",
      longitude: s.longitude
    });
  }
  return n.$$set = (o) => {
    "five" in o && e(2, i = o.five), "roomLabel" in o && e(0, s = o.roomLabel);
  }, [s, r, i];
}
class By extends Ie {
  constructor(t) {
    super(), Ce(this, t, Ry, jy, Pe, { five: 2, roomLabel: 0 }, Oy);
  }
}
var f0 = function() {
  if (typeof Map != "undefined")
    return Map;
  function n(t, e) {
    var i = -1;
    return t.some(function(s, r) {
      return s[0] === e ? (i = r, !0) : !1;
    }), i;
  }
  return (
    /** @class */
    function() {
      function t() {
        this.__entries__ = [];
      }
      return Object.defineProperty(t.prototype, "size", {
        /**
         * @returns {boolean}
         */
        get: function() {
          return this.__entries__.length;
        },
        enumerable: !0,
        configurable: !0
      }), t.prototype.get = function(e) {
        var i = n(this.__entries__, e), s = this.__entries__[i];
        return s && s[1];
      }, t.prototype.set = function(e, i) {
        var s = n(this.__entries__, e);
        ~s ? this.__entries__[s][1] = i : this.__entries__.push([e, i]);
      }, t.prototype.delete = function(e) {
        var i = this.__entries__, s = n(i, e);
        ~s && i.splice(s, 1);
      }, t.prototype.has = function(e) {
        return !!~n(this.__entries__, e);
      }, t.prototype.clear = function() {
        this.__entries__.splice(0);
      }, t.prototype.forEach = function(e, i) {
        i === void 0 && (i = null);
        for (var s = 0, r = this.__entries__; s < r.length; s++) {
          var o = r[s];
          e.call(i, o[1], o[0]);
        }
      }, t;
    }()
  );
}(), Sc = typeof window != "undefined" && typeof document != "undefined" && window.document === document, Ga = function() {
  return typeof global != "undefined" && global.Math === Math ? global : typeof self != "undefined" && self.Math === Math ? self : typeof window != "undefined" && window.Math === Math ? window : Function("return this")();
}(), Vy = function() {
  return typeof requestAnimationFrame == "function" ? requestAnimationFrame.bind(Ga) : function(n) {
    return setTimeout(function() {
      return n(Date.now());
    }, 1e3 / 60);
  };
}(), _y = 2;
function Hy(n, t) {
  var e = !1, i = !1, s = 0;
  function r() {
    e && (e = !1, n()), i && a();
  }
  function o() {
    Vy(r);
  }
  function a() {
    var l = Date.now();
    if (e) {
      if (l - s < _y)
        return;
      i = !0;
    } else
      e = !0, i = !1, setTimeout(o, t);
    s = l;
  }
  return a;
}
var Fy = 20, Ny = ["top", "right", "bottom", "left", "width", "height", "size", "weight"], Gy = typeof MutationObserver != "undefined", Wy = (
  /** @class */
  function() {
    function n() {
      this.connected_ = !1, this.mutationEventsAdded_ = !1, this.mutationsObserver_ = null, this.observers_ = [], this.onTransitionEnd_ = this.onTransitionEnd_.bind(this), this.refresh = Hy(this.refresh.bind(this), Fy);
    }
    return n.prototype.addObserver = function(t) {
      ~this.observers_.indexOf(t) || this.observers_.push(t), this.connected_ || this.connect_();
    }, n.prototype.removeObserver = function(t) {
      var e = this.observers_, i = e.indexOf(t);
      ~i && e.splice(i, 1), !e.length && this.connected_ && this.disconnect_();
    }, n.prototype.refresh = function() {
      var t = this.updateObservers_();
      t && this.refresh();
    }, n.prototype.updateObservers_ = function() {
      var t = this.observers_.filter(function(e) {
        return e.gatherActive(), e.hasActive();
      });
      return t.forEach(function(e) {
        return e.broadcastActive();
      }), t.length > 0;
    }, n.prototype.connect_ = function() {
      !Sc || this.connected_ || (document.addEventListener("transitionend", this.onTransitionEnd_), window.addEventListener("resize", this.refresh), Gy ? (this.mutationsObserver_ = new MutationObserver(this.refresh), this.mutationsObserver_.observe(document, {
        attributes: !0,
        childList: !0,
        characterData: !0,
        subtree: !0
      })) : (document.addEventListener("DOMSubtreeModified", this.refresh), this.mutationEventsAdded_ = !0), this.connected_ = !0);
    }, n.prototype.disconnect_ = function() {
      !Sc || !this.connected_ || (document.removeEventListener("transitionend", this.onTransitionEnd_), window.removeEventListener("resize", this.refresh), this.mutationsObserver_ && this.mutationsObserver_.disconnect(), this.mutationEventsAdded_ && document.removeEventListener("DOMSubtreeModified", this.refresh), this.mutationsObserver_ = null, this.mutationEventsAdded_ = !1, this.connected_ = !1);
    }, n.prototype.onTransitionEnd_ = function(t) {
      var e = t.propertyName, i = e === void 0 ? "" : e, s = Ny.some(function(r) {
        return !!~i.indexOf(r);
      });
      s && this.refresh();
    }, n.getInstance = function() {
      return this.instance_ || (this.instance_ = new n()), this.instance_;
    }, n.instance_ = null, n;
  }()
), p0 = function(n, t) {
  for (var e = 0, i = Object.keys(t); e < i.length; e++) {
    var s = i[e];
    Object.defineProperty(n, s, {
      value: t[s],
      enumerable: !1,
      writable: !1,
      configurable: !0
    });
  }
  return n;
}, Ir = function(n) {
  var t = n && n.ownerDocument && n.ownerDocument.defaultView;
  return t || Ga;
}, m0 = vl(0, 0, 0, 0);
function Wa(n) {
  return parseFloat(n) || 0;
}
function qd(n) {
  for (var t = [], e = 1; e < arguments.length; e++)
    t[e - 1] = arguments[e];
  return t.reduce(function(i, s) {
    var r = n["border-" + s + "-width"];
    return i + Wa(r);
  }, 0);
}
function Qy(n) {
  for (var t = ["top", "right", "bottom", "left"], e = {}, i = 0, s = t; i < s.length; i++) {
    var r = s[i], o = n["padding-" + r];
    e[r] = Wa(o);
  }
  return e;
}
function Uy(n) {
  var t = n.getBBox();
  return vl(0, 0, t.width, t.height);
}
function Xy(n) {
  var t = n.clientWidth, e = n.clientHeight;
  if (!t && !e)
    return m0;
  var i = Ir(n).getComputedStyle(n), s = Qy(i), r = s.left + s.right, o = s.top + s.bottom, a = Wa(i.width), l = Wa(i.height);
  if (i.boxSizing === "border-box" && (Math.round(a + r) !== t && (a -= qd(i, "left", "right") + r), Math.round(l + o) !== e && (l -= qd(i, "top", "bottom") + o)), !Zy(n)) {
    var c = Math.round(a + r) - t, h = Math.round(l + o) - e;
    Math.abs(c) !== 1 && (a -= c), Math.abs(h) !== 1 && (l -= h);
  }
  return vl(s.left, s.top, a, l);
}
var Yy = function() {
  return typeof SVGGraphicsElement != "undefined" ? function(n) {
    return n instanceof Ir(n).SVGGraphicsElement;
  } : function(n) {
    return n instanceof Ir(n).SVGElement && typeof n.getBBox == "function";
  };
}();
function Zy(n) {
  return n === Ir(n).document.documentElement;
}
function Jy(n) {
  return Sc ? Yy(n) ? Uy(n) : Xy(n) : m0;
}
function qy(n) {
  var t = n.x, e = n.y, i = n.width, s = n.height, r = typeof DOMRectReadOnly != "undefined" ? DOMRectReadOnly : Object, o = Object.create(r.prototype);
  return p0(o, {
    x: t,
    y: e,
    width: i,
    height: s,
    top: e,
    right: t + i,
    bottom: s + e,
    left: t
  }), o;
}
function vl(n, t, e, i) {
  return { x: n, y: t, width: e, height: i };
}
var Ky = (
  /** @class */
  function() {
    function n(t) {
      this.broadcastWidth = 0, this.broadcastHeight = 0, this.contentRect_ = vl(0, 0, 0, 0), this.target = t;
    }
    return n.prototype.isActive = function() {
      var t = Jy(this.target);
      return this.contentRect_ = t, t.width !== this.broadcastWidth || t.height !== this.broadcastHeight;
    }, n.prototype.broadcastRect = function() {
      var t = this.contentRect_;
      return this.broadcastWidth = t.width, this.broadcastHeight = t.height, t;
    }, n;
  }()
), $y = (
  /** @class */
  function() {
    function n(t, e) {
      var i = qy(e);
      p0(this, { target: t, contentRect: i });
    }
    return n;
  }()
), ew = (
  /** @class */
  function() {
    function n(t, e, i) {
      if (this.activeObservations_ = [], this.observations_ = new f0(), typeof t != "function")
        throw new TypeError("The callback provided as parameter 1 is not a function.");
      this.callback_ = t, this.controller_ = e, this.callbackCtx_ = i;
    }
    return n.prototype.observe = function(t) {
      if (!arguments.length)
        throw new TypeError("1 argument required, but only 0 present.");
      if (!(typeof Element == "undefined" || !(Element instanceof Object))) {
        if (!(t instanceof Ir(t).Element))
          throw new TypeError('parameter 1 is not of type "Element".');
        var e = this.observations_;
        e.has(t) || (e.set(t, new Ky(t)), this.controller_.addObserver(this), this.controller_.refresh());
      }
    }, n.prototype.unobserve = function(t) {
      if (!arguments.length)
        throw new TypeError("1 argument required, but only 0 present.");
      if (!(typeof Element == "undefined" || !(Element instanceof Object))) {
        if (!(t instanceof Ir(t).Element))
          throw new TypeError('parameter 1 is not of type "Element".');
        var e = this.observations_;
        e.has(t) && (e.delete(t), e.size || this.controller_.removeObserver(this));
      }
    }, n.prototype.disconnect = function() {
      this.clearActive(), this.observations_.clear(), this.controller_.removeObserver(this);
    }, n.prototype.gatherActive = function() {
      var t = this;
      this.clearActive(), this.observations_.forEach(function(e) {
        e.isActive() && t.activeObservations_.push(e);
      });
    }, n.prototype.broadcastActive = function() {
      if (this.hasActive()) {
        var t = this.callbackCtx_, e = this.activeObservations_.map(function(i) {
          return new $y(i.target, i.broadcastRect());
        });
        this.callback_.call(t, e, t), this.clearActive();
      }
    }, n.prototype.clearActive = function() {
      this.activeObservations_.splice(0);
    }, n.prototype.hasActive = function() {
      return this.activeObservations_.length > 0;
    }, n;
  }()
), g0 = typeof WeakMap != "undefined" ? /* @__PURE__ */ new WeakMap() : new f0(), v0 = (
  /** @class */
  function() {
    function n(t) {
      if (!(this instanceof n))
        throw new TypeError("Cannot call a class as a function.");
      if (!arguments.length)
        throw new TypeError("1 argument required, but only 0 present.");
      var e = Wy.getInstance(), i = new ew(t, e, this);
      g0.set(this, i);
    }
    return n;
  }()
);
[
  "observe",
  "unobserve",
  "disconnect"
].forEach(function(n) {
  v0.prototype[n] = function() {
    var t;
    return (t = g0.get(this))[n].apply(t, arguments);
  };
});
var tw = function() {
  return typeof Ga.ResizeObserver != "undefined" ? Ga.ResizeObserver : v0;
}();
function wn(n) {
  new tw((e, i) => {
    var s, r, o, a, l, c;
    for (const h of e) {
      const { borderBoxSize: d, contentRect: f } = h, g = (o = (r = (s = d == null ? void 0 : d[0]) == null ? void 0 : s.inlineSize) != null ? r : f.width) != null ? o : n.clientWidth, p = (c = (l = (a = d == null ? void 0 : d[0]) == null ? void 0 : a.blockSize) != null ? l : f.height) != null ? c : n.clientHeight;
      n.dispatchEvent(new CustomEvent("clientWidth", { detail: g })), n.dispatchEvent(new CustomEvent("clientHeight", { detail: p }));
    }
  }).observe(n);
}
const { Map: iw } = Ty;
function nw(n) {
  De(n, "svelte-9eg4zi", ".room-labels-container.svelte-9eg4zi{width:100%;height:100%;position:relative;color:#fff}");
}
function Kd(n, t, e) {
  const i = n.slice();
  return i[13] = t[e], i;
}
function $d(n, t) {
  let e, i, s;
  return i = new By({
    props: {
      roomLabel: (
        /*roomLabelItem*/
        t[13]
      ),
      five: (
        /*five*/
        t[1]
      )
    }
  }), {
    key: n,
    first: null,
    c() {
      e = Fe(), ve(i.$$.fragment), this.first = e;
    },
    m(r, o) {
      X(r, e, o), me(i, r, o), s = !0;
    },
    p(r, o) {
      t = r;
      const a = {};
      o & /*roomLabels*/
      1 && (a.roomLabel = /*roomLabelItem*/
      t[13]), o & /*five*/
      2 && (a.five = /*five*/
      t[1]), i.$set(a);
    },
    i(r) {
      s || (F(i.$$.fragment, r), s = !0);
    },
    o(r) {
      Y(i.$$.fragment, r), s = !1;
    },
    d(r) {
      r && U(e), ge(i, r);
    }
  };
}
function sw(n) {
  let t, e = [], i = new iw(), s, r, o, a = (
    /*roomLabels*/
    n[0]
  );
  const l = (c) => (
    /*roomLabelItem*/
    c[13].id
  );
  for (let c = 0; c < a.length; c += 1) {
    let h = Kd(n, a, c), d = l(h);
    i.set(d, e[c] = $d(d, h));
  }
  return {
    c() {
      t = W("div");
      for (let c = 0; c < e.length; c += 1)
        e[c].c();
      y(t, "class", "room-labels-container svelte-9eg4zi");
    },
    m(c, h) {
      X(c, t, h);
      for (let d = 0; d < e.length; d += 1)
        e[d] && e[d].m(t, null);
      s = !0, r || (o = [
        Pi(wn.call(null, t)),
        Oe(
          t,
          "clientWidth",
          /*clientWidth_handler*/
          n[6]
        ),
        Oe(
          t,
          "clientHeight",
          /*clientHeight_handler*/
          n[7]
        )
      ], r = !0);
    },
    p(c, [h]) {
      h & /*roomLabels, five*/
      3 && (a = /*roomLabels*/
      c[0], Me(), e = Ei(e, h, l, 1, c, a, i, t, yn, $d, null, Kd), ke());
    },
    i(c) {
      if (!s) {
        for (let h = 0; h < a.length; h += 1)
          F(e[h]);
        s = !0;
      }
    },
    o(c) {
      for (let h = 0; h < e.length; h += 1)
        Y(e[h]);
      s = !1;
    },
    d(c) {
      c && U(t);
      for (let h = 0; h < e.length; h += 1)
        e[h].d();
      r = !1, vt(o);
    }
  };
}
function rw(n, t, e) {
  var v;
  let i, { five: s } = t, { roomLabels: r } = t, o, a, l = (v = s.model.shownFloor) != null ? v : null;
  function c(b) {
    if (!(l === null || b.floorIndex === l))
      return !1;
    const x = new Or(), k = s.camera.position.clone(), T = new fe(b.position.x, b.position.y, b.position.z), S = T.distanceTo(k);
    x.set(k.clone(), T.clone().sub(k).normalize());
    const [V] = s.model.intersectRaycaster(x);
    return !(V && V.distance + 1 < S);
  }
  function h(b, w) {
    const k = new fe(b.position.x, b.position.y, b.position.z).clone().project(s.camera), T = Math.ceil((k.x + 1) / 2 * w.x), S = Math.ceil((-k.y + 1) / 2 * w.y);
    return `translate(${T}px, ${S}px)`;
  }
  function d(b) {
    const { rendererSize: w } = b, x = /* @__PURE__ */ new Map();
    function k(S) {
      const V = x.get(S.id);
      if (V)
        return V;
      const { x: z, y: O, z: A } = S.position, C = new fe(z, O, A).clone().distanceTo(s.camera.position);
      return x.set(S.id, C), C;
    }
    return r.map((S) => {
      const V = c(S), z = V ? h(S, w) : S.transform, O = k(S), C = r.filter((I) => I.visible && k(I) < O).length * 10;
      return de(_({}, S), { visible: V, transform: z, zIndex: C });
    });
  }
  function f() {
    e(0, r = d({ rendererSize: i, shownFloor: l }));
  }
  function g(b) {
    e(4, l = b);
  }
  s.on("cameraUpdate", f), s.on("modelShownFloorChange", g), Lh(() => {
    e(0, r = d({ rendererSize: i, shownFloor: l }));
  }), oi(() => {
    s.off("cameraUpdate", f), s.off("modelShownFloorChange", g);
  });
  const p = (b) => {
    e(2, o = b.detail);
  }, m = (b) => {
    e(3, a = b.detail);
  };
  return n.$$set = (b) => {
    "five" in b && e(1, s = b.five), "roomLabels" in b && e(0, r = b.roomLabels);
  }, n.$$.update = () => {
    n.$$.dirty & /*containerWidth, containerHeight*/
    12 && e(5, i = { x: o, y: a }), n.$$.dirty & /*rendererSize, shownFloor*/
    48 && e(0, r = d({ rendererSize: i, shownFloor: l }));
  }, [
    r,
    s,
    o,
    a,
    l,
    i,
    p,
    m
  ];
}
class ow extends Ie {
  constructor(t) {
    super(), Ce(this, t, rw, sw, Pe, { five: 1, roomLabels: 0 }, nw);
  }
}
function aw(n) {
  return n.model_room_labels.map(({ id: t, pano_index: e, floor_index: i, name: s, position: r, longitude: o }) => ({
    id: t,
    name: s,
    position: r,
    longitude: o,
    panoIndex: e,
    floorIndex: i,
    zIndex: 0,
    visible: !1,
    transform: ""
  }));
}
class lw {
  constructor(t) {
    u(this, "five");
    u(this, "enabled", !0);
    u(this, "fiveModeEnabled");
    u(this, "app");
    u(this, "wrapper");
    u(this, "roomLabels", []);
    u(this, "container", document.createElement("div"));
    /** 监听 Five Mode 变化
     * @description
     * Mode 不符合要求时，立刻消失，满足要求时，需要等待动画结束再展示
     */
    u(this, "onFiveModeChange", (t) => {
      if (!this.checkFiveMode(t)) {
        this.fiveModeEnabled = !1, this.render();
        return;
      }
      this.five.once("initAnimationEnded", () => {
        this.fiveModeEnabled = this.checkFiveMode(this.five.getCurrentState().mode), this.render();
      });
    });
    this.five = t, this.fiveModeEnabled = this.checkFiveMode(t.getCurrentState().mode), this.container.classList.add("model-room-label-plugin-container"), this.container.style.width = "100%", this.container.style.height = "100%", this.container.style.position = "absolute", this.container.style.pointerEvents = "none", this.container.style.left = "0", this.container.style.top = "0", this.container.style.zIndex = "5", this.five.once("dispose", () => this.dispose()), this.five.on("modeChange", this.onFiveModeChange), this.render();
  }
  dispose() {
    this.five.off("modeChange", this.onFiveModeChange), this.container.remove();
  }
  /** 加载数据 */
  load(t) {
    this.roomLabels = aw(t), this.render();
  }
  /** 设置插件容器 */
  appendTo(t) {
    return this.wrapper = t, t.appendChild(this.container), this.render(), this;
  }
  /** 禁用插件功能
   * @description
   * - 如果当前正在展示中，会清除所有展示的 DOM
   * - 如果当前未展示，即使后续 Five 状态满足展示要求，也不会展示
   * */
  disable() {
    return this.enabled = !1, this.render(), this;
  }
  /** 启用插件功能
   * @description
   * - 如果当前符合展示条件，会立刻展示
   * - 如果不符合展示条件，会等待 Five 状态满足条件后再展示
   */
  enable() {
    return this.enabled = !0, this.render(), this;
  }
  /** 检测 Five Mode 是否满足展示条件 */
  checkFiveMode(t) {
    return t === "Floorplan" || t === "Mapview";
  }
  render() {
    var t;
    if (this.wrapper) {
      if (!this.enabled || !this.fiveModeEnabled) {
        (t = this.app) == null || t.$destroy(), this.app = void 0;
        return;
      }
      this.app ? this.app.$set({ five: this.five, roomLabels: this.roomLabels }) : this.app = new ow({
        target: this.container,
        props: {
          five: this.five,
          roomLabels: this.roomLabels
        }
      });
    }
  }
}
const Tx = (n) => new lw(n), Lx = {
  name: "ModelRoomLabelPlugin",
  version: 0
};
var Cs = /* @__PURE__ */ ((n) => (n[n.FLOOR = 1] = "FLOOR", n[n.CEILING = 2] = "CEILING", n[n.BOUNDING_CENTER = 3] = "BOUNDING_CENTER", n))(Cs || {});
function Ss(n) {
  return $(this, null, function* () {
    try {
      return [null, yield n];
    } catch (t) {
      return t instanceof Error ? [t, null] : [new Error(""), null];
    }
  });
}
function Er(n) {
  return n < 0.5 ? 4 * n * n * n : 0.5 * Math.pow(2 * n - 2, 3) + 1;
}
function Mo(n) {
  const t = n - 1;
  return t * t * t + 1;
}
function zt(n, { delay: t = 0, duration: e = 400, easing: i = vn } = {}) {
  const s = +getComputedStyle(n).opacity;
  return {
    delay: t,
    duration: e,
    easing: i,
    css: (r) => `opacity: ${r * s}`
  };
}
function eu(n, { delay: t = 0, duration: e = 400, easing: i = Mo, x: s = 0, y: r = 0, opacity: o = 0 } = {}) {
  const a = getComputedStyle(n), l = +a.opacity, c = a.transform === "none" ? "" : a.transform, h = l * (1 - o), [d, f] = Zd(s), [g, p] = Zd(r);
  return {
    delay: t,
    duration: e,
    easing: i,
    css: (m, v) => `
			transform: ${c} translate(${(1 - m) * d}${f}, ${(1 - m) * g}${p});
			opacity: ${l - h * v}`
  };
}
function Qa(n, { delay: t = 0, speed: e, duration: i, easing: s = Er } = {}) {
  let r = n.getTotalLength();
  const o = getComputedStyle(n);
  return o.strokeLinecap !== "butt" && (r += parseInt(o.strokeWidth)), i === void 0 ? e === void 0 ? i = 800 : i = r / e : typeof i == "function" && (i = i(r)), {
    delay: t,
    duration: i,
    easing: s,
    css: (a, l) => `
			stroke-dasharray: ${r};
			stroke-dashoffset: ${l * r};
		`
  };
}
const tr = [];
function Bh(n, t = se) {
  let e;
  const i = /* @__PURE__ */ new Set();
  function s(a) {
    if (Pe(n, a) && (n = a, e)) {
      const l = !tr.length;
      for (const c of i)
        c[1](), tr.push(c, n);
      if (l) {
        for (let c = 0; c < tr.length; c += 2)
          tr[c][0](tr[c + 1]);
        tr.length = 0;
      }
    }
  }
  function r(a) {
    s(a(n));
  }
  function o(a, l = se) {
    const c = [a, l];
    return i.add(c), i.size === 1 && (e = t(s) || se), a(n), () => {
      i.delete(c), i.size === 0 && e && (e(), e = null);
    };
  }
  return { set: s, update: r, subscribe: o };
}
function cw(n) {
  De(n, "svelte-1gfoniz", "img.svelte-1gfoniz{width:100%;height:100%}");
}
function hw(n) {
  let t, e;
  return {
    c() {
      t = W("img"), pt(t.src, e = /*url*/
      n[0]) || y(t, "src", e), y(t, "alt", "floorplan iamge"), y(t, "class", "svelte-1gfoniz");
    },
    m(i, s) {
      X(i, t, s);
    },
    p(i, [s]) {
      s & /*url*/
      1 && !pt(t.src, e = /*url*/
      i[0]) && y(t, "src", e);
    },
    i: se,
    o: se,
    d(i) {
      i && U(t);
    }
  };
}
function dw(n, t, e) {
  let { url: i } = t;
  return n.$$set = (s) => {
    "url" in s && e(0, i = s.url);
  }, [i];
}
class uw extends Ie {
  constructor(t) {
    super(), Ce(this, t, dw, hw, Pe, { url: 0 }, cw);
  }
}
function fw(n) {
  De(n, "svelte-ub47ya", ".floorplan-plugin__base-image.svelte-ub47ya{width:100%;height:100%}");
}
function pw(n) {
  let t, e, i, s;
  return {
    c() {
      t = W("div"), e = new Ba(!1), i = oe(), s = new Ba(!1), e.a = i, s.a = null, y(t, "class", "floorplan-plugin__base-image svelte-ub47ya");
    },
    m(r, o) {
      X(r, t, o), e.m(
        /*svgStyle*/
        n[1],
        t
      ), R(t, i), s.m(
        /*content*/
        n[0],
        t
      );
    },
    p(r, [o]) {
      o & /*content*/
      1 && s.p(
        /*content*/
        r[0]
      );
    },
    i: se,
    o: se,
    d(r) {
      r && U(t);
    }
  };
}
function mw(n, t, e) {
  let { content: i } = t;
  const s = `
    <style>
      svg [type='lineGroup'] path {
        fill: #ffffff;
        stroke: #ffffff;
      }
      svg [type='lineItemGroup'] g g g g {
        stroke: #ffffff;
      }</style>
  `;
  return n.$$set = (r) => {
    "content" in r && e(0, i = r.content);
  }, [i, s];
}
class gw extends Ie {
  constructor(t) {
    super(), Ce(this, t, mw, pw, Pe, { content: 0 }, fw);
  }
}
function vw(n) {
  De(n, "svelte-ozpg4a", ".floorplan-plugin__base-image.svelte-ozpg4a{position:absolute;z-index:10;width:100%;height:100%;pointer-events:none}");
}
function Aw(n) {
  let t, e;
  return t = new uw({ props: { url: (
    /*imageData*/
    n[1].url
  ) } }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*imageData*/
      2 && (r.url = /*imageData*/
      i[1].url), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function bw(n) {
  let t, e;
  return t = new gw({
    props: { content: (
      /*svgContent*/
      n[0]
    ) }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*svgContent*/
      1 && (r.content = /*svgContent*/
      i[0]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function yw(n) {
  let t, e, i, s;
  const r = [bw, Aw], o = [];
  function a(l, c) {
    return (
      /*svgContent*/
      l[0] ? 0 : (
        /*imageData*/
        l[1] ? 1 : -1
      )
    );
  }
  return ~(e = a(n)) && (i = o[e] = r[e](n)), {
    c() {
      t = W("div"), i && i.c(), y(t, "class", "floorplan-plugin__base-image svelte-ozpg4a");
    },
    m(l, c) {
      X(l, t, c), ~e && o[e].m(t, null), s = !0;
    },
    p(l, [c]) {
      let h = e;
      e = a(l), e === h ? ~e && o[e].p(l, c) : (i && (Me(), Y(o[h], 1, 1, () => {
        o[h] = null;
      }), ke()), ~e ? (i = o[e], i ? i.p(l, c) : (i = o[e] = r[e](l), i.c()), F(i, 1), i.m(t, null)) : i = null);
    },
    i(l) {
      s || (F(i), s = !0);
    },
    o(l) {
      Y(i), s = !1;
    },
    d(l) {
      l && U(t), ~e && o[e].d();
    }
  };
}
function ww(n, t, e) {
  let i, s, { floorIndex: r } = t, { floorplanData: o } = t;
  return n.$$set = (a) => {
    "floorIndex" in a && e(2, r = a.floorIndex), "floorplanData" in a && e(3, o = a.floorplanData);
  }, n.$$.update = () => {
    var a, l;
    n.$$.dirty & /*floorplanData, floorIndex*/
    12 && e(1, i = o.outlines[r]), n.$$.dirty & /*floorplanData, floorIndex*/
    12 && e(0, s = (l = (a = o.outlines) == null ? void 0 : a[r]) == null ? void 0 : l.svgContent);
  }, [s, i, r, o];
}
class A0 extends Ie {
  constructor(t) {
    super(), Ce(this, t, ww, yw, Pe, { floorIndex: 2, floorplanData: 3 }, vw);
  }
}
function Pw(n) {
  De(n, "svelte-2r6702", ".floorplan-plugin__item.svelte-2r6702{position:absolute;display:flex;flex-flow:column;align-items:center;line-height:1;color:#fff;transform:translate(-50%, -50%);white-space:nowrap;will-change:opacity;transition:opacity 300ms}.floorplan-plugin__img.svelte-2r6702{width:100%;height:100%}.floorplan-plugin__notes.svelte-2r6702{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);padding:0.25rem;line-height:1;border-radius:0.25rem;color:#fff;background:rgba(0,0,0,.6);font-size:0.75rem}");
}
function Cw(n) {
  let t, e, i, s, r, o = (
    /*item*/
    n[0].notes + ""
  ), a;
  return {
    c() {
      t = W("div"), e = W("img"), s = oe(), r = W("span"), a = je(o), y(e, "class", "floorplan-plugin__img svelte-2r6702"), pt(e.src, i = /*src*/
      n[6]) || y(e, "src", i), y(e, "alt", ""), Q(
        e,
        "transform",
        /*transform*/
        n[5]
      ), y(r, "class", "floorplan-plugin__notes svelte-2r6702"), y(t, "class", "floorplan-plugin__item svelte-2r6702"), Q(
        t,
        "left",
        /*left*/
        n[1]
      ), Q(
        t,
        "top",
        /*top*/
        n[2]
      ), Q(
        t,
        "width",
        /*width*/
        n[3]
      ), Q(
        t,
        "height",
        /*height*/
        n[4]
      );
    },
    m(l, c) {
      X(l, t, c), R(t, e), R(t, s), R(t, r), R(r, a);
    },
    p(l, [c]) {
      c & /*item*/
      1 && o !== (o = /*item*/
      l[0].notes + "") && He(a, o);
    },
    i: se,
    o: se,
    d(l) {
      l && U(t);
    }
  };
}
function Iw(n, t, e) {
  let { item: i } = t;
  const s = i.positionInImage.x * 100 + "%", r = i.positionInImage.y * 100 + "%", o = i.width * 100 + "%", a = i.height * 100 + "%", l = `rotate(${i.rotateZ}deg) scaleX(${i.rotateX ? -1 : 1}) scaleY(${i.rotateY ? -1 : 1})`, c = i.src;
  return n.$$set = (h) => {
    "item" in h && e(0, i = h.item);
  }, [i, s, r, o, a, l, c];
}
class Ew extends Ie {
  constructor(t) {
    super(), Ce(this, t, Iw, Cw, Pe, { item: 0 }, Pw);
  }
}
function Mw(n) {
  De(n, "svelte-1c5mqz0", ".floorplan-plugin__room-items.svelte-1c5mqz0{width:100%;height:100%;position:absolute;left:0;top:0;z-index:20;pointer-events:none}");
}
function tu(n, t, e) {
  const i = n.slice();
  return i[6] = t[e], i;
}
function iu(n) {
  let t, e = [], i = /* @__PURE__ */ new Map(), s, r, o, a = (
    /*items*/
    n[1]
  );
  const l = (c) => (
    /*item*/
    c[6].id
  );
  for (let c = 0; c < a.length; c += 1) {
    let h = tu(n, a, c), d = l(h);
    i.set(d, e[c] = nu(d, h));
  }
  return {
    c() {
      t = W("div");
      for (let c = 0; c < e.length; c += 1)
        e[c].c();
      y(t, "class", "floorplan-plugin__room-items svelte-1c5mqz0");
    },
    m(c, h) {
      X(c, t, h);
      for (let d = 0; d < e.length; d += 1)
        e[d] && e[d].m(t, null);
      s = !0, r || (o = [
        Pi(wn.call(null, t)),
        Oe(
          t,
          "clientWidth",
          /*clientWidth_handler*/
          n[4]
        )
      ], r = !0);
    },
    p(c, h) {
      h & /*items*/
      2 && (a = /*items*/
      c[1], Me(), e = Ei(e, h, l, 1, c, a, i, t, yn, nu, null, tu), ke());
    },
    i(c) {
      if (!s) {
        for (let h = 0; h < a.length; h += 1)
          F(e[h]);
        s = !0;
      }
    },
    o(c) {
      for (let h = 0; h < e.length; h += 1)
        Y(e[h]);
      s = !1;
    },
    d(c) {
      c && U(t);
      for (let h = 0; h < e.length; h += 1)
        e[h].d();
      r = !1, vt(o);
    }
  };
}
function nu(n, t) {
  let e, i, s;
  const r = [{ item: (
    /*item*/
    t[6]
  ) }];
  let o = {};
  for (let a = 0; a < r.length; a += 1)
    o = St(o, r[a]);
  return i = new Ew({ props: o }), {
    key: n,
    first: null,
    c() {
      e = Fe(), ve(i.$$.fragment), this.first = e;
    },
    m(a, l) {
      X(a, e, l), me(i, a, l), s = !0;
    },
    p(a, l) {
      t = a;
      const c = l & /*items*/
      2 ? Lt(r, [{ item: (
        /*item*/
        t[6]
      ) }]) : {};
      i.$set(c);
    },
    i(a) {
      s || (F(i.$$.fragment, a), s = !0);
    },
    o(a) {
      Y(i.$$.fragment, a), s = !1;
    },
    d(a) {
      a && U(e), ge(i, a);
    }
  };
}
function kw(n) {
  let t, e, i = (
    /*items*/
    n[1] && iu(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*items*/
      s[1] ? i ? (i.p(s, r), r & /*items*/
      2 && F(i, 1)) : (i = iu(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function xw(n, t, e) {
  let i, { floorIndex: s } = t, { floorplanData: r } = t, o = 0;
  const a = (l) => {
    e(0, o = l.detail);
  };
  return n.$$set = (l) => {
    "floorIndex" in l && e(2, s = l.floorIndex), "floorplanData" in l && e(3, r = l.floorplanData);
  }, n.$$.update = () => {
    if (n.$$.dirty & /*floorplanData, floorIndex*/
    12 && e(1, i = r.floorDatas[s].items), n.$$.dirty & /*floorplanData, clientWidth*/
    9) {
      const { max: l, min: c } = r.bounding;
      l.x - c.x;
    }
  }, [o, i, s, r, a];
}
class Dw extends Ie {
  constructor(t) {
    super(), Ce(this, t, xw, kw, Pe, { floorIndex: 2, floorplanData: 3 }, Mw);
  }
}
function Sw(n) {
  De(n, "svelte-9vzn2f", ".floorplan-plugin__room-label-item.svelte-9vzn2f{position:absolute;display:flex;flex-flow:column;align-items:center;line-height:1;color:#fff;transform:translate(-50%, -50%);white-space:nowrap;will-change:opacity;transition:opacity 300ms}.floorplan-plugin__room-part1.svelte-9vzn2f{display:flex;flex-flow:column;align-items:center;color:#fff;white-space:nowrap}.floorplan-plugin__room-area.svelte-9vzn2f{opacity:0.6;line-height:1.25;margin-top:0.125rem}");
}
function Tw(n) {
  let t, e = (
    /*userConfigElement*/
    n[16].outerHTML + ""
  ), i;
  return {
    c() {
      t = new Ba(!1), i = Fe(), t.a = i;
    },
    m(s, r) {
      t.m(e, s, r), X(s, i, r);
    },
    p(s, r) {
      r[0] & /*userConfigElement*/
      65536 && e !== (e = /*userConfigElement*/
      s[16].outerHTML + "") && t.p(e);
    },
    d(s) {
      s && U(i), s && t.d();
    }
  };
}
function Lw(n) {
  let t, e, i, s, r, o, a = (
    /*roomNameEnable*/
    n[1] && su(n)
  ), l = (
    /*roomAreaEnable*/
    n[0] && ru(n)
  ), c = (
    /*roomDimensionEnable*/
    n[3] && ou(n)
  );
  return {
    c() {
      t = W("div"), a && a.c(), e = oe(), l && l.c(), i = oe(), c && c.c(), s = Fe(), y(t, "class", "floorplan-plugin__room-part1 svelte-9vzn2f"), Q(
        t,
        "opacity",
        /*level1_labelVisible*/
        n[12] ? "1" : "0"
      );
    },
    m(h, d) {
      X(h, t, d), a && a.m(t, null), R(t, e), l && l.m(t, null), X(h, i, d), c && c.m(h, d), X(h, s, d), r || (o = [
        Pi(wn.call(null, t)),
        Oe(
          t,
          "clientWidth",
          /*clientWidth_handler*/
          n[33]
        ),
        Oe(
          t,
          "clientHeight",
          /*clientHeight_handler*/
          n[34]
        )
      ], r = !0);
    },
    p(h, d) {
      /*roomNameEnable*/
      h[1] ? a ? a.p(h, d) : (a = su(h), a.c(), a.m(t, e)) : a && (a.d(1), a = null), /*roomAreaEnable*/
      h[0] ? l ? l.p(h, d) : (l = ru(h), l.c(), l.m(t, null)) : l && (l.d(1), l = null), d[0] & /*level1_labelVisible*/
      4096 && Q(
        t,
        "opacity",
        /*level1_labelVisible*/
        h[12] ? "1" : "0"
      ), /*roomDimensionEnable*/
      h[3] ? c ? c.p(h, d) : (c = ou(h), c.c(), c.m(s.parentNode, s)) : c && (c.d(1), c = null);
    },
    d(h) {
      h && U(t), a && a.d(), l && l.d(), h && U(i), c && c.d(h), h && U(s), r = !1, vt(o);
    }
  };
}
function su(n) {
  let t, e = (
    /*roomNameOtherTypeEnable*/
    (n[2] ? (
      /*room*/
      n[4].name
    ) : (
      /*room*/
      n[4].roomType === "100900000012" ? (
        /*room*/
        n[4].customizedName
      ) : (
        /*room*/
        n[4].name
      )
    )) + ""
  ), i;
  return {
    c() {
      t = W("span"), i = je(e), y(t, "class", "floorplan-plugin__room-name");
    },
    m(s, r) {
      X(s, t, r), R(t, i);
    },
    p(s, r) {
      r[0] & /*roomNameOtherTypeEnable, room*/
      20 && e !== (e = /*roomNameOtherTypeEnable*/
      (s[2] ? (
        /*room*/
        s[4].name
      ) : (
        /*room*/
        s[4].roomType === "100900000012" ? (
          /*room*/
          s[4].customizedName
        ) : (
          /*room*/
          s[4].name
        )
      )) + "") && He(i, e);
    },
    d(s) {
      s && U(t);
    }
  };
}
function ru(n) {
  let t, e;
  return {
    c() {
      t = W("span"), e = je(
        /*roomAreaSize*/
        n[15]
      ), y(t, "class", "floorplan-plugin__room-area svelte-9vzn2f"), Q(
        t,
        "font-size",
        /*txtFontSize*/
        n[20]
      );
    },
    m(i, s) {
      X(i, t, s), R(t, e);
    },
    p(i, s) {
      s[0] & /*roomAreaSize*/
      32768 && He(
        e,
        /*roomAreaSize*/
        i[15]
      );
    },
    d(i) {
      i && U(t);
    }
  };
}
function ou(n) {
  let t, e;
  return {
    c() {
      t = W("span"), e = je(
        /*roomDimension*/
        n[14]
      ), y(t, "class", "floorplan-plugin__room-size"), Q(
        t,
        "font-size",
        /*txtFontSize*/
        n[20]
      ), Q(
        t,
        "opacity",
        /*level2_labelVisible*/
        n[11] ? "0.6" : "0"
      );
    },
    m(i, s) {
      X(i, t, s), R(t, e);
    },
    p(i, s) {
      s[0] & /*roomDimension*/
      16384 && He(
        e,
        /*roomDimension*/
        i[14]
      ), s[0] & /*level2_labelVisible*/
      2048 && Q(
        t,
        "opacity",
        /*level2_labelVisible*/
        i[11] ? "0.6" : "0"
      );
    },
    d(i) {
      i && U(t);
    }
  };
}
function zw(n) {
  let t, e, i;
  function s(a, l) {
    if (
      /*getLabelElement*/
      a[5] === void 0
    )
      return Lw;
    if (
      /*userConfigElement*/
      a[16]
    )
      return Tw;
  }
  let r = s(n), o = r && r(n);
  return {
    c() {
      t = W("div"), o && o.c(), y(t, "class", "floorplan-plugin__room-label-item svelte-9vzn2f"), Q(
        t,
        "left",
        /*left*/
        n[17]
      ), Q(
        t,
        "top",
        /*top*/
        n[18]
      ), Q(
        t,
        "font-size",
        /*titleFontSize*/
        n[19]
      ), Q(
        t,
        "opacity",
        /*level0_labelVisible*/
        n[13] ? "1" : "0"
      ), Q(
        t,
        "transform",
        /*transformInner*/
        n[10] ? "translate(-50%, calc(-50% + 6px))" : "translate(-50%, -50%)"
      );
    },
    m(a, l) {
      X(a, t, l), o && o.m(t, null), e || (i = [
        Pi(wn.call(null, t)),
        Oe(
          t,
          "clientWidth",
          /*clientWidth_handler_1*/
          n[35]
        ),
        Oe(
          t,
          "clientHeight",
          /*clientHeight_handler_1*/
          n[36]
        )
      ], e = !0);
    },
    p(a, l) {
      r === (r = s(a)) && o ? o.p(a, l) : (o && o.d(1), o = r && r(a), o && (o.c(), o.m(t, null))), l[0] & /*level0_labelVisible*/
      8192 && Q(
        t,
        "opacity",
        /*level0_labelVisible*/
        a[13] ? "1" : "0"
      ), l[0] & /*transformInner*/
      1024 && Q(
        t,
        "transform",
        /*transformInner*/
        a[10] ? "translate(-50%, calc(-50% + 6px))" : "translate(-50%, -50%)"
      );
    },
    i: se,
    o: se,
    d(a) {
      a && U(t), o && o.d(), e = !1, vt(i);
    }
  };
}
function Ow(n, t) {
  const e = n[0], i = n[1];
  let s = !1;
  for (let r = 0, o = t.length - 1; r < t.length; o = r++) {
    const a = t[r][0], l = t[r][1], c = t[o][0], h = t[o][1];
    l > i != h > i && e < (c - a) * (i - l) / (h - l) + a && (s = !s);
  }
  return s;
}
function jw(n, t, e) {
  let i, s, r, o, a, l, c, h, d, f, g, p, m, { pxmm: v } = t, { roomAreaEnable: b } = t, { roomNameEnable: w } = t, { roomNameOtherTypeEnable: x } = t, { roomDimensionEnable: k } = t, { room: T } = t, { hoveredRoom: S } = t, { getRoomAreaText: V } = t, { getRoomDimensionText: z } = t, { getLabelElement: O } = t, { adaptiveRoomLabelVisibleEnable: A } = t;
  function C(ce, Ee) {
    if (Ee.width === 0 || Ee.height === 0)
      return () => !1;
    const Ae = ce.path.map(({ x: nt, y: it }) => [nt, it]), Ge = ce.roomLabel.position, { x: Be, y: Te } = Ge, { width: Ne, height: ue } = Ee, Se = Ne / 2, ze = ue / 2;
    return function(it) {
      const ht = Be * it, Ke = Te * it, $e = Ae.map(([at, Ut]) => [at * it, Ut * it]);
      return [
        [ht + Se, Ke - ze],
        [ht - Se, Ke - ze],
        [ht - Se, Ke + ze],
        [ht + Se, Ke + ze]
      ].every((at) => Ow(at, $e));
    };
  }
  const I = document.body.clientWidth, E = document.body.clientHeight, D = T.roomLabel, L = D.positionInImage.x * 100 + "%", N = D.positionInImage.y * 100 + "%", G = (I < 500 || E < 500 ? 10 : 14) + "px", Z = (I < 500 || E < 500 ? 8 : 12) + "px";
  let ee = 0, J = 0, ie = 0, ne = 0, he = !1;
  S.subscribe(function(Ee) {
    e(26, he = !!Ee && Ee.id === T.id);
  });
  const Le = (ce) => {
    e(8, ie = ce.detail);
  }, we = (ce) => {
    e(9, ne = ce.detail);
  }, le = (ce) => {
    e(6, ee = ce.detail);
  }, ae = (ce) => {
    e(7, J = ce.detail);
  };
  return n.$$set = (ce) => {
    "pxmm" in ce && e(21, v = ce.pxmm), "roomAreaEnable" in ce && e(0, b = ce.roomAreaEnable), "roomNameEnable" in ce && e(1, w = ce.roomNameEnable), "roomNameOtherTypeEnable" in ce && e(2, x = ce.roomNameOtherTypeEnable), "roomDimensionEnable" in ce && e(3, k = ce.roomDimensionEnable), "room" in ce && e(4, T = ce.room), "hoveredRoom" in ce && e(22, S = ce.hoveredRoom), "getRoomAreaText" in ce && e(23, V = ce.getRoomAreaText), "getRoomDimensionText" in ce && e(24, z = ce.getRoomDimensionText), "getLabelElement" in ce && e(5, O = ce.getLabelElement), "adaptiveRoomLabelVisibleEnable" in ce && e(25, A = ce.adaptiveRoomLabelVisibleEnable);
  }, n.$$.update = () => {
    var ce, Ee;
    n.$$.dirty[0] & /*getLabelElement, room*/
    48 && e(16, i = O == null ? void 0 : O(T)), n.$$.dirty[0] & /*room, getRoomAreaText*/
    8388624 && e(15, s = T.size ? V(T.size) : ""), n.$$.dirty[0] & /*room, getRoomDimensionText*/
    16777232 && e(14, r = T != null && T.dimension ? z((ce = T.dimension) == null ? void 0 : ce.width, (Ee = T.dimension) == null ? void 0 : Ee.height) : ""), n.$$.dirty[0] & /*clientWidth, clientHeight*/
    768 && e(32, o = { width: ie, height: ne }), n.$$.dirty[0] & /*room*/
    16 | n.$$.dirty[1] & /*labelElementSize*/
    2 && e(31, a = o ? C(T, o) : void 0), n.$$.dirty[0] & /*adaptiveRoomLabelVisibleEnable, pxmm*/
    35651584 | n.$$.dirty[1] & /*isLabelInRoom*/
    1 && e(28, l = A ? !!(a != null && a(v)) : !0), n.$$.dirty[0] & /*wrapperClientWidth, wrapperClientHeight*/
    192 && e(30, c = {
      width: ee,
      height: J
    }), n.$$.dirty[0] & /*wrapperLabelElementSize, room*/
    1073741840 && e(29, h = c ? C(T, c) : void 0), n.$$.dirty[0] & /*adaptiveRoomLabelVisibleEnable, isAllLabelInRoom, pxmm*/
    572522496 && e(27, d = A ? !!(h != null && h(v)) : !0), n.$$.dirty[0] & /*wrapperLabelVisible, mainLabelVisible, isHovered*/
    469762048 && e(13, f = d || l || he), n.$$.dirty[0] & /*mainLabelVisible, isHovered*/
    335544320 && e(12, g = l || he), n.$$.dirty[0] & /*wrapperLabelVisible, isHovered*/
    201326592 && e(11, p = d || he), n.$$.dirty[0] & /*mainLabelVisible, wrapperLabelVisible*/
    402653184 && e(10, m = l && !d);
  }, [
    b,
    w,
    x,
    k,
    T,
    O,
    ee,
    J,
    ie,
    ne,
    m,
    p,
    g,
    f,
    r,
    s,
    i,
    L,
    N,
    G,
    Z,
    v,
    S,
    V,
    z,
    A,
    he,
    d,
    l,
    h,
    c,
    a,
    o,
    Le,
    we,
    le,
    ae
  ];
}
class Rw extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      jw,
      zw,
      Pe,
      {
        pxmm: 21,
        roomAreaEnable: 0,
        roomNameEnable: 1,
        roomNameOtherTypeEnable: 2,
        roomDimensionEnable: 3,
        room: 4,
        hoveredRoom: 22,
        getRoomAreaText: 23,
        getRoomDimensionText: 24,
        getLabelElement: 5,
        adaptiveRoomLabelVisibleEnable: 25
      },
      Sw,
      [-1, -1]
    );
  }
}
function Bw(n) {
  De(n, "svelte-13xux0b", ".floorplan-plugin__room-labels.svelte-13xux0b{width:100%;height:100%;position:absolute;left:0;top:0;z-index:20;pointer-events:none}");
}
function au(n, t, e) {
  const i = n.slice();
  return i[15] = t[e], i;
}
function lu(n) {
  let t, e = [], i = /* @__PURE__ */ new Map(), s, r, o, a = (
    /*rooms*/
    n[11]
  );
  const l = (c) => (
    /*room*/
    c[15].id
  );
  for (let c = 0; c < a.length; c += 1) {
    let h = au(n, a, c), d = l(h);
    i.set(d, e[c] = cu(d, h));
  }
  return {
    c() {
      t = W("div");
      for (let c = 0; c < e.length; c += 1)
        e[c].c();
      y(t, "class", "floorplan-plugin__room-labels svelte-13xux0b");
    },
    m(c, h) {
      X(c, t, h);
      for (let d = 0; d < e.length; d += 1)
        e[d] && e[d].m(t, null);
      s = !0, r || (o = [
        Pi(wn.call(null, t)),
        Oe(
          t,
          "clientWidth",
          /*clientWidth_handler*/
          n[14]
        )
      ], r = !0);
    },
    p(c, h) {
      h & /*pxmm, rooms, hoveredRoom, roomAreaEnable, roomNameEnable, roomNameOtherTypeEnable, roomDimensionEnable, getLabelElement, getRoomAreaText, getRoomDimensionText, adaptiveRoomLabelVisibleEnable*/
      3583 && (a = /*rooms*/
      c[11], Me(), e = Ei(e, h, l, 1, c, a, i, t, yn, cu, null, au), ke());
    },
    i(c) {
      if (!s) {
        for (let h = 0; h < a.length; h += 1)
          F(e[h]);
        s = !0;
      }
    },
    o(c) {
      for (let h = 0; h < e.length; h += 1)
        Y(e[h]);
      s = !1;
    },
    d(c) {
      c && U(t);
      for (let h = 0; h < e.length; h += 1)
        e[h].d();
      r = !1, vt(o);
    }
  };
}
function cu(n, t) {
  let e, i, s;
  const r = [
    {
      pxmm: (
        /*pxmm*/
        t[10]
      ),
      room: (
        /*room*/
        t[15]
      ),
      hoveredRoom: (
        /*hoveredRoom*/
        t[4]
      ),
      roomAreaEnable: (
        /*roomAreaEnable*/
        t[0]
      ),
      roomNameEnable: (
        /*roomNameEnable*/
        t[1]
      ),
      roomNameOtherTypeEnable: (
        /*roomNameOtherTypeEnable*/
        t[2]
      ),
      roomDimensionEnable: (
        /*roomDimensionEnable*/
        t[3]
      ),
      getLabelElement: (
        /*getLabelElement*/
        t[7]
      ),
      getRoomAreaText: (
        /*getRoomAreaText*/
        t[5]
      ),
      getRoomDimensionText: (
        /*getRoomDimensionText*/
        t[6]
      ),
      adaptiveRoomLabelVisibleEnable: (
        /*adaptiveRoomLabelVisibleEnable*/
        t[8]
      )
    }
  ];
  let o = {};
  for (let a = 0; a < r.length; a += 1)
    o = St(o, r[a]);
  return i = new Rw({ props: o }), {
    key: n,
    first: null,
    c() {
      e = Fe(), ve(i.$$.fragment), this.first = e;
    },
    m(a, l) {
      X(a, e, l), me(i, a, l), s = !0;
    },
    p(a, l) {
      t = a;
      const c = l & /*pxmm, rooms, hoveredRoom, roomAreaEnable, roomNameEnable, roomNameOtherTypeEnable, roomDimensionEnable, getLabelElement, getRoomAreaText, getRoomDimensionText, adaptiveRoomLabelVisibleEnable*/
      3583 ? Lt(r, [
        {
          pxmm: (
            /*pxmm*/
            t[10]
          ),
          room: (
            /*room*/
            t[15]
          ),
          hoveredRoom: (
            /*hoveredRoom*/
            t[4]
          ),
          roomAreaEnable: (
            /*roomAreaEnable*/
            t[0]
          ),
          roomNameEnable: (
            /*roomNameEnable*/
            t[1]
          ),
          roomNameOtherTypeEnable: (
            /*roomNameOtherTypeEnable*/
            t[2]
          ),
          roomDimensionEnable: (
            /*roomDimensionEnable*/
            t[3]
          ),
          getLabelElement: (
            /*getLabelElement*/
            t[7]
          ),
          getRoomAreaText: (
            /*getRoomAreaText*/
            t[5]
          ),
          getRoomDimensionText: (
            /*getRoomDimensionText*/
            t[6]
          ),
          adaptiveRoomLabelVisibleEnable: (
            /*adaptiveRoomLabelVisibleEnable*/
            t[8]
          )
        }
      ]) : {};
      i.$set(c);
    },
    i(a) {
      s || (F(i.$$.fragment, a), s = !0);
    },
    o(a) {
      Y(i.$$.fragment, a), s = !1;
    },
    d(a) {
      a && U(e), ge(i, a);
    }
  };
}
function Vw(n) {
  let t, e, i = (
    /*rooms*/
    n[11] && lu(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*rooms*/
      s[11] ? i ? (i.p(s, r), r & /*rooms*/
      2048 && F(i, 1)) : (i = lu(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function _w(n, t, e) {
  let i, { floorIndex: s } = t, { roomAreaEnable: r } = t, { roomNameEnable: o } = t, { roomNameOtherTypeEnable: a } = t, { roomDimensionEnable: l } = t, { floorplanData: c } = t, { hoveredRoom: h } = t, { getRoomAreaText: d } = t, { getRoomDimensionText: f } = t, { getLabelElement: g } = t, { adaptiveRoomLabelVisibleEnable: p } = t, m = 0, v = 0;
  const b = (w) => {
    e(9, m = w.detail);
  };
  return n.$$set = (w) => {
    "floorIndex" in w && e(12, s = w.floorIndex), "roomAreaEnable" in w && e(0, r = w.roomAreaEnable), "roomNameEnable" in w && e(1, o = w.roomNameEnable), "roomNameOtherTypeEnable" in w && e(2, a = w.roomNameOtherTypeEnable), "roomDimensionEnable" in w && e(3, l = w.roomDimensionEnable), "floorplanData" in w && e(13, c = w.floorplanData), "hoveredRoom" in w && e(4, h = w.hoveredRoom), "getRoomAreaText" in w && e(5, d = w.getRoomAreaText), "getRoomDimensionText" in w && e(6, f = w.getRoomDimensionText), "getLabelElement" in w && e(7, g = w.getLabelElement), "adaptiveRoomLabelVisibleEnable" in w && e(8, p = w.adaptiveRoomLabelVisibleEnable);
  }, n.$$.update = () => {
    if (n.$$.dirty & /*floorplanData, floorIndex*/
    12288 && e(11, i = c.floorDatas[s].rooms), n.$$.dirty & /*floorplanData, clientWidth*/
    8704) {
      const { max: w, min: x } = c.bounding, k = w.x - x.x;
      e(10, v = m / k);
    }
  }, [
    r,
    o,
    a,
    l,
    h,
    d,
    f,
    g,
    p,
    m,
    v,
    i,
    s,
    c,
    b
  ];
}
class Hw extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      _w,
      Vw,
      Pe,
      {
        floorIndex: 12,
        roomAreaEnable: 0,
        roomNameEnable: 1,
        roomNameOtherTypeEnable: 2,
        roomDimensionEnable: 3,
        floorplanData: 13,
        hoveredRoom: 4,
        getRoomAreaText: 5,
        getRoomDimensionText: 6,
        getLabelElement: 7,
        adaptiveRoomLabelVisibleEnable: 8
      },
      Bw
    );
  }
}
function Fw(n) {
  De(n, "svelte-1fuyezq", ".floorplan-plugin__rule-labels.svelte-1fuyezq.svelte-1fuyezq{position:absolute;display:flex}.floorplan-plugin__rule-labels--top.svelte-1fuyezq.svelte-1fuyezq{left:0;top:-1.25rem}.floorplan-plugin__rule-labels--bottom.svelte-1fuyezq.svelte-1fuyezq{left:0;bottom:-1.25rem}.floorplan-plugin__rule-labels--left.svelte-1fuyezq.svelte-1fuyezq{top:0;left:-1.25rem}.floorplan-plugin__rule-labels--right.svelte-1fuyezq.svelte-1fuyezq{top:0;right:-1.25rem}.floorplan-plugin__rule-line.svelte-1fuyezq.svelte-1fuyezq{background:#fff;opacity:0.2;width:100%;height:100%}.floorplan-plugin__rule-scale-wrapper.svelte-1fuyezq.svelte-1fuyezq{position:absolute;width:0.3125rem;height:100%;left:50%;top:0;transform:translateX(-50%)}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-scale-wrapper.svelte-1fuyezq{width:100%;height:0.3125rem;top:50%;left:0;transform:translateY(-50%)}.floorplan-plugin__rule-scale.svelte-1fuyezq.svelte-1fuyezq{position:absolute;background:#fff;opacity:0.2;width:100%;height:0.0625rem}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-scale.svelte-1fuyezq{width:0.0625rem;height:100%}.floorplan-plugin__rule-text-wrapper.svelte-1fuyezq.svelte-1fuyezq{position:absolute}.floorplan-plugin__rule-labels--top.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:100%;height:0;top:0.625rem}.floorplan-plugin__rule-labels--bottom.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:100%;height:0;bottom:0.625rem}.floorplan-plugin__rule-labels--left.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:0;height:100%;left:0.625rem}.floorplan-plugin__rule-labels--right.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:0;height:100%;right:0.625rem}.floorplan-plugin__rule-text-item.svelte-1fuyezq.svelte-1fuyezq{width:0;height:0;position:absolute;transform:rotate(90deg)}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-text-item.svelte-1fuyezq{transform:rotate(0)}.floorplan-plugin__rule-text.svelte-1fuyezq.svelte-1fuyezq{width:-moz-max-content;width:max-content;transform:translate(-50%, -50%);font-size:0.625rem;color:#fff;opacity:0.35}");
}
function hu(n, t, e) {
  const i = n.slice();
  return i[11] = t[e], i[13] = e, i;
}
function du(n, t, e) {
  const i = n.slice();
  return i[14] = t[e], i;
}
function uu(n) {
  let t;
  return {
    c() {
      t = W("div"), y(t, "class", "floorplan-plugin__rule-scale svelte-1fuyezq"), Q(
        t,
        "left",
        /*rulerLabel*/
        n[14].left * 100 + "%"
      ), Q(
        t,
        "bottom",
        /*rulerLabel*/
        n[14].bottom * 100 + "%"
      );
    },
    m(e, i) {
      X(e, t, i);
    },
    p: se,
    d(e) {
      e && U(t);
    }
  };
}
function fu(n, t) {
  let e, i, s = (
    /*getRuleDistanceText*/
    t[1](
      /*textItem*/
      t[11].distance
    ) + ""
  ), r, o;
  return {
    key: n,
    first: null,
    c() {
      e = W("div"), i = W("div"), r = je(s), o = oe(), y(i, "class", "floorplan-plugin__rule-text svelte-1fuyezq"), ye(
        i,
        "is-row",
        /*isRow*/
        t[2]
      ), y(e, "class", "floorplan-plugin__rule-text-item svelte-1fuyezq"), Q(
        e,
        "left",
        /*textItem*/
        t[11].left * 100 + "%"
      ), Q(
        e,
        "bottom",
        /*textItem*/
        t[11].bottom * 100 + "%"
      ), this.first = e;
    },
    m(a, l) {
      X(a, e, l), R(e, i), R(i, r), R(e, o);
    },
    p(a, l) {
      t = a, l & /*getRuleDistanceText*/
      2 && s !== (s = /*getRuleDistanceText*/
      t[1](
        /*textItem*/
        t[11].distance
      ) + "") && He(r, s);
    },
    d(a) {
      a && U(e);
    }
  };
}
function Nw(n) {
  let t, e, i, s, r, o, a = [], l = /* @__PURE__ */ new Map(), c, h = (
    /*rulerLabels*/
    n[3]
  ), d = [];
  for (let p = 0; p < h.length; p += 1)
    d[p] = uu(du(n, h, p));
  let f = (
    /*rulerTexts*/
    n[4]
  );
  const g = (p) => (
    /*textItemIndex*/
    p[13]
  );
  for (let p = 0; p < f.length; p += 1) {
    let m = hu(n, f, p), v = g(m);
    l.set(v, a[p] = fu(v, m));
  }
  return {
    c() {
      t = W("div"), e = W("div"), i = oe(), s = W("div");
      for (let p = 0; p < d.length; p += 1)
        d[p].c();
      r = oe(), o = W("div");
      for (let p = 0; p < a.length; p += 1)
        a[p].c();
      y(e, "class", "floorplan-plugin__rule-line svelte-1fuyezq"), y(s, "class", "floorplan-plugin__rule-scale-wrapper svelte-1fuyezq"), ye(
        s,
        "is-row",
        /*isRow*/
        n[2]
      ), y(o, "class", "floorplan-plugin__rule-text-wrapper svelte-1fuyezq"), y(t, "class", c = "floorplan-plugin__rule-labels floorplan-plugin__rule-labels--" + /*type*/
      n[0] + " svelte-1fuyezq"), ye(
        t,
        "is-row",
        /*isRow*/
        n[2]
      ), Q(
        t,
        "width",
        /*isRow*/
        n[2] ? "100%" : 1 / 16 + "rem"
      ), Q(t, "height", /*isRow*/
      n[2] ? 1 / 16 + "rem" : "100%");
    },
    m(p, m) {
      X(p, t, m), R(t, e), R(t, i), R(t, s);
      for (let v = 0; v < d.length; v += 1)
        d[v] && d[v].m(s, null);
      R(t, r), R(t, o);
      for (let v = 0; v < a.length; v += 1)
        a[v] && a[v].m(o, null);
    },
    p(p, [m]) {
      if (m & /*rulerLabels*/
      8) {
        h = /*rulerLabels*/
        p[3];
        let v;
        for (v = 0; v < h.length; v += 1) {
          const b = du(p, h, v);
          d[v] ? d[v].p(b, m) : (d[v] = uu(b), d[v].c(), d[v].m(s, null));
        }
        for (; v < d.length; v += 1)
          d[v].d(1);
        d.length = h.length;
      }
      m & /*rulerTexts, isRow, getRuleDistanceText*/
      22 && (f = /*rulerTexts*/
      p[4], a = Ei(a, m, g, 1, p, f, l, o, Rh, fu, null, hu)), m & /*type*/
      1 && c !== (c = "floorplan-plugin__rule-labels floorplan-plugin__rule-labels--" + /*type*/
      p[0] + " svelte-1fuyezq") && y(t, "class", c), m & /*type, isRow*/
      5 && ye(
        t,
        "is-row",
        /*isRow*/
        p[2]
      );
    },
    i: se,
    o: se,
    d(p) {
      p && U(t), pi(d, p);
      for (let m = 0; m < a.length; m += 1)
        a[m].d();
    }
  };
}
const ir = 1e3, nr = 180;
function Gw(n, t, e) {
  let { type: i } = t, { data: s } = t, { bounding: r } = t, { getRuleDistanceText: o } = t;
  const a = i === "top" || i === "bottom", l = r.max.x - r.min.x - (ir - nr) * 2, c = r.max.y - r.min.y - (ir - nr) * 2, h = s.map(([p, m]) => a ? [p.x, m.x] : [p.y, m.y]).flat().sort().filter((p, m, v) => m === 0 ? !0 : p !== v[m - 1]), d = h.map((p) => {
    const m = a ? (p - r.min.x - ir + nr) / l : 0, v = a ? 0 : (p - r.min.y - ir + nr) / c;
    return { left: m, bottom: v };
  });
  d.unshift({ left: 0, bottom: 0 }), d.push(a ? { left: 1, bottom: 0 } : { left: 0, bottom: 1 });
  const f = h[h.length - 1] - h[0], g = h.map((p, m, v) => {
    const b = m === 0 ? 0 : p - v[m - 1], w = m === 0 ? 0 : (p + v[m - 1]) / 2, x = a ? (w - r.min.x - ir + nr) / l : 0, k = a ? 0 : (w - r.min.y - ir + nr) / c;
    return { left: x, bottom: k, distance: b };
  }).filter(({ distance: p }) => p / f > 0.1);
  return n.$$set = (p) => {
    "type" in p && e(0, i = p.type), "data" in p && e(5, s = p.data), "bounding" in p && e(6, r = p.bounding), "getRuleDistanceText" in p && e(1, o = p.getRuleDistanceText);
  }, [i, o, a, d, g, s, r];
}
class Ww extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      Gw,
      Nw,
      Pe,
      {
        type: 0,
        data: 5,
        bounding: 6,
        getRuleDistanceText: 1
      },
      Fw
    );
  }
}
function Qw(n) {
  De(n, "svelte-1mzj9p3", ".floorplan-plugin__rule-labels-wrapper.svelte-1mzj9p3{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);pointer-events:none}");
}
function pu(n, t, e) {
  const i = n.slice();
  return i[13] = t[e][0], i[14] = t[e][1], i;
}
function mu(n, t) {
  let e, i, s;
  const r = [
    {
      type: (
        /*type*/
        t[13]
      ),
      data: (
        /*data*/
        t[14]
      ),
      bounding: (
        /*bounding*/
        t[1]
      ),
      getRuleDistanceText: (
        /*getRuleDistanceText*/
        t[0]
      )
    }
  ];
  let o = {};
  for (let a = 0; a < r.length; a += 1)
    o = St(o, r[a]);
  return i = new Ww({ props: o }), {
    key: n,
    first: null,
    c() {
      e = Fe(), ve(i.$$.fragment), this.first = e;
    },
    m(a, l) {
      X(a, e, l), me(i, a, l), s = !0;
    },
    p(a, l) {
      t = a;
      const c = l & /*ruleLabelArray, bounding, getRuleDistanceText*/
      19 ? Lt(r, [
        {
          type: (
            /*type*/
            t[13]
          ),
          data: (
            /*data*/
            t[14]
          ),
          bounding: (
            /*bounding*/
            t[1]
          ),
          getRuleDistanceText: (
            /*getRuleDistanceText*/
            t[0]
          )
        }
      ]) : {};
      i.$set(c);
    },
    i(a) {
      s || (F(i.$$.fragment, a), s = !0);
    },
    o(a) {
      Y(i.$$.fragment, a), s = !1;
    },
    d(a) {
      a && U(e), ge(i, a);
    }
  };
}
function Uw(n) {
  let t, e = [], i = /* @__PURE__ */ new Map(), s, r = (
    /*ruleLabelArray*/
    n[4]
  );
  const o = (a) => (
    /*type*/
    a[13]
  );
  for (let a = 0; a < r.length; a += 1) {
    let l = pu(n, r, a), c = o(l);
    i.set(c, e[a] = mu(c, l));
  }
  return {
    c() {
      t = W("div");
      for (let a = 0; a < e.length; a += 1)
        e[a].c();
      y(t, "class", "floorplan-plugin__rule-labels-wrapper svelte-1mzj9p3"), Q(
        t,
        "width",
        /*width*/
        n[3]
      ), Q(
        t,
        "height",
        /*height*/
        n[2]
      );
    },
    m(a, l) {
      X(a, t, l);
      for (let c = 0; c < e.length; c += 1)
        e[c] && e[c].m(t, null);
      s = !0;
    },
    p(a, [l]) {
      l & /*ruleLabelArray, bounding, getRuleDistanceText*/
      19 && (r = /*ruleLabelArray*/
      a[4], Me(), e = Ei(e, l, o, 1, a, r, i, t, yn, mu, null, pu), ke()), l & /*width*/
      8 && Q(
        t,
        "width",
        /*width*/
        a[3]
      ), l & /*height*/
      4 && Q(
        t,
        "height",
        /*height*/
        a[2]
      );
    },
    i(a) {
      if (!s) {
        for (let l = 0; l < r.length; l += 1)
          F(e[l]);
        s = !0;
      }
    },
    o(a) {
      for (let l = 0; l < e.length; l += 1)
        Y(e[l]);
      s = !1;
    },
    d(a) {
      a && U(t);
      for (let l = 0; l < e.length; l += 1)
        e[l].d();
    }
  };
}
const gu = 1e3, vu = 180;
function Xw(n, t, e) {
  let i, s, r, o, a, l, c, h, d, f, { floorIndex: g } = t, { floorplanData: p } = t, { getRuleDistanceText: m } = t;
  return n.$$set = (v) => {
    "floorIndex" in v && e(5, g = v.floorIndex), "floorplanData" in v && e(6, p = v.floorplanData), "getRuleDistanceText" in v && e(0, m = v.getRuleDistanceText);
  }, n.$$.update = () => {
    n.$$.dirty & /*floorplanData*/
    64 && e(1, i = p.bounding), n.$$.dirty & /*floorplanData, floorIndex*/
    96 && e(11, s = p.floorDatas[g].rules), n.$$.dirty & /*ruleLabelData*/
    2048 && e(12, r = Object.keys(s)), n.$$.dirty & /*ruleLabelDataKeys, ruleLabelData*/
    6144 && e(4, o = r.map((v) => [v, s[v]])), n.$$.dirty & /*bounding*/
    2 && e(9, a = i.max.x - i.min.x), n.$$.dirty & /*bounding*/
    2 && e(7, l = i.max.y - i.min.y), n.$$.dirty & /*bounding*/
    2 && e(10, c = i.max.x - i.min.x - (gu - vu) * 2), n.$$.dirty & /*bounding*/
    2 && e(8, h = i.max.y - i.min.y - (gu - vu) * 2), n.$$.dirty & /*contentWidth, boundingWidth*/
    1536 && e(3, d = c / a * 100 + "%"), n.$$.dirty & /*contentHeight, boundingHeight*/
    384 && e(2, f = h / l * 100 + "%");
  }, [
    m,
    i,
    f,
    d,
    o,
    g,
    p,
    l,
    h,
    a,
    c,
    s,
    r
  ];
}
class Yw extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      Xw,
      Uw,
      Pe,
      {
        floorIndex: 5,
        floorplanData: 6,
        getRuleDistanceText: 0
      },
      Qw
    );
  }
}
function Wn(n, t = {}) {
  let e = "";
  const { needZ: i, needA: s } = t;
  return (i ? n.slice().concat(n[0]) : n.slice()).forEach((o, a) => {
    const { x: l, y: c } = t.format ? t.format(o) : o, h = l + "," + c;
    return a === 0 ? (e += "M" + h, e) : s != null && s[a] ? (e += "A" + s[a] + "," + h, e) : (e += "L" + h, e);
  }), e + (i ? "Z" : "");
}
function b0({ x: n, y: t }, e) {
  const { max: i, min: s } = e;
  return { x: n - s.x, y: i.y - t };
}
function Zw(n, t) {
  const e = n.x * 1e3 + t.bounding.origin.x, i = -n.z * 1e3 + t.bounding.origin.y;
  return { x: e, y: i };
}
function Jw(n, t) {
  const e = t.bounding, i = e.max.x - e.min.x, s = e.max.y - e.min.y;
  return {
    x: (n.x - e.min.x) / i,
    y: (e.max.y - n.y) / s
  };
}
function qw(n, t) {
  return Math.max(
    ...t.work.observers.map((i) => n.z >= i.standingPosition.z ? i.floorIndex : 0)
  );
}
function Kw(n) {
  let t;
  return {
    c() {
      t = be("path"), y(
        t,
        "d",
        /*d*/
        n[0]
      ), y(t, "fill", "#2F313A");
    },
    m(e, i) {
      X(e, t, i);
    },
    p(e, [i]) {
      i & /*d*/
      1 && y(
        t,
        "d",
        /*d*/
        e[0]
      );
    },
    i: se,
    o: se,
    d(e) {
      e && U(t);
    }
  };
}
function $w(n, t, e) {
  let i, { path: s } = t;
  return n.$$set = (r) => {
    "path" in r && e(1, s = r.path);
  }, n.$$.update = () => {
    n.$$.dirty & /*path*/
    2 && e(0, i = Wn(s, { needZ: !0 }));
  }, [i, s];
}
class e2 extends Ie {
  constructor(t) {
    super(), Ce(this, t, $w, Kw, Pe, { path: 1 });
  }
}
function t2(n) {
  let t, e, i, s, r, o;
  return {
    c() {
      t = be("defs"), e = be("pattern"), i = be("rect"), s = be("path"), r = oe(), o = be("path"), y(i, "x", "0"), y(i, "y", "0"), y(
        i,
        "width",
        /*width*/
        n[1]
      ), y(
        i,
        "height",
        /*width*/
        n[1]
      ), y(i, "fill", "#323747"), y(
        s,
        "d",
        /*patternPathD*/
        n[2]
      ), y(s, "stroke", "#ffffff"), y(s, "stroke-opacity", "0.06"), y(s, "stroke-width", "0.5"), y(s, "fill", "none"), y(e, "id", "fpm-room-pattern-0"), y(e, "x", "0"), y(e, "y", "0"), y(
        e,
        "width",
        /*width*/
        n[1]
      ), y(
        e,
        "height",
        /*width*/
        n[1]
      ), y(e, "patternUnits", "userSpaceOnUse"), y(e, "patternTransform", "scale(50 50)"), y(
        o,
        "d",
        /*d*/
        n[0]
      ), y(o, "fill", "url(#fpm-room-pattern-0)");
    },
    m(a, l) {
      X(a, t, l), R(t, e), R(e, i), R(e, s), X(a, r, l), X(a, o, l);
    },
    p(a, [l]) {
      l & /*d*/
      1 && y(
        o,
        "d",
        /*d*/
        a[0]
      );
    },
    i: se,
    o: se,
    d(a) {
      a && U(t), a && U(r), a && U(o);
    }
  };
}
const Ql = 6;
function i2(n, t, e) {
  let i, { path: s } = t;
  const r = Ql * 2, o = `M0 ${Ql} h ${r} M${Ql} 0 v ${r}`;
  return n.$$set = (a) => {
    "path" in a && e(3, s = a.path);
  }, n.$$.update = () => {
    n.$$.dirty & /*path*/
    8 && e(0, i = Wn(s, { needZ: !0 }));
  }, [i, r, o, s];
}
class n2 extends Ie {
  constructor(t) {
    super(), Ce(this, t, i2, t2, Pe, { path: 3 });
  }
}
function s2(n) {
  let t, e, i, s, r, o, a, l, c, h, d;
  return {
    c() {
      t = be("defs"), e = be("pattern"), i = be("rect"), s = be("pattern"), r = be("rect"), o = oe(), a = be("path"), l = oe(), c = be("path"), h = oe(), d = be("path"), y(i, "x", "0"), y(i, "y", "0"), y(i, "width", "6"), y(i, "height", "50"), y(i, "fill", "none"), y(i, "stroke", "#4B4B57"), y(i, "stroke-width", "0.5"), y(e, "id", "room-material-pattern-1"), y(e, "x", "0"), y(e, "y", "0"), y(e, "width", "12"), y(e, "height", "50"), y(e, "patternUnits", "userSpaceOnUse"), y(e, "patternTransform", "scale(50 50)"), y(r, "x", "0"), y(r, "y", "0"), y(r, "width", "6"), y(r, "height", "50"), y(r, "fill", "none"), y(r, "stroke", "#4B4B57"), y(r, "stroke-width", "0.5"), y(s, "id", "room-material-pattern-2"), y(s, "x", "6"), y(s, "y", "25"), y(s, "width", "12"), y(s, "height", "50"), y(s, "patternUnits", "userSpaceOnUse"), y(s, "patternTransform", "scale(50 50)"), y(
        a,
        "d",
        /*d*/
        n[0]
      ), y(a, "fill", "#43434D"), y(
        c,
        "d",
        /*d*/
        n[0]
      ), y(c, "fill", "url(#room-material-pattern-1)"), y(
        d,
        "d",
        /*d*/
        n[0]
      ), y(d, "fill", "url(#room-material-pattern-2)");
    },
    m(f, g) {
      X(f, t, g), R(t, e), R(e, i), R(t, s), R(s, r), X(f, o, g), X(f, a, g), X(f, l, g), X(f, c, g), X(f, h, g), X(f, d, g);
    },
    p(f, [g]) {
      g & /*d*/
      1 && y(
        a,
        "d",
        /*d*/
        f[0]
      ), g & /*d*/
      1 && y(
        c,
        "d",
        /*d*/
        f[0]
      ), g & /*d*/
      1 && y(
        d,
        "d",
        /*d*/
        f[0]
      );
    },
    i: se,
    o: se,
    d(f) {
      f && U(t), f && U(o), f && U(a), f && U(l), f && U(c), f && U(h), f && U(d);
    }
  };
}
function r2(n, t, e) {
  let i, { path: s } = t;
  return n.$$set = (r) => {
    "path" in r && e(1, s = r.path);
  }, n.$$.update = () => {
    n.$$.dirty & /*path*/
    2 && e(0, i = Wn(s, { needZ: !0 }));
  }, [i, s];
}
class o2 extends Ie {
  constructor(t) {
    super(), Ce(this, t, r2, s2, Pe, { path: 1 });
  }
}
function a2(n) {
  let t;
  return {
    c() {
      t = be("path"), y(
        t,
        "d",
        /*mergedPath*/
        n[0]
      ), y(t, "fill", "#969696"), y(t, "stroke", "#969696"), y(t, "stroke-width", "1"), y(t, "fill-rule", "evenodd");
    },
    m(e, i) {
      X(e, t, i);
    },
    p: se,
    i: se,
    o: se,
    d(e) {
      e && U(t);
    }
  };
}
function l2(n, t, e) {
  let { dimension: i } = t;
  const s = Wn(
    [
      {
        x: i.vertical[1].x,
        y: i.vertical[1].y + 53
      },
      {
        x: i.vertical[1].x - 60,
        y: i.vertical[1].y + 124
      },
      {
        x: i.vertical[1].x + 60,
        y: i.vertical[1].y + 124
      }
    ],
    { needZ: !0 }
  ), r = Wn(
    [
      {
        x: i.vertical[0].x,
        y: i.vertical[0].y - 53
      },
      {
        x: i.vertical[0].x - 60,
        y: i.vertical[0].y - 124
      },
      {
        x: i.vertical[0].x + 60,
        y: i.vertical[0].y - 124
      }
    ],
    { needZ: !0 }
  ), o = Wn(
    [
      {
        x: i.horizontal[0].x + 53,
        y: i.horizontal[0].y
      },
      {
        x: i.horizontal[0].x + 124,
        y: i.horizontal[0].y + 60
      },
      {
        x: i.horizontal[0].x + 124,
        y: i.horizontal[0].y - 60
      }
    ],
    { needZ: !0 }
  ), a = Wn(
    [
      {
        x: i.horizontal[1].x - 53,
        y: i.horizontal[1].y
      },
      {
        x: i.horizontal[1].x - 124,
        y: i.horizontal[1].y + 60
      },
      {
        x: i.horizontal[1].x - 124,
        y: i.horizontal[1].y - 60
      }
    ],
    { needZ: !0 }
  ), l = `${s} ${r} ${o} ${a}`;
  return n.$$set = (c) => {
    "dimension" in c && e(1, i = c.dimension);
  }, [l, i];
}
class c2 extends Ie {
  constructor(t) {
    super(), Ce(this, t, l2, a2, Pe, { dimension: 1 });
  }
}
function h2(n) {
  De(n, "svelte-1dykexu", ".floorplan-plugin__room-material.svelte-1dykexu{position:absolute;left:0;top:0;width:100%;height:100%}svg.svelte-1dykexu{position:absolute;left:0;top:0;width:100%;height:100%;overflow:visible}");
}
function Au(n, t, e) {
  const i = n.slice();
  return i[8] = t[e], i;
}
function d2(n) {
  let t, e;
  return t = new n2({ props: { path: (
    /*room*/
    n[8].path
  ) } }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*rooms*/
      1 && (r.path = /*room*/
      i[8].path), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function u2(n) {
  let t, e;
  return t = new o2({ props: { path: (
    /*room*/
    n[8].path
  ) } }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*rooms*/
      1 && (r.path = /*room*/
      i[8].path), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function f2(n) {
  let t, e;
  return t = new e2({ props: { path: (
    /*room*/
    n[8].path
  ) } }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*rooms*/
      1 && (r.path = /*room*/
      i[8].path), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function bu(n) {
  let t, e, i;
  return e = new c2({
    props: { dimension: (
      /*room*/
      n[8].dimension
    ) }
  }), {
    c() {
      t = be("svg"), ve(e.$$.fragment), y(t, "width", "100%"), y(t, "height", "100%"), y(t, "viewBox", `0 0 ${/*boundingWidth*/
      n[1]} ${/*boundingHeight*/
      n[2]}`), y(t, "class", "svelte-1dykexu");
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), i = !0;
    },
    p(s, r) {
      const o = {};
      r & /*rooms*/
      1 && (o.dimension = /*room*/
      s[8].dimension), e.$set(o);
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e);
    }
  };
}
function yu(n) {
  let t, e, i, s, r = (
    /*allowShowArrow*/
    n[3] && /*room*/
    n[8].dimension && Array.isArray(
      /*room*/
      n[8].dimension.vertical
    ) && /*room*/
    n[8].dimension.vertical.length > 0 && Array.isArray(
      /*room*/
      n[8].dimension.horizontal
    ) && /*room*/
    n[8].dimension.horizontal.length > 0
  ), o, a;
  const l = [f2, u2, d2], c = [];
  function h(f, g) {
    return (
      /*room*/
      f[8].floorType === 1 ? 0 : (
        /*room*/
        f[8].floorType === 0 ? 1 : 2
      )
    );
  }
  e = h(n), i = c[e] = l[e](n);
  let d = r && bu(n);
  return {
    c() {
      t = be("svg"), i.c(), s = oe(), d && d.c(), o = Fe(), y(t, "width", "100%"), y(t, "height", "100%"), y(t, "viewBox", `0 0 ${/*boundingWidth*/
      n[1]} ${/*boundingHeight*/
      n[2]}`), y(t, "class", "svelte-1dykexu");
    },
    m(f, g) {
      X(f, t, g), c[e].m(t, null), X(f, s, g), d && d.m(f, g), X(f, o, g), a = !0;
    },
    p(f, g) {
      let p = e;
      e = h(f), e === p ? c[e].p(f, g) : (Me(), Y(c[p], 1, 1, () => {
        c[p] = null;
      }), ke(), i = c[e], i ? i.p(f, g) : (i = c[e] = l[e](f), i.c()), F(i, 1), i.m(t, null)), g & /*rooms*/
      1 && (r = /*allowShowArrow*/
      f[3] && /*room*/
      f[8].dimension && Array.isArray(
        /*room*/
        f[8].dimension.vertical
      ) && /*room*/
      f[8].dimension.vertical.length > 0 && Array.isArray(
        /*room*/
        f[8].dimension.horizontal
      ) && /*room*/
      f[8].dimension.horizontal.length > 0), r ? d ? (d.p(f, g), g & /*rooms*/
      1 && F(d, 1)) : (d = bu(f), d.c(), F(d, 1), d.m(o.parentNode, o)) : d && (Me(), Y(d, 1, 1, () => {
        d = null;
      }), ke());
    },
    i(f) {
      a || (F(i), F(d), a = !0);
    },
    o(f) {
      Y(i), Y(d), a = !1;
    },
    d(f) {
      f && U(t), c[e].d(), f && U(s), d && d.d(f), f && U(o);
    }
  };
}
function p2(n) {
  let t, e, i = (
    /*rooms*/
    n[0]
  ), s = [];
  for (let o = 0; o < i.length; o += 1)
    s[o] = yu(Au(n, i, o));
  const r = (o) => Y(s[o], 1, 1, () => {
    s[o] = null;
  });
  return {
    c() {
      t = W("div");
      for (let o = 0; o < s.length; o += 1)
        s[o].c();
      y(t, "class", "floorplan-plugin__room-material svelte-1dykexu");
    },
    m(o, a) {
      X(o, t, a);
      for (let l = 0; l < s.length; l += 1)
        s[l] && s[l].m(t, null);
      e = !0;
    },
    p(o, [a]) {
      if (a & /*boundingWidth, boundingHeight, rooms, allowShowArrow, Array*/
      15) {
        i = /*rooms*/
        o[0];
        let l;
        for (l = 0; l < i.length; l += 1) {
          const c = Au(o, i, l);
          s[l] ? (s[l].p(c, a), F(s[l], 1)) : (s[l] = yu(c), s[l].c(), F(s[l], 1), s[l].m(t, null));
        }
        for (Me(), l = i.length; l < s.length; l += 1)
          r(l);
        ke();
      }
    },
    i(o) {
      if (!e) {
        for (let a = 0; a < i.length; a += 1)
          F(s[a]);
        e = !0;
      }
    },
    o(o) {
      s = s.filter(Boolean);
      for (let a = 0; a < s.length; a += 1)
        Y(s[a]);
      e = !1;
    },
    d(o) {
      o && U(t), pi(s, o);
    }
  };
}
function m2(n, t, e) {
  let i, { roomLabelsEnable: s } = t, { roomDimensionEnable: r } = t, { floorIndex: o } = t, { floorplanData: a } = t;
  const l = a.bounding.max.x - a.bounding.min.x, c = a.bounding.max.y - a.bounding.min.y, h = s && r;
  return n.$$set = (d) => {
    "roomLabelsEnable" in d && e(4, s = d.roomLabelsEnable), "roomDimensionEnable" in d && e(5, r = d.roomDimensionEnable), "floorIndex" in d && e(6, o = d.floorIndex), "floorplanData" in d && e(7, a = d.floorplanData);
  }, n.$$.update = () => {
    n.$$.dirty & /*floorplanData, floorIndex*/
    192 && e(0, i = a.floorDatas[o].rooms.map((d) => de(_({}, d), {
      path: d.path.map((f) => b0(f, a.bounding))
    })));
  }, [
    i,
    l,
    c,
    h,
    s,
    r,
    o,
    a
  ];
}
class g2 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      m2,
      p2,
      Pe,
      {
        roomLabelsEnable: 4,
        roomDimensionEnable: 5,
        floorIndex: 6,
        floorplanData: 7
      },
      h2
    );
  }
}
function v2(n) {
  De(n, "svelte-qq2273", "path.svelte-qq2273{--opacity:0;opacity:var(--opacity)}path.svelte-qq2273:hover{opacity:calc(var(--opacity) + 0.1)}");
}
function A2(n) {
  let t, e, i, s;
  return {
    c() {
      t = be("path"), y(
        t,
        "d",
        /*_pathD*/
        n[5]
      ), y(t, "fill", "#fff"), y(
        t,
        "style",
        /*style*/
        n[2]
      ), y(t, "id", e = `${/*floorIndex*/
      n[1]}_${/*room*/
      n[0].id}`), y(t, "class", "svelte-qq2273");
    },
    m(r, o) {
      X(r, t, o), i || (s = [
        Oe(
          t,
          "mouseenter",
          /*onMouseEnter*/
          n[3]
        ),
        Oe(
          t,
          "mouseleave",
          /*onMouseLeave*/
          n[4]
        )
      ], i = !0);
    },
    p(r, [o]) {
      o & /*style*/
      4 && y(
        t,
        "style",
        /*style*/
        r[2]
      ), o & /*floorIndex, room*/
      3 && e !== (e = `${/*floorIndex*/
      r[1]}_${/*room*/
      r[0].id}`) && y(t, "id", e);
    },
    i: se,
    o: se,
    d(r) {
      r && U(t), i = !1, vt(s);
    }
  };
}
function b2(n, t, e) {
  let i, s, { room: r } = t, { floorIndex: o } = t, { floorplanData: a } = t, { highlightData: l } = t, { hoveredRoom: c } = t;
  function h() {
    c == null || c.set(r);
  }
  function d() {
    c == null || c.set(void 0);
  }
  const { bounding: f } = a, g = Wn(r.path, {
    needZ: !0,
    format: (p) => b0(p, f)
  });
  return n.$$set = (p) => {
    "room" in p && e(0, r = p.room), "floorIndex" in p && e(1, o = p.floorIndex), "floorplanData" in p && e(6, a = p.floorplanData), "highlightData" in p && e(7, l = p.highlightData), "hoveredRoom" in p && e(8, c = p.hoveredRoom);
  }, n.$$.update = () => {
    n.$$.dirty & /*highlightData, floorIndex, room*/
    131 && e(9, i = l[`${o}_${r.id}`]), n.$$.dirty & /*highlight*/
    512 && e(2, s = i ? `fill: ${i.color}; --opacity: ${i.opacity}; pointer-events: ${i.disabled ? "none" : "auto"}` : null);
  }, [
    r,
    o,
    s,
    h,
    d,
    g,
    a,
    l,
    c,
    i
  ];
}
class y2 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      b2,
      A2,
      Pe,
      {
        room: 0,
        floorIndex: 1,
        floorplanData: 6,
        highlightData: 7,
        hoveredRoom: 8
      },
      v2
    );
  }
}
function w2(n) {
  De(n, "svelte-1kqo6e4", ".floorplan-plugin__room-highlight.svelte-1kqo6e4{position:absolute;width:100%;height:100%}svg.svelte-1kqo6e4{width:100%;height:100%;overflow:visible}");
}
function wu(n, t, e) {
  const i = n.slice();
  return i[6] = t[e], i;
}
function Pu(n, t) {
  let e, i, s;
  const r = [
    {
      room: (
        /*room*/
        t[6]
      ),
      floorplanData: (
        /*floorplanData*/
        t[1]
      ),
      hoveredRoom: (
        /*hoveredRoom*/
        t[3]
      ),
      floorIndex: (
        /*floorIndex*/
        t[0]
      ),
      highlightData: (
        /*highlightData*/
        t[2]
      )
    }
  ];
  let o = {};
  for (let a = 0; a < r.length; a += 1)
    o = St(o, r[a]);
  return i = new y2({ props: o }), {
    key: n,
    first: null,
    c() {
      e = Fe(), ve(i.$$.fragment), this.first = e;
    },
    m(a, l) {
      X(a, e, l), me(i, a, l), s = !0;
    },
    p(a, l) {
      t = a;
      const c = l & /*floorplanData, floorIndex, hoveredRoom, highlightData*/
      15 ? Lt(r, [
        {
          room: (
            /*room*/
            t[6]
          ),
          floorplanData: (
            /*floorplanData*/
            t[1]
          ),
          hoveredRoom: (
            /*hoveredRoom*/
            t[3]
          ),
          floorIndex: (
            /*floorIndex*/
            t[0]
          ),
          highlightData: (
            /*highlightData*/
            t[2]
          )
        }
      ]) : {};
      i.$set(c);
    },
    i(a) {
      s || (F(i.$$.fragment, a), s = !0);
    },
    o(a) {
      Y(i.$$.fragment, a), s = !1;
    },
    d(a) {
      a && U(e), ge(i, a);
    }
  };
}
function P2(n) {
  let t, e, i = [], s = /* @__PURE__ */ new Map(), r, o = (
    /*floorplanData*/
    n[1].floorDatas[
      /*floorIndex*/
      n[0]
    ].rooms
  );
  const a = (l) => (
    /*room*/
    l[6].id
  );
  for (let l = 0; l < o.length; l += 1) {
    let c = wu(n, o, l), h = a(c);
    s.set(h, i[l] = Pu(h, c));
  }
  return {
    c() {
      t = W("div"), e = be("svg");
      for (let l = 0; l < i.length; l += 1)
        i[l].c();
      y(e, "width", "100%"), y(e, "height", "100%"), y(e, "viewBox", `0 0 ${/*boundingWidth*/
      n[4]} ${/*boundingHeight*/
      n[5]}`), y(e, "class", "svelte-1kqo6e4"), y(t, "class", "floorplan-plugin__room-highlight svelte-1kqo6e4");
    },
    m(l, c) {
      X(l, t, c), R(t, e);
      for (let h = 0; h < i.length; h += 1)
        i[h] && i[h].m(e, null);
      r = !0;
    },
    p(l, [c]) {
      c & /*floorplanData, floorIndex, hoveredRoom, highlightData*/
      15 && (o = /*floorplanData*/
      l[1].floorDatas[
        /*floorIndex*/
        l[0]
      ].rooms, Me(), i = Ei(i, c, a, 1, l, o, s, e, yn, Pu, null, wu), ke());
    },
    i(l) {
      if (!r) {
        for (let c = 0; c < o.length; c += 1)
          F(i[c]);
        r = !0;
      }
    },
    o(l) {
      for (let c = 0; c < i.length; c += 1)
        Y(i[c]);
      r = !1;
    },
    d(l) {
      l && U(t);
      for (let c = 0; c < i.length; c += 1)
        i[c].d();
    }
  };
}
function C2(n, t, e) {
  let { floorIndex: i } = t, { floorplanData: s } = t, { highlightData: r } = t, { hoveredRoom: o } = t;
  const a = s.bounding.max.x - s.bounding.min.x, l = s.bounding.max.y - s.bounding.min.y;
  return n.$$set = (c) => {
    "floorIndex" in c && e(0, i = c.floorIndex), "floorplanData" in c && e(1, s = c.floorplanData), "highlightData" in c && e(2, r = c.highlightData), "hoveredRoom" in c && e(3, o = c.hoveredRoom);
  }, [
    i,
    s,
    r,
    o,
    a,
    l
  ];
}
class y0 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      C2,
      P2,
      Pe,
      {
        floorIndex: 0,
        floorplanData: 1,
        highlightData: 2,
        hoveredRoom: 3
      },
      w2
    );
  }
}
function I2(n) {
  De(n, "svelte-3vzs9z", ".missing-floor.svelte-3vzs9z{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;flex-direction:column;align-items:center}.text.svelte-3vzs9z{margin-top:0.75rem;color:#fff;opacity:0.3;white-space:nowrap}");
}
function Cu(n) {
  let t, e = (
    /*missingFloorConfig*/
    n[0].text + ""
  ), i;
  return {
    c() {
      t = W("span"), i = je(e), y(t, "class", "text svelte-3vzs9z"), Q(
        t,
        "font-size",
        /*missingFloorConfig*/
        n[0].textFontSize + "px"
      );
    },
    m(s, r) {
      X(s, t, r), R(t, i);
    },
    p(s, r) {
      r & /*missingFloorConfig*/
      1 && e !== (e = /*missingFloorConfig*/
      s[0].text + "") && He(i, e), r & /*missingFloorConfig*/
      1 && Q(
        t,
        "font-size",
        /*missingFloorConfig*/
        s[0].textFontSize + "px"
      );
    },
    d(s) {
      s && U(t);
    }
  };
}
function E2(n) {
  let t, e, i, s, r = (
    /*missingFloorConfig*/
    n[0].text && Cu(n)
  );
  return {
    c() {
      t = W("div"), e = W("img"), s = oe(), r && r.c(), y(e, "class", "image"), y(e, "alt", "缺省楼层展位图"), pt(e.src, i = /*missingFloorConfig*/
      n[0].imageURL) || y(e, "src", i), Q(
        e,
        "width",
        /*missingFloorConfig*/
        n[0].imageWidth + "px"
      ), Q(
        e,
        "height",
        /*missingFloorConfig*/
        n[0].imageHeight + "px"
      ), Q(e, "max-width", "none"), y(t, "class", "missing-floor svelte-3vzs9z");
    },
    m(o, a) {
      X(o, t, a), R(t, e), R(t, s), r && r.m(t, null);
    },
    p(o, [a]) {
      a & /*missingFloorConfig*/
      1 && !pt(e.src, i = /*missingFloorConfig*/
      o[0].imageURL) && y(e, "src", i), a & /*missingFloorConfig*/
      1 && Q(
        e,
        "width",
        /*missingFloorConfig*/
        o[0].imageWidth + "px"
      ), a & /*missingFloorConfig*/
      1 && Q(
        e,
        "height",
        /*missingFloorConfig*/
        o[0].imageHeight + "px"
      ), /*missingFloorConfig*/
      o[0].text ? r ? r.p(o, a) : (r = Cu(o), r.c(), r.m(t, null)) : r && (r.d(1), r = null);
    },
    i: se,
    o: se,
    d(o) {
      o && U(t), r && r.d();
    }
  };
}
function M2(n, t, e) {
  let { missingFloorConfig: i } = t;
  return n.$$set = (s) => {
    "missingFloorConfig" in s && e(0, i = s.missingFloorConfig);
  }, [i];
}
class k2 extends Ie {
  constructor(t) {
    super(), Ce(this, t, M2, E2, Pe, { missingFloorConfig: 0 }, I2);
  }
}
const $n = "data:image/png;base64,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";
function Al(n) {
  return n * 180 / Math.PI;
}
function x2(n) {
  De(n, "svelte-17hhq1b", ".floorplan__camera-position.svelte-17hhq1b{pointer-events:none;position:absolute;width:0;height:0}.floorplan__camera-rotate.svelte-17hhq1b{position:absolute;background-repeat:no-repeat;background-size:100%}");
}
function D2(n) {
  let t, e;
  return {
    c() {
      t = W("div"), e = W("div"), y(e, "class", "floorplan__camera-rotate svelte-17hhq1b"), Q(e, "background-image", `url(${/*cameraImageUrl*/
      n[0] || $n})`), Q(
        e,
        "width",
        /*domSizeStyle*/
        n[4]
      ), Q(
        e,
        "height",
        /*domSizeStyle*/
        n[4]
      ), Q(e, "left", "-" + /*domSizeStyle*/
      n[4]), Q(e, "top", "-" + /*domSizeStyle*/
      n[4]), Q(e, "transform", `rotate(${/*rotate*/
      n[3]}deg)`), Q(e, "transform-origin", `${/*domSizeStyle*/
      n[4]} ${/*domSizeStyle*/
      n[4]}`), y(t, "class", "floorplan__camera-position svelte-17hhq1b"), Q(
        t,
        "left",
        /*positionLeft*/
        n[1]
      ), Q(
        t,
        "top",
        /*positionTop*/
        n[2]
      );
    },
    m(i, s) {
      X(i, t, s), R(t, e);
    },
    p(i, [s]) {
      s & /*cameraImageUrl*/
      1 && Q(e, "background-image", `url(${/*cameraImageUrl*/
      i[0] || $n})`);
      const r = s & /*cameraImageUrl*/
      1;
      r && Q(
        e,
        "width",
        /*domSizeStyle*/
        i[4]
      ), r && Q(
        e,
        "height",
        /*domSizeStyle*/
        i[4]
      ), r && Q(e, "left", "-" + /*domSizeStyle*/
      i[4]), r && Q(e, "top", "-" + /*domSizeStyle*/
      i[4]), r && Q(e, "transform", `rotate(${/*rotate*/
      i[3]}deg)`), r && Q(e, "transform-origin", `${/*domSizeStyle*/
      i[4]} ${/*domSizeStyle*/
      i[4]}`);
    },
    i: se,
    o: se,
    d(i) {
      i && U(t);
    }
  };
}
function S2(n, t, e) {
  let { panoIndex: i } = t, { floorplanData: s } = t, { lastPanoramaLongitude: r } = t, { cameraImageUrl: o } = t;
  const { observers: a } = s, l = a[i], c = l.positionInImage.x, h = l.positionInImage.y, d = c * 100 + "%", f = h * 100 + "%", g = -Al(r) + 45, p = document.body.clientWidth, m = document.body.clientHeight, b = `${(p < 500 || m < 500 ? 17 : 37) / 16}rem`;
  return n.$$set = (w) => {
    "panoIndex" in w && e(5, i = w.panoIndex), "floorplanData" in w && e(6, s = w.floorplanData), "lastPanoramaLongitude" in w && e(7, r = w.lastPanoramaLongitude), "cameraImageUrl" in w && e(0, o = w.cameraImageUrl);
  }, [
    o,
    d,
    f,
    g,
    b,
    i,
    s,
    r
  ];
}
let T2 = class extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      S2,
      D2,
      Pe,
      {
        panoIndex: 5,
        floorplanData: 6,
        lastPanoramaLongitude: 7,
        cameraImageUrl: 0
      },
      x2
    );
  }
};
const L2 = "data:image/png;base64,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";
function z2(n) {
  De(n, "svelte-rpkaro", ".floorplan-plugin__compass.svelte-rpkaro{position:absolute;left:50%;top:-2.875rem;width:14.4375rem;height:2.5625rem;will-change:opacity;transform-origin:center 11.5rem}.floorplan-plugin__compass-image.svelte-rpkaro{width:100%;height:100%;position:absolute;left:0;top:0;opacity:0.1;background-repeat:no-repeat;background-size:100% 100%}.floorplan-plugin__compass-text.svelte-rpkaro{position:absolute;left:50%;top:0.9375rem;transform:translateX(-50%);opacity:0.2;font-weight:bold;font-size:0.625rem;color:#fff}");
}
function O2(n) {
  let t, e, i, s, r;
  return {
    c() {
      t = W("div"), e = W("div"), i = oe(), s = W("span"), r = je(
        /*northDesc*/
        n[0]
      ), y(e, "class", "floorplan-plugin__compass-image svelte-rpkaro"), Q(e, "background-image", `url(${L2})`), y(s, "class", "floorplan-plugin__compass-text svelte-rpkaro"), y(t, "class", "floorplan-plugin__compass svelte-rpkaro"), Q(
        t,
        "transform",
        /*compassTransformStyle*/
        n[2]
      );
    },
    m(o, a) {
      X(o, t, a), R(t, e), R(t, i), R(t, s), R(s, r);
    },
    p(o, a) {
      a & /*northDesc*/
      1 && He(
        r,
        /*northDesc*/
        o[0]
      );
    },
    d(o) {
      o && U(t);
    }
  };
}
function j2(n) {
  let t, e = (
    /*canCompassShow*/
    n[1] && O2(n)
  );
  return {
    c() {
      e && e.c(), t = Fe();
    },
    m(i, s) {
      e && e.m(i, s), X(i, t, s);
    },
    p(i, [s]) {
      /*canCompassShow*/
      i[1] && e.p(i, s);
    },
    i: se,
    o: se,
    d(i) {
      e && e.d(i), i && U(t);
    }
  };
}
function R2(n, t, e) {
  var c;
  let { floorplanData: i } = t, { northDesc: s } = t;
  const r = (c = i.entrance) == null ? void 0 : c.northRad, o = typeof r == "number", l = `translateX(-50%) translateZ(10px) rotate(${-(r ? Al(r) : 0) + 90}deg)`;
  return n.$$set = (h) => {
    "floorplanData" in h && e(3, i = h.floorplanData), "northDesc" in h && e(0, s = h.northDesc);
  }, [s, o, l, i];
}
class B2 extends Ie {
  constructor(t) {
    super(), Ce(this, t, R2, j2, Pe, { floorplanData: 3, northDesc: 0 }, z2);
  }
}
function V2(n) {
  De(n, "svelte-bl8zrz", ".floorplan-plugin__floor.svelte-bl8zrz{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;pointer-events:none}.floorplan-plugin__floor--is-current.svelte-bl8zrz{opacity:1;pointer-events:auto}");
}
function _2(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f;
  const g = [
    {
      floorIndex: (
        /*floorIndex*/
        n[2]
      ),
      floorplanData: (
        /*floorplanData*/
        n[12]
      ),
      roomLabelsEnable: (
        /*roomLabelsEnable*/
        n[6]
      ),
      roomDimensionEnable: (
        /*roomDimensionEnable*/
        n[10]
      )
    }
  ];
  let p = {};
  for (let z = 0; z < g.length; z += 1)
    p = St(p, g[z]);
  t = new g2({ props: p });
  let m = (
    /*highlightEnable*/
    (n[3] || /*hoverEnable*/
    n[5]) && Iu(n)
  );
  const v = [
    {
      floorplanData: (
        /*floorplanData*/
        n[12]
      ),
      floorIndex: (
        /*floorIndex*/
        n[2]
      )
    }
  ];
  let b = {};
  for (let z = 0; z < v.length; z += 1)
    b = St(b, v[z]);
  s = new A0({ props: b });
  const w = [
    {
      floorplanData: (
        /*floorplanData*/
        n[12]
      ),
      floorIndex: (
        /*floorIndex*/
        n[2]
      )
    }
  ];
  let x = {};
  for (let z = 0; z < w.length; z += 1)
    x = St(x, w[z]);
  o = new Dw({ props: x });
  let k = (
    /*roomLabelsEnable*/
    n[6] && Eu(n)
  ), T = (
    /*ruleLabelsEnable*/
    n[11] && Mu(n)
  ), S = (
    /*cameraEnable*/
    n[4] && ku(n)
  ), V = (
    /*compassEnable*/
    n[23] && xu(n)
  );
  return {
    c() {
      ve(t.$$.fragment), e = oe(), m && m.c(), i = oe(), ve(s.$$.fragment), r = oe(), ve(o.$$.fragment), a = oe(), k && k.c(), l = oe(), T && T.c(), c = oe(), S && S.c(), h = oe(), V && V.c(), d = Fe();
    },
    m(z, O) {
      me(t, z, O), X(z, e, O), m && m.m(z, O), X(z, i, O), me(s, z, O), X(z, r, O), me(o, z, O), X(z, a, O), k && k.m(z, O), X(z, l, O), T && T.m(z, O), X(z, c, O), S && S.m(z, O), X(z, h, O), V && V.m(z, O), X(z, d, O), f = !0;
    },
    p(z, O) {
      const A = O & /*floorIndex, floorplanData, roomLabelsEnable, roomDimensionEnable*/
      5188 ? Lt(g, [
        {
          floorIndex: (
            /*floorIndex*/
            z[2]
          ),
          floorplanData: (
            /*floorplanData*/
            z[12]
          ),
          roomLabelsEnable: (
            /*roomLabelsEnable*/
            z[6]
          ),
          roomDimensionEnable: (
            /*roomDimensionEnable*/
            z[10]
          )
        }
      ]) : {};
      t.$set(A), /*highlightEnable*/
      z[3] || /*hoverEnable*/
      z[5] ? m ? (m.p(z, O), O & /*highlightEnable, hoverEnable*/
      40 && F(m, 1)) : (m = Iu(z), m.c(), F(m, 1), m.m(i.parentNode, i)) : m && (Me(), Y(m, 1, 1, () => {
        m = null;
      }), ke());
      const C = O & /*floorplanData, floorIndex*/
      4100 ? Lt(v, [
        {
          floorplanData: (
            /*floorplanData*/
            z[12]
          ),
          floorIndex: (
            /*floorIndex*/
            z[2]
          )
        }
      ]) : {};
      s.$set(C);
      const I = O & /*floorplanData, floorIndex*/
      4100 ? Lt(w, [
        {
          floorplanData: (
            /*floorplanData*/
            z[12]
          ),
          floorIndex: (
            /*floorIndex*/
            z[2]
          )
        }
      ]) : {};
      o.$set(I), /*roomLabelsEnable*/
      z[6] ? k ? (k.p(z, O), O & /*roomLabelsEnable*/
      64 && F(k, 1)) : (k = Eu(z), k.c(), F(k, 1), k.m(l.parentNode, l)) : k && (Me(), Y(k, 1, 1, () => {
        k = null;
      }), ke()), /*ruleLabelsEnable*/
      z[11] ? T ? (T.p(z, O), O & /*ruleLabelsEnable*/
      2048 && F(T, 1)) : (T = Mu(z), T.c(), F(T, 1), T.m(c.parentNode, c)) : T && (Me(), Y(T, 1, 1, () => {
        T = null;
      }), ke()), /*cameraEnable*/
      z[4] ? S ? (S.p(z, O), O & /*cameraEnable*/
      16 && F(S, 1)) : (S = ku(z), S.c(), F(S, 1), S.m(h.parentNode, h)) : S && (Me(), Y(S, 1, 1, () => {
        S = null;
      }), ke()), /*compassEnable*/
      z[23] ? V ? (V.p(z, O), O & /*compassEnable*/
      8388608 && F(V, 1)) : (V = xu(z), V.c(), F(V, 1), V.m(d.parentNode, d)) : V && (Me(), Y(V, 1, 1, () => {
        V = null;
      }), ke());
    },
    i(z) {
      f || (F(t.$$.fragment, z), F(m), F(s.$$.fragment, z), F(o.$$.fragment, z), F(k), F(T), F(S), F(V), f = !0);
    },
    o(z) {
      Y(t.$$.fragment, z), Y(m), Y(s.$$.fragment, z), Y(o.$$.fragment, z), Y(k), Y(T), Y(S), Y(V), f = !1;
    },
    d(z) {
      ge(t, z), z && U(e), m && m.d(z), z && U(i), ge(s, z), z && U(r), ge(o, z), z && U(a), k && k.d(z), z && U(l), T && T.d(z), z && U(c), S && S.d(z), z && U(h), V && V.d(z), z && U(d);
    }
  };
}
function H2(n) {
  let t, e;
  return t = new k2({
    props: {
      missingFloorConfig: (
        /*missingFloorConfig*/
        n[19]
      )
    }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*missingFloorConfig*/
      524288 && (r.missingFloorConfig = /*missingFloorConfig*/
      i[19]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function Iu(n) {
  let t, e;
  const i = [
    {
      floorIndex: (
        /*floorIndex*/
        n[2]
      ),
      floorplanData: (
        /*floorplanData*/
        n[12]
      ),
      hoveredRoom: (
        /*hoveredRoom*/
        n[25]
      ),
      highlightData: (
        /*highlightData*/
        n[18]
      )
    }
  ];
  let s = {};
  for (let r = 0; r < i.length; r += 1)
    s = St(s, i[r]);
  return t = new y0({ props: s }), {
    c() {
      ve(t.$$.fragment);
    },
    m(r, o) {
      me(t, r, o), e = !0;
    },
    p(r, o) {
      const a = o & /*floorIndex, floorplanData, hoveredRoom, highlightData*/
      33820676 ? Lt(i, [
        {
          floorIndex: (
            /*floorIndex*/
            r[2]
          ),
          floorplanData: (
            /*floorplanData*/
            r[12]
          ),
          hoveredRoom: (
            /*hoveredRoom*/
            r[25]
          ),
          highlightData: (
            /*highlightData*/
            r[18]
          )
        }
      ]) : {};
      t.$set(a);
    },
    i(r) {
      e || (F(t.$$.fragment, r), e = !0);
    },
    o(r) {
      Y(t.$$.fragment, r), e = !1;
    },
    d(r) {
      ge(t, r);
    }
  };
}
function Eu(n) {
  let t, e;
  const i = [
    {
      floorplanData: (
        /*floorplanData*/
        n[12]
      ),
      roomAreaEnable: (
        /*roomAreaEnable*/
        n[7]
      ),
      roomNameEnable: (
        /*roomNameEnable*/
        n[8]
      ),
      roomNameOtherTypeEnable: (
        /*roomNameOtherTypeEnable*/
        n[9]
      ),
      roomDimensionEnable: (
        /*roomDimensionEnable*/
        n[10]
      ),
      floorIndex: (
        /*floorIndex*/
        n[2]
      ),
      getRoomAreaText: (
        /*getRoomAreaText*/
        n[13]
      ),
      getRoomDimensionText: (
        /*getRoomDimensionText*/
        n[14]
      ),
      getLabelElement: (
        /*getLabelElement*/
        n[15]
      ),
      hoveredRoom: (
        /*hoveredRoom*/
        n[25]
      ),
      adaptiveRoomLabelVisibleEnable: (
        /*adaptiveRoomLabelVisibleEnable*/
        n[17]
      )
    }
  ];
  let s = {};
  for (let r = 0; r < i.length; r += 1)
    s = St(s, i[r]);
  return t = new Hw({ props: s }), {
    c() {
      ve(t.$$.fragment);
    },
    m(r, o) {
      me(t, r, o), e = !0;
    },
    p(r, o) {
      const a = o & /*floorplanData, roomAreaEnable, roomNameEnable, roomNameOtherTypeEnable, roomDimensionEnable, floorIndex, getRoomAreaText, getRoomDimensionText, getLabelElement, hoveredRoom, adaptiveRoomLabelVisibleEnable*/
      33748868 ? Lt(i, [
        {
          floorplanData: (
            /*floorplanData*/
            r[12]
          ),
          roomAreaEnable: (
            /*roomAreaEnable*/
            r[7]
          ),
          roomNameEnable: (
            /*roomNameEnable*/
            r[8]
          ),
          roomNameOtherTypeEnable: (
            /*roomNameOtherTypeEnable*/
            r[9]
          ),
          roomDimensionEnable: (
            /*roomDimensionEnable*/
            r[10]
          ),
          floorIndex: (
            /*floorIndex*/
            r[2]
          ),
          getRoomAreaText: (
            /*getRoomAreaText*/
            r[13]
          ),
          getRoomDimensionText: (
            /*getRoomDimensionText*/
            r[14]
          ),
          getLabelElement: (
            /*getLabelElement*/
            r[15]
          ),
          hoveredRoom: (
            /*hoveredRoom*/
            r[25]
          ),
          adaptiveRoomLabelVisibleEnable: (
            /*adaptiveRoomLabelVisibleEnable*/
            r[17]
          )
        }
      ]) : {};
      t.$set(a);
    },
    i(r) {
      e || (F(t.$$.fragment, r), e = !0);
    },
    o(r) {
      Y(t.$$.fragment, r), e = !1;
    },
    d(r) {
      ge(t, r);
    }
  };
}
function Mu(n) {
  let t, e;
  const i = [
    {
      floorplanData: (
        /*floorplanData*/
        n[12]
      ),
      floorIndex: (
        /*floorIndex*/
        n[2]
      ),
      getRuleDistanceText: (
        /*getRuleDistanceText*/
        n[16]
      )
    }
  ];
  let s = {};
  for (let r = 0; r < i.length; r += 1)
    s = St(s, i[r]);
  return t = new Yw({ props: s }), {
    c() {
      ve(t.$$.fragment);
    },
    m(r, o) {
      me(t, r, o), e = !0;
    },
    p(r, o) {
      const a = o & /*floorplanData, floorIndex, getRuleDistanceText*/
      69636 ? Lt(i, [
        {
          floorplanData: (
            /*floorplanData*/
            r[12]
          ),
          floorIndex: (
            /*floorIndex*/
            r[2]
          ),
          getRuleDistanceText: (
            /*getRuleDistanceText*/
            r[16]
          )
        }
      ]) : {};
      t.$set(a);
    },
    i(r) {
      e || (F(t.$$.fragment, r), e = !0);
    },
    o(r) {
      Y(t.$$.fragment, r), e = !1;
    },
    d(r) {
      ge(t, r);
    }
  };
}
function ku(n) {
  let t, e;
  const i = [
    {
      panoIndex: (
        /*panoIndex*/
        n[0]
      ),
      floorplanData: (
        /*floorplanData*/
        n[12]
      ),
      lastPanoramaLongitude: (
        /*lastPanoramaLongitude*/
        n[20]
      ),
      cameraImageUrl: (
        /*cameraImageUrl*/
        n[21]
      )
    }
  ];
  let s = {};
  for (let r = 0; r < i.length; r += 1)
    s = St(s, i[r]);
  return t = new T2({ props: s }), {
    c() {
      ve(t.$$.fragment);
    },
    m(r, o) {
      me(t, r, o), e = !0;
    },
    p(r, o) {
      const a = o & /*panoIndex, floorplanData, lastPanoramaLongitude, cameraImageUrl*/
      3149825 ? Lt(i, [
        {
          panoIndex: (
            /*panoIndex*/
            r[0]
          ),
          floorplanData: (
            /*floorplanData*/
            r[12]
          ),
          lastPanoramaLongitude: (
            /*lastPanoramaLongitude*/
            r[20]
          ),
          cameraImageUrl: (
            /*cameraImageUrl*/
            r[21]
          )
        }
      ]) : {};
      t.$set(a);
    },
    i(r) {
      e || (F(t.$$.fragment, r), e = !0);
    },
    o(r) {
      Y(t.$$.fragment, r), e = !1;
    },
    d(r) {
      ge(t, r);
    }
  };
}
function xu(n) {
  let t, e;
  return t = new B2({
    props: {
      floorplanData: (
        /*floorplanData*/
        n[12]
      ),
      northDesc: (
        /*northDesc*/
        n[22]
      )
    }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*floorplanData*/
      4096 && (r.floorplanData = /*floorplanData*/
      i[12]), s & /*northDesc*/
      4194304 && (r.northDesc = /*northDesc*/
      i[22]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function F2(n) {
  let t, e, i, s, r;
  const o = [H2, _2], a = [];
  function l(c, h) {
    return (
      /*hasCurrentFloorData*/
      c[24] ? 1 : 0
    );
  }
  return e = l(n), i = a[e] = o[e](n), {
    c() {
      t = W("div"), i.c(), y(t, "class", s = bt(`floorplan-plugin__floor${/*isCurrent*/
      n[1] ? " floorplan-plugin__floor--is-current" : ""}`) + " svelte-bl8zrz");
    },
    m(c, h) {
      X(c, t, h), a[e].m(t, null), r = !0;
    },
    p(c, [h]) {
      let d = e;
      e = l(c), e === d ? a[e].p(c, h) : (Me(), Y(a[d], 1, 1, () => {
        a[d] = null;
      }), ke(), i = a[e], i ? i.p(c, h) : (i = a[e] = o[e](c), i.c()), F(i, 1), i.m(t, null)), (!r || h & /*isCurrent*/
      2 && s !== (s = bt(`floorplan-plugin__floor${/*isCurrent*/
      c[1] ? " floorplan-plugin__floor--is-current" : ""}`) + " svelte-bl8zrz")) && y(t, "class", s);
    },
    i(c) {
      r || (F(i), r = !0);
    },
    o(c) {
      Y(i), r = !1;
    },
    d(c) {
      c && U(t), a[e].d();
    }
  };
}
function N2(n, t, e) {
  let i, s, { panoIndex: r } = t, { isCurrent: o } = t, { floorIndex: a } = t, { highlightEnable: l } = t, { cameraEnable: c } = t, { hoverEnable: h } = t, { roomLabelsEnable: d } = t, { roomAreaEnable: f } = t, { roomNameEnable: g } = t, { roomNameOtherTypeEnable: p } = t, { roomDimensionEnable: m } = t, { ruleLabelsEnable: v } = t, { floorplanData: b } = t, { getRoomAreaText: w } = t, { getRoomDimensionText: x } = t, { getLabelElement: k } = t, { getRuleDistanceText: T } = t, { adaptiveRoomLabelVisibleEnable: S } = t, { highlightData: V } = t, { missingFloorConfig: z } = t, { lastPanoramaLongitude: O } = t, { cameraImageUrl: A } = t, { northDesc: C } = t, { compassEnable: I } = t, { store: E = void 0 } = t;
  const D = Bh(void 0);
  return D.subscribe((L) => {
    E && e(26, E.roomOnMouse = L, E);
  }), n.$$set = (L) => {
    "panoIndex" in L && e(0, r = L.panoIndex), "isCurrent" in L && e(1, o = L.isCurrent), "floorIndex" in L && e(2, a = L.floorIndex), "highlightEnable" in L && e(3, l = L.highlightEnable), "cameraEnable" in L && e(4, c = L.cameraEnable), "hoverEnable" in L && e(5, h = L.hoverEnable), "roomLabelsEnable" in L && e(6, d = L.roomLabelsEnable), "roomAreaEnable" in L && e(7, f = L.roomAreaEnable), "roomNameEnable" in L && e(8, g = L.roomNameEnable), "roomNameOtherTypeEnable" in L && e(9, p = L.roomNameOtherTypeEnable), "roomDimensionEnable" in L && e(10, m = L.roomDimensionEnable), "ruleLabelsEnable" in L && e(11, v = L.ruleLabelsEnable), "floorplanData" in L && e(12, b = L.floorplanData), "getRoomAreaText" in L && e(13, w = L.getRoomAreaText), "getRoomDimensionText" in L && e(14, x = L.getRoomDimensionText), "getLabelElement" in L && e(15, k = L.getLabelElement), "getRuleDistanceText" in L && e(16, T = L.getRuleDistanceText), "adaptiveRoomLabelVisibleEnable" in L && e(17, S = L.adaptiveRoomLabelVisibleEnable), "highlightData" in L && e(18, V = L.highlightData), "missingFloorConfig" in L && e(19, z = L.missingFloorConfig), "lastPanoramaLongitude" in L && e(20, O = L.lastPanoramaLongitude), "cameraImageUrl" in L && e(21, A = L.cameraImageUrl), "northDesc" in L && e(22, C = L.northDesc), "compassEnable" in L && e(23, I = L.compassEnable), "store" in L && e(26, E = L.store);
  }, n.$$.update = () => {
    n.$$.dirty & /*floorplanData, floorIndex*/
    4100 && e(27, i = b.floorDatas[a]), n.$$.dirty & /*floorData*/
    134217728 && e(24, s = i.rooms.length > 0 || i.is_has_wall);
  }, [
    r,
    o,
    a,
    l,
    c,
    h,
    d,
    f,
    g,
    p,
    m,
    v,
    b,
    w,
    x,
    k,
    T,
    S,
    V,
    z,
    O,
    A,
    C,
    I,
    s,
    D,
    E,
    i
  ];
}
let G2 = class extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      N2,
      F2,
      Pe,
      {
        panoIndex: 0,
        isCurrent: 1,
        floorIndex: 2,
        highlightEnable: 3,
        cameraEnable: 4,
        hoverEnable: 5,
        roomLabelsEnable: 6,
        roomAreaEnable: 7,
        roomNameEnable: 8,
        roomNameOtherTypeEnable: 9,
        roomDimensionEnable: 10,
        ruleLabelsEnable: 11,
        floorplanData: 12,
        getRoomAreaText: 13,
        getRoomDimensionText: 14,
        getLabelElement: 15,
        getRuleDistanceText: 16,
        adaptiveRoomLabelVisibleEnable: 17,
        highlightData: 18,
        missingFloorConfig: 19,
        lastPanoramaLongitude: 20,
        cameraImageUrl: 21,
        northDesc: 22,
        compassEnable: 23,
        store: 26
      },
      V2
    );
  }
};
function W2(n) {
  De(n, "svelte-86bqav", ".floorplan-main.svelte-86bqav{width:100%;height:100%;pointer-events:none}");
}
function Du(n, t, e) {
  const i = n.slice();
  return i[26] = t[e], i;
}
function Su(n) {
  let t, e, i, s = (
    /*floorplanData*/
    n[15].floorDatas
  ), r = [];
  for (let a = 0; a < s.length; a += 1)
    r[a] = Tu(Du(n, s, a));
  const o = (a) => Y(r[a], 1, 1, () => {
    r[a] = null;
  });
  return {
    c() {
      t = W("div");
      for (let a = 0; a < r.length; a += 1)
        r[a].c();
      y(t, "class", "floorplan-main svelte-86bqav");
    },
    m(a, l) {
      X(a, t, l);
      for (let c = 0; c < r.length; c += 1)
        r[c] && r[c].m(t, null);
      i = !0;
    },
    p(a, l) {
      if (n = a, l & /*hoverEnable, highlightEnable, floorplanData, getRoomAreaText, getRoomDimensionText, getLabelElement, getRuleDistanceText, roomLabelsEnable, roomAreaEnable, roomNameEnable, roomNameOtherTypeEnable, roomDimensionEnable, ruleLabelsEnable, adaptiveRoomLabelVisibleEnable, highlightData, missingFloorConfig, panoIndex, cameraEnable, cameraImageUrl, lastPanoramaLongitude, compassEnable, northDesc, store, floorIndex*/
      67108860) {
        s = /*floorplanData*/
        n[15].floorDatas;
        let c;
        for (c = 0; c < s.length; c += 1) {
          const h = Du(n, s, c);
          r[c] ? (r[c].p(h, l), F(r[c], 1)) : (r[c] = Tu(h), r[c].c(), F(r[c], 1), r[c].m(t, null));
        }
        for (Me(), c = s.length; c < r.length; c += 1)
          o(c);
        ke();
      }
    },
    i(a) {
      if (!i) {
        for (let l = 0; l < s.length; l += 1)
          F(r[l]);
        e || mt(() => {
          e = ss(t, zt, {
            duration: (
              /*duration*/
              n[0]
            ),
            easing: vn
          }), e.start();
        }), i = !0;
      }
    },
    o(a) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        Y(r[l]);
      i = !1;
    },
    d(a) {
      a && U(t), pi(r, a);
    }
  };
}
function Tu(n) {
  let t, e;
  const i = [
    {
      hoverEnable: (
        /*hoverEnable*/
        n[6]
      ),
      highlightEnable: (
        /*highlightEnable*/
        n[7]
      ),
      floorplanData: (
        /*floorplanData*/
        n[15]
      ),
      getRoomAreaText: (
        /*getRoomAreaText*/
        n[18]
      ),
      getRoomDimensionText: (
        /*getRoomDimensionText*/
        n[19]
      ),
      getLabelElement: (
        /*getLabelElement*/
        n[20]
      ),
      getRuleDistanceText: (
        /*getRuleDistanceText*/
        n[21]
      ),
      roomLabelsEnable: (
        /*roomLabelsEnable*/
        n[9]
      ),
      roomAreaEnable: (
        /*roomAreaEnable*/
        n[10]
      ),
      roomNameEnable: (
        /*roomNameEnable*/
        n[11]
      ),
      roomNameOtherTypeEnable: (
        /*roomNameOtherTypeEnable*/
        n[12]
      ),
      roomDimensionEnable: (
        /*roomDimensionEnable*/
        n[13]
      ),
      ruleLabelsEnable: (
        /*ruleLabelsEnable*/
        n[14]
      ),
      adaptiveRoomLabelVisibleEnable: (
        /*adaptiveRoomLabelVisibleEnable*/
        n[22]
      ),
      highlightData: (
        /*highlightData*/
        n[23]
      ),
      missingFloorConfig: (
        /*missingFloorConfig*/
        n[24]
      ),
      panoIndex: (
        /*panoIndex*/
        n[3]
      ),
      cameraEnable: (
        /*cameraEnable*/
        n[5]
      ),
      cameraImageUrl: (
        /*cameraImageUrl*/
        n[17]
      ),
      lastPanoramaLongitude: (
        /*lastPanoramaLongitude*/
        n[16]
      ),
      compassEnable: (
        /*compassEnable*/
        n[8]
      ),
      northDesc: (
        /*northDesc*/
        n[2]
      ),
      store: (
        /*store*/
        n[25]
      )
    },
    {
      floorIndex: (
        /*floorData*/
        n[26].floorIndex
      )
    },
    {
      isCurrent: (
        /*floorData*/
        n[26].floorIndex === /*floorIndex*/
        n[4]
      )
    },
    { items: (
      /*floorData*/
      n[26].items
    ) }
  ];
  let s = {};
  for (let r = 0; r < i.length; r += 1)
    s = St(s, i[r]);
  return t = new G2({ props: s }), {
    c() {
      ve(t.$$.fragment);
    },
    m(r, o) {
      me(t, r, o), e = !0;
    },
    p(r, o) {
      const a = o & /*hoverEnable, highlightEnable, floorplanData, getRoomAreaText, getRoomDimensionText, getLabelElement, getRuleDistanceText, roomLabelsEnable, roomAreaEnable, roomNameEnable, roomNameOtherTypeEnable, roomDimensionEnable, ruleLabelsEnable, adaptiveRoomLabelVisibleEnable, highlightData, missingFloorConfig, panoIndex, cameraEnable, cameraImageUrl, lastPanoramaLongitude, compassEnable, northDesc, store, floorIndex*/
      67108860 ? Lt(i, [
        o & /*hoverEnable, highlightEnable, floorplanData, getRoomAreaText, getRoomDimensionText, getLabelElement, getRuleDistanceText, roomLabelsEnable, roomAreaEnable, roomNameEnable, roomNameOtherTypeEnable, roomDimensionEnable, ruleLabelsEnable, adaptiveRoomLabelVisibleEnable, highlightData, missingFloorConfig, panoIndex, cameraEnable, cameraImageUrl, lastPanoramaLongitude, compassEnable, northDesc, store*/
        67108844 && {
          hoverEnable: (
            /*hoverEnable*/
            r[6]
          ),
          highlightEnable: (
            /*highlightEnable*/
            r[7]
          ),
          floorplanData: (
            /*floorplanData*/
            r[15]
          ),
          getRoomAreaText: (
            /*getRoomAreaText*/
            r[18]
          ),
          getRoomDimensionText: (
            /*getRoomDimensionText*/
            r[19]
          ),
          getLabelElement: (
            /*getLabelElement*/
            r[20]
          ),
          getRuleDistanceText: (
            /*getRuleDistanceText*/
            r[21]
          ),
          roomLabelsEnable: (
            /*roomLabelsEnable*/
            r[9]
          ),
          roomAreaEnable: (
            /*roomAreaEnable*/
            r[10]
          ),
          roomNameEnable: (
            /*roomNameEnable*/
            r[11]
          ),
          roomNameOtherTypeEnable: (
            /*roomNameOtherTypeEnable*/
            r[12]
          ),
          roomDimensionEnable: (
            /*roomDimensionEnable*/
            r[13]
          ),
          ruleLabelsEnable: (
            /*ruleLabelsEnable*/
            r[14]
          ),
          adaptiveRoomLabelVisibleEnable: (
            /*adaptiveRoomLabelVisibleEnable*/
            r[22]
          ),
          highlightData: (
            /*highlightData*/
            r[23]
          ),
          missingFloorConfig: (
            /*missingFloorConfig*/
            r[24]
          ),
          panoIndex: (
            /*panoIndex*/
            r[3]
          ),
          cameraEnable: (
            /*cameraEnable*/
            r[5]
          ),
          cameraImageUrl: (
            /*cameraImageUrl*/
            r[17]
          ),
          lastPanoramaLongitude: (
            /*lastPanoramaLongitude*/
            r[16]
          ),
          compassEnable: (
            /*compassEnable*/
            r[8]
          ),
          northDesc: (
            /*northDesc*/
            r[2]
          ),
          store: (
            /*store*/
            r[25]
          )
        },
        o & /*floorplanData*/
        32768 && {
          floorIndex: (
            /*floorData*/
            r[26].floorIndex
          )
        },
        o & /*floorplanData, floorIndex*/
        32784 && {
          isCurrent: (
            /*floorData*/
            r[26].floorIndex === /*floorIndex*/
            r[4]
          )
        },
        o & /*floorplanData*/
        32768 && { items: (
          /*floorData*/
          r[26].items
        ) }
      ]) : {};
      t.$set(a);
    },
    i(r) {
      e || (F(t.$$.fragment, r), e = !0);
    },
    o(r) {
      Y(t.$$.fragment, r), e = !1;
    },
    d(r) {
      ge(t, r);
    }
  };
}
function Q2(n) {
  let t, e, i = (
    /*visible*/
    n[1] && Su(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*visible*/
      s[1] ? i ? (i.p(s, r), r & /*visible*/
      2 && F(i, 1)) : (i = Su(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function U2(n, t, e) {
  let { duration: i = 0 } = t, { visible: s } = t, { northDesc: r } = t, { panoIndex: o } = t, { floorIndex: a } = t, { cameraEnable: l } = t, { hoverEnable: c } = t, { highlightEnable: h } = t, { compassEnable: d } = t, { roomLabelsEnable: f } = t, { roomAreaEnable: g } = t, { roomNameEnable: p } = t, { roomNameOtherTypeEnable: m } = t, { roomDimensionEnable: v } = t, { ruleLabelsEnable: b } = t, { floorplanData: w } = t, { lastPanoramaLongitude: x } = t, { cameraImageUrl: k } = t, { getRoomAreaText: T } = t, { getRoomDimensionText: S } = t, { getLabelElement: V } = t, { getRuleDistanceText: z } = t, { adaptiveRoomLabelVisibleEnable: O } = t, { highlightData: A } = t, { missingFloorConfig: C } = t, { store: I = void 0 } = t;
  return n.$$set = (E) => {
    "duration" in E && e(0, i = E.duration), "visible" in E && e(1, s = E.visible), "northDesc" in E && e(2, r = E.northDesc), "panoIndex" in E && e(3, o = E.panoIndex), "floorIndex" in E && e(4, a = E.floorIndex), "cameraEnable" in E && e(5, l = E.cameraEnable), "hoverEnable" in E && e(6, c = E.hoverEnable), "highlightEnable" in E && e(7, h = E.highlightEnable), "compassEnable" in E && e(8, d = E.compassEnable), "roomLabelsEnable" in E && e(9, f = E.roomLabelsEnable), "roomAreaEnable" in E && e(10, g = E.roomAreaEnable), "roomNameEnable" in E && e(11, p = E.roomNameEnable), "roomNameOtherTypeEnable" in E && e(12, m = E.roomNameOtherTypeEnable), "roomDimensionEnable" in E && e(13, v = E.roomDimensionEnable), "ruleLabelsEnable" in E && e(14, b = E.ruleLabelsEnable), "floorplanData" in E && e(15, w = E.floorplanData), "lastPanoramaLongitude" in E && e(16, x = E.lastPanoramaLongitude), "cameraImageUrl" in E && e(17, k = E.cameraImageUrl), "getRoomAreaText" in E && e(18, T = E.getRoomAreaText), "getRoomDimensionText" in E && e(19, S = E.getRoomDimensionText), "getLabelElement" in E && e(20, V = E.getLabelElement), "getRuleDistanceText" in E && e(21, z = E.getRuleDistanceText), "adaptiveRoomLabelVisibleEnable" in E && e(22, O = E.adaptiveRoomLabelVisibleEnable), "highlightData" in E && e(23, A = E.highlightData), "missingFloorConfig" in E && e(24, C = E.missingFloorConfig), "store" in E && e(25, I = E.store);
  }, [
    i,
    s,
    r,
    o,
    a,
    l,
    c,
    h,
    d,
    f,
    g,
    p,
    m,
    v,
    b,
    w,
    x,
    k,
    T,
    S,
    V,
    z,
    O,
    A,
    C,
    I
  ];
}
let Vh = class extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      U2,
      Q2,
      Pe,
      {
        duration: 0,
        visible: 1,
        northDesc: 2,
        panoIndex: 3,
        floorIndex: 4,
        cameraEnable: 5,
        hoverEnable: 6,
        highlightEnable: 7,
        compassEnable: 8,
        roomLabelsEnable: 9,
        roomAreaEnable: 10,
        roomNameEnable: 11,
        roomNameOtherTypeEnable: 12,
        roomDimensionEnable: 13,
        ruleLabelsEnable: 14,
        floorplanData: 15,
        lastPanoramaLongitude: 16,
        cameraImageUrl: 17,
        getRoomAreaText: 18,
        getRoomDimensionText: 19,
        getLabelElement: 20,
        getRuleDistanceText: 21,
        adaptiveRoomLabelVisibleEnable: 22,
        highlightData: 23,
        missingFloorConfig: 24,
        store: 25
      },
      W2
    );
  }
};
const X2 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAYAAACFUvPfAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAMAAAAADe2FZjAAAEF0lEQVRoBe2WzWskRRiHf13V092TxI2oEzYeVDwITtyDuCiihwiCePGgxIM3vYgHL4J4UIhBRA8i/gPqyUvWg7AiIuIeloDiYUHJLOK6BPwIk9nNODM9Xf1RVe1b3elJRjCZmQ6euqGmuqer33rq4e23GqiOykBloDJQGagMVAYqA5WBykBlYFYD1qwP/tdzaZqOx9zYOLxeX0+L5yzLGp0X/03a25MOnGRcBtx+6Rlo9SL08G4EooFnxa8Yiivox5/h5Ys/4cl7NVorNDRnngX+0MIkVMeMSf23zyKML8J7/Dy8hwF2Buh9CnS+AEQIdLspBuGb+M7/qLW4qJrNpsLapjYhpwVnx3BMfCtNNx3Etc9xywvnMf80wG8HmQainw0RxSGrnmeBp+8k5/j9S0HbvXb5io0Lz880/0wPHV1NlhLd316He+4xOCv5ragF7L9PrH1qBJyB0626x/lC+qrSvH5r/W+n1WpxUM5nMY4GPeH8lHJaPgfeAFQHCL+ntkXT+vnUc3W6pvTIwC0wy3rA4dwLmK2avZ7Eo9uKBuYJfgJscbs8dLCxDMt+EOEPBEZNEWyBYHqTz6bPXrzUnNrSShxHIsYiOL69zrCGLLcLqJP68tB+9w5wj+YhWDafQ2s61wNqxjZhmrQ2pvMFCEvXuCUZ7wqH794ZWs28LJqlTXSUyuksF2M/yOwqgkx2c1ADa4wLAQRk2sAGQQakhN6yFC2hltfz5kSY44NKQeeh+vtI/SSzWhg2CzCgmWISmKUGmaYFBDfCSymnfxJ6/+ospVcWOLLp5DGP/y0P/Rp66O99DQNq7Po3Ds0a0wY+My2QSv2N2mO/OyxR2o6UQk+Lv7yJ06JYSnnolZVU9cUn2O9SmaMWGFBqYXRwbqAJWIi94TX5biotpcGl1DXZ6LnqIbNDTnmUgi52Mv5l5ysMxIcZcGjy2DTK4ZHlcBC14zeSge4qphICjj3bS0A7o9nSp2TOkm7aZ8bGZy/jxhO87V91G0+dfY/Z7BWIIK9KYUi5qy/Hf8YfBG3sqJTHiQWhmTVkbip+wX3x6volVSx+LPAxF+VLXhZ8VQ+iP2Rta/iWe5v42Fngj0BbdnRTXh12ZIcKhTaGbcYjybRwXBU1lu9KlndXp04NM52poKWO0RZsviNaP9a6grkO972+st05pXhE5c1hTEluJy7XUejGUQNLMbAmTdWY1rKBLW3aTJqBZ7nZkb36DhYCreeYHbMUXHvaYi5XDK70EcgulmRjm77wNtenzuXCbmnTRaAx493rbGf3Jr/njMzj920CnKdUaFCjlDioy7NYNvOdGrQJNgI32/L2tkXfFPlxgToqjWVhD6KdLnQRdARf/HHQz2r2X2Gqy8pAZaAyUBmoDFQGKgP/q4F/AJYg9/s0ZoABAAAAAElFTkSuQmCC";
function Y2(n) {
  return $(this, null, function* () {
    const t = new Headers({ "Content-Type": "text/plain" }), e = function(s) {
      return $(this, null, function* () {
        const r = {
          index: s.index,
          url: s.url,
          svgUrl: s.svg_url
        };
        if (s.svg_url) {
          const o = yield fetch(s.svg_url, { headers: t }).then((a) => a.text());
          r.svgContent = o;
        }
        return r;
      });
    };
    return yield Promise.all(n.map(e));
  });
}
function Z2(n) {
  const t = {
    id: n.id,
    size: n.size,
    name: n.name,
    customizedName: n.customizedName || "",
    path: n.path,
    roomType: n.room_type,
    floorType: n.floor_type,
    roomLabel: {
      position: n.room_label.position,
      positionInImage: n.room_label.position_in_image
    },
    observerIndexs: n.observer_indexs
  };
  return n.dimension && Object.assign(t, { dimension: n.dimension }), t;
}
function J2(n) {
  return {
    floorName: n.floor_name,
    floorIndex: n.floor_index,
    rooms: n.rooms.map(Z2),
    rules: n.rules,
    is_has_wall: n.is_has_wall
  };
}
function q2(n) {
  return {
    index: n.index,
    floorIndex: n.floor_index,
    position: n.position,
    positionInImage: n.position_in_image
  };
}
function K2(n) {
  return {
    rad: n.rad,
    position: n.position,
    positionInImage: n.position_in_image,
    northRad: n.north_rad,
    roomId: n.room_id,
    floorIndex: n.floor_index
  };
}
function es(n) {
  return $(this, null, function* () {
    const t = yield Y2(n.outlines), e = n.computed_data.bounding, i = n.computed_data.floor_datas.map(J2), s = n.computed_data.entrance ? K2(n.computed_data.entrance) : null;
    return {
      outlines: t,
      entrance: s,
      bounding: e,
      floorDatas: i,
      observers: n.computed_data.observers.map(q2)
    };
  });
}
function $2(n, t, e) {
  return n.map((s) => {
    const r = s.position, o = s.icon ? s.icon : {
      url: X2,
      width: 45,
      height: 48
    }, a = qw(r, t), l = Zw(r, e), c = Jw(l, e);
    return { floorIndex: a, icon: o, id: s.id, position: l, positionInImage: c };
  });
}
function e3(n, t) {
  return t(n), n;
}
function Mr(n, t) {
  return e3({}, (e) => {
    for (const i in n)
      t.indexOf(i) === -1 && (e[i] = n[i]);
  });
}
function Lu(n, t) {
  const e = Math.max(...n.work.observers.map((i) => i.floorIndex));
  return t > e ? n.model.bounding.max.y : Math.max(...n.work.observers.filter((i) => i.floorIndex === t).map((i) => i.standingPosition.y));
}
function _h(n, t, e = Cs.BOUNDING_CENTER) {
  const i = Lu(n, t), s = Lu(n, t + 1);
  return e === Cs.BOUNDING_CENTER ? (n.model.bounding.max.y + n.model.bounding.min.y) / 2 : e === Cs.CEILING ? s : i;
}
function Hh(n, t, e, i) {
  const s = _h(n, e, i == null ? void 0 : i.attachedTo), r = new P.Vector3(0, s, 0), o = new P.Vector3(1, s, 0), a = r.clone().project(n.camera), l = o.clone().project(n.camera);
  return Math.abs((l.x - a.x) / 1e3) * (t.getBoundingClientRect().width / 2);
}
let rs = class {
  constructor(t, e) {
    /**
     * @realsee/dnalogel 版本号
     */
    u(this, "VERSION", "3.66.2");
    u(this, "NAME");
    u(this, "five");
    u(this, "workUtil");
    u(this, "fiveUtil");
    /**
     * @description: 插件事件钩子
     */
    u(this, "hooks", new Pt());
    u(this, "staticPrefix", "//vr-image-4.realsee-cdn.cn");
    this.five = t, this.fiveUtil = new rl(t), this.workUtil = this.fiveUtil.workUtil, e != null && e.staticPrefix && (this.staticPrefix = e.staticPrefix);
  }
  set workCode(t) {
    this.workUtil.workCode = t, this.onWorkCodeChange();
  }
  get workCode() {
    return this.workUtil.workCode;
  }
  updateFive(t) {
    this.five = t, this.fiveUtil.five = t, this.workUtil.five = t;
  }
  /**
   * 获取当前的插件状态，如果当初插件内存在需要通过动画变更的 state 值，则通过此方法可以得到中间状态
   */
  getCurrentState() {
    return this.state;
  }
  /**
   * @description: 获取静态资源的url
   */
  absoluteUrl(t) {
    return Eh(this.staticPrefix, t);
  }
  onWorkCodeChange() {
  }
}, Pn = class extends rs {
};
var ii = /* @__PURE__ */ ((n) => (n.UnknownError = "UnknownError", n.DataNotLoaded = "DataNotLoaded", n.UpdateSizeError = "UpdateSizeError", n.BreakOffByHide = "BreakOffByHide", n.BreakOffByDisable = "BreakOffByDisable", n.ModelNotLoaded = "ModelNotLoaded", n.ChangeModeError = "ChangeModeError", n.UpdateCameraError = "UpdateCameraError", n))(ii || {});
const w0 = 500, t3 = 80;
function Is(n, t, e = 4) {
  return Math.abs(n - t) < Math.pow(10, -e);
}
function P0(n, t, e = 4) {
  const i = Math.PI * 2, s = n % i, r = t % i, o = Math.min(s, r), a = Math.max(s, r);
  return Is(o, a, e) || Is(o + i, a, e);
}
Object.assign(window, { nearlyEqual: Is, nearlyEqualRad: P0 });
function i3(n) {
  return Object.prototype.toString.call(n) === "[object Object]";
}
function zu(n) {
  return i3(n) && !!n.isVector3;
}
function Fh(n, t) {
  return $(this, null, function* () {
    const [e] = yield Ss(n.changeMode(...t));
    if (e)
      throw new Error("change mode canceled");
    yield new Promise((o) => {
      n.once("initAnimationWillStart", () => {
        n.once("initAnimationEnded", () => o());
      });
    });
    const i = t[1];
    if (!i)
      return !0;
    const s = n.getCurrentState();
    if (!n3(i, s))
      throw new Error("pose 与预期不符");
  });
}
function n3(n, t) {
  return Object.keys(n).every((e) => {
    const i = t[e], s = n[e];
    return i === void 0 || s === void 0 ? !0 : e === "longitude" || e === "latitude" ? P0(i, s, 2) : typeof i == "number" && typeof s == "number" ? Is(i, s, 2) : zu(s) && zu(i) ? s.distanceTo(i) < 0.01 : i === s;
  });
}
function s3(n, t) {
  if (n.currentMode !== t.mode)
    return !1;
  const { latitude: e, longitude: i, fov: s, offset: r } = t, { latitude: o, longitude: a, offset: l } = n.getCurrentState(), c = n.camera.fov;
  return !(!Is(e, o, 2) || !Is(i, a, 2) || r !== void 0 && r.distanceTo(l) > 0.01 || !Is(s, c, 2));
}
function C0(n, t, e = !0) {
  return $(this, null, function* () {
    if (s3(n, t) === !0)
      return;
    const s = n.getCurrentState();
    if (s.mode !== t.mode) {
      const [h] = yield Ss(Fh(n, [t.mode, t, void 0, e]));
      if (h)
        throw h;
      return;
    }
    const { latitude: r, longitude: o, fov: a } = s, l = Math.min(
      1e3,
      Math.max(
        200,
        Math.abs(r - Math.PI / 2) * 1e3,
        (o > Math.PI ? 2 * Math.PI - o : o) * 500,
        typeof t.fov == "number" ? Math.abs(a - t.fov) * 10 : 1 / 0
      )
    ), [c] = yield Ss(n.updateCamera(Mr(t, ["mode"]), l, e));
    if (c)
      throw new Error(ii.UpdateCameraError);
  });
}
function kr(n, t, e = 300) {
  var s, r;
  const i = n.getElement();
  if (i) {
    i.style.opacity = t + "";
    for (let o = 0; o < ((r = (s = i.parentElement) == null ? void 0 : s.children) == null ? void 0 : r.length); o++) {
      const a = i.parentElement.children[o];
      a instanceof HTMLElement && a.dataset.infive === "1" && (a.style.opacity = t + "");
    }
    i.style.transition = e === 0 ? "none" : `opacity ${e}ms linear`, e !== 0 && Promise.race([
      new Promise((o) => i.addEventListener("transitionend", o, { once: !0 })),
      new Promise((o) => setTimeout(o, e))
    ]).then(() => {
      i.style.transition = "none";
    });
  }
}
function r3(n) {
  const { latitude: t, longitude: e } = n, i = Math.abs(t - Math.PI / 2) > 5 * Math.PI / 180, s = e > 5 * (Math.PI / 180) && e < 355 * (Math.PI / 180);
  return i || s;
}
function o3(n) {
  const { latitude: t, longitude: e } = n, i = Math.abs(t - Math.PI / 2) < 10 * Math.PI / 180, s = e < 30 * (Math.PI / 180) || e > 330 * (Math.PI / 180);
  return i && s;
}
let a3 = class extends Pn {
  constructor(e, i) {
    var l, c, h;
    super(e);
    // =============== public properties =================
    u(this, "name", "modelFloorplanPlugin");
    u(this, "state");
    // =============== private properties =================
    u(this, "data");
    /** 展示户型图时，需要正确的状态 */
    u(this, "showState");
    /** show 动画的公共 Promise */
    u(this, "showPromise");
    u(this, "app");
    u(this, "panoIndex", 0);
    u(this, "floorIndex", 0);
    u(this, "selector");
    /** 公共 Promise 的 reject 方法 */
    u(this, "showRejection");
    /** 户型图父容器 */
    u(this, "wrapper");
    /** 户型图主容器 */
    u(this, "container", document.createElement("div"));
    /** 展示户型图图前，Five 的 Panorama Longitude */
    u(this, "lastPanoramaLongitude", 0);
    /** 户型图大小 */
    u(this, "size", { width: 0, height: 0 });
    u(this, "defaultMissingFloorConfig");
    /** 是否已经执行过事件监听 */
    u(this, "hasAddedEventListener", !1);
    /** 上一次隐藏是否是用户调用了 hide 导致的 */
    u(this, "isHiddenByHideFunc", !1);
    /** 高亮区域 */
    u(this, "highlightData", {});
    u(this, "store", { roomOnMouse: null });
    /** 销毁插件 */
    u(this, "dispose", () => {
      var e, i;
      this.removeEventListener(), (e = this.app) == null || e.$destroy(), this.app = void 0, (i = this.container) == null || i.remove(), this.data = void 0, this.wrapper = void 0, this.selector = void 0, this.hooks.emit("dispose");
    });
    /** 展示户型图
     * 1. show 函数大部分情况下需要耗时
     * 2. 如果当前已经在展示中，将不会触发任何事件
     * 3. 如果展示过程被中断，将抛出错误
     * 4. 多次调用 show 方法，只会触发一次 showAnimationEnded 事件，但是展示结果会取决于最后一次调用参数
     * 5. 如果多次调用 show 方法，参数与上次参数不一致时，上次 show Promise 会被 reject
     * @param opts.floorIndex 楼层
     * @param opts.modelOpacity 模型透明度
     * @param opts.immediately 是否立即展示
     * @param opts.isAutoShow 是否是自动展示
     * @param opts.userAction 是否是用户行为
     */
    u(this, "show", (...i) => $(this, [...i], function* (e = {}) {
      if (!this.state.enabled || !this.showPromise && this.state.visible)
        return;
      const s = e.userAction !== void 0 ? e.userAction : !0;
      this.updateState({ visible: !0 }, s), this._show(e);
    }));
    /** 隐藏户型图 */
    u(this, "hide", (...i) => $(this, [...i], function* (e = {}) {
      this.state.enabled && (this.isHiddenByHideFunc = !0, this.state.visible !== !1 && (this.updateState({ visible: !1 }, e.userAction || !0), this._hide(e)));
    }));
    /** 更新户型图大小 */
    u(this, "updateSize", () => {
      if (!this.data || !this.container || !this.wrapper)
        return !1;
      const { min: e, max: i } = this.data.bounding, s = i.x - e.x, r = i.y - e.y, o = this.state.config.attachedTo ? { attachedTo: this.state.config.attachedTo } : void 0, a = Hh(this.five, this.wrapper, this.floorIndex, o), l = Math.ceil(s * a), c = Math.ceil(r * a);
      return this.size.width === l && this.size.height === c || (this.container.style.width = l + "px", this.container.style.height = c + "px", this.size = { width: l, height: c }), !0;
    });
    u(this, "highlight", (e) => {
      this.state.config.highlightEnable && (this.highlightData = e, this.render());
    });
    u(this, "unhighlight", () => {
      this.highlightData = {}, this.render();
    });
    u(this, "_disable", (e) => {
      var s, r, o;
      const { userAction: i } = e;
      this.hooks.emit("disable", { userAction: i }), (s = this.showRejection) == null || s.call(this, ii.BreakOffByDisable), this.showPromise = void 0, (r = this.app) == null || r.$destroy(), this.app = void 0, (o = this.container) == null || o.remove(), this.removeEventListener();
    });
    u(this, "_enable", (e) => {
      const { userAction: i } = e;
      this.addEventListener(), this.wrapper && (this.wrapper.append(this.container), this.hooks.emit("enable", { userAction: i }), this.state.visible && this._show({ userAction: i }));
    });
    u(this, "_show", (e) => $(this, null, function* () {
      var o;
      if (!this.state.enabled)
        return;
      if (!((o = this.five.model) != null && o.loaded))
        throw new Error(ii.ModelNotLoaded);
      if (!this.data)
        throw new Error(ii.DataNotLoaded);
      if (this.showPromise)
        return this.showPromise;
      const i = {
        floorIndex: this.floorIndex,
        modelOpacity: this.state.config.modelOpacity,
        immediately: !1,
        isAutoShow: !1,
        userAction: !0
      }, s = _(_({}, i), e), r = () => $(this, null, function* () {
        this.hooks.emit("show", { userAction: s.userAction, auto: s.isAutoShow });
        let a = !1, l;
        this.showRejection = (d) => {
          a = !0, l = d;
        };
        const [c] = yield Ss(C0(this.five, this.showState, s.userAction));
        if (c)
          throw c;
        if (a)
          throw l ? new Error(l) : new Error(ii.UnknownError);
        if (!this.updateSize())
          throw new Error(ii.UpdateSizeError);
        this.floorIndex = s.floorIndex, this.five.model.show(this.floorIndex);
      });
      return this.isHiddenByHideFunc = !1, this.showPromise = r().then(() => {
        this.showPromise = void 0, this.showRejection = void 0;
        const a = s.modelOpacity, l = s.immediately ? 0 : w0;
        kr(this.five, a, l), this.render(l), this.hooks.emit("showAnimationEnded", {
          auto: s.isAutoShow,
          userAction: s.userAction
        });
      }).catch((a) => {
        if (this.showPromise = void 0, this.showRejection = void 0, this.updateState({ visible: !1 }, s.userAction), !s.isAutoShow && a instanceof Error)
          throw a;
      }), this.showPromise;
    }));
    u(this, "_hide", (e) => {
      var r;
      (r = this.showRejection) == null || r.call(this, ii.BreakOffByHide), this.showPromise = void 0;
      const s = _(_({}, {
        userAction: !0,
        isAutoHide: !1
      }), e);
      kr(this.five, 1, 0), this.hooks.emit("hide", { auto: s.isAutoHide, userAction: s.userAction }), this.render();
    });
    u(this, "handleClick", () => {
      if (!this.state.visible)
        return;
      if (this.hooks.emit("click", this.store.roomOnMouse))
        return !1;
    });
    /** modelLoaded 之后自动执行 append container 操作  */
    u(this, "onFiveModelLoaded", () => {
      if (this.state.enabled === !1 || this.wrapper || !this.selector)
        return;
      const e = this.selector instanceof Element ? this.selector : document.querySelector(this.selector);
      if (!e)
        throw new Error("不正确的父容器选择器");
      this.wrapper = e, e.append(this.container);
    });
    /** 更改模型时，自动隐藏户型图 */
    u(this, "onFiveModeChange", (e) => {
      e !== this.showState.mode && (this.updateState({ visible: !1 }, !1), this._hide({ userAction: !1 }));
    });
    /** 惯性结束后，判断能否自动展示户型图 */
    u(this, "onFiveInteriaPan", (e, i) => {
      if (!i || this.state.config.autoShowEnable === !1 || this.isHiddenByHideFunc)
        return;
      const s = this.five.getCurrentState();
      s.mode === "Floorplan" && (this.state.visible || o3(s) && (this.updateState({ visible: !0 }, !0), this._show({ isAutoShow: !0 })));
    });
    /** panoIndex 改变时，更新 floorIndex */
    u(this, "onFivePanoArrived", (e) => {
      var i;
      (i = this.five) != null && i.work && (this.panoIndex = e, this.floorIndex = this.workUtil.observers[e].floorIndex);
    });
    /** cameraUpdate 时判断户型图是否应该自动隐藏 */
    u(this, "onFiveCameraUpdate", (e, i) => {
      if (!this.state.visible || this.showPromise)
        return;
      const s = this.five.getCurrentState();
      r3(s) && (this.updateState({ visible: !1 }, i), this._hide({ userAction: i, isAutoHide: !0 }));
    });
    /** 在户型图展示时阻止多指操作, 阻止鼠标放大 */
    u(this, "onFiveWantsGesture", (e, i) => {
      if (this.state.visible && (i.length > 1 || e === "mouseWheel"))
        return !1;
    });
    /** 户型图展示中，转动三维模型，结束时应该自动修复模型状态 */
    u(this, "onFiveWantsPanGesture", (e, i) => {
      if (this.five.getCurrentState().mode === "Floorplan" && this.state.config.autoShowEnable !== !1 && i && this.state.visible)
        return this.five.updateCamera(this.showState, 0), !1;
    });
    /** 阻止点击分间走点 */
    u(this, "onFiveWantsTapGesture", () => this.handleClick());
    /** 从 Panorama 切换到其他模态时，记录当前的相机水平视角 */
    u(this, "onFiveWantsChangeMode", (e, i) => {
      i === "Panorama" && e === "Floorplan" && (this.lastPanoramaLongitude = this.five.getCurrentState().longitude);
    });
    /** 模型楼层高亮改变时，自动进行楼层切换 */
    u(this, "onModelShownFloorChange", (e) => {
      if (this.floorIndex !== e) {
        if (e === null) {
          const i = this.five.getCurrentState().panoIndex;
          this.floorIndex = this.workUtil.observers[i].floorIndex;
          return;
        }
        this.floorIndex = e, this.updateSize(), this.render();
      }
    });
    i != null && i.selector && (this.selector = i.selector, console.warn("不推荐继续使用 params.selector 配置父容器，请使用 appendTo 方法")), this.showState = {
      mode: "Floorplan",
      longitude: 0,
      latitude: Math.PI / 2,
      fov: t3 / ((l = i == null ? void 0 : i.scale) != null ? l : 1)
    }, this.defaultMissingFloorConfig = {
      imageURL: this.staticPrefix + "/release/web/saas/missing-floorplan.e274c596.png",
      imageWidth: 200,
      imageHeight: 120,
      text: (h = (c = i.i18n) == null ? void 0 : c.call(i, "暂无平面图")) != null ? h : "暂无平面图",
      textFontSize: 14
    };
    const s = {
      northDesc: "北",
      modelOpacity: 1,
      cameraEnable: !0,
      highlightEnable: !1,
      hoverEnable: !0,
      compassEnable: !0,
      autoShowEnable: !0,
      ruleLabelsEnable: !0,
      roomLabelsEnable: !0,
      roomAreaEnable: !0,
      roomNameEnable: !0,
      roomNameOtherTypeEnable: !0,
      roomDimensionEnable: !0,
      adaptiveRoomLabelVisibleEnable: !0,
      cameraImageUrl: $n,
      attachedTo: Cs.BOUNDING_CENTER,
      getLabelElement: void 0,
      missingFloorConfig: _(_({}, this.defaultMissingFloorConfig), i.missingFloorConfig),
      i18n: (d) => d,
      getRoomAreaText: (d) => (d / 1e6).toFixed(1) + "㎡",
      getRoomDimensionText: (d, f) => (d / 1e3).toFixed(1) + "m × " + (f / 1e3).toFixed(1) + "m",
      getRuleDistanceText: (d) => d.toString()
    }, r = i ? Mr(i, ["selector", "scale"]) : {}, o = _(_({}, s.missingFloorConfig), r.missingFloorConfig), a = de(_(_({}, s), r), { missingFloorConfig: o });
    this.state = { enabled: !0, visible: !1, config: a }, this.initContainer(), e.once("dispose", this.dispose), this.addEventListener();
  }
  load(e, i, s = !0) {
    return $(this, null, function* () {
      function r(h) {
        return Object.prototype.hasOwnProperty.apply(h, ["version"]);
      }
      const o = e;
      o && si(o.version) && console.warn("传入 serverData.data 的方式后续可能不再支持，请把 serverData 整体传入 load 函数");
      const a = JSON.parse(JSON.stringify(e)), l = r(a) ? a.data : a, c = this.data;
      this.data = yield es(l), this.hooks.emit("dataLoaded", this.data), this.hooks.emit("dataChange", this.data, c), i && this.updateState(i, s), this.render();
    });
  }
  /** 把插件的渲染DOM插入到对应的容器中去 */
  appendTo(e) {
    if (this.wrapper = e, !!this.state.enabled)
      return e.appendChild(this.container), this.render(), this;
  }
  /** 启用插件 */
  enable(e = {}) {
    if (this.state.enabled)
      return;
    const i = e.userAction !== void 0 ? e.userAction : !0;
    this.updateState({ enabled: !0 }, e.userAction || i), this._enable({ userAction: i });
  }
  /** 禁用插件 */
  disable(e = {}) {
    if (!this.state.enabled)
      return;
    const i = e.userAction !== void 0 ? e.userAction : !0;
    this.updateState({ enabled: !1 }, e.userAction || i), this._disable({ userAction: i });
  }
  /** 更改插件 State */
  setState(e, i = {}) {
    const s = this.state, r = i.userAction !== void 0 ? i.userAction : !0;
    if (this.updateState(e, r), e.enabled !== void 0 && s.enabled !== e.enabled && (e.enabled ? this._enable({ userAction: r }) : this._disable({ userAction: r })), e.visible !== void 0 && s.visible !== e.visible) {
      const o = { userAction: r };
      e.visible ? this._show(o) : this._hide(o);
    }
    this.render();
  }
  changeConfigs(e, i = !0) {
    this.updateState({ config: e }, i), this.render();
  }
  formatData(e) {
    return $(this, null, function* () {
      return yield es(e.data);
    });
  }
  updateState(e, i) {
    var a;
    const s = this.state, r = (a = e.config) != null && a.missingFloorConfig ? _(_({}, s.config.missingFloorConfig), e.config.missingFloorConfig) : s.config.missingFloorConfig, o = e.config ? de(_(_({}, s.config), e.config), { missingFloorConfig: r }) : s.config;
    this.state = de(_(_({}, this.state), e), { config: o }), !Qt(this.state, s, { deep: !0 }) && this.hooks.emit("stateChange", { state: this.state, prevState: s, userAction: i });
  }
  /** 如果用户是通过 selector 设置父容器，需要在 modelLoaded 之后把 container 自动放到父容器里
   *
   * - TODO: 等 selector 功能下掉之后删除这个逻辑
   */
  initContainer() {
    this.container.classList.add("floorplan-plugin"), Object.assign(this.container.style, {
      position: "absolute",
      left: "50%",
      top: "50%",
      transform: "translate(-50%, -50%)",
      zIndex: 10,
      pointerEvents: "none"
    }), this.five.addExtraElement(this.container);
  }
  addEventListener() {
    if (!this.state.enabled || this.hasAddedEventListener)
      return;
    const e = this.five;
    e.model.loaded ? this.onFiveModelLoaded() : e.once("modelLoaded", this.onFiveModelLoaded), e.on("modeChange", this.onFiveModeChange), e.on("interiaPan", this.onFiveInteriaPan), e.on("panoArrived", this.onFivePanoArrived), e.on("cameraUpdate", this.onFiveCameraUpdate), e.on("wantsGesture", this.onFiveWantsGesture), e.on("wantsPanGesture", this.onFiveWantsPanGesture), e.on("wantsTapGesture", this.onFiveWantsTapGesture), e.on("wantsChangeMode", this.onFiveWantsChangeMode), e.on("modelShownFloorChange", this.onModelShownFloorChange);
  }
  removeEventListener() {
    const e = this.five;
    this.hasAddedEventListener = !1, e.off("modelLoaded", this.onFiveModelLoaded), e.off("modeChange", this.onFiveModeChange), e.off("interiaPan", this.onFiveInteriaPan), e.off("panoArrived", this.onFivePanoArrived), e.off("cameraUpdate", this.onFiveCameraUpdate), e.off("wantsGesture", this.onFiveWantsGesture), e.off("wantsPanGesture", this.onFiveWantsPanGesture), e.off("wantsTapGesture", this.onFiveWantsTapGesture), e.off("wantsChangeMode", this.onFiveWantsChangeMode), e.off("modelShownFloorChange", this.onModelShownFloorChange);
  }
  render(e) {
    if (!this.state.enabled || !this.container || !this.data || this.size.width === 0 || this.showPromise)
      return;
    const i = de(_({}, this.state.config), {
      visible: this.state.visible,
      duration: e != null ? e : 0,
      panoIndex: this.panoIndex,
      floorIndex: this.floorIndex,
      floorplanData: this.data,
      lastPanoramaLongitude: this.lastPanoramaLongitude,
      highlightData: this.highlightData,
      store: this.store
    });
    if (this.app)
      return this.app.$set(i);
    this.app = new Vh({ target: this.container, intro: !0, props: i });
  }
};
const _x = (n, t) => new a3(n, t), Ou = [
  {
    type: 0,
    description: "车-2",
    href: "resource/items/{{ theme }}/car_2.png",
    width: 4200,
    height: 1800,
    tag: "其他",
    direction: 3,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 1,
    description: "车-1",
    href: "resource/items/{{ theme }}/car_1.png",
    width: 1900,
    height: 4300,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 2,
    description: "中厨-1",
    href: "resource/items/{{ theme }}/kitchen_1.png",
    width: 3158,
    height: 1400,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 3,
    description: "8人餐桌",
    href: "resource/items/{{ theme }}/table_for_8.png",
    width: 3240,
    height: 1800,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 4,
    description: "衣柜-1",
    href: "resource/items/{{ theme }}/wardrobe_1.png",
    width: 1820,
    height: 600,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 5,
    description: "浴缸-2",
    href: "resource/items/{{ theme }}/bathtub_2.png",
    width: 1500,
    height: 694,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 6,
    description: "衣柜-3",
    href: "resource/items/{{ theme }}/wardrobe_3.png",
    width: 2830,
    height: 600,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 7,
    description: "植物-4",
    href: "resource/items/{{ theme }}/plant_4.png",
    width: 700,
    height: 628,
    tag: "装饰类",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 8,
    description: "植物-1",
    href: "resource/items/{{ theme }}/plant_1.png",
    width: 700,
    height: 565,
    tag: "装饰类",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 9,
    description: "植物-6",
    href: "resource/items/{{ theme }}/plant_6.png",
    width: 800,
    height: 758,
    tag: "装饰类",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 10,
    description: "书桌-1",
    href: "resource/items/{{ theme }}/desk_1.png",
    width: 1200,
    height: 930,
    tag: "书房",
    direction: 0,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 11,
    description: "瓶艺-1",
    href: "resource/items/{{ theme }}/bottle_art_1.png",
    width: 530,
    height: 520,
    tag: "装饰类",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 12,
    description: "衣柜-2",
    href: "resource/items/{{ theme }}/wardrobe_2.png",
    width: 2310,
    height: 600,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 13,
    description: "植物-2",
    href: "resource/items/{{ theme }}/plant_2.png",
    width: 600,
    height: 600,
    tag: "装饰类",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 14,
    description: "西厨-1",
    href: "resource/items/{{ theme }}/western_kitchen_1.png",
    width: 2180,
    height: 550,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 15,
    description: "西厨-2",
    href: "resource/items/{{ theme }}/western_kitchen_2.png",
    width: 1480,
    height: 550,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 16,
    description: "浴缸-1",
    href: "resource/items/{{ theme }}/bathtub_1.png",
    width: 1500,
    height: 956,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 17,
    description: "植物-3",
    href: "resource/items/{{ theme }}/plant_3.png",
    width: 700,
    height: 639,
    tag: "装饰类",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 18,
    description: "书桌-2",
    href: "resource/items/{{ theme }}/desk_2.png",
    width: 2200,
    height: 2470,
    tag: "书房",
    direction: 3,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 19,
    description: "吧台",
    href: "resource/items/{{ theme }}/bar_counter.png",
    width: 1800,
    height: 1130,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 20,
    description: "书柜-短",
    href: "resource/items/{{ theme }}/bookcase_short.png",
    width: 1460,
    height: 350,
    tag: "书房",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 21,
    description: "鞋柜-长",
    href: "resource/items/{{ theme }}/shoe_cabinet_long.png",
    width: 2059,
    height: 550,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 22,
    description: "鞋柜-短",
    href: "resource/items/{{ theme }}/shoe_cabinet_short.png",
    width: 1308,
    height: 550,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 23,
    description: "中厨-2",
    href: "resource/items/{{ theme }}/kitchen_2.png",
    width: 2020,
    height: 650,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 24,
    description: "椅子",
    href: "resource/items/{{ theme }}/chair.png",
    width: 1050,
    height: 950,
    tag: "客厅",
    direction: 1,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 25,
    description: "秋千",
    href: "resource/items/{{ theme }}/swing.png",
    width: 1600,
    height: 1370,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 26,
    description: "茶几",
    href: "resource/items/{{ theme }}/tea_table.png",
    width: 1090,
    height: 800,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 27,
    description: "庭院",
    href: "resource/items/{{ theme }}/courtyard.png",
    width: 2100,
    height: 3020,
    tag: "其他",
    direction: 3,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 28,
    description: "躺椅",
    href: "resource/items/{{ theme }}/deck_chair.png",
    width: 900,
    height: 1850,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 29,
    description: "钢琴",
    href: "resource/items/{{ theme }}/piano.png",
    width: 1900,
    height: 2260,
    tag: "其他",
    direction: 0,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 30,
    description: "音响",
    href: "resource/items/{{ theme }}/sound.png",
    width: 2500,
    height: 550,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 31,
    description: "马桶",
    href: "resource/items/{{ theme }}/flush_toilet.png",
    width: 450,
    height: 750,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 32,
    description: "植物-5",
    href: "resource/items/{{ theme }}/plant_5.png",
    width: 544,
    height: 600,
    tag: "装饰类",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 33,
    description: "书柜-长",
    href: "resource/items/{{ theme }}/bookcase_long.png",
    width: 2040,
    height: 350,
    tag: "书房",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 34,
    description: "燃气灶-1",
    href: "resource/items/{{ theme }}/gas_stove_1.png",
    width: 820,
    height: 450,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 35,
    description: "洗脸池-单",
    href: "resource/items/{{ theme }}/wash_basin_single.png",
    width: 1150,
    height: 500,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 36,
    description: "洗手池-单",
    href: "resource/items/{{ theme }}/sink_single.png",
    width: 1200,
    height: 500,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 37,
    description: "双人床-4",
    href: "resource/items/{{ theme }}/double_4.png",
    width: 2743,
    height: 2e3,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 38,
    description: "电视柜-短",
    href: "resource/items/{{ theme }}/tv_cabinet_short.png",
    width: 1580,
    height: 350,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 39,
    description: "储物柜-1",
    href: "resource/items/{{ theme }}/locker_1.png",
    width: 1400,
    height: 600,
    tag: "储物间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 40,
    description: "双人床-3",
    href: "resource/items/{{ theme }}/double_3.png",
    width: 2791,
    height: 2300,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 41,
    description: "双人床-2",
    href: "resource/items/{{ theme }}/double_2.png",
    width: 2791,
    height: 2300,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 42,
    description: "洗手池-双",
    href: "resource/items/{{ theme }}/sink_double.png",
    width: 2777,
    height: 600,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 43,
    description: "洗脸池-双",
    href: "resource/items/{{ theme }}/wash_basin_double.png",
    width: 2550,
    height: 600,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 44,
    description: "双人床（无床头柜）-1",
    href: "resource/items/{{ theme }}/double_bed_without_bedside_table_1.png",
    width: 1914,
    height: 2e3,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 45,
    description: "电视柜-长",
    href: "resource/items/{{ theme }}/tv_cabinet_long.png",
    width: 2040,
    height: 350,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 46,
    description: "洽谈桌组合",
    href: "resource/items/{{ theme }}/negotiation_table_combination.png",
    width: 2830,
    height: 950,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 47,
    description: "哑铃架",
    href: "resource/items/{{ theme }}/dumbbell_rack.png",
    width: 900,
    height: 650,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 48,
    description: "沙发组合-1",
    href: "resource/items/{{ theme }}/sofa_combination_1.png",
    width: 4e3,
    height: 2792,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 49,
    description: "游泳池-2",
    href: "resource/items/{{ theme }}/swimming_pool_2.png",
    width: 7680,
    height: 3800,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 50,
    description: "美人榻",
    href: "resource/items/{{ theme }}/beauty_couch.png",
    width: 1600,
    height: 520,
    tag: "卧室",
    direction: 1,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 51,
    description: "单人床（无床头柜）",
    href: "resource/items/{{ theme }}/single_bed_without_bedside_table.png",
    width: 1200,
    height: 2120,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 52,
    description: "沙发组合-2",
    href: "resource/items/{{ theme }}/sofa_combination_2.png",
    width: 2e3,
    height: 2054,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 53,
    description: "跑步机",
    href: "resource/items/{{ theme }}/treadmill.png",
    width: 2120,
    height: 950,
    tag: "其他",
    direction: 1,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 54,
    description: "储物柜-3",
    href: "resource/items/{{ theme }}/lockers_3.png",
    width: 2400,
    height: 1360,
    tag: "储物间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 55,
    description: "洗菜池-1",
    href: "resource/items/{{ theme }}/vegetable_washing_pool_1.png",
    width: 760,
    height: 470,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 56,
    description: "组合沙发-4",
    href: "resource/items/{{ theme }}/combination_sofa_4.png",
    width: 1800,
    height: 1595,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 57,
    description: "台球桌",
    href: "resource/items/{{ theme }}/pool_table.png",
    width: 2540,
    height: 1400,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 58,
    description: "置物台-1",
    href: "resource/items/{{ theme }}/shelf_1.png",
    width: 1632,
    height: 560,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 59,
    description: "储物柜-2",
    href: "resource/items/{{ theme }}/locker_2.png",
    width: 2640,
    height: 600,
    tag: "储物间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 60,
    description: "户外桌椅",
    href: "resource/items/{{ theme }}/outdoor_tables_and_chairs.png",
    width: 3e3,
    height: 2800,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 61,
    description: "洗衣机-1",
    href: "resource/items/{{ theme }}/washing_machine_1.png",
    width: 850,
    height: 600,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 62,
    description: "双人床-1",
    href: "resource/items/{{ theme }}/double_1.png",
    width: 2851,
    height: 2200,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 63,
    description: "六人餐桌",
    href: "resource/items/{{ theme }}/table_for_six.png",
    width: 2230,
    height: 1700,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 64,
    description: "洽谈沙发椅",
    href: "resource/items/{{ theme }}/sofa_chair.png",
    width: 1e3,
    height: 950,
    tag: "其他",
    direction: 1,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 65,
    description: "三人沙发",
    href: "resource/items/{{ theme }}/three_seat_sofa.png",
    width: 2670,
    height: 950,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 66,
    description: "会客桌",
    href: "resource/items/{{ theme }}/reception_table.png",
    width: 1800,
    height: 1800,
    tag: "其他",
    direction: 1,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 67,
    description: "健身机",
    href: "resource/items/{{ theme }}/fitness_machine.png",
    width: 2200,
    height: 800,
    tag: "其他",
    direction: 1,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 68,
    description: "沙发组合-3",
    href: "resource/items/{{ theme }}/sofa_combination_3.png",
    width: 2670,
    height: 2330,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 69,
    description: "双开冰箱",
    href: "resource/items/{{ theme }}/double_refrigerator.png",
    width: 720,
    height: 600,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 70,
    description: "车库工具箱",
    href: "resource/items/{{ theme }}/garage_toolbox.png",
    width: 1280,
    height: 500,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 71,
    description: "储物柜-4",
    href: "resource/items/{{ theme }}/locker_4.png",
    width: 2440,
    height: 2440,
    tag: "储物间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 72,
    description: "临时餐台",
    href: "resource/items/{{ theme }}/temporary_dining_table.png",
    width: 1e3,
    height: 1500,
    tag: "厨房",
    direction: 1,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 73,
    description: "置物台-2",
    href: "resource/items/{{ theme }}/shelf_2.png",
    width: 1590,
    height: 600,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 74,
    description: "四人餐桌",
    href: "resource/items/{{ theme }}/table_for_four.png",
    width: 1700,
    height: 1700,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 75,
    description: "洽谈桌",
    href: "resource/items/{{ theme }}/negotiating_table.png",
    width: 950,
    height: 950,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 76,
    description: "游泳池-1",
    href: "resource/items/{{ theme }}/swimming_pool_1.png",
    width: 4300,
    height: 5340,
    tag: "其他",
    direction: 1,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 77,
    description: "毛巾凳",
    href: "resource/items/{{ theme }}/towel_stool.png",
    width: 800,
    height: 500,
    tag: "卫生间",
    direction: 0,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 78,
    description: "电梯",
    href: "resource/items/{{ theme }}/lift.png",
    width: 2e3,
    height: 2e3,
    tag: "楼梯",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 79,
    description: "AC",
    href: "resource/items/{{ theme }}/ac.png",
    width: 850,
    height: 320,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 80,
    description: "二人餐桌",
    href: "resource/items/{{ theme }}/table_for_two.png",
    width: 780,
    height: 1500,
    tag: "客厅",
    direction: 1,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 81,
    description: "双人床（无床头柜）-2",
    href: "resource/items/{{ theme }}/double_bed_without_bedside_table_2.png",
    width: 1500,
    height: 2200,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 82,
    description: "双人床（无床头柜）-3",
    href: "resource/items/{{ theme }}/double_bed_without_bedside_table_3.png",
    width: 1800,
    height: 2200,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 83,
    description: "床头柜",
    href: "resource/items/{{ theme }}/bedstand.png",
    width: 500,
    height: 500,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 84,
    description: "单开门冰箱",
    href: "resource/items/{{ theme }}/refrigerator.png",
    width: 650,
    height: 670,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 85,
    description: "沙发组合-5",
    href: "resource/items/{{ theme }}/sofa_combination_5.png",
    width: 1598,
    height: 1418,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 86,
    description: "沙发组合-6",
    href: "resource/items/{{ theme }}/sofa_combination_6.png",
    width: 2680,
    height: 1790,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 87,
    description: "四人餐桌-1",
    href: "resource/items/{{ theme }}/table_for_four_1.png",
    width: 1600,
    height: 1700,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 88,
    description: "小单人沙发",
    href: "resource/items/{{ theme }}/chair_2.png",
    width: 460,
    height: 416,
    tag: "客厅",
    direction: 1,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 89,
    description: "小洗手池",
    href: "resource/items/{{ theme }}/sink_small.png",
    width: 600,
    height: 500,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 90,
    description: "小厨",
    href: "resource/items/{{ theme }}/kitchen_small.png",
    width: 740,
    height: 550,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 91,
    description: "小衣柜",
    href: "resource/items/{{ theme }}/wardrobe_small.png",
    width: 910,
    height: 600,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 92,
    description: "淋浴房",
    href: "resource/items/{{ theme }}/shower.png",
    width: 650,
    height: 670,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 93,
    description: "鞋柜-1",
    href: "resource/items/{{ theme }}/shoe_cabinet_1.png",
    width: 900,
    height: 400,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 94,
    description: "鞋柜-2",
    href: "resource/items/{{ theme }}/shoe_cabinet_2.png",
    width: 1500,
    height: 400,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 95,
    description: "鞋柜-3",
    href: "resource/items/{{ theme }}/shoe_cabinet_3.png",
    width: 2e3,
    height: 400,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 96,
    description: "电视柜-1",
    href: "resource/items/{{ theme }}/tv_cabinet_1.png",
    width: 1500,
    height: 350,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 97,
    description: "电视柜-2",
    href: "resource/items/{{ theme }}/tv_cabinet_2.png",
    width: 2040,
    height: 350,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 98,
    description: "电视柜-3",
    href: "resource/items/{{ theme }}/tv_cabinet_3.png",
    width: 3e3,
    height: 350,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 99,
    description: "餐边柜-1",
    href: "resource/items/{{ theme }}/sideboard_1.png",
    width: 900,
    height: 550,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 100,
    description: "餐边柜-2",
    href: "resource/items/{{ theme }}/sideboard_2.png",
    width: 1500,
    height: 550,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 101,
    description: "餐边柜-3",
    href: "resource/items/{{ theme }}/sideboard_3.png",
    width: 2e3,
    height: 550,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 102,
    description: "燃气灶-2",
    href: "resource/items/{{ theme }}/gas_stove_2.png",
    width: 900,
    height: 550,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 103,
    description: "洗菜池-2",
    href: "resource/items/{{ theme }}/vegetable_washing_pool_2.png",
    width: 900,
    height: 550,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 104,
    description: "橱柜-1",
    href: "resource/items/{{ theme }}/kitchen_cabinet_1.png",
    width: 550,
    height: 550,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 105,
    description: "橱柜-2",
    href: "resource/items/{{ theme }}/kitchen_cabinet_2.png",
    width: 900,
    height: 550,
    tag: "厨房",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 106,
    description: "花洒",
    href: "resource/items/{{ theme }}/shower_head.png",
    width: 260,
    height: 200,
    tag: "卫生间",
    direction: 1,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 107,
    description: "淋浴屏",
    href: "resource/items/{{ theme }}/shower_panel.png",
    width: 1500,
    height: 100,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 108,
    description: "洗衣机-2",
    href: "resource/items/{{ theme }}/washing_machine_2.png",
    width: 600,
    height: 500,
    tag: "卫生间",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 109,
    description: "双人床-5",
    href: "resource/items/{{ theme }}/double_5.png",
    width: 1500,
    height: 2e3,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 110,
    description: "双人床-6",
    href: "resource/items/{{ theme }}/double_6.png",
    width: 1800,
    height: 2e3,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 111,
    description: "双人床-7",
    href: "resource/items/{{ theme }}/double_7.png",
    width: 2e3,
    height: 2200,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 112,
    description: "双人床-8",
    href: "resource/items/{{ theme }}/double_8.png",
    width: 2300,
    height: 2200,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 113,
    description: "梳妆台",
    href: "resource/items/{{ theme }}/dressing_table.png",
    width: 1200,
    height: 900,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 114,
    description: "儿童床-1",
    href: "resource/items/{{ theme }}/children_bed_1.png",
    width: 1400,
    height: 2e3,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 115,
    description: "儿童床-2",
    href: "resource/items/{{ theme }}/children_bed_2.png",
    width: 1700,
    height: 2e3,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 116,
    description: "儿童床-3",
    href: "resource/items/{{ theme }}/children_bed_3.png",
    width: 2e3,
    height: 2200,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 117,
    description: "儿童书桌-1",
    href: "resource/items/{{ theme }}/children_desk_1.png",
    width: 1e3,
    height: 800,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 118,
    description: "儿童书桌-2",
    href: "resource/items/{{ theme }}/children_desk_2.png",
    width: 1200,
    height: 800,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 119,
    description: "儿童书桌-3",
    href: "resource/items/{{ theme }}/children_desk_3.png",
    width: 1500,
    height: 800,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 120,
    description: "儿童活动区域-1",
    href: "resource/items/{{ theme }}/children_carpet_1.png",
    width: 600,
    height: 600,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 121,
    description: "儿童活动区域-2",
    href: "resource/items/{{ theme }}/children_carpet_2.png",
    width: 1200,
    height: 1200,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 122,
    description: "儿童活动区域-3",
    href: "resource/items/{{ theme }}/children_carpet_3.png",
    width: 1800,
    height: 1800,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 123,
    description: "茶榻组合-1",
    href: "resource/items/{{ theme }}/tea_table_combination_1.png",
    width: 2e3,
    height: 1400,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 124,
    description: "茶榻组合-2",
    href: "resource/items/{{ theme }}/tea_table_combination_2.png",
    width: 2500,
    height: 1400,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 125,
    description: "茶榻组合-3",
    href: "resource/items/{{ theme }}/tea_table_combination_3.png",
    width: 3e3,
    height: 1800,
    tag: "其他",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 126,
    description: "儿童衣柜-1",
    href: "resource/items/{{ theme }}/children_wardrobe_1.png",
    width: 900,
    height: 500,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 127,
    description: "儿童衣柜-2",
    href: "resource/items/{{ theme }}/children_wardrobe_2.png",
    width: 1200,
    height: 500,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 128,
    description: "儿童衣柜-3",
    href: "resource/items/{{ theme }}/children_wardrobe_3.png",
    width: 1500,
    height: 500,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 129,
    description: "儿童书柜-1",
    href: "resource/items/{{ theme }}/children_bookcase_1.png",
    width: 800,
    height: 450,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 130,
    description: "儿童书柜-2",
    href: "resource/items/{{ theme }}/children_bookcase_2.png",
    width: 1200,
    height: 450,
    tag: "卧室",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 131,
    description: "折行双跑楼梯",
    href: "resource/items/{{ theme }}/folding_double_running_stairs.png",
    width: 3e3,
    height: 3e3,
    tag: "楼梯",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 132,
    description: "平行双跑楼梯",
    href: "resource/items/{{ theme }}/parallel_double_running_stairs.png",
    width: 2500,
    height: 3600,
    tag: "楼梯",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 133,
    description: "折行三跑楼梯",
    href: "resource/items/{{ theme }}/folding_treble_running_stairs.png",
    width: 4300,
    height: 2700,
    tag: "楼梯",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !0
  },
  {
    type: 134,
    description: "手枪",
    href: "resource/items/{{ theme }}/pistol.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !1
  },
  {
    type: 135,
    description: "血迹",
    href: "resource/items/{{ theme }}/bloodstain.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 2,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !1
  },
  {
    type: 136,
    description: "手印",
    href: "resource/items/{{ theme }}/handprint.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !1
  },
  {
    type: 137,
    description: "足迹",
    href: "resource/items/{{ theme }}/footprint.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !1
  },
  {
    type: 138,
    description: "车轮轨迹",
    href: "resource/items/{{ theme }}/wheelprint.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !1
  },
  {
    type: 139,
    description: "弹头",
    href: "resource/items/{{ theme }}/bullet.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !1
  },
  {
    type: 140,
    description: "弹壳",
    href: "resource/items/{{ theme }}/shell.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 1,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !1
  },
  {
    type: 141,
    description: "尸体",
    href: "resource/items/{{ theme }}/corpse.png",
    width: 1500,
    height: 1500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["legacy", "realsee"],
    label: !1
  },
  {
    type: 142,
    description: "空气净化器",
    href: "resource/items/{{ theme }}/airscrubber.png",
    width: 580,
    height: 380,
    tag: "其他",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 143,
    description: "吹风机",
    href: "resource/items/{{ theme }}/airblower.png",
    width: 640,
    height: 600,
    tag: "其他",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 144,
    description: "除湿器",
    href: "resource/items/{{ theme }}/dehumidifier.png",
    width: 480,
    height: 430,
    tag: "其他",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 145,
    description: "冰柜",
    href: "resource/items/{{ theme }}/freezer.png",
    width: 800,
    height: 460,
    tag: "厨房",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 146,
    description: "架子",
    href: "resource/items/{{ theme }}/shelf.png",
    width: 1e3,
    height: 380,
    tag: "其他",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 147,
    description: "杂物",
    href: "resource/items/{{ theme }}/sundries.png",
    width: 800,
    height: 800,
    tag: "其他",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 148,
    description: "L型沙发",
    href: "resource/items/{{ theme }}/L_sofa.png",
    width: 3500,
    height: 1800,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 149,
    description: "书桌3",
    href: "resource/items/{{ theme }}/desk_3.png",
    width: 1200,
    height: 680,
    tag: "书房",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 150,
    description: "会议桌-1",
    href: "resource/items/{{ theme }}/conference_table_1.png",
    width: 1600,
    height: 1100,
    tag: "客厅",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 151,
    description: "衣架",
    href: "resource/items/{{ theme }}/coat_hanger.png",
    width: 1200,
    height: 400,
    tag: "卧室",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 152,
    description: "上下铺",
    href: "resource/items/{{ theme }}/bunk_beds.png",
    width: 2e3,
    height: 1040,
    tag: "卧室",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 153,
    description: "蹲坑",
    href: "resource/items/{{ theme }}/squatting.png",
    width: 600,
    height: 480,
    tag: "卫生间",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 154,
    description: "男尸",
    href: "resource/items/{{ theme }}/male_corpse.png",
    width: 1600,
    height: 800,
    tag: "物证痕迹",
    direction: 1,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 155,
    description: "女尸",
    href: "resource/items/{{ theme }}/female_corpse.png",
    width: 1500,
    height: 800,
    tag: "物证痕迹",
    direction: 1,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 156,
    description: "擦蹭状血迹",
    href: "resource/items/{{ theme }}/rub-like-bookd-stains.png",
    width: 1200,
    height: 800,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 157,
    description: "擦拭物",
    href: "resource/items/{{ theme }}/wipes.png",
    width: 300,
    height: 60,
    tag: "物证痕迹",
    direction: 3,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 158,
    description: "纸团",
    href: "resource/items/{{ theme }}/paper_ball.png",
    width: 400,
    height: 400,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 159,
    description: "未整理的被子",
    href: "resource/items/{{ theme }}/unarranged_quilts.png",
    width: 800,
    height: 500,
    tag: "其他",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 160,
    description: "手机",
    href: "resource/items/{{ theme }}/mobile_phone.png",
    width: 400,
    height: 280,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 161,
    description: "菜刀",
    href: "resource/items/{{ theme }}/kitchen_knife.png",
    width: 500,
    height: 220,
    tag: "物证痕迹",
    direction: 3,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 162,
    description: "矩形",
    href: "resource/items/{{ theme }}/rectangle.png",
    width: 900,
    height: 600,
    tag: "自定义",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0,
    svgWidth: 90,
    svgHeight: 60,
    svg: '<rect x=".75" y=".75" width="88.5" height="58.5" rx="4" fill="#FFF" stroke="#3D404E" fill-rule="evenodd" vector-effect="non-scaling-stroke"/>'
  },
  {
    type: 163,
    description: "圆形",
    href: "resource/items/{{ theme }}/circle.png",
    width: 600,
    height: 600,
    tag: "自定义",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 164,
    description: "三角形",
    href: "resource/items/{{ theme }}/triangle.png",
    width: 600,
    height: 600,
    tag: "自定义",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 165,
    description: "五角星形",
    href: "resource/items/{{ theme }}/five_pointedstar.png",
    width: 800,
    height: 800,
    tag: "自定义",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 166,
    description: "会议桌-2",
    href: "resource/items/{{ theme }}/conference_table_2.png",
    width: 2800,
    height: 1800,
    tag: "客厅",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 167,
    description: "餐椅",
    href: "resource/items/{{ theme }}/dining_chair.png",
    width: 500,
    height: 580,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 168,
    description: "转椅-1",
    href: "resource/items/{{ theme }}/rotating_chair_1.png",
    width: 500,
    height: 580,
    tag: "书房",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 169,
    description: "转椅-2",
    href: "resource/items/{{ theme }}/rotating_chair_2.png",
    width: 640,
    height: 640,
    tag: "书房",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 170,
    description: "长方形茶几",
    href: "resource/items/{{ theme }}/rectangular_coffee_table.png",
    width: 1090,
    height: 800,
    tag: "客厅",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 171,
    description: "抽油烟机",
    href: "resource/items/{{ theme }}/smoke_lampblack_machine.png",
    width: 1200,
    height: 800,
    tag: "厨房",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 172,
    description: "电话机",
    href: "resource/items/{{ theme }}/telephone.png",
    width: 500,
    height: 500,
    tag: "日常用品",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 173,
    description: "对讲机",
    href: "resource/items/{{ theme }}/walkie_talkie.png",
    width: 240,
    height: 540,
    tag: "日常用品",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 174,
    description: "花盆",
    href: "resource/items/{{ theme }}/flower_pot.png",
    width: 500,
    height: 500,
    tag: "其他",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 175,
    description: "剪刀",
    href: "resource/items/{{ theme }}/scissors.png",
    width: 500,
    height: 460,
    tag: "日常用品",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 176,
    description: "角柜",
    href: "resource/items/{{ theme }}/corner_cabinet.png",
    width: 1e3,
    height: 1e3,
    tag: "其他",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 177,
    description: "口杯",
    href: "resource/items/{{ theme }}/mouth_cup.png",
    width: 500,
    height: 400,
    tag: "日常用品",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 178,
    description: "盘子",
    href: "resource/items/{{ theme }}/plate.png",
    width: 500,
    height: 500,
    tag: "日常用品",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 179,
    description: "勺子",
    href: "resource/items/{{ theme }}/spoon.png",
    width: 600,
    height: 180,
    tag: "日常用品",
    direction: 1,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 180,
    description: "手提包",
    href: "resource/items/{{ theme }}/handbag.png",
    width: 500,
    height: 500,
    tag: "日常用品",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 181,
    description: "双人沙发",
    href: "resource/items/{{ theme }}/double_sofa.png",
    width: 1600,
    height: 850,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 182,
    description: "藤椅",
    href: "resource/items/{{ theme }}/cane_chair.png",
    width: 640,
    height: 640,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 183,
    description: "拖把",
    href: "resource/items/{{ theme }}/mop.png",
    width: 490,
    height: 1e3,
    tag: "日常用品",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 184,
    description: "卫生纸",
    href: "resource/items/{{ theme }}/toilet_paper.png",
    width: 280,
    height: 300,
    tag: "日常用品",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 185,
    description: "烟盒",
    href: "resource/items/{{ theme }}/cigarette_case.png",
    width: 220,
    height: 300,
    tag: "日常用品",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 186,
    description: "烟头",
    href: "resource/items/{{ theme }}/cigarette_butt.png",
    width: 280,
    height: 220,
    tag: "日常用品",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 187,
    description: "鱼缸",
    href: "resource/items/{{ theme }}/fish_tank.png",
    width: 1e3,
    height: 500,
    tag: "客厅",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 188,
    description: "笔记本电脑",
    href: "resource/items/{{ theme }}/notebook_computer.png",
    width: 500,
    height: 500,
    tag: "日常用品",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 189,
    description: "微波炉",
    href: "resource/items/{{ theme }}/microwave_oven.png",
    width: 600,
    height: 400,
    tag: "厨房",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 190,
    description: "断口",
    href: "resource/items/{{ theme }}/fracture.png",
    width: 1200,
    height: 300,
    tag: "其他",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !0
  },
  {
    type: 191,
    description: "遗物堆",
    href: "resource/items/{{ theme }}/relic_pile.png",
    width: 800,
    height: 800,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 192,
    description: "衣物",
    href: "resource/items/{{ theme }}/clothing.png",
    width: 830,
    height: 810,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 193,
    description: "浴巾",
    href: "resource/items/{{ theme }}/bath_towel.png",
    width: 420,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 194,
    description: "水渍",
    href: "resource/items/{{ theme }}/water_stains.png",
    width: 1070,
    height: 600,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 195,
    description: "螺丝刀",
    href: "resource/items/{{ theme }}/bolt_driver.png",
    width: 300,
    height: 300,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 196,
    description: "凉鞋",
    href: "resource/items/{{ theme }}/sandals.png",
    width: 430,
    height: 460,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 197,
    description: "水果刀",
    href: "resource/items/{{ theme }}/fruit_knife.png",
    width: 300,
    height: 260,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 198,
    description: "匕首",
    href: "resource/items/{{ theme }}/dragger.png",
    width: 400,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 199,
    description: "玻璃弹孔",
    href: "resource/items/{{ theme }}/glass_bullet_hole.png",
    width: 1160,
    height: 1e3,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 200,
    description: "电视",
    href: "resource/items/{{ theme }}/tv.png",
    width: 1120,
    height: 160,
    tag: "客厅",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 201,
    description: "单向楼梯",
    href: "resource/items/{{ theme }}/stairs.png",
    width: 1400,
    height: 3600,
    tag: "楼梯",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 202,
    description: "电脑",
    href: "resource/items/{{ theme }}/computer.png",
    width: 700,
    height: 120,
    tag: "书房",
    direction: 2,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 203,
    description: "工具",
    href: "resource/items/{{ theme }}/tool.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 204,
    description: "特殊",
    href: "resource/items/{{ theme }}/special.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 205,
    description: "生物",
    href: "resource/items/{{ theme }}/biology.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 206,
    description: "毒化",
    href: "resource/items/{{ theme }}/poison.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 207,
    description: "理化",
    href: "resource/items/{{ theme }}/physics&chemistry.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 208,
    description: "文检",
    href: "resource/items/{{ theme }}/document.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 209,
    description: "电子",
    href: "resource/items/{{ theme }}/electronic.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 210,
    description: "人像",
    href: "resource/items/{{ theme }}/portrait.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 211,
    description: "提取物品",
    href: "resource/items/{{ theme }}/extract_items.png",
    width: 500,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 212,
    description: "左脚足迹",
    href: "resource/items/{{ theme }}/footprint_l.png",
    width: 220,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 213,
    description: "右脚足迹",
    href: "resource/items/{{ theme }}/footprint_r.png",
    width: 220,
    height: 500,
    tag: "物证痕迹",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 214,
    description: "电动车",
    href: "resource/items/{{ theme }}/electric_car.png",
    width: 480,
    height: 1320,
    tag: "交通工具",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 215,
    description: "自行车",
    href: "resource/items/{{ theme }}/bike.png",
    width: 380,
    height: 1480,
    tag: "交通工具",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 216,
    description: "摩托车",
    href: "resource/items/{{ theme }}/motorcycle.png",
    width: 500,
    height: 1780,
    tag: "交通工具",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 217,
    description: "越野车",
    href: "resource/items/{{ theme }}/off_road_vehicle.png",
    width: 1700,
    height: 4360,
    tag: "交通工具",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 218,
    description: "卡车",
    href: "resource/items/{{ theme }}/truck.png",
    width: 1880,
    height: 6800,
    tag: "交通工具",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 219,
    description: "客车",
    href: "resource/items/{{ theme }}/bus.png",
    width: 3160,
    height: 8e3,
    tag: "交通工具",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 220,
    description: "叉车",
    href: "resource/items/{{ theme }}/forklift.png",
    width: 940,
    height: 2720,
    tag: "交通工具",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  },
  {
    type: 221,
    description: "拖拉机",
    href: "resource/items/{{ theme }}/tractor.png",
    width: 1740,
    height: 3060,
    tag: "交通工具",
    direction: 0,
    keywords: ["default"],
    themes: ["realsee"],
    label: !1
  }
], l3 = "//vr-image-4.realsee-cdn.cn/release/static/image/doctorstrange/0.6.201-beta/";
function c3(n) {
  const { latitude: t, longitude: e } = n, i = Math.abs(t - Math.PI / 2) > 5 * Math.PI / 180, s = e > 5 * (Math.PI / 180) && e < 355 * (Math.PI / 180);
  return i || s;
}
function h3(n) {
  const { latitude: t, longitude: e } = n, i = Math.abs(t - Math.PI / 2) < 10 * Math.PI / 180, s = e < 30 * (Math.PI / 180) || e > 330 * (Math.PI / 180);
  return i && s;
}
let d3 = class extends Pn {
  constructor(e, i) {
    var l, c;
    super(e);
    // =============== public properties =================
    u(this, "name", "modelFloorplanPlugin");
    u(this, "state");
    // =============== private properties =================
    u(this, "data");
    /** 展示户型图时，需要正确的状态 */
    u(this, "showState");
    /** show 动画的公共 Promise */
    u(this, "showPromise");
    u(this, "app");
    u(this, "panoIndex", 0);
    u(this, "floorIndex", 0);
    u(this, "selector");
    /** 公共 Promise 的 reject 方法 */
    u(this, "showRejection");
    /** 户型图父容器 */
    u(this, "wrapper");
    /** 户型图主容器 */
    u(this, "container", document.createElement("div"));
    /** 展示户型图图前，Five 的 Panorama Longitude */
    u(this, "lastPanoramaLongitude", 0);
    /** 户型图大小 */
    u(this, "size", { width: 0, height: 0 });
    u(this, "defaultMissingFloorConfig");
    /** 是否已经执行过事件监听 */
    u(this, "hasAddedEventListener", !1);
    /** 上一次隐藏是否是用户调用了 hide 导致的 */
    u(this, "isHiddenByHideFunc", !1);
    /** 高亮区域 */
    u(this, "highlightData", {});
    u(this, "items");
    u(this, "store", { roomOnMouse: null });
    /** 销毁插件 */
    u(this, "dispose", () => {
      var e, i;
      this.removeEventListener(), (e = this.app) == null || e.$destroy(), this.app = void 0, (i = this.container) == null || i.remove(), this.data = void 0, this.wrapper = void 0, this.selector = void 0, this.hooks.emit("dispose");
    });
    /** 展示户型图
     * 1. show 函数大部分情况下需要耗时
     * 2. 如果当前已经在展示中，将不会触发任何事件
     * 3. 如果展示过程被中断，将抛出错误
     * 4. 多次调用 show 方法，只会触发一次 showAnimationEnded 事件，但是展示结果会取决于最后一次调用参数
     * 5. 如果多次调用 show 方法，参数与上次参数不一致时，上次 show Promise 会被 reject
     * @param opts.floorIndex 楼层
     * @param opts.modelOpacity 模型透明度
     * @param opts.immediately 是否立即展示
     * @param opts.isAutoShow 是否是自动展示
     * @param opts.userAction 是否是用户行为
     */
    u(this, "show", (...i) => $(this, [...i], function* (e = {}) {
      if (!this.state.enabled || !this.showPromise && this.state.visible)
        return;
      const s = e.userAction !== void 0 ? e.userAction : !0;
      this.updateState({ visible: !0 }, s), this._show(e);
    }));
    /** 隐藏户型图 */
    u(this, "hide", (...i) => $(this, [...i], function* (e = {}) {
      this.state.enabled && (this.isHiddenByHideFunc = !0, this.state.visible !== !1 && (this.updateState({ visible: !1 }, e.userAction || !0), this._hide(e)));
    }));
    /** 更新户型图大小 */
    u(this, "updateSize", () => {
      if (!this.data || !this.container || !this.wrapper)
        return !1;
      const { min: e, max: i } = this.data.bounding, s = i.x - e.x, r = i.y - e.y, o = this.state.config.attachedTo ? { attachedTo: this.state.config.attachedTo } : void 0, a = Hh(this.five, this.wrapper, this.floorIndex, o), l = Math.ceil(s * a), c = Math.ceil(r * a);
      return this.size.width === l && this.size.height === c || (this.container.style.width = l + "px", this.container.style.height = c + "px", this.size = { width: l, height: c }), !0;
    });
    u(this, "highlight", (e) => {
      this.state.config.highlightEnable && (this.highlightData = e, this.render());
    });
    u(this, "unhighlight", () => {
      this.highlightData = {}, this.render();
    });
    u(this, "_disable", (e) => {
      var s, r, o;
      const { userAction: i } = e;
      this.hooks.emit("disable", { userAction: i }), (s = this.showRejection) == null || s.call(this, ii.BreakOffByDisable), this.showPromise = void 0, (r = this.app) == null || r.$destroy(), this.app = void 0, (o = this.container) == null || o.remove(), this.removeEventListener();
    });
    u(this, "_enable", (e) => {
      const { userAction: i } = e;
      this.addEventListener(), this.wrapper && (this.wrapper.append(this.container), this.hooks.emit("enable", { userAction: i }), this.state.visible && this._show({ userAction: i }));
    });
    u(this, "_show", (e) => $(this, null, function* () {
      var o;
      if (!this.state.enabled)
        return;
      if (!((o = this.fiveUtil.model) != null && o.loaded))
        throw new Error(ii.ModelNotLoaded);
      if (!this.data)
        throw new Error(ii.DataNotLoaded);
      if (this.showPromise)
        return this.showPromise;
      const i = {
        floorIndex: this.floorIndex,
        modelOpacity: this.state.config.modelOpacity,
        immediately: !1,
        isAutoShow: !1,
        userAction: !0
      }, s = _(_({}, i), e), r = () => $(this, null, function* () {
        this.hooks.emit("show", { userAction: s.userAction, auto: s.isAutoShow });
        let a = !1, l;
        this.showRejection = (d) => {
          a = !0, l = d;
        };
        const [c] = yield Ss(C0(this.five, this.showState, s.userAction));
        if (c)
          throw c;
        if (a)
          throw l ? new Error(l) : new Error(ii.UnknownError);
        if (!this.updateSize())
          throw new Error(ii.UpdateSizeError);
        this.updatePosition(), this.floorIndex = s.floorIndex, this.fiveUtil.model.show(this.floorIndex);
      });
      return this.isHiddenByHideFunc = !1, this.showPromise = r().then(() => {
        this.showPromise = void 0, this.showRejection = void 0;
        const a = s.modelOpacity, l = s.immediately ? 0 : w0;
        kr(this.five, a, l), this.render(l), this.hooks.emit("showAnimationEnded", {
          auto: s.isAutoShow,
          userAction: s.userAction
        });
      }).catch((a) => {
        if (this.showPromise = void 0, this.showRejection = void 0, this.updateState({ visible: !1 }, s.userAction), !s.isAutoShow && a instanceof Error)
          throw a;
      }), this.showPromise;
    }));
    u(this, "_hide", (e) => {
      var r;
      (r = this.showRejection) == null || r.call(this, ii.BreakOffByHide), this.showPromise = void 0;
      const s = _(_({}, {
        userAction: !0,
        isAutoHide: !1
      }), e);
      kr(this.five, 1, 0), this.hooks.emit("hide", { auto: s.isAutoHide, userAction: s.userAction }), this.render();
    });
    u(this, "handleClick", () => {
      if (!this.state.visible)
        return;
      if (this.hooks.emit("click", this.store.roomOnMouse))
        return !1;
    });
    /** modelLoaded 之后自动执行 append container 操作  */
    u(this, "onFiveModelLoaded", () => {
      const i = this.five.model.bounding.getCenter(new P.Vector3());
      if (this.showState.offset = i, this.state.enabled === !1 || this.wrapper || !this.selector)
        return;
      const s = this.selector instanceof Element ? this.selector : document.querySelector(this.selector);
      if (!s)
        throw new Error("不正确的父容器选择器");
      this.wrapper = s, s.append(this.container);
    });
    /** 更改模型时，自动隐藏户型图 */
    u(this, "onFiveModeChange", (e) => {
      e !== this.showState.mode && (this.updateState({ visible: !1 }, !1), this._hide({ userAction: !1 }));
    });
    /** 惯性结束后，判断能否自动展示户型图 */
    u(this, "onFiveInteriaPan", (e, i) => {
      if (!i || this.state.visible || this.state.config.autoShowEnable === !1 || this.isHiddenByHideFunc)
        return;
      const s = this.five.getCurrentState();
      s.mode === this.showState.mode && h3(s) && (this.updateState({ visible: !0 }, !0), this._show({ isAutoShow: !0 }));
    });
    /** panoIndex 改变时，更新 floorIndex */
    u(this, "onFivePanoArrived", (e) => {
      var i;
      (i = this.five) != null && i.work && (this.panoIndex = e, this.floorIndex = this.workUtil.observers[e].floorIndex);
    });
    /** cameraUpdate 时判断户型图是否应该自动隐藏 */
    u(this, "onFiveCameraUpdate", (e, i) => {
      if (!this.state.visible || this.showPromise)
        return;
      const s = this.five.getCurrentState();
      this.updatePosition(), this.updateSize(), c3(s) && (this.updateState({ visible: !1 }, i), this._hide({ userAction: i }));
    });
    /** 户型图展示中，转动三维模型，结束时应该自动修复模型状态 */
    u(this, "onFiveWantsPanGesture", (e, i) => {
      if (this.five.getCurrentState().mode === this.showState.mode && this.state.config.autoShowEnable !== !1 && i && this.state.visible)
        return this.five.updateCamera(Mr(this.showState, ["offset"]), 0), !1;
    });
    /** 阻止点击分间走点 */
    u(this, "onFiveWantsTapGesture", () => this.handleClick());
    /** 从 Panorama 切换到其他模态时，记录当前的相机水平视角 */
    u(this, "onFiveWantsChangeMode", (e, i) => {
      i === "Panorama" && e === this.showState.mode && (this.lastPanoramaLongitude = this.five.getCurrentState().longitude);
    });
    /** 模型楼层高亮改变时，自动进行楼层切换 */
    u(this, "onModelShownFloorChange", (e) => {
      if (this.floorIndex !== e) {
        if (e === null) {
          const i = this.five.getCurrentState().panoIndex;
          this.floorIndex = this.workUtil.observers[i].floorIndex;
          return;
        }
        this.floorIndex = e, this.updateSize(), this.render();
      }
    });
    i != null && i.selector && (this.selector = i.selector, console.warn("不推荐继续使用 params.selector 配置父容器，请使用 appendTo 方法")), this.showState = {
      mode: "Mapview",
      longitude: 0,
      latitude: Math.PI / 2
    }, this.defaultMissingFloorConfig = {
      imageURL: this.staticPrefix + "/release/web/saas/missing-floorplan.e274c596.png",
      imageWidth: 200,
      imageHeight: 120,
      text: (c = (l = i.i18n) == null ? void 0 : l.call(i, "暂无平面图")) != null ? c : "暂无平面图",
      textFontSize: 14
    };
    const s = {
      northDesc: "北",
      modelOpacity: 1,
      cameraEnable: !0,
      highlightEnable: !1,
      hoverEnable: !0,
      compassEnable: !0,
      autoShowEnable: !0,
      ruleLabelsEnable: !0,
      roomLabelsEnable: !0,
      roomAreaEnable: !0,
      roomNameEnable: !0,
      roomNameOtherTypeEnable: !0,
      roomDimensionEnable: !0,
      cameraImageUrl: $n,
      attachedTo: Cs.BOUNDING_CENTER,
      getLabelElement: void 0,
      adaptiveRoomLabelVisibleEnable: !0,
      missingFloorConfig: _(_({}, this.defaultMissingFloorConfig), i.missingFloorConfig),
      i18n: (h) => h,
      getRoomAreaText: (h) => (h / 1e6).toFixed(1) + "㎡",
      getRoomDimensionText: (h, d) => (h / 1e3).toFixed(1) + "m × " + (d / 1e3).toFixed(1) + "m",
      getRuleDistanceText: (h) => h.toString()
    }, r = i ? Mr(i, ["selector", "scale"]) : {}, o = _(_({}, s.missingFloorConfig), r.missingFloorConfig), a = de(_(_({}, s), r), { missingFloorConfig: o });
    this.state = { enabled: !0, visible: !1, config: a }, this.initContainer(), ui(e).then(this.onFiveModelLoaded), e.once("dispose", this.dispose), this.addEventListener();
  }
  load(e, i, s = !0) {
    return $(this, null, function* () {
      function r(h) {
        return Object.prototype.hasOwnProperty.apply(h, ["version"]);
      }
      const o = e;
      o && si(o.version) && console.warn("传入 serverData.data 的方式后续可能不再支持，请把 serverData 整体传入 load 函数");
      const a = JSON.parse(JSON.stringify(e)), l = r(a) ? a.data : a, c = this.data;
      this.data = yield es(l), this.hooks.emit("dataLoaded", this.data), this.hooks.emit("dataChange", this.data, c), i && this.updateState(i, s), this.render();
    });
  }
  loadItems(e) {
    const { min: i, max: s } = this.data.bounding, r = s.x - i.x, o = s.y - i.y;
    this.data.floorDatas.forEach((a, l) => {
      a.items = e[l].filter((c) => c.displayName === "Item-SimpleItem").map((c) => {
        const { x: h, y: d, width: f, height: g, notes: p, type: m, id: v, rotateX: b, rotateY: w, rotateZ: x = 0 } = c;
        return {
          id: v,
          positionInImage: { x: (h - i.x) / r, y: (s.y - d) / o },
          width: f / r,
          height: g / o,
          src: l3 + Ou[m].href.replace(/\{\{\stheme\s\}\}/, "realsee"),
          notes: p || Ou[m].description,
          rotateX: b,
          rotateY: w,
          rotateZ: x
        };
      });
    });
  }
  /** 把插件的渲染DOM插入到对应的容器中去 */
  appendTo(e) {
    if (this.wrapper = e, !!this.state.enabled)
      return e.appendChild(this.container), this.render(), this;
  }
  /** 启用插件 */
  enable(e = {}) {
    if (this.state.enabled)
      return;
    const i = e.userAction !== void 0 ? e.userAction : !0;
    this.updateState({ enabled: !0 }, e.userAction || i), this._enable({ userAction: i });
  }
  /** 禁用插件 */
  disable(e = {}) {
    if (!this.state.enabled)
      return;
    const i = e.userAction !== void 0 ? e.userAction : !0;
    this.updateState({ enabled: !1 }, e.userAction || i), this._disable({ userAction: i });
  }
  /** 更改插件 State */
  setState(e, i = {}) {
    const s = this.state, r = i.userAction !== void 0 ? i.userAction : !0;
    if (this.updateState(e, r), e.enabled !== void 0 && s.enabled !== e.enabled && (e.enabled ? this._enable({ userAction: r }) : this._disable({ userAction: r })), e.visible !== void 0 && s.visible !== e.visible) {
      const o = { userAction: r };
      e.visible ? this._show(o) : this._hide(o);
    }
  }
  changeConfigs(e, i = !0) {
    this.updateState({ config: e }, i), this.render();
  }
  /** 更新户型图位置 */
  updatePosition() {
    var a;
    const e = _h(this.five, this.floorIndex, this.state.config.attachedTo), i = (a = this.fiveUtil.model) == null ? void 0 : a.bounding.getCenter(new P.Vector3()).setY(e);
    if (!i)
      return;
    const s = i.clone().project(this.five.camera), r = (s.x + 1) / 2, o = -(s.y - 1) / 2;
    this.container.style.left = r * 100 + "%", this.container.style.top = o * 100 + "%";
  }
  formatData(e) {
    return $(this, null, function* () {
      return yield es(e.data);
    });
  }
  updateState(e, i) {
    var a;
    const s = this.state, r = (a = e.config) != null && a.missingFloorConfig ? _(_({}, s.config.missingFloorConfig), e.config.missingFloorConfig) : s.config.missingFloorConfig, o = e.config ? de(_(_({}, s.config), e.config), { missingFloorConfig: r }) : s.config;
    this.state = de(_(_({}, this.state), e), { config: o }), !Qt(this.state, s, { deep: !0 }) && this.hooks.emit("stateChange", { state: this.state, prevState: s, userAction: i });
  }
  /** 如果用户是通过 selector 设置父容器，需要在 modelLoaded 之后把 container 自动放到父容器里
   *
   * - TODO: 等 selector 功能下掉之后删除这个逻辑
   */
  initContainer() {
    this.container.classList.add("floorplan-plugin"), Object.assign(this.container.style, {
      position: "absolute",
      left: "50%",
      top: "50%",
      transform: "translate(-50%, -50%)",
      zIndex: 10,
      pointerEvents: "none"
    }), this.five.addExtraElement(this.container);
  }
  addEventListener() {
    if (!this.state.enabled || this.hasAddedEventListener)
      return;
    const e = this.five;
    e.on("modeChange", this.onFiveModeChange), e.on("interiaPan", this.onFiveInteriaPan), e.on("panoArrived", this.onFivePanoArrived), e.on("cameraUpdate", this.onFiveCameraUpdate), e.on("wantsPanGesture", this.onFiveWantsPanGesture), e.on("wantsTapGesture", this.onFiveWantsTapGesture), e.on("wantsChangeMode", this.onFiveWantsChangeMode), e.on("modelShownFloorChange", this.onModelShownFloorChange);
  }
  removeEventListener() {
    const e = this.five;
    this.hasAddedEventListener = !1, e.off("modelLoaded", this.onFiveModelLoaded), e.off("modeChange", this.onFiveModeChange), e.off("panoArrived", this.onFivePanoArrived), e.off("cameraUpdate", this.onFiveCameraUpdate), e.off("wantsPanGesture", this.onFiveWantsPanGesture), e.off("wantsTapGesture", this.onFiveWantsTapGesture), e.off("wantsChangeMode", this.onFiveWantsChangeMode), e.off("modelShownFloorChange", this.onModelShownFloorChange);
  }
  render(e) {
    if (!this.state.enabled || !this.container || !this.data || this.size.width === 0 || this.showPromise)
      return;
    const i = de(_({}, this.state.config), {
      visible: this.state.visible,
      duration: e != null ? e : 0,
      panoIndex: this.panoIndex,
      floorIndex: this.floorIndex,
      floorplanData: this.data,
      lastPanoramaLongitude: this.lastPanoramaLongitude,
      highlightData: this.highlightData,
      items: this.items,
      store: this.store
    });
    if (this.app)
      return this.app.$set(i);
    this.app = new Vh({ target: this.container, intro: !0, props: i });
  }
};
const Fx = (n, t) => new d3(n, t);
let u3 = class extends Pn {
  constructor(e, i) {
    var l, c;
    super(e);
    // =============== public properties =================
    u(this, "name", "topviewFloorplanPlugin");
    u(this, "state");
    // =============== private properties =================
    u(this, "data");
    u(this, "app");
    u(this, "selector");
    u(this, "panoIndex", 0);
    u(this, "floorIndex", 0);
    /** 户型图父容器 */
    u(this, "wrapper");
    /** 户型图主容器 */
    u(this, "container", document.createElement("div"));
    /** 展示户型图图前，Five 的 Panorama Longitude */
    u(this, "lastPanoramaLongitude", 0);
    /** 户型图大小 */
    u(this, "size", { width: 0, height: 0 });
    u(this, "defaultMissingFloorConfig");
    /** 是否已经执行过事件监听 */
    u(this, "hasAddedEventListener", !1);
    /** 上一次隐藏是否是用户调用了 hide 导致的 */
    u(this, "isHiddenByHideFunc", !1);
    /** 高亮区域 */
    u(this, "highlightData", {});
    /** 更新户型图大小 */
    u(this, "updateSize", () => {
      if (!this.data || !this.container || !this.wrapper || this.five.getCurrentState().mode !== "Topview")
        return !1;
      const { min: e, max: i } = this.data.bounding, s = i.x - e.x, r = i.y - e.y, o = this.state.config.attachedTo ? { attachedTo: this.state.config.attachedTo } : void 0, a = Hh(this.five, this.wrapper, this.floorIndex, o), l = Math.ceil(s * a), c = Math.ceil(r * a);
      return this.size.width === l && this.size.height === c || (this.container.style.width = l + "px", this.container.style.height = c + "px", this.size = { width: l, height: c }), !0;
    });
    /** 销毁插件 */
    u(this, "dispose", () => {
      var e, i;
      this.removeEventListener(), (e = this.app) == null || e.$destroy(), this.app = void 0, (i = this.container) == null || i.remove(), this.data = void 0, this.wrapper = void 0, this.selector = void 0, this.hooks.emit("dispose");
    });
    u(this, "highlight", (e) => {
      this.state.config.highlightEnable && (this.highlightData = e, this.render());
    });
    u(this, "unhighlight", () => {
      this.highlightData = {}, this.render();
    });
    u(this, "_disable", (e) => {
      var s, r;
      const { userAction: i } = e;
      (s = this.app) == null || s.$destroy(), this.app = void 0, (r = this.container) == null || r.remove(), this.removeEventListener(), this.hooks.emit("disable", { userAction: i });
    });
    /** modelLoaded 之后自动执行 append container 操作  */
    u(this, "onFiveModelLoaded", () => {
      if (this.state.enabled === !1 || this.wrapper || !this.selector)
        return;
      const e = this.selector instanceof Element ? this.selector : document.querySelector(this.selector);
      if (!e)
        throw new Error("不正确的父容器选择器");
      this.wrapper = e, e.append(this.container);
    });
    /** 非 Topview 态隐藏户型图 */
    u(this, "onFiveModeChange", (...[e, , , , i]) => {
      e !== "Topview" && this.state.visible && (this.updateState({ visible: !1 }, i), this._hide({ userAction: i }));
    });
    u(this, "onFivePanoArrived", (e) => {
      var i;
      (i = this.five) != null && i.work && (this.panoIndex = e, this.floorIndex = this.workUtil.observers[e].floorIndex);
    });
    u(this, "onFiveCameraUpdate", (e, i) => {
      this.state.visible && (this.updatePosition(), this.updateSize());
    });
    u(this, "onFiveWantsGesture", (e) => {
      if (!(e !== "pan" && e !== "pinch" && e !== "mouseWheel") && this.state.visible && !this.state.config.gestureEnable)
        return !1;
    });
    u(this, "onFiveWantsMoveToPano", () => {
      if (this.state.visible && this.state.config.preventRoomClick)
        return !1;
    });
    /** 动画结束后是 Topview 态就展示户型图 */
    u(this, "onFiveInitAnimationEnded", (...[, , e]) => {
      const { mode: i } = this.five.getCurrentState();
      i === "Topview" && !this.isHiddenByHideFunc && !this.state.visible && this.state.config.autoShowEnable && (this.updateState({ visible: !0 }, e), this._show({ userAction: e }));
    });
    u(this, "onModelShownFloorChange", (e) => {
      if (this.floorIndex !== e) {
        if (e === null) {
          const i = this.five.getCurrentState().panoIndex;
          this.floorIndex = this.workUtil.observers[i].floorIndex;
          return;
        }
        this.floorIndex = e, this.updateSize(), this.render();
      }
    });
    i != null && i.selector && (this.selector = i.selector, console.warn("不推荐继续使用 params.selector 配置父容器，请使用 appendTo 方法")), this.defaultMissingFloorConfig = {
      imageURL: this.staticPrefix + "/release/web/saas/missing-floorplan.e274c596.png",
      imageWidth: 200,
      imageHeight: 120,
      text: (c = (l = i.i18n) == null ? void 0 : l.call(i, "暂无平面图")) != null ? c : "暂无平面图",
      textFontSize: 14
    };
    const s = {
      northDesc: "北",
      modelOpacity: 1,
      cameraEnable: !0,
      hoverEnable: !0,
      highlightEnable: !1,
      compassEnable: !0,
      gestureEnable: !1,
      autoShowEnable: !0,
      ruleLabelsEnable: !0,
      roomLabelsEnable: !0,
      roomAreaEnable: !0,
      roomNameEnable: !0,
      roomNameOtherTypeEnable: !0,
      roomDimensionEnable: !0,
      cameraImageUrl: $n,
      attachedTo: Cs.BOUNDING_CENTER,
      getLabelElement: void 0,
      missingFloorConfig: _(_({}, this.defaultMissingFloorConfig), i.missingFloorConfig),
      i18n: (h) => h,
      adaptiveRoomLabelVisibleEnable: !0,
      getRoomAreaText: (h) => (h / 1e6).toFixed(1) + "㎡",
      getRoomDimensionText: (h, d) => (h / 1e3).toFixed(1) + "m × " + (d / 1e3).toFixed(1) + "m",
      getRuleDistanceText: (h) => h.toString()
    }, r = i ? Mr(i, ["selector", "scale"]) : {}, o = _(_({}, s.missingFloorConfig), r.missingFloorConfig), a = de(_(_({}, s), r), { missingFloorConfig: o });
    this.state = { enabled: !0, visible: !1, config: a }, this.initContainer(), e.model.loaded ? this.onFiveModelLoaded() : e.once("modelLoaded", this.onFiveModelLoaded), e.once("dispose", this.dispose), this.addEventListener();
  }
  load(e, i, s = !0) {
    return $(this, null, function* () {
      function r(h) {
        return Object.prototype.hasOwnProperty.apply(h, ["version"]);
      }
      const o = e;
      o && si(o.version) && console.warn("传入 serverData.data 的方式后续可能不再支持，请把 serverData 整体传入 load 函数");
      const a = JSON.parse(JSON.stringify(e)), l = r(a) ? a.data : a, c = this.data;
      this.data = yield es(l), this.hooks.emit("dataLoaded", this.data), this.hooks.emit("dataChange", this.data, c), i && this.updateState(i, s), this.render();
    });
  }
  /** 更新户型图位置 */
  updatePosition() {
    var a;
    const e = _h(this.five, this.floorIndex, this.state.config.attachedTo), i = (a = this.five.model) == null ? void 0 : a.bounding.getCenter(new P.Vector3()).setY(e);
    if (!i)
      return;
    const s = i.clone().project(this.five.camera), r = (s.x + 1) / 2, o = -(s.y - 1) / 2;
    this.container.style.left = r * 100 + "%", this.container.style.top = o * 100 + "%";
  }
  /** 把插件的渲染DOM插入到对应的容器中去 */
  appendTo(e) {
    if (this.wrapper = e, !!this.state.enabled)
      return e.appendChild(this.container), this.render(), this;
  }
  show() {
    return $(this, arguments, function* (e = {}) {
      if (this.state.visible)
        return;
      const i = e.userAction !== void 0 ? e.userAction : !0;
      this.updateState({ visible: !0 }, i), this._show({ userAction: i });
    });
  }
  hide() {
    return $(this, arguments, function* (e = {}) {
      if (this.isHiddenByHideFunc = !0, !this.state.visible)
        return;
      const i = e.userAction !== void 0 ? e.userAction : !0;
      this.updateState({ visible: !1 }, i), this._hide({ userAction: i });
    });
  }
  enable(e = {}) {
    if (this.state.enabled)
      return;
    const i = e.userAction !== void 0 ? e.userAction : !0;
    this.updateState({ enabled: !0 }, e.userAction || i), this._enable({ userAction: i });
  }
  disable(e = {}) {
    if (!this.state.enabled)
      return;
    const i = e.userAction !== void 0 ? e.userAction : !0;
    this.updateState({ enabled: !1 }, e.userAction || i), this._disable({ userAction: i });
  }
  /** 更改插件 State */
  setState(e, i = {}) {
    const s = this.state, r = i.userAction !== void 0 ? i.userAction : !0;
    if (this.updateState(e, r), e.enabled !== void 0 && s.enabled !== e.enabled) {
      const o = { userAction: r };
      e.enabled ? this._enable(o) : this._disable(o);
    }
    if (e.visible !== void 0 && s.visible !== e.visible) {
      const o = { userAction: r };
      e.visible ? this._show(o) : this._hide(o);
    }
  }
  changeConfigs(e, i = !0) {
    this.updateState({ config: e }, i), this.render();
  }
  formatData(e) {
    return $(this, null, function* () {
      return yield es(e.data);
    });
  }
  _show(e) {
    return $(this, null, function* () {
      if (!this.state.enabled)
        return;
      this.isHiddenByHideFunc = !1;
      const { userAction: i } = e;
      this.hooks.emit("show", { userAction: i, auto: !1 }), this.five.getCurrentState().mode !== "Topview" && (yield Fh(this.five, ["Topview", void 0, void 0, i])), this.five.model.show(this.floorIndex), this.updatePosition(), this.updateSize();
      const s = 500, r = this.state.config.modelOpacity;
      kr(this.five, r, s), this.hooks.emit("showAnimationEnded", { userAction: i, auto: !1 }), this.render();
    });
  }
  _hide(e) {
    return $(this, null, function* () {
      if (!this.state.enabled)
        return;
      const { userAction: i } = e;
      this.hooks.emit("hide", { userAction: i, auto: !1 });
      const s = 1, r = 0;
      kr(this.five, s, r), this.render();
    });
  }
  _enable(e) {
    const { userAction: i } = e;
    this.addEventListener(), this.wrapper && this.wrapper.append(this.container), this.hooks.emit("enable", { userAction: i }), this.state.visible && this._show({ userAction: i });
  }
  updateState(e, i) {
    var a;
    const s = this.state, r = (a = e.config) != null && a.missingFloorConfig ? _(_({}, s.config.missingFloorConfig), e.config.missingFloorConfig) : s.config.missingFloorConfig, o = e.config ? de(_(_({}, s.config), e.config), { missingFloorConfig: r }) : s.config;
    this.state = de(_(_({}, this.state), e), { config: o }), !Qt(this.state, s, { deep: !0 }) && this.hooks.emit("stateChange", { state: this.state, prevState: s, userAction: i });
  }
  addEventListener() {
    if (!this.state.enabled || this.hasAddedEventListener)
      return;
    const e = this.five;
    e.on("modeChange", this.onFiveModeChange), e.on("panoArrived", this.onFivePanoArrived), e.on("cameraUpdate", this.onFiveCameraUpdate), e.on("wantsGesture", this.onFiveWantsGesture), e.on("wantsMoveToPano", this.onFiveWantsMoveToPano), e.on("initAnimationEnded", this.onFiveInitAnimationEnded), e.on("modelShownFloorChange", this.onModelShownFloorChange);
  }
  removeEventListener() {
    const e = this.five;
    this.hasAddedEventListener = !1, e.off("modeChange", this.onFiveModeChange), e.off("panoArrived", this.onFivePanoArrived), e.off("cameraUpdate", this.onFiveCameraUpdate), e.off("wantsGesture", this.onFiveWantsGesture), e.off("wantsMoveToPano", this.onFiveWantsMoveToPano), e.off("initAnimationEnded", this.onFiveInitAnimationEnded), e.off("modelShownFloorChange", this.onModelShownFloorChange);
  }
  /** 如果用户是通过 selector 设置父容器，需要在 modelLoaded 之后把 container 自动放到父容器里
   *
   * - TODO: 等 selector 功能下掉之后删除这个逻辑
   */
  initContainer() {
    this.container.classList.add("floorplan-plugin"), Object.assign(this.container.style, {
      position: "absolute",
      left: "50%",
      top: "50%",
      transform: "translate3d(-50%, -50%, 10px)",
      zIndex: 10,
      pointerEvents: "none",
      "will-change": "width, height"
    }), this.five.addExtraElement(this.container);
  }
  render(e) {
    if (!this.state.enabled || !this.container || !this.data || this.size.width === 0)
      return;
    const i = de(_({}, this.state.config), {
      visible: this.state.visible,
      duration: e != null ? e : 0,
      panoIndex: this.panoIndex,
      floorIndex: this.floorIndex,
      floorplanData: this.data,
      lastPanoramaLongitude: this.lastPanoramaLongitude,
      highlightData: this.highlightData
    });
    if (this.app)
      return this.app.$set(i);
    this.app = new Vh({ target: this.container, intro: !0, props: i });
  }
};
const Gx = (n, t) => new u3(n, t);
function f3(n) {
  De(n, "svelte-1nqrlxd", ".plugin-radar__camera-wrapper.svelte-1nqrlxd{width:100%;height:100%;position:absolute;pointer-events:none}.plugin-radar__camera-position.svelte-1nqrlxd{position:absolute;left:0;top:0;width:0;height:0;transform:none;pointer-events:none;transition:transform 1s linear}.plugin-radar__camera-rotate.svelte-1nqrlxd{position:absolute;left:-0.9375rem;top:-0.9375rem;width:1.0625rem;height:1.0625rem;transform-origin:0.9375rem 0.9375rem;transform:rotate(45deg);background-repeat:no-repeat;background-size:100%}");
}
function p3(n) {
  let t, e, i;
  return {
    c() {
      t = W("div"), e = W("div"), i = W("div"), y(i, "class", "plugin-radar__camera-rotate svelte-1nqrlxd"), Q(i, "background-image", "url(" + /*cameraImageUrl*/
      (n[0] || $n) + ")"), Q(
        i,
        "transform",
        /*rotateTransform*/
        n[1]
      ), y(e, "class", "plugin-radar__camera-position svelte-1nqrlxd"), Q(
        e,
        "transform",
        /*positionTransform*/
        n[2]
      ), y(t, "class", "plugin-radar__camera-wrapper svelte-1nqrlxd"), Q(
        t,
        "opacity",
        /*hasCurrentFloorData*/
        n[3] ? 1 : 0
      );
    },
    m(s, r) {
      X(s, t, r), R(t, e), R(e, i);
    },
    p(s, [r]) {
      r & /*cameraImageUrl*/
      1 && Q(i, "background-image", "url(" + /*cameraImageUrl*/
      (s[0] || $n) + ")"), (r & /*cameraImageUrl*/
      1 || r & /*rotateTransform, cameraImageUrl*/
      3) && Q(
        i,
        "transform",
        /*rotateTransform*/
        s[1]
      ), r & /*positionTransform*/
      4 && Q(
        e,
        "transform",
        /*positionTransform*/
        s[2]
      ), r & /*hasCurrentFloorData*/
      8 && Q(
        t,
        "opacity",
        /*hasCurrentFloorData*/
        s[3] ? 1 : 0
      );
    },
    i: se,
    o: se,
    d(s) {
      s && U(t);
    }
  };
}
function m3(n) {
  return `rotate(${Math.floor(n / Math.PI * 180) * -1 + 45}deg)`;
}
function g3(n, t, e) {
  var w, x;
  let i, s, r, o, { five: a } = t, { pxmm: l } = t, { floorplanData: c } = t, { cameraImageUrl: h } = t, d = a.getCurrentState().panoIndex, f = a.getCurrentState().longitude, g = (x = (w = a.work.observers[a.getCurrentState().panoIndex]) == null ? void 0 : w.floorIndex) != null ? x : 0;
  function p(k, T) {
    const S = k.bounding, V = k.observers[T];
    if (!V)
      return "";
    const z = (S.max.x - S.min.x) * l, O = (S.max.y - S.min.y) * l, A = Math.floor(V.positionInImage.x * z), C = Math.floor(V.positionInImage.y * O);
    return `translate(${A}px, ${C}px)`;
  }
  function m(k) {
    e(7, d = k);
  }
  function v(k) {
    e(9, g = a.work.observers[k].floorIndex);
  }
  const b = ol(
    (k) => {
      e(8, f = k.longitude);
    },
    1e3 / 60
  );
  return Ot(() => (a.on("panoWillArrive", m), a.on("panoArrived", v), a.on("cameraDirectionUpdate", b), function() {
    a.off("panoWillArrive", m), a.off("panoArrived", v), a.off("cameraDirectionUpdate", b);
  })), n.$$set = (k) => {
    "five" in k && e(4, a = k.five), "pxmm" in k && e(5, l = k.pxmm), "floorplanData" in k && e(6, c = k.floorplanData), "cameraImageUrl" in k && e(0, h = k.cameraImageUrl);
  }, n.$$.update = () => {
    n.$$.dirty & /*floorplanData, floorIndex*/
    576 && e(10, i = c.floorDatas[g]), n.$$.dirty & /*floorData*/
    1024 && e(3, s = i.rooms.length > 0), n.$$.dirty & /*floorplanData, panoIndex*/
    192 && e(2, r = p(c, d)), n.$$.dirty & /*longitude*/
    256 && e(1, o = m3(f));
  }, [
    h,
    o,
    r,
    s,
    a,
    l,
    c,
    d,
    f,
    g,
    i
  ];
}
class v3 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      g3,
      p3,
      Pe,
      {
        five: 4,
        pxmm: 5,
        floorplanData: 6,
        cameraImageUrl: 0
      },
      f3
    );
  }
}
function A3(n) {
  De(n, "svelte-1i87fz7", ".plugin-pano-floorplan__extra-objects.svelte-1i87fz7{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.plugin-pano-floorplan__extra-object-item--position.svelte-1i87fz7{position:absolute;width:0;height:0}.plugin-pano-floorplan__extra-object-item.svelte-1i87fz7{transform:translate(-50%, -50%)}");
}
function ju(n, t, e) {
  const i = n.slice();
  return i[1] = t[e], i;
}
function Ru(n, t) {
  let e, i, s = `${/*extraObject*/
  t[1].icon.width / 16}rem`, r = `${/*extraObject*/
  t[1].icon.height / 16}rem`, o, a = `${/*extraObject*/
  t[1].positionInImage.y * 100}%`, l = `${/*extraObject*/
  t[1].positionInImage.x * 100}%`;
  return {
    key: n,
    first: null,
    c() {
      e = W("div"), i = W("div"), o = oe(), y(i, "class", "plugin-pano-floorplan__extra-object-item svelte-1i87fz7"), Q(i, "background-image", `url(${/*extraObject*/
      t[1].icon.url})`), Q(i, "width", s), Q(i, "height", r), y(e, "class", "plugin-pano-floorplan__extra-object-item--position svelte-1i87fz7"), Q(e, "top", a), Q(e, "left", l), this.first = e;
    },
    m(c, h) {
      X(c, e, h), R(e, i), R(e, o);
    },
    p(c, h) {
      t = c, h & /*extraObjects*/
      1 && Q(i, "background-image", `url(${/*extraObject*/
      t[1].icon.url})`);
      const d = h & /*extraObjects*/
      1;
      d && Q(i, "width", s), d && Q(i, "height", r), h & /*extraObjects*/
      1 && a !== (a = `${/*extraObject*/
      t[1].positionInImage.y * 100}%`) && Q(e, "top", a), h & /*extraObjects*/
      1 && l !== (l = `${/*extraObject*/
      t[1].positionInImage.x * 100}%`) && Q(e, "left", l);
    },
    d(c) {
      c && U(e);
    }
  };
}
function b3(n) {
  let t, e = [], i = /* @__PURE__ */ new Map(), s = (
    /*extraObjects*/
    n[0]
  );
  const r = (o) => (
    /*extraObject*/
    o[1].id
  );
  for (let o = 0; o < s.length; o += 1) {
    let a = ju(n, s, o), l = r(a);
    i.set(l, e[o] = Ru(l, a));
  }
  return {
    c() {
      t = W("div");
      for (let o = 0; o < e.length; o += 1)
        e[o].c();
      y(t, "class", "plugin-pano-floorplan__extra-objects svelte-1i87fz7");
    },
    m(o, a) {
      X(o, t, a);
      for (let l = 0; l < e.length; l += 1)
        e[l] && e[l].m(t, null);
    },
    p(o, [a]) {
      a & /*extraObjects*/
      1 && (s = /*extraObjects*/
      o[0], e = Ei(e, a, r, 1, o, s, i, t, Rh, Ru, null, ju));
    },
    i: se,
    o: se,
    d(o) {
      o && U(t);
      for (let a = 0; a < e.length; a += 1)
        e[a].d();
    }
  };
}
function y3(n, t, e) {
  let { extraObjects: i = [] } = t;
  return n.$$set = (s) => {
    "extraObjects" in s && e(0, i = s.extraObjects);
  }, [i];
}
class w3 extends Ie {
  constructor(t) {
    super(), Ce(this, t, y3, b3, Pe, { extraObjects: 0 }, A3);
  }
}
function P3(n) {
  De(n, "svelte-18287ai", ".missing-floor-wrapper.svelte-18287ai{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:flex;justify-content:center;align-items:center}.missing-floor-image.svelte-18287ai{max-width:100%;max-height:100%}");
}
function C3(n) {
  let t, e, i, s, r, o;
  const a = [
    {
      floorIndex: (
        /*floorIndex*/
        n[2]
      ),
      floorplanData: (
        /*floorplanData*/
        n[4]
      )
    }
  ];
  let l = {};
  for (let h = 0; h < a.length; h += 1)
    l = St(l, a[h]);
  t = new A0({ props: l }), i = new w3({
    props: {
      extraObjects: (
        /*currentFloorExtraObjects*/
        n[7]
      )
    }
  });
  let c = (
    /*hoverEnable*/
    n[3] && Bu(n)
  );
  return {
    c() {
      ve(t.$$.fragment), e = oe(), ve(i.$$.fragment), s = oe(), c && c.c(), r = Fe();
    },
    m(h, d) {
      me(t, h, d), X(h, e, d), me(i, h, d), X(h, s, d), c && c.m(h, d), X(h, r, d), o = !0;
    },
    p(h, d) {
      const f = d & /*floorIndex, floorplanData*/
      20 ? Lt(a, [
        {
          floorIndex: (
            /*floorIndex*/
            h[2]
          ),
          floorplanData: (
            /*floorplanData*/
            h[4]
          )
        }
      ]) : {};
      t.$set(f);
      const g = {};
      d & /*currentFloorExtraObjects*/
      128 && (g.extraObjects = /*currentFloorExtraObjects*/
      h[7]), i.$set(g), /*hoverEnable*/
      h[3] ? c ? (c.p(h, d), d & /*hoverEnable*/
      8 && F(c, 1)) : (c = Bu(h), c.c(), F(c, 1), c.m(r.parentNode, r)) : c && (Me(), Y(c, 1, 1, () => {
        c = null;
      }), ke());
    },
    i(h) {
      o || (F(t.$$.fragment, h), F(i.$$.fragment, h), F(c), o = !0);
    },
    o(h) {
      Y(t.$$.fragment, h), Y(i.$$.fragment, h), Y(c), o = !1;
    },
    d(h) {
      ge(t, h), h && U(e), ge(i, h), h && U(s), c && c.d(h), h && U(r);
    }
  };
}
function I3(n) {
  let t, e, i;
  return {
    c() {
      t = W("div"), e = W("img"), y(e, "class", "missing-floor-image svelte-18287ai"), pt(e.src, i = /*missingFloorImageUrl*/
      n[6]) || y(e, "src", i), y(e, "alt", "缺省楼层"), y(t, "class", "missing-floor-wrapper svelte-18287ai");
    },
    m(s, r) {
      X(s, t, r), R(t, e);
    },
    p(s, r) {
      r & /*missingFloorImageUrl*/
      64 && !pt(e.src, i = /*missingFloorImageUrl*/
      s[6]) && y(e, "src", i);
    },
    i: se,
    o: se,
    d(s) {
      s && U(t);
    }
  };
}
function Bu(n) {
  let t, e;
  const i = [
    {
      five: (
        /*five*/
        n[0]
      ),
      pxmm: (
        /*pxmm*/
        n[1]
      ),
      floorIndex: (
        /*floorIndex*/
        n[2]
      ),
      floorplanData: (
        /*floorplanData*/
        n[4]
      ),
      onRoomHeightClick: (
        /*onRoomHeightClick*/
        n[9]
      ),
      highlightData: (
        /*highlightData*/
        n[5]
      ),
      hoveredRoom: void 0
    }
  ];
  let s = {};
  for (let r = 0; r < i.length; r += 1)
    s = St(s, i[r]);
  return t = new y0({ props: s }), {
    c() {
      ve(t.$$.fragment);
    },
    m(r, o) {
      me(t, r, o), e = !0;
    },
    p(r, o) {
      const a = o & /*five, pxmm, floorIndex, floorplanData, onRoomHeightClick, highlightData, undefined*/
      567 ? Lt(i, [
        {
          five: (
            /*five*/
            r[0]
          ),
          pxmm: (
            /*pxmm*/
            r[1]
          ),
          floorIndex: (
            /*floorIndex*/
            r[2]
          ),
          floorplanData: (
            /*floorplanData*/
            r[4]
          ),
          onRoomHeightClick: (
            /*onRoomHeightClick*/
            r[9]
          ),
          highlightData: (
            /*highlightData*/
            r[5]
          ),
          hoveredRoom: void 0
        }
      ]) : {};
      t.$set(a);
    },
    i(r) {
      e || (F(t.$$.fragment, r), e = !0);
    },
    o(r) {
      Y(t.$$.fragment, r), e = !1;
    },
    d(r) {
      ge(t, r);
    }
  };
}
function E3(n) {
  let t, e, i, s;
  const r = [I3, C3], o = [];
  function a(l, c) {
    return (
      /*hasCurrentFloorData*/
      l[8] ? 1 : 0
    );
  }
  return t = a(n), e = o[t] = r[t](n), {
    c() {
      e.c(), i = Fe();
    },
    m(l, c) {
      o[t].m(l, c), X(l, i, c), s = !0;
    },
    p(l, [c]) {
      let h = t;
      t = a(l), t === h ? o[t].p(l, c) : (Me(), Y(o[h], 1, 1, () => {
        o[h] = null;
      }), ke(), e = o[t], e ? e.p(l, c) : (e = o[t] = r[t](l), e.c()), F(e, 1), e.m(i.parentNode, i));
    },
    i(l) {
      s || (F(e), s = !0);
    },
    o(l) {
      Y(e), s = !1;
    },
    d(l) {
      o[t].d(l), l && U(i);
    }
  };
}
function M3(n, t, e) {
  let i, s, r, { five: o } = t, { pxmm: a } = t, { floorIndex: l } = t, { hoverEnable: c } = t, { floorplanData: h } = t, { extraObjects: d = [] } = t, { highlightData: f } = t, { missingFloorImageUrl: g } = t;
  const p = void 0;
  return n.$$set = (m) => {
    "five" in m && e(0, o = m.five), "pxmm" in m && e(1, a = m.pxmm), "floorIndex" in m && e(2, l = m.floorIndex), "hoverEnable" in m && e(3, c = m.hoverEnable), "floorplanData" in m && e(4, h = m.floorplanData), "extraObjects" in m && e(10, d = m.extraObjects), "highlightData" in m && e(5, f = m.highlightData), "missingFloorImageUrl" in m && e(6, g = m.missingFloorImageUrl);
  }, n.$$.update = () => {
    n.$$.dirty & /*floorplanData, floorIndex*/
    20 && e(11, i = h.floorDatas[l]), n.$$.dirty & /*floorData*/
    2048 && e(8, s = i.rooms.length > 0), n.$$.dirty & /*extraObjects, floorIndex*/
    1028 && e(7, r = d == null ? void 0 : d.filter((m) => m.floorIndex === l));
  }, [
    o,
    a,
    l,
    c,
    h,
    f,
    g,
    r,
    s,
    p,
    d,
    i
  ];
}
class k3 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      M3,
      E3,
      Pe,
      {
        five: 0,
        pxmm: 1,
        floorIndex: 2,
        hoverEnable: 3,
        floorplanData: 4,
        extraObjects: 10,
        highlightData: 5,
        missingFloorImageUrl: 6
      },
      P3
    );
  }
}
function x3(n) {
  De(n, "svelte-1mvqyqq", ".plugin-floorplan-radar.svelte-1mvqyqq{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.plugin-floorplan-radar-container.svelte-1mvqyqq{position:relative}");
}
function Vu(n) {
  let t, e, i, s, r = (
    /*clientWidth*/
    n[8] !== 0 && _u(n)
  );
  return {
    c() {
      t = W("div"), r && r.c(), y(t, "class", "plugin-floorplan-radar svelte-1mvqyqq");
    },
    m(o, a) {
      X(o, t, a), r && r.m(t, null), e = !0, i || (s = [
        Pi(wn.call(null, t)),
        Oe(
          t,
          "clientWidth",
          /*clientWidth_handler*/
          n[14]
        ),
        Oe(
          t,
          "clientHeight",
          /*clientHeight_handler*/
          n[15]
        )
      ], i = !0);
    },
    p(o, a) {
      /*clientWidth*/
      o[8] !== 0 ? r ? (r.p(o, a), a & /*clientWidth*/
      256 && F(r, 1)) : (r = _u(o), r.c(), F(r, 1), r.m(t, null)) : r && (Me(), Y(r, 1, 1, () => {
        r = null;
      }), ke());
    },
    i(o) {
      e || (F(r), e = !0);
    },
    o(o) {
      Y(r), e = !1;
    },
    d(o) {
      o && U(t), r && r.d(), i = !1, vt(s);
    }
  };
}
function _u(n) {
  let t, e, i, s, r = `${/*contentWidth*/
  n[10]}px`, o = `${/*contentHeight*/
  n[13]}px`, a;
  const l = [
    {
      five: (
        /*five*/
        n[0]
      ),
      pxmm: (
        /*pxmm*/
        n[11]
      ),
      floorIndex: (
        /*floorIndex*/
        n[12]
      ),
      floorplanData: (
        /*floorplanData*/
        n[3]
      ),
      hoverEnable: (
        /*hoverEnable*/
        n[2]
      ),
      extraObjects: (
        /*extraObjects*/
        n[5]
      ),
      highlightData: (
        /*highlightData*/
        n[6]
      ),
      missingFloorImageUrl: (
        /*missingFloorImageUrl*/
        n[7]
      )
    }
  ];
  let c = {};
  for (let f = 0; f < l.length; f += 1)
    c = St(c, l[f]);
  e = new k3({ props: c });
  const h = [
    {
      pxmm: (
        /*pxmm*/
        n[11]
      ),
      five: (
        /*five*/
        n[0]
      ),
      floorplanData: (
        /*floorplanData*/
        n[3]
      ),
      cameraImageUrl: (
        /*cameraImageUrl*/
        n[4]
      )
    }
  ];
  let d = {};
  for (let f = 0; f < h.length; f += 1)
    d = St(d, h[f]);
  return s = new v3({ props: d }), {
    c() {
      t = W("div"), ve(e.$$.fragment), i = oe(), ve(s.$$.fragment), y(t, "class", "plugin-floorplan-radar-container svelte-1mvqyqq"), Q(t, "width", r), Q(t, "height", o);
    },
    m(f, g) {
      X(f, t, g), me(e, t, null), R(t, i), me(s, t, null), a = !0;
    },
    p(f, g) {
      const p = g & /*five, pxmm, floorIndex, floorplanData, hoverEnable, extraObjects, highlightData, missingFloorImageUrl*/
      6381 ? Lt(l, [
        {
          five: (
            /*five*/
            f[0]
          ),
          pxmm: (
            /*pxmm*/
            f[11]
          ),
          floorIndex: (
            /*floorIndex*/
            f[12]
          ),
          floorplanData: (
            /*floorplanData*/
            f[3]
          ),
          hoverEnable: (
            /*hoverEnable*/
            f[2]
          ),
          extraObjects: (
            /*extraObjects*/
            f[5]
          ),
          highlightData: (
            /*highlightData*/
            f[6]
          ),
          missingFloorImageUrl: (
            /*missingFloorImageUrl*/
            f[7]
          )
        }
      ]) : {};
      e.$set(p);
      const m = g & /*pxmm, five, floorplanData, cameraImageUrl*/
      2073 ? Lt(h, [
        {
          pxmm: (
            /*pxmm*/
            f[11]
          ),
          five: (
            /*five*/
            f[0]
          ),
          floorplanData: (
            /*floorplanData*/
            f[3]
          ),
          cameraImageUrl: (
            /*cameraImageUrl*/
            f[4]
          )
        }
      ]) : {};
      s.$set(m), g & /*contentWidth*/
      1024 && r !== (r = `${/*contentWidth*/
      f[10]}px`) && Q(t, "width", r), g & /*contentHeight*/
      8192 && o !== (o = `${/*contentHeight*/
      f[13]}px`) && Q(t, "height", o);
    },
    i(f) {
      a || (F(e.$$.fragment, f), F(s.$$.fragment, f), a = !0);
    },
    o(f) {
      Y(e.$$.fragment, f), Y(s.$$.fragment, f), a = !1;
    },
    d(f) {
      f && U(t), ge(e), ge(s);
    }
  };
}
function D3(n) {
  let t, e, i = (
    /*visible*/
    n[1] && Vu(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*visible*/
      s[1] ? i ? (i.p(s, r), r & /*visible*/
      2 && F(i, 1)) : (i = Vu(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function S3(n, t, e) {
  var k, T;
  let { five: i } = t, { visible: s } = t, { hoverEnable: r } = t, { floorplanData: o } = t, { cameraImageUrl: a } = t, { extraObjects: l = [] } = t, { highlightData: c } = t, { missingFloorImageUrl: h } = t, d = 0, f = (T = (k = i.work.observers[i.getCurrentState().panoIndex]) == null ? void 0 : k.floorIndex) != null ? T : 0, g = 0, p = 0, m = 0, v = 0;
  function b(S) {
    e(12, f = i.work.observers[S].floorIndex);
  }
  Ot(() => (i.on("panoArrived", b), () => {
    i.off("panoArrived", b);
  }));
  const w = (S) => {
    e(8, g = S.detail);
  }, x = (S) => {
    e(9, p = S.detail);
  };
  return n.$$set = (S) => {
    "five" in S && e(0, i = S.five), "visible" in S && e(1, s = S.visible), "hoverEnable" in S && e(2, r = S.hoverEnable), "floorplanData" in S && e(3, o = S.floorplanData), "cameraImageUrl" in S && e(4, a = S.cameraImageUrl), "extraObjects" in S && e(5, l = S.extraObjects), "highlightData" in S && e(6, c = S.highlightData), "missingFloorImageUrl" in S && e(7, h = S.missingFloorImageUrl);
  }, n.$$.update = () => {
    if (n.$$.dirty & /*clientWidth, clientHeight, floorplanData, contentWidth*/
    1800) {
      const S = Math.min(g, p), { max: V, min: z } = o.bounding, O = V.x - z.x, A = V.y - z.y, C = function() {
        return O > A ? [S, S / O * A] : [S / A * O, S];
      }();
      e(10, m = C[0]), e(13, v = C[1]), e(11, d = m / O);
    }
  }, [
    i,
    s,
    r,
    o,
    a,
    l,
    c,
    h,
    g,
    p,
    m,
    d,
    f,
    v,
    w,
    x
  ];
}
class T3 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      S3,
      D3,
      Pe,
      {
        five: 0,
        visible: 1,
        hoverEnable: 2,
        floorplanData: 3,
        cameraImageUrl: 4,
        extraObjects: 5,
        highlightData: 6,
        missingFloorImageUrl: 7
      },
      x3
    );
  }
}
let L3 = class extends Pn {
  constructor(e, i) {
    super(e);
    // =============== public properties =================
    u(this, "name", "panoFloorplanRadarPlugin");
    u(this, "state");
    // =============== protected properties =================
    u(this, "data");
    // =============== private properties =================
    u(this, "app");
    u(this, "wrapperSelector", "");
    u(this, "wrapper", null);
    u(this, "disposed", !1);
    u(this, "extraObjects", []);
    u(this, "highlightData", {});
    u(this, "dispose", () => {
      var e;
      this.disposed = !0, (e = this.app) == null || e.$destroy(), this.wrapper = null, this.wrapperSelector = "", this.hooks.emit("dispose");
    });
    u(this, "highlight", (e) => {
      this.state.config.highlightEnable && (this.highlightData = e, this.render());
    });
    u(this, "unhighlight", () => {
      this.highlightData = {}, this.render();
    });
    u(this, "_disable", (e) => {
      var s;
      const { userAction: i } = e;
      (s = this.app) == null || s.$destroy(), this.app = void 0, this.hooks.emit("disable", { userAction: i });
    });
    this.five = e;
    const s = {
      hoverEnable: !1,
      highlightEnable: !1,
      cameraImageUrl: $n,
      missingFloorImageUrl: this.staticPrefix + "/release/web/saas/missing-floor.d687a5ed.png"
    }, r = _(_({}, s), i == null ? void 0 : i.configs);
    this.state = { enabled: !0, visible: !0, config: r }, i != null && i.wrapper && console.warn("不推荐继续使用 params.selector 配置父容器，请使用 appendTo 方法"), typeof (i == null ? void 0 : i.wrapper) == "string" ? this.wrapperSelector = i.wrapper : (i == null ? void 0 : i.wrapper) instanceof Element && (this.wrapper = i.wrapper), e.once("dispose", this.dispose);
  }
  load(e, i, s = !0) {
    return $(this, null, function* () {
      function r(c) {
        return Object.prototype.hasOwnProperty.apply(c, ["version"]);
      }
      const o = JSON.parse(JSON.stringify(e)), a = r(o) ? o.data : o, l = this.data;
      this.data = yield es(a), this.hooks.emit("dataLoaded", this.data), this.hooks.emit("dataChange", this.data, l), i && this.updateState(i, s), this.render();
    });
  }
  show() {
    return $(this, arguments, function* (e = {}) {
      if (this.state.visible)
        return;
      const i = e.userAction !== void 0 ? e.userAction : !0;
      this.updateState({ visible: !0 }, i), this._show({ userAction: i });
    });
  }
  hide() {
    return $(this, arguments, function* (e = {}) {
      if (!this.state.visible)
        return;
      const i = e.userAction !== void 0 ? e.userAction : !0;
      this.updateState({ visible: !1 }, i), this._hide({ userAction: i });
    });
  }
  enable(e = {}) {
    if (this.state.enabled)
      return;
    const i = e.userAction !== void 0 ? e.userAction : !0;
    this.updateState({ enabled: !0 }, e.userAction || i), this._enable({ userAction: i });
  }
  disable(e = {}) {
    if (!this.state.enabled)
      return;
    const i = e.userAction !== void 0 ? e.userAction : !0;
    this.updateState({ enabled: !1 }, e.userAction || i), this._disable({ userAction: i });
  }
  /** 更改插件 State */
  setState(e, i = {}) {
    const s = this.state, r = i.userAction !== void 0 ? i.userAction : !0;
    if (this.updateState(e, r), e.enabled !== void 0 && s.enabled !== e.enabled) {
      const o = { userAction: r };
      e.enabled ? this._enable(o) : this._disable(o);
    }
    if (e.visible !== void 0 && s.visible !== e.visible) {
      const o = { userAction: r };
      e.visible ? this._show(o) : this._hide(o);
    }
  }
  /** 把插件的渲染DOM插入到对应的容器中去 */
  appendTo(e) {
    this.wrapper !== e && this.app && (this.app.$destroy(), this.app = void 0), this.wrapper = e, this.render();
  }
  changeConfigs(e, i = !0) {
    this.setState({ config: e }, { userAction: i }), this.render();
  }
  setExtraObjectsWith3DPositions(e) {
    this.data && (this.extraObjects = $2(e, this.five, this.data), this.render());
  }
  formatData(e) {
    return $(this, null, function* () {
      return yield es(e.data);
    });
  }
  _enable(e) {
    const { userAction: i } = e;
    this.hooks.emit("enable", { userAction: i }), this.state.visible && this._show({ userAction: i });
  }
  _show(e) {
    if (this.disposed || !this.state.enabled)
      return;
    const { userAction: i } = e;
    this.hooks.emit("show", { userAction: i }), this.render();
  }
  _hide(e) {
    if (this.disposed || !this.state.enabled)
      return;
    const { userAction: i } = e;
    this.hooks.emit("hide", { userAction: i }), this.render();
  }
  updateState(e, i) {
    const s = this.state, r = e.config ? _(_({}, s.config), e.config) : s.config;
    this.state = de(_(_({}, this.state), e), { config: r }), !Qt(this.state, s, { deep: !0 }) && this.hooks.emit("stateChange", { state: this.state, prevState: s, userAction: i });
  }
  render() {
    if (this.disposed || !this.state.enabled)
      return;
    if (!this.wrapper && this.wrapperSelector) {
      const i = document.querySelector(this.wrapperSelector);
      this.wrapper = i;
    }
    if (!this.data || !this.wrapper)
      return;
    const e = de(_({}, this.state.config), {
      five: this.five,
      floorplanData: this.data,
      visible: this.state.visible,
      extraObjects: this.extraObjects,
      highlightData: this.highlightData
    });
    this.app ? this.app.$set(e) : this.app = new T3({ target: this.wrapper, props: e });
  }
};
const Qx = (n, t) => new L3(n, t), Ux = [
  { type: 0, floorType: 1, roomType: "100900000012", name: "其他" },
  { type: 1, floorType: 1, roomType: "100900000002", name: "客厅" },
  { type: 2, floorType: 1, roomType: "100900000002", name: "餐厅" },
  { type: 3, floorType: 0, roomType: "100900000001", name: "卧室" },
  { type: 4, floorType: 0, roomType: "100900000001", name: "书房" },
  { type: 5, floorType: 3, roomType: "100900000004", name: "卫生间" },
  { type: 6, floorType: 3, roomType: "100900000004", name: "淋浴间" },
  { type: 7, floorType: 3, roomType: "100900000004", name: "洗手间" },
  { type: 8, floorType: 3, roomType: "100900000003", name: "厨房" },
  {
    type: 9,
    floorType: 1,
    roomType: "100900000003",
    name: "开放厨房",
    onlySubArea: !0
  },
  { type: 10, floorType: 0, roomType: "100900000001", name: "多功能间" },
  { type: 11, floorType: 0, roomType: "100900000009", name: "保姆间" },
  { type: 12, floorType: 4, roomType: "100900000005", name: "阳台" },
  { type: 13, floorType: 4, roomType: "100900000006", name: "露台" },
  { type: 14, floorType: 0, roomType: "100900000008", name: "储物间" },
  { type: 15, floorType: 0, roomType: "100900000013", name: "衣帽间" },
  { type: 16, floorType: 0, roomType: "100900000011", name: "阁楼" },
  { type: 17, floorType: 2, roomType: "100900000007", name: "花园" },
  { type: 18, floorType: 5, roomType: "100900000010", name: "车库" },
  { type: 19, floorType: 1, roomType: "100900000012", name: "电梯" },
  { type: 20, floorType: 1, roomType: "100900000012", name: "地下室" },
  { type: 21, floorType: 1, roomType: "100900000012", name: "天井" },
  { type: 22, floorType: 1, roomType: "100900000012", name: "阳光房" },
  { type: 23, floorType: 1, roomType: "100900000012", name: "过道" },
  { type: 24, floorType: 1, roomType: "100900000012", name: "楼梯间" },
  { type: 25, floorType: 1, roomType: "100900000012", name: "门厅" },
  { type: 26, floorType: 2, roomType: "100900000012", name: "入户花园" },
  { type: 27, floorType: 1, roomType: "100900000012", name: "玄关" },
  { type: 28, floorType: 1, roomType: "100900000012", name: "挑空" },
  { type: 29, floorType: 4, roomType: "100900000012", name: "晾晒区" },
  { type: 30, floorType: 4, roomType: "100900000012", name: "洗衣房" },
  { type: 31, floorType: 0, roomType: "100900000012", name: "娱乐区" },
  { type: 32, floorType: 0, roomType: "100900000012", name: "健身区" },
  { type: 33, floorType: 0, roomType: "100900000012", name: "接待区" },
  { type: 34, floorType: 0, roomType: "100900000012", name: "影音区" },
  { type: 35, floorType: 1, roomType: "100900000012", name: "餐饮区" },
  {
    type: 36,
    floorType: 1,
    roomType: "100900000012",
    name: "其他",
    onlySubArea: !0
  },
  { type: 37, floorType: 1, roomType: "100900000002", name: "起居室" },
  { type: 38, floorType: 0, roomType: "100900000001", name: "主卧" },
  { type: 39, floorType: 0, roomType: "100900000001", name: "次卧" },
  { type: 40, floorType: 0, roomType: "100900000001", name: "优化间" },
  { type: 41, floorType: 0, roomType: "100900000001", name: "办公室" },
  { type: 42, floorType: 0, roomType: "100900000001", name: "会议室" },
  { type: 43, floorType: 0, roomType: "100900000001", name: "洽谈间" },
  { type: 44, floorType: 1, roomType: "100900000002", name: "共享大厅" },
  { type: 45, floorType: 1, roomType: "100900000012", name: "水吧" },
  { type: 46, floorType: 0, roomType: "100900000015", name: "出入口" },
  { type: 47, floorType: 0, roomType: "100900000015", name: "大厅" },
  { type: 48, floorType: 0, roomType: "100900000015", name: "包厢" },
  { type: 49, floorType: 0, roomType: "100900000015", name: "其他" },
  { type: 50, floorType: 0, roomType: "100900000016", name: "出入口" },
  { type: 51, floorType: 0, roomType: "100900000016", name: "办公区" },
  { type: 52, floorType: 0, roomType: "100900000016", name: "老板间" },
  { type: 53, floorType: 0, roomType: "100900000016", name: "会议室" },
  { type: 54, floorType: 0, roomType: "100900000016", name: "休息区/水吧" },
  { type: 55, floorType: 0, roomType: "100900000016", name: "其他" },
  { type: 56, floorType: 2, roomType: "100900000012", name: "空中花园" },
  { type: 57, floorType: 0, roomType: "100900000001", name: "洋室" },
  { type: 58, floorType: 0, roomType: "100900000001", name: "和室" }
], Xx = [
  { type: 0, description: "木质地板" },
  { type: 1, description: "瓷砖地面" },
  { type: 2, description: "户外地面" },
  { type: 3, description: "卫生间地面" },
  { type: 4, description: "阳台地面" },
  { type: 5, description: "车库地面" }
], Yx = [
  { roomType: "100900000001", description: "室" },
  { roomType: "100900000002", description: "厅" },
  { roomType: "100900000003", description: "厨" },
  { roomType: "100900000004", description: "卫" },
  { roomType: "100900000005", description: "阳台" },
  { roomType: "100900000006", description: "露台" },
  { roomType: "100900000007", description: "花园" },
  { roomType: "100900000008", description: "储" },
  { roomType: "100900000009", description: "保姆间" },
  { roomType: "100900000010", description: "车库" },
  { roomType: "100900000011", description: "阁楼" },
  { roomType: "100900000012", description: "其他" },
  { roomType: "100900000013", description: "衣" },
  { roomType: "100900000015", description: "商铺" },
  { roomType: "100900000016", description: "写字楼" }
], Ul = (n, t, e) => {
  const i = new P.Matrix4(), s = new P.Euler(n, t, e, "YXZ");
  return i.makeRotationFromEuler(s), i;
}, z3 = (n, {
  scale: t,
  rotation: e,
  position: i
}) => {
  if (t && n.scale.set(t, t, t), e) {
    const [s, r, o] = e;
    s && n.applyMatrix4(Ul(s, 0, 0)), r && n.applyMatrix4(Ul(0, r, 0)), o && n.applyMatrix4(Ul(0, 0, o));
  }
  return i && n.position.set(i.x, i.y, i.z), n;
};
function I0(n, t) {
  n.traverse((e) => {
    var i;
    if (e.type === "Mesh") {
      const s = e, r = _({ map: s.material.map || {} }, t);
      s.material = new bo(r), s.renderOrder = 1, ((i = e.parent) == null ? void 0 : i.type) === "Mesh" && (e.renderOrder = e.parent.renderOrder + 1);
    }
  });
}
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */
var E0 = {}, hi = void 0, O3 = E0;
function Nh(n, t) {
  var e = n.split("."), i = O3;
  !(e[0] in i) && i.execScript && i.execScript("var " + e[0]);
  for (var s; e.length && (s = e.shift()); )
    !e.length && t !== hi ? i[s] = t : i = i[s] ? i[s] : i[s] = {};
}
var rt = typeof Uint8Array != "undefined" && typeof Uint16Array != "undefined" && typeof Uint32Array != "undefined" && typeof DataView != "undefined";
function As(n) {
  var t = n.length, e = 0, i = Number.POSITIVE_INFINITY, s, r, o, a, l, c, h, d, f, g;
  for (d = 0; d < t; ++d)
    n[d] > e && (e = n[d]), n[d] < i && (i = n[d]);
  for (s = 1 << e, r = new (rt ? Uint32Array : Array)(s), o = 1, a = 0, l = 2; o <= e; ) {
    for (d = 0; d < t; ++d)
      if (n[d] === o) {
        for (c = 0, h = a, f = 0; f < o; ++f)
          c = c << 1 | h & 1, h >>= 1;
        for (g = o << 16 | d, f = c; f < s; f += l)
          r[f] = g;
        ++a;
      }
    ++o, a <<= 1, l <<= 1;
  }
  return [r, e, i];
}
function os(n, t) {
  switch (this.g = [], this.h = 32768, this.d = this.f = this.a = this.l = 0, this.input = rt ? new Uint8Array(n) : n, this.m = !1, this.i = Ua, this.r = !1, (t || !(t = {})) && (t.index && (this.a = t.index), t.bufferSize && (this.h = t.bufferSize), t.bufferType && (this.i = t.bufferType), t.resize && (this.r = t.resize)), this.i) {
    case Gh:
      this.b = 32768, this.c = new (rt ? Uint8Array : Array)(32768 + this.h + 258);
      break;
    case Ua:
      this.b = 0, this.c = new (rt ? Uint8Array : Array)(this.h), this.e = this.z, this.n = this.v, this.j = this.w;
      break;
    default:
      throw Error("invalid inflate mode");
  }
}
var Gh = 0, Ua = 1, Hu = { t: Gh, s: Ua };
os.prototype.k = function() {
  for (; !this.m; ) {
    var n = bi(this, 3);
    switch (n & 1 && (this.m = !0), n >>>= 1, n) {
      case 0:
        var t = this.input, e = this.a, i = this.c, s = this.b, r = t.length, o = hi, a = hi, l = i.length, c = hi;
        if (this.d = this.f = 0, e + 1 >= r)
          throw Error("invalid uncompressed block header: LEN");
        if (o = t[e++] | t[e++] << 8, e + 1 >= r)
          throw Error("invalid uncompressed block header: NLEN");
        if (a = t[e++] | t[e++] << 8, o === ~a)
          throw Error("invalid uncompressed block header: length verify");
        if (e + o > t.length)
          throw Error("input buffer is broken");
        switch (this.i) {
          case Gh:
            for (; s + o > i.length; ) {
              if (c = l - s, o -= c, rt)
                i.set(t.subarray(e, e + c), s), s += c, e += c;
              else
                for (; c--; )
                  i[s++] = t[e++];
              this.b = s, i = this.e(), s = this.b;
            }
            break;
          case Ua:
            for (; s + o > i.length; )
              i = this.e({ p: 2 });
            break;
          default:
            throw Error("invalid inflate mode");
        }
        if (rt)
          i.set(t.subarray(e, e + o), s), s += o, e += o;
        else
          for (; o--; )
            i[s++] = t[e++];
        this.a = e, this.b = s, this.c = i;
        break;
      case 1:
        this.j(j3, R3);
        break;
      case 2:
        for (var h = bi(this, 5) + 257, d = bi(this, 5) + 1, f = bi(this, 4) + 4, g = new (rt ? Uint8Array : Array)(Xl.length), p = hi, m = hi, v = hi, b = hi, w = hi, x = hi, k = hi, S = hi, T = hi, S = 0; S < f; ++S)
          g[Xl[S]] = bi(this, 3);
        if (!rt)
          for (S = f, f = g.length; S < f; ++S)
            g[Xl[S]] = 0;
        for (p = As(g), b = new (rt ? Uint8Array : Array)(h + d), S = 0, T = h + d; S < T; )
          switch (w = ko(this, p), w) {
            case 16:
              for (k = 3 + bi(this, 2); k--; )
                b[S++] = x;
              break;
            case 17:
              for (k = 3 + bi(this, 3); k--; )
                b[S++] = 0;
              x = 0;
              break;
            case 18:
              for (k = 11 + bi(this, 7); k--; )
                b[S++] = 0;
              x = 0;
              break;
            default:
              x = b[S++] = w;
          }
        m = As(rt ? b.subarray(0, h) : b.slice(0, h)), v = As(rt ? b.subarray(h) : b.slice(h)), this.j(m, v);
        break;
      default:
        throw Error("unknown BTYPE: " + n);
    }
  }
  return this.n();
};
var Fu = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], Xl = rt ? new Uint16Array(Fu) : Fu, Nu = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 258, 258], M0 = rt ? new Uint16Array(Nu) : Nu, Gu = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0], Xa = rt ? new Uint8Array(Gu) : Gu, Wu = [
  1,
  2,
  3,
  4,
  5,
  7,
  9,
  13,
  17,
  25,
  33,
  49,
  65,
  97,
  129,
  193,
  257,
  385,
  513,
  769,
  1025,
  1537,
  2049,
  3073,
  4097,
  6145,
  8193,
  12289,
  16385,
  24577
], k0 = rt ? new Uint16Array(Wu) : Wu, Qu = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13], Ya = rt ? new Uint8Array(Qu) : Qu, Tc = new (rt ? Uint8Array : Array)(288), vs, Uu;
vs = 0;
for (Uu = Tc.length; vs < Uu; ++vs)
  Tc[vs] = 143 >= vs ? 8 : 255 >= vs ? 9 : 279 >= vs ? 7 : 8;
var j3 = As(Tc), Lc = new (rt ? Uint8Array : Array)(30), Ma, Xu;
Ma = 0;
for (Xu = Lc.length; Ma < Xu; ++Ma)
  Lc[Ma] = 5;
var R3 = As(Lc);
function bi(n, t) {
  for (var e = n.f, i = n.d, s = n.input, r = n.a, o = s.length, a; i < t; ) {
    if (r >= o)
      throw Error("input buffer is broken");
    e |= s[r++] << i, i += 8;
  }
  return a = e & (1 << t) - 1, n.f = e >>> t, n.d = i - t, n.a = r, a;
}
function ko(n, t) {
  for (var e = n.f, i = n.d, s = n.input, r = n.a, o = s.length, a = t[0], l = t[1], c, h; i < l && !(r >= o); )
    e |= s[r++] << i, i += 8;
  if (c = a[e & (1 << l) - 1], h = c >>> 16, h > i)
    throw Error("invalid code length: " + h);
  return n.f = e >> h, n.d = i - h, n.a = r, c & 65535;
}
os.prototype.j = function(n, t) {
  var e = this.c, i = this.b;
  this.o = n;
  for (var s = e.length - 258, r, o, a, l; (r = ko(this, n)) !== 256; )
    if (256 > r)
      i >= s && (this.b = i, e = this.e(), i = this.b), e[i++] = r;
    else
      for (o = r - 257, l = M0[o], 0 < Xa[o] && (l += bi(this, Xa[o])), r = ko(this, t), a = k0[r], 0 < Ya[r] && (a += bi(this, Ya[r])), i >= s && (this.b = i, e = this.e(), i = this.b); l--; )
        e[i] = e[i++ - a];
  for (; 8 <= this.d; )
    this.d -= 8, this.a--;
  this.b = i;
};
os.prototype.w = function(n, t) {
  var e = this.c, i = this.b;
  this.o = n;
  for (var s = e.length, r, o, a, l; (r = ko(this, n)) !== 256; )
    if (256 > r)
      i >= s && (e = this.e(), s = e.length), e[i++] = r;
    else
      for (o = r - 257, l = M0[o], 0 < Xa[o] && (l += bi(this, Xa[o])), r = ko(this, t), a = k0[r], 0 < Ya[r] && (a += bi(this, Ya[r])), i + l > s && (e = this.e(), s = e.length); l--; )
        e[i] = e[i++ - a];
  for (; 8 <= this.d; )
    this.d -= 8, this.a--;
  this.b = i;
};
os.prototype.e = function() {
  var n = new (rt ? Uint8Array : Array)(this.b - 32768), t = this.b - 32768, e, i, s = this.c;
  if (rt)
    n.set(s.subarray(32768, n.length));
  else
    for (e = 0, i = n.length; e < i; ++e)
      n[e] = s[e + 32768];
  if (this.g.push(n), this.l += n.length, rt)
    s.set(s.subarray(t, t + 32768));
  else
    for (e = 0; 32768 > e; ++e)
      s[e] = s[t + e];
  return this.b = 32768, s;
};
os.prototype.z = function(n) {
  var t, e = this.input.length / this.a + 1 | 0, i, s, r, o = this.input, a = this.c;
  return n && (typeof n.p == "number" && (e = n.p), typeof n.u == "number" && (e += n.u)), 2 > e ? (i = (o.length - this.a) / this.o[2], r = 258 * (i / 2) | 0, s = r < a.length ? a.length + r : a.length << 1) : s = a.length * e, rt ? (t = new Uint8Array(s), t.set(a)) : t = a, this.c = t;
};
os.prototype.n = function() {
  var n = 0, t = this.c, e = this.g, i, s = new (rt ? Uint8Array : Array)(this.l + (this.b - 32768)), r, o, a, l;
  if (e.length === 0)
    return rt ? this.c.subarray(32768, this.b) : this.c.slice(32768, this.b);
  for (r = 0, o = e.length; r < o; ++r)
    for (i = e[r], a = 0, l = i.length; a < l; ++a)
      s[n++] = i[a];
  for (r = 32768, o = this.b; r < o; ++r)
    s[n++] = t[r];
  return this.g = [], this.buffer = s;
};
os.prototype.v = function() {
  var n, t = this.b;
  return rt ? this.r ? (n = new Uint8Array(t), n.set(this.c.subarray(0, t))) : n = this.c.subarray(0, t) : (this.c.length > t && (this.c.length = t), n = this.c), this.buffer = n;
};
function Wh(n, t) {
  var e, i;
  switch (this.input = n, this.a = 0, (t || !(t = {})) && (t.index && (this.a = t.index), t.verify && (this.A = t.verify)), e = n[this.a++], i = n[this.a++], e & 15) {
    case Yu:
      this.method = Yu;
      break;
    default:
      throw Error("unsupported compression method");
  }
  if (((e << 8) + i) % 31 !== 0)
    throw Error("invalid fcheck flag:" + ((e << 8) + i) % 31);
  if (i & 32)
    throw Error("fdict flag is not supported");
  this.q = new os(n, { index: this.a, bufferSize: t.bufferSize, bufferType: t.bufferType, resize: t.resize });
}
Wh.prototype.k = function() {
  var n = this.input, t, e;
  if (t = this.q.k(), this.a = this.q.a, this.A) {
    e = (n[this.a++] << 24 | n[this.a++] << 16 | n[this.a++] << 8 | n[this.a++]) >>> 0;
    var i = t;
    if (typeof i == "string") {
      var s = i.split(""), r, o;
      for (r = 0, o = s.length; r < o; r++)
        s[r] = (s[r].charCodeAt(0) & 255) >>> 0;
      i = s;
    }
    for (var a = 1, l = 0, c = i.length, h, d = 0; 0 < c; ) {
      h = 1024 < c ? 1024 : c, c -= h;
      do
        a += i[d++], l += a;
      while (--h);
      a %= 65521, l %= 65521;
    }
    if (e !== (l << 16 | a) >>> 0)
      throw Error("invalid adler-32 checksum");
  }
  return t;
};
var Yu = 8;
Nh("Zlib.Inflate", Wh);
Nh("Zlib.Inflate.prototype.decompress", Wh.prototype.k);
var zc = { ADAPTIVE: Hu.s, BLOCK: Hu.t }, po, mo, gr, Zu;
if (Object.keys)
  po = Object.keys(zc);
else
  for (mo in po = [], gr = 0, zc)
    po[gr++] = mo;
gr = 0;
for (Zu = po.length; gr < Zu; ++gr)
  mo = po[gr], Nh("Zlib.Inflate.BufferType." + mo, zc[mo]);
var Ju = E0.Zlib, x0 = {
  /*
  	Finds knot vector span.
  
  	p : degree
  	u : parametric value
  	U : knot vector
  
  	returns the span
  	*/
  findSpan: function(n, t, e) {
    var i = e.length - n - 1;
    if (t >= e[i])
      return i - 1;
    if (t <= e[n])
      return n;
    for (var s = n, r = i, o = Math.floor((s + r) / 2); t < e[o] || t >= e[o + 1]; )
      t < e[o] ? r = o : s = o, o = Math.floor((s + r) / 2);
    return o;
  },
  /*
  	Calculate basis functions. See The NURBS Book, page 70, algorithm A2.2
  
  	span : span in which u lies
  	u    : parametric point
  	p    : degree
  	U    : knot vector
  
  	returns array[p+1] with basis functions values.
  	*/
  calcBasisFunctions: function(n, t, e, i) {
    var s = [], r = [], o = [];
    s[0] = 1;
    for (var a = 1; a <= e; ++a) {
      r[a] = t - i[n + 1 - a], o[a] = i[n + a] - t;
      for (var l = 0, c = 0; c < a; ++c) {
        var h = o[c + 1], d = r[a - c], f = s[c] / (h + d);
        s[c] = l + h * f, l = d * f;
      }
      s[a] = l;
    }
    return s;
  },
  /*
  	Calculate B-Spline curve points. See The NURBS Book, page 82, algorithm A3.1.
  
  	p : degree of B-Spline
  	U : knot vector
  	P : control points (x, y, z, w)
  	u : parametric point
  
  	returns point for given u
  	*/
  calcBSplinePoint: function(n, t, e, i) {
    for (var s = this.findSpan(n, i, t), r = this.calcBasisFunctions(s, i, n, t), o = new bs(0, 0, 0, 0), a = 0; a <= n; ++a) {
      var l = e[s - n + a], c = r[a], h = l.w * c;
      o.x += l.x * h, o.y += l.y * h, o.z += l.z * h, o.w += l.w * c;
    }
    return o;
  },
  /*
  	Calculate basis functions derivatives. See The NURBS Book, page 72, algorithm A2.3.
  
  	span : span in which u lies
  	u    : parametric point
  	p    : degree
  	n    : number of derivatives to calculate
  	U    : knot vector
  
  	returns array[n+1][p+1] with basis functions derivatives
  	*/
  calcBasisFunctionDerivatives: function(n, t, e, i, s) {
    for (var r = [], o = 0; o <= e; ++o)
      r[o] = 0;
    for (var a = [], o = 0; o <= i; ++o)
      a[o] = r.slice(0);
    for (var l = [], o = 0; o <= e; ++o)
      l[o] = r.slice(0);
    l[0][0] = 1;
    for (var c = r.slice(0), h = r.slice(0), d = 1; d <= e; ++d) {
      c[d] = t - s[n + 1 - d], h[d] = s[n + d] - t;
      for (var f = 0, O = 0; O < d; ++O) {
        var g = h[O + 1], p = c[d - O];
        l[d][O] = g + p;
        var m = l[O][d - 1] / l[d][O];
        l[O][d] = f + g * m, f = p * m;
      }
      l[d][d] = f;
    }
    for (var d = 0; d <= e; ++d)
      a[0][d] = l[d][e];
    for (var O = 0; O <= e; ++O) {
      for (var v = 0, b = 1, w = [], o = 0; o <= e; ++o)
        w[o] = r.slice(0);
      w[0][0] = 1;
      for (var x = 1; x <= i; ++x) {
        var k = 0, T = O - x, S = e - x;
        O >= x && (w[b][0] = w[v][0] / l[S + 1][T], k = w[b][0] * l[T][S]);
        for (var V = T >= -1 ? 1 : -T, z = O - 1 <= S ? x - 1 : e - O, d = V; d <= z; ++d)
          w[b][d] = (w[v][d] - w[v][d - 1]) / l[S + 1][T + d], k += w[b][d] * l[T + d][S];
        O <= S && (w[b][x] = -w[v][x - 1] / l[S + 1][O], k += w[b][x] * l[O][S]), a[x][O] = k;
        var d = v;
        v = b, b = d;
      }
    }
    for (var O = e, x = 1; x <= i; ++x) {
      for (var d = 0; d <= e; ++d)
        a[x][d] *= O;
      O *= e - x;
    }
    return a;
  },
  /*
  		Calculate derivatives of a B-Spline. See The NURBS Book, page 93, algorithm A3.2.
  
  		p  : degree
  		U  : knot vector
  		P  : control points
  		u  : Parametric points
  		nd : number of derivatives
  
  		returns array[d+1] with derivatives
  		*/
  calcBSplineDerivatives: function(n, t, e, i, s) {
    for (var r = s < n ? s : n, o = [], a = this.findSpan(n, i, t), l = this.calcBasisFunctionDerivatives(a, i, n, r, t), c = [], h = 0; h < e.length; ++h) {
      var d = e[h].clone(), f = d.w;
      d.x *= f, d.y *= f, d.z *= f, c[h] = d;
    }
    for (var g = 0; g <= r; ++g) {
      for (var d = c[a - n].clone().multiplyScalar(l[g][0]), p = 1; p <= n; ++p)
        d.add(c[a - n + p].clone().multiplyScalar(l[g][p]));
      o[g] = d;
    }
    for (var g = r + 1; g <= s + 1; ++g)
      o[g] = new bs(0, 0, 0);
    return o;
  },
  /*
  	Calculate "K over I"
  
  	returns k!/(i!(k-i)!)
  	*/
  calcKoverI: function(n, t) {
    for (var e = 1, i = 2; i <= n; ++i)
      e *= i;
    for (var s = 1, i = 2; i <= t; ++i)
      s *= i;
    for (var i = 2; i <= n - t; ++i)
      s *= i;
    return e / s;
  },
  /*
  	Calculate derivatives (0-nd) of rational curve. See The NURBS Book, page 127, algorithm A4.2.
  
  	Pders : result of function calcBSplineDerivatives
  
  	returns array with derivatives for rational curve.
  	*/
  calcRationalCurveDerivatives: function(n) {
    for (var t = n.length, e = [], i = [], s = 0; s < t; ++s) {
      var r = n[s];
      e[s] = new fe(r.x, r.y, r.z), i[s] = r.w;
    }
    for (var o = [], a = 0; a < t; ++a) {
      for (var l = e[a].clone(), s = 1; s <= a; ++s)
        l.sub(o[a - s].clone().multiplyScalar(this.calcKoverI(a, s) * i[s]));
      o[a] = l.divideScalar(i[0]);
    }
    return o;
  },
  /*
  	Calculate NURBS curve derivatives. See The NURBS Book, page 127, algorithm A4.2.
  
  	p  : degree
  	U  : knot vector
  	P  : control points in homogeneous space
  	u  : parametric points
  	nd : number of derivatives
  
  	returns array with derivatives.
  	*/
  calcNURBSDerivatives: function(n, t, e, i, s) {
    var r = this.calcBSplineDerivatives(n, t, e, i, s);
    return this.calcRationalCurveDerivatives(r);
  },
  /*
  	Calculate rational B-Spline surface point. See The NURBS Book, page 134, algorithm A4.3.
  
  	p1, p2 : degrees of B-Spline surface
  	U1, U2 : knot vectors
  	P      : control points (x, y, z, w)
  	u, v   : parametric values
  
  	returns point for given (u, v)
  	*/
  calcSurfacePoint: function(n, t, e, i, s, r, o, a) {
    for (var l = this.findSpan(n, r, e), c = this.findSpan(t, o, i), h = this.calcBasisFunctions(l, r, n, e), d = this.calcBasisFunctions(c, o, t, i), f = [], g = 0; g <= t; ++g) {
      f[g] = new bs(0, 0, 0, 0);
      for (var p = 0; p <= n; ++p) {
        var m = s[l - n + p][c - t + g].clone(), v = m.w;
        m.x *= v, m.y *= v, m.z *= v, f[g].add(m.multiplyScalar(h[p]));
      }
    }
    for (var b = new bs(0, 0, 0, 0), g = 0; g <= t; ++g)
      b.add(f[g].multiplyScalar(d[g]));
    b.divideScalar(b.w), a.set(b.x, b.y, b.z);
  }
}, Ts = function(n, t, e, i, s) {
  lg.call(this), this.degree = n, this.knots = t, this.controlPoints = [], this.startKnot = i || 0, this.endKnot = s || this.knots.length - 1;
  for (var r = 0; r < e.length; ++r) {
    var o = e[r];
    this.controlPoints[r] = new bs(o.x, o.y, o.z, o.w);
  }
};
Ts.prototype = Object.create(lg.prototype);
Ts.prototype.constructor = Ts;
Ts.prototype.getPoint = function(n, t) {
  var e = t || new fe(), i = this.knots[this.startKnot] + n * (this.knots[this.endKnot] - this.knots[this.startKnot]), s = x0.calcBSplinePoint(this.degree, this.knots, this.controlPoints, i);
  return s.w != 1 && s.divideScalar(s.w), e.set(s.x, s.y, s.z);
};
Ts.prototype.getTangent = function(n, t) {
  var e = t || new fe(), i = this.knots[0] + n * (this.knots[this.knots.length - 1] - this.knots[0]), s = x0.calcNURBSDerivatives(this.degree, this.knots, this.controlPoints, i, 1);
  return e.copy(s[1]).normalize(), e;
};
var D0 = function() {
  var n, t, e;
  function i(A) {
    Id.call(this, A);
  }
  i.prototype = Object.assign(Object.create(Id.prototype), {
    constructor: i,
    load: function(A, C, I, E) {
      var D = this, L = D.path === "" ? zl.extractUrlBase(A) : D.path, N = new Pv(this.manager);
      N.setPath(D.path), N.setResponseType("arraybuffer"), N.load(
        A,
        function(G) {
          try {
            C(D.parse(G, L));
          } catch (Z) {
            E ? E(Z) : console.error(Z), D.manager.itemError(A);
          }
        },
        I,
        E
      );
    },
    parse: function(A, C) {
      if (d(A))
        n = new l().parse(A);
      else {
        var I = S(A);
        if (!f(I))
          throw new Error("THREE.FBXLoader: Unknown format.");
        if (g(I) < 7e3)
          throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: " + g(I));
        n = new a().parse(I);
      }
      var E = new rh(this.manager).setPath(this.resourcePath || C).setCrossOrigin(this.crossOrigin);
      return new s(E, this.manager).parse(n);
    }
  });
  function s(A, C) {
    this.textureLoader = A, this.manager = C;
  }
  s.prototype = {
    constructor: s,
    parse: function() {
      t = this.parseConnections();
      var A = this.parseImages(), C = this.parseTextures(A), I = this.parseMaterials(C), E = this.parseDeformers(), D = new r().parse(E);
      return this.parseScene(E, D, I), e;
    },
    // Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )
    // and details the connection type
    parseConnections: function() {
      var A = /* @__PURE__ */ new Map();
      if ("Connections" in n) {
        var C = n.Connections.connections;
        C.forEach(function(I) {
          var E = I[0], D = I[1], L = I[2];
          A.has(E) || A.set(E, {
            parents: [],
            children: []
          });
          var N = { ID: D, relationship: L };
          A.get(E).parents.push(N), A.has(D) || A.set(D, {
            parents: [],
            children: []
          });
          var G = { ID: E, relationship: L };
          A.get(D).children.push(G);
        });
      }
      return A;
    },
    // Parse FBXTree.Objects.Video for embedded image data
    // These images are connected to textures in FBXTree.Objects.Textures
    // via FBXTree.Connections.
    parseImages: function() {
      var A = {}, C = {};
      if ("Video" in n.Objects) {
        var I = n.Objects.Video;
        for (var E in I) {
          var D = I[E], L = parseInt(E);
          if (A[L] = D.RelativeFilename || D.Filename, "Content" in D) {
            var N = D.Content instanceof ArrayBuffer && D.Content.byteLength > 0, G = typeof D.Content == "string" && D.Content !== "";
            if (N || G) {
              var Z = this.parseImage(I[E]);
              C[D.RelativeFilename || D.Filename] = Z;
            }
          }
        }
      }
      for (var L in A) {
        var ee = A[L];
        C[ee] !== void 0 ? A[L] = C[ee] : A[L] = A[L].split("\\").pop();
      }
      return A;
    },
    // Parse embedded image data in FBXTree.Video.Content
    parseImage: function(A) {
      var C = A.Content, I = A.RelativeFilename || A.Filename, E = I.slice(I.lastIndexOf(".") + 1).toLowerCase(), D;
      switch (E) {
        case "bmp":
          D = "image/bmp";
          break;
        case "jpg":
        case "jpeg":
          D = "image/jpeg";
          break;
        case "png":
          D = "image/png";
          break;
        case "tif":
          D = "image/tiff";
          break;
        case "tga":
          this.manager.getHandler(".tga") === null && console.warn("FBXLoader: TGA loader not found, skipping ", I), D = "image/tga";
          break;
        default:
          console.warn('FBXLoader: Image type "' + E + '" is not supported.');
          return;
      }
      if (typeof C == "string")
        return "data:" + D + ";base64," + C;
      var L = new Uint8Array(C);
      return window.URL.createObjectURL(new Blob([L], { type: D }));
    },
    // Parse nodes in FBXTree.Objects.Texture
    // These contain details such as UV scaling, cropping, rotation etc and are connected
    // to images in FBXTree.Objects.Video
    parseTextures: function(A) {
      var C = /* @__PURE__ */ new Map();
      if ("Texture" in n.Objects) {
        var I = n.Objects.Texture;
        for (var E in I) {
          var D = this.parseTexture(I[E], A);
          C.set(parseInt(E), D);
        }
      }
      return C;
    },
    // Parse individual node in FBXTree.Objects.Texture
    parseTexture: function(A, C) {
      var I = this.loadTexture(A, C);
      I.ID = A.id, I.name = A.attrName;
      var E = A.WrapModeU, D = A.WrapModeV, L = E !== void 0 ? E.value : 0, N = D !== void 0 ? D.value : 0;
      if (I.wrapS = L === 0 ? Ed : Md, I.wrapT = N === 0 ? Ed : Md, "Scaling" in A) {
        var G = A.Scaling.value;
        I.repeat.x = G[0], I.repeat.y = G[1];
      }
      return I;
    },
    // load a texture specified as a blob or data URI, or via an external URL using TextureLoader
    loadTexture: function(A, C) {
      var I, E = this.textureLoader.path, D = t.get(A.id).children;
      D !== void 0 && D.length > 0 && C[D[0].ID] !== void 0 && (I = C[D[0].ID], (I.indexOf("blob:") === 0 || I.indexOf("data:") === 0) && this.textureLoader.setPath(void 0));
      var L, N = A.FileName.slice(-3).toLowerCase();
      if (N === "tga") {
        var G = this.manager.getHandler(".tga");
        G === null ? (console.warn("FBXLoader: TGA loader not found, creating placeholder texture for", A.RelativeFilename), L = new kd()) : L = G.load(I);
      } else
        N === "psd" ? (console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for", A.RelativeFilename), L = new kd()) : L = this.textureLoader.load(I);
      return this.textureLoader.setPath(E), L;
    },
    // Parse nodes in FBXTree.Objects.Material
    parseMaterials: function(A) {
      var C = /* @__PURE__ */ new Map();
      if ("Material" in n.Objects) {
        var I = n.Objects.Material;
        for (var E in I) {
          var D = this.parseMaterial(I[E], A);
          D !== null && C.set(parseInt(E), D);
        }
      }
      return C;
    },
    // Parse single node in FBXTree.Objects.Material
    // Materials are connected to texture maps in FBXTree.Objects.Textures
    // FBX format currently only supports Lambert and Phong shading models
    parseMaterial: function(A, C) {
      var I = A.id, E = A.attrName, D = A.ShadingModel;
      if (typeof D == "object" && (D = D.value), !t.has(I))
        return null;
      var L = this.parseParameters(A, C, I), N;
      switch (D.toLowerCase()) {
        case "phong":
          N = new Ol();
          break;
        case "lambert":
          N = new Cv();
          break;
        default:
          console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.', D), N = new Ol();
          break;
      }
      return N.setValues(L), N.name = E, N;
    },
    // Parse FBX material and return parameters suitable for a three.js material
    // Also parse the texture map and return any textures associated with the material
    parseParameters: function(A, C, I) {
      var E = {};
      A.BumpFactor && (E.bumpScale = A.BumpFactor.value), A.Diffuse ? E.color = new Gt().fromArray(A.Diffuse.value) : A.DiffuseColor && A.DiffuseColor.type === "Color" && (E.color = new Gt().fromArray(A.DiffuseColor.value)), A.DisplacementFactor && (E.displacementScale = A.DisplacementFactor.value), A.Emissive ? E.emissive = new Gt().fromArray(A.Emissive.value) : A.EmissiveColor && A.EmissiveColor.type === "Color" && (E.emissive = new Gt().fromArray(A.EmissiveColor.value)), A.EmissiveFactor && (E.emissiveIntensity = parseFloat(A.EmissiveFactor.value)), A.Opacity && (E.opacity = parseFloat(A.Opacity.value)), E.opacity < 1 && (E.transparent = !0), A.ReflectionFactor && (E.reflectivity = A.ReflectionFactor.value), A.Shininess && (E.shininess = A.Shininess.value), A.Specular ? E.specular = new Gt().fromArray(A.Specular.value) : A.SpecularColor && A.SpecularColor.type === "Color" && (E.specular = new Gt().fromArray(A.SpecularColor.value));
      var D = this;
      return t.get(I).children.forEach(function(L) {
        var N = L.relationship;
        switch (N) {
          case "Bump":
            E.bumpMap = D.getTexture(C, L.ID);
            break;
          case "Maya|TEX_ao_map":
            E.aoMap = D.getTexture(C, L.ID);
            break;
          case "DiffuseColor":
          case "Maya|TEX_color_map":
            E.map = D.getTexture(C, L.ID), E.map.encoding = ro;
            break;
          case "DisplacementColor":
            E.displacementMap = D.getTexture(C, L.ID);
            break;
          case "EmissiveColor":
            E.emissiveMap = D.getTexture(C, L.ID), E.emissiveMap.encoding = ro;
            break;
          case "NormalMap":
          case "Maya|TEX_normal_map":
            E.normalMap = D.getTexture(C, L.ID);
            break;
          case "ReflectionColor":
            E.envMap = D.getTexture(C, L.ID), E.envMap.mapping = Iv, E.envMap.encoding = ro;
            break;
          case "SpecularColor":
            E.specularMap = D.getTexture(C, L.ID), E.specularMap.encoding = ro;
            break;
          case "TransparentColor":
          case "TransparencyFactor":
            E.alphaMap = D.getTexture(C, L.ID), E.transparent = !0;
            break;
          case "AmbientColor":
          case "ShininessExponent":
          case "SpecularFactor":
          case "VectorDisplacementColor":
          default:
            console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.", N);
            break;
        }
      }), E;
    },
    // get a texture from the textureMap for use by a material.
    getTexture: function(A, C) {
      return "LayeredTexture" in n.Objects && C in n.Objects.LayeredTexture && (console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."), C = t.get(C).children[0].ID), A.get(C);
    },
    // Parse nodes in FBXTree.Objects.Deformer
    // Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here
    // Generates map of Skeleton-like objects for use later when generating and binding skeletons.
    parseDeformers: function() {
      var A = {}, C = {};
      if ("Deformer" in n.Objects) {
        var I = n.Objects.Deformer;
        for (var E in I) {
          var D = I[E], L = t.get(parseInt(E));
          if (D.attrType === "Skin") {
            var N = this.parseSkeleton(L, I);
            N.ID = E, L.parents.length > 1 && console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."), N.geometryID = L.parents[0].ID, A[E] = N;
          } else if (D.attrType === "BlendShape") {
            var G = {
              id: E
            };
            G.rawTargets = this.parseMorphTargets(L, I), G.id = E, L.parents.length > 1 && console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."), C[E] = G;
          }
        }
      }
      return {
        skeletons: A,
        morphTargets: C
      };
    },
    // Parse single nodes in FBXTree.Objects.Deformer
    // The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'
    // Each skin node represents a skeleton and each cluster node represents a bone
    parseSkeleton: function(A, C) {
      var I = [];
      return A.children.forEach(function(E) {
        var D = C[E.ID];
        if (D.attrType === "Cluster") {
          var L = {
            ID: E.ID,
            indices: [],
            weights: [],
            transformLink: new tt().fromArray(D.TransformLink.a)
            // transform: new Matrix4().fromArray( boneNode.Transform.a ),
            // linkMode: boneNode.Mode,
          };
          "Indexes" in D && (L.indices = D.Indexes.a, L.weights = D.Weights.a), I.push(L);
        }
      }), {
        rawBones: I,
        bones: []
      };
    },
    // The top level morph deformer node has type "BlendShape" and sub nodes have type "BlendShapeChannel"
    parseMorphTargets: function(A, C) {
      for (var I = [], E = 0; E < A.children.length; E++) {
        var D = A.children[E], L = C[D.ID], N = {
          name: L.attrName,
          initialWeight: L.DeformPercent,
          id: L.id,
          fullWeights: L.FullWeights.a
        };
        if (L.attrType !== "BlendShapeChannel")
          return;
        N.geoID = t.get(parseInt(D.ID)).children.filter(function(G) {
          return G.relationship === void 0;
        })[0].ID, I.push(N);
      }
      return I;
    },
    // create the main Group() to be returned by the loader
    parseScene: function(A, C, I) {
      e = new fn();
      var E = this.parseModels(A.skeletons, C, I), D = n.Objects.Model, L = this;
      E.forEach(function(G) {
        var Z = D[G.ID];
        L.setLookAtProperties(G, Z);
        var ee = t.get(G.ID).parents;
        ee.forEach(function(J) {
          var ie = E.get(J.ID);
          ie !== void 0 && ie.add(G);
        }), G.parent === null && e.add(G);
      }), this.bindSkeleton(A.skeletons, C, E), this.createAmbientLight(), this.setupMorphMaterials(), e.traverse(function(G) {
        if (G.userData.transformData) {
          G.parent && (G.userData.transformData.parentMatrixWorld = G.parent.matrix);
          var Z = x(G.userData.transformData);
          G.applyMatrix4(Z);
        }
      });
      var N = new o().parse();
      e.children.length === 1 && e.children[0].isGroup && (e.children[0].animations = N, e = e.children[0]), e.animations = N;
    },
    // parse nodes in FBXTree.Objects.Model
    parseModels: function(A, C, I) {
      var E = /* @__PURE__ */ new Map(), D = n.Objects.Model;
      for (var L in D) {
        var N = parseInt(L), G = D[L], Z = t.get(N), ee = this.buildSkeleton(Z, A, N, G.attrName);
        if (!ee) {
          switch (G.attrType) {
            case "Camera":
              ee = this.createCamera(Z);
              break;
            case "Light":
              ee = this.createLight(Z);
              break;
            case "Mesh":
              ee = this.createMesh(Z, C, I);
              break;
            case "NurbsCurve":
              ee = this.createCurve(Z, C);
              break;
            case "LimbNode":
            case "Root":
              ee = new xd();
              break;
            case "Null":
            default:
              ee = new fn();
              break;
          }
          ee.name = G.attrName ? ia.sanitizeNodeName(G.attrName) : "", ee.ID = N;
        }
        this.getTransformData(ee, G), E.set(N, ee);
      }
      return E;
    },
    buildSkeleton: function(A, C, I, E) {
      var D = null;
      return A.parents.forEach(function(L) {
        for (var N in C) {
          var G = C[N];
          G.rawBones.forEach(function(Z, ee) {
            if (Z.ID === L.ID) {
              var J = D;
              D = new xd(), D.matrixWorld.copy(Z.transformLink), D.name = E ? ia.sanitizeNodeName(E) : "", D.ID = I, G.bones[ee] = D, J !== null && D.add(J);
            }
          });
        }
      }), D;
    },
    // create a PerspectiveCamera or OrthographicCamera
    createCamera: function(A) {
      var C, I;
      if (A.children.forEach(function(ie) {
        var ne = n.Objects.NodeAttribute[ie.ID];
        ne !== void 0 && (I = ne);
      }), I === void 0)
        C = new ur();
      else {
        var E = 0;
        I.CameraProjectionType !== void 0 && I.CameraProjectionType.value === 1 && (E = 1);
        var D = 1;
        I.NearPlane !== void 0 && (D = I.NearPlane.value / 1e3);
        var L = 1e3;
        I.FarPlane !== void 0 && (L = I.FarPlane.value / 1e3);
        var N = window.innerWidth, G = window.innerHeight;
        I.AspectWidth !== void 0 && I.AspectHeight !== void 0 && (N = I.AspectWidth.value, G = I.AspectHeight.value);
        var Z = N / G, ee = 45;
        I.FieldOfView !== void 0 && (ee = I.FieldOfView.value);
        var J = I.FocalLength ? I.FocalLength.value : null;
        switch (E) {
          case 0:
            C = new Mv(ee, Z, D, L), J !== null && C.setFocalLength(J);
            break;
          case 1:
            C = new Ev(-N / 2, N / 2, G / 2, -G / 2, D, L);
            break;
          default:
            console.warn("THREE.FBXLoader: Unknown camera type " + E + "."), C = new ur();
            break;
        }
      }
      return C;
    },
    // Create a DirectionalLight, PointLight or SpotLight
    createLight: function(A) {
      var C, I;
      if (A.children.forEach(function(J) {
        var ie = n.Objects.NodeAttribute[J.ID];
        ie !== void 0 && (I = ie);
      }), I === void 0)
        C = new ur();
      else {
        var E;
        I.LightType === void 0 ? E = 0 : E = I.LightType.value;
        var D = 16777215;
        I.Color !== void 0 && (D = new Gt().fromArray(I.Color.value));
        var L = I.Intensity === void 0 ? 1 : I.Intensity.value / 100;
        I.CastLightOnObject !== void 0 && I.CastLightOnObject.value === 0 && (L = 0);
        var N = 0;
        I.FarAttenuationEnd !== void 0 && (I.EnableFarAttenuation !== void 0 && I.EnableFarAttenuation.value === 0 ? N = 0 : N = I.FarAttenuationEnd.value);
        var G = 1;
        switch (E) {
          case 0:
            C = new Dd(D, L, N, G);
            break;
          case 1:
            C = new xv(D, L);
            break;
          case 2:
            var Z = Math.PI / 3;
            I.InnerAngle !== void 0 && (Z = Ui.degToRad(I.InnerAngle.value));
            var ee = 0;
            I.OuterAngle !== void 0 && (ee = Ui.degToRad(I.OuterAngle.value), ee = Math.max(ee, 1)), C = new kv(D, L, N, Z, ee, G);
            break;
          default:
            console.warn("THREE.FBXLoader: Unknown light type " + I.LightType.value + ", defaulting to a PointLight."), C = new Dd(D, L);
            break;
        }
        I.CastShadows !== void 0 && I.CastShadows.value === 1 && (C.castShadow = !0);
      }
      return C;
    },
    createMesh: function(A, C, I) {
      var E, D = null, L = null, N = [];
      return A.children.forEach(function(G) {
        C.has(G.ID) && (D = C.get(G.ID)), I.has(G.ID) && N.push(I.get(G.ID));
      }), N.length > 1 ? L = N : N.length > 0 ? L = N[0] : (L = new Ol({ color: 13421772 }), N.push(L)), "color" in D.attributes && N.forEach(function(G) {
        G.vertexColors = !0;
      }), D.FBX_Deformer ? (N.forEach(function(G) {
        G.skinning = !0;
      }), E = new Dv(D, L), E.normalizeSkinWeights()) : E = new fr(D, L), E;
    },
    createCurve: function(A, C) {
      var I = A.children.reduce(function(D, L) {
        return C.has(L.ID) && (D = C.get(L.ID)), D;
      }, null), E = new Sv({ color: 3342591, linewidth: 1 });
      return new Tv(I, E);
    },
    // parse the model node for transform data
    getTransformData: function(A, C) {
      var I = {};
      "InheritType" in C && (I.inheritType = parseInt(C.InheritType.value)), "RotationOrder" in C ? I.eulerOrder = k(C.RotationOrder.value) : I.eulerOrder = "ZYX", "Lcl_Translation" in C && (I.translation = C.Lcl_Translation.value), "PreRotation" in C && (I.preRotation = C.PreRotation.value), "Lcl_Rotation" in C && (I.rotation = C.Lcl_Rotation.value), "PostRotation" in C && (I.postRotation = C.PostRotation.value), "Lcl_Scaling" in C && (I.scale = C.Lcl_Scaling.value), "ScalingOffset" in C && (I.scalingOffset = C.ScalingOffset.value), "ScalingPivot" in C && (I.scalingPivot = C.ScalingPivot.value), "RotationOffset" in C && (I.rotationOffset = C.RotationOffset.value), "RotationPivot" in C && (I.rotationPivot = C.RotationPivot.value), A.userData.transformData = I;
    },
    setLookAtProperties: function(A, C) {
      if ("LookAtProperty" in C) {
        var I = t.get(A.ID).children;
        I.forEach(function(E) {
          if (E.relationship === "LookAtProperty") {
            var D = n.Objects.Model[E.ID];
            if ("Lcl_Translation" in D) {
              var L = D.Lcl_Translation.value;
              A.target !== void 0 ? (A.target.position.fromArray(L), e.add(A.target)) : A.lookAt(new fe().fromArray(L));
            }
          }
        });
      }
    },
    bindSkeleton: function(A, C, I) {
      var E = this.parsePoseNodes();
      for (var D in A) {
        var L = A[D], N = t.get(parseInt(L.ID)).parents;
        N.forEach(function(G) {
          if (C.has(G.ID)) {
            var Z = G.ID, ee = t.get(Z);
            ee.parents.forEach(function(J) {
              if (I.has(J.ID)) {
                var ie = I.get(J.ID);
                ie.bind(new Lv(L.bones), E[J.ID]);
              }
            });
          }
        });
      }
    },
    parsePoseNodes: function() {
      var A = {};
      if ("Pose" in n.Objects) {
        var C = n.Objects.Pose;
        for (var I in C)
          if (C[I].attrType === "BindPose") {
            var E = C[I].PoseNode;
            Array.isArray(E) ? E.forEach(function(D) {
              A[D.Node] = new tt().fromArray(D.Matrix.a);
            }) : A[E.Node] = new tt().fromArray(E.Matrix.a);
          }
      }
      return A;
    },
    // Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light
    createAmbientLight: function() {
      if ("GlobalSettings" in n && "AmbientColor" in n.GlobalSettings) {
        var A = n.GlobalSettings.AmbientColor.value, C = A[0], I = A[1], E = A[2];
        if (C !== 0 || I !== 0 || E !== 0) {
          var D = new Gt(C, I, E);
          e.add(new zv(D, 1));
        }
      }
    },
    setupMorphMaterials: function() {
      var A = this;
      e.traverse(function(C) {
        C.isMesh && C.geometry.morphAttributes.position && C.geometry.morphAttributes.position.length && (Array.isArray(C.material) ? C.material.forEach(function(I, E) {
          A.setupMorphMaterial(C, I, E);
        }) : A.setupMorphMaterial(C, C.material));
      });
    },
    setupMorphMaterial: function(A, C, I) {
      var E = A.uuid, D = C.uuid, L = !1;
      if (e.traverse(function(G) {
        G.isMesh && (Array.isArray(G.material) ? G.material.forEach(function(Z) {
          Z.uuid === D && G.uuid !== E && (L = !0);
        }) : G.material.uuid === D && G.uuid !== E && (L = !0));
      }), L === !0) {
        var N = C.clone();
        N.morphTargets = !0, I === void 0 ? A.material = N : A.material[I] = N;
      } else
        C.morphTargets = !0;
    }
  };
  function r() {
  }
  r.prototype = {
    constructor: r,
    // Parse nodes in FBXTree.Objects.Geometry
    parse: function(A) {
      var C = /* @__PURE__ */ new Map();
      if ("Geometry" in n.Objects) {
        var I = n.Objects.Geometry;
        for (var E in I) {
          var D = t.get(parseInt(E)), L = this.parseGeometry(D, I[E], A);
          C.set(parseInt(E), L);
        }
      }
      return C;
    },
    // Parse single node in FBXTree.Objects.Geometry
    parseGeometry: function(A, C, I) {
      switch (C.attrType) {
        case "Mesh":
          return this.parseMeshGeometry(A, C, I);
        case "NurbsCurve":
          return this.parseNurbsGeometry(C);
      }
    },
    // Parse single node mesh geometry in FBXTree.Objects.Geometry
    parseMeshGeometry: function(A, C, I) {
      var E = I.skeletons, D = [], L = A.parents.map(function(J) {
        return n.Objects.Model[J.ID];
      });
      if (L.length !== 0) {
        var N = A.children.reduce(function(J, ie) {
          return E[ie.ID] !== void 0 && (J = E[ie.ID]), J;
        }, null);
        A.children.forEach(function(J) {
          I.morphTargets[J.ID] !== void 0 && D.push(I.morphTargets[J.ID]);
        });
        var G = L[0], Z = {};
        "RotationOrder" in G && (Z.eulerOrder = k(G.RotationOrder.value)), "InheritType" in G && (Z.inheritType = parseInt(G.InheritType.value)), "GeometricTranslation" in G && (Z.translation = G.GeometricTranslation.value), "GeometricRotation" in G && (Z.rotation = G.GeometricRotation.value), "GeometricScaling" in G && (Z.scale = G.GeometricScaling.value);
        var ee = x(Z);
        return this.genGeometry(C, N, D, ee);
      }
    },
    // Generate a BufferGeometry from a node in FBXTree.Objects.Geometry
    genGeometry: function(A, C, I, E) {
      var D = new na();
      A.attrName && (D.name = A.attrName);
      var L = this.parseGeoNode(A, C), N = this.genBuffers(L), G = new qs(N.vertex, 3);
      if (G.applyMatrix4(E), D.setAttribute("position", G), N.colors.length > 0 && D.setAttribute("color", new qs(N.colors, 3)), C && (D.setAttribute("skinIndex", new Ov(N.weightsIndices, 4)), D.setAttribute("skinWeight", new qs(N.vertexWeights, 4)), D.FBX_Deformer = C), N.normal.length > 0) {
        var Z = new jv().getNormalMatrix(E), ee = new qs(N.normal, 3);
        ee.applyNormalMatrix(Z), D.setAttribute("normal", ee);
      }
      if (N.uvs.forEach(function(Le, we) {
        var le = "uv" + (we + 1).toString();
        we === 0 && (le = "uv"), D.setAttribute(le, new qs(N.uvs[we], 2));
      }), L.material && L.material.mappingType !== "AllSame") {
        var J = N.materialIndex[0], ie = 0;
        if (N.materialIndex.forEach(function(Le, we) {
          Le !== J && (D.addGroup(ie, we - ie, J), J = Le, ie = we);
        }), D.groups.length > 0) {
          var ne = D.groups[D.groups.length - 1], he = ne.start + ne.count;
          he !== N.materialIndex.length && D.addGroup(he, N.materialIndex.length - he, J);
        }
        D.groups.length === 0 && D.addGroup(0, N.materialIndex.length, N.materialIndex[0]);
      }
      return this.addMorphTargets(D, A, I, E), D;
    },
    parseGeoNode: function(A, C) {
      var I = {};
      if (I.vertexPositions = A.Vertices !== void 0 ? A.Vertices.a : [], I.vertexIndices = A.PolygonVertexIndex !== void 0 ? A.PolygonVertexIndex.a : [], A.LayerElementColor && (I.color = this.parseVertexColors(A.LayerElementColor[0])), A.LayerElementMaterial && (I.material = this.parseMaterialIndices(A.LayerElementMaterial[0])), A.LayerElementNormal && (I.normal = this.parseNormals(A.LayerElementNormal[0])), A.LayerElementUV) {
        I.uv = [];
        for (var E = 0; A.LayerElementUV[E]; )
          I.uv.push(this.parseUVs(A.LayerElementUV[E])), E++;
      }
      return I.weightTable = {}, C !== null && (I.skeleton = C, C.rawBones.forEach(function(D, L) {
        D.indices.forEach(function(N, G) {
          I.weightTable[N] === void 0 && (I.weightTable[N] = []), I.weightTable[N].push({
            id: L,
            weight: D.weights[G]
          });
        });
      })), I;
    },
    genBuffers: function(A) {
      var C = {
        vertex: [],
        normal: [],
        colors: [],
        uvs: [],
        materialIndex: [],
        vertexWeights: [],
        weightsIndices: []
      }, I = 0, E = 0, D = !1, L = [], N = [], G = [], Z = [], ee = [], J = [], ie = this;
      return A.vertexIndices.forEach(function(ne, he) {
        var Le = !1;
        ne < 0 && (ne = ne ^ -1, Le = !0);
        var we = [], le = [];
        if (L.push(ne * 3, ne * 3 + 1, ne * 3 + 2), A.color) {
          var ae = v(he, I, ne, A.color);
          G.push(ae[0], ae[1], ae[2]);
        }
        if (A.skeleton) {
          if (A.weightTable[ne] !== void 0 && A.weightTable[ne].forEach(function(Be) {
            le.push(Be.weight), we.push(Be.id);
          }), le.length > 4) {
            D || (console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."), D = !0);
            var ce = [0, 0, 0, 0], Ee = [0, 0, 0, 0];
            le.forEach(function(Be, Te) {
              var Ne = Be, ue = we[Te];
              Ee.forEach(function(Se, ze, nt) {
                if (Ne > Se) {
                  nt[ze] = Ne, Ne = Se;
                  var it = ce[ze];
                  ce[ze] = ue, ue = it;
                }
              });
            }), we = ce, le = Ee;
          }
          for (; le.length < 4; )
            le.push(0), we.push(0);
          for (var Ae = 0; Ae < 4; ++Ae)
            ee.push(le[Ae]), J.push(we[Ae]);
        }
        if (A.normal) {
          var ae = v(he, I, ne, A.normal);
          N.push(ae[0], ae[1], ae[2]);
        }
        if (A.material && A.material.mappingType !== "AllSame")
          var Ge = v(he, I, ne, A.material)[0];
        A.uv && A.uv.forEach(function(Be, Te) {
          var Ne = v(he, I, ne, Be);
          Z[Te] === void 0 && (Z[Te] = []), Z[Te].push(Ne[0]), Z[Te].push(Ne[1]);
        }), E++, Le && (ie.genFace(
          C,
          A,
          L,
          Ge,
          N,
          G,
          Z,
          ee,
          J,
          E
        ), I++, E = 0, L = [], N = [], G = [], Z = [], ee = [], J = []);
      }), C;
    },
    // Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris
    genFace: function(A, C, I, E, D, L, N, G, Z, ee) {
      for (var J = 2; J < ee; J++)
        A.vertex.push(C.vertexPositions[I[0]]), A.vertex.push(C.vertexPositions[I[1]]), A.vertex.push(C.vertexPositions[I[2]]), A.vertex.push(C.vertexPositions[I[(J - 1) * 3]]), A.vertex.push(C.vertexPositions[I[(J - 1) * 3 + 1]]), A.vertex.push(C.vertexPositions[I[(J - 1) * 3 + 2]]), A.vertex.push(C.vertexPositions[I[J * 3]]), A.vertex.push(C.vertexPositions[I[J * 3 + 1]]), A.vertex.push(C.vertexPositions[I[J * 3 + 2]]), C.skeleton && (A.vertexWeights.push(G[0]), A.vertexWeights.push(G[1]), A.vertexWeights.push(G[2]), A.vertexWeights.push(G[3]), A.vertexWeights.push(G[(J - 1) * 4]), A.vertexWeights.push(G[(J - 1) * 4 + 1]), A.vertexWeights.push(G[(J - 1) * 4 + 2]), A.vertexWeights.push(G[(J - 1) * 4 + 3]), A.vertexWeights.push(G[J * 4]), A.vertexWeights.push(G[J * 4 + 1]), A.vertexWeights.push(G[J * 4 + 2]), A.vertexWeights.push(G[J * 4 + 3]), A.weightsIndices.push(Z[0]), A.weightsIndices.push(Z[1]), A.weightsIndices.push(Z[2]), A.weightsIndices.push(Z[3]), A.weightsIndices.push(Z[(J - 1) * 4]), A.weightsIndices.push(Z[(J - 1) * 4 + 1]), A.weightsIndices.push(Z[(J - 1) * 4 + 2]), A.weightsIndices.push(Z[(J - 1) * 4 + 3]), A.weightsIndices.push(Z[J * 4]), A.weightsIndices.push(Z[J * 4 + 1]), A.weightsIndices.push(Z[J * 4 + 2]), A.weightsIndices.push(Z[J * 4 + 3])), C.color && (A.colors.push(L[0]), A.colors.push(L[1]), A.colors.push(L[2]), A.colors.push(L[(J - 1) * 3]), A.colors.push(L[(J - 1) * 3 + 1]), A.colors.push(L[(J - 1) * 3 + 2]), A.colors.push(L[J * 3]), A.colors.push(L[J * 3 + 1]), A.colors.push(L[J * 3 + 2])), C.material && C.material.mappingType !== "AllSame" && (A.materialIndex.push(E), A.materialIndex.push(E), A.materialIndex.push(E)), C.normal && (A.normal.push(D[0]), A.normal.push(D[1]), A.normal.push(D[2]), A.normal.push(D[(J - 1) * 3]), A.normal.push(D[(J - 1) * 3 + 1]), A.normal.push(D[(J - 1) * 3 + 2]), A.normal.push(D[J * 3]), A.normal.push(D[J * 3 + 1]), A.normal.push(D[J * 3 + 2])), C.uv && C.uv.forEach(function(ie, ne) {
          A.uvs[ne] === void 0 && (A.uvs[ne] = []), A.uvs[ne].push(N[ne][0]), A.uvs[ne].push(N[ne][1]), A.uvs[ne].push(N[ne][(J - 1) * 2]), A.uvs[ne].push(N[ne][(J - 1) * 2 + 1]), A.uvs[ne].push(N[ne][J * 2]), A.uvs[ne].push(N[ne][J * 2 + 1]);
        });
    },
    addMorphTargets: function(A, C, I, E) {
      if (I.length !== 0) {
        A.morphTargetsRelative = !0, A.morphAttributes.position = [];
        var D = this;
        I.forEach(function(L) {
          L.rawTargets.forEach(function(N) {
            var G = n.Objects.Geometry[N.geoID];
            G !== void 0 && D.genMorphGeometry(A, C, G, E, N.name);
          });
        });
      }
    },
    // a morph geometry node is similar to a standard  node, and the node is also contained
    // in FBXTree.Objects.Geometry, however it can only have attributes for position, normal
    // and a special attribute Index defining which vertices of the original geometry are affected
    // Normal and position attributes only have data for the vertices that are affected by the morph
    genMorphGeometry: function(A, C, I, E, D) {
      for (var L = C.PolygonVertexIndex !== void 0 ? C.PolygonVertexIndex.a : [], N = I.Vertices !== void 0 ? I.Vertices.a : [], G = I.Indexes !== void 0 ? I.Indexes.a : [], Z = A.attributes.position.count * 3, ee = new Float32Array(Z), J = 0; J < G.length; J++) {
        var ie = G[J] * 3;
        ee[ie] = N[J * 3], ee[ie + 1] = N[J * 3 + 1], ee[ie + 2] = N[J * 3 + 2];
      }
      var ne = {
        vertexIndices: L,
        vertexPositions: ee
      }, he = this.genBuffers(ne), Le = new qs(he.vertex, 3);
      Le.name = D || I.attrName, Le.applyMatrix4(E), A.morphAttributes.position.push(Le);
    },
    // Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists
    parseNormals: function(A) {
      var C = A.MappingInformationType, I = A.ReferenceInformationType, E = A.Normals.a, D = [];
      return I === "IndexToDirect" && ("NormalIndex" in A ? D = A.NormalIndex.a : "NormalsIndex" in A && (D = A.NormalsIndex.a)), {
        dataSize: 3,
        buffer: E,
        indices: D,
        mappingType: C,
        referenceType: I
      };
    },
    // Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists
    parseUVs: function(A) {
      var C = A.MappingInformationType, I = A.ReferenceInformationType, E = A.UV.a, D = [];
      return I === "IndexToDirect" && (D = A.UVIndex.a), {
        dataSize: 2,
        buffer: E,
        indices: D,
        mappingType: C,
        referenceType: I
      };
    },
    // Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists
    parseVertexColors: function(A) {
      var C = A.MappingInformationType, I = A.ReferenceInformationType, E = A.Colors.a, D = [];
      return I === "IndexToDirect" && (D = A.ColorIndex.a), {
        dataSize: 4,
        buffer: E,
        indices: D,
        mappingType: C,
        referenceType: I
      };
    },
    // Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists
    parseMaterialIndices: function(A) {
      var C = A.MappingInformationType, I = A.ReferenceInformationType;
      if (C === "NoMappingInformation")
        return {
          dataSize: 1,
          buffer: [0],
          indices: [0],
          mappingType: "AllSame",
          referenceType: I
        };
      for (var E = A.Materials.a, D = [], L = 0; L < E.length; ++L)
        D.push(L);
      return {
        dataSize: 1,
        buffer: E,
        indices: D,
        mappingType: C,
        referenceType: I
      };
    },
    // Generate a NurbGeometry from a node in FBXTree.Objects.Geometry
    parseNurbsGeometry: function(A) {
      if (Ts === void 0)
        return console.error(
          "THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."
        ), new na();
      var C = parseInt(A.Order);
      if (isNaN(C))
        return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s", A.Order, A.id), new na();
      for (var I = C - 1, E = A.KnotVector.a, D = [], L = A.Points.a, N = 0, G = L.length; N < G; N += 4)
        D.push(new bs().fromArray(L, N));
      var Z, ee;
      if (A.Form === "Closed")
        D.push(D[0]);
      else if (A.Form === "Periodic") {
        Z = I, ee = E.length - 1 - Z;
        for (var N = 0; N < I; ++N)
          D.push(D[N]);
      }
      var J = new Ts(I, E, D, Z, ee), ie = J.getPoints(D.length * 7), ne = new Float32Array(ie.length * 3);
      ie.forEach(function(Le, we) {
        Le.toArray(ne, we * 3);
      });
      var he = new na();
      return he.setAttribute("position", new Rv(ne, 3)), he;
    }
  };
  function o() {
  }
  o.prototype = {
    constructor: o,
    // take raw animation clips and turn them into three.js animation clips
    parse: function() {
      var A = [], C = this.parseClips();
      if (C !== void 0)
        for (var I in C) {
          var E = C[I], D = this.addClip(E);
          A.push(D);
        }
      return A;
    },
    parseClips: function() {
      if (n.Objects.AnimationCurve !== void 0) {
        var A = this.parseAnimationCurveNodes();
        this.parseAnimationCurves(A);
        var C = this.parseAnimationLayers(A), I = this.parseAnimStacks(C);
        return I;
      }
    },
    // parse nodes in FBXTree.Objects.AnimationCurveNode
    // each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )
    // and is referenced by an AnimationLayer
    parseAnimationCurveNodes: function() {
      var A = n.Objects.AnimationCurveNode, C = /* @__PURE__ */ new Map();
      for (var I in A) {
        var E = A[I];
        if (E.attrName.match(/S|R|T|DeformPercent/) !== null) {
          var D = {
            id: E.id,
            attr: E.attrName,
            curves: {}
          };
          C.set(D.id, D);
        }
      }
      return C;
    },
    // parse nodes in FBXTree.Objects.AnimationCurve and connect them up to
    // previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated
    // axis ( e.g. times and values of x rotation)
    parseAnimationCurves: function(A) {
      var C = n.Objects.AnimationCurve;
      for (var I in C) {
        var E = {
          id: C[I].id,
          times: C[I].KeyTime.a.map(p),
          values: C[I].KeyValueFloat.a
        }, D = t.get(E.id);
        if (D !== void 0) {
          var L = D.parents[0].ID, N = D.parents[0].relationship;
          N.match(/X/) ? A.get(L).curves.x = E : N.match(/Y/) ? A.get(L).curves.y = E : N.match(/Z/) ? A.get(L).curves.z = E : N.match(/d|DeformPercent/) && A.has(L) && (A.get(L).curves.morph = E);
        }
      }
    },
    // parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references
    // to various AnimationCurveNodes and is referenced by an AnimationStack node
    // note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack
    parseAnimationLayers: function(A) {
      var C = n.Objects.AnimationLayer, I = /* @__PURE__ */ new Map();
      for (var E in C) {
        var D = [], L = t.get(parseInt(E));
        if (L !== void 0) {
          var N = L.children;
          N.forEach(function(G, Z) {
            if (A.has(G.ID)) {
              var ee = A.get(G.ID);
              if (ee.curves.x !== void 0 || ee.curves.y !== void 0 || ee.curves.z !== void 0) {
                if (D[Z] === void 0) {
                  var J = t.get(G.ID).parents.filter(function(le) {
                    return le.relationship !== void 0;
                  })[0].ID;
                  if (J !== void 0) {
                    var ie = n.Objects.Model[J.toString()];
                    if (ie === void 0) {
                      console.warn("THREE.FBXLoader: Encountered a unused curve.", G);
                      return;
                    }
                    var ne = {
                      modelName: ie.attrName ? ia.sanitizeNodeName(ie.attrName) : "",
                      ID: ie.id,
                      initialPosition: [0, 0, 0],
                      initialRotation: [0, 0, 0],
                      initialScale: [1, 1, 1]
                    };
                    e.traverse(function(le) {
                      le.ID === ie.id && (ne.transform = le.matrix, le.userData.transformData && (ne.eulerOrder = le.userData.transformData.eulerOrder));
                    }), ne.transform || (ne.transform = new tt()), "PreRotation" in ie && (ne.preRotation = ie.PreRotation.value), "PostRotation" in ie && (ne.postRotation = ie.PostRotation.value), D[Z] = ne;
                  }
                }
                D[Z] && (D[Z][ee.attr] = ee);
              } else if (ee.curves.morph !== void 0) {
                if (D[Z] === void 0) {
                  var he = t.get(G.ID).parents.filter(function(Ee) {
                    return Ee.relationship !== void 0;
                  })[0].ID, Le = t.get(he).parents[0].ID, we = t.get(Le).parents[0].ID, J = t.get(we).parents[0].ID, ie = n.Objects.Model[J], ne = {
                    modelName: ie.attrName ? ia.sanitizeNodeName(ie.attrName) : "",
                    morphName: n.Objects.Deformer[he].attrName
                  };
                  D[Z] = ne;
                }
                D[Z][ee.attr] = ee;
              }
            }
          }), I.set(parseInt(E), D);
        }
      }
      return I;
    },
    // parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation
    // hierarchy. Each Stack node will be used to create a AnimationClip
    parseAnimStacks: function(A) {
      var C = n.Objects.AnimationStack, I = {};
      for (var E in C) {
        var D = t.get(parseInt(E)).children;
        D.length > 1 && console.warn(
          "THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers."
        );
        var L = A.get(D[0].ID);
        I[E] = {
          name: C[E].attrName,
          layer: L
        };
      }
      return I;
    },
    addClip: function(A) {
      var C = [], I = this;
      return A.layer.forEach(function(E) {
        C = C.concat(I.generateTracks(E));
      }), new Bv(A.name, -1, C);
    },
    generateTracks: function(A) {
      var C = [], I = new fe(), E = new ys(), D = new fe();
      if (A.transform && A.transform.decompose(I, E, D), I = I.toArray(), E = new Fn().setFromQuaternion(E, A.eulerOrder).toArray(), D = D.toArray(), A.T !== void 0 && Object.keys(A.T.curves).length > 0) {
        var L = this.generateVectorTrack(A.modelName, A.T.curves, I, "position");
        L !== void 0 && C.push(L);
      }
      if (A.R !== void 0 && Object.keys(A.R.curves).length > 0) {
        var N = this.generateRotationTrack(
          A.modelName,
          A.R.curves,
          E,
          A.preRotation,
          A.postRotation,
          A.eulerOrder
        );
        N !== void 0 && C.push(N);
      }
      if (A.S !== void 0 && Object.keys(A.S.curves).length > 0) {
        var G = this.generateVectorTrack(A.modelName, A.S.curves, D, "scale");
        G !== void 0 && C.push(G);
      }
      if (A.DeformPercent !== void 0) {
        var Z = this.generateMorphTrack(A);
        Z !== void 0 && C.push(Z);
      }
      return C;
    },
    generateVectorTrack: function(A, C, I, E) {
      var D = this.getTimesForAllAxes(C), L = this.getKeyframeTrackValues(D, C, I);
      return new Vv(A + "." + E, D, L);
    },
    generateRotationTrack: function(A, C, I, E, D, L) {
      C.x !== void 0 && (this.interpolateRotations(C.x), C.x.values = C.x.values.map(Ui.degToRad)), C.y !== void 0 && (this.interpolateRotations(C.y), C.y.values = C.y.values.map(Ui.degToRad)), C.z !== void 0 && (this.interpolateRotations(C.z), C.z.values = C.z.values.map(Ui.degToRad));
      var N = this.getTimesForAllAxes(C), G = this.getKeyframeTrackValues(N, C, I);
      E !== void 0 && (E = E.map(Ui.degToRad), E.push(L), E = new Fn().fromArray(E), E = new ys().setFromEuler(E)), D !== void 0 && (D = D.map(Ui.degToRad), D.push(L), D = new Fn().fromArray(D), D = new ys().setFromEuler(D).inverse());
      for (var Z = new ys(), ee = new Fn(), J = [], ie = 0; ie < G.length; ie += 3)
        ee.set(G[ie], G[ie + 1], G[ie + 2], L), Z.setFromEuler(ee), E !== void 0 && Z.premultiply(E), D !== void 0 && Z.multiply(D), Z.toArray(J, ie / 3 * 4);
      return new _v(A + ".quaternion", N, J);
    },
    generateMorphTrack: function(A) {
      var C = A.DeformPercent.curves.morph, I = C.values.map(function(D) {
        return D / 100;
      }), E = e.getObjectByName(A.modelName).morphTargetDictionary[A.morphName];
      return new Hv(A.modelName + ".morphTargetInfluences[" + E + "]", C.times, I);
    },
    // For all animated objects, times are defined separately for each axis
    // Here we'll combine the times into one sorted array without duplicates
    getTimesForAllAxes: function(A) {
      var C = [];
      return A.x !== void 0 && (C = C.concat(A.x.times)), A.y !== void 0 && (C = C.concat(A.y.times)), A.z !== void 0 && (C = C.concat(A.z.times)), C = C.sort(function(I, E) {
        return I - E;
      }).filter(function(I, E, D) {
        return D.indexOf(I) == E;
      }), C;
    },
    getKeyframeTrackValues: function(A, C, I) {
      var E = I, D = [], L = -1, N = -1, G = -1;
      return A.forEach(function(Z) {
        if (C.x && (L = C.x.times.indexOf(Z)), C.y && (N = C.y.times.indexOf(Z)), C.z && (G = C.z.times.indexOf(Z)), L !== -1) {
          var ee = C.x.values[L];
          D.push(ee), E[0] = ee;
        } else
          D.push(E[0]);
        if (N !== -1) {
          var J = C.y.values[N];
          D.push(J), E[1] = J;
        } else
          D.push(E[1]);
        if (G !== -1) {
          var ie = C.z.values[G];
          D.push(ie), E[2] = ie;
        } else
          D.push(E[2]);
      }), D;
    },
    // Rotations are defined as Euler angles which can have values  of any size
    // These will be converted to quaternions which don't support values greater than
    // PI, so we'll interpolate large rotations
    interpolateRotations: function(A) {
      for (var C = 1; C < A.values.length; C++) {
        var I = A.values[C - 1], E = A.values[C] - I, D = Math.abs(E);
        if (D >= 180) {
          for (var L = D / 180, N = E / L, G = I + N, Z = A.times[C - 1], ee = A.times[C] - Z, J = ee / L, ie = Z + J, ne = [], he = []; ie < A.times[C]; )
            ne.push(ie), ie += J, he.push(G), G += N;
          A.times = O(A.times, C, ne), A.values = O(A.values, C, he);
        }
      }
    }
  };
  function a() {
  }
  a.prototype = {
    constructor: a,
    getPrevNode: function() {
      return this.nodeStack[this.currentIndent - 2];
    },
    getCurrentNode: function() {
      return this.nodeStack[this.currentIndent - 1];
    },
    getCurrentProp: function() {
      return this.currentProp;
    },
    pushStack: function(A) {
      this.nodeStack.push(A), this.currentIndent += 1;
    },
    popStack: function() {
      this.nodeStack.pop(), this.currentIndent -= 1;
    },
    setCurrentProp: function(A, C) {
      this.currentProp = A, this.currentPropName = C;
    },
    parse: function(A) {
      this.currentIndent = 0, this.allNodes = new h(), this.nodeStack = [], this.currentProp = [], this.currentPropName = "";
      var C = this, I = A.split(/[\r\n]+/);
      return I.forEach(function(E, D) {
        var L = E.match(/^[\s\t]*;/), N = E.match(/^[\s\t]*$/);
        if (!(L || N)) {
          var G = E.match("^\\t{" + C.currentIndent + "}(\\w+):(.*){", ""), Z = E.match("^\\t{" + C.currentIndent + "}(\\w+):[\\s\\t\\r\\n](.*)"), ee = E.match("^\\t{" + (C.currentIndent - 1) + "}}");
          G ? C.parseNodeBegin(E, G) : Z ? C.parseNodeProperty(E, Z, I[++D]) : ee ? C.popStack() : E.match(/^[^\s\t}]/) && C.parseNodePropertyContinued(E);
        }
      }), this.allNodes;
    },
    parseNodeBegin: function(A, C) {
      var I = C[1].trim().replace(/^"/, "").replace(/"$/, ""), E = C[2].split(",").map(function(G) {
        return G.trim().replace(/^"/, "").replace(/"$/, "");
      }), D = { name: I }, L = this.parseNodeAttr(E), N = this.getCurrentNode();
      this.currentIndent === 0 ? this.allNodes.add(I, D) : I in N ? (I === "PoseNode" ? N.PoseNode.push(D) : N[I].id !== void 0 && (N[I] = {}, N[I][N[I].id] = N[I]), L.id !== "" && (N[I][L.id] = D)) : typeof L.id == "number" ? (N[I] = {}, N[I][L.id] = D) : I !== "Properties70" && (I === "PoseNode" ? N[I] = [D] : N[I] = D), typeof L.id == "number" && (D.id = L.id), L.name !== "" && (D.attrName = L.name), L.type !== "" && (D.attrType = L.type), this.pushStack(D);
    },
    parseNodeAttr: function(A) {
      var C = A[0];
      A[0] !== "" && (C = parseInt(A[0]), isNaN(C) && (C = A[0]));
      var I = "", E = "";
      return A.length > 1 && (I = A[1].replace(/^(\w+)::/, ""), E = A[2]), { id: C, name: I, type: E };
    },
    parseNodeProperty: function(A, C, I) {
      var E = C[1].replace(/^"/, "").replace(/"$/, "").trim(), D = C[2].replace(/^"/, "").replace(/"$/, "").trim();
      E === "Content" && D === "," && (D = I.replace(/"/g, "").replace(/,$/, "").trim());
      var L = this.getCurrentNode(), N = L.name;
      if (N === "Properties70") {
        this.parseNodeSpecialProperty(A, E, D);
        return;
      }
      if (E === "C") {
        var G = D.split(",").slice(1), Z = parseInt(G[0]), ee = parseInt(G[1]), J = D.split(",").slice(3);
        J = J.map(function(ie) {
          return ie.trim().replace(/^"/, "");
        }), E = "connections", D = [Z, ee], V(D, J), L[E] === void 0 && (L[E] = []);
      }
      E === "Node" && (L.id = D), E in L && Array.isArray(L[E]) ? L[E].push(D) : E !== "a" ? L[E] = D : L.a = D, this.setCurrentProp(L, E), E === "a" && D.slice(-1) !== "," && (L.a = T(D));
    },
    parseNodePropertyContinued: function(A) {
      var C = this.getCurrentNode();
      C.a += A, A.slice(-1) !== "," && (C.a = T(C.a));
    },
    // parse "Property70"
    parseNodeSpecialProperty: function(A, C, I) {
      var E = I.split('",').map(function(ee) {
        return ee.trim().replace(/^\"/, "").replace(/\s/, "_");
      }), D = E[0], L = E[1], N = E[2], G = E[3], Z = E[4];
      switch (L) {
        case "int":
        case "enum":
        case "bool":
        case "ULongLong":
        case "double":
        case "Number":
        case "FieldOfView":
          Z = parseFloat(Z);
          break;
        case "Color":
        case "ColorRGB":
        case "Vector3D":
        case "Lcl_Translation":
        case "Lcl_Rotation":
        case "Lcl_Scaling":
          Z = T(Z);
          break;
      }
      this.getPrevNode()[D] = {
        type: L,
        type2: N,
        flag: G,
        value: Z
      }, this.setCurrentProp(this.getPrevNode(), D);
    }
  };
  function l() {
  }
  l.prototype = {
    constructor: l,
    parse: function(A) {
      var C = new c(A);
      C.skip(23);
      var I = C.getUint32();
      console.info("THREE.FBXLoader: FBX binary version: " + I);
      for (var E = new h(); !this.endOfContent(C); ) {
        var D = this.parseNode(C, I);
        D !== null && E.add(D.name, D);
      }
      return E;
    },
    // Check if reader has reached the end of content.
    endOfContent: function(A) {
      return A.size() % 16 === 0 ? (A.getOffset() + 160 + 16 & -16) >= A.size() : A.getOffset() + 160 + 16 >= A.size();
    },
    // recursively parse nodes until the end of the file is reached
    parseNode: function(A, C) {
      var I = {}, E = C >= 7500 ? A.getUint64() : A.getUint32(), D = C >= 7500 ? A.getUint64() : A.getUint32();
      C >= 7500 ? A.getUint64() : A.getUint32();
      var L = A.getUint8(), N = A.getString(L);
      if (E === 0)
        return null;
      for (var G = [], Z = 0; Z < D; Z++)
        G.push(this.parseProperty(A));
      var ee = G.length > 0 ? G[0] : "", J = G.length > 1 ? G[1] : "", ie = G.length > 2 ? G[2] : "";
      for (I.singleProperty = D === 1 && A.getOffset() === E; E > A.getOffset(); ) {
        var ne = this.parseNode(A, C);
        ne !== null && this.parseSubNode(N, I, ne);
      }
      return I.propertyList = G, typeof ee == "number" && (I.id = ee), J !== "" && (I.attrName = J), ie !== "" && (I.attrType = ie), N !== "" && (I.name = N), I;
    },
    parseSubNode: function(A, C, I) {
      if (I.singleProperty === !0) {
        var E = I.propertyList[0];
        Array.isArray(E) ? (C[I.name] = I, I.a = E) : C[I.name] = E;
      } else if (A === "Connections" && I.name === "C") {
        var D = [];
        I.propertyList.forEach(function(ie, ne) {
          ne !== 0 && D.push(ie);
        }), C.connections === void 0 && (C.connections = []), C.connections.push(D);
      } else if (I.name === "Properties70") {
        var L = Object.keys(I);
        L.forEach(function(ie) {
          C[ie] = I[ie];
        });
      } else if (A === "Properties70" && I.name === "P") {
        var N = I.propertyList[0], G = I.propertyList[1], Z = I.propertyList[2], ee = I.propertyList[3], J;
        N.indexOf("Lcl ") === 0 && (N = N.replace("Lcl ", "Lcl_")), G.indexOf("Lcl ") === 0 && (G = G.replace("Lcl ", "Lcl_")), G === "Color" || G === "ColorRGB" || G === "Vector" || G === "Vector3D" || G.indexOf("Lcl_") === 0 ? J = [I.propertyList[4], I.propertyList[5], I.propertyList[6]] : J = I.propertyList[4], C[N] = {
          type: G,
          type2: Z,
          flag: ee,
          value: J
        };
      } else
        C[I.name] === void 0 ? typeof I.id == "number" ? (C[I.name] = {}, C[I.name][I.id] = I) : C[I.name] = I : I.name === "PoseNode" ? (Array.isArray(C[I.name]) || (C[I.name] = [C[I.name]]), C[I.name].push(I)) : C[I.name][I.id] === void 0 && (C[I.name][I.id] = I);
    },
    parseProperty: function(A) {
      var C = A.getString(1);
      switch (C) {
        case "C":
          return A.getBoolean();
        case "D":
          return A.getFloat64();
        case "F":
          return A.getFloat32();
        case "I":
          return A.getInt32();
        case "L":
          return A.getInt64();
        case "R":
          var I = A.getUint32();
          return A.getArrayBuffer(I);
        case "S":
          var I = A.getUint32();
          return A.getString(I);
        case "Y":
          return A.getInt16();
        case "b":
        case "c":
        case "d":
        case "f":
        case "i":
        case "l":
          var E = A.getUint32(), D = A.getUint32(), L = A.getUint32();
          if (D === 0)
            switch (C) {
              case "b":
              case "c":
                return A.getBooleanArray(E);
              case "d":
                return A.getFloat64Array(E);
              case "f":
                return A.getFloat32Array(E);
              case "i":
                return A.getInt32Array(E);
              case "l":
                return A.getInt64Array(E);
            }
          typeof Ju == "undefined" && console.error(
            "THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js"
          );
          var N = new Ju.Inflate(new Uint8Array(A.getArrayBuffer(L))), G = new c(N.decompress().buffer);
          switch (C) {
            case "b":
            case "c":
              return G.getBooleanArray(E);
            case "d":
              return G.getFloat64Array(E);
            case "f":
              return G.getFloat32Array(E);
            case "i":
              return G.getInt32Array(E);
            case "l":
              return G.getInt64Array(E);
          }
        default:
          throw new Error("THREE.FBXLoader: Unknown property type " + C);
      }
    }
  };
  function c(A, C) {
    this.dv = new DataView(A), this.offset = 0, this.littleEndian = C !== void 0 ? C : !0;
  }
  c.prototype = {
    constructor: c,
    getOffset: function() {
      return this.offset;
    },
    size: function() {
      return this.dv.buffer.byteLength;
    },
    skip: function(A) {
      this.offset += A;
    },
    // seems like true/false representation depends on exporter.
    // true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)
    // then sees LSB.
    getBoolean: function() {
      return (this.getUint8() & 1) === 1;
    },
    getBooleanArray: function(A) {
      for (var C = [], I = 0; I < A; I++)
        C.push(this.getBoolean());
      return C;
    },
    getUint8: function() {
      var A = this.dv.getUint8(this.offset);
      return this.offset += 1, A;
    },
    getInt16: function() {
      var A = this.dv.getInt16(this.offset, this.littleEndian);
      return this.offset += 2, A;
    },
    getInt32: function() {
      var A = this.dv.getInt32(this.offset, this.littleEndian);
      return this.offset += 4, A;
    },
    getInt32Array: function(A) {
      for (var C = [], I = 0; I < A; I++)
        C.push(this.getInt32());
      return C;
    },
    getUint32: function() {
      var A = this.dv.getUint32(this.offset, this.littleEndian);
      return this.offset += 4, A;
    },
    // JavaScript doesn't support 64-bit integer so calculate this here
    // 1 << 32 will return 1 so using multiply operation instead here.
    // There's a possibility that this method returns wrong value if the value
    // is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.
    // TODO: safely handle 64-bit integer
    getInt64: function() {
      var A, C;
      return this.littleEndian ? (A = this.getUint32(), C = this.getUint32()) : (C = this.getUint32(), A = this.getUint32()), C & 2147483648 ? (C = ~C & 4294967295, A = ~A & 4294967295, A === 4294967295 && (C = C + 1 & 4294967295), A = A + 1 & 4294967295, -(C * 4294967296 + A)) : C * 4294967296 + A;
    },
    getInt64Array: function(A) {
      for (var C = [], I = 0; I < A; I++)
        C.push(this.getInt64());
      return C;
    },
    // Note: see getInt64() comment
    getUint64: function() {
      var A, C;
      return this.littleEndian ? (A = this.getUint32(), C = this.getUint32()) : (C = this.getUint32(), A = this.getUint32()), C * 4294967296 + A;
    },
    getFloat32: function() {
      var A = this.dv.getFloat32(this.offset, this.littleEndian);
      return this.offset += 4, A;
    },
    getFloat32Array: function(A) {
      for (var C = [], I = 0; I < A; I++)
        C.push(this.getFloat32());
      return C;
    },
    getFloat64: function() {
      var A = this.dv.getFloat64(this.offset, this.littleEndian);
      return this.offset += 8, A;
    },
    getFloat64Array: function(A) {
      for (var C = [], I = 0; I < A; I++)
        C.push(this.getFloat64());
      return C;
    },
    getArrayBuffer: function(A) {
      var C = this.dv.buffer.slice(this.offset, this.offset + A);
      return this.offset += A, C;
    },
    getString: function(A) {
      for (var C = [], I = 0; I < A; I++)
        C[I] = this.getUint8();
      var E = C.indexOf(0);
      return E >= 0 && (C = C.slice(0, E)), zl.decodeText(new Uint8Array(C));
    }
  };
  function h() {
  }
  h.prototype = {
    constructor: h,
    add: function(A, C) {
      this[A] = C;
    }
  };
  function d(A) {
    var C = "Kaydara FBX Binary  \0";
    return A.byteLength >= C.length && C === S(A, 0, C.length);
  }
  function f(A) {
    var C = ["K", "a", "y", "d", "a", "r", "a", "\\", "F", "B", "X", "\\", "B", "i", "n", "a", "r", "y", "\\", "\\"], I = 0;
    function E(N) {
      var G = A[N - 1];
      return A = A.slice(I + N), I++, G;
    }
    for (var D = 0; D < C.length; ++D) {
      var L = E(1);
      if (L === C[D])
        return !1;
    }
    return !0;
  }
  function g(A) {
    var C = /FBXVersion: (\d+)/, I = A.match(C);
    if (I) {
      var E = parseInt(I[1]);
      return E;
    }
    throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.");
  }
  function p(A) {
    return A / 46186158e3;
  }
  var m = [];
  function v(A, C, I, E) {
    var D;
    switch (E.mappingType) {
      case "ByPolygonVertex":
        D = A;
        break;
      case "ByPolygon":
        D = C;
        break;
      case "ByVertice":
        D = I;
        break;
      case "AllSame":
        D = E.indices[0];
        break;
      default:
        console.warn("THREE.FBXLoader: unknown attribute mapping type " + E.mappingType);
    }
    E.referenceType === "IndexToDirect" && (D = E.indices[D]);
    var L = D * E.dataSize, N = L + E.dataSize;
    return z(m, E.buffer, L, N);
  }
  var b = new Fn(), w = new fe();
  function x(A) {
    var C = new tt(), I = new tt(), E = new tt(), D = new tt(), L = new tt(), N = new tt(), G = new tt(), Z = new tt(), ee = new tt(), J = new tt(), ie = new tt(), ne = A.inheritType ? A.inheritType : 0;
    if (A.translation && C.setPosition(w.fromArray(A.translation)), A.preRotation) {
      var he = A.preRotation.map(Ui.degToRad);
      he.push(A.eulerOrder), I.makeRotationFromEuler(b.fromArray(he));
    }
    if (A.rotation) {
      var he = A.rotation.map(Ui.degToRad);
      he.push(A.eulerOrder), E.makeRotationFromEuler(b.fromArray(he));
    }
    if (A.postRotation) {
      var he = A.postRotation.map(Ui.degToRad);
      he.push(A.eulerOrder), D.makeRotationFromEuler(b.fromArray(he));
    }
    A.scale && L.scale(w.fromArray(A.scale)), A.scalingOffset && G.setPosition(w.fromArray(A.scalingOffset)), A.scalingPivot && N.setPosition(w.fromArray(A.scalingPivot)), A.rotationOffset && Z.setPosition(w.fromArray(A.rotationOffset)), A.rotationPivot && ee.setPosition(w.fromArray(A.rotationPivot)), A.parentMatrixWorld && (J = A.parentMatrixWorld);
    var Le = I.multiply(E).multiply(D), we = new tt();
    J.extractRotation(we);
    var le = new tt();
    le.copyPosition(J);
    var ae = new tt();
    ae.getInverse(we).multiply(J);
    var ce = new tt();
    if (ne === 0)
      ce.copy(we).multiply(Le).multiply(ae).multiply(L);
    else if (ne === 1)
      ce.copy(we).multiply(ae).multiply(Le).multiply(L);
    else {
      var Ee = new tt().getInverse(L), Ae = new tt().multiply(ae).multiply(Ee);
      ce.copy(we).multiply(Le).multiply(Ae).multiply(L);
    }
    var Ge = new tt().getInverse(ee), Be = new tt().getInverse(N), Te = new tt();
    Te.copy(C).multiply(Z).multiply(ee).multiply(I).multiply(E).multiply(D).multiply(Ge).multiply(G).multiply(N).multiply(L).multiply(Be);
    var Ne = new tt().copyPosition(Te), ue = new tt().copy(J).multiply(Ne);
    return ie.copyPosition(ue), Te = new tt().multiply(ie).multiply(ce), Te;
  }
  function k(A) {
    A = A || 0;
    var C = [
      "ZYX",
      // -> XYZ extrinsic
      "YZX",
      // -> XZY extrinsic
      "XZY",
      // -> YZX extrinsic
      "ZXY",
      // -> YXZ extrinsic
      "YXZ",
      // -> ZXY extrinsic
      "XYZ"
      // -> ZYX extrinsic
      // 'SphericXYZ', // not possible to support
    ];
    return A === 6 ? (console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."), C[0]) : C[A];
  }
  function T(A) {
    var C = A.split(",").map(function(I) {
      return parseFloat(I);
    });
    return C;
  }
  function S(A, C, I) {
    return C === void 0 && (C = 0), I === void 0 && (I = A.byteLength), zl.decodeText(new Uint8Array(A, C, I));
  }
  function V(A, C) {
    for (var I = 0, E = A.length, D = C.length; I < D; I++, E++)
      A[E] = C[I];
  }
  function z(A, C, I, E) {
    for (var D = I, L = 0; D < E; D++, L++)
      A[L] = C[D];
    return A;
  }
  function O(A, C, I) {
    return A.slice(0, C).concat(I).concat(A.slice(C));
  }
  return i;
}();
const Zx = (n, t) => {
  var m;
  const e = t.fbx_url || "//vrlab-image4.ljcdn.com/release/web/dipan2.f38a21cc.FBX", i = (m = t.north_rad) != null ? m : void 0, s = {};
  let r = { x: 0, y: 0, z: 0 }, o = [0, 0, 0], a = 1, l = i;
  n.on("modelLoaded", p);
  const c = (v) => $(void 0, null, function* () {
    var k;
    const b = (v == null ? void 0 : v.fbx_url) || e;
    if (l = (k = v == null ? void 0 : v.north_rad) != null ? k : i, typeof l != "number")
      throw new Error('"northRad"配置参数缺失：未配置指南针指向！');
    const x = yield new D0().loadAsync(b);
    return I0(x, {
      transparent: !0,
      side: P.DoubleSide,
      blending: P.AdditiveBlending
    }), s.object = x, p(), !0;
  }), h = ({ latitude: v }) => {
    if (!s.object)
      return;
    const b = d(v);
    b && (s.object.position.y = b);
  }, d = (v) => {
    if (s.yBase === void 0)
      return;
    const b = 0.6;
    if (v >= Math.PI / 4)
      return s.yBase - (b + 1.6);
    const w = v * (4 / Math.PI);
    return s.yBase - (b * w + 1.6);
  }, f = () => {
    if (!s.object)
      return;
    const v = d(n.getPose().latitude);
    v && (s.object.position.y = v), n.scene.add(s.object), n.needsRender = !0, n.on("cameraDirectionUpdate", h);
  }, g = () => {
    s.object && (n.scene.remove(s.object), n.needsRender = !0, n.off("cameraDirectionUpdate", h));
  };
  function p() {
    const v = s.object;
    if (!v)
      return;
    const b = n.model.bounding, w = b.max.x - b.min.x, x = b.max.z - b.min.z, k = Math.max(w, x), {
      max: { x: T, z: S },
      min: { x: V, y: z, z: O }
    } = b;
    s.yBase = z, r = { x: (T + V) / 2, y: z - 1.6, z: (S + O) / 2 }, o = [0, l - Math.PI / 2, 0], a = 45e-4 * k, z3(v, { position: r, rotation: o, scale: a });
  }
  return { load: c, disable: g, enable: f };
};
function B3(n, t) {
  var c, h, d, f, g;
  const e = (c = t == null ? void 0 : t.size) != null ? c : 512, i = (h = t == null ? void 0 : t.fontSize) != null ? h : e * (35 / 256) * 1.2, s = (d = t == null ? void 0 : t.backgroundColor) != null ? d : "rgba(0,0,0,0)", r = (f = t == null ? void 0 : t.fontColor) != null ? f : "#fff", o = (g = t == null ? void 0 : t.textAlign) != null ? g : "center", a = document.createElement("canvas");
  a.setAttribute("width", e + ""), a.setAttribute("height", e + "");
  const l = a.getContext("2d");
  return l.fillStyle = s, l.fillRect(0, 0, e, e), l.font = `${i}px "微软雅黑"`, l.textAlign = o, l.fillStyle = r, l.fillText(n, e / 2, e * 0.7), new Fv(a);
}
const V3 = ({ x: n, y: t, z: e }) => new fe(n, t, e), Jx = (n, t) => {
  var m, v, b;
  const e = {}, i = (m = t.animationEnabled) != null ? m : !0, s = (v = t.position) != null ? v : void 0, r = (b = t.rad) != null ? b : void 0, o = t.fbx_url || "//vrlab-image4.ljcdn.com/release/web/entryDoorMini/Anim_Door1.fbx", a = [], l = (w) => $(void 0, null, function* () {
    var A, C, I, E, D, L, N, G;
    const x = (A = w == null ? void 0 : w.position) != null ? A : s;
    if (!x)
      return Promise.reject(new Error("ModelEntryDoorGuidePlugin.load(): position is undefined"));
    const k = V3(x), T = (C = w == null ? void 0 : w.rad) != null ? C : r, S = (I = w == null ? void 0 : w.fbx_url) != null ? I : o;
    if (e.rad = T, T === void 0)
      return Promise.reject(new Error(`ModelEntryDoorGuidePlugin.load(): rad is ${T}`));
    const V = yield new D0().loadAsync(S);
    V.position.copy(k), V.rotation.z = T, V.scale.set(0.8, 0.8, 0.8), I0(V, { transparent: !0, side: P.DoubleSide });
    const z = (N = (L = (D = (E = V.children) == null ? void 0 : E[0]) == null ? void 0 : D.children) == null ? void 0 : L[3]) == null ? void 0 : N.clone();
    if (!z)
      return Promise.reject(new Error(`ModelEntryDoorGuidePlugin.load(): textMesh is ${z}`));
    const O = (G = t.name) != null ? G : "入户门";
    return z.material = new bo({ transparent: !0, map: B3(O) }), z.renderOrder = 3, V.children[0].add(z), e.object = V, !0;
  }), c = () => {
    if (e.animation)
      return;
    if (!e.object)
      return console.error("ModelEntryDoorGuidePlugin.initAnimation(): state.object is ", e.object);
    const w = 1, x = new Nv(e.object);
    a.push(x);
    const k = x.clipAction(e.object.animations[0]);
    k.timeScale = w;
    let T;
    const S = () => {
      let A = 0, C = 0;
      const I = 1e3 / 30, E = (D) => {
        A = requestAnimationFrame(E);
        const L = D - C;
        L < I || (C = D, a.forEach((N) => N.update(L / 1e3)), n.needsRender = !0);
      };
      return A = requestAnimationFrame(E), () => {
        cancelAnimationFrame(A);
      };
    }, O = { play: () => {
      T || (k.play(), T = S(), requestAnimationFrame(() => {
        e.object && e.object.rotation.z !== e.rad && (e.object.rotation.z = e.rad);
      }));
    }, stop: () => {
      k.stop(), T == null || T(), T = void 0;
    } };
    e.animation = O;
  }, h = (w) => {
    var k;
    if (!e.object)
      return console.error("ModelEntryDoorGuidePlugin.enable(): object is ", e.object);
    ((k = w == null ? void 0 : w.animationEnable) != null ? k : i) && (e.animation || c(), e.animation.play()), n.scene.add(e.object), n.needsRender = !0;
  }, d = () => {
    e.object && (e.animation && e.animation.stop(), n.scene.remove(e.object), n.needsRender = !0);
  }, f = (w) => w === "Floorplan" ? h() : d();
  return { load: l, enable: (w) => (e.enabled || (e.enabled = !0, f(n.currentMode), n.on("modeChange", f), h(w)), !0), disable: () => (e.enabled && (e.enabled = !1, d(), n.off("modeChange", f)), !0) };
}, _3 = ji;
function H3(n, t, e, i = _3.Linear.None) {
  const s = new sl(n).to(t, e).easing(i);
  Fo(() => s.start(0));
  const r = jr((a) => {
    s.update(a) === !1 && r();
  }), o = [];
  return s.onDestroy = (a) => (o.push(a), s), s.destroy = function() {
    this.stop(), Object.assign(s, {
      _onStartCallback: null,
      _onUpdateCallback: null,
      _onCompleteCallback: null,
      _onStopCallbackL: null
    });
    let a;
    for (; a = o.shift(); )
      a();
    r();
  }, s;
}
function F3(n, t) {
  return H3({ progress: 0 }, { progress: 1 }, n, t);
}
var N3 = /* @__PURE__ */ ((n) => (n.Move = "Move", n.Rotate = "Rotate", n))(N3 || {}), dn = /* @__PURE__ */ ((n) => (n.Clockwise = "Clockwise", n.Anticlockwise = "Anticlockwise", n.Loop = "Loop", n))(dn || {});
const ka = Math.PI * 2;
function qu(n) {
  return (n % ka + ka) % ka;
}
function Ku(n) {
  return n % ka;
}
function Yl(n, t, e) {
  return n + (t - n) * e;
}
const Oc = (n, t, e) => {
  const i = Math.PI, s = i * 2;
  let r = qu(n), o = qu(t);
  return e === dn.Anticlockwise && r < o && (r += s), e === dn.Clockwise && o < r && (o += s), e === dn.Loop && o - r > i ? Oc(r, o, dn.Anticlockwise) : e === dn.Loop && r - o > i ? Oc(r, o, dn.Clockwise) : { from: r, to: o };
}, qx = (n) => {
  const t = {}, e = (l, c, ...h) => $(void 0, [l, c, ...h], function* (r, o, a = { preload: !0 }) {
    return t.interruptCallback && t.interruptCallback(!1), a.asyncStartCallback && (yield a.asyncStartCallback()), r.mode && r.mode !== n.currentMode && (yield n.changeMode(r.mode)), a.preload && r.panoIndex !== void 0 && r.panoIndex !== n.panoIndex && (yield n.preloadPano(r.panoIndex)), a.asyncEndCallback && (yield a.asyncEndCallback()), r.panoIndex === void 0 && r.fov === void 0 && r.latitude === void 0 && r.longitude === void 0 ? !0 : yield new Promise((d, f) => {
      const g = r.panoIndex !== void 0 ? r.panoIndex : n.panoIndex;
      g !== void 0 ? n.moveToPano(g, _({
        duration: o,
        // 移动耗时
        moveEndCallback: () => d(!0),
        // 移动结束
        moveCancelCallback: () => f(new Error("move canceled"))
      }, r)) : f(new Error("unexpected error"));
    });
  }), i = (r) => {
    const o = n.state, a = Ku(o.latitude), l = Ku(r.latitude), { from: c, to: h } = Oc(
      o.longitude,
      r.longitude,
      r.rotation || dn.Loop
    ), d = o.fov, f = r.fov;
    return {
      from: { latitude: a, longitude: c, fov: d },
      to: { latitude: l, longitude: h, fov: f }
    };
  };
  return {
    move: e,
    rotate: (l, c, ...h) => $(void 0, [l, c, ...h], function* (r, o, a = {}) {
      t.interruptCallback && t.interruptCallback(!1), a.asyncStartCallback && (yield a.asyncStartCallback()), n.currentMode !== Vt.Mode.Panorama && (yield n.changeMode(Vt.Mode.Panorama)), r.panoIndex !== void 0 && r.panoIndex !== n.panoIndex && (a.preload && (yield n.preloadPano(r.panoIndex)), yield new Promise((g, p) => {
        if (!r.panoIndex) {
          g(!0);
          return;
        }
        n.moveToPano(r.panoIndex, {
          moveEndCallback: () => g(!0),
          // 移动结束
          moveCancelCallback: () => p(new Error("move canceled"))
          // 移动开始
        });
      })), a.asyncEndCallback && (yield a.asyncEndCallback());
      const { from: d, to: f } = i(r);
      return yield new Promise((g) => {
        const p = ({ progress: x }) => {
          const k = {};
          k.longitude = Yl(d.longitude, f.longitude, x), k.latitude = Yl(d.latitude, f.latitude, x), k.fov = Yl(d.fov, f.fov, x), n.setState(k, !0);
        }, m = () => {
          g(!0);
        }, v = () => {
          g(!1);
        }, b = r.rotateSpeed ? Math.ceil(Math.abs(f.longitude - d.longitude) / r.rotateSpeed * 1e3) : o, w = F3(b, ji.Linear.None).onUpdate(p).onComplete(m).onDestroy(v);
        r.rotation === dn.Loop && w.repeat(1 / 0).yoyo(!0), t.interruptCallback = (x = !0) => {
          w.destroy(), t.interruptCallback = void 0, t.timeoutId && (clearTimeout(t.timeoutId), t.timeoutId = void 0), g(x);
        }, t.timeoutId = setTimeout(() => {
          t.interruptCallback && t.interruptCallback(!0);
        }, o);
      });
    })
  };
};
function $u(n, t) {
  return n.x === t.x && n.y === t.y;
}
function S0(n, t) {
  return Math.abs(n) === 1 / 0 && Math.abs(t) === 1 / 0 ? !0 : Math.abs(n - t) < 1e-3;
}
function Za(n, t) {
  return (t.y - n.y) / (t.x - n.x);
}
function T0(n, t, e) {
  const i = Za(n[1], n[0]), s = Za(t[1], t[0]);
  if (isNaN(i) || isNaN(s) || S0(i, s))
    return !1;
  if (da(n[0], t))
    return n[0];
  if (da(n[1], t))
    return n[1];
  if (da(t[0], n))
    return t[0];
  if (da(t[1], n))
    return t[1];
  if (e && !W3(n, t))
    return !1;
  const r = n[0], o = t[0];
  if (Math.abs(i) === 1 / 0)
    return { x: r.x, y: t[1].y - (t[1].x - r.x) * s };
  if (Math.abs(s) === 1 / 0)
    return { x: o.x, y: n[1].y - (n[1].x - o.x) * i };
  const a = (o.y - r.y + i * r.x - s * o.x) / (i - s), l = i * a - i * r.x + r.y;
  return { x: a, y: l };
}
function da(n, t) {
  return $u(n, t[0]) || $u(n, t[1]) ? !0 : (t[0].x - n.x) * (n.x - t[1].x) >= 0 && (t[0].y - n.y) * (n.y - t[1].y) >= 0 && S0(Za(t[0], n), Za(n, t[1]));
}
function G3(n) {
  let t = 1 / 0, e = -1 / 0, i = 1 / 0, s = -1 / 0;
  return n.forEach((r) => {
    t = Math.min(t, r.x), e = Math.max(e, r.x), i = Math.min(i, r.y), s = Math.max(s, r.y);
  }), { x: (t + e) / 2, y: (i + s) / 2 };
}
function ua(n, t, e) {
  return (n.x - e.x) * (t.y - e.y) - (t.x - e.x) * (n.y - e.y);
}
function W3(n, t) {
  return Math.max(n[0].x, n[1].x) >= Math.min(t[0].x, t[1].x) && Math.max(t[0].x, t[1].x) >= Math.min(n[0].x, n[1].x) && Math.max(n[0].y, n[1].y) >= Math.min(t[0].y, t[1].y) && ua(t[0], n[1], n[0]) * ua(n[1], t[1], n[0]) > 0 && ua(n[0], t[1], t[0]) * ua(t[1], n[1], t[0]) > 0 ? 1 : 0;
}
function L0(n, t = 0) {
  t <= 0 ? requestAnimationFrame(n) : requestAnimationFrame(() => L0(n, t - 1));
}
const Q3 = `<style type="text/css">
.PanoRulerPlugin-rule-line {
  position: absolute;
  transform-origin: left center;
  width: 0;
  height: 0.0625rem;
}

.PanoRulerPlugin-rule-line::after {
  content: '';
  position: absolute;
  left: -0.125rem;
  top: -0.1rem;
  width: 0.25rem;
  height: 0.25rem;
  border-radius: 50%;
  background: #FFFFFF;
  z-index: 1;
  animation: viewport-rule-point 0.1s 1s;
  animation-fill-mode: both;
}

.PanoRulerPlugin-rule-line::before {
  content: '';
  position: absolute;
  right: -0.125rem;
  top: -0.1rem;
  width: 0.25rem;
  height: 0.25rem;
  border-radius: 50%;
  background: #FFFFFF;
  animation: viewport-rule-point 0.1s 1.5s;
  animation-fill-mode: both;
}

.PanoRulerPlugin-rule-line em {
  background: #fff;
  display: block;
  height: 100%;
  animation: viewport-rule-line 0.5s ease 1s;
  animation-fill-mode: both;
  box-shadow: 0 0 0.25rem rgb(0 0 0 / 40%);
}

.PanoRulerPlugin-rule-label {
  position: absolute;
  width: 0;
  height: 0;
  top: 0.0625rem;
}

.PanoRulerPlugin-rule-label-name {
  position: absolute;
  padding: 0.1875rem 0.375rem;
  background: rgba(195,195,195,0.30);
  backdrop-filter: blur(0.25rem);
  -webkit-backdrop-filter: blur(0.25rem);
  border-radius: 6.25rem;
  border: 0.0625rem solid rgba(255,255,255,0.6);
  white-space: nowrap;
  overflow: hidden;
  color: #FFFFFF;
  font-weight: 500;
  font-size: 0.75rem;
  line-height: 1;
  -webkit-animation: viewport-rule-label 0.25s ease 1s;
  animation: viewport-rule-label 0.25s ease 1s;
  animation-fill-mode: both;
  box-shadow: inset 0 0 0.625rem 0 rgba(255,255,255,0.30);
}

@keyframes viewport-rule-line {
  0% { width: 0% }
  100% { width: 100% }
}

@keyframes viewport-rule-label {
  0% { opacity: 0; transform: scaleX(0); }
  100% { opacity: 1; transform: translate(-50%, -50%) scaleX(1); }
}

@keyframes viewport-rule-point {
  0% { transform: scaleX(0); }
  100% { transform: scaleX(1); }
}
</style>
`, U3 = (n, t) => Math.sqrt(Math.pow(n.z - t.z, 2) + Math.pow(n.x - t.x, 2)), X3 = (n, t) => {
  const e = {}, i = new Or(), s = t.work;
  if (!s)
    return e;
  const r = n.observers;
  s.observers.forEach((o, a) => {
    const { standingPosition: l } = o, c = new fe(l.x, l.y, l.z);
    i.set(c, new fe(0, 1, 0));
    const [h] = t.model.intersectRaycaster(i), d = h ? h.point.y : 2.7, f = r[a];
    if (!f)
      return e;
    const g = n.rooms[f].name;
    e[g] === void 0 ? e[g] = {
      __roof: [d],
      __floor: [c.y]
    } : (e[g].__roof.push(d), e[g].__floor.push(c.y));
  });
  for (const o in e) {
    const a = e[o];
    a.__roof.sort(), a.__floor.sort(), a.floor = a.__floor[~~(a.__floor.length / 2)], a.roof = a.__roof[a.__roof.length - 1];
  }
  return e;
}, Kx = (n, t) => {
  const e = {
    enable: !1,
    loaded: !1,
    options: t.options || {
      distanceText: (m) => `${m.toFixed(1)}m`
    }
  }, i = (m, v) => {
    const b = `
      <div class="PanoRulerPlugin-rule-line">
        <em></em>
        <div class="PanoRulerPlugin-rule-label">
          <div class="PanoRulerPlugin-rule-label-name">${e.options.distanceText(v)}</div>
        </div>
      </div>
    `, w = document.createElement("div");
    return w.setAttribute("class", "PanoRulerPlugin-rule"), w.setAttribute("data-name", m), w.setAttribute("style", "display: none"), w.innerHTML = b, w;
  }, s = document.createElement("div");
  s.setAttribute("style", "position: absolute;pointer-events: none;width: 100%;height: 100%;left: 0;top: 0;overflow: hidden;");
  const r = document.createElement("div");
  r.innerHTML = Q3, s.appendChild(r);
  const o = {}, a = (m, v) => {
    var x;
    if (e.loaded)
      throw new Error("标尺被重复初始化！");
    const b = X3(m, n), w = n.work;
    if (!w)
      return !1;
    for (const k in v) {
      const T = v[k], S = (x = w.observers[0]) == null ? void 0 : x.standingPosition;
      if (!S)
        return;
      const V = T.map(({ x: z, z: O, observers: A }) => {
        const C = A.length > 0 ? m.rooms[m.observers[A[0]]].name : "", I = b[C] ? b[C].floor : null;
        let E = 1 / 0, D = {
          index: 0,
          x: S.x,
          y: S.y,
          z: S.z
        };
        A.forEach((J) => {
          if (!w.observers[J])
            return;
          const { standingPosition: ie } = w.observers[J], ne = {
            index: J,
            x: ie.x,
            y: ie.y,
            z: ie.z
          }, he = U3({ x: z, z: O }, ne);
          I ? he < E && Math.abs(ne.y - I) < 0.3 && (E = he, D = ne) : he < E && (E = he, D = ne);
        });
        const L = new fe(z, D.y, O);
        Object.assign(L, { observers: A });
        const N = b[C] ? b[C].roof : null, G = N ? new fe(z, N, O) : null;
        return G && Object.assign(G, { observers: A }), { origin: L, vertical: G };
      });
      o[k] = {
        origins: V.map((z) => z.origin),
        rules: []
      };
      for (const { origin: z, vertical: O } of V) {
        if (!O)
          continue;
        const A = i(k, z.distanceTo(O));
        s.append(A), o[k].rules.push({ vertical: !0, rule: [z, O], $element: A });
      }
      for (let z = 0; z < V.length; z++) {
        let O = z + 1;
        O >= V.length && (O = 0);
        const { origin: A } = V[z], { origin: C } = V[O], I = i(k, A.distanceTo(C));
        s.append(I), o[k].rules.push({ vertical: !1, rule: [A, C], $element: I });
      }
    }
    return e.loaded = !0, !0;
  }, l = (m, v, b) => $(void 0, null, function* () {
    const w = m || t.roomInfo, x = v || t.roomRules;
    if (!w || !x)
      throw new Error("标尺数据依赖不齐全！");
    return e.loaded = !1, e.options = _(_({}, e.options), b || {}), n.model.loaded ? a(w, x) : yield new Promise((k) => n.once("modelLoaded", () => k(a(w, x))));
  });
  t.roomInfo && t.roomRules && l(t.roomInfo, t.roomRules);
  const c = (m, v, b, w) => {
    const x = [
      [
        { x: 0, y: 0 },
        { x: b, y: 0 }
      ],
      [
        { x: 0, y: 0 },
        { x: 0, y: w }
      ],
      [
        { x: b, y: 0 },
        { x: b, y: w }
      ],
      [
        { x: 0, y: w },
        { x: b, y: w }
      ]
    ], k = [];
    for (let T = 0; T < x.length; T++) {
      const S = T0([m, v], [x[T][0], x[T][1]], !0);
      S && k.push(S);
    }
    return k.length === 0 ? !1 : k;
  }, h = () => {
    var O;
    const m = (O = n.getElement()) == null ? void 0 : O.parentElement;
    if (!m || !e.loaded || Object.keys(o).length <= 0)
      return;
    const { panoIndex: v, camera: b, currentMode: w } = n;
    if (v === void 0)
      return;
    let x;
    for (const A in o)
      A.split(",").indexOf(v.toString()) >= 0 && (x = A);
    if (!x) {
      for (const A in o)
        for (const { $element: C } of o[A].rules)
          C.style.display = "none";
      return;
    }
    const k = b.position, T = b.getWorldDirection(new fe()), S = m.clientWidth, V = m.clientHeight;
    if (w !== Vt.Mode.Panorama) {
      for (const A in o)
        for (const { $element: C } of o[A].rules)
          C.style.display = "none";
      return;
    }
    for (const A in o)
      for (const { $element: C } of o[A].rules)
        C.style.display = A === x ? "block" : "none";
    const [z] = o[x].origins.slice().filter((A) => A.observers.indexOf(v) >= 0).sort((A, C) => {
      const I = A.clone().setY(0).sub(k).normalize().angleTo(T.clone().setY(0)), E = C.clone().setY(0).sub(k).normalize().angleTo(T.clone().setY(0));
      return I - E;
    });
    for (const { rule: A, vertical: C, $element: I } of o[x].rules) {
      const [E, D] = A, L = I.querySelector(".PanoRulerPlugin-rule-line");
      if (!L)
        return;
      if (!z) {
        I.style.display = "none";
        continue;
      }
      if (E !== z && D !== z) {
        I.style.display = "none";
        continue;
      }
      if (E.distanceTo(D) < 0.3) {
        I.style.display = "none";
        continue;
      }
      if (E.observers.indexOf(v) === -1 || D.observers.indexOf(v) === -1) {
        I.style.display = "none";
        continue;
      }
      if (E.clone().sub(k).normalize().angleTo(T) > Math.PI / 2) {
        I.style.display = "none";
        continue;
      }
      if (D.clone().sub(k).normalize().angleTo(T) > Math.PI / 2) {
        I.style.display = "none";
        continue;
      }
      const Z = E.distanceTo(D);
      if (D.clone().sub(
        D.clone().sub(E).divide(new fe(2, 2, 2))
      ).distanceTo(k) / Z > 8) {
        I.style.display = "none";
        continue;
      }
      const ie = E.clone().project(b), ne = (ie.x + 1) / 2 * S, he = (-ie.y + 1) / 2 * V, Le = D.clone().project(b), we = (Le.x + 1) / 2 * S, le = (-Le.y + 1) / 2 * V, ae = Math.sqrt(Math.pow(we - ne, 2) + Math.pow(le - he, 2));
      let ce = ae, Ee = 50;
      const Ae = c(
        { x: ~~ne, y: ~~he },
        {
          x: ~~we,
          y: ~~le
        },
        S,
        V
      );
      if (Ae && Ae.length === 1 && (z === E ? (ce = Math.sqrt(Math.pow(Ae[0].x - ne, 2) + Math.pow(Ae[0].y - he, 2)), Ee = ce / ae * 50) : z === D && (ce = Math.sqrt(Math.pow(Ae[0].x - we, 2) + Math.pow(Ae[0].y - le, 2)), Ee = 100 - ce / ae * 50)), Ae && Ae.length === 2) {
        const ue = {
          x: (Ae[0].x + Ae[1].x) / 2,
          y: (Ae[0].y + Ae[1].y) / 2
        };
        Ee = Math.sqrt(Math.pow(ue.x - ne, 2) + Math.pow(ue.y - he, 2)) / ae * 100;
      }
      const Be = (Math.PI / 2 - Math.atan2(we - ne, he - le)) / Math.PI * 180, Te = L.querySelector(".PanoRulerPlugin-rule-label"), Ne = Te.children[0].clientWidth;
      Ne >= ae || Ne / 2 >= Ee / 100 * ae || Ne / 2 >= (1 - Ee / 100) * ae ? L.style.display = "none" : (L.style.display = "block", L.style.width = ae + "px", L.style.left = ne + "px", L.style.top = he + "px", L.style.transform = `rotate(${-Be}deg)`, Te.style.left = `${Ee}%`);
    }
  }, d = () => L0(h), f = () => {
    var m, v;
    return e.loaded ? (e.enable || (s.setAttribute("class", "PanoRulerPlugin" + (e.options.className ? " " + e.options.className : "")), (v = (m = n.getElement()) == null ? void 0 : m.parentElement) == null || v.append(s), h(), n.on("modeChange", h), n.on("cameraUpdate", d), e.enable = !0), !0) : !1;
  }, g = () => (e.enable && (n.off("modeChange", h), n.off("cameraUpdate", d), s && s.remove(), e.enable = !1), !0);
  function p(m) {
    if (m.distanceText && m.distanceText !== e.options.distanceText) {
      const v = m.distanceText;
      e.options.distanceText = v, Object.values(o).forEach((b) => {
        b.rules.forEach((w) => {
          const [x, k] = w.rule, T = x.distanceTo(k), S = w.$element.querySelector(".PanoRulerPlugin-rule-label-name");
          S && (S.innerText = v(T));
        });
      });
    }
  }
  return {
    enable: f,
    disable: g,
    load: l,
    state: e,
    changeConfigs: p
  };
};
function Y3(n) {
  De(n, "svelte-1h27ktp", ".PanoRulerPlugin-rule-line.svelte-1h27ktp.svelte-1h27ktp{position:absolute;transform-origin:left 0.0625rem;width:0;height:0.125rem;pointer-events:none}.PanoRulerPlugin-rule-line.svelte-1h27ktp.svelte-1h27ktp::after{content:'';position:absolute;left:-0.125rem;top:-0.1rem;width:0.25rem;height:0.25rem;border-radius:50%;background:#fff;z-index:1;animation:svelte-1h27ktp-viewport-rule-point 0.1s 1s;animation-fill-mode:both}.PanoRulerPlugin-rule-line.svelte-1h27ktp.svelte-1h27ktp::before{content:'';position:absolute;right:-0.125rem;top:-0.1rem;width:0.25rem;height:0.25rem;border-radius:50%;background:#fff;z-index:1;animation:svelte-1h27ktp-viewport-rule-point 0.1s 1.5s;animation-fill-mode:both}.PanoRulerPlugin-rule-line.svelte-1h27ktp em.svelte-1h27ktp{display:block;height:0.0625rem;animation:svelte-1h27ktp-viewport-rule-line 0.5s ease 1s;animation-fill-mode:both;box-shadow:0 0 0.25rem rgb(0 0 0 / 40%);position:relative}.rule-mixed-line.svelte-1h27ktp.svelte-1h27ktp{display:flex;height:0.0625rem;animation:svelte-1h27ktp-viewport-rule-line 0.5s ease 1s;animation-fill-mode:both;align-items:center}.em-solid.svelte-1h27ktp.svelte-1h27ktp{height:100%;background:#ffffff}.em-dotted.svelte-1h27ktp.svelte-1h27ktp{height:0.125rem;background:var(--background-image);background-position:center;background-repeat:repeat}.PanoRulerPlugin-rule-label.svelte-1h27ktp.svelte-1h27ktp{position:absolute;width:0;height:0;top:0.0625rem;pointer-events:none}.PanoRulerPlugin-rule-label-name.svelte-1h27ktp.svelte-1h27ktp{position:absolute;padding:0.1875rem 0.375rem;background:rgba(195, 195, 195, 0.3);backdrop-filter:blur(0.25rem);-webkit-backdrop-filter:blur(0.25rem);border-radius:6.25rem;border:0.0625rem solid rgba(255, 255, 255, 0.6);white-space:nowrap;overflow:hidden;color:#ffffff;font-weight:500;font-size:0.75rem;line-height:1;animation:svelte-1h27ktp-viewport-rule-label 0.25s ease 1s;animation-fill-mode:both;box-shadow:inset 0 0 0.625rem 0 rgba(255, 255, 255, 0.3)}@keyframes svelte-1h27ktp-viewport-rule-line{0%{width:0%}100%{width:100%}}@keyframes svelte-1h27ktp-viewport-rule-label{0%{opacity:0;transform:scaleX(0)}100%{opacity:1;transform:translate(-50%, -50%) scaleX(1)}}@keyframes svelte-1h27ktp-viewport-rule-point{0%{transform:scaleX(0)}100%{transform:scaleX(1)}}");
}
function ef(n, t, e) {
  const i = n.slice();
  return i[6] = t[e], i;
}
function Z3(n) {
  let t, e = (
    /*rulerItemProp*/
    n[0].children
  ), i = [];
  for (let s = 0; s < e.length; s += 1)
    i[s] = tf(ef(n, e, s));
  return {
    c() {
      t = W("div");
      for (let s = 0; s < i.length; s += 1)
        i[s].c();
      y(t, "class", "rule-mixed-line svelte-1h27ktp");
    },
    m(s, r) {
      X(s, t, r);
      for (let o = 0; o < i.length; o += 1)
        i[o] && i[o].m(t, null);
    },
    p(s, r) {
      if (r & /*rulerItemProp, vars*/
      9) {
        e = /*rulerItemProp*/
        s[0].children;
        let o;
        for (o = 0; o < e.length; o += 1) {
          const a = ef(s, e, o);
          i[o] ? i[o].p(a, r) : (i[o] = tf(a), i[o].c(), i[o].m(t, null));
        }
        for (; o < i.length; o += 1)
          i[o].d(1);
        i.length = e.length;
      }
    },
    d(s) {
      s && U(t), pi(i, s);
    }
  };
}
function J3(n) {
  let t, e;
  return {
    c() {
      t = W("em"), y(t, "class", e = bt(
        /*rulerItemProp*/
        n[0].state ? "em-solid" : "em-dotted"
      ) + " svelte-1h27ktp"), y(
        t,
        "style",
        /*vars*/
        n[3]
      );
    },
    m(i, s) {
      X(i, t, s);
    },
    p(i, s) {
      s & /*rulerItemProp*/
      1 && e !== (e = bt(
        /*rulerItemProp*/
        i[0].state ? "em-solid" : "em-dotted"
      ) + " svelte-1h27ktp") && y(t, "class", e), s & /*vars*/
      8 && y(
        t,
        "style",
        /*vars*/
        i[3]
      );
    },
    d(i) {
      i && U(t);
    }
  };
}
function tf(n) {
  let t, e, i = `${/*child*/
  n[6].width}px`;
  return {
    c() {
      t = W("div"), y(t, "class", e = bt(
        /*child*/
        n[6].state ? "em-solid" : "em-dotted"
      ) + " svelte-1h27ktp"), y(
        t,
        "style",
        /*vars*/
        n[3]
      ), Q(t, "width", i);
    },
    m(s, r) {
      X(s, t, r);
    },
    p(s, r) {
      r & /*rulerItemProp*/
      1 && e !== (e = bt(
        /*child*/
        s[6].state ? "em-solid" : "em-dotted"
      ) + " svelte-1h27ktp") && y(t, "class", e), r & /*vars*/
      8 && y(
        t,
        "style",
        /*vars*/
        s[3]
      ), (r & /*vars*/
      8 || r & /*rulerItemProp, vars*/
      9 && i !== (i = `${/*child*/
      s[6].width}px`)) && Q(t, "width", i);
    },
    d(s) {
      s && U(t);
    }
  };
}
function q3(n) {
  let t, e, i, s, r = (
    /*rulerItemProp*/
    n[0].labelElement + ""
  ), o, a, l = `${/*rulerItemProp*/
  n[0].labelOffset}%`, c = `${/*rulerItemProp*/
  n[0].width}px`, h = `${/*rulerItemProp*/
  n[0].left}px`, d = `${/*rulerItemProp*/
  n[0].top}px`, f = `rotate(${/*rulerItemProp*/
  n[0].rotateDeg}deg)`;
  function g(v, b) {
    return (
      /*rulerItemProp*/
      v[0].children.length === 0 ? J3 : Z3
    );
  }
  let p = g(n), m = p(n);
  return {
    c() {
      t = W("div"), m.c(), e = oe(), i = W("div"), s = W("div"), o = je(r), y(s, "class", "PanoRulerPlugin-rule-label-name svelte-1h27ktp"), mt(() => (
        /*div0_elementresize_handler*/
        n[4].call(s)
      )), y(i, "class", "PanoRulerPlugin-rule-label svelte-1h27ktp"), Q(i, "left", l), y(t, "class", "PanoRulerPlugin-rule-line svelte-1h27ktp"), Q(t, "width", c), Q(t, "left", h), Q(t, "top", d), Q(t, "transform", f), Q(
        t,
        "display",
        /*rulerItemProp*/
        n[0].visible && /*_visible*/
        n[2] ? "block" : "none"
      );
    },
    m(v, b) {
      X(v, t, b), m.m(t, null), R(t, e), R(t, i), R(i, s), R(s, o), a = Th(
        s,
        /*div0_elementresize_handler*/
        n[4].bind(s)
      );
    },
    p(v, [b]) {
      p === (p = g(v)) && m ? m.p(v, b) : (m.d(1), m = p(v), m && (m.c(), m.m(t, e))), b & /*rulerItemProp*/
      1 && r !== (r = /*rulerItemProp*/
      v[0].labelElement + "") && He(o, r), b & /*rulerItemProp*/
      1 && l !== (l = `${/*rulerItemProp*/
      v[0].labelOffset}%`) && Q(i, "left", l), b & /*rulerItemProp*/
      1 && c !== (c = `${/*rulerItemProp*/
      v[0].width}px`) && Q(t, "width", c), b & /*rulerItemProp*/
      1 && h !== (h = `${/*rulerItemProp*/
      v[0].left}px`) && Q(t, "left", h), b & /*rulerItemProp*/
      1 && d !== (d = `${/*rulerItemProp*/
      v[0].top}px`) && Q(t, "top", d), b & /*rulerItemProp*/
      1 && f !== (f = `rotate(${/*rulerItemProp*/
      v[0].rotateDeg}deg)`) && Q(t, "transform", f), b & /*rulerItemProp, _visible*/
      5 && Q(
        t,
        "display",
        /*rulerItemProp*/
        v[0].visible && /*_visible*/
        v[2] ? "block" : "none"
      );
    },
    i: se,
    o: se,
    d(v) {
      v && U(t), m.d(), a();
    }
  };
}
function K3(n, t, e) {
  let i, { rulerItemProp: s } = t, r = !0, o, a = "data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjQiIHdpZHRoPSIxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PGZpbHRlciBpZD0icHJlZml4X19hIiBoZWlnaHQ9IjQwMCUiIHdpZHRoPSIxMzcuNCUiIHg9Ii0xOC43JSIgeT0iLTE1MCUiPjxmZU1vcnBob2xvZ3kgaW49IlNvdXJjZUFscGhhIiBvcGVyYXRvcj0iZGlsYXRlIiByYWRpdXM9Ii41IiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSIvPjxmZU9mZnNldCBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSIvPjxmZU1vcnBob2xvZ3kgaW49IlNvdXJjZUFscGhhIiByYWRpdXM9IjEiIHJlc3VsdD0ic2hhZG93SW5uZXIiLz48ZmVPZmZzZXQgaW49InNoYWRvd0lubmVyIiByZXN1bHQ9InNoYWRvd0lubmVyIi8+PGZlQ29tcG9zaXRlIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIGluMj0ic2hhZG93SW5uZXIiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIi8+PGZlR2F1c3NpYW5CbHVyIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSIgc3RkRGV2aWF0aW9uPSIuNSIvPjxmZUNvbG9yTWF0cml4IGluPSJzaGFkb3dCbHVyT3V0ZXIxIiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAuMiAwIi8+PC9maWx0ZXI+PHBhdGggaWQ9InByZWZpeF9fYiIgZD0iTS44ODkgMkgxMS41OCIvPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1kYXNoYXJyYXk9IjUgNiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48dXNlIGZpbGw9IiMwMDAiIGZpbHRlcj0idXJsKCNwcmVmaXhfX2EpIiB4bGluazpocmVmPSIjcHJlZml4X19iIi8+PHVzZSBzdHJva2U9IiNmZmYiIHN0cm9rZS1vcGFjaXR5PSIuNCIgeGxpbms6aHJlZj0iI3ByZWZpeF9fYiIvPjwvZz48L3N2Zz4=";
  function l() {
    o = this.offsetWidth, e(1, o);
  }
  return n.$$set = (c) => {
    "rulerItemProp" in c && e(0, s = c.rulerItemProp);
  }, n.$$.update = () => {
    n.$$.dirty & /*labelWidth, rulerItemProp*/
    3 && (o >= s.width || o / 2 >= s.labelOffset / 100 * s.width || o / 2 >= (1 - s.labelOffset / 100) * s.width ? e(2, r = !1) : e(2, r = !0));
  }, e(3, i = `--background-image: url(${a})`), [s, o, r, i, l];
}
class $3 extends Ie {
  constructor(t) {
    super(), Ce(this, t, K3, q3, Pe, { rulerItemProp: 0 }, Y3);
  }
}
function nf(n, t, e) {
  const i = n.slice();
  return i[12] = t[e], i;
}
function sf(n) {
  let t, e;
  return t = new $3({
    props: { rulerItemProp: (
      /*itemData*/
      n[12]
    ) }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*rulerItemProp*/
      1 && (r.rulerItemProp = /*itemData*/
      i[12]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function e5(n) {
  let t, e, i = (
    /*rulerItemProp*/
    n[0]
  ), s = [];
  for (let o = 0; o < i.length; o += 1)
    s[o] = sf(nf(n, i, o));
  const r = (o) => Y(s[o], 1, 1, () => {
    s[o] = null;
  });
  return {
    c() {
      t = W("div");
      for (let o = 0; o < s.length; o += 1)
        s[o].c();
    },
    m(o, a) {
      X(o, t, a);
      for (let l = 0; l < s.length; l += 1)
        s[l] && s[l].m(t, null);
      e = !0;
    },
    p(o, [a]) {
      if (a & /*rulerItemProp*/
      1) {
        i = /*rulerItemProp*/
        o[0];
        let l;
        for (l = 0; l < i.length; l += 1) {
          const c = nf(o, i, l);
          s[l] ? (s[l].p(c, a), F(s[l], 1)) : (s[l] = sf(c), s[l].c(), F(s[l], 1), s[l].m(t, null));
        }
        for (Me(), l = i.length; l < s.length; l += 1)
          r(l);
        ke();
      }
    },
    i(o) {
      if (!e) {
        for (let a = 0; a < i.length; a += 1)
          F(s[a]);
        e = !0;
      }
    },
    o(o) {
      s = s.filter(Boolean);
      for (let a = 0; a < s.length; a += 1)
        Y(s[a]);
      e = !1;
    },
    d(o) {
      o && U(t), pi(s, o);
    }
  };
}
function t5(n, t, e) {
  var m, v, b, w;
  let { five: i } = t, { rulerDatas: s } = t, { options: r } = t, o = [];
  const a = ((v = (m = i.getElement()) == null ? void 0 : m.parentElement) == null ? void 0 : v.clientWidth) || 0, l = ((w = (b = i.getElement()) == null ? void 0 : b.parentElement) == null ? void 0 : w.clientHeight) || 0, c = (x, k) => {
    const T = [
      [{ x: 0, y: 0 }, { x: a, y: 0 }],
      [{ x: 0, y: 0 }, { x: 0, y: l }],
      [{ x: a, y: 0 }, { x: a, y: l }],
      [{ x: 0, y: l }, { x: a, y: l }]
    ], S = [];
    for (let V = 0; V < T.length; V++) {
      const z = T0([x, k], [T[V][0], T[V][1]], !0);
      z && S.push(z);
    }
    return S.length === 0 ? !1 : S;
  }, h = (x, k) => {
    const T = x.clone().project(i.camera), S = (T.x + 1) / 2 * a, V = (-T.y + 1) / 2 * l, z = k.clone().project(i.camera), O = (z.x + 1) / 2 * a, A = (-z.y + 1) / 2 * l, C = Math.sqrt(Math.pow(O - S, 2) + Math.pow(A - V, 2));
    return {
      startLeft: S,
      startTop: V,
      endLeft: O,
      endTop: A,
      distance: C
    };
  }, d = (x, k, T) => {
    const S = i.camera.position, V = i.camera.getWorldDirection(new fe()), z = x.clone().sub(S).normalize().angleTo(V), O = k.clone().sub(S).normalize().angleTo(V), A = x.distanceTo(k), I = k.clone().sub(k.clone().sub(x).divide(new fe(2, 2, 2))).distanceTo(S), { startLeft: E, startTop: D, endLeft: L, endTop: N, distance: G } = h(x, k), ee = -((Math.PI / 2 - Math.atan2(L - E, D - N)) / Math.PI) * 180;
    let J = !0;
    T || (J = !1), !Qt(x, T) && !Qt(k, T) && (J = !1), A < 0.3 && (J = !1), z > Math.PI / 2 && (J = !1), O > Math.PI / 2 && (J = !1), I / A > 8 && (J = !1);
    let ie = 50, ne = G;
    const he = c({ x: ~~E, y: ~~D }, { x: ~~L, y: ~~N });
    if (he && he.length === 1 && (Qt(x, T) ? (ne = Math.sqrt(Math.pow(he[0].x - E, 2) + Math.pow(he[0].y - D, 2)), ie = ne / G * 50) : Qt(k, T) && (ne = Math.sqrt(Math.pow(he[0].x - L, 2) + Math.pow(he[0].y - N, 2)), ie = 100 - ne / G * 50)), he && he.length === 2) {
      const Le = {
        x: (he[0].x + he[1].x) / 2,
        y: (he[0].y + he[1].y) / 2
      };
      ie = Math.sqrt(Math.pow(Le.x - E, 2) + Math.pow(Le.y - D, 2)) / G * 100;
    }
    return {
      startLeft: E,
      startTop: D,
      distance: G,
      deg: ee,
      visible: J,
      labelOffset: ie,
      ruleLength: A
    };
  }, f = () => {
    const x = i.panoIndex, k = s.find((C) => C.panoIndex === x);
    if (!k)
      return e(0, o = []);
    if (i.currentMode !== Vt.Mode.Panorama)
      return e(0, o = []);
    const T = i.camera.position, S = i.camera.getWorldDirection(new fe()), V = k.lines.map((C) => new fe(C.start[0], -C.start[1], -C.start[2])), z = k.lines.map((C) => new fe(C.end[0], -C.end[1], -C.end[2])), [O] = V.concat(z).sort((C, I) => {
      const E = C.clone().setY(0).sub(T).normalize().angleTo(S.clone().setY(0)), D = I.clone().setY(0).sub(T).normalize().angleTo(S.clone().setY(0));
      return E - D;
    }), A = k.lines.map((C) => {
      var ne, he;
      const I = C.start, E = C.end, { startLeft: D, startTop: L, distance: N, deg: G, visible: Z, labelOffset: ee, ruleLength: J } = d(new fe(I[0], -I[1], -I[2]), new fe(E[0], -E[1], -E[2]), O), ie = [];
      return C.children && ((ne = C.children) == null ? void 0 : ne.length) > 0 && ((he = C.children) == null || he.forEach((Le) => {
        const we = Le.start, le = Le.end, { distance: ae } = h(new fe(we[0], -we[1], -we[2]), new fe(le[0], -le[1], -le[2]));
        ie.push({ width: ae, state: Le.state });
      })), {
        width: N,
        left: D,
        top: L,
        rotateDeg: G,
        state: C.state,
        children: ie,
        labelOffset: ee,
        visible: Z,
        labelElement: r.distanceText(J)
      };
    });
    e(0, o = A);
  }, g = () => Fo(f), p = ol(f, 80);
  return Ot(() => {
    f(), i.on("panoArrived", f), i.on("modeChange", f), i.on("cameraDirectionUpdate", g), i.on("movingToPano", g), i.on("mouseWheel", () => p()), i.on("pinchGesture", () => p());
  }), oi(() => {
    i.off("panoArrived", f), i.off("modeChange", f), i.off("cameraDirectionUpdate", g), i.off("movingToPano", g), i.off("mouseWheel", () => p()), i.off("pinchGesture", () => p());
  }), n.$$set = (x) => {
    "five" in x && e(1, i = x.five), "rulerDatas" in x && e(2, s = x.rulerDatas), "options" in x && e(3, r = x.options);
  }, [o, i, s, r];
}
class i5 extends Ie {
  constructor(t) {
    super(), Ce(this, t, t5, e5, Pe, { five: 1, rulerDatas: 2, options: 3 });
  }
}
let n5 = class {
  constructor(t, e) {
    u(this, "five");
    u(this, "container", document.createElement("div"));
    u(this, "panoRulerProData");
    u(this, "rulerItems");
    u(this, "state", {
      enabled: !1,
      loaded: !1,
      options: {
        className: "",
        distanceText: (t) => `${t.toFixed(1)}m`
      }
    });
    var i, s;
    this.five = t, this.container.classList.add("panoRulerProPlugin-container"), this.container.setAttribute(
      "style",
      "position: absolute;pointer-events: none;width: 100%;height: 100%;left: 0;top: 0;overflow: hidden;"
    ), e && (e.data && this.load(e.data), this.state.options = _(_({}, this.state.options), e.options || {}), (i = e.options) != null && i.className && this.container.classList.add((s = e.options) == null ? void 0 : s.className)), this.five.once("modelLoaded", () => $(this, null, function* () {
      var r, o;
      (o = (r = this.five.getElement()) == null ? void 0 : r.parentNode) == null || o.append(this.container);
    })), this.five.once("dispose", () => this.dispose());
  }
  load(t) {
    return $(this, null, function* () {
      if (!this.five.work)
        return;
      const e = t.data;
      if (!e)
        throw new Error("标尺数据依赖不齐全！");
      this.panoRulerProData = e, this.state.loaded = !0;
    });
  }
  enable() {
    return this.state.loaded ? (this.state.enabled || (this.state.enabled = !0, this.render()), !0) : !1;
  }
  disable() {
    return this.state.enabled && (this.state.enabled = !1, this.render()), !0;
  }
  render() {
    return $(this, null, function* () {
      var t;
      if (this.state.enabled) {
        if (!this.panoRulerProData || !this.container)
          return;
        this.rulerItems = new i5({
          target: this.container,
          props: {
            five: this.five,
            rulerDatas: this.panoRulerProData,
            options: this.state.options
          }
        });
      } else
        (t = this.rulerItems) == null || t.$destroy(), this.rulerItems = void 0;
    });
  }
  dispose() {
    var t;
    this.container && ((t = this.rulerItems) == null || t.$destroy(), this.rulerItems = void 0), this.container.remove();
  }
};
const eD = (n, t) => new n5(n, t), s5 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZIAAABCCAYAAAB9y1BhAAAAAXNSR0IArs4c6QAADh5JREFUeAHtnVuPLDcVhedwC/dACKAICDxEIBQpygNI/Ab+MX8B8YCQEAjxgBAQLsm5Jjkn58r6Sl4jT52qnu4zXd121dqSx67q7ip7eXsv721XzcVFJAgEgSAQBIJAEAgCQeC4CLx48eKbSu+RH/fKuVoQWB8Cn1tfk9KiIHAUBH6tq/xKiTwSBILADgRCJDvAyUebRuAbpfXxSDatBmn8Pgh8YZ8v5TtBYIMIvFCbSZEgEASuQSBEcg1A+XizCDzfbMvT8CBwIAIhkgMBy9c3g0CIZDNdnYbeFIEQyU0RzO/XikCIZK09m3YdHYEQydEhzQVXgkCIZCUdmWYsj0CIZHmMc4c+EchCe5/9llqfAYEQyRlAzy27QCAeSRfdlEq2gECIpIVeSB1aRAAiudVixVKnINAaAiGS1nok9WkFAUJb8Upa6Y3Uo2kEQiRNd08qd0YEQiJnBD+37guBEElf/ZXang6BEMnpsM6dOkcgRNJ5B66x+nrjLmsTX1J6bSJHZ7+o9HklynWaOse1eKcc+XVlvxYFEnlfaThWfb7mcsn5nPRM6WmVU55KfO+J0mdKj8f5rVu3skNMoET6RSBE0m/fdVNzGWII4StKXy65y18t58aEAVGcUjDkGHsLhIOYfCC1xUT4QDJjgnmkc58qkT8saSiLeCCkSBBoBoEQSTNd0V9FZADRH8iAGfvXS06Zc5CFCePQt0y3EFaq61CX1ayjC56U8br24sKd+kAuJhkI55OSPi75pyIcvKNIEFgcgRDJ4hD3ewMZLDwDXqfOq9RNFCYOCAMPYx851BDjIXiWzky9Tpyvw0kOL/nc+Jh7DyGqko+P+cznVLwMf31Uypz7jZLJ0GEy8jqURnl8zPjyObDEsxknztsDUnFvMfF8e+4X6j88F4hlTDT3de6BiAYsI0HgxgiESG4MYd8XkLEhrARZTKUxUWB0MXrkiA3wdYYQg8Xs2cmzaR977cCE8eSM6wYDsQiXSyOrulDPRUT3AbsxydAnYO9kz87HfH9Kxv3D976lNEk2ujf9ANE8GCe1OeEzgRLZD4EQyX44df8tGQ08iNdHCU+jnhGPDVG9bgAGGD3Iw8TB5xgjz3jr3CTxSEapxxAL7VxcCmGaQPe6n/qScWtSIcdLrD1FhxbtRZn4x/3rtanvlBtffq57UCcI5l6dVF9CaJEgcAWBEMkVOPo+0ODHwGNEIAxIwsRBea6vdxlMPsNwYFAcIoEsnB4WQ6hTqxOMqg1wU40rxEx/kCal6AKejEnGOSFKvE8mFiYaFV8S9AVP5oo3o+syKSA0ZoJxmTWZJvFSXSMLIzBnXBa+bS5/UwQ0oDECEIRDF87n+nSOMDAMkIUNU51v2TjM4SWo2pdi1E34L1W4mnRALFOJtZ0pQe/QNVItT3XNOzpxV8n5fdWjaxzrBqY8j8Cc0Zn/RT45OQIaoPQT3oUHMDnHUzPKuYFLqGJYZFXObNILroSmIi8jMIfjy9/s8EwhGu/0+s+4CdI5vBkmKngv6Bo5x3NbodFFQmQOk6l48VzXQdcgF6d7unePoU7aE5lBIEQyA8y5TmvgEZ5iwBJSeKMkBrHXJVS8lCljZ8IwaZgwFlswvqzNugpT2K6rhTtaI2PPBIN0hWSkn6zJmFSc7yIYSIj0Y6VBdA108nZJd5TjuSQsNqDT558QyZn7rQxMSKNO435hkE0NNEIXzPhIzPiY7cXDEBBHkE0TyRx+0i9vovhf/R3pMR6MPWWTB+syU+JQ2tvlQ8Ji6C/kArHcKfcpHydrHYGxwWq9vl3XT4MFr4JZHO4/3gbkMTXYxkYMEmHtAsJgNsegYxaH9xFZBgH6YMoLXOZunV+1TGCYxHzgpkjfCYPhrUAw5BAMJDLGlbAY44E0iH7LJAlSgVw+UuK5l6nJlD6KnBuBEMmCPaDBwACpiYOBwuCqB0S9xZYBxmfs4YcsGEjkiSsLhBML/VD304lv3//tykTnQ7WENIjGBDYHQoFcSEym2IaMWP/JCaG9VZKyi8f6LaRSE8t4wsX3ImdAIERyRNALcTBIGByeYY13v4yJg+P7SiaOhKcERgMSI7VAJ4hcWGjHwyANonFTh8UYO3gv440kjKPvlqTs4llFLEy4GDfpM5A5g4RIbgi6lNkeh8NV4wEwVm7CUSg+CfLAZR9/R6cjZ0YgfXKiDpD+e2F/CIuVCRnjyh4L5DLeLYbXUu8Sg1gYUwNJ6ZoPVI6cCAE6I3IAAlJW3HCTBl6H3fK5qxCmMnGwiMiWy0jjCKiff6kqDuNDffbbxqu7+uqpP3iAEkJx2mfcOQx2W32YV74sqCUhkmvAlQLjUjMzcqiKxcJdwuwKT2NIUmAWDSOdIaB+/4WrrD78ncvJ20BA/cMmFcalE+GxXcJmFa+x3FWf1iHmXb/LZ3sgkNDWBEhSUhb67DYzA6rDVeOQBy/3gzQGJZWC5nkNgbECGffzCpq0niaUCRqTtH/RqjJmPdmDXMYvtoR4SD9U4kHJOgyWMStQbiLxSISelAoc6rUOFG5O2MnD4ni9xpHdPXNodXpeOvG+qy6j9XuXk7ePQDWeIRQmgizeT9k6zjF2IaRhbUV5thkLhENlCtxDr9Hl96VseGMommcxu7wzwlUmDnaHxC3ustf3r7T04z1/W/39B5eT94eA+pLw9OtKJpZdYTB2ldUhsLzOZY8u32U89/h5X1+RQuHuQhyErVCsmkjrUAazlHtKkEeeshUIGxT0odaPDUKwjiaXiZ/JwWEwL9qP7QBh7DdLkskY3hWGt8KC/eX/qFkHMsdrxeoHihSBbYP2OnBx58RrHZBHvI45lDZyXnrzrpsqA/JHl5OvCwH1s70ViAWPZby2Ujf4vg4GQpJO5K0SFTKrJBIpB1sDUQwIZNcuK2Kjd0v6RMqRtQ6BERnWzX5uHKQXf3I5+XoRkN3AHrLNGEIh7Vor9S4wIhab31q8GiKpyAMCQRmmBKLgOQ68DrYAbl4BpkDKuYFIfiYchvEhPflzMNkeAsWmQCi2KXP2kgkpnspmSWUOmC60Rh3NGg+dTJrzPCAPZg+D5yGjkDinwIjsRkC69VN/QzrzF5eTbxMB6QMhL3sq2Jo524mt8drqZhbq58BoVlvUocQ0WeswebA45pAU7XGZVyTcI8kQbKZD1d7IERCQnr3jy0h//upy8iAg3WACyyI9iccGbEexPbZBnsBCKrype9U7PbvYtaWOgyyYBTAjgET8gCCdxe4ak4c9j9V3nNocWRaBehffsnfK1btCoExMh+dOqokttslRERMLIXbO8QAkC/VERT7W71enW26w2teeCPz6raB4IlPiV5JAHvE8phDKuYMRkO79xD+SXv3N5eRBYA4B6QwTcya6kMrcsyp4JkRKWKPFdq1CmiOSUWfMvZiNRXIYPv/caRVq2F4jpIdvu1Ya8H93OXkQ2AcB6Q+PHUAqpDk7xqtZIJXuJ8FNEIlApx64gYA+t5DFIjnrHrzCIO/GERCR5RCQTv5IVx9CptK3fyx3p1x57QhIl/x/7llPmXpOBT1jNymk0uVjCGclkoq1AXhqvQaAWffA+3ioAe21EB1GgsByCEg3f+CrS+/+6XLyIPCqCEinsLeEvHZNmAnPM2HuKtpyciIpYNr7AFTIwfVwGY8DMFe5MKV2RRpHQHr6lqsoIvnA5eRB4BgISL+8gYhJNB4LYvvnCTN2kEl0816KDTiNWFQEHC4doBG68q6r+p7sZMD7gDzy+oEamZRPjoD09fu66TA+pI//PnkFcsPNICBdYz0Fu3idbSSs3+RzcIsSiQDi+ngdAGTWVfGKsHOB+GBCV1dgycE5EZDufs/31+D9r8vJg8BSCFT2kojN3K4vvBQm3E3Zy0WIRICwVRcwSFPbdu194LKt+kEdtT/SIQLS4Tddbenohy4nDwKnQGAPG4rdZALehA09KpGo8bhou9iUbbs0/jMNTscBdRgJAm0hIF1+wzWSrt52OXkQOCUC0kNsNNuHsatz24iHqI709GxLAjcmktJQEwj5WPA+aCiuWB4YHKOT4yYRkF7zUNkg0lueSI4EgbMiIJ1kZyshL9LUOjNEwkT9sXT2pBP1VyaSQiCse9Coqa27LApBIPE+BEKkLwSk32zRHESDkp0zkSDQBALF9uKdYHunnkthwo7tfXQqQjmYSNQImBACIU2xIuGreB8CIdIvAtJzNogMosHI4mYkCDSHgPTUXspU2ItoEIvzEArlxWRvIlGFWTSnsnWF+b1dKAhk8QrrHpEgsDgC0ndi0oNoEBIuiASBZhGQvnqCz/KCJ/jYZtto7DPRoUU2N11LJIXxqNyUC0VFqeCTpRlP94gEgZMhIL0nbDCIdJswQSQINI9AIRRsNRP+KfvOkgNrKEddr5660YUqw3k8EAhkbvsuCztPVSF7JDqMBIF1IKAxcOl5S8eZLEWCQDcIFBtO2Kv2UOr645lAKkex4VeIpLo5jHbls1KD4eYaWIu4R+UeyYLA2RHQWGAADiJ9P9u2StcheRB4VQSkyzgD2PQppwBH4MaEMpBFRSDcqCYQx9ggDphr0QUb3SMSBJpAQGPiciei9P6oYYAmGphKbA4B6TRrJ+j1HKHYzh8cZbpVBowXZ8bgQhzPNJAOvvD4QjkOAj0hUAbdUOVMoHrqudT1OgSk2zgLkAl2n/LYvh9s900kutYV4UIvQiBXMMlBEAgCQWA1CBRCgUjmHAkI5vk+PACR1BcZmGmfH64GzTQkCASBILBhBAqhgEC9rDFGJI7FGJEcB4EgEASCQBAIAkEgCASBIBAEgkAQCAJBIAgEgSAQBIJAEAgCm0fg/x4jQQWGalpFAAAAAElFTkSuQmCC";
function r5() {
  const n = document.createElement("div"), t = document.createElement("i"), e = document.createElement("span");
  return n.appendChild(t), n.appendChild(e), n.style.position = "relative", n.style.width = "100%", n.style.display = "flex", n.style.flexDirection = "column", n.style.alignItems = "center", n.style.marginTop = `${150 / 16}rem`, n.style.opacity = "0", n.style.transition = "opacity 1000ms linear", t.style.display = "block", t.style.width = `${134 / 16}rem`, t.style.height = `${22 / 16}rem`, t.style.backgroundSize = "100%", t.style.backgroundRepeat = "no-repeat", t.style.backgroundImage = `url(${s5})`, e.style.marginTop = `${10 / 16}rem`, e.style.fontSize = `${16 / 16}rem`, e.style.color = "#fff", e.style.opacity = "0.7", e.style.textShadow = "0 2px 16px rgb(22 34 83 / 24%)", e.style.fontWeight = "bold", {
    appendTo(i) {
      i.appendChild(n);
    },
    dispose() {
      n.remove();
    },
    setRoom(i) {
      e.innerHTML = i.name + " " + Math.floor(i.size / 1e6) + "㎡";
    },
    show() {
      n.style.opacity = "1";
    },
    hide() {
      n.style.opacity = "0";
    }
  };
}
const o5 = new P.TextureLoader();
function Es(n) {
  return $(this, null, function* () {
    return new Promise((t, e) => {
      o5.load(n, t, void 0, e);
    }).then((t) => (t.encoding = P.sRGBEncoding, t.minFilter = P.NearestFilter, t.magFilter = P.NearestFilter, t));
  });
}
function z0(n) {
  return $(this, null, function* () {
    return Es(n).then((t) => {
      const e = n.startsWith("data:") ? n.includes("png") : new URL(n, location.href).pathname.toLowerCase().endsWith(".png");
      return { texture: t, transparent: e };
    });
  });
}
const fa = { userAction: !0 };
class a5 extends Pn {
  constructor(e, i) {
    super(e, i);
    /**
     * 默认状态
     */
    u(this, "state", {
      visible: !0,
      enabled: !0,
      config: {
        /**
         * @todo 图片转base64
         */
        compassImageUrl: this.absoluteUrl("/release/web/v3/north-point-circle.96498e69.png"),
        entryDoorImageUrl: this.absoluteUrl("/release/web/enterDoor.831b8208.png")
      }
    });
    u(this, "data");
    u(this, "group", new P.Group());
    u(this, "roomInfoInstance");
    u(this, "roomInfoWrapperInstance");
    u(this, "compassMeshTween");
    u(this, "compassMesh");
    u(this, "logoMesh");
    u(this, "logoMeshTween");
    u(this, "entryDoorMesh");
    /**
     * 销毁插件
     * @todo 销毁贴图时，最好还是直接销毁贴图吧，this.compassMesh?.material.map 这种都是很深层的引用了。THREE 的建议我看也是自己去管理和销毁公共贴图。
     */
    u(this, "dispose", () => {
      var e, i, s, r;
      this.five.scene.remove(this.group), this.group.remove(...this.group.children), (i = (e = this.compassMesh) == null ? void 0 : e.material.map) == null || i.dispose(), (r = (s = this.entryDoorMesh) == null ? void 0 : s.material.map) == null || r.dispose(), this.five.off("dispose", this.dispose), this.five.off("panoArrived", this.onFivePanoArrived), this.five.off("panoWillArrive", this.onFivePanoWillArrive), this.five.off("cameraDirectionUpdate", this.onFiveCameraDirectionUpdate);
    });
    /**
     * 添加事件监听
     */
    u(this, "_addEventListener", () => {
      this.five.on("panoArrived", this.onFivePanoArrived), this.five.on("panoWillArrive", this.onFivePanoWillArrive), this.five.on("modeChange", this.onFiveModeChange), this.five.on("cameraDirectionUpdate", this.onFiveCameraDirectionUpdate);
    });
    /**
     * 移除事件监听
     */
    u(this, "_removeEventListener", () => {
      this.five.off("panoArrived", this.onFivePanoArrived), this.five.off("panoWillArrive", this.onFivePanoWillArrive), this.five.off("modeChange", this.onFiveModeChange), this.five.off("cameraDirectionUpdate", this.onFiveCameraDirectionUpdate);
    });
    /**
     * 启用，响应事件，展示UI
     */
    u(this, "_enable", () => {
      this.five.scene.add(this.group), this.init(), this.onFivePanoArrived(this.five.panoIndex || 0), this._addEventListener();
    });
    /**
     * 禁用，不响应事件，不展示UI
     */
    u(this, "_disable", () => {
      this._clearCompassIfNeed(), this._clearEntryDoorIfNeed(), this.five.scene.remove(this.group), this._removeEventListener();
    });
    /**
     * 展示UI
     */
    u(this, "_toggleVisible", () => {
      this.group.visible = this.state.visible, this.five.needsRender = !0;
    });
    u(this, "_clearCompassIfNeed", () => {
      var e;
      this.compassMesh && (this.group.remove(this.compassMesh), (e = this.compassMesh.material.map) == null || e.dispose(), this.compassMesh = null);
    });
    u(this, "_clearLogoIfNeed", () => {
      var e;
      this.logoMesh && (this.group.remove(this.logoMesh), (e = this.logoMesh.material.map) == null || e.dispose(), this.logoMesh = null);
    });
    u(this, "_clearEntryDoorIfNeed", () => {
      var e;
      this.entryDoorMesh && (this.group.remove(this.entryDoorMesh), (e = this.entryDoorMesh.material.map) == null || e.dispose(), this.entryDoorMesh = null), this.roomInfoInstance && (this.roomInfoInstance.dispose(), this.roomInfoInstance = null), this.roomInfoWrapperInstance && (this.roomInfoWrapperInstance.dispose(), this.roomInfoWrapperInstance = null);
    });
    u(this, "onFivePanoWillArrive", (e) => {
      var i, s, r, o;
      e !== this.five.panoIndex && ((i = this.compassMeshTween) == null || i.dispose(), (s = this.compassMesh) == null || s.material.setValues({ opacity: 0 }), (r = this.logoMeshTween) == null || r.dispose(), (o = this.logoMesh) == null || o.material.setValues({ opacity: 0 }));
    });
    u(this, "onFivePanoArrived", (e) => {
      var s, r, o, a, l, c, h, d;
      const i = (o = (r = (s = this.five.work) == null ? void 0 : s.observers) == null ? void 0 : r[e]) == null ? void 0 : o.standingPosition;
      if (this.compassMesh && i && (this.compassMesh.position.copy(i.clone().setY(i.y + 0.01)), this.compassMesh.material.opacity === 0 && ((a = this.compassMeshTween) == null || a.dispose(), this.compassMeshTween = Io(1e3).onUpdate(({ progress: f }) => {
        var g;
        (g = this.compassMesh) == null || g.material.setValues({ opacity: f }), this.five.needsRender = !0;
      }).play())), this.logoMesh && i && (this.logoMesh.position.copy(i.clone().setY(i.y + 0.011)), this.logoMesh.material.opacity === 0 && ((l = this.logoMeshTween) == null || l.dispose(), this.logoMeshTween = Io(1e3).onUpdate(({ progress: f }) => {
        var g;
        (g = this.logoMesh) == null || g.material.setValues({ opacity: f }), this.five.needsRender = !0;
      }).play())), this.entryDoorMesh) {
        const g = new P.Vector3(
          this.data.entrance.position.x,
          this.data.entrance.position.y,
          this.data.entrance.position.z
        ).clone().setY(i.y).sub(i).normalize(), p = i.clone().add(g.clone().multiplyScalar(0.7)).setY(i.y + 0.01);
        this.entryDoorMesh.rotation.z = new P.Vector3(0, 0, -1).angleTo(g), this.entryDoorMesh.position.copy(p), ((c = this.data) == null ? void 0 : c.room_observers[e].room.type) === 1 ? (h = this.entryDoorMesh) == null || h.material.setValues({ opacity: 1 }) : (d = this.entryDoorMesh) == null || d.material.setValues({ opacity: 0 });
      }
      this.roomInfoInstance && this.roomInfoWrapperInstance && i && (this.roomInfoWrapperInstance.css3DObject.position.copy(i.clone().setY(i.y + 0.01)), this.roomInfoInstance.setRoom(this.data.room_observers[e].room)), this.five.needsRender = !0;
    });
    u(this, "onFiveCameraDirectionUpdate", ({ longitude: e, latitude: i }) => {
      var s, r;
      this.roomInfoWrapperInstance && (this.roomInfoWrapperInstance.css3DObject.rotation.z = e, i > 0.66 && this.five.getCurrentState().mode === "Panorama" ? (s = this.roomInfoInstance) == null || s.show() : (r = this.roomInfoInstance) == null || r.hide());
    });
    // eslint-disable-next-line max-params
    u(this, "onFiveModeChange", (e, i, s, r, o) => {
      e !== i && this.setState(
        {
          visible: e === Vt.Mode.Panorama
        },
        { userAction: o }
      );
    });
    this.five.scene.add(this.group), this.five.once("dispose", this.dispose), this.setState({
      visible: !0,
      enabled: !0,
      config: _(_({}, this.state.config), i || {})
    });
  }
  /**
   * 启用插件，响应用户操作并展示UI
   * @param options
   */
  enable(e = fa) {
    this.setState(
      {
        enabled: !0
      },
      e
    );
  }
  /**
   * 禁用插件，禁止响应用户操作并隐藏UI
   * @param options
   */
  disable(e = fa) {
    this.setState(
      {
        enabled: !1
      },
      e
    );
  }
  /**
   * 展示UI
   * @param options
   * @returns
   * @todo 需要考虑动画
   */
  show(e = fa) {
    if (this.state.enabled)
      return this.setState(
        {
          visible: !0
        },
        e
      ), Promise.resolve();
  }
  /**
   * 隐藏UI
   * @param options
   * @returns
   * @todo 需要考虑动画
   */
  hide(e = fa) {
    if (this.state.enabled)
      return this.setState(
        {
          visible: !1
        },
        e
      ), Promise.resolve();
  }
  setState(e, i = { userAction: !0 }) {
    var r, o;
    const s = JSON.parse(JSON.stringify(this.state));
    this.state = {
      visible: (r = e.visible) != null ? r : s.visible,
      enabled: (o = e.enabled) != null ? o : s.enabled,
      config: _(_({}, s.config), e.config || {})
    }, this.hooks.emit("stateChange", {
      state: this.state,
      prevState: s,
      userAction: i.userAction
    }), e.enabled === !0 && (this._enable(), this.hooks.emit("enable", i)), e.enabled === !1 && (this._disable(), this.hooks.emit("disable", i)), e.visible === !1 && (this._toggleVisible(), this.hooks.emit("hide", i)), e.visible === !0 && (this._toggleVisible(), this.hooks.emit("show", i)), e.config && this.init();
  }
  load(e, i, s = !0) {
    return $(this, null, function* () {
      const r = yield this.formatData(e);
      JSON.stringify(this.data) !== JSON.stringify(r) && (this.hooks.emit("dataChange", r, this.data), this.data = _({}, r), this.init(), i && this.setState(i, { userAction: s }), this.hooks.emit("dataLoaded", this.data));
    });
  }
  formatData(e) {
    return e.version && e.data ? Promise.resolve(e.data) : Promise.resolve(e);
  }
  /**
   * 初始化
   * @todo 逻辑需要细分
   */
  init() {
    return $(this, null, function* () {
      var s, r, o, a;
      const e = (r = (s = this.data) == null ? void 0 : s.north_rad) != null ? r : null;
      this._clearCompassIfNeed(), e !== null && (this.compassMesh = yield this.loadCompassMesh(), this.compassMesh && (this.compassMesh.rotateX(-Math.PI / 2), this.compassMesh.rotateZ(e - Math.PI / 2), this.group.add(this.compassMesh))), this._clearLogoIfNeed(), this.logoMesh = yield this.loadLogoMesh(), this.logoMesh && (this.logoMesh.rotateX(-Math.PI / 2), this.group.add(this.logoMesh));
      const i = (a = (o = this.data) == null ? void 0 : o.entrance) != null ? a : null;
      this._clearEntryDoorIfNeed(), i !== null && (this.entryDoorMesh = yield this.loadEntryDoorMesh(), this.roomInfoWrapperInstance = this.loadRoomInfo(), this.roomInfoInstance = r5(), this.entryDoorMesh.rotateX(-Math.PI / 2), this.roomInfoWrapperInstance && this.roomInfoInstance.appendTo(this.roomInfoWrapperInstance.container), this.group.add(this.entryDoorMesh)), this.onFivePanoArrived(this.five.panoIndex || 0), this.five.needsRender = !0;
    });
  }
  loadCompassMesh() {
    return $(this, null, function* () {
      const e = this.state.config.compassImageUrl, i = yield Es(e), s = new P.CircleGeometry(0.7, 32), r = new P.MeshBasicMaterial({
        map: i,
        transparent: !0,
        opacity: 0,
        depthTest: !1
      }), o = new P.Mesh(s, r);
      return o.name = "pano-compass-mesh", o;
    });
  }
  loadLogoMesh() {
    return $(this, null, function* () {
      if (!this.state.config.logoURL)
        return;
      const e = this.state.config.logoURL, i = yield Es(e);
      i.minFilter = P.NearestFilter, i.magFilter = P.NearestFilter;
      const s = new P.PlaneBufferGeometry(0.4, 0.4), r = new P.MeshBasicMaterial({
        map: i,
        opacity: 0,
        transparent: !0,
        depthTest: !1
      }), o = new P.Mesh(s, r);
      return o.name = "pano-compass-logo-mesh", o;
    });
  }
  loadEntryDoorMesh() {
    return $(this, null, function* () {
      const e = this.state.config.entryDoorImageUrl, i = yield Es(e), s = new P.PlaneGeometry(0.2, 0.16), r = new P.MeshBasicMaterial({
        map: i,
        transparent: !0,
        opacity: 0.8,
        depthTest: !1
      }), o = new P.Mesh(s, r);
      return o.name = "pano-compass-entry-door", o;
    });
  }
  loadRoomInfo() {
    const e = [
      new P.Vector3(-0.7, 0, -0.7),
      new P.Vector3(0.7, 0, -0.7),
      new P.Vector3(0.7, 0, 0.7),
      new P.Vector3(-0.7, 0, 0.7)
    ];
    return fl(this.five).create3DDomContainer(e);
  }
}
const tD = (n, t) => new a5(n, t), l5 = 1, c5 = 3, h5 = new Gt(16777215), d5 = new Gt(6522623), u5 = new Gt(16777215), f5 = new Gt(6522623), p5 = 6, m5 = 8, g5 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==", O0 = new rh().load(g5), v5 = {
  pointTexture: O0,
  pointSize: p5,
  lineWidth: l5,
  lineColor: h5,
  pointColor: u5,
  lineRenderOrder: 20,
  pointsRenderOrder: 20
}, A5 = {
  pointTexture: O0,
  pointSize: m5,
  lineWidth: c5,
  lineColor: d5,
  pointColor: f5,
  lineRenderOrder: 10,
  pointsRenderOrder: 10
};
function b5(n, t, e) {
  var h, d, f, g, p;
  const i = (h = e == null ? void 0 : e.lineWidth) != null ? h : 2, s = (d = e == null ? void 0 : e.lineColor) != null ? d : new Gt(16777215), r = (f = e == null ? void 0 : e.pointSize) != null ? f : 5, o = (g = e == null ? void 0 : e.lineRenderOrder) != null ? g : 10, a = (p = e == null ? void 0 : e.lineRenderOrder) != null ? p : 20, l = new t0(n, t);
  l.setMaterial({ linewidth: i, color: s }), l.line.material.depthTest = !1, l.line.material.transparent = !0, l.line.renderOrder = o, l.points.renderOrder = a;
  const c = l.points.material;
  return c.depthTest = !1, c.size = r, e != null && e.pointColor && c.color.set(e.pointColor).convertSRGBToLinear(), e != null && e.pointTexture && (c.map = e.pointTexture), l;
}
function rf(n, t) {
  const [e, i] = n.points, s = t === "light" ? A5 : v5, r = b5(e.position, i.position, s);
  return r.name = "normalLine_" + n.id, r;
}
function Ls(n) {
  const { x: t, y: e, z: i } = n;
  return !(Math.abs(t) > 1 || Math.abs(e) > 1 || Math.abs(i) > 1);
}
function xa(n) {
  const { z: t } = n;
  return !(Math.abs(t) > 1);
}
function y5(n) {
  const t = document.createElement("div");
  return t.setAttribute(
    "style",
    "backdrop-filter: blur(4px);-webkit-backdrop-filter: blur(4px);-webkit-tap-highlight-color: rgba(0,0,0,0);"
  ), t.style.width = "max-content", t.style.padding = "3px 6px", t.style.lineHeight = "1", t.style.textAlign = "center", t.style.transform = "translate(-50%, -50%)", t.style.fontSize = "14px", t.style.color = "#fff", t.style.cursor = "pointer", t.style.userSelect = "none", n != null && n.style && Object.assign(t.style, n == null ? void 0 : n.style), t;
}
function w5(n) {
  const t = document.createElement("div");
  return n != null && n.id && (t.id = n == null ? void 0 : n.id), t.classList.add("five-plugin-measure__distance"), t.style.position = "absolute", t.style.left = "0", t.style.top = "0", t.style.width = "0", t.style.height = "0", t.style.transform = "translate(-10px, -10px)", t.style.transformOrigin = "left top", n != null && n.style && Object.assign(t.style, n.style), t;
}
class j0 {
  constructor(t) {
    u(this, "ndcPosition");
    u(this, "contentDom");
    u(this, "containerDom");
    u(this, "params");
    u(this, "canSelected");
    u(this, "handleClick", (t) => {
      var e, i;
      (i = (e = this.params).clickCallback) == null || i.call(e, t, this);
    });
    this.params = t, this.contentDom = y5({ style: t.contentStyle }), this.containerDom = w5({ style: t.containerStyle }), this.setCanSelect(!0);
  }
  setCanSelect(t) {
    this.canSelected = t, this.containerDom.style.pointerEvents = t ? "all" : "none";
  }
  highlight() {
    this.contentDom.style.border = "0.5px solid #95AEFF", this.contentDom.style.background = "linear-gradient(90deg, #95AEFF 0%, #6386FF 100%)";
  }
  unHighlight() {
    this.contentDom.style.border = "0.5px solid rgba(255,255,255,0.6)", this.contentDom.style.background = "rgba(195,195,195,0.70)";
  }
  appendTo(t) {
    return t.appendChild(this.containerDom), this.containerDom.addEventListener("click", this.handleClick), this;
  }
  remove() {
    this.contentDom.removeEventListener("click", this.handleClick), this.containerDom.remove();
  }
  show() {
    this.containerDom.style.visibility = "visible";
  }
  hide() {
    this.containerDom.style.visibility = "hidden";
  }
  tempHide() {
    this.containerDom.style.opacity = "0";
  }
  tempShow() {
    this.containerDom.style.opacity = "1";
  }
  /**
   * @description: camera update 的时候，更新dom的位置
   */
  updateDomPosition(t) {
    if (!this.ndcPosition) {
      this.tempHide();
      return;
    }
    const e = t.getElement();
    if (!e)
      return;
    const i = e.clientWidth, s = e.clientHeight, r = this.ndcPosition.clone().project(t.camera);
    if (!xa(r)) {
      this.tempHide();
      return;
    }
    const o = (r.x + 1) / 2 * i, a = -(r.y - 1) / 2 * s;
    this.containerDom.style.transform = `translate(${o}px, ${a}px)`, this.tempShow();
  }
}
class P5 extends j0 {
  constructor(e) {
    var i;
    e.contentStyle = de(_({}, e.contentStyle), {
      background: "#FFFFFF",
      color: "#041066",
      fontFamily: "Arial-BoldMT",
      fontWeight: "BoldMT",
      letterSpacing: "0",
      lineHeight: "20px",
      padding: "2px 8px",
      borderRadius: "12px",
      display: "flex",
      alignItems: "center",
      justifyContent: "center",
      "--distance-scale": "1",
      transition: "font-size 0.5s ease"
    });
    super(e);
    u(this, "line");
    u(this, "lastFOV");
    u(this, "cameraUpdateHandler", null);
    u(this, "onPanoChange", () => {
      const e = this.getFiveInstance();
      e && setTimeout(() => this.update(e), 100);
    });
    if (this.line = e.line, (i = this.params.userDistanceItem) != null && i.element ? this.containerDom.appendChild(this.params.userDistanceItem.element) : this.containerDom.appendChild(this.contentDom), !document.getElementById("PanoMeasurePluginFontSizes")) {
      const s = document.createElement("style");
      s.id = "PanoMeasurePluginFontSizes", document.head.appendChild(s), s.innerHTML = `
        .pano-measure-item-content {
          transition: font-size 0.5s ease; /* Smooth transition for font size */
        }
        
        /* sm screen */
        @media screen and (max-width: 499px) {
          .pano-measure-item-content {
            font-size: calc(12px + (14px - 12px) * var(--distance-scale));
          }
        }
        
        /* md screen */
        @media screen and (min-width: 500px) and (max-width: 929px) {
          .pano-measure-item-content {
            font-size: calc(12px + (14px - 12px) * var(--distance-scale));
          }
        }
        
        /* lg screen */
        @media screen and (min-width: 930px) and (max-width: 1365px) {
          .pano-measure-item-content {
            font-size: calc(14px + (16px - 14px) * var(--distance-scale));
          }
        }
        
        /* xl screen */
        @media screen and (min-width: 1366px) and (max-width: 2549px) {
          .pano-measure-item-content {
            font-size: calc(14px + (16px - 14px) * var(--distance-scale));
          }
        }
        
        /* xxl screen */
        @media screen and (min-width: 2550px) {
          .pano-measure-item-content {
            font-size: calc(0.875rem + (1rem - 0.875rem) * var(--distance-scale));
          }
        }
      `;
    }
    this.contentDom.classList.add("pano-measure-item-content");
  }
  appendTo(e) {
    if (super.appendTo(e), !this.cameraUpdateHandler) {
      this.cameraUpdateHandler = () => this.onCameraUpdate();
      const i = this.getFiveInstance();
      i && (i.on("cameraUpdate", this.cameraUpdateHandler), i.on("cameraFovUpdate", this.cameraUpdateHandler), i.on("panoArrived", this.onPanoChange));
    }
    return this;
  }
  remove() {
    if (this.cameraUpdateHandler) {
      const e = this.getFiveInstance();
      e && (e.off("cameraUpdate", this.cameraUpdateHandler), e.off("cameraFovUpdate", this.cameraUpdateHandler), e.off("panoArrived", this.onPanoChange)), this.cameraUpdateHandler = null;
    }
    super.remove();
  }
  /** 获取内容文本 */
  getCurrentContent() {
    var l, c, h, d;
    if (this.line.points.length < 2)
      return "";
    const [e, i] = this.line.points, s = e.position.clone().distanceTo(i.position), r = (c = this.line.text) != null ? c : (l = this.line.model.config) == null ? void 0 : l.defaultText, o = (d = (h = this.line.model.config) == null ? void 0 : h.getDistanceText) == null ? void 0 : d.call(h, s), a = r != null ? r : o;
    return a != null ? a : s.toFixed(2) + "m";
  }
  update(e) {
    var I;
    if (this.line.mesh.visible === !1) {
      this.hide();
      return;
    }
    const i = e.getElement();
    if (!i)
      return;
    const s = i.clientWidth, r = i.clientHeight, o = s / 2, a = r / 2;
    if (this.line.points.length < 2)
      return;
    const [l, c] = this.line.points.map((E) => E.position.clone().applyMatrix4(this.line.mesh.matrixWorld)), h = l.clone().project(e.camera), d = c.clone().project(e.camera), f = $t(l, c).clone().project(e.camera), g = new _t(h.x * o, h.y * a), p = new _t(d.x * o, d.y * a), m = g.distanceTo(p);
    if ((() => !(Math.abs(h.z) > 1 || Math.abs(d.z) > 1 || !xa(h) && !xa(d) || !xa(f) || m === 0))() === !1) {
      this.hide();
      return;
    }
    const w = $t(l, c).distanceTo(e.camera.position), x = e.camera.fov || 60, k = 2 * Math.tan(0.5 * x / 180 * Math.PI), T = Math.max(Math.min(1 - k * w / 40, 1), 0);
    this.contentDom.style.setProperty("--distance-scale", T.toString());
    const S = (f.x + 1) / 2 * s, V = -(f.y - 1) / 2 * r, O = -(Math.atan((g.y - p.y) / (g.x - p.x)) * 180) / Math.PI, A = this.containerDom.parentElement && this.contentDom.clientWidth > m ? -20 : 0;
    this.containerDom.style.transform = `translate(${S}px, ${V}px) rotate(${O}deg) translateY(${A}px)`, this.show(), (I = this.params.userDistanceItem) == null || I.update({ line: this.line, polyline: this.line.getPolyline() });
    const C = this.getCurrentContent();
    this.contentDom.innerText = C;
  }
  getFiveInstance() {
    var e, i;
    return (i = (e = this.line.model) == null ? void 0 : e.config) == null ? void 0 : i.five;
  }
  onCameraUpdate() {
    const e = this.getFiveInstance();
    e != null && e.camera && this.lastFOV !== e.camera.fov && (this.lastFOV = e.camera.fov, this.update(e));
  }
}
let xr = class R0 {
  constructor(t, e, i) {
    u(this, "id");
    u(this, "selected", !1);
    u(this, "text");
    u(this, "type", "line");
    u(this, "model");
    u(this, "mesh");
    u(this, "points");
    u(this, "lightMesh");
    u(this, "hook");
    u(this, "distanceItem");
    u(this, "polyline");
    u(this, "visible");
    var s;
    if (this.id = Dt(), this.model = i, t.id === e.id)
      throw new Error("无效的线段, 一个点无法构成线段");
    typeof i.config.defaultText == "string" && (this.text = i.config.defaultText), this.hook = new zr(), this.points = [t, e], this.mesh = rf(this, "normal"), this.lightMesh = rf(this, "light"), this.distanceItem = new P5({
      line: this,
      clickCallback: () => this.hook.emit("selected", this),
      userDistanceItem: (s = this.model.config) != null && s.userDistanceItemCreator ? this.model.config.userDistanceItemCreator() : void 0
    });
  }
  hide() {
    this.visible && (this.visible = !1, this.mesh.visible = !1, this.distanceItem.hide());
  }
  show() {
    this.visible || (this.visible = !0, this.mesh.visible = !0, this.distanceItem.show());
  }
  setPoints(t, e) {
    this.points[0].position.copy(t), this.points[1].position.copy(e), this.mesh.setPoints(t, e);
  }
  remove() {
    this.mesh.parent && this.mesh.parent.remove(this.mesh), this.distanceItem.remove();
  }
  clear() {
    this.selected = !1, this.polyline = void 0;
  }
  isEmpty() {
    return this.points.length === 0;
  }
  getPolyline() {
    if (this.polyline)
      return this.polyline;
    const t = this.model.polylines.find((e) => e.lines.includes(this));
    if (t)
      return this.polyline = t, t;
  }
  findAnotherPoint(t) {
    return this.points.find(({ id: e }) => e !== t.id);
  }
  setText(t) {
    this.text = t, this.hook.emit("textChanged", t);
  }
  toJSON() {
    return this.toJson();
  }
  toJson() {
    return { id: this.id, points: this.points.map((t) => t.toJson()), text: this.text };
  }
  clone() {
    const t = new R0(this.points[0].clone(), this.points[1].clone(), this.model);
    return t.text = this.text, t;
  }
}, wi = class B0 {
  constructor(t) {
    u(this, "id");
    u(this, "position");
    u(this, "type", "point");
    if (this.id = Dt(), this.position = new fe(), Array.isArray(t))
      this.position.fromArray(t);
    else if (typeof t == "object" && t.isVector3)
      this.position.copy(t);
    else
      throw new Error("position must be Vector3 or number[]");
  }
  toJson() {
    return { id: this.id, position: this.position.toArray() };
  }
  clone() {
    return new B0(this.position);
  }
};
const pa = (n) => n.preventDefault();
let bl = class {
  constructor(t) {
    u(this, "model");
    u(this, "five");
    u(this, "group");
    u(this, "config");
    u(this, "dashed");
    u(this, "perpendicularDashed");
    u(this, "disposed", !1);
    u(this, "isMobile");
    u(this, "editParams");
    u(this, "magnifierParams");
    u(this, "mouseGroup");
    u(this, "container");
    u(this, "hook");
    u(this, "magnifier");
    u(this, "userDistanceItemCreator");
    u(this, "pointSelectorConfig");
    u(this, "workUtil");
    u(this, "getMeasureType");
    u(this, "updateDistanceUI", () => {
      this.dashed.distanceItem.update(this.five), this.model.getAllLines().forEach((t) => t.distanceItem.update(this.five));
    });
    u(this, "updateAreaUI", () => {
      this.dashed.distanceItem.update(this.five), this.model.getAllAreas().forEach((t) => {
        t.areaItem.updateArea(this.five), t.polyline.lines.forEach((e) => {
          e.distanceItem.update(this.five);
        });
      });
    });
    var i, s, r;
    this.five = t.five, this.hook = t.hook, this.model = t.model, this.getMeasureType = t.getMeasureType, this.config = t.config, this.editParams = t.editParams, this.magnifierParams = t.magnifierParams, this.magnifier = t.magnifier, this.pointSelectorConfig = de(_({}, t.pointSelectorConfig), {
      helper: _({ magnifierParams: t.magnifierParams }, (i = t.pointSelectorConfig) == null ? void 0 : i.helper)
    }), this.container = t.container, this.isMobile = (r = (s = t.openParams) == null ? void 0 : s.isMobile) != null ? r : !1, this.workUtil = t.workUtil, this.userDistanceItemCreator = t.userDistanceItemCreator, this.group = t.group, this.mouseGroup = t.mouseGroup, this.dashed = new xr(new wi([0, 0, 0]), new wi([0, 0, 0]), this.model), this.dashed.distanceItem.setCanSelect(!1), this.dashed.mesh.setMaterial({ dashed: !0, dashScale: 100 }), this.dashed.mesh.name = "dashLine", this.perpendicularDashed = new xr(new wi([0, 0, 0]), new wi([0, 0, 0]), this.model), this.perpendicularDashed.distanceItem.setCanSelect(!1), this.perpendicularDashed.mesh.setMaterial({ dashed: !0, dashScale: 40, color: new Gt(10218089) }), this.perpendicularDashed.mesh.name = "perpendicularDashLine";
    const e = this.five.getElement();
    e && (e.addEventListener("touchstart", pa), e.addEventListener("contextmenu", pa));
  }
  get currentMeasureType() {
    return this.getMeasureType();
  }
  removeLine(t) {
    this.group.remove(t.mesh, t.lightMesh), t.distanceItem.remove(), this.five.needsRender = !0;
  }
  updateMouseGroup(t, e) {
    if (!t)
      return this.mouseGroup;
    if (this.mouseGroup.position.copy(t.point), e)
      this.mouseGroup.quaternion.copy(e.quaternion);
    else if (t.face) {
      const s = t.face.normal.clone().multiplyScalar(0.05), o = t.point.clone().add(s).clone().add(s);
      this.mouseGroup.lookAt(o);
    }
    return this.mouseGroup;
  }
  dispose() {
    var e;
    this.disposed = !0, (e = this.magnifier) == null || e.disable(), this.model.getAllLines().forEach((i) => this.removeLine(i)), this.model.areas.forEach((i) => i.remove());
    const t = this.five.getElement();
    t && (t.removeEventListener("touchstart", pa), t.removeEventListener("contextmenu", pa));
  }
}, Dr = class {
  constructor(t) {
    u(this, "id", Dt());
    u(this, "lines", []);
    u(this, "visiblePanoIndexes");
    u(this, "visibleFiveMode");
    u(this, "model");
    u(this, "type", "polyline");
    u(this, "hook", new zr());
    this.model = t.model;
  }
  get points() {
    const t = /* @__PURE__ */ new Set();
    return this.lines.forEach((e) => {
      t.add(e.points[0]), t.add(e.points[1]);
    }), Array.from(t);
  }
  addLine(t) {
    if (this.includes(t)) {
      console.error(new Error("不能重复添加线段"));
      return;
    }
    const e = this.getLastPoint(), i = e && t.findAnotherPoint(e);
    if (e && !i) {
      console.error(new Error("传入线段无法与当前折线进行连接"));
      return;
    }
    this.lines.push(t), this.hook.emit("lineAdded", t);
  }
  removeLine(t) {
    if (this.lines.length === 0)
      return;
    if (!this.isLastLine(t)) {
      console.error(new Error("传入线段不是当前折线的最后一段"));
      return;
    }
    this.lines.pop() && this.hook.emit("lineRemoved", t);
  }
  isLastLine(t) {
    const e = this.getLastLine();
    return e ? t.id === e.id : !1;
  }
  getLastLine() {
    return this.lines.slice(-1)[0];
  }
  /**
   * @description: 获取连续线段的顶点数量
   */
  getPointLength() {
    return this.lines.length + 1;
  }
  clear() {
    const t = this.lines.slice();
    this.lines.length = 0, t.reduceRight((e, i) => this.hook.emit("lineRemoved", i), void 0);
  }
  /** 是否产生重叠 */
  overlapWith(t) {
    return t.type === "point" ? this.includes(t) : t.type === "line" ? t.points.some((e) => this.includes(e)) : t.type === "polyline" ? t.points.some((e) => this.includes(e)) : !0;
  }
  includes(t) {
    return t.type === "point" ? this.points.find(({ id: e }) => e === t.id) !== void 0 : t.type === "line" ? this.lines.find(({ id: e }) => e === t.id) !== void 0 : !1;
  }
  isEmpty() {
    return this.lines.length === 0;
  }
  getLastPoint() {
    return this.points.slice(-1)[0];
  }
  toJSON() {
    return this.toJson();
  }
  toJson() {
    return {
      id: this.id,
      lines: this.lines.map((t) => t.toJson()),
      visiblePanoIndexes: this.visiblePanoIndexes,
      visibleFiveMode: this.visibleFiveMode
    };
  }
  getPointByID(t) {
    return this.points.find(({ id: e }) => e === t);
  }
  fromJson(t) {
    this.clear(), this.id = t.id;
    const { getPoint: e } = s(), i = t.lines.map((r) => {
      const [o, a] = r.points, l = e(o), c = e(a);
      if (!l || !c)
        throw new Error("线上的点不存在");
      const h = new xr(l, c, this.model);
      return h.id = r.id, h.text = r.text, h;
    });
    this.lines.push(...i), this.visiblePanoIndexes = t.visiblePanoIndexes, this.visibleFiveMode = t.visibleFiveMode;
    function s() {
      const r = /* @__PURE__ */ new Map();
      function o(l) {
        const c = r.get(l.id);
        if (c)
          return c;
        const h = new wi(l.position);
        return h.id = l.id, r.set(l.id, h), h;
      }
      function a() {
        return Array.from(r.values());
      }
      return { getPoint: o, getAllPoints: a };
    }
    return this;
  }
  replace(t) {
    this.id = t.id, this.clear(), this.lines.push(...t.lines);
  }
};
var Ja = {}, C5 = {
  get exports() {
    return Ja;
  },
  set exports(n) {
    Ja = n;
  }
};
C5.exports = yl;
Ja.default = yl;
function yl(n, t, e) {
  e = e || 2;
  var i = t && t.length, s = i ? t[0] * e : n.length, r = V0(n, 0, s, e, !0), o = [];
  if (!r || r.next === r.prev)
    return o;
  var a, l, c, h, d, f, g;
  if (i && (r = x5(n, t, r, e)), n.length > 80 * e) {
    a = c = n[0], l = h = n[1];
    for (var p = e; p < s; p += e)
      d = n[p], f = n[p + 1], d < a && (a = d), f < l && (l = f), d > c && (c = d), f > h && (h = f);
    g = Math.max(c - a, h - l), g = g !== 0 ? 32767 / g : 0;
  }
  return xo(r, o, e, a, l, g, 0), o;
}
function V0(n, t, e, i, s) {
  var r, o;
  if (s === Bc(n, t, e, i) > 0)
    for (r = t; r < e; r += i)
      o = of(r, n[r], n[r + 1], o);
  else
    for (r = e - i; r >= t; r -= i)
      o = of(r, n[r], n[r + 1], o);
  return o && wl(o, o.next) && (So(o), o = o.next), o;
}
function zs(n, t) {
  if (!n)
    return n;
  t || (t = n);
  var e = n, i;
  do
    if (i = !1, !e.steiner && (wl(e, e.next) || ut(e.prev, e, e.next) === 0)) {
      if (So(e), e = t = e.prev, e === e.next)
        break;
      i = !0;
    } else
      e = e.next;
  while (i || e !== t);
  return t;
}
function xo(n, t, e, i, s, r, o) {
  if (n) {
    !o && r && z5(n, i, s, r);
    for (var a = n, l, c; n.prev !== n.next; ) {
      if (l = n.prev, c = n.next, r ? E5(n, i, s, r) : I5(n)) {
        t.push(l.i / e | 0), t.push(n.i / e | 0), t.push(c.i / e | 0), So(n), n = c.next, a = c.next;
        continue;
      }
      if (n = c, n === a) {
        o ? o === 1 ? (n = M5(zs(n), t, e), xo(n, t, e, i, s, r, 2)) : o === 2 && k5(n, t, e, i, s, r) : xo(zs(n), t, e, i, s, r, 1);
        break;
      }
    }
  }
}
function I5(n) {
  var t = n.prev, e = n, i = n.next;
  if (ut(t, e, i) >= 0)
    return !1;
  for (var s = t.x, r = e.x, o = i.x, a = t.y, l = e.y, c = i.y, h = s < r ? s < o ? s : o : r < o ? r : o, d = a < l ? a < c ? a : c : l < c ? l : c, f = s > r ? s > o ? s : o : r > o ? r : o, g = a > l ? a > c ? a : c : l > c ? l : c, p = i.next; p !== t; ) {
    if (p.x >= h && p.x <= f && p.y >= d && p.y <= g && or(s, a, r, l, o, c, p.x, p.y) && ut(p.prev, p, p.next) >= 0)
      return !1;
    p = p.next;
  }
  return !0;
}
function E5(n, t, e, i) {
  var s = n.prev, r = n, o = n.next;
  if (ut(s, r, o) >= 0)
    return !1;
  for (var a = s.x, l = r.x, c = o.x, h = s.y, d = r.y, f = o.y, g = a < l ? a < c ? a : c : l < c ? l : c, p = h < d ? h < f ? h : f : d < f ? d : f, m = a > l ? a > c ? a : c : l > c ? l : c, v = h > d ? h > f ? h : f : d > f ? d : f, b = jc(g, p, t, e, i), w = jc(m, v, t, e, i), x = n.prevZ, k = n.nextZ; x && x.z >= b && k && k.z <= w; ) {
    if (x.x >= g && x.x <= m && x.y >= p && x.y <= v && x !== s && x !== o && or(a, h, l, d, c, f, x.x, x.y) && ut(x.prev, x, x.next) >= 0 || (x = x.prevZ, k.x >= g && k.x <= m && k.y >= p && k.y <= v && k !== s && k !== o && or(a, h, l, d, c, f, k.x, k.y) && ut(k.prev, k, k.next) >= 0))
      return !1;
    k = k.nextZ;
  }
  for (; x && x.z >= b; ) {
    if (x.x >= g && x.x <= m && x.y >= p && x.y <= v && x !== s && x !== o && or(a, h, l, d, c, f, x.x, x.y) && ut(x.prev, x, x.next) >= 0)
      return !1;
    x = x.prevZ;
  }
  for (; k && k.z <= w; ) {
    if (k.x >= g && k.x <= m && k.y >= p && k.y <= v && k !== s && k !== o && or(a, h, l, d, c, f, k.x, k.y) && ut(k.prev, k, k.next) >= 0)
      return !1;
    k = k.nextZ;
  }
  return !0;
}
function M5(n, t, e) {
  var i = n;
  do {
    var s = i.prev, r = i.next.next;
    !wl(s, r) && _0(s, i, i.next, r) && Do(s, r) && Do(r, s) && (t.push(s.i / e | 0), t.push(i.i / e | 0), t.push(r.i / e | 0), So(i), So(i.next), i = n = r), i = i.next;
  } while (i !== n);
  return zs(i);
}
function k5(n, t, e, i, s, r) {
  var o = n;
  do {
    for (var a = o.next.next; a !== o.prev; ) {
      if (o.i !== a.i && R5(o, a)) {
        var l = H0(o, a);
        o = zs(o, o.next), l = zs(l, l.next), xo(o, t, e, i, s, r, 0), xo(l, t, e, i, s, r, 0);
        return;
      }
      a = a.next;
    }
    o = o.next;
  } while (o !== n);
}
function x5(n, t, e, i) {
  var s = [], r, o, a, l, c;
  for (r = 0, o = t.length; r < o; r++)
    a = t[r] * i, l = r < o - 1 ? t[r + 1] * i : n.length, c = V0(n, a, l, i, !1), c === c.next && (c.steiner = !0), s.push(j5(c));
  for (s.sort(D5), r = 0; r < s.length; r++)
    e = S5(s[r], e);
  return e;
}
function D5(n, t) {
  return n.x - t.x;
}
function S5(n, t) {
  var e = T5(n, t);
  if (!e)
    return t;
  var i = H0(e, n);
  return zs(i, i.next), zs(e, e.next);
}
function T5(n, t) {
  var e = t, i = n.x, s = n.y, r = -1 / 0, o;
  do {
    if (s <= e.y && s >= e.next.y && e.next.y !== e.y) {
      var a = e.x + (s - e.y) * (e.next.x - e.x) / (e.next.y - e.y);
      if (a <= i && a > r && (r = a, o = e.x < e.next.x ? e : e.next, a === i))
        return o;
    }
    e = e.next;
  } while (e !== t);
  if (!o)
    return null;
  var l = o, c = o.x, h = o.y, d = 1 / 0, f;
  e = o;
  do
    i >= e.x && e.x >= c && i !== e.x && or(s < h ? i : r, s, c, h, s < h ? r : i, s, e.x, e.y) && (f = Math.abs(s - e.y) / (i - e.x), Do(e, n) && (f < d || f === d && (e.x > o.x || e.x === o.x && L5(o, e))) && (o = e, d = f)), e = e.next;
  while (e !== l);
  return o;
}
function L5(n, t) {
  return ut(n.prev, n, t.prev) < 0 && ut(t.next, n, n.next) < 0;
}
function z5(n, t, e, i) {
  var s = n;
  do
    s.z === 0 && (s.z = jc(s.x, s.y, t, e, i)), s.prevZ = s.prev, s.nextZ = s.next, s = s.next;
  while (s !== n);
  s.prevZ.nextZ = null, s.prevZ = null, O5(s);
}
function O5(n) {
  var t, e, i, s, r, o, a, l, c = 1;
  do {
    for (e = n, n = null, r = null, o = 0; e; ) {
      for (o++, i = e, a = 0, t = 0; t < c && (a++, i = i.nextZ, !!i); t++)
        ;
      for (l = c; a > 0 || l > 0 && i; )
        a !== 0 && (l === 0 || !i || e.z <= i.z) ? (s = e, e = e.nextZ, a--) : (s = i, i = i.nextZ, l--), r ? r.nextZ = s : n = s, s.prevZ = r, r = s;
      e = i;
    }
    r.nextZ = null, c *= 2;
  } while (o > 1);
  return n;
}
function jc(n, t, e, i, s) {
  return n = (n - e) * s | 0, t = (t - i) * s | 0, n = (n | n << 8) & 16711935, n = (n | n << 4) & 252645135, n = (n | n << 2) & 858993459, n = (n | n << 1) & 1431655765, t = (t | t << 8) & 16711935, t = (t | t << 4) & 252645135, t = (t | t << 2) & 858993459, t = (t | t << 1) & 1431655765, n | t << 1;
}
function j5(n) {
  var t = n, e = n;
  do
    (t.x < e.x || t.x === e.x && t.y < e.y) && (e = t), t = t.next;
  while (t !== n);
  return e;
}
function or(n, t, e, i, s, r, o, a) {
  return (s - o) * (t - a) >= (n - o) * (r - a) && (n - o) * (i - a) >= (e - o) * (t - a) && (e - o) * (r - a) >= (s - o) * (i - a);
}
function R5(n, t) {
  return n.next.i !== t.i && n.prev.i !== t.i && !B5(n, t) && // dones't intersect other edges
  (Do(n, t) && Do(t, n) && V5(n, t) && // locally visible
  (ut(n.prev, n, t.prev) || ut(n, t.prev, t)) || // does not create opposite-facing sectors
  wl(n, t) && ut(n.prev, n, n.next) > 0 && ut(t.prev, t, t.next) > 0);
}
function ut(n, t, e) {
  return (t.y - n.y) * (e.x - t.x) - (t.x - n.x) * (e.y - t.y);
}
function wl(n, t) {
  return n.x === t.x && n.y === t.y;
}
function _0(n, t, e, i) {
  var s = ga(ut(n, t, e)), r = ga(ut(n, t, i)), o = ga(ut(e, i, n)), a = ga(ut(e, i, t));
  return !!(s !== r && o !== a || s === 0 && ma(n, e, t) || r === 0 && ma(n, i, t) || o === 0 && ma(e, n, i) || a === 0 && ma(e, t, i));
}
function ma(n, t, e) {
  return t.x <= Math.max(n.x, e.x) && t.x >= Math.min(n.x, e.x) && t.y <= Math.max(n.y, e.y) && t.y >= Math.min(n.y, e.y);
}
function ga(n) {
  return n > 0 ? 1 : n < 0 ? -1 : 0;
}
function B5(n, t) {
  var e = n;
  do {
    if (e.i !== n.i && e.next.i !== n.i && e.i !== t.i && e.next.i !== t.i && _0(e, e.next, n, t))
      return !0;
    e = e.next;
  } while (e !== n);
  return !1;
}
function Do(n, t) {
  return ut(n.prev, n, n.next) < 0 ? ut(n, t, n.next) >= 0 && ut(n, n.prev, t) >= 0 : ut(n, t, n.prev) < 0 || ut(n, n.next, t) < 0;
}
function V5(n, t) {
  var e = n, i = !1, s = (n.x + t.x) / 2, r = (n.y + t.y) / 2;
  do
    e.y > r != e.next.y > r && e.next.y !== e.y && s < (e.next.x - e.x) * (r - e.y) / (e.next.y - e.y) + e.x && (i = !i), e = e.next;
  while (e !== n);
  return i;
}
function H0(n, t) {
  var e = new Rc(n.i, n.x, n.y), i = new Rc(t.i, t.x, t.y), s = n.next, r = t.prev;
  return n.next = t, t.prev = n, e.next = s, s.prev = e, i.next = e, e.prev = i, r.next = i, i.prev = r, i;
}
function of(n, t, e, i) {
  var s = new Rc(n, t, e);
  return i ? (s.next = i.next, s.prev = i, i.next.prev = s, i.next = s) : (s.prev = s, s.next = s), s;
}
function So(n) {
  n.next.prev = n.prev, n.prev.next = n.next, n.prevZ && (n.prevZ.nextZ = n.nextZ), n.nextZ && (n.nextZ.prevZ = n.prevZ);
}
function Rc(n, t, e) {
  this.i = n, this.x = t, this.y = e, this.prev = null, this.next = null, this.z = 0, this.prevZ = null, this.nextZ = null, this.steiner = !1;
}
yl.deviation = function(n, t, e, i) {
  var s = t && t.length, r = s ? t[0] * e : n.length, o = Math.abs(Bc(n, 0, r, e));
  if (s)
    for (var a = 0, l = t.length; a < l; a++) {
      var c = t[a] * e, h = a < l - 1 ? t[a + 1] * e : n.length;
      o -= Math.abs(Bc(n, c, h, e));
    }
  var d = 0;
  for (a = 0; a < i.length; a += 3) {
    var f = i[a] * e, g = i[a + 1] * e, p = i[a + 2] * e;
    d += Math.abs(
      (n[f] - n[p]) * (n[g + 1] - n[f + 1]) - (n[f] - n[g]) * (n[p + 1] - n[f + 1])
    );
  }
  return o === 0 && d === 0 ? 0 : Math.abs((d - o) / o);
};
function Bc(n, t, e, i) {
  for (var s = 0, r = t, o = e - i; r < e; r += i)
    s += (n[o] - n[r]) * (n[r + 1] + n[o + 1]), o = r;
  return s;
}
yl.flatten = function(n) {
  for (var t = n[0][0].length, e = { vertices: [], holes: [], dimensions: t }, i = 0, s = 0; s < n.length; s++) {
    for (var r = 0; r < n[s].length; r++)
      for (var o = 0; o < t; o++)
        e.vertices.push(n[s][r][o]);
    s > 0 && (i += n[s - 1].length, e.holes.push(i));
  }
  return e;
};
function as(n) {
  if (n.length < 3) {
    console.error("points.length < 3");
    return;
  }
  const [t, e, i] = n;
  return new fe().subVectors(i, e).cross(new fe().subVectors(t, e)).normalize();
}
function F0(n) {
  if (n.length < 3)
    return [];
  const t = as(n), e = new P.Quaternion().setFromUnitVectors(t, new P.Vector3(0, 1, 0)), s = n.map((o) => o.clone().applyQuaternion(e)).flatMap((o) => [o.x, o.z]);
  return Ja(s);
}
function Vc(n, t) {
  const e = Array.isArray(t) ? t : [t];
  for (let i = 0; i < e.length; i++) {
    const s = n.start, r = n.end, o = e[i].start, a = e[i].end;
    if (!(eo(s, o) || eo(s, a) || eo(r, o) || eo(r, a) || eo(s, r)) && _5([s.x, s.y, s.z], [r.x, r.y, r.z], [o.x, o.y, o.z], [a.x, a.y, a.z]))
      return !0;
  }
  return !1;
}
function _5(n, t, e, i) {
  const s = [t[0] - n[0], t[1] - n[1], t[2] - n[2]], r = [i[0] - e[0], i[1] - e[1], i[2] - e[2]], o = [
    [s[0], -r[0]],
    [s[1], -r[1]],
    [s[2], -r[2]]
  ], a = [e[0] - n[0], e[1] - n[1], e[2] - n[2]], l = H5(o, a);
  if (l === null)
    return !1;
  const [c, h] = l;
  return !!(af(c) && af(h));
}
function H5(n, t) {
  if (F5(n) === 0)
    return null;
  const i = N5(n);
  return G5(i, t);
}
function F5(n) {
  return n[0][0] * n[1][1] - n[0][1] * n[1][0];
}
function N5(n) {
  const t = n[0][0] * n[1][1] - n[0][1] * n[1][0];
  return [
    [n[1][1] / t, -n[0][1] / t],
    [-n[1][0] / t, n[0][0] / t]
  ];
}
function G5(n, t) {
  return [n[0][0] * t[0] + n[0][1] * t[1], n[1][0] * t[0] + n[1][1] * t[1]];
}
function af(n) {
  return n >= 0 && n <= 1;
}
function eo(n, t) {
  return n.x === t.x && n.y === t.y && n.z === t.z;
}
function N0(n, t) {
  const e = [...new Set(n)];
  if (e.length < 3)
    return;
  if (e.at(-1).equals(e[0]) || e.push(e[0]), t != null && t.checkLinesIntersect && e.length >= 5) {
    const a = e.map((l, c) => c === 0 ? null : { start: e[c - 1], end: e[c] }).filter(Boolean);
    for (let l = 0; l < a.length; l++)
      if (Vc(a[l], a.slice(l)))
        return;
  }
  const i = e.flatMap((a) => [a.x, a.y, a.z]), s = new P.Float32BufferAttribute(i, 3), r = F0(e), o = new P.BufferGeometry();
  return o.setAttribute("position", s), o.setIndex(r), o.name = "PolygonGeometry", o;
}
const W5 = new P.BufferGeometry();
let G0 = class extends ri {
  constructor(e) {
    super();
    u(this, "isPolygonMesh", !0);
    u(this, "geometry", new P.BufferGeometry());
    u(this, "isBlank", !0);
    u(this, "points", []);
    const i = new P.MeshBasicMaterial({
      color: 4090367,
      transparent: !0,
      side: P.DoubleSide,
      depthTest: !0,
      opacity: 0.5
    }), s = new P.MeshBasicMaterial({
      color: 16777215,
      transparent: !0,
      side: P.DoubleSide,
      depthTest: !1,
      depthWrite: !1,
      opacity: 0.3
    }), r = new P.Mesh(this.geometry, i), o = new P.Mesh(this.geometry, s);
    r.renderOrder = 1, o.renderOrder = 0, e && this.updatePoints(e), this.add(r, o);
  }
  /**
   * @description: 按照新的端点来更新多边形的geometry
   */
  updatePoints(e) {
    this.points = e;
    const i = N0(e);
    i ? (this.geometry.copy(i), this.isBlank = !1) : (this.geometry.copy(W5), this.isBlank = !0);
  }
};
function W0(n) {
  const t = Q5(n);
  if (t.length === 0) {
    console.warn("No geometry triangles found"), console.debug({ geometry: n, triangles: t });
    return;
  }
  let e = 0, i = new fe();
  for (const [s, r, o] of t) {
    const a = Qh(s, r, o), l = Q0(s, r, o, a);
    e += a, i.add(l);
  }
  return i = i.divideScalar(e), { center: i, area: e };
}
function Qh(n, t, e) {
  return t.clone().sub(n).cross(e.clone().sub(n)).length() / 2;
}
function Q0(n, t, e, i) {
  const s = i != null ? i : Qh(n, t, e);
  return $t(n, t, e).multiplyScalar(s);
}
function Q5(n) {
  var s;
  const t = n.getAttribute("position"), e = (s = n.getIndex()) == null ? void 0 : s.array;
  if (!t || !e)
    return [];
  let i = [];
  for (let r = 0; r < e.length; r += 3) {
    const o = e[r], a = e[r + 1], l = e[r + 2], c = new fe().fromArray([t.getX(o), t.getY(o), t.getZ(o)]), h = new fe().fromArray([t.getX(a), t.getY(a), t.getZ(a)]), d = new fe().fromArray([t.getX(l), t.getY(l), t.getZ(l)]);
    i.push([c, h, d]);
  }
  return i;
}
class U5 extends j0 {
  constructor(e) {
    e.containerStyle = de(_({}, e.containerStyle), {
      zIndex: "1"
    }), e.contentStyle = de(_({}, e.contentStyle), {
      background: "#6386FF",
      borderRadius: "2px"
    });
    super(e);
    u(this, "area");
    this.area = e.area, this.containerDom.appendChild(this.contentDom);
  }
  /**
   * @description: dom 依赖的多边形的顶点的位置更新时，更新 dom 的位置和面积
   */
  updateArea(e, i) {
    var l, c;
    const s = i != null ? i : this.area.polygon.geometry, r = W0(s);
    if (!r) {
      this.ndcPosition = null, this.updateDomPosition(e);
      return;
    }
    const { area: o, center: a } = r;
    this.ndcPosition = a.clone(), this.updateDomPosition(e), (c = (l = this.area.model) == null ? void 0 : l.config) != null && c.getAreaText ? this.contentDom.innerText = this.area.model.config.getAreaText(o) : this.updateAreaText(o, { fix: 2 });
  }
  updateAreaText(e, i) {
    const { unit: s = "m²", fix: r } = i != null ? i : {};
    this.contentDom.innerText = `${si(r) ? e : e.toFixed(r)}${s}`;
  }
}
class _c {
  constructor(t, e) {
    u(this, "id", Dt());
    u(this, "selected", !1);
    u(this, "text");
    u(this, "type", "area");
    u(this, "lightMesh");
    u(this, "areaItem");
    u(this, "hook", new zr());
    u(this, "model");
    /** 多边形mesh */
    u(this, "polygon");
    /** 多边形顶点 */
    u(this, "points", []);
    /** 多边形前三个点组成的平面，用来使得后面加的点也落在这个平面上 */
    u(this, "planeHelper");
    /** 多边形边框 */
    u(this, "polyline");
    /** 多边形mesh容器 */
    u(this, "meshContainer");
    /** 多边形dom容器 */
    u(this, "domContainer");
    u(this, "five");
    /**
     * @description: five camera update 时，更新Dom的位置
     */
    u(this, "updateDom", () => {
      this.five && (this.polyline.lines.forEach((t) => t.distanceItem.update(this.five)), this.areaItem.updateDomPosition(this.five));
    });
    var i;
    t && (this.points = t), this.model = e.model, this.polygon = new G0(t), this.polyline = new Dr({ model: e.model }), this.areaItem = new U5({
      area: this,
      clickCallback: (s, r) => {
        const o = s.clientX + "px", a = s.clientY + "px";
        this.hook.emit("selected", this, { left: o, top: a });
      }
    }), this.domContainer = e.domContainer || null, this.meshContainer = e.meshContainer || null, this.five = e.five || null, this.areaItem.appendTo(this.domContainer), (i = this.five) == null || i.on("cameraUpdate", this.updateDom);
  }
  /**
   * @description: 多边形的端点是否闭合
   */
  get isClosed() {
    var t;
    return this.points.length >= 4 && ((t = this.points.at(0)) == null ? void 0 : t.equals(this.points.at(-1)));
  }
  addPoints(t) {
    var s;
    this.points = this.points.concat(t);
    const e = this.points.at(-2), i = this.points.at(-1);
    if (e && i) {
      const r = new xr(new wi(e), new wi(i), this.polyline.model);
      this.polyline.addLine(r), this.meshContainer.add(r.mesh), this.five && (r.distanceItem.setCanSelect(!1), r.distanceItem.appendTo(this.domContainer), r.distanceItem.update(this.five));
    }
    (s = this.meshContainer) != null && s.children.includes(this.polygon) || this.meshContainer.add(this.polygon), this.polygon.updatePoints(this.points), this.areaItem.updateArea(this.five), this.points.length === 3 ? this.planeHelper = new P.Plane().setFromCoplanarPoints(this.points[0], this.points[1], this.points[2]) : this.points.length < 3 && (this.planeHelper = null);
  }
  /**
   * @description: 移除最后一个添加的点
   */
  popPoint() {
    this.points.pop();
    const t = this.polyline.lines.pop();
    t == null || t.remove(), this.polygon.updatePoints(this.points), this.areaItem.updateArea(this.five), this.points.length < 3 && (this.planeHelper = null);
  }
  /**
   * @description: 自动补全多边形的各个边
   */
  complete() {
    this.points.at(-1).equals(this.points[0]) || this.addPoints(this.points[0]);
  }
  hideArea() {
    this.polygon.visible = !1, this.areaItem.hide();
  }
  showArea() {
    this.polygon.visible = !0, this.areaItem.show();
  }
  /**
   * @description: 获取一个点投影在当前平面上的点
   */
  projectPoint(t) {
    return t && (this.planeHelper ? this.planeHelper.projectPoint(t, new P.Vector3()) : t);
  }
  remove() {
    this.polygon.removeFromParent(), this.areaItem.remove(), this.polyline.lines.forEach((t) => t.remove());
  }
  /**
   * @todo: 没写完
   */
  dispose() {
    this.remove(), this.model.areas.splice(this.model.areas.indexOf(this), 1), this.planeHelper = null, this.five.off("cameraUpdate", this.updateDom), this.five.needsRender = !0;
  }
  toJSON() {
    return {
      id: this.id,
      points: this.points.map((t) => t.toArray()),
      text: this.text
    };
  }
}
const X5 = `
<svg class="fpm__delete-icon" width="16px" height="17px" viewBox="0 0 16 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <linearGradient x1="22.185491%" y1="100%" x2="66.8316686%" y2="6.67239121%" id="linearGradient-1">
            <stop stop-color="#FFFCFC" stop-opacity="0.6" offset="0%"></stop>
            <stop stop-color="#FFFFFF" offset="100%"></stop>
        </linearGradient>
    </defs>   
     <path fill="url(#linearGradient-1)" fill-rule="nonzero" transform="translate(2.16 2.16)" d="M11.2979686,2.71818182 C11.611378,2.71818182 11.8654465,2.97561809 11.8654465,3.29318182 C11.8654465,3.58428191 11.6519584,3.82485822 11.374972,3.86293275 L11.2979686,3.86818182 L10.464,3.868 L9.7236795,10.6246222 C9.64153248,11.3737453 9.04854423,11.9512142 8.32013277,12.0165596 L8.18206028,12.0227273 L3.68338622,12.0227273 C2.89302127,12.0227273 2.22904821,11.4205655 2.141767,10.6246222 L2.141767,10.6246222 L1.4,3.868 L0.567477876,3.86818182 C0.254068499,3.86818182 0,3.61074555 0,3.29318182 C0,3.00208173 0.213488114,2.76150541 0.49047449,2.72343089 L0.567477876,2.71818182 L11.2979686,2.71818182 Z M9.322,3.868 L2.542,3.868 L3.26978106,10.4976259 C3.28762252,10.6603274 3.39528004,10.7928487 3.53932022,10.8467307 L3.61412483,10.866894 L3.68338622,10.8727273 L8.18206028,10.8727273 C8.39410941,10.8727273 8.57224853,10.7111717 8.59566544,10.4976259 L8.59566544,10.4976259 L9.322,3.868 Z M8.16824216,0 C8.48165153,0 8.73572003,0.257436269 8.73572003,0.575 C8.73572003,0.866100087 8.52223192,1.1066764 8.24524554,1.14475093 L8.16824216,1.15 L3.69720434,1.15 C3.38379497,1.15 3.12972647,0.892563731 3.12972647,0.575 C3.12972647,0.283899913 3.34321458,0.0433235966 3.62020096,0.00524907226 L3.69720434,0 L8.16824216,0 Z"></path>                 
</svg>
`, lf = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTciIGhlaWdodD0iMjUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSIxMC43MDYlIiB5MT0iNDIuNzQ0JSIgeDI9Ijg5LjA2NCUiIHkyPSI1Ny4yMDglIiBpZD0icHJlZml4X19hIj48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMCUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9Ii4zMDgiIG9mZnNldD0iNDkuNTY5JSIvPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3QgeD0iLS4yNSIgeT0iLS4yNSIgd2lkdGg9IjU3LjUiIGhlaWdodD0iMjMuNSIgcng9IjExLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDEpIiBmaWxsPSIjMkMyQzJDIiBzdHJva2U9InVybCgjcHJlZml4X19hKSIgc3Ryb2tlLXdpZHRoPSIuNSIgZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsLW9wYWNpdHk9Ii4zMDMiLz48L3N2Zz4=", Y5 = "data:image/png;base64,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";
class Uh {
  constructor(t, e) {
    u(this, "visible", !1);
    u(this, "five");
    u(this, "lines", []);
    u(this, "points", []);
    u(this, "onClick");
    u(this, "cancel");
    u(this, "content", document.createElement("div"));
    u(this, "container", document.createElement("div"));
    u(this, "masking", document.createElement("div"));
    u(this, "target");
    u(this, "clickHandler", (t) => {
      this.onClick(t, this.target);
    });
    u(this, "cancelHandler", () => {
      this.cancel(this.target);
    });
    u(this, "hover", () => {
      this.content.style.backgroundImage = `url(${Y5})`;
    });
    u(this, "unHover", () => {
      this.content.style.backgroundImage = `url(${lf})`;
    });
    var s, r;
    this.five = t, this.onClick = (e == null ? void 0 : e.onClick) || (() => {
    }), this.cancel = (e == null ? void 0 : e.cancel) || (() => {
    }), this.container.classList.add("fpm__delete"), this.container.style.opacity = "0", this.container.style.position = "absolute", this.container.style.left = "0", this.container.style.top = "10px", this.container.style.transform = "translate3d(0, 0, 10px)", this.container.style.pointerEvents = "none", this.container.style.transition = "opacity 200ms ease", this.container.style.zIndex = "99", this.content.classList.add("fpm__delete-content"), this.content.style.width = "62px", this.content.style.height = "26px", this.content.style.display = "flex", this.content.style.alignItems = "center", this.content.style.justifyContent = "center", this.content.style.transform = "translate(-50%, -50%)", this.content.style.color = "#fff", this.content.style.fontSize = "12px", this.content.style.lineHeight = "17px", this.content.style.borderRadius = "11px", this.content.style.backgroundSize = "100% 100%", this.content.style.cursor = "pointer", this.content.style.userSelect = "none", this.content.style.backgroundImage = `url(${lf})`, this.content.innerHTML = `
      ${X5}
      <span>${(r = (s = e.i18n) == null ? void 0 : s.call(e, "删除")) != null ? r : "删除"}</span>
    `, this.container.append(this.content);
    const i = this.content.querySelector(".fpm__delete-icon");
    i && (i.style.width = "16px", i.style.height = "17px", i.style.marginRight = "1px"), this.content.addEventListener("click", this.clickHandler), this.content.addEventListener("mouseenter", this.hover), this.content.addEventListener("mouseleave", this.unHover), this.masking.setAttribute("style", "position: absolute;top: 0;left: 0;bottom: 0;right: 0;pointer-events: none;"), this.masking.addEventListener("click", this.cancelHandler), this.masking.addEventListener("touchstart", this.cancelHandler);
  }
  dispose() {
    this.content.removeEventListener("click", this.clickHandler), this.content.removeEventListener("mouseenter", this.hover), this.content.removeEventListener("mouseleave", this.unHover), this.container.remove(), this.masking.removeEventListener("click", this.cancelHandler), this.masking.removeEventListener("touchstart", this.cancelHandler), this.masking.remove();
  }
  appendTo(t) {
    return t.append(this.container), t.append(this.masking), this;
  }
  setLines(t) {
    return this.lines = t, this.points = Array.from(new Set(this.lines.map((e) => [e.points[0], e.points[1]]).flat(1))), this;
  }
  setTarget(t) {
    return this.target = t, this;
  }
  updatePosition(t, e) {
    if (t && e)
      return this.container.style.left = t, this.container.style.top = e, this.container.style.transform = "", this.show();
    if (this.lines.length === 0)
      return this;
    const i = this.points.map((p) => p.position).map((p) => p.clone().applyMatrix4(this.lines[0].mesh.matrixWorld)), s = i.map((p) => p.clone().project(this.five.camera));
    if (s.some((p) => Math.abs(p.z) > 1))
      return this.hide();
    const r = s.map((p) => p.x), o = s.map((p) => p.y), a = (Math.min(...r) + Math.max(...r)) / 2, l = Math.max(...o), c = this.container.parentElement;
    if (!c)
      return this;
    const h = (a + 1) / 2 * c.clientWidth, d = -(l - 1) / 2 * c.clientHeight;
    let f = h, g = d - 34;
    if (this.lines.length === 1 && i.length === 2) {
      const p = (o[1] - o[0]) / (r[1] - r[0]), v = -((o[1] + o[0]) / 2 - 1) / 2 * c.clientHeight;
      Math.abs(p) > 0.4 && (f = h + 57, g = v);
    }
    return this.container.style.top = "0", this.container.style.left = "0", this.container.style.transform = `translate3d(${f}px, ${g}px, 0)`, this.show();
  }
  hide() {
    return this.visible = !1, this.masking.style.pointerEvents = "none", this.container.style.opacity = "0", this.container.style.pointerEvents = "none", this.unHover(), this;
  }
  show() {
    return this.visible = !0, this.masking.style.pointerEvents = "auto", this.container.style.opacity = "1", this.container.style.pointerEvents = "auto", this;
  }
}
function Xh(n, t) {
  const e = n.x - t[0].x, i = n.y - t[0].y, s = t[1].x - t[0].x, r = t[1].y - t[0].y, o = e * s + i * r, a = s * s + r * r, l = o / a;
  let c, h;
  return l < 0 || Z5(t[0], t[1]) ? (c = t[0].x, h = t[0].y) : l > 1 ? (c = t[1].x, h = t[1].y) : (c = t[0].x + l * s, h = t[0].y + l * r), new _t(c, h);
}
function Z5(n, t) {
  return n.x === t.x && n.y === t.y;
}
const cf = () => !1;
class Gn extends bl {
  constructor(e) {
    super(e);
    u(this, "type", "edit");
    u(this, "polyline");
    u(this, "area");
    u(this, "hasAppendDashed", !1);
    // private deleteDom: DeleteDom
    u(this, "fiveElement");
    /** 上一个端点位置 */
    u(this, "lastPoint", null);
    u(this, "pointSelector");
    u(this, "deleteDom");
    /** 根据 intersection 更新放大镜和吸附点 */
    u(this, "onIntersectionUpdate", ol((e) => {
      e && (this.currentMeasureType === "area" && typeof e.isAdsorbed == "boolean" && (e.isAdsorbed ? this.hook.emit("readyComplete") : this.hook.emit("notReadyComplete")), this.updateDashed());
    }, 20));
    /** 撤销编辑 */
    u(this, "revoke", () => {
      this.currentMeasureType === "area" ? this.revokeArea() : this.currentMeasureType === "line" && this.revokeLine();
    });
    /**
     * @description: 测面积的撤销功能
     */
    u(this, "revokeArea", () => {
      if (this.area.points.length !== 0) {
        if (this.area.popPoint(), this.hook.emit("pointsChange", this.area.points), this.area.points.length === 0) {
          this.lastPoint = null, this.hasAppendDashed = !1, this.dashed.remove(), this.five.needsRender = !0, this.hook.emit("revoke", { isEmpty: !0 });
          return;
        } else
          this.lastPoint = new wi(this.area.points[this.area.points.length - 1]), this.updateDashed();
        this.five.needsRender = !0;
      }
    });
    /**
     * @description: 测距的撤销功能
     */
    u(this, "revokeLine", (e) => {
      const i = e || this.polyline;
      if (i.lines.length === 0 && this.lastPoint) {
        this.lastPoint = null, this.hasAppendDashed = !1, this.pointSelector.setAdherePoints(null), this.dashed.remove(), this.hook.emit("anchorChange", null), this.hook.emit("editedDashedLineChange", null), this.five.needsRender = !0, this.hook.emit("pointsChange", []);
        return;
      }
      if (i.lines.length === 0 && !this.lastPoint || !this.lastPoint)
        return;
      const s = i.lines[i.lines.length - 1], r = s.findAnotherPoint(this.lastPoint);
      r && (this.lastPoint = r, this.hook.emit("anchorChange", r.position), this.group.remove(s.mesh), i.removeLine(s), s.distanceItem.remove(), this.updateDashed(), this.five.needsRender = !0);
    });
    u(this, "checkMouseLeave", (e) => {
      e || (this.dashed.hide(), this.perpendicularDashed.hide(), this.area.hideArea());
    });
    /** 编辑线条发生改变时通知外部 */
    u(this, "onLineChanged", () => {
      this.hook.emit("editedPolylineChange", this.polyline);
    });
    u(this, "onWantsSelect", () => {
      if (this.currentMeasureType === "area") {
        const e = this.area.polygon.isBlank || this.area.polygon.visible === !1;
        if (this.area.points.length >= 3 && e)
          return !1;
      }
    });
    u(this, "wantsMoveToPano", () => {
      if (this.lastPoint)
        return !1;
    });
    /**
     * 1. 如果存在上一个点，需要绘制当前点到上一个点的连线
     * 2. 把上一个点的位置更新为当前点的位置
     * 3. 清除 pointSelector
     */
    u(this, "onSelect", () => {
      var o, a, l, c;
      this.hasAppendDashed || (this.dashed.distanceItem.appendTo(this.container), this.group.add(this.dashed.mesh), this.currentMeasureType === "area" && this.group.add(this.perpendicularDashed.mesh)), this.hasAppendDashed = !0;
      const e = (() => {
        var h, d;
        if (this.currentMeasureType === "area")
          return this.area.projectPoint((h = this.pointSelector.position) == null ? void 0 : h.point);
        if (this.currentMeasureType === "line")
          return (d = this.pointSelector.position) == null ? void 0 : d.point;
      })();
      if (!e)
        return;
      const i = new wi(e), s = this.lastPoint;
      if (s != null && s.position && i.position.equals(s == null ? void 0 : s.position))
        return;
      this.lastPoint = i;
      const r = (h) => {
        if (!this.lastPoint)
          return [];
        const { intersection: d, pointSelectorInstance: f } = h, g = f.pointSelectorHelper.pointHelper, p = new P.Vector3(0, 0, 1).applyQuaternion(g.quaternion);
        if (p.x > 0.9999 || p.y > 0.9999 || p.z > 0.9999 || p.x < -0.9999 || p.y < -0.9999 || p.z < -0.9999) {
          const m = d.point, v = this.lastPoint.position.clone().sub(m);
          f.pointSelectorHelper.updateWithIntersect(d, { emitEvent: !1 });
          const b = new P.Line3(
            g.localToWorld(new P.Vector3(1, 0, 0)).add(v),
            g.localToWorld(new P.Vector3(-1, 0, 0)).add(v)
          ), w = new P.Line3(
            g.localToWorld(new P.Vector3(0, 1, 0)).add(v),
            g.localToWorld(new P.Vector3(0, -1, 0)).add(v)
          ), x = b.closestPointToPoint(m, !1, new P.Vector3()), k = w.closestPointToPoint(m, !1, new P.Vector3());
          return [x, k];
        }
        return [];
      };
      if (this.pointSelector.setAdherePoints(r), this.currentMeasureType === "line") {
        if (i && s) {
          const d = new xr(s, i, this.model);
          d.distanceItem.setCanSelect(!1), d.distanceItem.appendTo(this.container), this.polyline.addLine(d), this.group.add(d.mesh), d.distanceItem.update(this.five);
        }
        const h = (a = (o = this.editParams) == null ? void 0 : o.autoEndConfig) == null ? void 0 : a.line;
        typeof h == "number" && (this.polyline.getPointLength() >= h ? this.complete() : this.polyline.getPointLength() === h - 1 && this.hook.emit("readyComplete")), this.hook.emit("pointsChange", this.polyline.points);
      } else if (this.currentMeasureType === "area") {
        if (this.area.addPoints(i.position), this.area.isClosed) {
          this.complete();
          return;
        }
        this.area.points.length >= 3 && this.pointSelector.setAdherePoints((...d) => {
          var f;
          return [this.area.points[0], ...(f = r(...d)) != null ? f : []].filter(_e);
        });
        const h = (c = (l = this.editParams) == null ? void 0 : l.autoEndConfig) == null ? void 0 : c.area;
        typeof h == "number" && (this.area.points.length >= h ? this.complete() : this.area.points.length === h - 1 && this.hook.emit("readyComplete")), this.hook.emit("pointsChange", this.area.points);
      }
      this.updateDashed(), this.five.needsRender = !0, this.hook.emit("anchorChange", i.position);
    });
    /** 移动全景时更新 distanceItem 在屏幕上的位置 */
    u(this, "onCameraUpdate", () => {
      this.updateDistanceUI();
    });
    /** 更新虚线 */
    u(this, "updateDashed", () => {
      var s;
      if (!this.lastPoint)
        return;
      const e = this.lastPoint.position, i = (() => {
        var r, o;
        if (this.currentMeasureType === "area")
          return this.area.projectPoint((r = this.pointSelector.position) == null ? void 0 : r.point);
        if (this.currentMeasureType === "line")
          return (o = this.pointSelector.position) == null ? void 0 : o.point;
      })();
      if (!i) {
        this.dashed.hide();
        return;
      }
      if (this.dashed.show(), this.dashed.setPoints(e, i), this.dashed.distanceItem.update(this.five), this.hook.emit("editedDashedLineChange", this.dashed), this.currentMeasureType === "area")
        if (this.area.areaItem.setCanSelect(!1), this.area.points.length >= 2) {
          const r = (s = this.pointSelector.position) == null ? void 0 : s.point;
          if (r) {
            const h = r, d = i;
            this.perpendicularDashed.setPoints(h, d), this.perpendicularDashed.show();
          } else
            this.perpendicularDashed.hide();
          const o = this.area.polyline.lines.map((h) => ({ start: h.points[0].position, end: h.points[1].position })), a = Vc({ start: e, end: i }, o), l = Vc({ start: i, end: this.area.points[0] }, o);
          if (a || l)
            this.area.hideArea(), this.hook.emit("allowAddPointStateChange", "forbid");
          else {
            this.area.showArea();
            const h = [...this.area.points, i];
            this.area.polygon.updatePoints(h), this.area.areaItem.updateArea(this.five), this.hook.emit("allowAddPointStateChange", "allow");
          }
        } else
          this.area.hideArea(), this.perpendicularDashed.hide();
      this.five.needsRender = !0;
    });
    // ====================================================================================================================================
    // 下面一堆高亮相关
    u(this, "wantsTapGesture", (e) => {
      var m, v;
      if (this.editParams.pointSelectorMode === "cursor" || this.lastPoint)
        return !1;
      const i = this.model.areas.map((b) => e.intersectObject(b.polygon, !0)[0]).sort((b, w) => b.distance - w.distance), s = (v = (m = i[0]) == null ? void 0 : m.object) == null ? void 0 : v.parent;
      if (s != null && s.isPolygonMesh) {
        const b = this.model.areas.find((w) => w.polygon === s);
        if (b) {
          const { x: w, y: x } = i[0].point.clone().project(this.five.camera), k = `${(w + 1) / 2 * 100}%`, T = `${(-x + 1) / 2 * 100}%`;
          return this.chooseArea(b, { left: k, top: T }), !1;
        }
      }
      const [r] = Ci(this.five).intersectRaycaster(e);
      if (!r)
        return;
      const o = this.five.camera, a = r.point.clone().project(o), l = this.container.clientWidth, c = this.container.clientHeight, h = new _t(a.x * l, a.y * c), d = this.model.getAllLines().map((b) => {
        const [w, x] = b.points, k = w.position.clone().project(o), T = x.position.clone().project(o);
        if (!Ls(k) && !Ls(T))
          return null;
        const S = new _t(k.x * l, k.y * c), V = new _t(T.x * l, T.y * c);
        return { id: b.id, points: [S, V] };
      }).filter((b) => !!b);
      if (d.length === 0)
        return;
      const g = d.map((b) => {
        const w = Xh(h, b.points);
        return { id: b.id, distance: w.distanceTo(h) };
      }).sort((b, w) => b.distance - w.distance)[0];
      if (g.distance > 20)
        return;
      const p = this.model.getAllLines().find(({ id: b }) => b === g.id);
      if (p)
        return this.chooseLine(p), !1;
    });
    u(this, "chooseLine", (e) => {
      const i = e.getPolyline().lines;
      this.deleteDom.setTarget(i).setLines(i).updatePosition().show(), this.highlightLines(i), this.hook.emit("selectedChange", i);
    });
    u(this, "chooseArea", (e, i) => {
      this.deleteDom.setTarget(e).updatePosition(i.left, `calc(${i.top} - 1.5rem)`).show(), this.highlightArea(e);
    });
    u(this, "deleteArea", (e) => {
      this.unHighlightArea(e), e.dispose(), this.deleteDom.hide();
    });
    u(this, "deleteLine", (e) => {
      const i = e[0], s = this.model.getPolylineByLine(i);
      s && (this.model.removePolyline(s), s.lines.forEach((r) => this.removeLine(r)), this.deleteDom.setLines([]).hide());
    });
    this.fiveElement = this.five.getElement(), this.deleteDom = new Uh(this.five, {
      i18n: this.config.i18n,
      onClick: (i, s) => {
        var a;
        const r = s.type === "area", o = Array.isArray(s) && ((a = s[0]) == null ? void 0 : a.type) === "line";
        r && this.deleteArea(s), o && this.deleteLine(s);
      },
      cancel: (i) => {
        var o;
        this.deleteDom.hide();
        const s = i.type === "area", r = Array.isArray(i) && ((o = i[0]) == null ? void 0 : o.type) === "line";
        s && this.unHighlightArea(i), r && this.unHighlightLines(i);
      }
    }).appendTo(this.container), this.pointSelector = new al(this.five, de(_({}, this.pointSelectorConfig), {
      mode: this.editParams.pointSelectorMode,
      helper: _({ magnifierParams: this.magnifierParams, container: this.container }, this.pointSelectorConfig.helper)
    })), this.pointSelector.enable(), this.polyline = new Dr({ model: this.model }), this.area = new _c(void 0, {
      five: this.five,
      model: this.model,
      meshContainer: this.group,
      domContainer: this.container
    }), this.model.addPolyline(this.polyline), this.model.addArea(this.area), this.model.getAllLines().forEach((i) => {
      i.distanceItem.appendTo(this.container), i.distanceItem.update(this.five), i.distanceItem.setCanSelect(!0), i.hook.on("selected", this.chooseLine), this.group.add(i.mesh);
    }), this.model.getAllAreas().forEach((i) => {
      i.areaItem.appendTo(this.container), i.areaItem.updateDomPosition(this.five), i.areaItem.setCanSelect(!0), i.hook.on("selected", this.chooseArea), this.group.add(i.polygon), i.polyline.lines.forEach((s) => {
        s.distanceItem.appendTo(this.container), s.distanceItem.update(this.five), this.group.add(s.mesh);
      });
    }), this.five.on("cameraUpdate", this.onCameraUpdate), this.five.on("wantsTapGesture", this.wantsTapGesture), this.five.on("wantsMoveToPano", this.wantsMoveToPano), this.five.on("wantsChangeMode", cf), this.pointSelector.on("intersectionUpdate", this.onIntersectionUpdate), this.pointSelector.on("intersectionUpdate", this.checkMouseLeave), this.pointSelector.on("select", this.onSelect), this.pointSelector.on("wantsSelect", this.onWantsSelect), this.polyline.hook.on("lineAdded", this.onLineChanged), this.polyline.hook.on("lineRemoved", this.onLineChanged), this.five.helperVisible = !1, this.hook.emit("anchorChange", null), this.hook.emit("editedDashedLineChange", null), this.five.refresh();
  }
  dispose() {
    super.dispose(), this.model.areas.forEach((e) => {
      (e.points.length < 2 || e.polygon.isBlank) && this.model.removeArea(e);
    }), this.five.helperVisible = !0, this.pointSelector.disable(), this.dashed.remove(), this.perpendicularDashed.remove(), this.five.off("cameraUpdate", this.onCameraUpdate), this.five.off("wantsTapGesture", this.wantsTapGesture), this.five.off("wantsMoveToPano", this.wantsMoveToPano), this.five.off("wantsChangeMode", cf), this.pointSelector.off("intersectionUpdate", this.onIntersectionUpdate), this.pointSelector.off("intersectionUpdate", this.checkMouseLeave), this.pointSelector.off("select", this.onSelect), this.pointSelector.off("wantsSelect", this.onWantsSelect), this.polyline.hook.off("lineAdded", this.onLineChanged), this.polyline.hook.off("lineRemoved", this.onLineChanged), this.magnifier.dispose(), this.deleteDom.dispose(), this.dashed.distanceItem.remove(), this.five.needsRender = !0;
  }
  getEditingLines() {
    return this.polyline.lines;
  }
  selectPoint() {
    this.onSelect();
  }
  complete() {
    this.hook.emit("complete"), this.currentMeasureType === "area" ? (this.area.points.length < 3 ? this.deleteArea(this.area) : (this.area.showArea(), this.area.complete(), this.area.hook.on("selected", this.chooseArea)), this.area = new _c(void 0, { five: this.five, model: this.model, meshContainer: this.group, domContainer: this.container }), this.model.addArea(this.area)) : this.currentMeasureType === "line" && (this.polyline.lines.forEach((e) => {
      e.hook.on("selected", this.chooseLine), e.distanceItem.setCanSelect(!0);
    }), this.polyline = new Dr({ model: this.model }), this.model.addPolyline(this.polyline)), this.pointSelector.setAdherePoints(null), this.dashed.hide(), this.perpendicularDashed.hide(), this.lastPoint = void 0;
  }
  highlightArea(e) {
    this.highlightLines(e.polyline.lines), this.five.needsRender = !0;
  }
  unHighlightArea(e) {
    this.unHighlightLines(e.polyline.lines), this.five.needsRender = !0;
  }
  highlightLines(e) {
    e.forEach((i) => this.highlightLine(i));
  }
  unHighlightLines(e) {
    e.forEach((i) => {
      i.selected = !1, i.distanceItem.unHighlight(), this.group.remove(i.lightMesh), this.five.needsRender = !0;
    });
  }
  highlightLine(e) {
    this.unHighlightLines(this.model.getAllLines()), !e.selected && (e.selected = !0, this.group.add(e.lightMesh), e.distanceItem.highlight(), this.five.needsRender = !0);
  }
}
class hf extends bl {
  constructor(e) {
    super(e);
    u(this, "type", "view");
    u(this, "hammer");
    u(this, "polylineRemoved", (e) => {
      e.lines.forEach((i) => this.removeLine(i)), this.hook.emit(
        "selectedChange",
        this.model.getAllLines().filter((i) => i.selected).map((i) => i)
      );
    });
    u(this, "polylineAdded", (e) => {
      const { panoIndex: i, mode: s } = this.five.getCurrentState();
      e.lines.forEach((r) => {
        e.visibleFiveMode && !e.visibleFiveMode.includes(s) && (r.mesh.visible = !1), e.visiblePanoIndexes && !e.visiblePanoIndexes.includes(i) && (r.mesh.visible = !1), r.distanceItem.appendTo(this.container), r.distanceItem.update(this.five), this.group.add(r.mesh);
      }), this.updateDistanceUI();
    });
    u(this, "onCameraUpdate", () => {
      this.updateDistanceUI();
    });
    u(this, "onFiveModeChange", (e) => {
      e !== "Panorama" && (this.model.polylines.forEach((i) => {
        i.visibleFiveMode && !i.visibleFiveMode.includes(e) && i.lines.forEach((s) => {
          s.mesh.visible = !1, s.distanceItem.update(this.five);
        });
      }), this.five.ready().then(() => {
        const i = this.five.getCurrentState().mode;
        i !== "Panorama" && this.model.polylines.forEach((s) => {
          s.visibleFiveMode && s.visibleFiveMode.includes(i) && s.lines.forEach((r) => {
            r.mesh.visible = !0, r.distanceItem.update(this.five);
          });
        });
      }));
    });
    u(this, "onFivePanoWillArrive", (e) => {
      this.model.polylines.forEach((i) => {
        (i.visiblePanoIndexes && !i.visiblePanoIndexes.includes(e) || i.visibleFiveMode && !i.visibleFiveMode.includes(this.five.getCurrentState().mode)) && i.lines.forEach((s) => {
          s.mesh.visible = !1, s.distanceItem.update(this.five);
        });
      });
    });
    u(this, "onFivePanoArrived", (e) => {
      this.model.polylines.forEach((i) => {
        i.visiblePanoIndexes && i.visiblePanoIndexes.includes(e) && i.visibleFiveMode && i.visibleFiveMode.includes(this.five.getCurrentState().mode) && i.lines.forEach((s) => {
          s.mesh.visible = !0, s.distanceItem.update(this.five);
        });
      });
    });
    this.model.getAllLines().forEach((s) => {
      s.distanceItem.appendTo(this.container), s.distanceItem.update(this.five), this.group.add(s.mesh), s.mesh.updateMatrixWorld();
    });
    const i = this.five.getElement();
    if (i) {
      const s = new wo(i);
      this.hammer = s;
    }
    this.onFiveModeChange(this.five.getCurrentState().mode), this.onFivePanoWillArrive(this.five.getCurrentState().panoIndex), this.onFivePanoArrived(this.five.getCurrentState().panoIndex), this.updateDistanceUI(), this.five.needsRender = !0, this.model.hook.on("polylineAdded", this.polylineAdded), this.model.hook.on("polylineRemoved", this.polylineRemoved), this.five.on("cameraUpdate", this.onCameraUpdate), this.five.on("panoArrived", this.onFivePanoArrived), this.five.on("modeChange", this.onFiveModeChange), this.five.on("panoWillArrive", this.onFivePanoWillArrive);
  }
  dispose() {
    var e;
    super.dispose(), this.model.hook.off("polylineAdded", this.polylineAdded), this.model.hook.off("polylineRemoved", this.polylineRemoved), this.five.off("cameraUpdate", this.onCameraUpdate), this.five.off("panoArrived", this.onFivePanoArrived), this.five.off("modeChange", this.onFiveModeChange), this.five.off("panoWillArrive", this.onFivePanoWillArrive), this.five.needsRender = !0, this.hook.emit("selectedChange", []), (e = this.hammer) == null || e.destroy();
  }
}
function J5(n, t) {
  const e = (n.x + 1) / 2 * t.width, i = -(n.y - 1) / 2 * t.height;
  return new _t(e, i);
}
function q5(n, t, e, i) {
  const s = n.getElement();
  if (!s || t.length === 0)
    return null;
  const r = { width: s.clientWidth, height: s.clientHeight }, o = t.map((a) => {
    const l = a.position.clone().project(n.camera);
    return Ls(l) ? { distance: J5(l, r).distanceTo(e), point: a } : { distance: 1 / 0, point: a };
  }).sort((a, l) => a.distance - l.distance);
  return typeof i == "number" && o[0].distance > i ? null : o[0];
}
function df(n) {
  const { x: t, y: e } = n.center, { clientWidth: i, clientHeight: s } = n.target, r = n.target.getBoundingClientRect(), o = new _t(t, e).sub(new _t(r.left, r.top)), a = new _t(o.x / i * 2 - 1, -(o.y / s) * 2 + 1);
  return { point: o, ndcPoint: a };
}
const uf = () => !1;
class ff extends bl {
  constructor(e) {
    super(e);
    u(this, "type", "watch");
    u(this, "deleteDom");
    u(this, "choose");
    // tmd 真没时间改了，先这样吧，理解万岁
    u(this, "highlightedLines", []);
    u(this, "highlightedArea");
    u(this, "fiveElement");
    u(this, "editPointState");
    u(this, "hammer");
    u(this, "onPanStart", (e) => {
      var l;
      if (this.model.getAllLines().length === 0 || !this.fiveElement)
        return;
      const i = df(e).point, s = (l = q5(this.five, this.model.getAllPoints(), i, 20)) == null ? void 0 : l.point;
      if (!s) {
        this.editPointState = void 0;
        return;
      }
      const r = this.model.polylines.find((c) => c.includes(s)), o = {
        point: s,
        associatedLines: r.lines
      };
      this.hook.emit("wantsDragLine", {
        point: s.id,
        lines: o.associatedLines.map(({ id: c }) => c)
      }) || (this.editPointState = o, this.magnifier.appendTo(this.container), this.magnifier.enable(), this.group.add(this.mouseGroup));
    });
    u(this, "onPanEnd", () => {
      this.editPointState && (this.editPointState.associatedLines.forEach((e) => e.mesh.setMaterial({ dashed: !1 })), this.highlightLines(this.editPointState.associatedLines), this.editPointState = void 0, this.magnifier.disable(), this.group.remove(this.mouseGroup));
    });
    u(this, "onPan", (e) => {
      if (!this.editPointState || !this.fiveElement)
        return;
      const i = df(e).ndcPoint, s = new Or();
      s.setFromCamera(i, this.five.camera);
      const [r] = Ci(this.five).intersectRaycaster(s);
      r && this.onIntersectionUpdate(r);
    });
    u(this, "onIntersectionUpdate", (e, i) => {
      if (this.editPointState) {
        if (this.clearHighlightLines(), this.editPointState.point.position.copy(e.point), this.editPointState.associatedLines.forEach((s) => {
          s.mesh.setPoints(s.points[0].position.clone(), s.points[1].position.clone()), s.lightMesh.setPoints(s.points[0].position.clone(), s.points[1].position.clone()), s.mesh.setMaterial({ dashed: !0 });
        }), this.updateDistanceUI(), this.magnifier.renderWithPoint(e.point), this.mouseGroup.position.copy(e.point), i)
          this.mouseGroup.quaternion.copy(i.quaternion);
        else if (e.face) {
          const r = e.face.normal.clone().multiplyScalar(0.05), a = e.point.clone().add(r).clone().add(r);
          this.mouseGroup.lookAt(a);
        }
        this.five.needsRender = !0, this.hook.emit(
          "selectedChange",
          this.editPointState.associatedLines.map((s) => s)
        );
      }
    });
    u(this, "wantsPanGesture", () => {
      if (this.editPointState)
        return !1;
    });
    u(this, "wantsTapGesture", (e) => {
      var v;
      const i = this.model.areas.map((b) => e.intersectObject(b.polygon, !0)[0]).sort((b, w) => b.distance - w.distance), s = (v = i[0]) == null ? void 0 : v.object.parent;
      if (s instanceof G0) {
        const b = this.model.areas.find((w) => w.polygon === s);
        if (b) {
          const { x: w, y: x } = i[0].point.clone().project(this.five.camera), k = `${(w + 1) / 2 * 100}%`, T = `${(-x + 1) / 2 * 100}%`;
          return this.chooseArea(b, { left: k, top: T }), !1;
        }
      }
      const r = Ci(this.five), [o] = r.intersectRaycaster(e);
      if (!o)
        return;
      const a = this.five.camera, l = o.point.clone().project(a), c = this.container.clientWidth, h = this.container.clientHeight, d = new _t(l.x * c, l.y * h), f = this.model.getAllLines().map((b) => {
        const [w, x] = b.points, k = w.position.clone().project(a), T = x.position.clone().project(a);
        if (!Ls(k) && !Ls(T))
          return null;
        const S = new _t(k.x * c, k.y * h), V = new _t(T.x * c, T.y * h);
        return { id: b.id, points: [S, V] };
      }).filter((b) => !!b);
      if (f.length === 0)
        return;
      const p = f.map((b) => {
        const w = Xh(d, b.points);
        return { id: b.id, distance: w.distanceTo(d) };
      }).sort((b, w) => b.distance - w.distance)[0];
      if (p.distance > 20)
        return;
      const m = this.model.getAllLines().find(({ id: b }) => b === p.id);
      if (m)
        return this.chooseLine(m), !1;
    });
    u(this, "chooseLine", (e) => {
      this.choose = "line";
      const i = e.getPolyline().lines;
      this.deleteDom.setLines(i).updatePosition().show(), this.highlightLines(i), this.five.needsRender = !0, this.hook.emit(
        "selectedChange",
        i.map((s) => s)
      );
    });
    u(this, "chooseArea", (e, i) => {
      this.choose = e, this.deleteDom.updatePosition(i.left, `calc(${i.top} - 20px)`).show(), this.highlightArea(e);
    });
    u(this, "polylineRemoved", (e) => {
      e.lines.forEach((i) => this.removeLine(i)), this.hook.emit(
        "selectedChange",
        this.model.getAllLines().filter((i) => i.selected).map((i) => i)
      );
    });
    u(this, "onCameraUpdate", () => {
      this.updateDistanceUI(), this.highlightedLines.length > 0 && this.deleteDom.updatePosition();
    });
    u(this, "deleteArea", (e) => {
      this.unHighlightArea(e), e.dispose(), this.deleteDom.hide();
    });
    u(this, "deleteLine", () => {
      const e = this.highlightedLines[0], i = this.model.getPolylineByLine(e);
      i && (this.model.removePolyline(i), this.highlightedLines = [], this.deleteDom.setLines([]).hide());
    });
    u(this, "cancelDeleteClickCallback", () => {
      this.deleteDom.hide(), this.clearHighlightLines(), this.unHighlightArea();
    });
    this.deleteDom = new Uh(this.five, {
      i18n: this.config.i18n,
      onClick: () => {
        this.choose === "line" ? this.deleteLine() : this.choose instanceof _c && this.deleteArea(this.choose);
      },
      cancel: this.cancelDeleteClickCallback
    }).appendTo(this.container), this.model.getAllLines().forEach((s) => {
      s.distanceItem.appendTo(this.container), s.distanceItem.update(this.five), s.hook.on("selected", this.chooseLine), s.distanceItem.setCanSelect(!0), this.group.add(s.mesh);
    }), this.model.getAllAreas().forEach((s) => {
      s.areaItem.appendTo(this.container), s.areaItem.updateArea(this.five), s.hook.on("selected", this.chooseArea), s.areaItem.setCanSelect(!0), this.group.add(s.polygon), s.polyline.lines.forEach((r) => {
        r.distanceItem.appendTo(this.container), r.distanceItem.update(this.five), this.group.add(r.mesh);
      });
    });
    const i = this.five.getElement();
    if (i) {
      this.fiveElement = i;
      const s = new wo(i);
      this.hammer = s, s.on("pan", this.onPan), s.on("panstart", this.onPanStart), s.on("panend", this.onPanEnd);
    }
    this.updateDistanceUI(), this.five.needsRender = !0, this.five.on("cameraUpdate", this.onCameraUpdate), this.five.on("wantsTapGesture", this.wantsTapGesture), this.five.on("wantsPanGesture", this.wantsPanGesture), this.five.on("wantsChangeMode", uf), this.model.hook.on("polylineRemoved", this.polylineRemoved);
  }
  dispose() {
    var e;
    super.dispose(), this.deleteDom.dispose(), this.model.hook.off("polylineRemoved", this.polylineRemoved), this.model.getAllLines().forEach((i) => i.hook.off("selected", this.chooseLine)), this.five.off("cameraUpdate", this.onCameraUpdate), this.five.off("wantsPanGesture", this.wantsPanGesture), this.five.off("wantsTapGesture", this.wantsTapGesture), this.five.off("wantsChangeMode", uf), this.five.needsRender = !0, this.hook.emit("selectedChange", []), (e = this.hammer) == null || e.destroy();
  }
  highlightLine(e) {
    e.selected || (e.selected = !0, this.group.add(e.lightMesh), e.distanceItem.highlight(), this.five.needsRender = !0);
  }
  clearHighlightLines() {
    this.group.children.length !== 0 && (this.unHighlightLines(this.highlightedLines), this.highlightedLines = []);
  }
  highlightArea(e) {
    this.unHighlightLines(), this.unHighlightArea(), this.highlightLines(e.polyline.lines), this.five.needsRender = !0;
  }
  unHighlightArea(e) {
    const i = e != null ? e : this.highlightedArea;
    i && (this.unHighlightLines(i.polyline.lines), this.five.needsRender = !0);
  }
  highlightLines(e) {
    this.unHighlightLines(), this.highlightedLines = e, e.forEach((i) => this.highlightLine(i));
  }
  unHighlightLines(e) {
    this.unHighlightArea();
    const i = e != null ? e : this.highlightedLines;
    i && i.forEach((s) => {
      s.selected = !1, s.distanceItem.unHighlight(), this.group.remove(s.lightMesh), this.five.needsRender = !0;
    });
  }
}
class U0 {
  constructor(t) {
    u(this, "config");
    u(this, "polylines", []);
    u(this, "areas", []);
    u(this, "hook", new Pt());
    this.config = t;
  }
  addPolyline(t) {
    if (this.includes(t)) {
      console.error(new Error("不能重复添加 polyline"));
      return;
    }
    this.polylines.push(t), this.hook.emit("polylineAdded", t);
  }
  addArea(t) {
    if (this.areas.find(({ id: e }) => e === t.id) !== void 0) {
      console.error(new Error("不能重复添加 area"));
      return;
    }
    this.areas.push(t), this.hook.emit("areaAdded", t);
  }
  replacePolylineByID(t, e) {
    const i = this.getPolylineByID(t);
    i == null || i.replace(e);
  }
  removePolyline(t) {
    const e = this.polylines.findIndex(({ id: i }) => i === t.id);
    if (e === -1) {
      console.error(new Error("polyline 不存在"));
      return;
    }
    this.polylines.splice(e, 1), this.hook.emit("polylineRemoved", t);
  }
  removeArea(t) {
    const e = this.areas.findIndex(({ id: i }) => i === t.id);
    if (e === -1) {
      console.error(new Error("area 不存在"));
      return;
    }
    this.areas.splice(e, 1);
  }
  getPolylineByID(t) {
    return this.polylines.find((e) => e.id === t);
  }
  getPolylineByLine(t) {
    return this.polylines.find((e) => e.includes(t));
  }
  getLineByID(t) {
    return this.getAllLines().find((e) => e.id === t);
  }
  getAllLines() {
    return this.polylines.map((t) => t.lines).flat(1);
  }
  getAllAreas() {
    return this.areas;
  }
  getAllPoints() {
    return this.polylines.map((t) => t.points).flat(1);
  }
  includes(t) {
    return this.polylines.find(({ id: e }) => e === t.id) !== void 0;
  }
  clear() {
    this.polylines.forEach((t) => this.hook.emit("polylineRemoved", t)), this.areas.forEach((t) => t.dispose()), this.polylines.splice(0, this.polylines.length), this.areas.splice(0, this.areas.length);
  }
  dispose() {
    this.clear();
  }
  getClosestPoint() {
  }
  parse(t) {
    this.clear(), this.polylines.push(...t.polylines.map((e) => new Dr({ model: this }).fromJson(e))), this.polylines.forEach((e) => this.hook.emit("polylineAdded", e));
  }
  toJson() {
    return {
      polylines: this.polylines.map((t) => t.toJson()).filter((t) => t.lines.length > 0)
    };
  }
}
function K5() {
}
const $5 = "data:image/png;base64,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", eP = "data:image/png;base64,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", tP = `
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`, iP = `
varying vec2 vUv;
void main() {
  vec2 uv = vec2(vUv.x, vUv.y);
  float a = 1.0;
  float match = 1.0 - uv.x;
  gl_FragColor = vec4(1.0,1.0,1.0,match);
}
`;
function X0(n) {
  var b, w;
  const t = (b = n.isMobile) != null ? b : !0, e = (w = n.useNormalVector) != null ? w : !0;
  let i = 10349931;
  e && n.ballColor >= 0 && (i = n.ballColor);
  const s = new fn(), r = new Gv(0.3, 0.3), o = t ? $5 : eP, a = new rh().load(o);
  a.encoding = ro, a.minFilter = bc;
  const l = new bo({
    map: a,
    transparent: !0,
    depthTest: !1
  }), c = new fr(r, l), h = new Wv();
  h.add(new Qv(new fe(0, 0, 0), new fe(0, 0, 0.1)));
  const d = new Uv(h, 8, 3e-3), f = new cg({
    vertexShader: tP,
    fragmentShader: iP,
    depthTest: !1,
    transparent: !0
  }), g = new fr(d, f), p = new Xv(0.01, 20, 20), m = new bo({
    color: i,
    depthTest: !1,
    transparent: !0,
    side: hg
  }), v = new fr(p, m);
  return v.position.set(0, 0, 0.1), s.name = "mouse-current", s.add(c), e && s.add(g, v), s;
}
class nP {
  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility
  constructor(t) {
    u(this, "container", document.createElement("div"));
    u(this, "five");
    u(this, "group");
    u(this, "mouseGroup");
    u(this, "hasAppendMouseGroup", !1);
    u(this, "hook");
    u(this, "content");
    u(this, "intersectMesh");
    u(this, "centerMouseXY");
    u(this, "raycaster", new Or());
    u(this, "pieceStyl", {
      matrix3d: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
      scale: 1,
      opacity: 0.4
    });
    u(this, "onCameraDirectionUpdate", () => {
      const t = this.getIntersection();
      if (t) {
        this.pieceChange(t), this.updateMouseGroup(t);
        const e = new wi(this.mouseGroup.position);
        this.hook.emit("nowPointChange", e);
      }
    });
    u(this, "onWillChangeState", (t, e) => {
      var s;
      this.dotAnimation();
      const i = (s = this.getIntersection()) == null ? void 0 : s.point;
      i && (e === "editing" ? this.hook.emit("getStartPoint", new wi(i)) : this.hook.emit("getEndPoint", new wi(i)));
    });
    /** 计算目标中心点经纬度 */
    u(this, "computedCenterMouseXY", () => {
      const t = this.container.querySelector(".range-piece__aim");
      if (!t)
        return null;
      const { left: e, top: i, width: s, height: r } = t.getBoundingClientRect(), o = Math.round(e + s / 2), a = Math.round(i + r / 2), c = $g({ x: o, y: a }, this.five.getElement());
      this.centerMouseXY = c;
    });
    /** 计算目标中心点intersection */
    u(this, "getIntersection", () => {
      if (!this.centerMouseXY)
        return null;
      this.raycaster.setFromCamera(this.centerMouseXY, this.five.camera);
      const t = Ci(this.five).intersectRaycaster(this.raycaster)[0];
      return t || null;
    });
    this.five = t.five, this.hook = t.hook, this.group = t.group, this.mouseGroup = X0(_({ isMobile: !0 }, t.openParams.crossHairParameter)), this.container.innerHTML = sb, this.container.classList.add("range-piece-controller"), this.content = this.container.querySelector(".range-piece__content"), this.content && (this.content.style.transform = `matrix3d(${this.pieceStyl.matrix3d.toString()}) scale(${this.pieceStyl.scale})`, this.content.style.opacity = `${this.pieceStyl.opacity}`), t.container.append(this.container), this.intersectMesh = new fr(
      new Yv(0.04, 0.08, 32),
      new bo({ color: 1245179, opacity: 0, side: hg, transparent: !0 })
    ), this.container.addEventListener("animationend", this.computedCenterMouseXY), this.five.on("cameraUpdate", this.onCameraDirectionUpdate), this.hook.on("willChangeState", this.onWillChangeState);
  }
  dispose() {
    this.container.removeEventListener("animationend", this.computedCenterMouseXY), this.five.off("cameraUpdate", this.onCameraDirectionUpdate), this.hook.off("willChangeState", this.onWillChangeState), this.container.remove(), this.group.remove(this.mouseGroup), this.mouseGroup.remove(), this.hasAppendMouseGroup = !1, this.five.scene.remove(this.intersectMesh);
  }
  pieceChange(t) {
    const e = t.face, i = t.point;
    if (e && i) {
      const r = e.normal.clone().clone().multiplyScalar(0.05), o = i.clone().add(r);
      this.intersectMesh.position.copy(o);
      const a = o.clone().add(r);
      this.intersectMesh.lookAt(a), this.five.scene.add(this.intersectMesh);
      const l = this.intersectMesh.modelViewMatrix.clone().toArray();
      this.changePieceStyl("matrix3d", l);
      const c = this.calculateSize(i);
      this.changePieceStyl("scale", c);
    }
  }
  calculateSize(t) {
    if (!t)
      return;
    const e = this.five.camera.position;
    let i = t.distanceTo(e);
    const s = 4, r = 1;
    return i > s && (i = s), i < r && (i = r), -0.51 / (s - r) * i + 1;
  }
  /** 点击按钮时圆片动画 */
  dotAnimation() {
    const t = zd.Easing.Quadratic.InOut, e = { opacity: 0.4, scale: this.pieceStyl.scale }, i = { opacity: [1, 0.4], scale: [this.pieceStyl.scale * 0.8, this.pieceStyl.scale] };
    let s = K5;
    const r = new zd.Tween(e).to(i, 500).easing(t).start(0).onUpdate(({ opacity: o, scale: a }) => {
      this.changePieceStyl("scale", a), this.changePieceStyl("opacity", o);
    }).onComplete(() => {
      s();
    });
    s = jr((o) => {
      r.update(o);
    });
  }
  changePieceStyl(t, e) {
    this.content && (this.pieceStyl[t] = e, this.content.style.transform = `matrix3d(${this.pieceStyl.matrix3d.toString()}) scale(${this.pieceStyl.scale})`, this.content.style.opacity = `${this.pieceStyl.opacity}`);
  }
  updateMouseGroup(t, e) {
    if (!this.hasAppendMouseGroup) {
      this.group.add(this.mouseGroup), this.hasAppendMouseGroup = !0;
      const i = this.container.querySelector(".range-piece__aim");
      i && (i.style.opacity = "0");
    }
    if (!t)
      return this.mouseGroup;
    if (this.mouseGroup.position.copy(t.point), e)
      this.mouseGroup.quaternion.copy(e.quaternion);
    else if (t.face) {
      const s = t.face.normal.clone().multiplyScalar(0.05), o = t.point.clone().add(s).clone().add(s);
      this.mouseGroup.lookAt(o);
    }
    return this.mouseGroup;
  }
}
class to extends bl {
  constructor(e) {
    super(e);
    u(this, "state", "watching");
    u(this, "polyline");
    u(this, "hasAppendDashed", !1);
    u(this, "mobileStartPoint", null);
    u(this, "mobileNowPoint", null);
    u(this, "highlightedLines", []);
    u(this, "deleteDom");
    u(this, "rangePieceController");
    u(this, "disposers", []);
    u(this, "onWantsTapGesture", (e) => {
      if (this.state === "editing")
        return !1;
      const i = Ci(this.five), [s] = i.intersectRaycaster(e);
      if (!s)
        return;
      const r = this.five.camera, o = s.point.clone().project(r), a = this.container.clientWidth, l = this.container.clientHeight, c = new _t(o.x * a, o.y * l), h = this.model.getAllLines().map((p) => {
        const [m, v] = p.points, b = m.position.clone().project(r), w = v.position.clone().project(r);
        if (!Ls(b) && !Ls(w))
          return null;
        const x = new _t(b.x * a, b.y * l), k = new _t(w.x * a, w.y * l);
        return { id: p.id, points: [x, k] };
      }).filter((p) => !!p);
      if (h.length === 0)
        return;
      const f = h.map((p) => {
        const m = Xh(c, p.points);
        return { id: p.id, distance: m.distanceTo(c) };
      }).sort((p, m) => p.distance - m.distance)[0];
      if (f.distance > 20)
        return;
      const g = this.model.getAllLines().find(({ id: p }) => p === f.id);
      if (g)
        return this.chooseLine(g), !1;
    });
    /** 编辑时取消走点,watch时可以走 */
    u(this, "onWantsToMoveToPano", () => this.state === "watching");
    /** 移动全景时更新 distanceItem 在屏幕上的位置 */
    u(this, "onCameraUpdate", () => {
      this.updateDistanceUI(), this.dashed.distanceItem.update(this.five);
    });
    /** mobile态时更新虚线 */
    u(this, "updateMobileDashed", () => {
      !this.mobileStartPoint || !this.mobileNowPoint || (this.dashed.setPoints(this.mobileStartPoint.position, this.mobileNowPoint.position), this.dashed.distanceItem.update(this.five), this.hook.emit("editedDashedLineChange", this.dashed));
    });
    /** mobile态时更新放大镜 */
    u(this, "updateMagnifier", (e) => {
      this.magnifier.containerDom !== this.container && this.magnifier.appendTo(this.container), this.magnifier.state.enabled || this.magnifier.enable(), requestAnimationFrame(() => this.magnifier.renderWithPoint(e.position)), this.five.needsRender = !0;
    });
    u(this, "onGetStartPoint", (e) => {
      this.mobileStartPoint = e, this.polyline = new Dr({ model: this.model }), this.polyline.hook.on("lineAdded", () => this.hook.emit("editedPolylineChange", this.polyline)), this.polyline.hook.on("lineRemoved", () => this.hook.emit("editedPolylineChange", this.polyline));
    });
    u(this, "onGetEndPoint", () => {
      const e = this.mobileNowPoint;
      if (this.removeLine(this.dashed), this.hasAppendDashed = !1, this.mobileStartPoint && e) {
        const i = new xr(this.mobileStartPoint, e, this.model);
        this.polyline.addLine(i), i.distanceItem.appendTo(this.container), i.distanceItem.update(this.five), i.hook.on("selected", this.chooseLine), this.disposers.push(() => i.hook.off("selected", this.chooseLine)), this.group.add(i.mesh), this.model.addPolyline(this.polyline);
      }
      this.mobileStartPoint = null, this.mobileNowPoint = null, this.five.needsRender = !0;
    });
    u(this, "onNowPointChange", (e) => {
      if (this.state === "watching") {
        this.mobileNowPoint = e, this.updateMagnifier(e);
        return;
      }
      this.hasAppendDashed || (this.dashed.distanceItem.appendTo(this.container), this.group.add(this.dashed.mesh), this.hasAppendDashed = !0), this.five.needsRender = !0, this.mobileNowPoint = e, this.updateMobileDashed(), this.updateMagnifier(e), this.five.needsRender = !0;
    });
    u(this, "onWillChangeState", (e, i) => {
      this.state = i, this.state === "watching" ? this.five.helperVisible = !0 : this.five.helperVisible = !1;
    });
    u(this, "chooseLine", (e) => {
      const i = e.getPolyline().lines;
      this.highlightLines(i), this.five.needsRender = !0, this.hook.emit(
        "selectedChange",
        i.map((s) => s)
      );
    });
    u(this, "deleteDomClickCallback", () => {
      this.highlightedLines.forEach((e) => {
        this.removeLine(e);
        const i = this.model.getPolylineByLine(e);
        this.model.removePolyline(i);
      }), this.highlightedLines = [], this.deleteDom.setLines([]).hide();
    });
    u(this, "cancelDeleteClickCallback", () => {
      this.clearHighlightLines();
    });
    this.model = new U0(this.config), this.polyline = new Dr({ model: this.model }), this.rangePieceController = new nP(e), this.deleteDom = new Uh(this.five, {
      i18n: this.config.i18n,
      onClick: this.deleteDomClickCallback,
      cancel: this.cancelDeleteClickCallback
    }).appendTo(this.container), this.five.on("cameraUpdate", this.onCameraUpdate), this.five.on("wantsTapGesture", this.onWantsTapGesture), this.five.on("wantsToMoveToPano", this.onWantsToMoveToPano), this.five.helperVisible = !1, this.hook.emit("editedDashedLineChange", null), this.hook.on("getStartPoint", this.onGetStartPoint), this.hook.on("getEndPoint", this.onGetEndPoint), this.hook.on("nowPointChange", this.onNowPointChange), this.hook.on("willChangeState", this.onWillChangeState), this.five.refresh();
  }
  dispose() {
    super.dispose(), this.disposers.forEach((e) => e()), this.five.helperVisible = !0, this.rangePieceController.dispose(), this.group.remove(this.mouseGroup), this.dashed.remove(), this.perpendicularDashed.remove(), this.five.off("cameraUpdate", this.onCameraUpdate), this.five.off("wantsTapGesture", this.onWantsTapGesture), this.five.off("wantsToMoveToPano", this.onWantsToMoveToPano), this.hook.off("getStartPoint", this.onGetStartPoint), this.hook.off("getEndPoint", this.onGetEndPoint), this.hook.off("nowPointChange", this.onNowPointChange), this.hook.off("willChangeState", this.onWillChangeState), this.hook.emit("selectedChange", []), this.five.needsRender = !0;
  }
  highlightLine(e) {
    e.selected || (e.selected = !0, this.group.add(e.lightMesh), e.distanceItem.highlight(), this.five.needsRender = !0);
  }
  clearHighlightLines() {
    this.group.children.length !== 0 && (this.deleteDom.setLines([]).hide(), this.model.getAllLines().forEach((e) => {
      e.selected = !1, e.distanceItem.unHighlight(), this.group.remove(e.lightMesh);
    }), this.highlightedLines = [], this.five.needsRender = !0);
  }
  getEditingLines() {
    return this.model.polylines;
  }
  highlightLines(e) {
    this.clearHighlightLines(), this.highlightedLines = e, this.deleteDom.setLines(e).updatePosition().show(), e.forEach((i) => this.highlightLine(i));
  }
}
const qa = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxmaWx0ZXIgeD0iLTUuMyUiIHk9Ii01LjMlIiB3aWR0aD0iMTEwLjUlIiBoZWlnaHQ9IjExMC41JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0icHJlZml4X19hIj48ZmVPZmZzZXQgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSIvPjxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIi8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDEgMCAwIDAgMCAxIDAgMCAwIDAgMSAwIDAgMCAwLjUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiLz48L2ZpbHRlcj48ZmlsdGVyIHg9Ii0xMS40JSIgeT0iLTExLjQlIiB3aWR0aD0iMTIyLjklIiBoZWlnaHQ9IjEyMi45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0icHJlZml4X19jIj48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI0LjUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dCbHVySW5uZXIxIi8+PGZlT2Zmc2V0IGluPSJzaGFkb3dCbHVySW5uZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldElubmVyMSIvPjxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93T2Zmc2V0SW5uZXIxIiBpbjI9IlNvdXJjZUFscGhhIiBvcGVyYXRvcj0iYXJpdGhtZXRpYyIgazI9Ii0xIiBrMz0iMSIgcmVzdWx0PSJzaGFkb3dJbm5lcklubmVyMSIvPjxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAxIDAgMCAwIDAgMSAwIDAgMCAwIDEgMCAwIDAgMC4zIDAiIGluPSJzaGFkb3dJbm5lcklubmVyMSIvPjwvZmlsdGVyPjxmaWx0ZXIgeD0iLTEyNi42JSIgeT0iLTMzNy41JSIgd2lkdGg9IjM1My4xJSIgaGVpZ2h0PSI3NzUlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJwcmVmaXhfX2UiPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjE2IiBpbj0iU291cmNlR3JhcGhpYyIvPjwvZmlsdGVyPjxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMTAwJSIgeDI9IjUwJSIgeTI9IjAlIiBpZD0icHJlZml4X19kIj48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9Ii43IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjI2LjQzMiUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iODIuMzA1JSIvPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iLjQiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiIGlkPSJwcmVmaXhfX2YiPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iLjA1IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIuMiIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48Y2lyY2xlIGlkPSJwcmVmaXhfX2IiIGN4PSIzNiIgY3k9IjM2IiByPSIyOC40NDQiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48dXNlIGZpbGw9IiMwMDAiIGZpbHRlcj0idXJsKCNwcmVmaXhfX2EpIiB4bGluazpocmVmPSIjcHJlZml4X19iIi8+PHVzZSBmaWxsPSIjMDAwIiBmaWx0ZXI9InVybCgjcHJlZml4X19jKSIgeGxpbms6aHJlZj0iI3ByZWZpeF9fYiIvPjxjaXJjbGUgc3Ryb2tlPSJ1cmwoI3ByZWZpeF9fZCkiIHN0cm9rZS13aWR0aD0iLjQiIGZpbGwtb3BhY2l0eT0iLjI0MSIgZmlsbD0iI0ZGRiIgc3Ryb2tlLWxpbmVqb2luPSJzcXVhcmUiIGN4PSIzNiIgY3k9IjM2IiByPSIyOC4yNDQiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBvcGFjaXR5PSIuNTk2IiBmaWx0ZXI9InVybCgjcHJlZml4X19lKSIgY3g9IjM2IiBjeT0iMzYiIHJ4PSIxOC45NjMiIHJ5PSI3LjExMSIvPjxwYXRoIGQ9Ik0zNiAwQzE2LjExOCAwIDAgMTYuMTE4IDAgMzZzMTYuMTE4IDM2IDM2IDM2IDM2LTE2LjExOCAzNi0zNlM1NS44ODIgMCAzNiAwem0wIDQuNDQ0YzE3LjQyOCAwIDMxLjU1NiAxNC4xMjggMzEuNTU2IDMxLjU1NlM1My40MjggNjcuNTU2IDM2IDY3LjU1NiA0LjQ0NCA1My40MjggNC40NDQgMzYgMTguNTcyIDQuNDQ0IDM2IDQuNDQ0eiIgZmlsbD0idXJsKCNwcmVmaXhfX2YpIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+", Yh = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSIxNS41MSUiIHkxPSIxMi40OTclIiB4Mj0iODUuMjY1JSIgeTI9Ijg2LjE0MyUiIGlkPSJwcmVmaXhfX2IiPjxzdG9wIHN0b3AtY29sb3I9IiM5NUFFRkYiIG9mZnNldD0iMCUiLz48c3RvcCBzdG9wLWNvbG9yPSIjNjM4NkZGIiBvZmZzZXQ9IjEwMCUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMTAwJSIgeDI9IjUwJSIgeTI9IjAlIiBpZD0icHJlZml4X19hIj48c3RvcCBzdG9wLWNvbG9yPSIjOTlBRUZGIiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjI2LjQzMiUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iODIuMzA1JSIvPjxzdG9wIHN0b3AtY29sb3I9IiM5OUFFRkYiIHN0b3Atb3BhY2l0eT0iLjQiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiIGlkPSJwcmVmaXhfX2QiPjxzdG9wIHN0b3AtY29sb3I9IiM4Nzk3RDIiIHN0b3Atb3BhY2l0eT0iLjA1IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iIzYyNzdDNyIgc3RvcC1vcGFjaXR5PSIuMiIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48ZmlsdGVyIHg9Ii02My4zJSIgeT0iLTE2OC44JSIgd2lkdGg9IjIyNi42JSIgaGVpZ2h0PSI0MzcuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9InByZWZpeF9fYyI+PGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iOCIgaW49IlNvdXJjZUdyYXBoaWMiLz48L2ZpbHRlcj48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIHN0cm9rZT0idXJsKCNwcmVmaXhfX2EpIiBzdHJva2Utd2lkdGg9Ii40IiBmaWxsPSJ1cmwoI3ByZWZpeF9fYikiIG9wYWNpdHk9Ii43IiBjeD0iMzYiIGN5PSIzNiIgcj0iMjguMjQ0Ii8+PGVsbGlwc2UgZmlsbD0iIzdDOTBEQSIgb3BhY2l0eT0iLjU5NiIgZmlsdGVyPSJ1cmwoI3ByZWZpeF9fYykiIGN4PSIzNiIgY3k9IjM2IiByeD0iMTguOTYzIiByeT0iNy4xMTEiLz48cGF0aCBkPSJNMzYgMEMxNi4xMTggMCAwIDE2LjExOCAwIDM2czE2LjExOCAzNiAzNiAzNiAzNi0xNi4xMTggMzYtMzZTNTUuODgyIDAgMzYgMHptMCA0LjQ0NGMxNy40MjggMCAzMS41NTYgMTQuMTI4IDMxLjU1NiAzMS41NTZTNTMuNDI4IDY3LjU1NiAzNiA2Ny41NTYgNC40NDQgNTMuNDI4IDQuNDQ0IDM2IDE4LjU3MiA0LjQ0NCAzNiA0LjQ0NHoiIGZpbGw9InVybCgjcHJlZml4X19kKSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==", sP = `
  <svg class="fpm__exit-icon width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="86.3016741%" id="radialGradient-1">
        <stop stop-color="#FFFFFF" offset="0%"></stop>
        <stop stop-color="#FFFFFF" stop-opacity="0.3" offset="100%"></stop>
      </radialGradient>
      <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70.7106781%" id="radialGradient-2">
        <stop stop-color="#FFFFFF" offset="0%"></stop>
        <stop stop-color="#FFFFFF" stop-opacity="0" offset="100%"></stop>
      </radialGradient>
    </defs>
      <g fill="url(#radialGradient-1)" fill-rule="nonzero" stroke="url(#radialGradient-2)" stroke-width="0.2">
        <path d="M19.1859205,4.10000004 C19.3691554,4.09993923 19.5526088,4.16602323 19.6925352,4.29904206 C19.8171021,4.41745965 19.8858582,4.56899486 19.8980316,4.7239943 C19.9103475,4.88080848 19.8647874,5.04088037 19.7661957,5.16777131 L19.7661957,5.16777131 L14.3769795,11.1697063 C14.1649599,11.4058657 14.0589501,11.7029328 14.0589501,12 C14.0589501,12.2970672 14.1649599,12.5941343 14.3769795,12.8302937 L14.3769795,12.8302937 L19.6928862,18.7509889 C19.8173649,18.8694879 19.8860087,19.0210672 19.8980683,19.1760728 C19.9102693,19.3328965 19.8645908,19.4929392 19.7701664,19.6153111 C19.6099275,19.772809 19.4324896,19.8610254 19.2586274,19.8856752 C19.0810547,19.910851 18.9081905,19.8692156 18.765363,19.7704965 L18.765363,19.7704965 L11.9999322,13.2904645 L5.32508998,19.6962598 C5.16077108,19.8156635 4.99335965,19.8785989 4.83451361,19.8898888 C4.67442082,19.9012674 4.52389835,19.8596921 4.3968979,19.7731206 C4.23619359,19.588506 4.14871527,19.4164558 4.12392544,19.2589757 C4.09801173,19.094356 4.14341261,18.9485987 4.23380428,18.8322287 L4.23380428,18.8322287 L9.62302046,12.8302937 C9.81773049,12.6134147 9.92302682,12.3451662 9.93892926,12.0727274 C9.95499717,11.7974536 9.87975312,11.5179151 9.70614397,11.2737767 L9.70614397,11.2737767 L4.31595492,5.25860214 C4.17860663,5.08857057 4.11166276,4.9104714 4.11172409,4.7432513 C4.11178577,4.57506821 4.18051603,4.41972395 4.30746483,4.29904206 C4.43371817,4.17902131 4.59543385,4.11349344 4.76041858,4.10187732 L4.76041858,4.10187732 L12.0000677,10.7085251 L18.6794563,4.29937602 C18.8192839,4.16626546 19.0026873,4.10006086 19.1859205,4.10000004 Z" id="形状结合"></path>
      </g>
  </svg>
`, rP = `
  <style>
  .mobile .fpm__exit {
    position: absolute;
    top: 53px;
    left: 16px;
    width: 24px;
    height: 24px;
    z-index: 10;
    pointer-events: all;
  }
  .mobile .fpm__exit-icon {
    width: 100%;
    height: 100%;
    cursor: pointer;
  }
  .fpm_operating--mobile {
    padding-bottom: 23px;
  }
  .fpm__main-btn {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 !important;
  }
  .fpm__main-btn-text {
    position: absolute;
    font-weight: 500;
    font-size: 14px;
    color: #FFFFFF;
    text-align: center;
    text-shadow: 0 2px 8px rgba(0,0,0,0.50);
    transition: all 200ms ease-in-out;
  }
  .fpm__main-text__hide {
    transform: scale(0.8) translateY(4px);
    opacity: 0;
  }
  .fpm__main-text__show {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
  .fpm__main__start {
    background-image: url(${qa});
  }
  .fpm__main__end {
    background-image: url(${Yh});
  }

  </style>
  <div class="fpm__exit">
    ${sP}
  </div>
  <div class="fpm_ui-bg"></div>
  <div class="fpm_operating-space fpm_operating--mobile">
    <div class="fpm__main fpm__main-btn">
      <div class="fpm__main-icon fpm__main__start"></div>
      <div class="fpm__text fpm__main-text fpm__main-btn-text"></div>
    </div>
  </div>
`, oP = `
  <svg class="fpm__revoke-icon" width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient x1="47.631%" y1="55.183%" x2="2.967%" y2="86.323%" id="fpm__revoke-a">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".5" offset="100%" />
      </linearGradient>
      <linearGradient x1="5.297%" y1="43.016%" x2="38.238%" y2="79.932%" id="fpm__revoke-b">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity="0" offset="100%" />
      </linearGradient>
    </defs>
    <path
      d="M13.388 7.108c.552 0 1.005.42 1.06.957l.006.11v1.224c0 .921.745 1.667 1.666 1.667h7.184c5.804 0 10.509 4.616 10.509 10.309 0 5.595-4.544 10.15-10.21 10.305l-.3.004H8.924c-.917 0-1.66-.729-1.66-1.628 0-.846.658-1.541 1.5-1.62l.16-.008h14.38c3.972 0 7.191-3.158 7.191-7.053 0-3.81-3.08-6.916-6.933-7.049l-.257-.004H10.029l-.109-.005H8.212c-.245 0-.482-.085-.67-.237l-.09-.082a1.066 1.066 0 0 1-.065-1.422l.079-.086 5.175-5.077c.2-.195.468-.305.747-.305z"
      fill="url(#fpm__revoke-a)"
      fill-rule="nonzero"
      stroke="url(#fpm__revoke-b)"
      stroke-width=".5"
    />
  </svg>
`, aP = `
  <svg class="fpm__exit-icon width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient x1="36.288%" y1="73.736%" x2="54.242%" y2="97.166%" id="fpm__exit-a">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".5" offset="100%" />
      </linearGradient>
      <linearGradient x1="100%" y1="47.234%" x2="24.047%" y2="47.234%" id="fpm__exit-b">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".005" offset="99.535%" />
        <stop stop-color="#FFF" stop-opacity="0" offset="100%" />
      </linearGradient>
    </defs>
    <path
      d="M22 7a1.5 1.5 0 0 1 .144 2.993L22 10h-9a1.5 1.5 0 0 0-1.493 1.356l-.007.144v17a1.5 1.5 0 0 0 1.356 1.493L13 30h9a1.5 1.5 0 0 1 .144 2.993L22 33h-9a4.5 4.5 0 0 1-4.495-4.288L8.5 28.5v-17a4.5 4.5 0 0 1 4.288-4.495L13 7h9zm6.317 7.755a1 1 0 0 1 .7.286l4.856 4.764a1 1 0 0 1-.7 1.713h-5.856V21.5h-8.032a1.5 1.5 0 1 1 0-3h6.365c.92 0 1.666-.746 1.667-1.667v-1.078a1 1 0 0 1 1-1z"
      fill="url(#fpm__exit-a)"
      fill-rule="nonzero"
      stroke="url(#fpm__exit-b)"
      stroke-width=".5"
    />
  </svg>
`, lP = `
  <style>
    .fpm__other-btn {
      height: 40px;
      width: 88px;
      background: rgba(0, 0, 0, 0.15);
      border-radius: 20px;
      overflow: hidden;    
    }

    .fpm__other-content {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .fpm__revoke {
      opacity: 0.3;
    }  
    .fpm__revoke.enabled {
      opacity: 0.85;
    }    
    .fpm__revoke.enabled:hover {
      opacity: 1;
    }
    
    .fpm__revoke-icon {
      width: 24px;
      height: 24px;
      margin-right: 4px;
      cursor: pointer;
    }
    
    .fpm__main-btn {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .fpm__main-btn-text {
      position: absolute;
      font-weight: 500;
      font-size: 14px;
      color: #FFFFFF;
      text-align: center;
      text-shadow: 0 2px 8px rgba(0,0,0,0.50);
      transition: all 200ms ease-in-out;
    }
    .fpm__main-text__hide {
      transform: scale(0.8) translateY(4px);
      opacity: 0;
    }
    .fpm__main-text__show {
      transform: scale(1) translateY(0);
      opacity: 1;
    }
    .fpm__main__start {
      background-image: url(${qa});
    }
    .fpm__main__end {
      background-image: url(${Yh});
    }
    
  </style>
  <div class="fpm_ui-bg"></div>
  <div class="fpm_operating-space">
    <div class="fpm__other-btn">
      <div class="fpm__other-content fpm__revoke">
        ${oP}
        <span class="fpm__text fpm__revoke-text"></span>
      </div>
    </div>
    <div class="fpm__main fpm__main-btn">
      <div class="fpm__main-icon fpm__main__start"></div>
      <div class="fpm__text fpm__main-text fpm__main-btn-text"></div>
    </div>
    <div class="fpm__other-btn">
      <div class="fpm__other-content fpm__exit">
        ${aP}
        <span class="fpm__text fpm__exit-text"></span>
      </div>
    </div>
  </div>
`, cP = {
  display: "none",
  position: "absolute",
  top: "0",
  left: "0",
  width: "100%",
  height: "100%",
  opacity: "0",
  transform: "translate(0, 10px)",
  transition: "opacity 500ms ease-in-out, transform 500ms ease-in-out"
}, hP = {
  position: "absolute",
  left: "50%",
  bottom: "32px",
  transform: "translateX(-50%)",
  height: "89px",
  display: "flex",
  justifyContent: "space-between",
  alignItems: "center",
  fontSize: "14px",
  pointerEvents: "all",
  color: "#fff",
  zIndex: "10"
}, dP = {
  position: "absolute",
  bottom: "0",
  left: "0",
  opacity: "0.5",
  width: "100%",
  height: "184px",
  background: "linear-gradient(180deg, rgba(0,0,0,0.00) 0%, #000000 100%)",
  zIndex: "0"
}, Y0 = {
  margin: "0 64px"
}, uP = {
  opacity: "0.85"
}, Z0 = {
  width: "72px",
  height: "72px",
  backgroundSize: "100%",
  cursor: "pointer",
  transition: "all 200ms ease-in-out"
}, fP = {
  width: "24px",
  height: "24px",
  marginRight: "4px",
  backgroundSize: "100%",
  cursor: "pointer"
}, pP = {
  userSelect: "none",
  pointerEvents: "none"
};
class mP {
  constructor(t, e, i) {
    u(this, "container");
    u(this, "measureController");
    u(this, "mainElement");
    u(this, "_params");
    u(this, "_btnTexts", {
      start: "开始",
      end: "结束",
      revoke: "撤销",
      exit: "退出"
    });
    /* 鼠标移入时 */
    u(this, "onMouseEnter", () => {
      const { mainItem: t } = this.mainElement;
      t.style.opacity = "1";
    });
    /* 鼠标移出时 */
    u(this, "onMouseLeave", () => {
      const { mainItem: t } = this.mainElement;
      t.style.opacity = "0.85";
    });
    u(this, "onClick", () => {
      this.measureController.getCurrentMode() !== "Edit" ? this.measureController.changeMode("Edit") : this.measureController.save().changeMode("Watch");
    });
    u(this, "modeChangeHandler", (t) => {
      t === "Edit" ? this.change2Done() : this.change2Add();
    });
    var o, a, l, c;
    this._params = i, this._btnTexts = {
      start: (o = this._params.startButtonText) != null ? o : this._btnTexts.start,
      end: (a = this._params.endButtonText) != null ? a : this._btnTexts.end,
      revoke: (l = this._params.revokeButtonText) != null ? l : this._btnTexts.revoke,
      exit: (c = this._params.exitButtonText) != null ? c : this._btnTexts.exit
    }, this.measureController = t, this.container = e, this.mainElement = this.getMainElement(), Object.assign(this.mainElement.mainIcon.style, Z0), Object.assign(this.mainElement.mainItem.style, Y0);
    const { revokeTextDom: s, exitTextDom: r } = this._getTextElement();
    s && (s.innerText = this._btnTexts.revoke), r && (r.innerText = this._btnTexts.exit), this.change2Add(), this.measureController.hook.on("modeChange", this.modeChangeHandler), this.mainElement.mainItem.addEventListener("click", this.onClick), this.mainElement.mainItem.addEventListener("mouseenter", this.onMouseEnter), this.mainElement.mainItem.addEventListener("mouseleave", this.onMouseLeave);
  }
  dispose() {
    this.measureController.hook.off("modeChange", this.modeChangeHandler), this.mainElement.mainItem.removeEventListener("click", this.onClick), this.mainElement.mainItem.removeEventListener("mouseenter", this.onMouseEnter), this.mainElement.mainItem.removeEventListener("mouseleave", this.onMouseLeave);
  }
  getMainElement() {
    const t = this.container.querySelector(".fpm__main-text"), e = this.container.querySelector(".fpm__main"), i = this.container.querySelector(".fpm__main-icon");
    if (!e || !t || !i)
      throw new Error("cannot find dom");
    return { mainTextDom: t, mainItem: e, mainIcon: i };
  }
  _getTextElement() {
    const t = this.container.querySelector(".fpm__revoke-text"), e = this.container.querySelector(".fpm__exit-text");
    return { revokeTextDom: t, exitTextDom: e };
  }
  change2Add() {
    const { mainIcon: t, mainTextDom: e } = this.mainElement;
    if (t.className.includes("fpm__main__start")) {
      e.innerText = this._btnTexts.start;
      return;
    }
    t.className.includes("fpm__main__end") && (t.style.transform = "scale(0.8)", e.className.includes("fpm__main-text__show") ? e.classList.replace("fpm__main-text__show", "fpm__main-text__hide") : e.classList.add("fpm__main-text__hide"), setTimeout(() => {
      t.classList.replace("fpm__main__end", "fpm__main__start"), t.style.transform = "scale(1)", e.innerText = this._btnTexts.start, e.classList.replace("fpm__main-text__hide", "fpm__main-text__show");
    }, 200));
  }
  change2Done() {
    const { mainTextDom: t, mainIcon: e } = this.getMainElement();
    t.innerText !== this._btnTexts.end && (e.className.includes("fpm__main__end") || e.className.includes("fpm__main__start") && (e.style.transform = "scale(0.8)", t.className.includes("fpm__main-text__show") ? t.classList.replace("fpm__main-text__show", "fpm__main-text__hide") : t.classList.add("fpm__main-text__hide"), setTimeout(() => {
      e.classList.replace("fpm__main__start", "fpm__main__end"), e.style.transform = "scale(1)", t.innerText = this._btnTexts.end, t.classList.replace("fpm__main-text__hide", "fpm__main-text__show");
    }, 200)));
  }
}
class gP {
  constructor(t, e, i) {
    u(this, "container");
    u(this, "measureController");
    u(this, "mainElement");
    u(this, "_params");
    u(this, "_btnTexts", {
      start: "开始",
      end: "结束"
    });
    u(this, "onClick", () => {
      var t;
      this.mainElement.mainTextDom.innerText === ((t = this._params.startButtonText) != null ? t : "开始") ? (this.measureController.hook.emit("willChangeState", "watching", "editing"), this.change2Done()) : (this.measureController.hook.emit("willChangeState", "editing", "watching"), this.change2Add());
    });
    var s, r;
    this._params = i, this._btnTexts = {
      start: (s = this._params.startButtonText) != null ? s : this._btnTexts.start,
      end: (r = this._params.endButtonText) != null ? r : this._btnTexts.end
    }, this.measureController = t, this.container = e, this.mainElement = this.getMainElement(), this.mainElement.mainIcon.setAttribute("style", "-webkit-tap-highlight-color: rgba(0,0,0,0);"), Object.assign(this.mainElement.mainIcon.style, Z0), Object.assign(this.mainElement.mainItem.style, Y0), this.change2Add(), this.mainElement.mainItem.addEventListener("click", this.onClick);
  }
  dispose() {
    this.mainElement.mainItem.removeEventListener("click", this.onClick);
  }
  getMainElement() {
    const t = this.container.querySelector(".fpm__main-text"), e = this.container.querySelector(".fpm__main"), i = this.container.querySelector(".fpm__main-icon");
    if (!e || !t || !i)
      throw new Error("cannot find dom");
    return { mainTextDom: t, mainItem: e, mainIcon: i };
  }
  change2Add() {
    const { mainIcon: t, mainTextDom: e } = this.mainElement;
    if (t.className.includes("fpm__main__start")) {
      e.innerText = this._btnTexts.start;
      return;
    }
    t.className.includes("fpm__main__end") && (t.style.transform = "scale(0.8)", e.className.includes("fpm__main-text__show") ? e.classList.replace("fpm__main-text__show", "fpm__main-text__hide") : e.classList.add("fpm__main-text__hide"), setTimeout(() => {
      t.classList.replace("fpm__main__end", "fpm__main__start"), t.style.transform = "scale(1)", e.innerText = this._btnTexts.start, e.classList.replace("fpm__main-text__hide", "fpm__main-text__show");
    }, 200));
  }
  change2Done() {
    const { mainTextDom: t, mainIcon: e } = this.mainElement;
    t.innerText !== this._btnTexts.end && (e.className.includes("fpm__main__end") || e.className.includes("fpm__main__start") && (e.style.transform = "scale(0.8)", t.className.includes("fpm__main-text__show") ? t.classList.replace("fpm__main-text__show", "fpm__main-text__hide") : t.classList.add("fpm__main-text__hide"), setTimeout(() => {
      e.classList.replace("fpm__main__start", "fpm__main__end"), e.style.transform = "scale(1)", t.innerText = this._btnTexts.end, t.classList.replace("fpm__main-text__hide", "fpm__main-text__show");
    }, 200)));
  }
}
class vP {
  constructor(t, e) {
    u(this, "container");
    u(this, "revokeIcon");
    u(this, "revokeItem");
    u(this, "measureController");
    u(this, "onClick", () => {
      this.measureController.revoke();
    });
    u(this, "onModeChange", (t) => {
      if (t !== "Edit" && this.revokeItem.className.includes("enabled")) {
        this.revokeItem.classList.remove("enabled"), this.measureController.hook.off("anchorChange", this.onAnchorChange);
        return;
      }
      this.measureController.hook.on("anchorChange", this.onAnchorChange);
    });
    u(this, "onAnchorChange", (t) => {
      t && this.revokeItem.classList.add("enabled");
    });
    this.measureController = t, this.container = e;
    const i = this.container.querySelector(".fpm__revoke-icon"), s = this.container.querySelector(".fpm__revoke");
    if (!i || !s)
      throw new Error("不正确的选择器");
    this.revokeIcon = i, this.revokeItem = s, this.revokeItem.addEventListener("click", this.onClick), t.hook.on("modeChange", this.onModeChange);
  }
  dispose() {
    this.revokeItem.removeEventListener("click", this.onClick), this.measureController.hook.off("modeChange", this.onModeChange);
  }
}
function AP(n) {
  De(n, "svelte-1v1ixi2", '.Switcher.svelte-1v1ixi2.svelte-1v1ixi2{position:relative;box-sizing:border-box;width:-moz-max-content;width:max-content}.Switcher.svelte-1v1ixi2 .content.svelte-1v1ixi2,.Switcher.svelte-1v1ixi2 .active-slider.svelte-1v1ixi2{transition-property:transform, width, opacity;transition-duration:300ms;transition-timing-function:ease-out}.Switcher-bg.svelte-1v1ixi2.svelte-1v1ixi2{content:"";position:absolute;box-sizing:border-box;top:50%;left:0;width:100%;height:3.75rem;transform:translateY(-50%);border-style:solid;border-width:0rem 1.875rem;-o-border-image:url("data:image/png;base64,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");border-image:url("data:image/png;base64,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");border-image-slice:0 90 fill}.Switcher-buttons.svelte-1v1ixi2.svelte-1v1ixi2{display:flex;align-items:center;box-sizing:border-box;padding:0 0.1875rem;height:100%}.Switcher-buttons.has-divider.svelte-1v1ixi2 .button.svelte-1v1ixi2:not(:last-child)::after{content:"";position:absolute;right:0;top:10%;height:80%;width:0.0625rem;background-image:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.3), transparent);background-size:100%;background-repeat:no-repeat;background-position:center}.active-slider.svelte-1v1ixi2.svelte-1v1ixi2{box-sizing:border-box;position:absolute;height:3.25rem;top:50%;transform:translate(0, -50%);border-style:solid;border-width:0rem 1.875rem;-o-border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXQAAACcCAMAAABY3aA6AAAAhFBMVEX///////8AAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////88i7DIAAAALHRSTlNmawBvc3d6BAcZDid8NwyFja/XEhYkHTErIS41gpajnUyRVEE7XKpiRczDuH1q6FcAAA1mSURBVHja7Ndtk5owFAXg2KKtiiUdlTdBYH1Z//8vbC4SjkmuDlpmOht7AWfdLyaPZw4ovo06PzydcZX+Eh3QP99gXvsCRkbvsX91s/B29A41/rch9mOjq09twUl6TbNRM/d4aH9rmsWVfkDmx0XX4ORN1HGcZdlWzdLbod2pTcYx8St5Dc/7jIiOjGtw4lbSaZ4nSbJTs/J0aG9qi3meKn+i1/AM+/joWlyBk3eaJ7tj/RlEsiyr/fm3t3PeV2Upo+CzPu6SPFXyBM+4j4oO8k6cwI+nUFbdihopI49HyqbLVSXD05HgO3ejZsZDR5OrkHfiCnxWns9VKaNQzczzCa+vaiJZVudzOVPwnbuKO9RHRidyCnkrLqQCb6I73FNvhtsdyTcKXorWneIO9jHRf1zJ5/F2ma9O0X5fEriXzvfHgi/3++i0ypfbeA72EdF78jS5TKtW/J20efvWvZpekvRJdjH49rneEHld7CsZhhx44Pm48OQuq31RE/tmPfhJRgwzBzlC7mhPA2/hsTXYI+5gH/YgI4aWebZM6qhqil4c4P5ac/o0lntRVlGdLLOhHSMGxnyZH6Y9Od8n3z0fvm069qaaHvLlwLCLQTfQbbr7LEuD3NUOPD9c+1v2qCw/d+n2GvbX0RFzahbd5ZZ4z+190G/xLXfd7apjdNhfQof5PEtXk1K65AB3ZmJfX2bshbP47TDsspys0mwO9RfQ1YPiYh1v80PRFA656327dPui40uczsIxVurhDnYFdci38XqBh8cn0anOqVo+JMXcJg8c7W7V7sq/UNCZvOjDtmfYKezygyoGxf4celvnVC1N1Mdci2M099eSfWVu8cGu3fuwRw1VTFvsT6Kjzo+hLBBzM+Tv4+3g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");border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXQAAACcCAMAAABY3aA6AAAAhFBMVEX///////8AAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////88i7DIAAAALHRSTlNmawBvc3d6BAcZDid8NwyFja/XEhYkHTErIS41gpajnUyRVEE7XKpiRczDuH1q6FcAAA1mSURBVHja7Ndtk5owFAXg2KKtiiUdlTdBYH1Z//8vbC4SjkmuDlpmOht7AWfdLyaPZw4ovo06PzydcZX+Eh3QP99gXvsCRkbvsX91s/B29A41/rch9mOjq09twUl6TbNRM/d4aH9rmsWVfkDmx0XX4ORN1HGcZdlWzdLbod2pTcYx8St5Dc/7jIiOjGtw4lbSaZ4nSbJTs/J0aG9qi3meKn+i1/AM+/joWlyBk3eaJ7tj/RlEsiyr/fm3t3PeV2Upo+CzPu6SPFXyBM+4j4oO8k6cwI+nUFbdihopI49HyqbLVSXD05HgO3ejZsZDR5OrkHfiCnxWns9VKaNQzczzCa+vaiJZVudzOVPwnbuKO9RHRidyCnkrLqQCb6I73FNvhtsdyTcKXorWneIO9jHRf1zJ5/F2ma9O0X5fEriXzvfHgi/3++i0ypfbeA72EdF78jS5TKtW/J20efvWvZpekvRJdjH49rneEHld7CsZhhx44Pm48OQuq31RE/tmPfhJRgwzBzlC7mhPA2/hsTXYI+5gH/YgI4aWebZM6qhqil4c4P5ac/o0lntRVlGdLLOhHSMGxnyZH6Y9Od8n3z0fvm069qaaHvLlwLCLQTfQbbr7LEuD3NUOPD9c+1v2qCw/d+n2GvbX0RFzahbd5ZZ4z+190G/xLXfd7apjdNhfQof5PEtXk1K65AB3ZmJfX2bshbP47TDsspys0mwO9RfQ1YPiYh1v80PRFA656327dPui40uczsIxVurhDnYFdci38XqBh8cn0anOqVo+JMXcJg8c7W7V7sq/UNCZvOjDtmfYKezygyoGxf4celvnVC1N1Mdci2M099eSfWVu8cGu3fuwRw1VTFvsT6Kjzo+hLBBzM+Tv4+3g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");border-image-slice:0 90 fill}.button.svelte-1v1ixi2.svelte-1v1ixi2{height:3.5rem;display:flex;position:relative;cursor:pointer;align-items:center;justify-content:center;pointer-events:all;width:7.25rem}.button.svelte-1v1ixi2 .content.svelte-1v1ixi2{position:absolute;display:flex;align-items:center;font-size:1rem;color:#fff;text-shadow:0 0.125rem 0.5rem rgba(0, 0, 0, 0.5);font-weight:bold}.button.svelte-1v1ixi2 .content .icon.svelte-1v1ixi2{display:inline-block;width:1.15625rem;height:1.15625rem;background-repeat:no-repeat;background-size:100%;margin-right:0.125rem}.button.svelte-1v1ixi2:not(.active) .content.svelte-1v1ixi2{opacity:0.65;transform:scale(0.875)}.button.svelte-1v1ixi2:not(.active) .content.svelte-1v1ixi2:hover{opacity:0.85}.button.active.svelte-1v1ixi2 .content.svelte-1v1ixi2{opacity:1;transform:scale(1)}');
}
function pf(n, t, e) {
  const i = n.slice();
  return i[13] = t[e], i[14] = t, i[15] = e, i;
}
function mf(n) {
  let t;
  return {
    c() {
      t = W("div"), y(t, "class", "active-slider svelte-1v1ixi2"), Q(
        t,
        "width",
        /*activeButtonWidth*/
        n[6] + "px"
      ), Q(t, "transform", `translate(${/*activeButtonLeft*/
      n[7]}px, -50%)`);
    },
    m(e, i) {
      X(e, t, i);
    },
    p(e, i) {
      i & /*activeButtonWidth*/
      64 && Q(
        t,
        "width",
        /*activeButtonWidth*/
        e[6] + "px"
      ), i & /*activeButtonLeft*/
      128 && Q(t, "transform", `translate(${/*activeButtonLeft*/
      e[7]}px, -50%)`);
    },
    d(e) {
      e && U(t);
    }
  };
}
function gf(n) {
  let t;
  return {
    c() {
      t = W("span"), y(t, "class", "icon svelte-1v1ixi2"), Q(t, "background-image", `url(${/*option*/
      n[13].icon})`);
    },
    m(e, i) {
      X(e, t, i);
    },
    p(e, i) {
      i & /*options*/
      1 && Q(t, "background-image", `url(${/*option*/
      e[13].icon})`);
    },
    d(e) {
      e && U(t);
    }
  };
}
function vf(n) {
  let t, e, i, s = (
    /*option*/
    n[13].value + ""
  ), r, o, a = (
    /*index*/
    n[15]
  ), l, c, h = (
    /*option*/
    n[13].icon && gf(n)
  );
  const d = () => (
    /*div1_binding*/
    n[10](t, a)
  ), f = () => (
    /*div1_binding*/
    n[10](null, a)
  );
  function g() {
    return (
      /*click_handler*/
      n[11](
        /*option*/
        n[13],
        /*index*/
        n[15]
      )
    );
  }
  return {
    c() {
      t = W("div"), e = W("div"), h && h.c(), i = oe(), r = je(s), o = oe(), y(e, "class", "content svelte-1v1ixi2"), y(t, "class", "button svelte-1v1ixi2"), ye(
        t,
        "active",
        /*activeIndex*/
        n[4] === /*index*/
        n[15]
      );
    },
    m(p, m) {
      X(p, t, m), R(t, e), h && h.m(e, null), R(e, i), R(e, r), R(t, o), d(), l || (c = Oe(t, "click", g), l = !0);
    },
    p(p, m) {
      n = p, /*option*/
      n[13].icon ? h ? h.p(n, m) : (h = gf(n), h.c(), h.m(e, i)) : h && (h.d(1), h = null), m & /*options*/
      1 && s !== (s = /*option*/
      n[13].value + "") && He(r, s), a !== /*index*/
      n[15] && (f(), a = /*index*/
      n[15], d()), m & /*activeIndex*/
      16 && ye(
        t,
        "active",
        /*activeIndex*/
        n[4] === /*index*/
        n[15]
      );
    },
    d(p) {
      p && U(t), h && h.d(), f(), l = !1, c();
    }
  };
}
function bP(n) {
  let t, e, i, s, r, o = (
    /*activeButton*/
    n[5] && mf(n)
  ), a = (
    /*options*/
    n[0]
  ), l = [];
  for (let c = 0; c < a.length; c += 1)
    l[c] = vf(pf(n, a, c));
  return {
    c() {
      t = W("div"), e = W("div"), i = oe(), o && o.c(), s = oe(), r = W("div");
      for (let c = 0; c < l.length; c += 1)
        l[c].c();
      y(e, "class", "Switcher-bg svelte-1v1ixi2"), y(r, "class", "Switcher-buttons svelte-1v1ixi2"), ye(r, "has-divider", !/*activeButton*/
      n[5]), y(t, "class", "Switcher svelte-1v1ixi2");
    },
    m(c, h) {
      X(c, t, h), R(t, e), R(t, i), o && o.m(t, null), R(t, s), R(t, r);
      for (let d = 0; d < l.length; d += 1)
        l[d] && l[d].m(r, null);
      n[12](t);
    },
    p(c, [h]) {
      if (/*activeButton*/
      c[5] ? o ? o.p(c, h) : (o = mf(c), o.c(), o.m(t, s)) : o && (o.d(1), o = null), h & /*elementList, activeIndex, onChange, options*/
      23) {
        a = /*options*/
        c[0];
        let d;
        for (d = 0; d < a.length; d += 1) {
          const f = pf(c, a, d);
          l[d] ? l[d].p(f, h) : (l[d] = vf(f), l[d].c(), l[d].m(r, null));
        }
        for (; d < l.length; d += 1)
          l[d].d(1);
        l.length = a.length;
      }
      h & /*activeButton*/
      32 && ye(r, "has-divider", !/*activeButton*/
      c[5]);
    },
    i: se,
    o: se,
    d(c) {
      c && U(t), o && o.d(), pi(l, c), n[12](null);
    }
  };
}
function yP(n, t, e) {
  let i;
  const r = (v) => {
    e(4, h = v);
  };
  let { options: o } = t, { onChange: a } = t;
  const l = [];
  let c, h = null, d, f;
  function g(v, b) {
    Ze[v ? "unshift" : "push"](() => {
      l[b] = v, e(2, l);
    });
  }
  const p = (v, b) => {
    a(v.key), e(4, h = b);
  };
  function m(v) {
    Ze[v ? "unshift" : "push"](() => {
      c = v, e(3, c);
    });
  }
  return n.$$set = (v) => {
    "options" in v && e(0, o = v.options), "onChange" in v && e(1, a = v.onChange);
  }, n.$$.update = () => {
    n.$$.dirty & /*elementList, activeIndex*/
    20 && e(5, i = l[h]), n.$$.dirty & /*activeButton, container*/
    40 && i && c && setTimeout(
      () => {
        e(6, d = i.clientWidth), e(7, f = i.getBoundingClientRect().left - c.getBoundingClientRect().left);
      },
      0
    );
  }, [
    o,
    a,
    l,
    c,
    h,
    i,
    d,
    f,
    null,
    r,
    g,
    p,
    m
  ];
}
class wP extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      yP,
      bP,
      Pe,
      {
        defaultIndex: 8,
        setIndex: 9,
        options: 0,
        onChange: 1
      },
      AP
    );
  }
  get defaultIndex() {
    return this.$$.ctx[8];
  }
  get setIndex() {
    return this.$$.ctx[9];
  }
}
function PP(n) {
  De(n, "svelte-1m0stw", ".exit.svelte-1m0stw{position:relative;pointer-events:all;cursor:pointer;left:1.5rem;top:1.5rem;width:1.5rem;height:1.5rem;background-image:url(data:image/png;base64,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);background-repeat:no-repeat;background-size:100% 100%}");
}
function CP(n) {
  let t, e, i;
  return {
    c() {
      t = W("div"), y(t, "class", "exit svelte-1m0stw");
    },
    m(s, r) {
      X(s, t, r), e || (i = Oe(t, "click", function() {
        Ri(
          /*onClick*/
          n[0]
        ) && n[0].apply(this, arguments);
      }), e = !0);
    },
    p(s, [r]) {
      n = s;
    },
    i: se,
    o: se,
    d(s) {
      s && U(t), e = !1, i();
    }
  };
}
function IP(n, t, e) {
  let { onClick: i = null } = t;
  return n.$$set = (s) => {
    "onClick" in s && e(0, i = s.onClick);
  }, [i];
}
class J0 extends Ie {
  constructor(t) {
    super(), Ce(this, t, IP, CP, Pe, { onClick: 0 }, PP);
  }
}
const q0 = "data:image/png;base64,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", K0 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAAFO0lEQVR4Ae2YWYgdRRSG78SFOG6Ju4MxIRnRgCCKBlSC24P64IO4h7wI6oMPCioqAX1TfFIQRFFBETQmIioqGhDBh3GJiMSAZnABNSIuUQTFbcz4fZcup297b9+t7525wznwU11d1aervj6nurprtbAgEASCQBAIAkEgCASBIBAEgkAQCAJBIAgEgSAQBIJAEMgIzM7OLkHL0STaJ8DMgRkDyDK0CX2MptEUOrMbSGPddB6VvkAwUo5Hd6OzCuP+hfr5Y2NjvxbON60uaXp2hE8CZ3+GfzJ6ABXhOLND0VoPOrF9O+k0Kn2AM85Y16M70UTJuL8taWtoWjSAgHMYM7sQ3YyWN8yysbKZ9NrdeKp1bVGsQcBxvbkUXYsOaD3d2jbabgXQ3yV9GppGPoKA43pyDboclb3G36T9rm7g0L82soAAY/S7CG9E56GybHiLduH4BuvKRhIQcIyUi5BwTmsz47dpvwftadOvafPIAQLOUmZiSl2JVjed1dzJ7Rzei74iembnTnd+NFKAgHMIU7seXYKObTPN92kXzue9wtH/yAACjkBuQecgN3tltoNGN4rTwNlb1rFd20gAAs4JTOR2dAYqe407351IOB/2C0dnlQBiAm7vZ6oYkIPKG77XUd+E1iDvU2bTND6I3qtqLH0BYvDuWP3uORHNUHeAOxlcRx+C9C01/F1MhzvQUahsj6OfT9HDaKoqODot2zvY3tIYvOuAi+W5SD++Xf5BU+h1BvklZc+G/+u4+AbkwtxunF/QRzivcl/HUJn1E0GTjMKNmtGin7+QKeD30AQTfI1ye7dPk+uMFFPqMtRuvaFLzQfxOKocjs57ApRNwrfKDPKJ+YSV9Z/RKcj2lfR9BUi/cdzW6GsU3o98U3Uytq/p9wR6serIwWfdevoflA3mh8yHGzBfpYJK5U8cuz5dhW5k4isoS40+ptJDaD3qBM439HsKbR0UHHzXegLkhdhnaBcyrfJwhKSMGtPuAnQbAM6mbGq0HU3DI+h01Akc/+c8owYJB/9tFz/7NDUmZUqtRFegVehP5OSU64jlfpkOp/wRbUNbmNQflHXDzyoO7kMnIX16rWr18L6nbTN6FD+m9EDNAfVsGaRJHAjpOGTEJDgJViqX0WakvYu2ot3oVHQT0odRJxT7C1Y/RUtwHgNOx/90ik66qfcFyBvlIG2gOoGMjgTFMg/sQOoHo++QQFynjC7BJjjpWq/LQ3LNM62GBod79Z5iXpwsg7SWul/YQiqmW4qINPmD6OM5zUU+QbQs9vUhzgsc7tsyz23r2Ah3J/kJegE5mXFkOjVbvNMC7v7JaHMd8ZzST/4a6/MGh3vXU8GybxMS9hGOfOJG0jFIAGnylk7edpXOm1qpzWPb7Ge0mYrPoaGmFff7zxxEZZZB2oFD00RIRyAhJSh5MHkoAhFOeit5vQvyFvTksBZk7vU/qxSQ3jNIH2R3cqPoh+bvKEVMiqJ8tKSo8TLXIdPqWfT0fMLh/tWlmM6SMam9pFsRkgt3ihRhGS3FiHLT6X7JfY475KG8yrlXS6s8gtKdCpCu5ryR5Os8H0H5NDNyhGNaPc/1Kd2ozp8NDJBTKkDawKkjkZFkeuVBOY49yMh5eaHAYSyDSTEdJytAcuF2n2TqmF5pD5Tg+B9pQUQOY6ubgxyKsSYZNf4GEdJqJJylyA/Pl9AbCw0OY6o/RcuhGJB8IMJZh1Ygf4u8g3YBx5QLk4DRhMaRC3NYEAgCQSAIBIEgEASCQBAIAkEgCASBIBAEgkAQCAJBYJEQ+BdpRqKi3IjqNwAAAABJRU5ErkJggg==", Af = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAMAAAAADbN2wMAAABi0lEQVRoBe2Yu20DMRBEdW7EuVLX4NQVuAEVoUhFuAFV4FQ1OHWuRkzNABRwMLhDfbhcBhyA0IEjnvYNjjxoN5upmcBMYCYQmcCifjyl9AL/E+Md4xXjjHHCOC7L8ofPcJkAufgvVPhWqPIHc7sRIJiwJSZfKp7f5zz9cCkAPjZKNV+tbeYpAD7zSjVfrW3mKQBuWKWar9Y28xQATxsl7PNkHgJqYUtPARzxQzxtLG1h7KMhZIL5KP3/HkgonMVf9Y2LA45UzneXBChVkxPfw/tY+WEQdwOw6JEgHgIYCeJhgFEgngIYAeJpgGiIJgCREM0AoiCaAkRANAfoDeEC0BPCDaAXhCtADwh3AG+ILgCeEN0AvCC6AnhAdAdoDRECICB+4bEmtmzOGNU2ZhgAirP+2dFaS7YxVVdifROX69wIOODmTN6SbGOGArDiDFF7Esw2ZjhAjr3WpjT9UQC4YZVMfxSAWhvT9EcBUG1MnkL0i6ptnuIij0mjjVl9D3jUMu85E5gJzARuT+ACS7KuMQ7rOEcAAAAASUVORK5CYII=", bf = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAMAAAAADbN2wMAAAByElEQVRoBe1ZMU4DMRC8Q7yCJjVNKCh4ARVfAPo0PCYNPeQLVLyAggIa6jQ8g2NGsiJjeUfHrdGd0K60Sm7t3R3P+hx503UhwUAwEAzMyUCvkg/DcITxa+gldAXdQ5+hu77vv/DZTKbmMheQAt4D4XkF5Stsm1aL8OQiw5aQ+Rp4zqed461kci5VgUegO22F0BnnA9W+qcVQFeCeX4qYWNQC+MIuRUwsxwIhTxu1hV4w/ib8fzN0hskXwoFYqqIqsIMHT5uafML4XhuYaGMsxqwJMRBLVcyXmLOzs/ku8ybzTDhkthZfiWUNzSuxxbP8zVEV6HjOQx8KdNw2rcEzBWP+2JLMTQwctEQuwHJakj0WMHc1ogJRAScDsYWcBLrdowJuCp0BogJOAt3uUQE3hc4AUQEngW73/10BXimhtwVNvIDLq2gxf+wjYzL2QZg7XWsPtvKLCSQ5Wq1FXsCfoK2ulsRxBT2BliLbmGoLqXYfE/EC3koYqwae8WUbU1UgWoutyoM4KyuW2kJ7y2kGu4nF01rcVnpGk9aWTrq8eVbGad5alO2+MvuIZ9XGlLnMl5hJ01HK02ixfzGNICemBAPBQDDwhwx8A43PdoQvgLfYAAAAAElFTkSuQmCC";
function EP(n) {
  De(n, "svelte-468fdd", '*.forbid.svelte-468fdd.svelte-468fdd{pointer-events:none !important;opacity:0.5}.Measure-Controller.svelte-468fdd.svelte-468fdd{pointer-events:none;position:relative;width:100%;height:100%;z-index:2}.Measure-Controller.svelte-468fdd .mode-switcher.svelte-468fdd{margin-top:2.25rem}.Measure-Controller.svelte-468fdd .bottom.svelte-468fdd{position:absolute;width:100%;bottom:0}.Measure-Controller.svelte-468fdd .bottom .mask.svelte-468fdd{position:absolute;bottom:0;width:100%;height:11.5rem;background-size:100%;background-image:linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.3))}.Measure-Controller.svelte-468fdd .bottom .center.svelte-468fdd{display:flex;flex-direction:column;align-items:center;margin-bottom:2.5rem}.Measure-Controller.svelte-468fdd .buttons.svelte-468fdd{pointer-events:all;display:flex;align-items:center;height:2.5rem;background:rgba(0, 0, 0, 0.2);color:rgba(255, 255, 255, 0.85);width:-moz-max-content;width:max-content;border-radius:624.9375rem;overflow:hidden}.Measure-Controller.svelte-468fdd .buttons .button.svelte-468fdd{cursor:pointer;display:flex;align-items:center;position:relative;font-size:0.875rem;padding:0rem 1rem}.Measure-Controller.svelte-468fdd .buttons .button .icon.svelte-468fdd{width:1.5rem;height:1.5rem;background-repeat:no-repeat;background-size:100%;margin-right:0.25rem}.Measure-Controller.svelte-468fdd .buttons .button.svelte-468fdd::after{content:"";position:absolute;display:block;right:-0.03125rem;height:1.5rem;width:0.0625rem;background-image:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.3), transparent);background-size:100%;background-repeat:no-repeat;background-position:center}.Measure-Controller.svelte-468fdd .buttons .button.svelte-468fdd:last-child::after{display:none}');
}
function yf(n) {
  let t, e;
  return t = new J0({
    props: {
      onClick: (
        /*measureController*/
        n[0].disable
      )
    }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*measureController*/
      1 && (r.onClick = /*measureController*/
      i[0].disable), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function wf(n) {
  let t, e, i, s, r = (
    /*i18n*/
    n[2]("撤销") + ""
  ), o, a, l, c, h, d = (
    /*i18n*/
    n[2]("结束") + ""
  ), f, g, p;
  return {
    c() {
      t = W("div"), e = W("div"), i = W("div"), s = oe(), o = je(r), a = oe(), l = W("div"), c = W("div"), h = oe(), f = je(d), y(i, "class", "icon svelte-468fdd"), Q(i, "background-image", `url(${q0})`), y(e, "class", "button svelte-468fdd"), ye(e, "forbid", !/*canRevoke*/
      n[3]), y(c, "class", "icon svelte-468fdd"), Q(c, "background-image", `url(${K0})`), y(l, "class", "button svelte-468fdd"), y(t, "class", "buttons svelte-468fdd");
    },
    m(m, v) {
      X(m, t, v), R(t, e), R(e, i), R(e, s), R(e, o), R(t, a), R(t, l), R(l, c), R(l, h), R(l, f), g || (p = [
        Oe(
          e,
          "click",
          /*click_handler*/
          n[7]
        ),
        Oe(
          l,
          "click",
          /*complete*/
          n[6]
        )
      ], g = !0);
    },
    p(m, v) {
      v & /*i18n*/
      4 && r !== (r = /*i18n*/
      m[2]("撤销") + "") && He(o, r), v & /*canRevoke*/
      8 && ye(e, "forbid", !/*canRevoke*/
      m[3]), v & /*i18n*/
      4 && d !== (d = /*i18n*/
      m[2]("结束") + "") && He(f, d);
    },
    d(m) {
      m && U(t), g = !1, vt(p);
    }
  };
}
function MP(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f = (
    /*showExit*/
    n[1] && yf(n)
  ), g = (
    /*showController*/
    n[5] && wf(n)
  );
  function p(v) {
    n[9](v);
  }
  let m = {
    options: [
      {
        key: "line",
        value: (
          /*i18n*/
          n[2]("测距离")
        ),
        icon: Af
      },
      {
        key: "area",
        value: (
          /*i18n*/
          n[2]("测面积")
        ),
        icon: bf
      }
    ],
    onChange: (
      /*func*/
      n[8]
    )
  };
  return (
    /*setSwitcherActiveIndex*/
    n[4] !== void 0 && (m.setIndex = /*setSwitcherActiveIndex*/
    n[4]), c = new wP({ props: m }), Ze.push(() => gl(c, "setIndex", p)), {
      c() {
        t = W("div"), f && f.c(), e = oe(), i = W("div"), s = W("div"), r = oe(), o = W("div"), g && g.c(), a = oe(), l = W("div"), ve(c.$$.fragment), y(s, "class", "mask svelte-468fdd"), y(l, "class", "mode-switcher svelte-468fdd"), y(o, "class", "center svelte-468fdd"), y(i, "class", "bottom svelte-468fdd"), y(t, "class", "Measure-Controller svelte-468fdd");
      },
      m(v, b) {
        X(v, t, b), f && f.m(t, null), R(t, e), R(t, i), R(i, s), R(i, r), R(i, o), g && g.m(o, null), R(o, a), R(o, l), me(c, l, null), d = !0;
      },
      p(v, [b]) {
        /*showExit*/
        v[1] ? f ? (f.p(v, b), b & /*showExit*/
        2 && F(f, 1)) : (f = yf(v), f.c(), F(f, 1), f.m(t, e)) : f && (Me(), Y(f, 1, 1, () => {
          f = null;
        }), ke()), /*showController*/
        v[5] ? g ? g.p(v, b) : (g = wf(v), g.c(), g.m(o, a)) : g && (g.d(1), g = null);
        const w = {};
        b & /*i18n*/
        4 && (w.options = [
          {
            key: "line",
            value: (
              /*i18n*/
              v[2]("测距离")
            ),
            icon: Af
          },
          {
            key: "area",
            value: (
              /*i18n*/
              v[2]("测面积")
            ),
            icon: bf
          }
        ]), b & /*measureController*/
        1 && (w.onChange = /*func*/
        v[8]), !h && b & /*setSwitcherActiveIndex*/
        16 && (h = !0, w.setIndex = /*setSwitcherActiveIndex*/
        v[4], ml(() => h = !1)), c.$set(w);
      },
      i(v) {
        d || (F(f), F(c.$$.fragment, v), d = !0);
      },
      o(v) {
        Y(f), Y(c.$$.fragment, v), d = !1;
      },
      d(v) {
        v && U(t), f && f.d(), g && g.d(), ge(c);
      }
    }
  );
}
function kP(n, t, e) {
  let { measureController: i } = t, { showExit: s = !1 } = t, { i18n: r = (v) => v } = t, o = !1, a;
  function l(v) {
    v === "Edit" ? e(5, f = !0) : (a(null), e(5, f = !1));
  }
  function c() {
    i.controller instanceof Gn && i.controller.complete(), i.save({ mode: "Watch" });
  }
  function h(v) {
    e(3, o = v.length > 0);
  }
  function d() {
    e(3, o = !1);
  }
  Ot(() => {
    i.hook.on("modeChange", l), i.hook.on("complete", d), i.hook.on("pointsChange", h);
  }), oi(() => {
    i.hook.off("modeChange", l), i.hook.off("complete", d), i.hook.off("pointsChange", h);
  });
  let f = !1;
  const g = () => i.revoke(), p = (v) => {
    i.save().changeMode("Edit"), i.changeMeasureType(v);
  };
  function m(v) {
    a = v, e(4, a);
  }
  return n.$$set = (v) => {
    "measureController" in v && e(0, i = v.measureController), "showExit" in v && e(1, s = v.showExit), "i18n" in v && e(2, r = v.i18n);
  }, [
    i,
    s,
    r,
    o,
    a,
    f,
    c,
    g,
    p,
    m
  ];
}
class xP extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      kP,
      MP,
      Pe,
      {
        measureController: 0,
        showExit: 1,
        i18n: 2
      },
      EP
    );
  }
}
function DP(n) {
  De(n, "svelte-1mfj5mk", '.Switcher.svelte-1mfj5mk.svelte-1mfj5mk{pointer-events:all;position:relative;margin-bottom:1.5rem;box-sizing:border-box;width:-moz-max-content;width:max-content}.Switcher.svelte-1mfj5mk .svelte-1mfj5mk{transition-duration:300ms;transition-timing-function:ease-out}.Switcher.svelte-1mfj5mk .content.svelte-1mfj5mk{transition-property:opacity}.Switcher.svelte-1mfj5mk .highlight.svelte-1mfj5mk{transition-property:width}.Switcher.svelte-1mfj5mk .Switcher-buttons.svelte-1mfj5mk{transition-property:transform}.Switcher.svelte-1mfj5mk .Switcher-buttons.svelte-1mfj5mk{position:absolute;top:50%;left:0;transform:translate(0, -50%);width:-moz-max-content;width:max-content}.Switcher.svelte-1mfj5mk .Switcher-buttons .button.svelte-1mfj5mk{display:inline-block;margin:0 0.5625rem}.Switcher.svelte-1mfj5mk .highlight.svelte-1mfj5mk{height:2rem;background:rgba(0, 0, 0, 0.3);border-radius:624.9375rem}.Switcher.svelte-1mfj5mk .content.svelte-1mfj5mk{position:relative;padding:0 0.75rem}.Switcher.svelte-1mfj5mk .button:not(.active) .content.svelte-1mfj5mk::before{content:"";position:absolute;top:50%;left:10%;width:80%;transform:translateY(-50%);height:0;box-shadow:0 0 0.9375rem 0.3125rem rgba(0, 0, 0, 0.3)}');
}
function Pf(n, t, e) {
  const i = n.slice();
  return i[13] = t[e], i[14] = t, i[15] = e, i;
}
function Cf(n) {
  let t;
  return {
    c() {
      t = W("span"), y(t, "class", "icon svelte-1mfj5mk"), Q(
        t,
        "background-image",
        /*option*/
        n[13].icon
      );
    },
    m(e, i) {
      X(e, t, i);
    },
    p(e, i) {
      i & /*options*/
      1 && Q(
        t,
        "background-image",
        /*option*/
        e[13].icon
      );
    },
    d(e) {
      e && U(t);
    }
  };
}
function If(n) {
  let t, e, i, s = (
    /*option*/
    n[13].value + ""
  ), r, o, a = (
    /*index*/
    n[15]
  ), l, c, h = (
    /*option*/
    n[13].icon && Cf(n)
  );
  const d = () => (
    /*div1_binding*/
    n[9](t, a)
  ), f = () => (
    /*div1_binding*/
    n[9](null, a)
  );
  function g() {
    return (
      /*click_handler*/
      n[10](
        /*option*/
        n[13],
        /*index*/
        n[15]
      )
    );
  }
  return {
    c() {
      t = W("div"), e = W("div"), h && h.c(), i = oe(), r = je(s), o = oe(), y(e, "class", "content svelte-1mfj5mk"), y(t, "class", "button svelte-1mfj5mk"), ye(
        t,
        "active",
        /*activeIndex*/
        n[4] === /*index*/
        n[15]
      );
    },
    m(p, m) {
      X(p, t, m), R(t, e), h && h.m(e, null), R(e, i), R(e, r), R(t, o), d(), l || (c = Oe(t, "click", g), l = !0);
    },
    p(p, m) {
      n = p, /*option*/
      n[13].icon ? h ? h.p(n, m) : (h = Cf(n), h.c(), h.m(e, i)) : h && (h.d(1), h = null), m & /*options*/
      1 && s !== (s = /*option*/
      n[13].value + "") && He(r, s), a !== /*index*/
      n[15] && (f(), a = /*index*/
      n[15], d()), m & /*activeIndex*/
      16 && ye(
        t,
        "active",
        /*activeIndex*/
        n[4] === /*index*/
        n[15]
      );
    },
    d(p) {
      p && U(t), h && h.d(), f(), l = !1, c();
    }
  };
}
function SP(n) {
  let t, e, i, s, r = (
    /*options*/
    n[0]
  ), o = [];
  for (let a = 0; a < r.length; a += 1)
    o[a] = If(Pf(n, r, a));
  return {
    c() {
      t = W("div"), e = W("div"), i = oe(), s = W("div");
      for (let a = 0; a < o.length; a += 1)
        o[a].c();
      y(e, "class", "highlight svelte-1mfj5mk"), Q(
        e,
        "width",
        /*activeButtonWidth*/
        n[5] ? `${/*activeButtonWidth*/
        n[5]}px` : void 0
      ), y(s, "class", "Switcher-buttons svelte-1mfj5mk"), Q(s, "transform", `translate(${/*activeButtonLeft*/
      n[6]}px, -50%)`), y(t, "class", "Switcher svelte-1mfj5mk");
    },
    m(a, l) {
      X(a, t, l), R(t, e), R(t, i), R(t, s);
      for (let c = 0; c < o.length; c += 1)
        o[c] && o[c].m(s, null);
      n[11](t);
    },
    p(a, [l]) {
      if (l & /*activeButtonWidth*/
      32 && Q(
        e,
        "width",
        /*activeButtonWidth*/
        a[5] ? `${/*activeButtonWidth*/
        a[5]}px` : void 0
      ), l & /*elementList, activeIndex, onChange, options*/
      23) {
        r = /*options*/
        a[0];
        let c;
        for (c = 0; c < r.length; c += 1) {
          const h = Pf(a, r, c);
          o[c] ? o[c].p(h, l) : (o[c] = If(h), o[c].c(), o[c].m(s, null));
        }
        for (; c < o.length; c += 1)
          o[c].d(1);
        o.length = r.length;
      }
      l & /*activeButtonLeft*/
      64 && Q(s, "transform", `translate(${/*activeButtonLeft*/
      a[6]}px, -50%)`);
    },
    i: se,
    o: se,
    d(a) {
      a && U(t), pi(o, a), n[11](null);
    }
  };
}
function TP(n, t, e) {
  let i, s, { options: r } = t, { defaultKey: o = null } = t, { onChange: a } = t;
  const l = [];
  let c, h, d = 0;
  function f() {
    if (s && c) {
      e(5, h = s.clientWidth);
      const v = d + c.getBoundingClientRect().left - s.getBoundingClientRect().left;
      e(6, d = v);
    }
  }
  function g(v, b) {
    Ze[v ? "unshift" : "push"](() => {
      l[b] = v, e(2, l);
    });
  }
  const p = (v, b) => {
    a(v.key), e(4, i = b);
  };
  function m(v) {
    Ze[v ? "unshift" : "push"](() => {
      c = v, e(3, c);
    });
  }
  return n.$$set = (v) => {
    "options" in v && e(0, r = v.options), "defaultKey" in v && e(7, o = v.defaultKey), "onChange" in v && e(1, a = v.onChange);
  }, n.$$.update = () => {
    n.$$.dirty & /*defaultKey, options*/
    129 && e(4, i = o ? r.findIndex((v) => v.key === o) : 0), n.$$.dirty & /*elementList, activeIndex*/
    20 && e(8, s = l[i]), n.$$.dirty & /*activeButton, container*/
    264 && s && c && setTimeout(() => f(), 0);
  }, [
    r,
    a,
    l,
    c,
    i,
    h,
    d,
    o,
    s,
    g,
    p,
    m
  ];
}
class LP extends Ie {
  constructor(t) {
    super(), Ce(this, t, TP, SP, Pe, { options: 0, defaultKey: 7, onChange: 1 }, DP);
  }
}
function zP(n) {
  De(n, "svelte-82ysdl", ".CircleButton.svelte-82ysdl.svelte-82ysdl{position:relative;display:flex;justify-content:center;align-items:center;width:4.5rem;height:4.5rem;background-image:inherit;background-size:100% auto;background-repeat:no-repeat;transition:transform 200ms ease-in-out}.CircleButton.svelte-82ysdl.svelte-82ysdl:active{transform:scale(0.8)}.CircleButton.svelte-82ysdl .text.svelte-82ysdl{position:absolute}");
}
function Ef(n) {
  let t, e, i, s;
  return {
    c() {
      t = W("div"), e = je(
        /*text*/
        n[0]
      ), y(t, "class", "text svelte-82ysdl");
    },
    m(r, o) {
      X(r, t, o), R(t, e), s = !0;
    },
    p(r, o) {
      (!s || o & /*text*/
      1) && He(
        e,
        /*text*/
        r[0]
      );
    },
    i(r) {
      s || (mt(() => {
        s && (i || (i = Ii(t, zt, { duration: 300 }, !0)), i.run(1));
      }), s = !0);
    },
    o(r) {
      i || (i = Ii(t, zt, { duration: 300 }, !1)), i.run(0), s = !1;
    },
    d(r) {
      r && U(t), r && i && i.end();
    }
  };
}
function OP(n) {
  let t, e = (
    /*text*/
    n[0]
  ), i, s, r, o = Ef(n);
  return {
    c() {
      t = W("div"), o.c(), y(t, "class", "CircleButton svelte-82ysdl"), Q(t, "background-image", `url(${/*bgImage*/
      n[2]})`);
    },
    m(a, l) {
      X(a, t, l), o.m(t, null), i = !0, s || (r = Oe(t, "click", function() {
        Ri(
          /*onClick*/
          n[1]
        ) && n[1].apply(this, arguments);
      }), s = !0);
    },
    p(a, [l]) {
      n = a, l & /*text*/
      1 && Pe(e, e = /*text*/
      n[0]) ? (Me(), Y(o, 1, 1, se), ke(), o = Ef(n), o.c(), F(o, 1), o.m(t, null)) : o.p(n, l), l & /*bgImage*/
      4 && Q(t, "background-image", `url(${/*bgImage*/
      n[2]})`);
    },
    i(a) {
      i || (F(o), i = !0);
    },
    o(a) {
      Y(o), i = !1;
    },
    d(a) {
      a && U(t), o.d(a), s = !1, r();
    }
  };
}
function jP(n, t, e) {
  let i, { text: s } = t, { onClick: r = null } = t, { color: o = "white" } = t;
  return n.$$set = (a) => {
    "text" in a && e(0, s = a.text), "onClick" in a && e(1, r = a.onClick), "color" in a && e(3, o = a.color);
  }, n.$$.update = () => {
    n.$$.dirty & /*color*/
    8 && e(2, i = (() => o === "white" ? qa : o === "blue" ? Yh : qa)());
  }, [s, r, i, o];
}
class RP extends Ie {
  constructor(t) {
    super(), Ce(this, t, jP, OP, Pe, { text: 0, onClick: 1, color: 3 }, zP);
  }
}
function BP(n) {
  De(n, "svelte-ldjbp8", "*.forbid.svelte-ldjbp8.svelte-ldjbp8{pointer-events:none !important;opacity:0.5}.Measure-Controller.svelte-ldjbp8.svelte-ldjbp8{pointer-events:none;position:relative;width:100%;height:100%;z-index:2;color:white}.Measure-Controller.svelte-ldjbp8 .mode-switcher.svelte-ldjbp8{margin-top:2.25rem}.Measure-Controller.svelte-ldjbp8 .bottom.svelte-ldjbp8{position:absolute;width:100%;bottom:0}.Measure-Controller.svelte-ldjbp8 .bottom .mask.svelte-ldjbp8{position:absolute;bottom:0;width:100%;height:12.5rem;background-size:100%;z-index:-1;background-image:linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.5))}.Measure-Controller.svelte-ldjbp8 .bottom .center.svelte-ldjbp8{display:flex;flex-direction:column;align-items:center;margin-bottom:2.5rem}.Measure-Controller.svelte-ldjbp8 .controller.svelte-ldjbp8{pointer-events:all;display:flex;align-items:center}.Measure-Controller.svelte-ldjbp8 .controller .button.svelte-ldjbp8{cursor:pointer;display:flex;align-items:center;height:2.5rem;padding-left:1rem;padding-right:1rem;border-radius:624.9375rem;font-size:0.875rem;color:#fff;background-color:rgba(0, 0, 0, 0.2)}.Measure-Controller.svelte-ldjbp8 .controller .button .icon.svelte-ldjbp8{width:1.5rem;height:1.5rem;background-repeat:no-repeat;background-size:100%;margin:0 0.25rem}.Measure-Controller.svelte-ldjbp8 .controller .main-button.svelte-ldjbp8{margin-left:1.75rem;margin-right:1.75rem;font-size:0.875rem;font-weight:bold}");
}
function Mf(n) {
  let t, e;
  return t = new J0({
    props: {
      onClick: (
        /*measureController*/
        n[0].disable
      )
    }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*measureController*/
      1 && (r.onClick = /*measureController*/
      i[0].disable), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function kf(n) {
  let t, e, i, s;
  return e = new LP({
    props: {
      options: [
        {
          key: "line",
          value: (
            /*i18n*/
            n[2]("测距离")
          )
        },
        {
          key: "area",
          value: (
            /*i18n*/
            n[2]("测面积")
          )
        }
      ],
      defaultKey: (
        /*measureController*/
        n[0].currentMeasureType
      ),
      onChange: (
        /*measureController*/
        n[0].changeMeasureType
      )
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "mode-switcher svelte-ldjbp8");
    },
    m(r, o) {
      X(r, t, o), me(e, t, null), s = !0;
    },
    p(r, o) {
      n = r;
      const a = {};
      o & /*i18n*/
      4 && (a.options = [
        {
          key: "line",
          value: (
            /*i18n*/
            n[2]("测距离")
          )
        },
        {
          key: "area",
          value: (
            /*i18n*/
            n[2]("测面积")
          )
        }
      ]), o & /*measureController*/
      1 && (a.defaultKey = /*measureController*/
      n[0].currentMeasureType), o & /*measureController*/
      1 && (a.onChange = /*measureController*/
      n[0].changeMeasureType), e.$set(a);
    },
    i(r) {
      s || (F(e.$$.fragment, r), r && mt(() => {
        s && (i || (i = Ii(t, zt, { duration: Sr }, !0)), i.run(1));
      }), s = !0);
    },
    o(r) {
      Y(e.$$.fragment, r), r && (i || (i = Ii(t, zt, { duration: Sr }, !1)), i.run(0)), s = !1;
    },
    d(r) {
      r && U(t), ge(e), r && i && i.end();
    }
  };
}
function xf(n) {
  let t, e, i, s = (
    /*i18n*/
    n[2]("撤销") + ""
  ), r, o, a, l, c;
  return {
    c() {
      t = W("div"), e = W("div"), i = oe(), r = je(s), y(e, "class", "icon svelte-ldjbp8"), Q(e, "background-image", `url(${q0})`), y(t, "class", "button svelte-ldjbp8"), ye(
        t,
        "forbid",
        /*buttonState*/
        n[3] === "start"
      );
    },
    m(h, d) {
      X(h, t, d), R(t, e), R(t, i), R(t, r), a = !0, l || (c = Oe(
        t,
        "click",
        /*click_handler*/
        n[13]
      ), l = !0);
    },
    p(h, d) {
      n = h, (!a || d & /*i18n*/
      4) && s !== (s = /*i18n*/
      n[2]("撤销") + "") && He(r, s), (!a || d & /*buttonState*/
      8) && ye(
        t,
        "forbid",
        /*buttonState*/
        n[3] === "start"
      );
    },
    i(h) {
      a || (h && mt(() => {
        a && (o || (o = Ii(t, zt, { duration: Sr }, !0)), o.run(1));
      }), a = !0);
    },
    o(h) {
      h && (o || (o = Ii(t, zt, { duration: Sr }, !1)), o.run(0)), a = !1;
    },
    d(h) {
      h && U(t), h && o && o.end(), l = !1, c();
    }
  };
}
function Df(n) {
  let t, e, i, s = (
    /*i18n*/
    n[2]("结束") + ""
  ), r, o, a, l, c;
  return {
    c() {
      t = W("div"), e = W("div"), i = oe(), r = je(s), y(e, "class", "icon svelte-ldjbp8"), Q(e, "background-image", `url(${K0})`), y(t, "class", "button svelte-ldjbp8");
    },
    m(h, d) {
      X(h, t, d), R(t, e), R(t, i), R(t, r), a = !0, l || (c = Oe(
        t,
        "click",
        /*complete*/
        n[10]
      ), l = !0);
    },
    p(h, d) {
      n = h, (!a || d & /*i18n*/
      4) && s !== (s = /*i18n*/
      n[2]("结束") + "") && He(r, s);
    },
    i(h) {
      a || (h && mt(() => {
        a && (o || (o = Ii(t, zt, { duration: Sr }, !0)), o.run(1));
      }), a = !0);
    },
    o(h) {
      h && (o || (o = Ii(t, zt, { duration: Sr }, !1)), o.run(0)), a = !1;
    },
    d(h) {
      h && U(t), h && o && o.end(), l = !1, c();
    }
  };
}
function VP(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f, g, p = (
    /*showExit*/
    n[1] && Mf(n)
  ), m = (
    /*measureController*/
    n[0].allowMeasureType.length >= 2 && /*buttonState*/
    n[3] === "start" && kf(n)
  ), v = (
    /*showButton*/
    n[4] && xf(n)
  );
  d = new RP({
    props: {
      onClick: (
        /*func*/
        n[14]
      ),
      text: (
        /*buttonTextMap*/
        n[6][
          /*buttonState*/
          n[3]
        ]
      ),
      color: (
        /*buttonColorMap*/
        n[7][
          /*buttonState*/
          n[3]
        ]
      )
    }
  });
  let b = (
    /*showButton*/
    n[4] && Df(n)
  );
  return {
    c() {
      t = W("div"), p && p.c(), e = oe(), i = W("div"), s = W("div"), r = oe(), o = W("div"), m && m.c(), a = oe(), l = W("div"), v && v.c(), c = oe(), h = W("div"), ve(d.$$.fragment), f = oe(), b && b.c(), y(s, "class", "mask svelte-ldjbp8"), y(h, "class", "main-button svelte-ldjbp8"), ye(h, "forbid", !/*allowAddPoint*/
      n[5]), y(l, "class", "controller svelte-ldjbp8"), y(o, "class", "center svelte-ldjbp8"), y(i, "class", "bottom svelte-ldjbp8"), y(t, "class", "Measure-Controller svelte-ldjbp8");
    },
    m(w, x) {
      X(w, t, x), p && p.m(t, null), R(t, e), R(t, i), R(i, s), R(i, r), R(i, o), m && m.m(o, null), R(o, a), R(o, l), v && v.m(l, null), R(l, c), R(l, h), me(d, h, null), R(l, f), b && b.m(l, null), g = !0;
    },
    p(w, [x]) {
      /*showExit*/
      w[1] ? p ? (p.p(w, x), x & /*showExit*/
      2 && F(p, 1)) : (p = Mf(w), p.c(), F(p, 1), p.m(t, e)) : p && (Me(), Y(p, 1, 1, () => {
        p = null;
      }), ke()), /*measureController*/
      w[0].allowMeasureType.length >= 2 && /*buttonState*/
      w[3] === "start" ? m ? (m.p(w, x), x & /*measureController, buttonState*/
      9 && F(m, 1)) : (m = kf(w), m.c(), F(m, 1), m.m(o, a)) : m && (Me(), Y(m, 1, 1, () => {
        m = null;
      }), ke()), /*showButton*/
      w[4] ? v ? (v.p(w, x), x & /*showButton*/
      16 && F(v, 1)) : (v = xf(w), v.c(), F(v, 1), v.m(l, c)) : v && (Me(), Y(v, 1, 1, () => {
        v = null;
      }), ke());
      const k = {};
      x & /*buttonState*/
      8 && (k.onClick = /*func*/
      w[14]), x & /*buttonState*/
      8 && (k.text = /*buttonTextMap*/
      w[6][
        /*buttonState*/
        w[3]
      ]), x & /*buttonState*/
      8 && (k.color = /*buttonColorMap*/
      w[7][
        /*buttonState*/
        w[3]
      ]), d.$set(k), (!g || x & /*allowAddPoint*/
      32) && ye(h, "forbid", !/*allowAddPoint*/
      w[5]), /*showButton*/
      w[4] ? b ? (b.p(w, x), x & /*showButton*/
      16 && F(b, 1)) : (b = Df(w), b.c(), F(b, 1), b.m(l, null)) : b && (Me(), Y(b, 1, 1, () => {
        b = null;
      }), ke());
    },
    i(w) {
      g || (F(p), F(m), F(v), F(d.$$.fragment, w), F(b), g = !0);
    },
    o(w) {
      Y(p), Y(m), Y(v), Y(d.$$.fragment, w), Y(b), g = !1;
    },
    d(w) {
      w && U(t), p && p.d(), m && m.d(), v && v.d(), ge(d), b && b.d();
    }
  };
}
const Sr = 100;
function _P(n, t, e) {
  let { measureController: i } = t, { showExit: s = !1 } = t, { i18n: r = (A) => A } = t;
  const o = {
    start: r("开始"),
    add: r("添加"),
    end: r("结束"),
    complete: r("完成")
  }, a = {
    start: "white",
    add: "white",
    end: "blue",
    complete: "blue"
  };
  let l = !1, c = !0, h = "start", d = i.currentMeasureType;
  const f = () => {
    i.getCurrentMode() !== "Edit" ? i.changeMode("Edit") : (m("add"), g());
  }, g = () => {
    i.controller instanceof Gn && i.controller.selectPoint();
  }, p = () => {
    i.controller instanceof Gn && i.controller.complete();
  }, m = (A) => {
    e(3, h = A);
  }, v = () => {
    g(), T("allow");
  }, b = () => {
    m("complete");
  }, w = () => {
    i.currentMeasureType === "area" && h === "complete" && m("add");
  }, x = (A) => {
    A.length;
  }, k = () => {
    m("start"), T("allow");
  }, T = (A) => {
    e(5, c = A === "allow");
  }, S = (A) => {
    e(12, d = A);
  }, V = (A) => {
    A.isEmpty && m("start");
  };
  Ot(() => {
    i.hook.on("revoke", V), i.hook.on("measureTypeChange", S), i.hook.on("modeChange", k), i.hook.on("pointsChange", x), i.hook.on("allowAddPointStateChange", T), i.hook.on("readyComplete", b), i.hook.on("notReadyComplete", w), i.hook.on("complete", k);
  }), oi(() => {
    i.hook.off("measureTypeChange", S), i.hook.off("modeChange", k), i.hook.off("allowAddPointStateChange", T), i.hook.off("readyComplete", b), i.hook.off("pointsChange", x), i.hook.off("notReadyComplete", w), i.hook.off("complete", k);
  });
  const z = () => i.revoke(), O = () => {
    h === "start" ? f() : h === "add" ? g() : (h === "end" || h === "complete") && v();
  };
  return n.$$set = (A) => {
    "measureController" in A && e(0, i = A.measureController), "showExit" in A && e(1, s = A.showExit), "i18n" in A && e(2, r = A.i18n);
  }, n.$$.update = () => {
    n.$$.dirty & /*currentMeasureType, buttonState*/
    4104 && e(4, l = d === "area" && h !== "start");
  }, [
    i,
    s,
    r,
    h,
    l,
    c,
    o,
    a,
    f,
    g,
    p,
    v,
    d,
    z,
    O
  ];
}
class HP extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      _P,
      VP,
      Pe,
      {
        measureController: 0,
        showExit: 1,
        i18n: 2
      },
      BP
    );
  }
}
class FP {
  constructor(t, e) {
    u(this, "revoke");
    u(this, "container");
    u(this, "wrapper");
    u(this, "mainController");
    u(this, "disposers", []);
    u(this, "measureController");
    u(this, "mode");
    u(this, "svelteDom");
    u(this, "_params");
    u(this, "useNewUI", !1);
    u(this, "handleExit", () => {
      const t = this.container.querySelector(".fpm__exit-icon"), e = this.container.querySelector(".fpm__exit");
      if (!e || !t)
        throw new Error("cannot find dom");
      this.mode === "pc" && (Object.assign(e.style, uP), Object.assign(t == null ? void 0 : t.style, fP));
      const i = () => {
        e.style.opacity = "1";
      }, s = () => {
        e.style.opacity = "0.85";
      }, r = () => {
        this.measureController.disable();
      };
      return e.addEventListener("click", r), e.addEventListener("mouseenter", i), e.addEventListener("mouseleave", s), () => {
        e.removeEventListener("click", r), e.removeEventListener("mouseenter", i), e.removeEventListener("mouseleave", s);
      };
    });
    var s, r;
    this._params = e, this.measureController = t, this.mode = (s = e.mode) != null ? s : "pc", this.wrapper = e.container, this.container = document.createElement("div"), this.wrapper.appendChild(this.container);
    const i = (r = e.useNewUI) != null ? r : !1;
    if (this.useNewUI = i, i && (this.container.style.position = "absolute", this.container.style.top = "0", this.container.style.left = "0", this.container.style.width = "100%", this.container.style.height = "100%", e.pointSelectorMode === "cursor" ? this.svelteDom = new xP({
      target: this.container,
      props: { measureController: this.measureController, i18n: e.i18n, showExit: e.showExit }
    }) : e.pointSelectorMode === "fixed" && (this.svelteDom = new HP({
      target: this.container,
      props: { measureController: this.measureController, i18n: e.i18n, showExit: e.showExit }
    }))), !i) {
      this.container.innerHTML = this.mode === "mobile" ? rP : lP, this.container.classList.add("fpm__ui-controller", this.mode), this.container.style.background = "rgba(0, 0, 0, 0.15)";
      const o = this.container.querySelectorAll(".fpm__text"), a = this.container.querySelector(".fpm_ui-bg"), l = this.container.querySelector(".fpm_operating-space");
      Object.assign(a == null ? void 0 : a.style, dP), Object.assign(l == null ? void 0 : l.style, hP), Object.assign(this.container.style, cP), o.forEach((c) => Object.assign(c.style, pP));
    }
  }
  dispose() {
    var t;
    this.hide(), (t = this.svelteDom) == null || t.$destroy(), this.container.remove();
  }
  show() {
    return this.container.style.display = "block", this.container.style.opacity = "1", this.container.style.transform = "translate(0, 0)", this.useNewUI === !1 && (this.mode === "pc" ? (this.revoke = new vP(this.measureController, this.container), this.mainController = new mP(this.measureController, this.container, this._params)) : this.mainController = new gP(this.measureController, this.container, this._params), this.disposers.push(this.handleExit())), this;
  }
  hide() {
    var t, e;
    return this.container.style.display = "none", this.container.style.opacity = "0", this.container.style.transform = "translate(0, 10px)", this.useNewUI === !1 && this.mode === "pc" && ((t = this.revoke) == null || t.dispose()), (e = this.mainController) == null || e.dispose(), this.disposers.forEach((i) => i()), this.disposers = [], this;
  }
}
var Je = {}, NP = {
  get exports() {
    return Je;
  },
  set exports(n) {
    Je = n;
  }
};
function Ka(n) {
  return n === null ? "null" : typeof n == "undefined" ? "undefined" : typeof n == "object" ? Array.isArray(n) ? "array" : "object" : typeof n;
}
function $0(n) {
  return Ka(n) === "object" ? Fc(n) : Ka(n) === "array" ? Hc(n) : n;
}
function Hc(n) {
  return n.map($0);
}
function Fc(n) {
  const t = {};
  for (const e in n)
    n.hasOwnProperty(e) && (t[e] = $0(n[e]));
  return t;
}
function Pl(n, t = [], e = {}) {
  const i = {
    arrayBehaviour: e.arrayBehaviour || "replace"
    // Can be "merge" or "replace".
  }, s = t.map((o) => o || {}), r = n || {};
  for (let o = 0; o < s.length; o++) {
    const a = s[o], l = Object.keys(a);
    for (let c = 0; c < l.length; c++) {
      const h = l[c], d = a[h], f = Ka(d), g = Ka(r[h]);
      if (f === "object")
        if (g !== "undefined") {
          const p = g === "object" ? r[h] : {};
          r[h] = Pl({}, [p, Fc(d)], i);
        } else
          r[h] = Fc(d);
      else if (f === "array")
        if (g === "array") {
          const p = Hc(d);
          r[h] = i.arrayBehaviour === "merge" ? r[h].concat(p) : p;
        } else
          r[h] = Hc(d);
      else
        r[h] = d;
    }
  }
  return r;
}
NP.exports = function(t, ...e) {
  return Pl(t, e);
};
Je.noMutate = function(...t) {
  return Pl({}, t);
};
Je.withOptions = function(t, e, i) {
  return Pl(t, e, i);
};
function GP(n) {
  De(n, "svelte-1q8gtp4", ".Measure-Tips.svelte-1q8gtp4.svelte-1q8gtp4{box-sizing:border-box;position:absolute;pointer-events:none;top:0;width:100%;padding:0 2.5rem}.Measure-Tips.svelte-1q8gtp4 .text.svelte-1q8gtp4{text-align:center;position:relative;max-width:100%;top:3.125rem;color:#fff;word-break:break-all;word-wrap:break-word;text-shadow:0 0.0625rem 0.375rem rgba(0, 0, 0, 0.5);font-size:1.25rem;font-weight:bold}");
}
function Sf(n) {
  let t, e, i, s, r;
  return {
    c() {
      t = W("div"), e = W("div"), i = je(
        /*tip*/
        n[2]
      ), y(e, "class", "text svelte-1q8gtp4"), y(t, "class", "Measure-Tips svelte-1q8gtp4");
    },
    m(o, a) {
      X(o, t, a), R(t, e), R(e, i), n[7](e), r = !0;
    },
    p(o, a) {
      (!r || a & /*tip*/
      4) && He(
        i,
        /*tip*/
        o[2]
      );
    },
    i(o) {
      r || (mt(() => {
        r && (s || (s = Ii(t, zt, {}, !0)), s.run(1));
      }), r = !0);
    },
    o(o) {
      s || (s = Ii(t, zt, {}, !1)), s.run(0), r = !1;
    },
    d(o) {
      o && U(t), n[7](null), o && s && s.end();
    }
  };
}
function WP(n) {
  let t, e, i = (
    /*visible*/
    n[0] && Sf(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*visible*/
      s[0] ? i ? (i.p(s, r), r & /*visible*/
      1 && F(i, 1)) : (i = Sf(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function QP(n, t, e) {
  let { measureController: i } = t, { i18n: s = (w) => w } = t, { tips: r } = t, { tipStyle: o = {} } = t, { visible: a = !0 } = t, l = null;
  const c = (w) => {
    const x = i.currentMeasureType;
    let k = "";
    return k = r[w], k === void 0 && (k = r[x][w]), k;
  }, h = (w) => {
    e(2, f = s(c(w)));
  }, d = () => {
    e(2, f = "");
  };
  let f = "";
  const g = (w) => {
    w === "Edit" && i.changeMeasureType ? h("start") : d();
  }, p = () => {
    i.getCurrentMode() === "Watch" && d();
  }, m = () => {
    i.getCurrentMode() === "Edit" && h("start");
  }, v = (w) => {
    i.currentMeasureType === "area" && (w.length >= 2 ? h("close") : w.length === 0 ? h("start") : d());
  };
  Ot(() => {
    g(i.getCurrentMode()), i.hook.on("modeChange", g), i.hook.on("complete", p), i.hook.on("pointsChange", v), i.hook.on("measureTypeChange", m);
  }), oi(() => {
    i.hook.off("modeChange", g), i.hook.off("complete", p), i.hook.off("pointsChange", v), i.hook.off("measureTypeChange", m), d();
  });
  function b(w) {
    Ze[w ? "unshift" : "push"](() => {
      l = w, e(1, l), e(6, o);
    });
  }
  return n.$$set = (w) => {
    "measureController" in w && e(3, i = w.measureController), "i18n" in w && e(4, s = w.i18n), "tips" in w && e(5, r = w.tips), "tipStyle" in w && e(6, o = w.tipStyle), "visible" in w && e(0, a = w.visible);
  }, n.$$.update = () => {
    if (n.$$.dirty & /*textDom, tipStyle*/
    66 && l)
      for (const w in o)
        o.hasOwnProperty(w) && e(1, l.style[w] = o[w], l);
  }, [a, l, f, i, s, r, o, b];
}
class UP extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      QP,
      WP,
      Pe,
      {
        measureController: 3,
        i18n: 4,
        tips: 5,
        tipStyle: 6,
        visible: 0
      },
      GP
    );
  }
}
const XP = {
  line: {
    start: "选择一个合适的位置开始测量，点击【结束】或【鼠标右键】结束测量"
  },
  area: {
    start: "选择一个合适的位置开始绘制平面",
    close: "选择3个点后将闭合平面，点击【结束】或【鼠标右键】将自动闭合"
  }
}, YP = {
  line: {
    start: ""
  },
  area: {
    start: "",
    close: "选择3个点后将闭合平面，点击结束自动闭合"
  }
};
class ZP {
  constructor(t, e) {
    u(this, "tipSvelteDom");
    this.tipSvelteDom = new UP({
      target: e.container,
      props: {
        measureController: t,
        tips: Je({}, e.pointSelectorMode === "fixed" ? YP : XP, e.tips),
        i18n: e.i18n,
        visible: !0,
        tipStyle: e.tipStyle
      }
    });
  }
  dispose() {
    var t;
    (t = this.tipSvelteDom) == null || t.$destroy();
  }
  show() {
    var t;
    return (t = this.tipSvelteDom) == null || t.$set({ visible: !0 }), this;
  }
  hide() {
    var t;
    return (t = this.tipSvelteDom) == null || t.$set({ visible: !1 }), this;
  }
}
class JP {
  constructor(t, e) {
    u(this, "five");
    u(this, "measureController");
    u(this, "onKeyDown", (t) => {
      if (t.metaKey && t.code === "KeyS") {
        this.measureController.save().changeMode("Watch"), t.preventDefault();
        return;
      }
      if (t.code === "Escape")
        return this.escape();
    });
    u(this, "onMouseDown", (t) => {
      t.button === 2 && (t.preventDefault(), this.measureController.save().changeMode("Watch"));
    });
    this.five = e, this.measureController = t;
    const i = this.five.getElement();
    i && (document.body.addEventListener("keydown", this.onKeyDown), i.addEventListener("mousedown", this.onMouseDown));
  }
  dispose() {
    const t = this.five.getElement();
    t && (document.body.removeEventListener("keydown", this.onKeyDown), t.removeEventListener("mousedown", this.onMouseDown));
  }
  escape() {
    return this.measureController.getCurrentMode() === "Watch" ? this.measureController.disable() : this.measureController.save().changeMode("Watch");
  }
}
function Os(n) {
  return typeof n == "object" ? n === null ? {} : n : {};
}
class qP extends rs {
  constructor(e, i) {
    var o, a, l, c, h, d, f, g, p, m, v, b;
    super(e);
    u(this, "state", { enabled: !0 });
    u(this, "hasOpen", !1);
    /** @deprecated use hooks instead */
    u(this, "hook");
    u(this, "magnifier");
    u(this, "controller", null);
    /** 允许的测量类型 */
    u(this, "allowMeasureType");
    /** 当前的测量类型 */
    u(this, "currentMeasureType");
    u(this, "model");
    u(this, "group");
    u(this, "config");
    u(this, "isMobile");
    u(this, "useUIController");
    u(this, "params");
    u(this, "useGuideController");
    u(this, "container", document.createElement("div"));
    u(this, "shortcutKeyController");
    /** 关闭插件功能
     * @description 清除标尺线条
     * @description 还原点位展示和默认鼠标 UI
     */
    u(this, "disable", () => {
      var e, i, s, r;
      this.hasOpen = !1, this.state.enabled = !1, this.container.style.visibility = "hidden", this.container.style.opacity = "0", (e = this.controller) == null || e.dispose(), (i = this.useUIController) == null || i.hide(), (s = this.useGuideController) == null || s.hide(), (r = this.shortcutKeyController) == null || r.dispose(), this.controller = null, this.five.helperVisible = !0, this.five.scene.remove(this.group), this.five.needsRender = !0, this.hook.emit("disable", !0);
    });
    u(this, "getCurrentMode", () => this.controller instanceof Gn ? "Edit" : this.controller instanceof ff ? "Watch" : this.controller instanceof to ? "Mixed" : this.controller instanceof hf ? "View" : null);
    /** 变更场景
     * @description 如果从编辑场景改变到观看场景，不会自动保存，默认丢弃所有改动
     */
    u(this, "changeMode", (e) => {
      var r, o, a, l, c;
      if (!this.hasOpen || this.getCurrentMode() === e)
        return;
      (r = this.controller) == null || r.dispose();
      const i = {
        View: hf,
        Watch: ff,
        Edit: Gn,
        Mixed: to
      };
      if (!i[e])
        throw new Error("不存在的 Mode");
      const s = this.createControllerParams();
      this.controller = new i[e](s), e === "View" ? ((o = this.useUIController) == null || o.hide(), (a = this.useGuideController) == null || a.hide()) : ((l = this.useUIController) == null || l.show(), (c = this.useGuideController) == null || c.show()), this.hook.emit("modeChange", e);
    });
    /**
     * @description: 切换测量的类型
     */
    u(this, "changeMeasureType", (e) => {
      this.currentMeasureType = e, this.hook.emit("measureTypeChange", e);
    });
    this.five = e, this.hook = this.hooks, this.params = i, this.config = Mr(i, ["openParams", "magnifierParams"]), this.model = new U0(this.config), this.isMobile = (a = (o = i == null ? void 0 : i.openParams) == null ? void 0 : o.isMobile) != null ? a : !1, this.magnifier = new ch(
      e,
      (d = (h = i.magnifierParams) != null ? h : (c = (l = i.pointSelectorConfig) == null ? void 0 : l.helper) == null ? void 0 : c.magnifierParams) != null ? d : { width: 190, height: 190, scale: 2 }
    ), this.allowMeasureType = Array.from(new Set((g = (f = i.editParams) == null ? void 0 : f.allowMeasureType) != null ? g : ["line"])), this.currentMeasureType = (p = this.allowMeasureType[0]) != null ? p : "line", this.group = new fn(), this.group.name = "plugin-measure-group", this.container.classList.add("five-plugin-measure-container"), this.container.style.position = "absolute", this.container.style.left = "0", this.container.style.top = "0", this.container.style.visibility = "hidden", this.container.style.pointerEvents = "none", this.container.style.width = "100%", this.container.style.height = "100%", this.container.style.opacity = "0", this.container.style.zIndex = "1";
    const s = (v = (m = i.editParams) == null ? void 0 : m.pointSelectorMode) != null ? v : yg ? "fixed" : "cursor", r = (b = this.params.openParams) != null ? b : {};
    if (this.params.useUIController !== !1) {
      const w = _({
        container: this.container,
        openParams: r,
        i18n: i.i18n,
        pointSelectorMode: s,
        useNewUI: this.allowMeasureType.length > 1
      }, Os(this.params.useUIController));
      this.useUIController = new FP(this, w);
    }
    if (this.params.useGuideController !== !1) {
      const w = _({
        container: this.container,
        pointSelectorMode: s,
        i18n: i.i18n
      }, Os(this.params.useGuideController));
      this.useGuideController = new ZP(this, w);
    }
  }
  appendTo(e) {
    e.append(this.container);
  }
  clear() {
    this.model.clear();
  }
  dispose() {
    var e, i;
    this.disable(), this.clear(), (e = this.useUIController) == null || e.dispose(), (i = this.magnifier) == null || i.dispose(), this.five.needsRender = !0;
  }
  /** 加载数据
   * @description 数据加载时会覆盖当前已保存的数据
   * @description 如果当前正在编辑中，会自动退出并保存编辑
   */
  load(e) {
    let i = e;
    e.list && (i = {
      polylines: e.list.map((r) => r.polyline).map((r) => {
        var o;
        return de(_({}, r), {
          visibleFiveMode: (o = r.visibleFiveMode) != null ? o : ["Panorama"]
        });
      })
    }), this.model.parse(i), this.save();
  }
  /** 插件功能入口
   * @description 会隐藏鼠标的默认聚焦环
   * @description 会隐藏当前 VR 内的点位展示
   */
  enable(e) {
    var i, s, r;
    this.hasOpen || (!this.container.parentElement && ((i = this.five.getElement()) != null && i.parentElement) && this.appendTo(this.five.getElement().parentElement), this.state.enabled = !0, this.hasOpen = !0, this.group.matrix.copy(this.workUtil.transform), this.group.matrix.decompose(this.group.position, this.group.quaternion, this.group.scale), this.group.updateMatrixWorld(), this.five.scene.add(this.group), this.container.style.visibility = "visible", this.container.style.opacity = "1", e != null && e.mode ? this.changeMode(e.mode) : this.isMobile ? this.changeMode("Mixed") : this.changeMode("Watch"), (e == null ? void 0 : e.mode) !== "View" && ((s = this.useUIController) == null || s.show(), (r = this.useGuideController) == null || r.show()), this.shortcutKeyController = new JP(this, this.five), this.hook.emit("enable", !0));
  }
  /** 进入编辑模式 */
  edit(e) {
    e && this.changeMeasureType(e);
    const i = this.isMobile ? "Mixed" : "Edit";
    this.changeMode(i);
  }
  /** 撤销编辑 */
  revoke() {
    this.controller instanceof Gn && this.controller.revoke();
  }
  removePolyline(e) {
    this.model.removePolyline(e);
  }
  removeArea(e) {
    this.model.removeArea(e);
  }
  removePolylineByID(e) {
    const i = this.model.getPolylineByID(e);
    i && this.model.removePolyline(i);
  }
  getPolylineByID(e) {
    return this.model.getPolylineByID(e);
  }
  getEditedPolyline() {
  }
  /**
   * 高亮当前线段
   */
  highlightLine(e) {
    if (this.getCurrentMode() !== "Watch")
      return !1;
    const i = this.model.getLineByID(e);
    return i ? (this.controller.highlightLine(i), !0) : !1;
  }
  clearHighlightLines() {
    return this.getCurrentMode() !== "Watch" ? !1 : (this.controller.clearHighlightLines(), !0);
  }
  /** 保存编辑
   * @description 以下情况可能报错
   */
  save(e) {
    var r;
    if (!(this.controller instanceof Gn) && !(this.controller instanceof to))
      return this;
    const i = (r = e == null ? void 0 : e.mode) != null ? r : "View", s = this.controller.model.areas;
    return this.controller instanceof Gn ? this.controller.complete() : s.forEach((o) => {
      o.showArea(), this.model.addArea(o);
    }), this.changeMode(i), this;
  }
  /** Mixed 模式才有用，添加起点 */
  addStartPoint() {
    this.controller instanceof to && this.hook.emit("willChangeState", "watching", "editing");
  }
  /** Mixed 模式才有用，添加终点 */
  addEndPoint() {
    this.controller instanceof to && this.hook.emit("willChangeState", "editing", "watching");
  }
  /** 导出数据 */
  toJson() {
    return this.model.toJson();
  }
  /**
   * @deprecated 暂不支持
   * @description 改变插件的模式（pc端模式或移动端模式）
   * @param isMobile true为移动端模式，false为pc端
   */
  changeIsMobile(e) {
  }
  changeConfigs(e) {
    var i, s;
    Object.assign(this.config, e), (i = this.controller) == null || i.updateDistanceUI(), (s = this.controller) == null || s.updateAreaUI();
  }
  /** 设置线段的文本 */
  setCustomText(e, i) {
    var r;
    const s = this.model.getLineByID(e);
    if (!s)
      throw new Error("不存在的线段");
    s.setText(i), (r = this.controller) == null || r.updateDistanceUI();
  }
  createControllerParams() {
    var s, r;
    const e = (s = this.params.openParams) != null ? s : {}, i = (r = this.params.editParams) != null ? r : {};
    return e.isMobile = this.isMobile, {
      five: this.five,
      hook: this.hook,
      group: this.group,
      model: this.model,
      config: this.config,
      magnifier: this.magnifier,
      container: this.container,
      workUtil: this.workUtil,
      openParams: e,
      editParams: i,
      pointSelectorConfig: this.params.pointSelectorConfig,
      magnifierParams: this.params.magnifierParams,
      getMeasureType: () => this.currentMeasureType,
      mouseGroup: X0(_({}, e.crossHairParameter)),
      userDistanceItemCreator: this.params.userDistanceItemCreator
    };
  }
}
const rD = function(t, e) {
  return new qP(t, e);
}, KP = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==";
let Tf = null;
class ts extends ri {
  constructor(e) {
    var f, g, p;
    super();
    u(this, "name", "PointMesh");
    u(this, "dom");
    u(this, "opacityBeforeHighlight");
    u(this, "highlighted", !1);
    u(this, "fontMesh");
    u(this, "backgroundMesh");
    u(this, "lastRenderDomItem");
    u(this, "paramsStyle");
    u(this, "_visible", !0);
    u(this, "_onAdded", () => {
      this.dom || this.updateDom();
    });
    u(this, "_onRemoved", () => {
      var e;
      (e = this.dom) == null || e.destroy(), this.dom = void 0;
    });
    u(this, "_onShowed", () => {
      this.dom && (this.dom.container.style.display = "block");
    });
    u(this, "_onHidden", () => {
      this.dom && (this.dom.container.style.display = "none");
    });
    const d = e != null ? e : {}, { point: i } = d, s = Rn(d, ["point"]);
    this.paramsStyle = s != null ? s : {};
    const r = new P.BufferGeometry();
    r.setAttribute("position", new P.Float32BufferAttribute([0, 0, 0], 3));
    const o = {
      transparent: !0,
      side: P.DoubleSide,
      size: (f = e == null ? void 0 : e.size) != null ? f : 8,
      map: Tf || (Tf = new P.TextureLoader().load(KP)),
      sizeAttenuation: !1
    }, a = new P.PointsMaterial(de(_({}, o), {
      color: (g = e == null ? void 0 : e.color) != null ? g : 16777215,
      depthTest: !0,
      opacity: (p = e == null ? void 0 : e.opacity) != null ? p : 1
    })), l = new P.PointsMaterial(de(_({}, o), {
      size: a.size,
      color: a.color,
      depthWrite: !1,
      depthTest: !1,
      opacity: a.opacity * 0.5
    })), c = new P.Points(r, a), h = new P.Points(r, l);
    this.fontMesh = c, this.backgroundMesh = h, c.name = "FontMesh", h.name = "BackgroundMesh", c.renderOrder = 10, h.renderOrder = 0, this.add(c, h), e != null && e.point && this.position.copy(Qe(e.point)), e && this.setStyle(e), this.addEventListener("removed", () => {
      Wt.cacheObject.delete(this), Wt.checkDom(this);
    }), this.addEventListener("added", () => {
      Wt.cacheObject.add(this);
    }), Wt.checkDomEveryFrame();
  }
  get color() {
    return this.fontMesh.material.color;
  }
  get size() {
    return this.fontMesh.material.size;
  }
  get style() {
    return {
      color: this.color,
      size: this.size,
      opacity: this.fontMesh.material.opacity,
      occlusionVisibility: this.fontMesh.material.depthTest,
      occlusionMode: this.backgroundMesh.visible ? "depthWrite" : "depthTest"
    };
  }
  get five() {
    var e, i;
    return (i = (e = window.globalModules) == null ? void 0 : e.five) != null ? i : window.$five;
  }
  setStyle(e) {
    _e(e.color) && (this.fontMesh.material.setValues({ color: e.color }), this.backgroundMesh.material.setValues({ color: e.color })), _e(e.size) && (this.fontMesh.material.setValues({ side: e.size }), this.backgroundMesh.material.setValues({ side: e.size })), _e(e.occlusionVisibility) && (e.occlusionVisibility ? e.occlusionMode === "depthTest" ? (this.fontMesh.material.depthTest = !1, this.backgroundMesh.visible = !1) : (this.fontMesh.material.depthTest = !0, this.backgroundMesh.visible = !0) : (this.fontMesh.material.depthTest = !0, this.backgroundMesh.visible = !1));
  }
  highlight() {
    this.highlighted || (this.highlighted = !0, this.opacityBeforeHighlight = this.fontMesh.material.opacity, this.fontMesh.material.setValues({ opacity: this.opacityBeforeHighlight * dh }));
  }
  unhighlight() {
    this.highlighted && (this.highlighted = !1, this.fontMesh.material.setValues({ opacity: this.opacityBeforeHighlight }));
  }
  updateMatrixWorld(e) {
    super.updateMatrixWorld(e);
    const i = Po(this, this.position).toArray().join(",");
    i !== this.lastRenderDomItem && (this.updateDom(), this.lastRenderDomItem = i);
  }
  updateDom() {
    const e = this.paramsStyle.tip;
    e && !this.dom && (this.dom = new Bo(this.five), this.dom.intersectCheck = !1, this.dom.simulate3D = !0, this.dom.container.style.display = this.visible ? "block" : "none");
    const i = (s) => {
      this.dom && this.dom.__text !== s && (this.dom.__text = s, s instanceof HTMLElement ? (this.dom.container.innerHTML = "", this.dom.container.appendChild(s)) : s ? this.dom.container.innerHTML = uh(s, {
        style: ""
      }) : this.dom.container.innerHTML = "");
    };
    e ? (i(e), this.dom.setPosition(this.position.clone())) : i(null);
  }
}
class To extends fi {
  constructor(e) {
    super();
    u(this, "name", "LineWithDotsMesh");
    u(this, "pointGroup", new ri());
    u(this, "_paramsStyle");
    u(this, "setStyle", (e) => {
      super.setStyle(e), this._paramsStyle = _(_({}, this._paramsStyle), e), this.pointMeshes.forEach(
        (i) => {
          var s, r, o;
          return i.setStyle(de(_({}, this._paramsStyle), { color: (o = (s = this._paramsStyle) == null ? void 0 : s.pointColor) != null ? o : (r = this._paramsStyle) == null ? void 0 : r.lineColor, tip: void 0 }));
        }
      ), this.updateEdgePointsVisibility(), this.needsRender = !0;
    });
    u(this, "highlight", (e) => {
      super.highlight(e), this.pointMeshes.forEach((i) => i.highlight());
    });
    u(this, "unhighlight", () => {
      super.unhighlight(), this.pointMeshes.forEach((e) => e.unhighlight());
    });
    u(this, "updateEdgePointsVisibility", () => {
      var e;
      _e((e = this._paramsStyle) == null ? void 0 : e.pointVisibility) && (this.startPoint && (this.startPoint.visible = typeof this._paramsStyle.pointVisibility == "object" ? this._paramsStyle.pointVisibility.startPoint : this._paramsStyle.pointVisibility), this.endPoint && (this.endPoint.visible = typeof this._paramsStyle.pointVisibility == "object" ? this._paramsStyle.pointVisibility.endPoint : this._paramsStyle.pointVisibility));
    });
    this.add(this.pointGroup), e && this.setStyle(e), e != null && e.points && this.setPoints(e.points);
  }
  get startPoint() {
    return this.pointMeshes[0];
  }
  get endPoint() {
    return this.pointMeshes.length < 2 ? null : this.pointMeshes[this.pointMeshes.length - 1];
  }
  get visiblePointMeshes() {
    return this.pointMeshes.filter((e) => e.visible);
  }
  get pointMeshes() {
    return this.pointGroup.children;
  }
  setPoints(e) {
    super.setPoints(e);
    const i = e.map(Qe).filter(_e);
    this.pointGroup.removeChildren(), this.addIfNotExists(this.pointGroup), i.forEach((s) => {
      var o, a, l;
      const r = new ts(de(_({}, this.style), {
        color: (l = (o = this._paramsStyle) == null ? void 0 : o.pointColor) != null ? l : (a = this._paramsStyle) == null ? void 0 : a.lineColor,
        tip: void 0
      }));
      r.position.copy(s), this.pointGroup.add(r);
    }), this.updateEdgePointsVisibility(), this.needsRender = !0;
  }
}
class Cl extends ri {
  constructor(e) {
    var a, l;
    super();
    u(this, "name", "ColoredMesh");
    u(this, "meshFont");
    u(this, "meshBackground");
    u(this, "paramsStyle", {});
    u(this, "_geometry", new P.BufferGeometry());
    u(this, "highlighted", !1);
    u(this, "opacityBeforeHighlight");
    u(this, "colorBeforeHighlight");
    this.paramsStyle = e != null ? e : {};
    const i = new P.MeshBasicMaterial({
      color: new P.Color((a = e == null ? void 0 : e.color) != null ? a : zA).convertSRGBToLinear(),
      // 给 MeshBasicMaterial 的颜色必须是 linear，要不颜色不对
      transparent: !0,
      side: P.DoubleSide,
      depthTest: !0,
      depthWrite: !1,
      opacity: (l = e == null ? void 0 : e.opacity) != null ? l : RA
    }), s = new P.MeshBasicMaterial({
      color: 16777215,
      transparent: !0,
      side: P.DoubleSide,
      depthTest: !1,
      depthWrite: !1,
      opacity: 0.3 / 0.5 * i.opacity
    }), r = new P.Mesh(this.geometry, i), o = new P.Mesh(this.geometry, s);
    r.name = "MeshFront", o.name = "MeshBackground", r.renderOrder = 1, o.renderOrder = 0, this.meshFont = r, this.meshBackground = o, this.add(r), this.setOcclusionVisibility({ occlusionVisibility: e == null ? void 0 : e.occlusionVisibility, occlusionMode: e == null ? void 0 : e.occlusionMode });
  }
  get style() {
    return {
      color: this.color,
      opacity: this.opacity,
      occlusionVisibility: this.occlusionVisibility,
      occlusionMode: this.occlusionMode
    };
  }
  get color() {
    return this.meshFont.material.color;
  }
  get opacity() {
    return this.meshFont.material.opacity;
  }
  get occlusionVisibility() {
    return !!this.meshBackground.parent || this.meshFont.material.depthTest === !1;
  }
  get occlusionMode() {
    return this.meshFont.material.depthTest === !1 ? "depthTest" : "translucence";
  }
  set geometry(e) {
    this._geometry = e, this.meshFont.geometry = e, this.meshBackground.geometry = e;
  }
  get geometry() {
    return this._geometry;
  }
  setStyle(e) {
    this.paramsStyle = _(_({}, this.paramsStyle), e), _e(e.color) && (this.meshFont.material.color.set(new P.Color(e.color).convertSRGBToLinear()), this.needsRender = !0), _e(e.opacity) && (this.meshFont.material.opacity = e.opacity, this.meshBackground.material.opacity = 0.3 / 0.5 * this.meshFont.material.opacity, this.needsRender = !0), this.setOcclusionVisibility(e);
  }
  highlight(e) {
    var i, s;
    this.highlighted = !0, _e(e == null ? void 0 : e.color) ? (this.colorBeforeHighlight = (i = this.colorBeforeHighlight) != null ? i : this.meshFont.material.color.clone(), this.meshFont.material.color.set(new P.Color(e.color).convertSRGBToLinear())) : (this.opacityBeforeHighlight = (s = this.opacityBeforeHighlight) != null ? s : this.opacity, this.meshFont.material.opacity = this.opacity * dh, this.meshBackground.material.opacity = 0.3 / 0.5 * this.meshFont.material.opacity), this.needsRender = !0;
  }
  unhighlight() {
    this.highlighted = !1, _e(this.opacityBeforeHighlight) && (this.meshFont.material.opacity = this.opacityBeforeHighlight, this.meshBackground.material.opacity = 0.3 / 0.5 * this.meshFont.material.opacity, this.opacityBeforeHighlight = void 0), _e(this.colorBeforeHighlight) && (this.meshFont.material.color = new P.Color(this.colorBeforeHighlight), this.colorBeforeHighlight = void 0), this.needsRender = !0;
  }
  setOcclusionVisibility(e) {
    var r, o, a;
    const i = (o = (r = e.occlusionMode) != null ? r : this.paramsStyle.occlusionMode) != null ? o : "translucence", s = (a = e.occlusionVisibility) != null ? a : this.paramsStyle.occlusionVisibility;
    _e(s) && (s ? i === "depthTest" ? (this.meshFont.material.depthTest = !1, this.remove(this.meshBackground)) : i === "translucence" && (this.meshFont.material.depthTest = !0, this.addIfNotExists(this.meshBackground)) : (this.meshFont.material.depthTest = !0, this.remove(this.meshBackground)));
  }
}
const Zh = new P.BufferGeometry();
Zh.name = "blankGeometry";
Zh.isBlank = !0;
class Vr extends Cl {
  constructor(e) {
    super(e);
    u(this, "name", "PolygonMesh");
    u(this, "points", []);
    u(this, "planeHelperNeedUpdate", !0);
    u(this, "geometryInfoNeedUpdate", !0);
    u(this, "_paramsStyle");
    u(this, "areaDom");
    u(this, "planeHelper", null);
    u(this, "_geometryInfo", null);
    u(this, "lastRenderAreaItem");
    u(this, "_onAdded", () => {
      this.areaDom || this.updateAreaItems();
    });
    u(this, "_onRemoved", () => {
      var e;
      (e = this.areaDom) == null || e.destroy(), this.areaDom = void 0;
    });
    u(this, "_onShowed", () => {
      this.areaDom && (this.areaDom.container.style.display = "block");
    });
    u(this, "_onHidden", () => {
      this.areaDom && (this.areaDom.container.style.display = "none");
    });
    e != null && e.points && this.setPoints(e.points), this._paramsStyle = e != null ? e : {}, this.updateAreaItems(), this.addEventListener("removed", () => {
      Wt.cacheObject.delete(this), Wt.checkDom(this);
    }), this.addEventListener("added", () => {
      Wt.cacheObject.add(this);
    }), Wt.checkDomEveryFrame();
  }
  get normal() {
    return this.points.length >= 3 ? new P.Vector3().crossVectors(this.points[1].clone().sub(this.points[0]), this.points[2].clone().sub(this.points[0])).normalize() : new P.Vector3(0, 0, 1);
  }
  get style() {
    return de(_({}, super.style), { lengthEnable: this._paramsStyle.lengthEnable });
  }
  get isBlank() {
    return !!this.geometry.isBlank;
  }
  get center() {
    var e;
    return (e = this.geometryInfo) == null ? void 0 : e.center.clone();
  }
  get geometryInfo() {
    return this.geometryInfoNeedUpdate && (this.isBlank ? this._geometryInfo = null : this._geometryInfo = W0(this.geometry), this.geometryInfoNeedUpdate = !1), this._geometryInfo;
  }
  get five() {
    var e, i;
    return (i = (e = window.globalModules) == null ? void 0 : e.five) != null ? i : window.$five;
  }
  updateMatrixWorld(e) {
    if (super.updateMatrixWorld(e), this.center) {
      const i = Po(this, this.center).toArray().join(",");
      i !== this.lastRenderAreaItem && (this.updateAreaItems(), this.lastRenderAreaItem = i);
    }
  }
  setStyle(e) {
    var s;
    this._paramsStyle = _(_({}, this._paramsStyle), e), super.setStyle(this._paramsStyle);
    const i = (s = this._paramsStyle.occlusionVisibility) != null ? s : !0;
    this.areaDom && (this.areaDom.intersectCheck = !i), this.updateAreaItems();
  }
  setPoints(e, i) {
    var r, o;
    const s = e.map(Qe);
    this.points = s, this.geometry = (o = N0(this.points, { checkLinesIntersect: (r = i == null ? void 0 : i.checkLinesIntersect) != null ? r : !0 })) != null ? o : Zh, this.planeHelperNeedUpdate = !0, this.geometryInfoNeedUpdate = !0, this.updateAreaItems();
  }
  /**
   * @description: 获取一个点投影在当前平面上的点
   */
  projectPoint(e) {
    return e && (this.planeHelperNeedUpdate && this.updatePlaneHelper(), this.planeHelper ? this.planeHelper.projectPoint(e, new P.Vector3()) : e);
  }
  updatePlaneHelper() {
    this.points.length >= 3 ? this.planeHelper = new P.Plane().setFromCoplanarPoints(this.points[0], this.points[1], this.points[2]) : this.planeHelper = null, this.planeHelperNeedUpdate = !1;
  }
  updateAreaItems() {
    var s;
    const e = () => {
      var r;
      (r = this.areaDom) == null || r.destroy(), this.areaDom = void 0;
    };
    if (!this._paramsStyle.lengthEnable || !this.geometryInfo)
      return e();
    if (!this.five)
      return console.error("Five not found");
    this.areaDom = (s = this.areaDom) != null ? s : (() => {
      var a;
      const r = new Bo(this.five), o = (a = this._paramsStyle.occlusionVisibility) != null ? a : !0;
      return r.intersectCheck = !o, r.simulate3D = !0, r;
    })(), this.areaDom.setPosition(this.center);
    const i = FA(this.geometryInfo.area, this._paramsStyle.lengthUnit);
    i ? this.areaDom.container.innerHTML = uh(i, {
      style: "color: #FFFFFF; background: #3366FF"
    }) : this.areaDom.container.innerHTML = "";
  }
}
function Da(n, t) {
  return !(Math.abs(n.x - t.x) > 1e-5 || Math.abs(n.y - t.y) > 1e-5 || Math.abs(n.z - t.z) > 1e-5);
}
function e1(n) {
  if (n.length < 3 || !Da(n[0], n.at(-1)))
    return !1;
  let t = !0;
  const e = new P.Vector3().subVectors(n[1], n[0]).normalize();
  for (let r = 2; r < n.length; r++) {
    const o = new P.Vector3().subVectors(n[r], n[0]).normalize();
    if (!Da(o, e) && !Da(o, e.clone().negate())) {
      t = !1;
      break;
    }
  }
  if (t)
    return !1;
  const i = new P.Plane().setFromCoplanarPoints(n[0], n[1], n[2]);
  return n.every((r, o) => o < 3 ? !0 : i.distanceToPoint(r) < 1e-6);
}
class Lf extends ri {
  constructor(e) {
    super();
    u(this, "name", "MeasureMesh");
    u(this, "isMeasureMesh", !0);
    u(this, "points", []);
    u(this, "isPolygon", !1);
    u(this, "selected", !1);
    u(this, "line");
    u(this, "polygon");
    this.line = new To(e == null ? void 0 : e.lineStyle), this.polygon = new Vr(e == null ? void 0 : e.polygonStyle), this.add(this.line);
  }
  changeConfig(e) {
    this.line.setStyle(e == null ? void 0 : e.lineStyle), this.polygon.setStyle(e == null ? void 0 : e.polygonStyle);
  }
  setPoints(e) {
    this.points = e, this.line.setPoints(this.points);
    const i = e1(this.points);
    this.isPolygon = i, i && (this.addIfNotExists(this.polygon), this.polygon.setPoints(this.points));
  }
  select() {
    this.highlight(3373055), this.selected = !0;
  }
  unselect() {
    this.unhighlight(), this.selected = !1;
  }
  hover() {
    this.selected || this.highlight();
  }
  unhover() {
    this.selected || this.unhighlight();
  }
  highlight(e) {
    this.line.highlight({ color: e }), this.polygon.highlight({ color: e });
  }
  unhighlight() {
    this.line.unhighlight(), this.polygon.unhighlight();
  }
}
const Zl = typeof navigator != "undefined" ? navigator.userAgent.toLowerCase().indexOf("firefox") > 0 : !1;
function Jl(n, t, e, i) {
  n.addEventListener ? n.addEventListener(t, e, i) : n.attachEvent && n.attachEvent("on".concat(t), e);
}
function io(n, t, e, i) {
  n.removeEventListener ? n.removeEventListener(t, e, i) : n.detachEvent && n.detachEvent("on".concat(t), e);
}
function t1(n, t) {
  const e = t.slice(0, t.length - 1);
  for (let i = 0; i < e.length; i++)
    e[i] = n[e[i].toLowerCase()];
  return e;
}
function i1(n) {
  typeof n != "string" && (n = ""), n = n.replace(/\s/g, "");
  const t = n.split(",");
  let e = t.lastIndexOf("");
  for (; e >= 0; )
    t[e - 1] += ",", t.splice(e, 1), e = t.lastIndexOf("");
  return t;
}
function $P(n, t) {
  const e = n.length >= t.length ? n : t, i = n.length >= t.length ? t : n;
  let s = !0;
  for (let r = 0; r < e.length; r++)
    i.indexOf(e[r]) === -1 && (s = !1);
  return s;
}
const Lo = {
  backspace: 8,
  "⌫": 8,
  tab: 9,
  clear: 12,
  enter: 13,
  "↩": 13,
  return: 13,
  esc: 27,
  escape: 27,
  space: 32,
  left: 37,
  up: 38,
  right: 39,
  down: 40,
  del: 46,
  delete: 46,
  ins: 45,
  insert: 45,
  home: 36,
  end: 35,
  pageup: 33,
  pagedown: 34,
  capslock: 20,
  num_0: 96,
  num_1: 97,
  num_2: 98,
  num_3: 99,
  num_4: 100,
  num_5: 101,
  num_6: 102,
  num_7: 103,
  num_8: 104,
  num_9: 105,
  num_multiply: 106,
  num_add: 107,
  num_enter: 108,
  num_subtract: 109,
  num_decimal: 110,
  num_divide: 111,
  "⇪": 20,
  ",": 188,
  ".": 190,
  "/": 191,
  "`": 192,
  "-": Zl ? 173 : 189,
  "=": Zl ? 61 : 187,
  ";": Zl ? 59 : 186,
  "'": 222,
  "[": 219,
  "]": 221,
  "\\": 220
}, Ki = {
  // shiftKey
  "⇧": 16,
  shift: 16,
  // altKey
  "⌥": 18,
  alt: 18,
  option: 18,
  // ctrlKey
  "⌃": 17,
  ctrl: 17,
  control: 17,
  // metaKey
  "⌘": 91,
  cmd: 91,
  command: 91
}, Sa = {
  16: "shiftKey",
  18: "altKey",
  17: "ctrlKey",
  91: "metaKey",
  shiftKey: 16,
  ctrlKey: 17,
  altKey: 18,
  metaKey: 91
}, Bt = {
  16: !1,
  18: !1,
  17: !1,
  91: !1
}, ft = {};
for (let n = 1; n < 20; n++)
  Lo["f".concat(n)] = 111 + n;
let lt = [], go = null, n1 = "all";
const hn = /* @__PURE__ */ new Map(), No = (n) => Lo[n.toLowerCase()] || Ki[n.toLowerCase()] || n.toUpperCase().charCodeAt(0), eC = (n) => Object.keys(Lo).find((t) => Lo[t] === n), tC = (n) => Object.keys(Ki).find((t) => Ki[t] === n);
function s1(n) {
  n1 = n || "all";
}
function zo() {
  return n1 || "all";
}
function iC() {
  return lt.slice(0);
}
function nC() {
  return lt.map((n) => eC(n) || tC(n) || String.fromCharCode(n));
}
function sC() {
  const n = [];
  return Object.keys(ft).forEach((t) => {
    ft[t].forEach((e) => {
      let {
        key: i,
        scope: s,
        mods: r,
        shortcut: o
      } = e;
      n.push({
        scope: s,
        shortcut: o,
        mods: r,
        keys: i.split("+").map((a) => No(a))
      });
    });
  }), n;
}
function rC(n) {
  const t = n.target || n.srcElement, {
    tagName: e
  } = t;
  let i = !0;
  const s = e === "INPUT" && !["checkbox", "radio", "range", "button", "file", "reset", "submit", "color"].includes(t.type);
  return (t.isContentEditable || (s || e === "TEXTAREA" || e === "SELECT") && !t.readOnly) && (i = !1), i;
}
function oC(n) {
  return typeof n == "string" && (n = No(n)), lt.indexOf(n) !== -1;
}
function aC(n, t) {
  let e, i;
  n || (n = zo());
  for (const s in ft)
    if (Object.prototype.hasOwnProperty.call(ft, s))
      for (e = ft[s], i = 0; i < e.length; )
        e[i].scope === n ? e.splice(i, 1).forEach((o) => {
          let {
            element: a
          } = o;
          return Jh(a);
        }) : i++;
  zo() === n && s1(t || "all");
}
function lC(n) {
  let t = n.keyCode || n.which || n.charCode;
  const e = lt.indexOf(t);
  if (e >= 0 && lt.splice(e, 1), n.key && n.key.toLowerCase() === "meta" && lt.splice(0, lt.length), (t === 93 || t === 224) && (t = 91), t in Bt) {
    Bt[t] = !1;
    for (const i in Ki)
      Ki[i] === t && (dt[i] = !1);
  }
}
function r1(n) {
  if (typeof n == "undefined")
    Object.keys(ft).forEach((s) => {
      Array.isArray(ft[s]) && ft[s].forEach((r) => va(r)), delete ft[s];
    }), Jh(null);
  else if (Array.isArray(n))
    n.forEach((s) => {
      s.key && va(s);
    });
  else if (typeof n == "object")
    n.key && va(n);
  else if (typeof n == "string") {
    for (var t = arguments.length, e = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)
      e[i - 1] = arguments[i];
    let [s, r] = e;
    typeof s == "function" && (r = s, s = ""), va({
      key: n,
      scope: s,
      method: r,
      splitKey: "+"
    });
  }
}
const va = (n) => {
  let {
    key: t,
    scope: e,
    method: i,
    splitKey: s = "+"
  } = n;
  i1(t).forEach((o) => {
    const a = o.split(s), l = a.length, c = a[l - 1], h = c === "*" ? "*" : No(c);
    if (!ft[h])
      return;
    e || (e = zo());
    const d = l > 1 ? t1(Ki, a) : [], f = [];
    ft[h] = ft[h].filter((g) => {
      const m = (i ? g.method === i : !0) && g.scope === e && $P(g.mods, d);
      return m && f.push(g.element), !m;
    }), f.forEach((g) => Jh(g));
  });
};
function zf(n, t, e, i) {
  if (t.element !== i)
    return;
  let s;
  if (t.scope === e || t.scope === "all") {
    s = t.mods.length > 0;
    for (const r in Bt)
      Object.prototype.hasOwnProperty.call(Bt, r) && (!Bt[r] && t.mods.indexOf(+r) > -1 || Bt[r] && t.mods.indexOf(+r) === -1) && (s = !1);
    (t.mods.length === 0 && !Bt[16] && !Bt[18] && !Bt[17] && !Bt[91] || s || t.shortcut === "*") && (t.keys = [], t.keys = t.keys.concat(lt), t.method(n, t) === !1 && (n.preventDefault ? n.preventDefault() : n.returnValue = !1, n.stopPropagation && n.stopPropagation(), n.cancelBubble && (n.cancelBubble = !0)));
  }
}
function Of(n, t) {
  const e = ft["*"];
  let i = n.keyCode || n.which || n.charCode;
  if (!dt.filter.call(this, n))
    return;
  if ((i === 93 || i === 224) && (i = 91), lt.indexOf(i) === -1 && i !== 229 && lt.push(i), ["metaKey", "ctrlKey", "altKey", "shiftKey"].forEach((a) => {
    const l = Sa[a];
    n[a] && lt.indexOf(l) === -1 ? lt.push(l) : !n[a] && lt.indexOf(l) > -1 ? lt.splice(lt.indexOf(l), 1) : a === "metaKey" && n[a] && (lt = lt.filter((c) => c in Sa || c === i));
  }), i in Bt) {
    Bt[i] = !0;
    for (const a in Ki)
      Ki[a] === i && (dt[a] = !0);
    if (!e)
      return;
  }
  for (const a in Bt)
    Object.prototype.hasOwnProperty.call(Bt, a) && (Bt[a] = n[Sa[a]]);
  n.getModifierState && !(n.altKey && !n.ctrlKey) && n.getModifierState("AltGraph") && (lt.indexOf(17) === -1 && lt.push(17), lt.indexOf(18) === -1 && lt.push(18), Bt[17] = !0, Bt[18] = !0);
  const s = zo();
  if (e)
    for (let a = 0; a < e.length; a++)
      e[a].scope === s && (n.type === "keydown" && e[a].keydown || n.type === "keyup" && e[a].keyup) && zf(n, e[a], s, t);
  if (!(i in ft))
    return;
  const r = ft[i], o = r.length;
  for (let a = 0; a < o; a++)
    if ((n.type === "keydown" && r[a].keydown || n.type === "keyup" && r[a].keyup) && r[a].key) {
      const l = r[a], {
        splitKey: c
      } = l, h = l.key.split(c), d = [];
      for (let f = 0; f < h.length; f++)
        d.push(No(h[f]));
      d.sort().join("") === lt.sort().join("") && zf(n, l, s, t);
    }
}
function dt(n, t, e) {
  lt = [];
  const i = i1(n);
  let s = [], r = "all", o = document, a = 0, l = !1, c = !0, h = "+", d = !1, f = !1;
  for (e === void 0 && typeof t == "function" && (e = t), Object.prototype.toString.call(t) === "[object Object]" && (t.scope && (r = t.scope), t.element && (o = t.element), t.keyup && (l = t.keyup), t.keydown !== void 0 && (c = t.keydown), t.capture !== void 0 && (d = t.capture), typeof t.splitKey == "string" && (h = t.splitKey), t.single === !0 && (f = !0)), typeof t == "string" && (r = t), f && r1(n, r); a < i.length; a++)
    n = i[a].split(h), s = [], n.length > 1 && (s = t1(Ki, n)), n = n[n.length - 1], n = n === "*" ? "*" : No(n), n in ft || (ft[n] = []), ft[n].push({
      keyup: l,
      keydown: c,
      scope: r,
      mods: s,
      shortcut: i[a],
      method: e,
      key: i[a],
      splitKey: h,
      element: o
    });
  if (typeof o != "undefined" && window) {
    if (!hn.has(o)) {
      const g = function() {
        let m = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : window.event;
        return Of(m, o);
      }, p = function() {
        let m = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : window.event;
        Of(m, o), lC(m);
      };
      hn.set(o, {
        keydownListener: g,
        keyupListenr: p,
        capture: d
      }), Jl(o, "keydown", g, d), Jl(o, "keyup", p, d);
    }
    if (!go) {
      const g = () => {
        lt = [];
      };
      go = {
        listener: g,
        capture: d
      }, Jl(window, "focus", g, d);
    }
  }
}
function cC(n) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "all";
  Object.keys(ft).forEach((e) => {
    ft[e].filter((s) => s.scope === t && s.shortcut === n).forEach((s) => {
      s && s.method && s.method();
    });
  });
}
function Jh(n) {
  const t = Object.values(ft).flat();
  if (t.findIndex((i) => {
    let {
      element: s
    } = i;
    return s === n;
  }) < 0) {
    const {
      keydownListener: i,
      keyupListenr: s,
      capture: r
    } = hn.get(n) || {};
    i && s && (io(n, "keyup", s, r), io(n, "keydown", i, r), hn.delete(n));
  }
  if ((t.length <= 0 || hn.size <= 0) && (Object.keys(hn).forEach((s) => {
    const {
      keydownListener: r,
      keyupListenr: o,
      capture: a
    } = hn.get(s) || {};
    r && o && (io(s, "keyup", o, a), io(s, "keydown", r, a), hn.delete(s));
  }), hn.clear(), Object.keys(ft).forEach((s) => delete ft[s]), go)) {
    const {
      listener: s,
      capture: r
    } = go;
    io(window, "focus", s, r), go = null;
  }
}
const ql = {
  getPressedKeyString: nC,
  setScope: s1,
  getScope: zo,
  deleteScope: aC,
  getPressedKeyCodes: iC,
  getAllKeyCodes: sC,
  isPressed: oC,
  filter: rC,
  trigger: cC,
  unbind: r1,
  keyMap: Lo,
  modifier: Ki,
  modifierMap: Sa
};
for (const n in ql)
  Object.prototype.hasOwnProperty.call(ql, n) && (dt[n] = ql[n]);
if (typeof window != "undefined") {
  const n = window.hotkeys;
  dt.noConflict = (t) => (t && window.hotkeys === dt && (window.hotkeys = n), dt), window.hotkeys = dt;
}
const hC = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGYAAABmCAYAAAA53+RiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAZqADAAQAAAABAAAAZgAAAACBRx3mAAAKZ0lEQVR4Ae2d65PVRBDFWUF8IAoiLIJICaVAUSgUfvH//2RpgRRUCSgI5QIFAiryfrieX3Y6Jtnk5nGTubn3dlf15j3Tc066e2aSzd2yxWWUCKyM0qoJRq2vr2Pz1qCsv5VRrW5Zz+i/Wn8jfbWyssL+uZFREyMSAP3tjG7TOqQYIVpN1tkuavHYa+14FfS5lk9FFvtGKaMiJniDEbFdiEGE2QiI5gGs4wnmHew3j+D8rBdRBmWh7wQ1cl9q+0nQxyKKckYh1uiZGiNCAM9AM5vsDn/Z952t+t5VfTukHwSFSIh9JH2o+h5rOVMxEKIbEbzDyOAOBhhCzQsBwzKKBDveV2UfS3dJuUmo/4H0nmzBM6NLdGIKhHCn4hkvpDNP0LINez6S7pFCEqHtnvRuzJtF9aXxm/VBJUMIsR4PIb4/n9UdWddY2fuezjkghSS8+Q/pmuzlRhpconiMGklCp6HUR5iAkNEkWtlTKbKdfARBq1JIuSnb8aJBZVBi1ChCA4TgIRDxTI2aScxW3VOJ2kJn4aj0QymdhF/VlqdaDiKDEaOGELK42xA8hNA196J24TlHpESB62rX2hCN6p0YGU6ZEILhuD5eYmMMbc6/qI207Zh0r5Tcc1lt7DX39EqMDCZkQQpLur30thZW1N5DatyXUtp5Ue0lxPUivREjI+n/W+ia21zSFlW1m5zztZQx2QWRc79tGWXn90JMIIVBGomdOaiFCl1lwGX3qf2EtrNSxkCX1P5b2eNd1qcmRkbZHBS9rqUjxUAXDoTvM1LyzhWRc92OdVlORUyGlDcyZLCuY5eGzeIa4QGe30g/k/4sTK51tYO80ElkhOWU107KBoTCgRD+UyDopJZMwP7eBeBOxARSkpzipJTCfkF76QidDuTcLT1rwk5G5q1EFRFLGc0nOaXVxUtysm5WsPlB+pf0rDCjU9BKWhGjCoihkII8Ca67seV/cwgIGwac30t5WnpG2NFzayytiFGpkILHLG3vqzGyOlHkMA11TkpYOyVtLI2JEeN0i2F9tFP1jVsd8USRQzi7LN0rDD9vWnUjYlQg51myX+hplqbAtTlP5NzQ+Twq+EpY8ji7VhoRo1LSvFJbop9QhcAlHeBZFJOftVJLTCaELdwscS06PZ4gr4GUX6S7hOn+uqInEqMC6IV5CKtDseFxkXNbp/4pPSpsJ44hJxKjAghhnPNM6tIPAldVDKQcnlRcJTHBW5jK7v29rkkGLfoxeQ3vrN2RfiqMK8c2lcToQveW4e4Smz87WFVFKTEFb5nLlyeqGjyG/fIaUgOPpPdX5ZpSYnSBPR723DIck3gN+Jf20KqIIYzxZmSvLxgM18b5K1nY8vzqoXRfmfWbiAkJifkwJt9chkWAcLZdmPPeQE42EaOjNspfiPfAcq0d3wZjGgaevIabkxwxmaTPq0dL9UJFDpVIG8KY5zb8VwGzATkuchs6gRlk9nkYEwiRBGLAPPcwrUgMA0oRuRivs0YCdtpqGHDSycrNOheJwWM8t0wLdYvrQ8r4R5fszF6WEqMYR0/MicmiE28dr6F3lk7RpMQEUjDFH4SBQlzBY+gIpOGsSAz5he6bS0QEhDkzLBBjQ5WkN2Am4EZOiqERf0lPuDSUsdMnLOMTYjVCDL3iRJJQFgaWPLzxubEAzAwW5PZtgYs0lEEKJHkomwEjoUqIIc/QM06JoavM830OuMwGAXOK5F0A65WxdGJmQ4jVilOg8JB6jBMDGrMVi1alxPiM8uzIMY9JopiFMnIMYqxtbPnfmAgY9jliMMBIimmM15VHAHKSqGVksEFss+386b4VAwHDPvGc3IYTEwP/yjqsV5wjBo+BJCOq8mo/MBgCYA8POWLYgDHrBGjVJTICSTdZdeaIYY6MA+nsZmSjvLoNp8BjkolkC108ToaYdHbTkYqOAE4BMclEckJMeO7MXE0ygRbdJK8QBJgjS78Lah7DAbwmfYLGDpeoCJDfbSIz1wuDGPusVVSLvLIEAYhJn4dlPYbnzlv1oMa9JvKdknk7Jn11LEsMr9DQAci93xTZxmWtznJ7+oZSSkx4O4YDTkz82wNiSPzJGIbqU2KCLXjNTnvuHPb5YngE6Cqn3kJ1RWJ48YyT0hfPOMllOATkBHgLKSTNL9RWJOZv7cOdPuGgSxQEGNQz2q8mJsQ4/plmj5gskhbFymWqJKQMiOHDSYz6UykD/76OEs52p2f5ylAIWBjL5Rcq20SMmOOjzrjVKie4DIoA3sI3RdMRv9W2iZhwgE847Zar8R0ZlwEQELaM9PGY0v/eqyLmji4g5h2SugyDADMsJP3mxMi1mLOBnH1i1qdoBESfkvGWyn9CrvIY7LglpX99mA2XXhFgsphhSeWXRyqJkdfQAbgt5XsnPuAUEH1IE2+hnkpighE3tCSsnQjbvpgeATpUeEtpbrHiJxITcs01ncwHAg7aRb7shoAwpHtMb6z288gTiaF6kUMngNkAvoDKwNOlAwLCjnxNbmEWedO4pVhkLTHhgstaQsqpYgG+3RgBGxNWJvxsSY2IEcM8DrgiXRXzX2QL8PV6BDIhjC/xps9cJl3ZiBgKUIE3tbgrPaGK+FVVlwYICCtyCrmFqZfcDPKkyxsTEwq5qCW9CX7hgekElwkICCPyCiGMEX6jEGbFtSJGjJO07EcEvlPFyf8LWmG+/B+BDClMbbX+mHgrYqhW5PAjAj9K+Srdt8EArboUEGAqC3x51tIor2Svb00MF6sics15KU86T0tdMgjoZoUUcguekr4rljmldrVzKFKFazKAPHNcS9yV34BkudQSSAFXJig7kQKAnYnhYlV8PZByjLK0fl77SHRLJ2q7DSCNlMY9sDKwKGxqkVEHVMhJKU8/z4mc2pHt1JWOqIBACr0vUkPn8JVtUi/EUKCMI98wM8Cd0uvvDqu80YraTS5hqgUsSfSdw1e2kb0RQ6Eykp4ansOAit+7X9NyYUXtJcdCCmR06n1VgdMrMVQiY4mxx6V4EB98vrpooU1tBDfreRkpvXZ8eidGBici43lMcERKvvlN5NDFnnsJXkJEQOh5TZXkN4rZ/HcwYqhKjSAhHpUS4njLE4KeaDl3oraQS/ASErx5SeuBY9OGD0qMGaFG8Yvdh6U0jvB2WwRNfIKnc0Yhsh0i8BAeexCuyCWD9zqjEKPGWO4hvEES8lB6R41sNbmXXBnhT/CQLCGErMq3Wvo2KRoxZrgazJ23KqVzgAcx9/ZA+kgkDRYaVH6tyDbwwD56W3Ri8BBeX41GiOpKJDoxVnG4I/GePVLAIG5DEo+xa5+J65zeJNws5h2Uyw1CqOX32XrtbVF4E5kZMVnjBAyvR/ESO50EbGJah05CogKn13yk+vAGbgZTrSZk4B2j+LG8URADKogAI9FC0g4pPTqAQ/AmYnxW2cedbWp3Nm2iHJYo4bKo2pV+7IBEnuisvANjijIqYorGhTsbghhdQxJ3usV+rSbgQoyRwtKU4xxD2Af4eCKEGhF2XLvGJaMmpgwqkYXNkIQXsJ71DggwomwJGW/G5A2yx2VeEfgPPUASVA2Hk1IAAAAASUVORK5CYII=", dC = `<?xml version="1.0" encoding="UTF-8"?>
<svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <linearGradient id="grad1" x1="22.39%" y1="67.34%" x2="56.24%" y2="-36.34%">
            <stop stop-color="#FFFFFF" offset="0%"/>
            <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="100%"/>
        </linearGradient>
    </defs>
    <g fill-rule="nonzero" transform="translate(3.39, 2.29)">
        <path d="M14.39,3.17C14.82,3.17,15.17,3.52,15.17,3.96C15.17,4.4,14.82,4.75,14.39,4.75L14.06,4.75L13.16,15.72C13.08,16.68,12.29,17.42,11.34,17.42H3.87C2.92,17.42,2.13,16.68,2.06,15.72L1.15,4.75L0.83,4.75C0.4,4.75,0.05,4.4,0.05,3.96C0.05,3.52,0.4,3.17,0.83,3.17L14.39,3.17ZM12.49,4.75L2.72,4.75L3.61,15.59C3.62,15.71,3.7,15.8,3.81,15.82L3.87,15.83H11.34C11.48,15.83,11.59,15.73,11.6,15.59L12.49,4.75ZM6.04,7.39C6.48,7.39,6.83,7.74,6.83,8.18V12.4C6.83,12.84,6.48,13.19,6.04,13.19C5.61,13.19,5.26,12.84,5.26,12.4V8.18C5.26,7.74,5.61,7.39,6.04,7.39ZM9.17,7.39C9.61,7.39,9.96,7.74,9.96,8.18V12.4C9.96,12.84,9.61,13.19,9.17,13.19C8.74,13.19,8.39,12.84,8.39,12.4V8.18C8.39,7.74,8.74,7.39,9.17,7.39ZM10.22,0C10.65,0,11,0.35,11,0.79C11,1.23,10.65,1.58,10.22,1.58H5C4.57,1.58,4.22,1.23,4.22,0.79C4.22,0.35,4.57,0,5,0H10.22Z" fill="url(#grad1)"/>
    </g>
</svg>`, uC = {
  auto: "",
  pen: "",
  "pen-forbidden": "",
  "pen-crosshair": "",
  "pne-polygon": "",
  "pen-circle": "",
  "crosshair-rectangle": "",
  "crosshair-circle": ""
}, fC = {
  position: "absolute",
  width: "34px",
  height: "34px",
  transform: "translate(-50%, -40px)",
  borderRadius: "50%",
  cursor: "pointer",
  zIndex: "9999",
  userSelect: "none",
  display: "flex",
  pointerEvents: "auto",
  alignItems: "center",
  justifyContent: "center",
  backgroundSize: "34px 34px",
  backgroundPosition: "center",
  backgroundRepeat: "no-repeat"
}, pC = `
  <div style="width: 32px; height: 32px; background-color: rgba(0, 0, 0, 0.5); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
    ${dC}
  </div>
`;
class o1 {
  constructor(t) {
    u(this, "container");
    u(this, "deleteButton");
    this.container = t != null ? t : document.documentElement;
  }
  /**
   * @param type - The type of the cursor.
   */
  setType(t) {
    const e = uC[t];
    e ? this.container.style.cursor = `url(${e}), auto` : this.container.style.cursor = t;
  }
  showDeleteButton(t) {
    const { clientX: e, clientY: i, container: s = this.container, onClick: r } = t;
    let o = this.deleteButton;
    return o || (o = document.createElement("div"), Object.assign(o.style, fC), o.style.backgroundImage = `url(${hC})`, o.innerHTML = pC), this.deleteButton = o, s.appendChild(o), o.style.left = `${e}px`, o.style.top = `${i}px`, o.onclick = () => {
      s.removeChild(o), r();
    }, o;
  }
  removeDeleteButton() {
    this.deleteButton && this.deleteButton.remove();
  }
  tip(t) {
    return () => this.closeTip();
  }
  closeTip() {
  }
  reset() {
    this.container.style.cursor = "auto";
  }
}
class mC extends Pt {
  constructor(e, i) {
    super();
    u(this, "name", "MeasurePlugin");
    u(this, "currentMeasureMesh");
    u(this, "five");
    u(this, "group");
    u(this, "_pointSelector");
    u(this, "_fiveDomEvents");
    u(this, "_cursor");
    u(this, "_config");
    u(this, "lineStyle", {
      lengthEnable: !0,
      occlusionVisibility: !0,
      lengthUnit: "m"
    });
    u(this, "polygonStyle", {
      lengthEnable: !0,
      occlusionVisibility: !0,
      opacity: 0.2,
      lengthUnit: "m"
    });
    /**
     * @description Initialize event listeners for all existing meshes
     */
    u(this, "initEventListeners", () => {
      this.group.children.forEach(this.addMeshEventListeners);
    });
    /**
     * @description 开始测量
     */
    u(this, "measure", () => {
      this.listener.addMeasureListener(), dt.unbind("delete, backspace"), this.group.children.forEach((p) => p.unselect()), this.cursor.removeDeleteButton();
      const e = new Lf({
        lineStyle: this.lineStyle,
        polygonStyle: this.polygonStyle
      });
      this.currentMeasureMesh = e, e.line.setStyle({ cssStyle: "pointer-events: none;" }), this.pointSelector.actionIfNoIntersection = "disable", this.updateSelectAdsorbedHelper();
      const i = new ts({ occlusionMode: "depthTest", occlusionVisibility: !0 }), s = new To(de(_({}, this.lineStyle), { dashed: !0, cssStyle: "pointer-events: none;" })), r = new Vr(this.polygonStyle), o = new fi(de(_({}, this.lineStyle), {
        lineOpacity: 0.5,
        lineColor: 3407837,
        dashed: !0,
        cssStyle: "pointer-events: none; opacity: 0.5;"
      })), a = new fi(de(_({}, this.lineStyle), {
        lineOpacity: 0.5,
        lineColor: 3407837,
        dashed: !0,
        cssStyle: "pointer-events: none; opacity: 0.5;"
      })), l = new ts({ occlusionMode: "depthTest", occlusionVisibility: !0, color: 3407837, opacity: 0.5 }), c = () => {
        i.removeFromParent(), s.removeFromParent(), r.removeFromParent(), o.removeFromParent(), a.removeFromParent(), l.removeFromParent();
      };
      this.group.add(e);
      const h = (p) => {
        if (!p) {
          c();
          return;
        }
        if (e.points.length === 0 && (this.pointSelector.actionIfNoIntersection = "disable", this.group.addIfNotExists(i), i.position.copy(p.point)), e.points.length >= 1)
          if (this.pointSelector.actionIfNoIntersection = "virtualPoint", i.removeFromParent(), this.group.addIfNotExists(s), s.setPoints([e.points.at(-1), p.point]), p.isAdsorbed)
            o.removeFromParent(), a.removeFromParent(), l.removeFromParent();
          else {
            const m = e.points.at(-1);
            if (Math.abs(p.point.y - m.y) > 0.2) {
              const b = new P.Vector3(p.point.x, m.y, p.point.z);
              o.setPoints([m, b]), a.setPoints([b, p.point]), l.position.copy(b);
            } else {
              let b = new P.Vector3();
              Math.abs(p.point.x - m.x) < Math.abs(p.point.z - m.z) ? b = new P.Vector3(p.point.x, m.y, m.z) : b = new P.Vector3(m.x, m.y, p.point.z), o.setPoints([m, b]), a.setPoints([b, p.point]), l.position.copy(b);
            }
            this.group.addIfNotExists(o, a, l);
          }
        if (e.points.length >= 2) {
          const m = [...e.points, p.point];
          e1(m) ? (r.setPoints(m), this.group.addIfNotExists(r)) : r.removeFromParent();
        }
      }, d = (p) => {
        p && (c(), e.setPoints([...e.points, p.point]), this.updateSelectAdsorbedHelper(), e.isPolygon && this.pointSelector.disable());
      }, f = () => {
        var p, m;
        e == null || e.setPoints(e.points.slice(0, -1)), c(), (m = (p = this.pointSelector.pointSelectorHelper) == null ? void 0 : p.magnifier) == null || m.render(), this.updateSelectAdsorbedHelper(), this.five.needsRender = !0;
      }, g = () => {
        this.pointSelector.off("intersectionUpdate", h), this.pointSelector.off("select", d), this.pointSelector.off("disable", g), this.off("undo", f), e.line.setStyle({ cssStyle: "pointer-events: auto;" }), c(), e.points.length < 2 ? e.removeFromParent() : this.addMeshEventListeners(e), e.__five_pano_index = this.five.panoIndex, this.currentMeasureMesh = null, this.listener.removeMeasureListener(), this.emit("measureEnd");
      };
      this.on("undo", f), this.pointSelector.on("intersectionUpdate", h), this.pointSelector.on("select", d), this.pointSelector.on("disable", g), this.pointSelector.enable();
    });
    /**
     * @description 结束测量
     */
    u(this, "endMeasure", () => {
      this.pointSelector.disable();
    });
    /**
     * Enable or disable the display of length measurements
     * @param enable - Whether to display length measurements
     */
    u(this, "setLengthEnable", (e) => {
      this.lineStyle.lengthEnable = e, this.polygonStyle.lengthEnable = e, this.group.children.forEach((i) => {
        i.changeConfig({
          lineStyle: _({}, this.lineStyle),
          polygonStyle: _({}, this.polygonStyle)
        }), this.addMeshEventListeners(i);
      }), this.currentMeasureMesh && this.currentMeasureMesh.changeConfig({
        lineStyle: _({}, this.lineStyle),
        polygonStyle: _({}, this.polygonStyle)
      }), this.five.needsRender = !0;
    });
    /**
     * Switch the measurement unit without resetting the plugin
     * @param unit - The new unit to use ('m' for metric or 'ft' for imperial)
     */
    u(this, "setUnit", (e) => {
      if (this._config && (this._config.unit = e), this.lineStyle.lengthUnit = e, this.polygonStyle.lengthUnit = e, this.group.children.forEach((i) => {
        try {
          i.changeConfig({
            lineStyle: _({}, this.lineStyle),
            polygonStyle: _({}, this.polygonStyle)
          }), this.addMeshEventListeners(i);
        } catch (s) {
        }
      }), this.currentMeasureMesh)
        try {
          this.currentMeasureMesh.changeConfig({
            lineStyle: _({}, this.lineStyle),
            polygonStyle: _({}, this.polygonStyle)
          });
        } catch (i) {
        }
      this.five.needsRender = !0;
    });
    /**
     * @description 取消本次测量
     */
    u(this, "cancel", () => {
      var e;
      (e = this.currentMeasureMesh) == null || e.removeFromParent(), this.pointSelector.disable();
    });
    /**
     * @description 撤销上一步
     */
    u(this, "undo", () => {
      this.emit("undo");
    });
    /**
     * @description 清空正在测量的内容
     */
    u(this, "clearCurrentMeasure", () => {
      var e;
      (e = this.currentMeasureMesh) == null || e.removeFromParent(), this.currentMeasureMesh = null, this.pointSelector.disable();
    });
    /**
     * @description 清空所有测量内容
     */
    u(this, "clear", () => {
      this.currentMeasureMesh = null, this.pointSelector.disable(), this.group.children.forEach(this.removeMeshEventListeners), this.group.removeChildren(), this.cursor.removeDeleteButton();
    });
    u(this, "dispose", () => {
      this.listener.removeMeasureListener(), this.listener.removeClickListener(), this.pointSelector.disable(), this.clear();
    });
    // eslint-disable-next-line @typescript-eslint/member-ordering
    u(this, "listener", {
      // 点击事件
      addClickListener: () => {
        this.five.on("panoArrived", this.onMoveToPano), this.five.on("modeChange", this.onModeChange), dt("delete, backspace", this.deleteSelectedMesh), this.initEventListeners();
      },
      removeClickListener: () => {
        this.group.children.forEach((e) => {
          var i, s;
          (i = e.line.doms) == null || i.forEach((r) => {
            r != null && r.container && (r.container.onclick = null, r.container.onmouseenter = null, r.container.onmouseleave = null);
          }), (s = e.polygon.areaDom) != null && s.container && (e.polygon.areaDom.container.onclick = null, e.polygon.areaDom.container.onmouseenter = null, e.polygon.areaDom.container.onmouseleave = null);
        }), this.fiveDomEvents.clear(), this.five.off("panoArrived", this.onMoveToPano), this.five.off("modeChange", this.onModeChange), dt.unbind("delete, backspace");
      },
      // 绘制快捷键
      addMeasureListener: () => {
        dt("ctrl+z, command+z", this.undo), dt("esc", this.cancel), dt("enter", this.endMeasure), this.five.on("mode.change", this.endMeasure), this.five.on("pano.moveTo", this.endMeasure), this.five.on("model.changeShownFloor", this.endMeasure);
      },
      removeMeasureListener: () => {
        dt.unbind("ctrl+z, command+z"), dt.unbind("esc"), dt.unbind("enter"), this.five.off("mode.change", this.endMeasure), this.five.off("pano.moveTo", this.endMeasure), this.five.off("model.changeShownFloor", this.endMeasure);
      }
    });
    u(this, "onMoveToPano", (e) => {
      const i = this.group.children.filter((r) => r !== this.currentMeasureMesh), s = new yo();
      i.forEach((r) => {
        var a;
        if (r.unselect(), r.__five_pano_index === e) {
          r.visible = !0;
          return;
        }
        ((a = r.line.points) == null ? void 0 : a.some((l) => {
          var m, v;
          const c = l.clone().sub(this.five.camera.position).normalize();
          s.set(this.five.camera.position, c);
          const h = (v = (m = this.five.model.intersectRaycaster(s, void 0, !0)) == null ? void 0 : m[0]) == null ? void 0 : v.point;
          if (!h)
            return !0;
          const d = 0.01, f = l.distanceTo(this.five.camera.position);
          return h.distanceTo(this.five.camera.position) + d > f;
        })) ? r.visible = !0 : r.visible = !1, this.five.needsRender = !0;
      });
    });
    u(this, "onModeChange", (e) => {
      e === "Mapview" && this.group.children.forEach((i) => {
        i.visible = !0;
      });
    });
    u(this, "onClick", ({ origDomEvent: e, target: i }) => {
      var c;
      const s = i;
      if (!s)
        return;
      if (s.selected) {
        s.unselect(), this.cursor.removeDeleteButton();
        return;
      }
      let r, o;
      if (e && ("touches" in e && e.touches && e.touches[0] ? (r = e.touches[0].clientX, o = e.touches[0].clientY) : "clientX" in e && "clientY" in e && (r = e.clientX, o = e.clientY)), r === void 0 || o === void 0)
        return;
      this.group.children.forEach((h) => h.unselect()), s.select();
      const a = () => {
        this.removeMeshEventListeners(s), s.removeFromParent(), this.cursor.removeDeleteButton(), this.five.needsRender = !0;
      }, l = ((c = this.five.getElement()) == null ? void 0 : c.parentElement) || document.body;
      this.cursor.showDeleteButton({
        clientX: r,
        clientY: o,
        container: l,
        onClick: a
      }), this.five.once("cameraUpdate", () => {
        s.unselect(), this.cursor.removeDeleteButton();
      });
    });
    u(this, "onHover", ({ target: e }) => {
      if (this.currentMeasureMesh)
        return;
      const i = e;
      i && i.hover();
    });
    u(this, "onUnHover", ({ target: e }) => {
      if (this.currentMeasureMesh)
        return;
      const i = e;
      i && i.unhover();
    });
    u(this, "deleteSelectedMesh", () => {
      this.group.children.filter((i) => i.selected).forEach((i) => {
        this.removeMeshEventListeners(i), i.removeFromParent();
      }), this.cursor.removeDeleteButton(), this.five.needsRender = !0;
    });
    // Helper method to remove all event listeners from a mesh
    u(this, "removeMeshEventListeners", (e) => {
      var i, s;
      (i = e.line.doms) == null || i.forEach((r) => {
        r != null && r.container && (r.container.onclick = null, r.container.onmouseenter = null, r.container.onmouseleave = null);
      }), (s = e.polygon.areaDom) != null && s.container && (e.polygon.areaDom.container.onclick = null, e.polygon.areaDom.container.onmouseenter = null, e.polygon.areaDom.container.onmouseleave = null), this.fiveDomEvents.removeEventListener(e, "click"), this.fiveDomEvents.removeEventListener(e, "hover"), this.fiveDomEvents.removeEventListener(e, "unHover");
    });
    u(this, "updateSelectAdsorbedHelper", () => {
      if (!this.currentMeasureMesh || this.currentMeasureMesh.points.length === 0) {
        this.pointSelector.setAdherePoints(null), this.pointSelector.adhereLine = [], this.pointSelector.adherePlane = [];
        return;
      }
      if (this.currentMeasureMesh.points.length >= 1) {
        this.pointSelector.setAdherePoints([this.currentMeasureMesh.points[0]]);
        const e = this.currentMeasureMesh.points.at(-1);
        this.pointSelector.adhereLine = [
          new P.Line3(new P.Vector3(1, 0, 0).add(e), new P.Vector3(-1, 0, 0).add(e)),
          new P.Line3(new P.Vector3(0, 1, 0).add(e), new P.Vector3(0, -1, 0).add(e)),
          new P.Line3(new P.Vector3(0, 0, 1).add(e), new P.Vector3(0, 0, -1).add(e))
        ], this.pointSelector.adherePlane = [];
      }
      if (this.currentMeasureMesh.points.length >= 3) {
        const e = new P.Plane().setFromCoplanarPoints(
          this.currentMeasureMesh.points[0],
          this.currentMeasureMesh.points[1],
          this.currentMeasureMesh.points[2]
        );
        this.pointSelector.adherePlane = [e];
      } else
        this.pointSelector.adherePlane = [];
    });
    u(this, "addMeshEventListeners", (e) => {
      var i, s;
      this.removeMeshEventListeners(e), (i = e.line.doms) == null || i.forEach((r) => {
        r != null && r.container && (r.container.onclick = (o) => this.onClick({ origDomEvent: o, target: e }), r.container.onmouseenter = () => this.onHover({ target: e }), r.container.onmouseleave = () => this.onUnHover({ target: e }));
      }), (s = e.polygon.areaDom) != null && s.container && (e.polygon.areaDom.container.onclick = (r) => this.onClick({ origDomEvent: r, target: e }), e.polygon.areaDom.container.onmouseenter = () => this.onHover({ target: e }), e.polygon.areaDom.container.onmouseleave = () => this.onUnHover({ target: e })), this.fiveDomEvents.addEventListener(e, "click", this.onClick), this.fiveDomEvents.addEventListener(e, "hover", this.onHover), this.fiveDomEvents.addEventListener(e, "unHover", this.onUnHover);
    });
    /**
     * @description Load measurement data from external source
     * @param data Array of point data for measurements
     */
    u(this, "load", (e) => {
      this.clear(), e.forEach((i) => {
        const s = new Lf({
          lineStyle: this.lineStyle,
          polygonStyle: this.polygonStyle
        });
        s.setPoints(i.points), this.group.add(s), this.addMeshEventListeners(s), s.__five_pano_index = this.five.panoIndex;
      }), this.five.needsRender = !0;
    });
    this.five = e;
    const s = { unit: "m", lengthEnable: !0 };
    this.config = i ? _(_({}, s), i) : s, this.group = new ri(), this.group.name = "MeasureGroup", this.five.scene.add(this.group), this.five.on("panoArrived", this.onMoveToPano), this.five.on("modeChange", this.onModeChange), dt("delete, backspace", this.deleteSelectedMesh), this.initEventListeners();
  }
  get pointSelector() {
    return this._pointSelector ? this._pointSelector : (this._pointSelector = new al(this.five, { mode: "cursor", helper: { pointHelper: "highlight" } }), this._pointSelector);
  }
  get fiveDomEvents() {
    return this._fiveDomEvents ? this._fiveDomEvents : (this._fiveDomEvents = new Pr(this.five, { fiveModels: null }), this._fiveDomEvents);
  }
  get cursor() {
    return this._cursor ? this._cursor : (this._cursor = new o1(), this._cursor);
  }
  get config() {
    return this._config;
  }
  set config(e) {
    var i, s;
    this._config = e, this.lineStyle.lengthUnit = e.unit, this.polygonStyle.lengthUnit = e.unit, e.lengthEnable !== void 0 && (this.lineStyle.lengthEnable = e.lengthEnable, this.polygonStyle.lengthEnable = e.lengthEnable), (s = (i = this.group) == null ? void 0 : i.children) == null || s.forEach((r) => r.changeConfig({ lineStyle: this.lineStyle, polygonStyle: this.polygonStyle }));
  }
}
const oD = (n, t) => new mC(n, t), a1 = Bh(null);
function gC(n) {
  De(n, "svelte-19zi46m", ".PanoSpatialTagPlugin__tag-origin.svelte-19zi46m{position:absolute;width:0.5rem;height:0.5rem;border-radius:50%;background:#fff;box-shadow:0 0 .6rem #fff;transform:translate(-50%, -50%) scale(1);transform-origin:center center;animation:svelte-19zi46m-PanoSpatialTagPlugin__tag-origin 1.2s forwards;pointer-events:auto}.PanoSpatialTagPlugin__tag-origin.svelte-19zi46m:after{content:'';position:absolute;top:50%;height:50%;width:2rem;height:2rem;transform:translate(-50%, -50%)}.PanoSpatialTagPlugin__tag-origin-destroy.svelte-19zi46m{transform:translate(-50%, -50%) scale(0.6);animation:svelte-19zi46m-PanoSpatialTagPlugin__tag-origin-destroy 1.2s forwards .7s}@keyframes svelte-19zi46m-PanoSpatialTagPlugin__tag-origin{0%{transform:translate(-50%, -50%) scale(1);opacity:0}100%{transform:translate(-50%, -50%) scale(0.6);opacity:1 }}@keyframes svelte-19zi46m-PanoSpatialTagPlugin__tag-origin-destroy{0%{transform:translate(-50%, -50%) scale(0.6);opacity:1}10%{transform:translate(-50%, -50%) scale(1);opacity:0.9}100%{transform:translate(-50%, -50%) scale(1);opacity:0}}");
}
function jf(n, t, e) {
  const i = n.slice();
  return i[3] = t[e], i;
}
function Rf(n) {
  let t, e = `${/*origin*/
  n[3].top}%`, i = `${/*origin*/
  n[3].left}%`, s, r;
  function o() {
    return (
      /*click_handler*/
      n[2](
        /*origin*/
        n[3]
      )
    );
  }
  return {
    c() {
      t = W("i"), y(t, "class", "svelte-19zi46m"), ye(t, "PanoSpatialTagPlugin__tag-origin", !0), ye(
        t,
        "PanoSpatialTagPlugin__tag-origin-destroy",
        /*origin*/
        n[3].destroying
      ), Q(t, "top", e), Q(t, "left", i), Q(
        t,
        "visibility",
        /*origin*/
        n[3].front ? "visible" : "hidden"
      );
    },
    m(a, l) {
      X(a, t, l), s || (r = Oe(t, "click", o), s = !0);
    },
    p(a, l) {
      n = a, l & /*origins*/
      1 && ye(
        t,
        "PanoSpatialTagPlugin__tag-origin-destroy",
        /*origin*/
        n[3].destroying
      ), l & /*origins*/
      1 && e !== (e = `${/*origin*/
      n[3].top}%`) && Q(t, "top", e), l & /*origins*/
      1 && i !== (i = `${/*origin*/
      n[3].left}%`) && Q(t, "left", i), l & /*origins*/
      1 && Q(
        t,
        "visibility",
        /*origin*/
        n[3].front ? "visible" : "hidden"
      );
    },
    d(a) {
      a && U(t), s = !1, r();
    }
  };
}
function vC(n) {
  let t, e = (
    /*origins*/
    n[0]
  ), i = [];
  for (let s = 0; s < e.length; s += 1)
    i[s] = Rf(jf(n, e, s));
  return {
    c() {
      for (let s = 0; s < i.length; s += 1)
        i[s].c();
      t = Fe();
    },
    m(s, r) {
      for (let o = 0; o < i.length; o += 1)
        i[o] && i[o].m(s, r);
      X(s, t, r);
    },
    p(s, [r]) {
      if (r & /*origins, handleClick*/
      3) {
        e = /*origins*/
        s[0];
        let o;
        for (o = 0; o < e.length; o += 1) {
          const a = jf(s, e, o);
          i[o] ? i[o].p(a, r) : (i[o] = Rf(a), i[o].c(), i[o].m(t.parentNode, t));
        }
        for (; o < i.length; o += 1)
          i[o].d(1);
        i.length = e.length;
      }
    },
    i: se,
    o: se,
    d(s) {
      pi(i, s), s && U(t);
    }
  };
}
function AC(n, t, e) {
  let { origins: i } = t;
  const s = (o) => {
    a1.update(() => `${o}-PanoSpatialTagPlugin-${Date.now()}`);
  }, r = (o) => s(o.id);
  return n.$$set = (o) => {
    "origins" in o && e(0, i = o.origins);
  }, [i, s, r];
}
class bC extends Ie {
  constructor(t) {
    super(), Ce(this, t, AC, vC, Pe, { origins: 0 }, gC);
  }
}
function yC(n) {
  De(n, "svelte-9m6drd", `.PanoSpatialTagPlugin__tag-x.svelte-9m6drd.svelte-9m6drd{position:absolute;top:0;left:0;display:block;white-space:nowrap;box-sizing:border-box;width:25rem;height:14rem;color:#fff;transform:translate(0, -100%);transition:height 0.5s linear}.PanoSpatialTagPlugin__tag-shadow.svelte-9m6drd.svelte-9m6drd{content:'';position:absolute;width:30rem;height:30rem;top:-15rem;left:-15rem;z-index:-1;opacity:0;transition:opacity 0.8s 0.6s;background:url('https://vrlab-image4.ljcdn.com/release/web/PanoSpatialTagPlugin__blur.png');background-size:30rem 30rem}.PanoSpatialTagPlugin__tag-line.svelte-9m6drd.svelte-9m6drd{position:absolute;left:-1rem;width:2rem;height:100%;overflow:hidden}.PanoSpatialTagPlugin__tag-flagpole.svelte-9m6drd.svelte-9m6drd{position:absolute;top:0;left:1rem;height:calc(100% - 1.5rem);width:0.15rem;background:linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.1));box-shadow:0 0.1rem 0.5rem rgba(0, 0, 0, 0.2);opacity:0;transform:translate(-50%, 60%) scaleY(0);transition:transform 0.4s cubic-bezier(0.44, 0.44, 0.74, 0.98), opacity 0.4s cubic-bezier(0.44, 0.44, 0.74, 0.98), width 0.5s linear,
      height 0.5s linear;transform-origin:center bottom}.PanoSpatialTagPlugin__tag-line1.svelte-9m6drd.svelte-9m6drd{position:absolute;top:0;left:0.3rem;height:1.8rem;width:0.1rem;background:#fff;opacity:0;transform:translate(-50%, 200%) scaleY(0);transform-origin:center top}.PanoSpatialTagPlugin__tag-line2.svelte-9m6drd.svelte-9m6drd{position:absolute;top:0;left:0.5rem;height:1.8rem;width:0.1rem;background:#fff;opacity:0;transform:translate(-50%, 200%) scaleY(0);transform-origin:center top}.PanoSpatialTagPlugin__tag-show.svelte-9m6drd .PanoSpatialTagPlugin__tag-line1.svelte-9m6drd{animation:svelte-9m6drd-PanoSpatialTagPlugin__tag-line1 linear 0.5s forwards 0.45s}.PanoSpatialTagPlugin__tag-show.svelte-9m6drd .PanoSpatialTagPlugin__tag-line2.svelte-9m6drd{animation:svelte-9m6drd-PanoSpatialTagPlugin__tag-line2 linear 0.5s forwards 0.65s}.PanoSpatialTagPlugin__tag-x.PanoSpatialTagPlugin__tag-upside-down.svelte-9m6drd.svelte-9m6drd{transform:translate(0, 0)}.PanoSpatialTagPlugin__tag-upside-down.svelte-9m6drd .PanoSpatialTagPlugin__tag-line.svelte-9m6drd{transform:scaleY(-1)}.PanoSpatialTagPlugin__tag-animate.svelte-9m6drd.svelte-9m6drd{position:relative;height:100%;overflow:hidden;transform-origin:left top;transition:transform 0.5s linear}.PanoSpatialTagPlugin__tag-upside-down.svelte-9m6drd .PanoSpatialTagPlugin__tag-animate.svelte-9m6drd{transform-origin:left bottom}.PanoSpatialTagPlugin__tag-content.svelte-9m6drd.svelte-9m6drd{position:absolute;display:inline-block;transform:translate(-100%, 0);transition:transform 0.9s cubic-bezier(0, 0.65, 0.16, 1.08) 0.6s;padding-left:0.5rem;font-size:1rem}.PanoSpatialTagPlugin__tag-upside-down.svelte-9m6drd .PanoSpatialTagPlugin__tag-content.svelte-9m6drd{bottom:0}.PanoSpatialTagPlugin__tag-show.svelte-9m6drd .PanoSpatialTagPlugin__tag-flagpole.svelte-9m6drd{opacity:1;transform:translate(-50%, 0) scaleY(1)}.PanoSpatialTagPlugin__tag-upside-down.svelte-9m6drd .PanoSpatialTagPlugin__tag-shadow.svelte-9m6drd{top:unset;bottom:-15rem}.PanoSpatialTagPlugin__tag-show.svelte-9m6drd .PanoSpatialTagPlugin__tag-shadow.svelte-9m6drd{opacity:0.32}.PanoSpatialTagPlugin__tag-show.svelte-9m6drd .PanoSpatialTagPlugin__tag-content.svelte-9m6drd{transform:translate(0, 0)}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-flagpole.svelte-9m6drd{opacity:0;transform:translate(-50%, 60%) scaleY(0);transition:transform 0.5s 0.55s, opacity 0.4s 0.55s}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-shadow.svelte-9m6drd{opacity:0;transition:opacity 0.8s}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-content.svelte-9m6drd{transform:translate(-100%, 0);transition:transform 0.6s cubic-bezier(0.53, 0.06, 0.88, 0.59)}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-content .svelte-9m6drd{pointer-events:none}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-line1.svelte-9m6drd{opacity:0.5;transform:translate(-50%, 10%) scaleY(0);animation:svelte-9m6drd-PanoSpatialTagPlugin__tag-line1-hide linear 0.28s forwards 0.3s}.PanoSpatialTagPlugin__tag-hide.svelte-9m6drd .PanoSpatialTagPlugin__tag-line2.svelte-9m6drd{opacity:0.5;transform:translate(-50%, 0) scaleY(0);animation:svelte-9m6drd-PanoSpatialTagPlugin__tag-line2-hide linear 0.28s forwards 0.45s}@keyframes svelte-9m6drd-PanoSpatialTagPlugin__tag-line1{0%{opacity:0;transform:translate(-50%, 250%) scaleY(1)}50%{opacity:0.5;transform:translate(-50%, 135%) scaleY(1)}100%{opacity:0.5;transform:translate(-50%, 20%) scaleY(0)}}@keyframes svelte-9m6drd-PanoSpatialTagPlugin__tag-line2{0%{opacity:0;transform:translate(-50%, 250%) scaleY(1)}50%{opacity:0.5;transform:translate(-50%, 125%) scaleY(1)}100%{opacity:0.5;transform:translate(-50%, 0) scaleY(0)}}@keyframes svelte-9m6drd-PanoSpatialTagPlugin__tag-line1-hide{0%{opacity:0.5;transform:translate(-50%, 10%) scaleY(0)}50%{opacity:0.2;transform:translate(-50%, 105%) scaleY(1)}100%{opacity:0;transform:translate(-50%, 200%) scaleY(0)}}@keyframes svelte-9m6drd-PanoSpatialTagPlugin__tag-line2-hide{0%{opacity:0.5;transform:translate(-50%, 0) scaleY(0)}50%{opacity:0.2;transform:translate(-50%, 100%) scaleY(1)}100%{opacity:0;transform:translate(-50%, 200%) scaleY(0)}}`);
}
function wC(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f, g, p, m;
  return {
    c() {
      t = W("div"), e = W("div"), i = oe(), s = W("div"), r = W("i"), o = oe(), a = W("i"), l = oe(), c = W("i"), h = oe(), d = W("div"), f = W("div"), y(e, "class", "PanoSpatialTagPlugin__tag-shadow svelte-9m6drd"), Q(e, "transform", "translate(" + /*contentWidth*/
      n[7] / 2 * /*contentZoom*/
      n[3] * 3 + "px, " + /*contentHeight*/
      n[8] / 2 * /*upsideDown*/
      (n[1] ? -1 : 1) * /*contentZoom*/
      n[3] * 3 + "px) scale(" + 1 / /*contentZoom*/
      n[3] + ")"), y(r, "class", "PanoSpatialTagPlugin__tag-flagpole svelte-9m6drd"), Q(
        r,
        "width",
        /*lineWidthZoom*/
        n[4] + "rem"
      ), y(a, "class", "PanoSpatialTagPlugin__tag-line1 svelte-9m6drd"), y(c, "class", "PanoSpatialTagPlugin__tag-line2 svelte-9m6drd"), y(s, "class", "PanoSpatialTagPlugin__tag-line svelte-9m6drd"), y(f, "class", "PanoSpatialTagPlugin__tag-content svelte-9m6drd"), y(d, "class", "PanoSpatialTagPlugin__tag-animate svelte-9m6drd"), Q(d, "transform", "scale(" + /*contentZoom*/
      n[3] * 3 + ")"), y(t, "id", g = "PanoSpatialTagPlugin__" + /*id*/
      n[0]), Q(t, "height", 20 * /*lineHeightZoom*/
      n[5] + "rem"), y(t, "class", "svelte-9m6drd"), ye(t, "PanoSpatialTagPlugin__tag-x", !0), ye(
        t,
        "PanoSpatialTagPlugin__tag-upside-down",
        /*upsideDown*/
        n[1]
      ), ye(
        t,
        "PanoSpatialTagPlugin__tag-show",
        /*show*/
        n[10]
      ), ye(
        t,
        "PanoSpatialTagPlugin__tag-hide",
        /*show*/
        n[10] === !1 || /*destroying*/
        n[6]
      );
    },
    m(v, b) {
      X(v, t, b), R(t, e), R(t, i), R(t, s), R(s, r), R(s, o), R(s, a), R(s, l), R(s, c), R(t, h), R(t, d), R(d, f), f.innerHTML = /*content*/
      n[2], n[16](f), p || (m = Oe(
        f,
        "click",
        /*handleClickContent*/
        n[11]
      ), p = !0);
    },
    p(v, [b]) {
      b & /*contentWidth, contentZoom, contentHeight, upsideDown*/
      394 && Q(e, "transform", "translate(" + /*contentWidth*/
      v[7] / 2 * /*contentZoom*/
      v[3] * 3 + "px, " + /*contentHeight*/
      v[8] / 2 * /*upsideDown*/
      (v[1] ? -1 : 1) * /*contentZoom*/
      v[3] * 3 + "px) scale(" + 1 / /*contentZoom*/
      v[3] + ")"), b & /*lineWidthZoom*/
      16 && Q(
        r,
        "width",
        /*lineWidthZoom*/
        v[4] + "rem"
      ), b & /*content*/
      4 && (f.innerHTML = /*content*/
      v[2]), b & /*contentZoom*/
      8 && Q(d, "transform", "scale(" + /*contentZoom*/
      v[3] * 3 + ")"), b & /*id*/
      1 && g !== (g = "PanoSpatialTagPlugin__" + /*id*/
      v[0]) && y(t, "id", g), b & /*lineHeightZoom*/
      32 && Q(t, "height", 20 * /*lineHeightZoom*/
      v[5] + "rem"), b & /*upsideDown*/
      2 && ye(
        t,
        "PanoSpatialTagPlugin__tag-upside-down",
        /*upsideDown*/
        v[1]
      ), b & /*show*/
      1024 && ye(
        t,
        "PanoSpatialTagPlugin__tag-show",
        /*show*/
        v[10]
      ), b & /*show, destroying*/
      1088 && ye(
        t,
        "PanoSpatialTagPlugin__tag-hide",
        /*show*/
        v[10] === !1 || /*destroying*/
        v[6]
      );
    },
    i: se,
    o: se,
    d(v) {
      v && U(t), n[16](null), p = !1, m();
    }
  };
}
function PC(n, t, e) {
  let { id: i } = t, { upsideDown: s } = t, { content: r } = t, { contentZoom: o } = t, { lineWidthZoom: a } = t, { lineHeightZoom: l } = t, { destroying: c = !1 } = t, { folded: h } = t, { dispose: d } = t, { events: f } = t, { hooks: g } = t, p = 0, m = 0, v, b, w = setTimeout(
    () => {
      h || e(10, b = !0), w = void 0;
    },
    100
  );
  const x = (S) => {
    const V = Object.keys(f);
    let z = S.target;
    for (; z; ) {
      const O = z.getAttribute("class");
      if (!O) {
        z = z.parentNode;
        continue;
      }
      if (O.includes("PanoSpatialTagPlugin__tag-content")) {
        z = null;
        break;
      }
      V.forEach((A) => {
        O.includes(A) && f[A](i);
      }), z = z.parentNode;
    }
  };
  Ot(() => {
    g.emit("initTag", { id: i });
  });
  const k = a1.subscribe((S) => {
    if (S === null)
      return;
    const [V, z] = S.split("-PanoSpatialTagPlugin-");
    i === V && (g.emit("clickOrigin", { id: i, show: b }), w || (e(10, b = h), e(12, h = !h), w = setTimeout(
      () => {
        w = void 0;
      },
      1500
    )));
  });
  Lh(() => {
    e(7, p = v.offsetWidth), e(8, m = v.offsetHeight), !w && e(10, b = !h);
  }), oi(() => {
    g.emit("destroyTag", { id: i }), k(), d();
  });
  function T(S) {
    Ze[S ? "unshift" : "push"](() => {
      v = S, e(9, v);
    });
  }
  return n.$$set = (S) => {
    "id" in S && e(0, i = S.id), "upsideDown" in S && e(1, s = S.upsideDown), "content" in S && e(2, r = S.content), "contentZoom" in S && e(3, o = S.contentZoom), "lineWidthZoom" in S && e(4, a = S.lineWidthZoom), "lineHeightZoom" in S && e(5, l = S.lineHeightZoom), "destroying" in S && e(6, c = S.destroying), "folded" in S && e(12, h = S.folded), "dispose" in S && e(13, d = S.dispose), "events" in S && e(14, f = S.events), "hooks" in S && e(15, g = S.hooks);
  }, [
    i,
    s,
    r,
    o,
    a,
    l,
    c,
    p,
    m,
    v,
    b,
    x,
    h,
    d,
    f,
    g,
    T
  ];
}
let CC = class extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      PC,
      wC,
      Pe,
      {
        id: 0,
        upsideDown: 1,
        content: 2,
        contentZoom: 3,
        lineWidthZoom: 4,
        lineHeightZoom: 5,
        destroying: 6,
        folded: 12,
        dispose: 13,
        events: 14,
        hooks: 15
      },
      yC
    );
  }
};
const IC = {
  position: "absolute",
  top: "0px",
  left: "0px",
  width: "100%",
  height: "100%",
  pointerEvents: "none"
}, Bf = "<", Vf = ">", _f = "%", Hf = "locals", EC = "(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)", MC = {
  "&": "&amp",
  "<": "&lt",
  ">": "&gt",
  '"': "&#34",
  "'": "&#39"
}, Kt = {
  EVAL: "eval",
  ESCAPED: "escaped",
  RAW: "raw",
  COMMENT: "comment",
  LITERAL: "literal"
};
function Ff(n) {
  return n.replace(/;(\s*$)/, "$1");
}
function kC(n, t) {
  return new xC(n).compileFunction()(t);
}
class xC {
  constructor(t) {
    u(this, "templateText");
    u(this, "mode", null);
    u(this, "truncate", !1);
    u(this, "currentLine", 1);
    u(this, "source", "");
    u(this, "regex", new RegExp(EC));
    this.templateText = t;
  }
  compileFunction() {
    let t;
    const e = `  var __output = "";
  function __append(s) { if (s !== undefined && s !== null) __output += s }
  with (` + Hf + ` || {}) {
`, i = `  }
  return __output;
`, s = function(r) {
      return r == null ? "" : String(r).replace(/[&<>'"]/g, function(o) {
        return MC[o] || o;
      });
    };
    return this._generateSource(), this.source = e + this.source + i, t = this.source, t = "escapeFn = escapeFn || " + s.toString() + `;
` + t, new Function(Hf + ", escapeFn", t);
  }
  _generateSource() {
    this.templateText = this.templateText.replace(/[ \t]*<%_/gm, "<%_").replace(/_%>[ \t]*/gm, "_%>");
    const t = this._parseTemplateText(), e = _f, i = Bf, s = Vf;
    t && t.length && t.forEach((r, o) => {
      let a;
      if (r.indexOf(i + e) === 0 && r.indexOf(i + e + e) !== 0 && (a = t[o + 2], !(a == e + s || a == "-" + e + s || a == "_" + e + s)))
        throw new Error('Could not find matching close tag for "' + r + '".');
      this._scanLine(r);
    });
  }
  _parseTemplateText() {
    let t = this.templateText;
    const e = this.regex;
    let i = e.exec(t);
    const s = [];
    let r;
    for (; i; )
      r = i.index, r !== 0 && (s.push(t.substring(0, r)), t = t.slice(r)), s.push(i[0]), t = t.slice(i[0].length), i = e.exec(t);
    return t && s.push(t), s;
  }
  _addOutput(t) {
    if (this.truncate && (t = t.replace(/^(?:\r\n|\r|\n)/, ""), this.truncate = !1), !t)
      return t;
    t = t.replace(/\\/g, "\\\\"), t = t.replace(/\n/g, "\\n"), t = t.replace(/\r/g, "\\r"), t = t.replace(/"/g, '\\"'), this.source += '    ; __append("' + t + `")
`;
  }
  _scanLine(t) {
    const e = _f, i = Bf, s = Vf;
    switch (t.split(`
`).length - 1, t) {
      case i + e:
      case i + e + "_":
        this.mode = Kt.EVAL;
        break;
      case i + e + "=":
        this.mode = Kt.ESCAPED;
        break;
      case i + e + "-":
        this.mode = Kt.RAW;
        break;
      case i + e + "#":
        this.mode = Kt.COMMENT;
        break;
      case i + e + e:
        this.mode = Kt.LITERAL, this.source += '    ; __append("' + t.replace(i + e + e, i + e) + `")
`;
        break;
      case e + e + s:
        this.mode = Kt.LITERAL, this.source += '    ; __append("' + t.replace(e + e + s, e + s) + `")
`;
        break;
      case e + s:
      case "-" + e + s:
      case "_" + e + s:
        this.mode == Kt.LITERAL && this._addOutput(t), this.mode = null, this.truncate = t.indexOf("-") === 0 || t.indexOf("_") === 0;
        break;
      default:
        if (this.mode) {
          switch (this.mode) {
            case Kt.EVAL:
            case Kt.ESCAPED:
            case Kt.RAW:
              t.lastIndexOf("//") > t.lastIndexOf(`
`) && (t += `
`);
          }
          switch (this.mode) {
            case Kt.EVAL:
              this.source += "    ; " + t + `
`;
              break;
            case Kt.ESCAPED:
              this.source += "    ; __append(escapeFn(" + Ff(t) + `))
`;
              break;
            case Kt.RAW:
              this.source += "    ; __append(" + Ff(t) + `)
`;
              break;
            case Kt.COMMENT:
              break;
            case Kt.LITERAL:
              this._addOutput(t);
              break;
          }
        } else
          this._addOutput(t);
    }
  }
}
const Kl = 1e-3, Nf = 0.01, DC = "https://vrlab-image4.ljcdn.com/release/web/PanoSpatialTagPlugin__blur.png", lD = (n, t) => {
  var ee, J, ie, ne, he, Le, we, le;
  let e = t == null ? void 0 : t.container, i = 1.4;
  const s = (ee = t == null ? void 0 : t.wait) != null ? ee : 200, r = (J = t == null ? void 0 : t.maxNumberOnScreen) != null ? J : 3, o = (ie = t == null ? void 0 : t.minRad) != null ? ie : Math.PI / 4, a = (ne = t == null ? void 0 : t.nearTolerance) != null ? ne : 100, l = (he = t == null ? void 0 : t.upsideHeight) != null ? he : 1.6, c = (Le = t == null ? void 0 : t.minDistance) != null ? Le : 1.2, h = (we = t == null ? void 0 : t.maxDistance) != null ? we : 3.5, d = fl(n), f = document.createElement("div");
  f.classList.add("PanoSpatialTagPlugin"), Object.assign(f.style, IC);
  const g = new zr();
  let p = new Image();
  p.src = DC;
  const m = {
    points: [],
    origins: [],
    tags: [],
    template: "",
    events: {},
    render: kC,
    folded: !1,
    enabled: !0,
    forbidden: !0
  }, v = new bC({
    target: f,
    props: { origins: m.origins }
  }), b = (ae, ce) => {
    T(), ce && S();
  }, w = () => {
    m.forbidden && (m.forbidden = !1, S());
  }, x = (ae, ce) => {
    if (m.tags.length === 0)
      return;
    const Ee = ce.longitude - n.state.longitude, Ae = n.camera.clone();
    Ae.position.copy(ce.offset), Ae.rotateOnWorldAxis(new P.Vector3(0, 1, 0), Ee), Ae.updateProjectionMatrix(), Ae.updateMatrixWorld(!0);
    const Ge = new P.Frustum(), Be = new P.Matrix4();
    Be.multiplyMatrices(Ae.projectionMatrix, Ae.matrixWorldInverse), Ge.setFromProjectionMatrix(Be), m.tags.forEach((Te) => {
      const Ne = Ae.position.clone().setY(i).distanceTo(Te.position);
      if (Ne < c || Ne > h || !Ge.containsPoint(Te.position))
        return Te.destroying = !0;
      const ue = Te.position.clone().sub(Ae.position).setY(0);
      if (ue.angleTo(Te.normal) > Math.PI / 2 - o && ue.angleTo(Te.normal) < Math.PI / 2 + o)
        return Te.destroying = !0;
    }), m.tags.forEach((Te) => {
      Te.destroying ? Te.app.$set({
        contentZoom: 0.1 + Ae.position.distanceTo(Te.position) / h,
        lineWidthZoom: 0.38 * (0.01 + Ae.position.distanceTo(Te.position) / h),
        destroying: Te.destroying
      }) : Te.app.$set({
        lineWidthZoom: 0.38 * (0.01 + Ae.position.distanceTo(Te.position) / h),
        lineHeightZoom: 0.4 + (Ae.position.distanceTo(Te.position) - c) / h * 0.6,
        contentZoom: 0.1 + Ae.position.distanceTo(Te.position) / h
      });
    }), setTimeout(() => {
      m.tags.forEach((Te) => {
        Te.destroying && (Te.app.$destroy(), Te = null);
      }), m.tags = m.tags.filter((Te) => !Te.destroying), T();
    }, 1900);
  }, k = (ae) => {
    ae !== Vt.Mode.Panorama && !m.forbidden && (v.$set({ origins: [] }), m.tags.forEach((ce) => {
      ce.app.$destroy(), ce = null;
    }), m.origins = [], m.tags = [], m.forbidden = !0);
  }, T = () => {
    if (m.forbidden || !m.enabled)
      return;
    const ae = n.camera, ce = ae.getWorldDirection(new P.Vector3());
    m.origins = m.tags.map((Ee) => {
      const Ae = Ee.position.clone().project(ae), Ge = Ee.position.clone().sub(ae.position).setY(0).angleTo(ce.setY(0)) < Math.PI / 2;
      return {
        id: Ee.id,
        front: Ge,
        left: (Ae.x + 1) / 2 * 100,
        top: (-Ae.y + 1) / 2 * 100,
        destroying: Ee.destroying
      };
    }), v.$set({ origins: m.origins });
  }, S = () => {
    m.forbidden || !m.enabled || (m.timeoutId && clearTimeout(m.timeoutId), m.timeoutId = setTimeout(() => {
      m.timeoutId = void 0;
      const ae = V();
      ae.length && (m.tags = m.tags.concat(ae), T());
    }, s));
  }, V = () => {
    const { clientWidth: ae, clientHeight: ce } = n.getElement(), Ee = [], Ae = n.camera, Ge = new P.Frustum(), Be = new P.Matrix4(), Te = Ae.getWorldDirection(new P.Vector3());
    Be.multiplyMatrices(Ae.projectionMatrix, Ae.matrixWorldInverse), Ge.setFromProjectionMatrix(Be);
    const Ne = m.tags.filter((Se) => Ge.containsPoint(Se.position) && !Se.destroying).length, ue = m.points.reduce((Se, ze) => {
      if (m.tags.find((st) => ze.id === st.id && !st.destroying))
        return Se;
      const nt = Ae.position.clone().setY(i).distanceTo(ze.position);
      if (nt < c || nt > h || !Ge.containsPoint(ze.position))
        return Se;
      const it = ze.position.clone().sub(Ae.position).setY(0);
      if (it.angleTo(ze.normal) > Math.PI / 2 - o && it.angleTo(ze.normal) < Math.PI / 2 + o)
        return Se;
      const ht = ze.position.clone().project(Ae);
      if (!m.tags.every((st) => {
        if (st.position.clone().sub(Ae.position).setY(0).angleTo(Te.setY(0)) > Math.PI / 2)
          return !0;
        const at = st.position.clone().project(Ae);
        return Math.sqrt(Math.pow((ht.x - at.x) / 2 * ae, 2) + Math.pow((ht.y - at.y) / 2 * ce, 2)) > a;
      }))
        return Se;
      const Ke = {
        id: ze.id,
        position: ze.position,
        normal: ze.normal,
        replacement: ze.replacement,
        weight: ze.weight,
        distance: nt
      };
      let $e;
      for (let st = 0, at = Se.length; st < at; st++) {
        const Ut = Se[st];
        if (Ke.weight > Ut.weight) {
          $e = st;
          break;
        }
        if (Ke.distance < Ut.distance) {
          $e = st;
          break;
        }
      }
      return $e !== void 0 ? Se.splice($e, 0, Ke) : Se.push(Ke), Se;
    }, []);
    for (let Se = 0, ze = ue.length; Se < ze && !(Ne + Ee.length >= r); Se++) {
      const nt = ue[Se];
      if (Ee.find(($e) => nt.id === $e.id))
        continue;
      const it = nt.position.clone().project(Ae);
      if (!m.tags.concat(Ee).every(($e) => {
        if ($e.position.clone().sub(Ae.position).setY(0).angleTo(Te.setY(0)) > Math.PI / 2)
          return !0;
        const st = $e.position.clone().project(Ae);
        return Math.sqrt(Math.pow((it.x - st.x) / 2 * ae, 2) + Math.pow((it.y - st.y) / 2 * ce, 2)) > a;
      }))
        continue;
      const ht = new P.Raycaster(
        Ae.position.clone().setY(i),
        nt.position.clone().sub(Ae.position.clone().setY(i)).normalize(),
        0,
        nt.distance + Nf
      ), [Ke] = m.intersectObjects ? ht.intersectObjects(m.intersectObjects, !0) : n.model.loaded ? n.model.intersectRaycaster(ht) : ht.intersectObjects(n.model.children, !0);
      if (Ke && nt.distance - Ke.distance < Nf) {
        const { position: $e, normal: st, id: at, replacement: Ut } = nt, ls = new P.Plane().setFromNormalAndCoplanarPoint(st, $e), ai = $e.clone().sub(Ae.position).cross(new P.Vector3(0, 1, 0)).setLength(Kl), Mi = [
          $e.clone(),
          $e.clone().add(ai),
          $e.clone().add(new P.Vector3(0, Kl, 0)).add(ai),
          $e.clone().add(new P.Vector3(0, Kl, 0))
        ].map((Hi) => ls.projectPoint(Hi, new P.Vector3())), { container: _i, dispose: jt } = d.create3DDomContainer(Mi) || {}, ki = new CC({
          target: _i,
          props: {
            id: at,
            content: m.render(m.template, Ut),
            lineWidthZoom: 0.38 * (0.01 + Ae.position.distanceTo($e) / h),
            lineHeightZoom: 0.4 + (Ae.position.distanceTo($e) - c) / h * 0.6,
            contentZoom: 0.1 + Ae.position.distanceTo($e) / h,
            upsideDown: $e.y > l,
            folded: m.folded,
            events: m.events,
            hooks: g,
            dispose: jt
          }
        });
        Ee.push({
          position: $e,
          normal: st,
          id: at,
          app: ki
        });
      }
    }
    return Ee;
  }, z = (ae) => {
    m.points = ae.points.map((ce) => {
      var Ee, Ae;
      return {
        id: ce.id,
        position: new P.Vector3().fromArray(ce.position),
        normal: new P.Vector3().fromArray(ce.normal),
        replacement: (Ee = ce.replacement) != null ? Ee : {},
        weight: (Ae = ce.weight) != null ? Ae : -1
      };
    }), ae.render && (m.render = ae.render), ae.template && (m.template = ae.template), ae.events && (m.events = ae.events), ae.enabled === !1 && (m.enabled = ae.enabled), ae.folded === !0 && (m.folded = ae.folded);
  }, O = (ae) => {
    m.intersectObjects = ae, S();
  }, A = () => {
    m.enabled = !0, S();
  }, C = () => {
    m.enabled = !1, v.$set({ origins: [] }), m.tags.forEach((ae) => {
      ae.app.$destroy(), ae = null;
    }), m.origins = [], m.tags = [];
  }, I = () => {
    m.folded = !1, m.tags.forEach((ae) => {
      ae.app.$set({ folded: m.folded });
    });
  }, E = () => {
    m.folded = !0, m.tags.forEach((ae) => {
      ae.app.$set({ folded: m.folded });
    });
  }, D = (ae) => {
    m.tags.forEach((ce) => {
      ce.id === ae && ce.app.$set({ folded: !1 });
    });
  }, L = (ae) => {
    m.tags.forEach((ce) => {
      ce.id === ae && ce.app.$set({ folded: !0 });
    });
  }, N = () => {
    n.once("renderFrame", T);
  }, G = () => {
    e || (e = n.getElement().parentElement), e && e.appendChild(f), m.forbidden = !1, i = n.model.bounding.getCenter(new P.Vector3()).y, S(), n.on("panoWillArrive", x), n.on("panoArrived", w), n.on("modeChange", k), n.on("cameraUpdate", b);
  }, Z = () => {
    p = null, d.disposeAll(), v.$destroy(), m.tags.forEach((ae) => {
      ae.app.$destroy(), ae = null;
    }), m.origins = [], m.tags = [], n.off("modelLoaded", G), n.off("renderFrame", T), n.off("panoWillArrive", x), n.off("panoArrived", w), n.off("modeChange", k), n.off("cameraUpdate", b), n.off("dispose", Z), window.removeEventListener("resize", N, !1);
  };
  return window.addEventListener("resize", N, !1), (le = n == null ? void 0 : n.model) != null && le.loaded ? G() : n.once("modelLoaded", G), n.on("dispose", Z), {
    load: z,
    setIntersectObjects: O,
    unfoldAll: I,
    foldAll: E,
    unfold: D,
    fold: L,
    enable: A,
    disable: C,
    hooks: g,
    dispose: Z
  };
};
var ar = /* @__PURE__ */ ((n) => (n.SMALL = "small", n.MIDLLE = "middle", n.LARGE = "large", n.EXTRA_LARGE = "x-large", n))(ar || {}), Nc = {}, SC = {
  get exports() {
    return Nc;
  },
  set exports(n) {
    Nc = n;
  }
};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/
(function(n) {
  (function() {
    var t = {}.hasOwnProperty;
    function e() {
      for (var r = "", o = 0; o < arguments.length; o++) {
        var a = arguments[o];
        a && (r = s(r, i(a)));
      }
      return r;
    }
    function i(r) {
      if (typeof r == "string" || typeof r == "number")
        return r;
      if (typeof r != "object")
        return "";
      if (Array.isArray(r))
        return e.apply(null, r);
      if (r.toString !== Object.prototype.toString && !r.toString.toString().includes("[native code]"))
        return r.toString();
      var o = "";
      for (var a in r)
        t.call(r, a) && r[a] && (o = s(o, a));
      return o;
    }
    function s(r, o) {
      return o ? r ? r + " " + o : r + o : r;
    }
    n.exports ? (e.default = e, n.exports = e) : window.classNames = e;
  })();
})(SC);
const ni = Nc;
function TC(n) {
  De(n, "svelte-1wufped", ".item-label-item.svelte-1wufped{position:absolute;z-index:0;transform:none;cursor:pointer;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:0}.item-label-item.visible.svelte-1wufped{opacity:1;animation:svelte-1wufped-fadeIn 0.3s ease-in}.item-label-item__text-wrap.svelte-1wufped::before{content:'';position:absolute;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.3);filter:blur(1rem);z-index:-1}.item-label-item__text-wrap.svelte-1wufped{padding:0.375rem 0.375rem 0;position:absolute;height:1.25rem;pointer-events:all;background-size:100% 100%;background-repeat:no-repeat;white-space:nowrap;line-height:0.625rem;font-size:0.6875rem;font-weight:bold;color:#ffeac0;transform:translate(-50%, 0);display:flex;justify-content:center;align-items:center}.item-label-item__text.svelte-1wufped{padding-bottom:0.25rem;border-top:0 solid;border-left:0 solid;border-right:0 solid;border-bottom:0.0625rem solid;-o-border-image:linear-gradient(to right, rgba(234, 208, 154, 0), rgba(234, 208, 154, 100), rgba(234, 208, 154, 0)) 4.5 1 4.5;border-image:linear-gradient(to right, rgba(234, 208, 154, 0), rgba(234, 208, 154, 100), rgba(234, 208, 154, 0)) 4.5 1 4.5}.item-label-item__bar.svelte-1wufped{position:absolute;bottom:0;width:0.0625rem;background-image:linear-gradient(to bottom, rgba(234, 208, 154, 0), rgba(234, 208, 154, 1))}@keyframes svelte-1wufped-fadeIn{from{opacity:0}to{opacity:1}}");
}
function LC(n) {
  let t, e, i, s = (
    /*itemLabel*/
    (n[0].name.length > 6 ? `${/*itemLabel*/
    n[0].name.slice(0, 6)}...` : (
      /*itemLabel*/
      n[0].name
    )) + ""
  ), r, o, a, l, c, h;
  return {
    c() {
      t = W("div"), e = W("div"), i = W("span"), r = je(s), o = oe(), a = W("div"), y(i, "class", "item-label-item__text svelte-1wufped"), y(e, "class", "item-label-item__text-wrap svelte-1wufped"), Q(e, "top", `-${/*itemLabel*/
      n[0].strokeLength + 26}px`), y(a, "class", "item-label-item__bar svelte-1wufped"), Q(a, "height", `${/*itemLabel*/
      n[0].strokeLength}px`), y(t, "class", l = bt(ni("item-label-item", { visible: (
        /*itemLabel*/
        n[0].visible
      ) })) + " svelte-1wufped"), Q(
        t,
        "z-index",
        /*itemLabel*/
        n[0].zIndex
      ), Q(
        t,
        "transform",
        /*itemLabel*/
        n[0].transform
      );
    },
    m(d, f) {
      X(d, t, f), R(t, e), R(e, i), R(i, r), R(t, o), R(t, a), c || (h = Oe(
        i,
        "click",
        /*onClick*/
        n[1]
      ), c = !0);
    },
    p(d, [f]) {
      f & /*itemLabel*/
      1 && s !== (s = /*itemLabel*/
      (d[0].name.length > 6 ? `${/*itemLabel*/
      d[0].name.slice(0, 6)}...` : (
        /*itemLabel*/
        d[0].name
      )) + "") && He(r, s), f & /*itemLabel*/
      1 && Q(e, "top", `-${/*itemLabel*/
      d[0].strokeLength + 26}px`), f & /*itemLabel*/
      1 && Q(a, "height", `${/*itemLabel*/
      d[0].strokeLength}px`), f & /*itemLabel*/
      1 && l !== (l = bt(ni("item-label-item", { visible: (
        /*itemLabel*/
        d[0].visible
      ) })) + " svelte-1wufped") && y(t, "class", l), f & /*itemLabel*/
      1 && Q(
        t,
        "z-index",
        /*itemLabel*/
        d[0].zIndex
      ), f & /*itemLabel*/
      1 && Q(
        t,
        "transform",
        /*itemLabel*/
        d[0].transform
      );
    },
    i: se,
    o: se,
    d(d) {
      d && U(t), c = !1, h();
    }
  };
}
function zC(n, t, e) {
  let { itemLabel: i } = t, { hooks: s } = t;
  function r() {
    s.emit("onLabelClick", i);
  }
  return n.$$set = (o) => {
    "itemLabel" in o && e(0, i = o.itemLabel), "hooks" in o && e(2, s = o.hooks);
  }, [i, r, s];
}
let OC = class extends Ie {
  constructor(t) {
    super(), Ce(this, t, zC, LC, Pe, { itemLabel: 0, hooks: 2 }, TC);
  }
};
function l1(n, t = 200) {
  let e;
  return function(...i) {
    clearTimeout(e), e = setTimeout(() => {
      n(...i);
    }, t);
  };
}
function jC(n) {
  De(n, "svelte-f82itz", ".item-labels-container.svelte-f82itz{width:100%;height:100%;position:relative}");
}
function Gf(n, t, e) {
  const i = n.slice();
  return i[26] = t[e], i;
}
function Wf(n, t) {
  let e, i, s;
  return i = new OC({
    props: {
      itemLabel: (
        /*itemLabelItem*/
        t[26]
      ),
      hooks: (
        /*hooks*/
        t[0]
      )
    }
  }), {
    key: n,
    first: null,
    c() {
      e = Fe(), ve(i.$$.fragment), this.first = e;
    },
    m(r, o) {
      X(r, e, o), me(i, r, o), s = !0;
    },
    p(r, o) {
      t = r;
      const a = {};
      o & /*renderItemLabels*/
      2 && (a.itemLabel = /*itemLabelItem*/
      t[26]), o & /*hooks*/
      1 && (a.hooks = /*hooks*/
      t[0]), i.$set(a);
    },
    i(r) {
      s || (F(i.$$.fragment, r), s = !0);
    },
    o(r) {
      Y(i.$$.fragment, r), s = !1;
    },
    d(r) {
      r && U(e), ge(i, r);
    }
  };
}
function RC(n) {
  let t, e = [], i = /* @__PURE__ */ new Map(), s, r, o = (
    /*renderItemLabels*/
    n[1]
  );
  const a = (l) => (
    /*itemLabelItem*/
    l[26].id
  );
  for (let l = 0; l < o.length; l += 1) {
    let c = Gf(n, o, l), h = a(c);
    i.set(h, e[l] = Wf(h, c));
  }
  return {
    c() {
      t = W("div");
      for (let l = 0; l < e.length; l += 1)
        e[l].c();
      y(t, "class", "item-labels-container svelte-f82itz"), mt(() => (
        /*div_elementresize_handler*/
        n[9].call(t)
      )), Q(
        t,
        "opacity",
        /*itemsVisible*/
        n[4] ? 1 : 0
      );
    },
    m(l, c) {
      X(l, t, c);
      for (let h = 0; h < e.length; h += 1)
        e[h] && e[h].m(t, null);
      s = Th(
        t,
        /*div_elementresize_handler*/
        n[9].bind(t)
      ), r = !0;
    },
    p(l, [c]) {
      c & /*renderItemLabels, hooks*/
      3 && (o = /*renderItemLabels*/
      l[1], Me(), e = Ei(e, c, a, 1, l, o, i, t, yn, Wf, null, Gf), ke()), c & /*itemsVisible*/
      16 && Q(
        t,
        "opacity",
        /*itemsVisible*/
        l[4] ? 1 : 0
      );
    },
    i(l) {
      if (!r) {
        for (let c = 0; c < o.length; c += 1)
          F(e[c]);
        r = !0;
      }
    },
    o(l) {
      for (let c = 0; c < e.length; c += 1)
        Y(e[c]);
      r = !1;
    },
    d(l) {
      l && U(t);
      for (let c = 0; c < e.length; c += 1)
        e[c].d();
      s();
    }
  };
}
let Qf = 26, BC = 11;
function VC(n, t, e) {
  const { Raycaster: i, Vector3: s } = P;
  let { five: r } = t, { modelOcclusionEnable: o } = t, { itemLabels: a } = t, { hooks: l } = t, { displayStrategyType: c } = t, h = null, d = null, f, g, p = [], m = !0;
  const v = (E, D) => {
    const L = new i(), N = E.camera.position.clone(), G = new s().fromArray(D.modelPosition), Z = G.distanceTo(N);
    L.set(N.clone(), G.clone().sub(N).normalize());
    const [ee] = E.model.intersectRaycaster(L);
    return !(ee && ee.distance + 1 < Z);
  }, b = (E, D) => {
    const L = new s(D.modelPosition[0], D.modelPosition[1], D.modelPosition[2]), N = E.project2d(L), G = N == null ? void 0 : N.x, Z = N == null ? void 0 : N.y;
    return [G, Z];
  }, w = (E) => `translate(${E[0]}px, ${E[1]}px)`, x = (E, D) => p.length === 0 ? !1 : !!p.find((N) => E[0] >= N[0] - D && E[0] <= N[0] + D || E[1] >= N[1] - Qf && E[1] <= N[1] + Qf);
  function k(E, D) {
    switch (D) {
      case ar.SMALL:
        return Math.ceil(-27.78 * E + 85);
      case ar.MIDLLE:
        return Math.ceil(-38.9 * E + 130);
      case ar.LARGE:
        return Math.ceil(-44.44 * E + 140);
      case ar.EXTRA_LARGE:
        return Math.ceil(-92.59 * E + 300);
    }
  }
  const T = (E, D) => {
    const L = D.map((G) => {
      const Z = b(E, G), ee = G.name.length * BC, J = k(G.modelPosition[1], c), ne = (o ? v(E, G) : !0) && !x([Z[0], Z[1] + J], ee);
      if (!ne)
        return de(_({}, G), { visible: ne });
      p.push(Z);
      const he = w(Z);
      return de(_({}, G), {
        visible: ne,
        transform: he,
        strokeLength: J
      });
    }), N = L.filter(({ visible: G }) => G).map((G) => ({
      itemLabelItem: G,
      distance: new s(G.modelPosition[0], G.modelPosition[1], G.modelPosition[2]).clone().distanceTo(E.camera.position)
    })).sort((G, Z) => G.distance - Z.distance);
    return L.map((G) => {
      const Z = N.findIndex((ee) => ee.itemLabelItem.id === G.id);
      return Z !== void 0 ? de(_({}, G), { zIndex: Z * 10 }) : G;
    });
  }, S = () => {
    p = [], e(1, d = T(r, d));
  };
  l0(() => {
    A();
  });
  const V = () => {
    e(4, m = !1), z();
  };
  Ot(() => {
    e(1, d = a), h = a, S(), O(), r.on("cameraUpdate", V);
  });
  const z = l1(
    () => {
      e(4, m = !0), S();
    },
    300
  ), O = () => {
    window.addEventListener("resize", C, !1);
  }, A = () => {
    h !== a && (e(1, d = a), h = a, S());
  }, C = () => {
    r.once("renderFrame", S);
  };
  oi(() => {
    r.off("cameraUpdate", V), window.removeEventListener("resize", C, !1);
  });
  function I() {
    f = this.clientWidth, g = this.clientHeight, e(2, f), e(3, g);
  }
  return n.$$set = (E) => {
    "five" in E && e(5, r = E.five), "modelOcclusionEnable" in E && e(6, o = E.modelOcclusionEnable), "itemLabels" in E && e(7, a = E.itemLabels), "hooks" in E && e(0, l = E.hooks), "displayStrategyType" in E && e(8, c = E.displayStrategyType);
  }, [
    l,
    d,
    f,
    g,
    m,
    r,
    o,
    a,
    c,
    I
  ];
}
let _C = class extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      VC,
      RC,
      Pe,
      {
        five: 5,
        modelOcclusionEnable: 6,
        itemLabels: 7,
        hooks: 0,
        displayStrategyType: 8
      },
      jC
    );
  }
};
function HC(n) {
  return n.model_item_labels.map((t) => _({
    modelPosition: [t.position[0], t.position[1] + t.size[1], t.position[2]]
  }, t));
}
const dD = (n, t) => {
  var f, g;
  const e = {
    container: document.createElement("div"),
    data: null,
    enabled: !0,
    fiveModeEnabled: void 0,
    itemLabels: [],
    wrapper: null,
    app: void 0,
    hooks: new zr(),
    modelOcclusionEnable: (f = t == null ? void 0 : t.modelOcclusionEnable) != null ? f : !0,
    displayStrategyType: (g = t == null ? void 0 : t.displayStrategyType) != null ? g : ar.SMALL
  };
  e.container.setAttribute("class", "model-item-label-plugin-container"), e.container.style.cssText = `
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        z-index: 5;
    `, e.container.style.pointerEvents = "none";
  const i = (p) => (e.wrapper = p, p.appendChild(e.container), l(), !0), s = (p) => {
    e.itemLabels = HC(p), l();
  }, r = () => (e.enabled || (e.enabled = !0, l()), !0), o = () => (e.enabled && (e.enabled = !1, l()), !0), a = () => {
    h(), e.container.remove();
  }, l = () => {
    var p;
    if (e.wrapper) {
      if (!e.enabled || !e.fiveModeEnabled) {
        (p = e.app) == null || p.$destroy(), e.app = void 0;
        return;
      }
      e.app ? e.app.$set({
        five: n,
        itemLabels: e.itemLabels
      }) : e.app = new _C({
        target: e.container,
        props: {
          five: n,
          modelOcclusionEnable: e.modelOcclusionEnable,
          itemLabels: e.itemLabels,
          hooks: e.hooks,
          displayStrategyType: e.displayStrategyType
        }
      });
    }
  }, c = () => {
    n.on("modeChange", d), n.once("dispose", a);
  }, h = () => {
    n.off("modeChange", d);
  }, d = (p) => {
    if (e.enabled) {
      if (p !== Vt.Mode.Floorplan) {
        e.fiveModeEnabled = !1, l();
        return;
      }
      n.once("initAnimationEnded", () => {
        e.fiveModeEnabled = n.currentMode === Vt.Mode.Floorplan, l();
      });
    }
  };
  return c(), {
    appendTo: i,
    load: s,
    enable: r,
    disable: o,
    dispose: a,
    hooks: e.hooks
  };
}, uD = {
  name: "ModelItemLabelPlugin",
  version: 0
};
var lo = /* @__PURE__ */ ((n) => (n.TOP_LEFT = "topLeft", n.TOP_RIGHT = "topRight", n.BOTTOM_LEFT = "bottomLeft", n.BOTTOM_RIGHT = "bottomRight", n))(lo || {});
function FC(n) {
  if (n.length === 0)
    return [];
  if (Array.isArray(n[0]))
    return n;
  let t = [];
  return n.forEach((e) => {
    const i = [
      e[lo.TOP_LEFT],
      e[lo.BOTTOM_LEFT],
      e[lo.BOTTOM_RIGHT],
      e[lo.TOP_RIGHT]
    ];
    t.push(i);
  }), t;
}
const NC = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKqADAAQAAAABAAAAKgAAAADUGqULAAAB0ElEQVRYCe2WSUoEQRBFLVHEiVZU1I03cKW38SSewRt4A5fiTty5cQIFR9pZQWkcUNSe2/Z9yISiSGxRkUAy4BGZSVX168gistraYsQKxArECsQKxApYqkDyU5lmsznMM+ZgAGpQhaUkSRbINgLJCXiCBtSgAkVYtGGIBTKj8AgKSVahDNvQa0IUkUG4Bx91BpLdBTOS/cgUIB3a+gMwI9mFzE3a0I3z5B4r292JzGVA8tSSZILMcUDyzIykthOZvYDk+V9Ktmz4yGzhOhV4/+5YU4N/hzqo0StX3Fg5TcnNlYvgs8bPsM4hkScHoyO46haRnGEYktQVI+4ypUYKyXtxyUu27JCceAMJvjo0HoM5CEZ7cPX7i013q3IWVV5r2aw/2TK+svWbPGU68KQCa6pYeus1V0X99quSfvtVSc39lmfz2mdbz32tg1dAJ0421AVs9E7/FxBSezrMmjI/gm5/nYmMkBq+TqBs7LNgTlZH6EnWlPmORdk+pHQipUNfTxtg7p3NIXWRMvXfoqusmXsNhpC6crIS1Zf9C6yAOdlxpK5BW18CiT7A/G93gE+P0FY/RoO+RWqS62YhB2r4YhlixArECsQKxArECvzjCnwAOr0wF44ggHAAAAAASUVORK5CYII=", qh = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAACoCAMAAAD6pITnAAABQVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACvr68AAAAAAAAAAAB5eXkAAAA8PDzr6+sLCwuenp4UFBT////8/PyLi4umpqZycnKxsbHMzMykpKTy8vKoqKhcXFwpKSmwsLD+/v7k5OSCgoLw8PDo6Oi0tLRkZGSrq6syMjL6+vrn5+eYmJj29vbd3d3Q0NCwsLDDw8Pz8/PT09P09PSwsLB/f39OTk739/fh4eHY2NiFhYX4+PjGxsZkZGSkpKS3t7eRkZG/v78eHh6CgoKKiorr6+uysrL+/v77+/vb29v9/f2wsLCysrKxsbFdXV39/f3u7u7t7e3j4+OoqKj5+fmrq6vp6elqamqVlZWtra0+Pj7w8PDW1tbJycnNzc27u7v29vba2tqXl5cjIyNsbGzf399ubm7d3d3///8pT4ZyAAAAanRSTlMzAAYIDA8KFRIccB8XIlIZPr80ZDb88FppT2iLaNJrRzpW+LNWzrp0Sm086rdg26WST4LVltltU0Pfq51X44UoJHdcfjcuHMFF++6i82RiWxX2x8SvSOc7vEs1LiHKmYiOe92gLCMfqE2kqsY2dQAAEBhJREFUeNrs2MFqq0AUxvHT28xdnEWQGNBKMHGnARdutIsspARxU+NOiu//HrdUZFozYTxMbltn5v8IPw7fxMCD7Vuy0OIs9FKz0OIs9FKz0OIs9FKz0OKWCf3nl/fw37sz9O8n/Tl+dWj9hO/nrQ5tCLICtiq0HPlRi1Sw7w+tIfA0ZWt1aLHxX2165NGt6dByZqHwasEJvRWoVaAnyjrwivqKTaVWh/6iPCFm2sS5OTaBWh16osyRq7Krs+jSBDkuvDxoLlFWd2XFsbm1gJoMTWcezrjqswbf8930xTsV64VXnLyX1PXxvSbrq+G41ag5NJGZK7d9/Yroe+u9swWt2jr7tecjvtZ9y63p1HRoAXOZ5Rh68QG07RB7IeZZOaHm0lRoOjOr6gD9wgHtcwofg7piCtRAdebMZYaJ9wyG9OwlmJWcmioN5HMemSMMnzQbZclkP4UYjdTkowai8zgaF/TfNmBYmzcfL+OACKTVoSfMbY1+bBzzB3XsY91OqAnQFGe26gMsjBqNz20LDPoVI0sDZTaGc44wPYLBHVOMhqOmzAfMdB7PmZVBEoPhxUlQsuGoZ0sDbTZYh67R5zx0dLFjkvkgQl/NxsnIR3Da5nQ1HwRoiTNjVZPswfbRPmkqxuZLA8U5CA343J6bEwYUaZjvXOY7jf87onfY5aVEmgLNndE9g+1TZxe5NAFa5pwa+5Fyq206XxpmOle5a52vpd28mikNsoEe38Gd3Q1B5934IspmGmY5t01o30Fhh7BpJ9JkaO7MosT+rruRk0SMS0ugZc4d2u+Um+2xmyMNsoeQMVbiP/bMhSdtKIrjJ3sEcrMsFagFpqC4ifIaviY4MAONPHQ6xDgX49vodr7/B9i5lnpb0setddFFfonaXhDw58n/nNvWYIQjNfaNJImG6Fe0COhkdHR9w4VINPnDu6RBJqBH1+tcycnENHh6PmYv/vqzF3Ps2GLav+i3PDiKMMKDIg+Pt+6iPQo63Gaj4PAkx9phc0nLi6YGqnveYqswwpNVtqWbJnGSoq3BEd6Ljy5xSBCL74XN4SEpWgTHt1EnlO2H30R4SIm2FvR0fDRCSxGJT7uXNHgU9C8YIcUvj5IGl4IOhxdSo4KWJJJaCIddShrcCnqLJWCEJAm25VbS4FbQ7fkY+GF9vzUPL5XYfNutpMGloMNJDfxQRuLgxe5vtGTYpaTBpaCvWQX8cIicahNeJhV2bSlpGdF6QS/EwReooy5HgvdwTdMUuSaUIBzfMJ3NZjVwYKr52/LcjULUErrrRQX8EF/QS1pOtCjoH19WfYo2+BR4KCwgIgMZFCQchWQRccam+LTs+UxJxSUQnCLiEZg4p4Vt8MHqlx+ipF1FWwv6mCkPFI07F89MdCQ+zxoXG+vlq4Ojk1IPDRbhnvcqopoGwSwiboAPFHZsKWkv0UYrbKfAH2iioDwr0VBCWy5NY9UYnZ8OtZwE+CHVNtqht2iRHKHvWgDReBgNKrqwbOV9ENHLOIR6eHLVsGR0kVbzQnyaTrvgC+17yDE7wDE5bthcENGofo0FEz0MCyI6gZ3eeL5eXVnKkM7Fid82H+4EERtgcEFnY36vLN04Zgc4JscxmwoimlhK/BvRxc8m1pBYM68kHJthDogq4goQMyfrFcPphzsKSA/dHfEWc0RnrUWBRBZOsWPH7ADH5KDhLqBo7C3+E9Fn6ErUXnSMjfUqQnS6gzgJOis4RAkgl0ErCakBT2SHt+g3uuhdLahoYqzycNHlqJWKT9EH/X6fK8z3+wd0GqXDZSGaT3MTLqIb+ADR2q4u+o276FcW0ex9YNFEPvXIU4e86LpYqgPRQjyMGKI3u4h9cBE99hDR75lJNOEm2kiOG5YOIlrwefOxRacnTDAkmHlFcRDNB2VmiN6gVe0+YCiC6dmZRYMsJFS+xS1z+jx+ymUFvEmzGyM7PESLiL5mSiDRglLtKeZoq+hKniB3vbvvaj7f49+JbRgwSQ+CYE3sE//QYVF2y3ItQlpS9E8WCyZakPkAUjABn7S+MhOaf9EKwQu3QD8r6MCBveh0R2RQiw5/gxQx9lNStIjodhz8go7sS8WQis7MBtsZeotesoi+Ne1WqnQsO+nG207dEOyn6FBoIRpctKCbfVrRue07jhC74/TFO6G+0jA1xB0wKKpI1PQq7SCOgyTRhVDIfpIGh14Ymi4GFW3lIPd0og3i46hO8GbY3BF5JhJ9J6UzMVVFzhVwEsi7pyTF6ZBDNwSHiA7tNR9XNFabEqI7H2yYMYs+H7PSR6I/tFi2FV1WEcv61DHRGc6zLt4zvm2aVWBevIQ3zT0h+rWc6F3tkUVjp+wtOgM2NMyiCyjBmFV0hP8ttRYfJIzxrqGS0GUF7smYRPPfWjJmjQ90sA6SaLu+RSdrjyyaWH8a0azUgmYLiVbOEA3ZHaSw2DaqOoKCLpxiq0Lmb4HYp5UmSFJLyokWQ8e7L6uPL3rpSUR3yOy+HroR00WlxAoSna8i6i/PiC4XDX8UmKXSzgHM8U8Vk7/J8m4wdvz3ouc+WikiURxanDP/KpFHInMBFqZmkDgbvKyRxHUu2sjmc/3Wfh/+oejnGh0+po7E+YmKnN5ZgdueHCaDeLg56GJ8hzQQndfDJE9Hm3Dp64ZWLekl2npJKRR691ybobTojUvjfW/TUKnX0YbCacN0mf/MIhqueGnwf0BGAflm+C4UuhdNeIt+mvFO/WRDdVj0Gi1u2oqmB2bETWwdfWEWbViz3ANngzuFh/pSOoNYv+UtFKRp7vkW/Zw3LJN8U2wrmo5LRnEhkbGILnNK9JQycWoRXTBmizzZBZ3PtMY/0zxIU5z2Lfo5b8GlREfGM4VUwyxaBc7RYChRLKL52FwZbFyqIEpatHDJLbhv0X/ZOaPetGEgAEd7K0LLYBAadQXagcogndAQEiorFQsoCs0eKAG1qHSsPKzL//8By9mxEzMy26jNHpp7gCgoEf7sO/vOd/4PQSXtH+JKg1YO/btnoqCnxDRr4RsgQCo1oCGoJA062TApX6RBg7CgPR1k5vc7fJeioHVqiqeRIXwnOaAhTCoNOvnAf20Q17X59ad9QQtOhj9gQ5G44scEG/ImHfT3hQP/0qCT38qyvMVghM+kxPZubdziHuh4k8rLggbPsUxc8Zuge4NHWsT9EdrK2gLNd1jUpDdnzz3s87a7RU8nAXe4KFxC458D9CkILCLRRQR00yZzYTN04F2aNyas228zqrRnqCadblAPtHdDXMg2UedDeFN7f9D8yRCF62gimEEXd97iAT7rVWF/RR509jkSaMTCizS04ACwMlnMNYpAjbTZ/vaCoA0U1wD5Gtyt5JA+Pil9NF6qohnSWQJaOEyaXSaaEvbukuRyVn2dnlDDWUO3HkGBRwzoZh4LBp0PRBZ0mLHrYUts4r9haogzNOAjcmuF1LuaWWal49HZZJMcDTygQVaE7xcS6FFKNjIjIeh4YUFvGBvdAfERavDdDUHDb/WwvweNGfay0CxVWMG1vRZLctwDtJpk2u5PeOSIugn4skG3k5ACn+pyoC/quRsYqhveqqOEI4vW8Wxlo8spbkEtULauqNNV+q4Kgn4TBT1PLhH9zoExlVeo9lp0ox+b5uoCmioH+iG4YfJAX0OHFpQL8oLCZxSLoi1oGuQ9HCnPKWj+LjhdSKvL5EorCv2iN9VJTBdekCfZFb/DUKkxioC2cruEccGDqGGBgu5H5ZqCHvkgh3STYPEE+ZDakFE4B/qe764sATQ33WB72XGfZLHQh9YRpW57jy7q44w3uSXjaKUNd646WImCbjqOo3V/9ZRwMgyFXXX0YW3Xc636zDWhN91tO6F3tIrA9sp93KIDQMcb6T3L3+y9yt964UPviSZV9UhTIw09Gwxi3HX/h2FMXM00Wd0f+TfOKfWt5cPfOlcSWdyFlkMKtGxBZ+vVF3QKg2ZnQzUtUZYrUVYBtFDaLmuk1bls0f3KKiuvVfyie5Ux0b5wSivokL5Kj5EQFz1zBQOaU1qx20gfnKQHo4gfjHJywJpofvlbaDvG6VE/4kf9jMFyCJe/sbbjID28SvjwKjygOQWdcbZDHafHsf1h74xxGISBIJjWdhOFF6RLeAOSm7ikpEH+/zviQ4LTWTbrB+w9YbRaBBI7Y/cpgW40B/rpXiPNgcHRgUENNPjpvt0dkZOZY5OZ0TQHAl13RyG9cQQW3+y3wrnZHAoaRDpz1nhk1jjXgcag60jvfB7iJ+FuAo1Ba3dopB2n5/H0vNNAd+fYYKQzZQpIppBRoAU0jnSiHuReD5JgoAU0jrSj8OZeeONgoAU0jHQhTYVT955HQYNAg6FuLY+8UkrWk5KtWYsDDHWDSAvpSM1eT7MXtTjA9DyOtJCmOLItjhTOONBYD3KRTlShtlSo6eLc0INg0LY8jpp2iXLf6n6TcJaCNsXRB43LQ0iHRF11ratOQTjD4sCgLelIAbsVsEfLGYBGpLWmQ1y/fHM531O+awymoLFmD9f0STq//cLvHuVei39n4QwLelyFakiHzU/8lveYJ78Fw3lAhQojbUn/27Gf1kaBOIzju2kWktH8oQ1oPaTrzSzk4CX2UBAKHiUnKfXu+38Lu78Js08rA89h2sOMfl+B82F4RJvsNPn/08Upa+BsGWgKzaX1fJwnfan/nPVsMGfEoe3SUZ+parIfL4dKZX1kdybQiErHN+mhU2kxyZfifZGqbrg5x9yZQ2M8xtJ6qKP6qtL3yVHfv6fqWkd6nsfOGA4GzaVXRlqom1wdHyc1IIfHo8obYTbOK+rMobl0VOfqlDz/mEjPyUnldUScHaBH0p+pu0yl1QQ+y/dVqrLuE/PY2QGaSGvqoSkv6pgUAf9t+l0kR3Upm0EzU2cOzaWt1Juh71ql0mT7tA9ssg/7p22SKtV2/bCxMFudOTSXXkIa1GK9qfuyVf9KH86vyUu19bzqJXk9P6Ryorbs640ogxnOS4szg+bSmA9QG2vBHurmrSvza5tdlOddsvaal91bUw+CbJTBjNmAM4Xm0pKWxnwYalgLdnBFH5UNM2ZDOy/gTKC5NObDSm2sA/KO0NrCjNkgzgSazIdIG2pYi3ZgrddQBrM409ng0Fwa1P+tDXYY4msJyFAGM3Em0ETaQg1rwRbugNrpYijbmeHsDg3pMbVYA1u0db6q75AYA1mUR8zMmUPzS22oYW200c7T4lswhjKY+XXm0Fwa1LDW2Cj2OpxDkKEMZpszh3aghrXhDqiVCcqE2Rka0iNqWEPbZ3U8O4yhDGbi7A4Naqu1cAfTLwRlwuwAzanFWmsH2VISZcLsAE2pYS3YwXHLaYAMZc7sDg1qWBtszR1Y5lx3UCbMDtCMWqyBHQI5TgFkKBNmB2hGDWvtHUx3aOHA7AgNa2gH2QI5KLtBwzpA8AVyVHaHBnbwOeA4Qk8I2wHla6GD9f4yFA7tnh/8P789gZ6zNUP72gxtb4b2tRna3gztazO0vRna1/4CjIBfFd68JpIAAAAASUVORK5CYII=", Gc = "data:image/png;base64,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", GC = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAABcVBMVEUAAAAAAAD////////+/v45OTn////////39/fp6enPz8/7+/vw8PD+/v7x8fHc3NzHx8f////////+/v77+/vr6+v////7+/v5+fn////z8/P////////q6uqgoKD+/v79/f3m5ub+/v7////////////////39/f39/f////z8/P////t7e3s7Oz29vb////5+fn////h4eH////g4ODV1dX////////BwcH///////////+Ojo5zc3MlJSX////////////////////////7+/v////////////v7+/u7u7n5+f////39/f////09PT6+vr09PT+/v76+vr////5+fnv7+/09PTk5OT////////////////Jycn///++vr7///////+0tLT///9TU1P///8SEhL////////+/v76+vr////8/Pz39/ft7e3t7e36+vr////////X19fV1dX///+xsbF9fX1iYmL///////+K8mOEAAAAenRSTlMaAIDy8CD41cWRX9uk7Kl1VVEw6dWT/M/NvKyVkY475eWIgx0Z39rHv7axnZyZmIuKhn56emZjX1FEPTU0Kx4PCAX69fTgxcKkopWL7crJuri2sa6rnIyHhX54bVtZVU9NSUcsJSIcFROno6Hcwp+ekHVxbWhnRC8nDLc9s8oAAAOGSURBVEjHpdd3X9pAGAfwkBBDAoQmBJmWvUWWiIDIHoJb66x7a4d78Op7pBQ1J5DY33987vnyXEIu3CGy/0hvnDthM+l0hj3JScSudDKOdhNPpl1i8Ut624Gi6+trI3zW1tcdqGM7/SIC5/ZRR2SNJEm7JkHt7FAJjR18WIs40P3cAFxIOaIRna6ZOHxGunk+TDR1ukjUkSr0w86bcKShiz1OI4JMP8YAD9+4emM2Gm407IfIhzm0NxrhKNsLH4SvQ+RktyvUfZIMXYcPPsSFCcvY6EYW6ZPsxuiYZaLwAW5bDY70Da5paxjvm8d+UcjAUL/GzPtCnDF/mwFWhJ75Zs68x05gxxFRGQfa+RYXokHVCC4O4yOqYLTwBjNB+ncWEZnsbzrIvOLz4CW9g4jODn0ZPO/iZN0UmhaPp0Omq+Q/nLu6NO0hErJnurjKdTBzEdAhkqILXDAdbFkJ7EnDe4EVy198srpiwhE4X1RKDFOqviBwcNPK6gmPmeWlGDz+VdHqRPEVHo0tLTM8RpcX4G+flLe6kU/Cs1pYRnm8uriQhfoC+0ZDvbMLi6ttfO5fDCDCKFrvooAKAov+c4BZvy8EzaolCHRdIZ+fBThl9G0Ih1RCrBJWbPiMKYAZ409oMSqFWAktzJ9GBuDvRoVGOIQJMSas0CiM39u45v0M9tbaeLc6F5M+7dhcbRfgg+pcU/oNa85VDwDOzBtmpP9UKsN8BuCzeb1P+kPi08+fASyr6fVPUh/PJ72+xj/bZk5PSV0YlJ4z83iC4EipS5LkiAkeHxGcQerLwMARRzyW+QklhUgKpST8nXfYg+fHkjS89MPz0MFnhKdCSWpc8RBnPAZB3RUvLt7i3oob7f5juDzuikY81tjcHlcHg9xabdyUWDvF2ay3slecr1ptimNx9lhhs1bzXQxy5NZa6VMx9pS2Wt1H77cVjFartYvBdlDICDc0cbVa3Twd2NcOyuLwVqo+K1ebjgdcr0k+O1uXwThfl8vlhqm+99kASup5GINsYhhmG8d7UXzcBgo2e21cd9WlUll5/7G958ql8uxu7y0zS5SGSkOGBA51TRiGQAi232Y9v4kVQZGavpt6c6l3tLpNsc38gGOC01IeLg4Xi8NaLz1KkqO0VzvcTrFscYo4oLjiRAsKEXeJPRqxW0bsFWLGLVbiocyZSm5vbW0nU9BsIfyp/AGqAvfOkBaFawAAAABJRU5ErkJggg==", fD = (n, { videoElement: t }) => {
  const e = {
    videoMeshes: [],
    videoTextureEnabled: !1,
    videoSource: "",
    rectPoints: [],
    enabled: !1,
    videoElement: t
  }, i = fl(n), s = /* @__PURE__ */ new Map(), r = (b) => {
    e.videoTexture && (e.videoTexture.image.muted = b);
  }, o = () => e.videoTexture ? e.videoTexture.image.muted : !0, a = () => {
    if (e.enabled || !e.videoTexture)
      return;
    e.enabled = !0, e.videoMeshes = c(), e.videoMeshes.forEach((w) => n.scene.add(w));
    const b = () => {
      if (!e.videoTexture)
        return;
      const w = () => {
        var x;
        e.videoTexture && ((x = e.videoTexture) == null || x.image.removeEventListener("timeupdate", w), e.videoTextureEnabled = !0, e.videoMeshes.forEach((k) => {
          k.material.map !== e.videoTexture && (k.material.map = e.videoTexture);
        }), n.needsRender = !0);
      };
      e.videoTexture.image.addEventListener("timeupdate", w), e.videoTexture && e.videoMeshes.length && (e.videoTexture.image.play(), e.videoTexture.image.onplay = () => {
        i.hide();
      }, e.videoTexture.image.onpause = () => {
        i.show();
      }, e.videoTexture.image.onclick = () => {
        e.videoTexture.image.muted = !1, e.videoTexture.image.play();
      });
    };
    if (n.model.loaded)
      b();
    else
      return n.once("modelLoaded", () => b());
  }, l = () => {
    e.enabled && (e.enabled = !1, e.videoMeshes.forEach((b) => {
      b.geometry.dispose(), b.material.dispose(), n.scene.remove(b), e.videoTexture && e.videoTexture.image.pause();
    }), e.videoMeshes = [], n.needsRender = !0);
  }, c = () => e.rectPoints.map((b, w) => {
    const x = new P.BufferGeometry(), k = 128, T = [];
    T.push(...b[0].toArray());
    for (let I = 1; I < k; I++)
      T.push(
        b[0].x + (b[1].x - b[0].x) * I / k,
        b[0].y + (b[1].y - b[0].y) * I / k,
        b[0].z + (b[1].z - b[0].z) * I / k
      );
    T.push(...b[1].toArray()), T.push(...b[2].toArray());
    for (let I = 1; I < k; I++)
      T.push(
        b[2].x + (b[3].x - b[2].x) * I / k,
        b[2].y + (b[3].y - b[2].y) * I / k,
        b[2].z + (b[3].z - b[2].z) * I / k
      );
    T.push(...b[3].toArray());
    const S = [];
    S.push(0, 1);
    for (let I = 1; I < k; I++)
      S.push(0, 1 - I / k);
    S.push(0, 0), S.push(1, 0);
    for (let I = 1; I < k; I++)
      S.push(1, I / k);
    S.push(1, 1);
    const V = [];
    for (let I = 0; I < k; I++)
      V.push(I, I + 1, k * 2 - I, I, k * 2 - I, k * 2 + 1 - I);
    x.setAttribute("position", new P.BufferAttribute(new Float32Array(T), 3)), x.setAttribute("uv", new P.BufferAttribute(new Float32Array(S), 2)), x.setIndex(new P.BufferAttribute(new Uint32Array(V), 1));
    const z = new P.MeshBasicMaterial({
      map: e.videoTextureEnabled ? e.videoTexture : e.imageTexture,
      side: P.DoubleSide
    }), O = new P.Mesh(x, z);
    O.renderOrder = 1, O.name = `ModelTVVideoPlugin-${w}-${performance.now()}`;
    const A = [b[1], b[2], b[3], b[0]], C = i.create3DDomContainer(A);
    if (C != null && C.container) {
      const I = document.createElement("div");
      I.classList.add("play-icon"), I.style.width = "100%", I.style.height = "100%", I.style.display = "flex", I.style.justifyContent = "center", I.style.alignItems = "center", I.style.pointerEvents = "none", C.container.appendChild(I);
      const E = document.createElement("img");
      E.src = qh, E.style.width = "200px", E.style.pointerEvents = "auto", E.onclick = () => {
        e.videoTexture.image.muted = !1, e.videoTexture.image.play();
      }, I.appendChild(E), s.set(O, C);
    }
    return O;
  }), h = (b) => {
    const w = new P.TextureLoader().load(b);
    return w.minFilter = P.LinearFilter, w.magFilter = P.LinearFilter, w.format = P.RGBFormat, w;
  }, d = (b, w) => {
    let x = w;
    return new Promise((k, T) => {
      const S = new XMLHttpRequest();
      S.onreadystatechange = () => {
        if (S.readyState === 4)
          if (S.status === 200) {
            const V = window.URL || window.webkitURL;
            x = x || document.createElement("video"), x.crossOrigin = "anonymous", x.muted = !0, x.loop = !0, x.playsInline = !0, x.src = V.createObjectURL(S.response);
            const z = new P.VideoTexture(x);
            z.minFilter = P.LinearFilter, z.magFilter = P.LinearFilter, z.format = P.RGBFormat, k(Object.assign(z, { videoSource: b }));
          } else
            T(new Error("Video download Error: " + S.status));
      }, S.onerror = (V) => T(V), S.open("GET", b), S.responseType = "blob", S.send();
    });
  }, f = (b, w) => $(void 0, null, function* () {
    const { video_src: x, video_poster_src: k, points: T } = b;
    e.videoSource = x, e.rectPoints = FC(T).map((S) => S.map(({ x: V, y: z, z: O }) => new P.Vector3(V, z, O))), e.imageTexture = h(k), w && (e.videoElement = w), e.videoTexture = yield d(e.videoSource, e.videoElement), e.enabled = !!b.enable, e.enabled && a();
  }), g = (b) => {
    if (!e.enabled)
      return;
    const w = e.videoMeshes;
    if (!(!w || b.intersectObjects(w).length === 0))
      return e.videoTexture && (e.videoTexture.image.paused || e.videoTexture.image.pause()), !1;
  }, p = (b) => {
    b === "Floorplan" ? i.hide() : i.show();
  }, m = () => {
    if (!e.enabled)
      return;
    const b = n.camera.position;
    if (s.forEach((w, x) => {
      const k = w.css3DObject.position.clone(), T = k.clone().sub(b).normalize(), S = new P.Raycaster(b, T), V = n.model.intersectRaycaster(S)[0], z = k.distanceTo(b), O = 0.01;
      V && V.distance + O < z ? w.hide() : w.show();
    }), !o()) {
      const w = e.rectPoints.find((x) => {
        const k = x[0].clone().add(x[1]).add(x[2]).add(x[3]).divideScalar(4);
        return x.map((T) => T.clone().add(k).divideScalar(2)).filter((T) => {
          const S = T.distanceTo(b), V = new P.Raycaster(b, T.clone().sub(b).normalize()), z = n.model.intersectRaycaster(V)[0], O = 0.01;
          return !(z && z.distance + O < S);
        }).length >= 2;
      });
      (!w || w.length === 0) && r(!0);
    }
  }, v = () => {
    l(), e.videoTexture = void 0, n.off("modeChange", p), n.off("wantsTapGesture", g), n.off("panoArrived", m), n.off("renderFrame", () => {
      e.videoMeshes.forEach((b) => {
        b && (b.needsRender = !0);
      });
    });
  };
  return n.on("modeChange", p), n.on("wantsTapGesture", g), n.on("panoArrived", m), n.on("renderFrame", () => {
    e.videoMeshes.forEach((b) => {
      b && (b.needsRender = !0);
    });
  }), { enable: a, disable: l, load: f, dispose: v, state: e, css3DRenderPlugin: i };
};
var lr = /* @__PURE__ */ ((n) => (n.SMALL = "small", n.MIDLLE = "middle", n.LARGE = "large", n.EXTRA_LARGE = "x-large", n))(lr || {});
function WC(n) {
  De(n, "svelte-1jhufeh", `.item-label-item.svelte-1jhufeh.svelte-1jhufeh{position:absolute;z-index:0;transform:none;cursor:pointer;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;animation:svelte-1jhufeh-fadeIn .3s ease-in}.item-label-item.fold.svelte-1jhufeh>.item-label-item__text-wrap.svelte-1jhufeh{visibility:hidden}.item-label-item.fold.svelte-1jhufeh>.item-label-item__bar.anchor.svelte-1jhufeh{visibility:hidden}.item-label-item.fold.svelte-1jhufeh>.item-label-item__bar.anchor.svelte-1jhufeh:after{visibility:visible}.item-label-item__text-wrap.svelte-1jhufeh.svelte-1jhufeh{height:-moz-fit-content;height:fit-content;padding:0.75rem 1.25rem 0.75rem 0.75rem;position:absolute;width:-moz-max-content;width:max-content;max-width:29.5625rem;min-height:5.75rem;background-image:linear-gradient(269deg, rgba(0, 0, 0, 0.50) 0%, rgba(0, 0, 0, 0.60) 49%, rgba(31, 38, 46, 0.70) 100%);border:0.09375rem solid rgba(255, 255, 255, .65);border-radius:0.1875rem;color:white;transform:translate(-50%, 0);display:flex;justify-content:flex-start;align-items:center;box-sizing:border-box;overflow:hidden;pointer-events:all}.item-label-item__custom.svelte-1jhufeh.svelte-1jhufeh{padding:0;max-width:unset;min-height:unset;background-image:unset;border:0;border-radius:0}.icon-wrap.svelte-1jhufeh.svelte-1jhufeh{width:4.25rem;height:100%;display:flex;justify-content:center;align-content:center}.icon.svelte-1jhufeh.svelte-1jhufeh{width:4.25rem;height:4.25rem;background-repeat:no-repeat;background-size:contain;background-position:center}.item-label-text.svelte-1jhufeh.svelte-1jhufeh{margin-left:0.75rem;padding-left:0.75rem;min-height:4.25rem;height:auto;display:flex;flex-flow:column;justify-content:space-around;align-content:flex-start;border-left:solid rgba(255, 255, 255, .2) 0.0625rem;border-top:solid rgba(255, 255, 255, .2) 0;border-right:solid rgba(255, 255, 255, .2) 0;border-bottom:solid rgba(255, 255, 255, .2) 0;pointer-events:auto}.item-model.svelte-1jhufeh.svelte-1jhufeh{white-space:nowrap;font-size:1.375rem;font-weight:bold;line-height:1.875rem}.item-name.svelte-1jhufeh.svelte-1jhufeh{height:auto;word-wrap:break-word;word-break:break-all;font-size:1.25rem;line-height:1.75rem}.item-label-item__bar.svelte-1jhufeh.svelte-1jhufeh{position:absolute;bottom:0;width:0.1875rem;background-image:linear-gradient(to bottom, white, rgba(255, 255, 255, 0));box-shadow:0 0.125rem 0.5rem 0 rgba(0, 0, 0, 0.20);pointer-events:none}.item-label-item__bar.anchor.svelte-1jhufeh.svelte-1jhufeh:after{content:'';position:absolute;bottom:0;width:1.5rem;height:1.5rem;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAABcVBMVEUAAAAAAAD////////+/v45OTn////////39/fp6enPz8/7+/vw8PD+/v7x8fHc3NzHx8f////////+/v77+/vr6+v////7+/v5+fn////z8/P////////q6uqgoKD+/v79/f3m5ub+/v7////////////////39/f39/f////z8/P////t7e3s7Oz29vb////5+fn////h4eH////g4ODV1dX////////BwcH///////////+Ojo5zc3MlJSX////////////////////////7+/v////////////v7+/u7u7n5+f////39/f////09PT6+vr09PT+/v76+vr////5+fnv7+/09PTk5OT////////////////Jycn///++vr7///////+0tLT///9TU1P///8SEhL////////+/v76+vr////8/Pz39/ft7e3t7e36+vr////////X19fV1dX///+xsbF9fX1iYmL///////+K8mOEAAAAenRSTlMaAIDy8CD41cWRX9uk7Kl1VVEw6dWT/M/NvKyVkY475eWIgx0Z39rHv7axnZyZmIuKhn56emZjX1FEPTU0Kx4PCAX69fTgxcKkopWL7crJuri2sa6rnIyHhX54bVtZVU9NSUcsJSIcFROno6Hcwp+ekHVxbWhnRC8nDLc9s8oAAAOGSURBVEjHpdd3X9pAGAfwkBBDAoQmBJmWvUWWiIDIHoJb66x7a4d78Op7pBQ1J5DY33987vnyXEIu3CGy/0hvnDthM+l0hj3JScSudDKOdhNPpl1i8Ut624Gi6+trI3zW1tcdqGM7/SIC5/ZRR2SNJEm7JkHt7FAJjR18WIs40P3cAFxIOaIRna6ZOHxGunk+TDR1ukjUkSr0w86bcKShiz1OI4JMP8YAD9+4emM2Gm407IfIhzm0NxrhKNsLH4SvQ+RktyvUfZIMXYcPPsSFCcvY6EYW6ZPsxuiYZaLwAW5bDY70Da5paxjvm8d+UcjAUL/GzPtCnDF/mwFWhJ75Zs68x05gxxFRGQfa+RYXokHVCC4O4yOqYLTwBjNB+ncWEZnsbzrIvOLz4CW9g4jODn0ZPO/iZN0UmhaPp0Omq+Q/nLu6NO0hErJnurjKdTBzEdAhkqILXDAdbFkJ7EnDe4EVy198srpiwhE4X1RKDFOqviBwcNPK6gmPmeWlGDz+VdHqRPEVHo0tLTM8RpcX4G+flLe6kU/Cs1pYRnm8uriQhfoC+0ZDvbMLi6ttfO5fDCDCKFrvooAKAov+c4BZvy8EzaolCHRdIZ+fBThl9G0Ih1RCrBJWbPiMKYAZ409oMSqFWAktzJ9GBuDvRoVGOIQJMSas0CiM39u45v0M9tbaeLc6F5M+7dhcbRfgg+pcU/oNa85VDwDOzBtmpP9UKsN8BuCzeb1P+kPi08+fASyr6fVPUh/PJ72+xj/bZk5PSV0YlJ4z83iC4EipS5LkiAkeHxGcQerLwMARRzyW+QklhUgKpST8nXfYg+fHkjS89MPz0MFnhKdCSWpc8RBnPAZB3RUvLt7i3oob7f5juDzuikY81tjcHlcHg9xabdyUWDvF2ay3slecr1ptimNx9lhhs1bzXQxy5NZa6VMx9pS2Wt1H77cVjFartYvBdlDICDc0cbVa3Twd2NcOyuLwVqo+K1ebjgdcr0k+O1uXwThfl8vlhqm+99kASup5GINsYhhmG8d7UXzcBgo2e21cd9WlUll5/7G958ql8uxu7y0zS5SGSkOGBA51TRiGQAi232Y9v4kVQZGavpt6c6l3tLpNsc38gGOC01IeLg4Xi8NaLz1KkqO0VzvcTrFscYo4oLjiRAsKEXeJPRqxW0bsFWLGLVbiocyZSm5vbW0nU9BsIfyp/AGqAvfOkBaFawAAAABJRU5ErkJggg==');background-position:center;background-size:contain;transform:translate(-0.65625rem, 50%)}@keyframes svelte-1jhufeh-fadeIn{from{opacity:0
        }to{opacity:1
        }}`);
}
function QC(n) {
  let t, e, i, s = (
    /*itemLabel*/
    (n[0].code || /*itemLabel*/
    n[0].id) + ""
  ), r, o, a, l = (
    /*itemLabel*/
    n[0].name + ""
  ), c, h = (
    /*itemLabel*/
    n[0].icon && Uf(n)
  );
  return {
    c() {
      h && h.c(), t = oe(), e = W("div"), i = W("span"), r = je(s), o = oe(), a = W("span"), c = je(l), y(i, "class", "item-model svelte-1jhufeh"), y(a, "class", "item-name svelte-1jhufeh"), y(e, "class", "item-label-text svelte-1jhufeh");
    },
    m(d, f) {
      h && h.m(d, f), X(d, t, f), X(d, e, f), R(e, i), R(i, r), R(e, o), R(e, a), R(a, c);
    },
    p(d, f) {
      /*itemLabel*/
      d[0].icon ? h ? h.p(d, f) : (h = Uf(d), h.c(), h.m(t.parentNode, t)) : h && (h.d(1), h = null), f & /*itemLabel*/
      1 && s !== (s = /*itemLabel*/
      (d[0].code || /*itemLabel*/
      d[0].id) + "") && He(r, s), f & /*itemLabel*/
      1 && l !== (l = /*itemLabel*/
      d[0].name + "") && He(c, l);
    },
    d(d) {
      h && h.d(d), d && U(t), d && U(e);
    }
  };
}
function UC(n) {
  let t;
  return {
    c() {
      t = W("div");
    },
    m(e, i) {
      X(e, t, i), n[6](t);
    },
    p: se,
    d(e) {
      e && U(t), n[6](null);
    }
  };
}
function Uf(n) {
  let t, e, i, s, r;
  return {
    c() {
      t = W("div"), e = W("div"), y(e, "class", "icon svelte-1jhufeh"), y(e, "style", i = `background-image: url(${/*itemLabel*/
      n[0].icon})`), y(t, "class", "icon-wrap svelte-1jhufeh");
    },
    m(o, a) {
      X(o, t, a), R(t, e), s || (r = Oe(
        t,
        "click",
        /*click_handler*/
        n[7]
      ), s = !0);
    },
    p(o, a) {
      a & /*itemLabel*/
      1 && i !== (i = `background-image: url(${/*itemLabel*/
      o[0].icon})`) && y(e, "style", i);
    },
    d(o) {
      o && U(t), s = !1, r();
    }
  };
}
function XC(n) {
  let t, e, i, s, r, o, a, l, c, h;
  function d(p, m) {
    return m & /*itemLabel*/
    1 && (i = null), i == null && (i = typeof /*itemLabel*/
    p[0].render == "function"), i ? UC : QC;
  }
  let f = d(n, -1), g = f(n);
  return {
    c() {
      t = W("div"), e = W("div"), g.c(), r = oe(), o = W("div"), y(e, "class", s = bt(ni("item-label-item__text-wrap", {
        "item-label-item__custom": typeof /*itemLabel*/
        n[0].render == "function"
      })) + " svelte-1jhufeh"), Q(e, "bottom", `${/*itemLabel*/
      n[0].strokeLength}px`), y(o, "class", a = bt(ni("item-label-item__bar", { anchor: (
        /*anchorEnabled*/
        n[1]
      ) })) + " svelte-1jhufeh"), Q(o, "height", `${/*itemLabel*/
      n[0].strokeLength}px`), y(t, "class", l = bt(ni("item-label-item", { fold: (
        /*itemLabel*/
        n[0].isFold
      ) })) + " svelte-1jhufeh"), Q(
        t,
        "z-index",
        /*itemLabel*/
        n[0].zIndex
      ), Q(
        t,
        "transform",
        /*itemLabel*/
        n[0].transform
      );
    },
    m(p, m) {
      X(p, t, m), R(t, e), g.m(e, null), R(t, r), R(t, o), c || (h = Oe(
        e,
        "click",
        /*onClick*/
        n[4]
      ), c = !0);
    },
    p(p, [m]) {
      f === (f = d(p, m)) && g ? g.p(p, m) : (g.d(1), g = f(p), g && (g.c(), g.m(e, null))), m & /*itemLabel*/
      1 && s !== (s = bt(ni("item-label-item__text-wrap", {
        "item-label-item__custom": typeof /*itemLabel*/
        p[0].render == "function"
      })) + " svelte-1jhufeh") && y(e, "class", s), m & /*itemLabel*/
      1 && Q(e, "bottom", `${/*itemLabel*/
      p[0].strokeLength}px`), m & /*anchorEnabled*/
      2 && a !== (a = bt(ni("item-label-item__bar", { anchor: (
        /*anchorEnabled*/
        p[1]
      ) })) + " svelte-1jhufeh") && y(o, "class", a), m & /*itemLabel*/
      1 && Q(o, "height", `${/*itemLabel*/
      p[0].strokeLength}px`), m & /*itemLabel*/
      1 && l !== (l = bt(ni("item-label-item", { fold: (
        /*itemLabel*/
        p[0].isFold
      ) })) + " svelte-1jhufeh") && y(t, "class", l), m & /*itemLabel*/
      1 && Q(
        t,
        "z-index",
        /*itemLabel*/
        p[0].zIndex
      ), m & /*itemLabel*/
      1 && Q(
        t,
        "transform",
        /*itemLabel*/
        p[0].transform
      );
    },
    i: se,
    o: se,
    d(p) {
      p && U(t), g.d(), c = !1, h();
    }
  };
}
function YC(n, t, e) {
  let { itemLabel: i } = t, { hooks: s } = t, { anchorEnabled: r } = t, { onIconClick: o } = t;
  function a() {
    s.emit("onLabelClick", i);
  }
  let l;
  function c(d) {
    Ze[d ? "unshift" : "push"](() => {
      l = d, e(3, l);
    });
  }
  const h = (d) => o(i);
  return n.$$set = (d) => {
    "itemLabel" in d && e(0, i = d.itemLabel), "hooks" in d && e(5, s = d.hooks), "anchorEnabled" in d && e(1, r = d.anchorEnabled), "onIconClick" in d && e(2, o = d.onIconClick);
  }, n.$$.update = () => {
    if (n.$$.dirty & /*itemLabel, customElement*/
    9 && typeof i.render == "function" && l && l.children.length === 0) {
      const d = i.render(i);
      d && l.appendChild(d);
    }
  }, [
    i,
    r,
    o,
    l,
    a,
    s,
    c,
    h
  ];
}
class ZC extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      YC,
      XC,
      Pe,
      {
        itemLabel: 0,
        hooks: 5,
        anchorEnabled: 1,
        onIconClick: 2
      },
      WC
    );
  }
}
const { Raycaster: JC, Vector3: pD } = P, Xf = (n, t, e, i) => {
  const s = t.clone().sub(e).normalize(), r = new JC();
  r.set(e, s);
  const [o] = n.model.intersectRaycaster(r);
  return o && o.distance + 0.01 < i;
}, qC = (n, t) => {
  switch (t) {
    case lr.SMALL:
      return Math.ceil(-27.78 * n + 85);
    case lr.MIDLLE:
      return Math.ceil(-38.9 * n + 130);
    case lr.LARGE:
      return Math.ceil(-44.44 * n + 140);
    case lr.EXTRA_LARGE:
      return Math.ceil(-92.59 * n + 300);
  }
}, KC = (n) => `translate(${n[0]}px, ${n[1]}px)`;
function Yf(n) {
  return n.map((t) => _({
    observerIndex: void 0,
    visible: !1,
    isFold: !1
  }, t));
}
function $C(n) {
  De(n, "svelte-f82itz", ".item-labels-container.svelte-f82itz{width:100%;height:100%;position:relative}");
}
function Zf(n, t, e) {
  const i = n.slice();
  return i[29] = t[e], i;
}
function Jf(n) {
  let t, e;
  return t = new ZC({
    props: {
      itemLabel: (
        /*itemLabelItem*/
        n[29]
      ),
      hooks: (
        /*hooks*/
        n[0]
      ),
      anchorEnabled: (
        /*anchorEnabled*/
        n[2]
      ),
      onIconClick: (
        /*onIconClick*/
        n[6]
      )
    }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s[0] & /*renderItemLabels*/
      2 && (r.itemLabel = /*itemLabelItem*/
      i[29]), s[0] & /*hooks*/
      1 && (r.hooks = /*hooks*/
      i[0]), s[0] & /*anchorEnabled*/
      4 && (r.anchorEnabled = /*anchorEnabled*/
      i[2]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function qf(n, t) {
  let e, i, s, r = (
    /*itemLabelItem*/
    t[29].visible && Jf(t)
  );
  return {
    key: n,
    first: null,
    c() {
      e = Fe(), r && r.c(), i = Fe(), this.first = e;
    },
    m(o, a) {
      X(o, e, a), r && r.m(o, a), X(o, i, a), s = !0;
    },
    p(o, a) {
      t = o, /*itemLabelItem*/
      t[29].visible ? r ? (r.p(t, a), a[0] & /*renderItemLabels*/
      2 && F(r, 1)) : (r = Jf(t), r.c(), F(r, 1), r.m(i.parentNode, i)) : r && (Me(), Y(r, 1, 1, () => {
        r = null;
      }), ke());
    },
    i(o) {
      s || (F(r), s = !0);
    },
    o(o) {
      Y(r), s = !1;
    },
    d(o) {
      o && U(e), r && r.d(o), o && U(i);
    }
  };
}
function e4(n) {
  let t, e = [], i = /* @__PURE__ */ new Map(), s, r, o = (
    /*renderItemLabels*/
    n[1]
  );
  const a = (l) => (
    /*itemLabelItem*/
    l[29].id
  );
  for (let l = 0; l < o.length; l += 1) {
    let c = Zf(n, o, l), h = a(c);
    i.set(h, e[l] = qf(h, c));
  }
  return {
    c() {
      t = W("div");
      for (let l = 0; l < e.length; l += 1)
        e[l].c();
      y(t, "class", "item-labels-container svelte-f82itz"), mt(() => (
        /*div_elementresize_handler*/
        n[12].call(t)
      )), Q(
        t,
        "opacity",
        /*itemsVisible*/
        n[5] ? 1 : 0
      );
    },
    m(l, c) {
      X(l, t, c);
      for (let h = 0; h < e.length; h += 1)
        e[h] && e[h].m(t, null);
      s = Th(
        t,
        /*div_elementresize_handler*/
        n[12].bind(t)
      ), r = !0;
    },
    p(l, c) {
      c[0] & /*renderItemLabels, hooks, anchorEnabled, onIconClick*/
      71 && (o = /*renderItemLabels*/
      l[1], Me(), e = Ei(e, c, a, 1, l, o, i, t, yn, qf, null, Zf), ke()), c[0] & /*itemsVisible*/
      32 && Q(
        t,
        "opacity",
        /*itemsVisible*/
        l[5] ? 1 : 0
      );
    },
    i(l) {
      if (!r) {
        for (let c = 0; c < o.length; c += 1)
          F(e[c]);
        r = !0;
      }
    },
    o(l) {
      for (let c = 0; c < e.length; c += 1)
        Y(e[c]);
      r = !1;
    },
    d(l) {
      l && U(t);
      for (let c = 0; c < e.length; c += 1)
        e[c].d();
      s();
    }
  };
}
let t4 = 11;
function i4(n, t, e) {
  const { Vector3: i } = P;
  let { five: s } = t, { modelOcclusionEnable: r } = t, { itemLabels: o } = t, { hooks: a } = t, { displayStrategyType: l } = t, { maxVisibleDistance: c } = t, h = null, d = null, f = (s == null ? void 0 : s.currentMode) === Vt.Mode.Panorama, g, p, m = [], v = !0;
  const b = (D, L) => {
    const N = D.camera.position.clone(), G = new i(L.modelPosition[0], L.modelPosition[1], L.modelPosition[2]), Z = G.distanceTo(N);
    return c !== void 0 && D.state.mode === Vt.Mode.Panorama && Z > c ? !1 : Xf(D, G.clone().sub(N).normalize(), N, Z);
  }, w = (D) => {
    const { camera: L, model: N } = s, { x: G, y: Z, z: ee } = D.clone().project(L), J = (G + 1) / 2, ie = (2 - (Z + 1)) / 2;
    return !!(Math.abs(ee) < 1 && [J, ie].every((we) => we < 1 && we >= 0));
  }, x = (D, L) => {
    const N = new i(L.modelPosition[0], L.modelPosition[1], L.modelPosition[2]), G = D.project2d(N), Z = G == null ? void 0 : G.x, ee = G == null ? void 0 : G.y;
    return [Z, ee];
  }, k = (D, L) => {
    const N = L.map((Z) => {
      if (D.state.panoIndex !== Z.panoIndex)
        return de(_({}, Z), { visible: !1 });
      const ee = x(D, Z);
      Z.name.length * t4;
      const J = qC(Z.modelPosition[1], l), ie = D.currentMode === Vt.Mode.Panorama ? w(new i(Z.position[0], Z.position[1], Z.position[2])) : !0, ne = r ? b(D, Z) : !1, he = ie && !ne;
      if (!he)
        return de(_({}, Z), { visible: he });
      m.push(ee);
      const Le = KC(ee);
      return de(_({}, Z), {
        visible: he,
        transform: Le,
        strokeLength: J
      });
    }), G = N.filter(({ visible: Z }) => Z).map((Z) => ({
      itemLabelItem: Z,
      distance: new i(Z.modelPosition[0], Z.modelPosition[1], Z.modelPosition[2]).clone().distanceTo(D.camera.position)
    })).sort((Z, ee) => Z.distance - ee.distance);
    return N.map((Z) => {
      const ee = G.findIndex((J) => J.itemLabelItem.id === Z.id);
      return ee !== void 0 ? de(_({}, Z), { zIndex: ee * 10 }) : Z;
    });
  }, T = () => {
    m = [], e(1, d = k(s, d));
  }, S = () => {
    e(5, v = !1), V();
  }, V = l1(
    () => {
      e(5, v = !0), T();
    },
    300
  ), z = () => {
    s.once("renderFrame", T);
  }, O = () => {
    window.addEventListener("resize", z, !1);
  }, A = () => {
    h !== o && (e(1, d = Yf(o)), h = o, T());
  }, C = (D, L) => {
    let N = [];
    for (const { position: Z, panoIndex: ee } of L) {
      const J = D.distanceTo(Z);
      (c === void 0 || J <= c || s.state.mode !== Vt.Mode.Panorama) && N.push({ panoIndex: ee, obVector: Z, distance: J });
    }
    N = N.sort((Z, ee) => Z.distance - ee.distance);
    let G;
    for (const Z of N) {
      const { obVector: ee, distance: J, panoIndex: ie } = Z;
      if (!Xf(s, D, ee, J)) {
        G = ie;
        break;
      }
    }
    return typeof G == "number" ? L[G] : void 0;
  }, I = (D) => {
    if (s.state.mode === Vt.Mode.Panorama)
      return;
    const L = s.work.observers, N = new i().fromArray(D.position), G = C(N, L);
    if (G && (D.observerIndex = G.panoIndex), typeof D.observerIndex == "number") {
      const Z = L[D.observerIndex], ee = N.clone().sub(Z.position).normalize(), J = {
        longitude: Math.PI + Math.atan2(ee.x, ee.z),
        latitude: Math.acos(ee.y / ee.length()) - Math.PI / 2
      };
      s.setState(de(_({}, J), {
        mode: Vt.Mode.Panorama,
        panoIndex: D.observerIndex
      })), s.once("initAnimationEnded", () => {
        e(1, d = d.map((ie) => de(_({}, ie), {
          isFold: ie.id !== D.id
        }))), s.once("cameraUpdate", () => {
          e(1, d = d.map((ie) => de(_({}, ie), { isFold: !1 })));
        });
      });
    }
  };
  l0(() => {
    A();
  }), Ot(() => {
    e(1, d = Yf(o)), h = o, T(), O(), s.on("cameraUpdate", S);
  }), oi(() => {
    s.off("cameraUpdate", S), window.removeEventListener("resize", z, !1);
  });
  function E() {
    g = this.clientWidth, p = this.clientHeight, e(3, g), e(4, p);
  }
  return n.$$set = (D) => {
    "five" in D && e(7, s = D.five), "modelOcclusionEnable" in D && e(8, r = D.modelOcclusionEnable), "itemLabels" in D && e(9, o = D.itemLabels), "hooks" in D && e(0, a = D.hooks), "displayStrategyType" in D && e(10, l = D.displayStrategyType), "maxVisibleDistance" in D && e(11, c = D.maxVisibleDistance);
  }, [
    a,
    d,
    f,
    g,
    p,
    v,
    I,
    s,
    r,
    o,
    l,
    c,
    E
  ];
}
class n4 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      i4,
      e4,
      Pe,
      {
        five: 7,
        modelOcclusionEnable: 8,
        itemLabels: 9,
        hooks: 0,
        displayStrategyType: 10,
        maxVisibleDistance: 11
      },
      $C,
      [-1, -1]
    );
  }
}
function s4(n) {
  return n.item_labels.map((t) => de(_({}, t), {
    modelPosition: [t.position[0], t.position[1], t.position[2]],
    observerIndex: void 0
  }));
}
const r4 = void 0, mD = (n, t) => {
  var f, g, p, m;
  const e = {
    container: document.createElement("div"),
    data: null,
    enabled: !0,
    fiveModeEnabled: !0,
    itemLabels: [],
    wrapper: null,
    app: void 0,
    hooks: new zr(),
    modelOcclusionEnable: (f = t == null ? void 0 : t.modelOcclusionEnable) != null ? f : !0,
    onlyVisibleInPanorama: (g = t == null ? void 0 : t.onlyVisibleInPanorama) != null ? g : !0,
    displayStrategyType: (p = t == null ? void 0 : t.displayStrategyType) != null ? p : lr.SMALL,
    maxVisibleDistance: (m = t == null ? void 0 : t.maxVisibleDistance) != null ? m : r4
  };
  e.container.setAttribute("class", "item-label-plugin-container"), e.container.style.cssText = `
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        z-index: 5;
    `, e.container.style.pointerEvents = "none";
  const i = (v) => (e.wrapper = v, v.appendChild(e.container), l(), !0), s = (v) => {
    e.itemLabels = s4(v), l();
  }, r = () => (e.enabled || (e.enabled = !0, l()), !0), o = () => (e.enabled && (e.enabled = !1, l()), !0), a = () => {
    h(), e.container.remove();
  }, l = () => {
    var v;
    if (e.wrapper) {
      if (!e.enabled || !e.fiveModeEnabled) {
        (v = e.app) == null || v.$destroy(), e.app = void 0;
        return;
      }
      e.app ? e.app.$set({
        five: n,
        itemLabels: e.itemLabels
      }) : e.app = new n4({
        target: e.container,
        props: {
          five: n,
          modelOcclusionEnable: e.modelOcclusionEnable,
          itemLabels: e.itemLabels,
          hooks: e.hooks,
          displayStrategyType: e.displayStrategyType,
          maxVisibleDistance: e.maxVisibleDistance
        }
      });
    }
  }, c = () => {
    n.on("modeChange", d), n.once("dispose", a);
  }, h = () => {
    n.off("modeChange", d);
  }, d = (v) => {
    if (v !== Vt.Mode.Panorama) {
      e.fiveModeEnabled = !1, o();
      return;
    }
    n.once("initAnimationEnded", () => {
      e.fiveModeEnabled = !0, r();
    });
  };
  return c(), {
    appendTo: i,
    load: s,
    enable: r,
    disable: o,
    dispose: a,
    hooks: e.hooks
  };
}, gD = {
  name: "ItemLabelPlugin",
  version: 0
};
function o4(n) {
  De(n, "svelte-1irjijd", '.plugin-DoorLabelPlugin-item.svelte-1irjijd.svelte-1irjijd{position:absolute;left:0;top:0;width:0;height:0;pointer-events:none;transition:opacity 0.3s ease}.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd{position:absolute;top:50%;left:50%;border-radius:0.125rem;background:rgba(0, 0, 0, 0.35);line-height:0.75rem;padding:0.375rem;white-space:nowrap;font-size:0.75rem;font-style:normal;color:white;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform ease 1s, background ease 0.3s, color ease 0.3s}.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd::after{content:"";display:block;position:absolute;top:-0.0625rem;left:-0.0625rem;bottom:-0.0625rem;right:-0.0625rem;border-radius:0.125rem;border:0.0625rem solid rgba(0, 0, 0, 0);-o-border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlMAIE397fAAAAAVSURBVAjXY2BjgCMQ+PABhIAASRwARxwD8fgzCQAAAAAASUVORK5CYII=") 4;border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlMAIE397fAAAAAVSURBVAjXY2BjgCMQ+PABhIAASRwARxwD8fgzCQAAAAAASUVORK5CYII=") 4;transition:opacity ease 0.3s}.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd:active,.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd:focus{background:rgba(0, 0, 0, 0.5);color:rgba(255, 255, 255, 0.5)}.plugin-DoorLabelPlugin-icon.svelte-1irjijd.svelte-1irjijd{background:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSIxMHB4IiB2aWV3Qm94PSIwIDAgMTAgMTAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aW1hZ2Ut566t5aS0PC90aXRsZT4KICAgIDxkZWZzPgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iNjYuMDYyMTk3NSUiIHkxPSI1MCUiIHgyPSItMS4xMzY4NjgzOGUtMTElIiB5Mj0iNTAlIiBpZD0ibGluZWFyR3JhZGllbnQtMyI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iMCUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgc3RvcC1vcGFjaXR5PSIwLjg1IiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iODQuMzM5NzMxJSIgeTE9IjUwJSIgeDI9IjIzLjQyODMzNzclIiB5Mj0iNTAlIiBpZD0ibGluZWFyR3JhZGllbnQtNCI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIwJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZGRkZGIiBzdG9wLW9wYWNpdHk9IjAuOCIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSLpobXpnaItMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IlZSLeWIhumXtOW8leWvvOagh+etvuWkh+S7vS0zIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzM5LjAwMDAwMCwgLTU0My4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hC0y5aSH5Lu9LTEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMDUuMDAwMDAwLCA1MzYuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iaW1hZ2Ut566t5aS0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC4wMDAwMDAsIDcuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDwvbWFzaz4KICAgICAgICAgICAgICAgICAgICA8dXNlIGlkPSJCRyIgZmlsbC1vcGFjaXR5PSIwIiBmaWxsPSIjRDhEOEQ4IiBvcGFjaXR5PSIwLjUxMTQ2Mjk4NCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuOTM4ODY5OCwxLjE0Mzc2MTI5IEM4LjI1NDY1NDA0LDEuMjU3NTgwMzUgOC4zMTc4Mjg0LDEuMzAyMTY5OTggOC4zMTc3ODUyMSwxLjM1ODE1MjIzIEM4LjMxNzc1MDcyLDEuNDAyODQzMzUgOC4zMDU3NDkwNywxLjQ0NzUyNTI0IDguMjgxNzg0MTEsMS40ODcyMDUyMSBMOC4yODE3ODQxMSwxLjQ4NzIwNTIxIEw2LjIwOTg5MDQxLDQuOTE3NzQyNDUgQzYuMTM3ODg4MDgsNS4wMzY5NjAyOSA2LjEwMTg4NjkxLDUuMTcxMjIwMiA2LjEwMTg4NjkxLDUuMzA1NDgwMTEgQzYuMTAxODg2OTEsNS40Mzk3NDAwMiA2LjEzNzg4ODA4LDUuNTczOTk5OTQgNi4yMDk4OTA0MSw1LjY5MzIxNzc4IEw2LjIwOTg5MDQxLDUuNjkzMjE3NzggTDguMjgxNzg0MTEsOS4xMjM3NTUwMSBDOC4zMTc0NzQzOCw5LjE4Mjg0OTE2IDguMzI1ODMzMjIsOS4yNTA4MTUyIDguMzEwNDk1OTUsOS4zMTI5MzAyOCBDOC4yOTUxNTg2OCw5LjM3NTA0NTM2IDguMjU2MTI1MzEsOS40MzEzMDk0NyA4LjE5NzAzMTE3LDkuNDY2OTk5NzMgQzguMTU3MzUxMTksOS40OTA5NjQ2OSA4LjExMjY2OTMxLDkuNTAyOTY2MzQgOC4wNjc5NzgxOCw5LjUwMzAwMDgzIEM4LjAyMzI4NzA2LDkuNTAzMDM1MzEgNy45Nzg1ODY3MSw5LjQ5MTEwMjYzIDcuOTM4ODY5OCw5LjQ2NzE5ODkzIEw3LjkzODg2OTgsOS40NjcxOTg5MyBMMS4zNzk5MTIxOCw1LjUxOTY3ODE1IEMxLjMyMDc2MzAyLDUuNDg0MDc5MTIgMS4yODE2NDI4Nyw1LjQyNzg3NTMyIDEuMjY2MjA5NzcsNS4zNjU3ODM5OCBDMS4yNTQ2OTI1Niw1LjMxOTQ0NzMyIDEuMjU2MzY2OTgsNS4yNjk4MzE4MiAxLjI3Mjc1MzMzLDUuMjIzMDU0MDUgTDEuMjcyNzUzMzMsNS4yMjMwNTQwNSBaIiBpZD0i566t5aS0IiBzdHJva2U9InVybCgjbGluZWFyR3JhZGllbnQtNCkiIHN0cm9rZS13aWR0aD0iMC41IiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTMpIiBtYXNrPSJ1cmwoI21hc2stMikiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuMDM5MjAwLCA1LjMwNTQ4MCkgc2NhbGUoMSwgLTEpIHJvdGF0ZSgtOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTUuMDM5MjAwLCAtNS4zMDU0ODApICI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=") no-repeat;background-size:100%;display:inline-block;width:0.625rem;height:0.625rem;margin-left:0.25rem;transform-origin:center}.plugin-DoorLabelPlugin-cnt[data-camera-toward=forward].left.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=forward].right.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=forward].right.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt[data-camera-toward=right].forward.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=right].back.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=right].back.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt[data-camera-toward=left].back.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=left].forward.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=left].forward.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt[data-camera-toward=back].right.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=back].left.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=back].left.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd.svelte-1irjijd{color:#f9eac1}.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{background:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCAxMCA4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPueureWktDwvdGl0bGU+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjEwLjYzODU4ODQlIiB5MT0iMCUiIHgyPSI5Ni41MTYxNDc0JSIgeTI9IjEyOS43MzEzNTQlIiBpZD0ibGluZWFyR3JhZGllbnQtMSI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkYyQ0MiIG9mZnNldD0iMCUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0VBRDA5QSIgb2Zmc2V0PSI0OC43MTQ0NDc4JSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRDFCMTdFIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i5pyq5p2l5a625aSH5Lu9LTI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzA1LjAwMDAwMCwgLTU0NS4wMDAwMDApIiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTEpIiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICA8ZyBpZD0i57yW57uELTLlpIfku70tMTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0NS4wMDAwMDAsIDUzNy4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJpbWFnZS3nrq3lpLQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYwLjAwMDAwMCwgNy4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOC40OTU3ODI5NCwxLjYxNjQ1MTEgTDYuNDIzODg5MjUsNS4wNDY5ODgzMyBDNi4zMjc4ODYxMyw1LjIwNTk0NTQ1IDYuMzI3ODg2MTMsNS40MDUwMTQ3NyA2LjQyMzg4OTI1LDUuNTYzOTcxODkgTDguNDk1NzgyOTQsOC45OTQ1MDkxMiBDOC42Mzg1NDQwMSw5LjIzMDg4NTcxIDguNTYyNjUzNjQsOS41MzgyMzc1IDguMzI2Mjc3MDYsOS42ODA5OTg1NiBDOC4xNjc1NTcxNiw5Ljc3Njg1ODQgNy45Njg4MjE5NSw5Ljc3NzAxMTc1IDcuODA5OTU0MzEsOS42ODEzOTY5NyBMMS4yNTA5OTY2OSw1LjczMzg3NjE4IEMxLjAxNDQwMDA4LDUuNTkxNDgwMDcgMC45MzgwMzU0ODEsNS4yODQyNDU3NiAxLjA4MDQzMTU5LDUuMDQ3NjQ5MTQgQzEuMTIyNTE0OCw0Ljk3NzcyNjI4IDEuMTgxMDczODMsNC45MTkxNjcyNSAxLjI1MDk5NjY5LDQuODc3MDg0MDQgTDcuODA5OTU0MzEsMC45Mjk1NjMyNTMgQzguMDQ2NTUwOTMsMC43ODcxNjcxNDIgOC4zNTM3ODUyNCwwLjg2MzUzMTczOSA4LjQ5NjE4MTM1LDEuMTAwMTI4MzUgQzguNTkxNzk2MTMsMS4yNTg5OTYgOC41OTE2NDI3OCwxLjQ1NzczMTIgOC40OTU3ODI5NCwxLjYxNjQ1MTEgWiIgaWQ9IueureWktCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNS4wMzkyMDAsIDUuMzA1NDgwKSBzY2FsZSgxLCAtMSkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtNS4wMzkyMDAsIC01LjMwNTQ4MCkgIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==") no-repeat}.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd.svelte-1irjijd:active,.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd.svelte-1irjijd:focus{background:rgba(0, 0, 0, 0.5);color:rgba(249, 234, 193, 0.5)}');
}
function a4(n) {
  let t, e, i, s = (
    /*props*/
    n[0].name + ""
  ), r, o, a, l, c, h, d, f, g;
  return {
    c() {
      t = W("div"), e = W("div"), i = W("span"), r = je(s), o = oe(), a = W("i"), y(i, "class", "plugin-DoorLabelPlugin-txt svelte-1irjijd"), y(a, "class", "plugin-DoorLabelPlugin-icon svelte-1irjijd"), y(e, "class", l = bt(ni(
        "plugin-DoorLabelPlugin-cnt",
        /*props*/
        n[0].toward
      )) + " svelte-1irjijd"), y(e, "style", c = `transform: ${/*props*/
      n[0].transform || "initial"};pointer-events: ${/*props*/
      n[0].inSight ? "auto" : "none"};opacity: ${/*props*/
      n[0].inSight ? 1 : 0}`), y(e, "data-camera-toward", h = /*props*/
      n[0].cameraToward), y(t, "style", d = `left: ${/*props*/
      n[0].left || 0}%;top: ${/*props*/
      n[0].top || 0}%;opacity: ${/*props*/
      n[0].inSight ? 1 : 0}`), y(t, "class", "plugin-DoorLabelPlugin-item svelte-1irjijd");
    },
    m(p, m) {
      X(p, t, m), R(t, e), R(e, i), R(i, r), R(e, o), R(e, a), n[4](t), f || (g = Oe(
        e,
        "click",
        /*click_handler*/
        n[3]
      ), f = !0);
    },
    p(p, [m]) {
      m & /*props*/
      1 && s !== (s = /*props*/
      p[0].name + "") && He(r, s), m & /*props*/
      1 && l !== (l = bt(ni(
        "plugin-DoorLabelPlugin-cnt",
        /*props*/
        p[0].toward
      )) + " svelte-1irjijd") && y(e, "class", l), m & /*props*/
      1 && c !== (c = `transform: ${/*props*/
      p[0].transform || "initial"};pointer-events: ${/*props*/
      p[0].inSight ? "auto" : "none"};opacity: ${/*props*/
      p[0].inSight ? 1 : 0}`) && y(e, "style", c), m & /*props*/
      1 && h !== (h = /*props*/
      p[0].cameraToward) && y(e, "data-camera-toward", h), m & /*props*/
      1 && d !== (d = `left: ${/*props*/
      p[0].left || 0}%;top: ${/*props*/
      p[0].top || 0}%;opacity: ${/*props*/
      p[0].inSight ? 1 : 0}`) && y(t, "style", d);
    },
    i: se,
    o: se,
    d(p) {
      p && U(t), n[4](null), f = !1, g();
    }
  };
}
function l4(n, t, e) {
  let { props: i } = t, { onClick: s } = t, r;
  const o = () => {
    const { left: c, top: h, inSight: d, panoIndex: f } = i;
    if (!c || !h || !d || !r)
      return;
    const g = r.current.clientWidth / window.innerWidth * 100, p = r.current.clientHeight / window.innerHeight * 100;
    c <= g / 2 || c >= 100 - g / 2 || h <= p / 2 || h >= 100 - p / 2;
  }, a = (c) => {
    s && s();
  };
  function l(c) {
    Ze[c ? "unshift" : "push"](() => {
      r = c, e(2, r);
    });
  }
  return n.$$set = (c) => {
    "props" in c && e(0, i = c.props), "onClick" in c && e(1, s = c.onClick);
  }, o(), [i, s, r, a, l];
}
class c4 extends Ie {
  constructor(t) {
    super(), Ce(this, t, l4, a4, Pe, { props: 0, onClick: 1 }, o4);
  }
}
function h4(n, t) {
  const e = Math.abs(n.top + n.height / 2 - t.top - t.height / 2), i = Math.abs(n.left + n.width / 2 - t.left - t.width / 2), s = (n.height + t.height) / 2, r = (n.width + t.width) / 2;
  return !(e > s && i > r);
}
function d4(n) {
  const { camera: t } = n, e = t.getWorldDirection(new fe());
  let i = Math.atan(e.z / e.x) * 180 / Math.PI, s = "";
  return e.x < 0 && (i += 180), i < 0 && (i += 360), i > 315 || i <= 45 ? s = "right" : i > 45 && i <= 135 ? s = "back" : i > 135 && i <= 225 ? s = "left" : i > 225 && i <= 315 && (s = "forward"), s;
}
function u4(n, t) {
  return Math.sqrt(Math.pow(n.z - t.z, 2) + Math.pow(n.x - t.x, 2));
}
function f4(n) {
  const t = Math.PI / 4;
  return n > -t && n <= t ? "left" : n > t * 3 || n <= -t * 3 ? "right" : n > -t * 3 && n <= -t ? "forward" : n > t && n <= t * 3 ? "back" : "";
}
const p4 = { userAction: !0 };
class m4 extends rs {
  constructor(e) {
    super(e);
    u(this, "state", { enabled: !0, visible: !0 });
    u(this, "container");
    u(this, "MinVisibledistance", 1.8);
    u(this, "MaxVisibledistance", 5);
    u(this, "OffsetHeight", -1.3);
    // 标签页面高度偏移值
    u(this, "floorplanServerData");
    /** 每个点位 visible 标签的缓存 */
    u(this, "visibleLabelMap", /* @__PURE__ */ new Map());
    /** 标签项Prop值 */
    u(this, "labelItems", []);
    /** 数据 */
    u(this, "doorLabels");
    u(this, "roomObservers");
    u(this, "loadData", (e, i) => {
      i && (this.MaxVisibledistance = i.MaxVisibledistance, this.MinVisibledistance = i.MinVisibledistance, this.OffsetHeight = i.OffsetHeight), this.labelItems = [], this.doorLabels = [], this.floorplanServerData = e, ui(this.five).then(() => {
        this.initData(), this.fixDoorVisibleAndPosition(), this.applyState();
      });
    });
    u(this, "dispose", () => {
      var e, i, s, r, o, a, l;
      (e = this.five) == null || e.off("wantsToMoveToPano", this.hideAllLabels), (i = this.five) == null || i.off("modelLoaded", this.fixDoorVisibleAndPosition), (s = this.five) == null || s.off("panoArrived", this.fixDoorVisibleAndPosition), (r = this.five) == null || r.off("initAnimationEnded", this.fixDoorPosition), (o = this.five) == null || o.off("cameraUpdate", this.fixDoorPosition), (a = this.five) == null || a.off("mouseWheel", this.fixDoorPosition), (l = this.five) == null || l.off("pinchGesture", this.fixDoorPosition), this.applyState({ enabled: !1 });
    });
    u(this, "initRoomObservers", () => {
      var r, o;
      const e = this.floorplanServerData.computed_data.floor_datas || [], s = (((o = (r = this.five) == null ? void 0 : r.work) == null ? void 0 : o.observers) || []).map((a) => {
        const l = a.panoIndex, c = a.floorIndex, h = e == null ? void 0 : e.find((d) => d.floor_index === c);
        if (h) {
          const d = h.rooms.find((f) => f.observer_indexs.includes(l));
          if (d)
            return { panoIndex: l, floorIndex: c, name: d.name };
        }
      }).filter(Boolean);
      this.roomObservers = s;
    });
    u(this, "hideAllLabels", () => {
      this.labelItems.forEach((e) => {
        e.visible = !1, e.inSight = !1;
      });
    });
    u(this, "fixDoorVisibleAndPosition", () => {
      this.initRoomObservers();
      const { panoIndex: e } = this.five;
      if (!this.state.visible || this.five.model.empty || e === null || !this.roomObservers.find((a) => a.panoIndex === e))
        return;
      const i = this.roomObservers.find((a) => a.panoIndex === e), r = this.five.work.observers.find((a) => a.panoIndex === e).position.clone(), o = (() => {
        if (this.visibleLabelMap.has(e))
          return this.visibleLabelMap.get(e);
        {
          const a = [];
          return this.doorLabels.forEach((l, c) => {
            if (l.roomName === i.name)
              return;
            const h = l.position.clone(), d = h.distanceTo(r);
            if (d < this.MinVisibledistance || d > this.MaxVisibledistance)
              return;
            const f = new Or(), g = h.clone().sub(r).normalize();
            f.set(r, g);
            const [p] = this.five.model.intersectRaycaster(f);
            p && p.distance + 0.1 < d || a.push(c);
          }), this.visibleLabelMap.set(e, a), a;
        }
      })();
      this.labelItems.forEach((a, l) => {
        a.visible = o.includes(l);
      }), this.fixDoorPosition();
    });
    u(this, "fixDoorPosition", () => {
      var c, h, d, f, g, p, m, v, b, w, x, k;
      if (!this.state.enabled || !this.state.visible)
        return;
      const { panoIndex: e, camera: i } = this.five;
      if (e === null)
        return;
      if (this.five.currentMode !== "Panorama")
        return this.hideAllLabels();
      const s = this.five.getElement(), r = s.clientWidth, o = s.clientHeight, a = i.getWorldDirection(new fe()), l = [];
      if (this.labelItems.forEach((T, S) => {
        var A;
        if (T.visible) {
          const C = i.position.distanceTo(T.position), I = T.position.clone().add(new fe(0, this.OffsetHeight, 0)), D = I.clone().sub(i.position).normalize().angleTo(a), L = I.clone().project(i), N = (L.x + 1) / 2.2 * 100, G = (-L.y + 1) / 2.2 * 100, Z = N >= 0 && N <= 100 && G >= 0 && G <= 100 && C > this.MinVisibledistance && C <= this.MaxVisibledistance;
          T.left = N, T.top = G, T.inSight = Z && D < Math.PI / 2, T.cameraToward = d4(this.five), Z ? l.push({ disFromCameraToLabel: C, left: N, top: G, index: S }) : T.transform = "translate(-50%, -50%)";
        } else
          T.inSight = !1;
        const O = T, { svelteApp: V } = O, z = Rn(O, ["svelteApp"]);
        (A = T.svelteApp) == null || A.$set({ props: z });
      }), l.length > 1) {
        let T = 0;
        l.sort((S, V) => V.disFromCameraToLabel - S.disFromCameraToLabel);
        for (let S = 1; S < l.length; S++) {
          const { index: V, left: z, top: O } = l[S - 1], { index: A, left: C, top: I } = l[S], E = this.container.children[V], D = this.container.children[A];
          if (!E || !D)
            return;
          const L = {
            left: r * z / 100,
            top: o * O / 100,
            width: (d = (h = (c = E.children) == null ? void 0 : c[0]) == null ? void 0 : h.clientWidth) != null ? d : 0,
            height: (p = (g = (f = E.children) == null ? void 0 : f[0]) == null ? void 0 : g.clientHeight) != null ? p : 0
          }, N = {
            left: r * C / 100,
            top: o * I / 100,
            width: (b = (v = (m = D.children) == null ? void 0 : m[0]) == null ? void 0 : v.clientWidth) != null ? b : 0,
            height: (k = (x = (w = D.children) == null ? void 0 : w[0]) == null ? void 0 : x.clientHeight) != null ? k : 0
          };
          h4(L, N) && (T++, this.labelItems[V].transform = `translate(-50%, ${(T - 1) * 100 - 50}%)`, this.labelItems[A].transform = `translate(-50%, ${T * 100 - 50}%)`);
        }
      }
    });
    u(this, "onClick", (e, i) => {
      if (!this.roomObservers)
        return;
      const { work: s } = this.five;
      let r, o, a = 1 / 0;
      for (const l of s.observers)
        if (this.roomObservers.find((h) => h.panoIndex === l.panoIndex && h.name === e)) {
          const h = l.standingPosition, d = i.distanceTo(h);
          d < a && (r = l.panoIndex, o = h.clone().sub(i).normalize(), a = d);
        }
      if (o !== void 0 && r !== void 0) {
        const l = {};
        if (a > 0) {
          const h = new fe(0, 0, -1), d = o.clone(), f = new ys();
          f.setFromUnitVectors(h, d);
          const g = new Fn();
          g.setFromQuaternion(f, "YXZ"), l.longitude = g.y;
        }
        this.five.emit("wantsToMoveToPano", r, {}, !0) || this.five.moveToPano(r, { longitude: l.longitude });
      }
    });
    u(this, "initData", () => {
      var r;
      this.doorLabels = [], this.labelItems.forEach((o) => {
        var a;
        return (a = o.svelteApp) == null ? void 0 : a.$destroy();
      }), this.labelItems = [];
      const e = this.five.panoIndex, i = this.floorplanServerData.computed_data.observers[e].floor_index, s = this.floorplanServerData.computed_data.floor_datas[i];
      (r = this.floorplanServerData.computed_data.doors) == null || r.forEach((o) => {
        const a = this.five.work.observers.filter((f, g) => {
          var p;
          return !!((p = s == null ? void 0 : s.rooms) != null && p.find((m) => m.observer_indexs.includes(g)));
        }), l = o.position;
        let c = 1 / 0, h;
        a.forEach((f) => {
          const g = f.standingPosition, p = {
            x: g.x,
            y: g.y,
            z: g.z
          }, m = u4(l, p);
          m < c && (c = m, h = p);
        }), h && (l.y = h.y + 0.01);
        const d = new fe(l.x, l.y, l.z);
        d.add(new fe(-0.2, 1.8, 0).applyEuler(new Fn(0, o.rad, 0))), this.doorLabels.push({
          roomName: o.name,
          name: o.name,
          position: d,
          toward: f4(o.rad)
        });
      }), this.labelItems = this.doorLabels.map((o) => de(_({}, o), {
        left: 0,
        top: 0,
        visible: !1,
        inSight: !1,
        transform: "",
        cameraToward: ""
      })), this.five.on("wantsToMoveToPano", this.hideAllLabels), this.five.on("panoArrived", this.fixDoorVisibleAndPosition), this.five.on("initAnimationEnded", this.fixDoorPosition), this.five.on("cameraUpdate", this.fixDoorPosition), this.five.on("mouseWheel", this.fixDoorPosition), this.five.on("pinchGesture", this.fixDoorPosition), this.fixDoorVisibleAndPosition();
    });
  }
  appendTo(e) {
    this.state.enabled && (this.container = e);
  }
  setState(e, i) {
    const s = this.state;
    this.state = _(_({}, s), e);
    const r = s.enabled && s.visible, o = this.state.enabled && this.state.visible;
    r !== o && this.applyState();
  }
  show() {
    this.setState({ visible: !0 });
  }
  hide() {
    this.setState({ visible: !1 });
  }
  enable() {
    this.setState({ enabled: !0 });
  }
  disable() {
    this.setState({ enabled: !1 });
  }
  stateChangedCallback(e, i) {
    if (this.hooks.hasListener("stateChange")) {
      const s = {
        state: this.state,
        prevState: e,
        userAction: i ? i.userAction : p4.userAction
      };
      this.hooks.emit("stateChange", s);
    }
  }
  applyState(e) {
    const i = e != null ? e : this.state;
    i.enabled !== !1 && i.visible !== !1 ? (this.labelItems.forEach((r) => {
      r.svelteApp = new c4({
        target: this.container,
        props: {
          props: r,
          onClick: () => {
            this.onClick(r.name, r.position);
          }
        }
      });
    }), this.fixDoorPosition()) : this.labelItems.forEach((r) => {
      r.svelteApp.$destroy();
    });
  }
  initState() {
    return { enabled: !0, visible: !0 };
  }
}
const vD = (n) => new m4(n);
function c1(n, t) {
  console.warn(`🚫 ==> [${n}]: ${t}`);
}
var Il = {}, g4 = v4;
function v4(n, t, e) {
  return n[0] = t[0] + e[0], n[1] = t[1] + e[1], n;
}
var A4 = b4;
function b4(n, t, e) {
  return n[0] = t, n[1] = e, n;
}
var y4 = w4;
function w4(n, t) {
  var e = t[0], i = t[1], s = e * e + i * i;
  return s > 0 && (s = 1 / Math.sqrt(s), n[0] = t[0] * s, n[1] = t[1] * s), n;
}
var P4 = C4;
function C4(n, t, e) {
  return n[0] = t[0] - e[0], n[1] = t[1] - e[1], n;
}
var I4 = E4;
function E4(n, t) {
  return n[0] * t[0] + n[1] * t[1];
}
var M4 = g4, Wc = A4, h1 = y4, k4 = P4, x4 = I4, Kf = [0, 0];
Il.computeMiter = function(t, e, i, s, r) {
  return M4(t, i, s), h1(t, t), Wc(e, -t[1], t[0]), Wc(Kf, -i[1], i[0]), r / x4(e, Kf);
};
Il.normal = function(t, e) {
  return Wc(t, -e[1], e[0]), t;
};
Il.direction = function(t, e, i) {
  return k4(t, e, i), h1(t, t), t;
};
var ln = Il, gs = [0, 0], Aa = [0, 0], $f = [0, 0], no = [0, 0], D4 = function(n, t) {
  var e = null, i = [];
  t && (n = n.slice(), n.push(n[0]));
  for (var s = n.length, r = 1; r < s; r++) {
    var o = n[r - 1], a = n[r], l = r < n.length - 1 ? n[r + 1] : null;
    if (ln.direction(gs, a, o), e || (e = [0, 0], ln.normal(e, gs)), r === 1 && $l(i, e, 1), !l)
      ln.normal(e, gs), $l(i, e, 1);
    else {
      ln.direction(Aa, l, a);
      var c = ln.computeMiter($f, no, gs, Aa, 1);
      $l(i, no, c);
    }
  }
  if (n.length > 2 && t) {
    var h = n[s - 2], d = n[0], f = n[1];
    ln.direction(gs, d, h), ln.direction(Aa, f, d), ln.normal(e, gs);
    var g = ln.computeMiter($f, no, gs, Aa, 1);
    i[0][0] = no.slice(), i[s - 1][0] = no.slice(), i[0][1] = g, i[s - 1][1] = g, i.pop();
  }
  return i;
};
function $l(n, t, e) {
  n.push([[t[0], t[1]], e]);
}
function d1(n, t) {
  const e = n[0], i = n[1], s = t[0], r = t[1];
  var o = (r.x - s.x) * (e.y - s.y) - (r.y - s.y) * (e.x - s.x), a = (i.x - e.x) * (e.y - s.y) - (i.y - e.y) * (e.x - s.x), l = (r.y - s.y) * (i.x - e.x) - (r.x - s.x) * (i.y - e.y);
  if (l !== 0) {
    var c = o / l, h = a / l;
    if (0 <= c && c <= 1 && 0 <= h && h <= 1)
      return !0;
  }
  return !1;
}
function S4(n, t) {
  for (let e = 0; e < n.length - 1; e++)
    for (let i = 0; i < t.length - 1; i++)
      if (d1([n[e], n[e + 1]], [t[i], t[i + 1]]))
        return {
          x: (n[e].x + n[e + 1].x) / 2,
          y: (n[e].y + n[e + 1].y) / 2,
          line1RelativeIndex: e,
          line2RelativeIndex: i
        };
}
const T4 = 2, L4 = 3, z4 = 3, O4 = 2;
function j4(n) {
  const t = n.width, e = n.unitLength, i = t / 2, s = n.path;
  if (s.length === 0)
    return { geometry: new P.BufferGeometry(), maxV: 0, curvePath: null, curvePoints: null };
  const r = new P.CurvePath();
  s.forEach((O) => {
    const A = R4(O);
    A && r.add(A);
  });
  const o = Math.ceil(r.getLength() * 100);
  r.arcLengthDivisions = o;
  const a = r.getPoints(o), l = a.length;
  if (l <= 2)
    return { geometry: new P.BufferGeometry(), maxV: 0, curvePath: null, curvePoints: null };
  const c = D4(a.map((O) => [O.x, O.z])), d = (l - 1) * T4 * L4, f = 2 * l, g = f * z4, p = f * O4, m = new Uint32Array(d), v = new Float32Array(g), b = new Float32Array(p);
  let w = 0, x = 0;
  for (let O = 0; O < l; O++) {
    const [A, C] = c[O][0], I = a[O], { x: E, y: D, z: L } = I, N = new fe(E + A * i, D + 0.05, L + C * i);
    v[O * 6 + 0] = N.x, v[O * 6 + 1] = N.y, v[O * 6 + 2] = N.z;
    const G = new fe(E - A * i, D + 0.05, L - C * i);
    v[O * 6 + 3] = G.x, v[O * 6 + 4] = G.y, v[O * 6 + 5] = G.z, w += O > 0 ? a[O - 1].clone().sub(a[O]).length() : 0;
    const Z = w / e;
    x = Z, b[O * 4 + 0] = 0, b[O * 4 + 1] = Z, b[O * 4 + 2] = 1, b[O * 4 + 3] = Z;
    const ee = new P.Vector3().lerpVectors(N, G, 0.5);
    n.skipPositions && n.skipPositions.some((ie) => ie.distanceTo(ee) < 0.26) || O !== l - 1 && (m[O * 6 + 0] = O * 2 + 0, m[O * 6 + 1] = O * 2 + 2, m[O * 6 + 2] = O * 2 + 1, m[O * 6 + 3] = O * 2 + 2, m[O * 6 + 4] = O * 2 + 3, m[O * 6 + 5] = O * 2 + 1);
  }
  const k = [];
  let T;
  const S = [];
  for (let O = 0; O < l - 1; O++) {
    if (T !== void 0 && O <= T)
      continue;
    const A = O + 1, C = {
      x: v[O * 6 + 0],
      y: v[O * 6 + 2]
    }, I = {
      x: v[O * 6 + 3],
      y: v[O * 6 + 5]
    }, E = {
      x: v[A * 6 + 0],
      y: v[A * 6 + 2]
    }, D = {
      x: v[A * 6 + 3],
      y: v[A * 6 + 5]
    }, L = d1([C, I], [E, D]);
    if (L && k.push(O), !L && k.length) {
      k.push(O);
      const N = new P.Vector2(C.x, C.y).distanceTo(new P.Vector2(E.x, E.y)), G = new P.Vector2(I.x, I.y).distanceTo(new P.Vector2(D.x, D.y)), Z = 300, ee = [], J = [], ie = Math.max(0, k[0] - e * Z), ne = k[0];
      for (let le = ie; le < ne; le++)
        N < G ? ee.push({ x: v[le * 6 + 0], y: v[le * 6 + 2] }) : ee.push({ x: v[le * 6 + 3], y: v[le * 6 + 5] });
      const he = k[k.length - 1], Le = Math.min(l - 1, k[k.length - 1] + e * Z);
      for (let le = he; le < Le; le++)
        N < G ? J.push({ x: v[le * 6 + 0], y: v[le * 6 + 2] }) : J.push({ x: v[le * 6 + 3], y: v[le * 6 + 5] });
      const we = S4(ee, J);
      if (we) {
        const {
          line1RelativeIndex: le,
          line2RelativeIndex: ae,
          x: ce,
          y: Ee
        } = we, Ae = ie + le, Ge = he + ae + 2;
        for (let ze = Ae; ze < Ge; ze++)
          N < G ? (v[ze * 6 + 0] = ce, v[ze * 6 + 2] = Ee) : (v[ze * 6 + 3] = ce, v[ze * 6 + 5] = Ee), T = ze;
        let Be, Te, Ne, ue, Se;
        N < G ? (Be = v[ie * 6 + 1], Te = v[Ae * 6 + 1], Ne = v[Ge * 6 + 1], ue = v[Le * 6 + 1], Se = (Te + Ne) / 2) : (Be = v[ie * 6 + 4], Te = v[Ae * 6 + 4], Ne = v[Ge * 6 + 4], ue = v[Le * 6 + 4], Se = (Te + Ne) / 2);
        for (let ze = ie; ze < Ae; ze++) {
          const nt = Ae - ie, it = (ze - ie) / nt;
          N < G ? v[ze * 6 + 1] = Be + (Se - Be) * it : v[ze * 6 + 4] = Be + (Se - Be) * it;
        }
        for (let ze = Ae; ze < Ge; ze++)
          N < G ? v[ze * 6 + 1] = Se : v[ze * 6 + 4] = Se;
        for (let ze = Ge; ze < Le; ze++) {
          const nt = Le - Ge, it = (ze - Ge + 1) / nt;
          N < G ? v[ze * 6 + 1] = Se + (ue - Se) * it : v[ze * 6 + 4] = Se + (ue - Se) * it;
        }
        S.push({
          start: Ae,
          end: Ge
        });
      }
      k.length = 0;
    }
  }
  const V = new Float32Array(f);
  S.forEach((O) => {
    for (let A = 0; A < l - 1; A++)
      A >= O.start && A <= O.end ? (V[A * 2 + 0] = 1, V[A * 2 + 1] = 1) : V[A] !== 1 && (V[A * 2 + 0] = 0, V[A * 2 + 1] = 0);
  });
  const z = new P.BufferGeometry();
  return z.setAttribute("position", new P.BufferAttribute(v, 3)), z.setAttribute("uv", new P.BufferAttribute(b, 2)), z.setIndex(new P.BufferAttribute(m, 1)), { geometry: z, maxV: x, animationWillError: S, curvePath: r, curvePoints: a };
}
function R4(n) {
  var t, e;
  if (B4(n)) {
    const i = n.points.map((r) => new P.Vector3().fromArray(r));
    return new P.CatmullRomCurve3(i, (t = n.closed) != null ? t : !1, (e = n.curve_type) != null ? e : "centripetal", n.tension);
  }
}
function B4(n) {
  return n.type === "CatmullRomCurve3";
}
function V4(n, t) {
  t.forEach((e) => {
    const i = new P.SphereGeometry(0.02, 16, 16), s = [], r = [
      new P.MeshBasicMaterial({ color: 16776960 }),
      // 黄
      new P.MeshBasicMaterial({ color: 16711935 }),
      // 粉
      new P.MeshBasicMaterial({ color: 16711680 }),
      // 红
      new P.MeshBasicMaterial({ color: 65535 })
      // 蓝
    ];
    if (e.position.length === 4)
      e.position.forEach((o, a) => {
        const l = r[a], c = new P.Mesh(i, l);
        c.position.copy(Xn(o)), s.push(c);
      });
    else {
      const o = r[0], a = new P.Mesh(i, o);
      a.position.copy(Xn(e.position)), s.push(a);
    }
    s.forEach((o) => {
      o.material.depthTest = !1, n.scene.add(o);
    });
  });
}
const gt = (n) => n;
function u1(n) {
  if (!n || n.length < 3)
    return;
  const t = n.map(Qe), e = t[1].clone().sub(t[0]), i = t[2].clone().sub(t[1]);
  return e.cross(i);
}
function _4(n) {
  return n.stickType === "Plane";
}
function H4(n) {
  return n.stickType === "3DPoint";
}
function Ms(n) {
  return n.stickType === "Model" && n.contentType === "MediaModel";
}
function F4(n) {
  return n.stickType === "Model" && n.contentType === "Model";
}
function N4(n) {
  return n.stickType === "Plane" && n.contentType === "MediaPlane";
}
function Qc(n) {
  const t = (() => {
    if (Ms(n) && n.matrix) {
      const e = new tt().fromArray(n.matrix);
      return n.data.mediaPosition.map((i) => Qe(i).clone().applyMatrix4(e));
    } else
      return n.position;
  })();
  return EA(t);
}
function ep(n) {
  const t = Qc(n);
  return $t(...Array.isArray(t) ? t : [t]);
}
function ba(n, t) {
  if (n === void 0)
    return;
  const { min: e, max: i } = t != null ? t : {};
  if (!(e === void 0 && i === void 0))
    return !(typeof i == "number" && i < n || typeof e == "number" && e > n);
}
function G4(n, t, e) {
  const s = new P.Plane().setFromNormalAndCoplanarPoint(e, t), r = t.clone().sub(n).cross(new P.Vector3(0, 1, 0)).setLength(0.01), o = new P.Vector3(0, 0.01, 0);
  return [
    t.clone().sub(r).sub(o),
    // 左下
    t.clone().add(r).sub(o),
    // 右下
    t.clone().add(r).add(o),
    // 右上
    t.clone().sub(r).add(o)
    // 左上
  ].map((l) => s.projectPoint(l, new P.Vector3()));
}
const tp = (n, t = 1e3 / 60) => {
  let e = null;
  const i = n;
  return (...r) => {
    e && clearTimeout(e), e = setTimeout(() => {
      i == null || i(...r), e && clearTimeout(e), e = null;
    }, t);
  };
};
function W4(n, t = 200) {
  let e;
  return function(...i) {
    e || (n.apply(this, i), e = setTimeout(function() {
      e = null;
    }, t));
  };
}
function Q4(n, t) {
  const [e, i] = t;
  if (e >= i || i <= 1 || e <= 1)
    return -1;
  const s = {}, r = (o) => (s[o] || (s[o] = n(o)), s[o]);
  for (let o = e; o < i; o++) {
    const a = r(o), l = r(o - 1);
    if (a < l)
      return o;
  }
  return -1;
}
function f1(n) {
  if (!n)
    return null;
  try {
    if (n.includes("youtu.be"))
      return new URL(n).pathname.substring(1);
    if (n.includes("youtube.com")) {
      const i = new URL(n), r = new URLSearchParams(i.search).get("v");
      if (r)
        return r;
      if (i.pathname.includes("/embed/"))
        return i.pathname.split("/embed/")[1];
      if (i.pathname.includes("/shorts/"))
        return i.pathname.split("/shorts/")[1];
      if (i.pathname.includes("/live/"))
        return i.pathname.split("/live/")[1];
    }
  } catch (i) {
  }
  const t = /^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/|shorts\/|live\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/, e = n.match(t);
  return e && e[1] ? e[1] : null;
}
function p1(n) {
  if (!n)
    return null;
  try {
    if (n.includes("vimeo.com")) {
      const s = new URL(n).pathname.split("/").filter(Boolean);
      if (s.length > 0) {
        const r = s[0];
        if (/^\d+$/.test(r) && r.length >= 5)
          return r;
      }
    }
  } catch (i) {
  }
  const t = /^.*vimeo\.com\/[A-Za-z\/]*(\d+)/, e = n.match(t);
  return e && e[1] && e[1].length >= 5 ? e[1] : null;
}
function Uc(n) {
  return n ? /^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+/.test(n) : !1;
}
function Xc(n) {
  return n ? /^(http(s)?:\/\/)?((w){3}.)?vimeo\.com\/(.+)/.test(n) : !1;
}
function U4(n, t) {
  if (Uc(n)) {
    const e = f1(n);
    if (!e)
      return "";
    const i = new URL(`https://www.youtube.com/embed/${e}`);
    return (t == null ? void 0 : t.start) !== void 0 && i.searchParams.set("start", t.start.toString()), (t == null ? void 0 : t.autoplay) !== void 0 && i.searchParams.set("autoplay", t.autoplay.toString()), i.toString();
  }
  if (Xc(n)) {
    const e = p1(n);
    if (!e)
      return "";
    const i = new URL(`https://player.vimeo.com/video/${e}`);
    return (t == null ? void 0 : t.autoplay) !== void 0 && i.searchParams.set("autoplay", t.autoplay.toString()), i.toString();
  }
  return n;
}
function Kh(n) {
  return n.stickType ? n.stickType : n.pointType === "PointTag" && n.dimensionType === "3D" ? "3DPoint" : n.pointType === "PlaneTag" ? "Plane" : "2DPoint";
}
function X4(n) {
  var t, e, i, s;
  if (n.stickType || (n.stickType = Kh(n)), n.contentType === "VRLink" || n.contentType === "PanoLink" || n.contentType === "Link") {
    const r = n;
    !((e = (t = r.data) == null ? void 0 : t.icon) != null && e.url) && !((s = (i = r.style) == null ? void 0 : i.point) != null && s.url) && (r.data.icon = {
      url: "//vr-static.realsee-cdn.cn/release/web/test.09dee741.png",
      steps: 28
    });
  }
  return n.extraData && (n.data ? n.data.extraData = n.extraData : n.data = {
    extraData: n.extraData
  }), n;
}
const Tr = "data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=", vo = {};
var $h = /* @__PURE__ */ ((n) => (n.Default = "default", n.GetAudioDuration = "getAudioDuration", n.PlayAudio = "playAudio", n))($h || {});
function Y4(n, t) {
  const e = (t == null ? void 0 : t.namespace) || "default", i = vo[e] || (vo[e] = []);
  let s = i.find((r) => !r.realSrc || r.realSrc === Tr);
  return s || (console.warn("未找到缓存音频，已新建", vo), s = new m1(Tr), i.push(s)), n && (s.src = n), s;
}
function Z4(n, t) {
  const e = (t == null ? void 0 : t.namespace) || "default", i = vo[e] || (vo[e] = []), s = n - i.length;
  if (!(s <= 0))
    for (let r = 0; r < s; r++)
      i.push(new m1(Tr));
}
class m1 extends (() => typeof Audio == "undefined" ? class {
} : Audio)() {
  constructor(e) {
    super(e);
    u(this, "preload", "auto");
    u(this, "crossOrigin", "anonymous");
    u(this, "realSrc", "");
    u(this, "inited", !1);
    u(this, "removeDocumentEventListener");
    this.realSrc = e != null ? e : "", this.muted = !0, super.autoplay = !0, super.addEventListener("ended", () => {
      this.src = "";
    });
    const i = () => J4(this);
    document.addEventListener("click", i), document.addEventListener("touchend", i), this.removeDocumentEventListener = () => {
      document.removeEventListener("click", i), document.removeEventListener("touchend", i);
    };
  }
  get isBlankAudio() {
    return this.realSrc === Tr || !this.realSrc;
  }
  get src() {
    return super.src;
  }
  set src(e) {
    super.src = e, this.realSrc = e, this.removeDocumentEventListener();
  }
  get muted() {
    return super.muted;
  }
  set muted(e) {
    super.muted = e;
  }
  clear() {
    this.currentTime = 0, this.src = Tr;
  }
}
function J4(n) {
  n && (n.inited || (n.src && (n.inited = !0, n.removeDocumentEventListener()), n.src === Tr && n.play()));
}
const g1 = {
  visibleConfig: {
    intersectRaycaster: {
      enabled: !0,
      distanceAccuracy: 0.01,
      checkPoints: "corner",
      needPassed: 1
    }
  },
  clickable: !0,
  simulate3D: !1,
  renderType: "Dom"
};
var q4 = /* @__PURE__ */ ((n) => (n.PointTag = "PointTag", n.PlaneTag = "PlaneTag", n))(q4 || {}), K4 = /* @__PURE__ */ ((n) => (n.Audio = "Audio", n.Text = "Text", n.ImageText = "ImageText", n.Image = "Image", n.Video = "Video", n.Link = "Link", n.Sticker = "Sticker", n.VRLink = "VRLink", n.PanoLink = "PanoLink", n.Marketing = "Marketing", n.MediaPlane = "MediaPlane", n.MediaModel = "MediaModel", n.Model = "Model", n.Panorama = "Panorama", n.Custom = "Custom", n.Unknown = "Unknown", n))(K4 || {}), $4 = /* @__PURE__ */ ((n) => (n.Two = "2D", n.Three = "3D", n))($4 || {});
const eI = {
  globalConfig: {
    visibleConfig: {
      followModelVisibility: !0
    },
    unfoldedConfig: {
      autoUnfold: {
        enable: !0,
        strategy: "MinimumDistance",
        distance: { max: 5 }
      }
    },
    tag3DConfig: {
      ratio: 35e-4
    },
    popoverConfig: {
      enabled: !1,
      // debug: true,
      trigger: "hover",
      triggerDelay: 500,
      placement: "auto",
      autoPlacementBaseSpace: {
        top: 0.2,
        right: 0.15,
        bottom: 0.2
      },
      transitionDuration: 100,
      // theme: 'light',
      toolbar: {
        showMore: !0,
        showShare: !0
      },
      viewMoreText: "查看更多"
    }
  },
  contentTypeConfig: {
    "[Mapview]": {
      unfoldedConfig: {
        autoUnfold: {
          enable: !1,
          distance: { max: 9999 }
        }
      }
    },
    "[Floorplan]": {
      unfoldedConfig: {
        autoUnfold: {
          enable: !1,
          distance: { max: 9999 }
        }
      }
    },
    "Any-Audio-plane": {
      unfoldedConfig: {
        keep: "unfolded"
      }
    },
    Link: {
      unfoldedConfig: {
        // VR 跳转标签没有收起状态
        keep: "unfolded"
      }
    },
    Panorama: {
      unfoldedConfig: {
        // VR 跳转标签没有收起状态
        keep: "unfolded"
      }
    },
    VRLink: {
      unfoldedConfig: {
        // VR 跳转标签没有收起状态
        keep: "unfolded"
      }
    },
    PanoLink: {
      unfoldedConfig: {
        // VR 跳转标签没有收起状态
        keep: "unfolded"
      }
    },
    MediaPlane: {
      unfoldedConfig: {
        keep: "unfolded"
      },
      initialData: {
        autoplayConfig: {
          autoplayCarousel: !0,
          autoplayVideo: !1,
          autoplayVideoInCarousel: !1
        }
      }
    },
    "Model-Any": {
      unfoldedConfig: {
        keep: "unfolded"
      },
      visibleConfig: {
        visibleFiveMode: "all"
      }
    },
    Marketing: {
      popoverConfig: {
        enabled: !1
      }
    },
    Audio: {
      popoverConfig: {
        enabled: !1
      }
    }
  }
}, tI = navigator.userAgent.toLowerCase().indexOf("iphone") !== -1;
navigator.userAgent.toLowerCase().indexOf("android");
const Ta = navigator.userAgent.toLowerCase().indexOf("micromessenger") !== -1, iI = tI && Ta;
function nI(n) {
  if (n.length !== 4)
    return !1;
  const [t, e, i, s] = n, r = t.distanceTo(e), o = e.distanceTo(i), a = i.distanceTo(s), l = s.distanceTo(t), c = t.distanceTo(i), h = e.distanceTo(s);
  return r === a && o === l && c === h;
}
class ec extends P.Mesh {
  /**
   * @description 生成一个四边形的Mesh
   * @param {Vector3Position[]} points: 四个顶点的坐标, [左下，右下，右上，左上]
   */
  constructor(e, i, s) {
    if (e.length !== 4)
      throw new Error("QuadrangleMesh: Invalid number of points, it's not a quadrangle");
    const [r, o, a, l] = e, c = $t(...e), h = [r.clone().sub(c), o.clone().sub(c), a.clone().sub(c), l.clone().sub(c)], d = new v1(h, s);
    super(d, i);
    u(this, "name", "QuadrangleMesh");
    this.position.copy(c);
  }
  removeFromParent() {
    const e = this.parent;
    return e !== null && e.remove(this), this;
  }
}
class v1 extends P.BufferGeometry {
  /**
   * @description 生成一个四边形的BufferGeometry，原点取 points[0]，即左下角
   * @param {Vector3Position[]} points: 四个顶点的坐标, [左下，右下，右上，左上]
   */
  constructor(e, i) {
    super();
    u(this, "name", "QuadrangleGeometry");
    u(this, "points");
    this.points = e;
    const s = i != null ? i : nI(e) ? 64 : 1;
    if (e.length !== 4) {
      console.error("Invalid number of points, it's not a quadrangle");
      return;
    }
    const [r, o, a, l] = e, [c, h, d, f] = [new P.Vector2(0, 0), new P.Vector2(1, 0), new P.Vector2(1, 1), new P.Vector2(0, 1)], g = [], p = [];
    g.push(...r.toArray()), p.push(...c.toArray());
    for (let v = 1; v < s; v++)
      g.push(
        r.x + (o.x - r.x) * v / s,
        r.y + (o.y - r.y) * v / s,
        r.z + (o.z - r.z) * v / s
      ), p.push(c.x + (h.x - c.x) * v / s, c.y + (h.y - c.y) * v / s);
    g.push(...o.toArray()), p.push(...h.toArray()), g.push(...a.toArray()), p.push(...d.toArray());
    for (let v = 1; v < s; v++)
      g.push(
        a.x + (l.x - a.x) * v / s,
        a.y + (l.y - a.y) * v / s,
        a.z + (l.z - a.z) * v / s
      ), p.push(d.x + (f.x - d.x) * v / s, d.y + (f.y - d.y) * v / s);
    g.push(...l.toArray()), p.push(...f.toArray());
    const m = [];
    for (let v = 0; v < s; v++)
      m.push(v, v + 1, s * 2 - v, v, s * 2 - v, s * 2 + 1 - v);
    this.setAttribute("position", new P.BufferAttribute(new Float32Array(g), 3)), this.setAttribute("uv", new P.BufferAttribute(new Float32Array(p), 2)), this.setIndex(new P.BufferAttribute(new Uint32Array(m), 1));
  }
}
function sI(n, t) {
  let e = !Ta;
  const i = t != null ? t : document.createElement("video");
  i.preload = "metadata", i.crossOrigin = "anonymous", i.muted = !0, i.loop = !0, i.playsInline = !0, i.autoplay = !0;
  const s = new P.VideoTexture(i);
  s.minFilter = P.LinearFilter, s.magFilter = P.LinearFilter, s.encoding = P.sRGBEncoding, s.metadataLoaded = !1, i.src = n;
  const r = () => {
    s.metadataLoaded || (s.dispatchEvent({ type: "videoLoaded" }), s.metadataLoaded = !0);
  };
  if (Ta || (i.onloadedmetadata = () => {
    r();
  }), Ta) {
    const o = () => {
      if (!e) {
        if (!i.paused) {
          r();
          return;
        }
        i.muted = !0, i.play().then(() => {
          e = !0, i.pause(), i.currentTime = 0, r();
        }).catch(() => {
          console.warn("video auto play error");
        });
      }
    };
    document.addEventListener("click", o, { once: !0 }), document.addEventListener("touchend", o, { once: !0 });
  }
  return s;
}
function co(n, t, e) {
  if (n === "fill")
    return t;
  if (n === "contain") {
    const [i, s, r, o] = t, a = i.distanceTo(s), l = r.distanceTo(o), c = i.distanceTo(o), h = s.distanceTo(r), d = a, f = c, g = d / f;
    if (g > e) {
      const m = f * e, v = new P.Vector3().subVectors(s, i).multiplyScalar((a - m) / 2 / a), b = new P.Vector3().subVectors(r, o).multiplyScalar((l - m) / 2 / l);
      return [i.clone().add(v), s.clone().sub(v), r.clone().sub(b), o.clone().add(b)];
    } else if (g < e) {
      const m = d / e, v = new P.Vector3().subVectors(o, i).multiplyScalar((c - m) / 2 / c), b = new P.Vector3().subVectors(r, s).multiplyScalar((h - m) / 2 / h);
      return [i.clone().add(v), s.clone().add(b), r.clone().sub(b), o.clone().sub(v)];
    } else
      return t;
  } else
    return console.warn(`objectFit: ${n} is not supported yet`), t;
}
class rI extends P.ShaderMaterial {
  constructor(e) {
    super();
    u(this, "transparent", !1);
    u(this, "blending", P.CustomBlending);
    u(this, "blendSrc", P.SrcAlphaFactor);
    u(this, "blendDst", P.OneMinusSrcAlphaFactor);
    u(this, "blendSrcAlpha", P.OneFactor);
    u(this, "blendDstAlpha", P.OneMinusSrcAlphaFactor);
    u(
      this,
      "vertexShader",
      /* glsl */
      `
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `
    );
    u(
      this,
      "fragmentShader",
      /* glsl */
      `
    uniform sampler2D map;
    // 纹理坐标
    varying vec2 vUv;
    void main() {
      gl_FragColor = texture2D(map, vUv);
    }
  `
    );
    this.uniforms = {
      map: { value: e }
    };
  }
}
const Go = { Z_FIGHTING_OFFSET: 0.01 };
let A1 = class extends P.Mesh {
  constructor() {
    super(...arguments);
    u(this, "name", "MediaPlane");
    u(this, "src");
  }
  removeFromParent() {
    const e = this.parent;
    return e !== null && e.remove(this), this;
  }
  dispose() {
    this.traverse((e) => {
      if (e.isMesh) {
        const i = e;
        i.geometry.dispose(), (i.material instanceof Array ? i.material : [i.material]).forEach((r) => {
          r.dispose();
        });
      }
    });
  }
};
class Yc extends A1 {
  constructor(e, i, s) {
    var a;
    super();
    u(this, "name", "PanoTagPluginImagePlane");
    this.src = e;
    const r = (a = s == null ? void 0 : s.resolveZFighting) != null ? a : !0;
    let o = i;
    if (r) {
      const l = as(i).multiplyScalar(Go.Z_FIGHTING_OFFSET);
      o = i.map((c) => c.clone().add(l));
    }
    z0(e).then(({ texture: l, transparent: c }) => {
      var m;
      const h = new P.MeshBasicMaterial({ map: l, transparent: c }), d = co(
        (m = s == null ? void 0 : s.objectFit) != null ? m : "contain",
        o,
        l.image.width / l.image.height
      ), f = $t(...d), g = d.map((v) => v.clone().sub(f)), p = new v1(g);
      this.position.copy(f), this.geometry = p, this.material = h;
    }).catch((l) => {
      console.error(`Imageplane error: ${l == null ? void 0 : l.message}`);
    });
  }
}
class b1 extends A1 {
  // eslint-disable-next-line max-params
  constructor(e, i, s) {
    const {
      videoCoverSrc: r,
      objectFit: o = "contain",
      playButton: a = "withText",
      paused: l = !0,
      videoTextureMap: c,
      ImageTextureMap: h,
      domEvents: d
    } = s != null ? s : {};
    super();
    u(this, "isVideoPlane", !0);
    u(this, "name", "PanoTagPluginImagePlane");
    u(this, "videoInstance");
    u(this, "onVideoReady");
    u(this, "objectFit");
    u(this, "buttonSrc");
    u(this, "videoCoverSrc");
    u(this, "domEvents");
    u(this, "disposers", []);
    u(this, "cornerPoints");
    u(this, "videoMesh");
    u(this, "coverMesh");
    u(this, "buttonMesh");
    u(this, "videoTextureMap");
    u(this, "ImageTextureMap");
    this.cornerPoints = i, this.src = e, this.buttonSrc = (() => a === "withText" ? qh : a === "withoutText" ? Gc : typeof a == "string" ? a : Gc)(), this.videoCoverSrc = r, this.objectFit = o, this.videoTextureMap = c, this.ImageTextureMap = h, this.domEvents = d, this.position.copy($t(...i)), this.videoCoverSrc && l ? this.addCoverMesh().then(() => this.addButtonMesh()) : this.addVideoMesh().then(() => {
      l ? this.addButtonMesh() : this.play(!0);
    }), this.addEventListener("removed", () => {
      this.remove(...this.children);
    }), this.addEventListener("dispose", () => {
      var f;
      (f = this.disposers) == null || f.forEach((g) => g == null ? void 0 : g());
    });
  }
  play(e = !1) {
    return $(this, null, function* () {
      this.videoMesh || (yield this.addVideoMesh()), this.showPlayUI(), this.videoInstance.paused && this.videoInstance.play().then(() => this.showPlayUI()).catch((i) => {
        this.pause(), console.error("play error", i);
      }), this.videoInstance.muted = e, this.render();
    });
  }
  pause() {
    this.videoInstance && (this.videoInstance.pause(), this.showPauseUI().then(() => this.render()));
  }
  initialRenderHooks(e) {
    const s = e(() => {
      var r;
      this.videoMesh && ((r = this.videoInstance) == null ? void 0 : r.paused) === !1 && (this.videoMesh.needsRender = !0);
    });
    this.disposers.push(() => s);
  }
  showPlayUI() {
    this.coverMesh && (this.coverMesh.visible = !1), this.remove(this.buttonMesh), this.videoMesh.visible = !0;
  }
  showPauseUI() {
    return $(this, null, function* () {
      this.coverMesh ? (this.coverMesh.visible = !0, this.videoMesh && (this.videoMesh.visible = !1)) : (yield this.addCoverMesh(), this.coverMesh && (this.videoMesh.visible = !1)), this.addButtonMesh().then(() => this.render());
    });
  }
  render() {
    var e;
    this.videoMesh && (this.videoMesh.needsRender = !0), this.coverMesh && (this.coverMesh.needsRender = !0), this.buttonMesh && (this.buttonMesh.needsRender = !0), this.videoMesh && ((e = this.videoInstance) == null ? void 0 : e.paused) === !1 && (this.videoMesh.needsRender = !0);
  }
  addCoverMesh() {
    return $(this, null, function* () {
      if (this.children.includes(this.coverMesh))
        return;
      const e = yield (() => $(this, null, function* () {
        if (this.coverMesh)
          return this.coverMesh;
        if (!this.videoCoverSrc)
          return;
        const { texture: i, transparent: s } = yield this.getImageTexture(this.videoCoverSrc), r = new P.MeshBasicMaterial({ transparent: !1, map: i }), o = co(this.objectFit, this.cornerPoints, i.image.width / i.image.height), a = new ec(o, r);
        return a.position.copy(new fe(0, 0, 0)), a.name = "videoCoverMesh", a;
      }))();
      return e && (this.children.includes(this.coverMesh) || (this.add(e), this.coverMesh = e)), e;
    });
  }
  addVideoMesh() {
    return $(this, null, function* () {
      var s;
      if (this.children.includes(this.videoMesh))
        return;
      const e = yield (() => $(this, null, function* () {
        if (this.videoMesh)
          return this.videoMesh;
        if (!this.src)
          return;
        const r = this.getVideoTexture(this.src), o = new P.MeshBasicMaterial({ transparent: !1, map: r }), a = yield new Promise((c) => {
          r.metadataLoaded ? c(co(this.objectFit, this.cornerPoints, r.image.videoWidth / r.image.videoHeight)) : r.addEventListener(
            "videoLoaded",
            () => c(co(this.objectFit, this.cornerPoints, r.image.videoWidth / r.image.videoHeight))
          );
        }), l = new ec(a, o);
        return l.name = "videoMesh", l.position.copy(new fe(0, 0, 0)), l;
      }))();
      if (!e)
        return;
      this.domEvents.addAutoBindEventListener(
        e,
        "click",
        () => {
          !this.videoInstance.paused && this.videoInstance.muted ? this.videoInstance.muted = !1 : this.pause();
        },
        { noEmitWhenHide: !0 }
      );
      const i = e.material.map.image;
      return (s = this.onVideoReady) == null || s.call(this, i), i.addEventListener("playing", () => {
        this.coverMesh || this.remove(this.buttonMesh), this.render();
      }), i.addEventListener("pause", () => {
        this.videoInstance.paused && (this.showPauseUI(), this.render());
      }), this.children.includes(this.videoMesh) || (this.add(e), this.videoMesh = e, this.videoInstance = i), e;
    });
  }
  addButtonMesh() {
    return $(this, null, function* () {
      if (this.children.includes(this.buttonMesh))
        return;
      const e = yield (() => $(this, null, function* () {
        var g, p, m, v;
        if (this.buttonMesh)
          return this.buttonMesh;
        const i = (p = (g = this.videoMesh) == null ? void 0 : g.geometry.points[0].distanceTo(this.videoMesh.geometry.points[3])) != null ? p : 1 / 0, s = (v = (m = this.coverMesh) == null ? void 0 : m.geometry.points[0].distanceTo(this.coverMesh.geometry.points[3])) != null ? v : 1 / 0, r = this.cornerPoints[0].distanceTo(this.cornerPoints[3]), a = Math.min(i, s, r) / r * 0.3, { texture: l, transparent: c } = yield this.getImageTexture(this.buttonSrc), h = co("contain", this.cornerPoints, l.image.width / l.image.height), d = new ec(h, new rI(l));
        d.position.copy(new fe(0, 0, 0)), d.name = "buttonMesh", d.scale.set(a, a, a), this.domEvents.addAutoBindEventListener(
          d,
          "click",
          () => {
            this.play();
          },
          { noEmitWhenHide: !0 }
        );
        const f = as(h).multiplyScalar(Go.Z_FIGHTING_OFFSET);
        return d.position.add(f), d;
      }))();
      return this.children.includes(this.buttonMesh) || (this.add(e), this.buttonMesh = e), e;
    });
  }
  getImageTexture(e) {
    return $(this, null, function* () {
      var s, r;
      if ((s = this.ImageTextureMap) != null && s.has(e))
        return this.ImageTextureMap.get(e);
      const i = yield z0(e);
      return (r = this.ImageTextureMap) == null || r.set(e, i), i;
    });
  }
  getVideoTexture(e) {
    var s, r;
    if ((s = this.videoTextureMap) != null && s.has(e))
      return this.videoTextureMap.get(e);
    const i = sI(e);
    return (r = this.videoTextureMap) == null || r.set(e, i), i;
  }
}
class Oo {
  constructor() {
    /**
     * @description 射线碰撞检测的距离缓存
     */
    u(this, "cache_raycasterDistance", /* @__PURE__ */ new Map());
    /**
     * @description 标签是否可见缓存
     */
    u(this, "cache_visible", /* @__PURE__ */ new Map());
  }
  clear() {
    this.cache_visible.clear(), this.cache_raycasterDistance.clear();
  }
  static generateCameraTagKey(t, e, i = 3) {
    const s = _(_({}, e.five.getCurrentState()), t), r = s.mode === "Panorama" ? e.workUtil.getObserverPosition(s.panoIndex) : e.five.camera.position;
    return r ? [
      //
      r.x.toFixed(i),
      r.y.toFixed(i),
      r.z.toFixed(i),
      e.id
    ].join(",") : void 0;
  }
  getVisible(t, e, i = 1) {
    const s = Oo.generateCameraTagKey(e, t, i);
    if (s)
      return this.cache_visible.get(s);
  }
  setVisible(t, e, i, s = 1) {
    const r = Oo.generateCameraTagKey(e, t, s);
    r && this.cache_visible.set(r, i);
  }
}
function $a(n) {
  return Object.entries(n);
}
function el(n) {
  var e, i;
  typeof n.visibleConfig == "object" && n.visibleConfig.keep && (n.visibleConfig.keep === "visible" ? n.visibleConfig = { keep: n.visibleConfig.keep, visibleFiveMode: (e = n.visibleConfig) == null ? void 0 : e.visibleFiveMode } : n.visibleConfig.keep === "hidden" && (n.visibleConfig = { keep: n.visibleConfig.keep })), typeof n.unfoldedConfig == "object" && (n.unfoldedConfig.disableFold && (n.unfoldedConfig = { keep: "unfolded" }), n.unfoldedConfig.disableUnfold && (n.unfoldedConfig = { keep: "folded" }), n.unfoldedConfig.keep && (n.unfoldedConfig = { keep: n.unfoldedConfig.keep }));
  const t = (i = n.initialState) != null ? i : {};
  return typeof n.unfoldedConfig == "object" && (n.unfoldedConfig.keep === "unfolded" ? t.unfolded = !0 : n.unfoldedConfig.keep === "folded" && (t.unfolded = !1)), typeof n.visibleConfig == "object" && (n.visibleConfig.keep === "visible" ? t.visible = !0 : n.visibleConfig.keep === "hidden" && (t.visible = !1)), n.initialState = t, n;
}
class oI extends rs {
  constructor(e) {
    super(e);
    u(this, "tags", []);
    u(this, "cache", new Oo());
    u(this, "config", eI);
    u(this, "renderQueue", /* @__PURE__ */ new Map());
    /** 插件参数 */
    u(this, "params");
    // eslint-disable-next-line @typescript-eslint/member-ordering
    u(this, "mediaStore", Bh({
      currentMediaElement: null
    }));
    u(this, "store", {
      disposers: [],
      disposed: !1,
      resizeObserverDisposerAdding: !1,
      css3DRenderDisposer: /* @__PURE__ */ new Map()
    });
    // eslint-disable-next-line @typescript-eslint/member-ordering
    u(this, "domEvents", new Pr(this.five));
    u(this, "_cache_pointTag");
    u(this, "_cache_2DPointTag");
    u(this, "_cache_css3DTag");
    u(this, "_container", null);
    u(this, "timeoutIds", []);
    u(this, "whyHide", (e) => {
      const i = this.getTagById(e);
      return i ? i.whyHide() : { reason: `tag ${e} not found` };
    });
    u(this, "loadVideoFirstFrame", () => {
      iI && this.hooks.emit("loadVideoFirstFrame");
    });
    u(this, "tagsDo", (e, i, s = !0) => {
      let r = [...e != null ? e : this.tags].sort((c, h) => c.getSquaredDistance() - h.getSquaredDistance());
      this.timeoutIds.forEach((c) => clearTimeout(c)), this.timeoutIds.length = 0;
      for (let c = 0; c < 20; c++) {
        const h = r[c];
        h && (i(h), s && (h._updating = !1));
      }
      r = r.slice(20);
      const o = r.length > 1e3, a = o ? 30 : 17, l = o ? 1 : 3;
      for (let c = 0; c < r.length; c += l) {
        const h = [];
        for (let f = 0; f < l; f++)
          r[c + f] && h.push(r[c + f]);
        h.forEach((f) => {
          s && (f._updating = !0);
        });
        const d = setTimeout(() => {
          h.forEach((f) => {
            i(f), s && (f._updating = !1);
          });
        }, c * a);
        this.timeoutIds.push(d);
      }
    });
    this.mediaStore.subscribe(({ currentMediaElement: i }) => {
      this.tags.forEach((s) => {
        var r;
        if (s.mediaPlane instanceof b1 && i !== s.mediaPlane.videoInstance) {
          if (!((r = s.mediaPlane.videoInstance) != null && r.src) || i === s.mediaPlane.videoInstance)
            return;
          s.mediaPlane.pause();
        }
      });
    });
  }
  get container() {
    var e;
    return this._container || ((e = this.five.getElement()) == null ? void 0 : e.parentElement);
  }
  set container(e) {
    this._container = e;
  }
  // eslint-disable-next-line accessor-pairs
  set tagsLengthWillUpdate(e) {
    e && (this._cache_pointTag = this.tags.filter((i) => i.stickType === "2DPoint" || i.stickType === "3DPoint").filter((i) => i.position), this._cache_2DPointTag = this.tags.filter((i) => i.stickType === "2DPoint").filter((i) => i.position), this._cache_css3DTag = this.tags.filter(
      (i) => i.stickType === "3DPoint" || i.stickType === "Plane" || i.stickType === "Model" && i.contentType === "MediaModel"
    ).filter((i) => {
      const s = i.computeRenderType();
      return s === "BehindDom" || s === "Dom";
    }));
  }
  get filterPointTag() {
    var e;
    return (e = this._cache_pointTag) != null ? e : [];
  }
  get filter2DPointTag() {
    var e;
    return (e = this._cache_2DPointTag) != null ? e : [];
  }
  get filterCSS3DTag() {
    var e;
    return (e = this._cache_css3DTag) != null ? e : [];
  }
  updateFive(e) {
    super.updateFive(e), this.domEvents.dispose(), this.domEvents = new Pr(e);
  }
  addRenderQueue(e) {
    var o, a;
    const { type: i, keys: s = [], tags: r = [] } = e;
    this.renderQueue.has(i) ? this.renderQueue.set(i, {
      keys: Array.from(/* @__PURE__ */ new Set([...(o = this.renderQueue.get(i).keys) != null ? o : [], ...s])),
      tags: Array.from(/* @__PURE__ */ new Set([...(a = this.renderQueue.get(i).tags) != null ? a : [], ...r]))
    }) : this.renderQueue.set(i, { keys: s, tags: r });
  }
  getTagById(e) {
    const i = this.tags.find((s) => s.id === e);
    if (!i) {
      console.warn(`getTagById Error: can't find tag id: ${e}`);
      return;
    }
    return i;
  }
  /** 暂停当前标签内进行的所有多媒体 */
  pauseCurrentMedia() {
    this.mediaStore.set({ currentMediaElement: null });
  }
  /**
   * @description 获取标签配置
   */
  getTagConfig(e, i) {
    var a, l, c;
    const s = this.calculateTagConfig(e, { useCache: i == null ? void 0 : i.useCache }), r = (a = i == null ? void 0 : i.fiveMode) != null ? a : this.five.getCurrentState().mode, o = (l = s.configWithFiveMode) == null ? void 0 : l[r];
    return (c = o != null ? o : s) != null ? c : {};
  }
  getPositions(e) {
    if (_4(e))
      return e.position;
    if (Ms(e))
      return e.data.mediaPosition;
    if (H4(e))
      return G4(this.five.camera.position, Qe(e.position), Qe(e.normal));
  }
  addObjectClickHandler(e, i, s) {
    if (!i || !this.domEvents)
      return () => {
      };
    const r = () => !(!e.currentVisible || e.loading), o = (a) => {
      if (!r())
        return !1;
      s(a.origDomEvent);
    };
    return this.domEvents.addEventListener(i, "click", o), () => {
      var a;
      (a = this.domEvents) == null || a.removeEventListener(i, "click", o);
    };
  }
  /**
   * @description 检查是否已经销毁
   * @returns isDisposed; 已经销毁返回 true，否则返回 false
   */
  checkDisposed() {
    return this.store.disposed ? (console.error("PanoTagPluginController has been disposed"), !0) : !1;
  }
  /**
   * @description 获取merge后的配置
   */
  calculateTagConfig(e, i) {
    var p, m, v, b, w;
    const s = (p = i == null ? void 0 : i.useCache) != null ? p : !0;
    if (!e)
      return (m = this.config.globalConfig) != null ? m : {};
    if (s) {
      if ((v = e == null ? void 0 : e.computedConfig) != null && v._isMerged)
        return e.computedConfig;
      if ((b = e == null ? void 0 : e.config) != null && b._isMerged)
        return e.config;
    }
    const r = {}, o = {}, a = {};
    this.config.contentTypeConfig && Object.entries(this.config.contentTypeConfig).forEach(([x, k]) => {
      var C, I;
      const T = x, S = T.split("-"), V = x.startsWith("["), z = V ? S[0].slice(1, -1) : void 0, O = V ? S.slice(1) : S, A = z ? ["PanoramaLike", "ModelLike"].includes(z) ? (C = o[z]) != null ? C : o[z] = {} : (I = a[z]) != null ? I : a[z] = {} : r;
      if (!A[T]) {
        if (O.length === 0 && (A[T] = k), O.length === 1) {
          const [E] = O;
          (e.contentType === E || E === "Any") && (A[T] = k);
        }
        if (O.length === 2) {
          const [E = "Any", D = "Any"] = O;
          E === "Mixin" && e.contentType === D && (A[T] = k), (e.stickType === E || E === "Any") && (e.contentType === D || D === "Any") && (A[T] = k);
        }
        if (O.length === 3) {
          const [E = "Any", D, L] = O;
          if (D === "Audio" && e.contentType === "Audio") {
            const N = e;
            (N.stickType === E || E === "Any") && N.data.appearance === L && (A[T] = k);
          }
        }
      }
    });
    const l = (w = e.initialConfig) != null ? w : {}, c = Je({}, g1, this.config.globalConfig, ...Object.values(r)), h = Je({}, c, l), d = {}, f = Object.values(Vt.Mode);
    $a(o).forEach(([x, k]) => {
      f.forEach((T) => {
        (x === "PanoramaLike" && Qn(T) || x === "ModelLike" && di(T)) && (d[T] = Je({}, c, ...Object.values(k), l, { _isMerged: !0 }));
      });
    }), $a(a).forEach(([x, k]) => {
      const T = d[x];
      d[x] = Je({}, c, T, ...Object.values(k), l, { _isMerged: !0 });
    });
    const g = de(_({}, h), { configWithFiveMode: d });
    return el(g), Object.values(d).forEach((x) => el(x)), g._isMerged = !0, g;
  }
}
class aI extends oI {
  constructor(e) {
    super(e);
    u(this, "rendererMap", /* @__PURE__ */ new Map());
    u(this, "contentTypeMap", /* @__PURE__ */ new Map());
    u(this, "group", new fn());
    u(this, "imagePlaneGroup", new fn());
    u(this, "gltfObjectGroup", new fn());
    /** 维护一个可用模型表，用于快速删除不应该在场景中的模型 */
    u(this, "enabledModelTagSet", /* @__PURE__ */ new Set());
    /** 临时状态 */
    u(this, "temporaryState", { visible: !0 });
    /** 点标签 */
    u(this, "TagContainerSvelte");
    this.group.name = "PanoTagPluginModelGroup", this.gltfObjectGroup.name = "PanoTagPluginGLTFObjectGroup", this.imagePlaneGroup.name = "ImagePlaneGroup", this.group.add(this.gltfObjectGroup), this.group.add(this.imagePlaneGroup);
  }
  /**
   * @description 设置 contentType 的渲染器
   * @param {string} contentType
   * 如果是 `TagContentType` 中的类型，将会覆盖掉插件内部默认的渲染器,
   * 如果是其他任意 string 如：'Foo'，则可以将类似 `{id: 1, contentType: 'Foo', position: [0,0,0]}` 的 tag 交给插件渲染
   * @param config.usePoint 是否需要标签点, 默认为 false
   * @note 优先级低于 tag.element
   */
  registerRenderer(e, i, s) {
    var r;
    this.rendererMap.set(e, { renderer: i, usePoint: (r = s == null ? void 0 : s.usePoint) != null ? r : !1 });
  }
  bindRenderer(e, i) {
    this.contentTypeMap.set(e, i);
  }
  disposeAllCSS3DContainer() {
    for (const [, e] of this.store.css3DRenderDisposer)
      e == null || e.forEach((i) => i == null ? void 0 : i());
    this.store.css3DRenderDisposer = /* @__PURE__ */ new Map();
  }
  /**
   * @description 检查并销毁不用的3D贴片
   */
  clearUnusedPanelTag() {
    this.filter2DPointTag.forEach((e) => {
      var i;
      (i = e.tag3DContentSvelte) == null || i.dispose(), e.tag3DContentSvelte = void 0;
    });
    for (const [e, i] of this.store.css3DRenderDisposer) {
      const s = this.getTagById(e);
      (!s || s.stickType === "2DPoint") && (i == null || i.forEach((r) => r == null ? void 0 : r()), this.store.css3DRenderDisposer.delete(e));
    }
  }
}
class lI {
  constructor(t) {
    u(this, "plugin");
    u(this, "logBound", !1);
    u(this, "bindLogByObject", (t) => {
      Object.getOwnPropertyNames(t).forEach((e) => {
        try {
          typeof t[e] == "function" && (t[e] = new Proxy(t[e], {
            apply: (i, s, r) => (["render"].includes(e) || this.log(e, { obj: t }, ...r), i.apply(s, r))
          }));
        } catch (i) {
        }
      });
    });
    this.plugin = t;
  }
  get debug() {
    return this.plugin.debug;
  }
  addDebugPoints() {
    try {
      V4(this.plugin.five, this.plugin.tags);
    } catch (t) {
      console.error(t);
    }
  }
  bindLog() {
    this.logBound || (this.logBound = !0, this.bindLogByObject(this.plugin), this.bindLogByObject(this.plugin.constructor.prototype));
  }
  log(t, ...e) {
    let i = new Error().stack;
    console.debug(
      `%cPanoTagPlugin%c${t}`,
      "background-color: #35e0ed; color: black; padding:0 6px; border-radius: 3px",
      "padding: 0 3px; color: #f3f47c",
      ...e,
      { stack: i }
    );
  }
  closeIntersectRaycaster() {
    this.plugin.tags.forEach((t) => {
      var e;
      Os((e = t == null ? void 0 : t.initialConfig) == null ? void 0 : e.visibleConfig).intersectRaycaster && (t.initialConfig.visibleConfig.intersectRaycaster.enabled = !1);
    }), this.plugin.changeGlobalConfig({
      visibleConfig: {
        intersectRaycaster: {
          enabled: !1
        }
      }
    });
  }
}
function tc(n, t, e) {
  var g, p, m, v, b;
  const i = (g = e == null ? void 0 : e.useCache) != null ? g : !0;
  if (!n)
    return (p = t.globalConfig) != null ? p : {};
  if (i) {
    if ((m = n == null ? void 0 : n.computedConfig) != null && m._isMerged)
      return n.computedConfig;
    if ((v = n == null ? void 0 : n.config) != null && v._isMerged)
      return n.config;
  }
  const s = {}, r = {}, o = {};
  t.contentTypeConfig && Object.entries(t.contentTypeConfig).forEach(([w, x]) => {
    var A, C;
    const k = w, T = k.split("-"), S = w.startsWith("["), V = S ? T[0].slice(1, -1) : void 0, z = S ? T.slice(1) : T, O = V ? ["PanoramaLike", "ModelLike"].includes(V) ? (A = r[V]) != null ? A : r[V] = {} : (C = o[V]) != null ? C : o[V] = {} : s;
    if (!O[k]) {
      if (z.length === 0 && (O[k] = x), z.length === 1) {
        const [I] = z;
        (n.contentType === I || I === "Any") && (O[k] = x);
      }
      if (z.length === 2) {
        const [I = "Any", E = "Any"] = z;
        I === "Mixin" && n.contentType === E && (O[k] = x), (n.stickType === I || I === "Any") && (n.contentType === E || E === "Any") && (O[k] = x);
      }
      if (z.length === 3) {
        const [I = "Any", E, D] = z;
        if (E === "Audio" && n.contentType === "Audio") {
          const L = n;
          (L.stickType === I || I === "Any") && L.data.appearance === D && (O[k] = x);
        }
      }
    }
  });
  const a = (b = n.initialConfig) != null ? b : {}, l = Je({}, g1, t.globalConfig, ...Object.values(s)), c = Je({}, l, a), h = {}, d = Object.values(Vt.Mode);
  $a(r).forEach(([w, x]) => {
    d.forEach((k) => {
      (w === "PanoramaLike" && Qn(k) || w === "ModelLike" && di(k)) && (h[k] = Je({}, l, ...Object.values(x), a, { _isMerged: !0 }));
    });
  }), $a(o).forEach(([w, x]) => {
    const k = h[w];
    h[w] = Je({}, l, k, ...Object.values(x), a, { _isMerged: !0 });
  });
  const f = de(_({}, c), { configWithFiveMode: h });
  return el(f), Object.values(h).forEach((w) => el(w)), f._isMerged = !0, f;
}
function ip(n) {
  const t = n.split("?")[0].split(".").pop();
  return t ? t.toLowerCase() : "";
}
function cI(n, t) {
  if (!n)
    return 0;
  const e = n.observers;
  if (!t || !e)
    return console.error("getFloorIndex: invalid arguments: ", { point: t, observer: e }), 0;
  const i = [];
  e.forEach((r) => {
    var a, l, c;
    const o = (l = (a = r.floorIndex) != null ? a : r.floor_index) != null ? l : 0;
    i[o] || (i[o] = []), i[o].push(br(r.position, (c = n.options) == null ? void 0 : c.transform).y);
  });
  const s = i.map((r) => r.reduce((o, a) => o + a, 0) / r.length);
  for (let r = s.length - 1; r > 0; r--)
    if (t.y >= s[r])
      return r;
  return 0;
}
function Vs() {
  let n, t;
  return {
    promise: new Promise((i, s) => {
      n = i, t = s;
    }),
    resolve: n,
    reject: t
  };
}
class ed {
  constructor(t, e) {
    u(this, "plugin");
    u(this, "id");
    u(this, "contentType");
    u(this, "stickType");
    u(this, "enabled");
    u(this, "config");
    u(this, "data");
    u(this, "state");
    u(this, "temporaryState", { visible: !0 });
    u(this, "originPosition");
    u(this, "position");
    u(this, "fiveState");
    u(this, "model");
    u(this, "matrix");
    u(this, "screenPosition");
    u(this, "normal");
    u(this, "mediaPlane");
    u(this, "hooks");
    u(this, "zIndex");
    u(this, "play");
    u(this, "pause");
    u(this, "tag3DContentSvelte");
    u(this, "dom");
    u(this, "contentDom");
    u(this, "initialConfig");
    u(this, "computedConfig");
    u(this, "cache");
    u(this, "entryFromModel");
    u(this, "_updating", !1);
    /**
     * 是否启用 hover 行为，默认 为config.popoverConfig.enabled
     */
    u(this, "hoverEnabled");
    u(this, "ready", () => {
      const { promise: t, resolve: e } = Vs();
      if (!this._updating)
        e();
      else {
        const i = setInterval(() => {
          this._updating || (clearInterval(i), e());
        }, 17);
        setTimeout(() => {
          clearInterval(i), e();
        }, 300);
      }
      return t;
    });
    var c, h, d, f, g, p;
    this.plugin = t;
    const i = Kh(e);
    e.stickType = i;
    const s = JSON.parse(JSON.stringify(e.data)), r = (c = e.initialConfig) != null ? c : e.config ? JSON.parse(JSON.stringify(e.config)) : {};
    e.initialConfig = r;
    const o = tc(e, t.config), a = this.getConfig(e);
    e.config = a, this.id = (h = e.id) != null ? h : Dt(), this.enabled = (d = e.enabled) != null ? d : !0, this.contentType = e.contentType, this.hoverEnabled = (g = (f = a.popoverConfig) == null ? void 0 : f.enabled) != null ? g : !0, this.data = (p = a.initialData) != null && p.important ? Je(e.data, s, a.initialData) : Je(e.data, a.initialData, s);
    let l;
    typeof a.unfoldedConfig == "object" ? a.unfoldedConfig.keep === "unfolded" ? l = !0 : a.unfoldedConfig.keep === "folded" ? l = !1 : l = !this.can("fold") : l = !this.can("fold"), this.state = _({
      visible: void 0,
      unfolded: l
    }, a.initialState), this.isPopoverConfigEnabled() && (this.state.unfolded = !1), this.originPosition = e.position, e.originPosition = this.originPosition, this.position = (() => {
      const m = e.originPosition;
      if (!m)
        return;
      const v = t.workUtil.transform;
      return Array.isArray(m) && m.length === 4 ? m.map(Qe).map((b) => br(b, v).toArray()) : br(Qe(m), v).toArray();
    })(), this.matrix = e.matrix ? (() => {
      const m = new P.Matrix4().fromArray(e.matrix);
      return m.premultiply(t.workUtil.transform), m.elements;
    })() : e.matrix, this.initialConfig = r, this.computedConfig = o, this.stickType = i, this.config = e.config, this.fiveState = e.fiveState, this.normal = e.normal, this.cache = new Oo(), this.hooks = new Pt(), Object.keys(e).forEach((m) => {
      this[m] === void 0 && e[m] !== void 0 && (this[m] = e[m]);
    });
  }
  get visible() {
    var t;
    return ((t = this.temporaryState) == null ? void 0 : t.visible) !== !1 && this.state.visible !== !1 && this.enabled !== !1;
  }
  get five() {
    return this.plugin.five;
  }
  get fiveUtil() {
    return this.plugin.fiveUtil;
  }
  get workUtil() {
    return this.plugin.workUtil;
  }
  get centerPosition() {
    const t = Qc(this);
    return $t(...Array.isArray(t) ? t : [t]);
  }
  get currentConfig() {
    var s, r;
    const t = tc(this, this.plugin.config, { useCache: !0 }), e = this.five.getCurrentState().mode, i = (s = t.configWithFiveMode) == null ? void 0 : s[e];
    return (r = i != null ? i : t) != null ? r : {};
  }
  get currentVisible() {
    return !(!this.plugin.state.enabled || !this.plugin.state.visible || !this.enabled || !this.state.visible);
  }
  get sharedCache() {
    return this.plugin.cache;
  }
  /**
   * @description 使 state.visible 生效，但是只是加入渲染队列。等下次渲染时再真正生效
   */
  applyVisible() {
    throw new Error("Method not implemented.");
  }
  /**
   * @description 找到标签
   */
  find(t) {
    return $(this, null, function* () {
      var s;
      const e = this.fiveState;
      if (!this.fiveState)
        return this;
      const i = (s = t == null ? void 0 : t.targetMode) != null ? s : this.five.state.mode;
      if (i === "Panorama") {
        const r = e == null ? void 0 : e.panoIndex;
        if (si(r))
          return this;
        const o = this.workUtil.getObserverPosition(r), a = this.centerPosition.clone().sub(o).normalize();
        this.five.setState(_({
          mode: "Panorama",
          workCode: this.workUtil.workCode,
          panoIndex: r
        }, Ho(a))), yield this.five.ready();
      } else
        i === "Mapview" && (yield Kg(this.five, this.centerPosition, t == null ? void 0 : t.pointConfig));
      return this;
    });
  }
  /**
   * @description 闪烁
   */
  blink(t) {
    return $(this, null, function* () {
      var a, l, c, h;
      yield this.ready();
      const e = (a = this.enabled) != null ? a : !0, i = (l = this.state) == null ? void 0 : l.visible, s = e && i;
      s === !1 && (this.state.visible = !0, this.enabled = !0, this.applyVisible(), this.plugin.render(), this.computeRenderType() !== "Mesh" ? yield new Promise((d) => $(this, null, function* () {
        if (this.dom || this.contentDom) {
          d();
          return;
        }
        const f = setInterval(() => {
          (this.dom || this.contentDom) && (d(), clearInterval(f));
        }, 16.7);
      })) : this.stickType === "Model" && !((c = this.model) != null && c.object) ? yield (h = this.model) == null ? void 0 : h.promise : this.stickType === "Plane" && (yield new Promise((d) => $(this, null, function* () {
        if (this.mediaPlane) {
          d();
          return;
        }
        const f = setInterval(() => {
          this.mediaPlane && (d(), clearInterval(f));
        }, 16.7);
      }))), this.dom && (this.dom.style.visibility = "hidden"), this.contentDom && (this.contentDom.style.visibility = "hidden"));
      const r = (() => {
        var f, g, p;
        const d = [];
        return d.push(this.dom), d.push((g = (f = this.tag3DContentSvelte) == null ? void 0 : f.css3DInstance) == null ? void 0 : g.container), d.push((p = this.model) == null ? void 0 : p.object), d.push(this.mediaPlane), d.filter(Boolean);
      })();
      if (!r.length) {
        console.warn("tagDom is empty");
        return;
      }
      yield (s ? ul : Zg)(r, _({
        begin: () => {
          s === !1 && (this.dom && (this.dom.style.visibility = ""), this.contentDom && (this.contentDom.style.visibility = ""));
        },
        updateRender: () => {
          this.five.needsRender = !0;
        }
      }, t)).finished, e === !1 && (this.enabled = !1, this.updateVisible()), i === !1 && this.updateVisible(), s === !1 && (this.dom && (this.dom.style.visibility = ""), this.contentDom && (this.contentDom.style.visibility = ""));
    });
  }
  /**
   * @description 展开
   */
  unfold() {
  }
  /**
   * @description 展开自己，收起其他标签
   */
  unfoldAndFoldOthers() {
  }
  /**
   * @description 收起
   */
  fold() {
  }
  /**
   * @description 启用
   */
  enable() {
    this.enabled = !0, this.hooks.emit("enable"), this.applyVisible();
  }
  /**
   * @description 禁用
   */
  disable() {
    this.enabled = !1, this.hooks.emit("disable"), this.applyVisible();
  }
  /**
   * @deprecated use `setData` instead
   */
  changeData(t, e = !0) {
    return this.setData(t, e);
  }
  /**
   * @deprecated use `setPosition` instead
   */
  changePosition(t) {
    return this.setPosition(t);
  }
  /**
   * @description 修改标签数据
   * @param deepMerge 是否深度合并 data，默认为 true
   */
  setData(t, e = !0) {
    e ? this.data = Je(this.data, t) : this.data = _(_({}, this.data), t), this.hooks.emit("dataChanged", this.data);
  }
  /**
   * @description 修改标签位置
   */
  setPosition(t) {
    throw new Error("Method not implemented.");
  }
  /**
   * @description 设置标签实例的属性
   * @param deepMerge 是否深度合并 data，默认为 true
   */
  set(t, e = !0) {
    this.plugin.tagsLengthWillUpdate = !0, e ? Je(this, t) : Object.assign(this, t), this.cache.clear();
  }
  updateConfig() {
    var i;
    const t = this.getConfig(void 0, { useCache: !1 });
    this.computedConfig = t;
    const e = this.getConfig();
    if (this.config = e, this.config.initialData) {
      const s = JSON.parse(JSON.stringify(this.data));
      this.data = (i = e.initialData) != null && i.important ? Je(this.data, s, e.initialData) : Je(this.data, e.initialData, s);
    }
    this.cache.clear();
  }
  updateVisible() {
    this.enabled ? (this.state.visible = this.getVisible(), this.applyVisible()) : this.applyVisible(), this._updating = !1;
  }
  updateZIndex() {
    const t = this.getSquaredDistance();
    this.zIndex = Math.round((1e4 - (t != null ? t : 0)) * 100);
  }
  getConfig(t, e) {
    var o, a, l;
    const i = tc(t != null ? t : this, this.plugin.config, { useCache: e == null ? void 0 : e.useCache }), s = (o = e == null ? void 0 : e.fiveMode) != null ? o : this.five.getCurrentState().mode, r = (a = i.configWithFiveMode) == null ? void 0 : a[s];
    return (l = r != null ? r : i) != null ? l : {};
  }
  getDistance(t, e = 3) {
    const i = _(_({}, this.five.getCurrentState()), t), { panoIndex: s, mode: r } = i, o = r === "Panorama" ? this.workUtil.getObserverPosition(s) : this.five.camera.position, a = this.centerPosition;
    return !o || !a ? -1 : o.distanceTo(a);
  }
  /**
   * @description 用于排序的距离，性能更好
   */
  getSquaredDistance() {
    const t = this.five.camera.position;
    let e;
    return Array.isArray(this.position[0]) ? e = this.position[0] : e = this.position, ta(e[0] - t.x, 2) + ta(e[1] - t.y, 2) + ta(e[2] - t.z, 2);
  }
  getVisible(t) {
    if (!this.enabled || !this.plugin.state.enabled || !this.fiveUtil.model)
      return !1;
    const e = _(_({}, this.five.getCurrentState()), t);
    let i = this.cache.getVisible(this, e);
    return si(i) && (i = this.computeVisible(e).value, this.cache.setVisible(this, e, i)), i;
  }
  getUnfoldedByPanoIndex(t) {
    if (!this.currentVisible)
      return;
    const i = this.computeUnfoldedByPanoIndex(t);
    return i && this.getUnfoldedByCamera();
  }
  getUnfoldedByCamera() {
    return this.currentVisible ? this.computeUnfoldedByCamera() : void 0;
  }
  can(t) {
    var i, s;
    if ((t === "fold" || t === "unfold") && ((s = (i = this.currentConfig) == null ? void 0 : i.popoverConfig) == null ? void 0 : s.enabled) === !0)
      return !1;
    const e = this.currentConfig;
    if (!e || typeof e != "object")
      return !0;
    if (t === "show" || t === "hide") {
      if (!e.visibleConfig || typeof e.visibleConfig != "object")
        return !0;
      if (t === "show" && e.visibleConfig.keep === "hidden" || t === "hide" && e.visibleConfig.keep === "visible")
        return !1;
    }
    if (t === "fold" || t === "unfold") {
      if (!e.unfoldedConfig || typeof e.unfoldedConfig != "object")
        return !0;
      if (t === "fold" && e.unfoldedConfig.keep === "unfolded" || t === "unfold" && e.unfoldedConfig.keep === "folded")
        return !1;
    }
    return !0;
  }
  onClick(t) {
  }
  computeRenderType() {
    const t = (() => {
      if (this.stickType === "3DPoint")
        return "Dom";
      const e = this.getConfig();
      if (!e || typeof e != "object" || !e.renderType)
        return;
      const i = this.data.mediaData;
      if (!(!i || i.length === 0) && e.renderType === "Mesh") {
        if (N4(this)) {
          if (i.length === 1) {
            if (i[0].type === "Video")
              return navigator.userAgent.toLowerCase().indexOf("firefox") > -1 && navigator.userAgent.toLowerCase().indexOf("mobile") > -1 ? "Dom" : "Mesh";
            if (i[0].type === "Image")
              return ip(i[0].url) === "gif" ? "Dom" : "Mesh";
          }
        } else if (Ms(this))
          return i.length === 1 && i[0].type === "Image" ? ip(i[0].url) === "gif" ? "Dom" : "Mesh" : "BehindDom";
      }
    })();
    return t != null ? t : "Dom";
  }
  computeVisible(t) {
    const e = _(_({}, this.five.getCurrentState()), t), { panoIndex: i, mode: s } = e, r = [];
    return (() => {
      var c, d, f, g;
      const l = (c = this.getConfig().visibleConfig) != null ? c : {};
      if (typeof l == "function")
        return {
          value: l(this.five, { tag: this, distance: this.getDistance(e, void 0) }),
          checkedList: r,
          reason: "config function result"
        };
      {
        if (l.keep === "hidden")
          return { value: !1, checkedList: r, reason: "config.keep is hidden" };
        if (l.keep === "visible")
          return { value: !0, checkedList: r, reason: "config.keep is visible" };
        const p = this.computeVisibleByFiveMode(l, s);
        if ((p == null ? void 0 : p.value) === !1)
          return p;
        if (l.followModelVisibility === !0 && ["poincare", "aerophoto", "sand"].includes(this.workUtil.fromType) && (s === "Floorplan" || s === "Mapview")) {
          const h = this.computeVisibleByFloorIndex(), { value: m } = h, v = Rn(h, ["value"]);
          if (m === !1)
            return _({ value: !1, checkedList: r, reason: "followModelVisibility check failed" }, v);
        }
        if (Qn(s) && l.visiblePanoIndex !== void 0 && l.visiblePanoIndex !== "all" && i !== void 0) {
          if (r.push("visiblePanoIndex"), Array.isArray(l.visiblePanoIndex) && !l.visiblePanoIndex.includes(i))
            return {
              value: !1,
              checkedList: r,
              reason: `current panoIndex is not included in visiblePano. currentPanoIndex: ${i}, visiblePanoIndex: ${l.visiblePanoIndex}`
            };
          if (l.visiblePanoIndex === "current" && i !== ((d = this.fiveState) == null ? void 0 : d.panoIndex))
            return {
              value: !1,
              checkedList: r,
              reason: `current panoIndex is not equal to tag.panoIndex. currentPanoIndex: ${i}, tag.panoIndex: ${(f = this.fiveState) == null ? void 0 : f.panoIndex}`
            };
        }
        if (l.visibleDistance !== void 0 && (r.push("visibleDistance"), l.visibleDistance !== "unLimited")) {
          const m = this.getDistance(e, 1);
          if (ba(m, l.visibleDistance) === !1)
            return {
              value: !1,
              checkedList: r,
              panoIndex: i,
              visibleDistance: l.visibleDistance,
              reason: `distance is not in visibleDistance. distance: ${m}, visibleDistance: ${l.visibleDistance.min} - ${l.visibleDistance.max}`
            };
        }
        if (l.intersectRaycaster !== !1 && (typeof l.intersectRaycaster != "object" || l.intersectRaycaster.enabled !== !1)) {
          if (r.push("intersectRaycaster"), i === void 0)
            return {
              value: !1,
              checkedList: r,
              reason: `intersectRaycaster check failed: panoIndex is ${i}`
            };
          if (i === ((g = this.fiveState) == null ? void 0 : g.panoIndex))
            r.push("intersectCheckSkiped");
          else {
            const m = this.computeVisibleByIntersect(i);
            if (m.value === !1)
              return Object.assign(m, { checkedList: r });
          }
        }
        return {
          value: !0,
          checkedList: r,
          reason: "all check passed"
        };
      }
    })();
  }
  /**
   * @description 计算标签可见性
   */
  computeVisibleByFiveMode(t, e) {
    const i = () => {
      var o, a;
      let r = typeof t.visibleFiveMode == "function" ? t.visibleFiveMode(this) : t.visibleFiveMode;
      if (r || (r = (a = (o = this.fiveState) == null ? void 0 : o.mode) != null ? a : this.workUtil.observers.length ? "Panorama" : "ModelLike"), Array.isArray(r))
        return r.includes(e);
      if (r === "ModelLike")
        return di(e);
      if (r === "PanoramaLike")
        return !Qn(e);
      if (r === "all")
        return !0;
      if (typeof r == "string")
        return r === e;
    };
    if ((() => {
      var o;
      const r = i();
      if (_e((o = this.fiveState) == null ? void 0 : o.panoIndex) && t.entryFromModel) {
        if (di(e) && r ? this.entryFromModel = !1 : this.entryFromModel = !0, di(e))
          return !0;
      } else
        this.entryFromModel = !1;
      return r;
    })() === !1)
      return {
        value: !1,
        reason: "current mode is not included in visibleFiveMode",
        visibleFiveMode: t.visibleFiveMode,
        mode: e
      };
  }
  /** 通过射线检测标签可用性 */
  computeVisibleByIntersect(t) {
    var l, c, h, d;
    const e = Os(Os((l = this.getConfig().visibleConfig) != null ? l : {}).intersectRaycaster), i = t != null ? t : this.five.getCurrentState().panoIndex, s = Qn(this.five.getCurrentState().mode) ? this.workUtil.getObserverPosition(i) : this.five.camera.position;
    if (s === void 0)
      return { value: !1, reason: { type: "startPosition is undefined", fivePanoIndex: i } };
    const r = bn(
      (() => {
        var g;
        const f = (g = e.checkPoints) != null ? g : "center";
        return f === "center" ? ep(this) : f === "corner" ? Qc(this) : Array.isArray(f) ? f : [];
      })()
    );
    let o = 0, a = 0;
    for (const f of r) {
      const g = new P.Vector3().subVectors(f, s).normalize();
      let p;
      pn.set(s, g);
      const [m] = this.fiveUtil.model.intersectRaycaster(pn);
      p = m == null ? void 0 : m.distance;
      const v = (() => {
        if (!Ms(this))
          return;
        const T = this.plugin.tags.filter(Ms).map((V) => {
          var z;
          return (z = V.model) == null ? void 0 : z.object;
        }).filter(_e), [S] = pn.intersectObjects(T, !0);
        return S;
      })(), b = s.distanceTo(f), w = (c = e.distanceAccuracy) != null ? c : 0.01;
      p = Math.min(p != null ? p : 1 / 0, (h = v == null ? void 0 : v.distance) != null ? h : 1 / 0), p + w >= b ? o++ : a++;
      const k = (d = e.needPassed) != null ? d : 1;
      if (o >= k)
        return { value: !0 };
    }
    return a === 0 ? { value: !0 } : {
      value: !1,
      reason: {
        type: "intersectRaycaster check failed",
        passedCount: o,
        needPassed: e.needPassed,
        model: this.fiveUtil.model.name
      }
    };
  }
  computeVisibleByFloorIndex() {
    var s, r, o, a, l, c, h;
    let t = 0;
    const e = (s = this.fiveState) == null ? void 0 : s.panoIndex;
    e !== void 0 ? t = (r = this.workUtil.getObserver(e)) == null ? void 0 : r.floorIndex : t = cI(
      this.workUtil.work,
      (h = (c = (a = (o = this.model) == null ? void 0 : o.object) == null ? void 0 : a.position) != null ? c : (l = this.mediaPlane) == null ? void 0 : l.position) != null ? h : ep(this)
    );
    const i = this.fiveUtil.model.shownFloor;
    return {
      value: i === null || i === t,
      currentFiveFloorIndex: i,
      tagFloorIndex: t
    };
  }
  /**
   * @description 获取是否展开
   */
  computeUnfoldedByPanoIndex(t) {
    const e = this.getConfig().unfoldedConfig;
    if (e) {
      if (typeof e == "function")
        return e(this.five, { tag: this, distance: this.getDistance({ panoIndex: t }) });
      if (e.keep === "folded")
        return !1;
      if (e.keep === "unfolded")
        return !0;
      if (e.unfoldDistance && ba(this.getDistance({ panoIndex: t }), e.unfoldDistance) === !1)
        return !1;
    }
  }
  computeUnfoldedByCamera() {
    var e;
    if (this.entryFromModel && di(this.five.state.mode))
      return !1;
    const t = this.getConfig().unfoldedConfig;
    if (t) {
      if (typeof t == "function")
        return t(this.five, { tag: this, distance: this.getDistance() });
      if (t.keep === "folded")
        return !1;
      if (t.keep === "unfolded")
        return !0;
      if (t.autoUnfold === void 0 || t.autoUnfold === !1 || t.autoUnfold.enable === !1 || !t.autoUnfold.strategy)
        return;
      if (t.autoUnfold.strategy === "ScreenPostion") {
        const i = this.computeTagProject();
        if (i && ba(i.x, t.autoUnfold.autoUnfoldProjectX) === !1)
          return !1;
      }
      if (t.autoUnfold.strategy === "MinimumDistance") {
        const r = this.plugin.filterPointTag.filter((a) => a.currentVisible).filter((a) => {
          const l = this.computeTagProject();
          if (!l)
            return !1;
          const { x: c, y: h, z: d } = l;
          return !(Math.abs(d) > 1 || Math.abs(c) > 1 || Math.abs(h) > 1);
        }).map((a) => ({ tag: a, id: a.id, tagConfig: a.getConfig().unfoldedConfig })).filter(({ tagConfig: a }) => {
          var l, c;
          return !(typeof a == "function" || a.keep || a.autoUnfold === !1 || ((l = a.autoUnfold) == null ? void 0 : l.enable) === !1 || ((c = a.autoUnfold) == null ? void 0 : c.strategy) !== "MinimumDistance");
        }).map((a) => de(_({}, a), { distance: a.tag.getDistance() })).filter(({ distance: a, tagConfig: l }) => {
          const c = l.autoUnfold.distance;
          return !(c && ba(a, c) === !1);
        }).sort((a, l) => a.distance - l.distance).findIndex((a) => a.id === this.id);
        if (r === -1 || r <= ((e = t.autoUnfold.maxNumber) != null ? e : 1) - 1 === !1)
          return !1;
      }
      return t.autoUnfold.strategy !== "FoldWhenMove";
    }
  }
  computeTagProject() {
    const t = this.centerPosition;
    if (!t)
      return;
    const { x: e, y: i, z: s } = t.project(this.five.camera);
    if (!(s > 1))
      return { x: e, y: i, z: s };
  }
  addObjectClickHandler(t, e, i) {
    if (!e || !this.plugin.domEvents)
      return () => {
      };
    const s = () => !(!t.currentVisible || t.loading), r = (o) => {
      if (!s())
        return !1;
      i(o.origDomEvent);
    };
    return this.plugin.domEvents.addEventListener(e, "click", r), () => {
      var o;
      (o = this.plugin.domEvents) == null || o.removeEventListener(e, "click", r);
    };
  }
  whyHide() {
    var e;
    if (!this.plugin.state.enabled)
      return { reason: `plugin.state.enabled is ${this.plugin.state.enabled}` };
    if (!this.plugin.state.visible)
      return { reason: `plugin.state.visible is ${this.plugin.state.visible}` };
    if (!this.enabled)
      return { reason: `tag ${this.id} enabled is: ${this.enabled}` };
    const t = de(_({}, this.computeVisible()), {
      tagInstance: this
    });
    return t.value !== this.state.visible ? { reason: "插件故障，请联系维护人员, err: 0", info: t } : this.state.visible ? { reason: "应该是能看见才对", info: t } : t.value === !0 ? { reason: "插件故障，请联系维护人员, err: 1", info: t } : { reason: (e = t.reason.type) != null ? e : t.reason, info: t };
  }
  /**
   * @description 销毁并移除
   */
  destroy() {
    var e, i;
    const t = this.plugin.tags.findIndex((s) => s.id === this.id);
    if (t === -1) {
      console.warn(`Destroy failed: tag ${this.id} not found`);
      return;
    }
    this.disable(), (i = (e = this.tag3DContentSvelte) == null ? void 0 : e.dispose) == null || i.call(e), this.hooks.off(), this.cache.clear(), this.plugin.tags.splice(t, 1), this.plugin.tagsLengthWillUpdate = !0, this.plugin.hooks.emit("tagsLengthChange");
  }
  /**
   * @description 判断 popover 是否在配置上启用（永久配置）
   */
  isPopoverConfigEnabled() {
    var t, e;
    return ((e = (t = this.currentConfig) == null ? void 0 : t.popoverConfig) == null ? void 0 : e.enabled) === !0;
  }
  /**
   * @description 判断当前标签是否允许临时 hover 弹出 popover（临时控制）
   */
  isHoverEnabled() {
    var t;
    return !(((t = this.plugin) == null ? void 0 : t.globalHoverEnabled) === !1 || this.hoverEnabled === !1);
  }
}
const hI = new P.Vector2();
class dI extends ed {
  constructor(e, i) {
    super(e, i);
    u(this, "__Object__");
    u(this, "requestIdleCallbackId");
  }
  /**
   * @description 展开自己，收起其他标签
   */
  unfoldAndFoldOthers() {
    if (this.isPopoverConfigEnabled())
      return;
    const e = this.can("fold"), i = this.can("unfold");
    e && i && (this.state.unfolded = !this.state.unfolded, this.plugin.addRenderQueue({ type: "TagContainerSvelte", keys: ["tags"] }), this.state.unfolded && this.plugin.tags.forEach((s) => {
      s.id !== this.id && s.fold();
    }));
  }
  onClick(e) {
    e.target === "TagPoint" && this.unfoldAndFoldOthers();
  }
  applyVisible() {
    var e, i;
    this.currentVisible && this.updateScreenPosition(), (e = this.tag3DContentSvelte) != null && e.css3DInstance && (this.tag3DContentSvelte.css3DInstance.visible = this.visible), (i = this.tag3DContentSvelte) == null || i.svelteApp.$set({
      state: this.plugin.state,
      temporaryState: this.temporaryState
    }), this.plugin.addRenderQueue({ type: "TagContainerSvelte", keys: ["tags"] });
  }
  unfold() {
    this.isPopoverConfigEnabled() || this.setUnfold(!0);
  }
  fold() {
    this.isPopoverConfigEnabled() || this.setUnfold(!1);
  }
  /**
   * @description 展开/收起指定id的标签
   * @param {boolean} unfolded
   */
  setUnfold(e) {
    if (this.isPopoverConfigEnabled())
      return;
    const i = this.can("fold"), s = this.can("unfold");
    i && s && (this.state.unfolded = e, this.hooks.emit(e ? "unfolded" : "folded"), this.plugin.addRenderQueue({ type: "TagContainerSvelte", keys: ["tags"] }));
  }
  setPosition(e) {
    this.originPosition = e, this.position = e, this.cache.clear(), this.updateVisible(), this.updateScreenPosition(), this.updateZIndex(), this.plugin.addRenderQueue({ type: "TagContainerSvelte", keys: ["tags"] });
  }
  updateScreenPosition(e) {
    var a;
    if (this.stickType !== "2DPoint" && this.stickType !== "3DPoint")
      return;
    const { force: i = !1 } = e != null ? e : {}, s = i ? this.state.visible : this.currentVisible, r = (a = this.__Object__) != null ? a : {
      timeoutId: void 0,
      inAnimation: !1
    };
    if (this.__Object__ = r, !s && this.screenPosition ? (r.inAnimation = !0, r.timeoutId = setTimeout(() => {
      requestAnimationFrame(() => {
        this.currentVisible || (r.inAnimation = !1, this.screenPosition = null, this.plugin.addRenderQueue({ type: "TagContainerSvelte", keys: ["tags"] }));
      });
    }, 1e3)) : r.timeoutId && (clearTimeout(r.timeoutId), r.inAnimation = !1, r.timeoutId = void 0), !s && !r.inAnimation)
      return;
    const o = this.computeTagProject();
    if (o && this.five.renderer) {
      const l = (() => {
        if (!this.currentConfig.simulate3D)
          return 1;
        const h = 2 * Math.tan(0.5 * this.five.camera.fov / 180 * Math.PI), d = this.getDistance(void 0, 1);
        return Math.max(Math.min(1 - h * d / 40, 1), 0.7);
      })(), c = this.five.renderer.getSize(hI);
      this.screenPosition = {
        leftPx: (o.x + 1) / 2 * c.x,
        topPx: (-o.y + 1) / 2 * c.y,
        scale: l
      };
    } else
      this.screenPosition = null;
    this.plugin.addRenderQueue({ type: "TagContainerSvelte", keys: ["tags"] });
  }
  set(e, i = !0) {
    super.set(e, i), this.plugin.addRenderQueue({ type: "TagContainerSvelte", keys: ["tags"] }), e.position && this.setPosition(this.position);
  }
  setData(...e) {
    super.setData(...e), this.plugin.addRenderQueue({ type: "TagContainerSvelte", keys: ["tags"] });
  }
  updateUnfoldedByPanoIndex() {
    if (this.isPopoverConfigEnabled())
      return;
    const e = this.getUnfoldedByPanoIndex();
    if (this.state && (e !== void 0 && (this.state.unfolded = e), e && !this.state.visible)) {
      const i = this.getConfig();
      typeof i.unfoldedConfig == "object" && i.unfoldedConfig.autoFoldWhenHide !== !1 && (this.state.unfolded = !1);
    }
  }
  computeNormal() {
    return new P.Vector3().fromArray(this.normal);
  }
}
const y1 = 1, np = `CSS3DObject@${y1}`, uI = 216e-5, fI = 3e-3;
class w1 extends gn {
  constructor(e) {
    var T, S, V, z, O;
    if (si(e.cornerPoints) && si(e.width))
      throw new Error("cornerPoints and width cannot be both empty");
    const i = (T = e.container) != null ? T : document.createElement("div"), s = (S = e.cornerPoints) != null ? S : (() => {
      const A = e.width / 2;
      return [
        new fe(-A, A, 0),
        new fe(-A, -A, 0),
        new fe(A, -A, 0),
        new fe(A, A, 0)
      ];
    })(), r = (V = e.ratio) != null ? V : fI, o = (z = e.dpr) != null ? z : 1, a = (O = e.pointerEvents) != null ? O : "auto", l = Math.max(uI, r), c = s[0].distanceTo(s[1]), h = s[1].distanceTo(s[2]);
    let d = yr(c / r * o), f = yr(h / r * o);
    const g = $t(...s);
    let p;
    if (l === r)
      i.style.width = `${d}px`, i.style.height = `${f}px`, p = i;
    else {
      const A = document.createElement("div");
      A.style.width = `${d}px`, A.style.height = `${f}px`, A.style.pointerEvents = "none";
      const C = r / l;
      i.style.position = "absolute", i.style.left = "0", i.style.top = "0", i.style.width = `${C * d}px`, i.style.height = `${C * f}px`, A.appendChild(i), p = A;
    }
    super(p);
    u(this, "version", y1);
    u(this, "isCSS3DObject", !0);
    u(this, "name", np);
    /**
     * @description object dom
     */
    u(this, "container");
    u(this, "width");
    u(this, "height");
    u(this, "domWidthPx");
    u(this, "domHeightPx");
    u(this, "cornerPoints");
    u(this, "centerPosition");
    u(this, "ratio");
    u(this, "_mode", "front");
    u(this, "_opacityMesh");
    if (p.id = this.id.toString(), i.style.pointerEvents = a, Object.assign(i.style, e.style), this.scale.set(l, l, l), this.cornerPoints = s, this.ratio = r, this.container = i, e.mode && (this.mode = e.mode), l === r)
      this.width = c, this.height = h, this.centerPosition = g;
    else {
      const A = r / l;
      this.width = A * c, this.height = A * h, d = A * d, f = A * f, this.centerPosition = new fe().subVectors(g, s[0]).multiplyScalar(A).add(s[0]);
    }
    this.domWidthPx = d, this.domHeightPx = f, i.classList.add(`${np}__container`);
    const m = new fe().subVectors(s[1], s[0]), v = new fe().subVectors(s[3], s[0]), b = new fe().crossVectors(m, v).normalize();
    this.lookAt(b);
    const w = this.up.clone().applyQuaternion(this.quaternion), x = v.clone(), k = new fe().crossVectors(w, x).normalize();
    this.rotateOnWorldAxis(k, w.angleTo(x)), this.position.copy(g), this._opacityMesh = new Cg(d, f), this._opacityMesh.visible = e.mode === "behind", this.add(this._opacityMesh);
  }
  get mode() {
    return this._mode;
  }
  set mode(e) {
    this._mode = e, this._opacityMesh && (this._opacityMesh.visible = e === "behind");
  }
  removeFromParent() {
    const e = this.parent;
    return e !== null && e.remove(this), this;
  }
  dispose() {
    this.container.remove(), this.removeFromParent();
  }
}
const pI = new iA();
function mI(n) {
  return new Promise((t, e) => {
    function i(r) {
      t(r);
    }
    function s(r) {
      e(r);
    }
    pI.load(n, i, void 0, s);
  });
}
function gI(n) {
  De(n, "svelte-xuejcm", ".line.svelte-xuejcm{position:absolute;pointer-events:none}.line.vertical.svelte-xuejcm{transform:rotate(-90deg) translate3d(0.03125rem, 0, 0.625rem);transform-origin:0 0}.line.horizontal.svelte-xuejcm{transform:translate3d(0, -0.03125rem, 0.625rem)}.straight-line.svelte-xuejcm{display:block;width:100%;height:100%;overflow:visible}");
}
function sp(n) {
  let t, e, i, s, r, o, a, l = (
    /*unfolded*/
    n[3] && rp(n)
  );
  return {
    c() {
      t = W("div"), e = be("svg"), i = be("defs"), s = be("linearGradient"), r = be("stop"), o = be("stop"), l && l.c(), y(r, "offset", "25%"), y(
        r,
        "stop-color",
        /*color*/
        n[5]
      ), y(r, "stop-opacity", "1"), y(o, "offset", "100%"), y(
        o,
        "stop-color",
        /*color*/
        n[5]
      ), y(o, "stop-opacity", "0.5"), y(s, "x1", 0.5), y(s, "y1", 0.5), y(
        s,
        "x2",
        /*width*/
        n[8]
      ), y(s, "y2", 0.5), y(
        s,
        "id",
        /*defsID*/
        n[10]
      ), y(s, "gradientUnits", "userSpaceOnUse"), y(e, "class", "straight-line svelte-xuejcm"), y(e, "viewBox", a = "0 0 " + /*width*/
      n[8] + " " + /*height*/
      n[7]), y(e, "preserveAspectRatio", "none"), y(t, "class", "line svelte-xuejcm"), ye(
        t,
        "vertical",
        /*isVertical*/
        n[9]
      ), ye(t, "horizontal", !/*isVertical*/
      n[9]), Q(
        t,
        "width",
        /*width*/
        n[8] + "px"
      ), Q(
        t,
        "height",
        /*height*/
        n[7] + "px"
      );
    },
    m(c, h) {
      X(c, t, h), R(t, e), R(e, i), R(i, s), R(s, r), R(s, o), l && l.m(e, null);
    },
    p(c, h) {
      h & /*color*/
      32 && y(
        r,
        "stop-color",
        /*color*/
        c[5]
      ), h & /*color*/
      32 && y(
        o,
        "stop-color",
        /*color*/
        c[5]
      ), h & /*width*/
      256 && y(
        s,
        "x2",
        /*width*/
        c[8]
      ), /*unfolded*/
      c[3] ? l ? (l.p(c, h), h & /*unfolded*/
      8 && F(l, 1)) : (l = rp(c), l.c(), F(l, 1), l.m(e, null)) : l && (Me(), Y(l, 1, 1, () => {
        l = null;
      }), ke()), h & /*width, height*/
      384 && a !== (a = "0 0 " + /*width*/
      c[8] + " " + /*height*/
      c[7]) && y(e, "viewBox", a), h & /*isVertical*/
      512 && ye(
        t,
        "vertical",
        /*isVertical*/
        c[9]
      ), h & /*isVertical*/
      512 && ye(t, "horizontal", !/*isVertical*/
      c[9]), h & /*width*/
      256 && Q(
        t,
        "width",
        /*width*/
        c[8] + "px"
      ), h & /*height*/
      128 && Q(
        t,
        "height",
        /*height*/
        c[7] + "px"
      );
    },
    d(c) {
      c && U(t), l && l.d();
    }
  };
}
function rp(n) {
  let t, e, i, s, r;
  return {
    c() {
      t = be("path"), y(t, "fill", "none"), y(t, "stroke", e = /*useLinearColor*/
      n[4] ? `url(#${/*defsID*/
      n[10]})` : (
        /*color*/
        n[5]
      )), y(t, "stroke-width", 1), y(
        t,
        "d",
        /*path*/
        n[6]
      );
    },
    m(o, a) {
      X(o, t, a), r = !0;
    },
    p(o, a) {
      n = o, (!r || a & /*useLinearColor, color*/
      48 && e !== (e = /*useLinearColor*/
      n[4] ? `url(#${/*defsID*/
      n[10]})` : (
        /*color*/
        n[5]
      ))) && y(t, "stroke", e), (!r || a & /*path*/
      64) && y(
        t,
        "d",
        /*path*/
        n[6]
      );
    },
    i(o) {
      r || (o && mt(() => {
        r && (s && s.end(1), i = ss(t, Qa, {
          duration: (
            /*duration*/
            n[2]
          ),
          delay: (
            /*inDelay*/
            n[0]
          ),
          easing: vn
        }), i.start());
      }), r = !0);
    },
    o(o) {
      i && i.invalidate(), o && (s = Br(t, Qa, {
        duration: (
          /*duration*/
          n[2]
        ),
        delay: (
          /*outDelay*/
          n[1]
        ),
        easing: vn
      })), r = !1;
    },
    d(o) {
      o && U(t), o && s && s.end();
    }
  };
}
function vI(n) {
  let t, e = (
    /*width*/
    n[8] && sp(n)
  );
  return {
    c() {
      e && e.c(), t = Fe();
    },
    m(i, s) {
      e && e.m(i, s), X(i, t, s);
    },
    p(i, [s]) {
      /*width*/
      i[8] ? e ? e.p(i, s) : (e = sp(i), e.c(), e.m(t.parentNode, t)) : e && (e.d(1), e = null);
    },
    i: se,
    o: se,
    d(i) {
      e && e.d(i), i && U(t);
    }
  };
}
function AI(n, t, e) {
  let i, s, r, o, { inDelay: a = 0 } = t, { outDelay: l = 0 } = t, { duration: c = 1e3 } = t, { unfolded: h } = t, { length: d } = t, { direction: f = "horizontal" } = t, { useLinearColor: g = !1 } = t, { color: p = "white" } = t;
  const m = Dt();
  return n.$$set = (v) => {
    "inDelay" in v && e(0, a = v.inDelay), "outDelay" in v && e(1, l = v.outDelay), "duration" in v && e(2, c = v.duration), "unfolded" in v && e(3, h = v.unfolded), "length" in v && e(11, d = v.length), "direction" in v && e(12, f = v.direction), "useLinearColor" in v && e(4, g = v.useLinearColor), "color" in v && e(5, p = v.color);
  }, n.$$.update = () => {
    n.$$.dirty & /*direction*/
    4096 && e(9, i = f === "vertical"), n.$$.dirty & /*length*/
    2048 && e(8, s = d), n.$$.dirty & /*length*/
    2048 && e(6, o = `M0.5 0.5 H ${d}`);
  }, e(7, r = 1), [
    a,
    l,
    c,
    h,
    g,
    p,
    o,
    r,
    s,
    i,
    m,
    d,
    f
  ];
}
class td extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      AI,
      vI,
      Pe,
      {
        inDelay: 0,
        outDelay: 1,
        duration: 2,
        unfolded: 3,
        length: 11,
        direction: 12,
        useLinearColor: 4,
        color: 5
      },
      gI
    );
  }
}
function bI(n) {
  De(n, "svelte-faoauy", ".shadow.svelte-faoauy{position:absolute}");
}
function op(n) {
  let t, e, i, s, r;
  return {
    c() {
      t = W("div"), y(t, "class", "shadow svelte-faoauy"), y(t, "style", e = `
      left: ${Ai(
        /*left*/
        n[5]
      )};
      bottom: ${Ai(
        /*bottom*/
        n[6]
      )};
      border-radius: ${/*round*/
      n[10] ? "9999px" : "0"};
      box-shadow: 0 0 ${Ai(
        /*blurRadius*/
        n[11]
      )} ${Ai(
        /*spreadRadius*/
        n[12]
      )} rgba(0, 0, 0, ${/*opacity*/
      n[13]});
      ${/*horizontalCenter*/
      n[8] ? "transform: translateX(-50%); left: 50%" : ""}
      ${/*verticalCenter*/
      n[9] ? "transform: translateX(-50%); top: 50%" : ""}
      ${/*center*/
      n[7] ? "transform: translate(-50%, -50%); left: 50%; top: 50%;" : ""}
    `), Q(t, "width", Ai(
        /*width*/
        n[3]
      )), Q(t, "height", Ai(
        /*height*/
        n[4]
      )), Q(
        t,
        "z-index",
        /*zIndex*/
        n[14]
      );
    },
    m(o, a) {
      X(o, t, a), r = !0;
    },
    p(o, a) {
      n = o, (!r || a & /*left, bottom, round, blurRadius, spreadRadius, opacity, horizontalCenter, verticalCenter, center*/
      16352 && e !== (e = `
      left: ${Ai(
        /*left*/
        n[5]
      )};
      bottom: ${Ai(
        /*bottom*/
        n[6]
      )};
      border-radius: ${/*round*/
      n[10] ? "9999px" : "0"};
      box-shadow: 0 0 ${Ai(
        /*blurRadius*/
        n[11]
      )} ${Ai(
        /*spreadRadius*/
        n[12]
      )} rgba(0, 0, 0, ${/*opacity*/
      n[13]});
      ${/*horizontalCenter*/
      n[8] ? "transform: translateX(-50%); left: 50%" : ""}
      ${/*verticalCenter*/
      n[9] ? "transform: translateX(-50%); top: 50%" : ""}
      ${/*center*/
      n[7] ? "transform: translate(-50%, -50%); left: 50%; top: 50%;" : ""}
    `)) && y(t, "style", e);
      const l = a & /*left, bottom, round, blurRadius, spreadRadius, opacity, horizontalCenter, verticalCenter, center*/
      16352;
      (l || a & /*width, left, bottom, round, blurRadius, spreadRadius, opacity, horizontalCenter, verticalCenter, center*/
      16360) && Q(t, "width", Ai(
        /*width*/
        n[3]
      )), (l || a & /*height, left, bottom, round, blurRadius, spreadRadius, opacity, horizontalCenter, verticalCenter, center*/
      16368) && Q(t, "height", Ai(
        /*height*/
        n[4]
      )), (l || a & /*zIndex, left, bottom, round, blurRadius, spreadRadius, opacity, horizontalCenter, verticalCenter, center*/
      32736) && Q(
        t,
        "z-index",
        /*zIndex*/
        n[14]
      );
    },
    i(o) {
      r || (o && mt(() => {
        r && (s && s.end(1), i = ss(t, zt, { duration: (
          /*inDelay*/
          n[0]
        ) }), i.start());
      }), r = !0);
    },
    o(o) {
      i && i.invalidate(), o && (s = Br(t, zt, { duration: (
        /*outDelay*/
        n[1]
      ) })), r = !1;
    },
    d(o) {
      o && U(t), o && s && s.end();
    }
  };
}
function yI(n) {
  let t, e = (
    /*visible*/
    n[2] && op(n)
  );
  return {
    c() {
      e && e.c(), t = Fe();
    },
    m(i, s) {
      e && e.m(i, s), X(i, t, s);
    },
    p(i, [s]) {
      /*visible*/
      i[2] ? e ? (e.p(i, s), s & /*visible*/
      4 && F(e, 1)) : (e = op(i), e.c(), F(e, 1), e.m(t.parentNode, t)) : e && (Me(), Y(e, 1, 1, () => {
        e = null;
      }), ke());
    },
    i(i) {
      F(e);
    },
    o(i) {
      Y(e);
    },
    d(i) {
      e && e.d(i), i && U(t);
    }
  };
}
function Ai(n) {
  return typeof n == "number" ? n / 16 + "rem" : n;
}
function wI(n, t, e) {
  let { inDelay: i = 1e3 } = t, { outDelay: s = 1e3 } = t, { visible: r = !0 } = t, { width: o = 0 } = t, { height: a = 0 } = t, { left: l = 0 } = t, { bottom: c = 0 } = t, { center: h = !1 } = t, { horizontalCenter: d = !1 } = t, { verticalCenter: f = !1 } = t, { round: g = !1 } = t, { blurRadius: p } = t, { spreadRadius: m } = t, { opacity: v = 0.15 } = t, { zIndex: b = -1 } = t;
  return n.$$set = (w) => {
    "inDelay" in w && e(0, i = w.inDelay), "outDelay" in w && e(1, s = w.outDelay), "visible" in w && e(2, r = w.visible), "width" in w && e(3, o = w.width), "height" in w && e(4, a = w.height), "left" in w && e(5, l = w.left), "bottom" in w && e(6, c = w.bottom), "center" in w && e(7, h = w.center), "horizontalCenter" in w && e(8, d = w.horizontalCenter), "verticalCenter" in w && e(9, f = w.verticalCenter), "round" in w && e(10, g = w.round), "blurRadius" in w && e(11, p = w.blurRadius), "spreadRadius" in w && e(12, m = w.spreadRadius), "opacity" in w && e(13, v = w.opacity), "zIndex" in w && e(14, b = w.zIndex);
  }, [
    i,
    s,
    r,
    o,
    a,
    l,
    c,
    h,
    d,
    f,
    g,
    p,
    m,
    v,
    b
  ];
}
class Bi extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      wI,
      yI,
      Pe,
      {
        inDelay: 0,
        outDelay: 1,
        visible: 2,
        width: 3,
        height: 4,
        left: 5,
        bottom: 6,
        center: 7,
        horizontalCenter: 8,
        verticalCenter: 9,
        round: 10,
        blurRadius: 11,
        spreadRadius: 12,
        opacity: 13,
        zIndex: 14
      },
      bI
    );
  }
}
function PI() {
  return Math.random().toString(36).slice(-6);
}
const ya = PI();
function CI(n) {
  De(n, "svelte-1b2n9wi", ".text-char.svelte-1b2n9wi{display:inline-block;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}");
}
function ap(n, t, e) {
  const i = n.slice();
  return i[19] = t[e].id, i[0] = t[e].content, i[20] = t, i[21] = e, i;
}
function II(n) {
  let t, e = (
    /*content*/
    n[0] + ""
  ), i, s = (
    /*index*/
    n[21]
  );
  const r = () => (
    /*span_binding_1*/
    n[10](t, s)
  ), o = () => (
    /*span_binding_1*/
    n[10](null, s)
  );
  return {
    c() {
      t = W("span"), i = je(e), y(t, "class", "text-char svelte-1b2n9wi");
    },
    m(a, l) {
      X(a, t, l), R(t, i), r();
    },
    p(a, l) {
      n = a, l & /*contentList*/
      4 && e !== (e = /*content*/
      n[0] + "") && He(i, e), s !== /*index*/
      n[21] && (o(), s = /*index*/
      n[21], r());
    },
    d(a) {
      a && U(t), o();
    }
  };
}
function EI(n) {
  let t;
  return {
    c() {
      t = W("br");
    },
    m(e, i) {
      X(e, t, i);
    },
    p: se,
    d(e) {
      e && U(t);
    }
  };
}
function MI(n) {
  let t, e = (
    /*index*/
    n[21]
  );
  const i = () => (
    /*span_binding*/
    n[9](t, e)
  ), s = () => (
    /*span_binding*/
    n[9](null, e)
  );
  return {
    c() {
      t = W("span"), t.textContent = " ", y(t, "class", "text-char svelte-1b2n9wi");
    },
    m(r, o) {
      X(r, t, o), i();
    },
    p(r, o) {
      n = r, e !== /*index*/
      n[21] && (s(), e = /*index*/
      n[21], i());
    },
    d(r) {
      r && U(t), s();
    }
  };
}
function lp(n, t) {
  let e, i;
  function s(a, l) {
    return (
      /*content*/
      a[0] === /*__SpaceFlag__*/
      a[3] ? MI : (
        /*content*/
        a[0] === /*__NewLineFlag__*/
        a[4] ? EI : II
      )
    );
  }
  let r = s(t), o = r(t);
  return {
    key: n,
    first: null,
    c() {
      e = Fe(), o.c(), i = Fe(), this.first = e;
    },
    m(a, l) {
      X(a, e, l), o.m(a, l), X(a, i, l);
    },
    p(a, l) {
      t = a, r === (r = s(t)) && o ? o.p(t, l) : (o.d(1), o = r(t), o && (o.c(), o.m(i.parentNode, i)));
    },
    d(a) {
      a && U(e), o.d(a), a && U(i);
    }
  };
}
function kI(n) {
  let t = [], e = /* @__PURE__ */ new Map(), i, s = (
    /*contentList*/
    n[2]
  );
  const r = (o) => (
    /*id*/
    o[19]
  );
  for (let o = 0; o < s.length; o += 1) {
    let a = ap(n, s, o), l = r(a);
    e.set(l, t[o] = lp(l, a));
  }
  return {
    c() {
      for (let o = 0; o < t.length; o += 1)
        t[o].c();
      i = Fe();
    },
    m(o, a) {
      for (let l = 0; l < t.length; l += 1)
        t[l] && t[l].m(o, a);
      X(o, i, a);
    },
    p(o, [a]) {
      a & /*spanEleList, contentList, __SpaceFlag__, __NewLineFlag__*/
      30 && (s = /*contentList*/
      o[2], t = Ei(t, a, r, 1, o, s, e, i.parentNode, Rh, lp, i, ap));
    },
    i: se,
    o: se,
    d(o) {
      for (let a = 0; a < t.length; a += 1)
        t[a].d(o);
      o && U(i);
    }
  };
}
function xI(n, t, e) {
  let i, { inDelay: s = 0 } = t, { outDelay: r = 0 } = t, { content: o } = t, { unfolded: a } = t, { isFistUnfoldedUpdate: l = !0 } = t;
  const c = `__EMOJI_SPLIT_${ya}__`, h = `__EMOJI_${ya}__`, d = `__SPACE_${ya}__`, f = `__NEW_LINE_${ya}__`;
  let g, p, m = [];
  function v(S) {
    const V = [], z = new RegExp(new RegExp("\\p{Regional_Indicator}\\p{Regional_Indicator}|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?(\\u200D\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?)+|\\p{Emoji_Presentation}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)", "gu"));
    return S.slice().replace(z, (O) => `${c}${h}${O}${c}`).split(c).forEach((O) => O.startsWith(h) ? V.push({
      id: Dt(),
      content: O.slice(h.length)
    }) : V.push(...O.split("").map((A) => A === " " ? d : A === `
` ? f : A).map((A) => ({ id: Dt(), content: A })))), V;
  }
  function b() {
    if (!p)
      return;
    const S = !a;
    p.reversed !== S && p.reverse(), p.play();
  }
  function w(S) {
    if (l) {
      e(5, l = !1);
      return;
    }
    clearTimeout(g), g = setTimeout(b, S ? s : r);
  }
  function x(S) {
    const V = function() {
      const z = Q4((O) => S[O].getBoundingClientRect().x, [Math.min(S.length - 1, 10), Math.min(S.length - 1, 30)]);
      if (z > 0)
        return z;
    }();
    p = ot({
      targets: S.slice(0, V).filter(_e),
      autoplay: !1,
      duration: 400,
      scale: [0.7, 1],
      rotate: [20, 0],
      opacity: [0, 1],
      translateX: [4, 0],
      translateY: [10, 0],
      delay: ot.stagger(50),
      easing: "easeInOutCubic"
    }), a && p.seek(p.duration);
  }
  function k(S, V) {
    Ze[S ? "unshift" : "push"](() => {
      m[V] = S, e(1, m);
    });
  }
  function T(S, V) {
    Ze[S ? "unshift" : "push"](() => {
      m[V] = S, e(1, m);
    });
  }
  return n.$$set = (S) => {
    "inDelay" in S && e(6, s = S.inDelay), "outDelay" in S && e(7, r = S.outDelay), "content" in S && e(0, o = S.content), "unfolded" in S && e(8, a = S.unfolded), "isFistUnfoldedUpdate" in S && e(5, l = S.isFistUnfoldedUpdate);
  }, n.$$.update = () => {
    n.$$.dirty & /*content*/
    1 && e(2, i = v(o)), n.$$.dirty & /*unfolded*/
    256 && w(a), n.$$.dirty & /*spanEleList*/
    2 && x(m.filter((S) => !!S));
  }, [
    o,
    m,
    i,
    d,
    f,
    l,
    s,
    r,
    a,
    k,
    T
  ];
}
class P1 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      xI,
      kI,
      Pe,
      {
        inDelay: 6,
        outDelay: 7,
        content: 0,
        unfolded: 8,
        isFistUnfoldedUpdate: 5
      },
      CI
    );
  }
}
function DI(n) {
  De(n, "svelte-1ogmlqq", ".arrow.svelte-1ogmlqq{width:100%;height:100%;background-size:100%;transition:transform 400ms ease-in-out;cursor:pointer;pointer-events:auto}.arrow-wrapper.svelte-1ogmlqq{position:relative;width:100%;height:100%}.arrow.left.svelte-1ogmlqq{transform:rotate(0deg)}.arrow.right.svelte-1ogmlqq{transform:rotate(-180deg)}.arrow.top.svelte-1ogmlqq{transform:rotate(90deg)}.arrow.bottom.svelte-1ogmlqq{transform:rotate(-90deg)}");
}
function cp(n) {
  let t, e, i, s, r, o, a, l, c, h;
  return e = new Bi({
    props: {
      center: !0,
      blurRadius: 9,
      spreadRadius: 3
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), i = oe(), s = W("div"), y(s, "class", r = "arrow " + /*direction*/
      n[0] + " svelte-1ogmlqq"), Q(s, "background-image", "url(" + NC + ")"), y(t, "class", "arrow-wrapper svelte-1ogmlqq");
    },
    m(d, f) {
      X(d, t, f), me(e, t, null), R(t, i), R(t, s), l = !0, c || (h = Oe(
        s,
        "click",
        /*click_handler*/
        n[5]
      ), c = !0);
    },
    p(d, f) {
      n = d, (!l || f & /*direction*/
      1 && r !== (r = "arrow " + /*direction*/
      n[0] + " svelte-1ogmlqq")) && y(s, "class", r);
    },
    i(d) {
      l || (F(e.$$.fragment, d), d && mt(() => {
        l && (a && a.end(1), o = ss(s, zt, {
          duration: (
            /*duration*/
            n[2]
          ),
          delay: (
            /*inDelay*/
            n[3]
          ),
          easing: Er
        }), o.start());
      }), l = !0);
    },
    o(d) {
      Y(e.$$.fragment, d), o && o.invalidate(), d && (a = Br(s, zt, {
        duration: (
          /*duration*/
          n[2]
        ),
        delay: (
          /*outDelay*/
          n[4]
        ),
        easing: Er
      })), l = !1;
    },
    d(d) {
      d && U(t), ge(e), d && a && a.end(), c = !1, h();
    }
  };
}
function SI(n) {
  let t, e, i = (
    /*visible*/
    n[1] && cp(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*visible*/
      s[1] ? i ? (i.p(s, r), r & /*visible*/
      2 && F(i, 1)) : (i = cp(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function TI(n, t, e) {
  let { direction: i = "right" } = t, { visible: s = !0 } = t, { duration: r = 0 } = t, { inDelay: o = 0 } = t, { outDelay: a = 0 } = t;
  function l(c) {
    An.call(this, n, c);
  }
  return n.$$set = (c) => {
    "direction" in c && e(0, i = c.direction), "visible" in c && e(1, s = c.visible), "duration" in c && e(2, r = c.duration), "inDelay" in c && e(3, o = c.inDelay), "outDelay" in c && e(4, a = c.outDelay);
  }, [i, s, r, o, a, l];
}
let LI = class extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      TI,
      SI,
      Pe,
      {
        direction: 0,
        visible: 1,
        duration: 2,
        inDelay: 3,
        outDelay: 4
      },
      DI
    );
  }
};
function zI(n, t, e = 20, i = 5) {
  return new Promise((s, r) => {
    let o = 0;
    const a = setInterval(() => {
      const l = n();
      t(l) ? (clearInterval(a), s(l)) : o >= i && (clearInterval(a), r(l)), o++;
    }, e);
  });
}
function OI(n) {
  De(n, "svelte-1fuzm7v", ".text.svelte-1fuzm7v{pointer-events:auto;box-sizing:border-box;display:inline-block;max-width:7.5rem;transition:transform 400ms ease-in-out;font-size:0.75rem;line-height:1.125rem;white-space:initial;cursor:pointer}.arrow.svelte-1fuzm7v{pointer-events:auto;display:inline-block;vertical-align:top;width:0.875rem;height:0.875rem;margin-left:0.125rem;margin-top:0.125rem}");
}
function hp(n) {
  let t, e, i;
  return e = new P1({
    props: {
      unfolded: (
        /*visible*/
        n[0]
      ),
      content: (
        /*content*/
        n[1]
      ),
      inDelay: 500,
      outDelay: (
        /*foldTextDelay*/
        n[5]
      )
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "text svelte-1fuzm7v"), Q(
        t,
        "transform",
        /*transform*/
        n[7]
      );
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), n[10](t), i = !0;
    },
    p(s, r) {
      const o = {};
      r & /*visible*/
      1 && (o.unfolded = /*visible*/
      s[0]), r & /*content*/
      2 && (o.content = /*content*/
      s[1]), r & /*foldTextDelay*/
      32 && (o.outDelay = /*foldTextDelay*/
      s[5]), e.$set(o), r & /*transform*/
      128 && Q(
        t,
        "transform",
        /*transform*/
        s[7]
      );
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e), n[10](null);
    }
  };
}
function dp(n) {
  let t, e, i;
  return e = new LI({
    props: {
      direction: (
        /*arrowDirection*/
        n[6]
      ),
      visible: (
        /*visible*/
        n[0]
      ),
      inDelay: 600,
      duration: 1e3
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "arrow svelte-1fuzm7v");
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), i = !0;
    },
    p(s, r) {
      const o = {};
      r & /*arrowDirection*/
      64 && (o.direction = /*arrowDirection*/
      s[6]), r & /*visible*/
      1 && (o.visible = /*visible*/
      s[0]), e.$set(o);
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e);
    }
  };
}
function jI(n) {
  let t, e, i, s = (
    /*content*/
    n[1] && hp(n)
  ), r = (
    /*lineHeight*/
    n[3] < /*textHeight*/
    n[4] && dp(n)
  );
  return {
    c() {
      s && s.c(), t = oe(), r && r.c(), e = Fe();
    },
    m(o, a) {
      s && s.m(o, a), X(o, t, a), r && r.m(o, a), X(o, e, a), i = !0;
    },
    p(o, [a]) {
      /*content*/
      o[1] ? s ? (s.p(o, a), a & /*content*/
      2 && F(s, 1)) : (s = hp(o), s.c(), F(s, 1), s.m(t.parentNode, t)) : s && (Me(), Y(s, 1, 1, () => {
        s = null;
      }), ke()), /*lineHeight*/
      o[3] < /*textHeight*/
      o[4] ? r ? (r.p(o, a), a & /*lineHeight, textHeight*/
      24 && F(r, 1)) : (r = dp(o), r.c(), F(r, 1), r.m(e.parentNode, e)) : r && (Me(), Y(r, 1, 1, () => {
        r = null;
      }), ke());
    },
    i(o) {
      i || (F(s), F(r), i = !0);
    },
    o(o) {
      Y(s), Y(r), i = !1;
    },
    d(o) {
      s && s.d(o), o && U(t), r && r.d(o), o && U(e);
    }
  };
}
function RI(n, t, e) {
  let i, s, r, { visible: o = !1 } = t, { textUnfolded: a = !1 } = t, { content: l } = t, c, h = 0, d = 0, f = 0;
  function g(p) {
    Ze[p ? "unshift" : "push"](() => {
      c = p, e(2, c);
    });
  }
  return n.$$set = (p) => {
    "visible" in p && e(0, o = p.visible), "textUnfolded" in p && e(8, a = p.textUnfolded), "content" in p && e(1, l = p.content);
  }, n.$$.update = () => {
    if (n.$$.dirty & /*textElement, visible, content*/
    7 && c && o && l) {
      const { lineHeight: p } = getComputedStyle(c);
      e(4, f = c.offsetHeight), zI(() => c == null ? void 0 : c.offsetHeight, Boolean).then(() => {
        e(4, f = c.offsetHeight);
      }), e(3, d = Number(p.replace("px", "")));
    }
    n.$$.dirty & /*textUnfolded, lineHeight, textHeight*/
    280 && e(9, h = a ? d - f : 0), n.$$.dirty & /*translateY*/
    512 && e(7, i = `translateY(${h}px)`), n.$$.dirty & /*textUnfolded*/
    256 && e(6, s = a ? "left" : "right"), n.$$.dirty & /*textUnfolded*/
    256 && e(5, r = a ? 450 : 0);
  }, [
    o,
    l,
    c,
    d,
    f,
    r,
    s,
    i,
    a,
    h,
    g
  ];
}
class C1 extends Ie {
  constructor(t) {
    super(), Ce(this, t, RI, jI, Pe, { visible: 0, textUnfolded: 8, content: 1 }, OI);
  }
}
function BI(n) {
  De(n, "svelte-5hip41", ".content.svelte-5hip41{--height:62.4375rem;width:-moz-max-content;width:max-content;height:var(--height);padding:calc(var(--height) - 1.125rem) 0.25rem 0 1rem;position:absolute;left:0;bottom:0;overflow:hidden;box-sizing:border-box;font-size:0;pointer-events:none;white-space:nowrap;font-weight:600}");
}
function up(n) {
  var h, d;
  let t, e, i, s, r, o, a, l, c;
  return t = new Bi({
    props: {
      visible: (
        /*unfolded*/
        n[2]
      ),
      left: (
        /*contentWidth*/
        n[3] / 2 + "px"
      ),
      bottom: 12,
      width: 2,
      blurRadius: 120,
      spreadRadius: 60
    }
  }), i = new td({
    props: {
      unfolded: (
        /*unfolded*/
        n[2]
      ),
      length: (
        /*contentWidth*/
        n[3]
      ),
      outDelay: (
        /*foldTextDelay*/
        n[4] + 40 * Math.min(
          /*textItems*/
          (d = (h = n[6][0]) == null ? void 0 : h.content.length) != null ? d : 10,
          15
        )
      ),
      useLinearColor: !0
    }
  }), o = new C1({
    props: {
      visible: (
        /*unfolded*/
        n[2]
      ),
      textUnfolded: (
        /*textUnfolded*/
        n[1]
      ),
      content: (
        /*content*/
        n[5]
      )
    }
  }), {
    c() {
      ve(t.$$.fragment), e = oe(), ve(i.$$.fragment), s = oe(), r = W("div"), ve(o.$$.fragment), y(r, "class", "content svelte-5hip41");
    },
    m(f, g) {
      me(t, f, g), X(f, e, g), me(i, f, g), X(f, s, g), X(f, r, g), me(o, r, null), a = !0, l || (c = [
        Pi(wn.call(null, r)),
        Oe(
          r,
          "clientWidth",
          /*clientWidth_handler*/
          n[10]
        ),
        Oe(
          r,
          "click",
          /*toggleTextUnfolded*/
          n[7]
        )
      ], l = !0);
    },
    p(f, g) {
      var b, w;
      const p = {};
      g & /*unfolded*/
      4 && (p.visible = /*unfolded*/
      f[2]), g & /*contentWidth*/
      8 && (p.left = /*contentWidth*/
      f[3] / 2 + "px"), t.$set(p);
      const m = {};
      g & /*unfolded*/
      4 && (m.unfolded = /*unfolded*/
      f[2]), g & /*contentWidth*/
      8 && (m.length = /*contentWidth*/
      f[3]), g & /*foldTextDelay*/
      16 && (m.outDelay = /*foldTextDelay*/
      f[4] + 40 * Math.min(
        /*textItems*/
        (w = (b = f[6][0]) == null ? void 0 : b.content.length) != null ? w : 10,
        15
      )), i.$set(m);
      const v = {};
      g & /*unfolded*/
      4 && (v.visible = /*unfolded*/
      f[2]), g & /*textUnfolded*/
      2 && (v.textUnfolded = /*textUnfolded*/
      f[1]), g & /*content*/
      32 && (v.content = /*content*/
      f[5]), o.$set(v);
    },
    i(f) {
      a || (F(t.$$.fragment, f), F(i.$$.fragment, f), F(o.$$.fragment, f), a = !0);
    },
    o(f) {
      Y(t.$$.fragment, f), Y(i.$$.fragment, f), Y(o.$$.fragment, f), a = !1;
    },
    d(f) {
      ge(t, f), f && U(e), ge(i, f), f && U(s), f && U(r), ge(o), l = !1, vt(c);
    }
  };
}
function VI(n) {
  let t, e, i = (
    /*tag*/
    n[0].state && up(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*tag*/
      s[0].state ? i ? (i.p(s, r), r & /*tag*/
      1 && F(i, 1)) : (i = up(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function _I(n, t, e) {
  let i, s, r, o, a, { tag: l } = t, c, h = !1, d = [];
  function f() {
    e(1, h = !h);
  }
  const g = (p) => {
    e(3, c = p.detail);
  };
  return n.$$set = (p) => {
    "tag" in p && e(0, l = p.tag);
  }, n.$$.update = () => {
    var p, m, v, b;
    n.$$.dirty & /*tag*/
    1 && e(2, i = !!((p = l.state) != null && p.unfolded)), n.$$.dirty & /*tag*/
    1 && e(9, s = (v = (m = l.data.title) != null ? m : l.data.text) != null ? v : ""), n.$$.dirty & /*tag*/
    1 && e(8, r = (b = l.data.description) != null ? b : ""), n.$$.dirty & /*title, description*/
    768 && e(5, o = (() => {
      if (s && r)
        return s + `
` + r;
      if (s)
        return s;
      if (r)
        return r;
    })()), n.$$.dirty & /*unfolded*/
    4 && (i || setTimeout(
      () => {
        e(1, h = !1);
      },
      20
    )), n.$$.dirty & /*textUnfolded*/
    2 && e(4, a = h ? 450 : 0);
  }, [
    l,
    h,
    i,
    c,
    a,
    o,
    d,
    f,
    r,
    s,
    g
  ];
}
class HI extends Ie {
  constructor(t) {
    super(), Ce(this, t, _I, VI, Pe, { tag: 0 }, BI);
  }
}
function Oi(n) {
  return typeof n == "number" ? n / 16 + "rem" : n;
}
function FI(n) {
  De(n, "svelte-1j0cz4o", '.text.svelte-1j0cz4o{display:-webkit-box;display:-ms-box;display:-moz-box;position:relative;width:-moz-max-content;width:max-content;max-width:100%;-webkit-box-orient:vertical;-ms-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}@keyframes svelte-1j0cz4o-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.caret.svelte-1j0cz4o{position:absolute;width:0.0625rem;height:100%;background-color:#fff;animation:svelte-1j0cz4o-blink 1.2s infinite}.placeholder.svelte-1j0cz4o{opacity:0.5}.placeholder.svelte-1j0cz4o:empty::after{content:" "}');
}
function NI(n) {
  let t;
  const e = (
    /*#slots*/
    n[6].default
  ), i = Zn(
    e,
    n,
    /*$$scope*/
    n[5],
    null
  );
  return {
    c() {
      i && i.c();
    },
    m(s, r) {
      i && i.m(s, r), t = !0;
    },
    p(s, r) {
      i && i.p && (!t || r & /*$$scope*/
      32) && qn(
        i,
        e,
        s,
        /*$$scope*/
        s[5],
        t ? Jn(
          e,
          /*$$scope*/
          s[5],
          r,
          null
        ) : Kn(
          /*$$scope*/
          s[5]
        ),
        null
      );
    },
    i(s) {
      t || (F(i, s), t = !0);
    },
    o(s) {
      Y(i, s), t = !1;
    },
    d(s) {
      i && i.d(s);
    }
  };
}
function GI(n) {
  var r, o;
  let t, e, i = (
    /*edit*/
    ((r = n[3]) == null ? void 0 : r.inputting) && fp()
  ), s = typeof /*edit*/
  ((o = n[3]) == null ? void 0 : o.placeholder) == "string" && pp(n);
  return {
    c() {
      i && i.c(), t = oe(), s && s.c(), e = Fe();
    },
    m(a, l) {
      i && i.m(a, l), X(a, t, l), s && s.m(a, l), X(a, e, l);
    },
    p(a, l) {
      var c, h;
      /*edit*/
      (c = a[3]) != null && c.inputting ? i || (i = fp(), i.c(), i.m(t.parentNode, t)) : i && (i.d(1), i = null), typeof /*edit*/
      ((h = a[3]) == null ? void 0 : h.placeholder) == "string" ? s ? s.p(a, l) : (s = pp(a), s.c(), s.m(e.parentNode, e)) : s && (s.d(1), s = null);
    },
    i: se,
    o: se,
    d(a) {
      i && i.d(a), a && U(t), s && s.d(a), a && U(e);
    }
  };
}
function WI(n) {
  let t;
  return {
    c() {
      t = je(
        /*text*/
        n[2]
      );
    },
    m(e, i) {
      X(e, t, i);
    },
    p(e, i) {
      i & /*text*/
      4 && He(
        t,
        /*text*/
        e[2]
      );
    },
    i: se,
    o: se,
    d(e) {
      e && U(t);
    }
  };
}
function fp(n) {
  let t;
  return {
    c() {
      t = W("div"), y(t, "class", "caret svelte-1j0cz4o");
    },
    m(e, i) {
      X(e, t, i);
    },
    d(e) {
      e && U(t);
    }
  };
}
function pp(n) {
  let t, e = (
    /*edit*/
    n[3].placeholder + ""
  ), i;
  return {
    c() {
      t = W("span"), i = je(e), y(t, "class", "placeholder svelte-1j0cz4o");
    },
    m(s, r) {
      X(s, t, r), R(t, i);
    },
    p(s, r) {
      r & /*edit*/
      8 && e !== (e = /*edit*/
      s[3].placeholder + "") && He(i, e);
    },
    d(s) {
      s && U(t);
    }
  };
}
function QI(n) {
  let t, e, i, s;
  const r = [WI, GI, NI], o = [];
  function a(l, c) {
    return (
      /*text*/
      l[2] ? 0 : (
        /*isEditing*/
        l[4] ? 1 : 2
      )
    );
  }
  return e = a(n), i = o[e] = r[e](n), {
    c() {
      t = W("div"), i.c(), y(t, "class", "text svelte-1j0cz4o"), Q(t, "max-width", typeof /*maxWidth*/
      n[1] == "number" ? Oi(
        /*maxWidth*/
        n[1]
      ) : (
        /*maxWidth*/
        n[1]
      )), Q(
        t,
        "-webkit-line-clamp",
        /*maxLine*/
        n[0]
      );
    },
    m(l, c) {
      X(l, t, c), o[e].m(t, null), s = !0;
    },
    p(l, [c]) {
      let h = e;
      e = a(l), e === h ? o[e].p(l, c) : (Me(), Y(o[h], 1, 1, () => {
        o[h] = null;
      }), ke(), i = o[e], i ? i.p(l, c) : (i = o[e] = r[e](l), i.c()), F(i, 1), i.m(t, null)), c & /*maxWidth*/
      2 && Q(t, "max-width", typeof /*maxWidth*/
      l[1] == "number" ? Oi(
        /*maxWidth*/
        l[1]
      ) : (
        /*maxWidth*/
        l[1]
      )), c & /*maxLine*/
      1 && Q(
        t,
        "-webkit-line-clamp",
        /*maxLine*/
        l[0]
      );
    },
    i(l) {
      s || (F(i), s = !0);
    },
    o(l) {
      Y(i), s = !1;
    },
    d(l) {
      l && U(t), o[e].d();
    }
  };
}
function UI(n, t, e) {
  let i, { $$slots: s = {}, $$scope: r } = t, { maxLine: o = null } = t, { maxWidth: a = null } = t, { text: l = null } = t, { edit: c = null } = t;
  return n.$$set = (h) => {
    "maxLine" in h && e(0, o = h.maxLine), "maxWidth" in h && e(1, a = h.maxWidth), "text" in h && e(2, l = h.text), "edit" in h && e(3, c = h.edit), "$$scope" in h && e(5, r = h.$$scope);
  }, n.$$.update = () => {
    n.$$.dirty & /*edit*/
    8 && e(4, i = typeof (c == null ? void 0 : c.placeholder) == "string" || (c == null ? void 0 : c.inputting));
  }, [o, a, l, c, i, r, s];
}
class id extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      UI,
      QI,
      Pe,
      {
        maxLine: 0,
        maxWidth: 1,
        text: 2,
        edit: 3
      },
      FI
    );
  }
}
function XI(n) {
  De(n, "svelte-1oxrkr1", ".plane__container.svelte-1oxrkr1.svelte-1oxrkr1{position:absolute;left:50%;transform:translate(-50%, -100%);width:-moz-max-content;width:max-content}.plane__wrapper.svelte-1oxrkr1.svelte-1oxrkr1{transition:transform 500ms linear, opacity 200ms linear;padding:0.625rem;background-color:rgba(0, 0, 0, 0.5);border:0.03125rem solid rgba(255, 255, 255, 0.3);border-radius:0.25rem}.unfolded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{transition-delay:200ms, 500ms;opacity:1}.folded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{opacity:0}.plane.svelte-1oxrkr1.svelte-1oxrkr1{max-width:11.75rem}.title.svelte-1oxrkr1.svelte-1oxrkr1{white-space:pre-wrap;font-weight:bold;font-size:0.75rem;line-height:1.125rem}.description.svelte-1oxrkr1.svelte-1oxrkr1{margin-top:0.25rem;white-space:pre-wrap;font-size:0.6875rem;line-height:1rem}");
}
function mp(n) {
  var d, f;
  let t, e, i, s, r, o, a, l, c;
  t = new td({
    props: {
      unfolded: (
        /*unfolded*/
        n[1]
      ),
      direction: "vertical",
      length: 15,
      duration: 500,
      inDelay: 200,
      useLinearColor: !0
    }
  }), a = new id({
    props: {
      text: (
        /*title*/
        n[4]
      ),
      edit: (
        /*tag*/
        (d = n[0].data.edit) == null ? void 0 : d.title
      ),
      maxLine: (
        /*titleMaxRows*/
        n[2]
      )
    }
  });
  let h = (
    /*tag*/
    (n[0].data.description || /*tag*/
    ((f = n[0].data.edit) == null ? void 0 : f.description)) && gp(n)
  );
  return {
    c() {
      ve(t.$$.fragment), e = oe(), i = W("div"), s = W("div"), r = W("div"), o = W("div"), ve(a.$$.fragment), l = oe(), h && h.c(), y(o, "class", "title svelte-1oxrkr1"), y(r, "class", "plane svelte-1oxrkr1"), y(s, "class", "plane__wrapper svelte-1oxrkr1"), Q(
        s,
        "transform",
        /*unfolded*/
        n[1] ? "translateY(-15px)" : "translateY(0)"
      ), y(i, "class", "plane__container svelte-1oxrkr1"), ye(
        i,
        "unfolded",
        /*unfolded*/
        n[1]
      ), ye(
        i,
        "folded",
        /*folded*/
        n[5]
      );
    },
    m(g, p) {
      me(t, g, p), X(g, e, p), X(g, i, p), R(i, s), R(s, r), R(r, o), me(a, o, null), R(r, l), h && h.m(r, null), c = !0;
    },
    p(g, p) {
      var b, w;
      const m = {};
      p & /*unfolded*/
      2 && (m.unfolded = /*unfolded*/
      g[1]), t.$set(m);
      const v = {};
      p & /*title*/
      16 && (v.text = /*title*/
      g[4]), p & /*tag*/
      1 && (v.edit = /*tag*/
      (b = g[0].data.edit) == null ? void 0 : b.title), p & /*titleMaxRows*/
      4 && (v.maxLine = /*titleMaxRows*/
      g[2]), a.$set(v), /*tag*/
      g[0].data.description || /*tag*/
      (w = g[0].data.edit) != null && w.description ? h ? (h.p(g, p), p & /*tag*/
      1 && F(h, 1)) : (h = gp(g), h.c(), F(h, 1), h.m(r, null)) : h && (Me(), Y(h, 1, 1, () => {
        h = null;
      }), ke()), p & /*unfolded*/
      2 && Q(
        s,
        "transform",
        /*unfolded*/
        g[1] ? "translateY(-15px)" : "translateY(0)"
      ), (!c || p & /*unfolded*/
      2) && ye(
        i,
        "unfolded",
        /*unfolded*/
        g[1]
      ), (!c || p & /*folded*/
      32) && ye(
        i,
        "folded",
        /*folded*/
        g[5]
      );
    },
    i(g) {
      c || (F(t.$$.fragment, g), F(a.$$.fragment, g), F(h), c = !0);
    },
    o(g) {
      Y(t.$$.fragment, g), Y(a.$$.fragment, g), Y(h), c = !1;
    },
    d(g) {
      ge(t, g), g && U(e), g && U(i), ge(a), h && h.d();
    }
  };
}
function gp(n) {
  var s;
  let t, e, i;
  return e = new id({
    props: {
      text: (
        /*tag*/
        n[0].data.description
      ),
      edit: (
        /*tag*/
        (s = n[0].data.edit) == null ? void 0 : s.description
      ),
      maxLine: (
        /*descriptionMaxRows*/
        n[3]
      )
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "description svelte-1oxrkr1");
    },
    m(r, o) {
      X(r, t, o), me(e, t, null), i = !0;
    },
    p(r, o) {
      var l;
      const a = {};
      o & /*tag*/
      1 && (a.text = /*tag*/
      r[0].data.description), o & /*tag*/
      1 && (a.edit = /*tag*/
      (l = r[0].data.edit) == null ? void 0 : l.description), o & /*descriptionMaxRows*/
      8 && (a.maxLine = /*descriptionMaxRows*/
      r[3]), e.$set(a);
    },
    i(r) {
      i || (F(e.$$.fragment, r), i = !0);
    },
    o(r) {
      Y(e.$$.fragment, r), i = !1;
    },
    d(r) {
      r && U(t), ge(e);
    }
  };
}
function YI(n) {
  let t, e, i = (
    /*tag*/
    n[0].state && mp(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*tag*/
      s[0].state ? i ? (i.p(s, r), r & /*tag*/
      1 && F(i, 1)) : (i = mp(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function ZI(n, t, e) {
  let i, s, r, o, a, { tag: l } = t;
  return n.$$set = (c) => {
    "tag" in c && e(0, l = c.tag);
  }, n.$$.update = () => {
    var c, h, d, f, g;
    n.$$.dirty & /*tag*/
    1 && e(1, i = !!((c = l.state) != null && c.unfolded)), n.$$.dirty & /*unfolded*/
    2 && e(5, s = !i), n.$$.dirty & /*tag*/
    1 && e(4, r = (d = (h = l.data.title) != null ? h : l.data.text) != null ? d : ""), n.$$.dirty & /*tag*/
    1 && e(3, o = (f = l.data.descriptionMaxRows) != null ? f : null), n.$$.dirty & /*tag*/
    1 && e(2, a = (g = l.data.titleMaxRows) != null ? g : null);
  }, [l, i, a, o, r, s];
}
class JI extends Ie {
  constructor(t) {
    super(), Ce(this, t, ZI, YI, Pe, { tag: 0 }, XI);
  }
}
function qI(n) {
  let t, e;
  return t = new JI({ props: { tag: (
    /*tag*/
    n[0]
  ) } }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*tag*/
      1 && (r.tag = /*tag*/
      i[0]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function KI(n) {
  let t, e;
  return t = new HI({ props: { tag: (
    /*tag*/
    n[0]
  ) } }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*tag*/
      1 && (r.tag = /*tag*/
      i[0]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function $I(n) {
  let t, e, i, s;
  const r = [KI, qI], o = [];
  function a(l, c) {
    return (
      /*appearance*/
      l[1] === "line" ? 0 : (
        /*appearance*/
        l[1] === "plane" ? 1 : -1
      )
    );
  }
  return ~(t = a(n)) && (e = o[t] = r[t](n)), {
    c() {
      e && e.c(), i = Fe();
    },
    m(l, c) {
      ~t && o[t].m(l, c), X(l, i, c), s = !0;
    },
    p(l, [c]) {
      let h = t;
      t = a(l), t === h ? ~t && o[t].p(l, c) : (e && (Me(), Y(o[h], 1, 1, () => {
        o[h] = null;
      }), ke()), ~t ? (e = o[t], e ? e.p(l, c) : (e = o[t] = r[t](l), e.c()), F(e, 1), e.m(i.parentNode, i)) : e = null);
    },
    i(l) {
      s || (F(e), s = !0);
    },
    o(l) {
      Y(e), s = !1;
    },
    d(l) {
      ~t && o[t].d(l), l && U(i);
    }
  };
}
function e8(n, t, e) {
  let i, { tag: s } = t;
  return n.$$set = (r) => {
    "tag" in r && e(0, s = r.tag);
  }, n.$$.update = () => {
    var r;
    n.$$.dirty & /*tag*/
    1 && e(1, i = (r = s.data.appearance) != null ? r : "line");
  }, [s, i];
}
class t8 extends Ie {
  constructor(t) {
    super(), Ce(this, t, e8, $I, Pe, { tag: 0 });
  }
}
function i8(n) {
  De(n, "svelte-blgtit", ".line.svelte-blgtit{width:100%;height:100%;overflow:visible;pointer-events:none}");
}
function vp(n) {
  let t, e, i, s;
  return {
    c() {
      t = be("path"), y(t, "fill", "none"), y(t, "stroke", "url(#" + /*defsID*/
      n[4] + ")"), y(t, "stroke-width", "1"), y(t, "d", "M0 21 L14 0.5 L105 0.5");
    },
    m(r, o) {
      X(r, t, o), s = !0;
    },
    p(r, o) {
      n = r;
    },
    i(r) {
      s || (r && mt(() => {
        s && (i && i.end(1), e = ss(t, Qa, {
          duration: (
            /*duration*/
            n[1]
          ),
          delay: (
            /*inDelay*/
            n[0]
          ),
          easing: Mo
        }), e.start());
      }), s = !0);
    },
    o(r) {
      e && e.invalidate(), r && (i = Br(t, Qa, {
        duration: (
          /*duration*/
          n[1]
        ),
        delay: (
          /*outDelay*/
          n[2]
        ),
        easing: Er
      })), s = !1;
    },
    d(r) {
      r && U(t), r && i && i.end();
    }
  };
}
function n8(n) {
  let t, e, i, s, r, o = (
    /*unfolded*/
    n[3] && vp(n)
  );
  return {
    c() {
      t = be("svg"), e = be("defs"), i = be("linearGradient"), s = be("stop"), r = be("stop"), o && o.c(), y(s, "offset", "25%"), y(s, "stop-color", "white"), y(s, "stop-opacity", "1"), y(r, "offset", "100%"), y(r, "stop-color", "white"), y(r, "stop-opacity", "0.5"), y(
        i,
        "id",
        /*defsID*/
        n[4]
      ), y(i, "gradientUnits", "userSpaceOnUse"), y(t, "class", "line svelte-blgtit"), y(t, "viewBox", "0 0 105 21");
    },
    m(a, l) {
      X(a, t, l), R(t, e), R(e, i), R(i, s), R(i, r), o && o.m(t, null);
    },
    p(a, [l]) {
      /*unfolded*/
      a[3] ? o ? (o.p(a, l), l & /*unfolded*/
      8 && F(o, 1)) : (o = vp(a), o.c(), F(o, 1), o.m(t, null)) : o && (Me(), Y(o, 1, 1, () => {
        o = null;
      }), ke());
    },
    i(a) {
      F(o);
    },
    o(a) {
      Y(o);
    },
    d(a) {
      a && U(t), o && o.d();
    }
  };
}
function s8(n, t, e) {
  let { inDelay: i = 0 } = t, { duration: s = 1e3 } = t, { outDelay: r = 0 } = t, { unfolded: o } = t;
  const a = Dt();
  return n.$$set = (l) => {
    "inDelay" in l && e(0, i = l.inDelay), "duration" in l && e(1, s = l.duration), "outDelay" in l && e(2, r = l.outDelay), "unfolded" in l && e(3, o = l.unfolded);
  }, [i, s, r, o, a];
}
let r8 = class extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      s8,
      n8,
      Pe,
      {
        inDelay: 0,
        duration: 1,
        outDelay: 2,
        unfolded: 3
      },
      i8
    );
  }
};
function o8(n) {
  De(n, "svelte-1mgyhhn", `:root{--sc-dot-size:6px;--sc-active-dot-size:8px;--sc-dot-size-animation-time:250ms}.sc-carousel-dot__dot.svelte-1mgyhhn{background-color:var(--sc-color-rgb-light);border-radius:50%;display:inline-block;opacity:0.5;transition:opacity 100ms ease,\r
      height var(--sc-dot-size-animation-time) ease,\r
      width var(--sc-dot-size-animation-time) ease;cursor:pointer;-webkit-tap-highlight-color:transparent;height:var(--sc-dot-size);width:var(--sc-dot-size)}.sc-carousel-dot__dot.svelte-1mgyhhn:hover{opacity:0.9}.sc-carousel-dot__dot_active.svelte-1mgyhhn{opacity:0.7;height:var(--sc-active-dot-size);width:var(--sc-active-dot-size)}`);
}
function a8(n) {
  let t, e, i;
  return {
    c() {
      t = W("button"), y(t, "class", "sc-carousel-button sc-carousel-dot__dot svelte-1mgyhhn"), ye(
        t,
        "sc-carousel-dot__dot_active",
        /*active*/
        n[0]
      );
    },
    m(s, r) {
      X(s, t, r), e || (i = Oe(
        t,
        "click",
        /*click_handler*/
        n[1]
      ), e = !0);
    },
    p(s, [r]) {
      r & /*active*/
      1 && ye(
        t,
        "sc-carousel-dot__dot_active",
        /*active*/
        s[0]
      );
    },
    i: se,
    o: se,
    d(s) {
      s && U(t), e = !1, i();
    }
  };
}
function l8(n, t, e) {
  let { active: i = !1 } = t;
  function s(r) {
    An.call(this, n, r);
  }
  return n.$$set = (r) => {
    "active" in r && e(0, i = r.active);
  }, [i, s];
}
class c8 extends Ie {
  constructor(t) {
    super(), Ce(this, t, l8, a8, Pe, { active: 0 }, o8);
  }
}
function h8(n) {
  De(n, "svelte-670fde", ".sc-carousel-dots__container.svelte-670fde{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;padding:0 30px}.sc-carousel-dots__dot-container.svelte-670fde{height:calc(var(--sc-dot-size) + 14px);width:calc(var(--sc-dot-size) + 10px);display:flex;align-items:center;justify-content:center}");
}
function Ap(n, t, e) {
  const i = n.slice();
  return i[5] = t[e], i[7] = e, i;
}
function bp(n, t) {
  let e, i, s, r;
  function o() {
    return (
      /*click_handler*/
      t[3](
        /*pageIndex*/
        t[7]
      )
    );
  }
  return i = new c8({
    props: {
      active: (
        /*currentPageIndex*/
        t[1] === /*pageIndex*/
        t[7]
      )
    }
  }), i.$on("click", o), {
    key: n,
    first: null,
    c() {
      e = W("div"), ve(i.$$.fragment), s = oe(), y(e, "class", "sc-carousel-dots__dot-container svelte-670fde"), this.first = e;
    },
    m(a, l) {
      X(a, e, l), me(i, e, null), R(e, s), r = !0;
    },
    p(a, l) {
      t = a;
      const c = {};
      l & /*currentPageIndex, pagesCount*/
      3 && (c.active = /*currentPageIndex*/
      t[1] === /*pageIndex*/
      t[7]), i.$set(c);
    },
    i(a) {
      r || (F(i.$$.fragment, a), r = !0);
    },
    o(a) {
      Y(i.$$.fragment, a), r = !1;
    },
    d(a) {
      a && U(e), ge(i);
    }
  };
}
function d8(n) {
  let t, e = [], i = /* @__PURE__ */ new Map(), s, r = Array(
    /*pagesCount*/
    n[0]
  );
  const o = (a) => (
    /*pageIndex*/
    a[7]
  );
  for (let a = 0; a < r.length; a += 1) {
    let l = Ap(n, r, a), c = o(l);
    i.set(c, e[a] = bp(c, l));
  }
  return {
    c() {
      t = W("div");
      for (let a = 0; a < e.length; a += 1)
        e[a].c();
      y(t, "class", "sc-carousel-dots__container svelte-670fde");
    },
    m(a, l) {
      X(a, t, l);
      for (let c = 0; c < e.length; c += 1)
        e[c] && e[c].m(t, null);
      s = !0;
    },
    p(a, [l]) {
      l & /*currentPageIndex, Array, pagesCount, handleDotClick*/
      7 && (r = Array(
        /*pagesCount*/
        a[0]
      ), Me(), e = Ei(e, l, o, 1, a, r, i, t, yn, bp, null, Ap), ke());
    },
    i(a) {
      if (!s) {
        for (let l = 0; l < r.length; l += 1)
          F(e[l]);
        s = !0;
      }
    },
    o(a) {
      for (let l = 0; l < e.length; l += 1)
        Y(e[l]);
      s = !1;
    },
    d(a) {
      a && U(t);
      for (let l = 0; l < e.length; l += 1)
        e[l].d();
    }
  };
}
function u8(n, t, e) {
  const i = Rr();
  let { pagesCount: s = 1 } = t, { currentPageIndex: r = 0 } = t;
  function o(l) {
    i("pageChange", l);
  }
  const a = (l) => o(l);
  return n.$$set = (l) => {
    "pagesCount" in l && e(0, s = l.pagesCount), "currentPageIndex" in l && e(1, r = l.currentPageIndex);
  }, [s, r, o, a];
}
class f8 extends Ie {
  constructor(t) {
    super(), Ce(this, t, u8, d8, Pe, { pagesCount: 0, currentPageIndex: 1 }, h8);
  }
}
const Lr = "prev", is = "next";
function p8(n) {
  De(n, "svelte-1bftafx", ":root{--sc-arrow-size:2px}.sc-carousel-arrow__circle.svelte-1bftafx{width:20px;height:20px;border-radius:50%;background-color:var(--sc-color-rgb-light-50p);display:flex;align-items:center;justify-content:center;transition:opacity 100ms ease;cursor:pointer;-webkit-tap-highlight-color:transparent}.sc-carousel-arrow__circle.svelte-1bftafx:hover{opacity:0.9}.sc-carousel-arrow__arrow.svelte-1bftafx{border:solid var(--sc-color-hex-dark);border-width:0 var(--sc-arrow-size) var(--sc-arrow-size) 0;padding:var(--sc-arrow-size);position:relative}.sc-carousel-arrow__arrow-next.svelte-1bftafx{transform:rotate(-45deg);left:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__arrow-prev.svelte-1bftafx{transform:rotate(135deg);right:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__circle_disabled.svelte-1bftafx,.sc-carousel-arrow__circle_disabled.svelte-1bftafx:hover{opacity:0.5}");
}
function m8(n) {
  let t, e, i, s;
  return {
    c() {
      t = W("button"), e = W("i"), y(e, "class", "sc-carousel-arrow__arrow svelte-1bftafx"), ye(
        e,
        "sc-carousel-arrow__arrow-next",
        /*direction*/
        n[0] === is
      ), ye(
        e,
        "sc-carousel-arrow__arrow-prev",
        /*direction*/
        n[0] === Lr
      ), y(t, "class", "sc-carousel-button sc-carousel-arrow__circle svelte-1bftafx"), ye(
        t,
        "sc-carousel-arrow__circle_disabled",
        /*disabled*/
        n[1]
      );
    },
    m(r, o) {
      X(r, t, o), R(t, e), i || (s = Oe(
        t,
        "click",
        /*click_handler*/
        n[2]
      ), i = !0);
    },
    p(r, [o]) {
      o & /*direction, NEXT*/
      1 && ye(
        e,
        "sc-carousel-arrow__arrow-next",
        /*direction*/
        r[0] === is
      ), o & /*direction, PREV*/
      1 && ye(
        e,
        "sc-carousel-arrow__arrow-prev",
        /*direction*/
        r[0] === Lr
      ), o & /*disabled*/
      2 && ye(
        t,
        "sc-carousel-arrow__circle_disabled",
        /*disabled*/
        r[1]
      );
    },
    i: se,
    o: se,
    d(r) {
      r && U(t), i = !1, s();
    }
  };
}
function g8(n, t, e) {
  let { direction: i = is } = t, { disabled: s = !1 } = t;
  function r(o) {
    An.call(this, n, o);
  }
  return n.$$set = (o) => {
    "direction" in o && e(0, i = o.direction), "disabled" in o && e(1, s = o.disabled);
  }, [i, s, r];
}
class I1 extends Ie {
  constructor(t) {
    super(), Ce(this, t, g8, m8, Pe, { direction: 0, disabled: 1 }, p8);
  }
}
function v8(n) {
  De(n, "svelte-i7yfid", ".sc-carousel-progress__indicator.svelte-i7yfid{height:100%;background-color:var(--sc-color-hex-dark-50p)}");
}
function A8(n) {
  let t;
  return {
    c() {
      t = W("div"), y(t, "class", "sc-carousel-progress__indicator svelte-i7yfid"), Q(
        t,
        "width",
        /*width*/
        n[0] + "%"
      );
    },
    m(e, i) {
      X(e, t, i);
    },
    p(e, [i]) {
      i & /*width*/
      1 && Q(
        t,
        "width",
        /*width*/
        e[0] + "%"
      );
    },
    i: se,
    o: se,
    d(e) {
      e && U(t);
    }
  };
}
const yp = 100;
function b8(n, t, e) {
  let i, { value: s = 0 } = t;
  return n.$$set = (r) => {
    "value" in r && e(1, s = r.value);
  }, n.$$.update = () => {
    n.$$.dirty & /*value*/
    2 && e(0, i = Math.min(Math.max(s * yp, 0), yp));
  }, [i, s];
}
class y8 extends Ie {
  constructor(t) {
    super(), Ce(this, t, b8, A8, Pe, { value: 1 }, v8);
  }
}
function w8(n, t) {
  n.addEventListener("mousedown", t), n.addEventListener("touchstart", t, { passive: !0 });
}
function P8(n, t) {
  n.removeEventListener("mousedown", t), n.removeEventListener("touchstart", t);
}
function C8(n, t) {
  n.addEventListener("mouseup", t), n.addEventListener("touchend", t);
}
function wp(n, t) {
  n.removeEventListener("mouseup", t), n.removeEventListener("touchend", t);
}
function I8(n, t) {
  n.addEventListener("mousemove", t), n.addEventListener("touchmove", t);
}
function Pp(n, t) {
  n.removeEventListener("mousemove", t), n.removeEventListener("touchmove", t);
}
function nd(n) {
  return function(t, e) {
    n.dispatchEvent(
      new CustomEvent(t, {
        detail: e
      })
    );
  };
}
const E8 = 110, M8 = 9, k8 = 111, x8 = 20;
function ic(n) {
  if ("TouchEvent" in window && n instanceof TouchEvent) {
    const t = n.touches[0];
    return {
      x: t ? t.clientX : 0,
      y: t ? t.clientY : 0
    };
  }
  return {
    x: n.clientX,
    y: n.clientY
  };
}
function D8(n, { thresholdProvider: t }) {
  const e = nd(n);
  let i, s, r = 0, o, a = !1;
  function l() {
    return Date.now() - o >= k8 && Math.abs(r) >= x8;
  }
  function c(f) {
    o = Date.now(), r = 0, a = !0;
    const g = ic(f);
    i = g.x, s = g.y, e("swipeStart", { x: i, y: s }), I8(window, h), C8(window, d);
  }
  function h(f) {
    if (!a)
      return;
    const g = ic(f), p = g.x - i, m = g.y - s;
    i = g.x, s = g.y, e("swipeMove", { x: i, y: s, dx: p, dy: m }), p !== 0 && Math.sign(p) !== Math.sign(r) && (r = 0), r += p, Math.abs(r) > t() && (e("swipeThresholdReached", { direction: r > 0 ? Lr : is }), wp(window, d), Pp(window, h));
  }
  function d(f) {
    if (wp(window, d), Pp(window, h), a = !1, !l()) {
      e("swipeFailed");
      return;
    }
    const g = ic(f);
    e("swipeEnd", { x: g.x, y: g.y });
  }
  return w8(n, c), {
    destroy() {
      P8(n, c);
    }
  };
}
function S8(n, t) {
  n.addEventListener("mouseenter", t);
}
function T8(n, t) {
  n.removeEventListener("mouseenter", t);
}
function L8(n, t) {
  n.addEventListener("mouseleave", t);
}
function Cp(n, t) {
  n.removeEventListener("mouseleave", t);
}
function z8(n) {
  const t = nd(n);
  function e() {
    L8(n, i), t("hovered", { value: !0 });
  }
  function i() {
    t("hovered", { value: !1 }), Cp(n, i);
  }
  return S8(n, e), {
    destroy() {
      T8(n, e), Cp(n, i);
    }
  };
}
const O8 = (n, t) => {
  const e = t.x - n.x, i = t.y - n.y;
  return Math.sqrt(e * e + i * i);
};
function vr(n, t, e) {
  return Math.max(n, Math.min(t, e));
}
function j8(n, t) {
  n.addEventListener("touchstart", t, { passive: !0 });
}
function R8(n, t) {
  n.removeEventListener("touchstart", t);
}
function B8(n, t) {
  n.addEventListener("touchend", t);
}
function Ip(n, t) {
  n.removeEventListener("touchend", t);
}
function V8(n) {
  const t = nd(n);
  let e = 0, i = { x: 0, y: 0 };
  function s({
    tapEndedAt: a,
    tapEndedPos: l
  }) {
    const c = a - e, h = O8(i, l);
    return c <= E8 && h <= M8;
  }
  function r(a) {
    e = Date.now();
    const l = a.touches[0];
    i = { x: l.clientX, y: l.clientY }, B8(n, o);
  }
  function o(a) {
    Ip(n, o);
    const l = a.changedTouches[0];
    s({
      tapEndedAt: Date.now(),
      tapEndedPos: { x: l.clientX, y: l.clientY }
    }) && t("tapped");
  }
  return j8(n, r), {
    destroy() {
      R8(n, r), Ip(n, o);
    }
  };
}
function _8({
  currentParticleIndex: n,
  particlesCount: t,
  clonesCountHead: e,
  clonesCountTotal: i,
  particlesToScroll: s
}) {
  return n === t - e ? 0 : n === 0 ? E1({
    particlesCountWithoutClones: t - i,
    particlesToScroll: s
  }) - 1 : Math.floor((n - e) / s);
}
function H8({
  currentParticleIndex: n,
  particlesToScroll: t
}) {
  return Math.ceil(n / t);
}
function F8({
  currentParticleIndex: n,
  particlesCount: t,
  clonesCountHead: e,
  clonesCountTotal: i,
  infinite: s,
  particlesToScroll: r
}) {
  return s ? _8({
    currentParticleIndex: n,
    particlesCount: t,
    clonesCountHead: e,
    clonesCountTotal: i,
    particlesToScroll: r
  }) : H8({
    currentParticleIndex: n,
    particlesToScroll: r
  });
}
function E1({
  particlesCountWithoutClones: n,
  particlesToScroll: t
}) {
  return Math.ceil(n / t);
}
function N8({
  particlesCountWithoutClones: n,
  particlesToScroll: t,
  particlesToShow: e
}) {
  const i = M1({
    particlesCountWithoutClones: n,
    particlesToScroll: t,
    particlesToShow: e
  });
  return Math.ceil(n / t) - i;
}
function G8({
  infinite: n,
  particlesCountWithoutClones: t,
  particlesToScroll: e,
  particlesToShow: i
}) {
  return n ? E1({
    particlesCountWithoutClones: t,
    particlesToScroll: e
  }) : N8({
    particlesCountWithoutClones: t,
    particlesToScroll: e,
    particlesToShow: i
  });
}
function W8({
  pageIndex: n,
  clonesCountHead: t,
  clonesCountTail: e,
  particlesToScroll: i,
  particlesCount: s
}) {
  return vr(
    0,
    Math.min(t + n * i, s - e),
    s - 1
  );
}
function Q8({
  pageIndex: n,
  particlesToScroll: t,
  particlesCount: e,
  particlesToShow: i
}) {
  return vr(
    0,
    Math.min(n * t, e - i),
    e - 1
  );
}
function nc({
  infinite: n,
  pageIndex: t,
  clonesCountHead: e,
  clonesCountTail: i,
  particlesToScroll: s,
  particlesCount: r,
  particlesToShow: o
}) {
  return n ? W8({
    pageIndex: t,
    clonesCountHead: e,
    clonesCountTail: i,
    particlesToScroll: s,
    particlesCount: r
  }) : Q8({
    pageIndex: t,
    particlesToScroll: s,
    particlesCount: r,
    particlesToShow: o
  });
}
function U8({
  particlesContainerChildren: n,
  particleWidth: t
}) {
  for (let e = 0; e < n.length; e++)
    n[e].style.minWidth = `${t}px`, n[e].style.maxWidth = `${t}px`;
}
function M1({
  particlesToScroll: n,
  particlesToShow: t,
  particlesCountWithoutClones: e
}) {
  const i = n - t;
  let s = t;
  for (; ; ) {
    const r = e - s - i;
    if (r < t)
      return Math.max(r, 0);
    s += t + i;
  }
}
function X8(n) {
  return new ResizeObserver((t) => {
    n({
      width: t[0].contentRect.width
    });
  });
}
function Y8({
  clonesCountHead: n,
  clonesCountTail: t,
  particlesContainerChildren: e
}) {
  const i = [];
  for (let o = 0; o < t; o++)
    i.push(e[o].cloneNode(!0));
  const s = [], r = e.length;
  for (let o = r - 1; o > r - 1 - n; o--)
    s.push(e[o].cloneNode(!0));
  return {
    clonesToAppend: i,
    clonesToPrepend: s
  };
}
function Z8({
  particlesContainer: n,
  clonesToAppend: t,
  clonesToPrepend: e
}) {
  for (let i = 0; i < t.length; i++)
    n.append(t[i]);
  for (let i = 0; i < e.length; i++)
    n.prepend(e[i]);
}
function J8({
  infinite: n,
  particlesToShow: t,
  partialPageSize: e
}) {
  const i = n ? {
    // need to round with ceil as particlesToShow, particlesToShow can be floating (e.g. 1.5, 3.75)
    head: Math.ceil(e || t),
    tail: Math.ceil(t)
  } : {
    head: 0,
    tail: 0
  };
  return de(_({}, i), {
    total: i.head + i.tail
  });
}
const Ao = (n, t, e) => {
  if (n && n.hasOwnProperty(t))
    return n[t];
  if (e === void 0)
    throw new Error(`Required arg "${t}" was not provided`);
  return e;
}, Zc = (n) => (t) => {
  n[t] && n[t]();
};
var q8 = "Expected a function", k1 = "__lodash_hash_undefined__", x1 = 1 / 0, K8 = "[object Function]", $8 = "[object GeneratorFunction]", eE = "[object Symbol]", tE = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, iE = /^\w*$/, nE = /^\./, sE = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, rE = /[\\^$.*+?()[\]{}|]/g, oE = /\\(\\)?/g, aE = /^\[object .+?Constructor\]$/, lE = typeof yi == "object" && yi && yi.Object === Object && yi, cE = typeof self == "object" && self && self.Object === Object && self, sd = lE || cE || Function("return this")();
function hE(n, t) {
  return n == null ? void 0 : n[t];
}
function dE(n) {
  var t = !1;
  if (n != null && typeof n.toString != "function")
    try {
      t = !!(n + "");
    } catch (e) {
    }
  return t;
}
var uE = Array.prototype, fE = Function.prototype, D1 = Object.prototype, sc = sd["__core-js_shared__"], Ep = function() {
  var n = /[^.]+$/.exec(sc && sc.keys && sc.keys.IE_PROTO || "");
  return n ? "Symbol(src)_1." + n : "";
}(), S1 = fE.toString, rd = D1.hasOwnProperty, T1 = D1.toString, pE = RegExp(
  "^" + S1.call(rd).replace(rE, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
), Mp = sd.Symbol, mE = uE.splice, gE = L1(sd, "Map"), jo = L1(Object, "create"), kp = Mp ? Mp.prototype : void 0, xp = kp ? kp.toString : void 0;
function js(n) {
  var t = -1, e = n ? n.length : 0;
  for (this.clear(); ++t < e; ) {
    var i = n[t];
    this.set(i[0], i[1]);
  }
}
function vE() {
  this.__data__ = jo ? jo(null) : {};
}
function AE(n) {
  return this.has(n) && delete this.__data__[n];
}
function bE(n) {
  var t = this.__data__;
  if (jo) {
    var e = t[n];
    return e === k1 ? void 0 : e;
  }
  return rd.call(t, n) ? t[n] : void 0;
}
function yE(n) {
  var t = this.__data__;
  return jo ? t[n] !== void 0 : rd.call(t, n);
}
function wE(n, t) {
  var e = this.__data__;
  return e[n] = jo && t === void 0 ? k1 : t, this;
}
js.prototype.clear = vE;
js.prototype.delete = AE;
js.prototype.get = bE;
js.prototype.has = yE;
js.prototype.set = wE;
function _r(n) {
  var t = -1, e = n ? n.length : 0;
  for (this.clear(); ++t < e; ) {
    var i = n[t];
    this.set(i[0], i[1]);
  }
}
function PE() {
  this.__data__ = [];
}
function CE(n) {
  var t = this.__data__, e = El(t, n);
  if (e < 0)
    return !1;
  var i = t.length - 1;
  return e == i ? t.pop() : mE.call(t, e, 1), !0;
}
function IE(n) {
  var t = this.__data__, e = El(t, n);
  return e < 0 ? void 0 : t[e][1];
}
function EE(n) {
  return El(this.__data__, n) > -1;
}
function ME(n, t) {
  var e = this.__data__, i = El(e, n);
  return i < 0 ? e.push([n, t]) : e[i][1] = t, this;
}
_r.prototype.clear = PE;
_r.prototype.delete = CE;
_r.prototype.get = IE;
_r.prototype.has = EE;
_r.prototype.set = ME;
function _s(n) {
  var t = -1, e = n ? n.length : 0;
  for (this.clear(); ++t < e; ) {
    var i = n[t];
    this.set(i[0], i[1]);
  }
}
function kE() {
  this.__data__ = {
    hash: new js(),
    map: new (gE || _r)(),
    string: new js()
  };
}
function xE(n) {
  return Ml(this, n).delete(n);
}
function DE(n) {
  return Ml(this, n).get(n);
}
function SE(n) {
  return Ml(this, n).has(n);
}
function TE(n, t) {
  return Ml(this, n).set(n, t), this;
}
_s.prototype.clear = kE;
_s.prototype.delete = xE;
_s.prototype.get = DE;
_s.prototype.has = SE;
_s.prototype.set = TE;
function El(n, t) {
  for (var e = n.length; e--; )
    if (NE(n[e][0], t))
      return e;
  return -1;
}
function LE(n, t) {
  t = RE(t, n) ? [t] : jE(t);
  for (var e = 0, i = t.length; n != null && e < i; )
    n = n[HE(t[e++])];
  return e && e == i ? n : void 0;
}
function zE(n) {
  if (!O1(n) || VE(n))
    return !1;
  var t = GE(n) || dE(n) ? pE : aE;
  return t.test(FE(n));
}
function OE(n) {
  if (typeof n == "string")
    return n;
  if (ad(n))
    return xp ? xp.call(n) : "";
  var t = n + "";
  return t == "0" && 1 / n == -x1 ? "-0" : t;
}
function jE(n) {
  return z1(n) ? n : _E(n);
}
function Ml(n, t) {
  var e = n.__data__;
  return BE(t) ? e[typeof t == "string" ? "string" : "hash"] : e.map;
}
function L1(n, t) {
  var e = hE(n, t);
  return zE(e) ? e : void 0;
}
function RE(n, t) {
  if (z1(n))
    return !1;
  var e = typeof n;
  return e == "number" || e == "symbol" || e == "boolean" || n == null || ad(n) ? !0 : iE.test(n) || !tE.test(n) || t != null && n in Object(t);
}
function BE(n) {
  var t = typeof n;
  return t == "string" || t == "number" || t == "symbol" || t == "boolean" ? n !== "__proto__" : n === null;
}
function VE(n) {
  return !!Ep && Ep in n;
}
var _E = od(function(n) {
  n = QE(n);
  var t = [];
  return nE.test(n) && t.push(""), n.replace(sE, function(e, i, s, r) {
    t.push(s ? r.replace(oE, "$1") : i || e);
  }), t;
});
function HE(n) {
  if (typeof n == "string" || ad(n))
    return n;
  var t = n + "";
  return t == "0" && 1 / n == -x1 ? "-0" : t;
}
function FE(n) {
  if (n != null) {
    try {
      return S1.call(n);
    } catch (t) {
    }
    try {
      return n + "";
    } catch (t) {
    }
  }
  return "";
}
function od(n, t) {
  if (typeof n != "function" || t && typeof t != "function")
    throw new TypeError(q8);
  var e = function() {
    var i = arguments, s = t ? t.apply(this, i) : i[0], r = e.cache;
    if (r.has(s))
      return r.get(s);
    var o = n.apply(this, i);
    return e.cache = r.set(s, o), o;
  };
  return e.cache = new (od.Cache || _s)(), e;
}
od.Cache = _s;
function NE(n, t) {
  return n === t || n !== n && t !== t;
}
var z1 = Array.isArray;
function GE(n) {
  var t = O1(n) ? T1.call(n) : "";
  return t == K8 || t == $8;
}
function O1(n) {
  var t = typeof n;
  return !!n && (t == "object" || t == "function");
}
function WE(n) {
  return !!n && typeof n == "object";
}
function ad(n) {
  return typeof n == "symbol" || WE(n) && T1.call(n) == eE;
}
function QE(n) {
  return n == null ? "" : OE(n);
}
function UE(n, t, e) {
  var i = n == null ? void 0 : LE(n, t);
  return i === void 0 ? e : i;
}
var wa = UE, tl = {}, XE = {
  get exports() {
    return tl;
  },
  set exports(n) {
    tl = n;
  }
};
(function(n, t) {
  var e = 200, i = "__lodash_hash_undefined__", s = 9007199254740991, r = "[object Arguments]", o = "[object Array]", a = "[object Boolean]", l = "[object Date]", c = "[object Error]", h = "[object Function]", d = "[object GeneratorFunction]", f = "[object Map]", g = "[object Number]", p = "[object Object]", m = "[object Promise]", v = "[object RegExp]", b = "[object Set]", w = "[object String]", x = "[object Symbol]", k = "[object WeakMap]", T = "[object ArrayBuffer]", S = "[object DataView]", V = "[object Float32Array]", z = "[object Float64Array]", O = "[object Int8Array]", A = "[object Int16Array]", C = "[object Int32Array]", I = "[object Uint8Array]", E = "[object Uint8ClampedArray]", D = "[object Uint16Array]", L = "[object Uint32Array]", N = /[\\^$.*+?()[\]{}|]/g, G = /\w*$/, Z = /^\[object .+?Constructor\]$/, ee = /^(?:0|[1-9]\d*)$/, J = {};
  J[r] = J[o] = J[T] = J[S] = J[a] = J[l] = J[V] = J[z] = J[O] = J[A] = J[C] = J[f] = J[g] = J[p] = J[v] = J[b] = J[w] = J[x] = J[I] = J[E] = J[D] = J[L] = !0, J[c] = J[h] = J[k] = !1;
  var ie = typeof yi == "object" && yi && yi.Object === Object && yi, ne = typeof self == "object" && self && self.Object === Object && self, he = ie || ne || Function("return this")(), Le = t && !t.nodeType && t, we = Le && !0 && n && !n.nodeType && n, le = we && we.exports === Le;
  function ae(M, B) {
    return M.set(B[0], B[1]), M;
  }
  function ce(M, B) {
    return M.add(B), M;
  }
  function Ee(M, B) {
    for (var K = -1, re = M ? M.length : 0; ++K < re && B(M[K], K, M) !== !1; )
      ;
    return M;
  }
  function Ae(M, B) {
    for (var K = -1, re = B.length, We = M.length; ++K < re; )
      M[We + K] = B[K];
    return M;
  }
  function Ge(M, B, K, re) {
    var We = -1, Re = M ? M.length : 0;
    for (re && Re && (K = M[++We]); ++We < Re; )
      K = B(K, M[We], We, M);
    return K;
  }
  function Be(M, B) {
    for (var K = -1, re = Array(M); ++K < M; )
      re[K] = B(K);
    return re;
  }
  function Te(M, B) {
    return M == null ? void 0 : M[B];
  }
  function Ne(M) {
    var B = !1;
    if (M != null && typeof M.toString != "function")
      try {
        B = !!(M + "");
      } catch (K) {
      }
    return B;
  }
  function ue(M) {
    var B = -1, K = Array(M.size);
    return M.forEach(function(re, We) {
      K[++B] = [We, re];
    }), K;
  }
  function Se(M, B) {
    return function(K) {
      return M(B(K));
    };
  }
  function ze(M) {
    var B = -1, K = Array(M.size);
    return M.forEach(function(re) {
      K[++B] = re;
    }), K;
  }
  var nt = Array.prototype, it = Function.prototype, ht = Object.prototype, Ke = he["__core-js_shared__"], $e = function() {
    var M = /[^.]+$/.exec(Ke && Ke.keys && Ke.keys.IE_PROTO || "");
    return M ? "Symbol(src)_1." + M : "";
  }(), st = it.toString, at = ht.hasOwnProperty, Ut = ht.toString, ls = RegExp(
    "^" + st.call(at).replace(N, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
  ), ai = le ? he.Buffer : void 0, Mi = he.Symbol, _i = he.Uint8Array, jt = Se(Object.getPrototypeOf, Object), ki = Object.create, Hi = ht.propertyIsEnumerable, Hr = nt.splice, cs = Object.getOwnPropertySymbols, Cn = ai ? ai.isBuffer : void 0, Hs = Se(Object.keys, Object), In = H(he, "DataView"), gi = H(he, "Map"), li = H(he, "Promise"), En = H(he, "Set"), Mn = H(he, "WeakMap"), Fi = H(Object, "create"), $i = qt(In), en = qt(gi), hs = qt(li), ds = qt(En), kn = qt(Mn), Ni = Mi ? Mi.prototype : void 0, Fs = Ni ? Ni.valueOf : void 0;
  function xi(M) {
    var B = -1, K = M ? M.length : 0;
    for (this.clear(); ++B < K; ) {
      var re = M[B];
      this.set(re[0], re[1]);
    }
  }
  function xn() {
    this.__data__ = Fi ? Fi(null) : {};
  }
  function Fr(M) {
    return this.has(M) && delete this.__data__[M];
  }
  function Nr(M) {
    var B = this.__data__;
    if (Fi) {
      var K = B[M];
      return K === i ? void 0 : K;
    }
    return at.call(B, M) ? B[M] : void 0;
  }
  function us(M) {
    var B = this.__data__;
    return Fi ? B[M] !== void 0 : at.call(B, M);
  }
  function tn(M, B) {
    var K = this.__data__;
    return K[M] = Fi && B === void 0 ? i : B, this;
  }
  xi.prototype.clear = xn, xi.prototype.delete = Fr, xi.prototype.get = Nr, xi.prototype.has = us, xi.prototype.set = tn;
  function Et(M) {
    var B = -1, K = M ? M.length : 0;
    for (this.clear(); ++B < K; ) {
      var re = M[B];
      this.set(re[0], re[1]);
    }
  }
  function Ns() {
    this.__data__ = [];
  }
  function Gr(M) {
    var B = this.__data__, K = vi(B, M);
    if (K < 0)
      return !1;
    var re = B.length - 1;
    return K == re ? B.pop() : Hr.call(B, K, 1), !0;
  }
  function Gs(M) {
    var B = this.__data__, K = vi(B, M);
    return K < 0 ? void 0 : B[K][1];
  }
  function Ws(M) {
    return vi(this.__data__, M) > -1;
  }
  function Qs(M, B) {
    var K = this.__data__, re = vi(K, M);
    return re < 0 ? K.push([M, B]) : K[re][1] = B, this;
  }
  Et.prototype.clear = Ns, Et.prototype.delete = Gr, Et.prototype.get = Gs, Et.prototype.has = Ws, Et.prototype.set = Qs;
  function Mt(M) {
    var B = -1, K = M ? M.length : 0;
    for (this.clear(); ++B < K; ) {
      var re = M[B];
      this.set(re[0], re[1]);
    }
  }
  function fs() {
    this.__data__ = {
      hash: new xi(),
      map: new (gi || Et)(),
      string: new xi()
    };
  }
  function Di(M) {
    return j(this, M).delete(M);
  }
  function nn(M) {
    return j(this, M).get(M);
  }
  function sn(M) {
    return j(this, M).has(M);
  }
  function Dn(M, B) {
    return j(this, M).set(M, B), this;
  }
  Mt.prototype.clear = fs, Mt.prototype.delete = Di, Mt.prototype.get = nn, Mt.prototype.has = sn, Mt.prototype.set = Dn;
  function Tt(M) {
    this.__data__ = new Et(M);
  }
  function Wr() {
    this.__data__ = new Et();
  }
  function Qr(M) {
    return this.__data__.delete(M);
  }
  function Sn(M) {
    return this.__data__.get(M);
  }
  function Ht(M) {
    return this.__data__.has(M);
  }
  function Gi(M, B) {
    var K = this.__data__;
    if (K instanceof Et) {
      var re = K.__data__;
      if (!gi || re.length < e - 1)
        return re.push([M, B]), this;
      K = this.__data__ = new Mt(re);
    }
    return K.set(M, B), this;
  }
  Tt.prototype.clear = Wr, Tt.prototype.delete = Qr, Tt.prototype.get = Sn, Tt.prototype.has = Ht, Tt.prototype.set = Gi;
  function Xt(M, B) {
    var K = Zr(M) || Zs(M) ? Be(M.length, String) : [], re = K.length, We = !!re;
    for (var Re in M)
      (B || at.call(M, Re)) && !(We && (Re == "length" || At(Re, re))) && K.push(Re);
    return K;
  }
  function ei(M, B, K) {
    var re = M[B];
    (!(at.call(M, B) && Yo(re, K)) || K === void 0 && !(B in M)) && (M[B] = K);
  }
  function vi(M, B) {
    for (var K = M.length; K--; )
      if (Yo(M[K][0], B))
        return K;
    return -1;
  }
  function yt(M, B) {
    return M && On(B, qr(B), M);
  }
  function Yt(M, B, K, re, We, Re, Xe) {
    var Ye;
    if (re && (Ye = Re ? re(M, We, Re, Xe) : re(M)), Ye !== void 0)
      return Ye;
    if (!Qi(M))
      return M;
    var Ct = Zr(M);
    if (Ct) {
      if (Ye = pe(M), !B)
        return ps(M, Ye);
    } else {
      var et = te(M), Ft = et == h || et == d;
      if (Zo(M))
        return Wi(M, B);
      if (et == p || et == r || Ft && !Re) {
        if (Ne(M))
          return Re ? M : {};
        if (Ye = xe(Ft ? {} : M), !B)
          return Xr(M, yt(Ye, M));
      } else {
        if (!J[et])
          return Re ? M : {};
        Ye = Ue(M, et, Yt, B);
      }
    }
    Xe || (Xe = new Tt());
    var ti = Xe.get(M);
    if (ti)
      return ti;
    if (Xe.set(M, Ye), !Ct)
      var xt = K ? Yr(M) : qr(M);
    return Ee(xt || M, function(Nt, Rt) {
      xt && (Rt = Nt, Nt = M[Rt]), ei(Ye, Rt, Yt(Nt, B, K, re, Rt, M, Xe));
    }), Ye;
  }
  function Us(M) {
    return Qi(M) ? ki(M) : {};
  }
  function Xs(M, B, K) {
    var re = B(M);
    return Zr(M) ? re : Ae(re, K(M));
  }
  function Tn(M) {
    return Ut.call(M);
  }
  function Zt(M) {
    if (!Qi(M) || kt(M))
      return !1;
    var B = Jr(M) || Ne(M) ? ls : Z;
    return B.test(qt(M));
  }
  function Ln(M) {
    if (!Jt(M))
      return Hs(M);
    var B = [];
    for (var K in Object(M))
      at.call(M, K) && K != "constructor" && B.push(K);
    return B;
  }
  function Wi(M, B) {
    if (B)
      return M.slice();
    var K = new M.constructor(M.length);
    return M.copy(K), K;
  }
  function rn(M) {
    var B = new M.constructor(M.byteLength);
    return new _i(B).set(new _i(M)), B;
  }
  function Si(M, B) {
    var K = B ? rn(M.buffer) : M.buffer;
    return new M.constructor(K, M.byteOffset, M.byteLength);
  }
  function zn(M, B, K) {
    var re = B ? K(ue(M), !0) : ue(M);
    return Ge(re, ae, new M.constructor());
  }
  function on(M) {
    var B = new M.constructor(M.source, G.exec(M));
    return B.lastIndex = M.lastIndex, B;
  }
  function ci(M, B, K) {
    var re = B ? K(ze(M), !0) : ze(M);
    return Ge(re, ce, new M.constructor());
  }
  function Ur(M) {
    return Fs ? Object(Fs.call(M)) : {};
  }
  function Ys(M, B) {
    var K = B ? rn(M.buffer) : M.buffer;
    return new M.constructor(K, M.byteOffset, M.length);
  }
  function ps(M, B) {
    var K = -1, re = M.length;
    for (B || (B = Array(re)); ++K < re; )
      B[K] = M[K];
    return B;
  }
  function On(M, B, K, re) {
    K || (K = {});
    for (var We = -1, Re = B.length; ++We < Re; ) {
      var Xe = B[We], Ye = re ? re(K[Xe], M[Xe], Xe, K, M) : void 0;
      ei(K, Xe, Ye === void 0 ? M[Xe] : Ye);
    }
    return K;
  }
  function Xr(M, B) {
    return On(M, q(M), B);
  }
  function Yr(M) {
    return Xs(M, qr, q);
  }
  function j(M, B) {
    var K = M.__data__;
    return wt(B) ? K[typeof B == "string" ? "string" : "hash"] : K.map;
  }
  function H(M, B) {
    var K = Te(M, B);
    return Zt(K) ? K : void 0;
  }
  var q = cs ? Se(cs, Object) : Sl, te = Tn;
  (In && te(new In(new ArrayBuffer(1))) != S || gi && te(new gi()) != f || li && te(li.resolve()) != m || En && te(new En()) != b || Mn && te(new Mn()) != k) && (te = function(M) {
    var B = Ut.call(M), K = B == p ? M.constructor : void 0, re = K ? qt(K) : void 0;
    if (re)
      switch (re) {
        case $i:
          return S;
        case en:
          return f;
        case hs:
          return m;
        case ds:
          return b;
        case kn:
          return k;
      }
    return B;
  });
  function pe(M) {
    var B = M.length, K = M.constructor(B);
    return B && typeof M[0] == "string" && at.call(M, "index") && (K.index = M.index, K.input = M.input), K;
  }
  function xe(M) {
    return typeof M.constructor == "function" && !Jt(M) ? Us(jt(M)) : {};
  }
  function Ue(M, B, K, re) {
    var We = M.constructor;
    switch (B) {
      case T:
        return rn(M);
      case a:
      case l:
        return new We(+M);
      case S:
        return Si(M, re);
      case V:
      case z:
      case O:
      case A:
      case C:
      case I:
      case E:
      case D:
      case L:
        return Ys(M, re);
      case f:
        return zn(M, re, K);
      case g:
      case w:
        return new We(M);
      case v:
        return on(M);
      case b:
        return ci(M, re, K);
      case x:
        return Ur(M);
    }
  }
  function At(M, B) {
    return B = B == null ? s : B, !!B && (typeof M == "number" || ee.test(M)) && M > -1 && M % 1 == 0 && M < B;
  }
  function wt(M) {
    var B = typeof M;
    return B == "string" || B == "number" || B == "symbol" || B == "boolean" ? M !== "__proto__" : M === null;
  }
  function kt(M) {
    return !!$e && $e in M;
  }
  function Jt(M) {
    var B = M && M.constructor, K = typeof B == "function" && B.prototype || ht;
    return M === K;
  }
  function qt(M) {
    if (M != null) {
      try {
        return st.call(M);
      } catch (B) {
      }
      try {
        return M + "";
      } catch (B) {
      }
    }
    return "";
  }
  function Xo(M) {
    return Yt(M, !0, !0);
  }
  function Yo(M, B) {
    return M === B || M !== M && B !== B;
  }
  function Zs(M) {
    return Dl(M) && at.call(M, "callee") && (!Hi.call(M, "callee") || Ut.call(M) == r);
  }
  var Zr = Array.isArray;
  function Js(M) {
    return M != null && Jo(M.length) && !Jr(M);
  }
  function Dl(M) {
    return qo(M) && Js(M);
  }
  var Zo = Cn || Tl;
  function Jr(M) {
    var B = Qi(M) ? Ut.call(M) : "";
    return B == h || B == d;
  }
  function Jo(M) {
    return typeof M == "number" && M > -1 && M % 1 == 0 && M <= s;
  }
  function Qi(M) {
    var B = typeof M;
    return !!M && (B == "object" || B == "function");
  }
  function qo(M) {
    return !!M && typeof M == "object";
  }
  function qr(M) {
    return Js(M) ? Xt(M) : Ln(M);
  }
  function Sl() {
    return [];
  }
  function Tl() {
    return !1;
  }
  n.exports = Xo;
})(XE, tl);
const YE = tl;
var il = {}, ZE = {
  get exports() {
    return il;
  },
  set exports(n) {
    il = n;
  }
};
(function(n, t) {
  var e = 200, i = "__lodash_hash_undefined__", s = 1, r = 2, o = 9007199254740991, a = "[object Arguments]", l = "[object Array]", c = "[object AsyncFunction]", h = "[object Boolean]", d = "[object Date]", f = "[object Error]", g = "[object Function]", p = "[object GeneratorFunction]", m = "[object Map]", v = "[object Number]", b = "[object Null]", w = "[object Object]", x = "[object Promise]", k = "[object Proxy]", T = "[object RegExp]", S = "[object Set]", V = "[object String]", z = "[object Symbol]", O = "[object Undefined]", A = "[object WeakMap]", C = "[object ArrayBuffer]", I = "[object DataView]", E = "[object Float32Array]", D = "[object Float64Array]", L = "[object Int8Array]", N = "[object Int16Array]", G = "[object Int32Array]", Z = "[object Uint8Array]", ee = "[object Uint8ClampedArray]", J = "[object Uint16Array]", ie = "[object Uint32Array]", ne = /[\\^$.*+?()[\]{}|]/g, he = /^\[object .+?Constructor\]$/, Le = /^(?:0|[1-9]\d*)$/, we = {};
  we[E] = we[D] = we[L] = we[N] = we[G] = we[Z] = we[ee] = we[J] = we[ie] = !0, we[a] = we[l] = we[C] = we[h] = we[I] = we[d] = we[f] = we[g] = we[m] = we[v] = we[w] = we[T] = we[S] = we[V] = we[A] = !1;
  var le = typeof yi == "object" && yi && yi.Object === Object && yi, ae = typeof self == "object" && self && self.Object === Object && self, ce = le || ae || Function("return this")(), Ee = t && !t.nodeType && t, Ae = Ee && !0 && n && !n.nodeType && n, Ge = Ae && Ae.exports === Ee, Be = Ge && le.process, Te = function() {
    try {
      return Be && Be.binding && Be.binding("util");
    } catch (M) {
    }
  }(), Ne = Te && Te.isTypedArray;
  function ue(M, B) {
    for (var K = -1, re = M == null ? 0 : M.length, We = 0, Re = []; ++K < re; ) {
      var Xe = M[K];
      B(Xe, K, M) && (Re[We++] = Xe);
    }
    return Re;
  }
  function Se(M, B) {
    for (var K = -1, re = B.length, We = M.length; ++K < re; )
      M[We + K] = B[K];
    return M;
  }
  function ze(M, B) {
    for (var K = -1, re = M == null ? 0 : M.length; ++K < re; )
      if (B(M[K], K, M))
        return !0;
    return !1;
  }
  function nt(M, B) {
    for (var K = -1, re = Array(M); ++K < M; )
      re[K] = B(K);
    return re;
  }
  function it(M) {
    return function(B) {
      return M(B);
    };
  }
  function ht(M, B) {
    return M.has(B);
  }
  function Ke(M, B) {
    return M == null ? void 0 : M[B];
  }
  function $e(M) {
    var B = -1, K = Array(M.size);
    return M.forEach(function(re, We) {
      K[++B] = [We, re];
    }), K;
  }
  function st(M, B) {
    return function(K) {
      return M(B(K));
    };
  }
  function at(M) {
    var B = -1, K = Array(M.size);
    return M.forEach(function(re) {
      K[++B] = re;
    }), K;
  }
  var Ut = Array.prototype, ls = Function.prototype, ai = Object.prototype, Mi = ce["__core-js_shared__"], _i = ls.toString, jt = ai.hasOwnProperty, ki = function() {
    var M = /[^.]+$/.exec(Mi && Mi.keys && Mi.keys.IE_PROTO || "");
    return M ? "Symbol(src)_1." + M : "";
  }(), Hi = ai.toString, Hr = RegExp(
    "^" + _i.call(jt).replace(ne, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
  ), cs = Ge ? ce.Buffer : void 0, Cn = ce.Symbol, Hs = ce.Uint8Array, In = ai.propertyIsEnumerable, gi = Ut.splice, li = Cn ? Cn.toStringTag : void 0, En = Object.getOwnPropertySymbols, Mn = cs ? cs.isBuffer : void 0, Fi = st(Object.keys, Object), $i = q(ce, "DataView"), en = q(ce, "Map"), hs = q(ce, "Promise"), ds = q(ce, "Set"), kn = q(ce, "WeakMap"), Ni = q(Object, "create"), Fs = qt($i), xi = qt(en), xn = qt(hs), Fr = qt(ds), Nr = qt(kn), us = Cn ? Cn.prototype : void 0, tn = us ? us.valueOf : void 0;
  function Et(M) {
    var B = -1, K = M == null ? 0 : M.length;
    for (this.clear(); ++B < K; ) {
      var re = M[B];
      this.set(re[0], re[1]);
    }
  }
  function Ns() {
    this.__data__ = Ni ? Ni(null) : {}, this.size = 0;
  }
  function Gr(M) {
    var B = this.has(M) && delete this.__data__[M];
    return this.size -= B ? 1 : 0, B;
  }
  function Gs(M) {
    var B = this.__data__;
    if (Ni) {
      var K = B[M];
      return K === i ? void 0 : K;
    }
    return jt.call(B, M) ? B[M] : void 0;
  }
  function Ws(M) {
    var B = this.__data__;
    return Ni ? B[M] !== void 0 : jt.call(B, M);
  }
  function Qs(M, B) {
    var K = this.__data__;
    return this.size += this.has(M) ? 0 : 1, K[M] = Ni && B === void 0 ? i : B, this;
  }
  Et.prototype.clear = Ns, Et.prototype.delete = Gr, Et.prototype.get = Gs, Et.prototype.has = Ws, Et.prototype.set = Qs;
  function Mt(M) {
    var B = -1, K = M == null ? 0 : M.length;
    for (this.clear(); ++B < K; ) {
      var re = M[B];
      this.set(re[0], re[1]);
    }
  }
  function fs() {
    this.__data__ = [], this.size = 0;
  }
  function Di(M) {
    var B = this.__data__, K = Wi(B, M);
    if (K < 0)
      return !1;
    var re = B.length - 1;
    return K == re ? B.pop() : gi.call(B, K, 1), --this.size, !0;
  }
  function nn(M) {
    var B = this.__data__, K = Wi(B, M);
    return K < 0 ? void 0 : B[K][1];
  }
  function sn(M) {
    return Wi(this.__data__, M) > -1;
  }
  function Dn(M, B) {
    var K = this.__data__, re = Wi(K, M);
    return re < 0 ? (++this.size, K.push([M, B])) : K[re][1] = B, this;
  }
  Mt.prototype.clear = fs, Mt.prototype.delete = Di, Mt.prototype.get = nn, Mt.prototype.has = sn, Mt.prototype.set = Dn;
  function Tt(M) {
    var B = -1, K = M == null ? 0 : M.length;
    for (this.clear(); ++B < K; ) {
      var re = M[B];
      this.set(re[0], re[1]);
    }
  }
  function Wr() {
    this.size = 0, this.__data__ = {
      hash: new Et(),
      map: new (en || Mt)(),
      string: new Et()
    };
  }
  function Qr(M) {
    var B = H(this, M).delete(M);
    return this.size -= B ? 1 : 0, B;
  }
  function Sn(M) {
    return H(this, M).get(M);
  }
  function Ht(M) {
    return H(this, M).has(M);
  }
  function Gi(M, B) {
    var K = H(this, M), re = K.size;
    return K.set(M, B), this.size += K.size == re ? 0 : 1, this;
  }
  Tt.prototype.clear = Wr, Tt.prototype.delete = Qr, Tt.prototype.get = Sn, Tt.prototype.has = Ht, Tt.prototype.set = Gi;
  function Xt(M) {
    var B = -1, K = M == null ? 0 : M.length;
    for (this.__data__ = new Tt(); ++B < K; )
      this.add(M[B]);
  }
  function ei(M) {
    return this.__data__.set(M, i), this;
  }
  function vi(M) {
    return this.__data__.has(M);
  }
  Xt.prototype.add = Xt.prototype.push = ei, Xt.prototype.has = vi;
  function yt(M) {
    var B = this.__data__ = new Mt(M);
    this.size = B.size;
  }
  function Yt() {
    this.__data__ = new Mt(), this.size = 0;
  }
  function Us(M) {
    var B = this.__data__, K = B.delete(M);
    return this.size = B.size, K;
  }
  function Xs(M) {
    return this.__data__.get(M);
  }
  function Tn(M) {
    return this.__data__.has(M);
  }
  function Zt(M, B) {
    var K = this.__data__;
    if (K instanceof Mt) {
      var re = K.__data__;
      if (!en || re.length < e - 1)
        return re.push([M, B]), this.size = ++K.size, this;
      K = this.__data__ = new Tt(re);
    }
    return K.set(M, B), this.size = K.size, this;
  }
  yt.prototype.clear = Yt, yt.prototype.delete = Us, yt.prototype.get = Xs, yt.prototype.has = Tn, yt.prototype.set = Zt;
  function Ln(M, B) {
    var K = Zs(M), re = !K && Yo(M), We = !K && !re && Js(M), Re = !K && !re && !We && qo(M), Xe = K || re || We || Re, Ye = Xe ? nt(M.length, String) : [], Ct = Ye.length;
    for (var et in M)
      (B || jt.call(M, et)) && !(Xe && // Safari 9 has enumerable `arguments.length` in strict mode.
      (et == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
      We && (et == "offset" || et == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
      Re && (et == "buffer" || et == "byteLength" || et == "byteOffset") || // Skip index properties.
      Ue(et, Ct))) && Ye.push(et);
    return Ye;
  }
  function Wi(M, B) {
    for (var K = M.length; K--; )
      if (Xo(M[K][0], B))
        return K;
    return -1;
  }
  function rn(M, B, K) {
    var re = B(M);
    return Zs(M) ? re : Se(re, K(M));
  }
  function Si(M) {
    return M == null ? M === void 0 ? O : b : li && li in Object(M) ? te(M) : Jt(M);
  }
  function zn(M) {
    return Qi(M) && Si(M) == a;
  }
  function on(M, B, K, re, We) {
    return M === B ? !0 : M == null || B == null || !Qi(M) && !Qi(B) ? M !== M && B !== B : ci(M, B, K, re, on, We);
  }
  function ci(M, B, K, re, We, Re) {
    var Xe = Zs(M), Ye = Zs(B), Ct = Xe ? l : xe(M), et = Ye ? l : xe(B);
    Ct = Ct == a ? w : Ct, et = et == a ? w : et;
    var Ft = Ct == w, ti = et == w, xt = Ct == et;
    if (xt && Js(M)) {
      if (!Js(B))
        return !1;
      Xe = !0, Ft = !1;
    }
    if (xt && !Ft)
      return Re || (Re = new yt()), Xe || qo(M) ? On(M, B, K, re, We, Re) : Xr(M, B, Ct, K, re, We, Re);
    if (!(K & s)) {
      var Nt = Ft && jt.call(M, "__wrapped__"), Rt = ti && jt.call(B, "__wrapped__");
      if (Nt || Rt) {
        var jn = Nt ? M.value() : M, an = Rt ? B.value() : B;
        return Re || (Re = new yt()), We(jn, an, K, re, Re);
      }
    }
    return xt ? (Re || (Re = new yt()), Yr(M, B, K, re, We, Re)) : !1;
  }
  function Ur(M) {
    if (!Jo(M) || wt(M))
      return !1;
    var B = Zo(M) ? Hr : he;
    return B.test(qt(M));
  }
  function Ys(M) {
    return Qi(M) && Jr(M.length) && !!we[Si(M)];
  }
  function ps(M) {
    if (!kt(M))
      return Fi(M);
    var B = [];
    for (var K in Object(M))
      jt.call(M, K) && K != "constructor" && B.push(K);
    return B;
  }
  function On(M, B, K, re, We, Re) {
    var Xe = K & s, Ye = M.length, Ct = B.length;
    if (Ye != Ct && !(Xe && Ct > Ye))
      return !1;
    var et = Re.get(M);
    if (et && Re.get(B))
      return et == B;
    var Ft = -1, ti = !0, xt = K & r ? new Xt() : void 0;
    for (Re.set(M, B), Re.set(B, M); ++Ft < Ye; ) {
      var Nt = M[Ft], Rt = B[Ft];
      if (re)
        var jn = Xe ? re(Rt, Nt, Ft, B, M, Re) : re(Nt, Rt, Ft, M, B, Re);
      if (jn !== void 0) {
        if (jn)
          continue;
        ti = !1;
        break;
      }
      if (xt) {
        if (!ze(B, function(an, ms) {
          if (!ht(xt, ms) && (Nt === an || We(Nt, an, K, re, Re)))
            return xt.push(ms);
        })) {
          ti = !1;
          break;
        }
      } else if (!(Nt === Rt || We(Nt, Rt, K, re, Re))) {
        ti = !1;
        break;
      }
    }
    return Re.delete(M), Re.delete(B), ti;
  }
  function Xr(M, B, K, re, We, Re, Xe) {
    switch (K) {
      case I:
        if (M.byteLength != B.byteLength || M.byteOffset != B.byteOffset)
          return !1;
        M = M.buffer, B = B.buffer;
      case C:
        return !(M.byteLength != B.byteLength || !Re(new Hs(M), new Hs(B)));
      case h:
      case d:
      case v:
        return Xo(+M, +B);
      case f:
        return M.name == B.name && M.message == B.message;
      case T:
      case V:
        return M == B + "";
      case m:
        var Ye = $e;
      case S:
        var Ct = re & s;
        if (Ye || (Ye = at), M.size != B.size && !Ct)
          return !1;
        var et = Xe.get(M);
        if (et)
          return et == B;
        re |= r, Xe.set(M, B);
        var Ft = On(Ye(M), Ye(B), re, We, Re, Xe);
        return Xe.delete(M), Ft;
      case z:
        if (tn)
          return tn.call(M) == tn.call(B);
    }
    return !1;
  }
  function Yr(M, B, K, re, We, Re) {
    var Xe = K & s, Ye = j(M), Ct = Ye.length, et = j(B), Ft = et.length;
    if (Ct != Ft && !Xe)
      return !1;
    for (var ti = Ct; ti--; ) {
      var xt = Ye[ti];
      if (!(Xe ? xt in B : jt.call(B, xt)))
        return !1;
    }
    var Nt = Re.get(M);
    if (Nt && Re.get(B))
      return Nt == B;
    var Rt = !0;
    Re.set(M, B), Re.set(B, M);
    for (var jn = Xe; ++ti < Ct; ) {
      xt = Ye[ti];
      var an = M[xt], ms = B[xt];
      if (re)
        var wd = Xe ? re(ms, an, xt, B, M, Re) : re(an, ms, xt, M, B, Re);
      if (!(wd === void 0 ? an === ms || We(an, ms, K, re, Re) : wd)) {
        Rt = !1;
        break;
      }
      jn || (jn = xt == "constructor");
    }
    if (Rt && !jn) {
      var Ko = M.constructor, $o = B.constructor;
      Ko != $o && "constructor" in M && "constructor" in B && !(typeof Ko == "function" && Ko instanceof Ko && typeof $o == "function" && $o instanceof $o) && (Rt = !1);
    }
    return Re.delete(M), Re.delete(B), Rt;
  }
  function j(M) {
    return rn(M, qr, pe);
  }
  function H(M, B) {
    var K = M.__data__;
    return At(B) ? K[typeof B == "string" ? "string" : "hash"] : K.map;
  }
  function q(M, B) {
    var K = Ke(M, B);
    return Ur(K) ? K : void 0;
  }
  function te(M) {
    var B = jt.call(M, li), K = M[li];
    try {
      M[li] = void 0;
      var re = !0;
    } catch (Re) {
    }
    var We = Hi.call(M);
    return re && (B ? M[li] = K : delete M[li]), We;
  }
  var pe = En ? function(M) {
    return M == null ? [] : (M = Object(M), ue(En(M), function(B) {
      return In.call(M, B);
    }));
  } : Sl, xe = Si;
  ($i && xe(new $i(new ArrayBuffer(1))) != I || en && xe(new en()) != m || hs && xe(hs.resolve()) != x || ds && xe(new ds()) != S || kn && xe(new kn()) != A) && (xe = function(M) {
    var B = Si(M), K = B == w ? M.constructor : void 0, re = K ? qt(K) : "";
    if (re)
      switch (re) {
        case Fs:
          return I;
        case xi:
          return m;
        case xn:
          return x;
        case Fr:
          return S;
        case Nr:
          return A;
      }
    return B;
  });
  function Ue(M, B) {
    return B = B == null ? o : B, !!B && (typeof M == "number" || Le.test(M)) && M > -1 && M % 1 == 0 && M < B;
  }
  function At(M) {
    var B = typeof M;
    return B == "string" || B == "number" || B == "symbol" || B == "boolean" ? M !== "__proto__" : M === null;
  }
  function wt(M) {
    return !!ki && ki in M;
  }
  function kt(M) {
    var B = M && M.constructor, K = typeof B == "function" && B.prototype || ai;
    return M === K;
  }
  function Jt(M) {
    return Hi.call(M);
  }
  function qt(M) {
    if (M != null) {
      try {
        return _i.call(M);
      } catch (B) {
      }
      try {
        return M + "";
      } catch (B) {
      }
    }
    return "";
  }
  function Xo(M, B) {
    return M === B || M !== M && B !== B;
  }
  var Yo = zn(function() {
    return arguments;
  }()) ? zn : function(M) {
    return Qi(M) && jt.call(M, "callee") && !In.call(M, "callee");
  }, Zs = Array.isArray;
  function Zr(M) {
    return M != null && Jr(M.length) && !Zo(M);
  }
  var Js = Mn || Tl;
  function Dl(M, B) {
    return on(M, B);
  }
  function Zo(M) {
    if (!Jo(M))
      return !1;
    var B = Si(M);
    return B == g || B == p || B == c || B == k;
  }
  function Jr(M) {
    return typeof M == "number" && M > -1 && M % 1 == 0 && M <= o;
  }
  function Jo(M) {
    var B = typeof M;
    return M != null && (B == "object" || B == "function");
  }
  function Qi(M) {
    return M != null && typeof M == "object";
  }
  var qo = Ne ? it(Ne) : Ys;
  function qr(M) {
    return Zr(M) ? Ln(M) : ps(M);
  }
  function Sl() {
    return [];
  }
  function Tl() {
    return !1;
  }
  n.exports = Dl;
})(ZE, il);
const JE = il, qE = (n, t) => JE(n, t), KE = (n) => Object.keys(n || {}), $E = (n, t) => {
  const e = {};
  return n.forEach((i) => {
    e[i] = t[i];
  }), e;
}, e9 = () => {
  const n = {}, t = (e, i) => {
    const { watcherName: s, fn: r } = e, { prop: o, value: a } = i;
    n[s] || (n[s] = {
      deps: {},
      fn: r
    }), n[s].deps[o] = a;
  };
  return {
    subscribers: n,
    subscribe(e, i) {
      e && t(e, i);
    },
    notify(e, i) {
      Object.entries(n).forEach(([s, { deps: r, fn: o }]) => {
        const a = KE(r);
        if (a.includes(i)) {
          const l = $E(a, e);
          qE(r, l) || (n[s].deps = l, o());
        }
      });
    }
  };
}, t9 = () => {
  let n = null;
  return {
    targetWatcher(t, e) {
      n = {
        watcherName: t,
        fn: e
      }, n.fn(), n = null;
    },
    getTarget() {
      return n;
    }
  };
};
function i9(n, t) {
  const e = wa(n, "data", {}), i = wa(n, "watch", {}), s = wa(n, "methods", {}), r = wa(t, "onChange", () => {
  }), { subscribe: o, notify: a, subscribers: l } = e9(), { targetWatcher: c, getTarget: h } = t9();
  let d;
  const f = {}, g = () => ({
    data: d,
    methods: f
  });
  let p = !1;
  const m = (b) => (...w) => {
    p = !0;
    const x = b(...w);
    return p = !1, x;
  };
  Object.entries(s).forEach(([b, w]) => {
    f[b] = m(
      (...x) => w(g(), ...x)
    ), Object.defineProperty(f[b], "name", { value: b });
  }), d = new Proxy(YE(e), {
    get(b, w) {
      return h() && !p && o(h(), { prop: w, value: b[w] }), Reflect.get(...arguments);
    },
    set(b, w, x) {
      return b[w] === x || (Reflect.set(...arguments), h() || (r && r(w, x), a(d, w))), !0;
    }
  }), Object.entries(i).forEach(([b, w]) => {
    c(b, () => {
      w(g());
    });
  });
  const v = [d, f];
  return v._internal = {
    _getSubscribers() {
      return l;
    }
  }, v;
}
function n9({
  pageIndex: n,
  particlesToShow: t,
  particlesToScroll: e,
  particlesCount: i
}) {
  const s = n === 0 ? 0 : t - e, r = n * t - n * s, o = r + Math.max(t, e) - 1, a = [];
  for (let l = r; l <= Math.min(i - 1, o); l++)
    a.push(l);
  return a;
}
function s9({
  infinite: n,
  pageIndex: t,
  pagesCount: e,
  particlesCount: i,
  particlesToShow: s,
  particlesToScroll: r
}) {
  const o = vr(0, t, e - 1);
  let a = o - 1, l = o + 1;
  a = n ? a < 0 ? e - 1 : a : Math.max(0, a), l = n ? l > e - 1 ? 0 : l : Math.min(e - 1, l);
  const c = [.../* @__PURE__ */ new Set([
    a,
    o,
    l,
    // because of these values outputs for infinite/non-infinites are the same
    0,
    // needed to clone first page particles
    e - 1
    // needed to clone last page particles
  ])].sort((d, f) => d - f), h = c.flatMap(
    (d) => n9({
      pageIndex: d,
      particlesToShow: s,
      particlesToScroll: r,
      particlesCount: i
    })
  );
  return {
    pageIndexes: c,
    particleIndexes: [...new Set(h)].sort((d, f) => d - f)
  };
}
const r9 = (n, t) => (n(), setInterval(n, t)), o9 = 35, Dp = 1;
class a9 {
  constructor({ onProgressValueChange: t }) {
    this._onProgressValueChange = t, this._autoplayDuration, this._onProgressValueChange, this._interval, this._paused = !1;
  }
  setAutoplayDuration(t) {
    this._autoplayDuration = t;
  }
  start(t) {
    return new Promise((e) => {
      this.reset();
      const i = Math.min(o9, Math.max(this._autoplayDuration, 1));
      let s = -i;
      this._interval = r9(() => $(this, null, function* () {
        if (this._paused)
          return;
        s += i;
        const r = s / this._autoplayDuration;
        this._onProgressValueChange(r), r > Dp && (this.reset(), yield t(), e());
      }), i);
    });
  }
  pause() {
    this._paused = !0;
  }
  resume() {
    this._paused = !1;
  }
  reset() {
    clearInterval(this._interval), this._onProgressValueChange(Dp);
  }
}
function l9(n) {
  const t = new a9({
    onProgressValueChange: (o) => {
      n("progressValue", 1 - o);
    }
  }), e = i9(
    {
      data: {
        particlesCountWithoutClones: 0,
        particlesToShow: 1,
        // normalized
        particlesToShowInit: 1,
        // initial value
        particlesToScroll: 1,
        // normalized
        particlesToScrollInit: 1,
        // initial value
        particlesCount: 1,
        currentParticleIndex: 1,
        infinite: !1,
        autoplayDuration: 1e3,
        clonesCountHead: 0,
        clonesCountTail: 0,
        clonesCountTotal: 0,
        partialPageSize: 1,
        currentPageIndex: 1,
        pagesCount: 1,
        pauseOnFocus: !1,
        focused: !1,
        autoplay: !1,
        autoplayDirection: "next",
        disabled: !1,
        // disable page change while animation is in progress
        durationMsInit: 1e3,
        durationMs: 1e3,
        offset: 0,
        particleWidth: 0,
        loaded: []
      },
      watch: {
        setLoaded({ data: o }) {
          o.loaded = s9({
            infinite: o.infinite,
            pageIndex: o.currentPageIndex,
            pagesCount: o.pagesCount,
            particlesCount: o.particlesCountWithoutClones,
            particlesToShow: o.particlesToShow,
            particlesToScroll: o.particlesToScroll
          }).particleIndexes;
        },
        setCurrentPageIndex({ data: o }) {
          o.currentPageIndex = F8({
            currentParticleIndex: o.currentParticleIndex,
            particlesCount: o.particlesCount,
            clonesCountHead: o.clonesCountHead,
            clonesCountTotal: o.clonesCountTotal,
            infinite: o.infinite,
            particlesToScroll: o.particlesToScroll
          });
        },
        setPartialPageSize({ data: o }) {
          o.partialPageSize = M1({
            particlesToScroll: o.particlesToScroll,
            particlesToShow: o.particlesToShow,
            particlesCountWithoutClones: o.particlesCountWithoutClones
          });
        },
        setClonesCount({ data: o }) {
          const { head: a, tail: l } = J8({
            infinite: o.infinite,
            particlesToShow: o.particlesToShow,
            partialPageSize: o.partialPageSize
          });
          o.clonesCountHead = a, o.clonesCountTail = l, o.clonesCountTotal = a + l;
        },
        setProgressManagerAutoplayDuration({ data: o }) {
          t.setAutoplayDuration(o.autoplayDuration);
        },
        toggleProgressManager({ data: { pauseOnFocus: o, focused: a } }) {
          o && (a ? t.pause() : t.resume());
        },
        initDuration({ data: o }) {
          o.durationMs = o.durationMsInit;
        },
        applyAutoplay({ data: o, methods: { _applyAutoplayIfNeeded: a } }) {
          o.autoplay && a(o.autoplay);
        },
        setPagesCount({ data: o }) {
          o.pagesCount = G8({
            infinite: o.infinite,
            particlesCountWithoutClones: o.particlesCountWithoutClones,
            particlesToScroll: o.particlesToScroll,
            particlesToShow: o.particlesToShow
          });
        },
        setParticlesToShow({ data: o }) {
          o.particlesToShow = vr(
            1,
            o.particlesToShowInit,
            o.particlesCountWithoutClones
          );
        },
        setParticlesToScroll({ data: o }) {
          o.particlesToScroll = vr(
            1,
            o.particlesToScrollInit,
            o.particlesCountWithoutClones
          );
        }
      },
      methods: {
        _prev({ data: o }) {
          o.currentParticleIndex = nc({
            infinite: o.infinite,
            pageIndex: o.currentPageIndex - 1,
            clonesCountHead: o.clonesCountHead,
            clonesCountTail: o.clonesCountTail,
            particlesToScroll: o.particlesToScroll,
            particlesCount: o.particlesCount,
            particlesToShow: o.particlesToShow
          });
        },
        _next({ data: o }) {
          o.currentParticleIndex = nc({
            infinite: o.infinite,
            pageIndex: o.currentPageIndex + 1,
            clonesCountHead: o.clonesCountHead,
            clonesCountTail: o.clonesCountTail,
            particlesToScroll: o.particlesToScroll,
            particlesCount: o.particlesCount,
            particlesToShow: o.particlesToShow
          });
        },
        _moveToParticle({ data: o }, a) {
          o.currentParticleIndex = vr(
            0,
            a,
            o.particlesCount - 1
          );
        },
        toggleFocused({ data: o }) {
          o.focused = !o.focused;
        },
        _applyAutoplayIfNeeded(l) {
          return $(this, arguments, function* ({ data: o, methods: a }) {
            if (!o.infinite && (o.autoplayDirection === is && o.currentParticleIndex === o.particlesCount - 1 || o.autoplayDirection === Lr && o.currentParticleIndex === 0)) {
              t.reset();
              return;
            }
            if (o.autoplay) {
              const c = () => Zc({
                [is]: () => $(this, null, function* () {
                  return a.showNextPage();
                }),
                [Lr]: () => $(this, null, function* () {
                  return a.showPrevPage();
                })
              })(o.autoplayDirection);
              yield t.start(c);
            }
          });
        },
        // makes delayed jump to 1st or last element
        _jumpIfNeeded(l) {
          return $(this, arguments, function* ({ data: o, methods: a }) {
            let c = !1;
            return o.infinite && (o.currentParticleIndex === 0 ? (yield a.showParticle(
              o.particlesCount - o.clonesCountTotal,
              {
                animated: !1
              }
            ), c = !0) : o.currentParticleIndex === o.particlesCount - o.clonesCountTail && (yield a.showParticle(o.clonesCountHead, {
              animated: !1
            }), c = !0)), c;
          });
        },
        changePage(h, d, f) {
          return $(this, arguments, function* ({ data: o, methods: a }, l, c) {
            if (t.reset(), o.disabled)
              return;
            o.disabled = !0, l(), yield a.offsetPage({ animated: Ao(c, "animated", !0) }), o.disabled = !1, !(yield a._jumpIfNeeded()) && a._applyAutoplayIfNeeded();
          });
        },
        showNextPage(c, h) {
          return $(this, arguments, function* ({ data: o, methods: a }, l) {
            o.disabled || (yield a.changePage(a._next, l));
          });
        },
        showPrevPage(c, h) {
          return $(this, arguments, function* ({ data: o, methods: a }, l) {
            o.disabled || (yield a.changePage(a._prev, l));
          });
        },
        showParticle(c, h, d) {
          return $(this, arguments, function* ({ methods: o }, a, l) {
            yield o.changePage(
              () => o._moveToParticle(a),
              l
            );
          });
        },
        _getParticleIndexByPageIndex({ data: o }, a) {
          return nc({
            infinite: o.infinite,
            pageIndex: a,
            clonesCountHead: o.clonesCountHead,
            clonesCountTail: o.clonesCountTail,
            particlesToScroll: o.particlesToScroll,
            particlesCount: o.particlesCount,
            particlesToShow: o.particlesToShow
          });
        },
        showPage(c, h, d) {
          return $(this, arguments, function* ({ methods: o }, a, l) {
            const f = o._getParticleIndexByPageIndex(a);
            yield o.showParticle(f, l);
          });
        },
        offsetPage({ data: o }, a) {
          const l = Ao(a, "animated", !0);
          return new Promise((c) => {
            o.durationMs = l ? o.durationMsInit : 0, o.offset = -o.currentParticleIndex * o.particleWidth, setTimeout(() => {
              c();
            }, o.durationMs);
          });
        }
      }
    },
    {
      onChange: n
    }
  ), [i, s] = e;
  return [{ data: i, progressManager: t }, s, e._internal];
}
function c9(n) {
  De(n, "svelte-sme1z4", ":root{--sc-color-rgb-light-50p:rgba(93, 93, 93, 0.5);--sc-color-rgb-light:#5d5d5d;--sc-color-hex-dark-50p:rgba(30, 30, 30, 0.5);--sc-color-hex-dark:#1e1e1e}.sc-carousel__carousel-container.svelte-sme1z4{display:flex;width:100%;flex-direction:column;align-items:center}.sc-carousel__content-container.svelte-sme1z4{position:relative;display:flex;width:100%}.sc-carousel__pages-window.svelte-sme1z4{flex:1;display:flex;overflow:hidden;box-sizing:border-box;position:relative}.sc-carousel__pages-container.svelte-sme1z4{width:100%;display:flex;transition-property:transform}.sc-carousel__arrow-container.svelte-sme1z4{padding:5px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.sc-carousel-progress__container.svelte-sme1z4{width:100%;height:5px;background-color:var(--sc-color-rgb-light-50p);position:absolute;bottom:0}.sc-carousel-button{all:unset;cursor:pointer}.sc-carousel-button:focus{outline:5px auto}");
}
const h9 = (n) => ({
  currentPageIndex: n[0] & /*currentPageIndex*/
  32,
  pagesCount: n[0] & /*pagesCount*/
  1024,
  loaded: n[0] & /*loaded*/
  64
}), Sp = (n) => ({
  currentPageIndex: (
    /*currentPageIndex*/
    n[5]
  ),
  pagesCount: (
    /*pagesCount*/
    n[10]
  ),
  showPage: (
    /*handlePageChange*/
    n[15]
  ),
  loaded: (
    /*loaded*/
    n[6]
  )
}), d9 = (n) => ({
  loaded: n[0] & /*loaded*/
  64,
  currentPageIndex: n[0] & /*currentPageIndex*/
  32
}), Tp = (n) => ({
  showNextPage: (
    /*methods*/
    n[14].showNextPage
  ),
  loaded: (
    /*loaded*/
    n[6]
  ),
  currentPageIndex: (
    /*currentPageIndex*/
    n[5]
  )
}), u9 = (n) => ({
  loaded: n[0] & /*loaded*/
  64,
  currentPageIndex: n[0] & /*currentPageIndex*/
  32
}), Lp = (n) => ({
  loaded: (
    /*loaded*/
    n[6]
  ),
  currentPageIndex: (
    /*currentPageIndex*/
    n[5]
  )
}), f9 = (n) => ({
  loaded: n[0] & /*loaded*/
  64,
  currentPageIndex: n[0] & /*currentPageIndex*/
  32
}), zp = (n) => ({
  showPrevPage: (
    /*methods*/
    n[14].showPrevPage
  ),
  loaded: (
    /*loaded*/
    n[6]
  ),
  currentPageIndex: (
    /*currentPageIndex*/
    n[5]
  )
});
function Op(n) {
  let t;
  const e = (
    /*#slots*/
    n[37].prev
  ), i = Zn(
    e,
    n,
    /*$$scope*/
    n[36],
    zp
  ), s = i || p9(n);
  return {
    c() {
      s && s.c();
    },
    m(r, o) {
      s && s.m(r, o), t = !0;
    },
    p(r, o) {
      i ? i.p && (!t || o[0] & /*loaded, currentPageIndex*/
      96 | o[1] & /*$$scope*/
      32) && qn(
        i,
        e,
        r,
        /*$$scope*/
        r[36],
        t ? Jn(
          e,
          /*$$scope*/
          r[36],
          o,
          f9
        ) : Kn(
          /*$$scope*/
          r[36]
        ),
        zp
      ) : s && s.p && (!t || o[0] & /*infinite, currentPageIndex*/
      36) && s.p(r, t ? o : [-1, -1]);
    },
    i(r) {
      t || (F(s, r), t = !0);
    },
    o(r) {
      Y(s, r), t = !1;
    },
    d(r) {
      s && s.d(r);
    }
  };
}
function p9(n) {
  let t, e, i;
  return e = new I1({
    props: {
      direction: "prev",
      disabled: !/*infinite*/
      n[2] && /*currentPageIndex*/
      n[5] === 0
    }
  }), e.$on(
    "click",
    /*showPrevPage*/
    n[23]
  ), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "sc-carousel__arrow-container svelte-sme1z4");
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), i = !0;
    },
    p(s, r) {
      const o = {};
      r[0] & /*infinite, currentPageIndex*/
      36 && (o.disabled = !/*infinite*/
      s[2] && /*currentPageIndex*/
      s[5] === 0), e.$set(o);
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e);
    }
  };
}
function jp(n) {
  let t, e, i;
  return e = new y8({
    props: { value: (
      /*progressValue*/
      n[7]
    ) }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "sc-carousel-progress__container svelte-sme1z4");
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), i = !0;
    },
    p(s, r) {
      const o = {};
      r[0] & /*progressValue*/
      128 && (o.value = /*progressValue*/
      s[7]), e.$set(o);
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e);
    }
  };
}
function Rp(n) {
  let t;
  const e = (
    /*#slots*/
    n[37].next
  ), i = Zn(
    e,
    n,
    /*$$scope*/
    n[36],
    Tp
  ), s = i || m9(n);
  return {
    c() {
      s && s.c();
    },
    m(r, o) {
      s && s.m(r, o), t = !0;
    },
    p(r, o) {
      i ? i.p && (!t || o[0] & /*loaded, currentPageIndex*/
      96 | o[1] & /*$$scope*/
      32) && qn(
        i,
        e,
        r,
        /*$$scope*/
        r[36],
        t ? Jn(
          e,
          /*$$scope*/
          r[36],
          o,
          d9
        ) : Kn(
          /*$$scope*/
          r[36]
        ),
        Tp
      ) : s && s.p && (!t || o[0] & /*infinite, currentPageIndex, pagesCount*/
      1060) && s.p(r, t ? o : [-1, -1]);
    },
    i(r) {
      t || (F(s, r), t = !0);
    },
    o(r) {
      Y(s, r), t = !1;
    },
    d(r) {
      s && s.d(r);
    }
  };
}
function m9(n) {
  let t, e, i;
  return e = new I1({
    props: {
      direction: "next",
      disabled: !/*infinite*/
      n[2] && /*currentPageIndex*/
      n[5] === /*pagesCount*/
      n[10] - 1
    }
  }), e.$on(
    "click",
    /*methods*/
    n[14].showNextPage
  ), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "sc-carousel__arrow-container svelte-sme1z4");
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), i = !0;
    },
    p(s, r) {
      const o = {};
      r[0] & /*infinite, currentPageIndex, pagesCount*/
      1060 && (o.disabled = !/*infinite*/
      s[2] && /*currentPageIndex*/
      s[5] === /*pagesCount*/
      s[10] - 1), e.$set(o);
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e);
    }
  };
}
function Bp(n) {
  let t;
  const e = (
    /*#slots*/
    n[37].dots
  ), i = Zn(
    e,
    n,
    /*$$scope*/
    n[36],
    Sp
  ), s = i || g9(n);
  return {
    c() {
      s && s.c();
    },
    m(r, o) {
      s && s.m(r, o), t = !0;
    },
    p(r, o) {
      i ? i.p && (!t || o[0] & /*currentPageIndex, pagesCount, loaded*/
      1120 | o[1] & /*$$scope*/
      32) && qn(
        i,
        e,
        r,
        /*$$scope*/
        r[36],
        t ? Jn(
          e,
          /*$$scope*/
          r[36],
          o,
          h9
        ) : Kn(
          /*$$scope*/
          r[36]
        ),
        Sp
      ) : s && s.p && (!t || o[0] & /*pagesCount, currentPageIndex*/
      1056) && s.p(r, t ? o : [-1, -1]);
    },
    i(r) {
      t || (F(s, r), t = !0);
    },
    o(r) {
      Y(s, r), t = !1;
    },
    d(r) {
      s && s.d(r);
    }
  };
}
function g9(n) {
  let t, e;
  return t = new f8({
    props: {
      pagesCount: (
        /*pagesCount*/
        n[10]
      ),
      currentPageIndex: (
        /*currentPageIndex*/
        n[5]
      )
    }
  }), t.$on(
    "pageChange",
    /*pageChange_handler*/
    n[41]
  ), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s[0] & /*pagesCount*/
      1024 && (r.pagesCount = /*pagesCount*/
      i[10]), s[0] & /*currentPageIndex*/
      32 && (r.currentPageIndex = /*currentPageIndex*/
      i[5]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function v9(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f, g = (
    /*arrows*/
    n[1] && Op(n)
  );
  const p = (
    /*#slots*/
    n[37].default
  ), m = Zn(
    p,
    n,
    /*$$scope*/
    n[36],
    Lp
  );
  let v = (
    /*autoplayProgressVisible*/
    n[3] && jp(n)
  ), b = (
    /*arrows*/
    n[1] && Rp(n)
  ), w = (
    /*dots*/
    n[4] && Bp(n)
  );
  return {
    c() {
      t = W("div"), e = W("div"), g && g.c(), i = oe(), s = W("div"), r = W("div"), m && m.c(), a = oe(), v && v.c(), l = oe(), b && b.c(), c = oe(), w && w.c(), y(r, "class", "sc-carousel__pages-container svelte-sme1z4"), Q(r, "transform", "translateX(" + /*offset*/
      n[8] + "px)"), Q(
        r,
        "transition-duration",
        /*durationMs*/
        n[9] + "ms"
      ), Q(
        r,
        "transition-timing-function",
        /*timingFunction*/
        n[0]
      ), y(s, "class", "sc-carousel__pages-window svelte-sme1z4"), y(e, "class", "sc-carousel__content-container svelte-sme1z4"), y(t, "class", "sc-carousel__carousel-container svelte-sme1z4");
    },
    m(x, k) {
      X(x, t, k), R(t, e), g && g.m(e, null), R(e, i), R(e, s), R(s, r), m && m.m(r, null), n[39](r), R(s, a), v && v.m(s, null), n[40](s), R(e, l), b && b.m(e, null), R(t, c), w && w.m(t, null), h = !0, d || (f = [
        Pi(o = D8.call(null, r, {
          thresholdProvider: (
            /*swipeable_function*/
            n[38]
          )
        })),
        Oe(
          r,
          "swipeStart",
          /*handleSwipeStart*/
          n[16]
        ),
        Oe(
          r,
          "swipeMove",
          /*handleSwipeMove*/
          n[18]
        ),
        Oe(
          r,
          "swipeEnd",
          /*handleSwipeEnd*/
          n[19]
        ),
        Oe(
          r,
          "swipeFailed",
          /*handleSwipeFailed*/
          n[20]
        ),
        Oe(
          r,
          "swipeThresholdReached",
          /*handleSwipeThresholdReached*/
          n[17]
        ),
        Pi(z8.call(null, s)),
        Oe(
          s,
          "hovered",
          /*handleHovered*/
          n[21]
        ),
        Pi(V8.call(null, s)),
        Oe(
          s,
          "tapped",
          /*handleTapped*/
          n[22]
        )
      ], d = !0);
    },
    p(x, k) {
      /*arrows*/
      x[1] ? g ? (g.p(x, k), k[0] & /*arrows*/
      2 && F(g, 1)) : (g = Op(x), g.c(), F(g, 1), g.m(e, i)) : g && (Me(), Y(g, 1, 1, () => {
        g = null;
      }), ke()), m && m.p && (!h || k[0] & /*loaded, currentPageIndex*/
      96 | k[1] & /*$$scope*/
      32) && qn(
        m,
        p,
        x,
        /*$$scope*/
        x[36],
        h ? Jn(
          p,
          /*$$scope*/
          x[36],
          k,
          u9
        ) : Kn(
          /*$$scope*/
          x[36]
        ),
        Lp
      ), (!h || k[0] & /*offset*/
      256) && Q(r, "transform", "translateX(" + /*offset*/
      x[8] + "px)"), (!h || k[0] & /*durationMs*/
      512) && Q(
        r,
        "transition-duration",
        /*durationMs*/
        x[9] + "ms"
      ), (!h || k[0] & /*timingFunction*/
      1) && Q(
        r,
        "transition-timing-function",
        /*timingFunction*/
        x[0]
      ), o && Ri(o.update) && k[0] & /*pageWindowWidth*/
      2048 && o.update.call(null, {
        thresholdProvider: (
          /*swipeable_function*/
          x[38]
        )
      }), /*autoplayProgressVisible*/
      x[3] ? v ? (v.p(x, k), k[0] & /*autoplayProgressVisible*/
      8 && F(v, 1)) : (v = jp(x), v.c(), F(v, 1), v.m(s, null)) : v && (Me(), Y(v, 1, 1, () => {
        v = null;
      }), ke()), /*arrows*/
      x[1] ? b ? (b.p(x, k), k[0] & /*arrows*/
      2 && F(b, 1)) : (b = Rp(x), b.c(), F(b, 1), b.m(e, null)) : b && (Me(), Y(b, 1, 1, () => {
        b = null;
      }), ke()), /*dots*/
      x[4] ? w ? (w.p(x, k), k[0] & /*dots*/
      16 && F(w, 1)) : (w = Bp(x), w.c(), F(w, 1), w.m(t, null)) : w && (Me(), Y(w, 1, 1, () => {
        w = null;
      }), ke());
    },
    i(x) {
      h || (F(g), F(m, x), F(v), F(b), F(w), h = !0);
    },
    o(x) {
      Y(g), Y(m, x), Y(v), Y(b), Y(w), h = !1;
    },
    d(x) {
      x && U(t), g && g.d(), m && m.d(x), n[39](null), v && v.d(), n[40](null), b && b.d(), w && w.d(), d = !1, vt(f);
    }
  };
}
function A9(n, t, e) {
  let { $$slots: i = {}, $$scope: s } = t, r = [], o, a, l = 0, c = 0, h = 1;
  const [{ data: d, progressManager: f }, g, p] = l9((ue, Se) => {
    Zc({
      currentPageIndex: () => e(5, o = Se),
      progressValue: () => e(7, a = Se),
      offset: () => e(8, l = Se),
      durationMs: () => e(9, c = Se),
      pagesCount: () => e(10, h = Se),
      loaded: () => e(6, r = Se)
    })(ue);
  }), m = Rr();
  let { timingFunction: v = "ease-in-out" } = t, { arrows: b = !0 } = t, { infinite: w = !0 } = t, { initialPageIndex: x = 0 } = t, { duration: k = 500 } = t, { autoplay: T = !1 } = t, { autoplayDuration: S = 3e3 } = t, { autoplayDirection: V = is } = t, { pauseOnFocus: z = !1 } = t, { autoplayProgressVisible: O = !1 } = t, { dots: A = !0 } = t, { swiping: C = !0 } = t, { particlesToShow: I = 1 } = t, { particlesToScroll: E = 1 } = t;
  function D(ue, Se) {
    return $(this, null, function* () {
      const ze = Ao(Se, "animated", !0);
      if (typeof ue != "number")
        throw new Error("pageIndex should be a number");
      yield g.showPage(ue, { animated: ze });
    });
  }
  function L(ue) {
    return $(this, null, function* () {
      const Se = Ao(ue, "animated", !0);
      yield g.showPrevPage({ animated: Se });
    });
  }
  function N(ue) {
    return $(this, null, function* () {
      const Se = Ao(ue, "animated", !0);
      yield g.showNextPage({ animated: Se });
    });
  }
  let G = 0, Z, ee;
  const J = X8(({ width: ue }) => {
    e(11, G = ue), d.particleWidth = G / d.particlesToShow, U8({
      particlesContainerChildren: ee.children,
      particleWidth: d.particleWidth
    }), g.offsetPage({ animated: !1 });
  });
  function ie() {
    const { clonesToAppend: ue, clonesToPrepend: Se } = Y8({
      clonesCountHead: d.clonesCountHead,
      clonesCountTail: d.clonesCountTail,
      particlesContainerChildren: ee.children
    });
    Z8({
      particlesContainer: ee,
      clonesToAppend: ue,
      clonesToPrepend: Se
    });
  }
  Ot(() => {
    $(this, null, function* () {
      yield Jd(), ee && Z && (d.particlesCountWithoutClones = ee.children.length, yield Jd(), d.infinite && ie(), d.particlesCount = ee.children.length, g.showPage(x, { animated: !1 }), J.observe(Z));
    });
  }), oi(() => {
    J.disconnect(), f.reset();
  });
  function ne(ue) {
    return $(this, null, function* () {
      yield g.showPage(ue, { animated: !0 });
    });
  }
  function he() {
    C && (d.durationMs = 0);
  }
  function Le(ue) {
    return $(this, null, function* () {
      C && (yield Zc({
        [is]: g.showNextPage,
        [Lr]: g.showPrevPage
      })(ue.detail.direction));
    });
  }
  function we(ue) {
    C && (d.offset += ue.detail.dx);
  }
  function le() {
    C && g.showParticle(d.currentParticleIndex);
  }
  function ae() {
    return $(this, null, function* () {
      C && (yield g.offsetPage({ animated: !0 }));
    });
  }
  function ce(ue) {
    d.focused = ue.detail.value;
  }
  function Ee() {
    g.toggleFocused();
  }
  function Ae() {
    g.showPrevPage();
  }
  const Ge = () => G / 3;
  function Be(ue) {
    Ze[ue ? "unshift" : "push"](() => {
      ee = ue, e(13, ee);
    });
  }
  function Te(ue) {
    Ze[ue ? "unshift" : "push"](() => {
      Z = ue, e(12, Z);
    });
  }
  const Ne = (ue) => ne(ue.detail);
  return n.$$set = (ue) => {
    "timingFunction" in ue && e(0, v = ue.timingFunction), "arrows" in ue && e(1, b = ue.arrows), "infinite" in ue && e(2, w = ue.infinite), "initialPageIndex" in ue && e(24, x = ue.initialPageIndex), "duration" in ue && e(25, k = ue.duration), "autoplay" in ue && e(26, T = ue.autoplay), "autoplayDuration" in ue && e(27, S = ue.autoplayDuration), "autoplayDirection" in ue && e(28, V = ue.autoplayDirection), "pauseOnFocus" in ue && e(29, z = ue.pauseOnFocus), "autoplayProgressVisible" in ue && e(3, O = ue.autoplayProgressVisible), "dots" in ue && e(4, A = ue.dots), "swiping" in ue && e(30, C = ue.swiping), "particlesToShow" in ue && e(31, I = ue.particlesToShow), "particlesToScroll" in ue && e(32, E = ue.particlesToScroll), "$$scope" in ue && e(36, s = ue.$$scope);
  }, n.$$.update = () => {
    n.$$.dirty[0] & /*currentPageIndex*/
    32 && m("pageChange", o), n.$$.dirty[0] & /*infinite*/
    4 && (d.infinite = w), n.$$.dirty[0] & /*duration*/
    33554432 && (d.durationMsInit = k), n.$$.dirty[0] & /*autoplay*/
    67108864 && (d.autoplay = T), n.$$.dirty[0] & /*autoplayDuration*/
    134217728 && (d.autoplayDuration = S), n.$$.dirty[0] & /*autoplayDirection*/
    268435456 && (d.autoplayDirection = V), n.$$.dirty[0] & /*pauseOnFocus*/
    536870912 && (d.pauseOnFocus = z), n.$$.dirty[1] & /*particlesToShow*/
    1 && (d.particlesToShowInit = I), n.$$.dirty[1] & /*particlesToScroll*/
    2 && (d.particlesToScrollInit = E);
  }, [
    v,
    b,
    w,
    O,
    A,
    o,
    r,
    a,
    l,
    c,
    h,
    G,
    Z,
    ee,
    g,
    ne,
    he,
    Le,
    we,
    le,
    ae,
    ce,
    Ee,
    Ae,
    x,
    k,
    T,
    S,
    V,
    z,
    C,
    I,
    E,
    D,
    L,
    N,
    s,
    i,
    Ge,
    Be,
    Te,
    Ne
  ];
}
class b9 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      A9,
      v9,
      Pe,
      {
        timingFunction: 0,
        arrows: 1,
        infinite: 2,
        initialPageIndex: 24,
        duration: 25,
        autoplay: 26,
        autoplayDuration: 27,
        autoplayDirection: 28,
        pauseOnFocus: 29,
        autoplayProgressVisible: 3,
        dots: 4,
        swiping: 30,
        particlesToShow: 31,
        particlesToScroll: 32,
        goTo: 33,
        goToPrev: 34,
        goToNext: 35
      },
      c9,
      [-1, -1]
    );
  }
  get goTo() {
    return this.$$.ctx[33];
  }
  get goToPrev() {
    return this.$$.ctx[34];
  }
  get goToNext() {
    return this.$$.ctx[35];
  }
}
function y9(n) {
  De(n, "svelte-159ski6", ".media-item.svelte-159ski6.svelte-159ski6{position:relative;height:100%}.media-content.svelte-159ski6.svelte-159ski6{position:relative;pointer-events:auto;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:inherit;object-fit:inherit}.media-content.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none}.video-icon.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem;max-width:60%;max-height:60%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.video-play-button-container.svelte-159ski6.svelte-159ski6{display:none;position:absolute;width:100%;height:100%;top:0;left:0;transform:translate3d(0, 0, 0)}.video-play-button-container.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none;display:block}.video-icon.svelte-159ski6.svelte-159ski6{pointer-events:auto}.video-icon.large.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem}.video-icon.small.svelte-159ski6.svelte-159ski6{width:1.75rem;height:1.75rem}.video-icon.svelte-159ski6 .video-icon-img.svelte-159ski6{width:100%;height:100%;background-position:center center;background-size:contain;background-repeat:no-repeat}.video-icon.svelte-159ski6 .video-icon-img.canPlay.svelte-159ski6{cursor:pointer}");
}
function Vp(n) {
  let t;
  function e(r, o) {
    if (
      /*media*/
      r[2].type === "Image"
    )
      return P9;
    if (
      /*media*/
      r[2].type === "Video"
    )
      return w9;
  }
  let i = e(n), s = i && i(n);
  return {
    c() {
      t = W("div"), s && s.c(), y(t, "class", "media-item svelte-159ski6"), y(t, "draggable", "false");
    },
    m(r, o) {
      X(r, t, o), s && s.m(t, null);
    },
    p(r, o) {
      i === (i = e(r)) && s ? s.p(r, o) : (s && s.d(1), s = i && i(r), s && (s.c(), s.m(t, null)));
    },
    d(r) {
      r && U(t), s && s.d();
    }
  };
}
function w9(n) {
  let t, e, i, s, r, o;
  function a(h, d) {
    return (
      /*disableVideoIfHavePoster*/
      h[8] && /*media*/
      h[2].videoCoverUrl ? I9 : C9
    );
  }
  let l = a(n), c = l(n);
  return {
    c() {
      c.c(), t = oe(), e = W("div"), i = W("div"), s = W("div"), y(s, "class", "video-icon-img svelte-159ski6"), Q(s, "background-image", "url(" + /*func*/
      n[21]() + ")"), ye(
        s,
        "canPlay",
        /*canPlay*/
        n[5]
      ), y(i, "class", "video-icon svelte-159ski6"), ye(
        i,
        "large",
        /*playButtonSizeIfNeed*/
        n[4] === "large"
      ), ye(
        i,
        "small",
        /*playButtonSizeIfNeed*/
        n[4] === "small"
      ), y(e, "class", "video-play-button-container svelte-159ski6"), ye(
        e,
        "showPlayButton",
        /*showPlayButton*/
        n[11]
      );
    },
    m(h, d) {
      c.m(h, d), X(h, t, d), X(h, e, d), R(e, i), R(i, s), r || (o = Oe(
        s,
        "click",
        /*click_handler_1*/
        n[22]
      ), r = !0);
    },
    p(h, d) {
      l === (l = a(h)) && c ? c.p(h, d) : (c.d(1), c = l(h), c && (c.c(), c.m(t.parentNode, t))), d & /*playButtonIfNeed*/
      8 && Q(s, "background-image", "url(" + /*func*/
      h[21]() + ")"), d & /*canPlay*/
      32 && ye(
        s,
        "canPlay",
        /*canPlay*/
        h[5]
      ), d & /*playButtonSizeIfNeed*/
      16 && ye(
        i,
        "large",
        /*playButtonSizeIfNeed*/
        h[4] === "large"
      ), d & /*playButtonSizeIfNeed*/
      16 && ye(
        i,
        "small",
        /*playButtonSizeIfNeed*/
        h[4] === "small"
      ), d & /*showPlayButton*/
      2048 && ye(
        e,
        "showPlayButton",
        /*showPlayButton*/
        h[11]
      );
    },
    d(h) {
      c.d(h), h && U(t), h && U(e), r = !1, o();
    }
  };
}
function P9(n) {
  let t, e, i;
  return {
    c() {
      t = W("img"), y(t, "class", "media-content svelte-159ski6"), pt(t.src, e = /*media*/
      n[2].url) || y(t, "src", e), y(t, "alt", i = /*media*/
      n[2].name), y(t, "draggable", !1), Q(
        t,
        "object-fit",
        /*objectFit*/
        n[7]
      );
    },
    m(s, r) {
      X(s, t, r);
    },
    p(s, r) {
      r & /*media*/
      4 && !pt(t.src, e = /*media*/
      s[2].url) && y(t, "src", e), r & /*media*/
      4 && i !== (i = /*media*/
      s[2].name) && y(t, "alt", i), r & /*objectFit*/
      128 && Q(
        t,
        "object-fit",
        /*objectFit*/
        s[7]
      );
    },
    d(s) {
      s && U(t);
    }
  };
}
function C9(n) {
  let t, e, i, s, r, o;
  return {
    c() {
      t = W("video"), y(t, "class", "media-content svelte-159ski6"), pt(t.src, e = /*media*/
      n[2].videoCoverUrl ? (
        /*media*/
        n[2].url
      ) : (
        /*media*/
        n[2].url + "#t=0.1"
      )) || y(t, "src", e), y(t, "poster", i = /*media*/
      n[2].videoCoverUrl), y(t, "preload", s = /*media*/
      n[2].videoCoverUrl ? "none" : "auto"), y(t, "disablepictureinpicture", ""), t.playsInline = !0, y(t, "paused", ""), t.muted = !0, y(t, "draggable", !1), t.loop = !1, y(t, "crossorigin", ""), t.autoplay = /*autoplayVideo*/
      n[6], t.controls = !1, ye(
        t,
        "showPlayButton",
        /*showPlayButton*/
        n[11]
      ), Q(
        t,
        "object-fit",
        /*objectFit*/
        n[7]
      );
    },
    m(a, l) {
      X(a, t, l), n[20](t), r || (o = [
        Oe(
          t,
          "play",
          /*play_handler*/
          n[15]
        ),
        Oe(
          t,
          "pause",
          /*pause_handler*/
          n[16]
        ),
        Oe(
          t,
          "error",
          /*error_handler*/
          n[17]
        ),
        Oe(
          t,
          "ended",
          /*ended_handler*/
          n[18]
        ),
        Oe(
          t,
          "click",
          /*click_handler*/
          n[19]
        )
      ], r = !0);
    },
    p(a, l) {
      l & /*media*/
      4 && !pt(t.src, e = /*media*/
      a[2].videoCoverUrl ? (
        /*media*/
        a[2].url
      ) : (
        /*media*/
        a[2].url + "#t=0.1"
      )) && y(t, "src", e), l & /*media*/
      4 && i !== (i = /*media*/
      a[2].videoCoverUrl) && y(t, "poster", i), l & /*media*/
      4 && s !== (s = /*media*/
      a[2].videoCoverUrl ? "none" : "auto") && y(t, "preload", s), l & /*autoplayVideo*/
      64 && (t.autoplay = /*autoplayVideo*/
      a[6]), l & /*showPlayButton*/
      2048 && ye(
        t,
        "showPlayButton",
        /*showPlayButton*/
        a[11]
      ), l & /*objectFit*/
      128 && Q(
        t,
        "object-fit",
        /*objectFit*/
        a[7]
      );
    },
    d(a) {
      a && U(t), n[20](null), r = !1, vt(o);
    }
  };
}
function I9(n) {
  let t, e, i;
  return {
    c() {
      t = W("img"), y(t, "class", "media-content svelte-159ski6"), pt(t.src, e = /*media*/
      n[2].videoCoverUrl) || y(t, "src", e), y(t, "alt", i = /*media*/
      n[2].name), y(t, "draggable", !1), Q(
        t,
        "object-fit",
        /*objectFit*/
        n[7]
      );
    },
    m(s, r) {
      X(s, t, r);
    },
    p(s, r) {
      r & /*media*/
      4 && !pt(t.src, e = /*media*/
      s[2].videoCoverUrl) && y(t, "src", e), r & /*media*/
      4 && i !== (i = /*media*/
      s[2].name) && y(t, "alt", i), r & /*objectFit*/
      128 && Q(
        t,
        "object-fit",
        /*objectFit*/
        s[7]
      );
    },
    d(s) {
      s && U(t);
    }
  };
}
function E9(n) {
  let t, e = (
    /*media*/
    n[2] && Vp(n)
  );
  return {
    c() {
      e && e.c(), t = Fe();
    },
    m(i, s) {
      e && e.m(i, s), X(i, t, s);
    },
    p(i, [s]) {
      /*media*/
      i[2] ? e ? e.p(i, s) : (e = Vp(i), e.c(), e.m(t.parentNode, t)) : e && (e.d(1), e = null);
    },
    i: se,
    o: se,
    d(i) {
      e && e.d(i), i && U(t);
    }
  };
}
function M9(n, t, e) {
  let i, s, { mediaInstance: r = { videoInstance: void 0, paused: !0 } } = t, { tag: o } = t, { media: a } = t, { playButtonIfNeed: l = "withoutText" } = t, { playButtonSizeIfNeed: c = "small" } = t, { canPlay: h = !0 } = t, { autoplayVideo: d = !1 } = t, { objectFit: f = "fill" } = t, { disableVideoIfHavePoster: g = !1 } = t, p = !0, m = !1;
  function v() {
    e(9, m = (a == null ? void 0 : a.type) === "Video" && !!a.videoCoverUrl);
  }
  const b = qi("mediaStore"), w = qi("hooks"), x = () => {
    m || i && (e(10, i.muted = !0, i), i.play(), i.pause(), e(10, i.muted = !1, i), e(9, m = !0));
  };
  w.on("loadVideoFirstFrame", x), Ot(() => {
    b.subscribe(({ currentMediaElement: I }) => {
      I !== i && (i == null || i.pause());
    });
  });
  const k = (I) => {
    e(11, p = !1), e(0, r.paused = !1, r), e(9, m = !0), i && b.set({ currentMediaElement: i }), w.emit("playStateChange", {
      event: I,
      state: "playing",
      tag: o,
      mediaInstance: i
    });
  }, T = (I) => {
    e(11, p = !0), e(0, r.paused = !0, r), w.emit("playStateChange", {
      event: I,
      state: "paused",
      tag: o,
      mediaInstance: i
    });
  }, S = (I) => {
    e(11, p = !0), e(0, r.paused = !0, r), w.emit("playStateChange", {
      event: I,
      state: "paused",
      tag: o,
      mediaInstance: i
    });
  }, V = (I) => {
    e(11, p = !0), e(0, r.paused = !0, r), w.emit("playStateChange", {
      event: I,
      state: "paused",
      tag: o,
      mediaInstance: i
    });
  }, z = (I) => {
    i && i.pause();
  };
  function O(I) {
    Ze[I ? "unshift" : "push"](() => {
      r.videoInstance = I, e(0, r);
    });
  }
  const A = () => l === "withText" ? qh : l === "withoutText" ? Gc : l, C = (I) => {
    h && i && (e(10, i.muted = !1, i), i.play());
  };
  return n.$$set = (I) => {
    "mediaInstance" in I && e(0, r = I.mediaInstance), "tag" in I && e(1, o = I.tag), "media" in I && e(2, a = I.media), "playButtonIfNeed" in I && e(3, l = I.playButtonIfNeed), "playButtonSizeIfNeed" in I && e(4, c = I.playButtonSizeIfNeed), "canPlay" in I && e(5, h = I.canPlay), "autoplayVideo" in I && e(6, d = I.autoplayVideo), "objectFit" in I && e(7, f = I.objectFit), "disableVideoIfHavePoster" in I && e(8, g = I.disableVideoIfHavePoster);
  }, n.$$.update = () => {
    if (n.$$.dirty & /*mediaInstance*/
    1 && e(10, i = r.videoInstance), n.$$.dirty & /*media*/
    4 && e(14, s = a == null ? void 0 : a.url), n.$$.dirty & /*mediaUrl*/
    16384 && s && v(), n.$$.dirty & /*videoInstance*/
    1024 && i && e(11, p = i.paused), n.$$.dirty & /*media, videoPosterLoaded, videoInstance*/
    1540 && (a == null ? void 0 : a.type) === "Video" && !m) {
      const I = navigator.userAgent.toLowerCase().indexOf("micromessenger") !== -1, D = navigator.userAgent.toLowerCase().indexOf("iphone") !== -1 && I;
      i && D && i.paused && (document.removeEventListener("WeixinJSBridgeReady", x), document.removeEventListener("touchstart", x), document.removeEventListener("click", x), document.addEventListener("WeixinJSBridgeReady", x), document.addEventListener("touchstart", x), document.addEventListener("click", x));
    }
  }, [
    r,
    o,
    a,
    l,
    c,
    h,
    d,
    f,
    g,
    m,
    i,
    p,
    b,
    w,
    s,
    k,
    T,
    S,
    V,
    z,
    O,
    A,
    C
  ];
}
class j1 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      M9,
      E9,
      Pe,
      {
        mediaInstance: 0,
        tag: 1,
        media: 2,
        playButtonIfNeed: 3,
        playButtonSizeIfNeed: 4,
        canPlay: 5,
        autoplayVideo: 6,
        objectFit: 7,
        disableVideoIfHavePoster: 8
      },
      y9
    );
  }
}
function k9(n) {
  De(n, "svelte-1mrbqlg", ".media-list-wrapper.svelte-1mrbqlg.svelte-1mrbqlg{width:100%;height:100%;position:relative;overflow:hidden;border-radius:0.125rem}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg{position:relative;pointer-events:auto;height:100%;left:50%;top:50%;transform:translate(-50%, -50%)}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__carousel-container,.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__content-container{height:100%}");
}
function _p(n, t, e) {
  const i = n.slice();
  return i[28] = t[e], i[29] = t, i[30] = e, i;
}
function Hp(n) {
  let t, e, i, s, r, o, a;
  const l = [D9, x9], c = [];
  function h(d, f) {
    return (
      /*carouselEnabled*/
      d[13] && /*mediaDataList*/
      d[10].length > 1 ? 0 : 1
    );
  }
  return i = h(n), s = c[i] = l[i](n), {
    c() {
      t = W("div"), e = W("div"), s.c(), y(e, "class", "media-list svelte-1mrbqlg"), ye(
        e,
        "carouselEnabled",
        /*carouselEnabled*/
        n[13]
      ), y(t, "class", "media-list-wrapper svelte-1mrbqlg"), ye(
        t,
        "unfolded",
        /*unfolded*/
        n[5]
      );
    },
    m(d, f) {
      X(d, t, f), R(t, e), c[i].m(e, null), a = !0;
    },
    p(d, f) {
      n = d;
      let g = i;
      i = h(n), i === g ? c[i].p(n, f) : (Me(), Y(c[g], 1, 1, () => {
        c[g] = null;
      }), ke(), s = c[i], s ? s.p(n, f) : (s = c[i] = l[i](n), s.c()), F(s, 1), s.m(e, null)), (!a || f[0] & /*carouselEnabled*/
      8192) && ye(
        e,
        "carouselEnabled",
        /*carouselEnabled*/
        n[13]
      ), (!a || f[0] & /*unfolded*/
      32) && ye(
        t,
        "unfolded",
        /*unfolded*/
        n[5]
      );
    },
    i(d) {
      a || (F(s), d && mt(() => {
        a && (o && o.end(1), r = ss(
          t,
          eu,
          /*animation*/
          n[6] ? {
            y: 4,
            duration: (
              /*duration*/
              n[4]
            ),
            delay: (
              /*inDelay*/
              n[2]
            ),
            easing: vn
          } : void 0
        ), r.start());
      }), a = !0);
    },
    o(d) {
      Y(s), r && r.invalidate(), d && (o = Br(
        t,
        eu,
        /*animation*/
        n[6] ? {
          y: 4,
          duration: (
            /*duration*/
            n[4]
          ),
          delay: (
            /*outDelay*/
            n[3]
          ),
          easing: vn
        } : void 0
      )), a = !1;
    },
    d(d) {
      d && U(t), c[i].d(), d && o && o.end();
    }
  };
}
function x9(n) {
  let t, e, i;
  const s = [
    { media: (
      /*mediaData*/
      n[1][0]
    ) },
    { autoplayVideo: (
      /*autoplayVideo*/
      n[14]
    ) },
    /*mediaItemConfig*/
    n[7],
    { tag: (
      /*tag*/
      n[0]
    ) }
  ];
  function r(a) {
    n[21](a);
  }
  let o = {};
  for (let a = 0; a < s.length; a += 1)
    o = St(o, s[a]);
  return (
    /*mediaInstanceList*/
    n[8][0] !== void 0 && (o.mediaInstance = /*mediaInstanceList*/
    n[8][0]), t = new j1({ props: o }), Ze.push(() => gl(t, "mediaInstance", r)), {
      c() {
        ve(t.$$.fragment);
      },
      m(a, l) {
        me(t, a, l), i = !0;
      },
      p(a, l) {
        const c = l[0] & /*mediaData, autoplayVideo, mediaItemConfig, tag*/
        16515 ? Lt(s, [
          l[0] & /*mediaData*/
          2 && { media: (
            /*mediaData*/
            a[1][0]
          ) },
          l[0] & /*autoplayVideo*/
          16384 && { autoplayVideo: (
            /*autoplayVideo*/
            a[14]
          ) },
          l[0] & /*mediaItemConfig*/
          128 && u0(
            /*mediaItemConfig*/
            a[7]
          ),
          l[0] & /*tag*/
          1 && { tag: (
            /*tag*/
            a[0]
          ) }
        ]) : {};
        !e && l[0] & /*mediaInstanceList*/
        256 && (e = !0, c.mediaInstance = /*mediaInstanceList*/
        a[8][0], ml(() => e = !1)), t.$set(c);
      },
      i(a) {
        i || (F(t.$$.fragment, a), i = !0);
      },
      o(a) {
        Y(t.$$.fragment, a), i = !1;
      },
      d(a) {
        ge(t, a);
      }
    }
  );
}
function D9(n) {
  let t, e, i = {
    dots: !1,
    arrows: !1,
    $$slots: { default: [S9] },
    $$scope: { ctx: n }
  };
  return t = new b9({ props: i }), n[19](t), t.$on(
    "pageChange",
    /*pageChange_handler*/
    n[20]
  ), {
    c() {
      ve(t.$$.fragment);
    },
    m(s, r) {
      me(t, s, r), e = !0;
    },
    p(s, r) {
      const o = {};
      r[0] & /*mediaDataList, mediaItemConfig, tag, mediaInstanceList*/
      1409 | r[1] & /*$$scope*/
      1 && (o.$$scope = { dirty: r, ctx: s }), t.$set(o);
    },
    i(s) {
      e || (F(t.$$.fragment, s), e = !0);
    },
    o(s) {
      Y(t.$$.fragment, s), e = !1;
    },
    d(s) {
      n[19](null), ge(t, s);
    }
  };
}
function Fp(n) {
  let t, e, i;
  const s = [
    /*mediaItemConfig*/
    n[7],
    { media: (
      /*media*/
      n[28]
    ) },
    { tag: (
      /*tag*/
      n[0]
    ) }
  ];
  function r(a) {
    n[18](
      a,
      /*index*/
      n[30]
    );
  }
  let o = {};
  for (let a = 0; a < s.length; a += 1)
    o = St(o, s[a]);
  return (
    /*mediaInstanceList*/
    n[8][
      /*index*/
      n[30]
    ] !== void 0 && (o.mediaInstance = /*mediaInstanceList*/
    n[8][
      /*index*/
      n[30]
    ]), t = new j1({ props: o }), Ze.push(() => gl(t, "mediaInstance", r)), {
      c() {
        ve(t.$$.fragment);
      },
      m(a, l) {
        me(t, a, l), i = !0;
      },
      p(a, l) {
        n = a;
        const c = l[0] & /*mediaItemConfig, mediaDataList, tag*/
        1153 ? Lt(s, [
          l[0] & /*mediaItemConfig*/
          128 && u0(
            /*mediaItemConfig*/
            n[7]
          ),
          l[0] & /*mediaDataList*/
          1024 && { media: (
            /*media*/
            n[28]
          ) },
          l[0] & /*tag*/
          1 && { tag: (
            /*tag*/
            n[0]
          ) }
        ]) : {};
        !e && l[0] & /*mediaInstanceList*/
        256 && (e = !0, c.mediaInstance = /*mediaInstanceList*/
        n[8][
          /*index*/
          n[30]
        ], ml(() => e = !1)), t.$set(c);
      },
      i(a) {
        i || (F(t.$$.fragment, a), i = !0);
      },
      o(a) {
        Y(t.$$.fragment, a), i = !1;
      },
      d(a) {
        ge(t, a);
      }
    }
  );
}
function S9(n) {
  let t, e, i = (
    /*mediaDataList*/
    n[10]
  ), s = [];
  for (let o = 0; o < i.length; o += 1)
    s[o] = Fp(_p(n, i, o));
  const r = (o) => Y(s[o], 1, 1, () => {
    s[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < s.length; o += 1)
        s[o].c();
      t = Fe();
    },
    m(o, a) {
      for (let l = 0; l < s.length; l += 1)
        s[l] && s[l].m(o, a);
      X(o, t, a), e = !0;
    },
    p(o, a) {
      if (a[0] & /*mediaItemConfig, mediaDataList, tag, mediaInstanceList*/
      1409) {
        i = /*mediaDataList*/
        o[10];
        let l;
        for (l = 0; l < i.length; l += 1) {
          const c = _p(o, i, l);
          s[l] ? (s[l].p(c, a), F(s[l], 1)) : (s[l] = Fp(c), s[l].c(), F(s[l], 1), s[l].m(t.parentNode, t));
        }
        for (Me(), l = i.length; l < s.length; l += 1)
          r(l);
        ke();
      }
    },
    i(o) {
      if (!e) {
        for (let a = 0; a < i.length; a += 1)
          F(s[a]);
        e = !0;
      }
    },
    o(o) {
      s = s.filter(Boolean);
      for (let a = 0; a < s.length; a += 1)
        Y(s[a]);
      e = !1;
    },
    d(o) {
      pi(s, o), o && U(t);
    }
  };
}
function T9(n) {
  let t, e, i = (
    /*unfolded*/
    n[5] && Hp(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, r) {
      /*unfolded*/
      s[5] ? i ? (i.p(s, r), r[0] & /*unfolded*/
      32 && F(i, 1)) : (i = Hp(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function L9(n, t, e) {
  let i, s, r, o, { tag: a } = t, { mediaData: l } = t, { inDelay: c = 0 } = t, { outDelay: h = 0 } = t, { duration: d = 0 } = t, { unfolded: f = !0 } = t, { animation: g = !0 } = t, { mediaItemConfig: p } = t, { enableCarousel: m = !0 } = t, { autoplayConfig: v = {} } = t;
  const { autoplayVideo: b = !1, autoplayCarousel: w = !0, autoplayVideoInCarousel: x = !1 } = v;
  let k = [], T = 0, S, V = null;
  const z = qi("hooks"), O = qi("mediaStore");
  function A() {
    const L = k[T], N = L == null ? void 0 : L.videoInstance;
    N && (N.paused ? (N.muted = !1, N.play()) : N.pause());
  }
  Ot(() => {
    z.on("click", (L) => {
      var N;
      (N = a.tag3DContentSvelte) != null && N.css3DInstance && L.tag.id === a.id && L.target === "TagContent" && A();
    }), e(
      0,
      a.play = () => {
        const L = k[T], N = L == null ? void 0 : L.videoInstance;
        N && (N.muted = !1, N.play());
      },
      a
    ), e(
      0,
      a.pause = () => {
        const L = k[T], N = L == null ? void 0 : L.videoInstance;
        N && N.pause();
      },
      a
    ), V = setInterval(
      () => {
        o && (S == null || S.goToNext());
      },
      3e3
    );
  }), oi(() => {
    clearInterval(V), z.off("click", A);
  });
  function C(L, N) {
    n.$$.not_equal(k[N], L) && (k[N] = L, e(8, k));
  }
  function I(L) {
    Ze[L ? "unshift" : "push"](() => {
      S = L, e(12, S);
    });
  }
  const E = (L) => {
    i || O.set({ currentMediaElement: null }), e(11, T = L.detail);
  };
  function D(L) {
    n.$$.not_equal(k[0], L) && (k[0] = L, e(8, k));
  }
  return n.$$set = (L) => {
    "tag" in L && e(0, a = L.tag), "mediaData" in L && e(1, l = L.mediaData), "inDelay" in L && e(2, c = L.inDelay), "outDelay" in L && e(3, h = L.outDelay), "duration" in L && e(4, d = L.duration), "unfolded" in L && e(5, f = L.unfolded), "animation" in L && e(6, g = L.animation), "mediaItemConfig" in L && e(7, p = L.mediaItemConfig), "enableCarousel" in L && e(16, m = L.enableCarousel), "autoplayConfig" in L && e(17, v = L.autoplayConfig);
  }, n.$$.update = () => {
    n.$$.dirty[0] & /*mediaInstanceList*/
    256 && e(9, i = k.every((L) => L.paused)), n.$$.dirty[0] & /*enableCarousel, mediaData*/
    65538 && e(13, s = m && (l == null ? void 0 : l.length) > 1), n.$$.dirty[0] & /*mediaData*/
    2 && e(10, r = l), n.$$.dirty[0] & /*mediaDataList, paused*/
    1536 && (o = r.length > 1 && w && i);
  }, [
    a,
    l,
    c,
    h,
    d,
    f,
    g,
    p,
    k,
    i,
    r,
    T,
    S,
    s,
    b,
    O,
    m,
    v,
    C,
    I,
    E,
    D
  ];
}
class R1 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      L9,
      T9,
      Pe,
      {
        tag: 0,
        mediaData: 1,
        inDelay: 2,
        outDelay: 3,
        duration: 4,
        unfolded: 5,
        animation: 6,
        mediaItemConfig: 7,
        enableCarousel: 16,
        autoplayConfig: 17
      },
      k9,
      [-1, -1]
    );
  }
}
function z9(n) {
  De(n, "svelte-1f7m1lj", ".line.svelte-1f7m1lj{position:absolute;width:6.5625rem;height:1.3125rem;transform:translateY(-100%)}.text.svelte-1f7m1lj{position:absolute;width:6.25rem;left:1rem;bottom:0.0625rem;font-weight:600}.media-wrapper.svelte-1f7m1lj{position:absolute;left:0.875rem;top:-5.3125rem;width:5.625rem;height:3.75rem;font-weight:600}");
}
function Np(n) {
  let t, e, i, s, r, o, a, l;
  t = new Bi({
    props: {
      visible: (
        /*unfolded*/
        n[3]
      ),
      left: 61,
      bottom: 57,
      width: 2,
      blurRadius: 150,
      spreadRadius: 75
    }
  }), s = new r8({
    props: {
      unfolded: (
        /*unfolded*/
        n[3]
      ),
      outDelay: 400
    }
  });
  let c = (
    /*content*/
    n[2] && Gp(n)
  ), h = (
    /*mediaData*/
    n[1] && Wp(n)
  );
  return {
    c() {
      ve(t.$$.fragment), e = oe(), i = W("div"), ve(s.$$.fragment), r = oe(), c && c.c(), o = oe(), h && h.c(), a = Fe(), y(i, "class", "line svelte-1f7m1lj");
    },
    m(d, f) {
      me(t, d, f), X(d, e, f), X(d, i, f), me(s, i, null), X(d, r, f), c && c.m(d, f), X(d, o, f), h && h.m(d, f), X(d, a, f), l = !0;
    },
    p(d, f) {
      const g = {};
      f & /*unfolded*/
      8 && (g.visible = /*unfolded*/
      d[3]), t.$set(g);
      const p = {};
      f & /*unfolded*/
      8 && (p.unfolded = /*unfolded*/
      d[3]), s.$set(p), /*content*/
      d[2] ? c ? (c.p(d, f), f & /*content*/
      4 && F(c, 1)) : (c = Gp(d), c.c(), F(c, 1), c.m(o.parentNode, o)) : c && (Me(), Y(c, 1, 1, () => {
        c = null;
      }), ke()), /*mediaData*/
      d[1] ? h ? (h.p(d, f), f & /*mediaData*/
      2 && F(h, 1)) : (h = Wp(d), h.c(), F(h, 1), h.m(a.parentNode, a)) : h && (Me(), Y(h, 1, 1, () => {
        h = null;
      }), ke());
    },
    i(d) {
      l || (F(t.$$.fragment, d), F(s.$$.fragment, d), F(c), F(h), l = !0);
    },
    o(d) {
      Y(t.$$.fragment, d), Y(s.$$.fragment, d), Y(c), Y(h), l = !1;
    },
    d(d) {
      ge(t, d), d && U(e), d && U(i), ge(s), d && U(r), c && c.d(d), d && U(o), h && h.d(d), d && U(a);
    }
  };
}
function Gp(n) {
  let t, e, i;
  return e = new P1({
    props: {
      unfolded: (
        /*unfolded*/
        n[3]
      ),
      content: (
        /*content*/
        n[2]
      ),
      inDelay: 500
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "text svelte-1f7m1lj");
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), i = !0;
    },
    p(s, r) {
      const o = {};
      r & /*unfolded*/
      8 && (o.unfolded = /*unfolded*/
      s[3]), r & /*content*/
      4 && (o.content = /*content*/
      s[2]), e.$set(o);
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e);
    }
  };
}
function Wp(n) {
  let t, e, i;
  return e = new R1({
    props: {
      autoplayConfig: { autoplayCarousel: !1 },
      unfolded: (
        /*unfolded*/
        n[3]
      ),
      mediaData: (
        /*mediaData*/
        n[1]
      ),
      tag: (
        /*tag*/
        n[0]
      ),
      enableCarousel: !1,
      mediaItemConfig: {
        canPlay: !1,
        playButtonSizeIfNeed: "small",
        disableVideoIfHavePoster: !0
      },
      inDelay: 500,
      duration: 500
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "media-wrapper svelte-1f7m1lj");
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), i = !0;
    },
    p(s, r) {
      const o = {};
      r & /*unfolded*/
      8 && (o.unfolded = /*unfolded*/
      s[3]), r & /*mediaData*/
      2 && (o.mediaData = /*mediaData*/
      s[1]), r & /*tag*/
      1 && (o.tag = /*tag*/
      s[0]), e.$set(o);
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e);
    }
  };
}
function O9(n) {
  let t, e, i = (
    /*tag*/
    n[0].state && Np(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*tag*/
      s[0].state ? i ? (i.p(s, r), r & /*tag*/
      1 && F(i, 1)) : (i = Np(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function j9(n, t, e) {
  let i, s, r, o, { tag: a } = t;
  return n.$$set = (l) => {
    "tag" in l && e(0, a = l.tag);
  }, n.$$.update = () => {
    var l, c, h;
    n.$$.dirty & /*tag*/
    1 && e(3, i = a.state ? a.state.unfolded : !1), n.$$.dirty & /*tag*/
    1 && e(4, s = (c = (l = a.data.title) != null ? l : a.data.text) != null ? c : ""), n.$$.dirty & /*title*/
    16 && e(2, r = ((h = s.length) != null ? h : 0) > 7 ? s.substring(0, 6) + "..." : s), n.$$.dirty & /*tag*/
    1 && e(1, o = a.data.mediaData);
  }, [a, o, r, i, s];
}
class R9 extends Ie {
  constructor(t) {
    super(), Ce(this, t, j9, O9, Pe, { tag: 0 }, z9);
  }
}
function B9(n) {
  De(n, "svelte-1707m54", '@charset "UTF-8";.svelte-1707m54.svelte-1707m54{box-sizing:border-box}.marketing.svelte-1707m54.svelte-1707m54{transform:translateY(-100%)}.marketing.svelte-1707m54 .line.svelte-1707m54{position:absolute;height:1.875rem;width:0.0625rem;left:50%;transform:translateX(-50%);background-color:white;bottom:0;transform-origin:bottom;transition:all 500ms}.marketing.svelte-1707m54 .content.svelte-1707m54{position:relative;min-width:7.5rem;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;border-radius:0.25rem;top:-1.875rem;left:-1rem;padding:0.5rem 0rem 0.5625rem;transition-property:opacity, transform;transition-duration:500ms}.marketing.svelte-1707m54 .content .headerImage.svelte-1707m54{position:absolute;width:100%;top:0.25rem;transform:translateY(-100%);border-top-left-radius:0.25rem;border-top-right-radius:0.25rem}.title-wrapper.svelte-1707m54.svelte-1707m54{position:relative;width:100%;height:1.125rem}.title-wrapper.svelte-1707m54 .title.svelte-1707m54{border-radius:0.25rem;width:100%;padding-left:0.625rem;padding-right:0.625rem}.title-wrapper.svelte-1707m54 .title .text.svelte-1707m54{display:block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.75rem;font-weight:bold;line-height:1.125rem}.footer.svelte-1707m54.svelte-1707m54{box-sizing:border-box;width:100%;padding:0.5rem 0.625rem 0;display:flex;justify-content:space-between;align-items:center}.footer.svelte-1707m54 .price-section.svelte-1707m54{flex-shrink:0;max-width:calc(100% - 1.875rem);overflow:hidden;white-space:nowrap}.footer.svelte-1707m54 .price-section .value.svelte-1707m54{font-size:0.875rem;line-height:1rem;font-weight:normal;font-family:TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif;letter-spacing:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.footer.svelte-1707m54 .price-section .unit.svelte-1707m54{font-size:0.625rem;margin-left:0.125rem}.footer.svelte-1707m54 .action-section.svelte-1707m54{display:flex;align-items:center;height:0.875rem}.footer.svelte-1707m54 .action-section .highlight-text.svelte-1707m54{font-size:0.625rem;line-height:0.875rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:8.75rem}.footer.svelte-1707m54 .action-section .arrow.svelte-1707m54{display:flex;align-items:center;margin-left:0.25rem;flex-shrink:0;width:0.625rem}.footer.svelte-1707m54 .action-section .arrow svg.svelte-1707m54{width:0.375rem;height:0.625rem}.tags-wrapper.svelte-1707m54.svelte-1707m54{position:relative;overflow:hidden;height:1rem;margin-top:0.25rem}.tags-wrapper.svelte-1707m54 .tags.svelte-1707m54{position:relative;display:inline-flex;max-width:100%;flex-wrap:wrap;padding-left:0.625rem;padding-right:0.375rem}.tags-wrapper.svelte-1707m54 .tags .tag.svelte-1707m54{display:block;text-align:center;flex-shrink:0;flex-grow:0;font-size:0.625rem;height:1rem;line-height:1rem;margin-right:0.25rem;margin-bottom:0.25rem;padding:0 0.25rem;border-radius:0.125rem;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;box-sizing:border-box}.marketing.light.svelte-1707m54 .content.svelte-1707m54{background-color:white}.marketing.light.svelte-1707m54 .content .title-wrapper .title .text.svelte-1707m54{color:rgba(0, 0, 0, 0.8)}.marketing.light.svelte-1707m54 .content .tags-wrapper .tags .primary-tag.svelte-1707m54{background:rgba(234, 208, 154, 0.5);color:#946700}.marketing.light.svelte-1707m54 .content .tags-wrapper .tags .secondary-tag.svelte-1707m54{background:rgba(0, 0, 0, 0.06);color:rgba(0, 0, 0, 0.5)}.marketing.light.svelte-1707m54 .content .footer.svelte-1707m54{color:#946700;fill:#946700}.marketing.dark.svelte-1707m54 .content.svelte-1707m54{background-color:rgba(0, 0, 0, 0.5)}.marketing.dark.svelte-1707m54 .content .title-wrapper .title .text.svelte-1707m54{color:white}.marketing.dark.svelte-1707m54 .content .tags-wrapper .tags .primary-tag.svelte-1707m54{background:rgba(234, 208, 154, 0.5);color:white}.marketing.dark.svelte-1707m54 .content .tags-wrapper .tags .secondary-tag.svelte-1707m54{background:rgba(255, 255, 255, 0.15);color:rgba(255, 255, 255, 0.85)}.marketing.dark.svelte-1707m54 .content .footer.svelte-1707m54{color:#ead09a;fill:#ead09a}.marketing.unfolded.svelte-1707m54 .line.svelte-1707m54{transform:translateX(-50%) scale(1, 1);transition-timing-function:ease-out}.marketing.folded.svelte-1707m54 .line.svelte-1707m54{transform:translateX(-50%) scale(1, 0);transition-timing-function:ease-in}.marketing.unfolded.svelte-1707m54 .content.svelte-1707m54{opacity:1;transform:translateY(0);transition-timing-function:ease-out}.marketing.folded.svelte-1707m54 .content.svelte-1707m54{opacity:0;transform:translateY(0.425rem);transition-timing-function:ease-in}.tag.svelte-1707m54.svelte-1707m54,.text.svelte-1707m54.svelte-1707m54{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}');
}
function Qp(n, t, e) {
  const i = n.slice();
  return i[0] = t[e], i;
}
function Up(n, t, e) {
  const i = n.slice();
  return i[0] = t[e], i;
}
function Xp(n) {
  let t, e;
  return {
    c() {
      t = W("img"), y(t, "class", "headerImage svelte-1707m54"), pt(t.src, e = /*data*/
      n[1].headerPictureUrl) || y(t, "src", e), y(t, "alt", "");
    },
    m(i, s) {
      X(i, t, s);
    },
    p(i, s) {
      s & /*data*/
      2 && !pt(t.src, e = /*data*/
      i[1].headerPictureUrl) && y(t, "src", e);
    },
    d(i) {
      i && U(t);
    }
  };
}
function Yp(n) {
  let t, e, i, s, r, o = (
    /*primaryTags*/
    n[4] || []
  ), a = [];
  for (let h = 0; h < o.length; h += 1)
    a[h] = Zp(Up(n, o, h));
  let l = (
    /*secondaryTags*/
    n[3] || []
  ), c = [];
  for (let h = 0; h < l.length; h += 1)
    c[h] = Jp(Qp(n, l, h));
  return {
    c() {
      t = W("div"), e = W("div");
      for (let h = 0; h < a.length; h += 1)
        a[h].c();
      i = oe();
      for (let h = 0; h < c.length; h += 1)
        c[h].c();
      y(e, "class", "tags svelte-1707m54"), y(t, "class", "tags-wrapper svelte-1707m54");
    },
    m(h, d) {
      X(h, t, d), R(t, e);
      for (let f = 0; f < a.length; f += 1)
        a[f] && a[f].m(e, null);
      R(e, i);
      for (let f = 0; f < c.length; f += 1)
        c[f] && c[f].m(e, null);
      s || (r = [
        Pi(wn.call(null, e)),
        Oe(
          e,
          "clientHeight",
          /*clientHeight_handler*/
          n[18]
        )
      ], s = !0);
    },
    p(h, d) {
      if (d & /*minTagWidth, primaryTags*/
      16) {
        o = /*primaryTags*/
        h[4] || [];
        let f;
        for (f = 0; f < o.length; f += 1) {
          const g = Up(h, o, f);
          a[f] ? a[f].p(g, d) : (a[f] = Zp(g), a[f].c(), a[f].m(e, i));
        }
        for (; f < a.length; f += 1)
          a[f].d(1);
        a.length = o.length;
      }
      if (d & /*minTagWidth, secondaryTags*/
      8) {
        l = /*secondaryTags*/
        h[3] || [];
        let f;
        for (f = 0; f < l.length; f += 1) {
          const g = Qp(h, l, f);
          c[f] ? c[f].p(g, d) : (c[f] = Jp(g), c[f].c(), c[f].m(e, null));
        }
        for (; f < c.length; f += 1)
          c[f].d(1);
        c.length = l.length;
      }
    },
    d(h) {
      h && U(t), pi(a, h), pi(c, h), s = !1, vt(r);
    }
  };
}
function Zp(n) {
  let t, e = (
    /*tag*/
    n[0] + ""
  ), i;
  return {
    c() {
      t = W("div"), i = je(e), y(t, "class", "tag primary-tag svelte-1707m54"), Q(t, "min-width", ld);
    },
    m(s, r) {
      X(s, t, r), R(t, i);
    },
    p(s, r) {
      r & /*primaryTags*/
      16 && e !== (e = /*tag*/
      s[0] + "") && He(i, e);
    },
    d(s) {
      s && U(t);
    }
  };
}
function Jp(n) {
  let t, e = (
    /*tag*/
    n[0] + ""
  ), i;
  return {
    c() {
      t = W("div"), i = je(e), y(t, "class", "tag secondary-tag svelte-1707m54"), Q(t, "min-width", ld);
    },
    m(s, r) {
      X(s, t, r), R(t, i);
    },
    p(s, r) {
      r & /*secondaryTags*/
      8 && e !== (e = /*tag*/
      s[0] + "") && He(i, e);
    },
    d(s) {
      s && U(t);
    }
  };
}
function qp(n) {
  let t, e, i, s, r, o = (
    /*havePrice*/
    n[2] && Kp(n)
  ), a = !/*havePrice*/
  n[2] && /*data*/
  n[1].highlightText && em(n);
  return {
    c() {
      t = W("div"), o && o.c(), e = oe(), i = W("div"), a && a.c(), s = oe(), r = W("span"), r.innerHTML = '<svg viewBox="0 0 6 9" class="svelte-1707m54"><g transform="translate(-3, -2)" fill-rule="nonzero" class="svelte-1707m54"><path d="M4.43868724,2.12056563 C4.28121824,1.95989074 4.02582143,1.95979988 3.86824251,2.1203627 C3.72498894,2.26632889 3.71189225,2.49481723 3.82900374,2.65587166 L6.57092402,5.92894326 C6.72651763,6.11470411 6.72651763,6.38529589 6.57092402,6.57105674 L3.86804348,9.79798499 C3.72488984,9.94405307 3.71194952,10.1725507 3.8291712,10.3335217 L3.86824251,10.3796373 C4.01149607,10.5256035 4.23559087,10.5387981 4.39346025,10.4192733 L4.43868724,10.3794344 L8.1144599,6.5985342 C8.30312347,6.40447482 8.30312347,6.09552518 8.1144599,5.9014658 L4.43868724,2.12056563 Z" class="svelte-1707m54"></path></g></svg>', y(r, "class", "arrow svelte-1707m54"), y(i, "class", "action-section svelte-1707m54"), y(t, "class", "footer svelte-1707m54");
    },
    m(l, c) {
      X(l, t, c), o && o.m(t, null), R(t, e), R(t, i), a && a.m(i, null), R(i, s), R(i, r);
    },
    p(l, c) {
      /*havePrice*/
      l[2] ? o ? o.p(l, c) : (o = Kp(l), o.c(), o.m(t, e)) : o && (o.d(1), o = null), !/*havePrice*/
      l[2] && /*data*/
      l[1].highlightText ? a ? a.p(l, c) : (a = em(l), a.c(), a.m(i, s)) : a && (a.d(1), a = null);
    },
    d(l) {
      l && U(t), o && o.d(), a && a.d();
    }
  };
}
function Kp(n) {
  let t, e, i = (
    /*data*/
    n[1].price.value + ""
  ), s, r, o = (
    /*data*/
    n[1].price.unit && $p(n)
  );
  return {
    c() {
      t = W("div"), e = W("span"), s = je(i), r = oe(), o && o.c(), y(e, "class", "value svelte-1707m54"), y(t, "class", "price-section svelte-1707m54");
    },
    m(a, l) {
      X(a, t, l), R(t, e), R(e, s), R(t, r), o && o.m(t, null);
    },
    p(a, l) {
      l & /*data*/
      2 && i !== (i = /*data*/
      a[1].price.value + "") && He(s, i), /*data*/
      a[1].price.unit ? o ? o.p(a, l) : (o = $p(a), o.c(), o.m(t, null)) : o && (o.d(1), o = null);
    },
    d(a) {
      a && U(t), o && o.d();
    }
  };
}
function $p(n) {
  let t, e = (
    /*data*/
    n[1].price.unit + ""
  ), i;
  return {
    c() {
      t = W("span"), i = je(e), y(t, "class", "unit svelte-1707m54");
    },
    m(s, r) {
      X(s, t, r), R(t, i);
    },
    p(s, r) {
      r & /*data*/
      2 && e !== (e = /*data*/
      s[1].price.unit + "") && He(i, e);
    },
    d(s) {
      s && U(t);
    }
  };
}
function em(n) {
  let t, e = (
    /*data*/
    n[1].highlightText + ""
  ), i;
  return {
    c() {
      t = W("span"), i = je(e), y(t, "class", "highlight-text svelte-1707m54");
    },
    m(s, r) {
      X(s, t, r), R(t, i);
    },
    p(s, r) {
      r & /*data*/
      2 && e !== (e = /*data*/
      s[1].highlightText + "") && He(i, e);
    },
    d(s) {
      s && U(t);
    }
  };
}
function V9(n) {
  let t, e, i, s, r, o, a, l, c, h, d = (
    /*data*/
    n[1].title + ""
  ), f, g, p, m, v;
  e = new Bi({
    props: {
      visible: (
        /*unfolded*/
        n[5]
      ),
      outDelay: 500,
      left: 61,
      bottom: 87,
      blurRadius: 150,
      spreadRadius: 75
    }
  });
  let b = (
    /*data*/
    n[1].headerPictureUrl && Xp(n)
  ), w = (
    /*hasTags*/
    n[6] && Yp(n)
  ), x = (
    /*havePrice*/
    (n[2] || /*data*/
    n[1].highlightText) && qp(n)
  );
  return {
    c() {
      t = W("div"), ve(e.$$.fragment), i = oe(), s = W("div"), r = oe(), o = W("div"), b && b.c(), a = oe(), l = W("div"), c = W("div"), h = W("div"), f = je(d), g = oe(), w && w.c(), p = oe(), x && x.c(), y(s, "class", "line svelte-1707m54"), Q(
        s,
        "transition-delay",
        /*unfolded*/
        n[5] ? (
          /*lineDelayUnfolded*/
          n[9] + "ms"
        ) : (
          /*lineDelayFolded*/
          n[8] + "ms"
        )
      ), y(h, "class", "text svelte-1707m54"), y(c, "class", "title svelte-1707m54"), y(l, "class", "title-wrapper svelte-1707m54"), y(o, "class", "content svelte-1707m54"), Q(o, "max-width", Oi(
        /*maxWidth*/
        n[12]
      )), Q(
        o,
        "transition-delay",
        /*unfolded*/
        n[5] ? (
          /*contentDelayUnfolded*/
          n[7] + "ms"
        ) : "0ms"
      ), y(t, "class", m = bt(`marketing ${/*theme*/
      n[10]}`) + " svelte-1707m54"), ye(
        t,
        "unfolded",
        /*unfolded*/
        n[5]
      ), ye(
        t,
        "folded",
        /*folded*/
        n[11]
      );
    },
    m(k, T) {
      X(k, t, T), me(e, t, null), R(t, i), R(t, s), R(t, r), R(t, o), b && b.m(o, null), R(o, a), R(o, l), R(l, c), R(c, h), R(h, f), R(o, g), w && w.m(o, null), R(o, p), x && x.m(o, null), v = !0;
    },
    p(k, [T]) {
      const S = {};
      T & /*unfolded*/
      32 && (S.visible = /*unfolded*/
      k[5]), e.$set(S), T & /*unfolded, lineDelayUnfolded, lineDelayFolded*/
      800 && Q(
        s,
        "transition-delay",
        /*unfolded*/
        k[5] ? (
          /*lineDelayUnfolded*/
          k[9] + "ms"
        ) : (
          /*lineDelayFolded*/
          k[8] + "ms"
        )
      ), /*data*/
      k[1].headerPictureUrl ? b ? b.p(k, T) : (b = Xp(k), b.c(), b.m(o, a)) : b && (b.d(1), b = null), (!v || T & /*data*/
      2) && d !== (d = /*data*/
      k[1].title + "") && He(f, d), /*hasTags*/
      k[6] ? w ? w.p(k, T) : (w = Yp(k), w.c(), w.m(o, p)) : w && (w.d(1), w = null), /*havePrice*/
      k[2] || /*data*/
      k[1].highlightText ? x ? x.p(k, T) : (x = qp(k), x.c(), x.m(o, null)) : x && (x.d(1), x = null), T & /*unfolded, contentDelayUnfolded*/
      160 && Q(
        o,
        "transition-delay",
        /*unfolded*/
        k[5] ? (
          /*contentDelayUnfolded*/
          k[7] + "ms"
        ) : "0ms"
      ), (!v || T & /*theme*/
      1024 && m !== (m = bt(`marketing ${/*theme*/
      k[10]}`) + " svelte-1707m54")) && y(t, "class", m), (!v || T & /*theme, unfolded*/
      1056) && ye(
        t,
        "unfolded",
        /*unfolded*/
        k[5]
      ), (!v || T & /*theme, folded*/
      3072) && ye(
        t,
        "folded",
        /*folded*/
        k[11]
      );
    },
    i(k) {
      v || (F(e.$$.fragment, k), v = !0);
    },
    o(k) {
      Y(e.$$.fragment, k), v = !1;
    },
    d(k) {
      k && U(t), ge(e), b && b.d(), w && w.d(), x && x.d();
    }
  };
}
const ld = 40;
function _9(n, t, e) {
  let i, s, r, o, a, l, c, h, d, f, g, p, { tag: m } = t, v, b = (() => {
    var V;
    const S = (V = m.data.limitWidth) != null ? V : !0;
    if (typeof S == "number")
      return S;
    if (S === !0)
      return 172;
  })(), w = 0, x = !1;
  function k(S) {
    Math.abs(v - S) > 5 && (e(14, v = S), setTimeout(
      () => {
        e(16, x = !1);
      },
      100
    ));
  }
  const T = (S) => k(S.detail);
  return n.$$set = (S) => {
    "tag" in S && e(0, m = S.tag);
  }, n.$$.update = () => {
    var S, V, z, O;
    n.$$.dirty & /*tag*/
    1 && e(5, i = (V = (S = m.state) == null ? void 0 : S.unfolded) != null ? V : !1), n.$$.dirty & /*unfolded*/
    32 && e(11, s = !i), n.$$.dirty & /*tag*/
    1 && e(1, r = m.data), n.$$.dirty & /*data*/
    2 && e(2, o = _e((z = r.price) == null ? void 0 : z.value) && ((O = r.price) == null ? void 0 : O.value) !== ""), n.$$.dirty & /*tag*/
    1 && e(10, a = m.data.theme || "light"), n.$$.dirty & /*tagsCalculated, tagsOffsetHeight, maxTagsLength*/
    114688 && (!x || b && b > 0) && (e(15, w = Math.max(1, Math.floor(((b || 172) - 20) / ld))), v !== void 0 && v > 40 && e(15, w = Math.max(1, w - 1)), e(16, x = !0)), n.$$.dirty & /*data, maxTagsLength*/
    32770 && e(4, l = (r.brandTags || []).filter(Boolean).slice(0, w)), n.$$.dirty & /*maxTagsLength, primaryTags*/
    32784 && e(17, c = Math.max(0, w - l.length)), n.$$.dirty & /*data, secondaryTagsLimit*/
    131074 && e(3, h = (r.tags || []).filter(Boolean).slice(0, c)), n.$$.dirty & /*primaryTags, secondaryTags*/
    24 && e(6, p = l.length > 0 || h.length > 0), n.$$.dirty & /*havePrice, data*/
    6 && (o || r.highlightText);
  }, e(9, d = 400), e(8, f = 180 + 500 - 500 - 40), e(7, g = 400 + 180), [
    m,
    r,
    o,
    h,
    l,
    i,
    p,
    g,
    f,
    d,
    a,
    s,
    b,
    k,
    v,
    w,
    x,
    c,
    T
  ];
}
class H9 extends Ie {
  constructor(t) {
    super(), Ce(this, t, _9, V9, Pe, { tag: 0 }, B9);
  }
}
class F9 extends Audio {
  constructor(e) {
    super();
    u(this, "sharedAudioSrc");
    u(this, "sharedAudioPaused", !0);
    u(this, "sharedAudioCurrentTime", 0);
    u(this, "tryplaying", !1);
    u(this, "audioInstance");
    u(this, "eventListenerDisposer");
    this.sharedAudioSrc = e;
  }
  get paused() {
    var e;
    return (e = this.sharedAudioPaused) != null ? e : !0;
  }
  get currentTime() {
    return this.sharedAudioCurrentTime;
  }
  play() {
    return $(this, null, function* () {
      var i, s, r;
      if (this.tryplaying)
        return;
      this.tryplaying = !0, (!this.audioInstance || ((i = this.audioInstance) == null ? void 0 : i.realSrc) !== this.sharedAudioSrc) && (this.audioInstance = Y4(this.sharedAudioSrc, { namespace: $h.PlayAudio })), (s = this.eventListenerDisposer) == null || s.call(this), this.eventListenerDisposer = this.addEventListeners(), this.audioInstance.currentTime = (r = this.currentTime) != null ? r : 0;
      const e = this.audioInstance.currentTime !== this.currentTime;
      this.audioInstance.play().then(() => {
        var o;
        this.audioInstance.muted = !1, e && (this.audioInstance.currentTime = (o = this.currentTime) != null ? o : 0), this.sharedAudioPaused = !1;
      }).catch((o) => {
        var a;
        o.message === "The operation is not supported." ? console.error("Error: 音频文件可能损坏或修改过文件后缀", o) : console.error("Error: error playing media in Safari", o), this.endedHandler(), (a = this.onerror) == null || a.call(this, o);
      }).finally(() => {
        this.tryplaying = !1;
      });
    });
  }
  pause(e) {
    var i;
    if (this.audioInstance && !this.paused) {
      if (this.sharedAudioPaused = !0, (i = this.eventListenerDisposer) == null || i.call(this), this.audioInstance.ended) {
        this.endedHandler();
        return;
      }
      this.audioInstance.paused || this.audioInstance.pause(), this.onpause(e != null ? e : new Event("pause")), this.clear();
    }
  }
  dispose() {
    var e;
    (e = this.eventListenerDisposer) == null || e.call(this), this.clear(), this.audioInstance = void 0;
  }
  clear() {
    var e;
    (e = this.audioInstance) == null || e.clear();
  }
  endedHandler(e) {
    var i, s;
    (i = this.onended) == null || i.call(this, e != null ? e : new Event("ended")), (s = this.eventListenerDisposer) == null || s.call(this), this.sharedAudioPaused = !0, this.sharedAudioCurrentTime = 0, this.clear();
  }
  addEventListeners() {
    const e = this.audioInstance;
    if (!e)
      return;
    const i = (f) => {
      var g;
      this.sharedAudioCurrentTime = e.currentTime, (g = this.ontimeupdate) == null || g.call(this, f);
    }, s = (f) => {
      var g;
      e.isBlankAudio || (this.sharedAudioPaused = !1, (g = this.onplay) == null || g.call(this, f));
    }, r = (f) => {
      this.pause(f);
    }, o = (f) => {
      this.endedHandler(f);
    }, a = (f) => {
      var g;
      this.sharedAudioPaused = !0, (g = this.onerror) == null || g.call(this, f);
    }, l = (f) => {
      var g;
      return (g = this.oncanplay) == null ? void 0 : g.call(this, f);
    }, c = (f) => {
      var g;
      return (g = this.oncanplaythrough) == null ? void 0 : g.call(this, f);
    }, h = (f) => {
      var g;
      return (g = this.onloadeddata) == null ? void 0 : g.call(this, f);
    }, d = (f) => {
      var g;
      return (g = this.onloadedmetadata) == null ? void 0 : g.call(this, f);
    };
    return e.addEventListener("timeupdate", i), e.addEventListener("play", s), e.addEventListener("pause", r), e.addEventListener("ended", o), e.addEventListener("error", a), e.addEventListener("canplay", l), e.addEventListener("canplaythrough", c), e.addEventListener("loadeddata", h), e.addEventListener("loadedmetadata", d), () => {
      e.removeEventListener("timeupdate", i), e.removeEventListener("play", s), e.removeEventListener("pause", r), e.removeEventListener("ended", o), e.removeEventListener("error", a), e.removeEventListener("canplay", l), e.removeEventListener("canplaythrough", c), e.removeEventListener("loadeddata", h), e.removeEventListener("loadedmetadata", d);
    };
  }
}
function N9(n) {
  De(n, "svelte-13e7hxv", ".audio.svelte-13e7hxv{pointer-events:auto;cursor:pointer;width:100%;height:100%}");
}
function G9(n) {
  let t, e, i, s;
  const r = (
    /*#slots*/
    n[8].default
  ), o = Zn(
    r,
    n,
    /*$$scope*/
    n[7],
    null
  );
  return {
    c() {
      t = W("div"), o && o.c(), y(t, "class", "audio svelte-13e7hxv"), y(
        t,
        "style",
        /*style*/
        n[0]
      );
    },
    m(a, l) {
      X(a, t, l), o && o.m(t, null), e = !0, i || (s = Oe(t, "click", Cy(
        /*onClick*/
        n[1]
      )), i = !0);
    },
    p(a, [l]) {
      o && o.p && (!e || l & /*$$scope*/
      128) && qn(
        o,
        r,
        a,
        /*$$scope*/
        a[7],
        e ? Jn(
          r,
          /*$$scope*/
          a[7],
          l,
          null
        ) : Kn(
          /*$$scope*/
          a[7]
        ),
        null
      ), (!e || l & /*style*/
      1) && y(
        t,
        "style",
        /*style*/
        a[0]
      );
    },
    i(a) {
      e || (F(o, a), e = !0);
    },
    o(a) {
      Y(o, a), e = !1;
    },
    d(a) {
      a && U(t), o && o.d(a), i = !1, s();
    }
  };
}
function W9(n, t, e) {
  let { $$slots: i = {}, $$scope: s } = t, { url: r } = t, { enable: o = !0 } = t, { style: a = "" } = t, { hooksInfo: l } = t;
  const c = Rr(), h = qi("hooks"), d = qi("mediaStore");
  let f, g = !0;
  function p() {
    e(
      5,
      f.onplay = (v) => {
        h.emit("playStateChange", _({
          event: v,
          state: "playing",
          mediaInstance: f
        }, l)), c("play"), e(6, g = !1);
      },
      f
    ), e(
      5,
      f.onpause = (v) => {
        h.emit("playStateChange", _({
          event: v,
          state: "paused",
          mediaInstance: f
        }, l)), c("pause"), e(6, g = !0);
      },
      f
    ), e(
      5,
      f.onended = (v) => {
        h.emit("playStateChange", _({
          event: v,
          state: "paused",
          mediaInstance: f
        }, l)), c("pause"), e(6, g = !0);
      },
      f
    ), e(
      5,
      f.onloadedmetadata = (v) => {
        typeof f.duration == "number" && !Number.isNaN(f.duration) && c("duration", f.duration);
      },
      f
    ), e(
      5,
      f.onerror = (v) => {
        c("pause"), e(6, g = !0);
      },
      f
    ), e(
      5,
      f.ontimeupdate = (v) => {
        c("timeupdate", f.currentTime);
      },
      f
    );
  }
  d.subscribe(({ currentMediaElement: v }) => {
    v !== f && (g || f == null || f.pause());
  });
  function m(v) {
    f && (h.emit("click", _({
      event: v,
      target: "AudioTagPlayIcon",
      audioInstance: f
    }, l)), d.set({ currentMediaElement: f }), h.emit("playStateChange", _({
      event: v,
      state: f.paused ? "playing" : "paused",
      mediaInstance: f
    }, l)), f.paused ? f.play() : f.pause());
  }
  return n.$$set = (v) => {
    "url" in v && e(2, r = v.url), "enable" in v && e(3, o = v.enable), "style" in v && e(0, a = v.style), "hooksInfo" in v && e(4, l = v.hooksInfo), "$$scope" in v && e(7, s = v.$$scope);
  }, n.$$.update = () => {
    n.$$.dirty & /*url*/
    4 && (r || c("duration", 0)), n.$$.dirty & /*audio, url*/
    36 && (f == null || f.dispose(), e(5, f = new F9(r)), c("audioRef", f), setTimeout(() => c("audioRef", f), 200), p()), n.$$.dirty & /*enable, audio*/
    40 && (o || f == null || f.pause()), n.$$.dirty & /*enable, audioPaused*/
    72 && c(o && !g ? "play" : "pause");
  }, [a, m, r, o, l, f, g, s, i];
}
let B1 = class extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      W9,
      G9,
      Pe,
      {
        url: 2,
        enable: 3,
        style: 0,
        hooksInfo: 4
      },
      N9
    );
  }
};
function Q9(n) {
  De(n, "svelte-6pnkgc", ".audio-icon__wrapper.svelte-6pnkgc.svelte-6pnkgc{display:inline-block}.audio-icon.svelte-6pnkgc.svelte-6pnkgc{display:flex;justify-content:center;align-items:center;position:relative;width:100%;height:100%;border-radius:50%}.audio-icon.svelte-6pnkgc .sound-wave__container.svelte-6pnkgc{position:absolute;pointer-events:none;top:0;left:0;width:100%;height:100%}@keyframes svelte-6pnkgc-sound_wave_1_animation{0%,10%{opacity:0}25%,100%{opacity:1}}@keyframes svelte-6pnkgc-sound_wave_2_animation{0%,35%{opacity:0}50%,100%{opacity:1}}@keyframes svelte-6pnkgc-sound_wave_3_animation{0%,60%{opacity:0}75%,100%{opacity:1}}");
}
function tm(n) {
  let t, e;
  return t = new Bi({
    props: {
      center: !0,
      blurRadius: 12,
      spreadRadius: 5
    }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function U9(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f, g, p, m = (
    /*shadow*/
    n[0] && tm()
  );
  return {
    c() {
      t = W("div"), m && m.c(), e = oe(), i = W("div"), s = W("div"), r = be("svg"), o = be("defs"), a = be("linearGradient"), l = be("stop"), c = be("stop"), h = be("linearGradient"), d = be("stop"), f = be("stop"), g = be("path"), y(l, "stop-color", "rgba(255, 255, 255, 1)"), y(l, "stop-opacity", ".5"), y(l, "offset", "0%"), y(c, "stop-color", "rgba(255, 255, 255, 1)"), y(c, "offset", "100%"), y(a, "x1", "8.653%"), y(a, "y1", "15.676%"), y(a, "x2", "85.159%"), y(a, "y2", "79.274%"), y(a, "id", "dnalogel-audio-icon-linear-gradient-1"), y(d, "stop-color", "rgba(255, 255, 255, 1)"), y(d, "offset", "0%"), y(f, "stop-color", "rgba(255, 255, 255, 1)"), y(f, "stop-opacity", "0"), y(f, "offset", "100%"), y(h, "x1", "0%"), y(h, "y1", "0%"), y(h, "x2", "64.422%"), y(h, "y2", "62.326%"), y(h, "id", "dnalogel-audio-icon-linear-gradient-2"), y(
        g,
        "d",
        /*d*/
        n[3]
      ), y(g, "fill", "url(#dnalogel-audio-icon-linear-gradient-1)"), y(g, "fill-rule", "nonzero"), y(g, "stroke", "url(#dnalogel-audio-icon-linear-gradient-2)"), y(g, "stroke-width", ".5"), y(r, "viewBox", "0 0 24 24"), y(r, "version", "1.1"), y(r, "aria-label", "audio-icon"), y(s, "class", "sound-wave__container svelte-6pnkgc"), y(i, "class", "audio-icon svelte-6pnkgc"), y(t, "class", "audio-icon__wrapper svelte-6pnkgc"), y(
        t,
        "style",
        /*style*/
        n[1]
      ), Q(
        t,
        "width",
        /*styleWidth*/
        n[4]
      ), Q(
        t,
        "height",
        /*styleWidth*/
        n[4]
      );
    },
    m(v, b) {
      X(v, t, b), m && m.m(t, null), R(t, e), R(t, i), R(i, s), R(s, r), R(r, o), R(o, a), R(a, l), R(a, c), R(o, h), R(h, d), R(h, f), R(r, g), n[10](s), p = !0;
    },
    p(v, [b]) {
      /*shadow*/
      v[0] ? m ? b & /*shadow*/
      1 && F(m, 1) : (m = tm(), m.c(), F(m, 1), m.m(t, e)) : m && (Me(), Y(m, 1, 1, () => {
        m = null;
      }), ke()), (!p || b & /*d*/
      8) && y(
        g,
        "d",
        /*d*/
        v[3]
      ), (!p || b & /*style*/
      2) && y(
        t,
        "style",
        /*style*/
        v[1]
      );
      const w = b & /*style*/
      2;
      (w || b & /*styleWidth, style*/
      18) && Q(
        t,
        "width",
        /*styleWidth*/
        v[4]
      ), (w || b & /*styleWidth, style*/
      18) && Q(
        t,
        "height",
        /*styleWidth*/
        v[4]
      );
    },
    i(v) {
      p || (F(m), p = !0);
    },
    o(v) {
      Y(m), p = !1;
    },
    d(v) {
      v && U(t), m && m.d(), n[10](null);
    }
  };
}
function X9(n, t, e) {
  let i, s, { playing: r } = t, { shadow: o = !1 } = t, { style: a = null } = t, { width: l = "100%" } = t, { animated: c = !0 } = t, h, d = 0, f = null;
  const g = [
    "M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm1.534 3.282-1.29 1.289.186.183a5.86 5.86 0 0 1 1.663 4.095c0 1.555-.605 2.965-1.786 4.236l1.118 1.12.2-.19a7.46 7.46 0 0 0 2.225-5.322 7.46 7.46 0 0 0-2.316-5.411Zm-2.046 2.047-1.245 1.243.14.133a3.04 3.04 0 0 1 .882 2.144c0 .795-.308 1.516-.955 2.24l1.23 1.231.168-.168a4.793 4.793 0 0 0 1.314-3.303c0-1.39-.59-2.643-1.534-3.52Zm-1.752 1.78-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z",
    "M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm-2.264 7.109-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z",
    "M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm-.512 5.329-1.245 1.243.14.133a3.04 3.04 0 0 1 .882 2.144c0 .795-.308 1.516-.955 2.24l1.23 1.231.168-.168a4.793 4.793 0 0 0 1.314-3.303c0-1.39-.59-2.643-1.534-3.52Zm-1.752 1.78-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z"
  ];
  oi(() => {
    f && (clearInterval(f), e(9, f = null));
  });
  function p(m) {
    Ze[m ? "unshift" : "push"](() => {
      h = m, e(2, h);
    });
  }
  return n.$$set = (m) => {
    "playing" in m && e(5, r = m.playing), "shadow" in m && e(0, o = m.shadow), "style" in m && e(1, a = m.style), "width" in m && e(6, l = m.width), "animated" in m && e(7, c = m.animated);
  }, n.$$.update = () => {
    var m;
    n.$$.dirty & /*width*/
    64 && e(4, i = typeof l == "number" ? Oi(l) : l), n.$$.dirty & /*playing, timer, animationStep*/
    800 && (r ? f || e(9, f = setInterval(
      () => {
        e(8, d = (d + 1) % g.length);
      },
      500
    )) : (f && (clearInterval(f), e(9, f = null)), e(8, d = 0))), n.$$.dirty & /*animated, animationStep*/
    384 && e(3, s = (m = g[c ? d : 0]) != null ? m : g[0]);
  }, [
    o,
    a,
    h,
    s,
    i,
    r,
    l,
    c,
    d,
    f,
    p
  ];
}
class V1 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      X9,
      U9,
      Pe,
      {
        playing: 5,
        shadow: 0,
        style: 1,
        width: 6,
        animated: 7
      },
      Q9
    );
  }
}
function Y9(n) {
  De(n, "svelte-1s6gk4a", ".audio-tag.svelte-1s6gk4a{position:absolute;left:0;top:0;width:0;height:0;overflow:visible}.audio-icon__wrapper.svelte-1s6gk4a{position:relative;vertical-align:top;width:100%;height:100%}.content.svelte-1s6gk4a{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0.125rem;overflow:hidden;box-sizing:border-box;font-size:0;white-space:nowrap;font-weight:600}.wrapper.svelte-1s6gk4a{position:relative;width:100%;height:100%}.audio-icon.svelte-1s6gk4a{pointer-events:none;vertical-align:top;display:inline-block;width:1rem;height:1rem;margin-right:0.25rem;margin-top:0.0625rem}.audio.svelte-1s6gk4a{position:relative;width:100%;height:100%}");
}
function im(n) {
  var v, b;
  let t, e, i, s, r, o, a, l, c, h, d, f, g, p;
  e = new Bi({
    props: {
      visible: (
        /*unfolded*/
        n[6]
      ),
      left: (
        /*contentWidth*/
        n[3] / 2 + "px"
      ),
      bottom: 12,
      width: 2,
      blurRadius: 120,
      spreadRadius: 60
    }
  });
  let m = (
    /*unfolded*/
    n[6] && nm(n)
  );
  return c = new C1({
    props: {
      visible: (
        /*unfolded*/
        n[6]
      ),
      textUnfolded: (
        /*textUnfolded*/
        n[1]
      ),
      content: (
        /*content*/
        n[5]
      )
    }
  }), d = new td({
    props: {
      unfolded: (
        /*unfolded*/
        n[6]
      ),
      length: (
        /*contentWidth*/
        n[3]
      ),
      outDelay: (
        /*foldTextDelay*/
        n[4] + 20 * Math.min(
          /*content*/
          (b = (v = n[5]) == null ? void 0 : v.length) != null ? b : 10,
          15
        )
      ),
      useLinearColor: !0
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), i = oe(), s = W("div"), r = W("div"), o = W("div"), m && m.c(), a = oe(), l = W("div"), ve(c.$$.fragment), h = oe(), ve(d.$$.fragment), y(o, "class", "audio-icon svelte-1s6gk4a"), Q(l, "display", "inline-block"), y(r, "class", "wrapper svelte-1s6gk4a"), y(s, "class", "content svelte-1s6gk4a"), y(t, "class", "audio-tag svelte-1s6gk4a"), ye(
        t,
        "unfolded",
        /*unfolded*/
        n[6]
      );
    },
    m(w, x) {
      X(w, t, x), me(e, t, null), R(t, i), R(t, s), R(s, r), R(r, o), m && m.m(o, null), R(r, a), R(r, l), me(c, l, null), R(t, h), me(d, t, null), f = !0, g || (p = [
        Oe(
          l,
          "click",
          /*clickContent*/
          n[7]
        ),
        Pi(wn.call(null, l)),
        Oe(
          l,
          "clientWidth",
          /*clientWidth_handler*/
          n[12]
        )
      ], g = !0);
    },
    p(w, x) {
      var V, z;
      const k = {};
      x & /*unfolded*/
      64 && (k.visible = /*unfolded*/
      w[6]), x & /*contentWidth*/
      8 && (k.left = /*contentWidth*/
      w[3] / 2 + "px"), e.$set(k), /*unfolded*/
      w[6] ? m ? (m.p(w, x), x & /*unfolded*/
      64 && F(m, 1)) : (m = nm(w), m.c(), F(m, 1), m.m(o, null)) : m && (Me(), Y(m, 1, 1, () => {
        m = null;
      }), ke());
      const T = {};
      x & /*unfolded*/
      64 && (T.visible = /*unfolded*/
      w[6]), x & /*textUnfolded*/
      2 && (T.textUnfolded = /*textUnfolded*/
      w[1]), x & /*content*/
      32 && (T.content = /*content*/
      w[5]), c.$set(T);
      const S = {};
      x & /*unfolded*/
      64 && (S.unfolded = /*unfolded*/
      w[6]), x & /*contentWidth*/
      8 && (S.length = /*contentWidth*/
      w[3]), x & /*foldTextDelay, content*/
      48 && (S.outDelay = /*foldTextDelay*/
      w[4] + 20 * Math.min(
        /*content*/
        (z = (V = w[5]) == null ? void 0 : V.length) != null ? z : 10,
        15
      )), d.$set(S), (!f || x & /*unfolded*/
      64) && ye(
        t,
        "unfolded",
        /*unfolded*/
        w[6]
      );
    },
    i(w) {
      f || (F(e.$$.fragment, w), F(m), F(c.$$.fragment, w), F(d.$$.fragment, w), f = !0);
    },
    o(w) {
      Y(e.$$.fragment, w), Y(m), Y(c.$$.fragment, w), Y(d.$$.fragment, w), f = !1;
    },
    d(w) {
      w && U(t), ge(e), m && m.d(), ge(c), ge(d), g = !1, vt(p);
    }
  };
}
function nm(n) {
  let t, e, i, s, r, o, a;
  return e = new Bi({
    props: {
      center: !0,
      blurRadius: 15,
      spreadRadius: 6
    }
  }), s = new B1({
    props: {
      enable: (
        /*unfolded*/
        n[6]
      ),
      url: (
        /*tag*/
        n[0].data.audioUrl
      ),
      hooksInfo: { tag: (
        /*tag*/
        n[0]
      ) },
      $$slots: { default: [Z9] },
      $$scope: { ctx: n }
    }
  }), s.$on(
    "play",
    /*play_handler*/
    n[8]
  ), s.$on(
    "pause",
    /*pause_handler*/
    n[9]
  ), s.$on(
    "error",
    /*error_handler*/
    n[10]
  ), s.$on(
    "audioRef",
    /*audioRef_handler*/
    n[11]
  ), {
    c() {
      t = W("div"), ve(e.$$.fragment), i = oe(), ve(s.$$.fragment), y(t, "class", "audio svelte-1s6gk4a");
    },
    m(l, c) {
      X(l, t, c), me(e, t, null), R(t, i), me(s, t, null), a = !0;
    },
    p(l, c) {
      n = l;
      const h = {};
      c & /*unfolded*/
      64 && (h.enable = /*unfolded*/
      n[6]), c & /*tag*/
      1 && (h.url = /*tag*/
      n[0].data.audioUrl), c & /*tag*/
      1 && (h.hooksInfo = { tag: (
        /*tag*/
        n[0]
      ) }), c & /*$$scope, playing*/
      8196 && (h.$$scope = { dirty: c, ctx: n }), s.$set(h);
    },
    i(l) {
      a || (F(e.$$.fragment, l), F(s.$$.fragment, l), l && mt(() => {
        a && (o && o.end(1), r = ss(t, zt, {
          duration: 1e3,
          delay: 0,
          easing: Er
        }), r.start());
      }), a = !0);
    },
    o(l) {
      var c, h;
      Y(e.$$.fragment, l), Y(s.$$.fragment, l), r && r.invalidate(), l && (o = Br(t, zt, {
        duration: 1e3,
        delay: 20 * Math.min(
          /*content*/
          (h = (c = n[5]) == null ? void 0 : c.length) != null ? h : 10,
          15
        ),
        easing: Er
      })), a = !1;
    },
    d(l) {
      l && U(t), ge(e), ge(s), l && o && o.end();
    }
  };
}
function Z9(n) {
  let t, e, i;
  return e = new V1({ props: { playing: (
    /*playing*/
    n[2]
  ) } }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "audio-icon__wrapper svelte-1s6gk4a");
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), i = !0;
    },
    p(s, r) {
      const o = {};
      r & /*playing*/
      4 && (o.playing = /*playing*/
      s[2]), e.$set(o);
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e);
    }
  };
}
function J9(n) {
  let t, e, i = (
    /*tag*/
    n[0].state && im(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*tag*/
      s[0].state ? i ? (i.p(s, r), r & /*tag*/
      1 && F(i, 1)) : (i = im(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function q9(n, t, e) {
  let i, s, r, { tag: o } = t, a = !1, l = !1, c;
  function h() {
    e(1, a = !a);
  }
  const d = () => {
    e(2, l = !0);
  }, f = () => {
    e(2, l = !1);
  }, g = () => {
    e(2, l = !1);
  };
  function p(v) {
    An.call(this, n, v);
  }
  const m = (v) => {
    e(3, c = v.detail);
  };
  return n.$$set = (v) => {
    "tag" in v && e(0, o = v.tag);
  }, n.$$.update = () => {
    var v, b, w;
    n.$$.dirty & /*tag*/
    1 && e(6, i = !!((v = o.state) != null && v.unfolded)), n.$$.dirty & /*tag*/
    1 && e(5, s = (w = (b = o.data.title) != null ? b : o.data.text) != null ? w : ""), n.$$.dirty & /*textUnfolded*/
    2 && e(4, r = a ? 450 : 0);
  }, [
    o,
    a,
    l,
    c,
    r,
    s,
    i,
    h,
    d,
    f,
    g,
    p,
    m
  ];
}
class K9 extends Ie {
  constructor(t) {
    super(), Ce(this, t, q9, J9, Pe, { tag: 0 }, Y9);
  }
}
function $9(n) {
  De(n, "svelte-nclraj", ".audio-tag__wrapper.svelte-nclraj{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.audio-tag.svelte-nclraj{position:relative;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;padding:0.25rem;padding-right:0.625rem;border-radius:624999.9375rem;border:0.0625rem solid rgba(255, 255, 255, 0.6);background:linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));box-shadow:inset 0 0 0.25rem 0 rgba(255, 255, 255, 0.3)}.audio__inner.svelte-nclraj{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.text.svelte-nclraj{font-weight:bold;font-size:0.75rem;margin-left:0.25rem}.audio-icon__wrapper.svelte-nclraj{position:relative;vertical-align:top;pointer-events:none;width:1.5rem;height:1.5rem}");
}
function sm(n) {
  let t, e, i, s;
  return i = new B1({
    props: {
      style: "width: max-content; height: max-content;",
      enable: (
        /*tag*/
        n[0].state.visible
      ),
      url: (
        /*tag*/
        n[0].data.audioUrl
      ),
      hooksInfo: { tag: (
        /*tag*/
        n[0]
      ) },
      $$slots: { default: [tM] },
      $$scope: { ctx: n }
    }
  }), i.$on(
    "play",
    /*play_handler*/
    n[5]
  ), i.$on(
    "pause",
    /*pause_handler*/
    n[6]
  ), i.$on(
    "error",
    /*error_handler*/
    n[7]
  ), i.$on(
    "timeupdate",
    /*timeupdate_handler*/
    n[8]
  ), i.$on(
    "duration",
    /*duration_handler*/
    n[9]
  ), i.$on(
    "audioRef",
    /*audioRef_handler*/
    n[10]
  ), {
    c() {
      t = W("div"), e = W("div"), ve(i.$$.fragment), y(e, "class", "audio-tag svelte-nclraj"), y(t, "class", "audio-tag__wrapper svelte-nclraj");
    },
    m(r, o) {
      X(r, t, o), R(t, e), me(i, e, null), s = !0;
    },
    p(r, o) {
      const a = {};
      o & /*tag*/
      1 && (a.enable = /*tag*/
      r[0].state.visible), o & /*tag*/
      1 && (a.url = /*tag*/
      r[0].data.audioUrl), o & /*tag*/
      1 && (a.hooksInfo = { tag: (
        /*tag*/
        r[0]
      ) }), o & /*$$scope, title, playing*/
      2072 && (a.$$scope = { dirty: o, ctx: r }), i.$set(a);
    },
    i(r) {
      s || (F(i.$$.fragment, r), s = !0);
    },
    o(r) {
      Y(i.$$.fragment, r), s = !1;
    },
    d(r) {
      r && U(t), ge(i);
    }
  };
}
function eM(n) {
  let t;
  return {
    c() {
      t = je(
        /*title*/
        n[4]
      );
    },
    m(e, i) {
      X(e, t, i);
    },
    p(e, i) {
      i & /*title*/
      16 && He(
        t,
        /*title*/
        e[4]
      );
    },
    d(e) {
      e && U(t);
    }
  };
}
function tM(n) {
  let t, e, i, s, r, o, a;
  return i = new V1({ props: { playing: (
    /*playing*/
    n[3]
  ) } }), o = new id({
    props: {
      maxWidth: 72,
      maxLine: 1,
      $$slots: { default: [eM] },
      $$scope: { ctx: n }
    }
  }), {
    c() {
      t = W("div"), e = W("div"), ve(i.$$.fragment), s = oe(), r = W("div"), ve(o.$$.fragment), y(e, "class", "audio-icon__wrapper svelte-nclraj"), y(r, "class", "text svelte-nclraj"), y(t, "class", "audio__inner svelte-nclraj");
    },
    m(l, c) {
      X(l, t, c), R(t, e), me(i, e, null), R(t, s), R(t, r), me(o, r, null), a = !0;
    },
    p(l, c) {
      const h = {};
      c & /*playing*/
      8 && (h.playing = /*playing*/
      l[3]), i.$set(h);
      const d = {};
      c & /*$$scope, title*/
      2064 && (d.$$scope = { dirty: c, ctx: l }), o.$set(d);
    },
    i(l) {
      a || (F(i.$$.fragment, l), F(o.$$.fragment, l), a = !0);
    },
    o(l) {
      Y(i.$$.fragment, l), Y(o.$$.fragment, l), a = !1;
    },
    d(l) {
      l && U(t), ge(i), ge(o);
    }
  };
}
function iM(n) {
  let t, e, i = (
    /*tag*/
    n[0].state && sm(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*tag*/
      s[0].state ? i ? (i.p(s, r), r & /*tag*/
      1 && F(i, 1)) : (i = sm(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function nM(n, t, e) {
  let i, { tag: s } = t, r = 0, o = 0, a = !1;
  const l = () => {
    e(3, a = !0);
  }, c = () => {
    e(3, a = !1);
  }, h = () => {
    e(3, a = !1);
  }, d = (p) => {
    e(1, r = p.detail);
  }, f = (p) => {
    e(2, o = p.detail);
  };
  function g(p) {
    An.call(this, n, p);
  }
  return n.$$set = (p) => {
    "tag" in p && e(0, s = p.tag);
  }, n.$$.update = () => {
    var p, m;
    n.$$.dirty & /*tag*/
    1 && e(4, i = (m = (p = s.data.title) != null ? p : s.data.text) != null ? m : "");
  }, [
    s,
    r,
    o,
    a,
    i,
    l,
    c,
    h,
    d,
    f,
    g
  ];
}
class sM extends Ie {
  constructor(t) {
    super(), Ce(this, t, nM, iM, Pe, { tag: 0 }, $9);
  }
}
function rM(n) {
  let t, e;
  return t = new sM({ props: { tag: (
    /*tag*/
    n[0]
  ) } }), t.$on(
    "audioRef",
    /*audioRef*/
    n[2]
  ), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*tag*/
      1 && (r.tag = /*tag*/
      i[0]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function oM(n) {
  let t, e;
  return t = new K9({ props: { tag: (
    /*tag*/
    n[0]
  ) } }), t.$on(
    "audioRef",
    /*audioRef*/
    n[2]
  ), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*tag*/
      1 && (r.tag = /*tag*/
      i[0]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function aM(n) {
  let t, e, i, s;
  const r = [oM, rM], o = [];
  function a(l, c) {
    return (
      /*appearance*/
      l[1] === "line" ? 0 : (
        /*appearance*/
        l[1] === "plane" ? 1 : -1
      )
    );
  }
  return ~(t = a(n)) && (e = o[t] = r[t](n)), {
    c() {
      e && e.c(), i = Fe();
    },
    m(l, c) {
      ~t && o[t].m(l, c), X(l, i, c), s = !0;
    },
    p(l, [c]) {
      let h = t;
      t = a(l), t === h ? ~t && o[t].p(l, c) : (e && (Me(), Y(o[h], 1, 1, () => {
        o[h] = null;
      }), ke()), ~t ? (e = o[t], e ? e.p(l, c) : (e = o[t] = r[t](l), e.c()), F(e, 1), e.m(i.parentNode, i)) : e = null);
    },
    i(l) {
      s || (F(e), s = !0);
    },
    o(l) {
      Y(e), s = !1;
    },
    d(l) {
      ~t && o[t].d(l), l && U(i);
    }
  };
}
function lM(n, t, e) {
  let i, { tag: s } = t, r;
  function o(a) {
    r = a.detail;
  }
  return s.play = () => r.play(), s.pause = () => r.pause(), n.$$set = (a) => {
    "tag" in a && e(0, s = a.tag);
  }, n.$$.update = () => {
    var a;
    n.$$.dirty & /*tag*/
    1 && e(1, i = (a = s.data.appearance) != null ? a : "line");
  }, [s, i, o];
}
class cM extends Ie {
  constructor(t) {
    super(), Ce(this, t, lM, aM, Pe, { tag: 0 });
  }
}
function hM(n) {
  De(n, "svelte-10cw0el", ".media-wrapper.svelte-10cw0el{position:absolute;width:100%;height:100%}");
}
function rm(n) {
  var s;
  let t, e, i;
  return e = new R1({
    props: {
      mediaItemConfig: {
        canPlay: !0,
        playButtonSizeIfNeed: "large",
        playButtonIfNeed: (
          /*playIcon*/
          (s = n[4]) != null ? s : "withText"
        ),
        disableVideoIfHavePoster: !1,
        objectFit: (
          /*objectFit*/
          n[2]
        )
      },
      unfolded: (
        /*unfolded*/
        n[6]
      ),
      mediaData: (
        /*mediaData*/
        n[5]
      ),
      enableCarousel: (
        /*enableCarousel*/
        n[1]
      ),
      autoplayConfig: (
        /*autoplayConfig*/
        n[3]
      ),
      tag: (
        /*tag*/
        n[0]
      ),
      inDelay: 500,
      duration: 500
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "media-wrapper svelte-10cw0el");
    },
    m(r, o) {
      X(r, t, o), me(e, t, null), i = !0;
    },
    p(r, o) {
      var l;
      const a = {};
      o & /*playIcon, objectFit*/
      20 && (a.mediaItemConfig = {
        canPlay: !0,
        playButtonSizeIfNeed: "large",
        playButtonIfNeed: (
          /*playIcon*/
          (l = r[4]) != null ? l : "withText"
        ),
        disableVideoIfHavePoster: !1,
        objectFit: (
          /*objectFit*/
          r[2]
        )
      }), o & /*unfolded*/
      64 && (a.unfolded = /*unfolded*/
      r[6]), o & /*mediaData*/
      32 && (a.mediaData = /*mediaData*/
      r[5]), o & /*enableCarousel*/
      2 && (a.enableCarousel = /*enableCarousel*/
      r[1]), o & /*autoplayConfig*/
      8 && (a.autoplayConfig = /*autoplayConfig*/
      r[3]), o & /*tag*/
      1 && (a.tag = /*tag*/
      r[0]), e.$set(a);
    },
    i(r) {
      i || (F(e.$$.fragment, r), i = !0);
    },
    o(r) {
      Y(e.$$.fragment, r), i = !1;
    },
    d(r) {
      r && U(t), ge(e);
    }
  };
}
function dM(n) {
  let t, e, i = (
    /*tag*/
    n[0].state && /*mediaData*/
    n[5] && rm(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*tag*/
      s[0].state && /*mediaData*/
      s[5] ? i ? (i.p(s, r), r & /*tag, mediaData*/
      33 && F(i, 1)) : (i = rm(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function uM(n, t, e) {
  let i, s, r, o, a, l, { tag: c } = t;
  return n.$$set = (h) => {
    "tag" in h && e(0, c = h.tag);
  }, n.$$.update = () => {
    var h, d;
    n.$$.dirty & /*tag*/
    1 && e(6, i = c.state ? c.state.unfolded : !1), n.$$.dirty & /*tag*/
    1 && e(5, s = c.data.mediaData), n.$$.dirty & /*tag*/
    1 && e(1, r = c.data.enableCarousel), n.$$.dirty & /*tag*/
    1 && e(4, o = c.data.playIcon), n.$$.dirty & /*tag, enableCarousel*/
    3 && e(3, a = (h = c.data.autoplayConfig) != null ? h : {
      autoplay: r != null ? r : !0,
      autoplayVideo: !0
    }), n.$$.dirty & /*tag*/
    1 && e(2, l = (d = c.data.objectFit) != null ? d : (() => c.data.adaptationMode === "stretch" ? "fill" : c.data.adaptationMode === "proportional" ? "contain" : void 0)());
  }, [c, r, l, a, o, s, i];
}
class fM extends Ie {
  constructor(t) {
    super(), Ce(this, t, uM, dM, Pe, { tag: 0 }, hM);
  }
}
const rc = /* @__PURE__ */ new Map();
function _1(n) {
  return $(this, null, function* () {
    return new Promise((t, e) => {
      if (!n) {
        e(Error("url is empty"));
        return;
      }
      const i = new Image();
      i.src = n, i.onload = () => t({ width: i.width, height: i.height }), i.onerror = e;
    });
  });
}
function pM(n) {
  return $(this, null, function* () {
    const { url: t, ratio: e = 3 } = n, i = (() => {
      if (rc.has(t))
        return rc.get(t);
      const o = _1(t);
      return rc.set(t, o), o;
    })(), { width: s, height: r } = yield i;
    return de(_({}, n), {
      width: s / e,
      height: r / e
    });
  });
}
function mM(n) {
  return $(this, null, function* () {
    const { steps: t, url: e, ratio: i = 3, fps: s = 24 } = n;
    if (!t)
      throw new Error("KeyframeIcon requires steps");
    const { width: r, height: o } = yield _1(e), a = r / i, l = o / i, c = a / t, h = l, d = 1 / s * t + "s";
    return de(_({}, n), {
      width: c,
      height: h,
      duration: d
    });
  });
}
function gM(n) {
  De(n, "svelte-1j3azjf", '@keyframes svelte-1j3azjf-sprites-animation{0%{background-position:0 0}100%{background-position:100% 0}}.icon-bg.svelte-1j3azjf{position:absolute;width:141%;height:141%;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;overflow:hidden}.icon-bg-circle.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner-shadow.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center, transparent 20%, rgba(255,255,255,0.3))}.icon-bg-circle.svelte-1j3azjf::before{content:"";position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;border-radius:50%;z-index:1;border:0.0625rem solid rgba(255,255,255,0.6)}.icon-image.svelte-1j3azjf{position:relative;display:block;width:auto}.icon-keyframe.svelte-1j3azjf{background-repeat:no-repeat;background-size:auto 100%;animation-direction:normal;animation-iteration-count:infinite;animation-name:svelte-1j3azjf-sprites-animation;animation-delay:0}');
}
function om(n) {
  n[1] = n[21].width;
}
function am(n) {
  n[1] = n[21].width, n[18] = n[21].height, n[19] = n[21].steps, n[20] = n[21].duration;
}
function lm(n) {
  let t, e, i, s = (
    /*shadow*/
    n[0] && cm()
  );
  function r(l, c) {
    return (
      /*isKeyframe*/
      l[8] ? AM : vM
    );
  }
  let o = r(n), a = o(n);
  return {
    c() {
      t = W("div"), s && s.c(), e = oe(), a.c(), y(t, "class", "icon"), Q(
        t,
        "width",
        /*width*/
        n[1]
      );
    },
    m(l, c) {
      X(l, t, c), s && s.m(t, null), R(t, e), a.m(t, null), i = !0;
    },
    p(l, c) {
      /*shadow*/
      l[0] ? s ? c & /*shadow*/
      1 && F(s, 1) : (s = cm(), s.c(), F(s, 1), s.m(t, e)) : s && (Me(), Y(s, 1, 1, () => {
        s = null;
      }), ke()), o === (o = r(l)) && a ? a.p(l, c) : (a.d(1), a = o(l), a && (a.c(), a.m(t, null))), c & /*width*/
      2 && Q(
        t,
        "width",
        /*width*/
        l[1]
      );
    },
    i(l) {
      i || (F(s), i = !0);
    },
    o(l) {
      Y(s), i = !1;
    },
    d(l) {
      l && U(t), s && s.d(), a.d();
    }
  };
}
function cm(n) {
  let t, e;
  return t = new Bi({
    props: {
      center: !0,
      blurRadius: 24,
      spreadRadius: 16
    }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function vM(n) {
  let t, e, i = {
    ctx: n,
    current: null,
    token: null,
    hasCatch: !1,
    pending: wM,
    then: yM,
    catch: bM,
    value: 21
  };
  return Na(
    e = /*getImage*/
    n[13](gt({
      url: (
        /*iconUrl*/
        n[7]
      ),
      ratio: (
        /*iconRatio*/
        n[5]
      )
    })),
    i
  ), {
    c() {
      t = Fe(), i.block.c();
    },
    m(s, r) {
      X(s, t, r), i.block.m(s, i.anchor = r), i.mount = () => t.parentNode, i.anchor = t;
    },
    p(s, r) {
      n = s, i.ctx = n, r & /*iconUrl, iconRatio*/
      160 && e !== (e = /*getImage*/
      n[13](gt({
        url: (
          /*iconUrl*/
          n[7]
        ),
        ratio: (
          /*iconRatio*/
          n[5]
        )
      }))) && Na(e, i) || d0(i, n, r);
    },
    d(s) {
      s && U(t), i.block.d(s), i.token = null, i = null;
    }
  };
}
function AM(n) {
  let t, e, i = {
    ctx: n,
    current: null,
    token: null,
    hasCatch: !1,
    pending: IM,
    then: CM,
    catch: PM,
    value: 21
  };
  return Na(
    e = /*getKeyframe*/
    n[12](gt({
      url: (
        /*iconUrl*/
        n[7]
      ),
      steps: (
        /*iconSteps*/
        n[2]
      ),
      fps: (
        /*iconFps*/
        n[6]
      ),
      ratio: (
        /*iconRatio*/
        n[5]
      )
    })),
    i
  ), {
    c() {
      t = Fe(), i.block.c();
    },
    m(s, r) {
      X(s, t, r), i.block.m(s, i.anchor = r), i.mount = () => t.parentNode, i.anchor = t;
    },
    p(s, r) {
      n = s, i.ctx = n, r & /*iconUrl, iconSteps, iconFps, iconRatio*/
      228 && e !== (e = /*getKeyframe*/
      n[12](gt({
        url: (
          /*iconUrl*/
          n[7]
        ),
        steps: (
          /*iconSteps*/
          n[2]
        ),
        fps: (
          /*iconFps*/
          n[6]
        ),
        ratio: (
          /*iconRatio*/
          n[5]
        )
      }))) && Na(e, i) || d0(i, n, r);
    },
    d(s) {
      s && U(t), i.block.d(s), i.token = null, i = null;
    }
  };
}
function bM(n) {
  return { c: se, m: se, p: se, d: se };
}
function yM(n) {
  om(n);
  let t, e, i, s = (
    /*bgcolor*/
    n[11] && hm(n)
  );
  return {
    c() {
      s && s.c(), t = oe(), e = W("img"), y(e, "alt", "tag-icon"), y(e, "class", "icon-image svelte-1j3azjf"), pt(e.src, i = /*iconUrl*/
      n[7]) || y(e, "src", i), Q(e, "width", Oi(cr({
        originWidth: (
          /*width*/
          n[1]
        ),
        scale: (
          /*iconScale*/
          n[4]
        ),
        wantedWidth: (
          /*iconWidth*/
          n[3]
        )
      }).width)), Q(e, "max-width", "initial");
    },
    m(r, o) {
      s && s.m(r, o), X(r, t, o), X(r, e, o);
    },
    p(r, o) {
      om(r), /*bgcolor*/
      r[11] ? s ? s.p(r, o) : (s = hm(r), s.c(), s.m(t.parentNode, t)) : s && (s.d(1), s = null), o & /*iconUrl*/
      128 && !pt(e.src, i = /*iconUrl*/
      r[7]) && y(e, "src", i), o & /*iconUrl, iconRatio, iconScale, iconWidth*/
      184 && Q(e, "width", Oi(cr({
        originWidth: (
          /*width*/
          r[1]
        ),
        scale: (
          /*iconScale*/
          r[4]
        ),
        wantedWidth: (
          /*iconWidth*/
          r[3]
        )
      }).width));
    },
    d(r) {
      s && s.d(r), r && U(t), r && U(e);
    }
  };
}
function hm(n) {
  let t, e, i, s, r;
  return {
    c() {
      t = W("div"), e = W("div"), i = W("div"), s = oe(), r = W("div"), y(i, "class", "icon-bg-circle-inner svelte-1j3azjf"), Q(
        i,
        "background",
        /*bgcolor*/
        n[11]
      ), Q(
        i,
        "opacity",
        /*bgopacity*/
        n[10]
      ), y(r, "class", "icon-bg-circle-inner-shadow svelte-1j3azjf"), y(e, "class", "icon-bg-circle svelte-1j3azjf"), y(t, "class", "icon-bg svelte-1j3azjf");
    },
    m(o, a) {
      X(o, t, a), R(t, e), R(e, i), R(e, s), R(e, r);
    },
    p(o, a) {
      a & /*bgcolor*/
      2048 && Q(
        i,
        "background",
        /*bgcolor*/
        o[11]
      ), a & /*bgopacity*/
      1024 && Q(
        i,
        "opacity",
        /*bgopacity*/
        o[10]
      );
    },
    d(o) {
      o && U(t);
    }
  };
}
function wM(n) {
  return { c: se, m: se, p: se, d: se };
}
function PM(n) {
  return { c: se, m: se, p: se, d: se };
}
function CM(n) {
  am(n);
  let t, e = `url(${/*iconUrl*/
  n[7]})`, i = `steps(${/*steps*/
  n[19] - 1})`;
  return {
    c() {
      t = W("div"), y(t, "class", "icon-keyframe svelte-1j3azjf"), Q(t, "width", Oi(cr({
        originWidth: (
          /*width*/
          n[1]
        ),
        originHeight: (
          /*height*/
          n[18]
        ),
        scale: (
          /*iconScale*/
          n[4]
        ),
        wantedWidth: (
          /*iconWidth*/
          n[3]
        )
      }).width)), Q(t, "height", Oi(cr({
        originWidth: (
          /*width*/
          n[1]
        ),
        originHeight: (
          /*height*/
          n[18]
        ),
        scale: (
          /*iconScale*/
          n[4]
        ),
        wantedWidth: (
          /*iconWidth*/
          n[3]
        )
      }).height)), Q(t, "background-image", e), Q(
        t,
        "animation-duration",
        /*duration*/
        n[20]
      ), Q(t, "animation-timing-function", i);
    },
    m(s, r) {
      X(s, t, r);
    },
    p(s, r) {
      am(s), r & /*iconUrl, iconSteps, iconFps, iconRatio, iconScale, iconWidth*/
      252 && Q(t, "width", Oi(cr({
        originWidth: (
          /*width*/
          s[1]
        ),
        originHeight: (
          /*height*/
          s[18]
        ),
        scale: (
          /*iconScale*/
          s[4]
        ),
        wantedWidth: (
          /*iconWidth*/
          s[3]
        )
      }).width)), r & /*iconUrl, iconSteps, iconFps, iconRatio, iconScale, iconWidth*/
      252 && Q(t, "height", Oi(cr({
        originWidth: (
          /*width*/
          s[1]
        ),
        originHeight: (
          /*height*/
          s[18]
        ),
        scale: (
          /*iconScale*/
          s[4]
        ),
        wantedWidth: (
          /*iconWidth*/
          s[3]
        )
      }).height)), r & /*iconUrl*/
      128 && e !== (e = `url(${/*iconUrl*/
      s[7]})`) && Q(t, "background-image", e), r & /*iconUrl, iconSteps, iconFps, iconRatio*/
      228 && Q(
        t,
        "animation-duration",
        /*duration*/
        s[20]
      ), r & /*iconUrl, iconSteps, iconFps, iconRatio*/
      228 && i !== (i = `steps(${/*steps*/
      s[19] - 1})`) && Q(t, "animation-timing-function", i);
    },
    d(s) {
      s && U(t);
    }
  };
}
function IM(n) {
  return { c: se, m: se, p: se, d: se };
}
function EM(n) {
  let t, e, i = (
    /*iconCopy*/
    n[9] && lm(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*iconCopy*/
      s[9] ? i ? (i.p(s, r), r & /*iconCopy*/
      512 && F(i, 1)) : (i = lm(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function cr(n) {
  const { originWidth: t, originHeight: e, scale: i = 1, wantedWidth: s } = n, r = (s != null ? s : t) * i, o = typeof e == "number" ? r * (e / t) : void 0;
  return de(_({}, n), { width: r, height: o });
}
function MM(n, t, e) {
  let i, s, r, o, a, l, c, h, d, f, g, { width: p = null } = t, { icon: m = null } = t, { shadow: v = !1 } = t;
  const b = Rr();
  function w(T) {
    return $(this, null, function* () {
      const S = yield mM(T);
      return b("iconLoaded", S), S;
    });
  }
  function x(T) {
    return $(this, null, function* () {
      if (typeof g == "number")
        return de(_({}, T), { width: g });
      const S = yield pM(T);
      return b("iconLoaded", S), S;
    });
  }
  function k() {
    f || b("iconLoaded");
  }
  return Ot(() => {
    k();
  }), n.$$set = (T) => {
    "width" in T && e(1, p = T.width), "icon" in T && e(14, m = T.icon), "shadow" in T && e(0, v = T.shadow);
  }, n.$$.update = () => {
    var T, S, V;
    n.$$.dirty & /*icon*/
    16384 && e(7, i = m == null ? void 0 : m.url), n.$$.dirty & /*icon*/
    16384 && e(11, s = m == null ? void 0 : m.bgcolor), n.$$.dirty & /*icon*/
    16384 && e(10, r = (T = m == null ? void 0 : m.bgopacity) != null ? T : 0.6), n.$$.dirty & /*icon*/
    16384 && e(2, o = (S = m == null ? void 0 : m.steps) != null ? S : 1), n.$$.dirty & /*icon*/
    16384 && e(6, a = m == null ? void 0 : m.fps), n.$$.dirty & /*icon*/
    16384 && e(5, l = m == null ? void 0 : m.ratio), n.$$.dirty & /*icon*/
    16384 && e(4, c = (V = m == null ? void 0 : m.scale) != null ? V : 1), n.$$.dirty & /*icon*/
    16384 && e(3, h = m == null ? void 0 : m.width), n.$$.dirty & /*iconUrl, iconSteps, iconFps, iconRatio, iconScale, iconWidth*/
    252 && e(9, d = gt({
      url: i,
      steps: o,
      fps: a,
      ratio: l,
      scale: c,
      width: h
    })), n.$$.dirty & /*iconSteps*/
    4 && e(8, f = o > 1), n.$$.dirty & /*width*/
    2 && (g = p);
  }, k(), [
    v,
    p,
    o,
    h,
    c,
    l,
    a,
    i,
    f,
    d,
    r,
    s,
    w,
    x,
    m
  ];
}
class H1 extends Ie {
  constructor(t) {
    super(), Ce(this, t, MM, EM, Pe, { width: 1, icon: 14, shadow: 0 }, gM);
  }
}
function kM(n) {
  De(n, "svelte-e58ijk", ".wrapper.svelte-e58ijk{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}.text-wrapper.svelte-e58ijk{position:relative;display:flex;align-items:center;justify-content:center}.text.svelte-e58ijk{position:absolute;top:0;font-size:0.875rem;color:#ffffff;letter-spacing:0;text-align:center;max-width:8.75rem;width:-moz-max-content;width:max-content;line-height:1.125rem;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}");
}
function dm(n) {
  let t, e, i, s, r, o;
  return e = new Bi({
    props: {
      outDelay: 0,
      inDelay: 0,
      center: !0,
      width: "80%",
      blurRadius: 40,
      spreadRadius: 16,
      opacity: 0.08
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), i = oe(), s = W("div"), r = je(
        /*title*/
        n[2]
      ), y(s, "class", "text svelte-e58ijk"), Q(
        s,
        "top",
        /*textTop*/
        n[1]
      ), y(t, "class", "text-wrapper svelte-e58ijk");
    },
    m(a, l) {
      X(a, t, l), me(e, t, null), R(t, i), R(t, s), R(s, r), o = !0;
    },
    p(a, l) {
      (!o || l & /*title*/
      4) && He(
        r,
        /*title*/
        a[2]
      ), l & /*textTop*/
      2 && Q(
        s,
        "top",
        /*textTop*/
        a[1]
      );
    },
    i(a) {
      o || (F(e.$$.fragment, a), o = !0);
    },
    o(a) {
      Y(e.$$.fragment, a), o = !1;
    },
    d(a) {
      a && U(t), ge(e);
    }
  };
}
function xM(n) {
  let t, e, i, s;
  e = new H1({
    props: { icon: (
      /*icon*/
      n[0]
    ), shadow: !0 }
  }), e.$on(
    "iconLoaded",
    /*iconLoaded_handler*/
    n[8]
  );
  let r = (
    /*title*/
    n[2] && /*iconLoaded*/
    n[3] && dm(n)
  );
  return {
    c() {
      t = W("div"), ve(e.$$.fragment), i = oe(), r && r.c(), y(t, "class", "wrapper svelte-e58ijk");
    },
    m(o, a) {
      X(o, t, a), me(e, t, null), R(t, i), r && r.m(t, null), s = !0;
    },
    p(o, [a]) {
      const l = {};
      a & /*icon*/
      1 && (l.icon = /*icon*/
      o[0]), e.$set(l), /*title*/
      o[2] && /*iconLoaded*/
      o[3] ? r ? (r.p(o, a), a & /*title, iconLoaded*/
      12 && F(r, 1)) : (r = dm(o), r.c(), F(r, 1), r.m(t, null)) : r && (Me(), Y(r, 1, 1, () => {
        r = null;
      }), ke());
    },
    i(o) {
      s || (F(e.$$.fragment, o), F(r), s = !0);
    },
    o(o) {
      Y(e.$$.fragment, o), Y(r), s = !1;
    },
    d(o) {
      o && U(t), ge(e), r && r.d();
    }
  };
}
const DM = 4;
function SM(n, t, e) {
  let i, s, r, o, a, l, c, { tag: h } = t;
  const d = () => {
    e(3, i = !0);
  };
  return n.$$set = (f) => {
    "tag" in f && e(4, h = f.tag);
  }, n.$$.update = () => {
    var f, g, p, m, v, b, w, x;
    n.$$.dirty & /*tag*/
    16 && e(2, s = (f = h.data.title) != null ? f : h.data.text), n.$$.dirty & /*tag*/
    16 && e(0, r = (p = h.data.icon) != null ? p : (g = h.style) == null ? void 0 : g.point), n.$$.dirty & /*tag*/
    16 && e(6, o = (v = (m = h.style) == null ? void 0 : m.point) == null ? void 0 : v.width), n.$$.dirty & /*tag*/
    16 && e(5, a = (x = (w = (b = h.style) == null ? void 0 : b.point) == null ? void 0 : w.scale) != null ? x : 1), n.$$.dirty & /*icon*/
    1 && e(7, l = r == null ? void 0 : r.bgcolor), n.$$.dirty & /*bgcolor, width, scale*/
    224 && e(1, c = l && o && typeof o == "number" ? Oi(o * 0.414 * a / 2 + DM) : 0);
  }, e(3, i = !1), [
    r,
    c,
    s,
    i,
    h,
    a,
    o,
    l,
    d
  ];
}
class TM extends Ie {
  constructor(t) {
    super(), Ce(this, t, SM, xM, Pe, { tag: 4 }, kM);
  }
}
function LM(n) {
  De(n, "svelte-ezi5lu", `.icon.svelte-ezi5lu{font-size:0}.icon-bg.svelte-ezi5lu{position:absolute;width:141%;height:141%;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;overflow:hidden;z-index:-1}.icon-bg-circle.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner-shadow.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center, transparent 20%, rgba(255,255,255,0.3))}.icon-bg-circle.svelte-ezi5lu::before{content:"";position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;border-radius:50%;background:linear-gradient(-45deg, rgba(255,255,255,1), rgba(255,255,255,0.2), rgba(255,255,255,1));z-index:1;mask:radial-gradient(circle at center, 
              transparent 65%, 
              black 0%);-webkit-mask:radial-gradient(circle at center, 
              transparent 65%, 
              black 0%)}`);
}
function um(n) {
  let t, e;
  return t = new Bi({
    props: {
      center: !0,
      blurRadius: 24,
      spreadRadius: 16
    }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function fm(n) {
  let t, e, i, s, r;
  return {
    c() {
      t = W("div"), e = W("div"), i = W("div"), s = oe(), r = W("div"), y(i, "class", "icon-bg-circle-inner svelte-ezi5lu"), Q(
        i,
        "background",
        /*bgcolor*/
        n[4]
      ), Q(
        i,
        "opacity",
        /*bgopacity*/
        n[3]
      ), y(r, "class", "icon-bg-circle-inner-shadow svelte-ezi5lu"), y(e, "class", "icon-bg-circle svelte-ezi5lu"), y(t, "class", "icon-bg svelte-ezi5lu");
    },
    m(o, a) {
      X(o, t, a), R(t, e), R(e, i), R(e, s), R(e, r);
    },
    p(o, a) {
      a & /*bgcolor*/
      16 && Q(
        i,
        "background",
        /*bgcolor*/
        o[4]
      ), a & /*bgopacity*/
      8 && Q(
        i,
        "opacity",
        /*bgopacity*/
        o[3]
      );
    },
    d(o) {
      o && U(t);
    }
  };
}
function zM(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f, g, p, m, v = (
    /*shadow*/
    n[1] && um()
  ), b = (
    /*bgcolor*/
    n[4] && fm(n)
  );
  return {
    c() {
      t = W("div"), v && v.c(), e = oe(), b && b.c(), i = oe(), s = be("svg"), r = be("linearGradient"), o = be("stop"), a = be("stop"), l = be("linearGradient"), c = be("stop"), h = be("stop"), d = be("g"), f = be("path"), g = be("path"), p = be("path"), y(o, "offset", "0"), y(o, "stop-color", "#fff"), y(a, "offset", "1"), y(a, "stop-color", "#fff"), y(a, "stop-opacity", ".7"), y(r, "id", "a"), y(r, "x1", "78.74567%"), y(r, "x2", "5.663764%"), y(r, "y1", "94.075617%"), y(r, "y2", "5.924383%"), y(c, "offset", "0"), y(c, "stop-color", "#fff"), y(h, "offset", "1"), y(h, "stop-color", "#fff"), y(h, "stop-opacity", "0"), y(l, "id", "b"), y(l, "x1", "16.588502%"), y(l, "x2", "68.285986%"), y(l, "y1", "5.924383%"), y(l, "y2", "63.800896%"), y(f, "d", "m18 5.4v8c0 1.9329966-4.0294373 3.5-9 3.5-4.97056275 0-9-1.5670034-9-3.5v-8c0 1.93299662 4.02943725 3.5 9 3.5 4.8670094 0 8.8316983-1.50239169 8.9947813-3.37967512zm-13.0396582-.5c.259 0 .504-.063.728-.196.441-.259.721-.728.721-1.26 0-.441-.189-.833-.504-1.085.259-.259.434-.63.434-1.022 0-.245-.063-.476-.182-.679-.252-.413-.693-.658-1.197-.658-.238 0-.462.056-.665.175-.42.238-.679.665-.679 1.162v.035h.721v-.035c0-.315.294-.616.623-.616.357 0 .651.287.651.616 0 .371-.287.658-.651.658h-.14v.728h.14c.399 0 .728.322.728.721s-.329.735-.728.735-.728-.336-.728-.735v-.105h-.728v.105c0 .266.063.511.196.728.259.448.728.728 1.26.728zm3.647 0c.273 0 .518-.07.749-.203.448-.273.742-.763.742-1.302 0-.273-.07-.518-.203-.749-.273-.448-.749-.742-1.288-.742-.077 0-.133 0-.168.007l.875-1.911h-.805l-1.274 2.793c-.091.189-.133.392-.133.602 0 .273.07.525.203.756.273.455.749.749 1.302.749zm0-.742c-.427 0-.763-.336-.763-.763 0-.42.343-.77.763-.77s.77.35.77.77-.35.763-.77.763zm3.654.749c.504 0 .952-.273 1.204-.7.126-.21.189-.441.189-.693v-2.086c0-.511-.273-.98-.693-1.239-.217-.126-.448-.189-.7-.189-.511 0-.98.273-1.232.714-.133.217-.196.455-.196.714v2.086c0 .504.273.952.714 1.204.217.126.455.189.714.189zm0-.721c-.371 0-.693-.301-.693-.672v-2.086c0-.399.308-.693.693-.693.371 0 .651.294.651.693v2.086c0 .385-.28.672-.651.672zm3.2140391-2.11266016c.2734375 0 .5132649-.09855143.7194824-.29565429.2062174-.19710287.3093262-.44376628.3093262-.73999024 0-.28710937-.0991211-.53035481-.2973633-.72973633-.1982422-.19938151-.4420573-.29907226-.7314453-.29907226-.2825521 0-.5257976.10026042-.7297364.30078125s-.3059082.44661458-.3059082.73828125c0 .2734375.0968425.51269531.2905274.71777344.1936849.20507812.4420573.30761718.7451172.30761718zm0-.37255859c-.1822917 0-.3383789-.06494141-.4682618-.19482422-.1298828-.12988281-.1948242-.28369141-.1948242-.46142578 0-.18457031.0655111-.34122721.1965332-.4699707.1310222-.12874349.2865397-.19311524.4665528-.19311524.180013 0 .3343912.06494141.4631347.19482422s.1931153.28369141.1931153.46142578c0 .18457031-.0655111.34122722-.1965332.46997071-.1310222.12874349-.2842611.19311523-.4597168.19311523z"), y(f, "fill", "url(#a)"), y(f, "fill-rule", "nonzero"), y(g, "d", "m18 5.4v8c0 1.9329966-4.0294373 3.5-9 3.5-4.97056275 0-9-1.5670034-9-3.5v-8c0 1.93299662 4.02943725 3.5 9 3.5 4.8670094 0 8.8316983-1.50239169 8.9947813-3.37967512zm-.537 1.917-.0556083.04651904c-1.6129673 1.27557869-4.7855335 2.07278608-8.4073917 2.07278608-3.5667171 0-6.69228643-.77164105-8.32741897-2.0099189l-.13658103-.10838622.00030512 6.082c0 1.4658868 3.60570734 2.8999734 8.15878222 2.9616322l.30491266.0020627c4.6959533 0 8.4636949-1.4652329 8.4636949-2.9636949zm-5.2016582-7.317c.252 0 .483.063.7.189.42.259.693.728.693 1.239v2.086l-.00756.14868c-.02016.19488-.08064.37632-.18144.54432-.252.427-.7.7-1.204.7-.259 0-.497-.063-.714-.189-.441-.252-.714-.7-.714-1.204v-2.086l.007616-.15288c.020384-.20048.081984-.38752.188384-.56112.252-.441.721-.714 1.232-.714zm-7.301 0c.504 0 .945.245 1.197.658.119.203.182.434.182.679 0 .392-.175.763-.434 1.022.315.252.504.644.504 1.085 0 .532-.28 1.001-.721 1.26-.224.133-.469.196-.728.196-.532 0-1.001-.28-1.26-.728-.133-.217-.196-.462-.196-.728v-.105h.728v.105c0 .399.329.735.728.735s.728-.336.728-.735-.329-.721-.728-.721h-.14v-.728h.14c.364 0 .651-.287.651-.658 0-.329-.294-.616-.651-.616-.329 0-.623.301-.623.616v.035h-.721v-.035c0-.497.259-.924.679-1.162.203-.119.427-.175.665-.175zm4.354 0-.875 1.911c.035-.007.091-.007.168-.007.539 0 1.015.294 1.288.742.133.231.203.476.203.749 0 .539-.294 1.029-.742 1.302-.231.133-.476.203-.749.203-.553 0-1.029-.294-1.302-.749-.133-.231-.203-.483-.203-.756 0-.21.042-.413.133-.602l1.274-2.793zm2.947.735c-.385 0-.693.294-.693.693v2.086l.0077784.09927273c.051172.32396694.3479489.57272727.6852216.57272727.371 0 .651-.287.651-.672v-2.086l-.0068002-.10607288c-.044861-.34395191-.3069271-.58692712-.6441998-.58692712zm-3.654 1.89c-.42 0-.763.35-.763.77 0 .427.336.763.763.763.42 0 .77-.343.77-.763s-.35-.77-.77-.77zm6.8680391-2.61611328c.289388 0 .5332031.09969075.7314453.29907226.1982422.19938152.2973633.44262696.2973633.72973633 0 .29622396-.1031088.54288737-.3093262.73999024-.2062175.19710286-.4460449.29565429-.7194824.29565429-.3030599 0-.5514323-.10253906-.7451172-.30761718-.1936849-.20507813-.2905274-.44433594-.2905274-.71777344 0-.29166667.1019694-.53776042.3059082-.73828125s.4471843-.30078125.7297364-.30078125zm0 .37255859c-.1800131 0-.3355306.06437175-.4665528.19311524-.1310221.12874349-.1965332.28540039-.1965332.4699707 0 .17773437.0649414.33154297.1948242.46142578.1298829.12988281.2859701.19482422.4682618.19482422.1754557 0 .3286946-.06437174.4597168-.19311523.1310221-.12874349.1965332-.2854004.1965332-.46997071 0-.17773437-.0643718-.33154297-.1931153-.46142578s-.2831217-.19482422-.4631347-.19482422z"), y(g, "fill", "url(#b)"), y(g, "fill-rule", "nonzero"), y(p, "d", "m3.00030998 2.79110119v5.21779762c-1.84142801-.64087734-3.00030998-1.57225753-3.00030998-2.60889881s1.15888197-1.96802147 3.00030998-2.60889881zm12.00038752.00035068c1.8408432.64086639 2.9993025 1.57209591 2.9993025 2.60854813s-1.1584593 1.96768174-2.9993025 2.60854813z"), y(p, "fill", "#d8d8d8"), y(p, "opacity", ".6"), y(d, "fill", "none"), y(d, "fill-rule", "evenodd"), y(d, "transform", "translate(3 3.1)"), y(
        s,
        "height",
        /*finalWidth*/
        n[2]
      ), y(
        s,
        "width",
        /*finalWidth*/
        n[2]
      ), y(s, "viewBox", "0 0 24 24"), y(s, "xmlns", "http://www.w3.org/2000/svg"), y(s, "xmlns:xlink", "http://www.w3.org/1999/xlink"), y(t, "class", "icon svelte-ezi5lu"), Q(
        t,
        "width",
        /*width*/
        n[0]
      );
    },
    m(w, x) {
      X(w, t, x), v && v.m(t, null), R(t, e), b && b.m(t, null), R(t, i), R(t, s), R(s, r), R(r, o), R(r, a), R(s, l), R(l, c), R(l, h), R(s, d), R(d, f), R(d, g), R(d, p), m = !0;
    },
    p(w, [x]) {
      /*shadow*/
      w[1] ? v ? x & /*shadow*/
      2 && F(v, 1) : (v = um(), v.c(), F(v, 1), v.m(t, e)) : v && (Me(), Y(v, 1, 1, () => {
        v = null;
      }), ke()), /*bgcolor*/
      w[4] ? b ? b.p(w, x) : (b = fm(w), b.c(), b.m(t, i)) : b && (b.d(1), b = null), (!m || x & /*finalWidth*/
      4) && y(
        s,
        "height",
        /*finalWidth*/
        w[2]
      ), (!m || x & /*finalWidth*/
      4) && y(
        s,
        "width",
        /*finalWidth*/
        w[2]
      ), x & /*width*/
      1 && Q(
        t,
        "width",
        /*width*/
        w[0]
      );
    },
    i(w) {
      m || (F(v), m = !0);
    },
    o(w) {
      Y(v), m = !1;
    },
    d(w) {
      w && U(t), v && v.d(), b && b.d();
    }
  };
}
function OM(n) {
  const { originWidth: t, originHeight: e, scale: i = 1, wantedWidth: s } = n, r = (s != null ? s : t) * i, o = typeof e == "number" ? r * (e / t) : void 0;
  return de(_({}, n), { width: r, height: o });
}
function jM(n, t, e) {
  let i, s, r, o, a, { width: l = null } = t, { icon: c = null } = t, { shadow: h = !1 } = t;
  return n.$$set = (d) => {
    "width" in d && e(0, l = d.width), "icon" in d && e(5, c = d.icon), "shadow" in d && e(1, h = d.shadow);
  }, n.$$.update = () => {
    var d, f;
    n.$$.dirty & /*icon*/
    32 && e(4, i = c == null ? void 0 : c.bgcolor), n.$$.dirty & /*icon*/
    32 && e(3, s = (d = c == null ? void 0 : c.bgopacity) != null ? d : 0.6), n.$$.dirty & /*icon*/
    32 && e(7, r = (f = c == null ? void 0 : c.scale) != null ? f : 1), n.$$.dirty & /*icon*/
    32 && e(6, o = c == null ? void 0 : c.width), n.$$.dirty & /*iconScale, iconWidth*/
    192 && e(2, a = OM({
      originWidth: 24,
      originHeight: 24,
      scale: r,
      wantedWidth: o
    }).width);
  }, [l, h, a, s, i, c, o, r];
}
let RM = class extends Ie {
  constructor(t) {
    super(), Ce(this, t, jM, zM, Pe, { width: 0, icon: 5, shadow: 1 }, LM);
  }
};
function BM(n) {
  De(n, "svelte-yq4ru9", ".wrapper.svelte-yq4ru9{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}");
}
function VM(n) {
  let t, e, i;
  return e = new RM({
    props: { icon: (
      /*icon*/
      n[0]
    ), shadow: !0 }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "wrapper svelte-yq4ru9");
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), i = !0;
    },
    p(s, [r]) {
      const o = {};
      r & /*icon*/
      1 && (o.icon = /*icon*/
      s[0]), e.$set(o);
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e);
    }
  };
}
function _M(n, t, e) {
  let i, { tag: s } = t;
  return n.$$set = (r) => {
    "tag" in r && e(1, s = r.tag);
  }, n.$$.update = () => {
    var r, o;
    n.$$.dirty & /*tag*/
    2 && e(0, i = (o = s.data.icon) != null ? o : (r = s.style) == null ? void 0 : r.point);
  }, [i, s];
}
class HM extends Ie {
  constructor(t) {
    super(), Ce(this, t, _M, VM, Pe, { tag: 1 }, BM);
  }
}
function FM(n) {
  De(n, "svelte-kzl2aj", ".customElement__container.svelte-kzl2aj{position:relative}");
}
function NM(n) {
  let t, e;
  return {
    c() {
      t = new Ba(!1), e = Fe(), t.a = e;
    },
    m(i, s) {
      t.m(
        /*renderer*/
        n[2],
        i,
        s
      ), X(i, e, s);
    },
    p: se,
    d(i) {
      i && U(e), i && t.d();
    }
  };
}
function GM(n) {
  let t, e = typeof /*renderer*/
  n[2] == "string" && NM(n);
  return {
    c() {
      t = W("div"), e && e.c(), y(t, "class", "customElement__container svelte-kzl2aj"), ye(
        t,
        "unfolded",
        /*unfolded*/
        n[1]
      );
    },
    m(i, s) {
      X(i, t, s), e && e.m(t, null), n[5](t);
    },
    p(i, [s]) {
      typeof /*renderer*/
      i[2] == "string" && e.p(i, s), s & /*unfolded*/
      2 && ye(
        t,
        "unfolded",
        /*unfolded*/
        i[1]
      );
    },
    i: se,
    o: se,
    d(i) {
      i && U(t), e && e.d(), n[5](null);
    }
  };
}
function WM(n, t, e) {
  var h, d;
  let i, { tag: s } = t, { rendererMap: r = /* @__PURE__ */ new Map() } = t, o, a = (d = s.element) != null ? d : (h = r.get(s.contentType)) == null ? void 0 : h.renderer, l;
  Ot(() => {
    o && (a instanceof Element ? (o.appendChild(a), l = () => {
      a instanceof Element && a.remove();
    }) : typeof a == "function" && (l = a(o, s)));
  }), oi(() => {
    l == null || l();
  });
  function c(f) {
    Ze[f ? "unshift" : "push"](() => {
      o = f, e(0, o);
    });
  }
  return n.$$set = (f) => {
    "tag" in f && e(3, s = f.tag), "rendererMap" in f && e(4, r = f.rendererMap);
  }, n.$$.update = () => {
    n.$$.dirty & /*tag*/
    8 && e(1, i = s.state.unfolded);
  }, [o, i, a, s, r, c];
}
class QM extends Ie {
  constructor(t) {
    super(), Ce(this, t, WM, GM, Pe, { tag: 3, rendererMap: 4 }, FM);
  }
}
function UM(n) {
  De(n, "svelte-1fy4duy", '@font-face{font-family:"TG-TYPE";font-style:normal;font-weight:400;src:local("TG-TYPE-Bold"), url(data:application/font-woff2;charset=utf-8;base64,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) format("woff2")}*{-webkit-tap-highlight-color:transparent}.content__container.svelte-1fy4duy{position:relative;left:50%;top:50%;transform:translate(-50%, -50%);font-family:PingFangSC, Segoe UI, Rototo, sans-serif;transition:opacity 0.2s linear}.content__container.unClickable.svelte-1fy4duy{pointer-events:none !important}.content__container.unClickable.svelte-1fy4duy *{pointer-events:none !important}.content__wrapper.svelte-1fy4duy{pointer-events:none;width:100%;height:100%}.content__container.hide.svelte-1fy4duy{opacity:0;pointer-events:none}.content__container.hide.svelte-1fy4duy *{pointer-events:none !important}.content__container.disable.svelte-1fy4duy{display:none}.content.svelte-1fy4duy{position:relative;width:100%;height:100%;font-size:0.75rem;color:#fff}.content.svelte-1fy4duy:not(.unfolded){pointer-events:none}.content.svelte-1fy4duy:not(.unfolded) *{pointer-events:none !important}.content.unfolded.svelte-1fy4duy{pointer-events:auto;cursor:pointer}');
}
function XM(n) {
  let t, e;
  return {
    c() {
      t = W("div"), y(t, "data-info", "tag content is keep folded"), y(t, "data-id", e = /*tag*/
      n[0].id);
    },
    m(i, s) {
      X(i, t, s);
    },
    p(i, s) {
      s & /*tag*/
      1 && e !== (e = /*tag*/
      i[0].id) && y(t, "data-id", e);
    },
    i: se,
    o: se,
    d(i) {
      i && U(t);
    }
  };
}
function YM(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f, g, p, m, v, b;
  const w = [
    ik,
    tk,
    ek,
    $M,
    KM,
    qM,
    JM
  ], x = [];
  function k(T, S) {
    return S & /*tag, contentTypeMap*/
    9 && (s = null), S & /*tag, contentTypeMap*/
    9 && (r = null), S & /*tag, contentTypeMap*/
    9 && (o = null), S & /*tag, contentTypeMap*/
    9 && (a = null), S & /*tag, contentTypeMap*/
    9 && (l = null), S & /*tag, contentTypeMap*/
    9 && (c = null), S & /*tag, contentTypeMap*/
    9 && (h = null), s == null && (s = !!(["Text"].includes(
      /*tag*/
      T[0].contentType
    ) || ["Text"].includes(
      /*contentTypeMap*/
      T[3].get(
        /*tag*/
        T[0].contentType
      )
    ))), s ? 0 : (r == null && (r = !!(["ImageText", "Image", "Video"].includes(
      /*tag*/
      T[0].contentType
    ) || ["ImageText", "Image", "Video"].includes(
      /*contentTypeMap*/
      T[3].get(
        /*tag*/
        T[0].contentType
      )
    ))), r ? 1 : (o == null && (o = !!(["Audio"].includes(
      /*tag*/
      T[0].contentType
    ) || ["Audio"].includes(
      /*contentTypeMap*/
      T[3].get(
        /*tag*/
        T[0].contentType
      )
    ))), o ? 2 : (a == null && (a = !!(["Marketing"].includes(
      /*tag*/
      T[0].contentType
    ) || ["Marketing"].includes(
      /*contentTypeMap*/
      T[3].get(
        /*tag*/
        T[0].contentType
      )
    ))), a ? 3 : (l == null && (l = !!(["Link", "VRLink", "PanoLink", "Sticker"].includes(
      /*tag*/
      T[0].contentType
    ) || ["Link", "VRLink", "PanoLink", "Sticker"].includes(
      /*contentTypeMap*/
      T[3].get(
        /*tag*/
        T[0].contentType
      )
    ))), l ? 4 : (c == null && (c = !!(["MediaPlane", "MediaModel"].includes(
      /*tag*/
      T[0].contentType
    ) || ["MediaPlane", "MediaModel"].includes(
      /*contentTypeMap*/
      T[3].get(
        /*tag*/
        T[0].contentType
      )
    ))), c ? 5 : (h == null && (h = !!(["Panorama"].includes(
      /*tag*/
      T[0].contentType
    ) || ["Panorama"].includes(
      /*contentTypeMap*/
      T[3].get(
        /*tag*/
        T[0].contentType
      )
    ))), h ? 6 : -1))))));
  }
  return ~(d = k(n, -1)) && (f = x[d] = w[d](n)), {
    c() {
      var T;
      t = W("div"), e = W("div"), i = W("div"), f && f.c(), y(i, "class", "content svelte-1fy4duy"), ye(
        i,
        "unfolded",
        /*tag*/
        (T = n[0].state) == null ? void 0 : T.unfolded
      ), y(e, "class", "content__wrapper svelte-1fy4duy"), y(t, "class", g = bt(ni(
        "content__container",
        /*tag*/
        n[0].className
      )) + " svelte-1fy4duy"), y(t, "data-id", p = /*tag*/
      n[0].id), ye(
        t,
        "disable",
        /*tag*/
        n[0].enabled === !1
      ), ye(
        t,
        "hide",
        /*isHide*/
        n[5]
      ), ye(
        t,
        "unClickable",
        /*tag*/
        n[0].config.clickable === !1
      ), Q(
        t,
        "width",
        /*tag*/
        n[0].stickType === "Plane" || /*tag*/
        n[0].contentType === "MediaModel" ? "100%" : 0
      ), Q(
        t,
        "height",
        /*tag*/
        n[0].stickType === "Plane" || /*tag*/
        n[0].contentType === "MediaModel" ? "100%" : 0
      );
    },
    m(T, S) {
      X(T, t, S), R(t, e), R(e, i), ~d && x[d].m(i, null), n[16](t), m = !0, v || (b = Oe(
        t,
        "click",
        /*click_handler_1*/
        n[17],
        !0
      ), v = !0);
    },
    p(T, S) {
      var z;
      let V = d;
      d = k(T, S), d === V ? ~d && x[d].p(T, S) : (f && (Me(), Y(x[V], 1, 1, () => {
        x[V] = null;
      }), ke()), ~d ? (f = x[d], f ? f.p(T, S) : (f = x[d] = w[d](T), f.c()), F(f, 1), f.m(i, null)) : f = null), (!m || S & /*tag*/
      1) && ye(
        i,
        "unfolded",
        /*tag*/
        (z = T[0].state) == null ? void 0 : z.unfolded
      ), (!m || S & /*tag*/
      1 && g !== (g = bt(ni(
        "content__container",
        /*tag*/
        T[0].className
      )) + " svelte-1fy4duy")) && y(t, "class", g), (!m || S & /*tag*/
      1 && p !== (p = /*tag*/
      T[0].id)) && y(t, "data-id", p), (!m || S & /*tag, tag*/
      1) && ye(
        t,
        "disable",
        /*tag*/
        T[0].enabled === !1
      ), (!m || S & /*tag, isHide*/
      33) && ye(
        t,
        "hide",
        /*isHide*/
        T[5]
      ), (!m || S & /*tag, tag*/
      1) && ye(
        t,
        "unClickable",
        /*tag*/
        T[0].config.clickable === !1
      ), S & /*tag*/
      1 && Q(
        t,
        "width",
        /*tag*/
        T[0].stickType === "Plane" || /*tag*/
        T[0].contentType === "MediaModel" ? "100%" : 0
      ), S & /*tag*/
      1 && Q(
        t,
        "height",
        /*tag*/
        T[0].stickType === "Plane" || /*tag*/
        T[0].contentType === "MediaModel" ? "100%" : 0
      );
    },
    i(T) {
      m || (F(f), m = !0);
    },
    o(T) {
      Y(f), m = !1;
    },
    d(T) {
      T && U(t), ~d && x[d].d(), n[16](null), v = !1, b();
    }
  };
}
function ZM(n) {
  let t, e, i, s, r, o, a;
  return e = new QM({
    props: {
      tag: gt(
        /*tag*/
        n[0]
      ),
      rendererMap: (
        /*rendererMap*/
        n[2]
      )
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", i = bt(ni(
        "content__container",
        /*tag*/
        n[0].className
      )) + " svelte-1fy4duy"), y(t, "data-id", s = /*tag*/
      n[0].id), ye(
        t,
        "custom-tag-disable",
        /*tag*/
        n[0].enabled === !1
      ), ye(
        t,
        "custom-tag-hide",
        /*isHide*/
        n[5]
      );
    },
    m(l, c) {
      X(l, t, c), me(e, t, null), n[14](t), r = !0, o || (a = Oe(
        t,
        "click",
        /*click_handler*/
        n[15]
      ), o = !0);
    },
    p(l, c) {
      const h = {};
      c & /*tag*/
      1 && (h.tag = gt(
        /*tag*/
        l[0]
      )), c & /*rendererMap*/
      4 && (h.rendererMap = /*rendererMap*/
      l[2]), e.$set(h), (!r || c & /*tag*/
      1 && i !== (i = bt(ni(
        "content__container",
        /*tag*/
        l[0].className
      )) + " svelte-1fy4duy")) && y(t, "class", i), (!r || c & /*tag*/
      1 && s !== (s = /*tag*/
      l[0].id)) && y(t, "data-id", s), (!r || c & /*tag, tag*/
      1) && ye(
        t,
        "custom-tag-disable",
        /*tag*/
        l[0].enabled === !1
      ), (!r || c & /*tag, isHide*/
      33) && ye(
        t,
        "custom-tag-hide",
        /*isHide*/
        l[5]
      );
    },
    i(l) {
      r || (F(e.$$.fragment, l), r = !0);
    },
    o(l) {
      Y(e.$$.fragment, l), r = !1;
    },
    d(l) {
      l && U(t), ge(e), n[14](null), o = !1, a();
    }
  };
}
function JM(n) {
  let t, e;
  return t = new HM({
    props: { tag: gt(
      /*tag*/
      n[0]
    ) }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*tag*/
      1 && (r.tag = gt(
        /*tag*/
        i[0]
      )), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function qM(n) {
  let t, e;
  return t = new fM({
    props: { tag: gt(
      /*tag*/
      n[0]
    ) }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*tag*/
      1 && (r.tag = gt(
        /*tag*/
        i[0]
      )), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function KM(n) {
  let t, e;
  return t = new TM({
    props: { tag: gt(
      /*tag*/
      n[0]
    ) }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*tag*/
      1 && (r.tag = gt(
        /*tag*/
        i[0]
      )), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function $M(n) {
  let t, e;
  return t = new H9({
    props: { tag: gt(
      /*tag*/
      n[0]
    ) }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*tag*/
      1 && (r.tag = gt(
        /*tag*/
        i[0]
      )), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function ek(n) {
  let t, e;
  return t = new cM({
    props: { tag: gt(
      /*tag*/
      n[0]
    ) }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*tag*/
      1 && (r.tag = gt(
        /*tag*/
        i[0]
      )), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function tk(n) {
  let t, e;
  return t = new R9({
    props: { tag: gt(
      /*tag*/
      n[0]
    ) }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*tag*/
      1 && (r.tag = gt(
        /*tag*/
        i[0]
      )), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function ik(n) {
  let t, e;
  return t = new t8({
    props: { tag: gt(
      /*tag*/
      n[0]
    ) }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*tag*/
      1 && (r.tag = gt(
        /*tag*/
        i[0]
      )), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function nk(n) {
  let t, e, i, s, r;
  const o = [ZM, YM, XM], a = [];
  function l(c, h) {
    return h & /*tag, rendererMap*/
    5 && (t = null), t == null && (t = !!/*tag*/
    (c[0].element || /*rendererMap*/
    c[2].has(
      /*tag*/
      c[0].contentType
    ))), t ? 0 : (
      /*haveContent*/
      c[4] ? 1 : 2
    );
  }
  return e = l(n, -1), i = a[e] = o[e](n), {
    c() {
      i.c(), s = Fe();
    },
    m(c, h) {
      a[e].m(c, h), X(c, s, h), r = !0;
    },
    p(c, [h]) {
      let d = e;
      e = l(c, h), e === d ? a[e].p(c, h) : (Me(), Y(a[d], 1, 1, () => {
        a[d] = null;
      }), ke(), i = a[e], i ? i.p(c, h) : (i = a[e] = o[e](c), i.c()), F(i, 1), i.m(s.parentNode, s));
    },
    i(c) {
      r || (F(i), r = !0);
    },
    o(c) {
      Y(i), r = !1;
    },
    d(c) {
      a[e].d(c), c && U(s);
    }
  };
}
function sk(n, t, e) {
  let i, s, r, o, a, l, { tag: c } = t, { hooks: h } = t, { rendererMap: d = /* @__PURE__ */ new Map() } = t, { contentTypeMap: f = /* @__PURE__ */ new Map() } = t, { state: g } = t, { mediaStore: p } = t, { temporaryState: m } = t;
  kc("hooks", h), kc("mediaStore", p);
  let v, b;
  function w(z) {
    z ? h.emit("exposure", { id: o, type: "start" }) : h.emit("exposure", { id: o, type: "end" });
  }
  function x(z, O, A) {
    var C, I;
    return !(!z.enabled || !O.visible || !O.enabled || !A.visible || !((C = z.state) != null && C.visible) || ((I = z.temporaryState) == null ? void 0 : I.visible) === !1 || z instanceof F1 && z.loading);
  }
  function k(z) {
    Ze[z ? "unshift" : "push"](() => {
      c.contentDom = z, e(0, c);
    });
  }
  const T = (z) => h.emit("click", { event: z, target: "TagContent", tag: c });
  function S(z) {
    Ze[z ? "unshift" : "push"](() => {
      c.contentDom = z, e(0, c);
    });
  }
  const V = (z) => {
    c.entryFromModel && di(c.five.state.mode) ? (z.stopPropagation(), c.find({ targetMode: "Panorama" })) : h.emit("click", { event: z, target: "TagContent", tag: c });
  };
  return n.$$set = (z) => {
    "tag" in z && e(0, c = z.tag), "hooks" in z && e(1, h = z.hooks), "rendererMap" in z && e(2, d = z.rendererMap), "contentTypeMap" in z && e(3, f = z.contentTypeMap), "state" in z && e(6, g = z.state), "mediaStore" in z && e(7, p = z.mediaStore), "temporaryState" in z && e(8, m = z.temporaryState);
  }, n.$$.update = () => {
    var z, O, A, C, I, E, D, L, N, G, Z;
    n.$$.dirty & /*tag*/
    1 && e(12, i = (z = c.state) == null ? void 0 : z.unfolded), n.$$.dirty & /*tag*/
    1 && e(11, s = (O = c.state) == null ? void 0 : O.visible), n.$$.dirty & /*state, temporaryState, tag*/
    321 && e(13, r = g.visible && m.visible && ((A = c.state) == null ? void 0 : A.visible)), n.$$.dirty & /*tag*/
    1 && (o = c.id), n.$$.dirty & /*tag, state, temporaryState*/
    321 && e(5, a = !x(c, g, m)), n.$$.dirty & /*isVisible*/
    8192 && w(r), n.$$.dirty & /*tag, unfolded, lastUnfoldedState, visible, lastVisibleState*/
    7681 && c.hooks && (i !== void 0 && i !== b && (e(10, b = i), i ? (I = (C = c.hooks).emit) == null || I.call(C, "unfolded") : (D = c == null ? void 0 : (E = c.hooks).emit) == null || D.call(E, "folded")), s !== void 0 && s !== v && (e(9, v = s), s ? (N = (L = c.hooks).emit) == null || N.call(L, "show") : (Z = (G = c.hooks).emit) == null || Z.call(G, "hide"))), n.$$.dirty & /*tag*/
    1 && e(4, l = (() => !(typeof c.config.unfoldedConfig == "object" && c.config.unfoldedConfig.keep === "folded"))());
  }, [
    c,
    h,
    d,
    f,
    l,
    a,
    g,
    p,
    m,
    v,
    b,
    s,
    i,
    r,
    k,
    T,
    S,
    V
  ];
}
let cd = class extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      sk,
      nk,
      Pe,
      {
        tag: 0,
        hooks: 1,
        rendererMap: 2,
        contentTypeMap: 3,
        state: 6,
        mediaStore: 7,
        temporaryState: 8
      },
      UM
    );
  }
};
class F1 extends ed {
  constructor(e, i) {
    super(e, i);
    u(this, "loading", !1);
    /** 加载外部模型 */
    u(this, "loadModel", () => $(this, null, function* () {
      var o, a;
      const e = this.data.modelUrl;
      if (!e || (this.loading = !0, yield ui(this.five), !this.plugin.tags.includes(this)))
        return;
      const i = mI(e).then((l) => $(this, null, function* () {
        var d;
        const c = Object.assign(l.scene, {
          customID: this.id,
          isTagModel: !0,
          removeEventListener: this.getConfig().clickable === !1 ? () => {
          } : this.addObjectClickHandler(this, l.scene, (f) => {
            this.plugin.hooks.emit("click", { target: "TagModel", tag: this, event: f });
          })
        });
        return new P.Matrix4().fromArray(this.matrix).decompose(c.position, c.quaternion, c.scale), c.updateWorldMatrix(!0, !0), c.visible = this.visible, (d = this.getConfig().modelConfig) != null && d.autoLookAtEnabled && c.lookAt(this.five.camera.position.clone().setY(c.position.y)), c;
      }));
      this.model = { promise: i };
      const s = yield i;
      if (this.loading = !1, ((o = this.model) == null ? void 0 : o.promise) !== i || !this.plugin.tags.includes(this))
        return;
      this.model.object = s;
      const r = this.plugin.gltfObjectGroup.children.find((l) => l.customID === this.id);
      if (r && (this.plugin.gltfObjectGroup.remove(r), r.removeEventListener()), Ms(this)) {
        const l = this.data.mediaPosition.map(Xn);
        if (this.computeRenderType() === "Mesh" && !this.mediaPlane) {
          this.mediaPlane = new Yc(this.data.mediaData[0].url, l, { objectFit: this.data.objectFit });
          const c = new P.Vector3().addVectors(l[0], l[2]).divideScalar(2);
          this.mediaPlane.position.copy(c), s.add(this.mediaPlane);
        }
        if (this.computeRenderType() !== "Mesh") {
          (a = this.tag3DContentSvelte) == null || a.dispose();
          const c = document.createElement("div");
          c.classList.add("tag-media-container");
          const h = "black";
          c.style.backgroundColor = h, c.style.border = `3px solid ${h}`;
          const d = _({ mode: "behind", cornerPoints: l, container: c }, this.config.tag3DConfig), f = this.computeRenderType() === "BehindDom" || d.mode === "behind" ? "behind" : "front", g = new w1(de(_({}, d), { mode: f })), p = this.computeNormal();
          g.position.add(p.clone().setLength(Go.Z_FIGHTING_OFFSET)), s.add(g);
          let m;
          g.mode === "behind" && this.config.clickable !== !1 && (m = this.addObjectClickHandler(this, g, (b) => {
            this.plugin.hooks.emit("click", { event: b, target: "TagContent", tag: this });
          }));
          const v = new cd({
            target: c,
            props: {
              tag: this,
              hooks: this.plugin.hooks,
              /** 模型标签要等模型加载好之后再展示 */
              state: this.plugin.state,
              mediaStore: this.plugin.mediaStore,
              temporaryState: this.plugin.temporaryState
            }
          });
          this.tag3DContentSvelte = {
            svelteApp: v,
            domContainer: {
              css3DObject: g
            },
            css3DInstance: g,
            initialNormal: p,
            currentNormal: p,
            dispose: () => {
              v.$destroy(), g.dispose(), m == null || m();
            }
          };
        }
      }
      return this.plugin.gltfObjectGroup.add(s), s;
    }));
    this.state.unfolded = !0, Vo(this.five), this.loadModel().then(() => this.updateVisible());
  }
  applyVisible() {
    var e, i;
    (e = this.tag3DContentSvelte) == null || e.svelteApp.$set({ tag: this, state: this.plugin.state, temporaryState: this.plugin.temporaryState }), (i = this.model) != null && i.object && (this.model.object.visible = this.visible);
  }
  set(...e) {
    super.set(...e), this.loadModel();
  }
  setData(...e) {
    var s;
    super.setData(...e);
    const i = this.data.mediaPosition.map(Xn);
    this.computeRenderType() === "Mesh" ? this.mediaPlane && this.mediaPlane.src !== this.data.mediaData[0].url && (this.mediaPlane.removeFromParent(), this.mediaPlane = new Yc(this.data.mediaData[0].url, i, { objectFit: this.data.objectFit })) : (s = this.tag3DContentSvelte) == null || s.svelteApp.$set({ tag: this });
  }
  computeNormal() {
    return u1(this.data.mediaPosition);
  }
}
const rk = /* @__PURE__ */ new Map(), ok = /* @__PURE__ */ new Map();
class ak extends ed {
  constructor(t, e) {
    super(t, e), this.state.unfolded = !0, this.loadModel();
  }
  applyVisible() {
    var e, i, s, r, o, a;
    this.computeRenderType() === "Mesh" ? ((i = (e = this.data.mediaData) == null ? void 0 : e[0]) == null ? void 0 : i.type) === "Video" ? this.renderVideoPlane() : ((r = (s = this.data.mediaData) == null ? void 0 : s[0]) == null ? void 0 : r.type) === "Image" && this.renderImagePlane() : ((o = this.tag3DContentSvelte) == null || o.svelteApp.$set({ tag: this, state: this.plugin.state, temporaryState: this.plugin.temporaryState }), (a = this.tag3DContentSvelte) != null && a.css3DInstance && (this.tag3DContentSvelte.css3DInstance.visible = this.visible, this.five.needsRender = !0));
  }
  set(t, e = !0) {
    super.set(t, e), ui(this.five).then(() => {
      this.tag3DContentSvelte && (t.data ? this.tag3DContentSvelte.svelteApp.$set({ tag: this, state: this.plugin.state, temporaryState: this.plugin.temporaryState }) : t.position && this.loadModel());
    });
  }
  setData(...t) {
    var i, s, r, o, a;
    super.setData(...t), this.computeRenderType() === "Mesh" ? ((s = (i = this.data.mediaData) == null ? void 0 : i[0]) == null ? void 0 : s.type) === "Video" ? this.renderVideoPlane() : ((o = (r = this.data.mediaData) == null ? void 0 : r[0]) == null ? void 0 : o.type) === "Image" && this.renderImagePlane() : (a = this.tag3DContentSvelte) == null || a.svelteApp.$set({ tag: this });
  }
  loadModel() {
    return $(this, null, function* () {
      var e, i, s, r, o, a;
      if (yield ui(this.five), this.computeRenderType() === "Mesh")
        ((i = (e = this.data.mediaData) == null ? void 0 : e[0]) == null ? void 0 : i.type) === "Video" ? this.renderVideoPlane() : ((r = (s = this.data.mediaData) == null ? void 0 : s[0]) == null ? void 0 : r.type) === "Image" && this.renderImagePlane();
      else {
        Vo(this.five);
        const l = this.position.map(Qe);
        (a = (o = this.tag3DContentSvelte) == null ? void 0 : o.dispose) == null || a.call(o);
        const c = document.createElement("div");
        c.classList.add("tag-media-container");
        const h = _({ mode: "front", cornerPoints: l, container: c }, this.config.tag3DConfig), d = this.computeRenderType() === "BehindDom" || h.mode === "behind" ? "behind" : "front", f = new w1(de(_({}, h), { mode: d })), g = this.computeNormal();
        f.position.add(g.clone().setLength(Go.Z_FIGHTING_OFFSET)), this.plugin.group.add(f);
        let p;
        f.mode === "behind" && this.config.clickable !== !1 && (p = this.addObjectClickHandler(this, f, (v) => {
          this.plugin.hooks.emit("click", { event: v, target: "TagContent", tag: this });
        }));
        const m = new cd({
          target: c,
          props: {
            tag: this,
            hooks: this.plugin.hooks,
            /** 模型标签要等模型加载好之后再展示 */
            state: this.plugin.state,
            mediaStore: this.plugin.mediaStore,
            temporaryState: this.plugin.temporaryState
          }
        });
        this.tag3DContentSvelte = {
          svelteApp: m,
          domContainer: {
            css3DObject: f
          },
          css3DInstance: f,
          initialNormal: g,
          currentNormal: g,
          dispose: () => {
            m.$destroy(), f.dispose(), p == null || p();
          }
        }, this.five.needsRender = !0;
      }
    });
  }
  renderVideoPlane() {
    var a;
    const t = this.data.mediaData[0];
    if (!t)
      return;
    const { url: e } = t;
    if (!e)
      return;
    const i = this.currentVisible, s = (() => !!(this.mediaPlane && !i))(), r = (() => !!(!this.mediaPlane && i))(), o = (() => !!(this.mediaPlane && this.mediaPlane.src !== e))();
    if ((s || o) && this.mediaPlane && (this.plugin.imagePlaneGroup.remove(this.mediaPlane), this.mediaPlane.dispose(), this.mediaPlane.removeFromParent(), this.mediaPlane = void 0), r || o) {
      const l = this.position.map(Xn), c = new b1(e, l, {
        videoCoverSrc: t.videoCoverUrl,
        playButton: this.data.playIcon,
        paused: !((a = this.data.autoplayConfig) != null && a.autoplayVideo),
        objectFit: this.data.objectFit,
        videoTextureMap: rk,
        ImageTextureMap: ok,
        domEvents: this.plugin.domEvents
      });
      this.plugin.domEvents.addAutoBindEventListener(
        c,
        "click",
        (d) => {
          var f;
          !((f = c.videoInstance) != null && f.paused) && c.videoInstance.muted === !1 && this.plugin.hooks.emit("playStateChange", { event: d, state: "playing", tag: this, mediaInstance: c.videoInstance });
        }
      ), c.onVideoReady = (d) => {
        d.addEventListener("play", (f) => {
          this.plugin.mediaStore.set({ currentMediaElement: c.videoInstance }), this.plugin.hooks.emit("playStateChange", { event: f, state: "playing", tag: this, mediaInstance: c.videoInstance });
        }), d.addEventListener("pause", (f) => {
          this.plugin.hooks.emit("playStateChange", { event: f, state: "paused", tag: this, mediaInstance: c.videoInstance });
        }), d.addEventListener("ended", (f) => {
          this.plugin.hooks.emit("playStateChange", { event: f, state: "paused", tag: this, mediaInstance: c.videoInstance });
        });
      };
      const h = (d) => (this.five.on("renderFrame", d), () => this.five.off("renderFrame", d));
      c.initialRenderHooks(h), this.mediaPlane = c, this.play = () => c.play(), this.pause = () => c.pause(), this.plugin.imagePlaneGroup.add(this.mediaPlane);
    }
    this.five.needsRender = !0;
  }
  renderImagePlane() {
    const t = this.data.mediaData[0];
    if (!t)
      return;
    const { url: e } = t;
    if (!e)
      return;
    const i = this.position.map(Xn), s = this.currentVisible, r = (() => !!(this.mediaPlane && !s))(), o = (() => !!(!this.mediaPlane && s))(), a = (() => !!(this.mediaPlane && this.mediaPlane.src !== e))();
    (r || a) && this.mediaPlane && (this.plugin.imagePlaneGroup.remove(this.mediaPlane), this.mediaPlane.dispose(), this.mediaPlane.removeFromParent(), this.mediaPlane = void 0), (o || a) && (this.mediaPlane = new Yc(e, i, { objectFit: this.data.objectFit }), this.getConfig().clickable !== !1 && this.plugin.domEvents.addAutoBindEventListener(
      this.mediaPlane,
      "click",
      (l) => {
        this.plugin.hooks.emit("click", { tag: this, target: "TagContent", event: l.origDomEvent });
      },
      { noEmitWhenHide: !0 }
    ), this.plugin.imagePlaneGroup.add(this.mediaPlane)), this.five.needsRender = !0;
  }
  computeNormal() {
    return u1(this.position);
  }
}
function lk(n) {
  De(n, "svelte-18ithb3", '@charset "UTF-8";.tag-point-click-helper.svelte-18ithb3.svelte-18ithb3{position:absolute;pointer-events:auto;cursor:pointer;width:141%;height:141%;left:50%;top:50%;transform:translate(-50%, -50%);z-index:1000000}.tag-point-wrapper.svelte-18ithb3.svelte-18ithb3{pointer-events:none;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);cursor:pointer;z-index:1040}.tag-folded-point.svelte-18ithb3.svelte-18ithb3,.tag-unfolded-point.svelte-18ithb3.svelte-18ithb3{transition:all 0.5s}.tag-point-wrapper.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3{display:flex;justify-content:center;align-items:center;position:absolute;width:100%;height:100%;border-radius:50%}.tag-point-wrapper.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:0.3125rem;height:0.3125rem;border-radius:50%;background-color:white}.tag-point-wrapper.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3:before{content:"";position:absolute;width:0.875rem;height:0.875rem;border-radius:50%;background-color:rgba(0, 0, 0, 0.2)}.tag-point-wrapper.folded.svelte-18ithb3 .tag-folded-point.svelte-18ithb3{opacity:1;scale:1}.tag-point-wrapper.folded.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3{opacity:0;scale:1}.tag-point-wrapper.unfolded.svelte-18ithb3 .tag-folded-point.svelte-18ithb3{opacity:0;scale:0.2}.tag-point-wrapper.unfolded.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3{opacity:1;scale:1}.tag-point-wrapper.disable-unfold.svelte-18ithb3 .tag-folded-point.svelte-18ithb3{opacity:1 !important;scale:1 !important}.tag-point-wrapper.disable-unfold.svelte-18ithb3 .tag-unfolded-point.svelte-18ithb3{opacity:0 !important;scale:1 !important}');
}
function ck(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f;
  return s = new Bi({
    props: {
      center: !0,
      blurRadius: 15,
      spreadRadius: 5,
      opacity: 0.3
    }
  }), c = new H1({
    props: {
      icon: (
        /*url*/
        n[7]
      ),
      width: (
        /*width*/
        n[6]
      )
    }
  }), c.$on(
    "iconLoaded",
    /*iconLoaded_handler*/
    n[15]
  ), {
    c() {
      t = W("div"), e = W("div"), i = oe(), ve(s.$$.fragment), r = oe(), o = W("div"), a = oe(), l = W("div"), ve(c.$$.fragment), y(e, "class", "tag-point-click-helper svelte-18ithb3"), y(o, "class", "tag-unfolded-point svelte-18ithb3"), Q(
        o,
        "transition-delay",
        /*folded*/
        (n[8] ? (
          /*foldDelay*/
          n[10]
        ) : 0) + "ms"
      ), y(l, "class", "tag-folded-point svelte-18ithb3"), Q(
        l,
        "transition-delay",
        /*folded*/
        (n[8] ? (
          /*foldDelay*/
          n[10]
        ) : 0) + "ms"
      ), y(t, "class", "tag-point-wrapper svelte-18ithb3"), ye(
        t,
        "unfolded",
        /*unfolded*/
        n[5]
      ), ye(
        t,
        "folded",
        /*folded*/
        n[8]
      ), ye(
        t,
        "disable-unfold",
        /*tag*/
        n[1].isPopoverConfigEnabled()
      );
    },
    m(g, p) {
      X(g, t, p), R(t, e), n[14](e), R(t, i), me(s, t, null), R(t, r), R(t, o), R(t, a), R(t, l), me(c, l, null), h = !0, d || (f = [
        Oe(
          e,
          "click",
          /*click_handler*/
          n[12]
        ),
        Oe(
          e,
          "mouseenter",
          /*mouseenter_handler*/
          n[13]
        ),
        Oe(e, "mouseleave", function() {
          Ri(
            /*handleMouseLeave*/
            n[3]
          ) && n[3].apply(this, arguments);
        })
      ], d = !0);
    },
    p(g, [p]) {
      n = g, p & /*folded*/
      256 && Q(
        o,
        "transition-delay",
        /*folded*/
        (n[8] ? (
          /*foldDelay*/
          n[10]
        ) : 0) + "ms"
      );
      const m = {};
      p & /*url*/
      128 && (m.icon = /*url*/
      n[7]), p & /*width*/
      64 && (m.width = /*width*/
      n[6]), c.$set(m), p & /*folded*/
      256 && Q(
        l,
        "transition-delay",
        /*folded*/
        (n[8] ? (
          /*foldDelay*/
          n[10]
        ) : 0) + "ms"
      ), (!h || p & /*unfolded*/
      32) && ye(
        t,
        "unfolded",
        /*unfolded*/
        n[5]
      ), (!h || p & /*folded*/
      256) && ye(
        t,
        "folded",
        /*folded*/
        n[8]
      ), (!h || p & /*tag*/
      2) && ye(
        t,
        "disable-unfold",
        /*tag*/
        n[1].isPopoverConfigEnabled()
      );
    },
    i(g) {
      h || (F(s.$$.fragment, g), F(c.$$.fragment, g), h = !0);
    },
    o(g) {
      Y(s.$$.fragment, g), Y(c.$$.fragment, g), h = !1;
    },
    d(g) {
      g && U(t), n[14](null), ge(s), ge(c), d = !1, vt(f);
    }
  };
}
function hk(n, t, e) {
  var z, O;
  let i, s, r, o;
  const a = qi("hooks");
  let { tag: l } = t, c, h = !1;
  const d = () => {
    c !== void 0 && clearTimeout(c), h = !0, c = setTimeout(
      () => {
        h = !1;
      },
      800
    );
  }, f = (A) => {
    h || (l.entryFromModel && di(l.five.state.mode) ? l.find({ targetMode: "Panorama" }).then(() => l.unfoldAndFoldOthers()) : a.emit("click", { event: A, target: "TagPoint", tag: l }));
  }, g = (() => l.contentType === "Text" && l.data.appearance === "plane" ? 500 : 800)();
  let { tagPointClickHelper: p = null } = t, { handleMouseEnter: m = () => {
  } } = t, { handleMouseLeave: v = () => {
  } } = t, { handleTagPointClick: b = () => {
  } } = t;
  const w = () => !0, x = (O = (z = l.config.popoverConfig) == null ? void 0 : z.beforeOpen) != null ? O : w, k = (A) => {
    b(A), f(A);
  }, T = (A) => {
    x(l) && m(A);
  };
  function S(A) {
    Ze[A ? "unshift" : "push"](() => {
      p = A, e(0, p);
    });
  }
  function V(A) {
    An.call(this, n, A);
  }
  return n.$$set = (A) => {
    "tag" in A && e(1, l = A.tag), "tagPointClickHelper" in A && e(0, p = A.tagPointClickHelper), "handleMouseEnter" in A && e(2, m = A.handleMouseEnter), "handleMouseLeave" in A && e(3, v = A.handleMouseLeave), "handleTagPointClick" in A && e(4, b = A.handleTagPointClick);
  }, n.$$.update = () => {
    var A, C, I, E;
    n.$$.dirty & /*tag*/
    2 && e(5, i = (A = l.state) == null ? void 0 : A.unfolded), n.$$.dirty & /*unfolded*/
    32 && e(8, s = !i), n.$$.dirty & /*tag*/
    2 && e(7, r = (I = (C = l.style) == null ? void 0 : C.point) != null && I.url ? (E = l.style) == null ? void 0 : E.point : { url: GC }), n.$$.dirty & /*tag*/
    2 && e(6, o = (() => {
      var N, G, Z, ee;
      const D = (G = (N = l.style) == null ? void 0 : N.point) == null ? void 0 : G.width;
      if (typeof D == "number")
        return D;
      const L = (ee = (Z = l.style) == null ? void 0 : Z.point) == null ? void 0 : ee.size;
      if (typeof L == "number")
        return L;
      if (L === "S")
        return 18;
      if (L === "M")
        return 20;
      if (L === "L")
        return 24;
      if (L === "XL")
        return 28;
    })());
  }, d(), [
    p,
    l,
    m,
    v,
    b,
    i,
    o,
    r,
    s,
    f,
    g,
    x,
    k,
    T,
    S,
    V
  ];
}
class dk extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      hk,
      ck,
      Pe,
      {
        tag: 1,
        tagPointClickHelper: 0,
        handleMouseEnter: 2,
        handleMouseLeave: 3,
        handleTagPointClick: 4
      },
      lk
    );
  }
}
const uk = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAHgAAAAC3G9N3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACfklEQVRYCe2Yu2tVQRCHb1QQFQRBKzEkooJoISL+ATYW/kXBSrBKLxZaidaKhSCxs1Asg4qgRhHBB6IkKr4f3yd3vCfHezfnsTGnuD/4ZWf3zO7M7M4+biZ6vd5muBsehydg1/EdB6/3uTBR8vYg9dPQoLqILzg1A++Gc+tD6JevKR/AY/BXB3kSn+bhX5QD8MNLuAnugz87xMv4cg0uw7AAVDDKo3Ar7MJKPMWPWeiELsOoAFS8D00l98laBvEN+6fgO/gPRgWg4iL8Ct3Ya5lKl7B/Bw7FhqGtg8ariAZwYND0X6V7WNOHkVg38svgw1nED/2qyykDIRfLsmy93Falvza1nUQqhaLjZ4Q38HA0UOqQ+0LExoqy2PaDipNkGfp+r9L/PHqPVE6hSgD2fw63w51QR7wN3dw6EqVOhhylQSmL0K3S/zb6ydT5MyJ/qgagvhfcEbjRCogZjzLVFjqWRbnYJ+S3CGegAa+IOgE44DPo/RCOrEZp3r+ClVAnAAd0djy5puBqOD/HuLdgZdQNwIEfQ4/WLdB8zsUXjHUBRoohrowmAWhgAbofRI6VMD3PwSUHrIMmATi+Z7S39B6YYwV8pHlp1UbTADTkhp6GPvjarMIT+l+BjdAmAA1q/FDfsmOZCuVgUu3v0b8IvSwboW0AGvaVuDdh3YCGwXYvK1eyMdoGoGF/xW2D3tTl2U/V59G/CVvBMz0HbjDILujRWgUfUbJPa+RYAZ0w970998Mqp5I/D30gtkauAHTEH0BuyimYSp05vj+EWZAzAB1yP/jc2AFNz2Ign6ibNj4KsyGeutkGLAw0iewdIfx/jkeuz/AxxjMwnoGMM/AbzDbNM/bhiRQAAAAASUVORK5CYII=", fk = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAMAAABdem3zAAAAb1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt6r1GAAAAJXRSTlMApb6gupm3s7CprZWRfoeOg4qdenZzLG9ka04KJR4EET04MBlfDzTkzgAAAMpJREFUOMvd0dsSgiAQBuA1o7KMTJRUEE+9/zOGjhmjIHvdtyizM1zAv/C3lOS8BjxZlNpbAhJ/zTig1PkCdS1RZotSgF/FDBXiAXcT8z6jyZLp5PfPGthXJCsF7GrpRgs7BvrcoAM4qexhkSl3orGVM1t5c5COEVPiQIU9UZISvXRNi6S/3pptF87S8dNl9p1lxCQIw2CsadfMnmwHzoJdbJNo5LHKto6uHlENBhVfvGJlJnpGMLLtTyg9zPj5iHLhoAmeHw9YORcf/XMbuOSlzkgAAAAASUVORK5CYII=", pk = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACtUlEQVRYCcWXzUtWQRSHb1ZWL1FYIH2AkSaEBbkMsTYFQVCbdkVQ7Vr3L/RXRQURIrVopxAuBEmIwCBqkfZBz2/0yLV35oz39X4c+HnHuXPOM2c+ztWi6MZ6Q91wi/GuwLe6SPgy0NdtZzwN9LmyPaAfLZg4j9A9tB+1Ah6D8wyNC2jWdMZ3AT1Ahwxoz6bAIwCeoisoyoh22qwGfF7F7zE66vnXCe4Buo9m0UEPqnd1gSeJ9QSNKij2C7nwvYLlfxupElWKVWkwwct2ml8eorOlzt9b7cOlvmhzUPA1oinT/6+J4oUCEaWVOquCdU1UfSZQDKCM1V/rHqu4qyAcQSmzRNyDJWcbmAqkfl2Tm0jg3PjaMladvYOOb0GzmTBOlh3nZaAMdU3Ke5nbO4uXG1ekvseTAG+gqmbXKeuXAs9kPeMDLOPsUsfA2le3wMeZodcy1lK7FgMfcz3yL//khxTJPU755pZQS10+jKk4UfB6cvRmRXJeh1cDZ7yMuwf3wFZAcisTzVjOb7zozjs71QMdLsVdQq8cwJ5feQfhC9FX0Xmk76vdAPmoHdNf+vch+1zGxoQ+D4x/8Q0tIN3rU8j2LhXQTrXFTY0bsgHETJr26yNaQ+eQskkFVMaC6+mtzK7AxAimpV9EZ9AJFIMLqv7cylQCE6/4iT6gDXQBGcgm0UjGcLZthZayn0AqsQamGSZTe8YKbPaDxjukrJW94LYCte4xcftMAB083fuLSAdPcFlth2szXPznV7rn0Uk0hhpdauLvMF07HbzP6BIaRrb3fc/d3GP8K9knRs8h3XkVnT6o+poAEzdcu7c8de3sz+IdE2gKLLhMB+89mkL6L2Qb3jQYVqj3L3nqPxBNIMDbAMMKtVsHTx+c60gHr3XTnr9oK+NydvrYjHYB1iS+l2fSZrv3D/+KTyvCdHWgAAAAAElFTkSuQmCC", mk = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACpklEQVRYCcWYPYwOURSGP38Rv4lEsZoVkq0oNEQjEopNFCQSlUIkJCqFUiLR0ah1SIROgWQLQSNBKUIhGwUNUZD4K/w/b3wnmZ1v7tx3xsw4ybsz994z57nn3J9lR6PRaCUa3BZD3Dw4FaDAs/8DLOYdtHVouDJeis6hbUPClwA7gjSBPWgFeop+oV5NwKIdoHEBTRc7+3iPjJXhb6TnWqTsv6EXqBcrZxwQrfthdBqti84unylwMLbwch7tjI6unjmwOKvRCXQMdXbLOeDvAGXb0Rk0o8a/WtXm0iaLjabNJskWoeVoB9IeeIlijNdm5mS8bBzyRyH0Xt5PoQ2FvkavDjhKXQ48RcdJtKs84LQdcGSs8pZNS7UPaeM1OnYOODIulro8gY10HEf2LxsHXJdxcQJraBxE+1H22DlgBf+J6jKWT1RGWR9F0+pMmQNWQK1l1Rqn4q5i4BBKlt4Bp4I7/Tp2M1WODjjWOFfqqvjq240mquWAVWqt8cTH9Dmm225T2dEB6xutcc6iMlV+gi8wF9xkVy8ApBou2Mk4xVD/x/KgA44Stl3jz0BftwHHxdB2Vz8sQ9V2Mo7v2mR8j4/nI0Dx6QRTqZV1LuPwU/wv6DaaKLEGZQ44Sv33i/TPmNwzXO6ir2lXDxyZaJJ1WWvsFhI4a00yroO+gnQDfcgSxw4OuC5jXSxz6IELDD8HLN+qm+st/VfRGzk0NQesTRM3V5Rbx0SZRrsp19rVxaDvaVxC88XONu9OxrHGjwBcR7XHxJ2EA9Zdexk9doM6fjnwc4JcRPYxcaDySYG1aa4hXQi9WBVYl4H+HJG8Z7uYSRl8k6BXUOtj4k4qwNqpZ9ET98Mu/O4TJPkP7y4AVTF0I61HKvGgJvAn9G5Q6hiW/Z9dH5P6A8K2bfEUA9VoAAAAAElFTkSuQmCC", gk = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAHgAAAAC3G9N3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACfElEQVRYCe2XP2sVQRTFd0VsIgmpTAqx1EAStLAIpowgFmohFkEQ0+UbBEEJCpJvkE4REguVoBY2EaysLJSkSCzFQq1EMQg2z9+Jc2EyziSzb/eZJ7wLlzv37v1zzuy82aRstVr9RVGModfQGfR/kHuAfICulz5ayJzBf4oe9uNdtP4BlktlWb42TDsIKAiJs5gnltBl9jLgV31MfxHQQ0jcxsz6iV2wXgT8rRBHisAhEl+gI2HBPvkbzD0PgV/h/CgBJfEWjmOeoyKznyLQFwD/PgYiSUDJkLiOmYsV/sPYAuDvp+btSkBFkFDx6VSDDsffAF6bmJQcAkNUP0J1tbZcJ6uTr7VZPba1nxuLhblhT12ZVyDwWYkpsaLU8+04b0FX651dk5p/eBPwO67M2IiDsWAYUyNITBCfCp91yH+ZA16zs96AEiGgPzkW0SPyOyhf6D0Lge85M7IJqBkkxjELOY1r5MwBfi23PusIWTM1hsRj/IsWa9g+qwJesysRcGCXsaPoUec3ZT7SSL0rSaUjZJ15C8dYz6NNfaX1tZ1n9z9gK0lbBDQBErpapytNSyc/BPyeV2asvJ0jtN1HAyGho3QC9T9Util+TDVhXDHJZrvgVWxNta4sENDVegPtq1z8p2ALcxcCWVdmbEYtAmoIiVOYq7HmGbElwL/NyEumtH2ErKMAQEJ/ep+0WKZ9Vxe85tQm4MCuYIfRQefvZb6SoJracqB2Bxqwk7oGBUg2R1dcDen1pPZvwB/PURrHP+fHIuvVJo6O9W2UgJq638Mky34b4uxP7CvAR/81DHKz3cYJ2GSI6Gs94Pxv2E9NHRub0bO9HejtQFH8BvWooa9jGY/wAAAAAElFTkSuQmCC", vk = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAMAAABdem3zAAAAgVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9d3yJTAAAAK3RSTlMA/Pfx6+XZ39TIwry2sJ+qpY3Ok4jNgpl8dnEGmEUfDi5hOycxmn5YGGhjcHcwqwAAAMZJREFUOMvd0e0OgiAUgGEqs9IiLdNCRQS/6v4vMGrNofJxfvfIzuZ2fugL+ls5ZYwiOPEk0ktA95vHD4Pt0/uIgr6fpCOSI7c+UfSAH4gnGtd+lVwnkgrZkSzLCnmK75QPse+XeKG0FsXRAqaWovFZIza3rU9atWmfHQ2YoWgUGkT6tl1g1GmLHiw0bYfgcrvI8xlyyqG+BwOaw3srvCjqO8zaCn/n4IvJFYdbp1C98NQDSJWiG5CxLffWIB5HUsXbFVjLqzcmgh9KFWWqZgAAAABJRU5ErkJggg==", Ak = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACiElEQVRYCcWYsUscQRSH74LaBE60MU2wsBALBQsbTSuEFCkCKmghYmUjdmohiIUpU6WxSZEQQrqkjZA/IEXESksREbEQBRFEOL+nOzK3O7NvvNudG/g5s29m3je/mbnz2EqlDaVer9detIEryOF2geejG2abJ9BdVDDASXQeDQyoC22hS3SDyncMZBDtInH6BC71cgFa4Cx/o6H0mXakA0U8A3xFno9oHHW5chbuGOgkoJ9ozAU0scIcA6yRdAW9Q06XBip1IWCgI+RaRa8lKaX+WPn/tgQGKM7m0BRSXdrLaBoMtJ9Ey2jATpi0q45YQ6gpMFC5QLPoZUO2Zzw8CwxQLtAikjPN29rizhjoKLAZ1IO00vpWAxRnH5B8LqWtugkZk7vVQOUCCbQPmaK6YaA6xgsGKuf4HqXPMsSxWaS3dn5lAh1kxlvPLNUN89TFOcFMfOOBhobVxWXAybnKx8ZXVDdMVMdkwEzq9hGTuOpGmf/Q7QJr81Q3JFAX5wJfauSAfnVxLvApiW9ykqtumKuOyYCr1eotE//mgEO6mnJcAX5I9j8egprUM68hnHFseoH/p/0VXZhYUqvbyDh1jBcsEOBHVJ/RnjwXWXLBApIzRz9ofkPXEgso6nGoYANJtn6b5wMTy6lb2+p0YuBX6BPx70huv68U59gmAJcbv4mO7bjVLtaxldhcvHViv+x4aDv4jF0JcS4X7wt9a+jMGlPOVluAhybwfRpLaDfpU7daHZAkCq74fy6/uTdQL+pE8tMprc6WtpqEmZJcvGk6/mU6YwVwv4AO0QlqeCNQ+hoAOl9FlA4WAPD4L19sZywg7uumFDz+CzazAJzvmHbUGvBEVKCBAa7dA6h+CDnUpjBPAAAAAElFTkSuQmCC", bk = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACXElEQVRYCcWYQSgFQRjHdyUlRU5ykCMOxMHJSXlnV4nk7OTISRw8N7koJSeKg+Ig5R3l4kBOHF8u5KD3IoVa/692XtPXzOz3Ztfu1jQz35v5ft//2++1uxNEUdQZFHC1gDlcADcg8EIR4ACp/kWbyB0eg9/Ql3KFx+Av9DW0dbS2XAJgYFJeQRv4bzgVF7+GYDgHfJH/kOU8JMVw+IP2bWg3sK2EYfiCPtPLpFgHjGNyguAyL7wkxXomLhDENtTX9ch8x0mKyW8UO59Cvwv1I/E8VScBhxqhB+MyFR5aqr+dBKxxG8NpjDYB729YmhxIwCrV3HUfDGuAexWeBKynmsMp3bOAL6M19XiVgG2K9SAGMVkFfEw3usYSsEux7rsDkznAZ9ASC08C1p1LxqNYtAS4s/AkYEmq+ZpuwOddqZeAJSptt6MEuPFJJwHbnEoCojWTpnsuAfM0moCuNe3Y0Ms3ScBpFROzywfsUqP8NR2cRLFy7uqTgqvxzRKwRI1rTR3P8KoPOEkN98nn19xA86wU24K7hNonE7jVZPSw8VS/w8epKcXKtwRsU6N8UK+vucecoPTWar0kYK7G5IzWfKIdA3hnWsBtErCuhu9X80cM9gEVv4FKwC7FlM4jAK9UBNJeArb5esYPO4BWbQtcdgnYlOozOD0E1FlAacH6/ldMtgB80I0+Y4lidY8rAGT2CSMBfwC44VNArkwkgW+x+V8+U21gKpoyVB64ok71G96H6NRHnYHkdhShjpsUOPfDl8KOmwo5YNtLVSS+m1FY+aulYAFu6rvWVyDf9wc6+wpavsNbLQAAAABJRU5ErkJggg==";
function yk(n) {
  De(n, "svelte-1yhqqec", ".tag-popover-arrow-wrapper.svelte-1yhqqec{position:absolute;transform-origin:center;background-position:center;background-repeat:no-repeat;background-size:100% 100%}.tag-popover-arrow-top.svelte-1yhqqec{width:1rem;height:0.625rem;top:0;left:50%;transform:translateX(-50%)}.tag-popover-arrow-bottom.svelte-1yhqqec{width:1rem;height:0.625rem;bottom:0;left:50%;transform:translateX(-50%)}.tag-popover-arrow-left.svelte-1yhqqec{width:0.625rem;height:1rem;top:50%;left:0;transform:translateY(-50%)}.tag-popover-arrow-right.svelte-1yhqqec{width:0.625rem;height:1rem;top:50%;right:0;transform:translateY(-50%)}");
}
function pm(n) {
  let t, e, i;
  return {
    c() {
      t = W("div"), y(t, "class", e = "tag-popover-arrow-wrapper tag-popover-arrow-" + /*direction*/
      n[0] + " theme-" + /*theme*/
      n[2] + " svelte-1yhqqec"), y(t, "style", i = `background-image: url(${/*arrowImage*/
      n[3]})`);
    },
    m(s, r) {
      X(s, t, r);
    },
    p(s, r) {
      r & /*direction, theme*/
      5 && e !== (e = "tag-popover-arrow-wrapper tag-popover-arrow-" + /*direction*/
      s[0] + " theme-" + /*theme*/
      s[2] + " svelte-1yhqqec") && y(t, "class", e), r & /*arrowImage*/
      8 && i !== (i = `background-image: url(${/*arrowImage*/
      s[3]})`) && y(t, "style", i);
    },
    d(s) {
      s && U(t);
    }
  };
}
function wk(n) {
  let t, e = (
    /*show*/
    n[1] && pm(n)
  );
  return {
    c() {
      e && e.c(), t = Fe();
    },
    m(i, s) {
      e && e.m(i, s), X(i, t, s);
    },
    p(i, [s]) {
      /*show*/
      i[1] ? e ? e.p(i, s) : (e = pm(i), e.c(), e.m(t.parentNode, t)) : e && (e.d(1), e = null);
    },
    i: se,
    o: se,
    d(i) {
      e && e.d(i), i && U(t);
    }
  };
}
function Pk(n, t, e) {
  let i, { direction: s = "bottom" } = t, { show: r = !0 } = t, { theme: o = "dark" } = t;
  return n.$$set = (a) => {
    "direction" in a && e(0, s = a.direction), "show" in a && e(1, r = a.show), "theme" in a && e(2, o = a.theme);
  }, n.$$.update = () => {
    n.$$.dirty & /*theme, direction*/
    5 && e(3, i = (() => {
      switch (o) {
        case "dark":
          switch (s) {
            case "top":
              return fk;
            case "bottom":
              return uk;
            case "left":
              return pk;
            case "right":
              return mk;
          }
        case "light":
          switch (s) {
            case "top":
              return vk;
            case "bottom":
              return gk;
            case "left":
              return Ak;
            case "right":
              return bk;
          }
      }
    })());
  }, [s, r, o, i];
}
class Ck extends Ie {
  constructor(t) {
    super(), Ce(this, t, Pk, wk, Pe, { direction: 0, show: 1, theme: 2 }, yk);
  }
}
function Ik(n) {
  De(n, "svelte-1d6rvbz", ".icon-container.svelte-1d6rvbz{width:3.25rem;height:3.25rem;background-color:var(--bg-color);border-radius:100%;display:flex;align-items:center;justify-content:center;z-index:2}");
}
function Ek(n) {
  let t, e, i, s, r, o, a, l, c, h;
  return {
    c() {
      t = W("div"), e = be("svg"), i = be("defs"), s = be("linearGradient"), r = be("stop"), o = be("stop"), a = be("linearGradient"), l = be("stop"), c = be("stop"), h = be("path"), y(
        r,
        "stop-color",
        /*color*/
        n[1]
      ), y(r, "offset", "0%"), y(
        o,
        "stop-color",
        /*color*/
        n[1]
      ), y(o, "stop-opacity", ".5"), y(o, "offset", "100%"), y(s, "x1", "53.2804066%"), y(s, "y1", "100%"), y(s, "x2", "64.4764442%"), y(s, "y2", "2.52981206%"), y(s, "id", "video-icon-gradient-a"), y(
        l,
        "stop-color",
        /*color*/
        n[1]
      ), y(l, "offset", "0%"), y(
        c,
        "stop-color",
        /*color*/
        n[1]
      ), y(c, "stop-opacity", "0"), y(c, "offset", "100%"), y(a, "x1", "50%"), y(a, "y1", "-5.89066117%"), y(a, "x2", "60.3018289%"), y(a, "y2", "32.0415872%"), y(a, "id", "video-icon-gradient-b"), y(h, "d", "M8.0883645,5.35 C8.27319183,5.35 8.45426937,5.40368245 8.61098984,5.50477659 L20.4341152,13.1314044 C20.6662958,13.2811749 20.8173539,13.5140616 20.8743923,13.7691613 C20.9300733,14.0181899 20.8962437,14.2885953 20.7601668,14.5243865 L8.61098984,22.4950731 C8.38014238,22.6439836 8.11267156,22.6823641 7.86680489,22.6238045 C7.62023287,22.5650769 7.39563144,22.408984 7.25097187,22.1700998 C7.15226844,22.0071054 7.1,21.8187509 7.1,21.6265526 L7.1,6.37329702 C7.1,6.09035119 7.2108925,5.83405961 7.39059316,5.64859123 C7.56916841,5.46428435 7.81578724,5.35 8.0883645,5.35 Z"), y(h, "fill", "url(#video-icon-gradient-a)"), y(h, "fill-rule", "nonzero"), y(h, "stroke", "url(#video-icon-gradient-b)"), y(h, "stroke-width", ".2"), y(e, "xmlns", "http://www.w3.org/2000/svg"), y(e, "viewBox", "0 0 28 28"), y(
        e,
        "width",
        /*size*/
        n[0]
      ), y(
        e,
        "height",
        /*size*/
        n[0]
      ), y(t, "class", "icon-container svelte-1d6rvbz"), Q(
        t,
        "--bg-color",
        /*bgColor*/
        n[2]
      );
    },
    m(d, f) {
      X(d, t, f), R(t, e), R(e, i), R(i, s), R(s, r), R(s, o), R(i, a), R(a, l), R(a, c), R(e, h);
    },
    p(d, [f]) {
      f & /*color*/
      2 && y(
        r,
        "stop-color",
        /*color*/
        d[1]
      ), f & /*color*/
      2 && y(
        o,
        "stop-color",
        /*color*/
        d[1]
      ), f & /*color*/
      2 && y(
        l,
        "stop-color",
        /*color*/
        d[1]
      ), f & /*color*/
      2 && y(
        c,
        "stop-color",
        /*color*/
        d[1]
      ), f & /*size*/
      1 && y(
        e,
        "width",
        /*size*/
        d[0]
      ), f & /*size*/
      1 && y(
        e,
        "height",
        /*size*/
        d[0]
      ), f & /*bgColor*/
      4 && Q(
        t,
        "--bg-color",
        /*bgColor*/
        d[2]
      );
    },
    i: se,
    o: se,
    d(d) {
      d && U(t);
    }
  };
}
function Mk(n, t, e) {
  let { size: i = "28" } = t, { color: s = "#ffffff" } = t, { bgColor: r = "#0000004d" } = t;
  return n.$$set = (o) => {
    "size" in o && e(0, i = o.size), "color" in o && e(1, s = o.color), "bgColor" in o && e(2, r = o.bgColor);
  }, [i, s, r];
}
class N1 extends Ie {
  constructor(t) {
    super(), Ce(this, t, Mk, Ek, Pe, { size: 0, color: 1, bgColor: 2 }, Ik);
  }
}
function kk(n) {
  De(n, "svelte-1d6rvbz", ".icon-container.svelte-1d6rvbz{width:3.25rem;height:3.25rem;background-color:var(--bg-color);border-radius:100%;display:flex;align-items:center;justify-content:center;z-index:2}");
}
function xk(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f, g, p, m, v;
  return {
    c() {
      t = W("div"), e = be("svg"), i = be("defs"), s = be("linearGradient"), r = be("stop"), o = be("stop"), a = be("linearGradient"), l = be("stop"), c = be("stop"), h = be("linearGradient"), d = be("stop"), f = be("stop"), g = be("g"), p = be("path"), m = be("path"), v = be("path"), y(r, "stop-color", "#FFF"), y(r, "offset", "0%"), y(o, "stop-color", "#FFF"), y(o, "stop-opacity", ".5"), y(o, "offset", "100%"), y(s, "x1", "54.417371%"), y(s, "y1", "106.742364%"), y(s, "x2", "72.619444%"), y(s, "y2", "8.15444328%"), y(s, "id", "xmfpi7cnc__sgsykm5x9a"), y(l, "stop-color", "#FFF"), y(l, "offset", "0%"), y(c, "stop-color", "#FFF"), y(c, "stop-opacity", "0"), y(c, "offset", "100%"), y(a, "x1", "50%"), y(a, "y1", ".73169217%"), y(a, "x2", "66.0966077%"), y(a, "y2", "34.1694374%"), y(a, "id", "xmfpi7cnc__tjqs3iy6kb"), y(d, "stop-color", "#FFF"), y(d, "offset", "0%"), y(f, "stop-color", "#FFF"), y(f, "stop-opacity", ".5"), y(f, "offset", "100%"), y(h, "x1", "55.1256353%"), y(h, "y1", "273.650936%"), y(h, "x2", "55.1256353%"), y(h, "y2", "81.7206937%"), y(h, "id", "xmfpi7cnc__rs5hxavsyc"), y(p, "d", "M18,5.4 L18,13.4 C18,15.3329966 13.9705627,16.9 9,16.9 C4.02943725,16.9 0,15.3329966 0,13.4 L0,5.4 C0,7.33299662 4.02943725,8.9 9,8.9 C13.8670094,8.9 17.8316983,7.39760831 17.9947813,5.52032488 L18,5.4 Z M4.9603418,4.9 C5.2193418,4.9 5.4643418,4.837 5.6883418,4.704 C6.1293418,4.445 6.4093418,3.976 6.4093418,3.444 C6.4093418,3.003 6.2203418,2.611 5.9053418,2.359 C6.1643418,2.1 6.3393418,1.729 6.3393418,1.337 C6.3393418,1.092 6.2763418,0.861 6.1573418,0.658 C5.9053418,0.245 5.4643418,0 4.9603418,0 C4.7223418,0 4.4983418,0.056 4.2953418,0.175 C3.8753418,0.413 3.6163418,0.84 3.6163418,1.337 L3.6163418,1.372 L4.3373418,1.372 L4.3373418,1.337 C4.3373418,1.022 4.6313418,0.721 4.9603418,0.721 C5.3173418,0.721 5.6113418,1.008 5.6113418,1.337 C5.6113418,1.708 5.3243418,1.995 4.9603418,1.995 L4.8203418,1.995 L4.8203418,2.723 L4.9603418,2.723 C5.3593418,2.723 5.6883418,3.045 5.6883418,3.444 C5.6883418,3.843 5.3593418,4.179 4.9603418,4.179 C4.5613418,4.179 4.2323418,3.843 4.2323418,3.444 L4.2323418,3.339 L3.5043418,3.339 L3.5043418,3.444 C3.5043418,3.71 3.5673418,3.955 3.7003418,4.172 C3.9593418,4.62 4.4283418,4.9 4.9603418,4.9 Z M8.6073418,4.9 C8.8803418,4.9 9.1253418,4.83 9.3563418,4.697 C9.8043418,4.424 10.0983418,3.934 10.0983418,3.395 C10.0983418,3.122 10.0283418,2.877 9.8953418,2.646 C9.6223418,2.198 9.1463418,1.904 8.6073418,1.904 C8.5303418,1.904 8.4743418,1.904 8.4393418,1.911 L9.3143418,0 L8.5093418,0 L7.2353418,2.793 C7.1443418,2.982 7.1023418,3.185 7.1023418,3.395 C7.1023418,3.668 7.1723418,3.92 7.3053418,4.151 C7.5783418,4.606 8.0543418,4.9 8.6073418,4.9 Z M8.6073418,4.158 C8.1803418,4.158 7.8443418,3.822 7.8443418,3.395 C7.8443418,2.975 8.1873418,2.625 8.6073418,2.625 C9.0273418,2.625 9.3773418,2.975 9.3773418,3.395 C9.3773418,3.815 9.0273418,4.158 8.6073418,4.158 Z M12.2613418,4.907 C12.7653418,4.907 13.2133418,4.634 13.4653418,4.207 C13.5913418,3.997 13.6543418,3.766 13.6543418,3.514 L13.6543418,3.514 L13.6543418,1.428 C13.6543418,0.917 13.3813418,0.448 12.9613418,0.189 C12.7443418,0.063 12.5133418,0 12.2613418,0 C11.7503418,0 11.2813418,0.273 11.0293418,0.714 C10.8963418,0.931 10.8333418,1.169 10.8333418,1.428 L10.8333418,1.428 L10.8333418,3.514 C10.8333418,4.018 11.1063418,4.466 11.5473418,4.718 C11.7643418,4.844 12.0023418,4.907 12.2613418,4.907 Z M12.2613418,4.186 C11.8903418,4.186 11.5683418,3.885 11.5683418,3.514 L11.5683418,3.514 L11.5683418,1.428 C11.5683418,1.029 11.8763418,0.735 12.2613418,0.735 C12.6323418,0.735 12.9123418,1.029 12.9123418,1.428 L12.9123418,1.428 L12.9123418,3.514 C12.9123418,3.899 12.6323418,4.186 12.2613418,4.186 Z M15.4753809,2.07333984 C15.7488184,2.07333984 15.9886458,1.97478841 16.1948633,1.77768555 C16.4010807,1.58058268 16.5041895,1.33391927 16.5041895,1.03769531 C16.5041895,0.750585938 16.4050684,0.507340495 16.2068262,0.307958984 C16.008584,0.108577474 15.7647689,0.00888671875 15.4753809,0.00888671875 C15.1928288,0.00888671875 14.9495833,0.109147135 14.7456445,0.309667969 C14.5417057,0.510188802 14.4397363,0.756282552 14.4397363,1.04794922 C14.4397363,1.32138672 14.5365788,1.56064453 14.7302637,1.76572266 C14.9239486,1.97080078 15.172321,2.07333984 15.4753809,2.07333984 Z M15.4753809,1.70078125 C15.2930892,1.70078125 15.137002,1.63583984 15.0071191,1.50595703 C14.8772363,1.37607422 14.8122949,1.22226563 14.8122949,1.04453125 C14.8122949,0.859960938 14.877806,0.703304036 15.0088281,0.574560547 C15.1398503,0.445817057 15.2953678,0.381445313 15.4753809,0.381445313 C15.6553939,0.381445313 15.8097721,0.446386719 15.9385156,0.576269531 C16.0672591,0.706152344 16.1316309,0.859960938 16.1316309,1.03769531 C16.1316309,1.22226563 16.0661198,1.37892253 15.9350977,1.50766602 C15.8040755,1.63640951 15.6508366,1.70078125 15.4753809,1.70078125 Z"), y(p, "fill", "url(#xmfpi7cnc__sgsykm5x9a)"), y(p, "transform", "translate(3 3.1)"), y(m, "d", "M18,5.4 L18,13.4 C18,15.3329966 13.9705627,16.9 9,16.9 C4.02943725,16.9 0,15.3329966 0,13.4 L0,5.4 C0,7.33299662 4.02943725,8.9 9,8.9 C13.8670094,8.9 17.8316983,7.39760831 17.9947813,5.52032488 L18,5.4 Z M17.8,6.499 L17.7806846,6.52607583 C16.6077599,8.0452893 13.108676,9.1 9,9.1 C4.87821133,9.1 1.38089175,8.04047836 0.214303539,6.51942435 L0.2,6.5 L0.2,13.4 C0.2,15.1332693 3.96631253,16.6348245 8.69056715,16.6979358 L9,16.7 C13.8681548,16.7 17.8,15.1709491 17.8,13.4 L17.8,6.499 Z M12.2613418,0 C12.5133418,0 12.7443418,0.063 12.9613418,0.189 C13.3813418,0.448 13.6543418,0.917 13.6543418,1.428 L13.6543418,3.514 L13.6467818,3.66268 C13.6266218,3.85756 13.5661418,4.039 13.4653418,4.207 C13.2133418,4.634 12.7653418,4.907 12.2613418,4.907 C12.0023418,4.907 11.7643418,4.844 11.5473418,4.718 C11.1063418,4.466 10.8333418,4.018 10.8333418,3.514 L10.8333418,1.428 L10.8409578,1.27512 C10.8613418,1.07464 10.9229418,0.8876 11.0293418,0.714 C11.2813418,0.273 11.7503418,0 12.2613418,0 Z M9.3143418,0 L8.4393418,1.911 C8.4743418,1.904 8.5303418,1.904 8.6073418,1.904 C9.1463418,1.904 9.6223418,2.198 9.8953418,2.646 C10.0283418,2.877 10.0983418,3.122 10.0983418,3.395 C10.0983418,3.934 9.8043418,4.424 9.3563418,4.697 C9.1253418,4.83 8.8803418,4.9 8.6073418,4.9 C8.0543418,4.9 7.5783418,4.606 7.3053418,4.151 C7.1723418,3.92 7.1023418,3.668 7.1023418,3.395 C7.1023418,3.185 7.1443418,2.982 7.2353418,2.793 L8.5093418,0 L9.3143418,0 Z M4.9603418,0 C5.4643418,0 5.9053418,0.245 6.1573418,0.658 C6.2763418,0.861 6.3393418,1.092 6.3393418,1.337 C6.3393418,1.729 6.1643418,2.1 5.9053418,2.359 C6.2203418,2.611 6.4093418,3.003 6.4093418,3.444 C6.4093418,3.976 6.1293418,4.445 5.6883418,4.704 C5.4643418,4.837 5.2193418,4.9 4.9603418,4.9 C4.4283418,4.9 3.9593418,4.62 3.7003418,4.172 C3.5673418,3.955 3.5043418,3.71 3.5043418,3.444 L3.5043418,3.339 L4.2323418,3.339 L4.2323418,3.444 C4.2323418,3.843 4.5613418,4.179 4.9603418,4.179 C5.3593418,4.179 5.6883418,3.843 5.6883418,3.444 C5.6883418,3.045 5.3593418,2.723 4.9603418,2.723 L4.8203418,2.723 L4.8203418,1.995 L4.9603418,1.995 C5.3243418,1.995 5.6113418,1.708 5.6113418,1.337 C5.6113418,1.008 5.3173418,0.721 4.9603418,0.721 C4.6313418,0.721 4.3373418,1.022 4.3373418,1.337 L4.3373418,1.372 L3.6163418,1.372 L3.6163418,1.337 C3.6163418,0.84 3.8753418,0.413 4.2953418,0.175 C4.4983418,0.056 4.7223418,0 4.9603418,0 Z M12.2613418,0.2 C11.8228535,0.2 11.4197491,0.433900098 11.199862,0.818512412 C11.0880596,1.00092699 11.0333418,1.20205175 11.0333418,1.428 L11.0333418,3.514 C11.0333418,3.94076817 11.2630074,4.32517296 11.6477689,4.54504221 C11.8340054,4.65317955 12.0373271,4.707 12.2613418,4.707 C12.685768,4.707 13.0724302,4.4792625 13.2938432,4.10410085 C13.4010506,3.92542185 13.4543418,3.73002084 13.4543418,3.514 L13.4543418,1.428 C13.4543418,0.993663172 13.2236099,0.585702454 12.8609147,0.361957789 C12.673578,0.253181671 12.4771013,0.2 12.2613418,0.2 Z M4.9603418,0.2 C4.75293536,0.2 4.56476024,0.248895899 4.39394431,0.349004437 C4.11167513,0.508956972 3.91907748,0.764507622 3.84741774,1.06716925 L3.829,1.171 L4.157,1.171 L4.1635929,1.14325273 C4.24904453,0.829489942 4.53273472,0.571946496 4.86075855,0.527713496 L4.9603418,0.521 C5.42264158,0.521 5.8113418,0.89242465 5.8113418,1.337 C5.8113418,1.78012728 5.4916909,2.13625035 5.06824166,2.18841646 L5.02,2.191 L5.02,2.526 L5.06813812,2.52919506 C5.49271718,2.57829524 5.83232975,2.91371045 5.88206553,3.33657664 L5.8883418,3.444 C5.8883418,3.95419336 5.46908818,4.379 4.9603418,4.379 C4.48793444,4.379 4.09269177,4.01271264 4.03863877,3.55189651 L4.037,3.539 L3.709,3.539 L3.71100539,3.58140766 C3.72435814,3.71571552 3.75785509,3.84083114 3.8121867,3.95771875 L3.87348876,4.07189941 C4.09978468,4.46333019 4.50573915,4.7 4.9603418,4.7 C5.18808795,4.7 5.39698916,4.6443932 5.58705743,4.53154283 C5.97364119,4.30450157 6.2093418,3.89738234 6.2093418,3.444 C6.2093418,3.06849319 6.05147644,2.73203269 5.78040279,2.51517376 L5.60591531,2.37558378 L5.76392044,2.21757864 C5.99772857,1.98377051 6.1393418,1.65985061 6.1393418,1.337 C6.1393418,1.12891147 6.08649325,0.932616859 5.98661394,0.762172929 C5.77036899,0.407771483 5.39348118,0.2 4.9603418,0.2 Z M9.002,0.2 L8.638,0.2 L7.41554213,2.87976312 C7.3587619,2.9976913 7.32347683,3.1241874 7.30938306,3.25833536 L7.3023418,3.395 C7.3023418,3.62951354 7.36137928,3.8474981 7.47684038,4.04810085 C7.72111603,4.45522692 8.1383802,4.7 8.6073418,4.7 C8.83989632,4.7 9.05100342,4.64201988 9.25226776,4.52621184 C9.649754,4.28399367 9.8983418,3.85400396 9.8983418,3.395 C9.8983418,3.16244548 9.84036168,2.95133838 9.72455364,2.75007403 C9.48026964,2.34919774 9.06277079,2.104 8.6073418,2.104 L8.51445661,2.10475811 C8.49442789,2.10527049 8.48389809,2.10604952 8.47856502,2.10711614 L8.0943966,2.18394982 L8.25749731,1.82773787 L9.002,0.2 Z M12.2613418,0.535 C12.7468356,0.535 13.1123418,0.922491584 13.1123418,1.428 L13.1123418,3.514 C13.1123418,4.00744192 12.7448365,4.386 12.2613418,4.386 C11.7777279,4.386 11.3683418,3.99355405 11.3683418,3.514 L11.3683418,1.428 C11.3683418,0.922753743 11.7615956,0.535 12.2613418,0.535 Z M8.6073418,2.425 C9.13779875,2.425 9.5773418,2.86454305 9.5773418,3.395 C9.5773418,3.92471151 9.13856864,4.358 8.6073418,4.358 C8.06988485,4.358 7.6443418,3.93245695 7.6443418,3.395 C7.6443418,2.86377316 8.07763029,2.425 8.6073418,2.425 Z M12.2613418,0.735 C11.8763418,0.735 11.5683418,1.029 11.5683418,1.428 L11.5683418,3.514 L11.5761202,3.61327273 C11.6272922,3.93723967 11.9240691,4.186 12.2613418,4.186 C12.6323418,4.186 12.9123418,3.899 12.9123418,3.514 L12.9123418,1.428 L12.9055416,1.32192712 C12.8606806,0.977975207 12.5986145,0.735 12.2613418,0.735 Z M8.6073418,2.625 C8.1873418,2.625 7.8443418,2.975 7.8443418,3.395 C7.8443418,3.822 8.1803418,4.158 8.6073418,4.158 C9.0273418,4.158 9.3773418,3.815 9.3773418,3.395 C9.3773418,2.975 9.0273418,2.625 8.6073418,2.625 Z M15.4753809,0.00888671875 C15.7647689,0.00888671875 16.008584,0.108577474 16.2068262,0.307958984 C16.4050684,0.507340495 16.5041895,0.750585938 16.5041895,1.03769531 C16.5041895,1.33391927 16.4010807,1.58058268 16.1948633,1.77768555 C15.9886458,1.97478841 15.7488184,2.07333984 15.4753809,2.07333984 C15.172321,2.07333984 14.9239486,1.97080078 14.7302637,1.76572266 C14.5365788,1.56064453 14.4397363,1.32138672 14.4397363,1.04794922 C14.4397363,0.756282552 14.5417057,0.510188802 14.7456445,0.309667969 C14.9495833,0.109147135 15.1928288,0.00888671875 15.4753809,0.00888671875 Z M15.4753809,0.381445313 C15.2953678,0.381445313 15.1398503,0.445817057 15.0088281,0.574560547 C14.877806,0.703304036 14.8122949,0.859960938 14.8122949,1.04453125 C14.8122949,1.22226563 14.8772363,1.37607422 15.0071191,1.50595703 C15.137002,1.63583984 15.2930892,1.70078125 15.4753809,1.70078125 C15.6508366,1.70078125 15.8040755,1.63640951 15.9350977,1.50766602 C16.0661198,1.37892253 16.1316309,1.22226563 16.1316309,1.03769531 C16.1316309,0.859960938 16.0672591,0.706152344 15.9385156,0.576269531 C15.8097721,0.446386719 15.6553939,0.381445313 15.4753809,0.381445313 Z"), y(m, "fill", "url(#xmfpi7cnc__tjqs3iy6kb)"), y(m, "transform", "translate(3 3.1)"), y(v, "d", "M3.00030998,2.79110119 L3.00030998,8.00889881 C1.15888197,7.36802147 0,6.43664128 0,5.4 C0,4.36335872 1.15888197,3.43197853 3.00030998,2.79110119 Z M15.0006975,2.79145187 C16.8415407,3.43231826 18,4.36354778 18,5.4 C18,6.43645222 16.8415407,7.36768174 15.0006975,8.00854813 Z"), y(v, "fill", "url(#xmfpi7cnc__rs5hxavsyc)"), y(v, "transform", "translate(3 3.1)"), y(g, "fill-rule", "nonzero"), y(g, "fill", "none"), y(e, "xmlns", "http://www.w3.org/2000/svg"), y(e, "viewBox", "0 0 24 24"), y(
        e,
        "width",
        /*size*/
        n[0]
      ), y(
        e,
        "height",
        /*size*/
        n[0]
      ), y(t, "class", "icon-container svelte-1d6rvbz"), Q(
        t,
        "--bg-color",
        /*bgColor*/
        n[1]
      );
    },
    m(b, w) {
      X(b, t, w), R(t, e), R(e, i), R(i, s), R(s, r), R(s, o), R(i, a), R(a, l), R(a, c), R(i, h), R(h, d), R(h, f), R(e, g), R(g, p), R(g, m), R(g, v);
    },
    p(b, [w]) {
      w & /*size*/
      1 && y(
        e,
        "width",
        /*size*/
        b[0]
      ), w & /*size*/
      1 && y(
        e,
        "height",
        /*size*/
        b[0]
      ), w & /*bgColor*/
      2 && Q(
        t,
        "--bg-color",
        /*bgColor*/
        b[1]
      );
    },
    i: se,
    o: se,
    d(b) {
      b && U(t);
    }
  };
}
function Dk(n, t, e) {
  let { size: i = "28" } = t, { color: s = "#ffffff" } = t, { bgColor: r = "#0000004d" } = t;
  return n.$$set = (o) => {
    "size" in o && e(0, i = o.size), "color" in o && e(2, s = o.color), "bgColor" in o && e(1, r = o.bgColor);
  }, [i, r, s];
}
class Sk extends Ie {
  constructor(t) {
    super(), Ce(this, t, Dk, xk, Pe, { size: 0, color: 2, bgColor: 1 }, kk);
  }
}
function Tk(n) {
  De(n, "svelte-u1dbzb", '@charset "UTF-8";.tag-popup.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{position:absolute;pointer-events:auto;padding:0.625rem;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;transform-origin:center}.tag-popup-top.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-50%, -100%);left:50%}.tag-popup-bottom.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-50%, 0);left:50%}.tag-popup-left.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-100%, -50%);top:50%}.tag-popup-right.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(0, -50%);top:50%}.tag-popup-top-left.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(calc(2.625rem - 100%), -100%)}.tag-popup-top-right.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-2.625rem, -100%)}.tag-popup-bottom-left.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(calc(2.625rem - 100%), 0)}.tag-popup-bottom-right.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-2.625rem, 0)}.tag-popup-left-top.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-100%, -2.625rem)}.tag-popup-left-bottom.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(-100%, calc(2.625rem - 100%))}.tag-popup-right-top.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(0, -2.625rem)}.tag-popup-right-bottom.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{transform:translate(0, calc(2.625rem - 100%))}.tag-popup-content.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{position:relative;pointer-events:auto;cursor:pointer;padding:1.25rem;border-radius:0.375rem;max-width:17.5rem;width:17.5rem;background:rgba(0, 0, 0, 0.7490196078)}.tag-popup-top.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-top-left.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-top-right.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb{box-shadow:0.03125rem 0 0 0 rgba(255, 255, 255, 0.3), -0.03125rem 0 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-bottom.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-bottom-left.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-bottom-right.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb{box-shadow:0.03125rem 0 0 0 rgba(255, 255, 255, 0.3), -0.03125rem 0 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-left.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-left-top.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-left-bottom.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb{box-shadow:0 0.03125rem 0 0 rgba(255, 255, 255, 0.3), 0 -0.03125rem 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-right.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-right-top.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb,.tag-popup-right-bottom.svelte-u1dbzb .tag-popup-content.svelte-u1dbzb.svelte-u1dbzb{box-shadow:0 0.03125rem 0 0 rgba(255, 255, 255, 0.3), 0 -0.03125rem 0 0 rgba(255, 255, 255, 0.3)}.light.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{background:#ffffff}.tag-popup-title.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{margin:0;font-size:1rem;font-weight:600;line-height:1.375rem;letter-spacing:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;color:#ffffff}.light.svelte-u1dbzb .tag-popup-title.svelte-u1dbzb.svelte-u1dbzb{color:rgba(0, 0, 0, 0.8509803922)}.tag-popup-description.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{margin:0;font-size:0.875rem;font-weight:400;color:#ffffff;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.light.svelte-u1dbzb .tag-popup-description.svelte-u1dbzb.svelte-u1dbzb{color:rgba(0, 0, 0, 0.8509803922)}.tag-popup-tags.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{display:flex;align-items:center;margin:0;margin-bottom:0}.tag-popup-tags.svelte-u1dbzb .tag-popup-tag.svelte-u1dbzb+.tag-popup-tag.svelte-u1dbzb{margin-left:0.25rem}.tag-popup-tag.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{padding:0.125rem 0.25rem;display:flex;align-items:center;justify-content:center;border-radius:0.25rem;font-size:0.75rem;line-height:1.125rem;letter-spacing:0;border-radius:0.125rem;max-width:7.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tag-popup-tag-primary.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{color:#ffffff;background-image:linear-gradient(90deg, #ead09a 0%, #e0cca3 100%)}.light.svelte-u1dbzb .tag-popup-tag-primary.svelte-u1dbzb.svelte-u1dbzb{color:#946700;background-image:linear-gradient(90deg, #ead09a 0%, #e0cca3 100%)}.tag-popup-tag-secondary.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{color:#ffffff;background:rgba(255, 255, 255, 0.1490196078)}.light.svelte-u1dbzb .tag-popup-tag-secondary.svelte-u1dbzb.svelte-u1dbzb{color:rgba(0, 0, 0, 0.5019607843);background:rgba(0, 0, 0, 0.0588235294)}.tag-popup-price.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{font-family:DINAlternate-Bold;font-weight:700;font-size:1.25rem;color:#ae7900;letter-spacing:0;text-align:center;display:flex;justify-content:flex-start;align-items:center;width:100%;margin:0}.tag-popup-media.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{width:15rem;height:10rem;margin:0 auto;overflow:hidden;border-radius:0.25rem;display:flex;align-items:center;justify-content:center;position:relative}.tag-popup-media.svelte-u1dbzb img.svelte-u1dbzb.svelte-u1dbzb{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;display:block}.tag-popup-media-type.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);z-index:2}.tag-popup-media-index.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{position:absolute;right:0.375rem;bottom:0.375rem;padding:0.0625rem 0.25rem;background:rgba(0, 0, 0, 0.5);border-radius:0.125rem;font-weight:bold;font-size:0.75rem;color:#ffffff;letter-spacing:0;line-height:1.125rem}.iframe-overlay.svelte-u1dbzb.svelte-u1dbzb.svelte-u1dbzb{position:absolute;top:0;left:0;width:100%;height:100%;background:transparent;z-index:10}.tag-popup-content.svelte-u1dbzb>.svelte-u1dbzb+.svelte-u1dbzb{margin-top:0.5rem}.tag-popup-content.svelte-u1dbzb>.svelte-u1dbzb.svelte-u1dbzb:first-child{margin-top:0 !important}');
}
const Lk = (n) => ({}), mm = (n) => ({}), zk = (n) => ({}), gm = (n) => ({});
function vm(n, t, e) {
  const i = n.slice();
  return i[1] = t[e], i;
}
function Am(n, t, e) {
  const i = n.slice();
  return i[1] = t[e], i;
}
function bm(n) {
  let t, e;
  return {
    c() {
      t = W("h3"), e = je(
        /*finalTitle*/
        n[4]
      ), y(t, "class", "tag-popup-title svelte-u1dbzb");
    },
    m(i, s) {
      X(i, t, s), R(t, e);
    },
    p(i, s) {
      s[0] & /*finalTitle*/
      16 && He(
        e,
        /*finalTitle*/
        i[4]
      );
    },
    d(i) {
      i && U(t);
    }
  };
}
function ym(n) {
  let t, e, i = (
    /*primaryTags*/
    n[3]
  ), s = [];
  for (let a = 0; a < i.length; a += 1)
    s[a] = wm(Am(n, i, a));
  let r = (
    /*secondaryTags*/
    n[9]
  ), o = [];
  for (let a = 0; a < r.length; a += 1)
    o[a] = Pm(vm(n, r, a));
  return {
    c() {
      t = W("div");
      for (let a = 0; a < s.length; a += 1)
        s[a].c();
      e = oe();
      for (let a = 0; a < o.length; a += 1)
        o[a].c();
      y(t, "class", "tag-popup-tags svelte-u1dbzb");
    },
    m(a, l) {
      X(a, t, l);
      for (let c = 0; c < s.length; c += 1)
        s[c] && s[c].m(t, null);
      R(t, e);
      for (let c = 0; c < o.length; c += 1)
        o[c] && o[c].m(t, null);
    },
    p(a, l) {
      if (l[0] & /*primaryTags*/
      8) {
        i = /*primaryTags*/
        a[3];
        let c;
        for (c = 0; c < i.length; c += 1) {
          const h = Am(a, i, c);
          s[c] ? s[c].p(h, l) : (s[c] = wm(h), s[c].c(), s[c].m(t, e));
        }
        for (; c < s.length; c += 1)
          s[c].d(1);
        s.length = i.length;
      }
      if (l[0] & /*secondaryTags*/
      512) {
        r = /*secondaryTags*/
        a[9];
        let c;
        for (c = 0; c < r.length; c += 1) {
          const h = vm(a, r, c);
          o[c] ? o[c].p(h, l) : (o[c] = Pm(h), o[c].c(), o[c].m(t, null));
        }
        for (; c < o.length; c += 1)
          o[c].d(1);
        o.length = r.length;
      }
    },
    d(a) {
      a && U(t), pi(s, a), pi(o, a);
    }
  };
}
function wm(n) {
  let t, e = (
    /*tag*/
    n[1] + ""
  ), i;
  return {
    c() {
      t = W("div"), i = je(e), y(t, "class", "tag-popup-tag tag-popup-tag-primary svelte-u1dbzb");
    },
    m(s, r) {
      X(s, t, r), R(t, i);
    },
    p(s, r) {
      r[0] & /*primaryTags*/
      8 && e !== (e = /*tag*/
      s[1] + "") && He(i, e);
    },
    d(s) {
      s && U(t);
    }
  };
}
function Pm(n) {
  let t, e = (
    /*tag*/
    n[1] + ""
  ), i;
  return {
    c() {
      t = W("div"), i = je(e), y(t, "class", "tag-popup-tag tag-popup-tag-secondary svelte-u1dbzb");
    },
    m(s, r) {
      X(s, t, r), R(t, i);
    },
    p(s, r) {
      r[0] & /*secondaryTags*/
      512 && e !== (e = /*tag*/
      s[1] + "") && He(i, e);
    },
    d(s) {
      s && U(t);
    }
  };
}
function Ok(n) {
  let t, e, i, s, r, o, a, l;
  o = new N1({});
  let c = (
    /*mediaCount*/
    n[11] > 1 && Cm(n)
  );
  return {
    c() {
      t = W("div"), e = W("video"), s = oe(), r = W("div"), ve(o.$$.fragment), a = oe(), c && c.c(), pt(e.src, i = /*tag*/
      n[1].data.mediaData[0].url) || y(e, "src", i), y(e, "class", "tag-popup-video-fallback"), e.controls = !1, e.autoplay = !1, e.muted = !0, e.loop = !0, y(e, "preload", "metadata"), y(e, "disablepictureinpicture", ""), e.playsInline = !0, Q(e, "width", "100%"), Q(e, "height", "100%"), Q(e, "object-fit", "cover"), y(r, "class", "tag-popup-media-type svelte-u1dbzb"), y(t, "class", "tag-popup-media svelte-u1dbzb");
    },
    m(h, d) {
      X(h, t, d), R(t, e), R(t, s), R(t, r), me(o, r, null), R(t, a), c && c.m(t, null), l = !0;
    },
    p(h, d) {
      (!l || d[0] & /*tag*/
      2 && !pt(e.src, i = /*tag*/
      h[1].data.mediaData[0].url)) && y(e, "src", i), /*mediaCount*/
      h[11] > 1 ? c ? c.p(h, d) : (c = Cm(h), c.c(), c.m(t, null)) : c && (c.d(1), c = null);
    },
    i(h) {
      l || (F(o.$$.fragment, h), l = !0);
    },
    o(h) {
      Y(o.$$.fragment, h), l = !1;
    },
    d(h) {
      h && U(t), ge(o), c && c.d();
    }
  };
}
function jk(n) {
  let t, e, i, s, r, o, a, l, c;
  const h = [Vk, Bk], d = [];
  function f(p, m) {
    return (
      /*isVideoMedia*/
      p[6] ? 0 : (
        /*isPanoramaMedia*/
        p[14] ? 1 : -1
      )
    );
  }
  ~(o = f(n)) && (a = d[o] = h[o](n));
  let g = (
    /*mediaCount*/
    n[11] > 1 && Im(n)
  );
  return {
    c() {
      t = W("div"), e = W("img"), r = oe(), a && a.c(), l = oe(), g && g.c(), pt(e.src, i = /*mediaUrl*/
      n[15]) || y(e, "src", i), y(e, "alt", s = /*finalTitle*/
      n[4] || ""), y(e, "draggable", "false"), y(e, "class", "svelte-u1dbzb"), y(t, "class", "tag-popup-media svelte-u1dbzb");
    },
    m(p, m) {
      X(p, t, m), R(t, e), R(t, r), ~o && d[o].m(t, null), R(t, l), g && g.m(t, null), c = !0;
    },
    p(p, m) {
      (!c || m[0] & /*mediaUrl*/
      32768 && !pt(e.src, i = /*mediaUrl*/
      p[15])) && y(e, "src", i), (!c || m[0] & /*finalTitle*/
      16 && s !== (s = /*finalTitle*/
      p[4] || "")) && y(e, "alt", s);
      let v = o;
      o = f(p), o !== v && (a && (Me(), Y(d[v], 1, 1, () => {
        d[v] = null;
      }), ke()), ~o ? (a = d[o], a || (a = d[o] = h[o](p), a.c()), F(a, 1), a.m(t, l)) : a = null), /*mediaCount*/
      p[11] > 1 ? g ? g.p(p, m) : (g = Im(p), g.c(), g.m(t, null)) : g && (g.d(1), g = null);
    },
    i(p) {
      c || (F(a), c = !0);
    },
    o(p) {
      Y(a), c = !1;
    },
    d(p) {
      p && U(t), ~o && d[o].d(), g && g.d();
    }
  };
}
function Rk(n) {
  let t, e, i, s, r, o, a = (
    /*mediaCount*/
    n[11] > 1 && Em(n)
  );
  return {
    c() {
      t = W("div"), e = W("iframe"), s = oe(), r = W("div"), o = oe(), a && a.c(), y(
        e,
        "title",
        /*videoPlayerTitle*/
        n[12]
      ), pt(e.src, i = /*formattedVideoUrl*/
      n[13]) || y(e, "src", i), y(e, "class", "tag-popup-video-iframe"), y(e, "frameborder", "0"), y(e, "allow", "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"), y(e, "referrerpolicy", "strict-origin-when-cross-origin"), e.allowFullscreen = !0, Q(e, "width", "100%"), Q(e, "height", "100%"), Q(e, "position", "absolute"), Q(e, "top", "0"), Q(e, "left", "0"), y(r, "class", "iframe-overlay svelte-u1dbzb"), y(t, "class", "tag-popup-media svelte-u1dbzb");
    },
    m(l, c) {
      X(l, t, c), R(t, e), R(t, s), R(t, r), R(t, o), a && a.m(t, null);
    },
    p(l, c) {
      c[0] & /*videoPlayerTitle*/
      4096 && y(
        e,
        "title",
        /*videoPlayerTitle*/
        l[12]
      ), c[0] & /*formattedVideoUrl*/
      8192 && !pt(e.src, i = /*formattedVideoUrl*/
      l[13]) && y(e, "src", i), /*mediaCount*/
      l[11] > 1 ? a ? a.p(l, c) : (a = Em(l), a.c(), a.m(t, null)) : a && (a.d(1), a = null);
    },
    i: se,
    o: se,
    d(l) {
      l && U(t), a && a.d();
    }
  };
}
function Cm(n) {
  let t, e, i, s;
  return {
    c() {
      t = W("div"), e = je(
        /*currentMediaIndex*/
        n[10]
      ), i = je("/"), s = je(
        /*mediaCount*/
        n[11]
      ), y(t, "class", "tag-popup-media-index svelte-u1dbzb");
    },
    m(r, o) {
      X(r, t, o), R(t, e), R(t, i), R(t, s);
    },
    p(r, o) {
      o[0] & /*currentMediaIndex*/
      1024 && He(
        e,
        /*currentMediaIndex*/
        r[10]
      ), o[0] & /*mediaCount*/
      2048 && He(
        s,
        /*mediaCount*/
        r[11]
      );
    },
    d(r) {
      r && U(t);
    }
  };
}
function Bk(n) {
  let t, e, i;
  return e = new Sk({}), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "tag-popup-media-type svelte-u1dbzb");
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), i = !0;
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e);
    }
  };
}
function Vk(n) {
  let t, e, i;
  return e = new N1({}), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "tag-popup-media-type svelte-u1dbzb");
    },
    m(s, r) {
      X(s, t, r), me(e, t, null), i = !0;
    },
    i(s) {
      i || (F(e.$$.fragment, s), i = !0);
    },
    o(s) {
      Y(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && U(t), ge(e);
    }
  };
}
function Im(n) {
  let t, e, i, s;
  return {
    c() {
      t = W("div"), e = je(
        /*currentMediaIndex*/
        n[10]
      ), i = je("/"), s = je(
        /*mediaCount*/
        n[11]
      ), y(t, "class", "tag-popup-media-index svelte-u1dbzb");
    },
    m(r, o) {
      X(r, t, o), R(t, e), R(t, i), R(t, s);
    },
    p(r, o) {
      o[0] & /*currentMediaIndex*/
      1024 && He(
        e,
        /*currentMediaIndex*/
        r[10]
      ), o[0] & /*mediaCount*/
      2048 && He(
        s,
        /*mediaCount*/
        r[11]
      );
    },
    d(r) {
      r && U(t);
    }
  };
}
function Em(n) {
  let t, e, i, s;
  return {
    c() {
      t = W("div"), e = je(
        /*currentMediaIndex*/
        n[10]
      ), i = je("/"), s = je(
        /*mediaCount*/
        n[11]
      ), y(t, "class", "tag-popup-media-index svelte-u1dbzb");
    },
    m(r, o) {
      X(r, t, o), R(t, e), R(t, i), R(t, s);
    },
    p(r, o) {
      o[0] & /*currentMediaIndex*/
      1024 && He(
        e,
        /*currentMediaIndex*/
        r[10]
      ), o[0] & /*mediaCount*/
      2048 && He(
        s,
        /*mediaCount*/
        r[11]
      );
    },
    d(r) {
      r && U(t);
    }
  };
}
function Mm(n) {
  let t, e;
  return {
    c() {
      t = W("div"), e = je(
        /*finalDescription*/
        n[16]
      ), y(t, "class", "tag-popup-description svelte-u1dbzb");
    },
    m(i, s) {
      X(i, t, s), R(t, e);
    },
    p(i, s) {
      s[0] & /*finalDescription*/
      65536 && He(
        e,
        /*finalDescription*/
        i[16]
      );
    },
    d(i) {
      i && U(t);
    }
  };
}
function km(n) {
  let t, e, i, s, r = (
    /*marketingPriceUnit*/
    n[7] && xm(n)
  );
  return {
    c() {
      t = W("div"), r && r.c(), e = oe(), i = W("span"), s = je(
        /*marketingPrice*/
        n[8]
      ), y(i, "class", "tag-popup-price-value"), y(t, "class", "tag-popup-price svelte-u1dbzb");
    },
    m(o, a) {
      X(o, t, a), r && r.m(t, null), R(t, e), R(t, i), R(i, s);
    },
    p(o, a) {
      /*marketingPriceUnit*/
      o[7] ? r ? r.p(o, a) : (r = xm(o), r.c(), r.m(t, e)) : r && (r.d(1), r = null), a[0] & /*marketingPrice*/
      256 && He(
        s,
        /*marketingPrice*/
        o[8]
      );
    },
    d(o) {
      o && U(t), r && r.d();
    }
  };
}
function xm(n) {
  let t, e;
  return {
    c() {
      t = W("span"), e = je(
        /*marketingPriceUnit*/
        n[7]
      ), y(t, "class", "tag-popup-price-unit");
    },
    m(i, s) {
      X(i, t, s), R(t, e);
    },
    p(i, s) {
      s[0] & /*marketingPriceUnit*/
      128 && He(
        e,
        /*marketingPriceUnit*/
        i[7]
      );
    },
    d(i) {
      i && U(t);
    }
  };
}
function _k(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f, g, p = (
    /*finalTitle*/
    n[4] && bm(n)
  ), m = (
    /*isMarketingTag*/
    n[2] && /*primaryTags*/
    (n[3].length > 0 || /*secondaryTags*/
    n[9].length > 0) && ym(n)
  );
  const v = [Rk, jk, Ok], b = [];
  function w(O, A) {
    var C;
    return (
      /*isExternalVideo*/
      O[5] && /*formattedVideoUrl*/
      O[13] ? 0 : (
        /*mediaUrl*/
        O[15] ? 1 : (
          /*isVideoMedia*/
          O[6] && /*tag*/
          O[1].data.mediaData && /*tag*/
          ((C = O[1].data.mediaData[0]) != null && C.url) ? 2 : -1
        )
      )
    );
  }
  ~(r = w(n)) && (o = b[r] = v[r](n));
  let x = (
    /*finalDescription*/
    n[16] && Mm(n)
  ), k = (
    /*marketingPrice*/
    n[8] && km(n)
  );
  const T = (
    /*#slots*/
    n[30].toolbar
  ), S = Zn(
    T,
    n,
    /*$$scope*/
    n[29],
    gm
  ), V = (
    /*#slots*/
    n[30].arrow
  ), z = Zn(
    V,
    n,
    /*$$scope*/
    n[29],
    mm
  );
  return {
    c() {
      t = W("div"), e = W("div"), p && p.c(), i = oe(), m && m.c(), s = oe(), o && o.c(), a = oe(), x && x.c(), l = oe(), k && k.c(), c = oe(), S && S.c(), h = oe(), z && z.c(), y(e, "class", d = "tag-popup-content " + /*effectiveTheme*/
      n[17] + " svelte-u1dbzb"), y(t, "class", f = "tag-popup tag-popup-" + /*placement*/
      n[0] + " svelte-u1dbzb");
    },
    m(O, A) {
      X(O, t, A), R(t, e), p && p.m(e, null), R(e, i), m && m.m(e, null), R(e, s), ~r && b[r].m(e, null), R(e, a), x && x.m(e, null), R(e, l), k && k.m(e, null), R(e, c), S && S.m(e, null), R(e, h), z && z.m(e, null), g = !0;
    },
    p(O, A) {
      /*finalTitle*/
      O[4] ? p ? p.p(O, A) : (p = bm(O), p.c(), p.m(e, i)) : p && (p.d(1), p = null), /*isMarketingTag*/
      O[2] && /*primaryTags*/
      (O[3].length > 0 || /*secondaryTags*/
      O[9].length > 0) ? m ? m.p(O, A) : (m = ym(O), m.c(), m.m(e, s)) : m && (m.d(1), m = null);
      let C = r;
      r = w(O), r === C ? ~r && b[r].p(O, A) : (o && (Me(), Y(b[C], 1, 1, () => {
        b[C] = null;
      }), ke()), ~r ? (o = b[r], o ? o.p(O, A) : (o = b[r] = v[r](O), o.c()), F(o, 1), o.m(e, a)) : o = null), /*finalDescription*/
      O[16] ? x ? x.p(O, A) : (x = Mm(O), x.c(), x.m(e, l)) : x && (x.d(1), x = null), /*marketingPrice*/
      O[8] ? k ? k.p(O, A) : (k = km(O), k.c(), k.m(e, c)) : k && (k.d(1), k = null), S && S.p && (!g || A[0] & /*$$scope*/
      536870912) && qn(
        S,
        T,
        O,
        /*$$scope*/
        O[29],
        g ? Jn(
          T,
          /*$$scope*/
          O[29],
          A,
          zk
        ) : Kn(
          /*$$scope*/
          O[29]
        ),
        gm
      ), z && z.p && (!g || A[0] & /*$$scope*/
      536870912) && qn(
        z,
        V,
        O,
        /*$$scope*/
        O[29],
        g ? Jn(
          V,
          /*$$scope*/
          O[29],
          A,
          Lk
        ) : Kn(
          /*$$scope*/
          O[29]
        ),
        mm
      ), (!g || A[0] & /*effectiveTheme*/
      131072 && d !== (d = "tag-popup-content " + /*effectiveTheme*/
      O[17] + " svelte-u1dbzb")) && y(e, "class", d), (!g || A[0] & /*placement*/
      1 && f !== (f = "tag-popup tag-popup-" + /*placement*/
      O[0] + " svelte-u1dbzb")) && y(t, "class", f);
    },
    i(O) {
      g || (F(o), F(S, O), F(z, O), g = !0);
    },
    o(O) {
      Y(o), Y(S, O), Y(z, O), g = !1;
    },
    d(O) {
      O && U(t), p && p.d(), m && m.d(), ~r && b[r].d(), x && x.d(), k && k.d(), S && S.d(O), z && z.d(O);
    }
  };
}
function Hk(n, t, e) {
  let i, s, r, o, a, l, c, h, d, f, g, p, m, v, b, w, x, k, T, S, V, z, O, A, C, { $$slots: I = {}, $$scope: E } = t, { tag: D } = t, { config: L = {} } = t, { theme: N = void 0 } = t, { placement: G = "right-top" } = t;
  return n.$$set = (Z) => {
    "tag" in Z && e(1, D = Z.tag), "config" in Z && e(18, L = Z.config), "theme" in Z && e(19, N = Z.theme), "placement" in Z && e(0, G = Z.placement), "$$scope" in Z && e(29, E = Z.$$scope);
  }, n.$$.update = () => {
    var Z, ee, J, ie, ne, he;
    n.$$.dirty[0] & /*tag*/
    2 && e(2, i = D.contentType === "Marketing"), n.$$.dirty[0] & /*isMarketingTag*/
    4 && e(28, s = i ? "light" : "dark"), n.$$.dirty[0] & /*tag, theme, defaultTheme*/
    268959746 && e(17, r = D.data.theme !== void 0 && D.data.theme !== null ? D.data.theme : N != null ? N : s), n.$$.dirty[0] & /*tag*/
    2 && e(27, o = D.data.title || D.data.name || ""), n.$$.dirty[0] & /*tag*/
    2 && e(26, a = D.data.description || D.data.tooltip || ""), n.$$.dirty[0] & /*title*/
    134217728 && e(4, l = o || ""), n.$$.dirty[0] & /*description*/
    67108864 && e(16, c = a || ""), n.$$.dirty[0] & /*isMarketingTag, tag*/
    6 && e(25, h = (() => {
      var Le, we, le, ae, ce, Ee, Ae, Ge, Be, Te, Ne;
      if (i)
        return null;
      if (D.data.mediaData && D.data.mediaData.length > 0) {
        const ue = D.data.mediaData[0];
        if (ue.type === "Video") {
          if (ue.videoCoverUrl)
            return ue.videoCoverUrl;
          if (ue.url) {
            const Se = ue.url.toLowerCase();
            if (Uc(Se)) {
              const ze = f1(Se);
              if (ze)
                return `https://img.youtube.com/vi/${ze}/hqdefault.jpg`;
            }
            if (Xc(Se)) {
              const ze = p1(Se);
              if (ze)
                return `https://vumbnail.com/${ze}.jpg`;
            }
            return;
          }
        }
        if (D.contentType === "Panorama")
          return (Ne = (Ae = (le = (we = (Le = D.data.mediaData) == null ? void 0 : Le[0]) == null ? void 0 : we.cube) == null ? void 0 : le.front) != null ? Ae : (Ee = (ce = (ae = D.data.mediaData) == null ? void 0 : ae[0]) == null ? void 0 : ce.thumbnail) == null ? void 0 : Ee.split("?")[0]) != null ? Ne : (Te = (Be = (Ge = D.data.mediaData) == null ? void 0 : Ge[0]) == null ? void 0 : Be.url) == null ? void 0 : Te.split("?")[0];
        if (ue.url || ue.thumbnail)
          return ue.url || ue.thumbnail;
      }
      return D.data.imageUrl;
    })()), n.$$.dirty[0] & /*config, mediaRawUrl, tag*/
    33816578 && e(15, d = L != null && L.imageURLTransform && (h != null && h.includes("realsee-cdn") || h != null && h.includes("ljcdn.com")) ? L.imageURLTransform(h, { width: 280, height: 280 }) : h || D.data.mediaUrl || ""), n.$$.dirty[0] & /*tag*/
    2 && e(6, f = D.contentType === "Video" || D.data.mediaType === "video"), n.$$.dirty[0] & /*tag*/
    2 && e(14, g = D.contentType === "Panorama" || D.data.mediaType === "panorama"), n.$$.dirty[0] & /*isVideoMedia, tag*/
    66 && e(24, p = f && D.data.mediaData && ((Z = D.data.mediaData[0]) == null ? void 0 : Z.url) && Uc(D.data.mediaData[0].url)), n.$$.dirty[0] & /*isVideoMedia, tag*/
    66 && e(23, m = f && D.data.mediaData && ((ee = D.data.mediaData[0]) == null ? void 0 : ee.url) && Xc(D.data.mediaData[0].url)), n.$$.dirty[0] & /*isYouTubeVideo, isVimeoVideo*/
    25165824 && e(5, v = p || m), n.$$.dirty[0] & /*isExternalVideo, tag*/
    34 && e(13, b = v && D.data.mediaData && ((J = D.data.mediaData[0]) != null && J.url) ? U4(D.data.mediaData[0].url, { autoplay: 0 }) : ""), n.$$.dirty[0] & /*isYouTubeVideo, isVimeoVideo, finalTitle*/
    25165840 && e(12, w = p ? "YouTube video player" : m ? "Vimeo video player" : l), n.$$.dirty[0] & /*tag*/
    2 && e(11, x = ((ie = D.data.mediaData) == null ? void 0 : ie.length) || 0), n.$$.dirty[0] & /*isMarketingTag, tag*/
    6 && e(22, T = i ? D.data.brandTags || [] : []), n.$$.dirty[0] & /*isMarketingTag, tag*/
    6 && e(21, S = i ? D.data.tags || [] : []), n.$$.dirty[0] & /*marketingBrandTags*/
    4194304 && e(3, V = T.filter(Boolean).slice(0, 2)), n.$$.dirty[0] & /*primaryTags*/
    8 && e(20, z = Math.max(0, 2 - V.length)), n.$$.dirty[0] & /*remainingCount, marketingTags*/
    3145728 && e(9, O = z > 0 ? S.filter(Boolean).slice(0, z) : []), n.$$.dirty[0] & /*isMarketingTag, tag*/
    6 && e(8, A = i && ((ne = D.data.price) == null ? void 0 : ne.value) || ""), n.$$.dirty[0] & /*isMarketingTag, tag*/
    6 && e(7, C = i && ((he = D.data.price) == null ? void 0 : he.unit) || "");
  }, e(10, k = 1), [
    G,
    D,
    i,
    V,
    l,
    v,
    f,
    C,
    A,
    O,
    k,
    x,
    w,
    b,
    g,
    d,
    c,
    r,
    L,
    N,
    z,
    S,
    T,
    m,
    p,
    h,
    a,
    o,
    s,
    E,
    I
  ];
}
class Fk extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      Hk,
      _k,
      Pe,
      {
        tag: 1,
        config: 18,
        theme: 19,
        placement: 0
      },
      Tk,
      [-1, -1]
    );
  }
}
function Nk(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f, g;
  return {
    c() {
      t = be("svg"), e = be("defs"), i = be("linearGradient"), s = be("stop"), r = be("stop"), a = be("linearGradient"), l = be("stop"), c = be("stop"), d = be("path"), y(
        s,
        "stop-color",
        /*color*/
        n[1]
      ), y(s, "offset", "0%"), y(
        r,
        "stop-color",
        /*color*/
        n[1]
      ), y(r, "stop-opacity", ".5"), y(r, "offset", "100%"), y(i, "id", o = "arrow-right-icon-gradient-" + /*color*/
      n[1]), y(i, "x1", "96.2%"), y(i, "y1", "50%"), y(i, "x2", "0%"), y(i, "y2", "50%"), y(
        l,
        "stop-color",
        /*color*/
        n[1]
      ), y(l, "offset", "0%"), y(
        c,
        "stop-color",
        /*color*/
        n[1]
      ), y(c, "stop-opacity", "0"), y(c, "offset", "100%"), y(a, "id", h = "arrow-right-icon-stroke-" + /*color*/
      n[1]), y(a, "x1", "50%"), y(a, "y1", "9.83%"), y(a, "x2", "41.99%"), y(a, "y2", "24.46%"), y(d, "d", "M4.84572153,2.14166669 C4.94036186,2.14170036 5.03490004,2.17870347 5.10676798,2.25203341 L9.39516942,6.66308361 C9.48635681,6.75687897 9.53195051,6.87843949 9.53195051,7 C9.53195051,7.12156051 9.48635681,7.24312103 9.39516942,7.33691639 L5.11673708,11.7390017 C5.02118573,11.813978 4.92122439,11.8514005 4.82705048,11.851434 C4.73517505,11.8514667 4.65029153,11.8150862 4.59276829,11.7576692 C4.51856427,11.6593496 4.48179951,11.5564146 4.48176638,11.4595899 C4.48173399,11.3649536 4.51747117,11.2773335 4.58937836,11.2035272 L7.74273899,7.43877755 C7.84906128,7.31184097 7.90222243,7.15592048 7.90222243,7 C7.90222243,6.84407952 7.84906128,6.68815903 7.74273449,6.56121708 L4.54804918,2.74803934 C4.65338339,2.20863952 4.74441906,2.14163065 4.84572153,2.14166669 Z"), y(d, "fill", f = `url(#arrow-right-icon-gradient-${/*color*/
      n[1]})`), y(d, "fill-rule", "nonzero"), y(d, "stroke", g = `url(#arrow-right-icon-stroke-${/*color*/
      n[1]})`), y(d, "stroke-width", ".2"), y(t, "xmlns", "http://www.w3.org/2000/svg"), y(t, "viewBox", "0 0 14 14"), y(
        t,
        "width",
        /*size*/
        n[0]
      ), y(
        t,
        "height",
        /*size*/
        n[0]
      ), Q(
        t,
        "opacity",
        /*opacity*/
        n[2]
      );
    },
    m(p, m) {
      X(p, t, m), R(t, e), R(e, i), R(i, s), R(i, r), R(e, a), R(a, l), R(a, c), R(t, d);
    },
    p(p, [m]) {
      m & /*color*/
      2 && y(
        s,
        "stop-color",
        /*color*/
        p[1]
      ), m & /*color*/
      2 && y(
        r,
        "stop-color",
        /*color*/
        p[1]
      ), m & /*color*/
      2 && o !== (o = "arrow-right-icon-gradient-" + /*color*/
      p[1]) && y(i, "id", o), m & /*color*/
      2 && y(
        l,
        "stop-color",
        /*color*/
        p[1]
      ), m & /*color*/
      2 && y(
        c,
        "stop-color",
        /*color*/
        p[1]
      ), m & /*color*/
      2 && h !== (h = "arrow-right-icon-stroke-" + /*color*/
      p[1]) && y(a, "id", h), m & /*color*/
      2 && f !== (f = `url(#arrow-right-icon-gradient-${/*color*/
      p[1]})`) && y(d, "fill", f), m & /*color*/
      2 && g !== (g = `url(#arrow-right-icon-stroke-${/*color*/
      p[1]})`) && y(d, "stroke", g), m & /*size*/
      1 && y(
        t,
        "width",
        /*size*/
        p[0]
      ), m & /*size*/
      1 && y(
        t,
        "height",
        /*size*/
        p[0]
      ), m & /*opacity*/
      4 && Q(
        t,
        "opacity",
        /*opacity*/
        p[2]
      );
    },
    i: se,
    o: se,
    d(p) {
      p && U(t);
    }
  };
}
function Gk(n, t, e) {
  let { size: i = "14" } = t, { color: s = "#ffffff" } = t, { opacity: r = 1 } = t;
  return n.$$set = (o) => {
    "size" in o && e(0, i = o.size), "color" in o && e(1, s = o.color), "opacity" in o && e(2, r = o.opacity);
  }, [i, s, r];
}
class Wk extends Ie {
  constructor(t) {
    super(), Ce(this, t, Gk, Nk, Pe, { size: 0, color: 1, opacity: 2 });
  }
}
function Qk(n) {
  let t, e, i, s, r, o, a, l, c, h, d, f, g;
  return {
    c() {
      t = be("svg"), e = be("defs"), i = be("linearGradient"), s = be("stop"), r = be("stop"), a = be("linearGradient"), l = be("stop"), c = be("stop"), d = be("path"), y(
        s,
        "stop-color",
        /*color*/
        n[1]
      ), y(s, "offset", "0%"), y(
        r,
        "stop-color",
        /*color*/
        n[1]
      ), y(r, "stop-opacity", ".5"), y(r, "offset", "100%"), y(i, "id", o = "share-icon-gradient-" + /*color*/
      n[1]), y(i, "x1", "41.65%"), y(i, "y1", "59.05%"), y(i, "x2", "66.13%"), y(i, "y2", "9.07%"), y(
        l,
        "stop-color",
        /*color*/
        n[1]
      ), y(l, "offset", "0%"), y(
        c,
        "stop-color",
        /*color*/
        n[1]
      ), y(c, "stop-opacity", "0"), y(c, "offset", "100%"), y(a, "id", h = "share-icon-stroke-" + /*color*/
      n[1]), y(a, "x1", "55.68%"), y(a, "y1", "2.48%"), y(a, "x2", "60.83%"), y(a, "y2", "14.28%"), y(d, "d", "M12.4937515,2.60140991 L12.6834904,2.60248871 C13.307774,2.63121157 13.9222065,2.90874077 14.3642696,3.436433 C14.7794904,3.93278385 14.923342,4.60854408 14.8265514,5.24548738 C14.7279361,5.89144103 14.4428997,6.3527969 14.063774,6.65956953 C13.6079793,7.02837949 13.0189069,7.17403325 12.4632035,7.15562178 C11.7380729,7.13162078 11.0390809,7.42803145 10.5261758,7.9357119 C9.96083448,8.49643643 9.67596892,9.19792997 9.69443632,9.91942004 C9.66449732,10.8859455 9.96309104,11.5807243 10.4796578,12.092029 C11.0239965,12.6296813 11.7402488,12.9101676 12.4817091,12.8884813 C13.0940469,12.8705618 13.7481304,13.0495781 14.2150699,13.5117611 C14.6987029,13.9904677 14.9268415,14.6256711 14.8974895,15.2508921 C14.8684928,15.868544 14.5880857,16.4761837 14.055365,16.9134138 C13.5533941,17.3248246 12.8689122,17.4672624 12.2258037,17.3713572 C11.5727886,17.2736846 11.1063284,16.991503 10.7961882,16.6159844 C10.4239402,16.1652655 10.2768519,15.5827583 10.2954352,15.0332376 C10.3197006,14.3149783 10.0202124,13.6224897 9.50703789,13.1145427 C8.94671715,12.5587885 8.2455275,12.2800717 7.51547371,12.2927077 C7.23521908,12.3053648 6.95603622,12.2673623 6.69423123,12.1827116 C6.1605306,11.9588888 5.9529663,11.8380114 5.77703284,11.66387 C5.40155143,11.2922134 5.1829777,10.8272392 5.11950899,10.3459077 C5.05433663,9.85165608 5.15259721,9.34024891 5.41443015,8.89062791 C5.61688125,8.49864777 5.91421421,8.21950306 6.25529625,8.03627882 C6.64911257,7.8247265 7.1008248,7.74055154 7.53306889,7.75691992 L7.73219905,7.75624362 C8.39290266,7.7280909 9.01896921,7.44343917 9.49037385,6.97683639 C10.0339806,6.43762468 10.3173723,5.72806794 10.2954528,4.99382841 C10.2784266,4.38712951 10.4592448,3.74020534 10.9258673,3.27833603 C11.4093877,2.79921041 12.051472,2.57340998 12.6834904,2.60248871 Z"), y(d, "fill", f = `url(#share-icon-gradient-${/*color*/
      n[1]})`), y(d, "fill-rule", "nonzero"), y(d, "stroke", g = `url(#share-icon-stroke-${/*color*/
      n[1]})`), y(d, "stroke-width", ".2"), y(t, "xmlns", "http://www.w3.org/2000/svg"), y(t, "viewBox", "0 0 20 20"), y(
        t,
        "width",
        /*size*/
        n[0]
      ), y(
        t,
        "height",
        /*size*/
        n[0]
      ), Q(
        t,
        "opacity",
        /*opacity*/
        n[2]
      );
    },
    m(p, m) {
      X(p, t, m), R(t, e), R(e, i), R(i, s), R(i, r), R(e, a), R(a, l), R(a, c), R(t, d);
    },
    p(p, [m]) {
      m & /*color*/
      2 && y(
        s,
        "stop-color",
        /*color*/
        p[1]
      ), m & /*color*/
      2 && y(
        r,
        "stop-color",
        /*color*/
        p[1]
      ), m & /*color*/
      2 && o !== (o = "share-icon-gradient-" + /*color*/
      p[1]) && y(i, "id", o), m & /*color*/
      2 && y(
        l,
        "stop-color",
        /*color*/
        p[1]
      ), m & /*color*/
      2 && y(
        c,
        "stop-color",
        /*color*/
        p[1]
      ), m & /*color*/
      2 && h !== (h = "share-icon-stroke-" + /*color*/
      p[1]) && y(a, "id", h), m & /*color*/
      2 && f !== (f = `url(#share-icon-gradient-${/*color*/
      p[1]})`) && y(d, "fill", f), m & /*color*/
      2 && g !== (g = `url(#share-icon-stroke-${/*color*/
      p[1]})`) && y(d, "stroke", g), m & /*size*/
      1 && y(
        t,
        "width",
        /*size*/
        p[0]
      ), m & /*size*/
      1 && y(
        t,
        "height",
        /*size*/
        p[0]
      ), m & /*opacity*/
      4 && Q(
        t,
        "opacity",
        /*opacity*/
        p[2]
      );
    },
    i: se,
    o: se,
    d(p) {
      p && U(t);
    }
  };
}
function Uk(n, t, e) {
  let { size: i = "20" } = t, { color: s = "#ffffff" } = t, { opacity: r = 1 } = t;
  return n.$$set = (o) => {
    "size" in o && e(0, i = o.size), "color" in o && e(1, s = o.color), "opacity" in o && e(2, r = o.opacity);
  }, [i, s, r];
}
class Xk extends Ie {
  constructor(t) {
    super(), Ce(this, t, Uk, Qk, Pe, { size: 0, color: 1, opacity: 2 });
  }
}
function Yk(n) {
  De(n, "svelte-18owx9v", ".tag-popover-toolbar.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;margin-top:0.75rem;padding-top:0;border-top:none}.tag-popover-toolbar.both-buttons.svelte-18owx9v.svelte-18owx9v{justify-content:space-between}.tag-popover-toolbar.single-button.svelte-18owx9v.svelte-18owx9v{justify-content:flex-end}.tag-popover-toolbar-dark.svelte-18owx9v .tag-popover-btn.svelte-18owx9v{color:#ffffff}.tag-popover-toolbar-light.svelte-18owx9v .tag-popover-btn.svelte-18owx9v{color:rgba(0, 0, 0, 0.85)}.tag-popover-btn.view-more.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;justify-content:center;font-weight:500;font-size:0.875rem;letter-spacing:0;line-height:1.25rem}.tag-popover-btn.share.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem}");
}
function Dm(n) {
  let t, e, i, s, r = (
    /*toolbar*/
    n[0].showMore && Sm(n)
  ), o = (
    /*toolbar*/
    n[0].showShare && Tm(n)
  );
  return {
    c() {
      t = W("div"), r && r.c(), e = oe(), o && o.c(), y(t, "class", i = "tag-popover-toolbar tag-popover-toolbar-" + /*theme*/
      n[1] + " " + /*toolbar*/
      (n[0].showMore && /*toolbar*/
      n[0].showShare ? "both-buttons" : "single-button") + " svelte-18owx9v");
    },
    m(a, l) {
      X(a, t, l), r && r.m(t, null), R(t, e), o && o.m(t, null), s = !0;
    },
    p(a, l) {
      /*toolbar*/
      a[0].showMore ? r ? (r.p(a, l), l & /*toolbar*/
      1 && F(r, 1)) : (r = Sm(a), r.c(), F(r, 1), r.m(t, e)) : r && (Me(), Y(r, 1, 1, () => {
        r = null;
      }), ke()), /*toolbar*/
      a[0].showShare ? o ? (o.p(a, l), l & /*toolbar*/
      1 && F(o, 1)) : (o = Tm(a), o.c(), F(o, 1), o.m(t, null)) : o && (Me(), Y(o, 1, 1, () => {
        o = null;
      }), ke()), (!s || l & /*theme, toolbar*/
      3 && i !== (i = "tag-popover-toolbar tag-popover-toolbar-" + /*theme*/
      a[1] + " " + /*toolbar*/
      (a[0].showMore && /*toolbar*/
      a[0].showShare ? "both-buttons" : "single-button") + " svelte-18owx9v")) && y(t, "class", i);
    },
    i(a) {
      s || (F(r), F(o), s = !0);
    },
    o(a) {
      Y(r), Y(o), s = !1;
    },
    d(a) {
      a && U(t), r && r.d(), o && o.d();
    }
  };
}
function Sm(n) {
  let t, e, i, s, r, o, a;
  return s = new Wk({
    props: {
      size: "14",
      color: (
        /*theme*/
        n[1] === "light" ? "#000000" : "#ffffff"
      ),
      opacity: (
        /*theme*/
        n[1] === "light" ? 0.8 : 1
      )
    }
  }), {
    c() {
      t = W("div"), e = je(
        /*viewMoreText*/
        n[2]
      ), i = oe(), ve(s.$$.fragment), y(t, "class", "tag-popover-btn view-more svelte-18owx9v");
    },
    m(l, c) {
      X(l, t, c), R(t, e), R(t, i), me(s, t, null), r = !0, o || (a = Oe(
        t,
        "click",
        /*handleViewMore*/
        n[3]
      ), o = !0);
    },
    p(l, c) {
      (!r || c & /*viewMoreText*/
      4) && He(
        e,
        /*viewMoreText*/
        l[2]
      );
      const h = {};
      c & /*theme*/
      2 && (h.color = /*theme*/
      l[1] === "light" ? "#000000" : "#ffffff"), c & /*theme*/
      2 && (h.opacity = /*theme*/
      l[1] === "light" ? 0.8 : 1), s.$set(h);
    },
    i(l) {
      r || (F(s.$$.fragment, l), r = !0);
    },
    o(l) {
      Y(s.$$.fragment, l), r = !1;
    },
    d(l) {
      l && U(t), ge(s), o = !1, a();
    }
  };
}
function Tm(n) {
  let t, e, i, s, r;
  return e = new Xk({
    props: {
      size: "20",
      color: (
        /*theme*/
        n[1] === "light" ? "#000000" : "#ffffff"
      ),
      opacity: (
        /*theme*/
        n[1] === "light" ? 0.8 : 1
      )
    }
  }), {
    c() {
      t = W("div"), ve(e.$$.fragment), y(t, "class", "tag-popover-btn share svelte-18owx9v");
    },
    m(o, a) {
      X(o, t, a), me(e, t, null), i = !0, s || (r = Oe(
        t,
        "click",
        /*handleShare*/
        n[4]
      ), s = !0);
    },
    p(o, a) {
      const l = {};
      a & /*theme*/
      2 && (l.color = /*theme*/
      o[1] === "light" ? "#000000" : "#ffffff"), a & /*theme*/
      2 && (l.opacity = /*theme*/
      o[1] === "light" ? 0.8 : 1), e.$set(l);
    },
    i(o) {
      i || (F(e.$$.fragment, o), i = !0);
    },
    o(o) {
      Y(e.$$.fragment, o), i = !1;
    },
    d(o) {
      o && U(t), ge(e), s = !1, r();
    }
  };
}
function Zk(n) {
  let t, e, i = (
    /*toolbar*/
    (n[0].showMore || /*toolbar*/
    n[0].showShare) && Dm(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*toolbar*/
      s[0].showMore || /*toolbar*/
      s[0].showShare ? i ? (i.p(s, r), r & /*toolbar*/
      1 && F(i, 1)) : (i = Dm(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function Jk(n, t, e) {
  let i;
  const s = qi("hooks");
  Rr();
  let { tag: r } = t, { toolbar: o = { showMore: !0, showShare: !0 } } = t, { theme: a = "dark" } = t, { closePopover: l = void 0 } = t;
  function c(d) {
    d.stopPropagation(), typeof l == "function" && l(), s.emit("click", { event: d, target: "TagPopoverViewMore", tag: r });
  }
  function h(d) {
    d.stopPropagation(), typeof l == "function" && l(), s.emit("click", { event: d, target: "TagPopoverShare", tag: r });
  }
  return n.$$set = (d) => {
    "tag" in d && e(5, r = d.tag), "toolbar" in d && e(0, o = d.toolbar), "theme" in d && e(1, a = d.theme), "closePopover" in d && e(6, l = d.closePopover);
  }, n.$$.update = () => {
    n.$$.dirty & /*tag*/
    32 && e(2, i = (() => _e(r.data.highlightText) && r.data.highlightText.trim() !== "" ? r.data.highlightText : _e(r.config.popoverConfig.viewMoreText) && r.config.popoverConfig.viewMoreText.trim() !== "" ? r.config.popoverConfig.viewMoreText : "查看更多")());
  }, [o, a, i, c, h, r, l];
}
class qk extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      Jk,
      Zk,
      Pe,
      {
        tag: 5,
        toolbar: 0,
        theme: 1,
        closePopover: 6
      },
      Yk
    );
  }
}
function Kk(n) {
  let t, e;
  return t = new qk({
    props: {
      toolbar: {
        showMore: (
          /*toolbar*/
          n[7].showMore === void 0 ? !0 : (
            /*toolbar*/
            n[7].showMore
          )
        ),
        showShare: (
          /*toolbar*/
          n[7].showShare === void 0 ? !0 : (
            /*toolbar*/
            n[7].showShare
          )
        )
      },
      theme: (
        /*effectiveTheme*/
        n[2]
      ),
      tag: (
        /*tag*/
        n[4]
      ),
      closePopover: (
        /*closePopover*/
        n[8]
      )
    }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s & /*toolbar*/
      128 && (r.toolbar = {
        showMore: (
          /*toolbar*/
          i[7].showMore === void 0 ? !0 : (
            /*toolbar*/
            i[7].showMore
          )
        ),
        showShare: (
          /*toolbar*/
          i[7].showShare === void 0 ? !0 : (
            /*toolbar*/
            i[7].showShare
          )
        )
      }), s & /*effectiveTheme*/
      4 && (r.theme = /*effectiveTheme*/
      i[2]), s & /*tag*/
      16 && (r.tag = /*tag*/
      i[4]), s & /*closePopover*/
      256 && (r.closePopover = /*closePopover*/
      i[8]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function $k(n) {
  let t, e, i, s;
  return t = new Ck({
    props: {
      show: (
        /*showArrow*/
        n[0]
      ),
      direction: (
        /*arrowDirection*/
        n[1]
      ),
      theme: (
        /*effectiveTheme*/
        n[2]
      )
    }
  }), i = new Fk({
    props: {
      placement: (
        /*adjustedPlacement*/
        n[3]
      ),
      tag: (
        /*tag*/
        n[4]
      ),
      config: (
        /*config*/
        n[5]
      ),
      theme: (
        /*theme*/
        n[6]
      ),
      $$slots: { toolbar: [Kk] },
      $$scope: { ctx: n }
    }
  }), i.$on(
    "resize",
    /*resize_handler*/
    n[9]
  ), {
    c() {
      ve(t.$$.fragment), e = oe(), ve(i.$$.fragment);
    },
    m(r, o) {
      me(t, r, o), X(r, e, o), me(i, r, o), s = !0;
    },
    p(r, [o]) {
      const a = {};
      o & /*showArrow*/
      1 && (a.show = /*showArrow*/
      r[0]), o & /*arrowDirection*/
      2 && (a.direction = /*arrowDirection*/
      r[1]), o & /*effectiveTheme*/
      4 && (a.theme = /*effectiveTheme*/
      r[2]), t.$set(a);
      const l = {};
      o & /*adjustedPlacement*/
      8 && (l.placement = /*adjustedPlacement*/
      r[3]), o & /*tag*/
      16 && (l.tag = /*tag*/
      r[4]), o & /*config*/
      32 && (l.config = /*config*/
      r[5]), o & /*theme*/
      64 && (l.theme = /*theme*/
      r[6]), o & /*$$scope, toolbar, effectiveTheme, tag, closePopover*/
      1428 && (l.$$scope = { dirty: o, ctx: r }), i.$set(l);
    },
    i(r) {
      s || (F(t.$$.fragment, r), F(i.$$.fragment, r), s = !0);
    },
    o(r) {
      Y(t.$$.fragment, r), Y(i.$$.fragment, r), s = !1;
    },
    d(r) {
      ge(t, r), r && U(e), ge(i, r);
    }
  };
}
function e7(n, t, e) {
  let { showArrow: i } = t, { arrowDirection: s } = t, { effectiveTheme: r } = t, { adjustedPlacement: o } = t, { tag: a } = t, { config: l } = t, { theme: c } = t, { toolbar: h } = t, { closePopover: d } = t;
  function f(g) {
    An.call(this, n, g);
  }
  return n.$$set = (g) => {
    "showArrow" in g && e(0, i = g.showArrow), "arrowDirection" in g && e(1, s = g.arrowDirection), "effectiveTheme" in g && e(2, r = g.effectiveTheme), "adjustedPlacement" in g && e(3, o = g.adjustedPlacement), "tag" in g && e(4, a = g.tag), "config" in g && e(5, l = g.config), "theme" in g && e(6, c = g.theme), "toolbar" in g && e(7, h = g.toolbar), "closePopover" in g && e(8, d = g.closePopover);
  }, [
    i,
    s,
    r,
    o,
    a,
    l,
    c,
    h,
    d,
    f
  ];
}
class t7 extends Ie {
  constructor(t) {
    super(), Ce(this, t, e7, $k, Pe, {
      showArrow: 0,
      arrowDirection: 1,
      effectiveTheme: 2,
      adjustedPlacement: 3,
      tag: 4,
      config: 5,
      theme: 6,
      toolbar: 7,
      closePopover: 8
    });
  }
}
function i7(n) {
  De(n, "svelte-12m4kzk", ".tag-popover.svelte-12m4kzk{position:absolute;z-index:1000010;pointer-events:auto;width:auto;height:auto;padding:0;margin:0;visibility:visible;opacity:1}.tag-popover-content.svelte-12m4kzk{cursor:pointer;pointer-events:auto}");
}
function Lm(n) {
  let t, e, i, s, r, o, a, l, c;
  return i = new t7({
    props: {
      showArrow: (
        /*showArrow*/
        n[8]
      ),
      arrowDirection: (
        /*arrowDirection*/
        n[7]
      ),
      effectiveTheme: (
        /*effectiveTheme*/
        n[13]
      ),
      adjustedPlacement: (
        /*adjustedPlacement*/
        n[4]
      ),
      tag: (
        /*tag*/
        n[0]
      ),
      config: (
        /*config*/
        n[1]
      ),
      theme: (
        /*theme*/
        n[2]
      ),
      toolbar: (
        /*toolbar*/
        n[11]
      ),
      closePopover: (
        /*closePopoverInternal*/
        n[19]
      )
    }
  }), i.$on(
    "viewMore",
    /*handleViewMore*/
    n[15]
  ), i.$on(
    "share",
    /*handleShare*/
    n[16]
  ), i.$on(
    "resize",
    /*handleContentResize*/
    n[17]
  ), {
    c() {
      t = W("div"), e = W("div"), ve(i.$$.fragment), y(e, "class", "tag-popover-content svelte-12m4kzk"), y(t, "class", r = "tag-popover tag-popover-" + /*effectiveTheme*/
      n[13] + " tag-popover-" + /*adjustedPlacement*/
      n[4] + " svelte-12m4kzk"), y(t, "data-tag-id", o = /*tag*/
      n[0].id), Q(
        t,
        "z-index",
        /*zIndex*/
        n[12]
      ), Q(
        t,
        "left",
        /*finalPosition*/
        n[9].x + "px"
      ), Q(
        t,
        "top",
        /*finalPosition*/
        n[9].y + "px"
      );
    },
    m(h, d) {
      X(h, t, d), R(t, e), me(i, e, null), n[30](e), n[31](t), a = !0, l || (c = [
        Oe(
          e,
          "mouseenter",
          /*mouseenter_handler*/
          n[28]
        ),
        Oe(
          e,
          "mouseleave",
          /*mouseleave_handler*/
          n[29]
        ),
        Oe(
          e,
          "click",
          /*handleClick*/
          n[18]
        )
      ], l = !0);
    },
    p(h, d) {
      n = h;
      const f = {};
      d[0] & /*showArrow*/
      256 && (f.showArrow = /*showArrow*/
      n[8]), d[0] & /*arrowDirection*/
      128 && (f.arrowDirection = /*arrowDirection*/
      n[7]), d[0] & /*effectiveTheme*/
      8192 && (f.effectiveTheme = /*effectiveTheme*/
      n[13]), d[0] & /*adjustedPlacement*/
      16 && (f.adjustedPlacement = /*adjustedPlacement*/
      n[4]), d[0] & /*tag*/
      1 && (f.tag = /*tag*/
      n[0]), d[0] & /*config*/
      2 && (f.config = /*config*/
      n[1]), d[0] & /*theme*/
      4 && (f.theme = /*theme*/
      n[2]), d[0] & /*toolbar*/
      2048 && (f.toolbar = /*toolbar*/
      n[11]), i.$set(f), (!a || d[0] & /*effectiveTheme, adjustedPlacement*/
      8208 && r !== (r = "tag-popover tag-popover-" + /*effectiveTheme*/
      n[13] + " tag-popover-" + /*adjustedPlacement*/
      n[4] + " svelte-12m4kzk")) && y(t, "class", r), (!a || d[0] & /*tag*/
      1 && o !== (o = /*tag*/
      n[0].id)) && y(t, "data-tag-id", o), (!a || d[0] & /*zIndex*/
      4096) && Q(
        t,
        "z-index",
        /*zIndex*/
        n[12]
      ), (!a || d[0] & /*finalPosition*/
      512) && Q(
        t,
        "left",
        /*finalPosition*/
        n[9].x + "px"
      ), (!a || d[0] & /*finalPosition*/
      512) && Q(
        t,
        "top",
        /*finalPosition*/
        n[9].y + "px"
      );
    },
    i(h) {
      a || (F(i.$$.fragment, h), mt(() => {
        a && (s || (s = Ii(
          e,
          /*fadeAndFly*/
          n[14],
          {
            duration: (
              /*transitionDuration*/
              n[10]
            ),
            easing: Mo,
            y: (
              /*arrowDirection*/
              n[7] === "top" ? -8 : (
                /*arrowDirection*/
                n[7] === "bottom" ? 8 : 0
              )
            ),
            x: (
              /*arrowDirection*/
              n[7] === "left" ? -8 : (
                /*arrowDirection*/
                n[7] === "right" ? 8 : 0
              )
            )
          },
          !0
        )), s.run(1));
      }), a = !0);
    },
    o(h) {
      Y(i.$$.fragment, h), s || (s = Ii(
        e,
        /*fadeAndFly*/
        n[14],
        {
          duration: (
            /*transitionDuration*/
            n[10]
          ),
          easing: Mo,
          y: (
            /*arrowDirection*/
            n[7] === "top" ? -8 : (
              /*arrowDirection*/
              n[7] === "bottom" ? 8 : 0
            )
          ),
          x: (
            /*arrowDirection*/
            n[7] === "left" ? -8 : (
              /*arrowDirection*/
              n[7] === "right" ? 8 : 0
            )
          )
        },
        !1
      )), s.run(0), a = !1;
    },
    d(h) {
      h && U(t), ge(i), n[30](null), h && s && s.end(), n[31](null), l = !1, vt(c);
    }
  };
}
function n7(n) {
  let t, e, i = (
    /*visible*/
    n[3] && /*finalPosition*/
    n[9] && Lm(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, r) {
      /*visible*/
      s[3] && /*finalPosition*/
      s[9] ? i ? (i.p(s, r), r[0] & /*visible, finalPosition*/
      520 && F(i, 1)) : (i = Lm(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function s7(n, t, e) {
  let i, s, r, o, a, l, c, h, d;
  const f = qi("hooks");
  let { tag: g } = t, { config: p = {} } = t, { triggerElement: m } = t, { wrapperElement: v = document.body } = t, { popoverContainer: b = null } = t, { theme: w = void 0 } = t, { visible: x = !0 } = t, { closePopover: k = void 0 } = t;
  const T = Rr();
  let S, V = { width: 0, height: 0 }, z = null, O = s;
  function A(le, { duration: ae = 400, easing: ce = Mo, x: Ee = 0, y: Ae = 0 }) {
    return {
      duration: ae,
      css: (Ge, Be) => `
          opacity: ${Ge};
          transform: translate(${Be * Ee}px, ${Be * Ae}px);
        `
    };
  }
  const C = () => {
    if (!g.screenPosition || !m || !v)
      return s;
    const le = (p == null ? void 0 : p.autoPlacementBaseSpace) || {
      top: 0.2,
      // 顶部区域占比20%
      bottom: 0.2,
      // 底部区域占比20%
      right: 0.15
      // 右侧区域占比15%
    }, ae = v.clientWidth, ce = v.clientHeight, Ee = ce * le.top, Ae = ce * (1 - le.bottom), Ge = ae * (1 - le.right), Be = g.screenPosition.leftPx, Te = g.screenPosition.topPx, Ne = V.width || 280, ue = V.height || 200;
    return Te <= Ee ? Be <= Ge ? Be + Ne <= ae && Te + ue <= ce ? "right-top" : "bottom-left" : Be - Ne >= 0 && Te + ue <= ce ? "left-top" : "bottom-right" : Te >= Ae ? Be <= Ge ? Be + Ne <= ae && Te - ue >= 0 ? "right-bottom" : "top-left" : Be - Ne >= 0 && Te - ue >= 0 ? "left-bottom" : "top-right" : Be <= Ge ? Be + Ne <= ae ? "right-top" : "left-top" : Be - Ne >= 0 ? "left-top" : "right-top";
  }, I = (le, ae) => {
    if (!le)
      return null;
    const ce = 8, Ee = _({}, le);
    return ["top", "top-left", "top-right"].includes(ae) ? Ee.y -= ce : ["bottom", "bottom-left", "bottom-right"].includes(ae) ? Ee.y += ce : ["left", "left-top", "left-bottom"].includes(ae) ? Ee.x -= ce : ["right", "right-top", "right-bottom"].includes(ae) && (Ee.x += ce), Ee;
  }, E = (le, ae) => {
    switch (le) {
      case "top":
      case "top-left":
      case "top-right":
        return {
          x: ae.left + ae.width / 2,
          y: ae.top
        };
      case "bottom":
      case "bottom-left":
      case "bottom-right":
        return {
          x: ae.left + ae.width / 2,
          y: ae.top + ae.height
        };
      case "left":
      case "left-top":
      case "left-bottom":
        return {
          x: ae.left,
          y: ae.top + ae.height / 2
        };
      case "right":
      case "right-top":
      case "right-bottom":
        return {
          x: ae.left + ae.width,
          y: ae.top + ae.height / 2
        };
      default:
        return {
          x: ae.left + ae.width / 2,
          y: ae.top
        };
    }
  }, D = (le) => {
    ie(), f && f.emit("click", {
      event: le.detail.event,
      target: "TagPopoverViewMore",
      tag: g
    });
  }, L = (le) => {
    ie(), f && f.emit("click", {
      event: le.detail.event,
      target: "TagPopoverShare",
      tag: g
    });
  }, N = (le) => {
    e(24, V = le.detail), V.width > 0 && V.height > 0 && e(4, O = C());
  }, G = (le) => {
    ie(), le.stopPropagation(), f.emit("click", { event: le, target: "TagPopoverContent", tag: g });
  };
  let Z = null, ee = !1;
  function J() {
    b && Z && Z.parentNode !== b && b.appendChild(Z);
  }
  Ot(() => {
    (!v || v === document.body) && console.warn("TagPopover 组件警告：禁止使用 document.body 作为 wrapperElement，请传入自定义容器元素。"), ee = !0, J(), v && v !== document.body && e(20, v.style.overflow = "hidden", v);
  }), Lh(() => {
    ee && J();
  }), oi(() => {
    Z && Z.parentNode && Z.parentNode.removeChild(Z), v && v !== document.body && e(20, v.style.overflow = "", v);
  });
  function ie() {
    typeof k == "function" && k(), T("close");
  }
  function ne(le) {
    An.call(this, n, le);
  }
  function he(le) {
    An.call(this, n, le);
  }
  function Le(le) {
    Ze[le ? "unshift" : "push"](() => {
      S = le, e(5, S);
    });
  }
  function we(le) {
    Ze[le ? "unshift" : "push"](() => {
      Z = le, e(6, Z);
    });
  }
  return n.$$set = (le) => {
    "tag" in le && e(0, g = le.tag), "config" in le && e(1, p = le.config), "triggerElement" in le && e(21, m = le.triggerElement), "wrapperElement" in le && e(20, v = le.wrapperElement), "popoverContainer" in le && e(22, b = le.popoverContainer), "theme" in le && e(2, w = le.theme), "visible" in le && e(3, x = le.visible), "closePopover" in le && e(23, k = le.closePopover);
  }, n.$$.update = () => {
    if (n.$$.dirty[0] & /*theme, tag*/
    5 && e(13, i = (() => _e(w) ? w : _e(g.data.theme) && ["light", "dark"].includes(g.data.theme) ? g.data.theme : g.contentType === "Marketing" ? "light" : "dark")()), n.$$.dirty[0] & /*config*/
    2 && e(27, s = (p == null ? void 0 : p.placement) || "right-top"), n.$$.dirty[0] & /*config*/
    2 && e(11, a = (() => typeof (p == null ? void 0 : p.toolbar) == "boolean" ? p.toolbar ? { showMore: !0, showShare: !0 } : { showMore: !1, showShare: !1 } : (p == null ? void 0 : p.toolbar) || { showMore: !0, showShare: !0 })()), n.$$.dirty[0] & /*placement*/
    134217728 && (s === "auto" ? e(4, O = C()) : e(4, O = s)), n.$$.dirty[0] & /*config*/
    2 && e(10, l = (p == null ? void 0 : p.transitionDuration) || 350), n.$$.dirty[0] & /*tag, triggerElement*/
    2097153 && g.screenPosition && m && e(4, O = C()), n.$$.dirty[0] & /*popoverContentElementRect*/
    16777216 && V.width > 0 && V.height > 0 && e(4, O = C()), n.$$.dirty[0] & /*tag, adjustedPlacement, triggerElement*/
    2097169 && g.screenPosition && O && m) {
      const le = m.getBoundingClientRect();
      e(25, z = E(O, le));
    }
    n.$$.dirty[0] & /*anchorPosition, adjustedPlacement*/
    33554448 && e(9, c = I(z, O)), n.$$.dirty[0] & /*arrow*/
    67108864 && e(8, h = typeof r == "boolean" ? r : !0), n.$$.dirty[0] & /*adjustedPlacement*/
    16 && e(7, d = (() => {
      switch (O) {
        case "top":
        case "top-left":
        case "top-right":
          return "bottom";
        case "bottom":
        case "bottom-left":
        case "bottom-right":
          return "top";
        case "left":
        case "left-top":
        case "left-bottom":
          return "right";
        case "right":
        case "right-top":
        case "right-bottom":
          return "left";
        default:
          return "bottom";
      }
    })());
  }, e(26, r = !0), e(12, o = 1060), [
    g,
    p,
    w,
    x,
    O,
    S,
    Z,
    d,
    h,
    c,
    l,
    a,
    o,
    i,
    A,
    D,
    L,
    N,
    G,
    ie,
    v,
    m,
    b,
    k,
    V,
    z,
    r,
    s,
    ne,
    he,
    Le,
    we
  ];
}
class r7 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      s7,
      n7,
      Pe,
      {
        tag: 0,
        config: 1,
        triggerElement: 21,
        wrapperElement: 20,
        popoverContainer: 22,
        theme: 2,
        visible: 3,
        closePopover: 23
      },
      i7,
      [-1, -1]
    );
  }
}
function o7(n) {
  De(n, "svelte-2g2g8a", ".tag.svelte-2g2g8a{position:absolute;width:0rem;height:0rem;overflow:visible;pointer-events:auto;will-change:opacity;transition:opacity 0.2s linear}.tag.enableZIndex.svelte-2g2g8a{position:absolute}.tag.hide.svelte-2g2g8a{opacity:0;pointer-events:none}.tag.hide.svelte-2g2g8a *{pointer-events:none !important}.tag.unClickable.svelte-2g2g8a{pointer-events:none !important}.tag.unClickable.svelte-2g2g8a *{pointer-events:none !important}");
}
function zm(n) {
  let t, e, i, s, r, o, a, l, c, h;
  const d = [l7, a7], f = [];
  function g(b, w) {
    return (
      /*havePoint*/
      b[10] ? 0 : 1
    );
  }
  e = g(n), i = f[e] = d[e](n);
  const p = [h7, c7], m = [];
  function v(b, w) {
    return (
      /*haveContent*/
      b[20] ? 0 : 1
    );
  }
  return r = v(n), o = m[r] = p[r](n), {
    c() {
      t = W("div"), i.c(), s = oe(), o.c(), y(t, "class", "tag svelte-2g2g8a"), y(
        t,
        "data-tag-id",
        /*id*/
        n[18]
      ), y(
        t,
        "data-tag-unfolded",
        /*unfolded*/
        n[8]
      ), y(t, "data-content-type", a = /*tag*/
      n[0].contentType), y(t, "data-popover-enabled", l = /*tag*/
      n[0].isPopoverConfigEnabled()), y(t, "id", c = `tag-${/*id*/
      n[18]}`), ye(
        t,
        "unClickable",
        /*tag*/
        n[0].config.clickable === !1
      ), ye(
        t,
        "hide",
        /*hide*/
        n[16]
      ), ye(
        t,
        "enableZIndex",
        /*zIndex*/
        n[13]
      ), Q(
        t,
        "z-index",
        /*zIndex*/
        n[13]
      ), Q(t, "transform", `translate3d(${/*left*/
      n[15]}, ${/*top*/
      n[14]}, 0) scale(${/*screenPosition*/
      n[9].scale})`);
    },
    m(b, w) {
      X(b, t, w), f[e].m(t, null), R(t, s), m[r].m(t, null), n[29](t), h = !0;
    },
    p(b, w) {
      let x = e;
      e = g(b), e === x ? f[e].p(b, w) : (Me(), Y(f[x], 1, 1, () => {
        f[x] = null;
      }), ke(), i = f[e], i ? i.p(b, w) : (i = f[e] = d[e](b), i.c()), F(i, 1), i.m(t, s));
      let k = r;
      r = v(b), r === k ? m[r].p(b, w) : (Me(), Y(m[k], 1, 1, () => {
        m[k] = null;
      }), ke(), o = m[r], o ? o.p(b, w) : (o = m[r] = p[r](b), o.c()), F(o, 1), o.m(t, null)), (!h || w[0] & /*id*/
      262144) && y(
        t,
        "data-tag-id",
        /*id*/
        b[18]
      ), (!h || w[0] & /*unfolded*/
      256) && y(
        t,
        "data-tag-unfolded",
        /*unfolded*/
        b[8]
      ), (!h || w[0] & /*tag*/
      1 && a !== (a = /*tag*/
      b[0].contentType)) && y(t, "data-content-type", a), (!h || w[0] & /*tag*/
      1 && l !== (l = /*tag*/
      b[0].isPopoverConfigEnabled())) && y(t, "data-popover-enabled", l), (!h || w[0] & /*id*/
      262144 && c !== (c = `tag-${/*id*/
      b[18]}`)) && y(t, "id", c), (!h || w[0] & /*tag*/
      1) && ye(
        t,
        "unClickable",
        /*tag*/
        b[0].config.clickable === !1
      ), (!h || w[0] & /*hide*/
      65536) && ye(
        t,
        "hide",
        /*hide*/
        b[16]
      ), (!h || w[0] & /*zIndex*/
      8192) && ye(
        t,
        "enableZIndex",
        /*zIndex*/
        b[13]
      ), w[0] & /*zIndex*/
      8192 && Q(
        t,
        "z-index",
        /*zIndex*/
        b[13]
      ), w[0] & /*left, top, screenPosition*/
      49664 && Q(t, "transform", `translate3d(${/*left*/
      b[15]}, ${/*top*/
      b[14]}, 0) scale(${/*screenPosition*/
      b[9].scale})`);
    },
    i(b) {
      h || (F(i), F(o), h = !0);
    },
    o(b) {
      Y(i), Y(o), h = !1;
    },
    d(b) {
      b && U(t), f[e].d(), m[r].d(), n[29](null);
    }
  };
}
function a7(n) {
  let t;
  return {
    c() {
      t = W("div"), y(t, "data-info", "tag point is disable");
    },
    m(e, i) {
      X(e, t, i);
    },
    p: se,
    i: se,
    o: se,
    d(e) {
      e && U(t);
    }
  };
}
function l7(n) {
  let t, e, i;
  function s(o) {
    n[28](o);
  }
  let r = {
    tag: (
      /*tag*/
      n[0]
    ),
    handleMouseEnter: (
      /*handleMouseEnter*/
      n[24]
    ),
    handleMouseLeave: (
      /*handleMouseLeave*/
      n[25]
    ),
    handleTagPointClick: (
      /*handleTagPointClick*/
      n[26]
    )
  };
  return (
    /*tagPointClickHelper*/
    n[12] !== void 0 && (r.tagPointClickHelper = /*tagPointClickHelper*/
    n[12]), t = new dk({ props: r }), Ze.push(() => gl(t, "tagPointClickHelper", s)), {
      c() {
        ve(t.$$.fragment);
      },
      m(o, a) {
        me(t, o, a), i = !0;
      },
      p(o, a) {
        const l = {};
        a[0] & /*tag*/
        1 && (l.tag = /*tag*/
        o[0]), !e && a[0] & /*tagPointClickHelper*/
        4096 && (e = !0, l.tagPointClickHelper = /*tagPointClickHelper*/
        o[12], ml(() => e = !1)), t.$set(l);
      },
      i(o) {
        i || (F(t.$$.fragment, o), i = !0);
      },
      o(o) {
        Y(t.$$.fragment, o), i = !1;
      },
      d(o) {
        ge(t, o);
      }
    }
  );
}
function c7(n) {
  let t;
  return {
    c() {
      t = W("div"), y(t, "data-info", "tag content is disable");
    },
    m(e, i) {
      X(e, t, i);
    },
    p: se,
    i: se,
    o: se,
    d(e) {
      e && U(t);
    }
  };
}
function h7(n) {
  let t, e;
  return t = new cd({
    props: {
      mediaStore: (
        /*mediaStore*/
        n[1]
      ),
      tag: gt(
        /*tag*/
        n[0]
      ),
      hooks: (
        /*hooks*/
        n[21]
      ),
      state: (
        /*state*/
        n[4]
      ),
      temporaryState: (
        /*temporaryState*/
        n[5]
      ),
      rendererMap: (
        /*rendererMap*/
        n[2]
      ),
      contentTypeMap: (
        /*contentTypeMap*/
        n[3]
      )
    }
  }), {
    c() {
      ve(t.$$.fragment);
    },
    m(i, s) {
      me(t, i, s), e = !0;
    },
    p(i, s) {
      const r = {};
      s[0] & /*mediaStore*/
      2 && (r.mediaStore = /*mediaStore*/
      i[1]), s[0] & /*tag*/
      1 && (r.tag = gt(
        /*tag*/
        i[0]
      )), s[0] & /*state*/
      16 && (r.state = /*state*/
      i[4]), s[0] & /*temporaryState*/
      32 && (r.temporaryState = /*temporaryState*/
      i[5]), s[0] & /*rendererMap*/
      4 && (r.rendererMap = /*rendererMap*/
      i[2]), s[0] & /*contentTypeMap*/
      8 && (r.contentTypeMap = /*contentTypeMap*/
      i[3]), t.$set(r);
    },
    i(i) {
      e || (F(t.$$.fragment, i), e = !0);
    },
    o(i) {
      Y(t.$$.fragment, i), e = !1;
    },
    d(i) {
      ge(t, i);
    }
  };
}
function Om(n) {
  var i;
  let t, e;
  return t = new r7({
    props: {
      tag: (
        /*tag*/
        n[0]
      ),
      config: (
        /*tag*/
        n[0].config.popoverConfig
      ),
      theme: (
        /*tag*/
        (i = n[0].config.popoverConfig) == null ? void 0 : i.theme
      ),
      wrapperElement: (
        /*wrapperElement*/
        n[6]
      ),
      triggerElement: (
        /*tagPointClickHelper*/
        n[12]
      ),
      popoverContainer: (
        /*popoverContainer*/
        n[7]
      ),
      visible: !0,
      closePopover: (
        /*closePopover*/
        n[27]
      )
    }
  }), t.$on(
    "mouseenter",
    /*handlePopoverMouseEnter*/
    n[22]
  ), t.$on(
    "mouseleave",
    /*handlePopoverMouseLeave*/
    n[23]
  ), t.$on(
    "close",
    /*closePopover*/
    n[27]
  ), {
    c() {
      ve(t.$$.fragment);
    },
    m(s, r) {
      me(t, s, r), e = !0;
    },
    p(s, r) {
      var a;
      const o = {};
      r[0] & /*tag*/
      1 && (o.tag = /*tag*/
      s[0]), r[0] & /*tag*/
      1 && (o.config = /*tag*/
      s[0].config.popoverConfig), r[0] & /*tag*/
      1 && (o.theme = /*tag*/
      (a = s[0].config.popoverConfig) == null ? void 0 : a.theme), r[0] & /*wrapperElement*/
      64 && (o.wrapperElement = /*wrapperElement*/
      s[6]), r[0] & /*tagPointClickHelper*/
      4096 && (o.triggerElement = /*tagPointClickHelper*/
      s[12]), r[0] & /*popoverContainer*/
      128 && (o.popoverContainer = /*popoverContainer*/
      s[7]), t.$set(o);
    },
    i(s) {
      e || (F(t.$$.fragment, s), e = !0);
    },
    o(s) {
      Y(t.$$.fragment, s), e = !1;
    },
    d(s) {
      ge(t, s);
    }
  };
}
function d7(n) {
  var a;
  let t, e = (
    /*tag*/
    n[0].isPopoverConfigEnabled() && /*hasPopoverContent*/
    n[19] && /*isHovering*/
    (n[11] || /*tag*/
    ((a = n[0].config.popoverConfig) == null ? void 0 : a.debug))
  ), i, s, r = (
    /*screenPosition*/
    n[9] && !/*disable*/
    n[17] && zm(n)
  ), o = e && Om(n);
  return {
    c() {
      r && r.c(), t = oe(), o && o.c(), i = Fe();
    },
    m(l, c) {
      r && r.m(l, c), X(l, t, c), o && o.m(l, c), X(l, i, c), s = !0;
    },
    p(l, c) {
      var h;
      /*screenPosition*/
      l[9] && !/*disable*/
      l[17] ? r ? (r.p(l, c), c[0] & /*screenPosition, disable*/
      131584 && F(r, 1)) : (r = zm(l), r.c(), F(r, 1), r.m(t.parentNode, t)) : r && (Me(), Y(r, 1, 1, () => {
        r = null;
      }), ke()), c[0] & /*tag, hasPopoverContent, isHovering*/
      526337 && (e = /*tag*/
      l[0].isPopoverConfigEnabled() && /*hasPopoverContent*/
      l[19] && /*isHovering*/
      (l[11] || /*tag*/
      ((h = l[0].config.popoverConfig) == null ? void 0 : h.debug))), e ? o ? (o.p(l, c), c[0] & /*tag, hasPopoverContent, isHovering*/
      526337 && F(o, 1)) : (o = Om(l), o.c(), F(o, 1), o.m(i.parentNode, i)) : o && (Me(), Y(o, 1, 1, () => {
        o = null;
      }), ke());
    },
    i(l) {
      s || (F(r), F(o), s = !0);
    },
    o(l) {
      Y(r), Y(o), s = !1;
    },
    d(l) {
      r && r.d(l), l && U(t), o && o.d(l), l && U(i);
    }
  };
}
function u7(n, t, e) {
  let i, s, r, o, a, l, c, h, d, f, g, { tag: p } = t, { mediaStore: m } = t, { rendererMap: v = /* @__PURE__ */ new Map() } = t, { contentTypeMap: b = /* @__PURE__ */ new Map() } = t, { state: w } = t, { temporaryState: x } = t, { wrapperElement: k = null } = t, { popoverContainer: T = null } = t;
  const S = qi("hooks");
  let V = !1, z, O = null, A = !1, C = !1;
  const I = () => {
    A = !0;
  }, E = () => {
    A = !1, !A && !C && e(11, V = !1);
  }, D = (J) => {
    var ie, ne, he, Le, we, le;
    C = !0, p.isPopoverConfigEnabled() && p.isHoverEnabled() && ((ne = (ie = p.currentConfig) == null ? void 0 : ie.popoverConfig) == null ? void 0 : ne.trigger) === "hover" && (z !== void 0 && clearTimeout(z), ((Le = (he = p.currentConfig) == null ? void 0 : he.popoverConfig) == null ? void 0 : Le.triggerDelay) > 0 ? z = setTimeout(
      () => {
        e(11, V = !0), p.hooks.emit("hover", { event: J, tag: p }), z = void 0;
      },
      (le = (we = p.currentConfig) == null ? void 0 : we.popoverConfig) == null ? void 0 : le.triggerDelay
    ) : (e(11, V = !0), p.hooks.emit("hover", { event: J, tag: p })));
  }, L = (J) => {
    var ie, ne;
    C = !1, p.isHoverEnabled() && p.isPopoverConfigEnabled() && ((ne = (ie = p.currentConfig) == null ? void 0 : ie.popoverConfig) == null ? void 0 : ne.trigger) === "hover" && (z !== void 0 && (clearTimeout(z), z = void 0), !A && !C && e(11, V = !1));
  }, N = (J) => {
    var ie, ne;
    p.isPopoverConfigEnabled() && p.isHoverEnabled() && ((ne = (ie = p.currentConfig) == null ? void 0 : ie.popoverConfig) == null ? void 0 : ne.trigger) === "click" && (e(11, V = !V), V && p.hooks.emit("hover", { event: J, tag: p }));
  };
  function G() {
    e(11, V = !1);
  }
  Ot(() => () => {
    z && clearTimeout(z);
  });
  function Z(J) {
    O = J, e(12, O);
  }
  function ee(J) {
    Ze[J ? "unshift" : "push"](() => {
      p.dom = J, e(0, p);
    });
  }
  return n.$$set = (J) => {
    "tag" in J && e(0, p = J.tag), "mediaStore" in J && e(1, m = J.mediaStore), "rendererMap" in J && e(2, v = J.rendererMap), "contentTypeMap" in J && e(3, b = J.contentTypeMap), "state" in J && e(4, w = J.state), "temporaryState" in J && e(5, x = J.temporaryState), "wrapperElement" in J && e(6, k = J.wrapperElement), "popoverContainer" in J && e(7, T = J.popoverContainer);
  }, n.$$.update = () => {
    var J, ie, ne, he;
    n.$$.dirty[0] & /*tag, rendererMap*/
    5 && e(10, i = (() => {
      var Le, we, le;
      return ((we = (Le = p.style) == null ? void 0 : Le.point) == null ? void 0 : we.enabled) === !1 || ((le = v.get(p.contentType)) == null ? void 0 : le.usePoint) === !1 || p.contentType === "Sticker" || p.contentType === "Link" || p.contentType === "VRLink" || p.contentType === "PanoLink" ? !1 : p.contentType === "Panorama" ? !0 : !(p.contentType === "Audio" && p.data.appearance === "plane");
    })()), n.$$.dirty[0] & /*tag, havePoint*/
    1025 && e(20, s = (() => !(p.isPopoverConfigEnabled() && p.contentType === "Panorama" || p.isPopoverConfigEnabled() && p.contentType === "ImageText" || p.isPopoverConfigEnabled() && p.contentType === "Text" || p.stickType !== "2DPoint" || p.entryFromModel && di(p.five.state.mode) && i))()), n.$$.dirty[0] & /*tag*/
    1 && e(19, r = (() => {
      var Le;
      return p.contentType === "Marketing" ? !!(p.data.title || p.data.name || p.data.description || p.data.tooltip || (Le = p.data.price) != null && Le.value || p.data.brandTags && p.data.brandTags.length > 0 || p.data.tags && p.data.tags.length > 0 || p.data.imageUrl || p.data.mediaUrl || p.data.mediaData && p.data.mediaData.length > 0) : !!(p.data.title || p.data.name || p.data.text || p.data.description || p.data.tooltip || p.data.imageUrl || p.data.mediaUrl || p.data.mediaData && p.data.mediaData.length > 0);
    })()), n.$$.dirty[0] & /*tag*/
    1 && e(18, o = p.id), n.$$.dirty[0] & /*tag*/
    1 && e(9, a = p.screenPosition), n.$$.dirty[0] & /*tag*/
    1 && e(17, l = p.enabled === !1 || !p.state), n.$$.dirty[0] & /*tag, screenPosition*/
    513 && e(16, c = !((J = p.state) != null && J.visible) || ((ie = p.temporaryState) == null ? void 0 : ie.visible) === !1 || !a), n.$$.dirty[0] & /*tag*/
    1 && e(8, h = ((ne = p.state) == null ? void 0 : ne.unfolded) && !p.isPopoverConfigEnabled()), n.$$.dirty[0] & /*screenPosition*/
    512 && e(15, d = (a == null ? void 0 : a.leftPx) + "px"), n.$$.dirty[0] & /*screenPosition*/
    512 && e(14, f = (a == null ? void 0 : a.topPx) + "px"), n.$$.dirty[0] & /*unfolded, tag*/
    257 && e(13, g = h ? ((he = p.zIndex) != null ? he : 0) + (h ? 1e6 : 0) : void 0);
  }, [
    p,
    m,
    v,
    b,
    w,
    x,
    k,
    T,
    h,
    a,
    i,
    V,
    O,
    g,
    f,
    d,
    c,
    l,
    o,
    r,
    s,
    S,
    I,
    E,
    D,
    L,
    N,
    G,
    Z,
    ee
  ];
}
class f7 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      u7,
      d7,
      Pe,
      {
        tag: 0,
        mediaStore: 1,
        rendererMap: 2,
        contentTypeMap: 3,
        state: 4,
        temporaryState: 5,
        wrapperElement: 6,
        popoverContainer: 7
      },
      o7,
      [-1, -1]
    );
  }
}
let cn = null;
function p7(n = 2e6) {
  return cn && document.body.contains(cn) ? (cn.style.zIndex = String(n), cn) : (cn = document.createElement("div"), cn.className = "tag-popover-container", Object.assign(cn.style, {
    position: "absolute",
    left: "0",
    top: "0",
    width: "100%",
    height: "100%",
    zIndex: String(n),
    pointerEvents: "none",
    overflow: "hidden"
  }), document.body.appendChild(cn), cn);
}
function m7(n) {
  De(n, "svelte-9ehqs9", ".tag--container.svelte-9ehqs9{box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;opacity:1;-webkit-user-select:none;-moz-user-select:none;user-select:none;transform:translate3d(0, 0, 0);transition:opacity 0.2s linear;overflow:hidden}.tag--container.hide.svelte-9ehqs9{opacity:0 !important;pointer-events:none}.tag--container.hide.svelte-9ehqs9 *{pointer-events:none !important}");
}
function jm(n, t, e) {
  const i = n.slice();
  return i[12] = t[e], i;
}
function Rm(n) {
  let t, e = [], i = /* @__PURE__ */ new Map(), s, r, o, a = (
    /*tags*/
    n[0]
  );
  const l = (c) => (
    /*tag*/
    c[12].id
  );
  for (let c = 0; c < a.length; c += 1) {
    let h = jm(n, a, c), d = l(h);
    i.set(d, e[c] = Bm(d, h));
  }
  return {
    c() {
      var c;
      t = W("div");
      for (let h = 0; h < e.length; h += 1)
        e[h].c();
      y(t, "class", "tag--container svelte-9ehqs9"), y(t, "data-infive", s = !/*state*/
      n[4].visible || !/*temporaryState*/
      n[5].visible ? "1" : "0"), ye(t, "hide", !/*state*/
      n[4].visible || !/*temporaryState*/
      n[5].visible), Q(
        t,
        "z-index",
        /*zIndex*/
        (c = n[6]) != null ? c : ""
      );
    },
    m(c, h) {
      X(c, t, h);
      for (let d = 0; d < e.length; d += 1)
        e[d] && e[d].m(t, null);
      n[10](t), o = !0;
    },
    p(c, h) {
      var d;
      h & /*state, temporaryState, tags, mediaStore, rendererMap, contentTypeMap, wrapperElement, popoverContainerEl*/
      447 && (a = /*tags*/
      c[0], Me(), e = Ei(e, h, l, 1, c, a, i, t, yn, Bm, null, jm), ke()), (!o || h & /*state, temporaryState*/
      48 && s !== (s = !/*state*/
      c[4].visible || !/*temporaryState*/
      c[5].visible ? "1" : "0")) && y(t, "data-infive", s), (!o || h & /*state, temporaryState*/
      48) && ye(t, "hide", !/*state*/
      c[4].visible || !/*temporaryState*/
      c[5].visible), h & /*zIndex*/
      64 && Q(
        t,
        "z-index",
        /*zIndex*/
        (d = c[6]) != null ? d : ""
      );
    },
    i(c) {
      if (!o) {
        for (let h = 0; h < a.length; h += 1)
          F(e[h]);
        r || mt(() => {
          r = ss(t, zt, {}), r.start();
        }), o = !0;
      }
    },
    o(c) {
      for (let h = 0; h < e.length; h += 1)
        Y(e[h]);
      o = !1;
    },
    d(c) {
      c && U(t);
      for (let h = 0; h < e.length; h += 1)
        e[h].d();
      n[10](null);
    }
  };
}
function Bm(n, t) {
  let e, i, s;
  return i = new f7({
    props: {
      state: (
        /*state*/
        t[4]
      ),
      temporaryState: (
        /*temporaryState*/
        t[5]
      ),
      tag: (
        /*tag*/
        t[12]
      ),
      mediaStore: (
        /*mediaStore*/
        t[1]
      ),
      rendererMap: (
        /*rendererMap*/
        t[2]
      ),
      contentTypeMap: (
        /*contentTypeMap*/
        t[3]
      ),
      wrapperElement: (
        /*wrapperElement*/
        t[7]
      ),
      popoverContainer: (
        /*popoverContainerEl*/
        t[8]
      )
    }
  }), {
    key: n,
    first: null,
    c() {
      e = Fe(), ve(i.$$.fragment), this.first = e;
    },
    m(r, o) {
      X(r, e, o), me(i, r, o), s = !0;
    },
    p(r, o) {
      t = r;
      const a = {};
      o & /*state*/
      16 && (a.state = /*state*/
      t[4]), o & /*temporaryState*/
      32 && (a.temporaryState = /*temporaryState*/
      t[5]), o & /*tags*/
      1 && (a.tag = /*tag*/
      t[12]), o & /*mediaStore*/
      2 && (a.mediaStore = /*mediaStore*/
      t[1]), o & /*rendererMap*/
      4 && (a.rendererMap = /*rendererMap*/
      t[2]), o & /*contentTypeMap*/
      8 && (a.contentTypeMap = /*contentTypeMap*/
      t[3]), o & /*wrapperElement*/
      128 && (a.wrapperElement = /*wrapperElement*/
      t[7]), o & /*popoverContainerEl*/
      256 && (a.popoverContainer = /*popoverContainerEl*/
      t[8]), i.$set(a);
    },
    i(r) {
      s || (F(i.$$.fragment, r), s = !0);
    },
    o(r) {
      Y(i.$$.fragment, r), s = !1;
    },
    d(r) {
      r && U(e), ge(i, r);
    }
  };
}
function g7(n) {
  let t, e, i = (
    /*state*/
    n[4].enabled && Rm(n)
  );
  return {
    c() {
      i && i.c(), t = Fe();
    },
    m(s, r) {
      i && i.m(s, r), X(s, t, r), e = !0;
    },
    p(s, [r]) {
      /*state*/
      s[4].enabled ? i ? (i.p(s, r), r & /*state*/
      16 && F(i, 1)) : (i = Rm(s), i.c(), F(i, 1), i.m(t.parentNode, t)) : i && (Me(), Y(i, 1, 1, () => {
        i = null;
      }), ke());
    },
    i(s) {
      e || (F(i), e = !0);
    },
    o(s) {
      Y(i), e = !1;
    },
    d(s) {
      i && i.d(s), s && U(t);
    }
  };
}
function v7(n, t, e) {
  let { tags: i = [] } = t, { hooks: s } = t, { mediaStore: r } = t, { rendererMap: o } = t, { contentTypeMap: a } = t, { state: l } = t, { temporaryState: c } = t, { zIndex: h = void 0 } = t, d = null, f = null, g = 2e3;
  kc("hooks", s), Ot(() => {
    e(8, f = p7(g));
  });
  function p(m) {
    Ze[m ? "unshift" : "push"](() => {
      d = m, e(7, d);
    });
  }
  return n.$$set = (m) => {
    "tags" in m && e(0, i = m.tags), "hooks" in m && e(9, s = m.hooks), "mediaStore" in m && e(1, r = m.mediaStore), "rendererMap" in m && e(2, o = m.rendererMap), "contentTypeMap" in m && e(3, a = m.contentTypeMap), "state" in m && e(4, l = m.state), "temporaryState" in m && e(5, c = m.temporaryState), "zIndex" in m && e(6, h = m.zIndex);
  }, n.$$.update = () => {
    var m, v, b, w;
    n.$$.dirty & /*tags*/
    1 && i && i.length > 0 && (g = (w = (b = (v = (m = i[0]) == null ? void 0 : m.config) == null ? void 0 : v.popoverConfig) == null ? void 0 : b.zIndex) != null ? w : 2e6);
  }, [
    i,
    r,
    o,
    a,
    l,
    c,
    h,
    d,
    f,
    s,
    p
  ];
}
class A7 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      v7,
      g7,
      Pe,
      {
        tags: 0,
        hooks: 9,
        mediaStore: 1,
        rendererMap: 2,
        contentTypeMap: 3,
        state: 4,
        temporaryState: 5,
        zIndex: 6
      },
      m7
    );
  }
}
const G1 = "Dnalogel-PanoTagPlugin", ID = (n) => `${G1}--${n}`;
class Jc extends aI {
  constructor(e, i) {
    super(e);
    /** state */
    u(this, "state", { enabled: !0, visible: !0 });
    /** debug */
    u(this, "debug");
    u(this, "debugUtil", new lI(this));
    /** 全局 hover 启用状态，默认 true */
    u(this, "globalHoverEnabled", !0);
    /** 更改 tag 模型 */
    u(this, "changeTagModel", (e, i) => $(this, null, function* () {
      var s;
      e.data = Je({}, e.data, i), yield (s = e.loadModel) == null ? void 0 : s.call(e);
    }));
    u(this, "handleFiveModeChange", (e) => {
      const i = () => {
        this.filter2DPointTag.forEach((s) => {
          s.state.visible = !1, s.applyVisible();
        }), this.five.ready().then(() => {
          this.tagsDo(this.tags, (s) => {
            s.updateVisible(), Ms(s) && e !== "Panorama" && this.changeTagMode(s, "behind");
          });
        });
      };
      this.tags.length < 500 ? i() : this.five.ready().then(() => i());
    });
    u(this, "handleFiveWantsMoveToPano", (e) => {
      if (this.tags.length > 500) {
        this.temporaryState.visible = !1, this.addRenderQueue({ type: "TagContainerSvelte", keys: ["temporaryState"] });
        return;
      } else
        this.temporaryState.visible = !0, this.tags.forEach((i) => {
          i.temporaryState.visible = !0;
        }), this.addRenderQueue({ type: "TagContainerSvelte", keys: ["tags"] }), this.tags.forEach((i) => i.applyVisible());
    });
    u(this, "clickhandler", (e) => {
      e.tag.onClick(e);
    });
    u(this, "handleFiveCameraUpdate", () => {
      this.filterPointTag.forEach((e) => e.updateScreenPosition());
    });
    u(this, "handleFiveCameraFovUpdate", () => {
      this.handleFiveCameraUpdate(), this.five.off("render.prepare", this.handleFiveCameraUpdate), this.five.on("render.prepare", this.handleFiveCameraUpdate), setTimeout(() => {
        this.five.off("render.prepare", this.handleFiveCameraUpdate);
      }, 1e3);
    });
    u(this, "handleFivePanoArrived", () => $(this, null, function* () {
      this.filter2DPointTag.forEach((e) => {
        e.state.visible = !1, e.applyVisible();
      }), this.tagsDo(this.tags, (e) => {
        e.updateVisible();
      }), this.temporaryState.visible = !0, this.addRenderQueue({ type: "TagContainerSvelte", keys: ["temporaryState"] }), yield this.setUnfolded(), this.tags.filter(F4).filter((e) => {
        var i;
        return (i = e.getConfig().modelConfig) == null ? void 0 : i.autoLookAtEnabled;
      }).forEach((e) => {
        var c;
        const i = new P.Mesh(new P.BoxGeometry(), new P.MeshBasicMaterial()), s = (c = e.model) == null ? void 0 : c.object;
        if (!s)
          return;
        i.position.copy(s.position), i.quaternion.copy(s.quaternion);
        const r = this.five.camera.position;
        i.lookAt(r.clone().setY(i.position.y));
        const o = s.quaternion.clone(), a = i.quaternion.clone(), l = Io();
        l.onUpdate(({ progress: h }) => {
          s.quaternion.copy(o.clone().slerp(a, h));
        }), l.play();
      });
    }));
    /** 楼层切换时，需要更新标签可见性 */
    u(this, "handleFiveModelShownFloorChange", () => {
      this.tagsDo(this.tags, (e) => e.updateVisible());
    });
    u(this, "onFiveRefined", tp(() => {
      di(this.five.getCurrentState().mode) ? this.setUnfoldedByCamera() : this.tags.forEach((e) => e.cache.clear()), this.tagsDo(this.tags, (e) => e.updateVisible());
    }));
    u(this, "onFiveEveryReady", () => {
      this.setUnfoldedByCamera(), di(this.five.getCurrentState().mode) && this.tagsDo(this.tags, (e) => e.updateVisible());
    });
    u(this, "render", () => {
      this.renderQueue.forEach((e, i) => {
        const { keys: s } = e;
        if (i === "TagContainerSvelte") {
          const o = this.filterPointTag.filter((l) => l.screenPosition), a = {
            hooks: this.hooks,
            tags: o,
            state: this.state,
            temporaryState: this.temporaryState,
            mediaStore: this.mediaStore,
            rendererMap: this.rendererMap,
            contentTypeMap: this.contentTypeMap,
            zIndex: this.params.containerZIndex
          };
          if (this.TagContainerSvelte) {
            let l = {};
            if (s.length === 0)
              l = a;
            else
              for (const c of s)
                l[c] = a[c];
            this.TagContainerSvelte.$set(l);
          } else {
            if (!this.container)
              return console.error("updateRenderPlaneTag: tag2DContainer not found");
            this.TagContainerSvelte = new A7({
              target: this.container,
              props: de(_({}, a), { state: de(_({}, this.state), { enabled: !1 }) })
            }), Fo(() => {
              var l;
              (l = this.TagContainerSvelte) == null || l.$set({ state: this.state });
            });
          }
        }
      }), this.renderQueue.clear();
    });
    this.params = Je({}, { debug: !1, config: this.config }, _({}, i)), this.debug = this.params.debug, this.config = this.params.config, this.debug && this.debugUtil.bindLog(), Z4(1, { namespace: $h.PlayAudio });
    try {
      Array.isArray(window.__PANOTAGPLUGIN_DEBUG_LIST__) || (window.__PANOTAGPLUGIN_DEBUG_LIST__ = []), this.NAME = G1 + "-" + window.__PANOTAGPLUGIN_DEBUG_LIST__.length, window.__PANOTAGPLUGIN_DEBUG_LIST__.push(this), window.__PANOTAGPLUGIN_DEBUG__ || Object.defineProperty(window, "__PANOTAGPLUGIN_DEBUG__", {
        get: function() {
          return window.__PANOTAGPLUGIN_DEBUG_LIST__.sort((s, r) => r.tags.length - s.tags.length)[0];
        }
      });
    } catch (s) {
    }
  }
  appendTo(e) {
    var s, r, o;
    this.container = e;
    const i = (r = (s = this.TagContainerSvelte) == null ? void 0 : s.$$) == null ? void 0 : r.root;
    i && i !== this.container && ((o = this.TagContainerSvelte) == null || o.$destroy(), this.TagContainerSvelte = void 0);
  }
  /**
   * @description 加载数据
   */
  load(e) {
    return $(this, null, function* () {
      var s, r;
      this.clearTags();
      try {
        console.debug(this.NAME, " load:", { data: JSON.parse(JSON.stringify(e)) });
      } catch (o) {
      }
      this.config = Je({}, this.config, {
        globalConfig: (s = e.globalConfig) != null ? s : {},
        contentTypeConfig: (r = e.contentTypeConfig) != null ? r : {}
      });
      const i = yield this.addTag(e.tagList);
      return this.hooks.emit("loaded"), i;
    });
  }
  /**
   * @description 添加标签
   */
  addTag(e) {
    return $(this, null, function* () {
      const s = (Array.isArray(e) ? e : [e]).filter((r) => r.position).map((r) => {
        const o = Kh(r);
        if (o === "2DPoint" || o === "3DPoint")
          return new dI(this, r);
        if (o === "Model")
          return new F1(this, r);
        if (o === "Plane")
          return new ak(this, r);
      });
      return s.forEach(X4), this.tags.push(...s), this.tagsLengthWillUpdate = !0, ui(this.five).then(() => $(this, null, function* () {
        var r, o;
        this.store.eventListenerDisposer && ((o = (r = this.store).eventListenerDisposer) == null || o.call(r)), this.state.enabled && this.handleEnable(), this.addResizeListener(), this.clearUnusedPanelTag(), this.tagsDo(s, (a) => {
          this.tags.includes(a) && (a.updateVisible(), a.updateZIndex());
        }), this.setUnfolded(), this.addRenderQueue({ type: "TagContainerSvelte" }), this.hooks.emit("tagsLengthChange");
      }));
    });
  }
  /**
   * @description 改变配置
   */
  changeConfig(e, i = !0) {
    i ? this.config = Je({}, this.config, e) : this.config = e, this.tags.forEach((s) => {
      s.updateConfig();
    }), this.tagsDo(this.tags, (s) => s.updateVisible());
  }
  /**
   * @description 改变全局配置
   */
  changeGlobalConfig(e, i = !0) {
    i ? this.config.globalConfig = Je({}, this.config.globalConfig, e) : this.config.globalConfig = e, this.tags.forEach((s) => {
      s.updateConfig();
    }), this.tagsDo(this.tags, (s) => {
      s.updateVisible();
    });
  }
  /**
   * @description 改变类型配置
   */
  changeContentTypeConfig(e, i, s = !0) {
    this.config.contentTypeConfig || (this.config.contentTypeConfig = {}), s ? this.config.contentTypeConfig[e] = Je({}, this.config.contentTypeConfig[e], i) : this.config.contentTypeConfig[e] = i, this.tags.forEach((r) => {
      r.updateConfig();
    }), this.tagsDo(this.tags, (r) => {
      r.updateVisible();
    });
  }
  show(e) {
    return $(this, null, function* () {
      if (this.checkDisposed())
        return;
      const { userAction: i = !0 } = e != null ? e : {};
      this.setState({ visible: !0 }, { userAction: i }), this.hooks.emit("show", { userAction: i });
    });
  }
  hide(e) {
    return $(this, null, function* () {
      if (this.checkDisposed())
        return;
      const { userAction: i = !0 } = e != null ? e : {};
      this.setState({ visible: !1 }, { userAction: i }), this.hooks.emit("hide", { userAction: i });
    });
  }
  enable(e) {
    if (this.checkDisposed())
      return;
    const { userAction: i = !0 } = e != null ? e : {};
    this.setState({ enabled: !0 }, { userAction: i }), this.hooks.emit("enable", { userAction: i });
  }
  disable(e) {
    if (this.checkDisposed())
      return;
    const { userAction: i = !0 } = e != null ? e : {};
    this.setState({ enabled: !1 }, { userAction: i }), this.hooks.emit("disable", { userAction: i });
  }
  setState(e, i) {
    if (this.checkDisposed())
      return;
    const { userAction: s = !0 } = i != null ? i : {}, r = _({}, this.state);
    this.state = Object.assign(this.state, e), r.visible !== this.state.visible && (e.visible ? this.handleShow() : this.handleHide()), r.enabled !== this.state.enabled && (e.enabled ? this.handleEnable() : this.handleDisable()), this.hooks.emit("stateChange", { state: this.state, prevState: r, userAction: s });
  }
  /**
   * @description 销毁
   */
  dispose() {
    var e, i, s, r, o, a;
    this.pauseCurrentMedia(), this.disposeAllCSS3DContainer(), (e = this.TagContainerSvelte) == null || e.$destroy(), this.filterCSS3DTag.forEach((l) => {
      var c;
      return (c = l.tag3DContentSvelte) == null ? void 0 : c.svelteApp.$destroy();
    }), this.tags.forEach((l) => l.cache.clear()), this.tags = [], this.tagsLengthWillUpdate = !0, this.hooks.emit("tagsLengthChange"), (i = this.store.disposers) == null || i.forEach((l) => l == null ? void 0 : l()), this.store.disposers = [], (r = (s = this.store).eventListenerDisposer) == null || r.call(s), this.store.eventListenerDisposer = void 0, (a = (o = this.store).resizeObserverDisposer) == null || a.call(o), this.store.resizeObserverDisposer = void 0, this.store.resizeObserverDisposerAdding = !1, this.five.scene.remove(this.group), this.group.remove(...this.group.children), this.gltfObjectGroup.remove(...this.gltfObjectGroup.children), this.imagePlaneGroup.remove(...this.imagePlaneGroup.children), this.five.needsRender = !0, this.store.disposed = !0, this.hooks.emit("dispose");
  }
  /**
   * @description 闪烁标签
   * @param {TagId} id
   * @param {Partial<anime.AnimeParams>} animeConfig
   */
  blinkTagById(e, i) {
    return $(this, null, function* () {
      var s;
      return (s = this.getTagById(e)) == null ? void 0 : s.blink(i);
    });
  }
  /**
   * @description 展开/收起指定id的标签
   * @param {TagId} id
   * @param {boolean} unfolded
   */
  changeUnfoldedById(e, i) {
    const s = this.getTagById(e);
    i ? s == null || s.unfold() : s == null || s.fold();
  }
  /**
   * @description 启用/停用指定id的标签
   * @param {TagId} id
   * @param {boolean} enabled
   */
  changeEnabledById(e, i) {
    var r;
    const s = this.getTagById(e);
    s && (s.enabled = i, (r = s.hooks) == null || r.emit(i ? "enable" : "disable"));
  }
  /**
   * @description 修改3D标签normal
   * @param {TagId} id
   * @param {ArrayPosition} normal
   */
  changeTagNormalById(e, i) {
    const s = this.getTagById(e);
    s && s.tag3DContentSvelte && (s.tag3DContentSvelte.currentNormal = Xn(i));
  }
  /**
   * @description 改变data
   */
  changePositionById(e, i) {
    const s = this.getTagById(e);
    s && s.setPosition(i);
  }
  /**
   * @description 改变data
   */
  changeDataById(e, i, s = !0) {
    const r = this.getTagById(e);
    r && (r.setData(i, s), this.clearUnusedPanelTag(), r.hooks.emit("dataChanged", r.data));
  }
  /**
   * @description 改变tag的stickType
   */
  changeStickTypeById(e, i, s = !0) {
    this.changeTagById(e, i, s);
  }
  /**
   * @description 改变tag任意属性
   */
  changeTagById(e, i, s = !0) {
    const r = this.getTagById(e);
    r && (r.set(i), r.updateVisible(), this.clearUnusedPanelTag(), r.hooks.emit("dataChanged", r.data));
  }
  /**
   * @description 销毁tag
   */
  destroyTagById(e) {
    (Array.isArray(e) ? e : [e]).forEach((s) => {
      var r;
      return (r = this.getTagById(s)) == null ? void 0 : r.destroy();
    });
  }
  /**
   * @deprecated
   */
  updateRenderAllTags() {
    this.tagsDo(this.tags, (e) => e.updateVisible()), this.five.needsRender = !0;
  }
  /**
   * @description 清除所有标签
   */
  clearTags() {
    var e;
    this.tags.length && (this.tags.forEach((i) => {
      var s, r, o, a, l, c;
      (s = i.tag3DContentSvelte) == null || s.dispose(), (o = (r = i.mediaPlane) == null ? void 0 : r.parent) == null || o.remove(i.mediaPlane), (c = (l = (a = i.model) == null ? void 0 : a.object) == null ? void 0 : l.parent) == null || c.remove(i.model.object);
    }), this.tags = [], this.tagsLengthWillUpdate = !0, this.hooks.emit("tagsLengthChange"), (e = this.TagContainerSvelte) == null || e.$destroy(), this.TagContainerSvelte = void 0, this.disposeAllCSS3DContainer()), this.enabledModelTagSet.clear(), this.cache.clear();
  }
  /**
   * @description 设置 unfolded
   */
  setUnfolded() {
    return $(this, null, function* () {
      return new Promise((e) => {
        setTimeout(() => {
          this.setUnfoldedByCamera(), e();
        }, 100);
      });
    });
  }
  handleShow() {
    this.state.visible = !0, this.group.visible = !0, this.addRenderQueue({ type: "TagContainerSvelte", keys: ["state"] }), this.updateRenderAllTags(), this.five.needsRender = !0;
  }
  handleHide() {
    this.pauseCurrentMedia(), this.state.visible = !1, this.group.visible = !1, this.addRenderQueue({ type: "TagContainerSvelte", keys: ["state"] }), this.five.needsRender = !0;
  }
  handleEnable() {
    this.state.enabled = !0, this.store.eventListenerDisposer = this.addEventListener(), this.five.scene.children.includes(this.group) || this.five.scene.add(this.group), this.five.needsRender = !0;
  }
  handleDisable() {
    var e, i, s;
    this.pauseCurrentMedia(), this.state.enabled = !1, (i = (e = this.store).eventListenerDisposer) == null || i.call(e), this.five.scene.remove(this.group), (s = this.TagContainerSvelte) == null || s.$set({ tags: [] }), this.five.needsRender = !0;
  }
  addResizeListener() {
    if (!this.store.resizeObserverDisposer && !this.store.resizeObserverDisposerAdding) {
      const e = this.addResizeObserver();
      this.store.resizeObserverDisposerAdding = !0, setTimeout(() => {
        this.store.resizeObserverDisposer = e, this.store.resizeObserverDisposerAdding = !1;
      }, 200);
    }
  }
  addResizeObserver() {
    if (this.store.disposed)
      return;
    const e = this.five.getElement(), i = () => {
      this.state.enabled && (this.filterPointTag.forEach((c) => c.updateScreenPosition({ force: !0 })), this.temporaryState.visible = !0, this.addRenderQueue({ type: "TagContainerSvelte", keys: ["temporaryState"] }));
    }, s = () => {
      this.state.enabled && (this.temporaryState.visible = !1, this.addRenderQueue({ type: "TagContainerSvelte", keys: ["temporaryState"] }));
    }, { observe: r, unobserve: o } = La(
      W4(() => {
        this.store.resizeObserverDisposer && s();
      }, 500),
      e
    ), { observe: a, unobserve: l } = La(
      tp(() => i(), 400),
      e
    );
    return r(), a(), () => {
      o(), l();
    };
  }
  setUnfoldedByCamera() {
    let e = !1;
    this.filterPointTag.forEach((i) => {
      const s = i.getUnfoldedByCamera();
      if (i.state && s !== void 0) {
        if (s === !0 && i.screenPosition) {
          const r = i.getConfig().unfoldedConfig;
          Os(r).keep !== "unfolded" && (e = !0);
        }
        i.state.unfolded = s;
      }
    }), e && this.filterPointTag.forEach((i) => {
      const s = i.getConfig().unfoldedConfig;
      typeof s == "object" && (s.autoUnfold || s.autoUnfold === !1 || Os(s.autoUnfold).enable === !1 || s.keep) || i.state && (i.state.unfolded = !1);
    });
  }
  changeTagMode(e, i) {
    var s;
    (s = e.tag3DContentSvelte) != null && s.css3DInstance && (e.tag3DContentSvelte.css3DInstance.mode = i);
  }
  /**
   * @description 添加 cameraUpdate, panoArrived 等事件监听
   */
  addEventListener() {
    const { five: e, hooks: i } = this, s = lh(this.five, this.onFiveEveryReady);
    return this.handleFivePanoArrived(), e.on("wantsMoveToPano", this.handleFiveWantsMoveToPano), e.on("models.refined", this.onFiveRefined), e.on("modeChange", this.handleFiveModeChange), e.on("modelShownFloorChange", this.handleFiveModelShownFloorChange), e.on("cameraUpdate", this.handleFiveCameraUpdate), e.on("cameraFovUpdate", this.handleFiveCameraFovUpdate), e.on("panoArrived", this.handleFivePanoArrived), e.on("panoArrived", this.loadVideoFirstFrame), e.on("render.prepare", this.render), i.on("click", this.clickhandler), () => {
      s(), e.off("wantsMoveToPano", this.handleFiveWantsMoveToPano), e.off("models.refined", this.onFiveRefined), e.off("modeChange", this.handleFiveModeChange), e.off("modelShownFloorChange", this.handleFiveModelShownFloorChange), e.off("cameraUpdate", this.handleFiveCameraUpdate), e.off("cameraFovUpdate", this.handleFiveCameraFovUpdate), e.off("panoArrived", this.handleFivePanoArrived), e.off("panoArrived", this.loadVideoFirstFrame), e.off("render.prepare", this.render), i.off("click", this.clickhandler), this.store.eventListenerDisposer = void 0;
    };
  }
  /**
   * @description 设置标签 hover 启用状态
   */
  setTagHoverEnabled(e, i) {
    const s = this.getTagById(e);
    s && (s.hoverEnabled = i);
  }
  /**
   * @description 获取标签 hover 启用状态
   */
  getTagHoverEnabled(e) {
    const i = this.getTagById(e);
    return i == null ? void 0 : i.hoverEnabled;
  }
  /**
   * 设置全局 hover 启用状态
   */
  setGlobalHoverEnabled(e) {
    this.globalHoverEnabled = e;
  }
  /**
   * 获取全局 hover 启用状态
   */
  getGlobalHoverEnabled() {
    return this.globalHoverEnabled;
  }
}
const ED = (n, t) => new Jc(n, t);
function b7(n) {
  De(n, "svelte-4qjwer", ".guide-line__tag.svelte-4qjwer.svelte-4qjwer{position:relative}.text-with-distance.svelte-4qjwer.svelte-4qjwer{display:flex;flex-direction:column;position:relative;padding:0.125rem 0.25rem;border-radius:0.125rem;background:linear-gradient(to top, rgba(147, 147, 147, 0.3), rgba(74, 74, 74, 0.3));box-shadow:0 0.125rem 0.5rem 0 rgba(0, 0, 0, 0.2)}.text-with-distance.svelte-4qjwer .border.svelte-4qjwer{position:absolute;top:-50%;right:-50%;bottom:-50%;left:-50%;padding:0.0625rem;border-radius:0.25rem;background:linear-gradient(to right, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.2));-webkit-mask:linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);mask:linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);mask-composite:exclude;-webkit-mask-composite:xor;transform:scale(0.5)}.distance-and-name.svelte-4qjwer.svelte-4qjwer{display:flex;gap:0.1875rem}.distance.svelte-4qjwer.svelte-4qjwer{white-space:nowrap;font-size:0.625rem;line-height:0.875rem;color:#66afff}.name.svelte-4qjwer.svelte-4qjwer{opacity:0.6;font-size:0.625rem;line-height:0.875rem;white-space:nowrap;color:#ffffff}.line-name.svelte-4qjwer.svelte-4qjwer{color:#fff;white-space:nowrap;font-size:0.625rem;line-height:0.875rem}.guide-line__tag-point.svelte-4qjwer.svelte-4qjwer{position:absolute;left:50%;bottom:0.0625rem;width:0.4375rem;height:0.125rem;transform:translateX(-50%);background:#fff;border-radius:50%;opacity:0.5}.guide-line__tag-line.svelte-4qjwer.svelte-4qjwer{position:absolute;left:50%;bottom:0.0625rem;width:0.0625rem;height:1.875rem;transform:translateX(-50%);background:linear-gradient(to top, #fff, rgba(255, 255, 255, 0))}.guide-line__tag-content.svelte-4qjwer.svelte-4qjwer{position:absolute;left:-0.9375rem;bottom:1.9375rem;display:flex}.guide-line__tag-icon.svelte-4qjwer.svelte-4qjwer{width:1.875rem;height:1.875rem;background-size:100%}.guide-line__tag-text.svelte-4qjwer.svelte-4qjwer{box-sizing:content-box;height:0.875rem;width:-moz-max-content;width:max-content;margin-top:0.3125rem;transform:translateX(-0.1875rem);white-space:nowrap;font-size:0.625rem;line-height:0.875rem;border:solid transparent;border-width:0.125rem 0.5rem 0.125rem 0.375rem;border-image-slice:6 25 6 18 fill;color:#fff}");
}
function Vm(n) {
  let t, e;
  return {
    c() {
      t = W("div"), e = je(
        /*text*/
        n[0]
      ), y(t, "class", "guide-line__tag-text svelte-4qjwer"), Q(t, "border-image-source", `url(${/*text_background_url*/
      n[6]})`);
    },
    m(i, s) {
      X(i, t, s), R(t, e);
    },
    p(i, s) {
      s & /*text*/
      1 && He(
        e,
        /*text*/
        i[0]
      );
    },
    d(i) {
      i && U(t);
    }
  };
}
function _m(n) {
  let t, e, i, s, r = (
    /*i18n*/
    n[5]("全程") + ""
  ), o, a, l = (
    /*i18n*/
    n[5]("米") + ""
  ), c, h, d, f, g, p, m = (
    /*name*/
    n[4] && Hm(n)
  );
  return {
    c() {
      t = W("div"), m && m.c(), e = oe(), i = W("div"), s = W("span"), o = je(r), a = je(
        /*distance*/
        n[2]
      ), c = je(l), h = oe(), d = W("span"), f = je(
        /*text*/
        n[0]
      ), g = oe(), p = W("div"), y(s, "class", "distance svelte-4qjwer"), y(d, "class", "name svelte-4qjwer"), y(i, "class", "distance-and-name svelte-4qjwer"), y(p, "class", "border svelte-4qjwer"), y(t, "class", "text-with-distance svelte-4qjwer");
    },
    m(v, b) {
      X(v, t, b), m && m.m(t, null), R(t, e), R(t, i), R(i, s), R(s, o), R(s, a), R(s, c), R(i, h), R(i, d), R(d, f), R(t, g), R(t, p);
    },
    p(v, b) {
      /*name*/
      v[4] ? m ? m.p(v, b) : (m = Hm(v), m.c(), m.m(t, e)) : m && (m.d(1), m = null), b & /*i18n*/
      32 && r !== (r = /*i18n*/
      v[5]("全程") + "") && He(o, r), b & /*distance*/
      4 && He(
        a,
        /*distance*/
        v[2]
      ), b & /*i18n*/
      32 && l !== (l = /*i18n*/
      v[5]("米") + "") && He(c, l), b & /*text*/
      1 && He(
        f,
        /*text*/
        v[0]
      );
    },
    d(v) {
      v && U(t), m && m.d();
    }
  };
}
function Hm(n) {
  let t, e;
  return {
    c() {
      t = W("span"), e = je(
        /*name*/
        n[4]
      ), y(t, "class", "line-name svelte-4qjwer");
    },
    m(i, s) {
      X(i, t, s), R(t, e);
    },
    p(i, s) {
      s & /*name*/
      16 && He(
        e,
        /*name*/
        i[4]
      );
    },
    d(i) {
      i && U(t);
    }
  };
}
function y7(n) {
  let t, e, i, s, r, o, a, l, c, h = (
    /*text*/
    n[0] && !/*distance*/
    n[2] && Vm(n)
  ), d = (
    /*distance*/
    n[2] && _m(n)
  );
  return {
    c() {
      t = W("div"), e = W("div"), i = oe(), s = W("div"), r = oe(), o = W("div"), a = W("div"), l = oe(), h && h.c(), c = oe(), d && d.c(), y(e, "class", "guide-line__tag-point svelte-4qjwer"), y(s, "class", "guide-line__tag-line svelte-4qjwer"), y(a, "class", "guide-line__tag-icon svelte-4qjwer"), Q(a, "background-image", `url(${/*icon_url*/
      n[1]})`), y(o, "class", "guide-line__tag-content svelte-4qjwer"), y(t, "class", "guide-line__tag svelte-4qjwer"), Q(
        t,
        "opacity",
        /*opacity*/
        n[3]
      );
    },
    m(f, g) {
      X(f, t, g), R(t, e), R(t, i), R(t, s), R(t, r), R(t, o), R(o, a), R(o, l), h && h.m(o, null), R(o, c), d && d.m(o, null);
    },
    p(f, [g]) {
      g & /*icon_url*/
      2 && Q(a, "background-image", `url(${/*icon_url*/
      f[1]})`), /*text*/
      f[0] && !/*distance*/
      f[2] ? h ? h.p(f, g) : (h = Vm(f), h.c(), h.m(o, c)) : h && (h.d(1), h = null), /*distance*/
      f[2] ? d ? d.p(f, g) : (d = _m(f), d.c(), d.m(o, null)) : d && (d.d(1), d = null), g & /*opacity*/
      8 && Q(
        t,
        "opacity",
        /*opacity*/
        f[3]
      );
    },
    i: se,
    o: se,
    d(f) {
      f && U(t), h && h.d(), d && d.d();
    }
  };
}
function w7(n, t, e) {
  let { text: i = "" } = t, { icon_url: s = "" } = t, { distance: r = 0 } = t, { opacity: o = 1 } = t, { name: a = "" } = t, { i18n: l = (h) => h } = t;
  const c = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHUAAAA2CAMAAADOFiZMAAACEFBMVEUAAACIiIheXl5oaGh6enpsbGxiYmJ9fX1wcHBXV1eBgYFzc3NSUlKNjY2Dg4NOTk51dXVXV1dmZmZTU1N3d3dcXFyMjIyEhIRNTU2QkJC0tLS5ubnHx8fOzs6np6exsbHKysqoqKi9vb3U1NTPz8/Nzc2vr6/Dw8OysrK/v7/X19fS0tKurq62traqqqrJycmurq64uLifn5/Dw8O6urqQkJC6urro6Ojt7e3o6OjU1NS3t7fBwcGjo6Ozs7Orq6u1tbXAwMCurq6rq6vy8vLx8fHr6+vp6enZ2dnd3d3a2trX19fV1dW/v7/IyMihoaGampqVlZWLi4uCgoK+vr6urq7m5ubw8PDk5OTu7u7i4uLg4ODe3t7q6urS0tLi4uLOzs7e3t7Hx8fa2tqrq6vExMTAwMCnp6efn5+WlpaHh4ezs7OoqKiJiYm6urqZmZmurq59fX29vb23t7e4uLipqanp6enc3Nza2trW1tbT09Pm5ubj4+PQ0NDg4ODExMTCwsK7u7vBwcG8vLy5ubm8vLy+vr64uLiysrKdnZ3CwsJoaGisrKzHx8ekpKTExMTv7+/i4uLa2trm5ubk5OTLy8vKysrExMTQ0NDX19ecnJzT09N/f3+dnZ12dnaQkJCXl5etra3Pz8+4uLiXl5fGxsaqqqrr6+vQ0NDKysrNzc3W1takpKShoaGsrKysrKyduRZkAAAAsHRSTlMATE1NTExMTUxNTExMTExNTExMTU1MTU1MTICFc313fnl0iIWAe3h3aYqIgXx7eXZzcnFwaGggxLiog4J0dG9mZF82FMfEtK2pkYqKh3x4cm1rZmEmH8G/vry6trOxoZ2clpKOe3ptbWZjYmFgXFpaVlFPSDYlx7CspaSjoJ6akY6HfXt4bGpmY1xUU0g2LSzCuK6lopiWhoF3YmFaVlZUUU5KPyEJCcl/fXNdXFxZUIUrIQsAAAV6SURBVFjDvZj3VxNBEMePBBIOQgmEQGghISSASSBBUQFBVIpUEaR3aVJExN4F6fbee6//opPN2507E3P7fD4+b54z+935zt7lvPsBYbZ5lyXT7R5xms2ppaVpV615eVeuXL48PPzw4YPBwYsX+/vPnT1bW1t75u7p0729PT13urs7O9vbt2/ffurUp1OQ2ts7O7u77/T09PaevnvmTG3t2XPn+vsvDg4+GH5UVjl/SAjGe29La2vr5EFgm4+WlpYDgNfrbW7etQuuKDPTPTIy4nSa4bJ8lKYBV69arXmA1WpN81FamgqYzU6n0+12ZwI+qzPtyvDlR0dPCoGsecW4FEZcShwEyUDIGvtD+DcOZlrzFvcE3qylFXZ1cTqIgGk0K1xRSL84abaWtwl/8KM5kTiok04B2BpAPUWXAoGnQK3gn0xNW90ryDhpafXvJsYlJuoSdRCyTJHqBOxR9IvbUl1/PN5pL9tFR4gTJJmi7N+wl8qf7k33S+YQE0VRJwZz42RogDZcAxx+sTn1jSDho6VFBKAbp9K1XqfXi3oRgmSqQ2AGePziNpfs2GN2lV5Pp+IJkkwIrDFz+Y+Y90h/Yvtz+f0o1YGnc/lVXvshASk8IHUm6ZMIYhI6YAEyqyHkE/n8Kkuh5AX6ZVdBlypJpRJVIgTJ0IluEGCb1BDYCzWFx79h/yl5ZV3PVUSVAQIDFhCyLO/h9E9KfuOPriOqzUFjmRYYueOqTWLGfhPfHZcGrkOlgcAGskZdAV7/eIVA2eN6qZGA3Yhcxxozn3+mkD3ZQ64Z3EnQJEBouMB+Xr+68LpAuTZBOokDoPXfNIK85vZP5AqUreNqdYI6AUINkBrAtUatgaA67mEft38GvxRThWopOAFrBbj9kYXsa3z0mnrTsLAHe3yRzxGhjoBQ0BT848foqfONkT6FAAWrce3PeEpA5vZPsDf23aIhgpfIiEiIiH/mKftPfKJxTjaNv8bM6zlSzk5dmIsMDk7EGrMEbj+e+q5xLjoyOrQbGiCCaZh5/PgLzy8YiIrgNPmaZtQovP6J3ezNafTvxEfHQ2An8v/2K47hV4J0ExVBDbNCD4e/nH0lKj1+1RBvMEQboiEMUJI1BOmmGq0pVOP1z3nYF3G53EAIN4SHx4djNyxAkutQA1QnGeD2z3rY199RIZ+EtVxDPaDm9VdspYcWj65pteFaonIDBghpzeXyzNNTbyy8CpgCyCehjnvYx+uf9RTTU9cbo7SbRPmKQBnzaKMI2igthD8jVAvIuM/rXytjfyz4MFqBDgLWPGuA05/sqRQobaOzsBMbFQsRhaAWco/A6Z92FAuU446wWL+aHJWcHJtMOzEDwWrU+PyvHEcFRlkutELInT4NFiCRGqA6yQDWfH5jWdFegXLL8V3qDIsNIySHoRsWIGMN/wBY8/mXRosFxrrDCE20EwJzCGQ9XP7crBN46AdHbthmkPvluICccLzgchnDjBD/eqaxKOOtIKGyiEzDqSFOCt7D4X/dlHFDkNCWPu3fjTHGQBgpbI06TkeIpuQ37bbltAlSKstM/g6EdYcEr0jJv2rLfrZXkFKcPhVjMsWY0GGSrTn00H7TakbD11sChd7qa+gCSKdJVitpyvWLlab6uifsieKtLk1N7QZWtvpYXl4aGxsrAtIJBQVNWVlZOTkZGRm2z7bHW0q2lJRkZ2c3NOTn19fV19fn5zfAsmQL8Nhmg66cHOhvKigoSC/Iysk+vH9//jd2n8g6TG7yjbXZYCAMq6s7fBiah4aGLl0aGLhw4f758zuBmpq+vurq6h07dnR1dXTcrqqq2uejqup2R0dXF8jV1X19NTU1O3feu3f+/oWBgUtD++uePHtbLAThNzRClbi+VnseAAAAAElFTkSuQmCC";
  return n.$$set = (h) => {
    "text" in h && e(0, i = h.text), "icon_url" in h && e(1, s = h.icon_url), "distance" in h && e(2, r = h.distance), "opacity" in h && e(3, o = h.opacity), "name" in h && e(4, a = h.name), "i18n" in h && e(5, l = h.i18n);
  }, [i, s, r, o, a, l, c];
}
class P7 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      w7,
      y7,
      Pe,
      {
        text: 0,
        icon_url: 1,
        distance: 2,
        opacity: 3,
        name: 4,
        i18n: 5
      },
      b7
    );
  }
}
function C7(n) {
  return n.length === 0 ? [] : n.filter((t, e) => t !== n[e - 1]);
}
function I7(n, t, e) {
  if (n.length < 2)
    return [];
  const i = [];
  n.forEach((o, a) => {
    var d, f, g, p, m, v, b, w;
    let l = (d = e == null ? void 0 : e.route_standing_positions) == null ? void 0 : d[o];
    if (l || (l = (g = (f = t.observers[o]) == null ? void 0 : f.standingPosition) == null ? void 0 : g.toArray()), !l)
      return;
    const c = n[a - 1], h = (w = (m = (p = e == null ? void 0 : e.node_pair_to_route_points) == null ? void 0 : p[`${c}:${o}`]) == null ? void 0 : m.slice()) != null ? w : (b = (v = e == null ? void 0 : e.node_pair_to_route_points) == null ? void 0 : v[`${o}:${c}`]) == null ? void 0 : b.slice().reverse();
    h == null || h.forEach((x) => {
      i.push(x);
    }), i.push(l);
  });
  const s = t.transform, r = i.map((o) => br(new P.Vector3().fromArray(o), s).toArray());
  return [de(_({}, e), { type: "CatmullRomCurve3", points: r })];
}
const E7 = (
  /* glsl */
  `
  varying vec2 vUv;
  varying float ignoreAnimationMap;
  attribute float animationWillError;

  void main() {
    vUv = uv;
    ignoreAnimationMap = animationWillError;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`
), M7 = (
  /* glsl */
  `
  precision highp float;
  precision mediump int;
  // 是否使用颜色
  uniform int useMapColor;
  // 贴图
  uniform sampler2D map;
  // 贴图颜色
  uniform vec3 mapColor;
  // 贴图透明度
  uniform float mapOpacity;
  // 背景颜色
  uniform vec3 backgroundColor;
  // 边框颜色
  uniform vec3 borderColor;
  // 边框透明度
  uniform float borderOpacity;
  // 边框宽度
  uniform float borderWidth;
  // 背景透明度
  uniform float backgroundOpacity;
  // @link https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip
  uniform int backgroundClip;
  // 整体透明度
  uniform float opacity;
  // 最大 U 值
  uniform float maxV;
  // v offset
  uniform float vOffset;
  // 闪烁动画值
  uniform float flicker;
  // 纹理坐标
  varying vec2 vUv;
  varying float ignoreAnimationMap;

  // 获取纹理颜色
  vec4 getImage() {
    vec2 uv = vUv;
    uv.y = uv.y - vOffset;

    if (ignoreAnimationMap == 1.0) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    }

    // 原始贴图颜色
    vec4 image = texture2D(map, uv);
    // 如果使用颜色
    if (useMapColor == 1) {
      // 混合颜色
      image = mix(image, vec4(mapColor, image.a), image.a);
    }
    image.a = image.a * mapOpacity;
    return image;
  }

  // 获取线性渐变的透明度
  float linearGradientOpacity() {
    // 当前的 v 值
    float v = vUv.y;
    float gradientLength = 1.0;
    if (v <= gradientLength) {
      return v / gradientLength; // 在 [0, gradientLength] 范围内，透明度为 [0, 1]
    } else if (v <= maxV - gradientLength) {
      return 1.0; // 在 (gradientLength, maxV - gradientLength) 范围内，透明度为 1
    } else {
      return (maxV - v) / gradientLength; // 在 [maxV - gradientLength, maxV] 范围内，透明度为 [1, 0]
    }
  }

  // 获取边框颜色
  vec4 getBorder() {
    float u = vUv.x;
    if (u <= borderWidth || u >= 1.0 - borderWidth) {
      return vec4(borderColor, borderOpacity);
    }
    return vec4(0.0, 0.0, 0.0, 0.0);
  }

  // 获取背景色
  vec4 getBackground() {
    // border-box
    if (backgroundClip == 0) {
      return vec4(backgroundColor, backgroundOpacity);
    } else {
    // padding-box
      float u = vUv.x;
      if (u > borderWidth && u < 1.0 - borderWidth) {
        return vec4(backgroundColor, backgroundOpacity);
      }
      return vec4(0.0, 0.0, 0.0, 0.0);
    }
  }

  // 根据摄像机位置计算透明度
  float distanceOpacity() {
    return 1.0;
  }

  void main() {
    float v = vUv.y;
    vec4 image = getImage();
    vec4 border = getBorder();
    vec4 background = getBackground();
    // 设置背景颜色
    gl_FragColor = background;
    // 混合颜色和背景
    gl_FragColor = mix(background, vec4(image.rgb, image.a * 0.4 + 0.6), image.a); //  image.a * 0.4 + 0.6 先这么写，但是不是最优解
    // 混合边框
    gl_FragColor = mix(gl_FragColor, border, border.a);
    // 设置整体透明度
    gl_FragColor.a = gl_FragColor.a * opacity;
    gl_FragColor.a = gl_FragColor.a * linearGradientOpacity();
    gl_FragColor.a = gl_FragColor.a * distanceOpacity();
    gl_FragColor.a = gl_FragColor.a * flicker;
  }
`
);
class qc {
  constructor(t, e) {
    u(this, "name", "");
    u(this, "startTagContainer");
    u(this, "endTagContainer");
    u(this, "path", []);
    u(this, "geometryStyle", {});
    u(this, "materialStyle", {});
    u(this, "meshStyle", {});
    u(this, "group", new P.Group());
    u(this, "mesh");
    u(this, "visible", null);
    u(this, "five");
    u(this, "mode");
    u(this, "_curvePath", null);
    u(this, "_curvePoints", null);
    u(this, "_panoGroup", []);
    u(this, "skippedPositions", null);
    u(this, "textureUrl", "");
    u(this, "scale", 1);
    u(this, "width", 0.5);
    u(this, "unitLength", 0.5);
    u(this, "_visibleFloorIndexes", null);
    /** Five Mode 是否满足 */
    u(this, "modeVisible", !1);
    /** 楼层是否满足展示条件 */
    u(this, "floorVisible", !0);
    /** 默认是否展示 */
    u(this, "defaultVisible", !1);
    /** 走点动画 */
    u(this, "inWalkAnimation", !1);
    u(this, "customVisible", null);
    u(this, "parent");
    u(this, "plugin");
    u(this, "textureHasLoaded", !1);
    u(this, "disposed", !1);
    u(this, "flowAnime", new Ds({ progress: 0 }).to({ progress: 1 }).duration(1500).repeat(1 / 0));
    /** 缓存 panoGroup 中每个点距离起点的长度 */
    u(this, "cacheLengths", []);
    /** 为了让多条路线在高度上错开，每个路线都需要有个额外的 offset */
    u(this, "heightOffset", 0);
    u(this, "dispose", () => {
      var t, e;
      this.disposed || (this.disposed = !0, this.parent.hooks.off("show", this.updateVisible), this.parent.hooks.off("hide", this.updateVisible), this.plugin.hooks.off("show", this.updateVisible), this.plugin.hooks.off("hide", this.updateVisible), this.plugin.hooks.off("enable", this.updateVisible), this.plugin.hooks.off("disable", this.updateVisible), this.five.off("modeChange", this.onFiveModeChange), this.five.off("modelShownFloorChange", this.onFiveModelShownFloorChange), this.doHide(), (t = this.startTagContainer) == null || t.plugin.dispose(), (e = this.endTagContainer) == null || e.plugin.dispose());
    });
    /** 开始走点动画 */
    u(this, "onWalkAnimationStart", () => {
      this.inWalkAnimation = !0, this.updateVisible();
    });
    /** 结束走点动画 */
    u(this, "onWalkAnimationEnd", () => {
      this.inWalkAnimation = !1, this.updateVisible();
    });
    /** 模型状态变更 */
    u(this, "onFiveModeChange", (t) => {
      this.modeVisible = this.mode === "panorama" ? Qn(t) : di(t), this.updateVisible();
    });
    u(this, "onFiveModelShownFloorChange", (t) => {
      this.floorVisible = t === null || this.visibleFloorIndexes === null || this.visibleFloorIndexes.includes(t), this.updateVisible();
    });
    /** 更新可见性 */
    u(this, "updateVisible", () => {
      const t = (() => !this.parent.visible || !this.plugin.state.enabled || !this.plugin.state.visible ? !1 : this.customVisible !== null ? this.customVisible : this.inWalkAnimation ? !0 : this.modeVisible && this.defaultVisible && this.floorVisible)();
      this.visible = t, t && this.textureHasLoaded ? this.doShow() : this.doHide();
    });
    u(this, "onFlowAnimeUpdate", (t) => {
      const { progress: e } = t;
      this.mesh.material.uniforms.vOffset.value = e, this.mesh.material.uniformsNeedUpdate = !0, this.five.needsRender = !0;
    });
    u(this, "logError", (t) => c1("GuideLineModeItem: ", t));
    var r, o;
    this.five = t, this.mode = e.mode, this.plugin = e.plugin, this.parent = e.parent, this.group.name = "GuideLineModeItem";
    const i = new P.BufferGeometry(), s = new P.ShaderMaterial({
      vertexShader: E7,
      fragmentShader: M7,
      transparent: !0,
      uniforms: {
        map: { value: null },
        useMapColor: { value: 0 },
        mapColor: { value: new P.Color() },
        mapOpacity: { value: 1 },
        backgroundColor: { value: new P.Color() },
        backgroundOpacity: { value: 0 },
        borderColor: { value: new P.Color() },
        borderOpacity: { value: 0 },
        backgroundClip: { value: 0 },
        borderWidth: { value: 0.05 },
        opacity: { value: 1 },
        flicker: { value: 1 },
        maxV: { value: 0 },
        vOffset: { value: 0 }
      }
    });
    this.mesh = new P.Mesh(i, s), this.mesh.name = "GuideLineModeItem", this.group.add(this.mesh), this.mode === "panorama" && (this.parent.hooks.on("walkStart", this.onWalkAnimationStart), this.parent.hooks.on("walkEnded", this.onWalkAnimationEnd)), this.updateVisible(), this.onFiveModeChange(this.five.getCurrentState().mode), this.onFiveModelShownFloorChange((o = (r = this.five.model) == null ? void 0 : r.shownFloor) != null ? o : null), this.flowAnime.onUpdate(this.onFlowAnimeUpdate), this.parent.hooks.on("show", this.updateVisible), this.parent.hooks.on("hide", this.updateVisible), this.plugin.hooks.on("show", this.updateVisible), this.plugin.hooks.on("hide", this.updateVisible), this.plugin.hooks.on("enable", this.updateVisible), this.plugin.hooks.on("disable", this.updateVisible), this.plugin.hooks.on("dispose", this.dispose), this.five.on("modeChange", this.onFiveModeChange), this.five.on("modelShownFloorChange", this.onFiveModelShownFloorChange), this.five.needsRender = !0;
  }
  get panoGroup() {
    return this._panoGroup;
  }
  /** 可展示的楼层 */
  get visibleFloorIndexes() {
    return this._visibleFloorIndexes;
  }
  /** THREE Curve 路径 */
  get curvePath() {
    return this._curvePath;
  }
  /** THREE Curve 路径上的点 */
  get curvePoints() {
    return this._curvePoints;
  }
  /** 自定义展示 */
  setCustomVisible(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.customVisible !== t && (this.customVisible = t, this.updateVisible());
  }
  /** 设置默认展示 */
  setDefaultVisible(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.defaultVisible !== t && (this.defaultVisible = t, this.updateVisible());
  }
  /** 基础宽、长 */
  setUnitSize(t, e) {
    if (this.disposed)
      return this.logError("disposed");
    this.width = t, this.unitLength = e, this.setGeometryByPath(this.path, { width: t, unit_length: e });
  }
  /** 设置缩放 */
  setScale(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.scale = t, this.setGeometryByPath(this.path, { scale: t });
  }
  /** 通过点位设置线条形状 */
  setGeometryByPanoGroup(t, e) {
    if (this.disposed)
      return this.logError("disposed");
    if (!this.five.work)
      return this.logError("setPathByPanoGroup: work is not ready");
    const i = C7(t);
    if (this._panoGroup = i, (e == null ? void 0 : e.skipPanoGroup) !== void 0) {
      const a = e.skipPanoGroup ? i.map((l) => this.plugin.workUtil.getObserverStandingPosition(l)).filter(_e) : null;
      this.skippedPositions = a;
    }
    const s = this.five.getCurrentState(), r = this.five.works.getWork(s.workCode), o = I7(i, r, e);
    this.path = o, this.setGeometryByPath(o, e);
  }
  /** 通过路径设置线条形状 */
  setGeometryByPath(t, e) {
    var h, d, f;
    if (this.disposed)
      return this.logError("disposed");
    const i = (h = e == null ? void 0 : e.scale) != null ? h : this.scale, s = (d = e == null ? void 0 : e.width) != null ? d : this.width, r = (f = e == null ? void 0 : e.unit_length) != null ? f : this.unitLength;
    this.scale = i, this.width = s, this.unitLength = r;
    const { geometry: o, maxV: a, curvePath: l, curvePoints: c } = j4({
      path: t,
      width: s * i,
      unitLength: r * i,
      skipPositions: this.skippedPositions
    });
    this._curvePath = l, this._curvePoints = c, this.mesh.geometry.copy(o), this.mesh.material.needsUpdate = !0, this.mesh.material.uniforms.maxV.value = a, this.five.needsRender = !0, this.path = t, this.geometryStyle = _(_({}, this.geometryStyle), e);
  }
  /** 设置线条材质 */
  setMartial(t) {
    var i, s, r, o, a;
    if (this.disposed)
      return this.logError("disposed");
    this.setDefaultVisible((i = t == null ? void 0 : t.visible) != null ? i : !1), this.setColor((s = t == null ? void 0 : t.color) != null ? s : "#ffffff"), this.setOpacity((r = t == null ? void 0 : t.opacity) != null ? r : 0.5), this.setTextureUrl((a = (o = t == null ? void 0 : t.texture) == null ? void 0 : o.url) != null ? a : "https://vr-image-4.realsee-cdn.cn/release/web/arrow1.ebe7d0ff.png"), (t == null ? void 0 : t.background_color) !== void 0 && this.setBackgroundColor(t.background_color), (t == null ? void 0 : t.background_opacity) !== void 0 && this.setBackgroundOpacity(t.background_opacity), (t == null ? void 0 : t.border_color) !== void 0 && this.setBorderColor(t.border_color), (t == null ? void 0 : t.border_opacity) !== void 0 && this.setBorderOpacity(t.border_opacity), (t == null ? void 0 : t.border_width) !== void 0 && this.setBorderWidth(t.border_width), (t == null ? void 0 : t.background_clip) !== void 0 && this.setBackgroundClip(t.background_clip);
    const e = _(_({}, this.materialStyle), t);
    this.materialStyle = e;
  }
  /** 设置模型状态 */
  setMeshStyle(t) {
    if (t != null && t.translate) {
      const s = new P.Vector3(), r = new P.Vector3().fromArray(t.translate);
      r.y += this.heightOffset, s.add(r), this.group.position.copy(s), i(this.startTagContainer, r), i(this.endTagContainer, r);
    }
    const e = _(_({}, this.meshStyle), t);
    this.meshStyle = e;
    function i(s, r) {
      if (!(s != null && s.tag))
        return;
      const o = new P.Vector3().fromArray(s.tag.position);
      o.add(r);
      const a = o.toArray();
      s.plugin.changeTagById(s.tag.id, { position: a });
    }
  }
  /** 设置 Y 轴上的偏移量，为了让多条路线在高度上错开，每个路线都需要有个额外的 offset */
  setHeightOffset(t) {
    const e = new P.Vector3();
    this.meshStyle.translate && e.add(new P.Vector3().fromArray(this.meshStyle.translate)), e.setY(e.y + t), this.group.position.copy(e), this.heightOffset = t, this.five.needsRender = !0;
  }
  /** 设置贴图颜色 */
  setColor(t) {
    if (this.disposed)
      return this.logError("disposed");
    t && (this.mesh.material.uniforms.mapColor.value = new P.Color().set(t)), this.mesh.material.uniforms.useMapColor.value = t ? 1 : 0, this.mesh.material.uniformsNeedUpdate = !0, this.five.needsRender = !0;
  }
  /** 设置边框 */
  setBorderColor(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.mesh.material.uniforms.borderColor.value = new P.Color().set(t), this.five.needsRender = !0;
  }
  /** 设置边框透明度 */
  setBorderOpacity(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.mesh.material.uniforms.borderOpacity.value = t, this.mesh.material.uniformsNeedUpdate = !0, this.five.needsRender = !0;
  }
  setBackgroundClip(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.mesh.material.uniforms.backgroundClip.value = t === "border-box" ? 0 : 1, this.mesh.material.uniformsNeedUpdate = !0, this.five.needsRender = !0;
  }
  /**
   * @description: 设置边框宽度
   */
  setBorderWidth(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.mesh.material.uniforms.borderWidth.value = t, this.mesh.material.uniformsNeedUpdate = !0, this.five.needsRender = !0;
  }
  /** 设置背景颜色 */
  setBackgroundColor(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.mesh.material.uniforms.backgroundColor.value = new P.Color().set(t), this.mesh.material.uniformsNeedUpdate = !0, this.five.needsRender = !0;
  }
  /** 设置背景透明度 */
  setBackgroundOpacity(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.mesh.material.uniforms.backgroundOpacity.value = t, this.mesh.material.uniformsNeedUpdate = !0, this.five.needsRender = !0;
  }
  /** 设置整体透明度 */
  setOpacity(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.mesh.material.uniforms.opacity.value = t, this.mesh.material.uniformsNeedUpdate = !0, this.five.needsRender = !0;
  }
  /** 设置贴图透明度 */
  setMapOpacity(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.mesh.material.uniforms.mapOpacity.value = t, this.mesh.material.uniformsNeedUpdate = !0, this.five.needsRender = !0;
  }
  /** 设置贴图 */
  setTextureUrl(t) {
    if (this.disposed)
      return this.logError("disposed");
    this.textureUrl = t, Es(t).then((e) => {
      this.disposed || this.textureUrl === t && (e.wrapT = P.RepeatWrapping, this.textureHasLoaded = !0, this.mesh.material.uniforms.map.value = e, this.mesh.material.uniformsNeedUpdate = !0, this.mesh.material.needsUpdate = !0, this.five.needsRender = !0, this.updateVisible());
    });
  }
  setVisibleFloorIndexes(t) {
    var e, i;
    if (this.disposed)
      return this.logError("disposed");
    this._visibleFloorIndexes = t, this.onFiveModelShownFloorChange((i = (e = this.five.model) == null ? void 0 : e.shownFloor) != null ? i : null);
  }
  setStartTag(t) {
    this.setTag("start", t);
  }
  setEndTag(t) {
    this.setTag("end", t);
  }
  /** 闪烁 */
  flicker() {
    var t, e, i, s, r, o;
    if (this.disposed)
      return this.logError("disposed");
    ul([this.group, (i = (e = (t = this.startTagContainer) == null ? void 0 : t.plugin) == null ? void 0 : e.tags[0]) == null ? void 0 : i.dom, (o = (r = (s = this.endTagContainer) == null ? void 0 : s.plugin) == null ? void 0 : r.tags[0]) == null ? void 0 : o.dom], {
      loop: 6,
      updateRender: () => {
        this.five.needsRender = !0;
      }
    });
  }
  /** 求起点到 panoIndex 曲线长度
   * @param index panoIndex 在 panoGroup 中的索引
   *
   * @description 为什么不使用 panoIndex 作为参数？
   * - panoIndex 在一个曲线中可能出现多次，无法确定是哪一个。
   */
  getLengthByPanoGroupIndex(t) {
    return this.disposed ? this.logError("disposed") : this.cacheLengths.length !== 0 ? this.cacheLengths[t] : (this.cacheLengths = this.getPanoGroupLengths(), this.cacheLengths[t]);
  }
  getPanoGroupLengths() {
    var l, c, h, d;
    if (!this.curvePoints || !this.curvePath)
      return [];
    const t = this.curvePoints.length, e = (c = (l = this.curvePath) == null ? void 0 : l.getLength()) != null ? c : 0, i = t - 1, s = e / i, r = (d = (h = this.curvePath) == null ? void 0 : h.getLengths(i)) != null ? d : [], o = [];
    let a = 0;
    for (let f = 0; f < t; f++) {
      const g = this.curvePoints[f], p = this.plugin.workUtil.getObserverStandingPosition(a);
      if (!p)
        break;
      p.clone().setY(0).distanceTo(g.clone().setY(0)) < s && (o.push(r[f]), a += 1);
    }
    return o;
  }
  setTag(t, e) {
    var l, c;
    const i = this.curvePath;
    if (!(e != null && e.data))
      return;
    const s = t === "start" ? (l = this.startTagContainer) != null ? l : (() => (this.startTagContainer = { tag: null, plugin: new Jc(this.five, { containerZIndex: 10 }) }, this.startTagContainer))() : (c = this.endTagContainer) != null ? c : (() => (this.endTagContainer = { tag: null, plugin: new Jc(this.five, { containerZIndex: 10 }) }, this.endTagContainer))(), o = Je({}, {
      contentType: "Custom",
      stickType: "2DPoint",
      config: { visibleConfig: { visibleFiveMode: ["Floorplan", "Mapview"], followModelVisibility: !1 } },
      style: { point: { enabled: !1 } },
      data: {}
    }, e);
    s.tag = o, k7(o) && (s.tag.element = (h) => {
      var g, p;
      (g = s.app) == null || g.$destroy();
      const d = t === "start" ? de(_({}, o.data), { name: this.name, distance: Math.round((p = i == null ? void 0 : i.getLength()) != null ? p : 0), i18n: this.plugin.config.i18n }) : o.data, f = new P7({ target: h, intro: !0, props: d });
      return s.app = f, () => f.$destroy();
    }), s.plugin.load({ tagList: [s.tag] });
    const a = this.meshStyle.translate;
    if (a && o.position) {
      const h = new P.Vector3().fromArray(o.position), d = new P.Vector3().fromArray(a);
      h.add(d), h.y += this.heightOffset;
      const f = h.toArray();
      s.plugin.changeTagById(s.tag.id, { position: f });
    }
  }
  doShow() {
    var t, e;
    this.mode === "model" && !this.flowAnime.isPlaying() && this.flowAnime.play(), this.five.scene.add(this.group), (t = this.startTagContainer) == null || t.plugin.show(), (e = this.endTagContainer) == null || e.plugin.show(), this.five.needsRender = !0;
  }
  doHide() {
    var t, e;
    this.mode === "model" && this.flowAnime.stop(), this.five.scene.remove(this.group), (t = this.startTagContainer) == null || t.plugin.hide(), (e = this.endTagContainer) == null || e.plugin.hide(), this.five.needsRender = !0;
  }
}
function k7(n) {
  return n.contentType === "Custom";
}
const MD = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  GuideLineModeItem: qc
}, Symbol.toStringTag, { value: "Module" })), W1 = "CruisePlugin", oc = `${W1}`;
class Q1 extends rs {
  constructor(e, i) {
    super(e, i);
    u(this, "state", {
      visible: !0,
      enabled: !0,
      disposed: !1,
      playing: !1,
      speed: 1
    });
    u(this, "data");
    u(this, "config");
    u(this, "pauseDataMap", /* @__PURE__ */ new Map());
    u(this, "privateState", {
      playing: !1,
      broke: !1,
      modeChanging: !1
    });
    u(this, "GuideLine");
    u(this, "disposedErrorLog", () => {
      console.error(`${oc} is disposed`);
    });
    u(this, "disableWarnLog", () => {
      console.warn(`${oc} is disabled`);
    });
    u(this, "disableErrorLog", () => {
      console.error(`${oc} is disabled`);
    });
    this.config = i, Object.assign(window, { [`__${W1}_DEBUG__`]: this });
  }
  /**
   * @description Play | Continue play. if have been paused, continue play from the pause position; if playing, do nothing
   */
  play(e) {
    this.setState({ playing: !0 }, e);
  }
  /**
   * @description Pause
   */
  pause(e) {
    this.setState({ playing: !1 }, e);
  }
  /**
   * @description Show guide line
   */
  show(e) {
    return $(this, null, function* () {
      this.setState({ visible: !0 }, e);
    });
  }
  /**
   * @description Hide guide line
   */
  hide(e) {
    return $(this, null, function* () {
      this.setState({ visible: !1 }, e);
    });
  }
  /**
   * @description Enable
   */
  enable(e) {
    this.setState({ enabled: !0 }, e);
  }
  /**
   * @description Disable
   */
  disable(e) {
    this.setState({ enabled: !1 }, e);
  }
  /**
   * @description Dispose
   */
  dispose() {
    this.setState({ disposed: !0 });
  }
  /**
   * @description Set state
   */
  setState(e, i) {
    var r;
    if (this.state.disposed)
      return this.disposedErrorLog();
    if (!this.state.enabled && e.enabled !== !0 && e.disposed !== !0)
      return this.disableErrorLog();
    const s = _({}, this.state);
    this.state = Je({}, this.state, e), e.disposed !== void 0 && e.disposed !== s.disposed && e.disposed && this.handleDispose(), e.visible !== void 0 && e.visible !== s.visible && this.handleVisible(e.visible, i == null ? void 0 : i.userAction), e.enabled !== void 0 && e.enabled !== s.enabled && this.handleEnable(e.enabled, i == null ? void 0 : i.userAction), e.playing !== void 0 && e.playing !== s.playing && this.changePlayState(e.playing, i), e.speed !== void 0 && e.speed !== s.speed && this.changeSpeed(e.speed), Qt(s, this.state, { deep: !0 }) || this.hooks.emit("stateChange", { state: this.state, prevState: s, userAction: (r = i == null ? void 0 : i.userAction) != null ? r : !0 });
  }
  /**
   * @description Clear pause data
   */
  clearPauseData() {
    var e, i;
    if ((e = this.data) != null && e.id)
      return this.pauseDataMap.delete((i = this.data) == null ? void 0 : i.id);
  }
  changePlayState(e, i) {
    this.actionIfStateIsEnabled(
      () => {
        var s;
        return this.hooks.emit("playStateChange", e ? "playing" : "pause", { userAction: (s = i == null ? void 0 : i.userAction) != null ? s : !0 });
      }
    ), e ? this.handlePlay(i) : this.handlePause(i), this.state.playing = e;
  }
  handleEnable(e, i = !0) {
    var s, r;
    e ? ((s = this.GuideLine) == null || s.enable(), this.hooks.emit("enable", { userAction: i })) : ((r = this.GuideLine) == null || r.disable(), this.changePlayState(!1, { userAction: i }), this.hooks.emit("disable", { userAction: i })), this.state.enabled = e;
  }
  handleVisible(e, i = !0) {
    var s, r;
    e ? ((s = this.GuideLine) == null || s.show(), this.actionIfStateIsEnabled(() => this.hooks.emit("show", { userAction: i }))) : ((r = this.GuideLine) == null || r.hide(), this.actionIfStateIsEnabled(() => this.hooks.emit("hide", { userAction: i }))), this.state.visible = e;
  }
  /**
   * @description: listen interupted by five gesture
   */
  addInterruptListener(e) {
    const i = () => {
      this.privateState.modeChanging || e();
    }, s = (r) => {
      r !== "mouseMove" && (e(), this.five.off("gesture", s));
    };
    return this.five.on("gesture", s), this.five.once("wantsChangeMode", i), () => {
      this.five.off("gesture", s), this.five.off("wantsChangeMode", i);
    };
  }
  /**
   * @description Get duration by speed
   */
  getSpeededDuration(e) {
    return e / this.state.speed;
  }
  /**
   * @description Force interupt five updateCamera
   */
  forceInteruptUpdateCamera() {
    this.five.updateCamera({}, 0);
  }
  getPauseData() {
    var e;
    if ((e = this.data) != null && e.id)
      return this.pauseDataMap.get(this.data.id);
  }
  /**
   * @description Set pause data
   */
  setPauseData() {
    var i;
    const e = (i = this.data) == null ? void 0 : i.id;
    if (e)
      return this.pauseDataMap.set(e, {
        fiveState: this.five.getCurrentState(),
        playedProgress: this.getProgress()
      });
  }
  /**
   * @description: Restore state that before loaded
   */
  clear() {
    this.clearPauseData();
  }
  // TODO
  handleDispose() {
    var e;
    this.setState({ playing: !1 }), this.clearPauseData(), this.clear(), (e = this.GuideLine) == null || e.dispose(), this.GuideLine = void 0;
  }
  /**
   * @description Action function if plugin is enable
   */
  actionIfStateIsEnabled(e, i) {
    if (this.state.enabled)
      return e();
    i != null && i.warnLog && this.disableWarnLog();
  }
}
function ac(n, t, e) {
  var l, c, h;
  const i = new P.Vector3().fromArray([(l = e.x) != null ? l : 0, (c = e.y) != null ? c : 0, (h = e.z) != null ? h : 0]), s = n.getPointAt(t).clone().add(i), r = n.getTangentAt(t), { longitude: o, latitude: a } = Ho(r);
  return { offset: s.clone(), longitude: o, latitude: a, distance: 0 };
}
let U1 = class extends Q1 {
  constructor(e, i) {
    var o;
    super(e, i);
    u(this, "curve");
    u(this, "baseCurveOffset");
    u(this, "curveOffset");
    u(this, "playStartedTime", performance.now());
    u(this, "duration");
    u(this, "changeSpeed", (e, i = !0) => {
      this.state.speed = e, this.hooks.emit("speedChange", e, { userAction: i });
    });
    u(this, "moveToStart", () => {
      this.five.setState(de(_({}, ac(this.curve, 0, this.curveOffset)), { mode: "Model" }));
    });
    u(this, "playFromStart", () => {
      this.clearPauseData(), this.setState({ playing: !0 });
    });
    u(this, "getDuration", () => this.getSpeededDuration(this.duration));
    u(this, "getProgress", () => {
      var l;
      const e = this.getPauseData();
      let i = (l = e == null ? void 0 : e.playedProgress) != null ? l : 0;
      (i < 0 || i >= 1) && (i = 0);
      const s = 1 - i, r = this.getDuration(), a = (performance.now() - this.playStartedTime) / r;
      return 1 - s + a;
    });
    const s = {
      config: {
        speedConfig: {
          moveSpeed: 2,
          moveSpeedUnit: "m/s"
        }
      }
    }, r = {
      allowBroke: !0
    };
    this.state = Je({}, s, this.state), this.config = Je({}, r, this.config), this.baseCurveOffset = Je({ x: 0, y: 0, z: 0 }, { y: 2 }, (o = this.config) == null ? void 0 : o.offset);
  }
  load(e, i) {
    var a, l, c, h, d, f, g, p, m;
    this.handlePause(), this.clear(), this.data = _({ id: Dt() }, e);
    const s = (() => {
      if (this.data.path instanceof P.Curve)
        return this.data.path.curves[0];
      {
        if (this.data.path.length < 2)
          return null;
        const v = this.data.path.map(Qe);
        return new P.CatmullRomCurve3(v, void 0, "catmullrom", 0.5);
      }
    })();
    if (!s)
      return;
    if (this.curve = s, this.curveOffset = {
      x: this.baseCurveOffset.x + ((l = (a = this.data.offset) == null ? void 0 : a.x) != null ? l : 0),
      y: this.baseCurveOffset.y + ((h = (c = this.data.offset) == null ? void 0 : c.y) != null ? h : 0),
      z: this.baseCurveOffset.z + ((f = (d = this.data.offset) == null ? void 0 : d.z) != null ? f : 0)
    }, !this.curve)
      throw new Error("curve is not defined");
    const r = this.curve.getLength(), o = this.state.config.speedConfig.moveSpeedUnit === "m/ms" ? 1 : 1e3;
    if (this.duration = r / (this.state.config.speedConfig.moveSpeed / o), Array.isArray(this.data.path)) {
      const v = this.data.path.map(Qe).map((b) => b.toArray());
      !this.GuideLine && (((g = this.config) == null ? void 0 : g.useGuideLine) !== !1 && e.useGuildLine || (p = this.config) != null && p.useGuideLine && e.useGuildLine !== !1) && (this.GuideLine = O7(this.five, this.config)), (m = this.GuideLine) == null || m.load({
        lines: [
          {
            id: Dt(),
            path: [{ type: "CatmullRomCurve3", points: v }],
            model_style: { visible: !0 }
          }
        ]
      });
    }
    return i ? this.setState(i) : (this.setState({ playing: !1 }), this.handleVisible(this.state.visible), this.handleEnable(this.state.enabled), this.changePlayState(this.state.playing), this.changeSpeed(this.state.speed)), Promise.resolve();
  }
  handlePlay() {
    return new Promise((e, i) => $(this, null, function* () {
      var l;
      this.hooks.emit("play", { userAction: !0 });
      const s = this.getPauseData();
      let r = (l = s == null ? void 0 : s.playedProgress) != null ? l : 0;
      (r < 0 || r >= 1) && (r = 0);
      const o = ac(this.curve, r, this.curveOffset);
      if (this.hooks.emit("progressChange", r), this.five.setState(de(_({}, o), { mode: "Model" })), yield this.five.ready(), this.playStartedTime = performance.now(), this.config.allowBroke) {
        const c = this.addInterruptListener(() => {
          this.state.playing && (this.hooks.emit("broke"), this.handlePause(), c(), i(new Error("broke")));
        });
      }
      const a = () => {
        const c = this.getProgress();
        if (c >= 1)
          this.five.off("renderFrame", a), this.setState({ playing: !1 }, { userAction: !1 }), this.hooks.emit("end"), this.hooks.emit("progressChange", 1), e("end");
        else if (this.state.playing === !1)
          this.five.off("renderFrame", a);
        else if (c >= 0) {
          const h = ac(this.curve, c, this.curveOffset);
          this.hooks.emit("progressChange", c), this.five.setState(h, !0);
        }
      };
      this.five.on("renderFrame", a);
    }));
  }
  handlePause(e) {
    var i;
    this.state.playing = !1, this.hooks.emit("pause", { userAction: (i = e == null ? void 0 : e.userAction) != null ? i : !0 }), this.setPauseData();
  }
};
function Fm(n) {
  const t = Math.abs(Math.cos(n.latitude));
  return new P.Vector3(
    /* x */
    -Math.sin(n.longitude) * t,
    /* y */
    -Math.sin(n.latitude),
    /* z */
    -Math.cos(n.longitude) * t
  );
}
function x7(n, t) {
  const e = Fm(n), i = Fm(t);
  return e.angleTo(i);
}
const D7 = (n) => $(void 0, null, function* () {
  try {
    n().then(() => {
    }, () => {
    }).catch(() => {
    });
  } catch (t) {
  }
});
function X1(n) {
  return new Promise((t) => {
    setTimeout(() => {
      t();
    }, n);
  });
}
function S7(n) {
  return $(this, null, function* () {
    return new Promise((t) => {
      if (n.work) {
        t();
        return;
      }
      n.once("loaded", () => t());
    });
  });
}
class hd extends Q1 {
  constructor(e, i) {
    super(e, i);
    u(this, "state", {
      visible: !0,
      enabled: !0,
      disposed: !1,
      playing: !1,
      speed: 1,
      config: {
        speedConfig: {
          rotateSpeed: 1e-3,
          rotateSpeedUnit: "rad/ms",
          moveSpeed: 2e-3,
          moveSpeedUnit: "m/ms"
        }
      }
    });
    u(this, "privateState", {
      playing: !1,
      currentPlayQueue: [],
      currentPlayKeyframe: null,
      broke: !1,
      modeChanging: !1
    });
    this.config = i, Object.assign(window, { __WalkPlugin_DEBUG__: this });
  }
  /**
   * @description Load Data and State
   */
  load(e, i, s) {
    return $(this, null, function* () {
      var h, d;
      this.clear();
      const r = this.data ? JSON.parse(JSON.stringify(this.data)) : void 0, o = yield this.formatData(e);
      this.data = _({ id: o.keyframesId }, o), this.hooks.emit("dataChange", o, r);
      let a = [], l;
      const c = this.data.keyframes.filter((f) => f.data.panoIndex !== void 0);
      c.filter((f, g) => {
        var p;
        return f.data.panoIndex !== ((p = c[g - 1]) == null ? void 0 : p.data.panoIndex);
      }).map((f) => f.data.panoIndex).forEach((f) => {
        var p, m;
        const g = (p = this.workUtil.getObserver(f)) == null ? void 0 : p.floorIndex;
        if (g !== void 0)
          if (l === g) {
            const v = a.length - 1;
            a[v] = [...(m = a[v]) != null ? m : [], f];
          } else {
            l = g;
            const v = a.length;
            a[v] = [f];
          }
      }), !this.GuideLine && ((h = this.config) == null ? void 0 : h.useGuideLine) !== !1 && o.useGuildLine !== !1 && (this.GuideLine = Z1(this.five, this.config)), (d = this.GuideLine) == null || d.load({ routes: a.map((f) => ({ panoIndexList: f })), config: o.guildPluginOptions }), i ? this.setState(i, { userAction: s }) : (this.setState({ playing: !1 }, { userAction: !1 }), this.handleVisible(this.state.visible), this.handleEnable(this.state.enabled), this.changePlayState(this.state.playing, { userAction: !1 }), this.changeSpeed(this.state.speed)), this.clearPauseData(), console.debug("WORKPLUGIN loaded", o), this.hooks.emit("dataLoaded", o);
    });
  }
  /**
   * @description If playing, first pause, then play from keyframes index/id
   * @param {number} options.index play from keyframes index
   * @param {string} options.id play from keyframes id
   */
  playFrom(e) {
    const { index: i, id: s, userAction: r } = e;
    this.state.playing && this.setState({ playing: !1 }, { userAction: r }), this.setState({ playing: !0 }, { userAction: r, playFromIndex: i, playFromId: s });
  }
  /**
   * @description Play from first keyframe
   */
  playFromStart(e) {
    return this.playFrom(de(_({}, e), { index: 0 }));
  }
  /**
   * @description Format data
   */
  formatData(e) {
    return $(this, null, function* () {
      this.five.work || (yield S7(this.five));
      const i = (() => {
        const s = e;
        return typeof s == "object" && s !== null && _e(s.version) && s.data ? s.data : s;
      })();
      if (i.keyframes)
        return {
          keyframesId: Dt(),
          keyframes: i.keyframes.map((s, r) => {
            var l;
            const o = i.keyframes[r + 1], a = (() => !o || o.start === void 0 || s.end === void 0 ? 0 : o.start - s.end)();
            return de(_({ id: (l = s.uuid) != null ? l : Dt(), moveIndex: r, stay: a, index: r }, s), { guildPluginOptions: i.guildPluginOptions });
          })
        };
      if (i.panoIndexList) {
        let s = [];
        const { moveEffect: r, moveToFirstPanoEffect: o, moveToFirstPanoDuration: a } = i;
        return this.privateState.moveToFirstPanoEffect = o, this.privateState.moveToFirstPanoDuration = a, i.panoIndexList.forEach((l, c) => {
          const h = (() => {
            var m, v;
            const d = i.panoIndexList.slice(c).find((b) => b !== l);
            if (d === void 0)
              return;
            const f = this.workUtil.getObserverPosition(l), g = this.workUtil.getObserverPosition(d);
            if (!g || !f || ((m = this.workUtil.getObserver(l)) == null ? void 0 : m.floorIndex) !== ((v = this.workUtil.getObserver(d)) == null ? void 0 : v.floorIndex))
              return;
            const p = new P.Vector3().subVectors(g, f);
            return Ho(p.normalize());
          })();
          i.moveType === void 0 || i.moveType === "justMove" ? s.push({
            moveIndex: c,
            stay: i.stay,
            data: _({ effect: "Move", panoIndex: l, moveEffect: r }, h != null ? h : {})
          }) : i.moveType === "moveAndRotate" && (s.push({ moveIndex: c, stay: i.stay, data: { effect: "Move", panoIndex: l, moveEffect: r } }), h && s.push({ moveIndex: c, stay: i.stay, data: _({ effect: "Rotate", panoIndex: l }, h) }));
        }), {
          keyframesId: Dt(),
          keyframes: s.map((l, c) => _({ id: Dt(), index: c }, l)),
          guildPluginOptions: i.guildPluginOptions,
          useGuildLine: i.useGuildLine
        };
      } else
        throw new Error("format error: data no keyframes or no panoIndexList");
    });
  }
  /**
   * @description Play | Continue play. if have been paused, continue play from the pause position; if playing, do nothing
   * @param {number} options.playFromIndex play from keyframes index
   * @param {string} options.playFromId play from keyframes id
   */
  // eslint-disable-next-line complexity
  handlePlay(e) {
    return $(this, null, function* () {
      var g;
      const { data: i, state: s, privateState: r, hooks: o } = this;
      if (r.playing || !(i != null && i.keyframes) || (i == null ? void 0 : i.keyframes.length) === 0)
        return;
      const a = Dt();
      r.playId = a, r.playing = !0, r.broke = !1;
      const l = i.keyframes, c = this.getPauseData();
      (e == null ? void 0 : e.notEmitEvent) !== !0 && o.emit("play", { userAction: (g = e == null ? void 0 : e.userAction) != null ? g : !0 });
      let h = !1;
      const f = yield (() => $(this, null, function* () {
        var p, m;
        if ((e == null ? void 0 : e.playFromIndex) !== void 0)
          return e.playFromIndex;
        if ((e == null ? void 0 : e.playFromId) !== void 0)
          return (p = this.data) == null ? void 0 : p.keyframes.findIndex((v) => v.id === e.playFromId);
        if (c != null && c.id) {
          const v = (m = this.data) == null ? void 0 : m.keyframes.find((b) => b.id === c.id);
          if (c != null && c.fiveState && (yield this.move(c.fiveState, {
            moveEffect: r.moveToFirstPanoEffect,
            duration: r.moveToFirstPanoDuration
          })), v) {
            if (v.data.effect === "Move")
              return v.index;
            if (v.data.effect === "Rotate") {
              const b = c.duration !== void 0 ? c.duration * (1 - c.playedProgress) : void 0;
              return yield this.playKeyframe(v, { duration: b }), h = !0, v.index + 1;
            }
          }
        }
      }))();
      this.clearPauseData();
      for (const p of l) {
        if (r.broke || !s.playing || !r.playing || a !== r.playId)
          return;
        if (!(f !== void 0 && p.index < f))
          try {
            o.emit("playIndexChange", p.index, p), yield this.playKeyframe(p, {
              moveEffect: h === !1 ? r.moveToFirstPanoEffect : void 0,
              duration: h === !1 && typeof r.moveToFirstPanoDuration == "number" ? r.moveToFirstPanoDuration : void 0
            }), p.stay && (yield X1(p.stay)), h === !1 && (h = !0);
          } catch (m) {
            return Promise.resolve("broke");
          }
      }
      s.playing && a === r.playId && (this.setState({ playing: !1 }, { userAction: !1 }), o.emit("end"), this.clearPauseData());
    });
  }
  /**
   * @description: Pause and record pause state
   */
  handlePause(e) {
    var o;
    const { state: i, privateState: s, hooks: r } = this;
    i.playing = !1, s.playing !== !1 && (s.playing = !1, (e == null ? void 0 : e.userAction) !== !1 && this.setPauseData(), s.broke || this.forceInteruptUpdateCamera(), (e == null ? void 0 : e.notEmitEvent) !== !0 && r.emit("pause", { userAction: (o = e == null ? void 0 : e.userAction) != null ? o : !0 }));
  }
  /**
   * @description: Change play speed
   */
  changeSpeed(e, i = !0) {
    var l;
    const { state: s, privateState: r, hooks: o } = this, { currentPlayKeyframe: a } = r;
    if (o.emit("speedChange", e, { userAction: i }), s.playing && a)
      try {
        const c = a.originDuration !== void 0 ? a.originDuration * (1 - this.getProgress()) : void 0, h = a.keyframe, { privateState: d } = this;
        ((l = this.privateState.currentPlayKeyframe) == null ? void 0 : l.keyframe.id) !== h.id && (this.privateState.currentPlayKeyframe = { keyframe: h }), d.currentPlayQueue.push(this.getPlayPromise(h, { duration: c }));
      } catch (c) {
        console.error(c);
      }
  }
  /**
   * @description Get ratate progress
   */
  getProgress() {
    return this.five.controller.cameraMotion.progress;
  }
  /**
   * @description Set pause data
   */
  setPauseData() {
    var e, i, s;
    if ((e = this.data) != null && e.id)
      return this.pauseDataMap.set(this.data.id, {
        id: (i = this.privateState.currentPlayKeyframe) == null ? void 0 : i.keyframe.id,
        fiveState: this.five.getCurrentState(),
        duration: (s = this.privateState.currentPlayKeyframe) == null ? void 0 : s.originDuration,
        playedProgress: this.getProgress()
      });
  }
  /**
   * @description: Restore state that before loaded
   */
  clear() {
    this.clearPauseData(), this.privateState.currentPlayKeyframe = null;
  }
  /**
   * @description Play single keyframe
   */
  playKeyframe(e, i) {
    return $(this, null, function* () {
      var r;
      const { privateState: s } = this;
      return ((r = this.privateState.currentPlayKeyframe) == null ? void 0 : r.keyframe.id) !== e.id && (this.privateState.currentPlayKeyframe = { keyframe: e }), s.currentPlayQueue.push(this.getPlayPromise(e, i)), this.actionPromiseQueue();
    });
  }
  /**
   * @description: getPlayPromise
   */
  getPlayPromise(s) {
    return $(this, arguments, function* (e, i = {}) {
      var o;
      const r = e.data;
      if (i.duration = (o = i.duration) != null ? o : e.start !== void 0 && e.end !== void 0 ? e.end - e.start : void 0, !!r)
        return new Promise((a, l) => {
          let c = !1;
          this.addInterruptListener(() => {
            if (!c)
              return this.hooks.emit("broke"), this.privateState.broke = !0, this.setState({ playing: !1 }), c = !0, l(new Error("play is interupted"));
          });
          try {
            if (c)
              return;
            const h = () => {
              a(), c = !0;
            };
            switch (r.effect) {
              case "Move":
                this.move(r, i).then(h);
                break;
              case "Rotate":
                this.rotate(r, i).then(h);
                break;
              default:
                this.rotate(r, i).then(h);
            }
          } catch (h) {
          }
        });
    });
  }
  /**
   * @description Action promise queue in sequence
   */
  actionPromiseQueue() {
    return $(this, null, function* () {
      const { privateState: e } = this;
      return new Promise((i, s) => {
        if (e.currentPlayQueue.length === 0) {
          i();
          return;
        }
        const r = e.currentPlayQueue.shift();
        if (!r) {
          i();
          return;
        }
        r.then(i, s);
      }).then(() => e.currentPlayQueue.length === 0 ? Promise.resolve() : this.actionPromiseQueue());
    });
  }
  /**
   * @description Action move keyframe
   */
  move(e, i) {
    return $(this, null, function* () {
      if (e.mode && e.mode !== this.five.currentMode)
        yield this.changeMode(e);
      else if (e.panoIndex !== this.five.panoIndex)
        yield this.changePano(e, i);
      else
        return Promise.resolve();
    });
  }
  /**
   * @description Action rotate keyframe
   */
  rotate(e, i) {
    return $(this, null, function* () {
      if (e.mode && e.mode !== this.five.currentMode)
        yield this.changeMode({ mode: e.mode, panoIndex: e.panoIndex });
      else if (e.panoIndex && e.panoIndex !== this.five.panoIndex)
        return yield this.changePano(e, i);
      yield this.updateCamera(e, i);
    });
  }
  /**
   * @description Update five camera
   */
  updateCamera(s) {
    return $(this, arguments, function* (e, i = {}) {
      const { five: r, privateState: o, state: a } = this, l = (() => {
        var g, p;
        const d = (g = a.config) == null ? void 0 : g.speedConfig, f = (p = e.rotateSpeed) != null ? p : d == null ? void 0 : d.rotateSpeed;
        if ((d == null ? void 0 : d.rotateSpeedUnit) === void 0)
          return f;
        if (f !== void 0)
          return d.rotateSpeedUnit === "rad/ms" ? f : f / 1e3;
      })(), c = (() => {
        if (i.duration)
          return i.duration;
        if (l) {
          const d = this.five.getCurrentState();
          return x7(d, e) / l;
        }
        return 800;
      })();
      o.currentPlayKeyframe && (o.currentPlayKeyframe.originDuration = c);
      const h = this.getSpeededDuration(c);
      return new Promise((d) => {
        D7(() => r.updateCamera(e, h)), setTimeout(() => d(), h);
      });
    });
  }
  /**
   * @description: Change five pano
   */
  changePano(e, i) {
    return $(this, null, function* () {
      const { five: s, privateState: r, state: o } = this;
      if (typeof e.panoIndex != "number" || e.panoIndex === s.panoIndex)
        return;
      const a = s.getCurrentState().mode !== "Panorama";
      a && (this.privateState.modeChanging = !0);
      const l = (() => {
        var f, g;
        const h = (f = o.config) == null ? void 0 : f.speedConfig, d = (g = e.moveSpeed) != null ? g : h == null ? void 0 : h.moveSpeed;
        if ((h == null ? void 0 : h.moveSpeedUnit) === void 0)
          return d;
        if (d !== void 0)
          return h.moveSpeedUnit === "m/ms" ? d : d / 1e3;
      })(), c = (() => {
        if (i != null && i.duration)
          return i.duration;
        if (l && typeof s.panoIndex == "number" && typeof e.panoIndex == "number") {
          const h = this.workUtil.getObserverPosition(s.panoIndex), d = this.workUtil.getObserverPosition(e.panoIndex);
          return h && d ? h.distanceTo(d) / l : 800;
        }
        return 800;
      })();
      r.currentPlayKeyframe && (r.currentPlayKeyframe.originDuration = c), yield new Promise((h) => {
        var f, g, p;
        const d = this.fiveUtil.moveToPano(e.panoIndex, {
          latitude: e.latitude,
          longitude: e.longitude,
          fov: e.fov,
          duration: this.getSpeededDuration(c),
          effect: (p = (g = i == null ? void 0 : i.moveEffect) != null ? g : (f = this.state.config) == null ? void 0 : f.moveEffect) != null ? p : e.moveEffect,
          moveCancelCallback: () => h(),
          moveEndCallback: () => h()
        });
        d instanceof Promise && d.then(() => h()), a && s.once("panoArrived", () => h());
      }), a && (this.privateState.modeChanging = !1);
    });
  }
  /**
   * @description Change five mode
   */
  changeMode(e, i) {
    return $(this, null, function* () {
      e.mode && e.mode !== this.five.currentMode && (this.privateState.modeChanging = !0, yield this.five.changeMode(e.mode, e, i), this.privateState.modeChanging = !1);
    });
  }
}
class Y1 {
  constructor(t) {
    u(this, "id");
    u(this, "renderID");
    u(this, "isGuideLine", !0);
    u(this, "panoramaItem");
    u(this, "modelItem");
    u(this, "hooks", new Pt());
    u(this, "_visible", !0);
    u(this, "plugin");
    u(this, "five");
    u(this, "logError", (t) => c1("GuideLineItem: ", t));
    this.id = t.id, this.five = t.five, this.plugin = t.plugin, this.panoramaItem = new qc(this.five, { mode: "panorama", plugin: this.plugin, parent: this }), this.modelItem = new qc(this.five, { mode: "model", plugin: this.plugin, parent: this });
  }
  get visible() {
    return this._visible;
  }
  setData(t) {
    this.setDataByMode("panorama", t), this.setDataByMode("model", t);
  }
  setDataByMode(t, e) {
    var c;
    const i = t === "panorama" ? this.panoramaItem : this.modelItem, s = t === "panorama" ? e.panorama_style : e.model_style, r = e.path, o = s, a = s, l = s;
    if (e.pano_group) {
      const h = t === "panorama" && e.panorama_style.skip_group === !0;
      i.setGeometryByPanoGroup(e.pano_group, _(de(_({}, e), { skipPanoGroup: h }), o));
    } else
      e.path && i.setGeometryByPath(r, _({}, o));
    i.name = e.name, i.setMeshStyle(l), i.setMartial(a), i.setVisibleFloorIndexes((c = e.visible_floor_indexes) != null ? c : null), i.setStartTag(s == null ? void 0 : s.start_tag), i.setEndTag(s == null ? void 0 : s.end_tag);
  }
  show() {
    this._visible = !0, this.hooks.emit("show", { userAction: !0 });
  }
  hide() {
    this._visible = !1, this.hooks.emit("hide", { userAction: !0 });
  }
  dispose() {
    this.panoramaItem.dispose(), this.modelItem.dispose();
  }
  walk(t) {
    return $(this, null, function* () {
      if (this.hooks.emit("walkStart", { userAction: !0 }), this.panoramaItem.panoGroup.length) {
        const e = _({ panoIndexList: this.panoramaItem.panoGroup }, t), [i] = yield Ss(L7(this.five, e));
        if (i)
          return this.logError(i.message);
      } else {
        const e = { path: this.panoramaItem.curvePath }, [i] = yield Ss(T7(this.five, e));
        if (i)
          return this.logError(i.message);
      }
      this.hooks.emit("walkEnded", { userAction: !0 });
    });
  }
}
function T7(n, t) {
  return $(this, null, function* () {
    const e = new U1(n);
    yield e.load(t), e.playFromStart();
  });
}
function L7(n, t) {
  return $(this, null, function* () {
    if (t.panoIndexList.length === 0)
      return;
    const e = n.getCurrentState();
    e.mode !== "Panorama" && (yield Fh(n, ["Panorama", { longitude: e.longitude, latitude: 0, panoIndex: t.panoIndexList[0] }]));
    const i = new hd(n);
    yield i.load(t), yield new Promise((s, r) => {
      const o = n.getCurrentState();
      let a = t.panoIndexList.slice();
      o.panoIndex === a[0] && c(o.panoIndex), i.playFromStart();
      function l(g) {
        if (g !== "Panorama")
          return d(new Error("mode not match"));
      }
      function c(g) {
        const p = a[0];
        if (a = a.slice(1), g !== p)
          return d(new Error("panoIndex not match, wanted: " + p + ", got: " + g));
        if (a.length === 0)
          return f();
      }
      function h() {
        n.off("modeChange", l), n.off("panoArrived", c);
      }
      function d(g) {
        h(), r(g);
      }
      function f() {
        h(), s();
      }
      n.on("modeChange", l), n.on("panoArrived", c);
    });
  });
}
const xD = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  GuideLineItem: Y1
}, Symbol.toStringTag, { value: "Module" })), Kc = "GuideLinePlugin", Nm = `${Kc}`;
let z7 = class extends Pn {
  constructor(e, i) {
    super(e, i);
    u(this, "name", Kc);
    u(this, "cruisePlugin");
    /** GuideLineItem 索引 */
    u(this, "itemMap", /* @__PURE__ */ new Map());
    u(this, "state", {
      visible: !1,
      enabled: !0
    });
    u(this, "data");
    /** 当新增一根线时，整体高度的偏移值 */
    u(this, "heightOffset", 0);
    u(this, "_config");
    u(this, "_disposed", !1);
    u(this, "disposedErrorLog", () => {
      console.error(`${Nm} is disposed`);
    });
    this._config = i != null ? i : {}, this.cruisePlugin = new hd(e), Object.assign(window, { [`__${Kc}_DEBUG__`]: this });
  }
  get config() {
    return this._config;
  }
  get disposed() {
    return this._disposed;
  }
  load(e, i, s = !0) {
    return $(this, null, function* () {
      var g, p, m, v, b, w, x;
      const r = this.data ? JSON.parse(JSON.stringify(this.data)) : void 0, o = yield this.formatData(e);
      this.hooks.emit("dataChange", o, r), this.data = o;
      const a = o.config, l = !o.lines && o.routes, c = de(_({}, a), {
        panorama_style: {
          visible: !!l,
          unit_length: (g = a == null ? void 0 : a.unitHeight) != null ? g : 0.4,
          width: (p = a == null ? void 0 : a.unitWidth) != null ? p : 0.6,
          texture: { url: (m = a == null ? void 0 : a.arrowTextureUrl) != null ? m : this.staticPrefix + "/release/web/arrow-white.5c2c79a5.png" }
        }
      }), h = (b = (v = o.routes) == null ? void 0 : v.map((k) => {
        var T;
        return Je({}, c, { id: (T = k.id) != null ? T : Dt(), pano_group: k.panoIndexList });
      })) != null ? b : [], d = (x = (w = o.lines) == null ? void 0 : w.map((k) => Je({}, c, k))) != null ? x : [], f = [...h, ...d];
      yield ui(this.five), this.clear(), f.forEach((k) => {
        this.addGuideLineItem(k);
      }), this.updateTagsEnable(), this.handleVisible(this.state.visible), this.handleEnable(this.state.enabled), i && this.setState(i, { userAction: s }), this.hooks.emit("dataLoaded", o), console.debug(`${Nm} loaded`, o);
    });
  }
  formatData(e) {
    return $(this, null, function* () {
      return this.getDataWithoutVersion(e);
    });
  }
  /** 展示插件 */
  show(e) {
    return $(this, null, function* () {
      this.setState({ visible: !0 }, e);
    });
  }
  /** 隐藏插件 */
  hide(e) {
    return $(this, null, function* () {
      this.setState({ visible: !1 }, e);
    });
  }
  /** 开启插件 */
  enable(e) {
    this.setState({ enabled: !0 }, e);
  }
  /** 关闭插件 */
  disable(e) {
    this.setState({ enabled: !1 }, e);
  }
  /** 销毁插件 */
  dispose() {
    this.disposed || (this.clear(), this.hooks.emit("dispose"));
  }
  setState(e, i) {
    var r;
    if (this.disposed)
      return this.disposedErrorLog();
    const s = _({}, this.state);
    this.state = _(_({}, this.state), e), e.visible !== void 0 && e.visible !== s.visible && this.handleVisible(e.visible, i == null ? void 0 : i.userAction), e.enabled !== void 0 && e.enabled !== s.enabled && this.handleEnable(e.enabled, i == null ? void 0 : i.userAction), Qt(s, this.state, { deep: !0 }) || (this.hooks.emit("stateChange", { state: this.state, prevState: s, userAction: (r = i == null ? void 0 : i.userAction) != null ? r : !0 }), this.five.needsRender = !0);
  }
  /** 添加一个 GuideLineItem */
  addGuideLineItem(e) {
    const i = e.render_id || e.id, s = this.itemMap.get(i);
    s && this.removeGuideLineItem(s);
    const r = new Y1({ five: this.five, id: i, plugin: this });
    return this.itemMap.set(i, r), e && r.setData(e), this.heightOffset += 1e-4, r.modelItem.setHeightOffset(this.heightOffset), r.panoramaItem.setHeightOffset(this.heightOffset), r;
  }
  /** 获取 Plugin 内的 GuideLineItem */
  getGuideLineItemByID(e) {
    return this.itemMap.get(e);
  }
  /** 移除一个 GuideLineItem */
  removeGuideLineItem(e) {
    this.itemMap.delete(e.id), e.panoramaItem.dispose(), e.modelItem.dispose();
  }
  /** 全量更新 tag */
  updateTagsEnable() {
    const e = [];
    function i(o) {
      return Array.isArray(o) && o.every((a) => typeof a == "number");
    }
    function s(o, a) {
      return new P.Vector3().fromArray(o).distanceTo(new P.Vector3().fromArray(a)) < 0.01;
    }
    function r(o) {
      var l;
      const a = (l = o == null ? void 0 : o.tag) == null ? void 0 : l.position;
      return i(a) ? e.every((c) => {
        var h;
        return i((h = c.tag) == null ? void 0 : h.position) ? !s(a, c.tag.position) : !0;
      }) : !1;
    }
    this.itemMap.forEach((o) => {
      const a = o.modelItem.startTagContainer, l = o.modelItem.endTagContainer, c = r(a);
      c && e.push(a), a == null || a.plugin.setState({ enabled: c }, {});
      const h = r(l);
      h && e.push(l), l == null || l.plugin.setState({ enabled: h }, {});
    });
  }
  /** 清空所有 GuideLineItem */
  clear() {
    this.heightOffset = 0, this.itemMap.forEach((e) => {
      this.removeGuideLineItem(e);
    });
  }
  handleEnable(e, i = !0) {
    this.hooks.emit(e ? "enable" : "disable", { userAction: i });
  }
  handleVisible(e, i = !0) {
    this.state.enabled && this.hooks.emit(e ? "show" : "hide", { userAction: i });
  }
  getDataWithoutVersion(e) {
    return typeof e == "object" && e !== null && e.data ? e.data : e;
  }
};
const Z1 = (n, t) => new z7(n, t), O7 = Z1, SD = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null
}, Symbol.toStringTag, { value: "Module" })), TD = (n, t) => new hd(n, t), LD = (n, t) => new U1(n, t);
function dd(n, t, e) {
  if (e) {
    const s = new P.Vector3().subVectors(n.position, e).applyQuaternion(n.quaternion.clone().inverse()).applyQuaternion(t).add(e);
    n.position.copy(s);
  }
  n.quaternion.copy(t);
}
class Wo extends ri {
  constructor(e, i) {
    var s, r;
    super();
    u(this, "originObject3D");
    u(this, "onRender");
    u(this, "positionFrom");
    this.originObject3D = e, this.onRender = (s = i == null ? void 0 : i.onRender) != null ? s : () => {
    }, this.positionFrom = (r = i == null ? void 0 : i.positionFrom) != null ? r : "objectPosition";
  }
  get helperObject() {
    return this;
  }
  render() {
    this.onRender();
  }
  enable() {
    this.parent.children.includes(this) || this.parent.add(this);
  }
  disable() {
    this.removeFromParent();
  }
  show() {
    this.visible = !0, this.render();
  }
  hide() {
    this.visible = !1, this.render();
  }
  raycasterIntersectObject(e, i = []) {
    return e.intersectObject(this, !0, i);
  }
  initialPosition(e) {
    var i, s;
    this.positionFrom === "objectPosition" ? this.position.copy(this.originObject3D.position) : this.positionFrom === "boundingBox" ? this.position.copy((i = Bs(this.originObject3D)) == null ? void 0 : i.getCenter(new P.Vector3()).applyMatrix4(this.originObject3D.matrixWorld)) : this.positionFrom === "boundingSphere" ? this.position.copy((s = Sg(this.originObject3D)) == null ? void 0 : s.center.clone().applyMatrix4(this.originObject3D.matrixWorld)) : this.positionFrom instanceof fe ? this.position.copy(this.positionFrom) : this.positionFrom instanceof Function && this.position.copy(this.positionFrom(this.originObject3D)), e && this.position.add(e);
  }
  setScaleByCamera(e) {
  }
  initQuaternion(e) {
    if (this.quaternion.copy(this.originObject3D.quaternion), e && (e.xAxis || e.yAxis || e.zAxis)) {
      const i = e.xAxis instanceof Function ? e.xAxis() : e.xAxis, s = e.yAxis instanceof Function ? e.yAxis() : e.yAxis, r = e.zAxis instanceof Function ? e.zAxis() : e.zAxis;
      let o = i == null ? void 0 : i.clone(), a = s == null ? void 0 : s.clone(), l = r == null ? void 0 : r.clone();
      if (o && !a && !a) {
        const c = new P.Quaternion().setFromUnitVectors(new P.Vector3(1, 0, 0), o.normalize());
        this.applyQuaternion(c);
      }
      if (a && !o && !l) {
        const c = new P.Quaternion().setFromUnitVectors(new P.Vector3(0, 1, 0), a.normalize());
        this.applyQuaternion(c);
      }
      if (l && !o && !a) {
        const c = new P.Quaternion().setFromUnitVectors(new P.Vector3(0, 0, 1), l.normalize());
        this.applyQuaternion(c);
      }
      if ([o, a, l].filter(_e).length >= 2) {
        o || (o = new P.Vector3().crossVectors(a, l).normalize()), a || (a = new P.Vector3().crossVectors(o, l).normalize()), l || (l = new P.Vector3().crossVectors(o, a).normalize()), o.applyQuaternion(this.quaternion), a.applyQuaternion(this.quaternion), l.applyQuaternion(this.quaternion);
        const c = new P.Matrix4().makeBasis(o, a, l), h = new P.Quaternion().setFromRotationMatrix(c);
        this.quaternion.copy(h);
      }
    }
  }
  applyHelperScaleMatrix4(e, i) {
    this.scale.applyMatrix4(e);
  }
  setHelperQuaternion(e, i) {
    this.initQuaternion(), dd(this, this.quaternion.clone().premultiply(e), i);
  }
  applyHelperQuaternion(e, i) {
    if (i) {
      const s = new fe().subVectors(this.position, i).applyQuaternion(e).add(i);
      this.position.copy(s);
    }
    this.applyQuaternion(e);
  }
  dispose() {
    this.removeFromParent();
  }
}
class j7 extends Wo {
}
class R7 extends Wo {
}
class B7 extends Wo {
}
class V7 extends Wo {
}
class _7 extends Wo {
}
class H7 extends P.Group {
  constructor(e) {
    super();
    u(this, "direction");
    this.direction = e || "x";
  }
}
class Gm extends P.Mesh {
  constructor(e, i, s) {
    super(e, i);
    u(this, "direction");
    this.direction = s || "x";
  }
}
function F7(n, t) {
  const { offsetWidth: e, offsetHeight: i } = t, { top: s, left: r } = t.getBoundingClientRect();
  return Object.assign(new P.Vector2(), {
    x: (n.x - r) / e * 2 - 1,
    y: -(n.y - s) / i * 2 + 1
  });
}
function kl(n, t, e) {
  if (!t || !e || !n)
    return;
  const i = F7(t, e);
  if (Math.abs(i.x) === 1 || Math.abs(i.y) === 1)
    return;
  const s = new P.Raycaster();
  return s.setFromCamera(i, n), s.params.Points.threshold = 0.1, s;
}
class lc extends H7 {
  constructor(e) {
    var h;
    super(e.direction);
    u(this, "line");
    u(this, "arrow");
    u(this, "lineHeight", 0.4);
    u(this, "arrowHeight", 0.1);
    u(this, "renderOrder", 50);
    u(this, "name", "ArrowGroup");
    const i = new P.Color((h = e.color) != null ? h : 16214315), s = new P.MeshBasicMaterial({
      color: i,
      depthTest: !1,
      depthWrite: !1,
      transparent: !0
    }), r = new P.ConeGeometry(0.04, 0.1, 32), o = new Gm(r, s.clone(), e.direction);
    o.name = `arrow-${e.direction}`, this.arrow = o;
    const a = 4e-3, l = new P.CylinderGeometry(a, a, 0.4, 32), c = new Gm(l, s.clone(), e.direction);
    c.name = `line-${e.direction}`, this.line = c, this.formatArrow(), this.formatLine(), this.add(this.arrow, this.line);
  }
  formatArrow() {
    this.arrow.geometry.translate(0, this.lineHeight + this.arrowHeight / 2, 0), this.direction === "x" ? (this.arrow.geometry.rotateX(Math.PI / 2), this.arrow.geometry.rotateY(Math.PI / 2)) : this.direction === "z" && this.arrow.geometry.rotateX(Math.PI / 2);
  }
  formatLine() {
    this.line.geometry.translate(0, this.lineHeight / 2, 0), this.direction === "x" ? (this.line.geometry.rotateX(Math.PI / 2), this.line.geometry.rotateY(Math.PI / 2)) : this.direction === "z" && this.line.geometry.rotateX(Math.PI / 2);
  }
}
const cc = {
  X: 15618642,
  Y: 4765519,
  Z: 4227839
};
class Ar {
  static get X() {
    return new P.Color(cc.X).convertSRGBToLinear().clone();
  }
  static get Y() {
    return new P.Color(cc.Y).convertSRGBToLinear().clone();
  }
  static get Z() {
    return new P.Color(cc.Z).convertSRGBToLinear().clone();
  }
}
function ud(n, t, e) {
  const o = n.position.distanceTo(t), a = n.fov, l = n.distance || 3, c = o / 3, h = a / 90, d = l / 3, f = c * h * d, g = (e == null ? void 0 : e.min) || 0.6, p = e == null ? void 0 : e.max;
  return g && f < g ? g : p && f > p ? p : f;
}
function N7(n, t, e) {
  return n < t ? t : n > e ? e : n;
}
function G7(n) {
  let t = n.pose.latitude, e = n.pose.longitude;
  if (si(t) || si(e)) {
    const i = n.matrix.elements;
    t = Math.asin(N7(i[9], -1, 1)), Math.abs(i[9]) < 0.9999999 ? e = Mc(Math.atan2(i[8], i[10])) : e = Mc(Math.atan2(-i[2], i[0]));
  }
  return { latitude: t, longitude: e };
}
function W7(n) {
  const { latitude: t, longitude: e } = n, i = new P.Vector3();
  return Wm - t < 0.03 ? i.set(0, 1, 0) : hc(0, e) ? i.set(0, 0, 1) : hc(Math.PI, e) ? i.set(0, 0, -1) : hc(Wm, e) ? i.set(1, 0, 0) : i.set(-1, 0, 0), i;
}
const Wm = Number((Math.PI / 2).toFixed(5));
function hc(n, t) {
  return typeof n != "number" || typeof t != "number" ? !1 : Math.abs(n - t) < 1e-3;
}
class Q7 extends j7 {
  constructor(e, i) {
    super(e, i);
    u(this, "name", "MoveHelper");
    u(this, "xArrow");
    u(this, "yArrow");
    u(this, "zArrow");
    i.xArrowEnable !== !1 && (this.xArrow = new lc({ direction: "x", color: Ar.X })), i.yArrowEnable !== !1 && (this.yArrow = new lc({ direction: "y", color: Ar.Y })), i.zArrowEnable !== !1 && (this.zArrow = new lc({ direction: "z", color: Ar.Z })), this.add(...[this.xArrow, this.yArrow, this.zArrow].filter(Boolean));
  }
  update(e) {
    if (this.xArrow && (this.xArrow.visible = !0), this.yArrow && (this.yArrow.visible = !0), this.zArrow && (this.zArrow.visible = !0), e.type === "OrthographicCamera") {
      const i = new P.Vector3(1, 0, 0).applyQuaternion(this.quaternion), s = new P.Vector3(0, 1, 0).applyQuaternion(this.quaternion), r = new P.Vector3(0, 0, 1).applyQuaternion(this.quaternion), o = G7(e), a = W7(o), l = 0.0872665;
      Math.abs(i.angleTo(a) - 0) < l || Math.abs(i.angleTo(a) - Math.PI) < l ? this.xArrow && (this.xArrow.visible = !1) : Math.abs(s.angleTo(a) - 0) < l || Math.abs(s.angleTo(a) - Math.PI) < l ? this.yArrow && (this.yArrow.visible = !1) : (Math.abs(r.angleTo(a) - 0) < l || Math.abs(r.angleTo(a) - Math.PI) < l) && this.zArrow && (this.zArrow.visible = !1);
    }
  }
  show() {
    super.show(), this.xArrow && this.add(this.xArrow), this.yArrow && this.add(this.yArrow), this.zArrow && this.add(this.zArrow);
  }
  setScaleByCamera(e) {
    this.scale.setScalar(ud(e, this.position));
  }
  showDraggingHelper(e) {
    this.xArrow && (e.includes("x") ? this.add(this.xArrow) : this.remove(this.xArrow)), this.yArrow && (e.includes("y") ? this.add(this.yArrow) : this.remove(this.yArrow)), this.zArrow && (e.includes("z") ? this.add(this.zArrow) : this.remove(this.zArrow));
  }
  dispose() {
    this.remove(...[this.xArrow, this.yArrow, this.zArrow].filter(Boolean)), super.dispose();
  }
}
function ks(n, t) {
  return U7(document.createElement(t != null ? t : "div"), n);
}
function U7(n, t) {
  if (!t)
    return n;
  for (const e in t)
    e && t[e] && (n.style[e] = t[e]);
  return n;
}
function X7(n) {
  const t = ks(_({
    position: "absolute",
    display: "block",
    borderRadius: "4px",
    paddingTop: "1px",
    paddingBottom: "1px",
    paddingLeft: "4px",
    paddingRight: "4px",
    pointerEvents: "none",
    userSelect: "none",
    zIndex: "99999",
    backgroundColor: "rgba(0,0,0,0.7)",
    fontSize: "12px",
    color: "#fff",
    letterSpacing: "0",
    lineHeight: "18px"
  }, n)), e = () => {
    t.style.display !== "block" && t.style.top && t.style.left && (t.style.display = "block");
  };
  return { element: t, show: e, hide: () => {
    t.style.display = "none", t.style.top = "", t.style.left = "";
  }, setLeftTop: (r, o) => {
    t.style.left = r, t.style.top = o, e();
  } };
}
class Y7 extends B7 {
  constructor(e, i) {
    super(e, i);
    u(this, "name", "RotateHelper");
    u(this, "xCircle");
    u(this, "yCircle");
    u(this, "zCircle");
    u(this, "children", []);
    u(this, "angleTips");
    u(this, "container");
    (i == null ? void 0 : i.yzCircleEnable) !== !1 && (this.xCircle = new dc({ direction: "x", color: Ar.X })), (i == null ? void 0 : i.xzCircleEnable) !== !1 && (this.yCircle = new dc({ direction: "y", color: Ar.Y })), (i == null ? void 0 : i.xyCircleEnable) !== !1 && (this.zCircle = new dc({ direction: "z", color: Ar.Z })), i != null && i.container && (i == null ? void 0 : i.angleTipsEnable) !== !1 && (this.container = i == null ? void 0 : i.container, this.angleTips = X7({ display: "none" }), this.container.appendChild(this.angleTips.element)), this.add(...[this.xCircle, this.yCircle, this.zCircle].filter(Boolean)), this.show();
  }
  hide() {
    this.children.forEach((e) => e.hide());
  }
  show() {
    var e;
    this.children.forEach((i) => i.showCircle()), (e = this.angleTips) == null || e.hide();
  }
  setScaleByCamera(e) {
    this.scale.setScalar(ud(e, this.position));
  }
  showDraggingHelper(e) {
    var i;
    this.hide(), this.children.filter((s) => e.includes(s.direction)).forEach((s) => s.showRing()), (i = this.angleTips) == null || i.show();
  }
  dispose() {
    var e, i;
    this.removeFromParent(), (i = (e = this.angleTips) == null ? void 0 : e.element) == null || i.remove();
  }
}
class dc extends P.Group {
  constructor(e) {
    super();
    u(this, "direction");
    /** 1/4 圆 */
    u(this, "circle");
    /** 旋转过程中展示的背景圆环 */
    u(this, "ring");
    /** 旋转过程中表示角度的扇形 */
    u(this, "angleSector");
    this.direction = e.direction, this.circle = new Z7(e), this.ring = new J7(e), this.angleSector = new q7(e), this.add(this.circle, this.ring, this.angleSector), this.direction === "y" ? this.rotateX(Math.PI / 2) : this.direction === "x" && this.rotateY(-Math.PI / 2);
  }
  showCircle() {
    this.add(this.circle), this.remove(this.ring, this.angleSector);
  }
  showRing() {
    this.add(this.ring, this.angleSector), this.remove(this.circle);
  }
  hide() {
    this.remove(this.ring, this.angleSector, this.circle);
  }
}
let Z7 = class extends P.Mesh {
  constructor(e) {
    var i;
    super();
    u(this, "direction");
    u(this, "gapAngle", 0.02);
    u(this, "geometry", new P.RingGeometry(0.25, 0.3, 20, 8, this.gapAngle, Math.PI / 2 - this.gapAngle * 2));
    this.material = new P.MeshBasicMaterial({
      opacity: 0.6,
      color: (i = e.color) != null ? i : 16777215,
      transparent: !0,
      side: P.DoubleSide,
      depthTest: !1,
      depthWrite: !1
    }), this.renderOrder = 50, this.direction = e.direction, this.geometry.name = `RotateHelperCircleGeometry-${this.direction}`;
  }
};
class J7 extends P.Group {
  constructor(e) {
    super();
    u(this, "direction");
    this.direction = e.direction;
    const i = 0.015, s = new Array(8).fill(null).map((r, o) => {
      const a = new P.RingGeometry(0.25, 0.3, 20, 8, Math.PI / 4 * o + i, Math.PI / 4 - i * 2), l = new P.MeshBasicMaterial({
        opacity: 1,
        color: 16777215,
        depthTest: !1,
        depthWrite: !1,
        transparent: !0,
        side: P.DoubleSide
      });
      this.renderOrder = 50;
      const c = new P.Mesh(a, l);
      return c.name = `AxesDashedRing-${this.direction}-${o}`, c;
    });
    this.add(...s);
  }
}
class q7 extends P.Mesh {
  constructor(e) {
    var s;
    super();
    u(this, "direction");
    u(this, "baseAxes");
    u(this, "angleDirection");
    switch (e.direction) {
      case "x":
        this.baseAxes = new P.Vector3(0, 0, 1);
        break;
      case "y":
        this.baseAxes = new P.Vector3(1, 0, 0);
        break;
      case "z":
        this.baseAxes = new P.Vector3(1, 0, 0);
        break;
    }
    const i = 0.3 + 5e-4;
    this.geometry = new P.CircleGeometry(i, 48, 0, 1e-4), this.material = new P.MeshBasicMaterial({
      opacity: 0.4,
      color: (s = e.color) != null ? s : 16777215,
      depthTest: !1,
      depthWrite: !1,
      transparent: !0,
      side: P.DoubleSide
    }), this.renderOrder = 50, this.direction = e.direction, this.angleDirection = this.direction === "z" ? 1 : -1;
  }
}
function K7() {
  const n = ks({
    width: "100%",
    height: "100%",
    left: "0",
    top: "0",
    position: "absolute",
    pointerEvents: "none"
  }), t = ks({
    boxSizing: "border-box",
    width: "100%",
    height: "100%",
    left: "0",
    top: "0",
    position: "relative",
    display: "flex",
    alignItems: "center",
    justifyContent: "center"
  }), e = ks({
    boxSizing: "border-box",
    width: "100%",
    height: "100%",
    left: "0",
    top: "0",
    position: "absolute",
    border: "1px solid rgba(255,255,255,0.4)"
  });
  n.appendChild(t), t.appendChild(e);
  const i = "-4px", s = { direction: "nesw", element: Vn({ cursor: "nesw-resize", left: i, bottom: i }) }, r = { direction: "ns", element: Vn({ cursor: "ns-resize", bottom: i }) }, o = { direction: "nwse", element: Vn({ cursor: "nwse-resize", right: i, bottom: i }) }, a = { direction: "ew", element: Vn({ cursor: "ew-resize", right: i }) }, l = { direction: "nesw", element: Vn({ cursor: "nesw-resize", right: i, top: i }) }, c = { direction: "ns", element: Vn({ cursor: "ns-resize", top: i }) }, h = { direction: "nwse", element: Vn({ cursor: "nwse-resize", left: i, top: i }) }, d = { direction: "ew", element: Vn({ cursor: "ew-resize", left: i }) };
  return new Array(r, a, c, d, s, o, l, h).forEach((g) => t.appendChild(g.element)), { container: n, squares: [
    s,
    r,
    o,
    a,
    l,
    c,
    h,
    d
  ] };
}
function Vn(n) {
  const t = ks(_({
    background: "#FFFFFF",
    width: "9px",
    height: "9px",
    position: "absolute",
    pointerEvents: "none"
  }, n)), e = ks({
    width: "15px",
    height: "15px",
    position: "absolute",
    left: "50%",
    top: "50%",
    transform: "translate(-50%, -50%)",
    pointerEvents: "none"
  }), i = ks({
    width: "15px",
    height: "15px",
    cursor: n == null ? void 0 : n.cursor,
    pointerEvents: "auto",
    // backgroundColor: 'red',
    background: "transparent"
  });
  return i.draggable = !0, e.appendChild(i), t.appendChild(e), t;
}
class $7 extends _7 {
  // eslint-disable-next-line max-params
  constructor(e, i, s, r) {
    super(e);
    u(this, "name", "CSS3DScaleHelper");
    u(this, "points", []);
    u(this, "cornerPositions", []);
    u(this, "css3DInstance");
    u(this, "plane");
    u(this, "css3DRenderer", new Co());
    u(this, "camera");
    u(this, "scene");
    u(this, "container");
    u(this, "enabled", !1);
    this.camera = s, this.scene = r, this.container = i, this.initRectangleScaleHelper();
  }
  get helperObject() {
    var e;
    if (!((e = this.css3DInstance) != null && e.css3DObject))
      throw new Error("css3DInstance is not initialized");
    return this.css3DInstance.css3DObject;
  }
  initQuaternion() {
    this.quaternion.copy(this.originObject3D.quaternion);
  }
  applyMatrix4(e) {
    var i;
    super.applyMatrix4(e), this.helperObject.applyMatrix4(e), (i = this.plane) == null || i.applyMatrix4(e), this.cornerPositions.forEach((s) => s.applyMatrix4(e));
  }
  showDraggingHelper() {
  }
  applyHelperScaleMatrix4(e, i) {
    var s;
    (s = this.plane) == null || s.scale.applyMatrix4(e), this.helperObject.applyScaleMatrix4(e);
  }
  updatePoints() {
    const e = this.calculatePointPosition(this.cornerPositions);
    this.points.forEach((i, s) => {
      i.position.copy(e[s]);
    });
  }
  applyHelperQuaternion(e, i) {
    var r;
    const s = (r = this.css3DInstance) == null ? void 0 : r.css3DObject;
    if (s) {
      const o = new P.Vector3().subVectors(s.position, i).applyQuaternion(e).add(i);
      s.position.copy(o), s.applyQuaternion(e);
    }
    if (this.plane) {
      const o = new P.Vector3().subVectors(this.plane.position, i).applyQuaternion(e).add(i);
      this.plane.position.copy(o), this.plane.applyQuaternion(e);
    }
    this.cornerPositions.forEach((o) => {
      const a = new P.Vector3().subVectors(o, i).applyQuaternion(e).add(i);
      o.copy(a);
    });
  }
  enable() {
    var e;
    this.enabled || (this.enabled = !0, (e = this.css3DInstance) == null || e.enable(), this.plane && this.scene.add(this.plane));
  }
  disable() {
    var e;
    this.enabled && (this.enabled = !1, (e = this.css3DInstance) == null || e.disable(), this.plane && this.scene.remove(this.plane));
  }
  show() {
    var e;
    (e = this.css3DInstance) == null || e.show(), this.plane && (this.plane.visible = !0);
  }
  hide() {
    var e;
    (e = this.css3DInstance) == null || e.hide(), this.plane && (this.plane.visible = !1);
  }
  dispose() {
    this.disable(), this.css3DRenderer.dispose();
  }
  initRectangleScaleHelper() {
    var a, l;
    const e = this.getCornerPositions();
    if (!e)
      return;
    this.cornerPositions = e;
    const i = this.css3DRenderer.create3DElement(this.camera, e, { ratio: 3e-3 });
    if (!i)
      return;
    this.css3DInstance = i, i.appendToElement(this.container);
    const s = i.css3DObject.container, { container: r, squares: o } = K7();
    this.points = o.map((c, h) => ({
      direction: c.direction,
      point: c.element,
      position: this.calculatePointPosition(e)[h]
    })), s.insertBefore(r, (a = s.children[0]) != null ? a : null), this.helperObject.position.copy(this.originObject3D.position), (l = this.plane) == null || l.position.copy(this.originObject3D.position);
  }
  getCornerPositions() {
    const { originObject3D: e } = this;
    if (e.isCSS3DObject && e.cornerPoints)
      return e.cornerPoints;
    console.error("当前物体暂时不支持 ScaleHelper");
  }
  calculatePointPosition(e) {
    return [
      e[0].clone(),
      e[0].clone().add(e[1]).divideScalar(2),
      e[1].clone(),
      e[1].clone().add(e[2]).divideScalar(2),
      e[2].clone(),
      e[2].clone().add(e[3]).divideScalar(2),
      e[3].clone(),
      e[3].clone().add(e[0]).divideScalar(2)
    ];
  }
}
class e6 extends R7 {
  constructor(e) {
    super(e);
    u(this, "name", "BoundingBoxHelper");
    u(this, "box");
    u(this, "outline");
    u(this, "positionAttribute");
    this.positionAttribute = new P.BufferAttribute(new Float32Array(8 * 3), 3), this.box = this.createBox(), this.outline = this.createOutline(), this.add(this.box, this.outline), this.update();
  }
  initQuaternion() {
    this.quaternion.copy(this.originObject3D.quaternion);
  }
  setHelperQuaternion(e, i) {
    dd(this, e, i);
  }
  raycasterIntersectObject(e, i) {
    return e.intersectObject(this, !1, i);
  }
  raycast(e, i) {
    this.box.raycast(e, i);
  }
  update() {
    const e = Bs(this.originObject3D);
    if (!e)
      return;
    const { min: i, max: s } = e;
    this.positionAttribute.setXYZ(0, s.x, s.y, s.z), this.positionAttribute.setXYZ(1, i.x, s.y, s.z), this.positionAttribute.setXYZ(2, i.x, i.y, s.z), this.positionAttribute.setXYZ(3, s.x, i.y, s.z), this.positionAttribute.setXYZ(4, s.x, s.y, i.z), this.positionAttribute.setXYZ(5, i.x, s.y, i.z), this.positionAttribute.setXYZ(6, i.x, i.y, i.z), this.positionAttribute.setXYZ(7, s.x, i.y, i.z), this.positionAttribute.needsUpdate = !0;
  }
  createOutline() {
    const e = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]), i = new P.BufferGeometry();
    i.setIndex(new P.BufferAttribute(e, 1)), i.setAttribute("position", this.positionAttribute);
    const s = new P.LineBasicMaterial({
      color: 64767,
      linewidth: 1,
      opacity: 1,
      toneMapped: !1
    }), r = new P.LineSegments(i, s);
    return r.matrixAutoUpdate = !1, r;
  }
  createBox() {
    const e = new Uint16Array([
      0,
      1,
      2,
      0,
      2,
      3,
      0,
      3,
      7,
      0,
      7,
      4,
      0,
      4,
      5,
      0,
      5,
      1,
      6,
      1,
      5,
      6,
      2,
      1,
      6,
      5,
      4,
      6,
      4,
      7,
      6,
      3,
      2,
      6,
      7,
      3
    ]), i = new P.BufferGeometry();
    i.setIndex(new P.BufferAttribute(e, 1)), i.setAttribute("position", this.positionAttribute);
    const s = new P.MeshBasicMaterial({
      color: 64767,
      opacity: 0.1,
      depthTest: !1,
      transparent: !0
    });
    return new P.Mesh(i, s);
  }
}
const Pa = /* @__PURE__ */ new Map();
function t6(n) {
  if (Pa.has(n))
    return Pa.get(n).hooks;
  const t = new Pt();
  let e = null, i;
  const s = () => {
    e = requestAnimationFrame(s);
    const o = n.projectionMatrix.toArray().join(",") + n.matrixWorld.toArray().join(",");
    o !== i && (i = o, t.emit("cameraUpdate"));
  };
  s();
  const r = () => {
    Pa.delete(n), cancelAnimationFrame(e);
  };
  return Pa.set(n, {
    hooks: t,
    dispose: r
  }), t;
}
class Qo {
  constructor(t, e) {
    u(this, "originObject3D");
    u(this, "hooks");
    u(this, "preventTapDefaultEvent", !1);
    u(this, "internalHooks");
    u(this, "disposers", []);
    u(this, "helperObject3D");
    u(this, "camera");
    u(this, "model");
    u(this, "scene");
    u(this, "container");
    u(this, "domEvents");
    u(this, "isDragging", !1);
    u(this, "enabled", !1);
    u(this, "name", "BaseController");
    u(this, "boundingBox");
    u(this, "config");
    u(this, "onRender");
    u(this, "cameraHooks");
    u(this, "onWantsTapGesture", (t) => {
      if (this.getIntersectObject(t))
        return !1;
    });
    u(this, "updateHelperScale", () => {
      this.helperObject3D.setScaleByCamera(this.camera);
    });
    u(this, "getBox", () => this.boundingBox ? this.boundingBox : (this.boundingBox = Bs(this.originObject3D), this.boundingBox));
    var h, d, f;
    this.hooks = (h = t.sharedHooks) != null ? h : new Pt(), this.internalHooks = (d = t.sharedInternalHooks) != null ? d : new Pt(), this.camera = t.camera, this.model = t.model, this.originObject3D = t.originObject3D, this.helperObject3D = t.helperObject3D, this.container = t.container, this.scene = t.scene, this.domEvents = t.domEvents, this.onRender = (f = t.onRender) != null ? f : () => {
    }, this.config = e != null ? e : {}, this.initialHelperPosition(), this.initialHelperQuaternion(), this.updateHelperScale(), this.cameraHooks = t6(this.camera), this.enable();
    const i = this.onSetOriginObjectScale.bind(this), s = this.onSetOriginObjectRotate.bind(this), r = this.onSetOriginObjectPosition.bind(this), o = this.onApplyOriginObjectScale.bind(this), a = this.onApplyOriginObjectRotate.bind(this), l = this.onApplyOriginObjectPosition.bind(this), c = this.initialHelperPosition.bind(this);
    this.cameraHooks.on("cameraUpdate", this.updateHelperScale), this.internalHooks.on("initialHelperPosition", c), this.internalHooks.on("setObjectScale", i), this.internalHooks.on("setObjectRotate", s), this.internalHooks.on("setObjectPosition", r), this.internalHooks.on("applyObjectPosition", l), this.internalHooks.on("applyObjectRotate", a), this.internalHooks.on("applyObjectScale", o), this.hooks.on("moveEnd", this.updateHelperScale), this.internalHooks.on("setObjectPosition", this.updateHelperScale), this.internalHooks.on("initialHelperPosition", this.updateHelperScale), this.disposers.push(() => {
      this.cameraHooks.off("cameraUpdate", this.updateHelperScale), this.internalHooks.off("initialHelperPosition", c), this.internalHooks.off("setObjectScale", i), this.internalHooks.off("setObjectRotate", s), this.internalHooks.off("setObjectPosition", r), this.internalHooks.off("applyObjectPosition", l), this.internalHooks.off("applyObjectRotate", a), this.internalHooks.off("applyObjectScale", o), this.hooks.off("moveEnd", this.updateHelperScale), this.internalHooks.off("setObjectPosition", this.updateHelperScale), this.internalHooks.off("initialHelperPosition", this.updateHelperScale);
    });
  }
  initialHelperPosition() {
    this.helperObject3D.initialPosition(this.calculateOffset(this.config.offset));
  }
  initialHelperQuaternion() {
    this.helperObject3D.initQuaternion(this.config);
  }
  enable() {
    this.enabled || (this.enabled = !0, this.scene.add(this.helperObject3D), this.helperObject3D.enable(), this.render());
  }
  disable() {
    this.enabled && (this.enabled = !1, this.helperObject3D.disable(), this.render());
  }
  show() {
    this.helperObject3D.show(), this.render();
  }
  hide() {
    this.helperObject3D.hide(), this.render();
  }
  dispose() {
    var t;
    (t = this.disposers) == null || t.forEach((e) => e == null ? void 0 : e()), this.helperObject3D.dispose(), this.render();
  }
  /**
   * @description: applyHelperMatrix4
   * @param {THREE.Matrix4} matrix position 偏移量
   */
  applyHelperMatrix4(t) {
    this.helperObject3D.applyMatrix4(t);
  }
  /**
   * @description: applyHelperQuaternion
   * @param {THREE.Quaternion} quaternion 旋转四元数
   * @param {THREE.Vector3} origin 旋转中心
   */
  applyHelperQuaternion(t, e) {
    this.helperObject3D.applyHelperQuaternion(t, e);
  }
  /**
   * @description: applyHelperScaleMatrix4
   * @param {THREE.Matrix4} matrix 缩放矩阵
   * @param {THREE.Vector3} origin 缩放中心
   */
  applyHelperScaleMatrix4(t, e) {
    this.helperObject3D.applyHelperScaleMatrix4(t, e);
  }
  onWantsGesture(t, e, i) {
    if (this.isDragging)
      return !1;
  }
  onIntersectionOnModelUpdate(t) {
  }
  /**
   * @description: onApplyOriginObjectScale
   * @param {THREE.Matrix4} params.matrix 缩放矩阵
   * @param {THREE.Vector3} params.origin 缩放中心
   */
  onApplyOriginObjectScale(t) {
    this.applyHelperScaleMatrix4(t.matrix, t.origin);
  }
  /**
   * @description: onApplyOriginObjectRotate
   * @param {THREE.Quaternion} params.quaternion 旋转四元数
   * @param {THREE.Vector3} params.origin 旋转中心
   */
  onApplyOriginObjectRotate(t) {
    this.applyHelperQuaternion(t.quaternion, t.origin);
  }
  /**
   * @description: onApplyOriginObjectPosition
   * @param {THREE.Matrix4} params.matrix position 偏移量
   */
  onApplyOriginObjectPosition(t) {
    this.applyHelperMatrix4(t.matrix);
  }
  onSetOriginObjectScale(t) {
    this.helperObject3D.scale.copy(t), this.updateOffsetByScale(t);
  }
  onSetOriginObjectRotate(t, e) {
    this.helperObject3D.setHelperQuaternion(t, e);
  }
  onSetOriginObjectPosition(t) {
    this.helperObject3D.position.copy(t.clone().add(this.calculateOffset(this.config.offset)));
  }
  render() {
    this.onRender();
  }
  updateOffsetByScale(t) {
    if (this.boundingBox && this.config.offset) {
      const e = this.originObject3D.position, i = new P.Vector3().subVectors(this.boundingBox.max, e).multiply(t).add(e), s = new P.Vector3().subVectors(this.boundingBox.min, e).multiply(t).add(e), r = this.calculateOffset(this.config.offset, { min: s, max: i });
      this.helperObject3D.initialPosition(r);
    }
  }
  hoverListener(t, e = 16777215, i = 1) {
    const s = bn(t).filter(_e), r = [];
    for (const o of s)
      if (o.material || o instanceof P.Group) {
        const a = o instanceof P.Group ? o.children.filter((f) => f instanceof P.Mesh) : [o];
        a.forEach((f) => {
          var g, p;
          f.__originalColor__ = (g = f.__originalColor__) != null ? g : f.material.color.clone(), f.__originalOpacity__ = (p = f.__originalOpacity__) != null ? p : f.material.opacity;
        });
        const l = () => {
          a.forEach((f) => {
            f.material.color.set(e), f.material.opacity = i;
          }), this.render();
        }, c = () => {
          a.forEach((f) => {
            f.material.color.copy(f.__originalColor__), f.material.opacity = f.__originalOpacity__;
          }), this.render();
        }, h = () => {
          this.isDragging || l();
        }, d = () => {
          this.isDragging || c();
        };
        for (const f of a)
          this.domEvents.addEventListener(f, "mouseover", h), this.domEvents.addEventListener(f, "mouseout", d), this.hooks.on("moveStart", l), this.hooks.on("moveEnd", c), this.hooks.on("rotateEnd", c), this.hooks.on("scaleEnd", c), r.push(() => {
            this.domEvents.removeEventListener(f, "mouseover", h), this.domEvents.removeEventListener(f, "mouseout", d), this.hooks.off("moveStart", l), this.hooks.off("moveEnd", c), this.hooks.off("rotateEnd", c), this.hooks.off("scaleEnd", c);
          });
      }
    return () => r.forEach((o) => o == null ? void 0 : o());
  }
  getIntersectObject(t) {
    const e = this.camera.position, i = this.helperObject3D;
    if (!i)
      return;
    const s = this.helperObject3D.raycasterIntersectObject(t)[0];
    if (!s)
      return;
    const r = s;
    if (r.object = i, this.model.intersectRaycaster) {
      const o = this.model.intersectRaycaster(t)[0];
      if (o && o.point.distanceTo(e) < r.point.distanceTo(e))
        return;
    }
    return r.object;
  }
  calculateOffset(t, e) {
    const i = new P.Vector3(0, 0, 0);
    if (!t)
      return i;
    const s = () => e || this.getBox();
    if (typeof t.x == "number")
      i.setX(t.x);
    else if (typeof t.x == "object") {
      const r = s();
      i.setX((r.max.x - r.min.x) * t.x.percents);
    }
    if (typeof t.y == "number")
      i.setY(t.y);
    else if (typeof t.y == "object") {
      const r = s();
      i.setY((r.max.y - r.min.y) * t.y.percents);
    }
    if (typeof t.z == "number")
      i.setZ(t.z);
    else if (typeof t.z == "object") {
      const r = s();
      i.setZ((r.max.z - r.min.z) * t.z.percents);
    }
    return i;
  }
}
class i6 extends Qo {
  constructor(...e) {
    super(...e);
    u(this, "name", "MoveController");
    u(this, "startInfo");
    u(this, "_moveByMouse", {
      enabled: !1
    });
    u(this, "mouseInfo");
    u(this, "mousedownEventListenerDisposer");
    /**
     * @description: 拖动开始，找出拖的Direction
     */
    u(this, "dragStart", (e) => {
      if (this.moveByMouseEnable || this.isDragging)
        return;
      const i = e == null ? void 0 : e.intersect;
      if (!i)
        return this.dragEnd();
      const s = (i == null ? void 0 : i.object).direction;
      if (!s)
        return this.dragEnd();
      const r = new P.Vector3(1, 0, 0).applyQuaternion(this.helperObject3D.quaternion), o = new P.Vector3(0, 1, 0).applyQuaternion(this.helperObject3D.quaternion), a = new P.Vector3(0, 0, 1).applyQuaternion(this.helperObject3D.quaternion), l = (() => {
        switch (s) {
          case "x":
            return r;
          case "y":
            return o;
          case "z":
            return a;
        }
      })(), c = i.point.clone(), h = new P.Line3(
        c.clone().sub(l.normalize()),
        c.clone().add(l.normalize())
      );
      this.startInfo = { startVectorProject: c, line: h }, this.helperObject3D.showDraggingHelper([s]), this.hooks.emit("moveStart"), this.isDragging = !0;
    });
    u(this, "dragging", (e) => {
      if (!this.isDragging || !this.startInfo)
        return;
      const i = "touches" in e ? e.touches[0].clientX : e.x, s = "touches" in e ? e.touches[0].clientY : e.y, r = kl(this.camera, { x: i, y: s }, this.container);
      return r ? (this.move(r), !1) : this.dragEnd();
    });
    u(this, "dragEnd", () => {
      this.isDragging && (this.startInfo = void 0, this.isDragging = !1, this.helperObject3D.show(), this.hooks.emit("moveEnd"));
    });
    const i = this.helperObject3D;
    this.hoverListener([i.xArrow, i.yArrow, i.zArrow]);
    const s = this.show.bind(this), r = this.hide.bind(this), o = () => {
      this.helperObject3D.update(this.camera), this.render();
    };
    o(), this.domEvents.addEventListener(this.helperObject3D, "mousedown", this.dragStart), document.addEventListener("mousemove", this.dragging), document.addEventListener("mouseup", this.dragEnd), this.domEvents.addEventListener(this.helperObject3D, "touchstart", this.dragStart), document.addEventListener("touchmove", this.dragging), document.addEventListener("touchend", this.dragEnd), this.hooks.on("rotateStart", r), this.hooks.on("rotateEnd", s), this.hooks.on("scaleStart", r), this.hooks.on("scaleEnd", s), this.hooks.on("moveByMouseEnable", r), this.hooks.on("moveByMouseDisable", s), this.cameraHooks.on("cameraUpdate", o), this.disposers.push(() => {
      this.domEvents.removeEventListener(this.helperObject3D, "mousedown", this.dragStart), document.removeEventListener("mousemove", this.dragging), document.removeEventListener("mouseup", this.dragEnd), this.domEvents.removeEventListener(this.helperObject3D, "touchstart", this.dragStart), document.removeEventListener("touchmove", this.dragging), document.removeEventListener("touchend", this.dragEnd), this.hooks.off("rotateStart", r), this.hooks.off("rotateEnd", s), this.hooks.off("scaleStart", r), this.hooks.off("scaleEnd", s), this.hooks.off("moveByMouseEnable", r), this.hooks.off("moveByMouseDisable", s), this.cameraHooks.off("cameraUpdate", o);
    }), this.moveByMouseEnable && this.moveByMouse();
  }
  get moveByMouseEnable() {
    return this._moveByMouse.enabled;
  }
  dispose() {
    var e;
    super.dispose(), (e = this.disposers) == null || e.forEach((i) => i == null ? void 0 : i());
  }
  /**
   * @description: 跟随鼠标移动
   * @param {boolean} params.useFaceNormal 是否使用面的法线，默认为false
   * @param {boolean} params.useFaceNormal.enable 是否使用面的法线，默认为true
   * @param {Vector3} params.useFaceNormal.alignmentVector 期望对齐的方向，默认为Y轴对齐Face的法向向量，即 `{ x: 0, y: 1, z: 0 }`
   * @param {Function} params.useFaceNormal.fixedFaceNormal 修正后的face normal
   */
  moveByMouse(e) {
    this._moveByMouse = { enabled: !0, useFaceNormal: e == null ? void 0 : e.useFaceNormal }, this.preventTapDefaultEvent = !0;
    const i = this.handleMouseDown.bind(this), s = this.handleMouseUp.bind(this);
    this.hooks.emit("moveByMouseEnable"), setTimeout(() => {
      this.container.addEventListener("mousedown", i), this.container.addEventListener("mouseup", s);
    }), this.mousedownEventListenerDisposer = () => {
      this.container.removeEventListener("mousedown", i), this.container.removeEventListener("mouseup", s);
    };
  }
  /**
   * @description: 禁用跟随鼠标移动
   */
  disableMoveByMouse() {
    var e;
    this._moveByMouse = { enabled: !1 }, this.preventTapDefaultEvent = !1, this.hooks.emit("moveByMouseDisable"), (e = this.mousedownEventListenerDisposer) == null || e.call(this);
  }
  onIntersectionOnModelUpdate(e) {
    var o, a, l;
    if (!this.moveByMouseEnable)
      return;
    const { point: i, face: s } = e;
    if (!this.hooks.emit("wantToMove", i)) {
      if (this.originObject3D.position.copy(i), (this._moveByMouse.useFaceNormal === !0 || typeof this._moveByMouse.useFaceNormal == "object" && this._moveByMouse.useFaceNormal.enable !== !1) && s != null && s.normal) {
        const c = (() => typeof this._moveByMouse.useFaceNormal == "object" && this._moveByMouse.useFaceNormal.alignmentVector ? this._moveByMouse.useFaceNormal.alignmentVector : { x: 0, y: 1, z: 0 })(), h = new P.Vector3((o = c.x) != null ? o : 0, (a = c.y) != null ? a : 0, (l = c.z) != null ? l : 0), d = (() => typeof this._moveByMouse.useFaceNormal == "object" && this._moveByMouse.useFaceNormal.fixedFaceNormal ? this._moveByMouse.useFaceNormal.fixedFaceNormal(s.normal) : s.normal)();
        this.originObject3D.quaternion.setFromUnitVectors(h, d), this.internalHooks.emit("setObjectRotate", this.originObject3D.quaternion.clone());
      }
      this.internalHooks.emit("setObjectPosition", i), this.hooks.emit("move", i);
    }
  }
  handleMouseDown(e) {
    const { x: i, y: s } = e;
    this.mouseInfo = { x: i, y: s, mouseDownTimestamp: Date.now() };
  }
  handleMouseUp(e) {
    if (!this.mouseInfo)
      return;
    const { x: i, y: s } = e;
    this.mouseInfo.x === i && this.mouseInfo.y === s && Date.now() - this.mouseInfo.mouseDownTimestamp < 500 && (this.disableMoveByMouse(), this.mouseInfo = void 0);
  }
  move(e) {
    if (!this.startInfo)
      return this.dragEnd();
    const { line: i, startVectorProject: s } = this.startInfo, r = this.originObject3D, o = Yn({ raycaster: e, line: i, clampToLine: !1 }), a = o.clone().sub(s), l = new P.Matrix4();
    l.setPosition(a);
    const c = r.position.clone().applyMatrix4(l);
    this.hooks.emit("wantToMove", c) || (r.applyMatrix4(l), s.copy(o), this.internalHooks.emit("applyObjectPosition", { matrix: l }), this.hooks.emit("move", c));
  }
}
class so {
  // eslint-disable-next-line max-params
  constructor(t, e, i, s, r, o, a, l) {
    u(this, "helperController");
    u(this, "five");
    u(this, "onFiveWantsTapGesture", (t) => {
      if (!this.helperController)
        return;
      if (this.helperController.preventTapDefaultEvent)
        return !1;
      const e = this.helperController.onWantsTapGesture(t);
      return this.five.needsRender = !0, e;
    });
    u(this, "onFiveWantsGesture", (...t) => {
      if (!this.helperController)
        return;
      const e = this.helperController.onWantsGesture(...t);
      return this.five.needsRender = !0, e;
    });
    u(this, "onFiveIntersectionOnModelUpdate", (...t) => {
      this.helperController && this.helperController.onIntersectionOnModelUpdate(...t);
    });
    const { camera: c, model: h, scene: d } = t, f = t.getElement();
    if (this.five = t, !c || !h || !f || !d)
      return;
    const g = () => {
      t.needsRender = !0;
    };
    this.helperController = new i(
      {
        camera: c,
        model: h,
        domEvents: e,
        originObject3D: s,
        helperObject3D: r,
        container: f,
        scene: d,
        onRender: g,
        sharedHooks: a,
        sharedInternalHooks: l
      },
      o
    ), t.on("wantsTapGesture", this.onFiveWantsTapGesture), t.on("wantsGesture", this.onFiveWantsGesture), t.on("intersectionOnModelUpdate", this.onFiveIntersectionOnModelUpdate);
  }
  dispose() {
    var t;
    this.five.off("wantsTapGesture", this.onFiveWantsTapGesture), this.five.off("wantsGesture", this.onFiveWantsGesture), this.five.off("intersectionOnModelUpdate", this.onFiveIntersectionOnModelUpdate), (t = this.helperController) == null || t.dispose();
  }
}
const n6 = "v1.0.1", s6 = "Object3DHelper", fd = `${s6}@${n6}`, r6 = () => {
  console.error(`${fd} is disposed`);
}, o6 = () => {
  console.warn(`${fd} is disabled`);
}, a6 = () => {
  console.error(`${fd} is disabled`);
};
class l6 {
  constructor(t) {
    u(this, "controllers", {});
    u(this, "state", {
      visible: !0,
      enabled: !0,
      disposed: !1
    });
    u(this, "hooks", new Pt());
    u(this, "eventListener", {});
    t && this.addControllers(t), this.setState(this.state);
  }
  /**
   * @description Show guide line
   */
  show(t) {
    return $(this, null, function* () {
      this.setState({ visible: !0 }, t);
    });
  }
  /**
   * @description Hide guide line
   */
  hide(t) {
    return $(this, null, function* () {
      this.setState({ visible: !1 }, t);
    });
  }
  /**
   * @description Enable
   */
  enable(t) {
    this.setState({ enabled: !0 }, t);
  }
  /**
   * @description Disable
   */
  disable(t) {
    this.setState({ enabled: !1 }, t);
  }
  /**
   * @description Dispose
   */
  dispose() {
    this.setState({ disposed: !0 });
  }
  setState(t, e) {
    if (this.state.disposed)
      return r6();
    if (!this.state.enabled && t.enabled !== !0 && t.disposed !== !0)
      return a6();
    const i = _({}, this.state);
    this.state = _(_({}, this.state), t), t.disposed !== void 0 && t.disposed !== i.disposed && t.disposed && this.handleDispose(), t.visible !== void 0 && this.handleVisible(t.visible), t.enabled !== void 0 && this.handleEnable(t.enabled), this.hooks.emit("stateChange", { state: this.state, prevState: i });
  }
  addControllers(t) {
    this.controllers = _(_({}, this.controllers), t), this.setState(this.state);
  }
  /**
   * @description 初始化 helpers 的位置
   */
  initialHelperMatrix() {
    this.everyControllerDo((t) => {
      t.initialHelperPosition(), t.initialHelperQuaternion();
    });
  }
  getCurrentState() {
    return this.state;
  }
  handleEnable(t, e = !0) {
    t ? (this.everyControllerDo((i) => {
      i.enable();
    }), this.hooks.emit("enable", { userAction: e })) : (this.everyControllerDo((i) => {
      i.disable();
    }), this.hooks.emit("disable", { userAction: e })), this.state.enabled = t;
  }
  handleVisible(t, e = !0) {
    t ? (this.everyControllerDo((i) => {
      i.show();
    }), this.actionIfStateIsEnabled(() => this.hooks.emit("show", { userAction: e }))) : (this.everyControllerDo((i) => {
      i.hide();
    }), this.actionIfStateIsEnabled(() => this.hooks.emit("hide", { userAction: e }))), this.state.visible = t;
  }
  everyControllerDo(t) {
    Object.values(this.controllers).forEach((e) => {
      e && t(e);
    });
  }
  handleDispose() {
    var t, e;
    Object.values(this.controllers).forEach((i) => {
      i == null || i.dispose();
    });
    for (const i in this.controllers) {
      if (!i)
        continue;
      const s = i;
      (e = (t = this.eventListener)[s]) == null || e.call(t);
    }
  }
  actionIfStateIsEnabled(t, e) {
    if (this.state.enabled)
      return t();
    e != null && e.warnLog && o6();
  }
}
function uc(n) {
  return n * Math.PI / 180;
}
let fc = new P.Quaternion();
class c6 extends Qo {
  constructor(...e) {
    var c, h, d;
    super(...e);
    u(this, "name", "RotateController");
    u(this, "startInfo");
    u(this, "removeListener");
    const i = this.helperObject3D;
    this.hoverListener([(c = i.xCircle) == null ? void 0 : c.circle, (h = i.yCircle) == null ? void 0 : h.circle, (d = i.zCircle) == null ? void 0 : d.circle].filter(Boolean));
    const s = this.dragStart.bind(this), r = this.dragging.bind(this), o = this.dragEnd.bind(this), a = this.show.bind(this), l = this.hide.bind(this);
    this.domEvents.addEventListener(this.helperObject3D, "mousedown", s), document.addEventListener("mousemove", r), document.addEventListener("mouseup", o), this.domEvents.addEventListener(this.helperObject3D, "touchstart", s), document.addEventListener("touchmove", r), document.addEventListener("touchend", o), this.hooks.on("moveStart", l), this.hooks.on("moveEnd", a), this.hooks.on("scaleStart", l), this.hooks.on("scaleEnd", a), this.hooks.on("moveByMouseEnable", l), this.hooks.on("moveByMouseDisable", a), this.disposers.push(() => {
      this.domEvents.removeEventListener(this.helperObject3D, "mousedown", s), document.removeEventListener("mousemove", r), document.removeEventListener("mouseup", o), this.domEvents.removeEventListener(this.helperObject3D, "touchstart", s), document.removeEventListener("touchmove", r), document.removeEventListener("touchend", o), this.hooks.off("moveStart", l), this.hooks.off("moveEnd", a), this.hooks.off("scaleStart", l), this.hooks.off("scaleEnd", a), this.hooks.off("moveByMouseEnable", l), this.hooks.off("moveByMouseDisable", a);
    });
  }
  get rotateCenter() {
    return this.helperObject3D.position.clone();
  }
  setRotateAngle(e) {
    const { x: i = 0, y: s = 0, z: r = 0 } = e, o = new P.Euler(uc(i), uc(s), uc(r)), a = new P.Quaternion().setFromEuler(o);
    if (this.hooks.emit("wantToRotate", a))
      return;
    const { originObject3D: c, rotateCenter: h } = this;
    dd(c, a, h), this.internalHooks.emit("setObjectRotate", a, h), this.hooks.emit("rotate", a), this.render();
  }
  onApplyOriginObjectRotate(e) {
    this.isDragging || super.onApplyOriginObjectRotate(e);
  }
  onApplyOriginObjectScale(e) {
  }
  /**
   * @description: 拖动开始，找出拖的Direction
   */
  dragStart(e) {
    if (this.isDragging)
      return;
    const i = e == null ? void 0 : e.intersect;
    if (!i)
      return this.dragEnd();
    const s = (i == null ? void 0 : i.object).direction;
    if (!s)
      return this.dragEnd();
    const r = i.point, o = this.getAngleHelper(s);
    this.setTipsAngle(0);
    const a = r.clone();
    a.y += 0.2, this.setTipsPosition(a);
    const l = this.helperObject3D.quaternion.clone(), c = (() => {
      if (s === "x")
        return new P.Vector3(1, 0, 0).applyQuaternion(l);
      if (s === "y")
        return new P.Vector3(0, 1, 0).applyQuaternion(l);
      if (s === "z")
        return new P.Vector3(0, 0, 1).applyQuaternion(l);
    })(), h = new P.Plane().setFromNormalAndCoplanarPoint(c, r), f = h.projectPoint(r.clone(), new P.Vector3()).clone().sub(this.rotateCenter), g = f.angleTo(o.baseAxes.clone().applyQuaternion(l));
    this.setAngleHelperStart(s, g), this.setAngleHelperLength(s, 0), this.startInfo = { direction: s, startVector: f, plane: h, angleHelper: o, angle: 0, helperQuaternion: l.clone() }, fc = new P.Quaternion(), this.helperObject3D.showDraggingHelper([s]), this.hooks.emit("rotateStart"), this.isDragging = !0;
  }
  dragging(e) {
    if (!this.isDragging)
      return;
    const i = "touches" in e ? e.touches[0].clientX : e.x, s = "touches" in e ? e.touches[0].clientY : e.y, r = kl(this.camera, { x: i, y: s }, this.container);
    return r ? (this.rotate(r), !1) : this.dragEnd();
  }
  rotate(e) {
    if (!this.startInfo)
      return this.dragEnd();
    const { startVector: i, plane: s, angleHelper: r, direction: o, helperQuaternion: a } = this.startInfo, { originObject3D: l } = this, c = e.ray.intersectPlane(s, new P.Vector3());
    if (!c)
      return;
    const h = this.rotateCenter.clone(), f = s.projectPoint(c.clone(), new P.Vector3()).clone().sub(h);
    if (i.angleTo(f) === 0)
      return;
    const g = new P.Quaternion().setFromUnitVectors(i.clone().normalize(), f.clone().normalize()), p = l.quaternion.clone().premultiply(g);
    if (this.hooks.emit("wantToRotate", p))
      return;
    const b = new P.Euler().setFromQuaternion(
      new P.Quaternion().setFromUnitVectors(
        i.clone().normalize().applyQuaternion(a.clone().inverse()),
        f.clone().normalize().applyQuaternion(a.clone().inverse())
      ),
      `${o.toUpperCase()}${"XZY".replace(o.toUpperCase(), "")}`
    )[o] * r.angleDirection;
    if (this.startInfo.angle += b, this.setAngleHelperLength(o, this.startInfo.angle), this.setTipsAngle(Al(this.startInfo.angle)), h) {
      const w = new P.Vector3().subVectors(l.position, h).applyQuaternion(g).add(h);
      l.position.copy(w);
    }
    l.applyQuaternion(g), fc.premultiply(g), this.internalHooks.emit("applyObjectRotate", { quaternion: g, origin: h }), this.hooks.emit("rotate", l.quaternion), this.startInfo.startVector = f;
  }
  dragEnd() {
    this.isDragging && (this.applyHelperQuaternion(fc, this.rotateCenter), this.startInfo = void 0, this.isDragging = !1, this.helperObject3D.show(), this.hooks.emit("rotateEnd"));
  }
  getAngleHelper(e) {
    var i, s, r;
    switch (e) {
      case "x":
        return (i = this.helperObject3D.xCircle) == null ? void 0 : i.angleSector;
      case "y":
        return (s = this.helperObject3D.yCircle) == null ? void 0 : s.angleSector;
      case "z":
        return (r = this.helperObject3D.zCircle) == null ? void 0 : r.angleSector;
    }
  }
  setAngleHelperStart(e, i) {
    const s = this.getAngleHelper(e);
    if (!s) {
      console.warn("angleHelper is undefined");
      return;
    }
    if (s instanceof P.Mesh && s.geometry instanceof P.CircleGeometry) {
      const { radius: r, segments: o, thetaLength: a } = s.geometry.parameters;
      s.geometry = new P.CircleGeometry(r, o, i, a);
    } else
      console.warn("only support THREE.CircleGeometry");
  }
  setAngleHelperLength(e, i) {
    const r = i >= 0 ? Math.max(i, 1e-3) : Math.min(i, -1e-3), o = this.getAngleHelper(e);
    if (o instanceof P.Mesh && o.geometry instanceof P.CircleGeometry) {
      const { radius: a, thetaStart: l } = o.geometry.parameters, c = Math.ceil(Math.abs(r) * (40 / (2 * Math.PI)));
      o.geometry = new P.CircleGeometry(a, c, l, r);
    } else
      console.warn("only support THREE.CircleGeometry");
  }
  setTipsAngle(e) {
    var s;
    const i = (s = this.helperObject3D.angleTips) == null ? void 0 : s.element;
    i && (i.innerText = `${e.toFixed(0)}°`);
  }
  setTipsPosition(e) {
    const i = this.helperObject3D.angleTips;
    if (!i)
      return;
    const s = e.project(this.camera), { x: r, y: o, z: a } = s;
    if (a > 1)
      return;
    const l = (r + 1) / 2 * 100 + "%", c = (-o + 1) / 2 * 100 + "%";
    i.setLeftTop(l, c);
  }
}
class h6 extends Qo {
  constructor(...e) {
    super(...e);
    u(this, "startInfo");
    u(this, "name", "RectangleScaleController");
  }
  enable() {
    this.helperObject3D.enable(), super.enable();
  }
  disable() {
    this.helperObject3D.disable(), super.disable();
  }
  show() {
    this.helperObject3D.show(), super.show();
  }
  hide() {
    this.helperObject3D.hide(), super.hide();
  }
  onApplyOriginObjectPosition(e) {
    this.isDragging || super.onApplyOriginObjectPosition(e);
  }
  onApplyOriginObjectScale(e) {
    this.helperObject3D.applyHelperScaleMatrix4(e.matrix, e.origin);
  }
  getDragPlane() {
    const e = new P.Plane(), i = this.helperObject3D.cornerPositions;
    if (i.length !== 0)
      return i.length < 3 ? e.setFromNormalAndCoplanarPoint(this.originObject3D.getWorldDirection(new fe()), i[0]) : e.setFromCoplanarPoints(i[0], i[1], i[2]), e;
  }
  dragStart(e, i) {
    var r, o;
    (o = (r = this.helperObject3D).updatePoints) == null || o.call(r);
    const s = this.getDragPlane();
    if (!s)
      return this.dragEnd();
    this.startInfo = { startPoint: { position: i.position.clone(), direction: i.direction }, plane: s }, this.hooks.emit("scaleStart"), this.render(), this.isDragging = !0;
  }
  dragging(e) {
    if (!this.isDragging)
      return;
    const i = kl(this.camera, e, this.container);
    if (!i)
      return this.dragEnd();
    this.scale(i);
  }
  scale(e) {
    var O, A;
    if (!this.startInfo)
      return;
    const i = this.originObject3D, { startPoint: s, plane: r } = this.startInfo, o = this.helperObject3D.cornerPositions;
    if (o.length < 4)
      return this.dragEnd();
    const a = e.ray.intersectPlane(r, new fe());
    if (!a || Da(a, this.camera.position))
      return;
    const l = new fe().addVectors(o[0], o[2]).divideScalar(2), { position: c, direction: h } = s, d = new fe().subVectors(o[1], o[0]), f = new fe().subVectors(o[3], o[0]), g = (C) => {
      const I = new fe(0, 0, 0);
      if (!this.startInfo)
        return I;
      const E = (C === "ew" ? d : f).clone(), D = c.clone().projectOnVector(E), L = a.clone().projectOnVector(E), N = l.clone().projectOnVector(E);
      if (L.equals(D))
        return I;
      if (C === "ns" && typeof this.startInfo.dragPointInCenterBottom != "boolean") {
        const ee = new fe().subVectors(L, N), J = ee.x < 0 && E.x >= 0, ie = ee.y < 0 && E.y >= 0, ne = ee.z < 0 && E.z >= 0;
        this.startInfo.dragPointInCenterBottom = J || ie || ne;
      }
      if (C === "ew" && typeof this.startInfo.dragPointInCenterLeft != "boolean") {
        const ee = new fe().subVectors(L, N), J = ee.x < 0 && E.x >= 0, ie = ee.y < 0 && E.y >= 0, ne = ee.z < 0 && E.z >= 0;
        this.startInfo.dragPointInCenterLeft = J || ie || ne;
      }
      const G = new fe().subVectors(L, D), Z = G.length();
      return Z > 0.3 ? (console.warn("offset.length() > 0.3, skipped", Z), I) : G;
    }, p = g("ew"), m = g("ns"), v = () => {
      const C = p;
      this.helperObject3D.cornerPositions.forEach((I, E) => {
        var D;
        (D = this.startInfo) != null && D.dragPointInCenterLeft ? (E === 0 || E === 3) && I.add(C) : (E === 1 || E === 2) && I.add(C);
      });
    }, b = () => {
      const C = m;
      this.helperObject3D.cornerPositions.forEach((I, E) => {
        var D;
        (D = this.startInfo) != null && D.dragPointInCenterBottom ? (E === 0 || E === 1) && I.add(C) : (E === 2 || E === 3) && I.add(C);
      });
    };
    switch (h) {
      case "ew":
        v();
        break;
      case "ns":
        b();
        break;
      case "nesw":
      case "nwse":
        v(), b();
    }
    const w = new fe().subVectors(o[1], o[0]).length() / d.length(), x = new fe().subVectors(o[3], o[0]).length() / f.length(), k = new fe(w, x, 1), T = new P.Matrix4().scale(k);
    i.isCSS3DObjectPlus && i.applyScaleMatrix4 ? i.applyScaleMatrix4(T) : i.scale.applyMatrix4(T), s.position.copy(a);
    const S = new fe().addVectors(o[0], o[2]).divideScalar(2), V = new fe().subVectors(S, l), z = new P.Matrix4().setPosition(V);
    i.applyMatrix4(z), (O = this.helperObject3D.css3DInstance) == null || O.css3DObject.applyMatrix4(z), (A = this.helperObject3D.plane) == null || A.applyMatrix4(z), this.internalHooks.emit("applyObjectScale", { matrix: T }), this.internalHooks.emit("applyObjectPosition", { matrix: z }), this.render();
  }
  dragEnd() {
    this.isDragging && (this.startInfo = void 0, this.isDragging = !1, this.hooks.emit("scaleEnd"), this.render());
  }
}
class d6 extends h6 {
  constructor(...e) {
    super(...e);
    u(this, "name", "CSS3DScaleController");
    this.addHTMLEventListener();
  }
  addHTMLEventListener() {
    this.helperObject3D.points.forEach((e) => {
      if (!e)
        return;
      const i = e.point, s = (a) => this.dragStart(a, e), r = this.dragging.bind(this), o = this.dragEnd.bind(this);
      i.addEventListener("dragstart", s), i.addEventListener("drag", r), i.addEventListener("dragend", o);
    });
  }
}
class u6 extends Qo {
  constructor(...e) {
    super(...e);
    u(this, "name", "BoundingBoxController");
  }
}
class f6 extends V7 {
  constructor(e, i) {
    super(e, i);
    u(this, "name", "ScaleHelper");
    u(this, "scaleMeshes", []);
    u(this, "positions", []);
    i && (this.positions = i.positions);
  }
  initQuaternion() {
    this.quaternion.copy(this.originObject3D.quaternion);
  }
  initialPosition(e) {
    this.position.copy(this.originObject3D.position);
    const i = typeof this.positions == "function" ? this.positions() : this.positions;
    i && (this.scaleMeshes = i.map((s, r) => {
      var a;
      const o = (a = this.scaleMeshes[r]) != null ? a : p6();
      return o.position.copy(s.handlePosition), o.scalePosition = s, this.addIfNotExists(o), o;
    }));
  }
  setScaleByCamera(e) {
    this.scaleMeshes.forEach((i) => {
      i.scale.setScalar(
        ud(e, i.scalePosition.handlePosition.clone().applyMatrix4(this.matrixWorld))
      );
    });
  }
}
function p6() {
  const n = new P.Group();
  n.name = "ScaleHelperCube";
  const t = 0.05, e = new P.BoxGeometry(t, t, t), i = new P.MeshBasicMaterial({
    color: 16776960,
    transparent: !0,
    side: P.DoubleSide
  }), s = new P.MeshBasicMaterial({
    color: 16776960,
    opacity: 0.4,
    depthTest: !1,
    depthWrite: !1,
    transparent: !0,
    side: P.DoubleSide
  }), r = new P.Mesh(e, i), o = new P.Mesh(e, s);
  return r.name = "ScaleHelperCube-front", o.name = "ScaleHelperCube-behind", r.renderOrder = 11, o.renderOrder = 10, n.add(r, o), n;
}
class m6 extends Qo {
  constructor(...e) {
    super(...e);
    u(this, "name", "ScaleController");
    u(this, "startInfo");
    u(this, "dragStart", (e) => {
      if (this.isDragging)
        return;
      this.isDragging = !0;
      const { intersect: i } = e, s = this.camera.position;
      let r = i.object;
      r.scalePosition || (r = i.object.parent);
      const o = r.scalePosition.basePosition.clone(), l = r.scalePosition.handlePosition.clone().clone().sub(o).clone(), c = new P.Line3(o, o.clone().add(l.normalize().multiplyScalar(5)));
      c.applyMatrix4(this.helperObject3D.matrixWorld);
      const h = new P.Raycaster(s, i.point.clone().sub(s)), d = Yn({ raycaster: h, line: c });
      this.startInfo = { line: c, scaleStartPoint: d, draggingObject: r }, this.helperObject3D.scaleMeshes.forEach((f) => {
        f.uuid !== r.uuid && (f.visible = !1);
      }), r.visible = !0, this.hooks.emit("scaleStart");
    });
    u(this, "dragging", (e) => {
      if (!this.isDragging || !this.startInfo)
        return;
      const i = "touches" in e ? e.touches[0].clientX : e.x, s = "touches" in e ? e.touches[0].clientY : e.y, r = kl(this.camera, { x: i, y: s }, this.container);
      return r ? (this.scale(r), !1) : this.dragEnd();
    });
    u(this, "scale", (e) => {
      var l, c;
      if (!this.startInfo)
        return;
      const { line: i, scaleStartPoint: s, draggingObject: r } = this.startInfo, { scalePosition: o } = r, a = Yn({ raycaster: e, line: i, clampToLine: !1 });
      a.applyMatrix4(new P.Matrix4().getInverse(this.helperObject3D.matrixWorld.clone())), (c = (l = this.config) == null ? void 0 : l.scaleCallback) == null || c.call(l, {
        intersectPoint: a,
        scalePosition: o,
        offset: a.clone().sub(s)
      }), r.position.copy(a.clone()), this.hooks.emit("scale", new P.Vector3(1, 1, 1));
    });
    u(this, "dragEnd", () => {
      this.isDragging && (this.startInfo = void 0, this.isDragging = !1, this.helperObject3D.scaleMeshes.forEach((e) => {
        e.visible = !0;
      }), this.internalHooks.emit("initialHelperPosition"), this.hooks.emit("scaleEnd"));
    });
    const i = this.show.bind(this), s = this.hide.bind(this);
    this.domEvents.addEventListener(this.helperObject3D, "mousedown", this.dragStart), document.addEventListener("mousemove", this.dragging), document.addEventListener("mouseup", this.dragEnd), this.domEvents.addEventListener(this.helperObject3D, "touchstart", this.dragStart), document.addEventListener("touchmove", this.dragging), document.addEventListener("touchend", this.dragEnd), this.hooks.on("rotateStart", s), this.hooks.on("rotateEnd", i), this.hooks.on("moveStart", s), this.hooks.on("moveEnd", i), this.hooks.on("moveByMouseEnable", s), this.hooks.on("moveByMouseDisable", i), this.disposers.push(() => {
      this.domEvents.removeEventListener(this.helperObject3D, "mousedown", this.dragStart), document.removeEventListener("mousemove", this.dragging), document.removeEventListener("mouseup", this.dragEnd), this.domEvents.removeEventListener(this.helperObject3D, "touchstart", this.dragStart), document.removeEventListener("touchmove", this.dragging), document.removeEventListener("touchend", this.dragEnd), this.hooks.off("rotateStart", s), this.hooks.off("rotateEnd", i), this.hooks.off("moveStart", s), this.hooks.off("moveEnd", i), this.hooks.off("moveByMouseEnable", s), this.hooks.off("moveByMouseDisable", i);
    });
  }
  initialHelperPosition() {
    this.helperObject3D.initialPosition();
    const e = this;
    e.offHoverListener && e.offHoverListener(), e.offHoverListener = this.hoverListener(this.helperObject3D.scaleMeshes);
  }
  setScale(e) {
    var l, c, h;
    let i = 1, s = 1, r = 1;
    typeof e == "number" ? (i = e, s = e, r = e) : typeof e == "object" && (i = (l = e.x) != null ? l : 1, s = (c = e.y) != null ? c : 1, r = (h = e.z) != null ? h : 1);
    const o = new P.Vector3(i, s, r);
    this.hooks.emit("wantToScale", o) || (this.originObject3D.scale.copy(o), this.internalHooks.emit("setObjectScale", o), this.hooks.emit("scale", o), this.render());
  }
}
function qe(n, t) {
  this._camera = n || null, this._domElement = t || document, this._raycaster = new P.Raycaster(), this._selected = null, this._boundObjs = {};
  var e = this;
  this._$onClick = function() {
    e._onClick.apply(e, arguments);
  }, this._$onDblClick = function() {
    e._onDblClick.apply(e, arguments);
  }, this._$onMouseMove = function() {
    e._onMouseMove.apply(e, arguments);
  }, this._$onMouseDown = function() {
    e._onMouseDown.apply(e, arguments);
  }, this._$onMouseUp = function() {
    e._onMouseUp.apply(e, arguments);
  }, this._$onTouchMove = function() {
    e._onTouchMove.apply(e, arguments);
  }, this._$onTouchStart = function() {
    e._onTouchStart.apply(e, arguments);
  }, this._$onTouchEnd = function() {
    e._onTouchEnd.apply(e, arguments);
  }, this._$onContextmenu = function() {
    e._onContextmenu.apply(e, arguments);
  }, this._domElement.addEventListener("click", this._$onClick, !1), this._domElement.addEventListener("dblclick", this._$onDblClick, !1), this._domElement.addEventListener("mousemove", this._$onMouseMove, !1), this._domElement.addEventListener("mousedown", this._$onMouseDown, !1), this._domElement.addEventListener("mouseup", this._$onMouseUp, !1), this._domElement.addEventListener("touchmove", this._$onTouchMove, !1), this._domElement.addEventListener("touchstart", this._$onTouchStart, !1), this._domElement.addEventListener("touchend", this._$onTouchEnd, !1), this._domElement.addEventListener("contextmenu", this._$onContextmenu, !1);
}
qe.prototype.destroy = function() {
  this._domElement.removeEventListener("click", this._$onClick, !1), this._domElement.removeEventListener("dblclick", this._$onDblClick, !1), this._domElement.removeEventListener("mousemove", this._$onMouseMove, !1), this._domElement.removeEventListener("mousedown", this._$onMouseDown, !1), this._domElement.removeEventListener("mouseup", this._$onMouseUp, !1), this._domElement.removeEventListener("touchmove", this._$onTouchMove, !1), this._domElement.removeEventListener("touchstart", this._$onTouchStart, !1), this._domElement.removeEventListener("touchend", this._$onTouchEnd, !1), this._domElement.removeEventListener("contextmenu", this._$onContextmenu, !1);
};
qe.eventNames = [
  "click",
  "dblclick",
  "mouseover",
  "mouseout",
  "mousemove",
  "mousedown",
  "mouseup",
  "contextmenu",
  "touchstart",
  "touchend"
];
qe.prototype._getRelativeMouseXY = function(n) {
  var t = n.target || n.srcElement;
  t.nodeType === 3 && (t = t.parentNode);
  var e = { x: 0, y: 0 }, i = t, s = getComputedStyle(i, null);
  e.y += parseInt(s.getPropertyValue("padding-top"), 10), e.x += parseInt(s.getPropertyValue("padding-left"), 10);
  do
    e.x += i.offsetLeft, e.y += i.offsetTop, s = getComputedStyle(i, null), e.x += parseInt(s.getPropertyValue("border-left-width"), 10), e.y += parseInt(s.getPropertyValue("border-top-width"), 10);
  while (i = i.offsetParent);
  var r = {
    width: t === window ? window.innerWidth : t.offsetWidth,
    height: t === window ? window.innerHeight : t.offsetHeight
  };
  return {
    x: Number((n.pageX - e.x) / r.width) * 2 - 1,
    y: -((n.pageY - e.y) / r.height) * 2 + 1
  };
};
qe.prototype._objectCtxInit = function(n) {
  n._3xDomEvent = {};
};
qe.prototype._objectCtxDeinit = function(n) {
  delete n._3xDomEvent;
};
qe.prototype._objectCtxIsInit = function(n) {
  return !!n._3xDomEvent;
};
qe.prototype._objectCtxGet = function(n) {
  return n._3xDomEvent;
};
qe.prototype.camera = function(n) {
  return n && (this._camera = n), this._camera;
};
qe.prototype.bind = function(n, t, e, i) {
  console.assert(qe.eventNames.indexOf(t) !== -1, "not available events:" + t), this._objectCtxIsInit(n) || this._objectCtxInit(n);
  var s = this._objectCtxGet(n);
  s[t + "Handlers"] || (s[t + "Handlers"] = []), s[t + "Handlers"].push({
    callback: e,
    useCapture: i
  }), this._boundObjs[t] === void 0 && (this._boundObjs[t] = []), this._boundObjs[t].push(n);
};
qe.prototype.addEventListener = qe.prototype.bind;
qe.prototype.unbind = function(n, t, e, i) {
  console.assert(qe.eventNames.indexOf(t) !== -1, "not available events:" + t), this._objectCtxIsInit(n) || this._objectCtxInit(n);
  var s = this._objectCtxGet(n);
  s[t + "Handlers"] || (s[t + "Handlers"] = []);
  for (var r = s[t + "Handlers"], o = 0; o < r.length; o++) {
    var a = r[o];
    if (e == a.callback && i == a.useCapture) {
      r.splice(o, 1);
      break;
    }
  }
  var l = this._boundObjs[t].indexOf(n);
  this._boundObjs[t].splice(l, 1);
};
qe.prototype.removeEventListener = qe.prototype.unbind;
qe.prototype._bound = function(n, t) {
  var e = this._objectCtxGet(t);
  return e ? !!e[n + "Handlers"] : !1;
};
qe.prototype._onMove = function(n, t, e, i) {
  var s = this._boundObjs[n];
  if (!(s === void 0 || s.length === 0)) {
    var r = new P.Vector2();
    r.set(t, e), this._raycaster.setFromCamera(r, this._camera);
    var o = this._raycaster.intersectObjects(s), a = this._selected;
    if (o.length > 0) {
      var l, c, h, d = o[0], f = d.object;
      this._selected = f, h = this._bound("mousemove", f), a != f && (l = this._bound("mouseover", f), c = a && this._bound("mouseout", a));
    } else
      c = a && this._bound("mouseout", a), this._selected = null;
    h && this._notify("mousemove", f, i, d), l && this._notify("mouseover", f, i, d), c && this._notify("mouseout", a, i, d);
  }
};
qe.prototype._onEvent = function(n, t, e, i) {
  var s = this._boundObjs[n];
  if (!(s === void 0 || s.length === 0)) {
    var r = new P.Vector2();
    r.set(t, e), this._raycaster.setFromCamera(r, this._camera);
    var o = this._raycaster.intersectObjects(s, !0);
    if (o.length !== 0) {
      for (var a = o[0], l = a.object, c = this._objectCtxGet(l), h = l.parent; typeof c == "undefined" && h; )
        c = this._objectCtxGet(h), h = h.parent;
      c && this._notify(n, l, i, a);
    }
  }
};
qe.prototype._notify = function(n, t, e, i) {
  var s = this._objectCtxGet(t), r = s ? s[n + "Handlers"] : null;
  if (!s || !r || r.length === 0) {
    t.parent && this._notify(n, t.parent, e, i);
    return;
  }
  for (var r = s[n + "Handlers"], o = 0; o < r.length; o++) {
    var a = r[o], l = !0;
    a.callback({
      type: n,
      target: t,
      origDomEvent: e,
      intersect: i,
      stopPropagation: function() {
        l = !1;
      }
    }), l && a.useCapture === !1 && t.parent && this._notify(n, t.parent, e, i);
  }
};
qe.prototype._onMouseDown = function(n) {
  return this._onMouseEvent("mousedown", n);
};
qe.prototype._onMouseUp = function(n) {
  return this._onMouseEvent("mouseup", n);
};
qe.prototype._onMouseEvent = function(n, t) {
  var e = this._getRelativeMouseXY(t);
  this._onEvent(n, e.x, e.y, t);
};
qe.prototype._onMouseMove = function(n) {
  var t = this._getRelativeMouseXY(n);
  this._onMove("mousemove", t.x, t.y, n), this._onMove("mouseover", t.x, t.y, n), this._onMove("mouseout", t.x, t.y, n);
};
qe.prototype._onClick = function(n) {
  this._onMouseEvent("click", n);
};
qe.prototype._onDblClick = function(n) {
  this._onMouseEvent("dblclick", n);
};
qe.prototype._onContextmenu = function(n) {
  this._onMouseEvent("contextmenu", n);
};
qe.prototype._onTouchStart = function(n) {
  return this._onTouchEvent("touchstart", n);
};
qe.prototype._onTouchEnd = function(n) {
  return this._onTouchEvent("touchend", n);
};
qe.prototype._onTouchMove = function(n) {
  if (n.touches.length == 1) {
    var t = Number(n.touches[0].pageX / window.innerWidth) * 2 - 1, e = -(n.touches[0].pageY / window.innerHeight) * 2 + 1;
    this._onMove("mousemove", t, e, n), this._onMove("mouseover", t, e, n), this._onMove("mouseout", t, e, n);
  }
};
qe.prototype._onTouchEvent = function(n, t) {
  var e = t.touches;
  if (e.length == 0 && (e = t.changedTouches), e.length == 1) {
    var i = Number(e[0].pageX / window.innerWidth) * 2 - 1, s = -(e[0].pageY / window.innerHeight) * 2 + 1;
    this._onEvent(n, i, s, t);
  }
};
const $c = "Object3DHelperPlugin", pd = $c, g6 = () => {
  console.error(`${pd} is disposed`);
}, v6 = () => {
  console.warn(`${pd} is disabled`);
}, A6 = () => {
  console.error(`${pd} is disabled`);
};
class J1 extends rs {
  constructor(e) {
    super(e);
    u(this, "name", $c);
    u(this, "state", {
      visible: !0,
      enabled: !0,
      disposed: !1
    });
    u(this, "objectHelperMap", /* @__PURE__ */ new Map());
    u(this, "css3DObjectParentMap", /* @__PURE__ */ new Map());
    u(this, "css3DObjectModeMap", /* @__PURE__ */ new Map());
    u(this, "css3DRender");
    this.five = e, this.css3DRender = new Co(this.five.scene), console.warn("Object3DHelper: 使用此插件，需要在初始化five时，设置five参数: { backgroundAlpha: 0, backgroundColor: 0x000000 }"), Object.assign(window, { [`__${$c.toUpperCase()}_DEBUG__`]: this });
  }
  /**
   * @description Show guide line
   */
  show(e) {
    return $(this, null, function* () {
      this.setState({ visible: !0 }, e);
    });
  }
  /**
   * @description Hide guide line
   */
  hide(e) {
    return $(this, null, function* () {
      this.setState({ visible: !1 }, e);
    });
  }
  /**
   * @description Enable
   */
  enable(e) {
    this.setState({ enabled: !0 }, e);
  }
  /**
   * @description Disable
   */
  disable(e) {
    this.setState({ enabled: !1 }, e);
  }
  /**
   * @description Dispose
   */
  dispose() {
    this.setState({ disposed: !0 });
  }
  setState(e, i) {
    if (this.state.disposed)
      return g6();
    if (!this.state.enabled && e.enabled !== !0 && e.disposed !== !0)
      return A6();
    const s = _({}, this.state);
    this.state = _(_({}, this.state), e), e.disposed !== void 0 && e.disposed !== s.disposed && e.disposed && this.handleDispose(), e.visible !== void 0 && e.visible !== s.visible && this.handleVisible(e.visible), e.enabled !== void 0 && e.enabled !== s.enabled && this.handleEnable(e.enabled), this.hooks.emit("stateChange", { state: this.state, prevState: s });
  }
  getObject3DHelper(e) {
    return this.objectHelperMap.get(e);
  }
  /**
   * @description 添加 helper
   * @param { THREE.Object3D } object3D       要添加helper的物体
   * @param { boolean } config.moveHelper     位移helper
   * @param { boolean } config.rotateHelper   旋转helper
   * @param { boolean } config.scaleHelper    缩放helper
   */
  addObject3DHelper(e, i = {}) {
    var w;
    if (!e) {
      console.error("Object3D is undefined");
      return;
    }
    if (this.objectHelperMap.has(e)) {
      console.warn(`Object3DHelperPlugin: object3D ${e.name} is already has helper`);
      return;
    }
    const s = new l6(), r = [], o = (w = this.five.getElement()) == null ? void 0 : w.parentElement, a = this.five.camera, c = _(_({}, {
      moveHelper: !0,
      rotateHelper: !0,
      scaleHelper: !0,
      boundingBoxHelper: !1,
      positionFrom: "objectPosition"
    }), i), { moveHelper: h, rotateHelper: d, scaleHelper: f, boundingBoxHelper: g } = c, p = s.hooks, m = new Pt(), v = new qe(this.five.camera, this.five.getElement()), b = (x) => {
      if (x)
        return typeof x == "boolean" ? x : x.enable;
    };
    if (b(h)) {
      const x = _(_({}, this.getConfig(c.moveHelper)), c), k = new Q7(e, _({}, x)), T = new so(
        this.five,
        v,
        i6,
        e,
        k,
        x,
        p,
        m
      );
      s.addControllers({ moveController: T.helperController }), r.push(() => T.dispose());
    }
    if (b(d)) {
      const x = _(_({}, this.getConfig(c.rotateHelper)), c), k = new Y7(e, _({ container: o }, x)), T = new so(
        this.five,
        v,
        c6,
        e,
        k,
        x,
        p,
        m
      );
      s.addControllers({ rotateController: T.helperController }), r.push(() => T.dispose());
    }
    if (b(g)) {
      const x = new e6(e), k = new so(
        this.five,
        v,
        u6,
        e,
        x,
        void 0,
        p,
        m
      );
      s.addControllers({ boundingBoxController: k.helperController });
    }
    if (b(f))
      if (e.isCSS3DObject && o) {
        const x = new $7(e, o, a, this.five.scene), k = new so(
          this.five,
          v,
          d6,
          e,
          x,
          void 0,
          p,
          m
        );
        s.addControllers({ scaleController: k.helperController }), r.push(() => k.dispose()), ui(this.five).then(() => {
          var T, S;
          if (e.isCSS3DObjectPlus) {
            const V = e;
            if (!V || V.mode !== "front")
              return;
            const z = (T = this.css3DRender.behindModeCSS3DRenderer.wrapper) != null ? T : hh(this.five);
            z && (this.css3DObjectParentMap.set(V, V.parent), V.removeFromParent(), this.css3DRender.behindModeCSS3DRenderer.setWrapper(z), (S = this.css3DRender.getBehindCSS3DObjectGroup()) == null || S.add(V), this.css3DRender.render(this.five.camera));
          } else
            e.isCSS3DObject && (this.css3DObjectModeMap.set(e, e.mode), e.mode = "behind");
        });
      } else {
        const x = _(_({}, this.getConfig(c.scaleHelper)), c), k = new f6(e, x), T = new so(
          this.five,
          v,
          m6,
          e,
          k,
          x,
          p,
          m
        );
        s.addControllers({ scaleController: T.helperController }), r.push(() => T.dispose());
      }
    return this.objectHelperMap.set(e, { helper: s, disposers: r }), s.controllers;
  }
  removeObject3DHelper(e) {
    if (!this.objectHelperMap.has(e))
      return;
    const { helper: i, disposers: s } = this.objectHelperMap.get(e);
    if (i) {
      if (e.isCSS3DObjectPlus) {
        const r = e, o = this.css3DObjectParentMap.get(r);
        o && o.add(r), this.css3DRender.render(this.five.camera);
      } else if (e.isCSS3DObject) {
        const r = this.css3DObjectModeMap.get(e);
        e.mode = r;
      }
      this.objectHelperMap.delete(e), i.dispose(), s == null || s.forEach((r) => r == null ? void 0 : r());
    }
  }
  handleEnable(e, i = !0) {
    e ? (this.everyHelperDo((s) => s.enable()), this.hooks.emit("enable", { userAction: i })) : (this.everyHelperDo((s) => s.disable()), this.hooks.emit("disable", { userAction: i })), this.state.enabled = e;
  }
  handleVisible(e, i = !0) {
    e ? (this.everyHelperDo((s) => s.show()), this.actionIfStateIsEnabled(() => this.hooks.emit("show", { userAction: i }))) : (this.everyHelperDo((s) => s.hide()), this.actionIfStateIsEnabled(() => this.hooks.emit("hide", { userAction: i }))), this.state.visible = e;
  }
  handleDispose() {
    this.everyHelperDo((e, i) => {
      e.dispose(), i == null || i.forEach((s) => s == null ? void 0 : s());
    });
  }
  everyHelperDo(e) {
    this.objectHelperMap.forEach(({ helper: i, disposers: s }) => {
      i && e(i, s);
    });
  }
  actionIfStateIsEnabled(e, i) {
    if (this.state.enabled)
      return e();
    i != null && i.warnLog && v6();
  }
  getConfig(e) {
    if (e && typeof e != "boolean" && e.enable)
      return e;
  }
}
const OD = (n) => new J1(n), b6 = (
  /* glsl */
  `
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`
), y6 = (
  /* glsl */
  `
uniform sampler2D map;
uniform vec4 size;
varying vec2 vUv;
uniform float opacity;

void main() {
  float dx = max(size[0] + size[2] - 1.0, 0.0);
  vec2 uv = vec2(((vUv.x <= dx ? vUv.x + 1.0 : vUv.x) - size[0]) / size[2], (vUv.y - size[1]) / size[3]);
  float a = 0.1;
  float transX = uv.x < a ? 1.0 / a * uv.x : (uv.x > (1.0 - a) ? 1.0 / a * (1.0 - uv.x) : 1.0);
  float transY = uv.y < a ? 1.0 / a * uv.y : (uv.y > (1.0 - a) ? 1.0 / a * (1.0 - uv.y) : 1.0);
	float match = (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5))) * (transX < transY ? transX : transY);
  gl_FragColor = vec4(texture2D(map, uv).xyz, match * opacity);
}
`
);
function w6(n) {
  const t = Math.PI * 2;
  let e = -Math.atan2(n.x, -n.z);
  e = (e % t + t) % t;
  const i = -Math.asin(n.y / 1);
  return { longitude: e, latitude: i };
}
class Qm {
  /** 初始化视频、模型以及相关事件监听。 */
  constructor(t, e) {
    u(this, "video");
    u(this, "fiveUtil");
    u(this, "_id");
    /** 视频资源地址 */
    u(this, "url");
    /** Five Instance */
    u(this, "five");
    /** 视频对应的点位 */
    u(this, "panoIndex");
    /** 视频对应的 Work Observer */
    u(this, "observer");
    /** 视频在球面的 uv：[left, top, width, height] */
    u(this, "origin");
    /** Video DOM */
    /** Video Mesh */
    u(this, "videoMesh");
    u(this, "_enabled", !0);
    u(this, "_disposed", !1);
    /** 视频资源是否满足播放条件 */
    u(this, "videoDataLoaded", !1);
    /** 视频是否曾经播放过 */
    u(this, "hasVideoEverPlayed", !1);
    /** 自动 render five 的销毁函数
     * @remark 由于 render video 依赖 Five render，因此需要自动 render five。
     */
    u(this, "renderFiveDisposer");
    u(this, "hooks");
    /**
     * 取消静音
     *
     * @warning 需要注意：由于大部分浏览器的限制，视频的声音必须在用户有交互事件后才能开启，否则会被浏览器禁用视频播放。
     */
    u(this, "unmute", () => {
      this.video.muted = !1;
    });
    /** 把 uv 值转换成位置 */
    u(this, "uv2Position", (t, e) => {
      const s = Math.PI, r = Math.PI * 2, o = t, a = 1 - e, l = new fe(
        -1 * Math.cos(r * o) * Math.sin(s * a),
        1 * Math.cos(s * a),
        1 * Math.sin(r * o) * Math.sin(s * a)
      );
      l.setX(-l.x);
      const c = this.fiveUtil.workUtil.getResolvedObserver(this.panoIndex);
      if (!c)
        return this.logWarning(`点位 ${this.panoIndex} 不存在，请检查 Five 数据是否正常。`);
      const h = c.position.clone(), d = c.quaternion.clone(), f = l.clone();
      return f.applyAxisAngle(new fe(0, 1, 0), Math.PI / 2), f.applyQuaternion(d), f.add(h), f;
    });
    /** Five 数据加载后需要根据点位位姿调整点位模型位置 */
    u(this, "onFiveDataLoaded", () => {
      const t = this.fiveUtil.workUtil.getResolvedObserver(this.panoIndex);
      if (!t)
        return this.logWarning(`点位 ${this.panoIndex} 不存在，请检查 Five 数据是否正常。`);
      this.observer = t;
      const { x: e, y: i, z: s, w: r } = t.quaternion, o = new ys(e, i, s, r), a = t.position;
      this.videoMesh.position.fromArray([a.x, a.y, a.z]), this.videoMesh.quaternion.set(0, 0, 0, 1), this.videoMesh.rotateOnAxis(new fe(0, 1, 0), Math.PI / 2), this.videoMesh.applyQuaternion(o);
    });
    /** 兼容视频播放 */
    u(this, "onFiveWantsMoveToPano", (t) => {
      t === this.panoIndex && (this.hasVideoEverPlayed || this.video.play().catch(() => {
      }));
    });
    /** 走到某个点位上时，挂载/卸载视频 */
    u(this, "onFivePanoArrived", (t) => {
      if (this.disposed)
        return this.logWarning("实例已被销毁");
      this.enabled && this.panoIndex === t && this.mount();
    });
    u(this, "onFivePanoWillArrive", (t) => {
      if (t !== this.panoIndex)
        return this.unmount();
      this.panoIndex !== t && this.unmount();
    });
    /** Five 模型变化 */
    u(this, "onFiveModeChange", (t) => {
      t !== "Panorama" && this.hide();
    });
    /** Five mode change 动画结束 */
    u(this, "onFiveInitAnimationEnded", () => {
      const t = this.five.getCurrentState();
      t.mode === "Panorama" && t.panoIndex === this.panoIndex && this.mount();
    });
    /** Five Canvas 点击 */
    u(this, "onFiveWantsTapGesture", (t) => {
      if (!this.five.scene.children.includes(this.videoMesh))
        return;
      if (this.disposed)
        return this.logWarning("实例已被销毁");
      if (!this.enabled)
        return this.logWarning("实例已被禁用");
      const [e] = t.intersectObject(this.videoMesh);
      if (!e)
        return;
      if (this.checkIntersectionInBounding(this.origin, e)) {
        const s = {
          target: this,
          _preventDefaultReturn: !1,
          preventDefault: () => {
            s._preventDefaultReturn = !0;
          }
        };
        return this.hooks.emit("click", s), s._preventDefaultReturn === !1 && (this.video.muted = !this.video.muted), !1;
      }
    });
    /** video canplaythrough 事件触发 */
    u(this, "onVideoDataLoaded", () => {
      this.videoDataLoaded = !0, this.video.paused === !1 && this.video.src !== "" && this.onVideoPlayingAndLoaded();
    });
    /** video playing 事件触发
     * @remarks
     * 事件触发时机：
     * - video is ready to start after having been paused.
     * - video is ready to play after delayed due to lack of data.
     * @link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video
     */
    u(this, "onVideoPlaying", () => {
      this.hasVideoEverPlayed = !0, this.enabled && this.videoDataLoaded && this.onVideoPlayingAndLoaded();
    });
    /** 触发 playing 和 canplaythrough */
    u(this, "onVideoPlayingAndLoaded", () => {
      if (!this.videoDataLoaded)
        return this.logWarning("视频数据未加载");
      if (this.video.paused === !0)
        return this.logWarning("视频已暂停");
      this.video.addEventListener(
        "timeupdate",
        () => {
          if (this.enabled && this.panoIndex === this.five.getCurrentState().panoIndex && this.five.getCurrentState().mode === "Panorama" && (this.renderFiveDisposer || (this.renderFiveDisposer = jr(() => {
            this.five.needsRender = !0;
          }, 30)), this.five.scene.add(this.videoMesh), this.videoMesh.material.uniforms.opacity.value === 0)) {
            const t = {
              value: 0
            };
            ot({
              targets: t,
              value: 1,
              duration: 300,
              easing: "linear",
              update: () => {
                this.videoMesh.material.uniforms.opacity.value = t.value;
              },
              complete: () => {
                this.videoMesh.material.uniforms.opacity.value = 1;
              }
            });
          }
        },
        { once: !0 }
      );
    });
    /** video pause 事件触发 */
    u(this, "onVideoPaused", () => {
      var t;
      (t = this.renderFiveDisposer) == null || t.call(this), this.renderFiveDisposer = void 0;
    });
    var l, c;
    this.five = t, this.panoIndex = e.panoIndex, this.fiveUtil = e.fiveUtil, this._id = e.renderID, this.url = e.url, this.origin = e.origin.slice(), this.hooks = e.hooks, this._enabled = (c = (l = e.initialState) == null ? void 0 : l.enabled) != null ? c : !0;
    const i = document.createElement("video");
    i.crossOrigin = "anonymous", i.autoplay = !1, i.muted = !0, i.loop = !0, i.playsInline = !0, this.video = i;
    const s = new Zv(this.video);
    s.minFilter = bc, s.magFilter = bc;
    const r = new cg({
      vertexShader: b6,
      fragmentShader: y6,
      uniforms: {
        map: { value: s },
        size: {
          value: new bs(this.origin[0], 1 - this.origin[1] - this.origin[3], this.origin[2], this.origin[3])
        },
        opacity: { value: 0 }
      },
      depthTest: !0,
      transparent: !0
    }), o = new Jv(1, 64, 64);
    o.scale(-1, 1, 1);
    const a = new fr(o, r);
    a.name = "pano-video-plugin", this.videoMesh = a, this.fiveUtil.workUtil.work && this.onFiveDataLoaded(), this.enabled && this.addEventListeners(), this.mountIfNeeded(), window[`__PANOVIDEO_${this.renderID}_DEBUG__`] = this;
  }
  /** 传入的 ID，不可更改 */
  get renderID() {
    return this._id;
  }
  /** 是否已经销毁 */
  get disposed() {
    return this._disposed;
  }
  /** 是否已经启用 */
  get enabled() {
    return this._enabled;
  }
  /** 彻底销毁，不响应之后的任何事件 */
  dispose() {
    this.disposed || (this.disable(), this._disposed = !0);
  }
  enable() {
    this.disposed || this.enabled || (this._enabled = !0, !this.observer && this.five.work && this.onFiveDataLoaded(), this.addEventListeners(), this.mountIfNeeded());
  }
  /** 禁用插件 */
  disable() {
    this.disposed || this.enabled && (this._enabled = !1, this.removeEventListeners(), this.unmount());
  }
  /** 切换到全景模式并看向视频
   * @remark 如果遇到不能自动播放的问题，需要放到用户交互事件中调用。
   */
  lookAtVideo() {
    if (!this.observer)
      return;
    const t = this.getUVCenter();
    if (!t)
      return;
    const e = this.uv2Position(t[0], t[1]);
    if (!e)
      return;
    const i = new fe().subVectors(e, this.observer.position).normalize(), { longitude: s, latitude: r } = w6(i);
    this.five.setState({ panoIndex: this.panoIndex, longitude: s, latitude: r }), this.onFiveWantsMoveToPano(this.panoIndex);
  }
  /** 获取视频中心点的 uv */
  getUVCenter() {
    if (!this.origin)
      return;
    const t = this.origin[0] + this.origin[2] / 2, e = this.origin[1] + this.origin[3] / 2;
    return [t, e];
  }
  /** 添加时间监听 */
  addEventListeners() {
    this.five.on("loaded", this.onFiveDataLoaded), this.five.on("modeChange", this.onFiveModeChange), this.five.on("panoArrived", this.onFivePanoArrived), this.five.on("panoWillArrive", this.onFivePanoWillArrive), this.five.on("wantsMoveToPano", this.onFiveWantsMoveToPano), this.five.on("wantsTapGesture", this.onFiveWantsTapGesture), this.five.on("initAnimationEnded", this.onFiveInitAnimationEnded), this.video.addEventListener("canplaythrough", this.onVideoDataLoaded), this.video.addEventListener("playing", this.onVideoPlaying), this.video.addEventListener("pause", this.onVideoPaused);
  }
  /** 移除事件监听 */
  removeEventListeners() {
    this.five.off("loaded", this.onFiveDataLoaded), this.five.off("modeChange", this.onFiveModeChange), this.five.off("panoArrived", this.onFivePanoArrived), this.five.off("panoWillArrive", this.onFivePanoWillArrive), this.five.off("wantsMoveToPano", this.onFiveWantsMoveToPano), this.five.off("wantsTapGesture", this.onFiveWantsTapGesture), this.five.off("initAnimationEnded", this.onFiveInitAnimationEnded), this.video.removeEventListener("canplaythrough", this.onVideoDataLoaded), this.video.removeEventListener("playing", this.onVideoPlaying), this.video.removeEventListener("pause", this.onVideoPaused);
  }
  /** 如果满足 mount 条件，mount */
  mountIfNeeded() {
    const t = this.five.getCurrentState();
    t.mode === "Panorama" && t.panoIndex === this.panoIndex && this.enabled && this.mount();
  }
  /** 挂载：加载视频资源；添加模型。 */
  mount() {
    if (this.disposed)
      return this.logWarning("插件已经销毁，无法挂载。");
    if (this.url === "")
      return this.logWarning("视频资源不存在。");
    this.video.src !== this.url && (this.video.src = this.url), this.video.paused && this.video.play().catch((t) => {
      this.logWarning(t instanceof Error ? t.message : "视频播放失败。"), this.five.once("gesture", () => {
        this.video.play().catch((e) => {
          this.logWarning(e instanceof Error ? e.message : "自动播放视频失败。");
        });
      });
    });
  }
  /** 卸载：销毁视频资源；移除模型。 */
  unmount() {
    this.video.pause(), this.videoMesh.material.uniforms.opacity.value = 0, this.video.src !== "" && (this.video.src = ""), this.five.scene.remove(this.videoMesh);
  }
  /** 暂停视频，去除模型。 */
  hide() {
    this.video.pause(), this.videoMesh.material.uniforms.opacity.value = 0, this.five.scene.remove(this.videoMesh);
  }
  /** 控制台打印警告 */
  logWarning(t) {
    console.warn("⛔ ==> [VideoMeshController]:", t);
  }
  /** 检测射线与模型的交点是不是在视频的范围内 */
  checkIntersectionInBounding(t, e) {
    if (!e.uv)
      return !1;
    const [i, s] = e.uv.toArray(), [r, o, a, l] = t, c = 1 - o - l, h = r + a, d = c + l;
    return i >= r && i <= h && s >= c && s <= d;
  }
}
class P6 extends rs {
  constructor(e) {
    super(e);
    u(this, "controllerMap", /* @__PURE__ */ new Map());
    u(this, "data");
    u(this, "enabled", !0);
    u(this, "_disposed", !1);
  }
  /** 插件 State */
  get state() {
    return {
      enabled: this.enabled
    };
  }
  /** 插件是否已被销毁 */
  get disposed() {
    return this._disposed;
  }
  /** 加载点位视频数据，加载数据并不代表会加载点位视频。 */
  load(e, i) {
    var s;
    if (this.disposed)
      return this.logWarning("插件已被销毁");
    typeof ((s = i == null ? void 0 : i.initialState) == null ? void 0 : s.enabled) != "undefined" && i.initialState.enabled !== this.enabled && (i.initialState.enabled ? this.enable() : this.disable()), e.list.forEach((r) => {
      const o = r.pano_index, a = r.render_id;
      r.video_list.forEach((l) => {
        this.controllerMap.set(
          l.render_id,
          new Qm(this.five, de(_({}, l), {
            fiveUtil: this.fiveUtil,
            panoIndex: o,
            renderID: a,
            hooks: this.hooks,
            initialState: { enabled: this.enabled }
          }))
        );
      });
    }), this.data = e, this.hooks.emit("dataLoaded", e);
  }
  /** 开启插件功能。 */
  enable(e) {
    var s;
    if (this.disposed)
      return this.logWarning("插件已被销毁");
    if (this.enabled)
      return;
    this.enabled = !0, Array.from(this.controllerMap.values()).forEach((r) => r.enable());
    const i = (s = e == null ? void 0 : e.userAction) != null ? s : !0;
    this.hooks.emit("enable", { userAction: i });
  }
  /** 禁用插件功能。 */
  disable(e) {
    var s;
    if (this.disposed)
      return this.logWarning("插件已被销毁");
    if (!this.enabled)
      return;
    this.enabled = !1, Array.from(this.controllerMap.values()).forEach((r) => r.disable());
    const i = (s = e == null ? void 0 : e.userAction) != null ? s : !0;
    this.hooks.emit("disable", { userAction: i });
  }
  /** 看向某个视频。
   * - 会自动切换到全景模式。
   * - 如果遇到不能自动播放的问题，需要放到用户交互事件中调用。
   */
  lookAtVideoItemByRenderID(e) {
    if (this.disposed)
      return this.logWarning("插件已被销毁");
    const i = this.controllerMap.get(e);
    if (!i)
      return this.logWarning(`ID 为 ${e} 的点位视频不存在`);
    i.lookAtVideo();
  }
  /**
   * 取消静音。
   *
   * 大部分浏览器需要用户交互后才能开启视频声音。
   *
   * 如果需要取消静音，建议在用户交互事件中调用本方法。
   *
   * 例如:
   *
   * ```jsx
   * onClick={() => {
   *  panoVideoPluginController.lookAtVideoItemByRenderID('xxx')
   *  panoVideoPluginController.unmuteByRenderID('xxx')
   * }}
   * ```
   */
  unmuteByRenderID(e) {
    if (this.disposed)
      return this.logWarning("插件已被销毁");
    const i = this.controllerMap.get(e);
    if (!i)
      return this.logWarning(`ID 为 ${e} 的点位视频不存在`);
    i.unmute();
  }
  /** 为一个点位添加视频（可以是多条）。 */
  add(e, i) {
    if (this.disposed)
      return this.logWarning("插件已被销毁");
    i.forEach((s) => {
      if (this.controllerMap.get(s.render_id))
        return this.logWarning(`ID 为 ${s.render_id} 的点位视频已存在`);
      const r = s.render_id;
      this.controllerMap.set(
        s.render_id,
        new Qm(this.five, de(_({}, s), {
          fiveUtil: this.fiveUtil,
          panoIndex: e,
          renderID: r,
          hooks: this.hooks,
          initialState: { enabled: this.enabled }
        }))
      );
    });
  }
  /** 根据 VideoItem render_id 删除某个视频。 */
  removeByRenderID(e) {
    if (this.disposed)
      return this.logWarning("插件已被销毁");
    const i = this.controllerMap.get(e);
    if (!i)
      return this.logWarning(`ID 为 ${e} 的点位视频不存在`);
    i.dispose(), this.controllerMap.delete(e);
  }
  /** 清空现有数据 */
  clear() {
    if (this.disposed)
      return this.logWarning("插件已被销毁");
    Array.from(this.controllerMap.values()).forEach((e) => e.dispose()), this.controllerMap.clear();
  }
  /** 销毁插件 */
  dispose() {
    if (this.disposed)
      return this.logWarning("插件已被销毁");
    this._disposed = !0, Array.from(this.controllerMap.values()).forEach((e) => e.dispose()), this.controllerMap.clear();
  }
  /** 控制台打印警告 */
  // TODO: 全局函数 curry 化
  logWarning(e) {
    console.warn("⛔ ==> [PanoVideoPluginController]:", e);
  }
}
const jD = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null
}, Symbol.toStringTag, { value: "Module" })), RD = (n) => new P6(n);
function q1(n) {
  const t = /* @__PURE__ */ new Map();
  return n.forEach((e) => e.pipes.forEach((i) => t.set(i.id, i))), Array.from(t.values());
}
function C6(n) {
  const t = n.target.map(({ startLibraryID: e, endLibraryID: i }) => {
    const s = n.data.pipelines.find(
      (r) => r.startLibraryID === e && r.endLibraryID === i
    );
    return s || console.warn(`Cannot find pipeline with startLibraryID ${e} and endLibraryID ${i}`), s;
  }).filter(_e);
  return q1(t);
}
function I6(n) {
  if (n.quality === 0)
    return "//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/1.png";
  if (n.quality === 1)
    return "//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/2.png";
  if (n.quality === 2)
    return "//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/3.png";
  if (n.quality === 3)
    return "//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/4.png";
  if (n.quality === 4)
    return "//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/5.png";
  if (n.isHot)
    return "//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/6.png";
}
function E6(n, t) {
  const e = n.ConnectsDataset.map((s) => {
    const r = s.data, o = s.start, a = s.end, l = { isHot: s.waterType === 5, quality: s.waterType }, c = r.map((h) => {
      const d = n.LinesDataset.find((m) => m.id === h);
      if (!d)
        return null;
      const f = d.data, g = t != null && t.getPipeRadius ? t.getPipeRadius(d) : 1.6 / 100, p = t != null && t.getPipeUrl ? t.getPipeUrl(l) : I6(l);
      return { id: d.id, radius: g, water: l, path: f, texture: p };
    }).filter(_e);
    return { startLibraryID: o, endLibraryID: a, pipes: c };
  });
  return { pipes: q1(e), pipelines: e };
}
function M6(n, t) {
  const e = 1 - n;
  return e * e * t;
}
function k6(n, t) {
  return 2 * (1 - n) * n * t;
}
function x6(n, t) {
  return n * n * t;
}
function pc(n, t, e, i) {
  return M6(n, t) + k6(n, e) + x6(n, i);
}
function D6(n, t) {
  const e = 1 - n;
  return e * e * e * t;
}
function S6(n, t) {
  const e = 1 - n;
  return 3 * e * e * n * t;
}
function T6(n, t) {
  return 3 * (1 - n) * n * n * t;
}
function L6(n, t) {
  return n * n * n * t;
}
function mc(n, t, e, i, s) {
  return D6(n, t) + S6(n, e) + T6(n, i) + L6(n, s);
}
function eh(n, t) {
  const e = t.length - 1;
  if (e < 1)
    throw new Error("length of points must greater than 2");
  if (e === 2)
    return new P.Vector3(
      pc(n, t[0].x, t[1].x, t[2].x),
      pc(n, t[0].y, t[1].y, t[2].y),
      pc(n, t[0].z, t[1].z, t[2].z)
    );
  if (e === 3)
    return new P.Vector3(
      mc(n, t[0].x, t[1].x, t[2].x, t[3].x),
      mc(n, t[0].y, t[1].y, t[2].y, t[3].y),
      mc(n, t[0].z, t[1].z, t[2].z, t[3].z)
    );
  if (e === 1) {
    const [s, r] = t;
    return s.clone().add(r.clone().sub(s).multiplyScalar(n));
  }
  const i = [];
  return t.reduce((s, r) => (i.push(eh(n, [s, r])), r)), eh(n, i);
}
class z6 extends P.Curve {
  constructor(e = []) {
    super();
    u(this, "type");
    u(this, "controlPoints");
    this.type = "CustomBezierCurve3", this.controlPoints = e;
  }
  getPoint(e, i = new P.Vector3()) {
    const s = i, r = eh(e, this.controlPoints);
    return s.copy(r), s;
  }
  copy(e) {
    return super.copy(e), this.controlPoints = e.controlPoints.map((i) => i.clone()), this;
  }
  toJSON() {
    const e = super.toJSON(), i = this.controlPoints.map((r) => r.toArray());
    return Object.assign(e, { controlPoints: i });
  }
  fromJSON(e) {
    return super.fromJSON(e), this.controlPoints = e.controlPoints.map((i) => new P.Vector3().fromArray(i)), this;
  }
}
const O6 = (
  /* glsl */
  `
  varying vec2 vUv;
  void main() {
    vUv = uv; 
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`
), j6 = (
  /* glsl */
  `
  varying vec2 vUv;
  uniform float uOffset;
  uniform float vOffset;
  uniform float opacity;
  uniform mediump sampler2D envMap;

  void main(){
    float u = vUv.x + uOffset;
    float v = vUv.y + vOffset;
    vec2 uv = vec2(u, v);
    gl_FragColor = texture2D(envMap, uv);
    gl_FragColor.a = gl_FragColor.a * opacity;
  }
`
);
class hr extends P.Mesh {
  constructor(e, i = j6) {
    super();
    u(this, "geometryConfig", {
      radius: 1.5 / 100,
      tubularSegments: 20,
      radialSegments: 8
    });
    u(this, "customID");
    u(this, "path");
    u(this, "pathLength", 0);
    u(this, "pathPoints");
    u(this, "texture");
    u(this, "opacityAnime");
    /** u / m: 每米水管对应到贴图上，应该对应的 u 的长度 */
    u(this, "uPreMeter", 1);
    e.geometryConfig && (this.geometryConfig = _(_({}, this.geometryConfig), e.geometryConfig)), this.customID = e.id || this.uuid, this.pathPoints = e.path, this.path = hr.calculatePath(e.path.map((l) => new P.Vector3().fromArray(l))), this.pathLength = this.path.getLength(), this.texture = hr.formatTexture(e.texture);
    const { radius: s, tubularSegments: r, radialSegments: o } = this.geometryConfig, a = hr.formatTexture(e.texture);
    this.geometry = hr.formatGeometryUV(
      new P.TubeBufferGeometry(this.path, r, s, o),
      this.pathLength,
      this.uPreMeter
    ), this.material = new P.ShaderMaterial({
      uniforms: {
        opacity: { value: 1 },
        uOffset: { value: 0 },
        vOffset: { value: 0 },
        envMap: {
          value: a
        }
      },
      transparent: !0,
      vertexShader: O6,
      fragmentShader: i
    });
  }
  /** 根据控制点数量计算管道路径
   *
   * @description 两个控制点使用直线路径，多个控制点使用贝塞尔路径
   */
  static calculatePath(e) {
    return e.length === 2 ? new P.LineCurve3(e[0], e[1]) : new z6(e);
  }
  static formatGeometryUV(e, i, s) {
    const r = e.getAttribute("uv");
    for (let o = 0; o < r.count; o++) {
      const a = r.getX(o) * i * s;
      r.setX(o, a);
    }
    return e;
  }
  /**
   * 管道的 Texture 需要满足一定的要求，需要使用 formatTexture 先 format
   */
  static formatTexture(e) {
    return e.wrapS = P.RepeatWrapping, e.wrapT = P.RepeatWrapping, e;
  }
  hide(e) {
    return $(this, null, function* () {
      var r;
      (r = this.opacityAnime) == null || r.dispose();
      const i = 0;
      if (typeof (e == null ? void 0 : e.duration) != "number")
        return this.setOpacity(i);
      const s = this.material.uniforms.opacity.value;
      return s === i ? !0 : new Promise((o) => {
        this.opacityAnime = new Ds({ progress: s }).to({ progress: i }).onUpdate(({ progress: a }) => this.setOpacity(a)).onComplete(() => o(!0)).onDispose(() => {
          this.setOpacity(i), o(!1);
        }).play();
      });
    });
  }
  show(e) {
    return $(this, null, function* () {
      var r;
      (r = this.opacityAnime) == null || r.dispose();
      const i = 1;
      if (typeof (e == null ? void 0 : e.duration) != "number")
        return this.setOpacity(i);
      const s = this.material.uniforms.opacity.value;
      return new Promise((o) => {
        this.opacityAnime = new Ds({ progress: s }).to({ progress: i }).onUpdate(({ progress: a }) => this.setOpacity(a)).onComplete(() => o(!0)).onDispose(() => {
          this.setOpacity(i), o(!1);
        }).play();
      });
    });
  }
  setOpacity(e) {
    return this.material.uniforms.opacity.value = e, this.material.needsUpdate = !0, this.needsRender = !0, !0;
  }
  disposeAnime() {
    var e;
    (e = this.opacityAnime) == null || e.dispose(), this.opacityAnime = void 0;
  }
  dispose() {
    this.disposeAnime(), this.geometry.dispose(), this.material.dispose();
  }
}
const R6 = (
  /* glsl */
  `
  varying vec2 vUv;
  uniform float uOffset;
  uniform float vOffset;
  uniform float opacity;
  uniform mediump sampler2D envMap;

  void main(){
    // u > 0 时，不显示。即贴图不向前移动时，全部使用 u = 0 的值进行平铺
    float u = min(vUv.x + uOffset, 0.0);
    float v = vUv.y + vOffset;
    vec2 uv = vec2(u, v);
    gl_FragColor = texture2D(envMap, uv);
    gl_FragColor.a = gl_FragColor.a * opacity;
  }
`
);
class B6 extends hr {
  constructor(e) {
    super(e, R6);
    /** 初始状态下，当前水管内的水流在整体管道上的位移
     * @description 因为水管是不连续的，而要达到水流的连续效果，需要用过贴图的 uOffset 控制每根水管的初始状态
     */
    u(this, "initialDisplacement", 0);
    u(this, "oldTime", (/* @__PURE__ */ new Date()).getTime());
    /** 横向流动速度：m / s */
    u(this, "flowSpeed", 0.6);
    /** 纵向旋转速度：deg / s */
    u(this, "rotateSpeed", 0);
    u(this, "flowAnimationDisposer", () => {
    });
  }
  setInitialDisplacement(e, i = "backward") {
    this.initialDisplacement = Math.abs(e) * (i === "forward" ? -1 : 1), this.moveFromOrigin(this.initialDisplacement);
  }
  /** 水流移动「基于初始位置」
   * @description 因为贴图的运动与 u 的 uOffset 相反，比较反直觉，所以封装方法易于理解
   * @param displacement 位移：米 * 方向(向前 -> 正, 向后 -> 负)
   */
  moveFromOrigin(e) {
    const i = e * this.uPreMeter;
    return this.material.uniforms.uOffset.value = i, this.material.needsUpdate = !0, this.needsRender = !0, !0;
  }
  /** 水流移动「基于调整管道差值之后的位置」
   *
   * @param distance 位移：米 * 方向
   */
  moveForwardFromInitialOffset(e) {
    const i = e * -1, s = this.initialDisplacement + i;
    this.moveFromOrigin(s);
  }
  flow() {
    this.flowAnimationDisposer(), this.oldTime = (/* @__PURE__ */ new Date()).getTime();
    let e = 0, i = 0;
    const s = jr(() => {
      const r = (/* @__PURE__ */ new Date()).getTime(), o = r - this.oldTime, a = this.flowSpeed * (o / 1e3), l = this.rotateSpeed * (o / 1e3);
      e = e + a, i = i + l;
      const c = 1 / 360, h = i * c;
      this.material.uniforms.vOffset.value = h, this.moveForwardFromInitialOffset(e), this.oldTime = r;
    });
    this.flowAnimationDisposer = function() {
      s(), this.moveForwardFromInitialOffset(0);
    };
  }
  stopFlow() {
    this.flowAnimationDisposer();
  }
  setSpeed(e) {
    typeof (e == null ? void 0 : e.flowSpeed) == "number" && (this.flowSpeed = e.flowSpeed), typeof (e == null ? void 0 : e.rotateSpeed) == "number" && (this.rotateSpeed = e.rotateSpeed);
  }
  disposeAnime() {
    super.disposeAnime(), this.flowAnimationDisposer();
  }
}
const Um = { flowSpeed: 0.6, rotateSpeed: 0 };
let V6 = class extends Pn {
  constructor(e) {
    super(e);
    // ==================== public properties ====================
    u(this, "data");
    /** 插件状态
     * @property `visible` `<boolean>` 是否可见
     * @property `enabled` `<boolean>` 是否启用
     * @property `visiblePipeIDs` `<string[]>` 可见的管道 ID
     * @property `speed` `<Speed>` 水流速度
     * @property `speed.flowSpeed` `<number>` 横向流动速度，默认是 0.6 m/s
     * @property `speed.rotateSpeed` `<number>` 纵向旋转速度：默认是 0 deg/s
     */
    u(this, "state");
    /** 当前插件所有新增 THREE 相关副作用都在 group 下 */
    u(this, "group");
    /** 用于展示水流的水管 */
    u(this, "pipeObjects", []);
    // ==================== private properties ====================
    /** 水管贴图缓存 */
    u(this, "texturePromiseCache", /* @__PURE__ */ new Map());
    /** 销毁插件，移除所有副作用，销毁后将不响应任何 API */
    u(this, "dispose", () => {
      this.disable(), this.five.scene.remove(this.group), this.texturePromiseCache.forEach((e) => e.then((i) => i.dispose())), this.texturePromiseCache.clear();
    });
    u(this, "onWantsFiveTapGesture", (...e) => {
      const [i] = e, s = i.intersectObjects(this.pipeObjects, !1);
      if (s.length === 0 || !this.data)
        return;
      const a = s[0].object.customID, l = this.data.pipes.find(({ id: h }) => h === a), c = this.data.pipelines.find((h) => l && h.pipes.includes(l));
      if (!(!l || !c))
        return this.hooks.emit("tap", {
          intersectObjects: s,
          pipe: l,
          pipeline: c,
          wantsFiveTapGestureParams: e
        }), !1;
    });
    this.state = {
      target: null,
      visible: !0,
      enabled: !0,
      isFlowing: !1,
      speed: Um
    }, this.five = e, this.group = new P.Group(), this.group.name = "water-pipe-group", this.five.scene.add(this.group), this.five.once("dispose", this.dispose), this.five.on("wantsTapGesture", this.onWantsFiveTapGesture);
  }
  /** 加载管道数据，重复调用会使用新数据覆盖旧数据
   * @param `data` `<Plugin.ServerData>` Open API 接口返回的数据。
   * @param `initialState` `<Plugin.State> | <undefined>` 数据加载后，要应用的 state，默认是 undefined。
   * @param `userAction` `<boolean> | <undefined>` 是否是用户操作，默认是 true。
   * @param `options` `<Plugin.LoadOptions> | <undefined>` 数据加载配置项。
   * @param `options.getPipeRadius` `<(pipe: ServerData.LinesDataset) => number> | <undefined>` 允许用户通过函数自定义管道半径。
   * @param `options.getPipeUrl` `<(water: Water) => string> | <undefined>` 允许用户通过函数自定义管道贴图，
   * 函数返回的 string 就是当前 water 对应的贴图地址。
   */
  // eslint-disable-next-line max-params
  load(e, i, s, r) {
    return $(this, null, function* () {
      const o = this.data;
      this.data = yield this.formatData(e, r), this.removeAllPipes(), this.hooks.emit("dataChange", this.data, o), this.pipeObjects = yield Promise.all(
        this.data.pipes.filter((a) => !!(a != null && a.texture)).map((d) => $(this, [d], function* ({ id: a, texture: l, path: c, radius: h }) {
          const f = yield this.loadPipeTexture(l), g = { id: a, path: c, textureURL: l, texture: f, geometryConfig: { radius: h } };
          return new B6(g);
        }))
      ), this.data.pipelines.forEach((a) => {
        a.pipes.reduce((l, c) => {
          const h = this.findPipeObjectWithID(c.id);
          return h == null || h.setInitialDisplacement(l), l + ((h == null ? void 0 : h.pathLength) || 0);
        }, 0);
      }), this.hooks.emit("dataLoaded", this.data), this.state.visible === !1 && this.pipeObjects.forEach((a) => a.setOpacity(0)), this.state.enabled && (this.group.add(...this.pipeObjects), this.five.needsRender = !0), i && this.setState(i, { userAction: s });
    });
  }
  /** 更改插件 State
   * @param `state` `<Partial<Plugin.State>>` 插件属性 `state` 的子集。
   * @param `options` `<Option> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  setState(e, i = {}) {
    const s = this.state;
    if (Qt(e, s, { deep: !0 }))
      return;
    const r = i.userAction !== void 0 ? i.userAction : !0;
    if (this.updateState(e, r), e.enabled !== void 0 && s.enabled !== e.enabled && (e.enabled ? this._enable({ userAction: r }) : this._disable({ userAction: r })), e.visible !== void 0 && s.visible !== e.visible) {
      const o = { userAction: r, anime: { duration: 500 } };
      e.visible ? this._show(o) : this._hide(o);
    }
    if (e.isFlowing !== void 0 && s.isFlowing !== e.isFlowing && (e.isFlowing ? this._flow() : this._stopFlow()), e.speed !== void 0 && !Qt(s.speed, this.state.speed, { deep: !0 }) && this._setSpeed(e.speed), e.target !== void 0 && !Qt(s.target, this.state.target, { deep: !0 })) {
      const o = {
        target: e.target,
        showAnime: { duration: 500 },
        hideAnime: { duration: 500 }
      };
      this._switchPipelines(o);
    }
  }
  /** 启用插件
   * @param `options` `<Option> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  enable(e = {}) {
    var s;
    if (this.state.enabled)
      return;
    const i = (s = e.userAction) != null ? s : !0;
    this.updateState({ enabled: !0 }, i), this._enable({ userAction: i });
  }
  /** 禁用插件
   * @param `options` `<Option> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  disable(e = {}) {
    var s;
    if (this.state.enabled === !1)
      return;
    const i = (s = e.userAction) != null ? s : !0;
    this.updateState({ enabled: !1, isFlowing: !1 }, i), this._disable({ userAction: i });
  }
  /** 展示管道模型，注意如果通过 `switchPipelines` 更改过 `visibleIDs`，则只会展示这一部分模型。
   * @param `options` `<Partial<ShowHideOptions>> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   * @param `options.anime` `<AnimeOptions> | <undefined>` 动画配置。
   * @param `options.anime.duration` `<number> | <undefined>` 动画时间，默认是 500ms。
   */
  show() {
    return $(this, arguments, function* (e = {}) {
      if (this.state.visible)
        return;
      const i = _({
        userAction: !0,
        anime: { duration: 500 }
      }, e);
      this.updateState({ visible: !0 }, i.userAction), yield this._show(i);
    });
  }
  /** 插件内容整体隐藏
   * @param `options` `<Partial<ShowHideOptions>> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   * @param `options.anime` `<AnimeOptions> | <undefined>` 动画配置。
   * @param `options.anime.duration` `<number> | <undefined>` 动画时间，默认是 500ms。
   */
  hide() {
    return $(this, arguments, function* (e = {}) {
      if (this.state.visible === !1)
        return;
      const i = _({
        userAction: !0,
        anime: { duration: 500 }
      }, e);
      this.updateState({ visible: !1 }, i.userAction), yield this._hide(i);
    });
  }
  /** 切换管路
   * @param `options` `Partial<ShowPipelinesOptions> | <undefined>`
   * @param `options.target` `<{ startLibraryID: number; endLibraryID: number }[]> | <undefined>`
   * 目标管路，存在时，展示目标管路包含的管道，同时隐藏其他管道。不存在则展示所有管道。
   * startLibraryID 和 endLibraryID 是起始和结束的设备 ID。
   * @param `options.showAnime` `<AnimeOptions> | <undefined>` 展示的动画配置。
   * @param `options.hideAnime` `<AnimeOptions> | <undefined>` 隐藏的动画配置。
   * @param `options.anime` `<AnimeOptions> | <undefined>` 兜底的动画配置。
   * @param `options.userAction` `<boolean> | <undefined>` 是否是否是用户操作。
   * */
  switchPipelines(e) {
    return $(this, null, function* () {
      var c, h, d, f, g, p;
      if (!this.data)
        return;
      const i = (c = e == null ? void 0 : e.target) != null ? c : null, s = (h = e == null ? void 0 : e.userAction) != null ? h : !0;
      this.updateState({ target: i }, s);
      const r = { duration: 500 }, o = (f = (d = e == null ? void 0 : e.hideAnime) != null ? d : e == null ? void 0 : e.anime) != null ? f : r, a = (p = (g = e == null ? void 0 : e.showAnime) != null ? g : e == null ? void 0 : e.anime) != null ? p : r, l = {
        target: i,
        showAnime: a,
        hideAnime: o
      };
      this._switchPipelines(l);
    });
  }
  /** 开始流动 */
  flow(e = {}) {
    var s;
    if (this.state.isFlowing)
      return;
    const i = (s = e.userAction) != null ? s : !0;
    this.updateState({ isFlowing: !0 }, i), this._flow();
  }
  /** 停止流动 */
  stopFlow(e = {}) {
    var s;
    if (this.state.isFlowing === !1)
      return;
    const i = (s = e.userAction) != null ? s : !0;
    this.updateState({ isFlowing: !1 }, i), this._stopFlow();
  }
  /** 更改水管流速
   * @param `options` `<SetSpeedOptions> | <undefined>`
   * @param `options.speed` `<Speed> | <undefined>` 参考 `state.speed` 的描述。
   * @param `options.userAction` `<boolean> | <undefined>` 是否是否是用户操作。
   */
  setSpeed(e) {
    var r, o;
    const i = (r = e == null ? void 0 : e.speed) != null ? r : Um, s = (o = e.userAction) != null ? o : !0;
    this.updateState({ speed: i }, s), this._setSpeed(i);
  }
  formatData(e, i) {
    return $(this, null, function* () {
      return E6(e, i);
    });
  }
  _enable(e) {
    this.hooks.emit("enable", { userAction: e.userAction }), this.five.scene.add(this.group), this.five.needsRender = !0, this.five.on("wantsTapGesture", this.onWantsFiveTapGesture);
  }
  _disable(e) {
    this.hooks.emit("disable", { userAction: e.userAction }), this.disposeAnime(), this.five.scene.remove(this.group), this.five.needsRender = !0, this.five.off("wantsTapGesture", this.onWantsFiveTapGesture);
  }
  _show(e) {
    return $(this, null, function* () {
      var r;
      this.hooks.emit("show", { userAction: e.userAction });
      const i = (r = e == null ? void 0 : e.anime) != null ? r : { duration: 500 }, s = this.findPipeObjectWithTarget(this.state.target);
      yield Promise.all(s.map((o) => o == null ? void 0 : o.show(i))), this.five.needsRender = !0;
    });
  }
  _hide(e) {
    return $(this, null, function* () {
      var s;
      this.hooks.emit("hide", { userAction: e.userAction });
      const i = (s = e == null ? void 0 : e.anime) != null ? s : { duration: 500 };
      yield Promise.all(this.pipeObjects.map((r) => r.hide(i))), this.five.needsRender = !0;
    });
  }
  _switchPipelines(e) {
    return $(this, null, function* () {
      if (!this.data)
        return;
      const i = this.findPipeObjectWithTarget(e.target), s = e.hideAnime;
      yield Promise.all(this.pipeObjects.map((o) => o.hide(s)));
      const r = e.showAnime;
      yield Promise.all(i.map((o) => o.show(r)));
    });
  }
  _flow() {
    this.pipeObjects.forEach((e) => e.flow());
  }
  _stopFlow() {
    this.pipeObjects.forEach((e) => e.stopFlow());
  }
  _setSpeed(e) {
    this.pipeObjects.forEach((i) => i.setSpeed(e));
  }
  updateState(e, i) {
    const s = this.state;
    this.state = _(_({}, this.state), e), this.hooks.emit("stateChange", { state: this.state, prevState: s, userAction: i });
  }
  /** 加载管道贴图，如果再加载中，复用之前的加载 Promise */
  loadPipeTexture(e) {
    return $(this, null, function* () {
      const i = this.texturePromiseCache.get(e);
      if (i)
        return i;
      const s = Es(e);
      return this.texturePromiseCache.set(e, s), s;
    });
  }
  /** 销毁所有动画 */
  disposeAnime() {
    this.pipeObjects.forEach((e) => e.disposeAnime()), this.five.needsRender = !0;
  }
  /** 移除所有管道模型 */
  removeAllPipes() {
    this.disposeAnime(), this.group.remove(...this.pipeObjects), this.pipeObjects.forEach((e) => e.dispose()), this.pipeObjects = [], this.five.needsRender = !0;
  }
  /** 根据 ID 查找管道模型 */
  findPipeObjectWithID(e) {
    return this.pipeObjects.find(({ customID: i }) => i === e);
  }
  /** 根据 target 查找管道模型 */
  findPipeObjectWithTarget(e) {
    return e ? C6({ data: this.data, target: e }).map(({ id: s }) => this.findPipeObjectWithID(s)).filter(_e) : this.pipeObjects;
  }
};
const VD = (n) => new V6(n), _6 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAA8CAYAAACZ1L+0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAYKADAAQAAAABAAAAPAAAAABU0H2EAAARRElEQVR4Ad2czY9cRZbFq1yFoQGDNCzwuAENohl54dkgdrNh34tZ8GciFi31nwEsmAEhhAWD1GMJCZgx5sMfUHN+J+NE3XfrZWWVcVVLHVLmuXG/74148V5m2bm/N8bR0dH+Bx988Po333zzbz///PONg4ODa+I9I9y/cuXKgV77h4eH+1KH3hP/yv7+vuBAsG+5UCIpCkMzDQ962Eu80Q1P/KmHT82v8IocZFL4pslDvL3fNARHoPI2wtbrV1jBIf9N8SEZ0UUP2wFHv2ocSc/2ouEz8PVooJXQ0/j10aNHoH2Idj4PHz4k1n29/k+5/u3ll1/+r7fffvtLzfGzd8ibjK6+9957f5ajf1XzH9y7d+8Xjf9FRs1SdvNBBg2SDQ1xh9ALH4yN0M2BNZrKwtFc9Fmkquuma5HJBzvLiIONBnx40B7QIzTdxCcNwj3dYlEoUmabAU+UFZDpxah22Ng2NjQXH0LrwccGwyEzXfWhWQwSYQHYuFevXj14/vnn37h79+7Nr7766gup/FX5PnAj33///f/46aef3vj444/vfPbZZz9IYGMcnDbkhEYQL001Hfsu775i+7j6LID6cDQWYo8mabGMxOr+e/ye3y7989p3/9jfvHnz2q1bt25oMb549913/3Lwzjvv/Mu3337775988smdzz///AcVQ+IecsAOp8OOHRpkiJniWQnrBJmwc7EF8atxBA2ihx/obf7Qqa+un+aDI0f7k08nU+PLj3PBR+qpcvFdd3BNP7YgI7mnHqHzBRndv1hH33///QNtlAcvvfTSq999992dQzFu/vjjj/c//fTTu1z+unT2wDFoHN13QbVg5CQS3tBfQGwHoo+chltPto4FMsR3nKCZ7a3KyDM+UOOyHzV4xxAHOTjGqfVcVv23b9++++abb/4TvT+8f//+dS3ALzqj3MxgMq6IjAUC4as4CrbdmLtA8S2vttA0D5vSxNBnOvLwK1vO4K3+FSY+Z/Ol71RiC8JI7iBzcrus+nWfvf/iiy/+86Eux2u6JO6RQBoTFCvFOGEKkcyFRZ+kt+kP/pRHF9xiD3uOrs8OFW9eoaFBxorcsfGDvOdTeJCRTxQruT/x+rXxH6nvzx1qRx+I4FHJQZxJeat8CqCY0vCarG+AnK86++whdDlzeQrZKieWhmCTC3GgEy+x01DiKHfuK6vxYhfcYj/zKWVPMrnAwE98RCG+mZPHafVVOX71hPRUHkOpnMe9+SSBQ5wpgJF5mlGTgp+R5oHwhj/7Za7kzQMZ8RPsBaZYEH3k6KbotfySQ/Tjg7lsXQ/IQFc5Chb5zgUR/8LqJyi99QJA0CySFc4znUTFm3d2Cq8FuYryFhk42HLh3bz1zI4N+qGLvXkJMXKcDer6yE+7IuInuObvMusn/iHNz4DBqoMM0W4gyJxmsgijqSfkyNALdv3YRl51oXfFP4u+fCjd43xTQ/wLtx5Zu+L3euI78VJXsOvX+hXrijbL3qEIP1lEObuKhENnR+IgvDU5vD7wGx4Fyn4ucHzFfy8I2/Dio2JkIPyu3+XEp2iQ0ePvqm+X3E7b27b64ZPHYRrCE0R/jq68kfB80mBOQhWhTxu9YHTTfOi+QGLZf7Dbd/3UAjK6PDwL9dafmi6zfm0Ob8xDVkIJs7O5ErxDQQaFhMdctHVB5o8xfLXJzo0dC1wfKxefK1b8L+xHHuGhHjobgzzDO+Fu1Dw/V6RWkHGR9avv5LW5CRNs7Aaf8Qq82mAZUNh8CkEPXvRDDz3cLob4zB0YAjvF3Wrf/fcdK3nyxt2k0WNoR/MlopG54i820Iq/RT3Y1DHqemL1cxX4JkxiXAkECBK4N6Ams0ZjCz+Y8xZkcCSEx3xXPOTJAf3kFv/dfkWOja9i7ImvMW/ChXbe3V9igxjuGskrmFrX6lcsP+FwBPn40WJAsihGgvWEkIe3JpetiwUZTz31lBsOMihE9NzxZpY3GoTtaNSk40/ooyXY84UfHm57fHjKH/DoDYotiEJqBZnDD29NTp74Bxk9fq8f3XwOIHM7z6rbw+bNwcc8tDG6YNGvpNxu/xwwZPOKobj4xEnobf536cvOVwDI6PrJLXl0uY3U94FA6CdSvxbKR5C3DcFJJFiCTrLvmJ4w9hr2g5Fo72aQgX7Fy9ZX7Bw/Z9rh5FrHk6yfJnGlH1+PilQbVOkkUXnQNDAIjV4wNhUjA3nFFqx05B2zuGClo9fj4xNe/IcG18Yu/S6vNUDjM7jmPzJwvPb5HCB6NoTLnoRjn0e41UuOhKTvRsagouSLpw49lXAu8ue6qjbpWuBkniScC2zyrPn253hkqs06Q3+Rb3IH1/yJd6H1c0XxFDSPIAVMM50QSdXRG4St5EmSQk2D1S70sE8MGriwj942PK//7mclXnJPvsntwuvX8cPfyTdfRSRRGqQifckO3lkSig4moV1Ab3iX94aOZ/bFB7ORk/2tPLfPZ/+R7wJoeGIg6PmkVjDy8Mxo9QzehO5PgvPUzx/19w71xqOhX3jm0akOjqfM04wR2OxKR28bsuLckEGGbH1EgAwVf64PZvgh/23+5JIdjuvVI7Q/JqJ4WfVrM/km7A9iKtw3tVHQbBDNogCQwWJoLjheFAvGW2QgrNGYc/09IDGwD5143f9afuJJfZNfaDD5YJMFgy9acCxnVxb5hdVPUNWz+RxAQF7sQKFvVKMBvoGpIKa+hNFJg80sb5GBg51mbBwUXUj8xIZ56GLvRUDGGDnOBj2G/vSxzd8l1/+P9/cAdn92dF8gFrAeWdLzgoBZkPCY46f6g85VuCbPxgx2/diCel1Rfnv+KgLFKCdpAoQG1wJikySRrw10wt+1g+MLxGaX/136tWD8Sf/EkRIfyNFPzcxDX0T9o9/H34YmYMXxVMKNEbaPIyVpNGPc3ESvHjFDZ0IvCEGKg+4LJFb8Grt915d8+tjiD/YcXT+5BC+yfi28Nyb/LKV+DpjJQZBgbbjoxWMdH6hGkrYLnQVbONtM+nP3QgX/YkRnIRuTyLwgK/qnynu+sl/s+B7wIuvXFeAa+JOkdw1NY+WTVE+GueQuEGQuGy8IyBxbaJB5H6MgirZIeosFHXbTXnqLfEaO9XPCqZ8DkmdwJd+5yUiox1vJ/4nXf66/B+xqAOcaSQfzSAcy1OBFwbsajjxNwT40OPwt5OJl8SxHpw42m8b83FDo6Y/cR14n4j3J+hWDmJvvglTQiS+3yJREakKhwTU5x5ps5ueG0CADu3Hi2R59mgIyQo9GmR8ecvKpuCsfdOsgTnKq/NA9P+IlBjqhQeZd3v0nFsjATkOw+YM8vMXfAyIEEVK8du/8ICVWjhZj35HY1NH9VRl0CglSUHwiDw0y7+NJ6/d8L7p+5X/y7wFJgmI5OrjscoTsagCNrPaiafLc4bI/1wLSYGIG1/yfdoX0BcxCBvsCdv8XWb9iubbN8+XoLAkRNAWLnfMwRwZ2bjIm0OiCw8Xc1ZlXjG30Y5t48MOrdqGzuCC87q/L9b2O6wHR7wsi/XnsISf2ZdVP7nrtLz6IKUHvWDAJJWnmocE1Obw6uj4yAkeH3SsdN2Hw3CjUorOCUxZbkBHfQfiiHQM5DRYvm+pEPefV7/6IUUdigeEnt8z974LE5PFqPmKJtgEJ5c6PAToN0bMdfOlPH8z76AmPONO+P6cTOzx8df/JDVyTm1neejyJEjt1LR6LL7h+paMv47QL544Sgx0yG60Es1vmCpZ6TjSEAtOkoXeiwFL0CXv95wg3HGTI1+I/TKw0fLFBbFTeej7UJ3Fqwn+uCltdZv3qu8Jrg+vMIyG/uFxF+7JNHfWSGQnOAtDVoMlWt8PNBzrPdzVsRX6uvwcQRDHn5uj+JE5u3mTopgZsyZuck/9l1q+4zm3+PYDEuCmRDJgEw2POYqBXF8WK4y0yMPxK54kFHCMfihyw2/d4XR4nwa6v3J0riE6P3+WpFWQonnsBMrp/M8vbWn7wolLji08vl1/GESBJxagizrKLKj90ZCC8+AKjU7H76/boklNsKEA686b9GPq2xcfa+DvU73uAk6I4VoTkQIZon+Egc/FphnnMV+TRCy7uCV0fHywCyOhHyC79jdXxO75kM4/I0GD866a+9dtd6pbupdSvWJu/BygxN1Tz2SwlcaYGVpvjNiwpdJac41m3J254aIU+xUc2w8xXZuHhIrTlaS7I6P53xd8lt9P2ti13jhrJlkdQlINJMj7rGTZ4+Zpi7uLoriF+dZmnKVapsXb5J2nsQYy7Puzw1uQOWN66fnIJolrp+AbHeOz645cHaBdFYfG6DTHKLkCHT40kAzJCJ8EuT/O2xdrlv9uzEOERP3T8n9cfPk4bu/ydp/7kmK+js3MWBfVk0nwQmQJ6QUDm8MNjzpnOIoCMQfvjPvNe0C7/StpPJSCDHRwec9m7DnDMrYhf5skt+ca2+Lv0+t0ZdhJDiczHIBKuvFGAi1YBTCctPc9pKEQQvmjrDb5peAzioQsOuenYd3nPB3l4a/bw6hh559GXDWEaRK/7i28QOfaQT6J+Umdj5LsgYs9iErDySIDGYJQGhc4OQ+e0sWK/2LEUJl+zwNAgg3wqkmdyDD885n3gBxfFn+nhluae6m8lf/dC/pxXj9fn1Z5aefFJ2I2twjjk6NBjm/+bz3BGQMgEzCPf5hJoEfETv03kKTKIgviNT0Shz+Q/seIPB3X0fLp+l190/Sw494Bc9v57LkkosAvmi7B8P1MLCS3bxXP3SkE+guQzJosFFN8NBqNQEf/Mg12fBuEbHONU/+Q3/AUXC07d8ncp9XPlkotvwiN5ijEz2BOCnyaXQsyLjxSZecXYFp3YptE0JrxqGjqyVf2V/KIX7Efo/PBHgNQdvMj66YGOoH3+WYqLKk1JsTtvkr1gzjSONJCBT1a6+q40eoo/9WWyeK6OL5Ax/Edn2uKDEd9BM8tbzxe98IraJJM7CBP98JjHFmR+3vqxOXzmmWceaKU337CxGhqCTUVolIGMabAnhGgUb71iahI7fFf7FIFCb3j/18voiuemdd/Mu/+uE1sQWfeX3MBuyzx5B39P/fRcr4dcAT9p5bxl4zhIgNqgnlRkILKuf1654tIUCk2oLJYbQpr0ZqRrGt30C1tk4FnyQYccray31B3s9UQviG104IUGmZ8mH5v+3qF2w51nn332TzHCsI7KJzEVm6akEVuPhLWGhUeM0CAjvkHmxCM+uCYPD2R0f2Ilt7lB4tMGZ3i7qPqfe+65P6j3X1y5du3aZ3rSefrGjRsvkNxpI80AeTGC0NgGoakvuFYrtvDjD11okBF6m3yjdfze9eM7sbPQIC8sg8detlPdP7XCy8ASOh6IC534Qf126Au6Aq7S+0P9jOJ/f/jhh7dfeeWVN1C4c+cOv5zoxsQgKD7O/OgIT3OLgrrkLAMR9EuQYsXLlWO5ePNMJ25s7Fhv8EIraduDDOJI7kfh6FT98M6Ka/GrLbE0/131X79+/YVXX331+tNPP32b3nt1tGhXP/rooz/ruf9N/YzWQ/2e2c8Cfg7Wz8RC9WkeE8pj/rQltMRH/jXdsdreAEp04mg8u22zYhvZ9IPueLE4puMLfnjRKzKCbD4ZHv9oK/mwaPOlm/ukkbFwjKLj428j8t8DEEvN9xJoJuhsDI9lxOeHXr3zE8cGm7fpQMfNgR54ntXmYXzx1ltvbX64VUl4SH//66+/fl2/5ndLC/BHMV/Q6ypN06Bm3lgFaKMcEbj+bDHN88/curvewF4hjhNWasrwhy/0waIPjylyYjp49Ag++NhFhi7F+jeEFcc/H6w5TYbnxo2OoufXmNPcX+XWv4QLMo+taJkfeY4gvtRs/n8vzY/cssxB5CyKxi96/aB+/Y9+KfE/X3vttS8lI7e9/wfu514OAjYP0QAAAABJRU5ErkJggg==";
function H6(n) {
  De(n, "svelte-16mrlad", ".room-label-item.svelte-16mrlad{position:absolute;font-size:0.625rem;transform:none;cursor:pointer;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:#fff}.room-label-item__text.svelte-16mrlad{position:absolute;left:0;top:-4rem;transform:translate(-50%, 0);display:flex;justify-content:center;align-items:center;height:1.25rem;min-width:2rem;padding:0 0.375rem;pointer-events:all;background-size:100% 100%;background-repeat:no-repeat;white-space:nowrap}.room-label-item__bar.svelte-16mrlad{position:absolute;transform-origin:top;top:-2.75rem;height:3rem;width:0.0625rem;background-image:linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0))}");
}
function Xm(n) {
  let t, e, i, s, r, o;
  return {
    c() {
      t = W("span"), e = je(
        /*content*/
        n[0]
      ), i = oe(), s = W("div"), y(t, "class", "room-label-item__text svelte-16mrlad"), Q(t, "background-image", "url(" + _6 + ")"), y(s, "class", "room-label-item__bar svelte-16mrlad");
    },
    m(a, l) {
      X(a, t, l), R(t, e), n[13](t), X(a, i, l), X(a, s, l), n[14](s), r || (o = Oe(t, "click", function() {
        Ri(
          /*onClick*/
          n[4]
        ) && n[4].apply(this, arguments);
      }), r = !0);
    },
    p(a, l) {
      n = a, l & /*content*/
      1 && He(
        e,
        /*content*/
        n[0]
      );
    },
    d(a) {
      a && U(t), n[13](null), a && U(i), a && U(s), n[14](null), r = !1, o();
    }
  };
}
function F6(n) {
  let t, e = !/*rendererIfNeed*/
  n[5] && Xm(n);
  return {
    c() {
      t = W("div"), e && e.c(), y(t, "class", "room-label-item svelte-16mrlad"), Q(
        t,
        "z-index",
        /*zIndex*/
        n[2]
      ), Q(
        t,
        "transform",
        /*transform*/
        n[3]
      ), Q(
        t,
        "opacity",
        /*opacity*/
        n[1]
      ), Q(
        t,
        "visibility",
        /*visibility*/
        n[9]
      );
    },
    m(i, s) {
      X(i, t, s), e && e.m(t, null), n[15](t);
    },
    p(i, [s]) {
      /*rendererIfNeed*/
      i[5] ? e && (e.d(1), e = null) : e ? e.p(i, s) : (e = Xm(i), e.c(), e.m(t, null)), s & /*zIndex*/
      4 && Q(
        t,
        "z-index",
        /*zIndex*/
        i[2]
      ), s & /*transform*/
      8 && Q(
        t,
        "transform",
        /*transform*/
        i[3]
      ), s & /*opacity*/
      2 && Q(
        t,
        "opacity",
        /*opacity*/
        i[1]
      ), s & /*visibility*/
      512 && Q(
        t,
        "visibility",
        /*visibility*/
        i[9]
      );
    },
    i: se,
    o: se,
    d(i) {
      i && U(t), e && e.d(), n[15](null);
    }
  };
}
function N6(n, t, e) {
  let i, { content: s } = t, { five: r = void 0 } = t, { visible: o = !0 } = t, { opacity: a = 1 } = t, { zIndex: l = 0 } = t, { transform: c = void 0 } = t, { onClick: h = () => {
  } } = t, { rendererIfNeed: d = void 0 } = t, { rendererData: f = void 0 } = t, g, p, m, v;
  const b = (T) => {
    if (r.state.mode !== "Panorama") {
      const z = -(10 + 54 * (1 - Al(T.latitude) / 90)), O = z + 20, A = O >= 0 ? 0 : -O / 44;
      e(7, p.style.transform = `scaleY(${A})`, p), e(7, p.style.top = `${O}px`, p), e(8, m.style.top = `${z}px`, m);
    }
  };
  Ot(() => {
    g && typeof d == "function" && (v = d(g, f)), r && (b(r.camera.pose), r.on("cameraUpdate", b));
  }), oi(() => {
    v == null || v(), r == null || r.off("cameraUpdate", b);
  });
  function w(T) {
    Ze[T ? "unshift" : "push"](() => {
      m = T, e(8, m);
    });
  }
  function x(T) {
    Ze[T ? "unshift" : "push"](() => {
      p = T, e(7, p);
    });
  }
  function k(T) {
    Ze[T ? "unshift" : "push"](() => {
      g = T, e(6, g);
    });
  }
  return n.$$set = (T) => {
    "content" in T && e(0, s = T.content), "five" in T && e(10, r = T.five), "visible" in T && e(11, o = T.visible), "opacity" in T && e(1, a = T.opacity), "zIndex" in T && e(2, l = T.zIndex), "transform" in T && e(3, c = T.transform), "onClick" in T && e(4, h = T.onClick), "rendererIfNeed" in T && e(5, d = T.rendererIfNeed), "rendererData" in T && e(12, f = T.rendererData);
  }, n.$$.update = () => {
    n.$$.dirty & /*visible*/
    2048 && e(9, i = o ? "visible" : "hidden");
  }, [
    s,
    a,
    l,
    c,
    h,
    d,
    g,
    p,
    m,
    i,
    r,
    o,
    f,
    w,
    x,
    k
  ];
}
class K1 extends Ie {
  constructor(t) {
    super(), Ce(
      this,
      t,
      N6,
      F6,
      Pe,
      {
        content: 0,
        five: 10,
        visible: 11,
        opacity: 1,
        zIndex: 2,
        transform: 3,
        onClick: 4,
        rendererIfNeed: 5,
        rendererData: 12
      },
      H6
    );
  }
}
class G6 extends xg {
  constructor(e) {
    super();
    u(this, "areaMakerItem");
    this.areaMakerItem = e;
  }
  raycast(e, i) {
    this.areaMakerItem.makerObject.raycast(e, i);
  }
}
class W6 {
  constructor(t, e) {
    u(this, "id");
    /** 标注名称 */
    u(this, "name", "");
    /** 标注几何体 */
    u(this, "makerObject");
    /** 标注几何体的边框 */
    u(this, "outline");
    /** 标注底面 Y 坐标 */
    u(this, "bottomY");
    /** 标注透明度 */
    u(this, "opacity");
    /** 标注高度 */
    u(this, "height");
    /** 标注所在楼层 */
    u(this, "floorIndex");
    /** 标注底面形状 */
    u(this, "shape");
    /** 是否被挂载 */
    u(this, "mounted", !1);
    /** 查询问题使用的调试对象 */
    u(this, "checkMsg", {
      /** 当标注没有展示时，可以通过这个字段查看原因 */
      checkVisibleMsg: "",
      /** 当标注标签没有展示时，可以通过这个字段查看原因 */
      checkTagVisibleMsg: ""
    });
    /** 模型容器 */
    u(this, "modelGroup");
    /** 标注是否可见 */
    u(this, "visible", !0);
    // ==================== 标签相关 ====================
    /** 标注标签实例 */
    u(this, "tagApp");
    /** 标注标签是否可见 */
    u(this, "tagVisible", null);
    /** 标注标签的世界坐标 */
    u(this, "tagPosition", new P.Vector3());
    /** 标注标签的 NDC 坐标 */
    u(this, "tagNDCPosition", new P.Vector3());
    /** 标注标签的 transform */
    u(this, "tagTransform", { left: 0, top: 0 });
    /** 标注标签的显示层级 */
    u(this, "tagZIndex", 0);
    /** 标注实例的事件处理器 */
    u(this, "hooks", new Pt());
    /** 自定义 Dom */
    u(this, "itemRenderer");
    /** 数据 */
    u(this, "data");
    /** Plugin 实例 */
    u(this, "plugin");
    /** 标注透明度动画 */
    u(this, "opacityAnime");
    /** 是否在容器 resize 动画中 */
    u(this, "isInContainerResizeAnimation", !1);
    /** 监听容器 resize 的计时器 id，用于判断 resize 过程是否结束 */
    u(this, "containerResizeTimeoutID", null);
    u(this, "resizeObserver");
    /** 显示标注 */
    // public show() {
    // return this.doOpacityAnime({
    //   duration: 500,
    //   makerObjectOpacity: [this.makerObject.material.opacity, this.opacity],
    //   outlineOpacity: [this.outline.material.opacity, 1],
    //   ...options,
    // })
    // }
    /** 隐藏标注 */
    // public hide() {
    // return this.doOpacityAnime({
    //   duration: 500,
    //   makerObjectOpacity: [this.makerObject.material.opacity, 0],
    //   outlineOpacity: [this.outline.material.opacity, 0],
    //   ...options,
    // })
    // }
    /** 透明度动画 */
    u(this, "doOpacityAnime", (t) => {
      var a;
      (a = this.opacityAnime) == null || a.dispose();
      const e = t.duration, [i, s] = t.makerObjectOpacity, [r, o] = t.outlineOpacity;
      if (e === 0) {
        this.makerObject.material.opacity = s, this.outline.material.opacity = o;
        return;
      }
      return new Promise((l) => {
        this.opacityAnime = new Ds({ makerObjectOpacity: i, outlineOpacity: r }).to({
          makerObjectOpacity: s,
          outlineOpacity: o
        }).onUpdate(({ makerObjectOpacity: c, outlineOpacity: h }) => {
          this.makerObject.material.opacity = c, this.outline.material.opacity = h, this.plugin.five.needsRender = !0;
        }).onComplete(() => l(!0)).onDispose(() => {
          this.makerObject.material.opacity = s, this.outline.material.opacity = o, this.plugin.five.needsRender = !0, l(!1);
        }).play();
      });
    });
    /** 插件 Config 变化时更新自身 depthTest */
    u(this, "onPluginConfigChange", (t) => {
      this.makerObject.material.depthTest = t.config.modelDepthTest, this.outline.material.depthTest = t.config.modelDepthTest, this.plugin.five.needsRender = !0;
    });
    /** 插件整体可见性变化时，需要更新自身可见性 */
    u(this, "onPluginStateChange", () => {
      this.updateVisible(), this.updateTagVisible();
    });
    /** 更新标注可见性 */
    u(this, "updateVisible", () => {
      var s;
      const { result: t, msg: e } = this.checkVisible();
      if (this.checkMsg.checkVisibleMsg = e, this.visible === t)
        return;
      this.visible = t;
      const i = (s = this.data.object_data.visible) != null ? s : !0;
      this.modelGroup.visible = t && i, this.plugin.five.needsRender = !0;
    });
    /** 检测标注是否可见 */
    u(this, "checkVisible", () => {
      if (!this.plugin.state.visible)
        return { result: !1, msg: "插件不可见" };
      const e = this.plugin.fiveUtil.model.shownFloor;
      return e === null || e === this.floorIndex ? { result: !0, msg: "" } : { result: !1, msg: `模型高亮楼层不符合展示条件, 当前高亮楼层为：${e}` };
    });
    /** 更新标注标签 */
    u(this, "updateTag", () => {
      this.tagApp && (this.updateTagNDCPosition(), this.updateTagDomTransform(), this.updateTagVisible());
    });
    /** 更新标注标签的 NDC Position */
    u(this, "updateTagNDCPosition", () => {
      const e = this.tagPosition.clone().project(this.plugin.five.camera);
      this.tagNDCPosition.copy(e);
    });
    /** 更新标注标签的 transform */
    u(this, "updateTagDomTransform", () => {
      var s;
      const t = this.tagNDCPosition, e = Math.round((t.x + 1) / 2 * this.plugin.tagDomContainer.clientWidth), i = Math.round((-t.y + 1) / 2 * this.plugin.tagDomContainer.clientHeight);
      this.tagTransform.left === e && this.tagTransform.top === i || (this.tagTransform = { left: e, top: i }, (s = this.tagApp) == null || s.$set({ transform: `translate(${e}px, ${i}px)` }));
    });
    /** 更新标注标签可见性 */
    u(this, "updateTagVisible", () => {
      var i;
      const { result: t, msg: e } = this.checkTagVisible();
      this.checkMsg.checkTagVisibleMsg = e, this.tagVisible !== t && (this.tagVisible = t, this.tagApp && (this.tagVisible ? this.hooks.emit("tagShow") : this.hooks.emit("tagHide"), (i = this.tagApp) == null || i.$set({ visible: t })));
    });
    /** 检测标注标签是否可见 */
    u(this, "checkTagVisible", () => {
      if (!this.visible)
        return { result: !1, msg: "标注整体不可见" };
      if (this.isInContainerResizeAnimation)
        return { result: !1, msg: "处于容器 resize 动画中" };
      const e = this.plugin.five, i = e.camera.position.clone();
      pn.set(i.clone(), this.tagPosition.clone().sub(i).normalize());
      const [s] = this.plugin.fiveUtil.model.intersectRaycaster(pn), r = this.tagPosition.distanceTo(e.camera.position);
      if (s && s.distance + 0.1 < r)
        return { result: !1, msg: "标注标签被 Five 模型遮挡" };
      const o = this.tagNDCPosition;
      return Math.abs(o.x) > 1.2 || Math.abs(o.y) > 1.2 || Math.abs(o.z) > 1 ? { result: !1, msg: "标注标签不在屏幕内" } : { result: !0, msg: "" };
    });
    /** 相机位姿发生变化时，更新标签 */
    u(this, "onFiveCameraUpdate", () => {
      this.tagApp && this.visible && (this.updateTagNDCPosition(), this.updateTagDomTransform(), this.updateTagVisible());
    });
    /** tag container DOM 发生 resize */
    u(this, "onContainerResize", () => {
      this.isInContainerResizeAnimation === !1 && (this.isInContainerResizeAnimation = !0, this.updateTag());
      const e = () => {
        this.isInContainerResizeAnimation = !1, this.containerResizeTimeoutID = null, this.updateTag();
      };
      this.containerResizeTimeoutID && clearTimeout(this.containerResizeTimeoutID), this.containerResizeTimeoutID = setTimeout(e, 100);
    });
    var l, c, h, d;
    const i = e.object_data, s = i.bottom_y, r = i.height, o = new P.Color((l = i.color) != null ? l : "#FFFFFF"), a = (c = i.opacity) != null ? c : 0.4;
    this.data = e, this.id = e.id, this.name = (h = e.name) != null ? h : "", this.plugin = t, this.height = r, this.bottomY = s, this.opacity = a, this.shape = new P.Shape().fromJSON(i.shape), this.floorIndex = e.floor_index, this.makerObject = new P.Mesh(Ym(this.shape, r), Q6(o, a)), gc(this.makerObject, s), this.makerObject.material.depthTest = this.plugin.config.modelDepthTest, this.outline = new Dg(
      new P.EdgesGeometry(this.makerObject.geometry),
      new P.LineBasicMaterial({ color: o, transparent: !0 })
    ), gc(this.outline, s), this.outline.material.depthTest = this.plugin.config.modelDepthTest, this.setHeight(r), this.modelGroup = new G6(this), this.modelGroup.visible = (d = i.visible) != null ? d : !0;
  }
  /** 挂载标注 */
  mount() {
    if (this.mounted)
      return;
    this.mounted = !0, this.updateVisible(), this.makerObject.material.depthTest = this.plugin.config.modelDepthTest, this.outline.material.depthTest = this.plugin.config.modelDepthTest, this.modelGroup.add(this.makerObject, this.outline);
    const t = !!this.name, e = this.plugin.tagDomContainer;
    t && (this.tagApp = new K1({
      target: e,
      props: {
        rendererData: this.data,
        content: this.name,
        visible: this.tagVisible,
        rendererIfNeed: this.itemRenderer,
        transform: `translate(${this.tagTransform.left}px, ${this.tagTransform.top}px)`,
        onClick: (i) => this.hooks.emit("tagClick", { target: this, nativeEvent: i })
      }
    }), this.updateTag()), this.plugin.five.needsRender = !0, this.plugin.hooks.on("stateChange", this.onPluginStateChange), this.plugin.hooks.on("configChange", this.onPluginConfigChange), this.plugin.five.on("modeChange", this.updateVisible), this.plugin.five.on("modelShownFloorChange", this.updateVisible), this.plugin.five.on("cameraUpdate", this.onFiveCameraUpdate), this.resizeObserver = La(this.onContainerResize, e), this.resizeObserver.observe();
  }
  /** 卸载标注 */
  unmount() {
    var t, e;
    this.mounted && (this.mounted = !1, this.modelGroup.remove(...this.modelGroup.children), (t = this.tagApp) == null || t.$destroy(), this.tagApp = null, this.plugin.hooks.off("stateChange", this.onPluginStateChange), this.plugin.hooks.off("configChange", this.onPluginConfigChange), this.plugin.five.off("modeChange", this.updateVisible), this.plugin.five.off("modelShownFloorChange", this.updateVisible), this.plugin.five.off("cameraUpdate", this.onFiveCameraUpdate), (e = this.resizeObserver) == null || e.unobserve());
  }
  /** 更改标注透明度
   * @param opacity 标注透明度，范围：0-1
   */
  setOpacity(t) {
    var e;
    this.opacity = t, (e = this.opacityAnime) == null || e.dispose(), this.makerObject.material.opacity = t, this.plugin.five.needsRender = !0;
  }
  /** 更改标注颜色
   * @param color 标注颜色，支持 hex
   * @example setColor('#FF0000')
   */
  setColor(t) {
    const e = new P.Color(t);
    this.makerObject.material.color = e, this.outline.material.color = e, this.plugin.five.needsRender = !0;
  }
  /** 更改标注高度
   * @param height 标注高度，单位：米
   */
  setHeight(t) {
    if (t <= 0)
      throw new Error("高度必须大于 0");
    this.height = t, this.makerObject.geometry = Ym(this.shape, t), this.outline.geometry = new P.EdgesGeometry(this.makerObject.geometry);
    const e = this.shape.extractPoints(10).shape.slice(0, -1), i = G3(e), s = new P.Vector3(i.x, i.y, t);
    gc(s, this.bottomY), this.tagPosition.copy(s), this.updateTag(), this.plugin.five.needsRender = !0;
  }
  /** 更改标注标签的显示层级
   * @description 为什么需要这个方法
   * 在相机朝向或位置发生变化时，各个标签所在的坐标与相机的远近关系发生了变化，所以标签的层级也会有变化。
   * 比如：
   * - 相机 -> 标签 A -> 标签 B： 标签 A 在标签 B 的前面
   * - 标签 A <- 标签 B <- 相机： 标签 A 在标签 B 的后面
   * 但是当前元素是无法感知到这种变化的，所以需要通过父元素调用这个方法来更新标签的层级。
   */
  setTagZIndex(t) {
    var e;
    this.tagZIndex !== t && ((e = this.tagApp) == null || e.$set({ zIndex: t }));
  }
}
function Ym(n, t) {
  return new P.ExtrudeBufferGeometry(n, {
    depth: t,
    bevelEnabled: !1
  });
}
function Q6(n, t) {
  return new P.MeshBasicMaterial({
    color: n,
    opacity: t,
    transparent: !0
  });
}
function gc(n, t) {
  const e = new P.Matrix4(), i = new P.Matrix4().makeRotationX(Math.PI / 2), s = new P.Matrix4().makeTranslation(0, 0, -t), r = new P.Matrix4().makeScale(1, 1, -1);
  e.multiply(i), e.multiply(s), e.multiply(r), n.applyMatrix4(e);
}
let U6 = class extends Pn {
  /** AreaMakerPlugin
   * @param `five` `<Five>` Five 实例
   * @param `params` `<PluginType.Params> | <undefined>` 插件初始化参数
   * @param `params.initialState` `<PluginType.State> | <undefined>` 插件初始化后，使用的状态
   */
  constructor(e, i) {
    super(e);
    // ==================== public properties ====================
    /** 插件当前状态 */
    u(this, "state");
    /** 标注模型 { id: item } 的映射表 */
    u(this, "itemMap");
    /** 自定义 DOM */
    u(this, "itemRenderer");
    /** 标注模型容器 */
    u(this, "modelGroup");
    /** 当前使用的数据 */
    u(this, "data");
    /** tag 容器 */
    u(this, "tagDomContainer");
    /** 查询问题使用的调试对象 */
    u(this, "checkMsg", {
      childrenMountedState: ""
    });
    // ==================== private properties ====================
    /** 是否在 Five Change Mode 动画中 */
    u(this, "isInFiveChangeModeAnime", !1);
    /** 子组件是否挂载 */
    u(this, "childrenMountedState", !1);
    /** config 的原始值 */
    u(this, "_config");
    /** disposed 的原始值 */
    u(this, "_disposed", !1);
    /** 销毁插件，移除所有副作用，销毁后将不响应任何 API */
    u(this, "dispose", () => {
      this.five.scene.remove(this.modelGroup);
    });
    u(this, "onFiveInitAnimationWillStart", () => {
      this.isInFiveChangeModeAnime = !0, this.updateChildrenMountedState();
    });
    u(this, "onFiveInitAnimationEnded", () => {
      this.isInFiveChangeModeAnime = !1, this.updateChildrenMountedState();
    });
    u(this, "onFiveCameraUpdate", () => {
      const e = this.five.camera;
      [...this.itemMap.values()].sort((s, r) => {
        const o = s.tagPosition.distanceTo(e.position);
        return r.tagPosition.distanceTo(e.position) - o;
      }).forEach((s, r) => {
        var o;
        (o = this.getMaskItemByID(s.id)) == null || o.setTagZIndex(r * 10);
      });
    });
    u(this, "onFiveModeChange", () => {
      this.updateChildrenMountedState();
    });
    u(this, "onMakerTagClick", (e) => {
      this.hooks.emit("wantsTap", { target: e.target, intersectObjects: [] });
    });
    u(this, "onWantsFiveTapGesture", (e) => {
      const i = Array.from(this.itemMap.values()).filter((l) => l.mounted && l.visible).map((l) => ({
        makerItem: l,
        intersects: l.modelGroup.getRaycastIntersects(e)
      })).filter(({ intersects: l }) => l.length > 0);
      if (i.length === 0)
        return;
      const s = i.reduce((l, c) => {
        const h = l.intersects[0].distance, d = c.intersects[0].distance;
        return h < d ? l : c;
      }), r = this.fiveUtil.model.intersectRaycaster(e)[0];
      if (this.config.modelDepthTest && r && r.distance < s.intersects[0].distance)
        return;
      if (this.hooks.emit("wantsTap", {
        target: s.makerItem,
        intersectObjects: s.intersects
      }))
        return !1;
    });
    this.five = e, this.tagDomContainer = document.createElement("div"), this.tagDomContainer.style.position = "absolute", this.tagDomContainer.style.top = "0", this.tagDomContainer.style.left = "0", this.tagDomContainer.style.width = "100%", this.tagDomContainer.style.height = "100%", this.tagDomContainer.style.pointerEvents = "none";
    const s = {
      enabled: !0,
      visible: !0
    };
    this.state = Object.assign(s, i == null ? void 0 : i.initialState);
    const r = _({
      modelDepthTest: !0
    }, i == null ? void 0 : i.config);
    this._config = r, this.modelGroup = new P.Group(), this.modelGroup.name = "ModelMakerPluginGroup", this.itemMap = /* @__PURE__ */ new Map(), this.state.enabled && this._enable({ userAction: !1 });
  }
  /** 插件配置项 */
  get config() {
    return _({}, this._config);
  }
  /** 是否已经被销毁 */
  get disposed() {
    return this._disposed;
  }
  /** 加载数据，重复调用会使用新数据覆盖旧数据 */
  load(e) {
    return $(this, null, function* () {
      const i = this.data;
      this.data = this.formatData(e), this.hooks.emit("dataChange", this.data, i), this.modelGroup.remove(...this.modelGroup.children), this.itemMap.forEach((s) => s.unmount()), this.itemMap.clear(), this.childrenMountedState = !1, this.checkMsg.childrenMountedState = "", this.data.list.forEach((s) => {
        const r = new W6(this, s);
        r.itemRenderer = this.itemRenderer, this.modelGroup.add(r.modelGroup), this.itemMap.set(s.id, r), r.hooks.on("tagClick", this.onMakerTagClick);
      }), this.updateChildrenMountedState();
    });
  }
  /** 将插件的 DOM 容器添加到指定的 DOM 元素上 */
  appendTo(e) {
    e.appendChild(this.tagDomContainer);
  }
  /** 启用插件
   * @param `options` `<Option> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  enable(e = {}) {
    var s;
    if (this.state.enabled)
      return;
    const i = (s = e.userAction) != null ? s : !0;
    this.updateState({ enabled: !0 }, i), this._enable({ userAction: i });
  }
  /** 禁用插件
   * @param `options` `<Option> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  disable(e = {}) {
    var s;
    if (this.state.enabled === !1)
      return;
    const i = (s = e.userAction) != null ? s : !0;
    this.updateState({ enabled: !1 }, i), this._disable({ userAction: i });
  }
  /** 展示标注
   * @param `options` `<Partial<ShowHideOptions>> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  show(e) {
    return $(this, null, function* () {
      if (this.state.visible)
        return Promise.resolve();
      if (this.disposed)
        return Promise.reject(new Error("不能在已销毁的插件上调用 show"));
      const i = _({ userAction: !0 }, e);
      this.updateState({ visible: !0 }, i.userAction), yield this._show(i);
    });
  }
  /** 插件内容整体隐藏
   * @param `options` `<Partial<ShowHideOptions>> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  hide(e) {
    return $(this, null, function* () {
      if (this.state.visible === !1)
        return;
      const i = _({ userAction: !0 }, e);
      this.updateState({ visible: !1 }, i.userAction), yield this._hide(i);
    });
  }
  // 目前带动画的展示和隐藏功能有些需求细节没有确定，暂时不实现
  // /** 展示标注
  //  * @param `options` `<Partial<ShowHideOptions>> | <undefined>`
  //  * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
  //  * @param `options.anime` `<AnimeOptions> | <undefined>` 动画配置。
  //  * @param `options.anime.duration` `<number> | <undefined>` 动画时间，默认是 500ms。
  //  */
  // public async show(options?: Partial<PluginType.ShowHideOptions>): Promise<void> {
  //   if (this.state.visible) return Promise.resolve()
  //   if (this.disposed) return Promise.reject(new Error('不能在已销毁的插件上调用 show'))
  //   const mergedOptions: PluginType.ShowHideOptions = {
  //     userAction: true,
  //     anime: { duration: 500, ...options?.anime },
  //     ...options,
  //   }
  //   this.updateState({ visible: true }, mergedOptions.userAction)
  //   await this._show(mergedOptions)
  // }
  // /** 插件内容整体隐藏
  //  * @param `options` `<Partial<ShowHideOptions>> | <undefined>`
  //  * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
  //  * @param `options.anime` `<AnimeOptions> | <undefined>` 动画配置。
  //  * @param `options.anime.duration` `<number> | <undefined>` 动画时间，默认是 500ms。
  //  */
  // public async hide(options?: Partial<PluginType.ShowHideOptions>) {
  //   if (this.state.visible === false) return
  //   const mergedOptions: PluginType.ShowHideOptions = {
  //     userAction: true,
  //     anime: { duration: 500, ...options?.anime },
  //     ...options,
  //   }
  //   this.updateState({ visible: false }, mergedOptions.userAction)
  //   await this._hide(mergedOptions)
  // }
  /** 更改插件 State
   * @param `state` `<Partial<Plugin.State>>` 插件属性 `state` 的子集。
   * @param `options` `<Option> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  setState(e, i = {}) {
    const s = this.state;
    if (Qt(e, s, { deep: !0 }))
      return;
    const r = i.userAction !== void 0 ? i.userAction : !0;
    if (this.updateState(e, r), e.enabled !== void 0 && s.enabled !== e.enabled && (e.enabled ? this._enable({ userAction: r }) : this._disable({ userAction: r })), e.visible !== void 0 && s.visible !== e.visible) {
      const o = { userAction: r, anime: { duration: 500 } };
      e.visible ? this._show(o) : this._hide(o);
    }
  }
  /** 更改插件 Config
   * @param `config` `<Partial<Plugin.Config>>` 插件属性 `config` 的子集。
   * @param `options` `<Option> | <undefined>`
   */
  updateConfig(e, i = {}) {
    var o;
    const s = this.config, r = _(_({}, s), e);
    this._config = r, this.hooks.emit("configChange", { prevConfig: s, config: r, userAction: (o = i.userAction) != null ? o : !0 });
  }
  /** 根据 ID 获取标注 */
  getMaskItemByID(e) {
    return this.itemMap.get(e);
  }
  formatData(e) {
    function i(s) {
      return s.list.length === 0 ? !0 : !("shape" in s.list[0].object_data);
    }
    return i(e) ? {
      list: e.list.filter((s) => s.object_data.points.length >= 3).map((s) => {
        const r = new P.Shape(), o = s.object_data.points[0];
        return r.moveTo(o[0], o[2]), s.object_data.points.slice(1).forEach((l) => r.lineTo(l[0], l[2])), r.lineTo(o[0], o[2]), de(_({}, s), {
          floor_index: s.object_data.floorIndex,
          object_data: de(_({}, s.object_data), {
            bottom_y: o[1] + s.object_data.fixedY,
            shape: r.toJSON(),
            height: s.object_data.height + s.object_data.fixedHeight
          })
        });
      })
    } : e;
  }
  checkChildrenMountedState() {
    const e = this.state, i = this.five;
    if (!e.enabled)
      return { result: !1, msg: "插件不可用" };
    const s = i.getCurrentState().mode;
    return s === "Panorama" ? { result: !1, msg: `Five 模态不符合条件, 当前模态为：${s}` } : this.isInFiveChangeModeAnime ? { result: !1, msg: "切换模态动画中不展示" } : { result: !0, msg: "" };
  }
  updateChildrenMountedState() {
    const { result: e, msg: i } = this.checkChildrenMountedState();
    this.checkMsg.childrenMountedState = i, e !== this.childrenMountedState && (this.childrenMountedState = e, this.itemMap.forEach((s) => {
      this.childrenMountedState ? s.mount() : s.unmount();
    }));
  }
  updateState(e, i) {
    const s = this.state;
    this.state = _(_({}, this.state), e), this.hooks.emit("stateChange", { state: this.state, prevState: s, userAction: i });
  }
  _enable(e) {
    this.hooks.emit("enable", { userAction: e.userAction }), this.five.scene.add(this.modelGroup), this.updateChildrenMountedState(), this.five.needsRender = !0, this.five.on("wantsTapGesture", this.onWantsFiveTapGesture), this.five.on("initAnimationWillStart", this.onFiveInitAnimationWillStart), this.five.on("initAnimationEnded", this.onFiveInitAnimationEnded), this.five.on("modeChange", this.onFiveModeChange), this.five.on("cameraUpdate", this.onFiveCameraUpdate);
  }
  _disable(e) {
    this.hooks.emit("disable", { userAction: e.userAction }), this.five.scene.remove(this.modelGroup), this.updateChildrenMountedState(), this.five.needsRender = !0, this.five.off("wantsTapGesture", this.onWantsFiveTapGesture), this.five.off("initAnimationWillStart", this.onFiveInitAnimationWillStart), this.five.off("initAnimationEnded", this.onFiveInitAnimationEnded), this.five.off("modeChange", this.onFiveModeChange), this.five.off("cameraUpdate", this.onFiveCameraUpdate);
  }
  _show(e) {
    return $(this, null, function* () {
      this.hooks.emit("show", e), this.five.needsRender = !0;
    });
  }
  _hide(e) {
    return $(this, null, function* () {
      this.hooks.emit("hide", e), this.five.needsRender = !0;
    });
  }
};
const HD = (n, t) => new U6(n, t);
class X6 extends rs {
  constructor(e, i) {
    super(e);
    // ==================== public properties ====================
    /** 插件当前状态 */
    u(this, "state");
    /** 查询问题使用的调试对象 */
    u(this, "checkMsg", {
      /** mesh 隐藏的原因 */
      meshHidden: "",
      /** 插件 enabled 校验信息 */
      pluginDisabled: "",
      /** 插件 visible 校验信息 */
      pluginHidden: ""
    });
    // ==================== private properties ====================
    u(this, "group", new P.Group());
    u(this, "mesh");
    u(this, "textureLoadingPromise");
    u(this, "opacityAnimeTween");
    /** 是否正在走点动画中 */
    u(this, "isInPanoMoveAnime", !1);
    /** 上一次走点的全景图索引 */
    u(this, "lastArrivedPanoIndex", -1);
    /** config 的原始值 */
    u(this, "_config");
    /** disposed 的原始值 */
    u(this, "_disposed", !1);
    /**
     * 销毁插件
     * @todo 销毁贴图时，最好还是直接销毁贴图吧，this.mesh?.material.map 这种都是很深层的引用了。THREE 的建议我看也是自己去管理和销毁公共贴图。
     */
    u(this, "dispose", () => {
      this.five.scene.remove(this.group), this.group.remove(...this.group.children), this.five.off("dispose", this.dispose), this.five.off("panoArrived", this.onFivePanoArrived), this.five.off("panoWillArrive", this.onFivePanoWillArrive);
    });
    u(this, "checkMeshVisible", () => this.state.visible ? this.config.imageURL === "" ? { result: !1, msg: "图片不存在" } : this.mesh.material.map ? this.five.work ? this.five.getCurrentState().mode !== "Panorama" ? { result: !1, msg: "非全景模式" } : this.isInPanoMoveAnime ? { result: !1, msg: "处于走点动画中" } : { result: !0, msg: "" } : { result: !1, msg: "Five 数据未加载" } : { result: !1, msg: "指南针贴图未加载" } : { result: !1, msg: "插件隐藏" });
    /** 贴图加载完成的回调 */
    u(this, "onTextureLoaded", (e) => {
      this.mesh.material.map = e, this.mesh.material.needsUpdate = !0, this.updateMeshVisible();
    });
    /** Five load Work 后 */
    u(this, "onFiveWillLoad", () => {
      this.lastArrivedPanoIndex = -1, this.updateMeshVisible();
    });
    /** 走点前 */
    u(this, "onFivePanoWillArrive", (e) => {
      var i;
      e !== this.five.getCurrentState().panoIndex && (this.isInPanoMoveAnime = !0, (i = this.opacityAnimeTween) == null || i.dispose(), this.updateMeshVisible());
    });
    /** 走点后 */
    // eslint-disable-next-line @typescript-eslint/member-ordering
    u(this, "onFivePanoArrived", (e) => {
      e !== this.lastArrivedPanoIndex && (this.lastArrivedPanoIndex = e, this.isInPanoMoveAnime = !1, this.updateMeshPosition(e), this.updateMeshVisible(), this.five.needsRender = !0);
    });
    u(this, "onMeshVisibleChange", (e) => {
      var i;
      if ((i = this.opacityAnimeTween) == null || i.dispose(), !e) {
        this.mesh.visible = !1;
        return;
      }
      this.mesh.material.setValues({ opacity: 0 }), this.mesh.visible = !0, this.opacityAnimeTween = Io(1e3).onUpdate(({ progress: s }) => {
        var r;
        (r = this.mesh) == null || r.material.setValues({ opacity: s }), this.five.needsRender = !0;
      }).play();
    });
    u(this, "onFiveModeChange", () => {
      this.updateMeshVisible();
    });
    this.five = e;
    const s = {
      enabled: !0,
      visible: !0
    };
    this.state = Object.assign(s, i == null ? void 0 : i.initialState);
    const r = _({
      width: 1.4,
      yOffset: 0.01,
      yRotate: 0,
      imageURL: this.absoluteUrl("/release/web/logo.7febb17f.png")
    }, i == null ? void 0 : i.config);
    this._config = r, this.group.name = "current-pano-image-plugin-group", this.mesh = new P.Mesh(
      new P.PlaneBufferGeometry(this.config.width, this.config.width),
      new P.MeshBasicMaterial({ transparent: !0, opacity: 0, depthTest: !1 })
    ), this.mesh.visible = !1, this.group.add(this.mesh), this.updateMeshQuaternion(this.config.yRotate), this.state.visible || (this.checkMsg.pluginHidden = "初始值设置为隐藏"), this.state.enabled || (this.checkMsg.pluginDisabled = "初始值设置为禁用"), this.state.enabled && this._enable({ userAction: !1 }), this.five.once("dispose", this.dispose);
  }
  /** 插件配置项 */
  get config() {
    return _({}, this._config);
  }
  /** 是否已经被销毁 */
  get disposed() {
    return this._disposed;
  }
  /**
   * 启用插件，响应用户操作并展示UI
   * @param options
   */
  enable(e = {}) {
    var s;
    if (this.state.enabled)
      return;
    const i = (s = e.userAction) != null ? s : !0;
    this.updateState({ enabled: !0 }, i), this.checkMsg.pluginDisabled = "", this._enable({ userAction: i });
  }
  /** 禁用插件
   * @param `options` `<Option> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  disable(e = {}) {
    var s;
    if (this.state.enabled === !1)
      return;
    const i = (s = e.userAction) != null ? s : !0;
    this.updateState({ enabled: !1 }, i), this.checkMsg.pluginDisabled = "调用 disable 禁用", this._disable({ userAction: i });
  }
  /** 插件内容整体展示
   * @param `options` `<Partial<BaseOptions>> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  show(e) {
    return $(this, null, function* () {
      if (this.state.visible)
        return Promise.resolve();
      if (this.disposed)
        return Promise.reject(new Error("不能在已销毁的插件上调用 show"));
      const i = _({ userAction: !0 }, e);
      this.updateState({ visible: !0 }, i.userAction), this.checkMsg.pluginHidden = "", this._show(i);
    });
  }
  /** 插件内容整体隐藏
   * @param `options` `<Partial<BaseOptions>> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  hide(e) {
    return $(this, null, function* () {
      if (this.state.visible === !1)
        return;
      const i = _({ userAction: !0 }, e);
      this.updateState({ visible: !1 }, i.userAction), this.checkMsg.pluginDisabled = "调用 hide 隐藏", this._hide(i);
    });
  }
  /** 更改插件 State
   * @param `state` `<Partial<Plugin.State>>` 插件属性 `state` 的子集。
   * @param `options` `<Option> | <undefined>`
   * @param `options.userAction` `<boolean> | <undefined>` 是否是用户操作。默认是 true。
   */
  setState(e, i = {}) {
    const s = this.state;
    if (Qt(e, s, { deep: !0 }))
      return;
    const r = i.userAction !== void 0 ? i.userAction : !0;
    if (this.updateState(e, r), e.enabled !== void 0 && s.enabled !== e.enabled && (e.enabled ? this.checkMsg.pluginDisabled = "" : this.checkMsg.pluginDisabled = "调用 setState 禁用", e.enabled ? this._enable({ userAction: r }) : this._disable({ userAction: r })), e.visible !== void 0 && s.visible !== e.visible) {
      const o = { userAction: r, anime: { duration: 500 } };
      e.visible ? this.checkMsg.pluginHidden = "" : this.checkMsg.pluginHidden = "调用 setState 隐藏", e.visible ? this._show(o) : this._hide(o);
    }
  }
  /** 更改插件 Config
   * @param `config` `<Partial<Plugin.Config>>` 插件属性 `config` 的子集。
   * @param `options` `<Option> | <undefined>`
   */
  updateConfig(e, i = {}) {
    var o;
    const s = this.config, r = _(_({}, s), e);
    this._config = r, s.imageURL !== r.imageURL && this.reloadTexture(r.imageURL), s.yOffset !== r.yOffset && this.updateMeshPosition(this.five.getCurrentState().panoIndex), s.yRotate !== r.yRotate && this.updateMeshQuaternion(r.yRotate), s.width !== r.width && (this.mesh.geometry = new P.PlaneBufferGeometry(r.width, r.width)), this.hooks.emit("configChange", { prevConfig: s, config: r, userAction: (o = i.userAction) != null ? o : !0 });
  }
  /** 问什么看不到模型 */
  __whyCantSeeMesh() {
    if (this.disposed)
      return "插件已销毁";
    if (this.checkMsg.pluginDisabled)
      return this.checkMsg.pluginDisabled;
    if (this.checkMsg.pluginHidden)
      return this.checkMsg.pluginHidden;
    if (this.checkMsg.meshHidden)
      return this.checkMsg.meshHidden;
  }
  updateState(e, i) {
    const s = this.state;
    this.state = _(_({}, this.state), e), this.hooks.emit("stateChange", { state: this.state, prevState: s, userAction: i });
  }
  /** 根据各种条件更新 Mesh 的可见性 */
  updateMeshVisible() {
    const { result: e, msg: i } = this.checkMeshVisible();
    this.checkMsg.meshHidden = i, e !== this.mesh.visible && this.onMeshVisibleChange(e);
  }
  /** 根据点位更新 Mesh 坐标 */
  updateMeshPosition(e) {
    const i = this.workUtil.getObserverStandingPosition(e);
    if (!i) {
      console.warn("CurrentPanoImagePlugin: 无法获取到当前点位的 standingPosition");
      return;
    }
    const s = i.clone().setY(i.y + this.config.yOffset);
    s && this.mesh.position.copy(s);
  }
  /** 重新加载贴图，调用时会先清除已有的贴图 */
  reloadTexture(e) {
    return $(this, null, function* () {
      if (this.mesh.material.map = null, e !== "") {
        const i = Es(e);
        this.textureLoadingPromise = i;
        const s = yield i;
        s.minFilter = P.LinearFilter, this.textureLoadingPromise === i && (this.onTextureLoaded(s), this.textureLoadingPromise = null);
      }
      this.updateMeshVisible();
    });
  }
  /** north_rad 变化时，需要更新模型的旋转角度 */
  updateMeshQuaternion(e) {
    const i = new P.Quaternion();
    i.multiplyQuaternions(
      // 沿着自身 X 轴旋转 -90 度
      new P.Quaternion().setFromAxisAngle(new P.Vector3(1, 0, 0), -Math.PI / 2),
      // 沿着自身 Z 轴旋转 rad 弧度
      new P.Quaternion().setFromAxisAngle(new P.Vector3(0, 0, 1), e)
    ), this.mesh.quaternion.copy(i);
  }
  _enable(e) {
    this.hooks.emit("enable", { userAction: e.userAction }), this.config.imageURL && !this.mesh.material.map && !this.textureLoadingPromise && this.reloadTexture(this.config.imageURL), this.five.scene.add(this.group), this.five.needsRender = !0, this.five.work && this.onFiveWillLoad(), this.five.getCurrentState().mode === "Panorama" && (this.onFiveModeChange(), this.onFivePanoArrived(this.five.getCurrentState().panoIndex)), this.five.on("willLoad", this.onFiveWillLoad), this.five.on("panoArrived", this.onFivePanoArrived), this.five.on("panoWillArrive", this.onFivePanoWillArrive), this.five.on("modeChange", this.onFiveModeChange);
  }
  _disable(e) {
    this.hooks.emit("disable", { userAction: e.userAction }), this.five.scene.remove(this.group), this.five.needsRender = !0, this.five.off("willLoad", this.onFiveWillLoad), this.five.off("panoArrived", this.onFivePanoArrived), this.five.off("panoWillArrive", this.onFivePanoWillArrive), this.five.off("modeChange", this.onFiveModeChange);
  }
  _show(e) {
    this.hooks.emit("show", e), this.updateMeshVisible(), this.five.needsRender = !0;
  }
  _hide(e) {
    this.hooks.emit("hide", e), this.updateMeshVisible(), this.five.needsRender = !0;
  }
}
const FD = (n, t) => new X6(n, t);
class Y6 {
  constructor() {
    u(this, "five");
    u(this, "_cursor");
    u(this, "_pointSelector");
    u(this, "_fiveDomEvents");
    u(this, "_object3DHelper");
    u(this, "inited", !1);
    u(this, "init", (t) => {
      this.inited = !0, this.five = t, this._cursor = void 0, this._pointSelector = void 0, this._fiveDomEvents = void 0, this._object3DHelper = void 0;
    });
  }
  get cursor() {
    if (!this.inited)
      throw new Error("Global not inited");
    return this._cursor ? this._cursor : (this._cursor = new o1(this.five.getElement()), this._cursor);
  }
  get pointSelector() {
    if (!this.inited)
      throw new Error("Global not inited");
    return this._pointSelector ? this._pointSelector : (this._pointSelector = new al(this.five, { mode: "cursor" }), this._pointSelector);
  }
  get fiveDomEvents() {
    if (!this.inited)
      throw new Error("Global not inited");
    return this._fiveDomEvents ? this._fiveDomEvents : (this._fiveDomEvents = new Pr(this.five, { noEmitWhenNotInScene: !0 }), this._fiveDomEvents);
  }
  get object3DHelper() {
    if (!this.inited)
      throw new Error("Global not inited");
    return this._object3DHelper ? this._object3DHelper : (this._object3DHelper = new J1(this.five), this._object3DHelper);
  }
}
const $1 = new Y6();
window.globalModules = $1;
function ev(n, t) {
  return n ? t(n) ? n : n.parent ? ev(n.parent, t) : null : null;
}
function Z6(n) {
  const t = [...n];
  if (n.length < 3)
    return n;
  const e = n[n.length - 1], i = n[0];
  return e.equals(i) || t.push(i), t;
}
class tv extends ri {
  constructor(e) {
    super();
    u(this, "name", "PolylineBaseMesh");
    u(this, "lines", []);
    u(this, "withDots");
    u(this, "paramsStyle");
    const o = e, { withDots: i, points: s } = o, r = Rn(o, ["withDots", "points"]);
    this.withDots = i != null ? i : !0, s && this.setPoints(s), r && this.setStyle(r);
  }
  get style() {
    var e;
    return {
      lineColor: this.lineColor,
      lineWidth: this.lineWidth,
      opacity: this.opacity,
      dashed: this.dashed,
      occlusionVisibility: this.occlusionVisibility,
      occlusionMode: this.occlusionMode,
      lengthEnable: (e = this.paramsStyle) == null ? void 0 : e.lengthEnable
    };
  }
  get opacity() {
    var e, i, s;
    return (s = (e = this.lines[0]) == null ? void 0 : e.lineOpacity) != null ? s : (i = this.paramsStyle) == null ? void 0 : i.lineOpacity;
  }
  get lineColor() {
    var e, i, s;
    return (s = (e = this.lines[0]) == null ? void 0 : e.color) != null ? s : (i = this.paramsStyle) != null && i.lineColor ? new P.Color(this.paramsStyle.lineColor) : void 0;
  }
  get lineWidth() {
    var e, i, s;
    return (s = (e = this.lines[0]) == null ? void 0 : e.lineWidth) != null ? s : (i = this.paramsStyle) == null ? void 0 : i.lineWidth;
  }
  get dashed() {
    var e, i, s;
    return (s = (e = this.lines[0]) == null ? void 0 : e.dashed) != null ? s : (i = this.paramsStyle) == null ? void 0 : i.dashed;
  }
  get occlusionVisibility() {
    var e, i, s;
    return (s = (e = this.lines[0]) == null ? void 0 : e.occlusionVisibility) != null ? s : (i = this.paramsStyle) == null ? void 0 : i.occlusionVisibility;
  }
  get occlusionMode() {
    var e, i, s;
    return (s = (e = this.lines[0]) == null ? void 0 : e.occlusionMode) != null ? s : (i = this.paramsStyle) == null ? void 0 : i.occlusionMode;
  }
  get points() {
    var e, i, s;
    return this.lines.map((r) => r.points[0]).concat((s = (i = this.lines) == null ? void 0 : i[((e = this.lines) == null ? void 0 : e.length) - 1]) == null ? void 0 : s.points[1]).filter(Boolean);
  }
  setPoints(e, i = { closed: !1 }) {
    let s = e.map(Qe);
    i.closed && (s = Z6(s)), s.forEach((r, o) => {
      var c;
      const a = s[o + 1];
      if (o !== 0 && a === void 0)
        return;
      const l = (c = this.lines[o]) != null ? c : (() => {
        const h = new To(de(_({}, this.style), {
          pointVisibility: this.withDots ? { startPoint: o === 0, endPoint: !0 } : !1
        }));
        return this.lines[o] = h, this.add(h), h;
      })();
      l.setStyle(this.style), l.setPoints([r, a]);
    }), s.length === 0 ? (this.lines.forEach((r) => r.removeFromParent()), this.lines = []) : s.length === 1 || this.lines.length > s.length - 1 && this.lines.splice(s.length - 1).forEach((r) => r.removeFromParent());
  }
  setStyle(e) {
    this.paramsStyle = _(_({}, this.paramsStyle), e), this.lines.forEach((i) => i.setStyle(this.paramsStyle));
  }
  highlight() {
    this.lines.forEach((e) => e.highlight());
  }
  unhighlight() {
    this.lines.forEach((e) => e.unhighlight());
  }
}
class Rs extends tv {
  constructor(...e) {
    super(de(_({}, e[0]), { withDots: !1 }));
    u(this, "name", "PolylineMesh");
  }
}
class Un extends tv {
  constructor(...e) {
    super(de(_({}, e[0]), { withDots: !0 }));
    u(this, "name", "PolylineWithDotsMesh");
  }
}
const vc = /* @__PURE__ */ new Map();
class Vi extends ri {
  constructor(e, i) {
    var s, r;
    super();
    u(this, "name", "Sculpt");
    u(this, "isSculptObject", !0);
    u(this, "draggable");
    /**
     * @description 是否被选中
     */
    u(this, "selected");
    /**
     * @description 配置
     */
    u(this, "config");
    u(this, "on", (e, i, s) => ct.modules.fiveDomEvents.addEventListener(this, e, i, s));
    u(this, "off", (...e) => ct.modules.fiveDomEvents.removeEventListener(this, ...e));
    u(this, "applyObjectMatrixWorld", (e, i) => {
      const s = i != null ? i : this;
      return s.updateMatrixWorld(), Po(s, e);
    });
    u(this, "applyObjectReversalMatrixWorld", (e, i) => {
      const s = i != null ? i : this;
      return s.updateMatrixWorld(), BA(s, e);
    });
    e != null && e.id && (this.uuid = e.id), this.config = _({ defaultAction: !0, occlusionVisibility: !0, occlusionMode: "translucence" }, i), e && (_e((s = this.config) == null ? void 0 : s.occlusionMode) && (e.style = de(_({}, e.style), { occlusionMode: this.config.occlusionMode })), _e((r = this.config) == null ? void 0 : r.occlusionVisibility) && (e.style = de(_({}, e.style), { occlusionVisibility: this.config.occlusionVisibility }))), dt("esc", () => {
      this.stopCreating();
    }), this.config.defaultAction && (dt("backspace, delete", () => {
      this.selected && this.delete();
    }), this.on("click", () => {
      var o;
      this.editing || (this.select({ only: !0 }), this.editor.enable(), (o = this.parent) == null || o.children.forEach((a) => {
        var l;
        a instanceof Vi && a !== this && ((l = a._editor) == null || l.disable());
      }));
    }), dt("esc", () => {
      this.selected && this.unselect();
    }));
  }
  get editing() {
    return this.pointSelector.enabled;
  }
  get baseData() {
    return {
      id: this.uuid,
      type: this.type
    };
  }
  get pointSelector() {
    return ct.modules.pointSelector;
  }
  /**
   * @description 撤销
   */
  undo() {
    throw new Error("Method not implemented.");
  }
  /**
   * @description 重做
   */
  redo() {
    throw new Error("Method not implemented.");
  }
  /**
   * @description 是否可以撤销
   */
  canUndo() {
    throw new Error("Method not implemented.");
  }
  /**
   * @description 是否可以重做
   */
  canRedo() {
    throw new Error("Method not implemented.");
  }
  /**
   * @description 停止创建当前物体，等同于`esc`
   */
  stopCreating() {
    ct.modules.pointSelector.disable();
  }
  /**
   * @description 从场景中删除当前物体，并且移除事件监听
   */
  delete() {
    var e;
    this.stopCreating(), this.removeFromParent(), this.off(), (e = this.editor) == null || e.disable();
  }
  /**
   * @description 选择当前物体
   * @param params.only 只选择当前物体，自动取消选择其他物体；默认 `false`
   *
   */
  select(e = { only: !1 }) {
    if (this.selected)
      return;
    this.selected = !0, this.highlight(), vc.has(this.parent.uuid) || vc.set(this.parent.uuid, []);
    const i = vc.get(this.parent.uuid);
    i.push(this), e.only && (i == null || i.forEach((s) => {
      s !== this && s.unselect();
    }));
  }
  /**
   * @description 取消选择当前物体
   */
  unselect() {
    var e;
    this.selected && (this.selected = !1, this.unhighlight(), (e = this._editor) == null || e.disable());
  }
  /**
   * @description 高亮当前物体
   */
  highlight() {
  }
  /**
   * @description 取消高亮当前物体
   */
  unhighlight() {
  }
  /**
   * @description 显示删除按钮
   */
  showDeleteButton(e, i) {
    ct.modules.cursor.showDeleteButton({ clientX: e, clientY: i, container: document.body, onClick: () => this.delete() }), ct.modules.five.once("cameraUpdate", () => {
      ct.modules.cursor.removeDeleteButton();
    });
  }
}
class xl extends ri {
  constructor(e) {
    super();
    u(this, "hooks", new Pt());
    u(this, "originObject");
    this.originObject = e;
  }
  /**
   * @description: 开启编辑器
   */
  enable() {
    this.originObject.add(this);
  }
  /**
   * @description: 禁用编辑器
   */
  disable() {
    this.originObject.remove(this);
  }
}
class Uo extends xl {
  constructor(e, i) {
    super(e);
    u(this, "objectHelperConfig");
    u(this, "onObjectUpdate", () => {
      this.hooks.emit("objectUpdate");
    });
    this.objectHelperConfig = i;
  }
  get helper() {
    var e;
    return (e = ct.modules.object3DHelper.getObject3DHelper(this.originObject)) == null ? void 0 : e.helper;
  }
  enable() {
    super.enable();
    const e = typeof this.objectHelperConfig == "function" ? this.objectHelperConfig() : this.objectHelperConfig;
    ct.modules.object3DHelper.addObject3DHelper(this.originObject, _({ positionFrom: "boundingBox" }, e));
    const i = ct.modules.object3DHelper.getObject3DHelper(this.originObject).helper;
    i.hooks.on("move", this.onObjectUpdate), i.hooks.on("rotate", this.onObjectUpdate), i.hooks.on("scale", this.onObjectUpdate);
  }
  disable() {
    var e, i, s;
    super.disable(), (e = this.helper) == null || e.hooks.off("move", this.onObjectUpdate), (i = this.helper) == null || i.hooks.off("rotate", this.onObjectUpdate), (s = this.helper) == null || s.hooks.off("scale", this.onObjectUpdate), ct.modules.object3DHelper.removeObject3DHelper(this.originObject);
  }
  initialHelperMatrix() {
    var e;
    (e = this.helper) == null || e.initialHelperMatrix();
  }
}
class md extends xl {
  constructor(e) {
    super(e);
    u(this, "draggingPoints", []);
    u(this, "onDragstart", (e) => {
      const i = e.target;
      this.draggingPoints = this.pointMeshes.filter((s) => s.position.equals(i.position));
    });
    u(this, "onDragend", (e) => {
      this.draggingPoints = [];
    });
  }
  get pointMeshes() {
    return this.children.filter((e) => e instanceof ts);
  }
  get pointHandles() {
    return this.children;
  }
  enable() {
    super.enable(), this.points.filter(_e).forEach((e) => {
      const i = new ts();
      i.visible = !1, i.position.copy(e), i.draggable = !0, ct.modules.fiveDomEvents.addEventListener(i, "drag", this.onDrag), ct.modules.fiveDomEvents.addEventListener(i, "dragstart", this.onDragstart), ct.modules.fiveDomEvents.addEventListener(i, "dragend", this.onDragend), this.add(i);
    });
  }
  disable() {
    super.disable(), this.removeChildren();
  }
}
class J6 extends md {
  constructor(e) {
    super(e);
    u(this, "onDrag", (e) => {
      if (!this.draggingPoints || this.draggingPoints.length === 0)
        return;
      const i = _o(ct.modules.five, e.raycaster);
      this.draggingPoints.forEach((s) => s.position.copy(i.point)), this.originObject.lineMesh.setPoints(this.pointMeshes.map((s) => s.position));
    });
  }
  get points() {
    return this.originObject.lineMesh.points;
  }
}
class q6 extends md {
  constructor(e) {
    super(e);
    u(this, "onDrag", (e) => {
      if (!this.draggingPoints || this.draggingPoints.length === 0)
        return;
      const i = _o(ct.modules.five, e.raycaster);
      this.draggingPoints.forEach((s) => s.position.copy(i.point)), this.originObject.polyLineMesh.setPoints(this.pointMeshes.map((s) => s.position));
    });
  }
  get points() {
    return this.originObject.polyLineMesh.points;
  }
}
function mi(n) {
  return Array.isArray(n) ? n.map((t) => [t.x, t.y, t.z]) : [n.x, n.y, n.z];
}
class Zm extends Vi {
  constructor(e, i) {
    super(e, i);
    u(this, "type", "Polyline");
    u(this, "polyLineMesh");
    u(this, "_editor");
    u(this, "creatingObject");
    e && (this.polyLineMesh = new Un(_(_({}, e.style), e)), this.add(this.polyLineMesh));
  }
  get editor() {
    return this._editor || (this._editor = new q6(this)), this._editor;
  }
  get data() {
    return de(_({}, this.baseData), {
      points: mi(this.applyObjectMatrixWorld(this.polyLineMesh.points)),
      style: {
        lineColor: new P.Color(this.polyLineMesh.lineColor).getHex(),
        lineWidth: this.polyLineMesh.lineWidth,
        dashed: this.polyLineMesh.dashed
      }
    });
  }
  setData(e) {
    e.points && this.polyLineMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Qe))), this.polyLineMesh.setStyle(e.style);
  }
  highlight() {
    var e;
    (e = this.polyLineMesh) == null || e.highlight();
  }
  unhighlight() {
    var e;
    (e = this.polyLineMesh) == null || e.unhighlight();
  }
  canUndo() {
    var e;
    (e = this.creatingObject) == null || e.canUndo();
  }
  canRedo() {
    var e;
    (e = this.creatingObject) == null || e.canRedo();
  }
  undo() {
    var e;
    (e = this.creatingObject) == null || e.undo();
  }
  redo() {
    var e;
    (e = this.creatingObject) == null || e.redo();
  }
  create(e) {
    return $(this, null, function* () {
      this.removeChildren();
      const i = new Un(e);
      this.polyLineMesh = i, this.add(this.polyLineMesh), this.creatingObject = K6(i, this.pointSelector, e), yield this.creatingObject.finished, this.config.defaultAction && this.editor.enable();
    });
  }
}
function K6(n, t, e) {
  var T;
  const i = n.parent;
  if (!i)
    return;
  const { promise: s, resolve: r, reject: o } = Vs(), a = (T = e == null ? void 0 : e.limit) != null ? T : "none", l = new Rs(n.style);
  i.add(l);
  const c = new Rs(de(_({}, n.style), { dashed: !0, lengthEnable: !1 }));
  i.add(c), t.enable();
  const h = [];
  let d, f, g;
  const p = [], m = () => h.length > 0, v = () => p.length > 0, b = () => {
    m() && (p.push(h.pop()), n.setPoints(h), k(g), t.pointSelectorHelper.magnifier.render());
  }, w = () => {
    v() && (h.push(p.pop()), n.setPoints(h), k(g), t.pointSelectorHelper.magnifier.render());
  }, x = (S) => {
    p.length = 0;
    const V = h.length === 0 ? S.point : d.clone();
    h.push(V), n.setPoints(h);
  }, k = (S) => {
    const V = () => {
      l.setPoints([]), c.setPoints([]), d = null;
    };
    if (!S || (g = S, !(h != null && h.length)))
      return V();
    const z = h.at(-1).clone();
    a === "none" ? (d = S.point, l.setPoints([z, d])) : a === "xoz" ? (f = f != null ? f : new P.Plane().setFromNormalAndCoplanarPoint(new P.Vector3(0, 1, 0), h[0]), t.plane = f, d = f.projectPoint(S.point, new P.Vector3()), l.setPoints([z, d]), c.setPoints([d, S.point])) : a === "y" && (h.length === 1 ? (d = S.point, l.setPoints([z, d])) : (f = f != null ? f : new P.Plane().setFromCoplanarPoints(h[0], h[1], new P.Vector3(0, 1, 0).add(h[0])), t.plane = f, d = f.projectPoint(S.point, new P.Vector3()), l.setPoints([z, d]), c.setPoints([d, S.point])));
  };
  return t.on("select", x), t.on("intersectionUpdate", k), t.on("disable", () => {
    if (t.off("select", x), t.off("intersectionUpdate", k), t.plane = null, i.remove(l), i.remove(c), h.length < 2)
      return i.remove(n), o(new Error("Cancelled"));
    r();
  }), {
    finished: s,
    canUndo: m,
    canRedo: v,
    undo: b,
    redo: w
  };
}
class $6 extends xl {
  constructor(e) {
    super(e);
    u(this, "onDrag", (e) => {
      var s;
      const i = _o(ct.modules.five, e.raycaster);
      (s = this.originObject.pointMesh) == null || s.position.copy(i.point);
    });
  }
  enable() {
    super.enable(), this.originObject.draggable = !0, this.originObject.on("drag", this.onDrag);
  }
  disable() {
    super.disable(), this.originObject.draggable = !1, this.originObject.off("drag", this.onDrag);
  }
}
class Jm extends Vi {
  constructor(e, i) {
    super(e, i);
    u(this, "type", "Point");
    u(this, "pointMesh");
    u(this, "_editor");
    e && (this.pointMesh = new ts(_(_({}, e.style), e)), this.add(this.pointMesh));
  }
  get editor() {
    return this._editor || (this._editor = new $6(this)), this._editor;
  }
  get data() {
    return de(_({}, this.baseData), {
      point: mi(this.applyObjectMatrixWorld(this.pointMesh.position)),
      style: {
        color: this.pointMesh.color.getHex(),
        size: this.pointMesh.size
      }
    });
  }
  setData(e) {
    e.point && this.pointMesh.position.copy(Qe(e.point)), this.pointMesh.setStyle(e.style);
  }
  highlight() {
    var e;
    (e = this.pointMesh) == null || e.highlight();
  }
  unhighlight() {
    var e;
    (e = this.pointMesh) == null || e.unhighlight();
  }
  /**
   * @description: 设置颜色
   * @param {Color} style.color
   * @param {number} style.size
   */
  setStyle(e) {
    this.pointMesh.setStyle(e);
  }
  /**
   * @description: 创建点
   */
  create(e) {
    return $(this, null, function* () {
      this.pointMesh && this.remove(this.pointMesh), this.add(this.pointMesh = new ts(e)), yield iv(this.pointMesh, this.pointSelector), this.config.defaultAction && this.editor.enable();
    });
  }
}
function iv(n, t) {
  return new Promise((e, i) => {
    t.enable(), n.visible = !1;
    const s = (l) => {
      l && (n.visible = !0, n.position.copy(l.point));
    }, r = (l) => {
      l && (n.visible = !0, n.position.copy(l.point), o());
    }, o = () => {
      t.off("select", r), t.off("disable", a), t.off("intersectionUpdate", s), t.disable(), e();
    }, a = () => {
      t.off("select", r), t.off("disable", a), t.off("intersectionUpdate", s), n.removeFromParent(), i(new Error("Cancelled"));
    };
    t.on("intersectionUpdate", s), t.on("disable", a), t.once("select", r);
  });
}
class th extends Vr {
  constructor(e) {
    const r = e != null ? e : {}, { points: i } = r, s = Rn(r, ["points"]);
    super();
    u(this, "name", "PolygonWithEdgeMesh");
    u(this, "line", new Rs());
    i && this.setPoints(i), s && this.setStyle(s);
  }
  get style() {
    return de(_({}, super.style), {
      lineWidth: this.lineWidth,
      lineColor: this.lineColor
    });
  }
  get lineWidth() {
    return this.line.lineWidth;
  }
  get lineColor() {
    return this.line.lineColor;
  }
  raycast(e, i) {
    return this.children.forEach((s) => {
      ah(s, e, i, !0);
    }), !1;
  }
  setPoints(e, i) {
    super.setPoints(e, _({ closed: !0 }, i)), this.points && (this.line.setPoints(this.points, _({ closed: !0 }, i)), this.addIfNotExists(this.line));
  }
  setStyle(e) {
    super.setStyle(e), e.lineOpacity !== void 0 ? this.line.setStyle(de(_({}, e), {
      // 强制设置line的lineOpacity
      lineOpacity: e.lineOpacity
    })) : this.line.setStyle(e), this.needsRender = !0;
  }
  highlight() {
    super.highlight(), this.line.highlight();
  }
  unhighlight() {
    super.unhighlight(), this.line.unhighlight();
  }
}
class ih extends th {
  constructor() {
    super(...arguments);
    u(this, "name", "AreaMesh");
  }
}
class ex extends md {
  constructor(e) {
    super(e);
    u(this, "onDrag", (e) => {
      if (!this.draggingPoints || this.draggingPoints.length === 0)
        return;
      const i = _o(ct.modules.five, e.raycaster), s = this.originObject.areaMesh.projectPoint(i.point);
      this.draggingPoints.forEach((r) => r.position.copy(s)), this.originObject.areaMesh.setPoints(this.pointMeshes.map((r) => r.position));
    });
  }
  get points() {
    return this.originObject.areaMesh.points;
  }
}
class qm extends Vi {
  constructor(e, i) {
    super(e, i);
    u(this, "type", "Polygon");
    u(this, "areaMesh");
    u(this, "_editor");
    u(this, "creatingObject");
    e && (this.areaMesh = new ih(_(_({}, e.style), e)), this.add(this.areaMesh));
  }
  get editor() {
    return this._editor || (this._editor = new ex(this)), this._editor;
  }
  get data() {
    return this.updateMatrixWorld(), de(_({}, this.baseData), {
      points: mi(this.applyObjectMatrixWorld(this.areaMesh.points)),
      style: {
        color: this.areaMesh.color.getHex(),
        lineColor: this.areaMesh.lineColor.getHex(),
        lineWidth: this.areaMesh.lineWidth
      }
    });
  }
  setData(e) {
    e.points && this.areaMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Qe))), this.areaMesh.setStyle(e.style);
  }
  highlight() {
    var e;
    (e = this.areaMesh) == null || e.highlight();
  }
  unhighlight() {
    var e;
    (e = this.areaMesh) == null || e.unhighlight();
  }
  canUndo() {
    var e;
    (e = this.creatingObject) == null || e.canUndo();
  }
  canRedo() {
    var e;
    (e = this.creatingObject) == null || e.canRedo();
  }
  undo() {
    var e;
    (e = this.creatingObject) == null || e.undo();
  }
  redo() {
    var e;
    (e = this.creatingObject) == null || e.redo();
  }
  create(e) {
    return $(this, null, function* () {
      this.children.forEach((s) => {
        s.parent === this && this.remove(s);
      }), this.children.length = 0;
      const i = new ih(e);
      this.areaMesh = i, this.add(this.areaMesh), this.creatingObject = gd(this.areaMesh, this.pointSelector, e), yield this.creatingObject.finished, this.config.defaultAction && this.editor.enable();
    });
  }
}
function gd(n, t, e) {
  var z;
  const { promise: i, resolve: s, reject: r } = Vs(), o = n.parent;
  if (!o) {
    r(new Error("No container"));
    return;
  }
  const a = (z = e == null ? void 0 : e.limit) != null ? z : "none", l = new Rs(n.style);
  o == null || o.add(l);
  const c = new Rs(de(_({}, n.style), { dashed: !0, lengthEnable: !1 }));
  o == null || o.add(c), t.enable();
  const h = [];
  let d, f, g = !1, p;
  const m = [], v = () => h.length > 0, b = () => m.length > 0, w = () => {
    v() && (m.push(h.pop()), T(p), t.pointSelectorHelper.magnifier.render());
  }, x = () => {
    b() && (h.push(m.pop()), T(p), t.pointSelectorHelper.magnifier.render());
  }, k = (O) => {
    m.length = 0;
    const A = h.length === 0 ? O.point : d.clone();
    h.push(A), n.setPoints(h, { closed: !1 }), g && (S(), s());
  }, T = (O) => {
    const A = () => {
      l.setPoints([]), c.setPoints([]), n.setPoints(h), t.pointSelectorHelper.magnifier.render();
    };
    if (!O || (p = O, !(h != null && h.length)))
      return A();
    const C = h.at(-1).clone();
    if (h.length < 3 && (a === "none" ? (d = O.point, l.setPoints([C, d]), c.setPoints([])) : a === "xoz" ? (f = f != null ? f : new P.Plane().setFromNormalAndCoplanarPoint(new P.Vector3(0, 1, 0), h[0]), t.plane = f, d = f.projectPoint(O.point, new P.Vector3()), l.setPoints([C, d]), c.setPoints([d, O.point])) : a === "y" && (h.length === 1 ? (d = O.point, l.setPoints([C, d]), c.setPoints([])) : (f = f != null ? f : new P.Plane().setFromCoplanarPoints(h[0], h[1], new P.Vector3(0, 1, 0).add(h[0])), t.plane = f, d = f.projectPoint(O.point, new P.Vector3()), l.setPoints([C, d]), c.setPoints([d, O.point])))), h.length >= 3) {
      d = n.projectPoint(O.point);
      const I = h[0], E = 0.2;
      I.distanceTo(d) < E || I.distanceTo(O.point) < E ? (d = I, O.point.copy(I), t.pointSelectorHelper.updateWithIntersect(O, { emitEvent: !1 }), g = !0) : g = !1, l.setPoints([C, d]), c.setPoints([d, O.point]);
    }
    h.length >= 2 ? (n.setPoints([...h, d], { closed: !1 }), n.line.setPoints(n.points.slice(0, -1)), n.isBlank ? (t.cursorError = !0, l.setStyle({ lineColor: 16734553 }), c.setStyle({ lineColor: 16734553 })) : (t.cursorError = !1, l.setStyle({ lineColor: n.lineColor }), c.setStyle({ lineColor: n.lineColor }))) : n.setPoints([]);
  }, S = () => {
    t.off("select", k), t.off("intersectionUpdate", T), t.off("disable", V), t.plane = null, t.disable(), o == null || o.remove(l, c);
  }, V = () => {
    S(), o == null || o.remove(n, c, l), r(new Error("Cancelled"));
  };
  return t.on("select", k), t.on("intersectionUpdate", T), t.on("disable", V), {
    finished: i,
    canUndo: v,
    canRedo: b,
    undo: w,
    redo: x
  };
}
function tx(n) {
  const t = [...n], e = [];
  for (let i = 0; i < t.length - 2; i++)
    e.push(0, i + 1, i + 2);
  return e;
}
function ix(n) {
  const t = n.map((i) => new P.Vector3(i[0], i[1], i[2]));
  return F0(t);
}
class nx extends P.BufferGeometry {
  constructor(e) {
    super();
    u(this, "bottomPositions", []);
    u(this, "topPosition", []);
    u(this, "_type", "Concave");
    e && this.setPosition(e);
  }
  /**
   * @description 设置底面和顶面的位置
   * @param params.bottomPositions 底面多边形的有序顶点，顺时针或逆时针均可
   * @param params.topPosition 底面多边形的第一个点对应的顶面的顶点
   * @param params.type 棱柱的类型，凹多边形（Concave）或凸多边形（Convex），默认为凹多边形。如果可以确定是凸多边形，建议设置为凸多边形，性能更好
   */
  setPosition(e) {
    var l, c, h;
    const i = (l = e.bottomPositions) != null ? l : this.bottomPositions, s = (c = e.topPosition) != null ? c : this.topPosition;
    if (this._type = (h = e.type) != null ? h : this._type, this.bottomPositions = i, this.topPosition = s, !i || i.length < 3) {
      console.error("PrismGeometry: Invalid parameters", i, s, e), this.bottomPositions = [], this.setAttribute("position", new P.BufferAttribute(new Float32Array([]), 3));
      return;
    }
    const r = [], o = [];
    o.push(...i), o[0][0] === o.at(-1)[0] && o[0][1] === o.at(-1)[1] && o[0][2] === o.at(-1)[2] && (o.length -= 1);
    const a = this._type === "Concave" ? ix(o) : tx(o);
    if (r.push(...a), s && s.length === 3) {
      const d = [s[0] - i[0][0], s[1] - i[0][1], s[2] - i[0][2]], f = o.map((p) => [p[0] + d[0], p[1] + d[1], p[2] + d[2]]);
      o.push(...f);
      const g = r.map((p) => p + o.length / 2);
      r.push(...g);
      for (let p = 0; p < o.length / 2 - 1; p++)
        r.push(p, p + 1, p + o.length / 2), r.push(p + 1, p + o.length / 2 + 1, p + o.length / 2);
      r.push(0, o.length / 2, o.length / 2 - 1), r.push(o.length / 2, o.length - 1, o.length / 2 - 1);
    }
    this.setAttribute("position", new P.Float32BufferAttribute(o.flat(), 3)), this.setIndex(r), this.computeBoundingSphere();
  }
}
class xs extends ri {
  constructor(e) {
    super();
    u(this, "name", "PrismMesh");
    u(this, "_geometryInfoCache");
    u(this, "geometryInfoNeedUpdate", !0);
    u(this, "edgeMesh", new fi());
    u(this, "prismMesh", new Cl());
    u(this, "paramStyle");
    this.prismMesh.name = "PrismMesh", this.prismMesh.geometry = new nx(), this.edgeMesh.name = "EdgeMesh", this.addIfNotExists(this.prismMesh, this.edgeMesh), e && this.setPoints(e), this.setStyle(e);
  }
  get topPosition() {
    return new P.Vector3().fromArray(this.prismMesh.geometry.topPosition);
  }
  get bottomPositions() {
    return this.prismMesh.geometry.bottomPositions.map((e) => new P.Vector3().fromArray(e));
  }
  get topPositions() {
    const e = this.bottomPositions[0].clone().sub(this.topPosition);
    return this.bottomPositions.map((i) => i.clone().sub(e));
  }
  get style() {
    return {
      color: this.color,
      lineColor: this.lineColor,
      lineWidth: this.lineWidth,
      opacity: this.opacity,
      occlusionVisibility: this.occlusionVisibility,
      occlusionMode: this.occlusionMode
    };
  }
  get opacity() {
    return this.prismMesh.opacity;
  }
  get occlusionVisibility() {
    return this.prismMesh.occlusionVisibility;
  }
  get occlusionMode() {
    return this.prismMesh.occlusionMode;
  }
  /**
   * @deprecated notice: please use specified center instead, such as `localCenter` or `worldCenter`
   */
  get center() {
    return this.localCenter.clone();
  }
  get localCenter() {
    var e;
    return (e = this.geometryInfo.center.clone()) != null ? e : new P.Vector3(9999, 9999, 9999);
  }
  get geometryInfo() {
    if (this.geometryInfoNeedUpdate) {
      this.geometryInfoNeedUpdate = !1;
      const e = this.prismMesh.geometry.bottomPositions, i = this.prismMesh.geometry.topPosition;
      if (!e || e.length < 3 || !i) {
        this._geometryInfoCache = void 0;
        return;
      }
      const s = e.map((c, h) => h >= e.length - 2 ? null : [
        new P.Vector3().fromArray(e[0]),
        new P.Vector3().fromArray(e[h + 1]),
        new P.Vector3().fromArray(e[h + 2])
      ]).filter(Boolean);
      if (s.length === 0) {
        this._geometryInfoCache = void 0;
        return;
      }
      let r = 0, o = new P.Vector3();
      for (const [c, h, d] of s) {
        const f = Qh(c, h, d), g = Q0(c, h, d, f);
        r += f, o.add(g);
      }
      o = o.divideScalar(r);
      const a = new P.Vector3().fromArray(i).sub(new P.Vector3().fromArray(e[0])), l = o.clone().add(a.divideScalar(2));
      this._geometryInfoCache = { center: l };
    }
    return this._geometryInfoCache;
  }
  get worldCenter() {
    return this.updateMatrixWorld(), this.localToWorld(this.localCenter);
  }
  get color() {
    return this.prismMesh.color;
  }
  get lineWidth() {
    return this.edgeMesh.style.lineWidth;
  }
  get lineColor() {
    return this.edgeMesh.color;
  }
  setStyle(e = {}) {
    this.paramStyle = _(_({}, this.paramStyle), e), this.prismMesh.setStyle(this.paramStyle), this.edgeMesh.setStyle(this.paramStyle);
  }
  setPoints(e) {
    var i;
    this.prismMesh.geometry.setPosition({
      bottomPositions: (i = e.points) == null ? void 0 : i.map(Qe).map((s) => s.toArray()),
      topPosition: e.heightPoint ? Qe(e.heightPoint).toArray() : void 0
    }), this.edgeMesh.geometry = new Ia().fromEdgesGeometry(new P.EdgesGeometry(this.prismMesh.geometry)), this.geometryInfoNeedUpdate = !0;
  }
  highlight() {
    this.prismMesh.highlight();
  }
  unhighlight() {
    this.prismMesh.unhighlight();
  }
  raycast(e, i) {
    return this.children.forEach((s) => ah(s, e, i, !0)), !1;
  }
}
class nv extends Uo {
  constructor(t) {
    super(t, () => ({
      positionFrom: () => t.worldCenter,
      yAxis: () => t.up,
      scaleHelper: {
        enable: !0,
        positions: () => {
          const e = t.bottomPositions, i = t.topPosition, s = new P.Vector3().subVectors(i, e[0]), r = t.geometryInfo.center, o = r.clone().sub(s.clone().divideScalar(2)), a = r.clone().add(s.clone().divideScalar(2));
          return [
            {
              id: "top",
              handlePosition: a,
              basePosition: o
            },
            {
              id: "bottom",
              handlePosition: o,
              basePosition: a
            }
          ];
        },
        scaleCallback: (e) => {
          const { intersectPoint: i, scalePosition: s } = e, { id: r, basePosition: o, handlePosition: a } = s;
          if (r === "top") {
            const l = i.clone().sub(o);
            t.setPoints({ heightPoint: t.bottomPositions[0].clone().add(l) });
          } else if (r === "bottom") {
            const l = i.clone().sub(o);
            t.setPoints({
              points: t.topPositions.map((c) => c.clone().add(l))
            });
          }
        }
      }
    }));
  }
}
class Km extends Vi {
  constructor(e, i) {
    super(e, i);
    u(this, "type", "Prism");
    u(this, "prismMesh");
    u(this, "_editor");
    e && (this.prismMesh = new xs(_(_({}, e.style), e)), this.add(this.prismMesh));
  }
  get editor() {
    return this._editor || (this._editor = new nv(this.prismMesh)), this._editor;
  }
  get data() {
    return de(_({}, this.baseData), {
      points: mi(this.applyObjectMatrixWorld(this.prismMesh.bottomPositions, this.prismMesh)),
      heightPoint: mi(this.applyObjectMatrixWorld(this.prismMesh.topPosition, this.prismMesh)),
      style: {
        color: this.prismMesh.color.getHex(),
        lineWidth: this.prismMesh.lineWidth,
        lineColor: this.prismMesh.lineColor.getHex()
      }
    });
  }
  setData(e) {
    this.prismMesh.setPoints({
      points: e.points ? this.applyObjectReversalMatrixWorld(e.points.map(Qe), this.prismMesh) : void 0,
      heightPoint: e.heightPoint ? this.applyObjectReversalMatrixWorld(Qe(e.heightPoint), this.prismMesh) : void 0
    }), this.prismMesh.setStyle(e.style), this._editor && this._editor.initialHelperMatrix();
  }
  highlight() {
    var e;
    (e = this.prismMesh) == null || e.highlight();
  }
  unhighlight() {
    var e;
    (e = this.prismMesh) == null || e.unhighlight();
  }
  create(e) {
    return $(this, null, function* () {
      this.prismMesh = new xs(e), this.add(this.prismMesh), yield sv(this.prismMesh, this.pointSelector), this.config.defaultAction && this.editor.enable();
    });
  }
}
function sv(n, t) {
  return $(this, null, function* () {
    const e = n.parent, i = new ih(n.style);
    e.add(i), yield gd(i, t).finished, e.remove(i), n.setPoints({ points: i.points });
    const s = new fi();
    s.name = "LineHelper", e.add(s);
    const r = i.points.at(-1), o = as(i.points), a = r.clone().add(o.clone().multiplyScalar(100)), l = r.clone().sub(o.clone().multiplyScalar(100));
    return s.setPoints([a, l]), t.enable(), new Promise((c, h) => {
      const d = (m) => {
        g(), c();
      }, f = (m) => {
        if (!(m != null && m.raycaster))
          return;
        const v = Yn({
          raycaster: m.raycaster,
          line: new P.Line3(a, l)
        });
        v && n.setPoints({ heightPoint: v });
      }, g = () => {
        t.off("select", d), t.off("intersectionUpdate", f), t.off("disable", p), e.remove(s), t.disable();
      }, p = () => {
        g(), e.remove(n), h(new Error("Cancelled"));
      };
      t.on("select", d), t.on("intersectionUpdate", f), t.on("disable", p);
    });
  });
}
class rv extends Uo {
  constructor(t) {
    super(t, () => ({
      yAxis: () => {
        const e = t.points;
        return as(e).normalize();
      },
      zAxis: () => {
        const e = t.points;
        return e[0].clone().sub(e[1]).normalize();
      },
      scaleHelper: {
        enable: !0,
        positions: () => {
          const e = t.points, i = e[0].clone().lerp(e[3], 0.5), s = e[1].clone().lerp(e[2], 0.5), r = e[0].clone().lerp(e[1], 0.5), o = e[3].clone().lerp(e[2], 0.5);
          return [
            {
              id: "left",
              handlePosition: i,
              basePosition: s
            },
            {
              id: "right",
              handlePosition: s,
              basePosition: i
            },
            {
              id: "top",
              handlePosition: r,
              basePosition: o
            },
            {
              id: "bottom",
              handlePosition: o,
              basePosition: r
            }
          ];
        },
        scaleCallback: (e) => {
          const { intersectPoint: i, scalePosition: s } = e, { id: r, basePosition: o } = s, a = i.clone().sub(o), l = t.points;
          r === "top" ? t.setPoints([
            // 2,3 不变
            l[3].clone().add(a),
            l[2].clone().add(a),
            l[2],
            l[3]
          ]) : r === "bottom" ? t.setPoints([
            // 0,1 不变
            l[0],
            l[1],
            l[1].clone().add(a),
            l[0].clone().add(a)
          ]) : r === "left" ? t.setPoints([
            // 1,2 不变
            l[1].clone().add(a),
            l[1],
            l[2],
            l[2].clone().add(a)
          ]) : r === "right" && t.setPoints([
            // 0,3 不变
            l[0],
            l[0].clone().add(a),
            l[3].clone().add(a),
            l[3]
          ]);
        }
      }
    }));
  }
}
class sx extends P.BufferGeometry {
  constructor(e) {
    super();
    u(this, "name", "RectangleGeometry");
    u(this, "points");
    if (e.length !== 4) {
      console.error("Invalid number of points, it's not a rectangle");
      return;
    }
    this.points = e.slice(0, 4), this.setAttribute("position", new P.BufferAttribute(new Float32Array(this.points.flatMap((i) => i.toArray())), 3)), this.setIndex(new P.BufferAttribute(new Uint16Array([0, 1, 2, 0, 2, 3]), 1));
  }
}
class vd extends Vr {
  constructor(e) {
    super(e);
    u(this, "name", "RectangleMesh");
  }
  get color() {
    return this.meshFont.material.color;
  }
  setPoints(e) {
    const i = e.map(Qe).filter(_e);
    if (i.length < 3) {
      console.error("Invalid position");
      return;
    }
    if (e.length === 3) {
      const [s, r, o] = i, a = s.clone().add(o).sub(r);
      i.push(a);
    }
    this.points = i, this.geometry = new sx(i), this.planeHelperNeedUpdate = !0, this.geometryInfoNeedUpdate = !0;
  }
}
class nl extends vd {
  constructor(e) {
    const r = e != null ? e : {}, { points: i } = r, s = Rn(r, ["points"]);
    super();
    u(this, "name", "RectangleWithEdgeMesh");
    u(this, "line", new Rs());
    i && this.setPoints(i), s && this.setStyle(s);
  }
  get style() {
    return _(_({}, super.style), this.line.style);
  }
  get lineWidth() {
    return this.line.lineWidth;
  }
  get lineColor() {
    return this.line.lineColor;
  }
  setPoints(e) {
    super.setPoints(e), this.points && (this.line.setPoints([this.points[0], this.points[1], this.points[2], this.points[3], this.points[0]]), this.addIfNotExists(this.line));
  }
  setStyle(e) {
    super.setStyle(e), this.line.setStyle(e);
  }
  highlight() {
    super.highlight(), this.line.highlight();
  }
  unhighlight() {
    super.unhighlight(), this.line.unhighlight();
  }
}
function ov(n, t) {
  const e = as(n), i = $t(...n), s = t.clone().sub(i);
  return e.dot(s) >= 0 ? n : n.slice().reverse();
}
class $m extends Vi {
  constructor(e, i) {
    super(e, i);
    u(this, "type", "Rectangle");
    u(this, "rectangleMesh");
    u(this, "_editor");
    e && (this.rectangleMesh = new nl(_(_({}, e.style), e)), this.add(this.rectangleMesh));
  }
  get editor() {
    return this._editor || (this._editor = new rv(this.rectangleMesh)), this._editor;
  }
  get data() {
    return de(_({}, this.baseData), {
      points: mi(this.applyObjectMatrixWorld(this.rectangleMesh.points, this.rectangleMesh)),
      style: {
        color: this.rectangleMesh.color.getHex(),
        opacity: this.rectangleMesh.opacity,
        lineWidth: this.rectangleMesh.lineWidth,
        lineColor: this.rectangleMesh.lineColor.getHex()
      }
    });
  }
  setData(e) {
    e.points && this.rectangleMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Qe), this.rectangleMesh)), this.rectangleMesh.setStyle(e.style), this._editor && this._editor.initialHelperMatrix();
  }
  highlight() {
    var e;
    (e = this.rectangleMesh) == null || e.highlight();
  }
  unhighlight() {
    var e;
    (e = this.rectangleMesh) == null || e.unhighlight();
  }
  create(e) {
    return $(this, null, function* () {
      this.removeChildren();
      const i = new nl(e);
      this.rectangleMesh = i, this.add(this.rectangleMesh), yield Ad(this.rectangleMesh, this.pointSelector, e), this.config.defaultAction && this.editor.enable();
    });
  }
}
function Ad(n, t, e) {
  var s;
  return ((s = e == null ? void 0 : e.drawMethod) != null ? s : "diagonal") === "diagonal" ? ox(n, t, e) : ax(n, t, e);
}
function rx(n, t) {
  const e = [];
  return n.scene.traverse((i) => {
    var s;
    if (i.visible && !((s = t == null ? void 0 : t.excludes) != null && s.includes(i)) && (i instanceof vd || i instanceof Vr)) {
      const r = i.points.map((o) => {
        const a = new P.Face3(o.x, o.y, o.z, i.normal);
        return i.style.occlusionVisibility && (a.IsAlwaysVisible = !0), a;
      });
      e.push(...r);
    }
  }), e;
}
function ox(n, t, e) {
  var x;
  const { promise: i, reject: s, resolve: r } = Vs(), o = n.parent;
  if (!o)
    return s(new Error("No container"));
  const a = (x = e == null ? void 0 : e.limit) != null ? x : "none", l = new Un(de(_({}, n.style), { dashed: !0 })), c = new Un(de(_({}, n.style), { dashed: !0, lengthEnable: !1 })), h = new Un(de(_({}, n.style), { dashed: !1, lengthEnable: !1 }));
  o.add(l, h, c), t.enable();
  const d = [];
  let f = new P.Vector3(), g = new P.Vector3();
  const p = new P.Plane(), m = () => {
    d.push(f.clone()), d.length === 1 ? (a === "xoz" && p.setFromNormalAndCoplanarPoint(new P.Vector3(0, 1, 0), d[0]), a === "none" && p.setFromNormalAndCoplanarPoint(g, d[0])) : d.length === 2 ? a === "y" || a === "xoz" ? (b(), r()) : h.setPoints([d[0], d[1]]) : d.length === 3 && (b(), r());
  }, v = (k) => {
    var S, V;
    if (!(k != null && k.raycaster))
      return;
    const T = (S = d.at(-1)) == null ? void 0 : S.clone();
    if (d.length === 0) {
      f = k.point.clone(), g = (V = k.face) == null ? void 0 : V.normal;
      return;
    }
    if (d.length === 1 && a === "y") {
      const O = new P.Line3(new P.Vector3(0, 1, 0).add(d[0]), new P.Vector3(0, -1, 0).add(d[0])).closestPointToPoint(k.point, !1, new P.Vector3());
      n.setPoints([d[0], O, k.point]);
      return;
    }
    if (d.length === 1 && a === "xoz") {
      const z = new P.Line3(new P.Vector3(1, 0, 0).add(d[0]), new P.Vector3(-1, 0, 0).add(d[0])), O = k.raycaster.ray.intersectPlane(p, new P.Vector3()), A = z.closestPointToPoint(O, !1, new P.Vector3());
      n.setPoints([d[0], A, O]);
      return;
    }
    if (d.length === 1 && a === "none") {
      p ? (f = k.raycaster.ray.intersectPlane(p, new P.Vector3()), c.setPoints([f, k.point])) : f = k.point.clone(), l.setPoints([T, f]);
      return;
    }
    if (d.length === 2 && a === "none") {
      o.remove(l);
      const z = k.raycaster.ray.intersectPlane(p, new P.Vector3()), O = d[0].distanceTo(d[1]) / 2, A = new P.Vector3().lerpVectors(d[0], d[1], 0.5), C = new P.Vector3().subVectors(z, A).normalize();
      f = new P.Vector3().addVectors(A, C.multiplyScalar(O));
      const I = [d[0], f, d[1]], E = ov(I, ct.modules.five.camera.position);
      n.setPoints(E);
      return;
    }
  }, b = () => {
    t.off("select", m), t.off("intersectionUpdate", v), t.off("disable", w), t.disable(), o == null || o.remove(l, h, c);
  }, w = () => {
    b(), o == null || o.remove(n), s(new Error("Cancelled"));
  };
  return t.on("select", m), t.on("intersectionUpdate", v), t.on("disable", w), i;
}
function ax(n, t, e) {
  var x;
  const { promise: i, reject: s, resolve: r } = Vs(), o = n.parent;
  if (!o)
    return s(new Error("No container"));
  const a = (x = e == null ? void 0 : e.limit) != null ? x : "none", l = new Un(de(_({}, n.style), { dashed: !0 })), c = new Un(de(_({}, n.style), { dashed: !0, lengthEnable: !1 })), h = new Un(de(_({}, n.style), { dashed: !1, lengthEnable: !1 }));
  o.add(l, h, c), t.enable(), t.setAdherePoints(rx(t.five, { excludes: [n] }));
  const d = [];
  let f = new P.Vector3(), g = new P.Vector3();
  const p = new P.Plane(), m = () => {
    if (d.push(f.clone()), d.length === 1)
      t.planeMode = "onlyPlane", a === "y" && (t.adhereLine = [new P.Line3(d[0], new P.Vector3(0, 1, 0).add(d[0]))]), a === "xoz" && (p.setFromNormalAndCoplanarPoint(new P.Vector3(0, 1, 0), d[0]), t.plane = p), a === "none" && (p.setFromNormalAndCoplanarPoint(g, d[0]), t.plane = p);
    else if (d.length === 2) {
      t.planeMode = "vertical", a === "y" && (t.adhereLine = []);
      let k = !1;
      d[0].x === d[1].x && d[0].z === d[1].z && (k = !0), a === "y" && !k && (p.setFromCoplanarPoints(d[0], d[1], new P.Vector3(0, 1, 0).add(d[0])), t.plane = p), h.setPoints([d[0], d[1]]);
    } else
      d.length === 3 && (b(), r());
  }, v = (k) => {
    var S, V, z, O;
    if (!k || !(k != null && k.raycaster))
      return;
    const T = (S = d.at(-1)) == null ? void 0 : S.clone();
    if (d.length === 0) {
      f = k.point.clone(), g = (V = k.face) == null ? void 0 : V.normal;
      return;
    }
    if (d.length === 1) {
      f = k.point, c.setPoints([(z = k.originalPoint) != null ? z : k.point, k.point]), l.setPoints([T, f]);
      return;
    }
    if (d.length === 2) {
      if (!t.plane) {
        const D = as([d[0], d[1], k.point]);
        p.setFromNormalAndCoplanarPoint(D, d[0]);
      }
      c.setPoints([(O = k.originalPoint) != null ? O : k.point, k.point]);
      const A = new P.Vector3().crossVectors(d[0].clone().sub(d[1]), p.normal).normalize();
      f = new P.Line3(d[1].clone().add(A), d[1].clone().sub(A)).closestPointToPoint(k.point, !1, new P.Vector3());
      const I = [d[0], d[1], f], E = ov(I, ct.modules.five.camera.position);
      n.setPoints(E);
      return;
    }
  }, b = () => {
    t.setAdherePoints([]), t.adhereLine = [], t.adherePlane = [], t.plane = void 0, t.off("select", m), t.off("intersectionUpdate", v), t.off("disable", w), t.disable(), o == null || o.remove(l, h, c);
  }, w = () => {
    b(), o == null || o.remove(n), s(new Error("Cancelled"));
  };
  return t.on("select", m), t.on("intersectionUpdate", v), t.on("disable", w), i;
}
class av extends Uo {
  constructor(t) {
    super(t, () => ({ yAxis: () => t.normal }));
  }
}
function lv(n) {
  return Math.max(32, Math.min(128, Math.floor(n * 40)));
}
class cv extends Cl {
  constructor(e) {
    super(e);
    u(this, "_normal");
    u(this, "_center");
    u(this, "_radius");
    e != null && e.center && (e != null && e.normal) && (e != null && e.radius) && this.setPoints(e);
  }
  get center() {
    return this.position.clone();
  }
  get normal() {
    return this._normal;
  }
  set normal(e) {
    this._normal = e;
  }
  get radius() {
    var e, i;
    return (i = (e = this.meshFont.geometry) == null ? void 0 : e.parameters) == null ? void 0 : i.radius;
  }
  setPoints(e) {
    var i, s, r;
    if (this._center = (i = Qe(e.center)) != null ? i : this._center, this._normal = ((s = Qe(e.normal)) != null ? s : this._normal).normalize(), this._radius = (r = e.radius) != null ? r : this._radius, _e(this._radius) && this._radius !== this.radius) {
      const o = lv(this._radius);
      this.geometry = new P.CircleGeometry(this._radius, o);
    }
    this._center && this.position.copy(this._center), this._normal && (this.lookAt(this._normal.clone().add(this._center)), this.normal = this._normal.clone()), this.needsRender = !0;
  }
}
class Ro extends cv {
  constructor(e) {
    const a = e != null ? e : {}, { normal: i, radius: s, center: r } = a, o = Rn(a, ["normal", "radius", "center"]);
    super(o);
    u(this, "edgeLine");
    this.edgeLine = new fi(o), this.add(this.edgeLine), i && s && r && this.setPoints({ normal: i, radius: s, center: r });
  }
  setPoints(...e) {
    super.setPoints(...e);
    const i = this.meshFont.geometry.vertices.slice(1);
    this.edgeLine.setPoints(i.concat(i[0]));
  }
  setStyle(e) {
    super.setStyle(e), this.edgeLine.setStyle(e);
  }
  highlight() {
    super.highlight(), this.edgeLine.highlight();
  }
  unhighlight() {
    super.unhighlight(), this.edgeLine.unhighlight();
  }
}
class eg extends Vi {
  constructor(e, i) {
    super(e, i);
    u(this, "type", "Circle");
    u(this, "circleMesh");
    u(this, "_editor");
    e && (this.circleMesh = new Ro(_(_({}, e.style), e)), this.add(this.circleMesh));
  }
  get editor() {
    return this._editor || (this._editor = new av(this.circleMesh)), this._editor;
  }
  get data() {
    return de(_({}, this.baseData), {
      center: mi(this.applyObjectMatrixWorld(this.circleMesh.center, this.circleMesh)),
      normal: mi(this.circleMesh.normal.clone().applyQuaternion(this.circleMesh.quaternion)),
      radius: this.circleMesh.radius,
      style: {
        color: this.circleMesh.color.getHex()
      }
    });
  }
  setData(e) {
    this.circleMesh.setPoints({
      center: e.center ? this.applyObjectReversalMatrixWorld(Qe(e.center), this.circleMesh) : void 0,
      normal: e.normal ? Qe(e.normal) : void 0,
      radius: e.radius
    }), this.circleMesh.setStyle(e.style), this._editor && this._editor.initialHelperMatrix();
  }
  highlight() {
    var e;
    (e = this.circleMesh) == null || e.highlight();
  }
  unhighlight() {
    var e;
    (e = this.circleMesh) == null || e.unhighlight();
  }
  create(e) {
    return $(this, null, function* () {
      this.children.forEach((s) => {
        s.parent === this && this.remove(s);
      }), this.children.length = 0;
      const i = new Ro(e);
      this.circleMesh = i, this.add(this.circleMesh), yield bd(this.circleMesh, this.pointSelector), this.config.defaultAction && this.editor.enable();
    });
  }
}
function bd(n, t) {
  return new Promise((e, i) => {
    const s = n.parent;
    if (!s) {
      i(new Error("No container"));
      return;
    }
    const r = new Rs({ dashed: !0 });
    s.add(r), t.enable();
    let o, a;
    const l = (f) => {
      if (f) {
        if (!o) {
          o = {
            point: f.point,
            normal: f.face.normal
          };
          return;
        }
        o && a && (h(), e());
      }
    }, c = (f) => {
      if (!f || !o)
        return;
      const g = new P.Plane().setFromNormalAndCoplanarPoint(o.normal, o.point);
      if (a = f.raycaster.ray.intersectPlane(g, new P.Vector3()), a) {
        const p = o.point.distanceTo(a);
        n.setPoints({ center: o.point, normal: o.normal, radius: p });
      }
    }, h = () => {
      t.off("select", l), t.off("intersectionUpdate", c), t.off("disable", d), t.disable(), s == null || s.remove(r);
    }, d = () => {
      h(), s == null || s.remove(n, r), i(new Error("Cancelled"));
    };
    t.on("select", l), t.on("intersectionUpdate", c), t.on("disable", d);
  });
}
class nh extends ri {
  constructor(e) {
    super();
    u(this, "bottomCircle");
    u(this, "topCircle");
    u(this, "edgeMesh");
    u(this, "highlighted", !1);
    u(this, "params");
    u(this, "_topCenter");
    u(this, "_bottomCenter");
    u(this, "_radius");
    this.params = e, this.bottomCircle = new Ro(e), this.bottomCircle.name = "bottomCircle", this.topCircle = new Ro(e), this.topCircle.name = "topCircle", this.edgeMesh = new Cl(e), e != null && e.bottomCenter && (e != null && e.topCenter) && (e != null && e.radius) && this.setPoints(e), this.addIfNotExists(this.bottomCircle);
  }
  get bottomCenter() {
    return this.bottomCircle.center;
  }
  get topCenter() {
    return this.topCircle.center;
  }
  get normal() {
    return this.bottomCircle.normal;
  }
  get radius() {
    return this.bottomCircle.radius;
  }
  get color() {
    return this.bottomCircle.color;
  }
  setPoints(e) {
    var i, s;
    if (this._topCenter = (i = Qe(e.topCenter)) != null ? i : this.topCenter, this._bottomCenter = (s = Qe(e.bottomCenter)) != null ? s : this.bottomCenter, this._radius = _e(e.radius) ? e.radius : this.radius, this._topCenter && this._bottomCenter) {
      const r = this._topCenter.clone().sub(this._bottomCenter).normalize();
      this.bottomCircle.setPoints({ center: this._bottomCenter, normal: r, radius: this._radius }), this.setTopCenter(this._topCenter);
    }
    this.needsRender = !0;
  }
  setTopCenter(e) {
    this.addIfNotExists(this.topCircle), this.topCircle.setPoints({ center: e, normal: this.normal, radius: this.radius }), this.setEdgeMesh();
  }
  setBottomCenter(e) {
    this.addIfNotExists(this.bottomCircle), this.bottomCircle.setPoints({ center: e, normal: this.normal, radius: this.radius }), this.setEdgeMesh();
  }
  setStyle(e) {
    this.params = _(_({}, this.params), e), this.bottomCircle.setStyle(this.params), this.topCircle.setStyle(this.params);
  }
  highlight() {
    this.highlighted || (this.highlighted = !0, this.edgeMesh.highlight(), this.bottomCircle.highlight(), this.topCircle.highlight(), this.needsRender = !0);
  }
  unhighlight() {
    this.highlighted && (this.highlighted = !1, this.edgeMesh.unhighlight(), this.bottomCircle.unhighlight(), this.topCircle.unhighlight(), this.needsRender = !0);
  }
  setEdgeMesh() {
    this.addIfNotExists(this.edgeMesh);
    const e = this.topCircle.center, i = this.bottomCircle.center;
    this.edgeMesh.geometry.dispose(), this.edgeMesh.geometry = new P.CylinderGeometry(
      this.radius,
      this.radius,
      e.distanceTo(i),
      lv(this.radius),
      1,
      !0
    );
    const s = new P.Quaternion().setFromUnitVectors(new P.Vector3(0, 1, 0), this.normal.clone().normalize());
    this.edgeMesh.position.copy(new P.Vector3().lerpVectors(i, e, 0.5)), this.edgeMesh.quaternion.copy(s);
  }
}
class hv extends Uo {
  constructor(t) {
    super(t, () => {
      const e = () => {
        const i = t.topCenter, s = t.bottomCenter, r = new P.Vector3().lerpVectors(i, s, 0.5);
        return { topCenter: i, bottomCenter: s, boxCenter: r };
      };
      return {
        positionFrom: "boundingBox",
        yAxis: () => t.normal,
        scaleHelper: {
          enable: !0,
          positions: () => {
            const i = e();
            return [
              {
                id: "top",
                handlePosition: i.topCenter,
                basePosition: i.bottomCenter
              },
              {
                id: "bottom",
                handlePosition: i.bottomCenter,
                basePosition: i.topCenter
              }
            ];
          },
          scaleCallback: (i) => {
            const { intersectPoint: s, scalePosition: r } = i, { id: o } = r;
            o === "top" ? t.setTopCenter(s) : o === "bottom" && t.setBottomCenter(s);
          }
        }
      };
    });
  }
}
class tg extends Vi {
  constructor(e, i) {
    super(e, i);
    u(this, "type", "Cylinder");
    u(this, "cylinderMesh");
    u(this, "_editor");
    e && (this.cylinderMesh = new nh(_(_({}, e.style), e)), this.add(this.cylinderMesh));
  }
  get editor() {
    return this._editor || (this._editor = new hv(this.cylinderMesh)), this._editor;
  }
  get data() {
    return de(_({}, this.baseData), {
      bottomCenter: mi(this.applyObjectMatrixWorld(this.cylinderMesh.bottomCenter, this.cylinderMesh)),
      topCenter: mi(this.applyObjectMatrixWorld(this.cylinderMesh.topCenter, this.cylinderMesh)),
      radius: this.cylinderMesh.radius,
      style: {
        color: this.cylinderMesh.color.getHex()
      }
    });
  }
  setData(e) {
    this.cylinderMesh.setPoints({
      bottomCenter: e.bottomCenter ? this.applyObjectReversalMatrixWorld(Qe(e.bottomCenter), this.cylinderMesh) : void 0,
      topCenter: e.topCenter ? this.applyObjectReversalMatrixWorld(Qe(e.topCenter), this.cylinderMesh) : void 0
    }), this.cylinderMesh.setStyle(e.style), this._editor && this._editor.initialHelperMatrix();
  }
  highlight() {
    var e;
    (e = this.cylinderMesh) == null || e.highlight();
  }
  unhighlight() {
    var e;
    (e = this.cylinderMesh) == null || e.unhighlight();
  }
  create(e) {
    return $(this, null, function* () {
      this.cylinderMesh = new nh(e), this.add(this.cylinderMesh), yield dv(this.cylinderMesh, this.pointSelector), this.config.defaultAction && this.editor.enable();
    });
  }
}
function dv(n, t) {
  return $(this, null, function* () {
    const e = n.parent;
    yield bd(n.bottomCircle, t);
    const i = new fi();
    i.name = "LineHelper", e.add(i);
    const s = t.position.point, r = n.normal.clone().normalize(), o = s.clone().add(r.clone().multiplyScalar(100)), a = s.clone().sub(r.clone().multiplyScalar(100));
    return i.setPoints([o, a]), t.enable(), new Promise((l, c) => {
      const h = (p) => {
        f(), l();
      }, d = (p) => {
        if (!(p != null && p.raycaster))
          return;
        const m = Yn({
          raycaster: p.raycaster,
          line: new P.Line3(o, a)
        }), b = new P.Plane().setFromNormalAndCoplanarPoint(n.normal, n.bottomCenter).projectPoint(m, new P.Vector3()), w = m.clone().sub(b), x = n.bottomCenter.clone().add(w);
        m && n.setTopCenter(x);
      }, f = () => {
        t.off("select", h), t.off("intersectionUpdate", d), t.off("disable", g), e.remove(i), t.disable();
      }, g = () => {
        f(), e.remove(n), c(new Error("Cancelled"));
      };
      t.on("select", h), t.on("intersectionUpdate", d), t.on("disable", g);
    });
  });
}
class uv extends Uo {
  constructor(t) {
    super(t, () => ({
      positionFrom: () => t.worldCenter,
      yAxis: () => new P.Vector3().subVectors(t.topPosition, t.bottomPositions[0]).normalize(),
      zAxis: () => new P.Vector3().subVectors(t.bottomPositions[0], t.bottomPositions[1]).normalize(),
      scaleHelper: {
        enable: !0,
        positions: () => {
          const e = t.bottomPositions, i = t.topPosition, s = new P.Vector3().subVectors(i, e[0]), r = new P.Vector3().subVectors(e[1], e[0]), o = new P.Vector3().subVectors(e[2], e[1]), a = t.geometryInfo.center, l = a.clone().sub(s.clone().divideScalar(2)), c = a.clone().add(s.clone().divideScalar(2)), h = a.clone().sub(r.clone().divideScalar(2)), d = a.clone().add(r.clone().divideScalar(2)), f = a.clone().sub(o.clone().divideScalar(2)), g = a.clone().add(o.clone().divideScalar(2));
          return [
            {
              id: "top",
              handlePosition: c,
              basePosition: l
            },
            {
              id: "bottom",
              handlePosition: l,
              basePosition: c
            },
            {
              id: "left",
              handlePosition: h,
              basePosition: d
            },
            {
              id: "right",
              handlePosition: d,
              basePosition: h
            },
            {
              id: "front",
              handlePosition: f,
              basePosition: g
            },
            {
              id: "back",
              handlePosition: g,
              basePosition: f
            }
          ];
        },
        scaleCallback: (e) => {
          const { intersectPoint: i, scalePosition: s } = e, { id: r, basePosition: o } = s, a = t.bottomPositions, l = t.topPositions;
          let c = new P.Vector3().subVectors(t.topPosition, a[0]), h;
          if (r === "top")
            c = i.clone().sub(o), h = a;
          else if (r === "bottom") {
            const d = i.clone().sub(o);
            h = l.map((f) => f.clone().add(d)), c = void 0;
          } else if (r === "left") {
            const d = i.clone().sub(o);
            h = [
              a[1].clone().add(d),
              a[1],
              a[2],
              a[2].clone().add(d)
            ];
          } else if (r === "right") {
            const d = i.clone().sub(o);
            h = [
              a[0],
              a[0].clone().add(d),
              a[3].clone().add(d),
              a[3]
            ];
          } else if (r === "front") {
            const d = i.clone().sub(o);
            h = [
              a[3].clone().add(d),
              a[2].clone().add(d),
              a[2],
              a[3]
            ];
          } else if (r === "back") {
            const d = i.clone().sub(o);
            h = [
              a[0],
              a[1],
              a[1].clone().add(d),
              a[0].clone().add(d)
            ];
          }
          t.setPoints({
            points: h,
            heightPoint: c ? h[0].clone().add(c) : void 0
          });
        }
      }
    }));
  }
}
class sh extends xs {
  constructor() {
    super(...arguments);
    u(this, "name", "BoxMesh");
  }
  get geometryInfo() {
    if (this.geometryInfoNeedUpdate) {
      this.geometryInfoNeedUpdate = !1;
      const e = this.bottomPositions, i = this.topPosition;
      if (!e || e.length < 3 || !i) {
        this._geometryInfoCache = void 0;
        return;
      }
      const s = $t(...e), r = i.clone().sub(e[0]), o = s.clone().add(r.clone().divideScalar(2));
      this._geometryInfoCache = { center: o };
    }
    return this._geometryInfoCache;
  }
}
class ig extends Vi {
  constructor(e, i) {
    super(e, i);
    u(this, "type", "Box");
    u(this, "boxMesh");
    u(this, "_editor");
    e && (this.boxMesh = new sh(_(_({}, e.style), e)), this.add(this.boxMesh));
  }
  get editor() {
    return this._editor || (this._editor = new uv(this.boxMesh)), this._editor;
  }
  get data() {
    return de(_({}, this.baseData), {
      points: mi(this.applyObjectMatrixWorld(this.boxMesh.bottomPositions, this.boxMesh)),
      heightPoint: mi(this.applyObjectMatrixWorld(this.boxMesh.topPosition, this.boxMesh)),
      style: {
        color: this.boxMesh.color.getHex(),
        opacity: this.boxMesh.opacity,
        lineWidth: this.boxMesh.lineWidth,
        lineColor: this.boxMesh.lineColor.getHex()
      }
    });
  }
  setData(e) {
    this.boxMesh.setPoints({
      points: e.points ? this.applyObjectReversalMatrixWorld(e.points.map(Qe), this.boxMesh) : void 0,
      heightPoint: e.heightPoint ? this.applyObjectReversalMatrixWorld(Qe(e.heightPoint), this.boxMesh) : void 0
    }), this.boxMesh.setStyle(e.style), this._editor && this._editor.initialHelperMatrix();
  }
  highlight() {
    var e;
    (e = this.boxMesh) == null || e.highlight();
  }
  unhighlight() {
    var e;
    (e = this.boxMesh) == null || e.unhighlight();
  }
  create(e) {
    return $(this, null, function* () {
      this.removeChildren(), this.boxMesh = new sh(e), this.add(this.boxMesh), yield fv(this.boxMesh, this.pointSelector, e), this.config.defaultAction && this.editor.enable();
    });
  }
}
function fv(n, t, e) {
  return $(this, null, function* () {
    return new Promise((i, s) => $(this, null, function* () {
      const r = n.parent;
      if (!r) {
        s(new Error("No container"));
        return;
      }
      const o = new nl(n.style);
      r.add(o), yield Ad(o, t, e), r.remove(o), n.setPoints({ points: o.points });
      const a = new fi(), l = as(n.bottomPositions), c = $t(...n.bottomPositions), h = c.clone().add(l.clone().multiplyScalar(100)), d = c.clone().sub(l.clone().multiplyScalar(100));
      a.setPoints([h, d]), r.add(a), t.enable();
      const f = (v) => {
        p(), i();
      }, g = (v) => {
        if (!(v != null && v.raycaster))
          return;
        const b = Yn({
          raycaster: v.raycaster,
          line: new P.Line3(h, d)
        });
        if (b) {
          const w = b.clone().sub(c);
          n.setPoints({ heightPoint: n.bottomPositions[0].clone().add(w) });
        }
      }, p = () => {
        t.off("select", f), t.off("intersectionUpdate", g), t.off("disable", m), t.disable(), r == null || r.remove(a);
      }, m = () => {
        p(), r == null || r.remove(n), s(new Error("Cancelled"));
      };
      t.on("select", f), t.on("intersectionUpdate", g), t.on("disable", m);
    }));
  });
}
function lx(n, t) {
  for (let e = n.length - 1; e >= 0; e--)
    t(n[e]);
}
class ng extends Vi {
  constructor(e, i) {
    super(e, i);
    u(this, "type", "Line");
    u(this, "lineMesh");
    u(this, "_editor");
    u(this, "creatingObject");
    e && (this.lineMesh = new To(_(_({}, e.style), e)), this.add(this.lineMesh));
  }
  get editor() {
    return this._editor || (this._editor = new J6(this)), this._editor;
  }
  get data() {
    return de(_({}, this.baseData), {
      points: mi(this.applyObjectMatrixWorld(this.lineMesh.points)),
      style: {
        lineColor: new P.Color(this.lineMesh.color).getHex(),
        lineWidth: this.lineMesh.lineWidth,
        dashed: this.lineMesh.dashed
      }
    });
  }
  setData(e) {
    e.points && this.lineMesh.setPoints(e.points), this.lineMesh.setStyle(e.style);
  }
  highlight() {
    var e;
    (e = this.lineMesh) == null || e.highlight();
  }
  unhighlight() {
    var e;
    (e = this.lineMesh) == null || e.unhighlight();
  }
  canUndo() {
    var e;
    (e = this.creatingObject) == null || e.canUndo();
  }
  canRedo() {
    var e;
    (e = this.creatingObject) == null || e.canRedo();
  }
  undo() {
    var e;
    (e = this.creatingObject) == null || e.undo();
  }
  redo() {
    var e;
    (e = this.creatingObject) == null || e.redo();
  }
  create(e) {
    return $(this, null, function* () {
      this.removeChildren();
      const i = new To(e);
      this.lineMesh = i, this.add(this.lineMesh), this.creatingObject = pv(i, this.pointSelector, e), yield this.creatingObject.finished, this.config.defaultAction && this.editor.enable();
    });
  }
}
function pv(n, t, e) {
  var V;
  const i = n.parent;
  if (!i)
    return;
  const { promise: s, resolve: r, reject: o } = Vs(), a = (V = e == null ? void 0 : e.limit) != null ? V : "none", l = new fi(n.style);
  i.add(l);
  const c = new fi(de(_({}, n.style), { dashed: !0, lengthEnable: !1 }));
  i.add(c), t.enable();
  const h = [];
  let d, f, g;
  const p = [], m = () => h.length > 0, v = () => p.length > 0, b = () => {
    m() && (p.push(h.pop()), n.setPoints(h), k(g), t.pointSelectorHelper.magnifier.render());
  }, w = () => {
    v() && (h.push(p.pop()), n.setPoints(h), k(g), t.pointSelectorHelper.magnifier.render());
  }, x = (z) => {
    if (!z)
      return;
    p.length = 0;
    const O = h.length === 0 ? z.point : d.clone();
    h.push(O), n.setPoints(h), h.length === 2 && (T(), r());
  }, k = (z) => {
    const O = () => {
      l.setPoints([]), c.setPoints([]), t.pointSelectorHelper.magnifier.render();
    };
    if (!(h != null && h.length) || !z)
      return O();
    g = z;
    const A = h.at(-1).clone();
    a === "none" ? (d = z.point, l.setPoints([A, d])) : a === "xoz" ? (t.plane = f, f = f != null ? f : new P.Plane().setFromNormalAndCoplanarPoint(new P.Vector3(0, 1, 0), h[0]), d = f.projectPoint(z.point, new P.Vector3()), l.setPoints([A, d]), c.setPoints([d, z.point])) : a === "y" && (z.isVirtual ? (d = Yn({
      raycaster: z.raycaster,
      line: new P.Line3(h[0].clone(), new P.Vector3(0, 1, 0).add(h[0])),
      clampToLine: !1
    }), c.setPoints([])) : (d = new P.Line3(h[0].clone(), new P.Vector3(0, 1, 0).add(h[0])).closestPointToPoint(z.point, !1, new P.Vector3()), c.setPoints([d, z.point])), l.setPoints([A, d]));
  }, T = () => {
    t.off("select", x), t.off("intersectionUpdate", k), t.off("disable", S), t.plane = null, t.disable(), i == null || i.remove(l, c);
  }, S = () => {
    T(), h.length !== 2 && (i == null || i.remove(n)), o(new Error("Cancelled"));
  };
  return t.on("select", x), t.on("intersectionUpdate", k), t.on("disable", S), {
    finished: s,
    canUndo: m,
    canRedo: v,
    undo: b,
    redo: w
  };
}
const dr = class extends Pt {
  constructor(e, i) {
    super();
    u(this, "group");
    u(this, "theme");
    u(this, "five");
    u(this, "creatingItem", null);
    /**
     * @description: 撤销
     */
    u(this, "undo", () => {
      var e;
      console.log("undo"), (e = this.creatingItem) == null || e.undo(), this.five.needsRender = !0;
    });
    /**
     * @description: 重做
     */
    u(this, "redo", () => {
      var e;
      console.log("redo"), (e = this.creatingItem) == null || e.redo(), this.five.needsRender = !0;
    });
    this.five = e, this.theme = i, this.group = new ri(), this.group.name = "Sculpt", e.scene.add(this.group), dr.modules.init(e), dt("ctrl+z, command+z", this.undo), dt("ctrl+shift+z, command+shift+z", this.redo), dr.modules.fiveDomEvents.addEventListener(this.group, "click", ({ intersects: s, origDomEvent: r }) => {
      var a;
      const o = ev((a = s == null ? void 0 : s[0]) == null ? void 0 : a.object, (l) => l.isSculptObject);
      return o && !o.editing ? this.emit("click", r, o) : !1;
    }), window.__SCULPT_DEBUG__ = this, window.__SCULPT_MODULES_DEBUG__ = dr.modules;
  }
  get data() {
    return {
      items: this.items.map((e) => {
        try {
          return e.data;
        } catch (i) {
          return console.error(i), null;
        }
      }).filter(_e)
    };
  }
  get items() {
    return this.group.children;
  }
  /**
   * @description: 加载数据 展示
   */
  load(e, i) {
    var r;
    this.clear();
    const s = (r = e == null ? void 0 : e.items) == null ? void 0 : r.map((o) => {
      var l;
      const a = de(_({}, o), {
        style: _(_({}, (l = this.theme) == null ? void 0 : l[o.type.toLowerCase()]), o.style)
      });
      return o.type === "Point" ? new Jm(a, i) : o.type === "line" ? new ng(a, i) : o.type === "Polyline" ? new Zm(a, i) : o.type === "Polygon" ? new qm(a, i) : o.type === "Prism" ? new Km(a, i) : o.type === "Rectangle" ? new $m(a, i) : o.type === "Circle" ? new eg(a, i) : o.type === "Cylinder" ? new tg(a, i) : o.type === "Box" ? new ig(a, i) : null;
    });
    this.group.add(...s), this.five.needsRender = !0;
  }
  /**
   * @description: 获取物体实例
   */
  getItemById(e) {
    return this.items.find((i) => i.uuid === e);
  }
  /**
   * @description: 放置物体
   */
  putObject(e) {
    var r;
    this.group.add(e);
    const i = dr.modules.object3DHelper, s = i.addObject3DHelper(e);
    return (r = s == null ? void 0 : s.moveController) == null || r.moveByMouse(), i;
  }
  /**
   * @description: 开始绘制点
   */
  createPoint(...e) {
    return $(this, null, function* () {
      var i, s;
      return Object.assign((i = e[0]) != null ? i : {}, (s = this.theme) == null ? void 0 : s.point, e[0]), this.createItem(Jm, ...e);
    });
  }
  /**
   * @description: 开始绘制线段
   */
  createLine(...e) {
    return $(this, null, function* () {
      var i, s;
      return Object.assign((i = e[0]) != null ? i : {}, (s = this.theme) == null ? void 0 : s.line, e[0]), this.createItem(ng, ...e);
    });
  }
  /**
   * @deprecated use createLine instead
   */
  createline(...e) {
    return $(this, null, function* () {
      this.createLine(...e);
    });
  }
  /**
   * @description: 开始绘制空间折线
   */
  createPolyline(...e) {
    return $(this, null, function* () {
      var i, s;
      return Object.assign((i = e[0]) != null ? i : {}, (s = this.theme) == null ? void 0 : s.polyline, e[0]), this.createItem(Zm, ...e);
    });
  }
  /**
   * @description: 开始绘制平面多边形
   */
  createPolygon(...e) {
    return $(this, null, function* () {
      var i, s;
      return Object.assign((i = e[0]) != null ? i : {}, (s = this.theme) == null ? void 0 : s.polygon, e[0]), this.createItem(qm, ...e);
    });
  }
  /**
   * @description: 开始绘制多棱柱
   */
  createPrism(...e) {
    return $(this, null, function* () {
      var i, s;
      return Object.assign((i = e[0]) != null ? i : {}, (s = this.theme) == null ? void 0 : s.prism, e[0]), this.createItem(Km, ...e);
    });
  }
  /**
   * @description: 开始绘制矩形
   */
  createRectangle(...e) {
    return $(this, null, function* () {
      var i, s;
      return Object.assign((i = e[0]) != null ? i : {}, (s = this.theme) == null ? void 0 : s.rectangle, e[0]), this.createItem($m, ...e);
    });
  }
  /**
   * @description: 开始绘制圆形
   */
  createCircle(...e) {
    return $(this, null, function* () {
      var i, s;
      return Object.assign((i = e[0]) != null ? i : {}, (s = this.theme) == null ? void 0 : s.circle, e[0]), this.createItem(eg, ...e);
    });
  }
  /**
   * @description: 开始绘制圆柱
   */
  createCylinder(...e) {
    return $(this, null, function* () {
      var i, s;
      return Object.assign((i = e[0]) != null ? i : {}, (s = this.theme) == null ? void 0 : s.cylinder, e[0]), this.createItem(tg, ...e);
    });
  }
  /**
   * @description: 开始绘制 Box
   */
  createBox(...e) {
    return $(this, null, function* () {
      var i, s;
      return Object.assign((i = e[0]) != null ? i : {}, (s = this.theme) == null ? void 0 : s.box, e[0]), this.createItem(ig, ...e);
    });
  }
  canUndo() {
    var e;
    return this.creatingItem ? (e = this.creatingItem) == null ? void 0 : e.canUndo() : !1;
  }
  canRedo() {
    var e;
    return this.creatingItem ? (e = this.creatingItem) == null ? void 0 : e.canRedo() : !1;
  }
  /**
   * @description: 清空数据
   */
  clear() {
    lx(this.items, (e) => e.delete()), this.five.needsRender = !0;
  }
  createItem(e, ...i) {
    return $(this, null, function* () {
      this.creatingItem && (this.creatingItem.stopCreating(), this.creatingItem = null);
      const s = new e();
      this.creatingItem = s, this.group.add(s);
      const { promise: r, resolve: o, reject: a } = Vs();
      return yield s.create(...i).then((...l) => (this.creatingItem = null, o(s), l)).catch((l) => {
        a(l), this.group.remove(s);
      }), r;
    });
  }
};
let ct = dr;
u(ct, "modules", $1);
const ND = (n, t) => new ct(n, t);
function cx(n, ...t) {
  t.forEach((e) => {
    n.children.includes(e) || e && n.add(e);
  });
}
class yd extends Pt {
  constructor(e) {
    var s, r;
    super();
    u(this, "__renderer");
    u(this, "__disposeRenderer");
    u(this, "type");
    u(this, "tag");
    u(this, "rawData");
    u(this, "model");
    u(this, "visibles", []);
    u(this, "five");
    u(this, "group");
    u(this, "fiveDomEvents");
    u(this, "disposers", []);
    this.five = e.five, this.model = e.model, this.group = e.group, this.type = e.type, this.rawData = e.rawData, this.fiveDomEvents = e.fiveDomEvents;
    const i = (r = (s = e.position) != null ? s : this.model.center) != null ? r : Bs(this.model).getCenter(new fe());
    this.tag = mg(this.five, i, { wrapper: e.tagWrapper, disableOpacityTransition: this.type === "prism" }), this.tag.extraObjectsForIntersectCheck.push(this.group);
  }
  get container() {
    return this.tag.container;
  }
  get state() {
    return {
      visible: this.model.visible,
      enabled: this.group.children.includes(this.model)
    };
  }
  show() {
    this.visibles[0] = !0, this.updateVisible(), this.emit("show");
  }
  hide() {
    this.visibles[0] = !1, this.updateVisible(), this.emit("hide");
  }
  enable() {
    cx(this.group, this.model), this.five.needsRender = !0, this.model.updateMatrixWorld(!0), this.tag.setTransformMatrix(this.model.matrixWorld), this.tag.enable();
    const e = this.onClick.bind(this);
    this.fiveDomEvents.removeEventListener(this.model, "click"), this.fiveDomEvents.addEventListener(this.model, "click", e, { skipPano: !0 }), this.disposers.push(() => {
      this.fiveDomEvents.removeEventListener(this.model, "click");
    }), this.updateVisible(), this.emit("enable");
  }
  disable() {
    this.group.remove(this.model), this.five.needsRender = !0, this.tag.disable(), this.disposers.forEach((e) => e()), this.disposers = [], this.emit("disable");
  }
  updateVisible() {
    !this.visibles.some((i) => i === !1) ? (this.tag.show(), this.model.visible = !0) : (this.tag.hide(), this.model.visible = !1), this.five.needsRender = !0;
  }
  onClick() {
    return this.emit("click", this);
  }
}
class sg extends yd {
  constructor(...e) {
    super(...e);
    u(this, "hideTag", () => {
      this.tag.hide();
    });
    this.enable(), this.tag.hide(), this.updateVisible();
  }
  enable() {
    super.enable(), this.five.on("mode.change.request", this.hideTag), this.five.on("pano.request", this.hideTag);
  }
  disable() {
    super.disable(), this.five.needsRender = !0, this.five.off("mode.change.request", this.hideTag), this.five.off("pano.request", this.hideTag);
  }
  show() {
    super.show(), this.tag.hide();
  }
  updateVisible() {
    !this.visibles.some((i) => i === !1) ? this.model.visible = !0 : (this.tag.hide(), this.model.visible = !1), this.five.needsRender = !0;
  }
  onClick() {
    return this.tag.visible ? this.tag.hide() : this.tag.show({ force: !0 }), super.onClick(), !0;
  }
}
function hx(n) {
  De(n, "svelte-1q9fx3x", ".model-maker-tag.svelte-1q9fx3x{position:absolute;width:-moz-max-content;width:max-content;left:50%;top:50%;transform:translate(-50%, -50%);color:#fff;font-size:0.875rem;font-weight:bold;text-shadow:0.125rem 0 0.5rem rgba(0, 0, 0, 0.15)}");
}
function rg(n) {
  let t, e;
  return {
    c() {
      t = W("div"), e = je(
        /*text*/
        n[0]
      ), y(t, "class", "model-maker-tag svelte-1q9fx3x");
    },
    m(i, s) {
      X(i, t, s), R(t, e);
    },
    p(i, s) {
      s & /*text*/
      1 && He(
        e,
        /*text*/
        i[0]
      );
    },
    d(i) {
      i && U(t);
    }
  };
}
function dx(n) {
  let t, e = (
    /*text*/
    n[0] && rg(n)
  );
  return {
    c() {
      e && e.c(), t = Fe();
    },
    m(i, s) {
      e && e.m(i, s), X(i, t, s);
    },
    p(i, [s]) {
      /*text*/
      i[0] ? e ? e.p(i, s) : (e = rg(i), e.c(), e.m(t.parentNode, t)) : e && (e.d(1), e = null);
    },
    i: se,
    o: se,
    d(i) {
      e && e.d(i), i && U(t);
    }
  };
}
function ux(n, t, e) {
  let { text: i } = t;
  return n.$$set = (s) => {
    "text" in s && e(0, i = s.text);
  }, [i];
}
class fx extends Ie {
  constructor(t) {
    super(), Ce(this, t, ux, dx, Pe, { text: 0 }, hx);
  }
}
const og = (n, t) => {
  var i;
  const e = new fx({
    target: n,
    props: { text: (i = t.rawData) == null ? void 0 : i.name }
  });
  return () => e.$destroy();
}, px = (n, t, e) => {
  var s;
  const i = new K1({
    target: n,
    props: { content: (s = t.rawData) == null ? void 0 : s.name, five: e }
  });
  return () => i.$destroy();
}, mx = {
  box: og,
  triangles: og,
  prism: px
};
class Ac extends yd {
  constructor(...e) {
    const i = e[0], s = Bs(i.model), r = new P.Vector3().lerpVectors(Nn(s, 0), Nn(s, 5), 0.5);
    super(de(_({}, i), { position: r }));
    u(this, "onModelShownFloorChange", (e) => {
      this.updateFiveCurrentFloorState(e), this.updateVisible();
    });
    u(this, "updateFiveCurrentFloorState", (e) => {
      var s, r;
      const i = (r = (s = this.rawData) == null ? void 0 : s.object_data) == null ? void 0 : r.floorIndex;
      si(i) ? this.visibles[1] = !0 : this.visibles[1] = e === null ? !0 : i === e;
    });
    this.enable(), this.updateVisible(), this.five.on("modelShownFloorChange", this.onModelShownFloorChange), this.disposers.push(() => {
      this.five.off("modelShownFloorChange", this.onModelShownFloorChange);
    });
  }
  show() {
    this.updateFiveCurrentFloorState(this.five.model.shownFloor), super.show();
  }
  hide() {
    super.hide();
  }
}
class ag extends yd {
  constructor(...e) {
    super(...e);
    u(this, "onPanoArrived", (e) => {
      this.updatePanoIndex(e), this.updateVisible();
    });
    u(this, "onModeChange", (e) => {
      this.updateMode(e), this.updateVisible();
    });
    u(this, "updatePanoIndex", (e) => {
      var i, s;
      this.visibles[1] = ((s = (i = this.rawData) == null ? void 0 : i.object_data) == null ? void 0 : s.panoIndex) === e;
    });
    u(this, "updateMode", (e) => {
      this.visibles[2] = e === "Panorama";
    });
    this.updatePanoIndex(this.five.state.panoIndex), this.updateMode(this.five.state.mode), this.enable(), this.updateVisible(), this.five.on("panoArrived", this.onPanoArrived), this.five.on("modeChange", this.onModeChange), this.disposers.push(() => {
      this.five.off("panoArrived", this.onPanoArrived), this.five.off("modeChange", this.onModeChange);
    });
  }
  show() {
    this.updatePanoIndex(this.five.state.panoIndex), this.updateMode(this.five.state.mode), super.show();
  }
}
class gx extends Pn {
  constructor(e, i) {
    var s, r;
    super(e);
    u(this, "state");
    u(this, "items", []);
    u(this, "group", new fn());
    u(this, "data");
    u(this, "tagRendererMap", {});
    u(this, "fiveDomEvents");
    u(this, "zFightingOffset", 0);
    u(this, "tagWrapper");
    u(this, "occlusionVisibility");
    u(this, "occlusionMode");
    u(this, "fiveEveryReadyListenerDisposer");
    // 存储每个模型的原始透明度
    u(this, "originalOpacities", /* @__PURE__ */ new Map());
    // 存储标签原始透明度
    u(this, "originalTagOpacities", /* @__PURE__ */ new Map());
    u(this, "onFiveModeChange", (e) => {
      const i = this.occlusionVisibility;
      Array.isArray(i) && [...this.getPrismItems(), ...this.getBoxItems()].forEach((r) => {
        (r.model instanceof xs || r.model instanceof th) && r.model.setStyle({ occlusionVisibility: i.includes(e) });
      });
    });
    u(this, "handleEnable", () => {
      var e, i;
      this.five.scene.add(this.group), (i = (e = this.five.getElement()) == null ? void 0 : e.parentElement) == null || i.appendChild(this.tagWrapper), this.five.needsRender = !0, this.onFiveModeChange(this.five.getCurrentState().mode), this.onFiveEveryReady(), this.five.on("modeChange", this.onFiveModeChange), this.fiveEveryReadyListenerDisposer = lh(this.five, this.onFiveEveryReady);
    });
    u(this, "handleDisable", () => {
      this.five.scene.remove(this.group), this.tagWrapper.remove(), this.five.needsRender = !0, this.five.off("modeChange", this.onFiveModeChange), this.fiveEveryReadyListenerDisposer();
    });
    u(this, "onFiveEveryReady", () => $(this, null, function* () {
      if (this.five.state.mode === "Panorama")
        return;
      const e = this.items.filter((l) => l instanceof Ac).map((l) => l.tag), i = e.filter((l) => l.position && l.visible && l.enabled);
      yield X1(0);
      const s = this.five.camera.position.clone(), r = i.sort((l, c) => s.distanceTo(l.position) - s.distanceTo(c.position)), o = [], a = (l, c) => !(l.right < c.left || l.left > c.right || l.bottom < c.top || l.top > c.bottom);
      e.forEach((l) => {
        l.visibles[2] = void 0;
      }), r.forEach((l) => {
        if (l.visibles[1] === !1)
          return;
        const c = l.container.getElementsByClassName("room-label-item__text")[0];
        if (!c)
          return;
        const h = c.getBoundingClientRect();
        o.every((f) => !a(f.boundingClientRect, h)) ? (o.push({ tag: l, boundingClientRect: h }), l.visibles[2] = !0) : l.visibles[2] = !1, l.needsRender = !0;
      });
    }));
    u(this, "updateTagRenderer", () => {
      this.items.forEach((e) => {
        var s;
        const i = (s = this.tagRendererMap[e.type]) != null ? s : mx[e.type];
        i && e.__renderer !== i && (e.__renderer = i, typeof e.__disposeRenderer == "function" && e.__disposeRenderer(), e.tag.container.innerHTML = "", e.__disposeRenderer = i(e.tag.container, e, this.five));
      });
    });
    this.group.name = "ModelMakerPluginGroup", this.state = { enabled: !0, visible: !0 }, this.occlusionVisibility = (s = i == null ? void 0 : i.occlusionVisibility) != null ? s : !1, this.occlusionMode = (r = i == null ? void 0 : i.occlusionMode) != null ? r : "translucence", this.fiveDomEvents = new Pr(e, { noEmitWhenHide: !0, noEmitWhenNotInScene: !0 }), this.tagWrapper = (() => {
      var a;
      const o = document.createElement("div");
      return o.style.position = "absolute", o.style.top = "0", o.style.left = "0", o.style.width = "100%", o.style.height = "100%", o.style.pointerEvents = "none", o.style.zIndex = `${(a = i == null ? void 0 : i.tagContainerZIndex) != null ? a : ""}`, o;
    })(), e.scene.add(this.group), this.handleEnable(), window.__MODELMAKER_DEBUG__ = this;
  }
  load(e) {
    return $(this, null, function* () {
      if (this.clear(), this.data = e, this.originalOpacities.clear(), yield ui(this.five), this.data !== e)
        return;
      this.clear();
      const i = (s) => {
        var c;
        const r = s.object_data.color ? new Gt().setHex(parseInt(s.object_data.color.slice(1), 16)) : new Gt(1, 1, 1);
        let o = typeof this.occlusionVisibility == "boolean" ? this.occlusionVisibility : !1, a = this.occlusionMode;
        s.type === "triangles" && (o = !0, a = "depthTest");
        const l = ((c = s.object_data.opacity) != null ? c : 0.4) / 2;
        return s.id && this.originalOpacities.set(s.id.toString(), {
          opacity: l,
          lineOpacity: 1
        }), {
          color: r,
          lineColor: r,
          opacity: l,
          lineOpacity: 1,
          lineWidth: 1,
          occlusionVisibility: o,
          occlusionMode: a
        };
      };
      this.items = e.list.map((s) => {
        var r;
        switch (s.type) {
          case "triangles": {
            const o = new th();
            return _e(s.id) && (o.uuid = s.id.toString()), o.setPoints(s.object_data.points, { checkLinesIntersect: !1 }), o.setStyle(i(s)), this.fiveDomEvents.addEventListener(o, "hover", () => o.highlight()), this.fiveDomEvents.addEventListener(o, "unHover", () => o.unhighlight()), new ag({
              five: this.five,
              tagWrapper: this.tagWrapper,
              model: o,
              group: this.group,
              type: s.type,
              rawData: s,
              fiveDomEvents: this.fiveDomEvents
            });
          }
          case "prism": {
            const o = new xs();
            _e(s.id) && (o.uuid = s.id.toString()), this.zFightingOffset += Go.Z_FIGHTING_OFFSET;
            const a = s.object_data.points.map((d) => {
              var f;
              return [d[0], d[1] + ((f = s.object_data.fixedY) != null ? f : 0), d[2]];
            });
            a.push(a[0]);
            const l = s.object_data.height + ((r = s.object_data.fixedHeight) != null ? r : 0) + this.zFightingOffset, c = Qe(a[0]).add(new fe().setY(l));
            return o.setPoints({ points: a, heightPoint: c }), o.setStyle(i(s)), new Ac({
              five: this.five,
              tagWrapper: this.tagWrapper,
              model: o,
              group: this.group,
              type: s.type,
              rawData: s,
              fiveDomEvents: this.fiveDomEvents
            });
          }
          case "box": {
            const o = new xs();
            _e(s.id) && (o.uuid = s.id.toString());
            const { start: a, end: l, rotation: c = [0, 0, 0, 0] } = s.object_data, h = new fe().fromArray(a), d = new fe().fromArray(l), f = new Fn().fromArray(c), g = new ys().setFromEuler(f), p = g.clone().inverse(), m = new fe().lerpVectors(h, d, 0.5), v = m.clone().negate(), b = h.clone().add(v).applyQuaternion(p), w = d.clone().add(v).applyQuaternion(p), x = new qv(b.clone().max(w), b.clone().min(w));
            return o.setPoints({
              points: [Nn(x, 2), Nn(x, 3), Nn(x, 7), Nn(x, 6)],
              heightPoint: Nn(x, 1)
            }), o.position.copy(m), o.quaternion.copy(g), o.setStyle(i(s)), new sg({
              five: this.five,
              tagWrapper: this.tagWrapper,
              model: o,
              group: this.group,
              type: s.type,
              rawData: s,
              fiveDomEvents: this.fiveDomEvents
            });
          }
          default:
            return null;
        }
      }).filter(Boolean), this.state.enabled ? this.handleEnable() : this.handleDisable(), this.state.visible ? this.handleShow() : this.handleHide(), this.updateTagRenderer(), this.hooks.emit("dataLoaded", e), this.five.needsRender = !0;
    });
  }
  setState(e) {
    _e(e.enabled) && this.state.enabled !== e.enabled && (this.state.enabled = e.enabled, e.enabled ? this.handleEnable() : this.handleDisable(), this.hooks.emit(e.enabled ? "enable" : "disable", { userAction: "我不知道捏" }), this.hooks.emit("stateChange", { state: this.state, userAction: "我不知道捏" })), _e(e.visible) && this.state.visible !== e.visible && (this.state.visible = e.visible, e.visible ? this.handleShow() : this.handleHide(), this.hooks.emit(e.visible ? "show" : "hide", { userAction: "我不知道捏" }), this.hooks.emit("stateChange", { state: this.state, userAction: "我不知道捏" }));
  }
  getItemById(e) {
    return this.items.find((i) => i.rawData.id === e);
  }
  registerTagRenderer(e) {
    this.tagRendererMap = _(_({}, this.tagRendererMap), e), this.updateTagRenderer();
  }
  hasCustomTagRenderer(e) {
    return !!this.tagRendererMap[e];
  }
  enable() {
    this.setState({ enabled: !0 });
  }
  disable() {
    this.setState({ enabled: !1 });
  }
  show() {
    this.setState({ visible: !0 });
  }
  hide() {
    this.setState({ visible: !1 });
  }
  clear() {
    this.zFightingOffset = 0, this.handleDisable(), this.group.children.length = 0, this.five.needsRender = !0, this.items = [], this.tagWrapper.innerHTML = "", this.fiveDomEvents.clear(), this.originalOpacities.clear(), this.originalTagOpacities.clear();
  }
  /**
   * 设置所有模型的透明度
   * @param opacityPercent 透明度系数，范围0-1，1表示保持原始透明度，0表示完全透明
   * @param options 可选参数
   * @param options.type 模型类型，可选值为'box'、'prism'、'triangles'
   * @param options.id 模型id
   */
  setModelsOpacity(e, i) {
    if (!this.state.enabled)
      return;
    const { type: s, id: r } = i || {}, o = s ? Array.isArray(s) ? s : [s] : [], a = e === 1;
    for (const l of this.items)
      if (!s || o.includes(l.type) || l.rawData.id === r) {
        switch (l.type) {
          case "box":
          case "prism": {
            this.setPrismModelOpacity(l.rawData.id, l.model, e);
            break;
          }
          case "triangles": {
            this.setPolygonModelOpacity(l.rawData.id, l.model, e);
            break;
          }
        }
        if (l.tag) {
          if (!l.tag.visible)
            continue;
          const h = l.rawData.id.toString();
          if (a) {
            const f = this.originalTagOpacities.get(h);
            f !== void 0 && (l.tag.container.style.opacity = f.toString());
          } else {
            if (!this.originalTagOpacities.has(h)) {
              const p = parseFloat(l.tag.container.style.opacity) || 1;
              this.originalTagOpacities.set(h, p);
            }
            const g = (this.originalTagOpacities.get(h) || 1) * e;
            l.tag.container.style.opacity = g.toString();
          }
          (parseFloat(l.tag.container.style.opacity) || 0) < 0.01 ? l.tag.container.style.pointerEvents = "none" : l.tag.container.style.pointerEvents = "auto";
        }
      }
    this.five.needsRender = !0;
  }
  /**
   * 隐藏指定类型的模型
   * @param itemTypes 模型类型数组
   */
  hideItemsByType(e) {
    const i = Array.isArray(e) ? e : [e];
    this.items.forEach((s) => {
      i.includes(s.type) && s.hide();
    });
  }
  /**
   * 显示指定类型的模型
   * @param itemTypes 模型类型数组
   */
  showItemsByType(e) {
    const i = Array.isArray(e) ? e : [e];
    this.items.forEach((s) => {
      i.includes(s.type) && s.show();
    });
  }
  dispose() {
    this.hooks.emit("dispose"), this.clear();
  }
  onWorkCodeChange() {
    this.group.matrix.copy(this.workUtil.transform.clone()), this.group.matrix.decompose(this.group.position, this.group.quaternion, this.group.scale), this.group.updateMatrixWorld();
  }
  /**
   * 设置棱柱体模型的透明度
   * @param id 模型id
   * @param model 模型对象
   * @param opacityPercent 透明度系数，范围0-1
   */
  setPrismModelOpacity(e, i, s) {
    let { opacity: r, lineOpacity: o } = this.originalOpacities.get(e.toString()) || { opacity: 0.2, lineOpacity: 1 };
    r = r * s, o = o * s, i.setStyle({ opacity: r, lineOpacity: o });
  }
  /**
   * 设置多边形模型的透明度
   * @param id 模型id
   * @param model 模型对象
   * @param opacityPercent 透明度系数，范围0-1
   */
  setPolygonModelOpacity(e, i, s) {
    let { opacity: r, lineOpacity: o } = this.originalOpacities.get(e.toString()) || { opacity: 0.2, lineOpacity: 1 };
    r = r * s, o = o * s, i.setStyle({ opacity: r, lineOpacity: o });
  }
  handleShow() {
    this.group.visible = !0, this.tagWrapper.style.display = "block", this.five.needsRender = !0;
  }
  handleHide() {
    this.group.visible = !1, this.tagWrapper.style.display = "none", this.five.needsRender = !0;
  }
  getPrismItems() {
    return this.items.filter((e) => e instanceof Ac);
  }
  getPolygonItems() {
    return this.items.filter((e) => e instanceof ag);
  }
  getBoxItems() {
    return this.items.filter((e) => e instanceof sg);
  }
}
const GD = (...n) => new gx(...n), vx = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  BaseEditor: xl,
  BoxMesh: sh,
  BoxMeshEditor: uv,
  CircleMesh: cv,
  CircleMeshEditor: av,
  CircleWithEdgeMesh: Ro,
  CylinderMesh: nh,
  CylinderMeshEditor: hv,
  LineMesh: fi,
  PointMesh: ts,
  PolygonMesh: Vr,
  PrismMesh: xs,
  PrismMeshEditor: nv,
  RectangleMesh: vd,
  RectangleMeshEditor: rv,
  RectangleWithEdgeMesh: nl,
  createBox: fv,
  createCircle: bd,
  createCylinder: dv,
  createLine: pv,
  createPoint: iv,
  createPolygon: gd,
  createPrism: sv,
  createRectangle: Ad
}, Symbol.toStringTag, { value: "Module" })), WD = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  BetterTween: Ds,
  FiveDomEvents: Pr,
  FivePuppet: by,
  Interval: wc,
  LegacyPointHelper: ay,
  LightTag: Bo,
  LineSegments: Dg,
  Magnifier: ch,
  Object3D: xg,
  PointDomHelper: ty,
  PointHelper: kg,
  PointSelector: al,
  PointSelectorHelper: bg,
  Rectangle: wA,
  absoluteUrl: Eh,
  animeMap: oo,
  awaitNextFrame: dy,
  blink: ul,
  bounding: ph,
  boundingBox: Bs,
  boundingSphere: Sg,
  boxVertex: Nn,
  boxVertexes: ub,
  checkFiveModelLoaded: cy,
  convexHull: PA,
  equal: Qt,
  fiveModelIsLoaded: vg,
  getCoordsFromClient: SA,
  getCoordsFromElement: gg,
  getFrameTime: uy,
  getIntersectFromRelativePosition: Wb,
  getRaycasterFromFivePointer: Qb,
  initialCSS3DRender: Vo,
  inside: Od,
  isAbsoluteURL: e0,
  isModelLike: di,
  isNil: si,
  isPanoramaLike: Qn,
  lookObject: ly,
  lookPoint: Kg,
  nextFrame: Fo,
  notNil: _e,
  pointInPolygon: Od,
  reblink: Zg,
  requestAnimationFrameInterval: jr,
  sculpt: vx,
  tag: mg,
  tweenProgress: Io,
  uuid: Dt,
  waitFiveModelLoaded: ui,
  worldBounding: ll,
  worldBoundingBox: fb,
  worldBoundingSphere: Tg
}, Symbol.toStringTag, { value: "Module" }));
sA();
nA();
export {
  HD as AreaMakerPlugin,
  Co as CSS3DRender,
  fl as CSS3DRenderPlugin,
  N3 as CameraMovementEffect,
  qx as CameraMovementPlugin,
  K4 as ContentType,
  TD as CruisePlugin,
  hd as CruisePluginController,
  SD as CruisePluginTypes,
  FD as CurrentPanoImagePlugin,
  lo as DIRECTION,
  ar as DISPLAY_STRATEGY_TYPE,
  $4 as DimensionType,
  Cs as FLOOR_PLAN_ATTACHED_TO,
  Xx as FLOOR_TYPE_MAP,
  xD as GuideLineItem,
  MD as GuideLineModeItem,
  Z1 as GuideLinePlugin,
  lr as ITEM_LABEL_PLUGIN_DISPLAY_STRATEGY_TYPE,
  mD as ItemLabelPlugin,
  ch as Magnifier,
  Fx as MapviewFloorplanPlugin,
  oD as MeasurePlugin,
  Zx as ModelChassisCompassPlugin,
  Jx as ModelEntryDoorGuidePlugin,
  _x as ModelFloorplanPlugin,
  dD as ModelItemLabelPlugin,
  GD as ModelMakerPlugin,
  Tx as ModelRoomLabelPlugin,
  fD as ModelTVVideoPlugin,
  Dx as ModelViewPlugin,
  U1 as MoveController,
  LD as MovePlugin,
  J1 as Object3DHelperController,
  OD as Object3DHelperPlugin,
  pd as PLUGIN,
  Ex as PaintBrush,
  _n as PaintBrushTypeEnum,
  tD as PanoCompassPlugin,
  Sx as PanoCursorRaycasterPlugin,
  vD as PanoDoorLabelPlugin,
  Qx as PanoFloorplanRadarPlugin,
  rD as PanoMeasurePlugin,
  xr as PanoMeasurePluginLine,
  U0 as PanoMeasurePluginModel,
  wi as PanoMeasurePluginPoint,
  Dr as PanoMeasurePluginPolyline,
  Kx as PanoRulerPlugin,
  eD as PanoRulerProPlugin,
  lD as PanoSpatialTagPlugin,
  ED as PanoTagPlugin,
  Jc as PanoTagPluginController,
  RD as PanoVideoPlugin,
  jD as PanoVideoPluginType,
  VD as PipelinePlugin,
  q4 as PointType,
  Ux as ROOM_FETILE_TYPE_MAP,
  Yx as ROOM_TYPE_MAP,
  dn as Rotation,
  ct as Sculpt,
  ND as SculptPlugin,
  Gx as TopviewFloorplanPlugin,
  WD as Util,
  hd as WalkController,
  fv as createBox,
  bd as createCircle,
  dv as createCylinder,
  pv as createLine,
  iv as createPoint,
  gd as createPolygon,
  K6 as createPolyline,
  sv as createPrism,
  Ad as createRectangle,
  g1 as defaultGlobalConfig,
  gD as itemLabelPluginServerParams,
  uD as modelItemLabelPluginServerParams,
  Lx as modelRoomLabelPluginServerParams,
  ID as pluginFlag
};
