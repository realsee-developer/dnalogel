import{r as d,j as t,q as A,J as Q,n as X,F as _,G as ee,p as oe,I as te,b as ae}from"./index-85b64ddc.js";import{c as re}from"./index-95a52a8f.js";import{F as ne}from"./FiveModeSwitcher-1248bc03.js";import{g as B,a as N,f as P,_ as h,c as D,d as F,b as se}from"./createTheme-a7bd8e9d.js";import{u as le}from"./useControlled-e139503c.js";import{s as S,b as O,d as G,r as H,u as ie}from"./ButtonBase-4df208c3.js";import{u as ce}from"./useId-457cb0cd.js";import{F as J}from"./FormGroup-27c2d149.js";import{f as de}from"./formControlState-a1fb9590.js";import{u as ue}from"./useFormControl-02fd8567.js";import{T as E}from"./Typography-c2c598f0.js";import{S as pe}from"./Stack-c2a4c269.js";import{S as me}from"./SwitchBase-46ff3440.js";import{c as K,a as fe}from"./createSvgIcon-0da8929c.js";import{S as q}from"./Switch-96b748b5.js";import{S as U}from"./Slider-ccde2988.js";import{B as he}from"./Box-d96aca33.js";import{u as ge,D as be}from"./useFetchDatas-45e33e50.js";import{u as Ce}from"./useWindowDimensions-e9a574a8.js";import"./_five-e7379201.js";import"./Paper-ead7a250.js";import"./BottomNavigationAction-2b30d94e.js";import"./useTheme-28230d65.js";import"./index-16229650.js";import"./resolveComponentProps-e8e495ed.js";import"./useSlotProps-f647abdb.js";function xe(e){return N("MuiFormControlLabel",e)}const ke=B("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),y=ke,ve=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Re=e=>{const{classes:o,disabled:a,labelPlacement:n,error:s,required:r}=e,u={root:["root",a&&"disabled",`labelPlacement${P(n)}`,s&&"error",r&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",s&&"error"]};return G(u,xe,o)},Pe=S("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[{[`& .${y.label}`]:o.label},o.root,o[`labelPlacement${P(a.labelPlacement)}`]]}})(({theme:e,ownerState:o})=>h({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${y.disabled}`]:{cursor:"default"}},o.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},o.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},o.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${y.label}`]:{[`&.${y.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Se=S("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,o)=>o.asterisk})(({theme:e})=>({[`&.${y.error}`]:{color:(e.vars||e).palette.error.main}})),je=d.forwardRef(function(o,a){var n,s;const r=O({props:o,name:"MuiFormControlLabel"}),{className:u,componentsProps:m={},control:l,disabled:p,disableTypography:x,label:k,labelPlacement:g="end",required:b,slotProps:C={}}=r,v=D(r,ve),f=ue(),i=(n=p??l.props.disabled)!=null?n:f==null?void 0:f.disabled,c=b??l.props.required,$={disabled:i,required:c};["checked","name","onChange","value","inputRef"].forEach(w=>{typeof l.props[w]>"u"&&typeof r[w]<"u"&&($[w]=r[w])});const j=de({props:r,muiFormControl:f,states:["error"]}),I=h({},r,{disabled:i,labelPlacement:g,required:c,error:j.error}),M=Re(I),z=(s=C.typography)!=null?s:m.typography;let R=k;return R!=null&&R.type!==E&&!x&&(R=t.jsx(E,h({component:"span"},z,{className:F(M.label,z==null?void 0:z.className),children:R}))),t.jsxs(Pe,h({className:F(M.root,u),ownerState:I,ref:a},v,{children:[d.cloneElement(l,$),c?t.jsxs(pe,{display:"block",children:[R,t.jsxs(Se,{ownerState:I,"aria-hidden":!0,className:M.asterisk,children:[" ","*"]})]}):R]}))}),L=je,ye=K(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),$e=K(t.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),we=S("span",{name:"MuiRadioButtonIcon",shouldForwardProp:H})({position:"relative",display:"flex"}),Le=S(ye,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),Fe=S($e,{name:"MuiRadioButtonIcon"})(({theme:e,ownerState:o})=>h({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},o.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function Y(e){const{checked:o=!1,classes:a={},fontSize:n}=e,s=h({},e,{checked:o});return t.jsxs(we,{className:a.root,ownerState:s,children:[t.jsx(Le,{fontSize:n,className:a.background,ownerState:s}),t.jsx(Fe,{fontSize:n,className:a.dot,ownerState:s})]})}const Ie=d.createContext(void 0),Z=Ie;function Me(){return d.useContext(Z)}function ze(e){return N("MuiRadio",e)}const qe=B("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),V=qe,Be=["checked","checkedIcon","color","icon","name","onChange","size","className"],Ne=e=>{const{classes:o,color:a,size:n}=e,s={root:["root",`color${P(a)}`,n!=="medium"&&`size${P(n)}`]};return h({},o,G(s,ze,o))},De=S(me,{shouldForwardProp:e=>H(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,a.size!=="medium"&&o[`size${P(a.size)}`],o[`color${P(a.color)}`]]}})(({theme:e,ownerState:o})=>h({color:(e.vars||e).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${o.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:se(o.color==="default"?e.palette.action.active:e.palette[o.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${V.checked}`]:{color:(e.vars||e).palette[o.color].main}},{[`&.${V.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function Ge(e,o){return typeof o=="object"&&o!==null?e===o:String(e)===String(o)}const T=t.jsx(Y,{checked:!0}),W=t.jsx(Y,{}),_e=d.forwardRef(function(o,a){var n,s;const r=O({props:o,name:"MuiRadio"}),{checked:u,checkedIcon:m=T,color:l="primary",icon:p=W,name:x,onChange:k,size:g="medium",className:b}=r,C=D(r,Be),v=h({},r,{color:l,size:g}),f=Ne(v),i=Me();let c=u;const $=fe(k,i&&i.onChange);let j=x;return i&&(typeof c>"u"&&(c=Ge(i.value,r.value)),typeof j>"u"&&(j=i.name)),t.jsx(De,h({type:"radio",icon:d.cloneElement(p,{fontSize:(n=W.props.fontSize)!=null?n:g}),checkedIcon:d.cloneElement(m,{fontSize:(s=T.props.fontSize)!=null?s:g}),ownerState:v,classes:f,name:j,checked:c,onChange:$,ref:a,className:F(f.root,b)},C))}),Ee=_e;function Ue(e){return N("MuiRadioGroup",e)}B("MuiRadioGroup",["root","row","error"]);const Ve=["actions","children","className","defaultValue","name","onChange","value"],Te=e=>{const{classes:o,row:a,error:n}=e;return G({root:["root",a&&"row",n&&"error"]},Ue,o)},We=d.forwardRef(function(o,a){const{actions:n,children:s,className:r,defaultValue:u,name:m,onChange:l,value:p}=o,x=D(o,Ve),k=d.useRef(null),g=Te(o),[b,C]=le({controlled:p,default:u,name:"RadioGroup"});d.useImperativeHandle(n,()=>({focus:()=>{let c=k.current.querySelector("input:not(:disabled):checked");c||(c=k.current.querySelector("input:not(:disabled)")),c&&c.focus()}}),[]);const v=ie(a,k),f=ce(m),i=d.useMemo(()=>({name:f,onChange(c){C(c.target.value),l&&l(c,c.target.value)},value:b}),[f,l,C,b]);return t.jsx(Z.Provider,{value:i,children:t.jsx(J,h({role:"radiogroup",ref:v,className:F(g.root,r)},x,{children:s}))})}),Ae=We;function Oe(e){const o=A();return t.jsx("div",{style:{position:"fixed",bottom:0,right:0},children:t.jsx(Ae,{row:!0,defaultValue:e.workCodes[0],onChange:(a,n)=>{const s=`/dnalogel/open-works/real/${n}/work.json`,r=fetch(s).then(l=>l.json()).catch(l=>{console.warn(`拉取${s}数据失败，error log: ${l}`)}),u=`/dnalogel/open-works/virtual/${n}/work.json`,m=fetch(u).then(l=>l.json()).catch(l=>{console.warn(`拉取${u}数据失败，error log: ${l}`)});Promise.all([r,m]).then(([l,p])=>{const x=l??p;o.load(x)})},children:e.workCodes.map(a=>t.jsx(L,{value:a,control:t.jsx(Ee,{size:"small"}),label:a},a))})})}const He=()=>{const[e,o]=Q(),a=A(),n=d.useRef(null),s=X(),[r,u]=d.useState({latitude:!1,longitude:!1,currentPanoIndex:!1}),[m,l]=d.useState(0),[p,x]=d.useState(0),k=a.plugins.modelViewPlugin;function g(i){return Math.ceil(i/100*(Math.PI/2)*1e4)/1e4}function b(i){return Math.ceil(i/100*Math.PI*1e4)/1e4}const C=i=>{u({...r,[i.target.name]:i.target.checked})};function v(i,c){l(c)}function f(i,c){x(c)}return d.useEffect(()=>{!n.current||e.mode!==_.Mode.Panorama||a.plugins.modelViewPlugin.appendTo(n.current)},[e.mode,s,a]),d.useEffect(()=>{const i={lookAtCurrentCamera:r.currentPanoIndex,lockedLatitude:r.latitude?g(m):null,lockedLongitude:r.longitude?b(p):null};k.changeConfigs(i)},[m,p,r,a]),s!=="Loaded"?null:t.jsxs(t.Fragment,{children:[t.jsx(ne,{}),t.jsx(Oe,{workCodes:["81gmMq5a7zbF9leWMk","test"]}),e.mode===_.Mode.Panorama&&t.jsxs(t.Fragment,{children:[t.jsxs(J,{sx:{position:"absolute",left:"20px",top:"20px",width:"200px"},children:[t.jsx(L,{control:t.jsx(q,{checked:r.latitude,name:"latitude",onChange:C}),label:"锁定俯仰角"}),t.jsx(U,{value:m,disabled:!r.latitude,defaultValue:0,"aria-label":"Default",valueLabelDisplay:"auto",scale:g,onChange:v}),t.jsx(L,{control:t.jsx(q,{checked:r.longitude,name:"longitude",onChange:C}),label:"锁定水平角"}),t.jsx(U,{value:p,disabled:!r.longitude,defaultValue:0,"aria-label":"Default",valueLabelDisplay:"auto",scale:b,onChange:f}),t.jsx(L,{control:t.jsx(q,{name:"currentPanoIndex",checked:r.currentPanoIndex,onChange:C}),label:"锁定当前点位"})]}),t.jsx(he,{onClick:()=>o({mode:"Floorplan"}),sx:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"60px",right:"20px",padding:"10px",width:"500px",height:"500px",boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, .2)",pointerEvents:"all"},ref:n})]})]})},Je=ee({imageOptions:{size:512},textureOptions:{size:512},onlyRenderIfNeeds:!0,plugins:[[re,"modelViewPlugin",{initialState:{enabled:!0}}]]}),Ke=()=>{const e=Ce(),o=ge(be.WORK);return o&&t.jsxs(Je,{initialWork:oe(o),children:[t.jsx(te,{...e}),t.jsx(He,{})]})};ae.render(t.jsx(Ke,{}),document.querySelector("#app"));
