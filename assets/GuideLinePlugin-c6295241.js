import{r as n,q as f,X as F,j as e,G as j,p as w,I as _,a as v}from"./index-85b64ddc.js";import{o as k}from"./index-95a52a8f.js";import{A as y,b as L,d as I,c as S,L as P,e as A,f as C,C as E,g as z,w as b}from"./work-ab1bbcef.js";import{F as W}from"./FiveModeSwitcher-1248bc03.js";import{S as m}from"./Stack-c2a4c269.js";import{B as D}from"./Button-c89038b2.js";import{T as x}from"./Typography-c2c598f0.js";import{a as M}from"./List-18d2735b.js";import"./_five-e7379201.js";import"./createTheme-a7bd8e9d.js";import"./resolveComponentProps-e8e495ed.js";import"./ButtonBase-4df208c3.js";import"./Paper-ead7a250.js";import"./useControlled-e139503c.js";import"./SwitchBase-46ff3440.js";import"./useFormControl-02fd8567.js";import"./createSvgIcon-0da8929c.js";import"./createSvgIcon-c7bdef24.js";import"./useId-457cb0cd.js";import"./BottomNavigationAction-2b30d94e.js";import"./useTheme-28230d65.js";function h(){return{width:window.innerWidth,height:window.innerHeight}}function R(){const[t,s]=n.useState(h);return n.useEffect(()=>{const l=()=>s(h());return window.addEventListener("resize",l,!1),()=>window.removeEventListener("resize",l,!1)}),t}const q=()=>{const t=f(),[s,l]=n.useState(!0),[a,g]=n.useState([!0,!0,!0,!0,!0,!0,!0]),d=t.plugins.guideLinePlugin,o=n.useMemo(()=>a.map((r,i)=>({checked:r,index:i})).filter(({checked:r})=>r).map(({index:r})=>r),[a]);return Object.assign(window,{guideLine:d}),n.useEffect(()=>{s?d.show():d.hide()},[s,t]),n.useEffect(()=>{var r;if(t.getElement())return o.length===0?d.clear():(d.load({lines:[{id:1,pano_group:o,panorama_style:{visible:!0,border_color:"#FF0000",background_color:"#FFFFFF",background_opacity:.4,border_opacity:.4,border_width:.05,background_clip:"border-box",color:"#FFFFFF",unit_length:.5,opacity:.8,width:.5},model_style:{visible:!0,background_color:"#FFFFFF",background_opacity:.6,border_color:"#FFFFFF",border_opacity:.4,border_width:.05,background_clip:"border-box",color:"green",unit_length:.5,width:.5,start_tag:{data:{icon_url:"https://vr-image-4.realsee-cdn.cn/release/web/start2.d28f9bf8.png",text:"起点"},position:(r=t.observers[o[0]])==null?void 0:r.standingPosition.toArray()}}}]}),()=>d.clear())},[o,t]),F("loaded",(r,i)=>{g(c=>i.observers.map((u,p)=>typeof c[p]=="boolean"?c[p]:!1))}),e.jsxs(e.Fragment,{children:[e.jsx(W,{modeList:["Mapview","Panorama"]}),e.jsxs(m,{spacing:2,direction:"row",sx:{position:"fixed",top:"10px",right:"10px",backgroundColor:"transparent"},children:[e.jsx(m,{spacing:2,direction:"column",sx:{backgroundColor:"transparent"},children:e.jsx(D,{variant:"contained",onClick:()=>l(!s),children:s?"隐藏":"显示"})}),e.jsx(m,{spacing:2,direction:"column",sx:{backgroundColor:"transparent"},children:e.jsxs(y,{children:[e.jsx(L,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:e.jsxs(x,{children:["当前路径：",o==null?void 0:o.join(",")]})}),e.jsxs(S,{children:[e.jsx(x,{children:"选择节点，添加到当前路径中"}),e.jsx(M,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper",position:"relative",overflow:"auto",maxHeight:300,"& ul":{padding:0}},children:a==null?void 0:a.map((r,i)=>{const c=`checkbox-list-label-${i}`;return e.jsx(P,{disablePadding:!0,children:e.jsxs(A,{role:void 0,onClick:()=>g(a.map((u,p)=>p===i?!u:u)),dense:!0,children:[e.jsx(C,{children:e.jsx(E,{edge:"start",checked:r,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":c}})}),e.jsx(z,{id:c,primary:`Available PanoIndex ${i}`})]})},i)})})]})]})})]})]})},B=j({imageOptions:{size:512},textureOptions:{size:512},onlyRenderIfNeeds:!0,plugins:[[k,"guideLinePlugin"]]}),O=()=>{const t=R();return b&&e.jsxs(B,{initialState:{distance:18,fov:80,latitude:.42,longitude:3.18},initialWork:w(b),children:[e.jsx(_,{...t}),e.jsx(q,{})]})};v.render(e.jsx(O,{}),document.querySelector("#app"));
