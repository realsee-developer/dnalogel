import{a as f,F as h}from"./index-0b761db4.js";const n=[];function d(o,u=f){let s;const c=new Set;function i(e){if(h(o,e)&&(o=e,s)){const r=!n.length;for(const t of c)t[1](),n.push(t,o);if(r){for(let t=0;t<n.length;t+=2)n[t][0](n[t+1]);n.length=0}}}function l(e){i(e(o))}function a(e,r=f){const t=[e,r];return c.add(t),c.size===1&&(s=u(i)||f),e(o),()=>{c.delete(t),c.size===0&&s&&(s(),s=null)}}return{set:i,update:l,subscribe:a}}export{d as h};
