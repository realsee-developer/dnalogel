import{r as t,J as z,q as F,F as g,j as e,G as R,p as k,I as y,a as A}from"./index-85b64ddc.js";import{T}from"./index-95a52a8f.js";import{u as E,D as b}from"./useFetchDatas-45e33e50.js";import{P as C}from"./Paper-ead7a250.js";import{T as D}from"./Typography-c2c598f0.js";import{S as G}from"./Stack-c2a4c269.js";import{B as c}from"./Button-c89038b2.js";import{B as L}from"./Box-d96aca33.js";import{g as O}from"./getInitialParamFromUrl-5dd39f79.js";import"./createTheme-a7bd8e9d.js";import"./ButtonBase-4df208c3.js";import"./useTheme-28230d65.js";function h(){return{width:window.innerWidth,height:window.innerHeight}}function N(){const[n,i]=t.useState(h);return t.useEffect(()=>{const o=()=>i(h());return window.addEventListener("resize",o,!1),()=>window.removeEventListener("resize",o,!1)}),n}const I=()=>{const[n,i]=z(),o=E(b.FLOOR_PLAN_SERVER_PLUGIN_DATA),d=t.useRef(null),[f,p]=t.useState(!1),[s,j]=t.useState(!1),[a,v]=t.useState(!0),[r,P]=t.useState(!0),[l,S]=t.useState(!1),m=F(),u=m.plugins.floorplanGuidePlugin;return t.useEffect(()=>{u.changeConfigs({hoverEnable:!0,clickEnable:!0,roomLabelsEnable:s,roomNameEnable:a,roomAreaEnable:r,compassEnable:l,northDesc:"北",getRoomAreaText:w=>(w/1e6).toFixed(1)+"㎡"})},[s,a,r,l]),t.useEffect(()=>{!d.current||n.mode!==g.Mode.Panorama||u.appendTo(d.current)},[m]),t.useEffect(()=>{!o||JSON.stringify(o)==="{}"||u.load(o)},[o,m]),t.useEffect(()=>{n.mode===g.Mode.Panorama?p(!0):p(!1)},[n.mode]),e.jsxs(e.Fragment,{children:[f&&e.jsxs(C,{sx:{position:"fixed",top:16,left:16,p:2,backgroundColor:"rgba(255, 255, 255, 0.9)",zIndex:1e3},children:[e.jsx(D,{variant:"h6",gutterBottom:!0,children:"房间标签控制"}),e.jsxs(G,{spacing:1,children:[e.jsx(c,{variant:s?"contained":"outlined",size:"small",onClick:()=>j(!s),children:s?"隐藏房间标签":"显示房间标签"}),s&&e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:a?"contained":"outlined",size:"small",onClick:()=>v(!a),children:a?"隐藏房间名称":"显示房间名称"}),e.jsx(c,{variant:r?"contained":"outlined",size:"small",onClick:()=>P(!r),children:r?"隐藏房间面积":"显示房间面积"})]}),e.jsx(c,{variant:l?"contained":"outlined",size:"small",onClick:()=>S(!l),children:l?"隐藏指北针":"显示指北针"})]})]}),e.jsx(L,{sx:{display:`${f?"flex":"none"}`,justifyContent:"center",alignItems:"center",position:"absolute",top:0,right:0,padding:0,width:"50%",height:"100%",backgroundColor:"rgba(0, 0, 0, .2)"},children:e.jsx("div",{style:{height:400,width:400},ref:d})})]})},W={},x=O();JSON.stringify(x);const q=R({imageOptions:{size:512,quality:50},textureOptions:{size:512,quality:50},plugins:[[T,"floorplanGuidePlugin"]]}),B=()=>{const n=N(),i=E(b.WORK);return i&&e.jsxs(q,{initialWork:k(i),children:[e.jsx(y,{...n}),e.jsx(I,{})]})};A.render(e.jsx(B,{}),document.querySelector("#app"));
