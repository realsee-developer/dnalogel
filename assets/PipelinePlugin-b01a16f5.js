import{r,q as C,n as E,j as i,T as F,G as D,p as I,I as L,a as N}from"./index-85b64ddc.js";import{I as y}from"./index-95a52a8f.js";import{u as f,D as g}from"./useFetchDatas-45e33e50.js";import{B as o}from"./Button-c89038b2.js";import{g as z}from"./getInitialParamFromUrl-5dd39f79.js";import{B as A}from"./Box-d96aca33.js";import"./createTheme-a7bd8e9d.js";import"./ButtonBase-4df208c3.js";import"./useTheme-28230d65.js";function u(){return{width:window.innerWidth,height:window.innerHeight}}function O(){const[s,e]=r.useState(u);return r.useEffect(()=>{const t=()=>e(u());return window.addEventListener("resize",t,!1),()=>window.removeEventListener("resize",t,!1)}),s}const R=()=>{const s=C(),e=s.plugins.pipelinePlugin,[t,c]=r.useState(),a=f(g.PIPELINE_DATA,"81xManr9NXhxbrmRmP"),d=E(),p=a?a.ConnectsDataset.map(({start:n,end:l})=>[n,l]):[];r.useEffect(()=>{d==="Loaded"&&a&&e.load(a)},[a,d]),r.useEffect(()=>{if(typeof t=="number"){const[n,l]=p[t],S=[{startLibraryID:n,endLibraryID:l}];e.setState({target:S})}else e.setState({target:null})},[t]),r.useEffect(()=>{e.hooks.on("show",(...n)=>console.info("show",...n)),e.hooks.on("hide",(...n)=>console.info("hide",...n)),e.hooks.on("dataChange",(...n)=>console.info("dataChange",...n)),e.hooks.on("dataLoaded",(...n)=>console.info("dataLoaded",...n)),e.hooks.on("stateChange",(...n)=>console.info("stateChange",...n)),e.hooks.on("enable",(...n)=>console.info("enable",...n)),e.hooks.on("disable",(...n)=>console.info("disable",...n))},[]);function m(){e.setState({enabled:!0})}function x(){e.setState({enabled:!1})}function v(){e.setState({visible:!0})}function w(){e.setState({visible:!1})}function b(){e.setState({isFlowing:!0})}function j(){e.setState({isFlowing:!1})}function P(){c(typeof t=="number"?(t+1)%p.length:0)}function k(){c(void 0)}return a?i.jsxs("div",{className:"pipeline-plugin-btn-group",children:[i.jsxs("div",{className:"left-group",children:[i.jsx(o,{variant:"contained",onClick:()=>s.changeMode("Floorplan"),children:"模型"},"showFiveFloorplan"),i.jsx(o,{variant:"contained",onClick:()=>s.changeMode("Panorama"),children:"全景"},"showFivePanorama")]},"left-group"),i.jsxs("div",{className:"right-group",children:[i.jsx(o,{variant:"contained",onClick:v,children:"展示"},"show"),i.jsx(o,{variant:"contained",onClick:w,children:"隐藏"},"hide"),i.jsx(o,{variant:"contained",onClick:b,children:"流动"},"flow"),i.jsx(o,{variant:"contained",onClick:j,children:"停止流动"},"stopFlow"),i.jsx(o,{variant:"contained",onClick:P,children:"切换选择管道"},"switchPipeline"),i.jsx(o,{variant:"contained",onClick:k,children:"选择所有管道"},"switchAllPipeline"),i.jsx(o,{variant:"contained",onClick:m,children:"启用"},"enable"),i.jsx(o,{variant:"contained",onClick:x,children:"禁用"},"disable")]},"right-group")]}):null};Object.assign(window,{THREE:F});const M={hoverEnable:!0,northDesc:"N"},h=z(),T=Object.assign(M,JSON.stringify(h)!=="{}"?h:{}),W=D({imageOptions:{size:512},textureOptions:{size:512},plugins:[[y,"pipelinePlugin",{...T}]]}),B=()=>{const s=O(),e=f(g.WORK,"81xManr9NXhxbrmRmP");return e&&i.jsxs(W,{initialWork:I(e),children:[i.jsx(L,{...s},"five-canvas"),i.jsx(A,{className:"plugin-full-screen-container",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}},"box"),i.jsx(R,{},"plugin-use")]})};N.render(i.jsx(B,{}),document.querySelector("#app"));
