import{Z as $t,aa as Ce,C as O,T as G,F as V,Q as H,K as L,W as ce,t as u,N as x,a as W,J as $,X as _,p as A,a5 as qe,L as B,$ as P,O as Y,o as v,A as S,D as k,R as U,g as oe,n as w,e as le,Y as J,q as $e,l as ne,E as de,x as Ee,s as he,y as K,S as Z,r as ye,k as St,a1 as Te,M as F,G as _e,z as kt,m as Ut}from"./index-0b761db4.js";import{h as Ft}from"./index-94bb1ebd.js";import{I as Qt,J as Et,A as jt,K as Bt,r as Yt,G as Ht}from"./index-62a9cd62.js";import{V as Oe}from"./index-85b64ddc.js";var Mt=Object.defineProperty,Kt=(n,e,t)=>e in n?Mt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pe=(n,e,t)=>(Kt(n,typeof e!="symbol"?e+"":e,t),t);const Zt={sm:{name:10,area:8,padding:{room:[6,3],guide:[0,0],distance:[4,2]},lineHeight:14,default:10},md:{name:10,area:8,padding:{room:[6,3],guide:[0,0],distance:[4,2]},lineHeight:14,default:10},lg:{name:12,area:10,padding:{room:[8,4],guide:[0,3],distance:[6,3]},lineHeight:16,default:12},xl:{name:14,area:12,padding:{room:[8,4],guide:[0,3],distance:[6,3]},lineHeight:20,default:14},xxl:{name:14,area:12,padding:{room:[8,4],guide:[0,3],distance:[6,3]},lineHeight:20,default:14}},wt=n=>n<500?"sm":n<930?"md":n<1366?"lg":n<2550?"xl":"xxl",Dt=()=>typeof window<"u"?wt(window.innerWidth):"md";let Jt=class{constructor(){pe(this,"fontSize"),pe(this,"subscribers",[]),pe(this,"debounceTimer",null),pe(this,"isInitialized",!1),pe(this,"handleResize",()=>{this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{const e=wt(window.innerWidth);e!==this.fontSize&&(this.fontSize=e,this.notifySubscribers()),this.debounceTimer=null},100)}),this.fontSize=Dt(),this.initialize()}initialize(){typeof window>"u"||this.isInitialized||(this.isInitialized=!0,window.addEventListener("resize",this.handleResize))}notifySubscribers(){this.subscribers.forEach(e=>{try{e(this.fontSize)}catch(t){console.warn("Error in fontSize callback:",t)}})}subscribe(e){return this.subscribers.push(e),e(this.fontSize),()=>{this.subscribers=this.subscribers.filter(t=>t!==e)}}get current(){return this.fontSize}destroy(){this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),typeof window<"u"&&window.removeEventListener("resize",this.handleResize),this.subscribers=[],this.isInitialized=!1}},Ae=null;const Xt=()=>(Ae||(Ae=new Jt),Ae),en=()=>typeof window>"u"?"md":Xt();function Ge(n,e=16){return(Number(typeof n=="string"?n.replace(/px/g,""):n)/e).toFixed(5)+"rem"}function we(n){new Qt((e,t)=>{var o,r,l,s,a,i;for(const f of e){const{borderBoxSize:m,contentRect:p}=f,h=(l=(r=(o=m==null?void 0:m[0])==null?void 0:o.inlineSize)!=null?r:p.width)!=null?l:n.clientWidth,D=(i=(a=(s=m==null?void 0:m[0])==null?void 0:s.blockSize)!=null?a:p.height)!=null?i:n.clientHeight;n.dispatchEvent(new CustomEvent("clientWidth",{detail:h})),n.dispatchEvent(new CustomEvent("clientHeight",{detail:D}))}}).observe(n)}var xe=(n=>(n[n.FLOOR=1]="FLOOR",n[n.CEILING=2]="CEILING",n[n.BOUNDING_CENTER=3]="BOUNDING_CENTER",n))(xe||{}),tn=(n,e,t)=>new Promise((o,r)=>{var l=i=>{try{a(t.next(i))}catch(f){r(f)}},s=i=>{try{a(t.throw(i))}catch(f){r(f)}},a=i=>i.done?o(i.value):Promise.resolve(i.value).then(l,s);a((t=t.apply(n,e)).next())});function nn(n){return tn(this,null,function*(){try{return[null,yield n]}catch(e){return e instanceof Error?[e,null]:[new Error(""),null]}})}function on(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function ln(n){const e=n-1;return e*e*e+1}function rn(n,{delay:e=0,duration:t=400,easing:o=$t}={}){const r=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:o,css:l=>`opacity: ${l*r}`}}function dl(n,{delay:e=0,duration:t=400,easing:o=ln,x:r=0,y:l=0,opacity:s=0}={}){const a=getComputedStyle(n),i=+a.opacity,f=a.transform==="none"?"":a.transform,m=i*(1-s),[p,h]=Ce(r),[D,d]=Ce(l);return{delay:e,duration:t,easing:o,css:(g,y)=>`
			transform: ${f} translate(${(1-g)*p}${h}, ${(1-g)*D}${d});
			opacity: ${i-m*y}`}}function hl(n,{delay:e=0,speed:t,duration:o,easing:r=on}={}){let l=n.getTotalLength();const s=getComputedStyle(n);return s.strokeLinecap!=="butt"&&(l+=parseInt(s.strokeWidth)),o===void 0?t===void 0?o=800:o=l/t:typeof o=="function"&&(o=o(l)),{delay:e,duration:o,easing:r,css:(a,i)=>`
			stroke-dasharray: ${l};
			stroke-dashoffset: ${i*l};
		`}}function an(n){H(n,"svelte-1gfoniz","img.svelte-1gfoniz{width:100%;height:100%}")}function sn(n){let e,t;return{c(){e=L("img"),ce(e.src,t=n[0])||u(e,"src",t),u(e,"alt","floorplan iamge"),u(e,"class","svelte-1gfoniz")},m(o,r){x(o,e,r)},p(o,[r]){r&1&&!ce(e.src,t=o[0])&&u(e,"src",t)},i:W,o:W,d(o){o&&$(e)}}}function fn(n,e,t){let{url:o}=e;return n.$$set=r=>{"url"in r&&t(0,o=r.url)},[o]}let mn=class extends O{constructor(e){super(),G(this,e,fn,sn,V,{url:0},an)}};function un(n){H(n,"svelte-ub47ya",".floorplan-plugin__base-image.svelte-ub47ya{width:100%;height:100%}")}function pn(n){let e,t,o,r;return{c(){e=L("div"),t=new qe(!1),o=_(),r=new qe(!1),t.a=o,r.a=null,u(e,"class","floorplan-plugin__base-image svelte-ub47ya")},m(l,s){x(l,e,s),t.m(n[1],e),A(e,o),r.m(n[0],e)},p(l,[s]){s&1&&r.p(l[0])},i:W,o:W,d(l){l&&$(e)}}}function cn(n,e,t){let{content:o}=e;const r=`
    <style>
      svg [type='lineGroup'] path {
        fill: #ffffff;
        stroke: #ffffff;
      }
      svg [type='lineItemGroup'] g g g g {
        stroke: #ffffff;
      }</style>
  `;return n.$$set=l=>{"content"in l&&t(0,o=l.content)},[o,r]}let dn=class extends O{constructor(e){super(),G(this,e,cn,pn,V,{content:0},un)}};function hn(n){H(n,"svelte-ozpg4a",".floorplan-plugin__base-image.svelte-ozpg4a{position:absolute;z-index:10;width:100%;height:100%;pointer-events:none}")}function gn(n){let e,t;return e=new mn({props:{url:n[1].url}}),{c(){S(e.$$.fragment)},m(o,r){k(e,o,r),t=!0},p(o,r){const l={};r&2&&(l.url=o[1].url),e.$set(l)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function bn(n){let e,t;return e=new dn({props:{content:n[0]}}),{c(){S(e.$$.fragment)},m(o,r){k(e,o,r),t=!0},p(o,r){const l={};r&1&&(l.content=o[0]),e.$set(l)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function vn(n){let e,t,o,r;const l=[bn,gn],s=[];function a(i,f){return i[0]?0:i[1]?1:-1}return~(t=a(n))&&(o=s[t]=l[t](n)),{c(){e=L("div"),o&&o.c(),u(e,"class","floorplan-plugin__base-image svelte-ozpg4a")},m(i,f){x(i,e,f),~t&&s[t].m(e,null),r=!0},p(i,[f]){let m=t;t=a(i),t===m?~t&&s[t].p(i,f):(o&&(B(),P(s[m],1,1,()=>{s[m]=null}),Y()),~t?(o=s[t],o?o.p(i,f):(o=s[t]=l[t](i),o.c()),v(o,1),o.m(e,null)):o=null)},i(i){r||(v(o),r=!0)},o(i){P(o),r=!1},d(i){i&&$(e),~t&&s[t].d()}}}function yn(n,e,t){let o,r,{floorIndex:l}=e,{floorplanData:s}=e;return n.$$set=a=>{"floorIndex"in a&&t(2,l=a.floorIndex),"floorplanData"in a&&t(3,s=a.floorplanData)},n.$$.update=()=>{var a,i;n.$$.dirty&12&&t(1,o=s.outlines[l]),n.$$.dirty&12&&t(0,r=(i=(a=s.outlines)==null?void 0:a[l])==null?void 0:i.svgContent)},[r,o,l,s]}let xn=class extends O{constructor(e){super(),G(this,e,yn,vn,V,{floorIndex:2,floorplanData:3},hn)}};function $n(n){H(n,"svelte-2r6702",".floorplan-plugin__item.svelte-2r6702{position:absolute;display:flex;flex-flow:column;align-items:center;line-height:1;color:#fff;transform:translate(-50%, -50%);white-space:nowrap;will-change:opacity;transition:opacity 300ms}.floorplan-plugin__img.svelte-2r6702{width:100%;height:100%}.floorplan-plugin__notes.svelte-2r6702{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);padding:0.25rem;line-height:1;border-radius:0.25rem;color:#fff;background:rgba(0,0,0,.6);font-size:0.75rem}")}function En(n){let e,t,o,r,l,s=n[0].notes+"",a;return{c(){e=L("div"),t=L("img"),r=_(),l=L("span"),a=oe(s),u(t,"class","floorplan-plugin__img svelte-2r6702"),ce(t.src,o=n[6])||u(t,"src",o),u(t,"alt",""),w(t,"transform",n[5]),u(l,"class","floorplan-plugin__notes svelte-2r6702"),u(e,"class","floorplan-plugin__item svelte-2r6702"),w(e,"left",n[1]),w(e,"top",n[2]),w(e,"width",n[3]),w(e,"height",n[4])},m(i,f){x(i,e,f),A(e,t),A(e,r),A(e,l),A(l,a)},p(i,[f]){f&1&&s!==(s=i[0].notes+"")&&le(a,s)},i:W,o:W,d(i){i&&$(e)}}}function wn(n,e,t){let{item:o}=e;const r=o.positionInImage.x*100+"%",l=o.positionInImage.y*100+"%",s=o.width*100+"%",a=o.height*100+"%",i=`rotate(${o.rotateZ}deg) scaleX(${o.rotateX?-1:1}) scaleY(${o.rotateY?-1:1})`,f=o.src;return n.$$set=m=>{"item"in m&&t(0,o=m.item)},[o,r,l,s,a,i,f]}let Dn=class extends O{constructor(e){super(),G(this,e,wn,En,V,{item:0},$n)}};function zn(n){H(n,"svelte-1c5mqz0",".floorplan-plugin__room-items.svelte-1c5mqz0{width:100%;height:100%;position:absolute;left:0;top:0;z-index:20;pointer-events:none}")}function Ve(n,e,t){const o=n.slice();return o[6]=e[t],o}function Se(n){let e,t=[],o=new Map,r,l,s,a=n[1];const i=f=>f[6].id;for(let f=0;f<a.length;f+=1){let m=Ve(n,a,f),p=i(m);o.set(p,t[f]=ke(p,m))}return{c(){e=L("div");for(let f=0;f<t.length;f+=1)t[f].c();u(e,"class","floorplan-plugin__room-items svelte-1c5mqz0")},m(f,m){x(f,e,m);for(let p=0;p<t.length;p+=1)t[p]&&t[p].m(e,null);r=!0,l||(s=[$e(we.call(null,e)),ne(e,"clientWidth",n[4])],l=!0)},p(f,m){m&2&&(a=f[1],B(),t=de(t,m,i,1,f,a,o,e,Ee,ke,null,Ve),Y())},i(f){if(!r){for(let m=0;m<a.length;m+=1)v(t[m]);r=!0}},o(f){for(let m=0;m<t.length;m+=1)P(t[m]);r=!1},d(f){f&&$(e);for(let m=0;m<t.length;m+=1)t[m].d();l=!1,he(s)}}}function ke(n,e){let t,o,r;const l=[{item:e[6]}];let s={};for(let a=0;a<l.length;a+=1)s=K(s,l[a]);return o=new Dn({props:s}),{key:n,first:null,c(){t=J(),S(o.$$.fragment),this.first=t},m(a,i){x(a,t,i),k(o,a,i),r=!0},p(a,i){e=a;const f=i&2?Z(l,[{item:e[6]}]):{};o.$set(f)},i(a){r||(v(o.$$.fragment,a),r=!0)},o(a){P(o.$$.fragment,a),r=!1},d(a){a&&$(t),U(o,a)}}}function Pn(n){let e,t,o=n[1]&&Se(n);return{c(){o&&o.c(),e=J()},m(r,l){o&&o.m(r,l),x(r,e,l),t=!0},p(r,[l]){r[1]?o?(o.p(r,l),l&2&&v(o,1)):(o=Se(r),o.c(),v(o,1),o.m(e.parentNode,e)):o&&(B(),P(o,1,1,()=>{o=null}),Y())},i(r){t||(v(o),t=!0)},o(r){P(o),t=!1},d(r){o&&o.d(r),r&&$(e)}}}function Rn(n,e,t){let o,{floorIndex:r}=e,{floorplanData:l}=e,s=0;const a=i=>{t(0,s=i.detail)};return n.$$set=i=>{"floorIndex"in i&&t(2,r=i.floorIndex),"floorplanData"in i&&t(3,l=i.floorplanData)},n.$$.update=()=>{if(n.$$.dirty&12&&t(1,o=l.floorDatas[r].items),n.$$.dirty&9){const{max:i,min:f}=l.bounding;i.x-f.x}},[s,o,r,l,a]}let In=class extends O{constructor(e){super(),G(this,e,Rn,Pn,V,{floorIndex:2,floorplanData:3},zn)}};function An(n){H(n,"svelte-9vzn2f",".floorplan-plugin__room-label-item.svelte-9vzn2f{position:absolute;display:flex;flex-flow:column;align-items:center;line-height:1;color:#fff;transform:translate(-50%, -50%);white-space:nowrap;will-change:opacity;transition:opacity 300ms}.floorplan-plugin__room-part1.svelte-9vzn2f{display:flex;flex-flow:column;align-items:center;color:#fff;white-space:nowrap}.floorplan-plugin__room-area.svelte-9vzn2f{opacity:0.6;line-height:1.25;margin-top:0.125rem}")}function Ln(n){let e,t=n[18].outerHTML+"",o;return{c(){e=new qe(!1),o=J(),e.a=o},m(r,l){e.m(t,r,l),x(r,o,l)},p(r,l){l[0]&262144&&t!==(t=r[18].outerHTML+"")&&e.p(t)},d(r){r&&$(o),r&&e.d()}}}function qn(n){let e,t,o,r,l,s,a=n[1]&&Ue(n),i=n[0]&&Fe(n),f=n[3]&&Qe(n);return{c(){e=L("div"),a&&a.c(),t=_(),i&&i.c(),o=_(),f&&f.c(),r=J(),u(e,"class","floorplan-plugin__room-part1 svelte-9vzn2f"),w(e,"opacity",n[14]?"1":"0")},m(m,p){x(m,e,p),a&&a.m(e,null),A(e,t),i&&i.m(e,null),x(m,o,p),f&&f.m(m,p),x(m,r,p),l||(s=[$e(we.call(null,e)),ne(e,"clientWidth",n[35]),ne(e,"clientHeight",n[36])],l=!0)},p(m,p){m[1]?a?a.p(m,p):(a=Ue(m),a.c(),a.m(e,t)):a&&(a.d(1),a=null),m[0]?i?i.p(m,p):(i=Fe(m),i.c(),i.m(e,null)):i&&(i.d(1),i=null),p[0]&16384&&w(e,"opacity",m[14]?"1":"0"),m[3]?f?f.p(m,p):(f=Qe(m),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null)},d(m){m&&$(e),a&&a.d(),i&&i.d(),m&&$(o),f&&f.d(m),m&&$(r),l=!1,he(s)}}}function Ue(n){let e,t=(n[2]?n[4].name:n[4].roomType==="100900000012"?n[4].customizedName:n[4].name)+"",o;return{c(){e=L("span"),o=oe(t),u(e,"class","floorplan-plugin__room-name"),w(e,"font-size",n[11])},m(r,l){x(r,e,l),A(e,o)},p(r,l){l[0]&20&&t!==(t=(r[2]?r[4].name:r[4].roomType==="100900000012"?r[4].customizedName:r[4].name)+"")&&le(o,t),l[0]&2048&&w(e,"font-size",r[11])},d(r){r&&$(e)}}}function Fe(n){let e,t;return{c(){e=L("span"),t=oe(n[17]),u(e,"class","floorplan-plugin__room-area svelte-9vzn2f"),w(e,"font-size",n[10])},m(o,r){x(o,e,r),A(e,t)},p(o,r){r[0]&131072&&le(t,o[17]),r[0]&1024&&w(e,"font-size",o[10])},d(o){o&&$(e)}}}function Qe(n){let e,t;return{c(){e=L("span"),t=oe(n[16]),u(e,"class","floorplan-plugin__room-size"),w(e,"font-size",n[10]),w(e,"opacity",n[13]?"0.6":"0")},m(o,r){x(o,e,r),A(e,t)},p(o,r){r[0]&65536&&le(t,o[16]),r[0]&1024&&w(e,"font-size",o[10]),r[0]&8192&&w(e,"opacity",o[13]?"0.6":"0")},d(o){o&&$(e)}}}function Nn(n){let e,t,o;function r(a,i){if(a[5]===void 0)return qn;if(a[18])return Ln}let l=r(n),s=l&&l(n);return{c(){e=L("div"),s&&s.c(),u(e,"class","floorplan-plugin__room-label-item svelte-9vzn2f"),w(e,"left",n[19]),w(e,"top",n[20]),w(e,"font-size",n[11]),w(e,"opacity",n[15]?"1":"0"),w(e,"transform",n[12]?"translate(-50%, calc(-50% + 6px))":"translate(-50%, -50%)")},m(a,i){x(a,e,i),s&&s.m(e,null),t||(o=[$e(we.call(null,e)),ne(e,"clientWidth",n[37]),ne(e,"clientHeight",n[38])],t=!0)},p(a,i){l===(l=r(a))&&s?s.p(a,i):(s&&s.d(1),s=l&&l(a),s&&(s.c(),s.m(e,null))),i[0]&2048&&w(e,"font-size",a[11]),i[0]&32768&&w(e,"opacity",a[15]?"1":"0"),i[0]&4096&&w(e,"transform",a[12]?"translate(-50%, calc(-50% + 6px))":"translate(-50%, -50%)")},i:W,o:W,d(a){a&&$(e),s&&s.d(),t=!1,he(o)}}}function Tn(n,e){const t=n[0],o=n[1];let r=!1;for(let l=0,s=e.length-1;l<e.length;s=l++){const a=e[l][0],i=e[l][1],f=e[s][0],m=e[s][1];i>o!=m>o&&t<(f-a)*(o-i)/(m-i)+a&&(r=!r)}return r}function Wn(n,e,t){let o,r,l,s,a,i,f,m,p,h,D,d,g,y,q,Q,{pxmm:j}=e,{roomAreaEnable:E}=e,{roomNameEnable:N}=e,{roomNameOtherTypeEnable:T}=e,{roomDimensionEnable:C}=e,{room:c}=e,{hoveredRoom:I}=e,{getRoomAreaText:X}=e,{getRoomDimensionText:ee}=e,{getLabelElement:M}=e,{adaptiveRoomLabelVisibleEnable:b}=e,{fontSize:re}=e;function z(R,ae){if(ae.width===0||ae.height===0)return()=>!1;const Nt=R.path.map(({x:ie,y:se})=>[ie,se]),Tt=R.roomLabel.position,{x:Wt,y:Ct}=Tt,{width:_t,height:Ot}=ae,ge=_t/2,be=Ot/2;return function(ie){const se=Wt*ie,ve=Ct*ie,Gt=Nt.map(([Ie,Vt])=>[Ie*ie,Vt*ie]);return[[se+ge,ve-be],[se-ge,ve-be],[se-ge,ve+be],[se+ge,ve+be]].every(Ie=>Tn(Ie,Gt))}}const We=c.roomLabel,Pt=We.positionInImage.x*100+"%",Rt=We.positionInImage.y*100+"%";let De=0,ze=0,Pe=0,Re=0,ue=!1;I.subscribe(function(R){t(27,ue=!!R&&R.id===c.id)});const It=R=>{t(8,Pe=R.detail)},At=R=>{t(9,Re=R.detail)},Lt=R=>{t(6,De=R.detail)},qt=R=>{t(7,ze=R.detail)};return n.$$set=R=>{"pxmm"in R&&t(21,j=R.pxmm),"roomAreaEnable"in R&&t(0,E=R.roomAreaEnable),"roomNameEnable"in R&&t(1,N=R.roomNameEnable),"roomNameOtherTypeEnable"in R&&t(2,T=R.roomNameOtherTypeEnable),"roomDimensionEnable"in R&&t(3,C=R.roomDimensionEnable),"room"in R&&t(4,c=R.room),"hoveredRoom"in R&&t(22,I=R.hoveredRoom),"getRoomAreaText"in R&&t(23,X=R.getRoomAreaText),"getRoomDimensionText"in R&&t(24,ee=R.getRoomDimensionText),"getLabelElement"in R&&t(5,M=R.getLabelElement),"adaptiveRoomLabelVisibleEnable"in R&&t(25,b=R.adaptiveRoomLabelVisibleEnable),"fontSize"in R&&t(26,re=R.fontSize)},n.$$.update=()=>{var R,ae;n.$$.dirty[0]&67108864&&t(28,o=Zt[re]),n.$$.dirty[0]&48&&t(18,r=M==null?void 0:M(c)),n.$$.dirty[0]&8388624&&t(17,l=c.size?X(c.size):""),n.$$.dirty[0]&16777232&&t(16,s=c!=null&&c.dimension?ee((R=c.dimension)==null?void 0:R.width,(ae=c.dimension)==null?void 0:ae.height):""),n.$$.dirty[0]&768&&t(34,a={width:Pe,height:Re}),n.$$.dirty[0]&16|n.$$.dirty[1]&8&&t(33,i=a?z(c,a):void 0),n.$$.dirty[0]&35651584|n.$$.dirty[1]&4&&t(30,f=b?!!(i!=null&&i(j)):!0),n.$$.dirty[0]&192&&t(32,m={width:De,height:ze}),n.$$.dirty[0]&16|n.$$.dirty[1]&2&&t(31,p=m?z(c,m):void 0),n.$$.dirty[0]&35651584|n.$$.dirty[1]&1&&t(29,h=b?!!(p!=null&&p(j)):!0),n.$$.dirty[0]&1744830464&&t(15,D=h||f||ue),n.$$.dirty[0]&1207959552&&t(14,d=f||ue),n.$$.dirty[0]&671088640&&t(13,g=h||ue),n.$$.dirty[0]&1610612736&&t(12,y=f&&!h),n.$$.dirty[0]&268435456&&t(11,q=Ge((o==null?void 0:o.name)||12)),n.$$.dirty[0]&268435456&&t(10,Q=Ge((o==null?void 0:o.area)||10))},[E,N,T,C,c,M,De,ze,Pe,Re,Q,q,y,g,d,D,s,l,r,Pt,Rt,j,I,X,ee,b,re,ue,o,h,f,p,m,i,a,It,At,Lt,qt]}class Cn extends O{constructor(e){super(),G(this,e,Wn,Nn,V,{pxmm:21,roomAreaEnable:0,roomNameEnable:1,roomNameOtherTypeEnable:2,roomDimensionEnable:3,room:4,hoveredRoom:22,getRoomAreaText:23,getRoomDimensionText:24,getLabelElement:5,adaptiveRoomLabelVisibleEnable:25,fontSize:26},An,[-1,-1])}}function _n(n){H(n,"svelte-13xux0b",".floorplan-plugin__room-labels.svelte-13xux0b{width:100%;height:100%;position:absolute;left:0;top:0;z-index:20;pointer-events:none}")}function je(n,e,t){const o=n.slice();return o[17]=e[t],o}function Be(n){let e,t=[],o=new Map,r,l,s,a=n[12];const i=f=>f[17].id;for(let f=0;f<a.length;f+=1){let m=je(n,a,f),p=i(m);o.set(p,t[f]=Ye(p,m))}return{c(){e=L("div");for(let f=0;f<t.length;f+=1)t[f].c();u(e,"class","floorplan-plugin__room-labels svelte-13xux0b")},m(f,m){x(f,e,m);for(let p=0;p<t.length;p+=1)t[p]&&t[p].m(e,null);r=!0,l||(s=[$e(we.call(null,e)),ne(e,"clientWidth",n[15])],l=!0)},p(f,m){m&7679&&(a=f[12],B(),t=de(t,m,i,1,f,a,o,e,Ee,Ye,null,je),Y())},i(f){if(!r){for(let m=0;m<a.length;m+=1)v(t[m]);r=!0}},o(f){for(let m=0;m<t.length;m+=1)P(t[m]);r=!1},d(f){f&&$(e);for(let m=0;m<t.length;m+=1)t[m].d();l=!1,he(s)}}}function Ye(n,e){let t,o,r;const l=[{pxmm:e[10],room:e[17],hoveredRoom:e[4],roomAreaEnable:e[0],roomNameEnable:e[1],roomNameOtherTypeEnable:e[2],roomDimensionEnable:e[3],getLabelElement:e[7],getRoomAreaText:e[5],getRoomDimensionText:e[6],adaptiveRoomLabelVisibleEnable:e[8],fontSize:e[11]}];let s={};for(let a=0;a<l.length;a+=1)s=K(s,l[a]);return o=new Cn({props:s}),{key:n,first:null,c(){t=J(),S(o.$$.fragment),this.first=t},m(a,i){x(a,t,i),k(o,a,i),r=!0},p(a,i){e=a;const f=i&7679?Z(l,[{pxmm:e[10],room:e[17],hoveredRoom:e[4],roomAreaEnable:e[0],roomNameEnable:e[1],roomNameOtherTypeEnable:e[2],roomDimensionEnable:e[3],getLabelElement:e[7],getRoomAreaText:e[5],getRoomDimensionText:e[6],adaptiveRoomLabelVisibleEnable:e[8],fontSize:e[11]}]):{};o.$set(f)},i(a){r||(v(o.$$.fragment,a),r=!0)},o(a){P(o.$$.fragment,a),r=!1},d(a){a&&$(t),U(o,a)}}}function On(n){let e,t,o=n[12]&&Be(n);return{c(){o&&o.c(),e=J()},m(r,l){o&&o.m(r,l),x(r,e,l),t=!0},p(r,[l]){r[12]?o?(o.p(r,l),l&4096&&v(o,1)):(o=Be(r),o.c(),v(o,1),o.m(e.parentNode,e)):o&&(B(),P(o,1,1,()=>{o=null}),Y())},i(r){t||(v(o),t=!0)},o(r){P(o),t=!1},d(r){o&&o.d(r),r&&$(e)}}}function Gn(n,e,t){let o,{floorIndex:r}=e,{roomAreaEnable:l}=e,{roomNameEnable:s}=e,{roomNameOtherTypeEnable:a}=e,{roomDimensionEnable:i}=e,{floorplanData:f}=e,{hoveredRoom:m}=e,{getRoomAreaText:p}=e,{getRoomDimensionText:h}=e,{getLabelElement:D}=e,{adaptiveRoomLabelVisibleEnable:d}=e,g=0,y=0;const q=en();let Q=Dt();typeof q=="object"&&"subscribe"in q&&q.subscribe(E=>{t(11,Q=E)});const j=E=>{t(9,g=E.detail)};return n.$$set=E=>{"floorIndex"in E&&t(13,r=E.floorIndex),"roomAreaEnable"in E&&t(0,l=E.roomAreaEnable),"roomNameEnable"in E&&t(1,s=E.roomNameEnable),"roomNameOtherTypeEnable"in E&&t(2,a=E.roomNameOtherTypeEnable),"roomDimensionEnable"in E&&t(3,i=E.roomDimensionEnable),"floorplanData"in E&&t(14,f=E.floorplanData),"hoveredRoom"in E&&t(4,m=E.hoveredRoom),"getRoomAreaText"in E&&t(5,p=E.getRoomAreaText),"getRoomDimensionText"in E&&t(6,h=E.getRoomDimensionText),"getLabelElement"in E&&t(7,D=E.getLabelElement),"adaptiveRoomLabelVisibleEnable"in E&&t(8,d=E.adaptiveRoomLabelVisibleEnable)},n.$$.update=()=>{if(n.$$.dirty&24576&&t(12,o=f.floorDatas[r].rooms),n.$$.dirty&16896){const{max:E,min:N}=f.bounding,T=E.x-N.x;t(10,y=g/T)}},[l,s,a,i,m,p,h,D,d,g,y,Q,o,r,f,j]}let Vn=class extends O{constructor(e){super(),G(this,e,Gn,On,V,{floorIndex:13,roomAreaEnable:0,roomNameEnable:1,roomNameOtherTypeEnable:2,roomDimensionEnable:3,floorplanData:14,hoveredRoom:4,getRoomAreaText:5,getRoomDimensionText:6,getLabelElement:7,adaptiveRoomLabelVisibleEnable:8},_n)}};function Sn(n){H(n,"svelte-1fuyezq",".floorplan-plugin__rule-labels.svelte-1fuyezq.svelte-1fuyezq{position:absolute;display:flex}.floorplan-plugin__rule-labels--top.svelte-1fuyezq.svelte-1fuyezq{left:0;top:-1.25rem}.floorplan-plugin__rule-labels--bottom.svelte-1fuyezq.svelte-1fuyezq{left:0;bottom:-1.25rem}.floorplan-plugin__rule-labels--left.svelte-1fuyezq.svelte-1fuyezq{top:0;left:-1.25rem}.floorplan-plugin__rule-labels--right.svelte-1fuyezq.svelte-1fuyezq{top:0;right:-1.25rem}.floorplan-plugin__rule-line.svelte-1fuyezq.svelte-1fuyezq{background:#fff;opacity:0.2;width:100%;height:100%}.floorplan-plugin__rule-scale-wrapper.svelte-1fuyezq.svelte-1fuyezq{position:absolute;width:0.3125rem;height:100%;left:50%;top:0;transform:translateX(-50%)}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-scale-wrapper.svelte-1fuyezq{width:100%;height:0.3125rem;top:50%;left:0;transform:translateY(-50%)}.floorplan-plugin__rule-scale.svelte-1fuyezq.svelte-1fuyezq{position:absolute;background:#fff;opacity:0.2;width:100%;height:0.0625rem}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-scale.svelte-1fuyezq{width:0.0625rem;height:100%}.floorplan-plugin__rule-text-wrapper.svelte-1fuyezq.svelte-1fuyezq{position:absolute}.floorplan-plugin__rule-labels--top.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:100%;height:0;top:0.625rem}.floorplan-plugin__rule-labels--bottom.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:100%;height:0;bottom:0.625rem}.floorplan-plugin__rule-labels--left.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:0;height:100%;left:0.625rem}.floorplan-plugin__rule-labels--right.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:0;height:100%;right:0.625rem}.floorplan-plugin__rule-text-item.svelte-1fuyezq.svelte-1fuyezq{width:0;height:0;position:absolute;transform:rotate(90deg)}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-text-item.svelte-1fuyezq{transform:rotate(0)}.floorplan-plugin__rule-text.svelte-1fuyezq.svelte-1fuyezq{width:-moz-max-content;width:max-content;transform:translate(-50%, -50%);font-size:0.625rem;color:#fff;opacity:0.35}")}function He(n,e,t){const o=n.slice();return o[11]=e[t],o[13]=t,o}function Me(n,e,t){const o=n.slice();return o[14]=e[t],o}function Ke(n){let e;return{c(){e=L("div"),u(e,"class","floorplan-plugin__rule-scale svelte-1fuyezq"),w(e,"left",n[14].left*100+"%"),w(e,"bottom",n[14].bottom*100+"%")},m(t,o){x(t,e,o)},p:W,d(t){t&&$(e)}}}function Ze(n,e){let t,o,r=e[1](e[11].distance)+"",l,s;return{key:n,first:null,c(){t=L("div"),o=L("div"),l=oe(r),s=_(),u(o,"class","floorplan-plugin__rule-text svelte-1fuyezq"),ye(o,"is-row",e[2]),u(t,"class","floorplan-plugin__rule-text-item svelte-1fuyezq"),w(t,"left",e[11].left*100+"%"),w(t,"bottom",e[11].bottom*100+"%"),this.first=t},m(a,i){x(a,t,i),A(t,o),A(o,l),A(t,s)},p(a,i){e=a,i&2&&r!==(r=e[1](e[11].distance)+"")&&le(l,r)},d(a){a&&$(t)}}}function kn(n){let e,t,o,r,l,s,a=[],i=new Map,f,m=n[3],p=[];for(let d=0;d<m.length;d+=1)p[d]=Ke(Me(n,m,d));let h=n[4];const D=d=>d[13];for(let d=0;d<h.length;d+=1){let g=He(n,h,d),y=D(g);i.set(y,a[d]=Ze(y,g))}return{c(){e=L("div"),t=L("div"),o=_(),r=L("div");for(let d=0;d<p.length;d+=1)p[d].c();l=_(),s=L("div");for(let d=0;d<a.length;d+=1)a[d].c();u(t,"class","floorplan-plugin__rule-line svelte-1fuyezq"),u(r,"class","floorplan-plugin__rule-scale-wrapper svelte-1fuyezq"),ye(r,"is-row",n[2]),u(s,"class","floorplan-plugin__rule-text-wrapper svelte-1fuyezq"),u(e,"class",f="floorplan-plugin__rule-labels floorplan-plugin__rule-labels--"+n[0]+" svelte-1fuyezq"),ye(e,"is-row",n[2]),w(e,"width",n[2]?"100%":1/16+"rem"),w(e,"height",n[2]?1/16+"rem":"100%")},m(d,g){x(d,e,g),A(e,t),A(e,o),A(e,r);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(r,null);A(e,l),A(e,s);for(let y=0;y<a.length;y+=1)a[y]&&a[y].m(s,null)},p(d,[g]){if(g&8){m=d[3];let y;for(y=0;y<m.length;y+=1){const q=Me(d,m,y);p[y]?p[y].p(q,g):(p[y]=Ke(q),p[y].c(),p[y].m(r,null))}for(;y<p.length;y+=1)p[y].d(1);p.length=m.length}g&22&&(h=d[4],a=de(a,g,D,1,d,h,i,s,St,Ze,null,He)),g&1&&f!==(f="floorplan-plugin__rule-labels floorplan-plugin__rule-labels--"+d[0]+" svelte-1fuyezq")&&u(e,"class",f),g&5&&ye(e,"is-row",d[2])},i:W,o:W,d(d){d&&$(e),Te(p,d);for(let g=0;g<a.length;g+=1)a[g].d()}}}const fe=1e3,me=180;function Un(n,e,t){let{type:o}=e,{data:r}=e,{bounding:l}=e,{getRuleDistanceText:s}=e;const a=o==="top"||o==="bottom",i=l.max.x-l.min.x-(fe-me)*2,f=l.max.y-l.min.y-(fe-me)*2,m=r.map(([d,g])=>a?[d.x,g.x]:[d.y,g.y]).flat().sort().filter((d,g,y)=>g===0?!0:d!==y[g-1]),p=m.map(d=>{const g=a?(d-l.min.x-fe+me)/i:0,y=a?0:(d-l.min.y-fe+me)/f;return{left:g,bottom:y}});p.unshift({left:0,bottom:0}),p.push(a?{left:1,bottom:0}:{left:0,bottom:1});const h=m[m.length-1]-m[0],D=m.map((d,g,y)=>{const q=g===0?0:d-y[g-1],Q=g===0?0:(d+y[g-1])/2,j=a?(Q-l.min.x-fe+me)/i:0,E=a?0:(Q-l.min.y-fe+me)/f;return{left:j,bottom:E,distance:q}}).filter(({distance:d})=>d/h>.1);return n.$$set=d=>{"type"in d&&t(0,o=d.type),"data"in d&&t(5,r=d.data),"bounding"in d&&t(6,l=d.bounding),"getRuleDistanceText"in d&&t(1,s=d.getRuleDistanceText)},[o,s,a,p,D,r,l]}let Fn=class extends O{constructor(e){super(),G(this,e,Un,kn,V,{type:0,data:5,bounding:6,getRuleDistanceText:1},Sn)}};function Qn(n){H(n,"svelte-1mzj9p3",".floorplan-plugin__rule-labels-wrapper.svelte-1mzj9p3{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);pointer-events:none}")}function Je(n,e,t){const o=n.slice();return o[13]=e[t][0],o[14]=e[t][1],o}function Xe(n,e){let t,o,r;const l=[{type:e[13],data:e[14],bounding:e[1],getRuleDistanceText:e[0]}];let s={};for(let a=0;a<l.length;a+=1)s=K(s,l[a]);return o=new Fn({props:s}),{key:n,first:null,c(){t=J(),S(o.$$.fragment),this.first=t},m(a,i){x(a,t,i),k(o,a,i),r=!0},p(a,i){e=a;const f=i&19?Z(l,[{type:e[13],data:e[14],bounding:e[1],getRuleDistanceText:e[0]}]):{};o.$set(f)},i(a){r||(v(o.$$.fragment,a),r=!0)},o(a){P(o.$$.fragment,a),r=!1},d(a){a&&$(t),U(o,a)}}}function jn(n){let e,t=[],o=new Map,r,l=n[4];const s=a=>a[13];for(let a=0;a<l.length;a+=1){let i=Je(n,l,a),f=s(i);o.set(f,t[a]=Xe(f,i))}return{c(){e=L("div");for(let a=0;a<t.length;a+=1)t[a].c();u(e,"class","floorplan-plugin__rule-labels-wrapper svelte-1mzj9p3"),w(e,"width",n[3]),w(e,"height",n[2])},m(a,i){x(a,e,i);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);r=!0},p(a,[i]){i&19&&(l=a[4],B(),t=de(t,i,s,1,a,l,o,e,Ee,Xe,null,Je),Y()),i&8&&w(e,"width",a[3]),i&4&&w(e,"height",a[2])},i(a){if(!r){for(let i=0;i<l.length;i+=1)v(t[i]);r=!0}},o(a){for(let i=0;i<t.length;i+=1)P(t[i]);r=!1},d(a){a&&$(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}const et=1e3,tt=180;function Bn(n,e,t){let o,r,l,s,a,i,f,m,p,h,{floorIndex:D}=e,{floorplanData:d}=e,{getRuleDistanceText:g}=e;return n.$$set=y=>{"floorIndex"in y&&t(5,D=y.floorIndex),"floorplanData"in y&&t(6,d=y.floorplanData),"getRuleDistanceText"in y&&t(0,g=y.getRuleDistanceText)},n.$$.update=()=>{n.$$.dirty&64&&t(1,o=d.bounding),n.$$.dirty&96&&t(11,r=d.floorDatas[D].rules),n.$$.dirty&2048&&t(12,l=Object.keys(r)),n.$$.dirty&6144&&t(4,s=l.map(y=>[y,r[y]])),n.$$.dirty&2&&t(9,a=o.max.x-o.min.x),n.$$.dirty&2&&t(7,i=o.max.y-o.min.y),n.$$.dirty&2&&t(10,f=o.max.x-o.min.x-(et-tt)*2),n.$$.dirty&2&&t(8,m=o.max.y-o.min.y-(et-tt)*2),n.$$.dirty&1536&&t(3,p=f/a*100+"%"),n.$$.dirty&384&&t(2,h=m/i*100+"%")},[g,o,h,p,s,D,d,i,m,a,f,r,l]}let Yn=class extends O{constructor(e){super(),G(this,e,Bn,jn,V,{floorIndex:5,floorplanData:6,getRuleDistanceText:0},Qn)}};function te(n,e={}){let t="";const{needZ:o,needA:r}=e;return(o?n.slice().concat(n[0]):n.slice()).forEach((l,s)=>{const{x:a,y:i}=e.format?e.format(l):l,f=a+","+i;return s===0?(t+="M"+f,t):r!=null&&r[s]?(t+="A"+r[s]+","+f,t):(t+="L"+f,t)}),t+(o?"Z":"")}function zt({x:n,y:e},t){const{max:o,min:r}=t;return{x:n-r.x,y:o.y-e}}function Hn(n){let e;return{c(){e=F("path"),u(e,"d",n[0]),u(e,"fill","#2F313A")},m(t,o){x(t,e,o)},p(t,[o]){o&1&&u(e,"d",t[0])},i:W,o:W,d(t){t&&$(e)}}}function Mn(n,e,t){let o,{path:r}=e;return n.$$set=l=>{"path"in l&&t(1,r=l.path)},n.$$.update=()=>{n.$$.dirty&2&&t(0,o=te(r,{needZ:!0}))},[o,r]}let Kn=class extends O{constructor(e){super(),G(this,e,Mn,Hn,V,{path:1})}};function Zn(n){let e,t,o,r,l,s;return{c(){e=F("defs"),t=F("pattern"),o=F("rect"),r=F("path"),l=_(),s=F("path"),u(o,"x","0"),u(o,"y","0"),u(o,"width",n[1]),u(o,"height",n[1]),u(o,"fill","#323747"),u(r,"d",n[2]),u(r,"stroke","#ffffff"),u(r,"stroke-opacity","0.06"),u(r,"stroke-width","0.5"),u(r,"fill","none"),u(t,"id","fpm-room-pattern-0"),u(t,"x","0"),u(t,"y","0"),u(t,"width",n[1]),u(t,"height",n[1]),u(t,"patternUnits","userSpaceOnUse"),u(t,"patternTransform","scale(50 50)"),u(s,"d",n[0]),u(s,"fill","url(#fpm-room-pattern-0)")},m(a,i){x(a,e,i),A(e,t),A(t,o),A(t,r),x(a,l,i),x(a,s,i)},p(a,[i]){i&1&&u(s,"d",a[0])},i:W,o:W,d(a){a&&$(e),a&&$(l),a&&$(s)}}}const Le=6;function Jn(n,e,t){let o,{path:r}=e;const l=Le*2,s=`M0 ${Le} h ${l} M${Le} 0 v ${l}`;return n.$$set=a=>{"path"in a&&t(3,r=a.path)},n.$$.update=()=>{n.$$.dirty&8&&t(0,o=te(r,{needZ:!0}))},[o,l,s,r]}let Xn=class extends O{constructor(e){super(),G(this,e,Jn,Zn,V,{path:3})}};function eo(n){let e,t,o,r,l,s,a,i,f,m,p;return{c(){e=F("defs"),t=F("pattern"),o=F("rect"),r=F("pattern"),l=F("rect"),s=_(),a=F("path"),i=_(),f=F("path"),m=_(),p=F("path"),u(o,"x","0"),u(o,"y","0"),u(o,"width","6"),u(o,"height","50"),u(o,"fill","none"),u(o,"stroke","#4B4B57"),u(o,"stroke-width","0.5"),u(t,"id","room-material-pattern-1"),u(t,"x","0"),u(t,"y","0"),u(t,"width","12"),u(t,"height","50"),u(t,"patternUnits","userSpaceOnUse"),u(t,"patternTransform","scale(50 50)"),u(l,"x","0"),u(l,"y","0"),u(l,"width","6"),u(l,"height","50"),u(l,"fill","none"),u(l,"stroke","#4B4B57"),u(l,"stroke-width","0.5"),u(r,"id","room-material-pattern-2"),u(r,"x","6"),u(r,"y","25"),u(r,"width","12"),u(r,"height","50"),u(r,"patternUnits","userSpaceOnUse"),u(r,"patternTransform","scale(50 50)"),u(a,"d",n[0]),u(a,"fill","#43434D"),u(f,"d",n[0]),u(f,"fill","url(#room-material-pattern-1)"),u(p,"d",n[0]),u(p,"fill","url(#room-material-pattern-2)")},m(h,D){x(h,e,D),A(e,t),A(t,o),A(e,r),A(r,l),x(h,s,D),x(h,a,D),x(h,i,D),x(h,f,D),x(h,m,D),x(h,p,D)},p(h,[D]){D&1&&u(a,"d",h[0]),D&1&&u(f,"d",h[0]),D&1&&u(p,"d",h[0])},i:W,o:W,d(h){h&&$(e),h&&$(s),h&&$(a),h&&$(i),h&&$(f),h&&$(m),h&&$(p)}}}function to(n,e,t){let o,{path:r}=e;return n.$$set=l=>{"path"in l&&t(1,r=l.path)},n.$$.update=()=>{n.$$.dirty&2&&t(0,o=te(r,{needZ:!0}))},[o,r]}let no=class extends O{constructor(e){super(),G(this,e,to,eo,V,{path:1})}};function oo(n){let e;return{c(){e=F("path"),u(e,"d",n[0]),u(e,"fill","#969696"),u(e,"stroke","#969696"),u(e,"stroke-width","1"),u(e,"fill-rule","evenodd")},m(t,o){x(t,e,o)},p:W,i:W,o:W,d(t){t&&$(e)}}}function lo(n,e,t){let{dimension:o}=e;const r=te([{x:o.vertical[1].x,y:o.vertical[1].y+53},{x:o.vertical[1].x-60,y:o.vertical[1].y+124},{x:o.vertical[1].x+60,y:o.vertical[1].y+124}],{needZ:!0}),l=te([{x:o.vertical[0].x,y:o.vertical[0].y-53},{x:o.vertical[0].x-60,y:o.vertical[0].y-124},{x:o.vertical[0].x+60,y:o.vertical[0].y-124}],{needZ:!0}),s=te([{x:o.horizontal[0].x+53,y:o.horizontal[0].y},{x:o.horizontal[0].x+124,y:o.horizontal[0].y+60},{x:o.horizontal[0].x+124,y:o.horizontal[0].y-60}],{needZ:!0}),a=te([{x:o.horizontal[1].x-53,y:o.horizontal[1].y},{x:o.horizontal[1].x-124,y:o.horizontal[1].y+60},{x:o.horizontal[1].x-124,y:o.horizontal[1].y-60}],{needZ:!0}),i=`${r} ${l} ${s} ${a}`;return n.$$set=f=>{"dimension"in f&&t(1,o=f.dimension)},[i,o]}class ro extends O{constructor(e){super(),G(this,e,lo,oo,V,{dimension:1})}}var ao=Object.defineProperty,io=Object.defineProperties,so=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,fo=Object.prototype.hasOwnProperty,mo=Object.prototype.propertyIsEnumerable,ot=(n,e,t)=>e in n?ao(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uo=(n,e)=>{for(var t in e||(e={}))fo.call(e,t)&&ot(n,t,e[t]);if(nt)for(var t of nt(e))mo.call(e,t)&&ot(n,t,e[t]);return n},po=(n,e)=>io(n,so(e));function co(n){H(n,"svelte-1dykexu",".floorplan-plugin__room-material.svelte-1dykexu{position:absolute;left:0;top:0;width:100%;height:100%}svg.svelte-1dykexu{position:absolute;left:0;top:0;width:100%;height:100%;overflow:visible}")}function lt(n,e,t){const o=n.slice();return o[8]=e[t],o}function ho(n){let e,t;return e=new Xn({props:{path:n[8].path}}),{c(){S(e.$$.fragment)},m(o,r){k(e,o,r),t=!0},p(o,r){const l={};r&1&&(l.path=o[8].path),e.$set(l)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function go(n){let e,t;return e=new no({props:{path:n[8].path}}),{c(){S(e.$$.fragment)},m(o,r){k(e,o,r),t=!0},p(o,r){const l={};r&1&&(l.path=o[8].path),e.$set(l)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function bo(n){let e,t;return e=new Kn({props:{path:n[8].path}}),{c(){S(e.$$.fragment)},m(o,r){k(e,o,r),t=!0},p(o,r){const l={};r&1&&(l.path=o[8].path),e.$set(l)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function rt(n){let e,t,o;return t=new ro({props:{dimension:n[8].dimension}}),{c(){e=F("svg"),S(t.$$.fragment),u(e,"width","100%"),u(e,"height","100%"),u(e,"viewBox",`0 0 ${n[1]} ${n[2]}`),u(e,"class","svelte-1dykexu")},m(r,l){x(r,e,l),k(t,e,null),o=!0},p(r,l){const s={};l&1&&(s.dimension=r[8].dimension),t.$set(s)},i(r){o||(v(t.$$.fragment,r),o=!0)},o(r){P(t.$$.fragment,r),o=!1},d(r){r&&$(e),U(t)}}}function at(n){let e,t,o,r,l=n[3]&&n[8].dimension&&Array.isArray(n[8].dimension.vertical)&&n[8].dimension.vertical.length>0&&Array.isArray(n[8].dimension.horizontal)&&n[8].dimension.horizontal.length>0,s,a;const i=[bo,go,ho],f=[];function m(h,D){return h[8].floorType===1?0:h[8].floorType===0?1:2}t=m(n),o=f[t]=i[t](n);let p=l&&rt(n);return{c(){e=F("svg"),o.c(),r=_(),p&&p.c(),s=J(),u(e,"width","100%"),u(e,"height","100%"),u(e,"viewBox",`0 0 ${n[1]} ${n[2]}`),u(e,"class","svelte-1dykexu")},m(h,D){x(h,e,D),f[t].m(e,null),x(h,r,D),p&&p.m(h,D),x(h,s,D),a=!0},p(h,D){let d=t;t=m(h),t===d?f[t].p(h,D):(B(),P(f[d],1,1,()=>{f[d]=null}),Y(),o=f[t],o?o.p(h,D):(o=f[t]=i[t](h),o.c()),v(o,1),o.m(e,null)),D&1&&(l=h[3]&&h[8].dimension&&Array.isArray(h[8].dimension.vertical)&&h[8].dimension.vertical.length>0&&Array.isArray(h[8].dimension.horizontal)&&h[8].dimension.horizontal.length>0),l?p?(p.p(h,D),D&1&&v(p,1)):(p=rt(h),p.c(),v(p,1),p.m(s.parentNode,s)):p&&(B(),P(p,1,1,()=>{p=null}),Y())},i(h){a||(v(o),v(p),a=!0)},o(h){P(o),P(p),a=!1},d(h){h&&$(e),f[t].d(),h&&$(r),p&&p.d(h),h&&$(s)}}}function vo(n){let e,t,o=n[0],r=[];for(let s=0;s<o.length;s+=1)r[s]=at(lt(n,o,s));const l=s=>P(r[s],1,1,()=>{r[s]=null});return{c(){e=L("div");for(let s=0;s<r.length;s+=1)r[s].c();u(e,"class","floorplan-plugin__room-material svelte-1dykexu")},m(s,a){x(s,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(s,[a]){if(a&15){o=s[0];let i;for(i=0;i<o.length;i+=1){const f=lt(s,o,i);r[i]?(r[i].p(f,a),v(r[i],1)):(r[i]=at(f),r[i].c(),v(r[i],1),r[i].m(e,null))}for(B(),i=o.length;i<r.length;i+=1)l(i);Y()}},i(s){if(!t){for(let a=0;a<o.length;a+=1)v(r[a]);t=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);t=!1},d(s){s&&$(e),Te(r,s)}}}function yo(n,e,t){let o,{roomLabelsEnable:r}=e,{roomDimensionEnable:l}=e,{floorIndex:s}=e,{floorplanData:a}=e;const i=a.bounding.max.x-a.bounding.min.x,f=a.bounding.max.y-a.bounding.min.y,m=r&&l;return n.$$set=p=>{"roomLabelsEnable"in p&&t(4,r=p.roomLabelsEnable),"roomDimensionEnable"in p&&t(5,l=p.roomDimensionEnable),"floorIndex"in p&&t(6,s=p.floorIndex),"floorplanData"in p&&t(7,a=p.floorplanData)},n.$$.update=()=>{n.$$.dirty&192&&t(0,o=a.floorDatas[s].rooms.map(p=>po(uo({},p),{path:p.path.map(h=>zt(h,a.bounding))})))},[o,i,f,m,r,l,s,a]}class xo extends O{constructor(e){super(),G(this,e,yo,vo,V,{roomLabelsEnable:4,roomDimensionEnable:5,floorIndex:6,floorplanData:7},co)}}function $o(n){H(n,"svelte-qq2273","path.svelte-qq2273{--opacity:0;opacity:var(--opacity)}path.svelte-qq2273:hover{opacity:calc(var(--opacity) + 0.1)}")}function Eo(n){let e,t,o,r;return{c(){e=F("path"),u(e,"d",n[5]),u(e,"fill","#fff"),u(e,"style",n[2]),u(e,"id",t=`${n[1]}_${n[0].id}`),u(e,"class","svelte-qq2273")},m(l,s){x(l,e,s),o||(r=[ne(e,"mouseenter",n[3]),ne(e,"mouseleave",n[4])],o=!0)},p(l,[s]){s&4&&u(e,"style",l[2]),s&3&&t!==(t=`${l[1]}_${l[0].id}`)&&u(e,"id",t)},i:W,o:W,d(l){l&&$(e),o=!1,he(r)}}}function wo(n,e,t){let o,r,{room:l}=e,{floorIndex:s}=e,{floorplanData:a}=e,{highlightData:i}=e,{hoveredRoom:f}=e;function m(){f==null||f.set(l)}function p(){f==null||f.set(void 0)}const{bounding:h}=a,D=te(l.path,{needZ:!0,format:d=>zt(d,h)});return n.$$set=d=>{"room"in d&&t(0,l=d.room),"floorIndex"in d&&t(1,s=d.floorIndex),"floorplanData"in d&&t(6,a=d.floorplanData),"highlightData"in d&&t(7,i=d.highlightData),"hoveredRoom"in d&&t(8,f=d.hoveredRoom)},n.$$.update=()=>{n.$$.dirty&131&&t(9,o=i[`${s}_${l.id}`]),n.$$.dirty&512&&t(2,r=o?`fill: ${o.color}; --opacity: ${o.opacity}; pointer-events: ${o.disabled?"none":"auto"}`:null)},[l,s,r,m,p,D,a,i,f,o]}let Do=class extends O{constructor(e){super(),G(this,e,wo,Eo,V,{room:0,floorIndex:1,floorplanData:6,highlightData:7,hoveredRoom:8},$o)}};function zo(n){H(n,"svelte-1kqo6e4",".floorplan-plugin__room-highlight.svelte-1kqo6e4{position:absolute;width:100%;height:100%}svg.svelte-1kqo6e4{width:100%;height:100%;overflow:visible}")}function it(n,e,t){const o=n.slice();return o[6]=e[t],o}function st(n,e){let t,o,r;const l=[{room:e[6],floorplanData:e[1],hoveredRoom:e[3],floorIndex:e[0],highlightData:e[2]}];let s={};for(let a=0;a<l.length;a+=1)s=K(s,l[a]);return o=new Do({props:s}),{key:n,first:null,c(){t=J(),S(o.$$.fragment),this.first=t},m(a,i){x(a,t,i),k(o,a,i),r=!0},p(a,i){e=a;const f=i&15?Z(l,[{room:e[6],floorplanData:e[1],hoveredRoom:e[3],floorIndex:e[0],highlightData:e[2]}]):{};o.$set(f)},i(a){r||(v(o.$$.fragment,a),r=!0)},o(a){P(o.$$.fragment,a),r=!1},d(a){a&&$(t),U(o,a)}}}function Po(n){let e,t,o=[],r=new Map,l,s=n[1].floorDatas[n[0]].rooms;const a=i=>i[6].id;for(let i=0;i<s.length;i+=1){let f=it(n,s,i),m=a(f);r.set(m,o[i]=st(m,f))}return{c(){e=L("div"),t=F("svg");for(let i=0;i<o.length;i+=1)o[i].c();u(t,"width","100%"),u(t,"height","100%"),u(t,"viewBox",`0 0 ${n[4]} ${n[5]}`),u(t,"class","svelte-1kqo6e4"),u(e,"class","floorplan-plugin__room-highlight svelte-1kqo6e4")},m(i,f){x(i,e,f),A(e,t);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(t,null);l=!0},p(i,[f]){f&15&&(s=i[1].floorDatas[i[0]].rooms,B(),o=de(o,f,a,1,i,s,r,t,Ee,st,null,it),Y())},i(i){if(!l){for(let f=0;f<s.length;f+=1)v(o[f]);l=!0}},o(i){for(let f=0;f<o.length;f+=1)P(o[f]);l=!1},d(i){i&&$(e);for(let f=0;f<o.length;f+=1)o[f].d()}}}function Ro(n,e,t){let{floorIndex:o}=e,{floorplanData:r}=e,{highlightData:l}=e,{hoveredRoom:s}=e;const a=r.bounding.max.x-r.bounding.min.x,i=r.bounding.max.y-r.bounding.min.y;return n.$$set=f=>{"floorIndex"in f&&t(0,o=f.floorIndex),"floorplanData"in f&&t(1,r=f.floorplanData),"highlightData"in f&&t(2,l=f.highlightData),"hoveredRoom"in f&&t(3,s=f.hoveredRoom)},[o,r,l,s,a,i]}let Io=class extends O{constructor(e){super(),G(this,e,Ro,Po,V,{floorIndex:0,floorplanData:1,highlightData:2,hoveredRoom:3},zo)}};function Ao(n){H(n,"svelte-3vzs9z",".missing-floor.svelte-3vzs9z{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;flex-direction:column;align-items:center}.text.svelte-3vzs9z{margin-top:0.75rem;color:#fff;opacity:0.3;white-space:nowrap}")}function ft(n){let e,t=n[0].text+"",o;return{c(){e=L("span"),o=oe(t),u(e,"class","text svelte-3vzs9z"),w(e,"font-size",n[0].textFontSize+"px")},m(r,l){x(r,e,l),A(e,o)},p(r,l){l&1&&t!==(t=r[0].text+"")&&le(o,t),l&1&&w(e,"font-size",r[0].textFontSize+"px")},d(r){r&&$(e)}}}function Lo(n){let e,t,o,r,l=n[0].text&&ft(n);return{c(){e=L("div"),t=L("img"),r=_(),l&&l.c(),u(t,"class","image"),u(t,"alt","缺省楼层展位图"),ce(t.src,o=n[0].imageURL)||u(t,"src",o),w(t,"width",n[0].imageWidth+"px"),w(t,"height",n[0].imageHeight+"px"),w(t,"max-width","none"),u(e,"class","missing-floor svelte-3vzs9z")},m(s,a){x(s,e,a),A(e,t),A(e,r),l&&l.m(e,null)},p(s,[a]){a&1&&!ce(t.src,o=s[0].imageURL)&&u(t,"src",o),a&1&&w(t,"width",s[0].imageWidth+"px"),a&1&&w(t,"height",s[0].imageHeight+"px"),s[0].text?l?l.p(s,a):(l=ft(s),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:W,o:W,d(s){s&&$(e),l&&l.d()}}}function qo(n,e,t){let{missingFloorConfig:o}=e;return n.$$set=r=>{"missingFloorConfig"in r&&t(0,o=r.missingFloorConfig)},[o]}class No extends O{constructor(e){super(),G(this,e,qo,Lo,V,{missingFloorConfig:0},Ao)}}const mt="data:image/png;base64,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";function To(n){H(n,"svelte-17hhq1b",".floorplan__camera-position.svelte-17hhq1b{pointer-events:none;position:absolute;width:0;height:0}.floorplan__camera-rotate.svelte-17hhq1b{position:absolute;background-repeat:no-repeat;background-size:100%}")}function Wo(n){let e,t;return{c(){e=L("div"),t=L("div"),u(t,"class","floorplan__camera-rotate svelte-17hhq1b"),w(t,"background-image",`url(${n[0]||mt})`),w(t,"width",n[4]),w(t,"height",n[4]),w(t,"left","-"+n[4]),w(t,"top","-"+n[4]),w(t,"transform",`rotate(${n[3]}deg)`),w(t,"transform-origin",`${n[4]} ${n[4]}`),u(e,"class","floorplan__camera-position svelte-17hhq1b"),w(e,"left",n[1]),w(e,"top",n[2])},m(o,r){x(o,e,r),A(e,t)},p(o,[r]){r&1&&w(t,"background-image",`url(${o[0]||mt})`);const l=r&1;l&&w(t,"width",o[4]),l&&w(t,"height",o[4]),l&&w(t,"left","-"+o[4]),l&&w(t,"top","-"+o[4]),l&&w(t,"transform",`rotate(${o[3]}deg)`),l&&w(t,"transform-origin",`${o[4]} ${o[4]}`)},i:W,o:W,d(o){o&&$(e)}}}function Co(n,e,t){let{panoIndex:o}=e,{floorplanData:r}=e,{lastPanoramaLongitude:l}=e,{cameraImageUrl:s}=e;const{observers:a}=r,i=a[o],f=i.positionInImage.x,m=i.positionInImage.y,p=f*100+"%",h=m*100+"%",D=-Et(l)+45,d=document.body.clientWidth,g=document.body.clientHeight,y=`${(d<500||g<500?17:37)/16}rem`;return n.$$set=q=>{"panoIndex"in q&&t(5,o=q.panoIndex),"floorplanData"in q&&t(6,r=q.floorplanData),"lastPanoramaLongitude"in q&&t(7,l=q.lastPanoramaLongitude),"cameraImageUrl"in q&&t(0,s=q.cameraImageUrl)},[s,p,h,D,y,o,r,l]}class _o extends O{constructor(e){super(),G(this,e,Co,Wo,V,{panoIndex:5,floorplanData:6,lastPanoramaLongitude:7,cameraImageUrl:0},To)}}const Oo="data:image/png;base64,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";function Go(n){H(n,"svelte-rpkaro",".floorplan-plugin__compass.svelte-rpkaro{position:absolute;left:50%;top:-2.875rem;width:14.4375rem;height:2.5625rem;will-change:opacity;transform-origin:center 11.5rem}.floorplan-plugin__compass-image.svelte-rpkaro{width:100%;height:100%;position:absolute;left:0;top:0;opacity:0.1;background-repeat:no-repeat;background-size:100% 100%}.floorplan-plugin__compass-text.svelte-rpkaro{position:absolute;left:50%;top:0.9375rem;transform:translateX(-50%);opacity:0.2;font-weight:bold;font-size:0.625rem;color:#fff}")}function Vo(n){let e,t,o,r,l;return{c(){e=L("div"),t=L("div"),o=_(),r=L("span"),l=oe(n[0]),u(t,"class","floorplan-plugin__compass-image svelte-rpkaro"),w(t,"background-image",`url(${Oo})`),u(r,"class","floorplan-plugin__compass-text svelte-rpkaro"),u(e,"class","floorplan-plugin__compass svelte-rpkaro"),w(e,"transform",n[2])},m(s,a){x(s,e,a),A(e,t),A(e,o),A(e,r),A(r,l)},p(s,a){a&1&&le(l,s[0])},d(s){s&&$(e)}}}function So(n){let e,t=n[1]&&Vo(n);return{c(){t&&t.c(),e=J()},m(o,r){t&&t.m(o,r),x(o,e,r)},p(o,[r]){o[1]&&t.p(o,r)},i:W,o:W,d(o){t&&t.d(o),o&&$(e)}}}function ko(n,e,t){var o;let{floorplanData:r}=e,{northDesc:l}=e;const s=(o=r.entrance)==null?void 0:o.northRad,a=typeof s=="number",i=`translateX(-50%) translateZ(10px) rotate(${-(s?Et(s):0)+90}deg)`;return n.$$set=f=>{"floorplanData"in f&&t(3,r=f.floorplanData),"northDesc"in f&&t(0,l=f.northDesc)},[l,a,i,r]}let Uo=class extends O{constructor(e){super(),G(this,e,ko,So,V,{floorplanData:3,northDesc:0},Go)}};function Fo(n){H(n,"svelte-bl8zrz",".floorplan-plugin__floor.svelte-bl8zrz{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;pointer-events:none}.floorplan-plugin__floor--is-current.svelte-bl8zrz{opacity:1;pointer-events:auto}")}function Qo(n){let e,t,o,r,l,s,a,i,f,m,p,h;const D=[{floorIndex:n[2],floorplanData:n[12],roomLabelsEnable:n[6],roomDimensionEnable:n[10]}];let d={};for(let c=0;c<D.length;c+=1)d=K(d,D[c]);e=new xo({props:d});let g=(n[3]||n[5])&&ut(n);const y=[{floorplanData:n[12],floorIndex:n[2]}];let q={};for(let c=0;c<y.length;c+=1)q=K(q,y[c]);r=new xn({props:q});const Q=[{floorplanData:n[12],floorIndex:n[2]}];let j={};for(let c=0;c<Q.length;c+=1)j=K(j,Q[c]);s=new In({props:j});let E=n[6]&&pt(n),N=n[11]&&ct(n),T=n[4]&&dt(n),C=n[23]&&ht(n);return{c(){S(e.$$.fragment),t=_(),g&&g.c(),o=_(),S(r.$$.fragment),l=_(),S(s.$$.fragment),a=_(),E&&E.c(),i=_(),N&&N.c(),f=_(),T&&T.c(),m=_(),C&&C.c(),p=J()},m(c,I){k(e,c,I),x(c,t,I),g&&g.m(c,I),x(c,o,I),k(r,c,I),x(c,l,I),k(s,c,I),x(c,a,I),E&&E.m(c,I),x(c,i,I),N&&N.m(c,I),x(c,f,I),T&&T.m(c,I),x(c,m,I),C&&C.m(c,I),x(c,p,I),h=!0},p(c,I){const X=I&5188?Z(D,[{floorIndex:c[2],floorplanData:c[12],roomLabelsEnable:c[6],roomDimensionEnable:c[10]}]):{};e.$set(X),c[3]||c[5]?g?(g.p(c,I),I&40&&v(g,1)):(g=ut(c),g.c(),v(g,1),g.m(o.parentNode,o)):g&&(B(),P(g,1,1,()=>{g=null}),Y());const ee=I&4100?Z(y,[{floorplanData:c[12],floorIndex:c[2]}]):{};r.$set(ee);const M=I&4100?Z(Q,[{floorplanData:c[12],floorIndex:c[2]}]):{};s.$set(M),c[6]?E?(E.p(c,I),I&64&&v(E,1)):(E=pt(c),E.c(),v(E,1),E.m(i.parentNode,i)):E&&(B(),P(E,1,1,()=>{E=null}),Y()),c[11]?N?(N.p(c,I),I&2048&&v(N,1)):(N=ct(c),N.c(),v(N,1),N.m(f.parentNode,f)):N&&(B(),P(N,1,1,()=>{N=null}),Y()),c[4]?T?(T.p(c,I),I&16&&v(T,1)):(T=dt(c),T.c(),v(T,1),T.m(m.parentNode,m)):T&&(B(),P(T,1,1,()=>{T=null}),Y()),c[23]?C?(C.p(c,I),I&8388608&&v(C,1)):(C=ht(c),C.c(),v(C,1),C.m(p.parentNode,p)):C&&(B(),P(C,1,1,()=>{C=null}),Y())},i(c){h||(v(e.$$.fragment,c),v(g),v(r.$$.fragment,c),v(s.$$.fragment,c),v(E),v(N),v(T),v(C),h=!0)},o(c){P(e.$$.fragment,c),P(g),P(r.$$.fragment,c),P(s.$$.fragment,c),P(E),P(N),P(T),P(C),h=!1},d(c){U(e,c),c&&$(t),g&&g.d(c),c&&$(o),U(r,c),c&&$(l),U(s,c),c&&$(a),E&&E.d(c),c&&$(i),N&&N.d(c),c&&$(f),T&&T.d(c),c&&$(m),C&&C.d(c),c&&$(p)}}}function jo(n){let e,t;return e=new No({props:{missingFloorConfig:n[19]}}),{c(){S(e.$$.fragment)},m(o,r){k(e,o,r),t=!0},p(o,r){const l={};r&524288&&(l.missingFloorConfig=o[19]),e.$set(l)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function ut(n){let e,t;const o=[{floorIndex:n[2],floorplanData:n[12],hoveredRoom:n[25],highlightData:n[18]}];let r={};for(let l=0;l<o.length;l+=1)r=K(r,o[l]);return e=new Io({props:r}),{c(){S(e.$$.fragment)},m(l,s){k(e,l,s),t=!0},p(l,s){const a=s&33820676?Z(o,[{floorIndex:l[2],floorplanData:l[12],hoveredRoom:l[25],highlightData:l[18]}]):{};e.$set(a)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function pt(n){let e,t;const o=[{floorplanData:n[12],roomAreaEnable:n[7],roomNameEnable:n[8],roomNameOtherTypeEnable:n[9],roomDimensionEnable:n[10],floorIndex:n[2],getRoomAreaText:n[13],getRoomDimensionText:n[14],getLabelElement:n[15],hoveredRoom:n[25],adaptiveRoomLabelVisibleEnable:n[17]}];let r={};for(let l=0;l<o.length;l+=1)r=K(r,o[l]);return e=new Vn({props:r}),{c(){S(e.$$.fragment)},m(l,s){k(e,l,s),t=!0},p(l,s){const a=s&33748868?Z(o,[{floorplanData:l[12],roomAreaEnable:l[7],roomNameEnable:l[8],roomNameOtherTypeEnable:l[9],roomDimensionEnable:l[10],floorIndex:l[2],getRoomAreaText:l[13],getRoomDimensionText:l[14],getLabelElement:l[15],hoveredRoom:l[25],adaptiveRoomLabelVisibleEnable:l[17]}]):{};e.$set(a)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function ct(n){let e,t;const o=[{floorplanData:n[12],floorIndex:n[2],getRuleDistanceText:n[16]}];let r={};for(let l=0;l<o.length;l+=1)r=K(r,o[l]);return e=new Yn({props:r}),{c(){S(e.$$.fragment)},m(l,s){k(e,l,s),t=!0},p(l,s){const a=s&69636?Z(o,[{floorplanData:l[12],floorIndex:l[2],getRuleDistanceText:l[16]}]):{};e.$set(a)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function dt(n){let e,t;const o=[{panoIndex:n[0],floorplanData:n[12],lastPanoramaLongitude:n[20],cameraImageUrl:n[21]}];let r={};for(let l=0;l<o.length;l+=1)r=K(r,o[l]);return e=new _o({props:r}),{c(){S(e.$$.fragment)},m(l,s){k(e,l,s),t=!0},p(l,s){const a=s&3149825?Z(o,[{panoIndex:l[0],floorplanData:l[12],lastPanoramaLongitude:l[20],cameraImageUrl:l[21]}]):{};e.$set(a)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function ht(n){let e,t;return e=new Uo({props:{floorplanData:n[12],northDesc:n[22]}}),{c(){S(e.$$.fragment)},m(o,r){k(e,o,r),t=!0},p(o,r){const l={};r&4096&&(l.floorplanData=o[12]),r&4194304&&(l.northDesc=o[22]),e.$set(l)},i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function Bo(n){let e,t,o,r,l;const s=[jo,Qo],a=[];function i(f,m){return f[24]?1:0}return t=i(n),o=a[t]=s[t](n),{c(){e=L("div"),o.c(),u(e,"class",r=_e(`floorplan-plugin__floor${n[1]?" floorplan-plugin__floor--is-current":""}`)+" svelte-bl8zrz")},m(f,m){x(f,e,m),a[t].m(e,null),l=!0},p(f,[m]){let p=t;t=i(f),t===p?a[t].p(f,m):(B(),P(a[p],1,1,()=>{a[p]=null}),Y(),o=a[t],o?o.p(f,m):(o=a[t]=s[t](f),o.c()),v(o,1),o.m(e,null)),(!l||m&2&&r!==(r=_e(`floorplan-plugin__floor${f[1]?" floorplan-plugin__floor--is-current":""}`)+" svelte-bl8zrz"))&&u(e,"class",r)},i(f){l||(v(o),l=!0)},o(f){P(o),l=!1},d(f){f&&$(e),a[t].d()}}}function Yo(n,e,t){let o,r,{panoIndex:l}=e,{isCurrent:s}=e,{floorIndex:a}=e,{highlightEnable:i}=e,{cameraEnable:f}=e,{hoverEnable:m}=e,{roomLabelsEnable:p}=e,{roomAreaEnable:h}=e,{roomNameEnable:D}=e,{roomNameOtherTypeEnable:d}=e,{roomDimensionEnable:g}=e,{ruleLabelsEnable:y}=e,{floorplanData:q}=e,{getRoomAreaText:Q}=e,{getRoomDimensionText:j}=e,{getLabelElement:E}=e,{getRuleDistanceText:N}=e,{adaptiveRoomLabelVisibleEnable:T}=e,{highlightData:C}=e,{missingFloorConfig:c}=e,{lastPanoramaLongitude:I}=e,{cameraImageUrl:X}=e,{northDesc:ee}=e,{compassEnable:M}=e,{store:b=void 0}=e;const re=Ft(void 0);return re.subscribe(z=>{b&&t(26,b.roomOnMouse=z,b)}),n.$$set=z=>{"panoIndex"in z&&t(0,l=z.panoIndex),"isCurrent"in z&&t(1,s=z.isCurrent),"floorIndex"in z&&t(2,a=z.floorIndex),"highlightEnable"in z&&t(3,i=z.highlightEnable),"cameraEnable"in z&&t(4,f=z.cameraEnable),"hoverEnable"in z&&t(5,m=z.hoverEnable),"roomLabelsEnable"in z&&t(6,p=z.roomLabelsEnable),"roomAreaEnable"in z&&t(7,h=z.roomAreaEnable),"roomNameEnable"in z&&t(8,D=z.roomNameEnable),"roomNameOtherTypeEnable"in z&&t(9,d=z.roomNameOtherTypeEnable),"roomDimensionEnable"in z&&t(10,g=z.roomDimensionEnable),"ruleLabelsEnable"in z&&t(11,y=z.ruleLabelsEnable),"floorplanData"in z&&t(12,q=z.floorplanData),"getRoomAreaText"in z&&t(13,Q=z.getRoomAreaText),"getRoomDimensionText"in z&&t(14,j=z.getRoomDimensionText),"getLabelElement"in z&&t(15,E=z.getLabelElement),"getRuleDistanceText"in z&&t(16,N=z.getRuleDistanceText),"adaptiveRoomLabelVisibleEnable"in z&&t(17,T=z.adaptiveRoomLabelVisibleEnable),"highlightData"in z&&t(18,C=z.highlightData),"missingFloorConfig"in z&&t(19,c=z.missingFloorConfig),"lastPanoramaLongitude"in z&&t(20,I=z.lastPanoramaLongitude),"cameraImageUrl"in z&&t(21,X=z.cameraImageUrl),"northDesc"in z&&t(22,ee=z.northDesc),"compassEnable"in z&&t(23,M=z.compassEnable),"store"in z&&t(26,b=z.store)},n.$$.update=()=>{n.$$.dirty&4100&&t(27,o=q.floorDatas[a]),n.$$.dirty&134217728&&t(24,r=o.rooms.length>0||o.is_has_wall)},[l,s,a,i,f,m,p,h,D,d,g,y,q,Q,j,E,N,T,C,c,I,X,ee,M,r,re,b,o]}class Ho extends O{constructor(e){super(),G(this,e,Yo,Bo,V,{panoIndex:0,isCurrent:1,floorIndex:2,highlightEnable:3,cameraEnable:4,hoverEnable:5,roomLabelsEnable:6,roomAreaEnable:7,roomNameEnable:8,roomNameOtherTypeEnable:9,roomDimensionEnable:10,ruleLabelsEnable:11,floorplanData:12,getRoomAreaText:13,getRoomDimensionText:14,getLabelElement:15,getRuleDistanceText:16,adaptiveRoomLabelVisibleEnable:17,highlightData:18,missingFloorConfig:19,lastPanoramaLongitude:20,cameraImageUrl:21,northDesc:22,compassEnable:23,store:26},Fo)}}function Mo(n){H(n,"svelte-86bqav",".floorplan-main.svelte-86bqav{width:100%;height:100%;pointer-events:none}")}function gt(n,e,t){const o=n.slice();return o[26]=e[t],o}function bt(n){let e,t,o,r=n[15].floorDatas,l=[];for(let a=0;a<r.length;a+=1)l[a]=vt(gt(n,r,a));const s=a=>P(l[a],1,1,()=>{l[a]=null});return{c(){e=L("div");for(let a=0;a<l.length;a+=1)l[a].c();u(e,"class","floorplan-main svelte-86bqav")},m(a,i){x(a,e,i);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);o=!0},p(a,i){if(n=a,i&67108860){r=n[15].floorDatas;let f;for(f=0;f<r.length;f+=1){const m=gt(n,r,f);l[f]?(l[f].p(m,i),v(l[f],1)):(l[f]=vt(m),l[f].c(),v(l[f],1),l[f].m(e,null))}for(B(),f=r.length;f<l.length;f+=1)s(f);Y()}},i(a){if(!o){for(let i=0;i<r.length;i+=1)v(l[i]);t||kt(()=>{t=Ut(e,rn,{duration:n[0],easing:$t}),t.start()}),o=!0}},o(a){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)P(l[i]);o=!1},d(a){a&&$(e),Te(l,a)}}}function vt(n){let e,t;const o=[{hoverEnable:n[6],highlightEnable:n[7],floorplanData:n[15],getRoomAreaText:n[18],getRoomDimensionText:n[19],getLabelElement:n[20],getRuleDistanceText:n[21],roomLabelsEnable:n[9],roomAreaEnable:n[10],roomNameEnable:n[11],roomNameOtherTypeEnable:n[12],roomDimensionEnable:n[13],ruleLabelsEnable:n[14],adaptiveRoomLabelVisibleEnable:n[22],highlightData:n[23],missingFloorConfig:n[24],panoIndex:n[3],cameraEnable:n[5],cameraImageUrl:n[17],lastPanoramaLongitude:n[16],compassEnable:n[8],northDesc:n[2],store:n[25]},{floorIndex:n[26].floorIndex},{isCurrent:n[26].floorIndex===n[4]},{items:n[26].items}];let r={};for(let l=0;l<o.length;l+=1)r=K(r,o[l]);return e=new Ho({props:r}),{c(){S(e.$$.fragment)},m(l,s){k(e,l,s),t=!0},p(l,s){const a=s&67108860?Z(o,[s&67108844&&{hoverEnable:l[6],highlightEnable:l[7],floorplanData:l[15],getRoomAreaText:l[18],getRoomDimensionText:l[19],getLabelElement:l[20],getRuleDistanceText:l[21],roomLabelsEnable:l[9],roomAreaEnable:l[10],roomNameEnable:l[11],roomNameOtherTypeEnable:l[12],roomDimensionEnable:l[13],ruleLabelsEnable:l[14],adaptiveRoomLabelVisibleEnable:l[22],highlightData:l[23],missingFloorConfig:l[24],panoIndex:l[3],cameraEnable:l[5],cameraImageUrl:l[17],lastPanoramaLongitude:l[16],compassEnable:l[8],northDesc:l[2],store:l[25]},s&32768&&{floorIndex:l[26].floorIndex},s&32784&&{isCurrent:l[26].floorIndex===l[4]},s&32768&&{items:l[26].items}]):{};e.$set(a)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Ko(n){let e,t,o=n[1]&&bt(n);return{c(){o&&o.c(),e=J()},m(r,l){o&&o.m(r,l),x(r,e,l),t=!0},p(r,[l]){r[1]?o?(o.p(r,l),l&2&&v(o,1)):(o=bt(r),o.c(),v(o,1),o.m(e.parentNode,e)):o&&(B(),P(o,1,1,()=>{o=null}),Y())},i(r){t||(v(o),t=!0)},o(r){P(o),t=!1},d(r){o&&o.d(r),r&&$(e)}}}function Zo(n,e,t){let{duration:o=0}=e,{visible:r}=e,{northDesc:l}=e,{panoIndex:s}=e,{floorIndex:a}=e,{cameraEnable:i}=e,{hoverEnable:f}=e,{highlightEnable:m}=e,{compassEnable:p}=e,{roomLabelsEnable:h}=e,{roomAreaEnable:D}=e,{roomNameEnable:d}=e,{roomNameOtherTypeEnable:g}=e,{roomDimensionEnable:y}=e,{ruleLabelsEnable:q}=e,{floorplanData:Q}=e,{lastPanoramaLongitude:j}=e,{cameraImageUrl:E}=e,{getRoomAreaText:N}=e,{getRoomDimensionText:T}=e,{getLabelElement:C}=e,{getRuleDistanceText:c}=e,{adaptiveRoomLabelVisibleEnable:I}=e,{highlightData:X}=e,{missingFloorConfig:ee}=e,{store:M=void 0}=e;return n.$$set=b=>{"duration"in b&&t(0,o=b.duration),"visible"in b&&t(1,r=b.visible),"northDesc"in b&&t(2,l=b.northDesc),"panoIndex"in b&&t(3,s=b.panoIndex),"floorIndex"in b&&t(4,a=b.floorIndex),"cameraEnable"in b&&t(5,i=b.cameraEnable),"hoverEnable"in b&&t(6,f=b.hoverEnable),"highlightEnable"in b&&t(7,m=b.highlightEnable),"compassEnable"in b&&t(8,p=b.compassEnable),"roomLabelsEnable"in b&&t(9,h=b.roomLabelsEnable),"roomAreaEnable"in b&&t(10,D=b.roomAreaEnable),"roomNameEnable"in b&&t(11,d=b.roomNameEnable),"roomNameOtherTypeEnable"in b&&t(12,g=b.roomNameOtherTypeEnable),"roomDimensionEnable"in b&&t(13,y=b.roomDimensionEnable),"ruleLabelsEnable"in b&&t(14,q=b.ruleLabelsEnable),"floorplanData"in b&&t(15,Q=b.floorplanData),"lastPanoramaLongitude"in b&&t(16,j=b.lastPanoramaLongitude),"cameraImageUrl"in b&&t(17,E=b.cameraImageUrl),"getRoomAreaText"in b&&t(18,N=b.getRoomAreaText),"getRoomDimensionText"in b&&t(19,T=b.getRoomDimensionText),"getLabelElement"in b&&t(20,C=b.getLabelElement),"getRuleDistanceText"in b&&t(21,c=b.getRuleDistanceText),"adaptiveRoomLabelVisibleEnable"in b&&t(22,I=b.adaptiveRoomLabelVisibleEnable),"highlightData"in b&&t(23,X=b.highlightData),"missingFloorConfig"in b&&t(24,ee=b.missingFloorConfig),"store"in b&&t(25,M=b.store)},[o,r,l,s,a,i,f,m,p,h,D,d,g,y,q,Q,j,E,N,T,C,c,I,X,ee,M]}class Ll extends O{constructor(e){super(),G(this,e,Zo,Ko,V,{duration:0,visible:1,northDesc:2,panoIndex:3,floorIndex:4,cameraEnable:5,hoverEnable:6,highlightEnable:7,compassEnable:8,roomLabelsEnable:9,roomAreaEnable:10,roomNameEnable:11,roomNameOtherTypeEnable:12,roomDimensionEnable:13,ruleLabelsEnable:14,floorplanData:15,lastPanoramaLongitude:16,cameraImageUrl:17,getRoomAreaText:18,getRoomDimensionText:19,getLabelElement:20,getRuleDistanceText:21,adaptiveRoomLabelVisibleEnable:22,highlightData:23,missingFloorConfig:24,store:25},Mo)}}var Ne=(n,e,t)=>new Promise((o,r)=>{var l=i=>{try{a(t.next(i))}catch(f){r(f)}},s=i=>{try{a(t.throw(i))}catch(f){r(f)}},a=i=>i.done?o(i.value):Promise.resolve(i.value).then(l,s);a((t=t.apply(n,e)).next())});function Jo(n){return Ne(this,null,function*(){const e=new Headers({"Content-Type":"text/plain"}),t=function(o){return Ne(this,null,function*(){const r={index:o.index,url:o.url,svgUrl:o.svg_url};if(o.svg_url){const l=yield fetch(o.svg_url,{headers:e}).then(s=>s.text());r.svgContent=l}return r})};return yield Promise.all(n.map(t))})}function Xo(n){const e={id:n.id,size:n.size,name:n.name,customizedName:n.customizedName||"",path:n.path,roomType:n.room_type,floorType:n.floor_type,roomLabel:{position:n.room_label.position,positionInImage:n.room_label.position_in_image},observerIndexs:n.observer_indexs};return n.dimension&&Object.assign(e,{dimension:n.dimension}),e}function el(n){return{floorName:n.floor_name,floorIndex:n.floor_index,rooms:n.rooms.map(Xo),rules:n.rules,is_has_wall:n.is_has_wall}}function tl(n){return{index:n.index,floorIndex:n.floor_index,position:n.position,positionInImage:n.position_in_image}}function nl(n){return{rad:n.rad,position:n.position,positionInImage:n.position_in_image,northRad:n.north_rad,roomId:n.room_id,floorIndex:n.floor_index}}function ql(n){return Ne(this,null,function*(){const e=yield Jo(n.outlines),t=n.computed_data.bounding,o=n.computed_data.floor_datas.map(el),r=n.computed_data.entrance?nl(n.computed_data.entrance):null;return{outlines:e,entrance:r,bounding:t,floorDatas:o,observers:n.computed_data.observers.map(tl)}})}function ol(n,e){return e(n),n}function Nl(n,e){return ol({},t=>{for(const o in n)e.indexOf(o)===-1&&(t[o]=n[o])})}function yt(n,e){const t=Math.max(...n.work.observers.map(o=>o.floorIndex));return e>t?n.model.bounding.max.y:Math.max(...n.work.observers.filter(o=>o.floorIndex===e).map(o=>o.standingPosition.y))}function ll(n,e,t=xe.BOUNDING_CENTER){const o=yt(n,e),r=yt(n,e+1);return t===xe.BOUNDING_CENTER?(n.model.bounding.max.y+n.model.bounding.min.y)/2:t===xe.CEILING?r:o}function Tl(n,e,t,o){const r=ll(n,t,o==null?void 0:o.attachedTo),l=new Oe(0,r,0),s=new Oe(1,r,0),a=l.clone().project(n.camera),i=s.clone().project(n.camera);return Math.abs((i.x-a.x)/1e3)*(e.getBoundingClientRect().width/2)}let Wl=class extends jt{};var rl=(n,e,t)=>new Promise((o,r)=>{var l=i=>{try{a(t.next(i))}catch(f){r(f)}},s=i=>{try{a(t.throw(i))}catch(f){r(f)}},a=i=>i.done?o(i.value):Promise.resolve(i.value).then(l,s);a((t=t.apply(n,e)).next())});function al(n){return Object.prototype.toString.call(n)==="[object Object]"}function xt(n){return al(n)&&!!n.isVector3}function Cl(n,e){return rl(this,null,function*(){const[t]=yield nn(n.changeMode(...e));if(t)throw new Error("change mode canceled");yield new Promise(l=>{n.once("initAnimationWillStart",()=>{n.once("initAnimationEnded",()=>l())})});const o=e[1];if(!o)return!0;const r=n.getCurrentState();if(!il(o,r))throw new Error("pose 与预期不符")})}function il(n,e){return Object.keys(n).every(t=>{const o=e[t],r=n[t];return o===void 0||r===void 0?!0:t==="longitude"||t==="latitude"?Bt(o,r,2):typeof o=="number"&&typeof r=="number"?Yt(o,r,2):xt(r)&&xt(o)?r.distanceTo(o)<.01:o===r})}function _l(n,e,t=300){var o,r;const l=n.getElement();if(l){l.style.opacity=e+"";for(let s=0;s<((r=(o=l.parentElement)==null?void 0:o.children)==null?void 0:r.length);s++){const a=l.parentElement.children[s];a instanceof HTMLElement&&a.dataset.infive==="1"&&(a.style.opacity=e+"")}l.style.transition=t===0?"none":`opacity ${t}ms linear`,t!==0&&Promise.race([new Promise(s=>l.addEventListener("transitionend",s,{once:!0})),new Promise(s=>setTimeout(s,t))]).then(()=>{l.style.transition="none"})}}function sl(n){return/^https?:\/\/|^\/\//.test(n)||/^data:/.test(n)||n.startsWith("//")}function Ol(n=Ht,e){if(!e||typeof e!="string")return e||"";if(!n||typeof n!="string")return e;n.startsWith("//")&&(n="http:"+n);try{if(!sl(e))return e;let t=e;e.startsWith("//")&&(t="http:"+e);const o=new URL(t);let r=n,l=o.protocol;return n.includes("://")?r=new URL(n).hostname:n.startsWith("//")&&(r=n.substring(2)),!r||r.trim()===""?e:(o.hostname=r,l!==o.protocol&&(o.protocol=l),e.startsWith("//")?o.toString().replace(/^https?:\/\//,"//"):o.toString())}catch(t){return console.warn(`[replaceStaticPrefix] Invalid URL: ${e}`,t),e}}export{mt as A,rn as C,Tl as E,hl as I,ql as P,dl as S,Wl as a,Ll as b,_l as c,nn as d,Nl as e,on as f,we as g,Zt as h,en as i,Cl as j,Dt as k,ll as l,Ol as m,Ge as n,ln as o,xe as r};
