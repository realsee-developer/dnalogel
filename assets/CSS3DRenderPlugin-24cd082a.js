import{r as o,q as y,n as w,b as p,j as e,G as E,p as D,I as C,a as z}from"./index-85b64ddc.js";import{O as P,u as k}from"./index-95a52a8f.js";import{u as f}from"./useFivePlugin-f513c6e4.js";import{u as R,D as S}from"./useFetchDatas-45e33e50.js";function m(){return{width:window.innerWidth,height:window.innerHeight}}function L(){const[n,s]=o.useState(m);return o.useEffect(()=>{const l=()=>s(m());return window.addEventListener("resize",l,!1),()=>window.removeEventListener("resize",l,!1)}),n}const T=[{x:-.16450234208682218,y:1.2079436283327727,z:-2.3397009372711186},{x:.4534614669340434,y:1.2009985563997523,z:-2.3397009372711186},{x:.4588598077301688,y:1.9071464262166917,z:-2.339700937271118},{x:-.16094619454331782,y:1.9098602633949615,z:-2.3397009372711186}],V=[{x:-2.477198373425605,y:.7130577758219233,z:.9610755395268495},{x:-3.5381655961828398,y:.7116168342616207,z:.9610929846772527},{x:-3.539078683563409,y:1.3088387226688785,z:.9619091495397428},{x:-2.480143740175835,y:1.3060486529110507,z:.9614149563152103}],O=[{x:-4.344637059045372,y:.8661640292431658,z:-2.339700937271118},{x:-1.4781933464383068,y:.8696103907729694,z:-2.339700937271118},{x:-1.4865722199099451,y:2.1293509755511106,z:-2.3397009372711177},{x:-4.343575500347607,y:2.1145151110093137,z:-2.3397009372711177}],W=()=>{const n=y();w();const s=f("css3DRenderPlugin"),[l,c]=o.useState(s.state.visible),[r,u]=o.useState(!0),[h,v]=o.useState(s.state.enabled);return o.useEffect(()=>{n.plugins.panoTagPlugin.load({tagList:[{dimensionType:"2D",pointType:"PointTag",contentType:"Text",position:[-3.3344076411262944,.7070410926642972,-2.3397009372711186],data:{text:"112123"}}]});const{container:a,dispose:i,setVisible:d}=s.create3DDomContainer(T,{pointerEvents:"auto"})||{};return a&&p.render(e.jsx("img",{src:"//vr-static.realsee-cdn.cn/release/web/catCoding.1cd4e989.gif",width:"100%"}),a),Object.assign(window,{setCatCodingVisible:d}),()=>{i==null||i()}},[n]),o.useEffect(()=>{const{container:a,dispose:i}=s.create3DDomContainer(O,{pointerEvents:"auto",ratio:.002})||{};return a&&p.render(e.jsx("iframe",{width:"100%",height:"100%",src:"//home.realsee.com/"}),a),()=>{i==null||i()}},[n]),o.useEffect(()=>{var b;const a=[],i=n.getElement();if(!i)return;const d=i.parentElement;if(!d)return;let t;t=(b=d.getElementsByClassName("behind-five"))==null?void 0:b[0],t||(t=document.createElement("div"),t.classList.add("behind-five"),t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.right="0",t.style.bottom="0",t.style.zIndex="-1",d.insertBefore(t,i));const{container:x,dispose:j}=s.create3DDomContainer(V,{pointerEvents:"auto",mode:"behind",behindFiveContainer:t})||{};return x&&p.render(e.jsx("video",{src:"//vrlab-public.ljcdn.com/release/web/videos/tv_ads/360/009.mp4",width:"100%",height:"100%",autoPlay:!0,loop:!0,muted:!0}),x),a.push(j),()=>a.forEach(g=>g==null?void 0:g())},[n]),e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsxs("div",{style:{position:"absolute",top:0,left:0,backgroundColor:"rgba(0,0,0,0.1)"},children:[e.jsxs("div",{children:[e.jsxs("span",{children:["css3DRenderPlugin visible: ",l?"show":"hide"]}),e.jsx("button",{onClick:()=>{l?s.hide():s.show(),c(s.state.visible)},children:"toggle"})]}),e.jsxs("div",{children:[e.jsxs("span",{children:["css3DRenderPlugin enable: ",h?"enable":"disable"]}),e.jsx("button",{onClick:()=>{h?s.disable():s.enable(),v(s.state.enabled)},children:"toggle"})]}),e.jsxs("div",{children:[e.jsxs("span",{children:["catCodingVisible visible: ",r?"show":"hide"]}),e.jsx("button",{onClick:async()=>{window.setCatCodingVisible(!r),u(!r)},children:"toggle"})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>s.dispose(),children:"dispose"})})]})]})};function F(){const[n,s]=o.useState([]),l=f("css3DRenderPlugin");return o.useEffect(()=>{const c=["stateChange","dispose","show","hide","enable","disable"],r=[];c.forEach(u=>{l.hooks.on(u,(...h)=>{r.push({hookName:u,hookParams:JSON.stringify(h)}),s(r)})})},[]),e.jsxs("div",{style:{position:"absolute",top:0,right:0,backgroundColor:"rgba(0,0,0,0.1)"},children:["hooks监听",n.map((c,r)=>e.jsxs("div",{children:[e.jsx("span",{children:c.hookName}),":",e.jsx("span",{children:c.hookParams})]},r))]})}const I=E({imageOptions:{size:512},textureOptions:{size:512},plugins:[[P,"css3DRenderPlugin"],[k,"panoTagPlugin"]]}),N=()=>{const n=L(),s=R(S.WORK);return s&&e.jsxs(I,{initialWork:D(s),children:[e.jsx(C,{...n}),e.jsx(W,{})]})};z.render(e.jsx(N,{}),document.querySelector("#app"));
