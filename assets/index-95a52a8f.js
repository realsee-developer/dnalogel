import{aj as fi,aK as Lg,aL as Yd,c as Qe,z as yl,N as qd,Q as Jl,U as Q1,a2 as Ao,y as Or,ap as Zd,aM as Jd,aN as Kl,aO as U1,x as Ye,s as on,aP as X1,v as Xe,m as Et,ai as Kd,ak as xa,a9 as Y1,M as We,a8 as $r,ab as bh,V as R,aA as q1,aG as Tg,B as xt,aQ as In,aR as Z1,aS as J1,aT as Ro,d as dt,ah as K1,E as ui,ax as _1,t as ni,aU as tt,ay as $1,az as eA,aV as tA,u as Ot,g as Bi,af as iA,ae as nA,Y as _d,W as oA,Z as jc,aW as nn,P as Nt,aE as bl,aF as sA,w as wh,l as Ze,D as It,aX as Yt,aY as no,aa as Og,aZ as Ht,a7 as rA,o as Xo,a_ as ea,L as zi,C as ta,a$ as ia,b0 as wl,b1 as aA,b2 as lA,aH as cA,al as Wa,F as xh,b3 as Lc,e as Rg,b4 as hA,b5 as Bg,b6 as Hg,aB as Ch,h as Ng,b7 as dA,b8 as uA,i as Fg,b9 as pA,aI as fA,a6 as $d,ad as eu,a5 as tu,f as Ph,ba as mA,bb as gA,bc as Ga,bd as vA,be as AA,bf as yA,bg as bA,bh as wA,au as iu,bi as xA,bj as CA,aC as PA,S as Eh,O as nu,k as EA,aD as IA}from"./index-85b64ddc.js";var MA=Object.defineProperty,SA=Object.defineProperties,DA=Object.getOwnPropertyDescriptors,Qa=Object.getOwnPropertySymbols,Vg=Object.prototype.hasOwnProperty,Wg=Object.prototype.propertyIsEnumerable,Bo=Math.pow,Tc=(i,e,t)=>e in i?MA(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,W=(i,e)=>{for(var t in e||(e={}))Vg.call(e,t)&&Tc(i,t,e[t]);if(Qa)for(var t of Qa(e))Wg.call(e,t)&&Tc(i,t,e[t]);return i},pe=(i,e)=>SA(i,DA(e)),es=(i,e)=>{var t={};for(var n in i)Vg.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&Qa)for(var n of Qa(i))e.indexOf(n)<0&&Wg.call(i,n)&&(t[n]=i[n]);return t},p=(i,e,t)=>(Tc(i,typeof e!="symbol"?e+"":e,t),t),ee=(i,e,t)=>new Promise((n,o)=>{var s=l=>{try{a(t.next(l))}catch(c){o(c)}},r=l=>{try{a(t.throw(l))}catch(c){o(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,r);a((t=t.apply(i,e)).next())});function kA(){console.debug("%c %c@realsee/dnalogel %cv3.70.4",["background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAMAAACHgmeRAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABLFBMVEUAAAAapPoap/oaqvkbrfkbr/gZnfwZoPsaqfnD4v/E4/8Ylv0clPm93/+/4P/B4f8Yj/683/8Wif+33P8Uhv+x2f8ShP+s1v8Pgf+n0/8Nf/+h0f8Lff8Lff8Nf/9dl/+czv8KfP8KfP+Lxf+Uyv+Xy/+Hwv+Jw/+Mxf+Oxv+RyP8aovsapfoap/oZmfwZm/wZnvsYnPsYkf4YlP0NePsDYfgYcfi43f+63v8Xiv8Xjf4EWfwCV/sWZ/qz2v+02/8Vh/8WiP8EUf8CTf4WXv2u1/+v2P8Thf8Thv8ETf8CR/8VV/+o1f+q1f8Qgv8Rg/8DSv8BRf8UVP+j0v+k0v8OgP8Pgf8DR/8DQv9Nhf+dzv+fz/+Kv/+Vyv+Xy/+azf+Oxv+Qx/+SyP////8MUhLdAAAAK3RSTlMACEWQ2bd98uQECPXxqO7c+Pb49vj2+Pb49vj23Oul8fMHA+TwerXXjEIG2P+bHgAAAAFiS0dEY1y+LaoAAAB+SURBVAjXY2BgZGJmYWVgYGBgY9fW0eVg4ORi4NbTNzDk4eXjZxAwMjYxNTO3EGQQsrSytrG1sxdmEHFwdHJ2cXUTZRBz9/D08vbxFWeQ8PMPCAwKDpFkkAoNC4+IjIqWZpCRlZOPiY2LV2BQVGJQTkhMUlEFWaOmrqGpxQAAyg0S9Dq+VPYAAAAASUVORK5CYII=')","background-repeat: no-repeat","background-position: 0 center","padding-left: 8px"].join(";"),"","background-color: #12ce9b;color:black;padding:0 6px;border-radius: 3px")}function zA(){const i=typeof OffscreenCanvas<"u",e=i&&new OffscreenCanvas(1,1).getContext("webgl")!==null;i&&!e&&Object.assign(window,{OffscreenCanvas:function(t,n){const o=document.createElement("canvas");return o.width=t,o.height=n,o}})}Promise.resolve();var ro=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return this.None(i)},Out:function(i){return this.None(i)},InOut:function(i){return this.None(i)}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-ro.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?ro.Bounce.In(i*2)*.5:ro.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),Ps=function(){return performance.now()},Gg=function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},i.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},i.prototype.update=function(e,t){e===void 0&&(e=Ps()),t===void 0&&(t=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<n.length;o++){var s=this._tweens[n[o]],r=!t;s&&s.update(e,r)===!1&&!t&&delete this._tweens[n[o]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},i}(),Ho={Linear:function(i,e){var t=i.length-1,n=t*e,o=Math.floor(n),s=Ho.Utils.Linear;return e<0?s(i[0],i[1],n):e>1?s(i[t],i[t-1],t-n):s(i[o],i[o+1>t?t:o+1],n-o)},Bezier:function(i,e){for(var t=0,n=i.length-1,o=Math.pow,s=Ho.Utils.Bernstein,r=0;r<=n;r++)t+=o(1-e,n-r)*o(e,r)*i[r]*s(n,r);return t},CatmullRom:function(i,e){var t=i.length-1,n=t*e,o=Math.floor(n),s=Ho.Utils.CatmullRom;return i[0]===i[t]?(e<0&&(o=Math.floor(n=t*(1+e))),s(i[(o-1+t)%t],i[o],i[(o+1)%t],i[(o+2)%t],n-o)):e<0?i[0]-(s(i[0],i[0],i[1],i[1],-n)-i[0]):e>1?i[t]-(s(i[t],i[t],i[t-1],i[t-1],n-t)-i[t]):s(i[o?o-1:0],i[o],i[t<o+1?t:o+1],i[t<o+2?t:o+2],n-o)},Utils:{Linear:function(i,e,t){return(e-i)*t+i},Bernstein:function(i,e){var t=Ho.Utils.Factorial;return t(i)/t(e)/t(i-e)},Factorial:function(){var i=[1];return function(e){var t=1;if(i[e])return i[e];for(var n=e;n>1;n--)t*=n;return i[e]=t,t}}(),CatmullRom:function(i,e,t,n,o){var s=(t-i)*.5,r=(n-e)*.5,a=o*o,l=o*a;return(2*e-2*t+s+r)*l+(-3*e+3*t-2*s-r)*a+s*o+e}}},Ih=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),Oc=new Gg,Qg=function(){function i(e,t){t===void 0&&(t=Oc),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ro.Linear.None,this._interpolationFunction=Ho.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Ih.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.getDuration=function(){return this._duration},i.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,t){if(e===void 0&&(e=Ps()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var s in this._valuesEnd)o[s]=this._valuesEnd[s];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,t,n,o,s){for(var r in n){var a=e[r],l=Array.isArray(a),c=l?"array":typeof a,h=!l&&Array.isArray(n[r]);if(!(c==="undefined"||c==="function")){if(h){var d=n[r];if(d.length===0)continue;for(var u=[a],f=0,m=d.length;f<m;f+=1){var g=this._handleRelativeValue(a,d[f]);if(isNaN(g)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}u.push(g)}h&&(n[r]=u)}if((c==="object"||l)&&a&&!h){t[r]=l?[]:{};var v=a;for(var A in v)t[r][A]=v[A];o[r]=l?[]:{};var d=n[r];if(!this._isDynamic){var w={};for(var A in d)w[A]=d[A];n[r]=d=w}this._setupProperties(v,t[r],d,o[r],s)}else(typeof t[r]>"u"||s)&&(t[r]=a),l||(t[r]*=1),h?o[r]=n[r].slice().reverse():o[r]=t[r]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(e){return e===void 0&&(e=Ps()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},i.prototype.resume=function(e){return e===void 0&&(e=Ps()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},i.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e===void 0&&(e=Oc),this._group=e,this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=ro.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=Ho.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,t){var n=this,o;if(e===void 0&&(e=Ps()),t===void 0&&(t=!0),this._isPaused)return!0;var s,r=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>r)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((o=this._repeatDelayTime)!==null&&o!==void 0?o:this._delayTime),c=this._duration+this._repeat*l,h=function(){if(n._duration===0||a>c)return 1;var v=Math.trunc(a/l),A=a-v*l,w=Math.min(A/n._duration,1);return w===0&&a===n._duration?1:w},d=h(),u=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,u),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||a>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=f);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var m=0,g=this._chainedTweens.length;m<g;m++)this._chainedTweens[m].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(e,t,n,o){for(var s in n)if(t[s]!==void 0){var r=t[s]||0,a=n[s],l=Array.isArray(e[s]),c=Array.isArray(a),h=!l&&c;h?e[s]=this._interpolationFunction(a,o):typeof a=="object"&&a?this._updateProperties(e[s],r,a,o):(a=this._handleRelativeValue(r,a),typeof a=="number"&&(e[s]=r+(a-r)*o))}},i.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},i.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},i}(),jA="23.1.1",LA=Ih.nextId,hn=Oc,TA=hn.getAll.bind(hn),OA=hn.removeAll.bind(hn),RA=hn.add.bind(hn),Ug=hn.remove.bind(hn),BA=hn.update.bind(hn),ou={Easing:ro,Group:Gg,Interpolation:Ho,now:Ps,Sequence:Ih,nextId:LA,Tween:Qg,VERSION:jA,getAll:TA,removeAll:OA,add:RA,remove:Ug,update:BA};function _n(){return((1+Math.random())*65536|0).toString(16).substring(1)}function Bt(){return(_n()+_n()+"-"+_n()+"-4"+_n().substr(0,3)+"-"+_n()+"-"+_n()+_n()+_n()).toLowerCase()}function HA(i){return typeof Symbol>"u"?`$Symbol<${i}>$`:Symbol(i)}const Ir=HA("$$EVENT$$");function Ca(i){return i[Ir]||(i[Ir]={}),i[Ir]}function NA(i){i[Ir]&&delete i[Ir]}class Mt{hasListener(e){const t=Ca(this);return!!(t!=null&&t[e]&&t[e].length>0)}on(e,t,n){const o=Ca(this);return o[e]||(o[e]=[]),o[e].push([t,n||!1]),()=>this.off(e,t)}once(e,t){return this.on(e,t,!0)}off(e,t){if(e===void 0){NA(this);return}const n=Ca(this);if(n[e]||(n[e]=[]),t===void 0){n[e].length=0;return}let o=0;for(;o<n[e].length&&n[e][o][0]!==t;o++);o<n[e].length&&n[e].splice(o,1)}emit(e,...t){let n=!1;const o=Ca(this)[e]||[];for(let s of o.slice()){const[r,a=!1]=s,l=r(...t);a&&this.off(e,r),l===!1&&(n=!0)}return n}}class Rc{constructor(e=0,t=0){p(this,"min"),p(this,"max"),p(this,"isInterval",!0),this.min=e,this.max=t}fromArray(e){return this.min=e[0],this.max=e[1],this}isOverlap(e){return Math.min(this.max,e.max)<Math.max(this.min,e.min)}contains(e){return this.min<e.min&&this.max>e.max}}let FA=class{constructor(i,e){p(this,"min"),p(this,"max"),p(this,"xInterval"),p(this,"yInterval"),p(this,"isRectangle",!0),this.min=i,this.max=e,this.xInterval=new Rc(this.min.x,this.max.x),this.yInterval=new Rc(this.min.y,this.max.y)}isOverlapWithRectangle(i){return!this.xInterval.isOverlap(i.xInterval)&&!this.yInterval.isOverlap(i.yInterval)}containsRect(i){return this.xInterval.contains(i.xInterval)&&this.yInterval.contains(i.yInterval)}};function VA(i){i.sort(function(n,o){return n.x!=o.x?n.x-o.x:n.y-o.y});const e=i.length,t=[];for(let n=0;n<2*e;n++){const o=n<e?n:2*e-1-n;for(;t.length>=2&&WA(t[t.length-2],t[t.length-1],i[o]);)t.pop();t.push(i[o])}return t.pop(),t}function WA(i,e,t){const n=(i.x-e.x)*(t.y-e.y)-(i.y-e.y)*(t.x-e.x),o=(i.x-e.x)*(t.x-e.x)+(i.y-e.y)*(t.y-e.y);return n<0||n==0&&o<=0}function su(i,e){const t=i[0],n=i[1];let o=!1;for(let s=0,r=e.length-1;s<e.length;r=s++){const a=e[s][0],l=e[s][1],c=e[r][0],h=e[r][1];l>n!=h>n&&t<(c-a)*(n-l)/(h-l)+a&&(o=!o)}return o}const GA=({x:i,y:e,z:t})=>new R(i,e,t),ln=i=>new R().fromArray(i),Ue=i=>{if(i)return i instanceof R?i:Array.isArray(i)?ln(i):GA(i)};function QA(i){if(i)return Array.isArray(i)?typeof i[0]=="number"?Ue(i):i.map(Ue):Ue(i)}function _l(i,e,t){const{x:n,y:o,z:s}=e.clone().project(i);return s>1?void 0:{leftPx:(n+1)/2*t.x,topPx:(-o+1)/2*t.y}}function Ci(i){var e;return((e=i.models)==null?void 0:e.filter(t=>t.name===i.state.workCode)[0])||i.model}class Xg extends Mt{constructor(e){super(),p(this,"five"),this.five=e}}const js=(i,e)=>{if(!e)return i;const t=new R,n=new tt,o=new R;return e.decompose(t,n,o),i.clone().multiply(o).applyQuaternion(n).add(t)},$l=new Map;class UA extends Xg{constructor(e){super(e),p(this,"_workCode")}get fromType(){var e,t;const n=this.workCode;if($l.has(n))return $l.get(n);const o=(t=(e=JSON.parse(this.work.raw.works[0]))==null?void 0:e.from_type)!=null?t:"vr";return $l.set(n,o),o}set workCode(e){this._workCode=e}get workCode(){var e;return(e=this._workCode)!=null?e:this.five.state.workCode}get work(){var e,t;return(t=(e=this.five.works)==null?void 0:e.find(n=>n.workCode===this.workCode))!=null?t:this.five.work}get observers(){var e;return(e=this.work)==null?void 0:e.observers}get transform(){var e,t,n,o;const s=(o=(e=this.work)==null?void 0:e.transform)!=null?o:(n=(t=this.work)==null?void 0:t.options)==null?void 0:n.transform;return s?s.clone():new Xe}getResolvedObserver(e){return this.five.works.getResolvedObserver({workCode:this.workCode,panoIndex:e})}getObserverPosition(e){var t;const n=(t=this.getObserver(e))==null?void 0:t.position;if(n)return js(n,this.transform)}getObserverStandingPosition(e){var t;const n=(t=this.getObserver(e))==null?void 0:t.standingPosition;if(n)return js(n,this.transform)}getObserver(e){var t;return(t=this.observers)==null?void 0:t[e]}}class xl extends Xg{constructor(e){super(e),p(this,"workUtil",new UA(this.five))}get version(){return this.five.constructor.version}get majorVersion(){return Number(this.version.split(".")[0])}get model(){return Ci(this.five)}moveToPano(e,t){const n=this.majorVersion===5?e:{workCode:this.workUtil.workCode,panoIndex:e};return this.five.moveToPano(n,t)}}class Rr extends Ot{intersectObject(e,t=!0,n=[]){return Bc(e,this,n,t),n.sort(ru),n}intersectObjects(e,t=!0,n=[]){for(let o=0,s=e.length;o<s;o++)Bc(e[o],this,n,t);return n.sort(ru),n}}function ru(i,e){return i.distance-e.distance}function Bc(i,e,t,n){let o=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(o=!1),o===!0&&n===!0){const s=i.children;for(let r=0,a=s.length;r<a;r++)Bc(s[r],e,t,!0)}}function Mh(i,e,t,n){let o=!0;if(i.type!=="Line2"&&(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(o=!1),o===!0&&n===!0)){const s=i.children;for(let r=0,a=s.length;r<a;r++)s[r].type!=="Line2"&&Mh(s[r],e,t,!0)}}const kn=new Rr;kn.params.Points.threshold=.02;function Ua(i,e){if(!e||typeof ResizeObserver>"u"||!ResizeObserver)return{observe:()=>window.addEventListener("resize",i),unobserve:()=>window.removeEventListener("resize",i)};{const t=new ResizeObserver(i);return{observe:()=>t.observe(e),unobserve:()=>t.unobserve(e)}}}function Cl(i,e=200){let t;return function(...n){t||(i(...n),t=setTimeout(function(){t=null},e))}}function Sh(i,e){let t=!1;const n=Cl(()=>{t||(t=!0,i.ready().then(()=>{e(),t=!1}))},150);return i.on("camera.update",n),()=>{i.off("camera.update",n)}}const XA=new Qe;class na{constructor(e,t,n){p(this,"container"),p(this,"visible",!1),p(this,"enabled",!1),p(this,"visibles",[]),p(this,"wrapper"),p(this,"positionsForRotate"),p(this,"intersectCheck",!0),p(this,"extraObjectsForIntersectCheck",[]),p(this,"simulate3D",!1),p(this,"tagWrapper"),p(this,"five"),p(this,"originPosition"),p(this,"transformedPosition"),p(this,"disposer"),p(this,"config"),p(this,"fiveUtil"),p(this,"disposers",[]),p(this,"onModeChange",()=>{this.visibles[3]=void 0,this.updateVisible()}),p(this,"onPanoArrived",()=>{this.visibles[3]=void 0,this.updateVisible()}),p(this,"onCameraUpdate",()=>{this.visible!==!1&&this.updateScreenPosition()}),p(this,"onCameraFovUpdate",()=>{this.onCameraUpdate(),this.five.off("render.prepare",this.onCameraUpdate),this.five.on("render.prepare",this.onCameraUpdate),setTimeout(()=>{this.five.off("render.prepare",this.onCameraUpdate)},1e3)}),p(this,"onFiveEveryReady",()=>{this.five.state.mode!=="Panorama"&&this.updateVisible()}),p(this,"updateVisible",()=>{this.visible&&(this.updateIntersectCheckVisible(),this.needsRender=!0)}),p(this,"applyVisible",()=>{this.visibles[3]===!0||this.visibles.every(a=>a!==!1)?(this.container.style.opacity="1",this.container.style.pointerEvents="auto"):(this.container.style.opacity="0",this.container.style.pointerEvents="none")}),p(this,"updateIntersectCheckVisible",()=>{var a,l;if(!this.position)return;if(!this.intersectCheck){this.visibles[1]=!0;return}let c=!1,h=.01;this.fiveUtil.workUtil.fromType==="poincare"&&(h=.05);const d=this.transformedPosition.clone().sub(this.five.camera.position).normalize();kn.set(this.five.camera.position,d);const u=(a=Ci(this.five).intersectRaycaster(kn))!=null?a:[],f=(l=kn.intersectObjects(this.extraObjectsForIntersectCheck,!0))!=null?l:[],m=[...u,...f].sort((g,v)=>g.distance-v.distance)[0];m?c=(m==null?void 0:m.distance)+h>this.transformedPosition.distanceTo(this.five.camera.position):c=!0,this.visibles[1]=c});var o,s,r;this.five=e,this.fiveUtil=(o=e.__fiveUtil__)!=null?o:e.__fiveUtil__=new xl(e),this.originPosition=t?Ue(t).clone():void 0,this.transformedPosition=(s=this.originPosition)==null?void 0:s.clone(),this.positionsForRotate=(r=n==null?void 0:n.positionsForRotate)==null?void 0:r.map(a=>Ue(a).clone()),this.config=n??{},this.container=(()=>{const a=document.createElement("div");return a.classList.add("light-tag"),a.style.width="0",a.style.height="0",a.style.position="absolute",n!=null&&n.disableOpacityTransition||(a.style.transition="opacity 0.2s linear"),a})(),this.addResizeListener(),this.show(),this.enable(),setTimeout(()=>{this.updateVisible(),this.needsRender=!0},0)}get position(){return this.transformedPosition}set needsRender(e){this.applyVisible()}show(e){this.visible=!0,this.visibles[0]=!0,e!=null&&e.force&&(this.visibles[3]=!0),this.container.style.opacity="1",this.container.style.pointerEvents="auto",this.updateVisible(),this.onCameraUpdate()}hide(){this.visible=!1,this.visibles[0]=!1,this.container.style.opacity="0",this.container.style.pointerEvents="none"}enable(){return ee(this,null,function*(){var e,t,n,o;if(this.enabled||(this.enabled=!0,yield Ti(this.five),!this.enabled))return;if(this.wrapper=(t=this.config.wrapper)!=null?t:(e=this.five.getElement())==null?void 0:e.parentElement,!this.wrapper){console.error("lighttag: wrapper is required");return}const s=`light-tag-wrapper-${(o=(n=this.config)==null?void 0:n.namespace)!=null?o:"default"}`;if(!this.tagWrapper){let a=Array.from(this.wrapper.children).find(l=>l.id===s);if(!a){const l=document.createElement("div");a=l,l.id=s,l.style.position="absolute",l.style.overflow="hidden",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.height="100%",l.style.pointerEvents="none",l.style.zIndex="1",this.wrapper.appendChild(a)}this.tagWrapper=a}this.tagWrapper.appendChild(this.container),this.updateVisible();const r=Sh(this.five,this.onFiveEveryReady);this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("cameraFovUpdate",this.onCameraFovUpdate),this.five.on("panoArrived",this.onPanoArrived),this.five.on("modeChange",this.onModeChange),this.disposer=()=>{r(),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("cameraFovUpdate",this.onCameraFovUpdate),this.five.off("panoArrived",this.onPanoArrived),this.five.off("modeChange",this.onModeChange)}})}disable(){var e;this.enabled&&(this.enabled=!1,this.tagWrapper&&this.container&&this.tagWrapper.contains(this.container)&&this.tagWrapper.removeChild(this.container),(e=this.disposer)==null||e.call(this))}destroy(){this.disable(),this.container.remove(),this.disposers.forEach(e=>e())}setPosition(e,t){this.transformedPosition=Ue(e).clone(),this.positionsForRotate=t==null?void 0:t.map(n=>Ue(n).clone()),this.onCameraUpdate(),setTimeout(()=>this.onCameraUpdate(),0)}setTransformMatrix(e){var t;this.transformedPosition=(t=this.originPosition)==null?void 0:t.clone().applyMatrix4(e),this.onCameraUpdate()}updateScreenPosition(){var e;if(!this.transformedPosition){this.container.style.left="-100%",this.container.style.top="-100%";return}const t=(e=this.five.renderer)==null?void 0:e.getSize(XA);if(!t){this.container.style.left="-100%",this.container.style.top="-100%";return}const n=_l(this.five.camera,this.transformedPosition,t);if(!n){this.container.style.left="-100%",this.container.style.top="-100%";return}const o=(()=>{if(!this.simulate3D)return 1;const r=3*Math.tan(.5*this.five.camera.fov/180*Math.PI),a=this.transformedPosition.distanceTo(this.five.camera.position);return Math.max(Math.min(1-r*a/40,1),.75)})(),s=(()=>{if(this.positionsForRotate===void 0||this.positionsForRotate.length!==2)return 0;const[r,a]=this.positionsForRotate,l=_l(this.five.camera,r,t),c=_l(this.five.camera,a,t);if(!l||!c)return 0;const h=l.leftPx>c.leftPx?c:l,d=l.leftPx>c.leftPx?l:c,u=d.leftPx-h.leftPx,f=d.topPx-h.topPx;return Math.atan2(f,u)*(180/Math.PI)})();this.container.style.left=n.leftPx+"px",this.container.style.top=n.topPx+"px",this.container.style.transformOrigin="center",this.container.style.transform=`scale(${o})`,s&&(this.container.style.transform+=` rotate(${s}deg)`)}addResizeListener(){const e=this.five.getElement();if(e){const{observe:t,unobserve:n}=Ua(this.onCameraUpdate,e);t(),this.disposers.push(n)}}}function Yg(...i){return new na(...i)}function ao(i){return i.toLowerCase().includes("panorama")}function wi(i){return!ao(i)}var ji=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br={},YA={get exports(){return Br},set exports(i){Br=i}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(i){(function(e,t,n,o){var s=["","webkit","Moz","MS","ms","o"],r=t.createElement("div"),a="function",l=Math.round,c=Math.abs,h=Date.now;function d(L,V,Z){return setTimeout(P(L,Z),V)}function u(L,V,Z){return Array.isArray(L)?(f(L,Z[V],Z),!0):!1}function f(L,V,Z){var te;if(L)if(L.forEach)L.forEach(V,Z);else if(L.length!==o)for(te=0;te<L.length;)V.call(Z,L[te],te,L),te++;else for(te in L)L.hasOwnProperty(te)&&V.call(Z,L[te],te,L)}function m(L,V,Z){var te="DEPRECATED METHOD: "+V+`
`+Z+` AT 
`;return function(){var fe=new Error("get-stack-trace"),ke=fe&&fe.stack?fe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",qe=e.console&&(e.console.warn||e.console.log);return qe&&qe.call(e.console,te,ke),L.apply(this,arguments)}}var g;typeof Object.assign!="function"?g=function(L){if(L===o||L===null)throw new TypeError("Cannot convert undefined or null to object");for(var V=Object(L),Z=1;Z<arguments.length;Z++){var te=arguments[Z];if(te!==o&&te!==null)for(var fe in te)te.hasOwnProperty(fe)&&(V[fe]=te[fe])}return V}:g=Object.assign;var v=m(function(L,V,Z){for(var te=Object.keys(V),fe=0;fe<te.length;)(!Z||Z&&L[te[fe]]===o)&&(L[te[fe]]=V[te[fe]]),fe++;return L},"extend","Use `assign`."),A=m(function(L,V){return v(L,V,!0)},"merge","Use `assign`.");function w(L,V,Z){var te=V.prototype,fe;fe=L.prototype=Object.create(te),fe.constructor=L,fe._super=te,Z&&g(fe,Z)}function P(L,V){return function(){return L.apply(V,arguments)}}function I(L,V){return typeof L==a?L.apply(V&&V[0]||o,V):L}function j(L,V){return L===o?V:L}function D(L,V,Z){f(y(V),function(te){L.addEventListener(te,Z,!1)})}function T(L,V,Z){f(y(V),function(te){L.removeEventListener(te,Z,!1)})}function M(L,V){for(;L;){if(L==V)return!0;L=L.parentNode}return!1}function O(L,V){return L.indexOf(V)>-1}function y(L){return L.trim().split(/\s+/g)}function C(L,V,Z){if(L.indexOf&&!Z)return L.indexOf(V);for(var te=0;te<L.length;){if(Z&&L[te][Z]==V||!Z&&L[te]===V)return te;te++}return-1}function x(L){return Array.prototype.slice.call(L,0)}function S(L,V,Z){for(var te=[],fe=[],ke=0;ke<L.length;){var qe=V?L[ke][V]:L[ke];C(fe,qe)<0&&te.push(L[ke]),fe[ke]=qe,ke++}return Z&&(V?te=te.sort(function(st,ei){return st[V]>ei[V]}):te=te.sort()),te}function k(L,V){for(var Z,te,fe=V[0].toUpperCase()+V.slice(1),ke=0;ke<s.length;){if(Z=s[ke],te=Z?Z+fe:V,te in L)return te;ke++}return o}var z=1;function q(){return z++}function X(L){var V=L.ownerDocument||L;return V.defaultView||V.parentWindow||e}var $=/mobile|tablet|ip(ad|hone|od)|android/i,ne="ontouchstart"in e,_=k(e,"PointerEvent")!==o,se=ne&&$.test(navigator.userAgent),K="touch",me="pen",De="mouse",he="kinect",je=25,ze=1,Pe=2,Le=4,ie=8,Me=1,Fe=2,Ie=4,Ve=8,ue=16,be=Fe|Ie,Je=Ve|ue,nt=be|Je,At=["x","y"],zt=["clientX","clientY"];function yt(L,V){var Z=this;this.manager=L,this.callback=V,this.element=L.element,this.target=L.options.inputTarget,this.domHandler=function(te){I(L.options.enable,[L])&&Z.handler(te)},this.init()}yt.prototype={handler:function(){},init:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(X(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(X(this.element),this.evWin,this.domHandler)}};function gi(L){var V,Z=L.options.inputClass;return Z?V=Z:_?V=mn:se?V=Qn:ne?V=vn:V=Mi,new V(L,Fi)}function Fi(L,V,Z){var te=Z.pointers.length,fe=Z.changedPointers.length,ke=V&ze&&te-fe===0,qe=V&(Le|ie)&&te-fe===0;Z.isFirst=!!ke,Z.isFinal=!!qe,ke&&(L.session={}),Z.eventType=V,Jt(L,Z),L.emit("hammer.input",Z),L.recognize(Z),L.session.prevInput=Z}function Jt(L,V){var Z=L.session,te=V.pointers,fe=te.length;Z.firstInput||(Z.firstInput=vi(V)),fe>1&&!Z.firstMultiple?Z.firstMultiple=vi(V):fe===1&&(Z.firstMultiple=!1);var ke=Z.firstInput,qe=Z.firstMultiple,st=qe?qe.center:ke.center,ei=V.center=Ii(te);V.timeStamp=h(),V.deltaTime=V.timeStamp-ke.timeStamp,V.angle=li(st,ei),V.distance=ai(st,ei),Vi(Z,V),V.offsetDirection=ft(V.deltaX,V.deltaY);var Vt=Wi(V.deltaTime,V.deltaX,V.deltaY);V.overallVelocityX=Vt.x,V.overallVelocityY=Vt.y,V.overallVelocity=c(Vt.x)>c(Vt.y)?Vt.x:Vt.y,V.scale=qe?Io(qe.pointers,te):1,V.rotation=qe?tr(qe.pointers,te):0,V.maxPointers=Z.prevInput?V.pointers.length>Z.prevInput.maxPointers?V.pointers.length:Z.prevInput.maxPointers:V.pointers.length,Hn(Z,V);var ti=L.element;M(V.srcEvent.target,ti)&&(ti=V.srcEvent.target),V.target=ti}function Vi(L,V){var Z=V.center,te=L.offsetDelta||{},fe=L.prevDelta||{},ke=L.prevInput||{};(V.eventType===ze||ke.eventType===Le)&&(fe=L.prevDelta={x:ke.deltaX||0,y:ke.deltaY||0},te=L.offsetDelta={x:Z.x,y:Z.y}),V.deltaX=fe.x+(Z.x-te.x),V.deltaY=fe.y+(Z.y-te.y)}function Hn(L,V){var Z=L.lastInterval||V,te=V.timeStamp-Z.timeStamp,fe,ke,qe,st;if(V.eventType!=ie&&(te>je||Z.velocity===o)){var ei=V.deltaX-Z.deltaX,Vt=V.deltaY-Z.deltaY,ti=Wi(te,ei,Vt);ke=ti.x,qe=ti.y,fe=c(ti.x)>c(ti.y)?ti.x:ti.y,st=ft(ei,Vt),L.lastInterval=V}else fe=Z.velocity,ke=Z.velocityX,qe=Z.velocityY,st=Z.direction;V.velocity=fe,V.velocityX=ke,V.velocityY=qe,V.direction=st}function vi(L){for(var V=[],Z=0;Z<L.pointers.length;)V[Z]={clientX:l(L.pointers[Z].clientX),clientY:l(L.pointers[Z].clientY)},Z++;return{timeStamp:h(),pointers:V,center:Ii(V),deltaX:L.deltaX,deltaY:L.deltaY}}function Ii(L){var V=L.length;if(V===1)return{x:l(L[0].clientX),y:l(L[0].clientY)};for(var Z=0,te=0,fe=0;fe<V;)Z+=L[fe].clientX,te+=L[fe].clientY,fe++;return{x:l(Z/V),y:l(te/V)}}function Wi(L,V,Z){return{x:V/L||0,y:Z/L||0}}function ft(L,V){return L===V?Me:c(L)>=c(V)?L<0?Fe:Ie:V<0?Ve:ue}function ai(L,V,Z){Z||(Z=At);var te=V[Z[0]]-L[Z[0]],fe=V[Z[1]]-L[Z[1]];return Math.sqrt(te*te+fe*fe)}function li(L,V,Z){Z||(Z=At);var te=V[Z[0]]-L[Z[0]],fe=V[Z[1]]-L[Z[1]];return Math.atan2(fe,te)*180/Math.PI}function tr(L,V){return li(V[1],V[0],zt)+li(L[1],L[0],zt)}function Io(L,V){return ai(V[0],V[1],zt)/ai(L[0],L[1],zt)}var Nn={mousedown:ze,mousemove:Pe,mouseup:Le},ss="mousedown",Fn="mousemove mouseup";function Mi(){this.evEl=ss,this.evWin=Fn,this.pressed=!1,yt.apply(this,arguments)}w(Mi,yt,{handler:function(L){var V=Nn[L.type];V&ze&&L.button===0&&(this.pressed=!0),V&Pe&&L.which!==1&&(V=Le),this.pressed&&(V&Le&&(this.pressed=!1),this.callback(this.manager,V,{pointers:[L],changedPointers:[L],pointerType:De,srcEvent:L}))}});var Ai={pointerdown:ze,pointermove:Pe,pointerup:Le,pointercancel:ie,pointerout:ie},Vn={2:K,3:me,4:De,5:he},Wn="pointerdown",Ki="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Wn="MSPointerDown",Ki="MSPointerMove MSPointerUp MSPointerCancel");function mn(){this.evEl=Wn,this.evWin=Ki,yt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}w(mn,yt,{handler:function(L){var V=this.store,Z=!1,te=L.type.toLowerCase().replace("ms",""),fe=Ai[te],ke=Vn[L.pointerType]||L.pointerType,qe=ke==K,st=C(V,L.pointerId,"pointerId");fe&ze&&(L.button===0||qe)?st<0&&(V.push(L),st=V.length-1):fe&(Le|ie)&&(Z=!0),!(st<0)&&(V[st]=L,this.callback(this.manager,fe,{pointers:V,changedPointers:[L],pointerType:ke,srcEvent:L}),Z&&V.splice(st,1))}});var gn={touchstart:ze,touchmove:Pe,touchend:Le,touchcancel:ie},Mo="touchstart",So="touchstart touchmove touchend touchcancel";function Gn(){this.evTarget=Mo,this.evWin=So,this.started=!1,yt.apply(this,arguments)}w(Gn,yt,{handler:function(L){var V=gn[L.type];if(V===ze&&(this.started=!0),!!this.started){var Z=_i.call(this,L,V);V&(Le|ie)&&Z[0].length-Z[1].length===0&&(this.started=!1),this.callback(this.manager,V,{pointers:Z[0],changedPointers:Z[1],pointerType:K,srcEvent:L})}}});function _i(L,V){var Z=x(L.touches),te=x(L.changedTouches);return V&(Le|ie)&&(Z=S(Z.concat(te),"identifier",!0)),[Z,te]}var rs={touchstart:ze,touchmove:Pe,touchend:Le,touchcancel:ie},Gi="touchstart touchmove touchend touchcancel";function Qn(){this.evTarget=Gi,this.targetIds={},yt.apply(this,arguments)}w(Qn,yt,{handler:function(L){var V=rs[L.type],Z=ir.call(this,L,V);Z&&this.callback(this.manager,V,{pointers:Z[0],changedPointers:Z[1],pointerType:K,srcEvent:L})}});function ir(L,V){var Z=x(L.touches),te=this.targetIds;if(V&(ze|Pe)&&Z.length===1)return te[Z[0].identifier]=!0,[Z,Z];var fe,ke,qe=x(L.changedTouches),st=[],ei=this.target;if(ke=Z.filter(function(Vt){return M(Vt.target,ei)}),V===ze)for(fe=0;fe<ke.length;)te[ke[fe].identifier]=!0,fe++;for(fe=0;fe<qe.length;)te[qe[fe].identifier]&&st.push(qe[fe]),V&(Le|ie)&&delete te[qe[fe].identifier],fe++;if(st.length)return[S(ke.concat(st),"identifier",!0),st]}var nr=2500,Do=25;function vn(){yt.apply(this,arguments);var L=P(this.handler,this);this.touch=new Qn(this.manager,L),this.mouse=new Mi(this.manager,L),this.primaryTouch=null,this.lastTouches=[]}w(vn,yt,{handler:function(L,V,Z){var te=Z.pointerType==K,fe=Z.pointerType==De;if(!(fe&&Z.sourceCapabilities&&Z.sourceCapabilities.firesTouchEvents)){if(te)jt.call(this,V,Z);else if(fe&&or.call(this,Z))return;this.callback(L,V,Z)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function jt(L,V){L&ze?(this.primaryTouch=V.changedPointers[0].identifier,as.call(this,V)):L&(Le|ie)&&as.call(this,V)}function as(L){var V=L.changedPointers[0];if(V.identifier===this.primaryTouch){var Z={x:V.clientX,y:V.clientY};this.lastTouches.push(Z);var te=this.lastTouches,fe=function(){var ke=te.indexOf(Z);ke>-1&&te.splice(ke,1)};setTimeout(fe,nr)}}function or(L){for(var V=L.srcEvent.clientX,Z=L.srcEvent.clientY,te=0;te<this.lastTouches.length;te++){var fe=this.lastTouches[te],ke=Math.abs(V-fe.x),qe=Math.abs(Z-fe.y);if(ke<=Do&&qe<=Do)return!0}return!1}var ls=k(r.style,"touchAction"),cs=ls!==o,hs="compute",Lt="auto",ko="manipulation",Qi="none",An="pan-x",yn="pan-y",Un=rr();function Rt(L,V){this.manager=L,this.set(V)}Rt.prototype={set:function(L){L==hs&&(L=this.compute()),cs&&this.manager.element.style&&Un[L]&&(this.manager.element.style[ls]=L),this.actions=L.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var L=[];return f(this.manager.recognizers,function(V){I(V.options.enable,[V])&&(L=L.concat(V.getTouchAction()))}),sr(L.join(" "))},preventDefaults:function(L){var V=L.srcEvent,Z=L.offsetDirection;if(this.manager.session.prevented){V.preventDefault();return}var te=this.actions,fe=O(te,Qi)&&!Un[Qi],ke=O(te,yn)&&!Un[yn],qe=O(te,An)&&!Un[An];if(fe){var st=L.pointers.length===1,ei=L.distance<2,Vt=L.deltaTime<250;if(st&&ei&&Vt)return}if(!(qe&&ke)&&(fe||ke&&Z&be||qe&&Z&Je))return this.preventSrc(V)},preventSrc:function(L){this.manager.session.prevented=!0,L.preventDefault()}};function sr(L){if(O(L,Qi))return Qi;var V=O(L,An),Z=O(L,yn);return V&&Z?Qi:V||Z?V?An:yn:O(L,ko)?ko:Lt}function rr(){if(!cs)return!1;var L={},V=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Z){L[Z]=V?e.CSS.supports("touch-action",Z):!0}),L}var Xn=1,Qt=2,$i=4,Kt=8,ci=Kt,Si=16,Pt=32;function _t(L){this.options=g({},this.defaults,L||{}),this.id=q(),this.manager=null,this.options.enable=j(this.options.enable,!0),this.state=Xn,this.simultaneous={},this.requireFail=[]}_t.prototype={defaults:{},set:function(L){return g(this.options,L),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(L){if(u(L,"recognizeWith",this))return this;var V=this.simultaneous;return L=Yn(L,this),V[L.id]||(V[L.id]=L,L.recognizeWith(this)),this},dropRecognizeWith:function(L){return u(L,"dropRecognizeWith",this)?this:(L=Yn(L,this),delete this.simultaneous[L.id],this)},requireFailure:function(L){if(u(L,"requireFailure",this))return this;var V=this.requireFail;return L=Yn(L,this),C(V,L)===-1&&(V.push(L),L.requireFailure(this)),this},dropRequireFailure:function(L){if(u(L,"dropRequireFailure",this))return this;L=Yn(L,this);var V=C(this.requireFail,L);return V>-1&&this.requireFail.splice(V,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(L){return!!this.simultaneous[L.id]},emit:function(L){var V=this,Z=this.state;function te(fe){V.manager.emit(fe,L)}Z<Kt&&te(V.options.event+ds(Z)),te(V.options.event),L.additionalEvent&&te(L.additionalEvent),Z>=Kt&&te(V.options.event+ds(Z))},tryEmit:function(L){if(this.canEmit())return this.emit(L);this.state=Pt},canEmit:function(){for(var L=0;L<this.requireFail.length;){if(!(this.requireFail[L].state&(Pt|Xn)))return!1;L++}return!0},recognize:function(L){var V=g({},L);if(!I(this.options.enable,[this,V])){this.reset(),this.state=Pt;return}this.state&(ci|Si|Pt)&&(this.state=Xn),this.state=this.process(V),this.state&(Qt|$i|Kt|Si)&&this.tryEmit(V)},process:function(L){},getTouchAction:function(){},reset:function(){}};function ds(L){return L&Si?"cancel":L&Kt?"end":L&$i?"move":L&Qt?"start":""}function us(L){return L==ue?"down":L==Ve?"up":L==Fe?"left":L==Ie?"right":""}function Yn(L,V){var Z=V.manager;return Z?Z.get(L):L}function $t(){_t.apply(this,arguments)}w($t,_t,{defaults:{pointers:1},attrTest:function(L){var V=this.options.pointers;return V===0||L.pointers.length===V},process:function(L){var V=this.state,Z=L.eventType,te=V&(Qt|$i),fe=this.attrTest(L);return te&&(Z&ie||!fe)?V|Si:te||fe?Z&Le?V|Kt:V&Qt?V|$i:Qt:Pt}});function qn(){$t.apply(this,arguments),this.pX=null,this.pY=null}w(qn,$t,{defaults:{event:"pan",threshold:10,pointers:1,direction:nt},getTouchAction:function(){var L=this.options.direction,V=[];return L&be&&V.push(yn),L&Je&&V.push(An),V},directionTest:function(L){var V=this.options,Z=!0,te=L.distance,fe=L.direction,ke=L.deltaX,qe=L.deltaY;return fe&V.direction||(V.direction&be?(fe=ke===0?Me:ke<0?Fe:Ie,Z=ke!=this.pX,te=Math.abs(L.deltaX)):(fe=qe===0?Me:qe<0?Ve:ue,Z=qe!=this.pY,te=Math.abs(L.deltaY))),L.direction=fe,Z&&te>V.threshold&&fe&V.direction},attrTest:function(L){return $t.prototype.attrTest.call(this,L)&&(this.state&Qt||!(this.state&Qt)&&this.directionTest(L))},emit:function(L){this.pX=L.deltaX,this.pY=L.deltaY;var V=us(L.direction);V&&(L.additionalEvent=this.options.event+V),this._super.emit.call(this,L)}});function en(){$t.apply(this,arguments)}w(en,$t,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Qi]},attrTest:function(L){return this._super.attrTest.call(this,L)&&(Math.abs(L.scale-1)>this.options.threshold||this.state&Qt)},emit:function(L){if(L.scale!==1){var V=L.scale<1?"in":"out";L.additionalEvent=this.options.event+V}this._super.emit.call(this,L)}});function bn(){_t.apply(this,arguments),this._timer=null,this._input=null}w(bn,_t,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Lt]},process:function(L){var V=this.options,Z=L.pointers.length===V.pointers,te=L.distance<V.threshold,fe=L.deltaTime>V.time;if(this._input=L,!te||!Z||L.eventType&(Le|ie)&&!fe)this.reset();else if(L.eventType&ze)this.reset(),this._timer=d(function(){this.state=ci,this.tryEmit()},V.time,this);else if(L.eventType&Le)return ci;return Pt},reset:function(){clearTimeout(this._timer)},emit:function(L){this.state===ci&&(L&&L.eventType&Le?this.manager.emit(this.options.event+"up",L):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}});function Ui(){$t.apply(this,arguments)}w(Ui,$t,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Qi]},attrTest:function(L){return this._super.attrTest.call(this,L)&&(Math.abs(L.rotation)>this.options.threshold||this.state&Qt)}});function Zn(){$t.apply(this,arguments)}w(Zn,$t,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:be|Je,pointers:1},getTouchAction:function(){return qn.prototype.getTouchAction.call(this)},attrTest:function(L){var V=this.options.direction,Z;return V&(be|Je)?Z=L.overallVelocity:V&be?Z=L.overallVelocityX:V&Je&&(Z=L.overallVelocityY),this._super.attrTest.call(this,L)&&V&L.offsetDirection&&L.distance>this.options.threshold&&L.maxPointers==this.options.pointers&&c(Z)>this.options.velocity&&L.eventType&Le},emit:function(L){var V=us(L.offsetDirection);V&&this.manager.emit(this.options.event+V,L),this.manager.emit(this.options.event,L)}});function wn(){_t.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}w(wn,_t,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ko]},process:function(L){var V=this.options,Z=L.pointers.length===V.pointers,te=L.distance<V.threshold,fe=L.deltaTime<V.time;if(this.reset(),L.eventType&ze&&this.count===0)return this.failTimeout();if(te&&fe&&Z){if(L.eventType!=Le)return this.failTimeout();var ke=this.pTime?L.timeStamp-this.pTime<V.interval:!0,qe=!this.pCenter||ai(this.pCenter,L.center)<V.posThreshold;this.pTime=L.timeStamp,this.pCenter=L.center,!qe||!ke?this.count=1:this.count+=1,this._input=L;var st=this.count%V.taps;if(st===0)return this.hasRequireFailures()?(this._timer=d(function(){this.state=ci,this.tryEmit()},V.interval,this),Qt):ci}return Pt},failTimeout:function(){return this._timer=d(function(){this.state=Pt},this.options.interval,this),Pt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ci&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function yi(L,V){return V=V||{},V.recognizers=j(V.recognizers,yi.defaults.preset),new zo(L,V)}yi.VERSION="2.0.7",yi.defaults={domEvents:!1,touchAction:hs,enable:!0,inputTarget:null,inputClass:null,preset:[[Ui,{enable:!1}],[en,{enable:!1},["rotate"]],[Zn,{direction:be}],[qn,{direction:be},["swipe"]],[wn],[wn,{event:"doubletap",taps:2},["tap"]],[bn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ar=1,ps=2;function zo(L,V){this.options=g({},yi.defaults,V||{}),this.options.inputTarget=this.options.inputTarget||L,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=L,this.input=gi(this),this.touchAction=new Rt(this,this.options.touchAction),Jn(this,!0),f(this.options.recognizers,function(Z){var te=this.add(new Z[0](Z[1]));Z[2]&&te.recognizeWith(Z[2]),Z[3]&&te.requireFailure(Z[3])},this)}zo.prototype={set:function(L){return g(this.options,L),L.touchAction&&this.touchAction.update(),L.inputTarget&&(this.input.destroy(),this.input.target=L.inputTarget,this.input.init()),this},stop:function(L){this.session.stopped=L?ps:ar},recognize:function(L){var V=this.session;if(!V.stopped){this.touchAction.preventDefaults(L);var Z,te=this.recognizers,fe=V.curRecognizer;(!fe||fe&&fe.state&ci)&&(fe=V.curRecognizer=null);for(var ke=0;ke<te.length;)Z=te[ke],V.stopped!==ps&&(!fe||Z==fe||Z.canRecognizeWith(fe))?Z.recognize(L):Z.reset(),!fe&&Z.state&(Qt|$i|Kt)&&(fe=V.curRecognizer=Z),ke++}},get:function(L){if(L instanceof _t)return L;for(var V=this.recognizers,Z=0;Z<V.length;Z++)if(V[Z].options.event==L)return V[Z];return null},add:function(L){if(u(L,"add",this))return this;var V=this.get(L.options.event);return V&&this.remove(V),this.recognizers.push(L),L.manager=this,this.touchAction.update(),L},remove:function(L){if(u(L,"remove",this))return this;if(L=this.get(L),L){var V=this.recognizers,Z=C(V,L);Z!==-1&&(V.splice(Z,1),this.touchAction.update())}return this},on:function(L,V){if(L!==o&&V!==o){var Z=this.handlers;return f(y(L),function(te){Z[te]=Z[te]||[],Z[te].push(V)}),this}},off:function(L,V){if(L!==o){var Z=this.handlers;return f(y(L),function(te){V?Z[te]&&Z[te].splice(C(Z[te],V),1):delete Z[te]}),this}},emit:function(L,V){this.options.domEvents&&lr(L,V);var Z=this.handlers[L]&&this.handlers[L].slice();if(!(!Z||!Z.length)){V.type=L,V.preventDefault=function(){V.srcEvent.preventDefault()};for(var te=0;te<Z.length;)Z[te](V),te++}},destroy:function(){this.element&&Jn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Jn(L,V){var Z=L.element;if(Z.style){var te;f(L.options.cssProps,function(fe,ke){te=k(Z.style,ke),V?(L.oldCssProps[te]=Z.style[te],Z.style[te]=fe):Z.style[te]=L.oldCssProps[te]||""}),V||(L.oldCssProps={})}}function lr(L,V){var Z=t.createEvent("Event");Z.initEvent(L,!0,!0),Z.gesture=V,V.target.dispatchEvent(Z)}g(yi,{INPUT_START:ze,INPUT_MOVE:Pe,INPUT_END:Le,INPUT_CANCEL:ie,STATE_POSSIBLE:Xn,STATE_BEGAN:Qt,STATE_CHANGED:$i,STATE_ENDED:Kt,STATE_RECOGNIZED:ci,STATE_CANCELLED:Si,STATE_FAILED:Pt,DIRECTION_NONE:Me,DIRECTION_LEFT:Fe,DIRECTION_RIGHT:Ie,DIRECTION_UP:Ve,DIRECTION_DOWN:ue,DIRECTION_HORIZONTAL:be,DIRECTION_VERTICAL:Je,DIRECTION_ALL:nt,Manager:zo,Input:yt,TouchAction:Rt,TouchInput:Qn,MouseInput:Mi,PointerEventInput:mn,TouchMouseInput:vn,SingleTouchInput:Gn,Recognizer:_t,AttrRecognizer:$t,Tap:wn,Pan:qn,Swipe:Zn,Pinch:en,Rotate:Ui,Press:bn,on:D,off:T,each:f,merge:A,extend:v,assign:g,inherit:w,bindFn:P,prefixed:k});var cr=typeof e<"u"?e:typeof self<"u"?self:{};cr.Hammer=yi,typeof o=="function"&&o.amd?o(function(){return yi}):i.exports?i.exports=yi:e[n]=yi})(window,document,"Hammer")})(YA);class Dh{constructor(e,t){p(this,"width"),p(this,"height"),p(this,"containerDom"),p(this,"hooks",new Mt),p(this,"canvas",document.createElement("canvas")),p(this,"config"),p(this,"state",{enabled:!1}),p(this,"five"),p(this,"scale"),p(this,"offset",{x:0,y:0}),p(this,"context"),p(this,"renderCenter",new R),p(this,"hammer"),p(this,"offsetRange"),p(this,"isPanning",!1),p(this,"imageData",new ImageData(1,1)),p(this,"onPanstart",()=>{this.isPanning=!0,this.canvas.style.boxShadow="0 2px 30px 0 rgba(0,0,0,0.20)"}),p(this,"onPan",l=>{if(!this.isPanning||!this.offsetRange||this.hooks.emit("wantsPanGesture",l))return;const{translateX:c,translateY:h}=this.getPanOffset(l,this.offsetRange);this.canvas.style.transform=`translate3d(${c}px, ${h}px, 100px)`}),p(this,"onPanend",l=>{if(this.isPanning=!1,this.canvas.style.boxShadow="none",!this.offsetRange)return;const{translateX:c,translateY:h}=this.getPanOffset(l,this.offsetRange);this.canvas.style.transform=`translate3d(${c}px, ${h}px, 100px)`,this.offset={x:c,y:h}});var n,o,s,r;if(!e.renderer){console.error("Five Render 未初始化");return}this.five=e,this.scale=(n=t==null?void 0:t.scale)!=null?n:2,this.width=(o=t==null?void 0:t.width)!=null?o:190,this.height=(r=(s=t==null?void 0:t.height)!=null?s:t==null?void 0:t.width)!=null?r:190,this.config={dragEnabled:(t==null?void 0:t.dragEnabled)||!1,autoFixPCPosition:(t==null?void 0:t.autoFixPCPosition)||!1,initialPosition:(t==null?void 0:t.initialPosition)||{left:"0",top:"0"},skipPanorama:(t==null?void 0:t.skipPanorama)||!1};const a=this.canvas.getContext("2d");if(!a)throw new Error("CANNOT CREATE CONTEXT2D");this.context=a,this.config.dragEnabled&&(this.hammer=new Br(this.canvas),this.hammer.on("pan",this.onPan),this.hammer.on("panstart",this.onPanstart),this.hammer.on("panend",this.onPanend)),this.initStyle()}enable(){if(!this.state.enabled)return this.state.enabled=!0,this.containerDom&&this._appendTo(this.containerDom),this}disable(){if(this.state.enabled)return this.state.enabled=!1,this.canvas.style.visibility="hidden",this.canvas.remove(),this}dispose(){var e;this.clear(),this.disable(),(e=this.hammer)==null||e.destroy()}appendTo(e){var t;return this.containerDom&&((t=this.containerDom)==null||t.removeChild(this.canvas)),this.containerDom=e,this.state.enabled&&this._appendTo(e),this}clear(){var e;return(e=this.context)==null||e.clearRect(0,0,this.canvas.width,this.canvas.height),this}renderWithPoint(e){this.containerDom&&this.state.enabled&&(this.renderCenter=e,this.render(),this.config.autoFixPCPosition&&this.autoFixPCPosition())}renderWithScreenPoint(e){this.containerDom&&this.state.enabled&&(this.renderCenter=e,this.render(),this.config.autoFixPCPosition&&this.autoFixPCPosition())}resetOffset(){this.offset={x:0,y:0},this.canvas.style.transform="translate3d(0px, 0px, 100px)"}updateScale(e){e>0&&(this.scale=e)}updateSize(e,t){if(e>0){this.width=e,this.height=t||e;const n=1;this.canvas.setAttribute("width",(this.width*n).toString()),this.canvas.setAttribute("height",(this.height*n).toString()),this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px";const o=Math.floor(this.width*n),s=Math.floor(this.height*n);this.imageData=new ImageData(o,s),this.clear()}}render(){if(!this.five.renderer||!this.containerDom)return;const{scale:e,context:t,width:n,height:o}=this,s=this.five.renderer.getSize(new Qe),[r,a]=(()=>{if(this.renderCenter.isVector3){const f=this.renderCenter.clone().project(this.five.camera);return[(f.x+1)/2*s.x,(f.y+1)/2*s.y]}else return[this.renderCenter.x,s.y-this.renderCenter.y]})(),l=1,c=n/e,h=o/e,d=l*e,u=new Map;this.five.scene.traverse(f=>{f.disableGetPixel===!0&&(u.set(f,f.visible),f.visible=!1)});try{const f=this.five.getPixels({x:r-c/2,y:a-c/2,width:c,height:h,pixelRatio:d,skipPanorama:this.config.skipPanorama});u.forEach((A,w)=>{w.visible=A});const m=Math.floor(n*l),g=Math.floor(o*l),v=m*g*4;if(!f||f.length!==v){console.warn("Magnifier: Invalid pixel data",{pixelsLength:f==null?void 0:f.length,expectedLength:v,imageWidth:m,imageHeight:g});return}qA(f,m,g),(this.imageData.width!==m||this.imageData.height!==g)&&(this.imageData=new ImageData(m,g)),this.imageData.data.length!==f.length&&(console.warn("Magnifier: ImageData size mismatch",{imageDataLength:this.imageData.data.length,pixelsLength:f.length,imageWidth:m,imageHeight:g}),this.imageData=new ImageData(m,g));try{this.imageData.data.set(f)}catch(A){console.error("Magnifier: Failed to set pixel data",{error:A,imageDataLength:this.imageData.data.length,pixelsLength:f.length,imageWidth:m,imageHeight:g});return}t.putImageData(this.imageData,0,0),this.canvas.style.visibility="visible"}catch(f){console.error("Magnifier render error:",f),u.forEach((m,g)=>{g.visible=m})}}getRenderCenter(){return this.renderCenter}_appendTo(e){if(this.resetOffset(),e.appendChild(this.canvas),!this.offsetRange){const t=this.canvas.getBoundingClientRect(),n=e.getBoundingClientRect(),o=n.right-t.right,s=n.bottom-t.bottom,r=n.left-t.left,a=n.top-t.top;this.offsetRange={min:{x:r,y:a},max:{x:o,y:s}}}}autoFixPCPosition(){if(!this.containerDom)return;const{width:e,height:t}=this,{clientWidth:n,clientHeight:o}=this.containerDom,[s,r,a]=(()=>{if(this.renderCenter.isVector3){const l=this.renderCenter.clone().project(this.five.camera);return[(l.x+1)/2*n,-(l.x-1)/2*n,-(l.y-1)/2*o]}else return[this.renderCenter.x,n-this.renderCenter.x,this.renderCenter.y]})();s<183?(this.canvas.style.top=-t/2+"px",this.canvas.style.left="90px"):a<183?(this.canvas.style.top="90px",this.canvas.style.left=-e/2+"px"):r<183?(this.canvas.style.top=-t/2+"px",this.canvas.style.left=-e-90+"px"):(this.canvas.style.left=-e/2+"px",this.canvas.style.top=-t-90+"px"),this.canvas.style.transform=`translate3d(${s}px, ${a}px, 10px)`,this.offset={x:s,y:a}}initStyle(){const e=this.canvas;e.classList.add("five-plugin__magnifier"),e.style.position="absolute",e.style.pointerEvents=this.config.dragEnabled?"all":"none",e.style.borderRadius="50%",e.style.zIndex="99";const t=1;e.setAttribute("width",(this.width*t).toString()),e.setAttribute("height",(this.height*t).toString()),e.style.border="2px solid rgba(255,255,255,0.20)",e.style.width=this.width+"px",e.style.height=this.height+"px",e.style.top=this.config.initialPosition.top,e.style.left=this.config.initialPosition.left,e.style.transform="translate(0,0,100px)",e.style.visibility="hidden",this.config.dragEnabled&&(this.canvas.style.cursor="pointer")}getPanOffset(e,t){const{min:{x:n,y:o},max:{x:s,y:r}}=t,a=this.offset.x+e.deltaX,l=this.offset.y+e.deltaY,c=Math.min(Math.max(a,n),s),h=Math.min(Math.max(l,o),r);return{translateX:c,translateY:h}}}function Pa(i,e,t){if(!i||e<0||t<0||e>=i.length||t>=i.length){console.warn("exchange: Index out of bounds",{arrayLength:i==null?void 0:i.length,index1:e,index2:t});return}const n=i[e],o=i[t];i[e]=o,i[t]=n}function qA(i,e,t){if(!i||e<=0||t<=0){console.warn("flipPixelsY: Invalid parameters",{pixelsLength:i==null?void 0:i.length,width:e,height:t});return}const n=e*t*4;if(i.length<n){console.warn("flipPixelsY: Pixel array too small",{actualLength:i.length,expectedLength:n,width:e,height:t});return}const o=t/2;for(let s=1;s<=o;s++){const r=t-(s-1);for(let a=1;a<=e;a++){const l=(s-1)*e+a-1,c=(r-1)*e+a-1,h=l*4,d=c*4;h+3<i.length&&d+3<i.length&&(Pa(i,h+0,d+0),Pa(i,h+1,d+1),Pa(i,h+2,d+2),Pa(i,h+3,d+3))}}}function ZA(i,e){const{offsetWidth:t,offsetHeight:n}=e,{top:o,left:s}=e.getBoundingClientRect();return new Qe().set((i.x-s)/t*2-1,-(i.y-o)/n*2+1)}function qg(i,e){const{offsetWidth:t,offsetHeight:n}=e;return new Qe().set(i.x/t*2-1,-i.y/n*2+1)}var Ln=function(i){fi.call(this),this.element=i,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&e.element.parentNode!==null&&e.element.remove()})})};Ln.prototype=Object.create(fi.prototype);Ln.prototype.constructor=Ln;var Xa=function(i){Ln.call(this,i)};Xa.prototype=Object.create(Ln.prototype);Xa.prototype.constructor=Xa;let JA=function(i){let e=this,t,n,o,s,r=new Xe,a={camera:{fov:0,style:""},objects:new Map},l=document.createElement("div");l.style.overflow="hidden",this.domElement=l;let c=document.createElement("div");c.style.WebkitTransformStyle="preserve-3d",c.style.transformStyle="preserve-3d",c.style.pointerEvents="none",l.appendChild(c),this.getSize=function(){return{width:t,height:n}},this.setSize=function(g,v){t=g,n=v,o=t/2,s=n/2,l.style.width=g+"px",l.style.height=v+"px",c.style.width=g+"px",c.style.height=v+"px"};function h(g){return Math.abs(g)<1e-10?0:g}function d(g){let v=g.elements;return"matrix3d("+h(v[0])+","+h(-v[1])+","+h(v[2])+","+h(v[3])+","+h(v[4])+","+h(-v[5])+","+h(v[6])+","+h(v[7])+","+h(v[8])+","+h(-v[9])+","+h(v[10])+","+h(v[11])+","+h(v[12])+","+h(-v[13])+","+h(v[14])+","+h(v[15])+")"}function u(g,v){let A=g.elements;return"translate(-50%,-50%)"+("matrix3d("+h(A[0])+","+h(A[1])+","+h(A[2])+","+h(A[3])+","+h(-A[4])+","+h(-A[5])+","+h(-A[6])+","+h(-A[7])+","+h(A[8])+","+h(A[9])+","+h(A[10])+","+h(A[11])+","+h(A[12])+","+h(A[13])+","+h(A[14])+","+h(A[15])+")")}function f(g){var v;if(g.isCSS3DObject){const A=(v=g.mode)!=null?v:"front";(!i||A===i)&&(g.element.style.display="none")}for(let A=0,w=g.children.length;A<w;A++)f(g.children[A])}function m(g,v,A,w,P){var I;if(g.visible===!1){f(g);return}if(g.isCSS3DObject){const j=(I=g.mode)!=null?I:"front";if(i&&j!==i)return;g.flag=P;const D=g.layers.test(A.layers)===!0,T=g.element;if(T.style.display=D===!0?"":"none",D){g.onBeforeRender(e,v,A);let M;g.isCSS3DSprite?(r.copy(A.matrixWorldInverse),r.transpose(),r.copyPosition(g.matrixWorld),r.scale(g.scale),r.elements[3]=0,r.elements[7]=0,r.elements[11]=0,r.elements[15]=1,M=u(r)):M=u(g.matrixWorld);let O=a.objects.get(g);if(O===void 0||O.style!==M){T.style.WebkitTransform=M,T.style.transform=M;let y={style:M};a.objects.set(g,y)}T.style.display=g.visible?"":"none",T.parentNode!==c&&c.appendChild(T),g.onAfterRender(e,v,A)}}for(let j=0,D=g.children.length;j<D;j++)m(g.children[j],v,A,w,P)}this.render=function(g,v){let A=v.projectionMatrix.elements[5]*s;if(a.camera.fov!==A&&(v.isPerspectiveCamera?(l.style.WebkitPerspective=A+"px",l.style.perspective=A+"px"):(l.style.WebkitPerspective="",l.style.perspective=""),a.camera.fov=A),g.autoUpdate===!0&&g.updateMatrixWorld(),v.parent===null&&v.updateMatrixWorld(),v.isOrthographicCamera)var w=-(v.right+v.left)/2,P=(v.top+v.bottom)/2;let I=v.isOrthographicCamera?"scale("+A+")translate("+h(w)+"px,"+h(P)+"px)"+d(v.matrixWorldInverse):"translateZ("+A+"px)"+d(v.matrixWorldInverse),j=I+"translate("+o+"px,"+s+"px)";a.camera.style!==j&&(c.style.WebkitTransform=j,c.style.transform=j,a.camera.style=j);const D=g.uuid+"_"+performance.now().toString();m(g,g,v,I,D),a.objects.forEach(function(T,M){M.flag!==D&&(M.element.remove(),a.objects.delete(M))})}};function Ls(i,e){const t=Math.round(i);return t%2===0?t:t+(e!=null&&e.floor?-1:1)}function KA(i,e,t=!0){if(!i)return console.error("createResizeObserver: element is undefined"),{observe:()=>{},unobserve:()=>{}};const n=()=>{const s=Ls(i.clientWidth,{floor:!0}),r=Ls(i.clientHeight,{floor:!0});e(s,r)};if(typeof ResizeObserver>"u"||!ResizeObserver)return console.warn("createResizeObserver: ResizeObserver is undefined"),{observe:()=>n(),unobserve:()=>{}};const o=new ResizeObserver(n);return t&&n(),{observe:()=>o.observe(i),unobserve:()=>o.unobserve(i)}}class Ya extends JA{constructor(e){super(e),p(this,"wrapper"),p(this,"domElementWrapper",document.createElement("div")),p(this,"requestAnimationFrameId"),p(this,"resizeDisoper"),this.domElementWrapper.classList.add("ICSS3DRendererWrapper"),this.domElementWrapper.style.position="absolute",this.domElementWrapper.style.top="0",this.domElementWrapper.style.left="0",this.domElementWrapper.style.width="100%",this.domElementWrapper.style.height="100%",this.domElementWrapper.style.userSelect="none",this.domElementWrapper.style.pointerEvents="none",this.domElement.classList.add("ICSS3DRenderer"),this.domElement.style.position="absolute",this.domElement.style.top="0",this.domElement.style.left="0",this.domElement.style.userSelect="none",this.domElement.style.pointerEvents="none",this.domElementWrapper.appendChild(this.domElement)}setWrapper(e){if(!e)throw new Error("CSS3DRenderer: wrapper is required");if((()=>{for(let n=0;n<e.children.length;n++)if(e.children.item(n)===this.domElementWrapper)return!0;return!1})())return;const t=this.wrapper;return t&&t.contains(this.domElementWrapper)&&this.domElementWrapper.remove(),this.appendToElement(e),this.wrapper=e,this}appendToElement(e){e.appendChild(this.domElementWrapper);const t=(s,r)=>this.setSize(s,r),{observe:n,unobserve:o}=KA(this.domElementWrapper,t,!0);n(),this.resizeDisoper=o,this.wrapper=e}renderEveryFrame(e,t){if(this.wrapper||console.warn("wrapper is not find, creating a html element and call setWrapper(wrapper)",this,e),this.requestAnimationFrameId)return;const n=()=>{this.requestAnimationFrameId=requestAnimationFrame(n),e.visible&&this.render(e,t)};n()}stopRender(){this.requestAnimationFrameId&&cancelAnimationFrame(this.requestAnimationFrameId)}dispose(){var e;this.stopRender(),(e=this.resizeDisoper)==null||e.call(this),this.domElementWrapper.remove()}}function Ti(i){return ee(this,null,function*(){return new Promise(e=>{if(Zg(i))e();else{const t=n=>{const o=Ci(i);n===o&&(i.off("modelLoaded",t),e())};i.on("modelLoaded",t)}})})}function Zg(i){var e;return(e=Ci(i))==null?void 0:e.loaded}const cn=document.createElement("div");cn.classList.add("behindFiveElement");cn.style.position="absolute";cn.style.top="0";cn.style.left="0";cn.style.width="100%";cn.style.height="100%";cn.style.pointerEvents="none";function kh(i){var e,t,n,o,s;const r=(s=(t=ec(i.getElement()))!=null?t:ec((e=i.getElement())==null?void 0:e.parentElement))!=null?s:ec((o=(n=i.getElement())==null?void 0:n.parentElement)==null?void 0:o.parentElement),a=r==null?void 0:r.parentElement;if(a)return a.contains(cn)||r.parentElement.insertBefore(cn,r),cn;console.error("Can not find a valid element to insert behindFiveElement. How to fix it: https://github.com/realsee-developer/dnalogel/tree/main/plugins/src/CSS3DRenderPlugin/README.md")}function ec(i){var e;if(!i)return;const t=(e=i.style.position)!=null?e:getComputedStyle(i).position;if(t!=="fixed"&&t!=="absolute"&&t!=="relative")return;const n=getComputedStyle(i),o=n.backgroundColor,s=n.backgroundImage;if(!(o!=="transparent"&&o!=="rgba(0, 0, 0, 0)"&&o!==""||s!=="none"&&s!==""))return i}let pr=[null,null,()=>null];function oa(i){var e;if(pr){if(pr[0]===i)return pr[2];(e=pr[1])==null||e.dispose()}const t=new Ya("front");t.domElementWrapper.style.zIndex="1";const n=new Ya("behind");Ti(i).then(()=>{var s;const r=(s=i.getElement())==null?void 0:s.parentElement,a=kh(i);if(!r)return console.error("initialCSS3DRender: five element is not exist"),()=>null;if(t.appendToElement(r),t.renderEveryFrame(i.scene,i.camera),!a)return console.error("initialCSS3DRender: behindWrapper is not exist"),()=>null;n.appendToElement(a),n.renderEveryFrame(i.scene,i.camera)});const o=()=>{t.dispose(),n.dispose()};return pr=[i,t,o],o}const _A=16777215,$A=16777215,ey=1,ty=.4,zh=.6;class mi extends fi{constructor(){super(),p(this,"name","IObject3D"),p(this,"needsRender")}removeChildren(){for(;this.children.length>0;)this.remove(this.children[0]);return this}add(...e){const t=e.filter(Boolean);return t.length===0?this:super.add(...t)}addIfNotExists(...e){return e.forEach(t=>{this.children.includes(t)||this.add(t)}),this}remove(...e){if(e.length===0)return this;const t=e.filter(Boolean);return super.remove(...t)}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}}function qt(...i){const e=new R;return i.forEach(t=>e.add(t)),e.divideScalar(i.length),e}function jh(i,e){if(!document.getElementById("LineLengthTagStyle")){const n=document.createElement("style");n.id="LineLengthTagStyle",document.head.appendChild(n),n.innerHTML=`
    .LineLengthTag {
      cursor: default;
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: Arial-BoldMT;
      font-weight: BoldMT;
      color: #041066;
      letter-spacing: 0;
      line-height: 20px;
      background-color: #FFFFFF;
      border-radius: 12px;
      padding: 2px 8px;
      left: 50%;
      transform: translate(-50%, -50%);
      word-break: keep-all;
      --distance-scale: 1; /* Default scale if not provided */
      transition: font-size 0.5s ease; /* Smooth transition for font size */
    }
    
    /* sm screen */
    @media screen and (max-width: 499px) {
      .LineLengthTag {
        font-size: calc(12px + (14px - 12px) * var(--distance-scale));
      }
    }
    
    /* md screen */
    @media screen and (min-width: 500px) and (max-width: 929px) {
      .LineLengthTag {
        font-size: calc(12px + (14px - 12px) * var(--distance-scale));
      }
    }
    
    /* lg screen */
    @media screen and (min-width: 930px) and (max-width: 1365px) {
      .LineLengthTag {
        font-size: calc(14px + (16px - 14px) * var(--distance-scale));
      }
    }
    
    /* xl screen */
    @media screen and (min-width: 1366px) and (max-width: 2549px) {
      .LineLengthTag {
        font-size: calc(14px + (16px - 14px) * var(--distance-scale));
      }
    }
    
    /* xxl screen */
    @media screen and (min-width: 2550px) {
      .LineLengthTag {
        font-size: calc(0.875rem + (1rem - 0.875rem) * var(--distance-scale));
      }
    }
    `}const t=e!=null&&e.offsetY?`translateY(${e.offsetY}px)`:"";return`
    <div class="LineLengthTag" style="${t?`transform: translate(-50%, -50%) ${t};`:""}${e!=null&&e.style?" "+e.style:""}">
      ${i}
    </div>
  `}function yo(i){return arguments.length===0?[]:Array.isArray(i)?i:[i]}function Hr(i,e){const t=yo(e).map(n=>i.localToWorld(n.clone()));return Array.isArray(e)?t:t[0]}function iy(i,e){const t=yo(e).map(n=>i.worldToLocal(n.clone()));return Array.isArray(e)?t:t[0]}class Ra extends bA{constructor(...e){super(...e),this.setAttribute("instanceStart",new dt(new Float32Array,3)),this.setAttribute("instanceEnd",new dt(new Float32Array,3))}fromEdgesGeometry(e){if(e.attributes.position.array.length<6)return this.setAttribute("position",new dt(new Float32Array,3)),this.setAttribute("instanceStart",new dt(new Float32Array,3)),this.setAttribute("instanceEnd",new dt(new Float32Array,3)),this;if(e instanceof Ga){const t=new wA(e.attributes.position.array,6,1);this.setPositions(e.attributes.position.array),this.setAttribute("instanceStart",new iu(t,3,0)),this.setAttribute("instanceEnd",new iu(t,3,3))}else super.fromEdgesGeometry(e);return this}toJSON(){return{type:"FiveLineGeometry",attributes:this.attributes}}}function Oi(i){return!Be(i)}function Be(i){return i!=null}class ny extends xA{constructor(e){var t;super(e),p(this,"_three_color"),p(this,"_dashed"),Be(e==null?void 0:e.color)&&(this.three_color=(t=e==null?void 0:e.color)!=null?t:16777215),Object.keys(e).forEach(n=>{["color","dashed","dashScale","dashSize","gapSize","resolution"].includes(n)||n in this&&(this[n]=e[n])}),Object.defineProperties(this,{dashed:{get(){return this._dashed},set(n){this._dashed=n,n?this.defines.USE_DASH="":delete this.defines.USE_DASH,this.needsUpdate=!0}}})}get three_color(){return this._three_color}set three_color(e){this._three_color=e,this.color=e}toJSON(){return{type:"FiveLineMaterial",color:this.color}}}class au extends CA{constructor(e,t){super(e,t)}toJSON(){return{type:"Five_THREE_Line2",geometryAttributes:this.geometry.attributes}}}const tc={uniforms:Lg.merge([Yd.common,Yd.fog,{linewidth:{value:1},resolution:{value:new Qe(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) < dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class Jg extends Bi{constructor(e){super({uniforms:Lg.clone(tc.uniforms),vertexShader:tc.vertexShader,fragmentShader:tc.fragmentShader,clipping:!0}),p(this,"color"),p(this,"dashed"),p(this,"dashScale"),p(this,"dashSize"),p(this,"gapSize"),p(this,"resolution"),this.type="LineMaterial",this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get(){return this.uniforms.diffuse.value},set(t){this.uniforms.diffuse.value=t}},linewidth:{enumerable:!0,get(){return this.uniforms.linewidth.value},set(t){this.uniforms.linewidth.value=t}},dashScale:{enumerable:!0,get(){return this.uniforms.dashScale.value},set(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get(){return this.uniforms.dashSize.value},set(t){this.uniforms.dashSize.value=t}},gapSize:{enumerable:!0,get(){return this.uniforms.gapSize.value},set(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(t){this.uniforms.resolution.value.copy(t)}}}),this.setValues(e)}}Object.assign(Jg.prototype,{isLineMaterial:!0});class oy extends Jg{constructor(e){var t;super(e),p(this,"_three_color"),p(this,"_dashed"),Be(e==null?void 0:e.color)&&(this.three_color=(t=e==null?void 0:e.color)!=null?t:16777215),Object.keys(e).forEach(n=>{["color","dashed","dashScale","dashSize","gapSize","resolution"].includes(n)||n in this&&(this[n]=e[n])}),Object.defineProperties(this,{dashed:{get(){return this._dashed},set(n){this._dashed=n,n?this.defines.USE_DASH="":delete this.defines.USE_DASH,this.needsUpdate=!0}}})}get three_color(){return this._three_color}set three_color(e){this._three_color=e,this.color=e}toJSON(){return{type:"FiveLineMaterial",color:this.color}}}function sy(i,e="m",t=2){let n;if(e==="m")return n=i.toFixed(t),parseFloat(n)===0?void 0:n+"m";if(e==="mm")return n=(i*1e3).toFixed(0),n==="0"?void 0:n+"mm";if(e==="ft"){const o=Math.floor(i/.3048),s=Math.floor(i%.3048/.0254);return o===0&&s===0?void 0:`${o}′${s}″`}}function ry(i,e="m"){let t;if(e==="m")return t=i.toFixed(2),t==="0.00"?void 0:t+"m²";if(e==="mm")return t=(i*1e3*1e3).toFixed(0),t==="0"?void 0:t+"mm²";if(e==="ft"){const n=(i*10.76).toFixed(1);return n==="0.0"?void 0:n+"ft²"}}const To=class{static checkDom(i){let e=i,t=!0;for(;e.parent;)t===!0&&e.visible===!1&&(t=!1),e=e.parent;e.type==="Scene"?(i._onAdded(),t?i._onShowed():i._onHidden()):i._onRemoved()}static checkDomEveryFrame(){To.checkDomEveryFrameIsRunning||(To.checkDomEveryFrameIsRunning=!0,To._checkDomEveryFrame())}static _checkDomEveryFrame(){To.cacheObject.forEach(i=>To.checkDom(i)),requestAnimationFrame(To._checkDomEveryFrame)}};let pi=To;p(pi,"cacheObject",new Set),p(pi,"checkDomEveryFrameIsRunning",!1);class Pi extends mi{constructor(e){var t,n,o,s;super(),p(this,"name","LineMesh"),p(this,"type","Line2"),p(this,"object"),p(this,"points",[]),p(this,"doms",[]),p(this,"highlighted",!1),p(this,"_geometry"),p(this,"line1"),p(this,"line2"),p(this,"opacityBeforeHighlight"),p(this,"colorBeforeHighlight"),p(this,"paramsStyle",{}),p(this,"lastRenderDomItem"),p(this,"lastFOV"),p(this,"_onAdded",()=>{this.doms.length===0&&this.paramsStyle.lengthEnable&&this.updateDomItems()}),p(this,"_onRemoved",()=>{this.doms.forEach(c=>c.destroy()),this.doms=[]}),p(this,"_onShowed",()=>{this.doms.forEach(c=>c.container.style.display="block")}),p(this,"_onHidden",()=>{this.doms.forEach(c=>c.container.style.display="none")}),p(this,"onCameraUpdate",()=>{var c;(c=this.five)!=null&&c.camera&&this.lastFOV!==this.five.camera.fov&&(this.lastFOV=this.five.camera.fov,this.updateDomItems({force:!0}))}),p(this,"onPanoArrived",()=>{setTimeout(()=>this.updateDomItems({force:!0}),100)}),this.paramsStyle=W({dashed:!1,lineOpacity:1},e),this.geometry=new Ra;const r={color:new Ye((t=e==null?void 0:e.lineColor)!=null?t:$A),linewidth:(n=e==null?void 0:e.lineWidth)!=null?n:ey,dashScale:1,dashSize:.02,gapSize:.02,opacity:(o=e==null?void 0:e.lineOpacity)!=null?o:1,depthWrite:!1,transparent:!0},a=new ny(pe(W({},r),{dashed:!1,depthTest:!0})),l=new oy(pe(W({},r),{dashed:!0,depthTest:!1}));if(this.line1=new au(this.geometry,a),this.line2=new au(this.geometry,l),this.line1.renderOrder=2,this.line2.renderOrder=2,this.line1.name="line1",this.line2.name="line2",this.add(this.line1),this.five){const c=(s=this.five.renderer)==null?void 0:s.getSize(new Qe);c&&this.setResolution(c.width,c.height),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("cameraFovUpdate",this.onCameraUpdate),this.five.on("panoArrived",this.onPanoArrived)}e&&this.setStyle(e),e!=null&&e.points&&this.setPoints(e.points),this.addEventListener("removed",()=>{this.five&&(this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("cameraFovUpdate",this.onCameraUpdate),this.five.off("panoArrived",this.onPanoArrived)),pi.cacheObject.delete(this),pi.checkDom(this)}),this.addEventListener("added",()=>{pi.cacheObject.add(this)}),pi.checkDomEveryFrame()}get style(){return{lineColor:this.color,lineWidth:this.lineWidth,lineOpacity:this.lineOpacity,dashed:this.dashed,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode,lengthEnable:this.paramsStyle.lengthEnable,tip:this.paramsStyle.tip}}get lineOpacity(){var e;return(e=this.line1.material.opacity)!=null?e:this.paramsStyle.lineOpacity}get lineWidth(){var e;return(e=this.line1.material.linewidth)!=null?e:this.paramsStyle.lineWidth}get color(){var e;return new Ye((e=this.line1.material.three_color)!=null?e:this.paramsStyle.lineColor)}get dashed(){return this.paramsStyle.dashed}get occlusionVisibility(){return this.paramsStyle.occlusionVisibility}get occlusionMode(){return this.paramsStyle.occlusionMode}get five(){var e,t;const n=(t=(e=window.globalModules)==null?void 0:e.five)!=null?t:window.$five;return n||console.error("请先调用 Sculpt.modules.init(five) "),n}set geometry(e){var t;this._geometry=e,this.line1&&(this.line1.geometry=e),this.line2&&(this.line2.geometry=e),(t=this.line1)==null||t.computeLineDistances()}get geometry(){return this._geometry}updateMatrixWorld(e){var t;if(super.updateMatrixWorld(e),this.points){const n=(t=Hr(this,this.points))==null?void 0:t.map(o=>o.toArray().join(",")).join(",");n!==this.lastRenderDomItem&&(this.updateDomItems(),this.lastRenderDomItem=n)}}setPoints(e){if(this.points.length===0&&e.length===0)return;const t=e.map(Ue).filter(Be);if(this.points=t,t.length<2){const o=new Ra;this.line1.geometry=o,this.line2.geometry=o,this.updateDomItems();return}const n=t.flatMap(o=>[o.x,o.y,o.z]);if(n.length>2){this.line1.geometry.dispose();const o=new Ra;this.line1.geometry=o,this.line2.geometry=o}this.line1.geometry.setPositions(n),this.line1.computeLineDistances(),this.updateDomItems(),this.needsRender=!0}setResolution(e,t){const n=this.line1.material.resolution;(n.x!==e||n.y!==t)&&(n.set(e,t),this.needsRender=!0);const o=this.line2.material.resolution;(o.x!==e||o.y!==t)&&(o.set(e,t),this.needsRender=!0)}setStyle(e){var t,n,o,s;if(this.paramsStyle=W(W({},this.paramsStyle),e),Be(e.lineColor)){const l=new Ye(e.lineColor);this.line1.material.three_color=l,this.line2.material.three_color=l}Be(e.lineWidth)&&(this.line1.material.linewidth=e.lineWidth,this.line2.material.linewidth=e.lineWidth),Be(e.dashed)&&(this.line1.material.dashed=e.dashed),Be(e.lineOpacity)&&(this.line1.material.opacity=e.lineOpacity,this.line2.material.opacity=e.lineOpacity),this.updateDomItems({force:!0});const r=(n=(t=e.occlusionVisibility)!=null?t:this.paramsStyle.occlusionVisibility)!=null?n:!0,a=(s=(o=e.occlusionMode)!=null?o:this.paramsStyle.occlusionMode)!=null?s:"translucence";r?this.dashed?(this.remove(this.line2),this.line1.material.dashed=!0,this.line1.material.depthTest=!1):a==="depthTest"?(this.remove(this.line2),this.line1.material.dashed=!1,this.line1.material.depthTest=!1):a==="translucence"&&(this.line1.material.depthTest=!0,this.line2.material.depthTest=!1,this.line1.material.dashed=!0,this.line2.material.dashed=!0,this.addIfNotExists(this.line2)):(this.remove(this.line2),this.line1.material.depthTest=!0,this.line1.material.dashed=this.paramsStyle.dashed),this.doms.forEach(l=>l.intersectCheck=!r),this.needsRender=!0}highlight(e){var t,n;if(this.highlighted=!0,e!=null&&e.color){const o=new Ye(e.color);this.colorBeforeHighlight=(t=this.colorBeforeHighlight)!=null?t:this.line1.material.three_color,this.line1.material.three_color=o,this.line2.material.three_color=o}else{this.opacityBeforeHighlight=(n=this.opacityBeforeHighlight)!=null?n:this.line1.material.opacity;const o=this.opacityBeforeHighlight*zh;this.line1.material.opacity=o,this.line2.material.opacity=o}this.needsRender=!0}unhighlight(){this.highlighted&&(this.highlighted=!1,Be(this.opacityBeforeHighlight)&&(this.line1.material.opacity=this.opacityBeforeHighlight,this.line2.material.opacity=this.line1.material.opacity,this.opacityBeforeHighlight=void 0),Be(this.colorBeforeHighlight)&&(this.line1.material.three_color=this.colorBeforeHighlight,this.line2.material.three_color=this.colorBeforeHighlight,this.colorBeforeHighlight=void 0),this.needsRender=!0)}updateDomItems(e){const t=()=>{this.doms.forEach(o=>o.destroy()),this.doms=[]};if(!this.points||this.points.length<2||!this.paramsStyle.lengthEnable&&!this.paramsStyle.tip)return t();if(!this.five)return console.error("Five not found");const n=this.points.map((o,s)=>s!==0?[this.points[s-1],o]:null).filter(Be).map(o=>Hr(this,o));n.forEach(([o,s],r)=>{var a;const l=qt(o,s);this.doms[r]=(a=this.doms[r])!=null?a:(()=>{var h;const d=new na(this.five),u=(h=this.paramsStyle.occlusionVisibility)!=null?h:!0;return d.intersectCheck=!u,d.simulate3D=!0,d})(),this.doms[r].setPosition(l,[o,s]);const c=(h,d)=>{var u,f,m;const g=(u=d==null?void 0:d.force)!=null?u:!1;if(!(this.doms[r].__text===h&&!g))if(this.doms[r].__text=h,h instanceof HTMLElement)this.doms[r].container.innerHTML="",this.doms[r].container.appendChild(h);else if(h){const v=(()=>{if(!this.five||!this.five.camera)return 0;const M=this.five.getElement();if(!M)return 0;const O=M.clientWidth,y=M.clientHeight,C=O/2,x=y/2,S=o.clone().project(this.five.camera),k=s.clone().project(this.five.camera),z={x:S.x*C,y:S.y*x},q={x:k.x*C,y:k.y*x};return Math.sqrt(Math.pow(q.x-z.x,2)+Math.pow(q.y-z.y,2))})(),A=(()=>!this.five||!this.five.camera?20:qt(o,s).distanceTo(this.five.camera.position))(),w=((m=(f=this.five)==null?void 0:f.camera)==null?void 0:m.fov)||60,P=2*Math.tan(.5*w/180*Math.PI),I=`--distance-scale: ${Math.max(Math.min(1-P*A/40,1),0)};`,j=M=>{const O=document.createElement("div");O.classList.add("LineLengthTag"),O.style.visibility="hidden",O.style.position="absolute",O.style.padding="2px 8px",O.style.fontFamily="Arial-BoldMT",O.style.fontSize="14px",O.innerText=M,document.body.appendChild(O);const y=O.offsetWidth;return document.body.removeChild(O),y};let D=0;const T=j(h);v>0&&T>v&&(D=-20),this.doms[r].container.innerHTML=jh(h,{style:`${I} ${this.paramsStyle.cssStyle||""}`,offsetY:D})}else this.doms[r].container.innerHTML=""};if(this.paramsStyle.tip)c(this.paramsStyle.tip,e);else{const h=sy(o.distanceTo(s),this.paramsStyle.lengthUnit,this.paramsStyle.precision);c(h||null,e)}}),this.doms.length>n.length&&(this.doms.slice(n.length).forEach(o=>o.destroy()),this.doms.length=n.length)}}class ay extends Xa{constructor(){super(...arguments),p(this,"isCSS3DSprite",!0),p(this,"isCSS3DObject",!0)}}const ly=`
varying vec2 vUv;
varying float vRadius;
varying float vDistanceToCamera;
varying float vCenterDistanceToCamera;
void main() {
  vUv = uv;
  // 计算顶点到圆心的距离
  vRadius = length(position.xy);
  // 计算顶点到摄像机的距离
  vec3 worldPosition = vec3(modelViewMatrix * vec4(position, 1.0));
  vDistanceToCamera = distance(cameraPosition, worldPosition);
  vCenterDistanceToCamera = distance(cameraPosition, vec3(0.0));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1);
}
`,cy=`
varying vec2 vUv;
varying float vRadius;

uniform float borderWidth;
uniform float radius;

void main() {
  vec2 uv = vUv;

  if (vRadius > radius - borderWidth && vRadius < radius) {
    // 如果顶点在边框区域，则使用边框颜色
    gl_FragColor = vec4(1.0, 1.0, 1.0, 0.3);
  } else {
    // 如果顶点在填充区域，则使用填充颜色
    gl_FragColor = vec4(1.0, 1.0, 1.0, 0.2);
  }
}
`;function hy(){const i=new no(.2,64),e=new Bi({side:It,uniforms:{borderWidth:{value:.01},radius:{value:.2}},vertexShader:ly,fragmentShader:cy,depthTest:!1,transparent:!0,blending:Ng,blendEquation:dA,blendSrc:uA,blendDst:Fg,blendDstAlpha:pA});return new We(i,e)}function dy(){const i=new Et,e={lineWidth:1,lineColor:3407837,lineOpacity:.7,occlusionVisibility:!0},t=new Pi(pe(W({points:[{x:-.5},{x:.5}]},e),{lineColor:3407837})),n=new Pi(pe(W({points:[{y:-.5},{y:.5}]},e),{lineColor:3407837}));return i.add(t,n),i}function uy(i){const e=new ta;e.add(new ia(new R(0,0,0),new R(0,0,i)));const t=new wl(e,32,.003),n=new Ze({color:10994687,depthTest:!1,transparent:!0});return new We(t,n)}function py(){const i=new Yt(.03,.035,64),e=new Ze({color:16777215,depthTest:!1,transparent:!0,side:It});return new We(i,e)}function fy(){const i=new Xo(.018,32,32),e=new Ze({color:5085183,depthTest:!1,transparent:!0});return new We(i,e)}function my(){const i=document.createElement("img");i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAMAAAB8FU7dAAAAw1BMVEUAAACDuuiAsu11q/x8r/+HxtKHxtKIx9J4ut6Hx9Jcn/uNwNlmmf+RuP9ppf9orel3ud2HxtJrpf9oremev/9ppP9orelQmP9ZoPWSuP92q/9cnv9prel4ut53qv9orelYoPWIxdJPmP+HxtGRuP9oo/+Suf9Qmf92q/+RuP+DsP9Pmv+FxdFtre2SyMiRuP9PmP+evv9ppf9cnv+rxf9orepZofV4ut52q/+Dsf+Esv+5y/93q/9aofbF0f93rP9qpf8IzZ1iAAAAL3RSTlMAEg4s3dK5nodgVQoF/Pf39vbt7evr39rV1NTOzs6srJ+fiIZ9fWlpW09ERCwcHMH8LhIAAADRSURBVBjTjdDHkoMwEIThBrzOm3POOQwSYCRhe/f9n2p75FD2zX/VXL5qOAjzkixLsFL6fOFF5PwpXUj/eEwx7Oh9Jq+FdV5MqZkXlU9K4KZsmqY02x/A8LSwv14o0ylJWkP087WVhDfcjmjj5b/E3+CEpDPdGY58C7tKfzSiiA9uB4dV/NIF7yVQ7AGuq0lOIzrvnLP2Et2aMzUqryge8FVX0Zjl5XkG3KsR593pM2zVEScjvbMU7IdGjF19IzZ43Ceyve4Ai5Jep93u9BJs3j/gXjHbRgy31AAAAABJRU5ErkJggg==";const e=new ay(i);return i.style.pointerEvents="none",e.scale.set(.003,.003,.003),e}class gy extends fi{constructor(e){super(),p(this,"disableGetPixel",!0),p(this,"planeMesh"),p(this,"ringMesh"),p(this,"crossline"),p(this,"lineMesh"),p(this,"ballMesh"),p(this,"cssBallMesh");const t=.18;this.planeMesh=hy(),this.ringMesh=py(),this.crossline=dy(),this.lineMesh=uy(t),this.ballMesh=fy(),this.cssBallMesh=my(),this.ballMesh.position.setZ(t),this.cssBallMesh.position.setZ(t),this.planeMesh.renderOrder=0,this.ringMesh.renderOrder=1,this.crossline.renderOrder=2,this.lineMesh.renderOrder=3,this.ballMesh.renderOrder=4,this.add(this.planeMesh,this.lineMesh,this.ballMesh,this.ringMesh,this.cssBallMesh),oa(e)}updateWithIntersect(e){if(!e.face)return;const t=(()=>{const o=e.face.normal.clone().normalize();return o.y>.99?new R(0,1,0):o.y<-.99?new R(0,-1,0):o.x>.99?new R(1,0,0):o.x<-.99?new R(-1,0,0):o.z>.99?new R(0,0,1):o.z<-.99?new R(0,0,-1):o.y<.01&&o.y>-.01?new R(o.x,0,o.z):o})(),n=new R().addVectors(e.point,t);this.position.copy(e.point),this.lookAt(n)}show(){this.visible=!0,this.add(this.cssBallMesh)}hide(){this.visible=!1,this.remove(this.cssBallMesh)}dispose(){}}class Kg{constructor(e,t){p(this,"five"),p(this,"hooks",new Mt),p(this,"position",null),p(this,"magnifier",null),p(this,"pointHelper",null),p(this,"state",{enabled:!1,visible:!0}),p(this,"group",new Et),p(this,"show",()=>{var c,h;this.state.visible||(this.state.visible=!0,(c=this.pointHelper)==null||c.show(),(h=this.magnifier)==null||h.enable(),this.five.needsRender=!0)}),p(this,"hide",()=>{var c,h;this.state.visible&&(this.state.visible=!1,(c=this.pointHelper)==null||c.hide(),(h=this.magnifier)==null||h.disable(),this.five.needsRender=!0)}),p(this,"updateWithIntersect",(c,h={emitEvent:!0})=>{var d;if(!c)return;this.abortUpdateMagnifier(),this.position=c,h.emitEvent&&this.hooks.emit("intersectionUpdate",c),(d=this.pointHelper)==null||d.updateWithIntersect(c);const u=()=>{var f;return(f=this.magnifier)==null?void 0:f.renderWithPoint(c.point)};this.abortUpdateMagnifier=()=>this.five.off("renderFrame",u),this.five.once("renderFrame",u),this.five.needsRender=!0}),p(this,"abortUpdateMagnifier",()=>{});var n,o,s,r,a;this.five=e,this.magnifier=(t==null?void 0:t.magnifier)!==void 0?t.magnifier:new Dh(e,pe(W({dragEnabled:!0},t==null?void 0:t.magnifierParams),{skipPanorama:(n=t==null?void 0:t.skipPanorama)!=null?n:!1}));let l=null;(t==null?void 0:t.pointHelper)==="default"||(t==null?void 0:t.pointHelper)===void 0?l=new s0(e):(t==null?void 0:t.pointHelper)==="highlight"?l=new gy(e):(t==null?void 0:t.pointHelper)===null?l=null:l=t.pointHelper,this.pointHelper=l,this.group.name="five-point-selector",this.five.scene.add(this.group),(a=this.magnifier)==null||a.appendTo((r=(s=t.container)!=null?s:(o=e.getElement())==null?void 0:o.parentElement)!=null?r:document.body)}enable(){var e;this.state.enabled||(this.state.enabled=!0,this.pointHelper&&this.group.add(this.pointHelper),(e=this.magnifier)==null||e.enable(),this.five.needsRender=!0,this.hooks.emit("enabled"))}disable(){var e;this.state.enabled&&(this.state.enabled=!1,this.pointHelper&&this.group.remove(this.pointHelper),(e=this.magnifier)==null||e.disable(),this.hooks.emit("disabled"))}dispose(){this.hooks.off(),this.disable(),this.magnifier=null,this.pointHelper=null}}const _g="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function vy(i,e){const{x:t,y:n}=e,o=t*2-1,s=n*2-1,r=new Ot;return r.setFromCamera({x:o,y:s},i.camera),r.params.Points.threshold=.02,r}function sa(i,e,t){const n=Ay(i,e);return t!=null&&t.virtualPoint?n??$g(e):n}function $g(i,e=3){const t=new R().addVectors(i.ray.origin,i.ray.direction.clone().normalize().multiplyScalar(e)),n=i.ray.direction.clone().negate();return{distance:e,point:t,object:new fi,face:new nn(0,0,0,n),raycaster:i,isVirtual:!0}}function Ay(i,e){const t=Ci(i).intersectRaycaster(e)[0];if(t)return pe(W({},t),{raycaster:e,isVirtual:!1})}const lu=`url("data:image/svg+xml,%3Csvg width='12px' height='12px' viewBox='0 0 12 12' xmlns='http://www.w3.org/2000/svg'%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cpath d='M6,12 C9.3137085,12 12,9.3137085 12,6 C12,2.6862915 9.3137085,0 6,0 C2.6862915,0 0,2.6862915 0,6 C0,9.3137085 2.6862915,12 6,12 Z' fill='%23FF5959'%3E%3C/path%3E%3Cg transform='translate(2, 2)' stroke='%23FFFFFF'%3E%3Ccircle cx='4' cy='4' r='4'%3E%3C/circle%3E%3Cline x1='1.07141075' y1='1.23997894' x2='6.64700843' y2='6.81557662'%3E%3C/line%3E%3C/g%3E%3C/g%3E%3C/svg%3E") 6 6, auto`,yy=new R;function ho(i){const{raycaster:e,line:t,clampToLine:n=!0}=i,o=new Nt().setFromNormalAndCoplanarPoint(e.ray.direction.clone().normalize(),new R),s=o.projectPoint(t.start,new R),r=o.projectPoint(t.end,new R),a=new Ht(s,r),l=a.closestPointToPoint(e.ray.origin,n,yy),c=l.distanceTo(r),h=l.distanceTo(s),d=a.distance();if(c>h&&c>d){const u=-l.distanceTo(s)/d,f=t.start.clone().sub(t.end).normalize();return t.start.clone().sub(f.clone().multiplyScalar(u*t.distance()))}else{const u=l.distanceTo(s)/d;return new R().lerpVectors(t.start,t.end,u)}}const cu=new R,gs=()=>!1;class Pl extends Mt{constructor(e,t){var n,o,s,r,a;super(),p(this,"_cursorError",!1),p(this,"actionIfNoIntersection","virtualPoint"),p(this,"plane"),p(this,"planeMode","onlyVirtual"),p(this,"pointSelectorHelper"),p(this,"five"),p(this,"hook",this),p(this,"adhereEnabled",!0),p(this,"adhereRadius",.1),p(this,"adherePlane",[]),p(this,"adhereLine",[]),p(this,"_outOfFive",!1),p(this,"_enabled",!1),p(this,"mode"),p(this,"pressDown",!1),p(this,"adherePoints"),p(this,"setPressDown"),p(this,"lastFiveHelperVisible"),p(this,"lastIntersection"),p(this,"mousePosition"),p(this,"_mouseDownInfo"),p(this,"_touchStartInfo"),p(this,"config",{}),p(this,"select",h=>{h&&this.updatePointSelectorHelperIntersect(h);const d=this.emit("wantsSelect",this.position);return d||(this.pointSelectorHelper.hide(),this.emit("select",this.position),console.debug(this.position)),!d}),p(this,"onKeyDown",h=>{h.key==="Shift"&&(this.adhereEnabled=!1)}),p(this,"onKeyUp",h=>{h.key==="Shift"&&(this.adhereEnabled=!0)}),p(this,"onMouseWheel",h=>{this.updateByMousePosition(h);const d=()=>this.updateByMousePosition();this.five.off("render.prepare",d),this.five.on("render.prepare",d),setTimeout(()=>{this.five.off("render.prepare",d)},200)}),p(this,"onEnter",()=>{this.cursorError||this.pointSelectorHelper.show(),this.outOfFive=!1}),p(this,"onMouseEnter",()=>{this.onEnter(),this.emit("intersectionUpdate",this.position)}),p(this,"onMouseLeave",()=>{this.pointSelectorHelper.hide(),this.outOfFive=!0,this.emit("intersectionUpdate",void 0)}),p(this,"onMouseDown",h=>{this._mouseDownInfo={clientX:h.clientX,clientY:h.clientY,timestamp:performance.now()}}),p(this,"onMouseUp",h=>{if(!this._mouseDownInfo)return;const{clientX:d,clientY:u,timestamp:f}=this._mouseDownInfo;Math.abs(h.clientX-d)<2&&Math.abs(h.clientY-u)<2&&performance.now()-f<500?this.select():this._mouseDownInfo=null}),p(this,"onTouchStart",h=>{this._touchStartInfo={clientX:h.touches[0].clientX,clientY:h.touches[0].clientY,timestamp:performance.now()},this.setPressDown=setTimeout(()=>{if(this.setPressDown=void 0,this.mousePosition={clientX:h.touches[0].clientX,clientY:h.touches[0].clientY},!this.mouseNdcPosition)return;const d=this.updateByNdcPosition(this.mouseNdcPosition);this.pressDown=d},200)}),p(this,"onTouchMove",h=>{if(this.setPressDown){let d=!1;if(this._touchStartInfo){const{clientX:u,clientY:f}=this._touchStartInfo;(Math.abs(h.touches[0].clientX-u)>2||Math.abs(h.touches[0].clientY-f)>2)&&(d=!0)}d&&(clearTimeout(this.setPressDown),this.setPressDown=void 0);return}if(this.pressDown){if(this.mousePosition={clientX:h.touches[0].clientX,clientY:h.touches[0].clientY},!this.mouseNdcPosition)return;this.updateByNdcPosition(this.mouseNdcPosition)}}),p(this,"onTouchEnd",h=>{if(this.setPressDown){clearTimeout(this.setPressDown),this.setPressDown=void 0;return}this.pressDown&&(setTimeout(()=>{this.pressDown=!1},100),this.select())}),p(this,"updateByMousePosition",h=>{if(this.five.getElement()){if(!h||(h==null?void 0:h.buttons)!==0){this.pointSelectorHelper.hide();return}else this.pointSelectorHelper.show();h&&(this.mousePosition={clientX:h.clientX,clientY:h.clientY}),this.updateByNdcPosition(this.mouseNdcPosition)}}),p(this,"updateByNdcPosition",h=>{var d,u,f;const m=vy(this.five,h);let g=sa(this.five,m);if(g){if(this.plane&&this.planeMode==="vertical"&&(g=pe(W({},g),{point:this.plane.projectPoint(g.point,new R),face:new nn(0,0,0,this.plane.normal.clone()),originalPoint:g.point.clone()})),this.plane&&this.planeMode==="onlyPlane"){const v=m.ray.intersectPlane(this.plane,cu);if(!v)return!1;g={distance:this.five.camera.position.distanceTo(v),point:v.clone(),originalPoint:g.point.clone(),face:new nn(0,0,0,this.plane.normal.clone()),raycaster:m}}return this.updatePointSelectorHelperIntersect(g),this.lastIntersection=g,!0}if(this.plane){const v=m.ray.intersectPlane(this.plane,cu);if(v){const A={distance:this.five.camera.position.distanceTo(v),point:v.clone(),object:new fi,face:new nn(0,0,0,this.plane.normal.clone()),raycaster:m,isVirtual:!0};return this.updatePointSelectorHelperIntersect(A),!0}}if(this.actionIfNoIntersection==="lastPoint")return this.updatePointSelectorHelperIntersect(this.lastIntersection),!0;if(this.actionIfNoIntersection==="virtualPoint"){const v=$g(m,(d=this.lastIntersection)==null?void 0:d.distance);return v.face=new nn(0,0,0,(f=(u=this.lastIntersection)==null?void 0:u.face)==null?void 0:f.normal),v.isVirtual=!0,this.lastIntersection=v,this.updatePointSelectorHelperIntersect(v),!0}else if(this.actionIfNoIntersection==="disable")return this.updatePointSelectorHelperIntersect(null),!1}),p(this,"updatePointSelectorHelperIntersect",h=>{var d,u,f,m,g,v,A,w;if(!h){this.pointSelectorHelper.hide(),this.pointSelectorHelper.position=h,this.emit("intersectionUpdate",h),this.five.getElement().style.cursor=lu;return}this.onEnter(),this.cursorError||(this.five.getElement().style.cursor="");const P=W({},h);if(this.adhereEnabled&&this.mouseNdcPosition&&this.five.renderer){const I={x:this.mouseNdcPosition.x,y:1-this.mouseNdcPosition.y},j=this.five.renderer.getSize(new Qe);if(this.adhereEnabled&&typeof this.adherePoints=="function"&&typeof this.adhereRadius=="number"){for(const D of this.adherePlane){const T=D.distanceToPoint(h.point);let M=D.projectPoint(h.point,new R);(!this.plane||this.plane.distanceToPoint(M)<.01)&&(M=(u=(d=this.plane)==null?void 0:d.projectPoint(M,new R))!=null?u:M,T<this.adhereRadius&&(P.point=M.clone(),P.adherePoint=M.clone(),this.plane||(P.face=new nn(0,0,0,D.normal.clone())),P.isAdsorbed=!0))}for(const D of this.adhereLine){let T=D.closestPointToPoint(h.point,!1,new R);if(T.distanceTo(h.point)<this.adhereRadius)(!this.plane||this.plane.distanceToPoint(T)<.01)&&(T=(m=(f=this.plane)==null?void 0:f.projectPoint(T,new R))!=null?m:T,P.point=T.clone(),P.adhereLine=D.clone(),P.isAdsorbed=!0);else{const M=ho({raycaster:new Rr(this.five.camera.position,h.point.clone().sub(this.five.camera.position).normalize()),line:D,clampToLine:!1}),O=M.clone().project(this.five.camera);if(O.z<=1){const y={x:(O.x+1)/2,y:(1-O.y)/2},C={x:Math.abs(y.x-I.x)*j.width,y:Math.abs(y.y-I.y)*j.height};let x=M.clone();C.x<10&&C.y<10&&(!this.plane||this.plane.distanceToPoint(x)<.01)&&(x=(v=(g=this.plane)==null?void 0:g.projectPoint(x,new R))!=null?v:x,P.point=x.clone(),P.adhereLine=D.clone(),P.isAdsorbed=!0)}}}for(const D of this.adherePoints({intersection:h,pointSelectorInstance:this})){const T=D instanceof nn?new R(D.a,D.b,D.c):D;if(T.IsAlwaysVisible=D.IsAlwaysVisible,!(this.plane&&this.plane.distanceToPoint(T)>.01))if(T.distanceTo(h.point)<this.adhereRadius){P.point=(w=(A=this.plane)==null?void 0:A.projectPoint(T,new R))!=null?w:T.clone(),!this.plane&&D instanceof nn&&(P.face=D),P.isAdsorbed=!0;break}else{const M=T.clone().project(this.five.camera);if(M.z>1)continue;const O=this.five.renderer.getSize(new Qe),y={x:(M.x+1)/2,y:(1-M.y)/2},C={x:Math.abs(y.x-I.x)*O.width,y:Math.abs(y.y-I.y)*O.height};if(C.x<10&&C.y<10){let x=!1;if(T.IsAlwaysVisible)x=!0;else{const S=new Ot;S.setFromCamera(T.clone(),this.five.camera);const k=this.five.model.intersectRaycaster(S,void 0,!0)[0],z=.1,q=this.five.camera.position.distanceTo(T);k&&k.distance<q+z&&(x=!0)}if(x){P.point=T.clone(),!this.plane&&D instanceof nn&&(P.face=D),P.isAdsorbed=!0;break}}}}}}this.pointSelectorHelper.updateWithIntersect(P,{emitEvent:!1}),this.emit("intersectionUpdate",P)}),p(this,"mousePositionToNdcPosition",h=>{const d=this.five.getElement();if(!d)return null;const{top:u,left:f,width:m,height:g}=d.getBoundingClientRect(),{clientX:v,clientY:A}=h;return{x:(v-f)/m,y:1-(A-u)/g}}),p(this,"onFiveWantsPanGesture",()=>{if(this.pressDown)return!1}),p(this,"renderScreenCenter",()=>{this.updateByNdcPosition({x:.5,y:.5})}),p(this,"emitIntersectionUpdate",h=>{this.emit("intersectionUpdate",h)}),this.five=e,this.config=W(W({},this.config),t),this.actionIfNoIntersection=(o=(n=t==null?void 0:t.actionIfNoIntersection)!=null?n:t==null?void 0:t.actionIfNoModelUnderMouse)!=null?o:"virtualPoint";const l=(s=t==null?void 0:t.mode)!=null?s:"auto";l==="auto"?this.mode=_g?"fixed":"cursor":this.mode=l;const c={autoFixPCPosition:this.mode==="cursor",initialPosition:this.mode==="fixed"?{left:"35%",top:"20%"}:void 0};this.pointSelectorHelper=new Kg(this.five,pe(W({},t==null?void 0:t.helper),{magnifierParams:W(W({},c),(r=t==null?void 0:t.helper)==null?void 0:r.magnifierParams),skipPanorama:(a=t==null?void 0:t.skipPanorama)!=null?a:!1})),this.pointSelectorHelper.hide()}get position(){if(!this.outOfFive)return this.pointSelectorHelper.position}get outOfFive(){return this._outOfFive}get enabled(){return this._enabled}get cursorError(){return this._cursorError}set cursorError(e){this._cursorError=e,this.five.getElement().style.cursor=e?lu:"",e?this.pointSelectorHelper.hide():this.pointSelectorHelper.show()}set outOfFive(e){this._outOfFive=e}set enabled(e){this._enabled=e}get mouseNdcPosition(){return this.mousePosition?this.mousePositionToNdcPosition(this.mousePosition):null}enable(){if(this.enabled)return;this.enabled=!0,this.outOfFive=!1,this.pointSelectorHelper.enable(),this.pointSelectorHelper.hide();const e=this.five.getElement();if(!e)throw new Error("five element not found");this.mode==="cursor"?(this.five.on("wantsMoveToPano",gs),this.five.on("wantsChangeMode",gs),this.five.on("wantsTapGesture",gs),e.addEventListener("touchstart",this.onTouchStart,{passive:!0}),e.addEventListener("touchmove",this.onTouchMove),e.addEventListener("touchend",this.onTouchEnd),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mousemove",this.updateByMousePosition),e.addEventListener("wheel",this.onMouseWheel),e.addEventListener("mouseenter",this.onMouseEnter),e.addEventListener("mouseout",this.onMouseLeave),this.five.on("wantsPanGesture",this.onFiveWantsPanGesture)):this.mode==="fixed"&&(this.five.on("panoArrived",this.renderScreenCenter),this.five.on("panGesture",this.renderScreenCenter),this.five.on("interiaPan",this.renderScreenCenter),this.renderScreenCenter(),this.pointSelectorHelper.show()),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),this.pointSelectorHelper.hooks.on("intersectionUpdate",this.emitIntersectionUpdate),this.lastFiveHelperVisible=this.five.helperVisible,this.five.helperVisible=!1,this.emit("enable")}disable(){if(!this.enabled)return;this.enabled=!1,this.adherePoints=null,this.adhereLine=[],this.adherePlane=[],this.plane=void 0,this.pointSelectorHelper.disable(),this.five.getElement().style.cursor="";const e=this.five.getElement();this.five.off("wantsPanGesture",this.onFiveWantsPanGesture),this.five.off("wantsMoveToPano",gs),this.five.off("wantsChangeMode",gs),this.five.off("wantsTapGesture",gs),this.five.helperVisible=this.lastFiveHelperVisible,e==null||e.removeEventListener("touchstart",this.onTouchStart),e==null||e.removeEventListener("touchmove",this.onTouchMove),e==null||e.removeEventListener("touchend",this.onTouchEnd),e==null||e.removeEventListener("mousedown",this.onMouseDown),e==null||e.removeEventListener("mouseup",this.onMouseUp),e==null||e.removeEventListener("mousemove",this.updateByMousePosition),e==null||e.removeEventListener("wheel",this.onMouseWheel),e==null||e.removeEventListener("mouseenter",this.onMouseEnter),e==null||e.removeEventListener("mouseout",this.onMouseLeave),this.five.off("panoArrived",this.renderScreenCenter),this.five.off("panGesture",this.renderScreenCenter),this.five.off("interiaPan",this.renderScreenCenter),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.pointSelectorHelper.hooks.off("intersectionUpdate",this.emitIntersectionUpdate),this.emit("disable")}dispose(){this.disable(),this.pointSelectorHelper.dispose()}setAdherePoints(e,t){e?typeof e=="function"?this.adherePoints=e:this.adherePoints=()=>e:this.adherePoints=null}}const e0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbYAAAGwCAYAAADFUEBtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABtqADAAQAAAABAAABsAAAAABTZ8U6AAAtiklEQVR4Ae2dAXJbSbJdp+d7AfYSHOGVeAPek5fkNXgLjviLmRkZl+CRbtc8UBKRRalZpyIesiorMx/eIcjb+QCh//Y3hwQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkMEbgj7FKFpLA4QS+fPnyx23czJc//V498h2Oy8uXwDYCf/oF3HYWC0vgAAI3QfuP22V+uR35vYplrOsX/03w/kWAVgISmCPwX+ZKWUkCErgR+PvtiKjF9uj/iMx+C1/HOZeABJ4koLA9CdB0CRQBxKxFrLa/Tung7Ni+InEigTkCCtscSytJIATo2BC3dGYIWfvs2Hy9SGATAYVtE1jLHkkgohbxQsACgTkWn8IWEg4JbCCgsG2AasljCXArMgB6DpAWs3/i1EpAArMEFLZZnlY7m0C6snwyMuPqFiT+2Cvhi98hAQk8SUBhexKg6RIoAtyKjItbj1jCWGPxayUggSECCtsQSMtI4EYgYhVx624tYOK/8mXPIQEJDBNQ2IaBWu5oAnRh3GZkHSiIG8J3NCgvXgI7CShsO+la+zQCEa0ciBgWDlnji3VIQAIbCChsG6Ba8mgCdGSxjCsRu/IRr5WABJ4goLA9Ac9UCSwE6Nj6Y/0RsBxXviXdpQQkMEFAYZugaA0J3AnQhdG1xYsPccPKTAIS2ERAYdsE1rJHEohocQsy8xwZdGuse+8e4aMEJDBGQGEbQ2khCXz94AgCxkf8gwZf5u3P2iEBCQwSUNgGYVpKAjcC+eYRRKw7NeaBpLCFgkMCmwgobJvAWvZIAhE1bkUGAAK3zq/W8TkkIIEBAgrbAERLSOCVQISsPzgSd3x0a8xjczgkIIENBBS2DVAteSwBBGsVrV4zxx4LywuXwC4CCtsustY9kUDEio4t8/W9tO7cTuTjNUvgQwgobB+C2ZMcQoD317BX4kanhj0EjZcpgY8joLB9HGvP9PkJRKwiai1odm2f/+fuFf5mBBS23+wH4tP5yxPgViRdWy6I7iwihx/fX/6CvQAJ/G4EFLbf7Sfi8/krE+DfsEW0umvrOdensEFCK4FhAgrbMFDLHU0AQUO0sHRq3JaMdUhAApsIKGybwFr2SAIRsr7ViLAFRsSsha33su+QgASGCChsQyAtI4EbgYhabkdmRLi6M1uFbF2/JPkgAQk8T0Bhe56hFSQAgYgVHVt8iBsWX2zHZe2QgASGCChsQyAtI4EbgQhYjh6s23Yn17HOJSCBAQIK2wBES0jglUC6sBy8l9Zg8MUmBqHrGOcSkMAAAYVtAKIlJPBKIGLFsULBT7emsK2EXEtgiIDCNgTSMhK4EUC8EK0WsZ6zLzQJSGADAYVtA1RLHksggtUfCmkB63kAretjoXnhEpgmoLBNE7XeyQQQNrqzlUX22VPYVjquJTBEQGEbAmkZCdwI8KGQt0SLPazgJCCBYQIK2zBQyx1PgE9FAiICli4NG7+iFgoOCWwioLBtAmvZIwnw/hpfhsxtxxUGQrf6XUtAAgMEFLYBiJaQwCuBCBu/UxEvhG4F9NbeGutaAhL4SQL8Ev5kmuESkMAFgdxi5Fbko9uNj/wX5XRJQALvIaCwvYeaORK4JhBRQ7hi37rlSNx1Jb0SkMC7CShs70ZnogT+jUDEiiObLV6ZR+gYvYdPKwEJDBBQ2AYgWkICrwQQNUSsxWt9X633BCgBCQwSUNgGYVrqeAIRKz4wsgrX99bHwxOABKYIKGxTJK0jgfutx/XDI7zPxm1IBA4rNwlIYJiAwjYM1HJHE+DDIy1azLFHA/LiJfARBBS2j6DsOU4hEPFaOzauvTu3xCl0kNFKYJiAwjYM1HJHE0CwEC3W3IZE3AKJmKOBefES2EFAYdtB1ZqnEki3lq/TYiBkLWL4iNFKQALDBBS2YaCWO5oAHRoQ1tuSLWrZc0hAAhsIKGwboFryWAIRKwQLEYvYPZofC8oLl8BOAgrbTrrWPo1Ad2x0a2FwNe/bk6dx8nolsJWAwrYVr8UPIxCxomPj0hGw2O7c2NdKQALDBBS2YaCWO5pAxGsVsgbSe8x737kEJDBAQGEbgGgJCbwSSLdGx5bujPkKiM5t9buWgAQGCChsAxAtIYFXAmvH9gjMI8F7FK9fAhL4CQIK20/AMlQC3yEQYYto0ZHFZvRtR/bad4/yUQISGCGgsI1gtIgEXgjQsSFa2MaDD9t7ziUggQECCtsAREtI4JVAurUIFscVmKsu7ipOnwQk8E4CCts7wZkmgQcE8jvF7cYrEbvyPSilWwISeA8Bhe091MyRwDWBfE9kd2tXtxvxYa8r6ZWABN5NQGF7NzoTJfBvBBC1WDozgvC1ZU8rAQkMElDYBmFa6ngCES0+Fbl+pD9Chy9xORwSkMAGAgrbBqiWPJYAgoW4NQj24lu7uY5zLgEJPElAYXsSoOkSKAIRtO7KEDC6M9aJwVfpTiUggQkCCtsERWtI4E6gu7J4unPLHsKWPYUtFBwS2EBAYdsA1ZLHEohY0bFFxBC6R/NjQXnhEthJQGHbSdfapxFAyHLd3a09mp/Gx+uVwIcQUNg+BLMnOYRABIyOjUtmna6NW5HxeSsSQloJDBNQ2IaBWu54AnRtCFeLGbck/3WjxP7xwAQggWkCCts0UeudTCDfPJKjRwsYc76hpOOcS0ACQwQUtiGQlpHAjUCEK7cZ6cwChTmdG+KGTYxDAhIYJKCwDcK01PEEIlYcwEDAsKuftVYCEhgioLANgbSMBG4EHolad22JYS00CUhgAwGFbQNUSx5LILch+RRkQ6Bba8u845xLQAIDBBS2AYiWkMArgYhVv8fW76vRpeETmgQksImAwrYJrGWPJBBh4wiAtSt7a+9IYF60BHYQUNh2ULXmqQQQrti1M0Pk2GN9KiuvWwLbCChs29Ba+EACvMcWUVvfa+NWZLBE1BS2kHBIYAMBhW0DVEseTQDRamFrUcs8h0MCEthEQGHbBNayRxKImPGtIi1e3Z1l3kJ3JCgvWgI7CShsO+la+zQCb92KbBYKW9NwLoFhAgrbMFDLHU2A25DdoV0ByX7fqryK0ScBCbyTgML2TnCmSeCCAILVHRlzbNIyd0hAApsIKGybwFr2SALpwujaAED3ho1/jSFWKwEJDBBQ2AYgWkICrwRasBCytTvDLzQJSGATAYVtE1jLHkkgorW+d/ZIyNa4I4F50RLYQUBh20HVmqcSQNjo0rJmDpNHQse+VgISeJKAwvYkQNMlUATW99giao86MwWuwDmVwCQBhW2SprUk8OevyqKD+9cNDN1bW3lJQAIbCChsG6Ba8lgC6c440q0hYvk2Egb+7DkkIIENBBS2DVAteSyBiFVEbL0F2SKWPYcEJLCRgMK2Ea6ljyPQ3RoXH1HLgaAhco/eeyNPKwEJvJOAwvZOcKZJ4IIAYhW7Chni1vaihC4JSOBZAgrbswTNl8A3AhEtxI3ODCFLVPu+ZTmTgARGCShsozgtdjiBCBdHUKRruxKz9ifOIQEJDBJQ2AZhWup4AhGxdGyxLV6IG4CyXn3saSUggScJKGxPAjRdAkUgYsX7a9ySbIEjND6HBCSwiYDCtgmsZY8kQLfW3VjPgRLflZ99rQQk8AQBhe0JeKZK4IIAHRvCRceGTUrPL0rokoAEniGgsD1Dz1wJ/JnA2rGtnVm+Witj9d+9PkpAAiMEFLYRjBaRwAsBhC2W0d0Z++0jTisBCQwRUNiGQFpGAq8E8pVa6cgQLyyAWHOrEr9WAhIYIqCwDYG0jARuBNKR5Yh4ddeGiLUf3y3UIQEJTBJQ2CZpWut0AtxqjGjl6O6MOYwUNkhoJTBMQGEbBmq5owkgaIgWlk4NccMeDcuLl8AuAgrbLrLWPZEAtyK59ghbixjC1z5itRKQwBABhW0IpGUk8EqA99jo1uLuuaLmS0UCmwkobJsBW/4oAnRsES9Gd2nxIXJY4rQSkMAQAYVtCKRlJHAjgFjRtQVKfBE6fKyz55CABDYQUNg2QLXksQQiWhGwDESuhax9zO/RPkpAAmMEFLYxlBaSwIuYRbA4rpCke/N9tisy+iQwREBhGwJpGQncCETQeJ8tQHivLf51Hp9DAhLYQEBh2wDVkscSiFjlK7UYLV49Z18rAQlsIKCwbYBqyWMJRNT4kMgVhIhbd25XMfokIIEnCShsTwI0XQJFIMJFZ4Zlm/fV8PMhE/a1EpDAEAGFbQikZSRwIxDRWju2+CJq7Y8PgbtNHRKQwCQBhW2SprVOJ0AXhg0PRA02CBoWv1YCEhgioLANgbSMBG4EIlYRtVhuPcZm4LuvfJSABLYRUNi2obXwoQS45dhdG6IWmyMDe1/5KAEJjBFQ2MZQWkgCLx/1R7xi6dqYNyKFrWk4l8AgAYVtEKaljifQohYY3bVF5BA6bk8eD0wAEthBQGHbQdWaJxNAzBC5sEDQ6NxYn8zJa5fANgIK2za0Fj6QQIQrwhbbo9eZ/+t2tK9jnUtAAk8SUNieBGi6BIpARC3fPtIdGfPYDAQNe/f6KAEJjBFQ2MZQWkgCL6IVwWrRYo4Npv4+SbFJQALDBBS2YaCWO5rA+l2RLWbducXfe0dD8+IlME1AYZsmar2TCSBYV6KFD8uHTE7m5bVLYAsBhW0LVoseSmAVtn5fjXnQIG6HYvKyJbCXgMK2l6/VzyPQnVgLWM9DpePOo+QVS2AjAYVtI1xLH0cgYpWju7OGEHFjbxW6jnMuAQk8QUBhewKeqRJYCETUECwsIRG0+HIgbuxpJSCBQQIK2yBMS0ngRqA7NoQMMPmH2Rmr/+71UQISGCGgsI1gtIgEXghE1DJiW+BenLcH/vE2a60EJLCBgMK2AaoljyWQTqxFDaFrIN21td+5BCQwREBhGwJpGQncCCBsb91qpGtLjEMCEthAQGHbANWSxxJIh4aoxfIhkRaxK9+xwLxwCewgoLDtoGrNkwn090C2oMEkPm5H4tNKQAKDBBS2QZiWOp5Ad2x8vD9Q6NIyj7ARl7VDAhIYJqCwDQO13NEEEK1AoFuLqK0fImnROxqYFy+BHQQUth1UrXkqAYQN4cLGn3kGc4Tv7vVRAhIYI6CwjaG0kARe/p1aBKtFizk2mHouNglIYJiAwjYM1HLHE8htR7qzfi+tPzASYVPcjn+pCGAXAYVtF1nrnkiA99KwLV78+zW49B4+rQQkMEBAYRuAaAkJvBKIoHWXBhhEjK4ta3zEaCUggSECCtsQSMtI4JVAhC23IhE4bksiZr0WmgQksIGAwrYBqiWPJRDxQtgQstiIGevu2o4F5YVLYCcBhW0nXWufRgDxynX3e2qIXfzME+uQgAQ2EFDYNkC15LEEIlqrcCFgsd6GPPal4YV/JAGF7SNpe65TCETEELi+ZsWtaTiXwCYCCtsmsJY9kgCChqhh42f4HhsktBLYREBh2wTWskcSQNhyyzGiltGiljX+zB0SkMAGAscI25cvX/IHhj8y+ePCmj807QvqK3/7EkMNbO8zZ++RTdy6l9rk9/6Vb41lfRW7nidr6pPXMfERs+53feKI7Rr4Oqb3OX/73po/E881XFmeZyz7PA+ulfVqEx/ff3+1mSen31Pjk5F0bP/r9pr8H68x2SM2+6yxN9fX/9UN+T9iiaHO9+zVuR/l/ExsarwVv14fzxvLc2Dddt1jvdrkxIddz5l175PPua7W1GLvkU3tf77WJyY+ancd5uwnnnnb+FMzg5rYl7p//PEH9e9RBz3mF/CIUcLWfxjzyTXWWP4oscYmlr237Fs11zxi8zPIeTjXapPHf4QkJ4P42AxyqMm58K9xWa+xySEPS17Oj6/j2E8t/Fd1E7fmX8URs8ZTf/Wva/K7Nr63bNd/VLPzmV/FZi9HRvb5gxObwR8c/ohhs88c2778IYu/97LffzTZw2b/H7ej6/Temk9s/OQQv1rOu/rJw2afA99b9lHd9TzUbD/ztT6x+L8X92h/zU8cz5e9tsw7rmtnP/kZ8ffRudknjvNhqYcl78tN3DI/buSX7tTRf3xggC82Lwj+OF3tx3e1T+yP2h954fHHkfPFMu98fFfn5nrIJbbzH+Vx/t7vfObZT2zWnC++jPU8iem8xLSv89e4xDK6buJy/hw/Ovqcb51nrbcKZ+dSExZXNvU6Z62/ruGxXh/X/1YtePC8sDkHdcnnua7nz5o8LHWJpQZrLPGssWt8r3lexLYlLpbrz37W7K35+BOXwfpR/j3q22PHrfl93m8Z386Bjzhs/OvzJLZt4juO/B/l37WOmK9gPvtF8wLJdeaFwos1/gzWvIiIaU74Ov6t/MSxj8XH+fCzXm3iGZwfG3/nM8dSa81nPzYHce0nJxY/cdj2r/PEXMVR79Fe7yeGutjsM+Jb/dSNfZTfeeR3Xup3fmLyOiCPvcSR3zEdmzlHxxLfIpl6/Zx5TvFnsE5u1+rnc5Wf82cQh717v/m7bmIyOE/m5GGv4snDJi+j62TNPv5ex5d1DvaxxMXC+Tb9Wi/zq/yOoUbi1rqPfJ2feY/Uy0GtWHyJw48Pm72MrDPIyxxf5gzysPF37ayzhy/r4wYv9k9/4a8tef/A84Pnhx//jwziyMPiTw3q9rmofRXHXudSF9sxV3HU/dGf51r36rlyzr4ezt2245ivNjV4jn1u5uyteVn3Na1xa37WHMntedbkU3PNT8w6Eksce6yx1GUfm33yiY3lIK7zE5+jfcTFdp2sE8ugLjH4Y1MP/2qzT27mGTzv++r+yHMiljr4OzZz9vE/Wnc+tcnBJqbj4qfe6ienY/CRg43/rXzyiOm8dd5r8rDkZ524PvDFZvAzfVRvzb2q3b571YMeAfjpL/n1Pba+zrw4+OH3PDH9guo5+eRhOx9fYpljyWfvkZ+43ud5cK7ssc8eddtSizwsfmpc2fiI73N0/TUvex17lc8+ucRQt9f4YtfR+WvNxLKPJZ81ltzVEo9NfD+3zo8fMcDGx4Gva2VOjbbUwpe4+HqwF9t77WeePGJi8WOzz7xtzxOTQX722Mf3EvAakzn7+B+t33pu1CaGWmt9aseusexd5RLfMZyz49eanJ+/oeSvljxqYhPHQa2265w19ThP/PioHd/fTn1/LdfODyXzTz0e/JB5QeTae86Lpn0dgx+77nV+Yoh7ZJPfo/Px44td6xATyx4+1uRhiWW/4zlX7+HrOOarJfYqfz3/mpucNYY6jyznoxbrjseXmPaT05bYxBGb/cyzhw+bPQYxWWfOQU0sudi38rNHHpa678knB8u5Y+N7dA72yMOSx3rNz34G+6u97357TH5iOo6aiWp/1j2yR2zH4cNmjwMfdXpNjfYRxx7r2PgSu+7hwxIb26PzMl/XV8+j8zN/ibn4j/k17tOujxG2+lQkP8x8goixvlh4MeHHrvHxc/Re56/7iVvrxUdOz78Xl1gG+Vc5xMQmjueExR8bH7WyZsTX/vU87LW/5+THwj77HFf5OTf7mTPwYePPnLHWyh7nJ2a12adG5+MjvuPwJSZHrquvjXUsMV375r48Z/xdJ2tG51Mztv3MyYmND3/i19F7PeccxLPHOpZ6WGLIxU9O+5l3nc7HH9/qp17s1R7njWUfy3mJaT/ztX77yefnxB7noi412Mfix+LvPM7RPuLIi+39rK9i4j9mHCNsrz9RXihZXv3wr3zJwc8LiHUs80c128/51xz8if3e4DkQl1rk9x7naB9x2euDWm2pm1/crtX1Et97VzWJ59ysySW/1+27On+fp2NT42oQc/UcEo+fuK7B3vfisr/m57nnWGskltE5mRPLnDhs9nsQv/qpiz+Wj4uzlzqchzhq95r4+NpPPjnEscbih0XWfaxxrGNzPvI5P+uOy/yqJn5ief5Xsfg6h3jOzZrY2Az899WfnzP71CAmlvz2vVVr3eu8P80f3KX6U8xnXZwmbPk58kLqF8jqYy/+HPmFzFjj7t5/93c+MdjUyD4xsWtd9vAnt+dZM9b8R3Hx9x5/ZDgXlpi1LudjnzV5WfOHE1+fkzwsTK/Oc5XP+ZLPfizz7HfNrDlX5gzyk0c8cdTC4k9ufBzkxZ9BXPyJiSWG9ZVdfc0ve9S9Tb/O8WU/R0b77p5ve71+FNf+zHnu+FMj817Hl5HnjJ/ng8WfOOax7MefwR7+Pv8av66JTS75WOq+nOT1AR/xxGabeWoyf037+hy/l8/+Vd66lxjOg01Mz7vOVX728ZP3Yr0VCbozLD98XgyPrjpxxK4x5LKPTVz2Hu3jX+utecRR961fNGr1eeMjl3mv4+McmWes67v3/sgfj6yos8ZzfvZjmd+r3B/xJT5zbMdk3vmcfz1n4lZf53Eu7NW5spf62buqdXN/vY7OJy+5OThH4vGtlpyOTXwG58fevffHxJPDudbnSt7qT4Xk9CD2ytexnLPPT05qJPbqfPg6n1h8qdPzrMlj72q/fT3v3DU/cVwXOcRjk3M12CcPi5+crNtHHPucn3XHxtfrnmcvtdZ6iemaWZOHvbnOHEcBuP0XTDpUXgBYutZ13X7y2kf8lU3cz8RSI69C8mLxY/FdxcXXcdTBh1391GT/LftWLM+J/D7P1RzfWzUf1cLfdj0/e12fmCvb8ez3c4yPmNWy9z9vk/+WxW2Qmz9Iicfyx+g/b77/9+rnD9dqb9tf/3iRF9txicn60X7HMu9Y8qlBzCOb+OSvz+Mqntiuje+RvapDfnJ6/3vPoc+RzjK5Gev1v1Vnje3zrx127/U85/zR8/dzuXquXZfzr8+R9bHfPMLXNAXgpx+3e878wD/9tXqBH0/g9h9O//d21v96O/LHpwfr2LwGI3T/5/Z6/N8d5FwCEpghcJSwzSCzigQeEmjhajFLAl1b/BwPC7khAQm8n4DC9n52ZkpgJYBgxUbIesSXQcx95aMEJDBOQGEbR2rBwwlwu/vqPbagQfQQusNxefkSmCegsM0zteK5BOjGrsQLISPmXEpeuQQ2E1DYNgO2/FEE0q3RsWEDIPN+jy0+hC5zhwQkMEhAYRuEaanjCXQ31mIWMAjZao+HJgAJTBNQ2KaJWu9kAhEtOrV0aHRpfJCkhQ+BO5mX1y6BLQQUti1YLXoogVW4ELTg6D3Wh2LysiWwl4DCtpev1c8ikG5tvQWZT0ciarF0cZk7JCCBDQQUtg1QLXk0gQgW4hYQfO1Ri9rRgLx4CewmoLDtJmz9kwhExBC12Aw6tPvq/hiRs2NrIs4lMEhAYRuEaanjCSBYLVrrPOsrsTsengAkMEVAYZsiaR0J/Pt7aWGCkPU83VwLXvYcEpDAEAGFbQikZSRwIxCx4hZkC9c677XgJCCBYQIK2zBQyx1NIKKW99lyqzFHRkSMW4/47Nhe0PgggT0EFLY9XK16JoGIGN0YNiSYt2V+JimvWgIbCShsG+Fa+jgCEat0Y2vHFhB0bYlhHr9DAhIYJqCwDQO13NEEIlociFvWDPZ4Hw6/VgISGCSgsA3CtNTxBHjvDDHjW0cicuxlnkHMfeWjBCQwRkBhG0NpIQm8EOhu7B83D0IGHgQNi18rAQkMEVDYhkBaRgI3AhG1FjagRMQicG0VNuhoJTBMQGEbBmq5owlErFbBYr3ao0F58RLYSUBh20nX2qcRQNhi6dDCgDk2vqvOLn6HBCTwJAGF7UmApkugCETQECw6tGwzx1aKUwlIYJqAwjZN1HonE+A9tu7M4IEPiwCyr5WABIYIKGxDIC0jgRuBiFW6sqvODB9WYBKQwCYCCtsmsJY9kkBEK+JGVxYIzGMZCCBrrQQkMEhAYRuEaanjCUTY8iXI/3E76MxWG0jx4c/aIQEJDBJQ2AZhWup4AnRi+YfZ+daRq5GYDIXtzsFHCYwTUNjGkVrwcAII1ipu+GP7tuThuLx8CcwTUNjmmVrxXALpxujIIl65LZnB+2zM6exeNn2QgARmCShsszytdjaBdGPdmdGdtY9uDd/ZxLx6CWwgoLBtgGrJYwlErLpjy3oVsKy7gzsWlhcugV0EFLZdZK17IoEWslXQmgfi1z7nEpDAEAGFbQikZSRwI8B7Z4jaVWfmrUhfKhLYTEBh2wzY8kcRiKB1N5Y5QgYIRA+LXysBCQwRUNiGQFpGAjcCq7ABJX66N2wLIHFaCUhggIDCNgDREhJ4JcCtyAZCZ7bajnEuAQkMElDYBmFa6ngCEbb827V0ZXRmgZI5IwLHgU8rAQkMElDYBmFa6ngCCFYErr9Si24tgJhjj4cmAAlME1DYpola72QCESveO+NbRx7xUNgekdEvgScJKGxPAjRdAkUgYsXRtx8TEv/qi98hAQkME1DYhoFa7mgCES86tsyvBn7sVYw+CUjgCQIK2xPwTJXAQgBhozNDvFgjelmzt5RwKQEJPEtAYXuWoPkS+EYgwhXBQrQQsKyZJ7pjsnZIQAKDBBS2QZiWOp5ACxZiFiiP5scDE4AEdhBQ2HZQteapBCJgfbvxrXliHRKQwAYCCtsGqJY8lkDECsFi3rcgA6b3jwXlhUtgJwGFbSdda59GIP92rbs0xG3lsIrduu9aAhJ4goDC9gQ8UyWwEIiQRdzyrSN0ZkvIyzIxb+1f5eiTgAR+kIDC9oOgDJPADxCgQ+NbR1aBazHr+Q+UNkQCEvhRAgrbj5IyTgLfJ4CwxeZ24z9eU7j1iI1bYXuFo5HANAGFbZqo9U4mELHiPbYWLubYMOr5ycy8dgmME1DYxpFa8GACEasIG51ZbEaLGL77jo8SkMA4AYVtHKkFDyYQUYuIIWTYRoIP23vOJSCBAQIK2wBES0jglUDEahWsrOngEkbHtsZlzyEBCQwQUNgGIFpCAq8EIlZ9KxIwq4hlvfqI1UpAAk8SUNieBGi6BIoAgoW41daLkHXn1nvOJSCBQQIK2yBMSx1PIIKWI+OtjgwBvEf6KAEJjBJQ2EZxWuxwAqtgIW68r4boZc38cGRevgTmCShs80yteC6BfONIDoSMW48RuJ6fS8grl8AHEFDYPgCypziGAB1bd2P5Wi3WiFuA0M0dA8cLlcBHEVDYPoq05zmFACLG9fK9kVm3mPWcWK0EJDBAQGEbgGgJCbwSiKjRtdGdxTIQM/bwayUggUECCtsgTEsdTyDCxXtsiBg2cDJX1ELCIYGNBBS2jXAtfRwBRCy2Ray7Nm5VEnscJC9YArsJKGy7CVv/JAIRK4Qr1414YWFh1wYJrQQ2EFDYNkC15LEEImAcLV7dsWW/946F5YVLYBcBhW0XWeueSCDdGh1bd2k9DxfE70RGXrMEthNQ2LYj9gQHEYhgRdjoyK46tYNweKkS+DUEFLZfw92zfk4C+UQk3VhEje6Nq6Vz686OPa0EJDBEQGEbAmkZCdwI0LHF5htHMjLvDg6xQ+RegnyQgATmCChscyytJIEQ4N+x0b1d3Y5U1HytSGAjAYVtI1xLH0eAbgxLpxYQiFl3cMcB8oIl8BEEFLaPoOw5TiEQ0aJjyzUjZuv1x/9ob411LQEJ/CQBhe0ngRkugTcIrIKFeHXnlvR1/UZJtyQggZ8loLD9LDHjJfCYQG5BruKWaASOzHWNXysBCQwQUNgGIFpCAq8EELVHwtWd2qMYYUpAAk8SUNieBGi6BIpAxIoPjpT767TFrOdfA5xIQALPE1DYnmdoBQlAIGLFQXcWy0DM2MOvlYAEBgkobIMwLXU8gQhXd2yI3ArmkX+Ncy0BCbyDgML2DmimSOABgXzUP0e+dSQCR2e2dm0K2w2OQwK7CChsu8ha90QCCNY/bhePmCFudHL4E+uQgAQ2EFDYNkC15NEEELBAQLwQt/YdDcmLl8BOAgrbTrrWPo1ARK1vQXL97UPkED1itBKQwBABhW0IpGUkcCPArUhECxELHHzMex2fQwISGCKgsA2BtIwEbgTSmSFuiFrWmTPYV9ggopXAMAGFbRio5Y4msIpWi1fPj4bkxUtgNwGFbTdh659EIOKVri0DkaNzu3u/PSp031g4k8AoAYVtFKfFDieAmCFaLWr4gqj9hyPz8iUwT0Bhm2dqxXMJRLzo2EKhxaypxP9or+OcS0AC7yCgsL0DmikSeEAg3zrCR/sTgnitHdq6flBOtwQk8B4CCtt7qJkjgWsCETI+GZmv1WIgcFlnzsG+VgISGCSgsA3CtNTxBBC2gEj35pCABH4BAYXtF0D3lJ+WAN1aBC63GzOYY/H1e3EvgT5IQAIzBBS2GY5WkQAEImAc7cs8fkbP8WklIIEBAgrbAERLSOCVQMSKW5DdsWWbD4ys/tdUjQQkMEVAYZsiaR0JfPvgSFhE5BAz2MRnpwYNrQQ2EVDYNoG17JEE1vfYELIIHO+p2bEd+dLwoj+SgML2kbQ91wkEELBca3dnzLEnsPAaJfBLCChsvwS7J/2kBCJaEbb1FmT72FPgPumLwMv69QQUtl//M/AZfB4CESsEKxYRyxXiZ97r+BwSkMAQAYVtCKRlJHAjkE9ERrAQLea8rxZI+PqWZfwOCUhgiIDCNgTSMhK4EYho8XH/ALkStPgdEpDARgIK20a4lj6OQLqwfj+tAXBbEktX1zHOJSCBAQIK2wBES0igCHCrsVwvU4RstWucawlI4EkCCtuTAE2XQBG46tjo0LwtWaCcSmAnAYVtJ11rn0agu7W1M2N9GhOvVwIfTkBh+3DknvATE0DYeJ/t0aUmLjEOCUhgAwGFbQNUSx5LoAXLDu3Yl4EX/qsJKGy/+ifg+T8TgXRhdG28p5b1+j4bMZ/p2r0WCfw2BBS23+ZH4RP5BAQQLGwuKaLGrcm+/ZgYhwQksIGAwrYBqiWPJRCxyj/QplsLCEQNseu97DskIIFhAgrbMFDLHU0gIpbj77cjQsYtSOY318s+cVk7JCCBYQIK2zBQyx1NIIIVEfvHKwWEraHQsSXOIQEJbCCgsG2AasmjCUTcGJkjZPgUNEhoJbCJgMK2CaxljySw3mKkY+NWZFsF7siXiBf9EQQUto+g7DlOIRCxasG6muPDnsLG65TAhxFQ2D4MtSc6gEDEioNuLZfdtyMRNOwBWLxECXwsAYXtY3l7ts9NIGLFe2wtXD3/3AS8Ogn8BgQUtt/gh+BT+DQEELa1W4sfH1ax+zQ/di/kdyOgsP1uPxGfz1+ZQLq1CNYqWu1jD/tXvl6fuwR+SwIK22/5Y/FJ/UUJRKz6I/5Z06HFMuJX2KChlcAwAYVtGKjljieAYD2yAGKftVYCEhgioLANgbSMBG4E8o0j/E7la7XWwQdL4lfYVjquJTBEgF/CoXKWkcDxBBCsiBy3H+Nb58QdD0wAEpgmoLBNE7XeyQTSkdGV8d4aotZ+5iez8tolsI2AwrYNrYUPJBARoxPDBsPVvH0HovKSJbCPgMK2j62VzyMQsaIbo2O7ovDW3lW8PglI4CcIKGw/ActQCXyHQISNTgx7ldJxV/v6JCCBJwgobE/AM1UCC4F0ay1adGbYhGee8Zbw3SN8lIAE3kVAYXsXNpMkcEkgYsWtyAQgXtj2Ze6QgAQ2EFDYNkC15LEEEDY6tO7O2pe4FrtjgXnhEthBQGHbQdWapxJAsFq0mGPDhrhTOXndEthKQGHbitfihxH45+168zsV4UqHxm1JOreb68WnsIWEQwKbCChsm8Ba9lgCEbceiFxsBiLH+u71UQISGCOgsI2htJAEXrqxdGm8nwaSVcSyXn3EaiUggScJKGxPAjRdAkUAwULcauvr7UkEDdsxziUggQECCtsAREtI4JVAxIr31d4Sruy9tS9QCUjgCQIK2xPwTJXAQmAVLMSL99UQPdZLuksJSGCCgMI2QdEaErgTWG9B8l5bBI55IlcBvGf7KAEJjBBQ2EYwWkQCLwRasBCzbFzN43NIQAIbCChsG6Ba8lgCCBtCxjrdWt+GZH4sKC9cAjsJKGw76Vr7NAIRMkQrc8bVvH3EaSUggQECCtsAREtI4JVAC1u/p7YCemtvjXUtAQn8JAGF7SeBGS6BNwjkW0f+/rof8boaVx3dVZw+CUjgnQQUtneCM00CFwS6Y7vY/uqyY/uKwokE5gkobPNMrXguAd43i23x6u5t3TuXllcugU0EFLZNYC17JIGIVosbEPD1evWxp5WABJ4koLA9CdB0CRQBhI1u7apTq3CnEpDADgIK2w6q1jyVQH8wJKLGunnYqTUN5xLYQEBh2wDVkscSaNF6mf/xxx9fbuNm7vZYMl64BCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQn8NQn8fyHnyuSABiy2AAAAAElFTkSuQmCC";class t0 extends We{constructor(e,t){const n=new Ze({opacity:0,color:0,transparent:!1,side:It}),o=new ea(e,t);super(o,n),p(this,"name","opacity-mesh")}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}}const Lh=i=>i?i.visible===!1?!1:Lh(i.parent):!0,i0=1,hu=`CSS3DObjectPlus@${i0}`,by=.00216,wy=.003;let n0=class extends Ln{constructor(i){var e,t,n,o,s;if(Oi(i.cornerPoints)&&Oi(i.width))throw new Error("cornerPoints and width cannot be both empty");const r=(e=i.container)!=null?e:document.createElement("div"),a=(t=i.cornerPoints)!=null?t:(()=>{const M=i.width/2;return[new R(-M,M,0),new R(-M,-M,0),new R(M,-M,0),new R(M,M,0)]})(),l=(n=i.ratio)!=null?n:wy,c=(o=i.dpr)!=null?o:1,h=(s=i.pointerEvents)!=null?s:"auto",d=Math.max(by,l),u=a[0].distanceTo(a[1]),f=a[1].distanceTo(a[2]),m=Ls(u/l*c),g=Ls(f/l*c),v=qt(...a);let A;if(d===l)r.style.width=`${m}px`,r.style.height=`${g}px`,A=r;else{const M=document.createElement("div");M.style.width=`${m}px`,M.style.height=`${g}px`,M.style.pointerEvents="none";const O=l/d;r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.width=`${O*m}px`,r.style.height=`${O*g}px`,M.appendChild(r),A=M}if(super(A),p(this,"version",i0),p(this,"isCSS3DObjectPlus",!0),p(this,"isCSS3DObject",!0),p(this,"name",hu),p(this,"container"),p(this,"width"),p(this,"height"),p(this,"domWidthPx"),p(this,"domHeightPx"),p(this,"cornerPoints"),p(this,"centerPosition"),p(this,"ratio"),p(this,"mode","front"),p(this,"hooks",new Mt),p(this,"opacityMesh"),p(this,"selfVisible",!0),p(this,"setVisible",M=>{this.selfVisible=M,this.visible=Lh(this.parent)&&this.selfVisible,this.opacityMesh&&(this.opacityMesh.visible=this.visible)}),p(this,"updateVisible",()=>{this.setVisible(this.selfVisible)}),p(this,"createOpacityMesh",M=>{const{domWidthPx:O,domHeightPx:y}=M,C=new t0(O,y);return C.position.copy(M.position),C.rotation.copy(M.rotation),C.scale.copy(M.scale),C}),r.style.pointerEvents=h,Object.assign(r.style,i.style),this.scale.set(d,d,d),this.cornerPoints=a,this.ratio=l,this.container=r,i.mode&&(this.mode=i.mode),d===l)this.width=u,this.height=f,this.domWidthPx=m,this.domHeightPx=g,this.centerPosition=v;else{const M=l/d;this.width=M*u,this.height=M*f,this.domWidthPx=M*m,this.domHeightPx=M*g,this.centerPosition=new R().subVectors(v,a[0]).multiplyScalar(M).add(a[0])}r.classList.add(`${hu}__container`);const w=new R().subVectors(a[1],a[0]),P=new R().subVectors(a[3],a[0]),I=new R().crossVectors(w,P).normalize();this.lookAt(I);const j=this.up.clone().applyQuaternion(this.quaternion),D=P.clone(),T=new R().crossVectors(j,D).normalize();this.rotateOnWorldAxis(T,j.angleTo(D)),this.position.copy(v),this.addEventListener("added",()=>{var M;this.mode==="front"&&((M=this.opacityMesh)==null||M.removeFromParent())}),this.addEventListener("removed",()=>{var M;(M=this.opacityMesh)==null||M.removeFromParent()})}removeFromParent(){var i;const e=this.parent;return e!==null&&e.remove(this),(i=this.opacityMesh)==null||i.removeFromParent(),this}removeOpacityMesh(){var i;return(i=this.opacityMesh)==null||i.removeFromParent(),this.opacityMesh=void 0,this}dispose(){var i;this.container.remove(),this.removeFromParent(),(i=this.opacityMesh)==null||i.removeFromParent()}getOpacityMesh(){if(this.opacityMesh)return this.opacityMesh;{const i=this.createOpacityMesh(this);return this.opacityMesh=i,i}}applyMatrix4(i){var e;super.applyMatrix4(i),(e=this.opacityMesh)==null||e.applyMatrix4(i)}applyQuaternion(i){var e;return super.applyQuaternion(i),(e=this.opacityMesh)==null||e.applyQuaternion(i),this}applyScaleMatrix4(i){var e;this.scale.applyMatrix4(i),(e=this.opacityMesh)==null||e.scale.applyMatrix4(i)}};const o0="data:image/png;base64,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",xy="data:image/png;base64,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",Cy=`
  <style>
  .range-piece__container {
    position: absolute;
    top: 39%;
    left: 50%;
    margin-left: -54px;
    width: 108px;
    height: 108px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: pieceContainer 0.3s ease-in-out;
    animation-fill-mode: forwards;
  }
  .range-piece__content {
    width: 100%;
    height: 100%;
    background-image: url(${o0});
    opacity: 0.4;
    background-size: 100%;
    background-repeat: no-repeat;
    transition: linear transform 0.1s;
  }
  .range-piece__content--active {
    animation: dotting ease-in-out 0.5s;
  }
  .range-piece__aim {
    width: 100%;
    height: 100%;
    opacity: 1;
    position: absolute;
    background: url(${xy}) center / contain no-repeat;
  }
  @keyframes dotting {
    0% {
      opacity: 0.4;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(0.8);
    }
    100% {
      opacity: 0.4;
      transform: scale(1);
    }
  }
  @keyframes pieceContainer {
    from {
      top: 49%;
    }
    to {
      top: 39%;
    }
  }
  </style>
  <div class="range-piece__container">
    <div class='range-piece__content'></div>
    <div class="range-piece__aim"></div>
  </div>
`,Py=`
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`,Ey=`
varying vec2 vUv;
void main() {
  vec2 uv = vec2(vUv.x, vUv.y);
  float a = 1.0;
  float match = 1.0 - uv.x;
  gl_FragColor = vec4(1.0,1.0,1.0,match);
}
`;function Iy(){const i=new ea(.4,.4),e=e0,t=new Ao().load(e);t.encoding=on,t.minFilter=zi;const n=new Ze({map:t,transparent:!0,depthTest:!1});return new We(i,n)}function My(){const i=new ta;i.add(new ia(new R(0,0,0),new R(0,0,.1)));const e=new wl(i,8,.003),t=new Bi({vertexShader:Py,fragmentShader:Ey,depthTest:!1,transparent:!0});return new We(e,t)}function Sy(){const i=new Xo(.01,20,20),e=new Ze({color:10349931,depthTest:!1,transparent:!0,side:It}),t=new We(i,e);return t.position.set(0,0,.1),t}function Dy(){const i=new n0({pointerEvents:"none",cornerPoints:[new R(-.2,.2,0),new R(-.2,-.2,0),new R(.2,-.2,0),new R(.2,.2,0)]}),e=document.createElement("div");return e.style.width="100%",e.style.height="100%",e.style.backgroundImage=`url(${o0})`,e.style.backgroundSize="100%",e.style.backgroundRepeat="no-repeat",i.container.appendChild(e),i}class s0 extends fi{constructor(e){super(),p(this,"planeMesh"),p(this,"lineMesh"),p(this,"ballMesh"),p(this,"borderMesh"),p(this,"five"),this.planeMesh=Iy(),this.lineMesh=My(),this.ballMesh=Sy(),this.borderMesh=Dy(),this.addEventListener("added",()=>{this.add(this.planeMesh,this.lineMesh,this.ballMesh,this.borderMesh)}),this.addEventListener("removed",()=>{this.remove(this.planeMesh,this.lineMesh,this.ballMesh,this.borderMesh)}),oa(e),this.five=e}updateWithIntersect(e){var t;const n=(t=e==null?void 0:e.face)!=null&&t.normal?new R().addVectors(e.point,e.face.normal):this.five.camera.position;this.position.copy(e.point),this.lookAt(n)}show(){this.visible=!0,this.borderMesh.parent||this.add(this.borderMesh)}hide(){this.visible=!1,this.remove(this.borderMesh)}dispose(){var e;(e=this.planeMesh.material.map)==null||e.dispose()}}class r0 extends fi{constructor(){super(...arguments),p(this,"children",[])}getRaycastIntersects(e){const t=[];return this.raycast(e,t),t}getRaycastIntersection(e){return this.getRaycastIntersects(e)[0]}}class a0 extends Og{constructor(e,t){super(e,t)}}const ic=new R;class ky extends PA{expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ic.subVectors(e,this.center);const t=ic.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),o=(n-this.radius)*.5;this.center.addScaledVector(ic,o/n),this.radius+=o}return this}}function zy(i){const{max:e,min:t}=i;return[new R(e.x,e.y,e.z),new R(t.x,e.y,e.z),new R(t.x,t.y,e.z),new R(e.x,t.y,e.z),new R(e.x,e.y,t.z),new R(t.x,e.y,t.z),new R(t.x,t.y,t.z),new R(e.x,t.y,t.z)]}function to(i,e){const{max:t,min:n}=i;switch(e){case 0:return new R(t.x,t.y,t.z);case 1:return new R(n.x,t.y,t.z);case 2:return new R(n.x,n.y,t.z);case 3:return new R(t.x,n.y,t.z);case 4:return new R(t.x,t.y,n.z);case 5:return new R(n.x,t.y,n.z);case 6:return new R(n.x,n.y,n.z);case 7:return new R(t.x,n.y,n.z)}}function ts(i){return Th(i,"box3")}function l0(i){return Th(i,"sphere")}function Hc(i){return El(i,"box3")}function c0(i){return El(i,"sphere")}function El(i,e){const t=e==="box3"?new Ch:new ky,n=new R;if(i.updateWorldMatrix(!1,!1),i.traverse(o=>{var s;if(o.name==="shadow"||o.type==="Line2")return;const r=o.geometry;if(o.updateWorldMatrix(!1,!1),r!==void 0){const a=(s=r==null?void 0:r.attributes)==null?void 0:s.position;if(a)for(let l=0,c=a.count;l<c;l++)n.fromBufferAttribute(a,l).applyMatrix4(o.matrixWorld),t.expandByPoint(n);else r.vertices&&r.vertices.forEach(l=>{const c=l.clone().applyMatrix4(o.matrixWorld);t.expandByPoint(c)})}}),!t.isEmpty())return t}function Th(i,e){const t=El(i,e);return t&&t.applyMatrix4(jy(i.matrixWorld.clone())),t}const jy=i=>{const e=i.elements,t=e[0],n=e[1],o=e[2],s=e[3],r=e[4],a=e[5],l=e[6],c=e[7],h=e[8],d=e[9],u=e[10],f=e[11],m=e[12],g=e[13],v=e[14],A=e[15],w=d*v*c-g*u*c+g*l*f-a*v*f-d*l*A+a*u*A,P=m*u*c-h*v*c-m*l*f+r*v*f+h*l*A-r*u*A,I=h*g*c-m*d*c+m*a*f-r*g*f-h*a*A+r*d*A,j=m*d*l-h*g*l-m*a*u+r*g*u+h*a*v-r*d*v,D=t*w+n*P+o*I+s*j;if(D===0)return i.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/D;return e[0]=w*T,e[1]=(g*u*s-d*v*s-g*o*f+n*v*f+d*o*A-n*u*A)*T,e[2]=(a*v*s-g*l*s+g*o*c-n*v*c-a*o*A+n*l*A)*T,e[3]=(d*l*s-a*u*s-d*o*c+n*u*c+a*o*f-n*l*f)*T,e[4]=P*T,e[5]=(h*v*s-m*u*s+m*o*f-t*v*f-h*o*A+t*u*A)*T,e[6]=(m*l*s-r*v*s-m*o*c+t*v*c+r*o*A-t*l*A)*T,e[7]=(r*u*s-h*l*s+h*o*c-t*u*c-r*o*f+t*l*f)*T,e[8]=I*T,e[9]=(m*d*s-h*g*s-m*n*f+t*g*f+h*n*A-t*d*A)*T,e[10]=(r*g*s-m*a*s+m*n*c-t*g*c-r*n*A+t*a*A)*T,e[11]=(h*a*s-r*d*s-h*n*c+t*d*c+r*n*f-t*a*f)*T,e[12]=j*T,e[13]=(h*g*o-m*d*o+m*n*u-t*g*u-h*n*v+t*d*v)*T,e[14]=(m*a*o-r*g*o-m*n*l+t*g*l+r*n*v-t*a*v)*T,e[15]=(r*d*o-h*a*o+h*n*l-t*d*l-r*n*u+t*a*u)*T,i};var h0={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Oh={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Ly=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],qa={CSS:{},springs:{}};function sn(i,e,t){return Math.min(Math.max(i,e),t)}function Mr(i,e){return i.indexOf(e)>-1}function nc(i,e){return i.apply(null,e)}var He={arr:function(i){return Array.isArray(i)},obj:function(i){return Mr(Object.prototype.toString.call(i),"Object")},pth:function(i){return He.obj(i)&&i.hasOwnProperty("totalLength")},svg:function(i){return i instanceof SVGElement},inp:function(i){return i instanceof HTMLInputElement},dom:function(i){return i.nodeType||He.svg(i)},str:function(i){return typeof i=="string"},fnc:function(i){return typeof i=="function"},und:function(i){return typeof i>"u"},nil:function(i){return He.und(i)||i===null},hex:function(i){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(i)},rgb:function(i){return/^rgb/.test(i)},hsl:function(i){return/^hsl/.test(i)},col:function(i){return He.hex(i)||He.rgb(i)||He.hsl(i)},key:function(i){return!h0.hasOwnProperty(i)&&!Oh.hasOwnProperty(i)&&i!=="targets"&&i!=="keyframes"}};function d0(i){var e=/\(([^)]+)\)/.exec(i);return e?e[1].split(",").map(function(t){return parseFloat(t)}):[]}function u0(i,e){var t=d0(i),n=sn(He.und(t[0])?1:t[0],.1,100),o=sn(He.und(t[1])?100:t[1],.1,100),s=sn(He.und(t[2])?10:t[2],.1,100),r=sn(He.und(t[3])?0:t[3],.1,100),a=Math.sqrt(o/n),l=s/(2*Math.sqrt(o*n)),c=l<1?a*Math.sqrt(1-l*l):0,h=1,d=l<1?(l*a+-r)/c:-r+a;function u(m){var g=e?e*m/1e3:m;return l<1?g=Math.exp(-g*l*a)*(h*Math.cos(c*g)+d*Math.sin(c*g)):g=(h+d*g)*Math.exp(-g*a),m===0||m===1?m:1-g}function f(){var m=qa.springs[i];if(m)return m;for(var g=1/6,v=0,A=0;;)if(v+=g,u(v)===1){if(A++,A>=16)break}else A=0;var w=v*g*1e3;return qa.springs[i]=w,w}return e?u:f}function Ty(i){return i===void 0&&(i=10),function(e){return Math.ceil(sn(e,1e-6,1)*i)*(1/i)}}var Oy=function(){var i=11,e=1/(i-1);function t(h,d){return 1-3*d+3*h}function n(h,d){return 3*d-6*h}function o(h){return 3*h}function s(h,d,u){return((t(d,u)*h+n(d,u))*h+o(d))*h}function r(h,d,u){return 3*t(d,u)*h*h+2*n(d,u)*h+o(d)}function a(h,d,u,f,m){var g,v,A=0;do v=d+(u-d)/2,g=s(v,f,m)-h,g>0?u=v:d=v;while(Math.abs(g)>1e-7&&++A<10);return v}function l(h,d,u,f){for(var m=0;m<4;++m){var g=r(d,u,f);if(g===0)return d;var v=s(d,u,f)-h;d-=v/g}return d}function c(h,d,u,f){if(!(0<=h&&h<=1&&0<=u&&u<=1))return;var m=new Float32Array(i);if(h!==d||u!==f)for(var g=0;g<i;++g)m[g]=s(g*e,h,u);function v(A){for(var w=0,P=1,I=i-1;P!==I&&m[P]<=A;++P)w+=e;--P;var j=(A-m[P])/(m[P+1]-m[P]),D=w+j*e,T=r(D,h,u);return T>=.001?l(A,D,h,u):T===0?D:a(A,w,w+e,h,u)}return function(A){return h===d&&u===f||A===0||A===1?A:s(v(A),d,f)}}return c}(),p0=function(){var i={linear:function(){return function(n){return n}}},e={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Expo:function(){return function(n){return n?Math.pow(2,10*n-10):0}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var o,s=4;n<((o=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((o*3-2)/22-n,2)}},Elastic:function(n,o){n===void 0&&(n=1),o===void 0&&(o=.5);var s=sn(n,1,10),r=sn(o,.1,2);return function(a){return a===0||a===1?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-r/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/r)}}},t=["Quad","Cubic","Quart","Quint"];return t.forEach(function(n,o){e[n]=function(){return function(s){return Math.pow(s,o+2)}}}),Object.keys(e).forEach(function(n){var o=e[n];i["easeIn"+n]=o,i["easeOut"+n]=function(s,r){return function(a){return 1-o(s,r)(1-a)}},i["easeInOut"+n]=function(s,r){return function(a){return a<.5?o(s,r)(a*2)/2:1-o(s,r)(a*-2+2)/2}},i["easeOutIn"+n]=function(s,r){return function(a){return a<.5?(1-o(s,r)(1-a*2))/2:(o(s,r)(a*2-1)+1)/2}}}),i}();function Rh(i,e){if(He.fnc(i))return i;var t=i.split("(")[0],n=p0[t],o=d0(i);switch(t){case"spring":return u0(i,e);case"cubicBezier":return nc(Oy,o);case"steps":return nc(Ty,o);default:return nc(n,o)}}function f0(i){try{var e=document.querySelectorAll(i);return e}catch{return}}function Il(i,e){for(var t=i.length,n=arguments.length>=2?arguments[1]:void 0,o=[],s=0;s<t;s++)if(s in i){var r=i[s];e.call(n,r,s,i)&&o.push(r)}return o}function Ml(i){return i.reduce(function(e,t){return e.concat(He.arr(t)?Ml(t):t)},[])}function du(i){return He.arr(i)?i:(He.str(i)&&(i=f0(i)||i),i instanceof NodeList||i instanceof HTMLCollection?[].slice.call(i):[i])}function Bh(i,e){return i.some(function(t){return t===e})}function Hh(i){var e={};for(var t in i)e[t]=i[t];return e}function Nc(i,e){var t=Hh(i);for(var n in i)t[n]=e.hasOwnProperty(n)?e[n]:i[n];return t}function Sl(i,e){var t=Hh(i);for(var n in e)t[n]=He.und(i[n])?e[n]:i[n];return t}function Ry(i){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(i);return e?"rgba("+e[1]+",1)":i}function By(i){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,t=i.replace(e,function(a,l,c,h){return l+l+c+c+h+h}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),o=parseInt(n[1],16),s=parseInt(n[2],16),r=parseInt(n[3],16);return"rgba("+o+","+s+","+r+",1)"}function Hy(i){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(i)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(i),t=parseInt(e[1],10)/360,n=parseInt(e[2],10)/100,o=parseInt(e[3],10)/100,s=e[4]||1;function r(u,f,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?u+(f-u)*6*m:m<1/2?f:m<2/3?u+(f-u)*(2/3-m)*6:u}var a,l,c;if(n==0)a=l=c=o;else{var h=o<.5?o*(1+n):o+n-o*n,d=2*o-h;a=r(d,h,t+1/3),l=r(d,h,t),c=r(d,h,t-1/3)}return"rgba("+a*255+","+l*255+","+c*255+","+s+")"}function Ny(i){if(He.rgb(i))return Ry(i);if(He.hex(i))return By(i);if(He.hsl(i))return Hy(i)}function zn(i){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(i);if(e)return e[1]}function Fy(i){if(Mr(i,"translate")||i==="perspective")return"px";if(Mr(i,"rotate")||Mr(i,"skew"))return"deg"}function Fc(i,e){return He.fnc(i)?i(e.target,e.id,e.total):i}function rn(i,e){return i.getAttribute(e)}function Nh(i,e,t){var n=zn(e);if(Bh([t,"deg","rad","turn"],n))return e;var o=qa.CSS[e+t];if(!He.und(o))return o;var s=100,r=document.createElement(i.tagName),a=i.parentNode&&i.parentNode!==document?i.parentNode:document.body;a.appendChild(r),r.style.position="absolute",r.style.width=s+t;var l=s/r.offsetWidth;a.removeChild(r);var c=l*parseFloat(e);return qa.CSS[e+t]=c,c}function m0(i,e,t){if(e in i.style){var n=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=i.style[e]||getComputedStyle(i).getPropertyValue(n)||"0";return t?Nh(i,o,t):o}}function Fh(i,e){if(He.dom(i)&&!He.inp(i)&&(!He.nil(rn(i,e))||He.svg(i)&&i[e]))return"attribute";if(He.dom(i)&&Bh(Ly,e))return"transform";if(He.dom(i)&&e!=="transform"&&m0(i,e))return"css";if(i[e]!=null)return"object"}function g0(i){if(He.dom(i)){for(var e=i.style.transform||"",t=/(\w+)\(([^)]*)\)/g,n=new Map,o;o=t.exec(e);)n.set(o[1],o[2]);return n}}function Vy(i,e,t,n){var o=Mr(e,"scale")?1:0+Fy(e),s=g0(i).get(e)||o;return t&&(t.transforms.list.set(e,s),t.transforms.last=e),n?Nh(i,s,n):s}function Vh(i,e,t,n){switch(Fh(i,e)){case"transform":return Vy(i,e,n,t);case"css":return m0(i,e,t);case"attribute":return rn(i,e);default:return i[e]||0}}function Wh(i,e){var t=/^(\*=|\+=|-=)/.exec(i);if(!t)return i;var n=zn(i)||0,o=parseFloat(e),s=parseFloat(i.replace(t[0],""));switch(t[0][0]){case"+":return o+s+n;case"-":return o-s+n;case"*":return o*s+n}}function v0(i,e){if(He.col(i))return Ny(i);if(/\s/g.test(i))return i;var t=zn(i),n=t?i.substr(0,i.length-t.length):i;return e?n+e:n}function Gh(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function Wy(i){return Math.PI*2*rn(i,"r")}function Gy(i){return rn(i,"width")*2+rn(i,"height")*2}function Qy(i){return Gh({x:rn(i,"x1"),y:rn(i,"y1")},{x:rn(i,"x2"),y:rn(i,"y2")})}function A0(i){for(var e=i.points,t=0,n,o=0;o<e.numberOfItems;o++){var s=e.getItem(o);o>0&&(t+=Gh(n,s)),n=s}return t}function Uy(i){var e=i.points;return A0(i)+Gh(e.getItem(e.numberOfItems-1),e.getItem(0))}function y0(i){if(i.getTotalLength)return i.getTotalLength();switch(i.tagName.toLowerCase()){case"circle":return Wy(i);case"rect":return Gy(i);case"line":return Qy(i);case"polyline":return A0(i);case"polygon":return Uy(i)}}function Xy(i){var e=y0(i);return i.setAttribute("stroke-dasharray",e),e}function Yy(i){for(var e=i.parentNode;He.svg(e)&&He.svg(e.parentNode);)e=e.parentNode;return e}function b0(i,e){var t=e||{},n=t.el||Yy(i),o=n.getBoundingClientRect(),s=rn(n,"viewBox"),r=o.width,a=o.height,l=t.viewBox||(s?s.split(" "):[0,0,r,a]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:r,h:a,vW:l[2],vH:l[3]}}function qy(i,e){var t=He.str(i)?f0(i)[0]:i,n=e||100;return function(o){return{property:o,el:t,svg:b0(t),totalLength:y0(t)*(n/100)}}}function Zy(i,e,t){function n(h){h===void 0&&(h=0);var d=e+h>=1?e+h:0;return i.el.getPointAtLength(d)}var o=b0(i.el,i.svg),s=n(),r=n(-1),a=n(1),l=t?1:o.w/o.vW,c=t?1:o.h/o.vH;switch(i.property){case"x":return(s.x-o.x)*l;case"y":return(s.y-o.y)*c;case"angle":return Math.atan2(a.y-r.y,a.x-r.x)*180/Math.PI}}function uu(i,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=v0(He.pth(i)?i.totalLength:i,e)+"";return{original:n,numbers:n.match(t)?n.match(t).map(Number):[0],strings:He.str(i)||e?n.split(t):[]}}function Qh(i){var e=i?Ml(He.arr(i)?i.map(du):du(i)):[];return Il(e,function(t,n,o){return o.indexOf(t)===n})}function w0(i){var e=Qh(i);return e.map(function(t,n){return{target:t,id:n,total:e.length,transforms:{list:g0(t)}}})}function Jy(i,e){var t=Hh(e);if(/^spring/.test(t.easing)&&(t.duration=u0(t.easing)),He.arr(i)){var n=i.length,o=n===2&&!He.obj(i[0]);o?i={value:i}:He.fnc(e.duration)||(t.duration=e.duration/n)}var s=He.arr(i)?i:[i];return s.map(function(r,a){var l=He.obj(r)&&!He.pth(r)?r:{value:r};return He.und(l.delay)&&(l.delay=a?0:e.delay),He.und(l.endDelay)&&(l.endDelay=a===s.length-1?e.endDelay:0),l}).map(function(r){return Sl(r,t)})}function Ky(i){for(var e=Il(Ml(i.map(function(s){return Object.keys(s)})),function(s){return He.key(s)}).reduce(function(s,r){return s.indexOf(r)<0&&s.push(r),s},[]),t={},n=function(s){var r=e[s];t[r]=i.map(function(a){var l={};for(var c in a)He.key(c)?c==r&&(l.value=a[c]):l[c]=a[c];return l})},o=0;o<e.length;o++)n(o);return t}function _y(i,e){var t=[],n=e.keyframes;n&&(e=Sl(Ky(n),e));for(var o in e)He.key(o)&&t.push({name:o,tweens:Jy(e[o],i)});return t}function $y(i,e){var t={};for(var n in i){var o=Fc(i[n],e);He.arr(o)&&(o=o.map(function(s){return Fc(s,e)}),o.length===1&&(o=o[0])),t[n]=o}return t.duration=parseFloat(t.duration),t.delay=parseFloat(t.delay),t}function eb(i,e){var t;return i.tweens.map(function(n){var o=$y(n,e),s=o.value,r=He.arr(s)?s[1]:s,a=zn(r),l=Vh(e.target,i.name,a,e),c=t?t.to.original:l,h=He.arr(s)?s[0]:c,d=zn(h)||zn(l),u=a||d;return He.und(r)&&(r=c),o.from=uu(h,u),o.to=uu(Wh(r,h),u),o.start=t?t.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=Rh(o.easing,o.duration),o.isPath=He.pth(s),o.isPathTargetInsideSVG=o.isPath&&He.svg(e.target),o.isColor=He.col(o.from.original),o.isColor&&(o.round=1),t=o,o})}var x0={css:function(i,e,t){return i.style[e]=t},attribute:function(i,e,t){return i.setAttribute(e,t)},object:function(i,e,t){return i[e]=t},transform:function(i,e,t,n,o){if(n.list.set(e,t),e===n.last||o){var s="";n.list.forEach(function(r,a){s+=a+"("+r+") "}),i.style.transform=s}}};function C0(i,e){var t=w0(i);t.forEach(function(n){for(var o in e){var s=Fc(e[o],n),r=n.target,a=zn(s),l=Vh(r,o,a,n),c=a||zn(l),h=Wh(v0(s,c),l),d=Fh(r,o);x0[d](r,o,h,n.transforms,!0)}})}function tb(i,e){var t=Fh(i.target,e.name);if(t){var n=eb(e,i),o=n[n.length-1];return{type:t,property:e.name,animatable:i,tweens:n,duration:o.end,delay:n[0].delay,endDelay:o.endDelay}}}function ib(i,e){return Il(Ml(i.map(function(t){return e.map(function(n){return tb(t,n)})})),function(t){return!He.und(t)})}function P0(i,e){var t=i.length,n=function(s){return s.timelineOffset?s.timelineOffset:0},o={};return o.duration=t?Math.max.apply(Math,i.map(function(s){return n(s)+s.duration})):e.duration,o.delay=t?Math.min.apply(Math,i.map(function(s){return n(s)+s.delay})):e.delay,o.endDelay=t?o.duration-Math.max.apply(Math,i.map(function(s){return n(s)+s.duration-s.endDelay})):e.endDelay,o}var pu=0;function nb(i){var e=Nc(h0,i),t=Nc(Oh,i),n=_y(t,i),o=w0(i.targets),s=ib(o,n),r=P0(s,t),a=pu;return pu++,Sl(e,{id:a,children:[],animatables:o,animations:s,duration:r.duration,delay:r.delay,endDelay:r.endDelay})}var Xi=[],E0=function(){var i;function e(){!i&&(!fu()||!rt.suspendWhenDocumentHidden)&&Xi.length>0&&(i=requestAnimationFrame(t))}function t(o){for(var s=Xi.length,r=0;r<s;){var a=Xi[r];a.paused?(Xi.splice(r,1),s--):(a.tick(o),r++)}i=r>0?requestAnimationFrame(t):void 0}function n(){rt.suspendWhenDocumentHidden&&(fu()?i=cancelAnimationFrame(i):(Xi.forEach(function(o){return o._onDocumentVisibility()}),E0()))}return typeof document<"u"&&document.addEventListener("visibilitychange",n),e}();function fu(){return!!document&&document.hidden}function rt(i){i===void 0&&(i={});var e=0,t=0,n=0,o,s=0,r=null;function a(w){var P=window.Promise&&new Promise(function(I){return r=I});return w.finished=P,P}var l=nb(i);a(l);function c(){var w=l.direction;w!=="alternate"&&(l.direction=w!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,o.forEach(function(P){return P.reversed=l.reversed})}function h(w){return l.reversed?l.duration-w:w}function d(){e=0,t=h(l.currentTime)*(1/rt.speed)}function u(w,P){P&&P.seek(w-P.timelineOffset)}function f(w){if(l.reversePlayback)for(var P=s;P--;)u(w,o[P]);else for(var I=0;I<s;I++)u(w,o[I])}function m(w){for(var P=0,I=l.animations,j=I.length;P<j;){var D=I[P],T=D.animatable,M=D.tweens,O=M.length-1,y=M[O];O&&(y=Il(M,function(je){return w<je.end})[0]||y);for(var C=sn(w-y.start-y.delay,0,y.duration)/y.duration,x=isNaN(C)?1:y.easing(C),S=y.to.strings,k=y.round,z=[],q=y.to.numbers.length,X=void 0,$=0;$<q;$++){var ne=void 0,_=y.to.numbers[$],se=y.from.numbers[$]||0;y.isPath?ne=Zy(y.value,x*_,y.isPathTargetInsideSVG):ne=se+x*(_-se),k&&(y.isColor&&$>2||(ne=Math.round(ne*k)/k)),z.push(ne)}var K=S.length;if(!K)X=z[0];else{X=S[0];for(var me=0;me<K;me++){S[me];var De=S[me+1],he=z[me];isNaN(he)||(De?X+=he+De:X+=he+" ")}}x0[D.type](T.target,D.property,X,T.transforms),D.currentValue=X,P++}}function g(w){l[w]&&!l.passThrough&&l[w](l)}function v(){l.remaining&&l.remaining!==!0&&l.remaining--}function A(w){var P=l.duration,I=l.delay,j=P-l.endDelay,D=h(w);l.progress=sn(D/P*100,0,100),l.reversePlayback=D<l.currentTime,o&&f(D),!l.began&&l.currentTime>0&&(l.began=!0,g("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,g("loopBegin")),D<=I&&l.currentTime!==0&&m(0),(D>=j&&l.currentTime!==P||!P)&&m(P),D>I&&D<j?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,g("changeBegin")),g("change"),m(D)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,g("changeComplete")),l.currentTime=sn(D,0,P),l.began&&g("update"),w>=P&&(t=0,v(),l.remaining?(e=n,g("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&c()):(l.paused=!0,l.completed||(l.completed=!0,g("loopComplete"),g("complete"),!l.passThrough&&"Promise"in window&&(r(),a(l)))))}return l.reset=function(){var w=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=w==="reverse",l.remaining=l.loop,o=l.children,s=o.length;for(var P=s;P--;)l.children[P].reset();(l.reversed&&l.loop!==!0||w==="alternate"&&l.loop===1)&&l.remaining++,m(l.reversed?l.duration:0)},l._onDocumentVisibility=d,l.set=function(w,P){return C0(w,P),l},l.tick=function(w){n=w,e||(e=n),A((n+(t-e))*rt.speed)},l.seek=function(w){A(h(w))},l.pause=function(){l.paused=!0,d()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,Xi.push(l),d(),E0())},l.reverse=function(){c(),l.completed=!l.reversed,d()},l.restart=function(){l.reset(),l.play()},l.remove=function(w){var P=Qh(w);I0(P,l)},l.reset(),l.autoplay&&l.play(),l}function mu(i,e){for(var t=e.length;t--;)Bh(i,e[t].animatable.target)&&e.splice(t,1)}function I0(i,e){var t=e.animations,n=e.children;mu(i,t);for(var o=n.length;o--;){var s=n[o],r=s.animations;mu(i,r),!r.length&&!s.children.length&&n.splice(o,1)}!t.length&&!n.length&&e.pause()}function ob(i){for(var e=Qh(i),t=Xi.length;t--;){var n=Xi[t];I0(e,n)}}function sb(i,e){e===void 0&&(e={});var t=e.direction||"normal",n=e.easing?Rh(e.easing):null,o=e.grid,s=e.axis,r=e.from||0,a=r==="first",l=r==="center",c=r==="last",h=He.arr(i),d=parseFloat(h?i[0]:i),u=h?parseFloat(i[1]):0,f=zn(h?i[1]:i)||0,m=e.start||0+(h?d:0),g=[],v=0;return function(A,w,P){if(a&&(r=0),l&&(r=(P-1)/2),c&&(r=P-1),!g.length){for(var I=0;I<P;I++){if(!o)g.push(Math.abs(r-I));else{var j=l?(o[0]-1)/2:r%o[0],D=l?(o[1]-1)/2:Math.floor(r/o[0]),T=I%o[0],M=Math.floor(I/o[0]),O=j-T,y=D-M,C=Math.sqrt(O*O+y*y);s==="x"&&(C=-O),s==="y"&&(C=-y),g.push(C)}v=Math.max.apply(Math,g)}n&&(g=g.map(function(S){return n(S/v)*v})),t==="reverse"&&(g=g.map(function(S){return s?S<0?S*-1:-S:Math.abs(v-S)}))}var x=h?(u-d)/v:d;return m+x*(Math.round(g[w]*100)/100)+f}}function rb(i){i===void 0&&(i={});var e=rt(i);return e.duration=0,e.add=function(t,n){var o=Xi.indexOf(e),s=e.children;o>-1&&Xi.splice(o,1);function r(u){u.passThrough=!0}for(var a=0;a<s.length;a++)r(s[a]);var l=Sl(t,Nc(Oh,i));l.targets=l.targets||i.targets;var c=e.duration;l.autoplay=!1,l.direction=e.direction,l.timelineOffset=He.und(n)?c:Wh(n,c),r(e),e.seek(l.timelineOffset);var h=rt(l);r(h),s.push(h);var d=P0(s,i);return e.delay=d.delay,e.endDelay=d.endDelay,e.duration=d.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}rt.version="3.2.1";rt.speed=1;rt.suspendWhenDocumentHidden=!0;rt.running=Xi;rt.remove=ob;rt.get=Vh;rt.set=C0;rt.convertPx=Nh;rt.path=qy;rt.setDashoffset=Xy;rt.stagger=sb;rt.timeline=rb;rt.easing=Rh;rt.penner=p0;rt.random=function(i,e){return Math.floor(Math.random()*(e-i+1))+i};const Uh={duration:300,easing:"linear",direction:"alternate",loop:4,autoplay:!1},M0={quick:{duration:200,loop:2},normal:{duration:300,loop:4},slow:{duration:500,loop:6},attention:{duration:400,loop:8,easing:"easeInOutQuad"}};class ab{constructor(){p(this,"materialsToUpdate",new Set)}scheduleUpdate(e){this.materialsToUpdate.add(e)}flushUpdates(){this.materialsToUpdate.forEach(e=>{e.needsUpdate=!0}),this.materialsToUpdate.clear()}clear(){this.materialsToUpdate.clear()}}class lb{constructor(){p(this,"startTime",0),p(this,"measurements",new Map)}start(e){this.startTime=performance.now()}end(e){const t=performance.now()-this.startTime;return this.measurements.has(e)||this.measurements.set(e,[]),this.measurements.get(e).push(t),t}getAverage(e){const t=this.measurements.get(e);return!t||t.length===0?0:t.reduce((n,o)=>n+o,0)/t.length}clear(){this.measurements.clear()}}class cb{constructor(){p(this,"stateMap",new WeakMap),p(this,"materialManager",new ab),p(this,"performanceMonitor",new lb)}storeState(e){this.performanceMonitor.start("storeState"),e.forEach(t=>{if(!this.stateMap.has(t)){const n=this.createStateSnapshot(t);this.stateMap.set(t,n)}}),this.performanceMonitor.end("storeState")}restoreState(e){this.performanceMonitor.start("restoreState"),e.forEach(t=>{const n=this.stateMap.get(t);n&&(this.restoreSingleState(t,n),this.stateMap.delete(t))}),this.materialManager.flushUpdates(),this.performanceMonitor.end("restoreState")}getStateMap(){return this.stateMap}createStateSnapshot(e){var t;if(e instanceof HTMLElement)return{opacity:e.style.opacity===""?void 0:e.style.opacity,visible:{display:e.style.display,visibility:e.style.visibility}};if(Ts(e))if(!No(e)&&e.children.length===0&&e.name,No(e)){if(Za(e)){const n=e.material.transparent;return{opacity:(t=e.material.uniforms.opacity)==null?void 0:t.value,transparent:n===!1?void 0:n,visible:e.visible}}else if(Ja(e)){const n=e.material.transparent;return{opacity:e.material.opacity,transparent:n===!1?void 0:n,visible:e.visible}}}else return{visible:e.visible};return{}}restoreSingleState(e,t){e instanceof HTMLElement?(e.style.opacity=t.opacity===void 0?"":String(t.opacity),typeof t.visible=="object"&&t.visible!==null&&(e.style.display=t.visible.display,e.style.visibility=t.visible.visibility)):Ts(e)&&(typeof t.visible=="boolean"&&(e.visible=t.visible),No(e)&&(Za(e)?(e.material.uniforms.opacity!==void 0&&(e.material.uniforms.opacity.value=t.opacity!==void 0?Number(t.opacity):1),t.transparent!==void 0&&(e.material.transparent=t.transparent),this.materialManager.scheduleUpdate(e.material)):Ja(e)&&(e.material.opacity=t.opacity!==void 0?Number(t.opacity):1,t.transparent!==void 0&&(e.material.transparent=t.transparent),this.materialManager.scheduleUpdate(e.material))))}clear(){this.materialManager.clear(),this.performanceMonitor.clear()}}const Sn=new WeakMap,jn=new cb;function Ts(i){return"isObject3D"in i&&i.isObject3D===!0}function No(i){return Ts(i)&&"material"in i&&i.material!==void 0}function Za(i){return No(i)&&i.material instanceof Bi}function Ja(i){return No(i)&&!(i.material instanceof Bi)}function hb(i,e){i instanceof HTMLElement?i.style.opacity=String(e):Ts(i)&&No(i)&&(Za(i)?(i.material.uniforms.opacity&&(i.material.uniforms.opacity.value=e),i.material.transparent=!0):Ja(i)&&(i.material.opacity=e,i.material.transparent=!0))}function Ka(){const i=rt({});return i.preComplete=()=>{},i}function S0(i){if(!i)throw new Error("Invalid objects parameter: objects cannot be null or undefined");const e=yo(i);if(e.length===0)throw new Error("Invalid objects parameter: objects array cannot be empty");if(e.some(t=>t==null))throw new Error("Invalid objects parameter: objects array contains null or undefined values")}function D0(i,e){const t=yo(i),n=[];return t.forEach(o=>{o&&(o instanceof HTMLElement?n.push(o):Ts(o)&&(e?(n.push(o),o.traverse(s=>{s&&n.push(s)})):n.push(o)))}),Array.from(new Set(n.filter(Boolean)))}function db(i,e){const t=new Map,n=jn.getStateMap();return i.forEach(o=>{var s;const r=n.get(o);r&&t.set(o,{initialOpacity:Number((s=r.opacity)!=null?s:1)})}),o=>{var s,r;const a=o.progress;i.forEach(l=>{const c=t.get(l);if(!c)return;const h=c.initialOpacity*(100-a)/100;hb(l,h)}),(s=e.onProgress)==null||s.call(e,a),(r=e.updateRender)==null||r.call(e)}}function ub(i,e){const t=new Map,n=jn.getStateMap();return i.forEach(o=>{var s,r;const a=n.get(o),l=Number((r=(s=a==null?void 0:a.opacity)!=null?s:e==null?void 0:e.maxOpacity)!=null?r:1);t.set(o,{maxOpacity:l})}),o=>{var s,r;const a=o.progress;i.forEach(l=>{const c=t.get(l);if(!c)return;const h=c.maxOpacity*(a/100);l instanceof HTMLElement?(l.style.opacity=String(h),l.style.visibility="visible"):Ts(l)&&(yo(i).includes(l)&&(l.visible=!0),No(l)&&(Za(l)?(l.material.uniforms.opacity&&(l.material.uniforms.opacity.value=h),l.material.transparent=!0):Ja(l)&&(l.material.opacity=h,l.material.transparent=!0)))}),(s=e.onProgress)==null||s.call(e,a),(r=e.updateRender)==null||r.call(e)}}function Dl(i,e){var t,n;try{S0(i);const o=(t=e==null?void 0:e.traverseTHREEObject)!=null?t:!0,s=D0(i,o);if(s.length===0)return Ka();jn.storeState(s);const r=pe(W(W({},Uh),e),{targets:s,update:db(s,e||{})}),a=rt(r);a.preComplete=()=>{a.completed||(a.pause(),jn.restoreState(s),setTimeout(()=>{var c;return(c=e==null?void 0:e.updateRender)==null?void 0:c.call(e)}))};const l=Sn.get(i);return l==null||l.pause(),l==null||l.seek(0),Sn.set(i,a),(n=e==null?void 0:e.onStart)==null||n.call(e),a.play(),a.finished.then(()=>{var c,h;jn.restoreState(s),setTimeout(()=>{Sn.get(i)===a&&Sn.delete(i)},1e3),(c=e==null?void 0:e.onComplete)==null||c.call(e),(h=e==null?void 0:e.updateRender)==null||h.call(e),setTimeout(()=>{var d;return(d=e==null?void 0:e.updateRender)==null?void 0:d.call(e)},50),setTimeout(()=>{var d;return(d=e==null?void 0:e.updateRender)==null?void 0:d.call(e)},100)}),a}catch{return Ka()}}function k0(i,e){var t,n;try{S0(i);const o=(t=e==null?void 0:e.traverseTHREEObject)!=null?t:!0,s=D0(i,o);if(s.length===0)return Ka();jn.storeState(s);const r=pe(W(W({},Uh),e),{targets:s,update:ub(s,e||{})}),a=rt(r);a.preComplete=()=>{a.completed||(a.pause(),jn.restoreState(s),setTimeout(()=>{var c;return(c=e==null?void 0:e.updateRender)==null?void 0:c.call(e)}))};const l=Sn.get(i);return l==null||l.pause(),l==null||l.seek(0),Sn.set(i,a),(n=e==null?void 0:e.onStart)==null||n.call(e),a.play(),a.finished.then(()=>{var c,h;jn.restoreState(s),setTimeout(()=>{Sn.get(i)===a&&Sn.delete(i)},1e3),(c=e==null?void 0:e.onComplete)==null||c.call(e),(h=e==null?void 0:e.updateRender)==null||h.call(e),setTimeout(()=>{var d;return(d=e==null?void 0:e.updateRender)==null?void 0:d.call(e)},50),setTimeout(()=>{var d;return(d=e==null?void 0:e.updateRender)==null?void 0:d.call(e)},100)}),a}catch{return Ka()}}function pb(i,e,t){const n=M0[e];return Dl(i,W(W({},n),t))}function fb(){jn.clear()}function mb(i,e){const t=Ci(i),{x:n,y:o}=e,s=n*2-1,r=o*2-1,a=new Ot;a.setFromCamera({x:s,y:r},i.camera);const l=t.intersectRaycaster(a)[0];if(l)return pe(W({},l),{raycaster:a,isVirtual:!1})}function gb(i,e){const t=i.getElement();if(!t)return;const n=qg(e,t),o=new Ot;return o.setFromCamera(n,i.camera),o}const vb="data:image/png;base64,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";function Os(i){const e=[];return yo(i).forEach(t=>{t.traverse(n=>{(n.isCSS3DObjectPlus||n.isCSS3DObject||n.isCSS3DSprite)&&e.push(n)})}),e}class Ab extends bl{constructor(){super()}add(...e){return super.add(...e),Os(e).forEach(t=>{t.mode="front"}),this}}class yb extends bl{constructor(e){if(super(),p(this,"scene"),!e)throw new Error("CSS3DBehindScene: scene is required");this.scene=e}add(...e){return super.add(...e),Os(e).forEach(t=>{t.mode="behind",this.scene.add(t.getOpacityMesh())}),this}remove(...e){return Os(e).forEach(t=>{var n;(n=t.opacityMesh)==null||n.removeFromParent(),t.opacityMesh=null}),super.remove(...e),this}}class z0 extends Et{constructor(e){super(),p(this,"isCSS3DGroup",!0),p(this,"mode"),p(this,"CSS3DObjectLength",0),this.mode=e}add(...e){return Os(e).forEach(t=>{t.mode=this.mode}),super.add(...e),this.updateLength(),this}setVisible(e){this.visible=e,this.traverse(t=>{t.isCSS3DObjectPlus&&t.updateVisible()})}remove(...e){return super.remove(...e),this.updateLength(),this}updateLength(){this.CSS3DObjectLength=Os(this).length}}class bb extends z0{constructor(){super("front")}}class wb extends z0{constructor(e){if(super("behind"),p(this,"scene"),!e)throw new Error("CSS3DBehindScene: scene is required");this.scene=e}add(...e){return Os(e).forEach(t=>{this.scene.add(t.getOpacityMesh())}),super.add(...e),this}}const xb=3,Vc="CSS3DRenderer",br=`${Vc}@${xb}`,vs=()=>{console.error(`${br} is disposed`)},Dt={css3DObjects:[],frontModeStore:{css3DRenderer:new Ya},behindModeStore:{css3DRenderer:new Ya}};function gu(i){return Dt.css3DObjects.find(e=>e.id===i)}function Cb(i){Dt.frontModeStore.css3DRenderer.setWrapper(i)}function Pb(i){Dt.behindModeStore.css3DRenderer.setWrapper(i)}class Nr{constructor(e){p(this,"hooks",new Mt),p(this,"state",{enabled:!0,visible:!0,disposed:!1}),p(this,"_scene"),p(this,"store",{frontModeGroup:new bb}),p(this,"create3DElement",(t,n,o)=>{if(this.state.disposed)return vs();const s=(()=>{const D={ratio:.00216,devicePixelRatio:1,mode:"front",autoRender:!0,container:document.createElement("div"),pointerEvents:"none",wrapperStyle:{}};return Object.assign(D,o)})(),r=n.map(Ue);if((r==null?void 0:r.length)<4)return console.error(`${br}: requires 4 point but params may have fewer`);const{ratio:a,devicePixelRatio:l,mode:c,autoRender:h,container:d,pointerEvents:u,wrapperStyle:f}=s;let m=!1;const g=this.createObject(r,{ratio:a,dpr:l,container:d,mode:c,pointerEvents:u,wrapperStyle:f});Dt.css3DObjects.push(g),s.scene&&this.setScene(s.scene);const v=()=>{if(m)return;const D=g.mode==="front"?this.getFrontCSS3DObjectGroup():this.getBehindCSS3DObjectGroup();D&&D.add(g)},A=()=>{m||(v(),this.render(t),this.hooks.emit("render"))},w=D=>this.setVisibleById(g.id,D),P=D=>this.setEnabledById(g.id,D),I=()=>(m=!0,g.removeFromParent(),!0),j=c==="front"?Dt.frontModeStore.css3DRenderer:Dt.behindModeStore.css3DRenderer;return h&&A(),{id:g.uuid,container:d,css3DObject:g,render:h?void 0:A,show:()=>w(!0),hide:()=>w(!1),setVisible:w,enable:()=>P(!0),disable:()=>P(!1),setEnabled:P,dispose:I,appendToElement:D=>j.setWrapper(D)}}),p(this,"setVisibleById",(t,n)=>{var o;(o=gu(t))==null||o.setVisible(n)}),p(this,"setEnabledById",(t,n)=>{const o=gu(t);if(!o)return;const s=o.mode==="front"?this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}):this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1});s&&(n?s.add(o):s.remove(o))}),p(this,"createObject",(t,n)=>{const o=new n0(pe(W({cornerPoints:t},n),{style:n.wrapperStyle}));return o.element.classList.add(`${Vc}__container`),o.element.id=`${Vc}__container--${o.uuid}`,o}),e&&this.setScene(e)}get scene(){return this._scene||console.error("scene doesn't exist!, please call setScene(scene) first"),this._scene}static get frontModeCSS3DRenderer(){return Dt.frontModeStore.css3DRenderer}static get behindModeCSS3DRenderer(){return Dt.behindModeStore.css3DRenderer}get frontModeCSS3DRenderer(){return Dt.frontModeStore.css3DRenderer}get behindModeCSS3DRenderer(){return Dt.behindModeStore.css3DRenderer}setScene(e){this._scene=e}getCurrentState(){return this.state}setState(e,t={userAction:!0}){if(this.state.disposed)return vs();const n=W({},this.state);this.state=Object.assign(this.state,e),n.visible!==this.state.visible&&(e.visible?this.handleShow():this.handleHide()),n.enabled!==this.state.enabled&&(e.enabled?this.handleEnable():this.handleDisable()),n.disposed!==this.state.disposed&&this.handleDispose(),this.hooks.emit("stateChange",{state:this.state,prevState:n,userAction:t.userAction})}dispose(){this.setState({disposed:!0}),this.hooks.emit("dispose")}show(){return ee(this,arguments,function*({userAction:e}={userAction:!0}){if(this.state.disposed)return vs();this.setState({visible:!0},{userAction:e}),this.hooks.emit("show",{userAction:e})})}hide(){return ee(this,arguments,function*({userAction:e}={userAction:!0}){if(this.state.disposed)return vs();this.setState({visible:!1},{userAction:e}),this.hooks.emit("hide",{userAction:e})})}enable({userAction:e}={userAction:!0}){if(this.state.disposed)return vs();this.setState({enabled:!0},{userAction:e}),this.hooks.emit("enable",{userAction:e})}disable({userAction:e}={userAction:!0}){if(this.state.disposed)return vs();this.setState({enabled:!1},{userAction:e}),this.hooks.emit("disable",{userAction:e})}getFrontCSS3DScene({createSceneIfNotExists:e=!1}={}){var t;const n=(t=Dt.frontModeStore)==null?void 0:t.css3DScene;if(n)return n;if(e){const o=new Ab;Dt.frontModeStore.css3DScene=o}return Dt.frontModeStore.css3DScene}getBehindCSS3DScene({createSceneIfNotExists:e=!1}={}){var t,n;const o=(t=Dt.behindModeStore)==null?void 0:t.css3DScene;if(o)return o;if(e){const s=(n=Dt.behindModeStore.scene)!=null?n:this.scene;if(!s){console.error(`${br}: scene is required when mode is behind`);return}const r=new yb(s);Dt.behindModeStore.css3DScene=r,Dt.behindModeStore.scene=s}return Dt.behindModeStore.css3DScene}getFrontCSS3DObjectGroup({addGroupIfNotExists:e=!0}={}){const t=this.getFrontCSS3DScene({createSceneIfNotExists:e});return e&&t&&(t.getObjectById(this.store.frontModeGroup.id)||t.add(this.store.frontModeGroup)),this.store.frontModeGroup}getBehindCSS3DObjectGroup({addGroupIfNotExists:e=!0}={}){var t;const n=this.getBehindCSS3DScene({createSceneIfNotExists:e});if(e&&n&&this.scene){const o=(t=this.store.behindModeGroup)!=null?t:new wb(this.scene);this.store.behindModeGroup=o,n.getObjectById(o.id)||n.add(o)}return this.store.behindModeGroup}render(e){var t,n;if(this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}).CSS3DObjectLength>0){const o=this.getFrontCSS3DScene({createSceneIfNotExists:!0});if(!o)return console.error(`${br}: css3DScene is required when mode is front`);Dt.frontModeStore.css3DRenderer.renderEveryFrame(o,e)}if(((n=(t=this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1}))==null?void 0:t.CSS3DObjectLength)!=null?n:0)>0){const o=this.getBehindCSS3DScene({createSceneIfNotExists:!0});if(!o)return console.error(`${br}: css3DScene is required when mode is behind`);Dt.behindModeStore.css3DRenderer.renderEveryFrame(o,e)}}handleShow(){return ee(this,null,function*(){var e;this.store.frontModeGroup.setVisible(!0),(e=this.store.behindModeGroup)==null||e.setVisible(!0)})}handleHide(){return ee(this,null,function*(){var e;this.store.frontModeGroup.setVisible(!1),(e=this.store.behindModeGroup)==null||e.setVisible(!1)})}handleEnable(){var e,t;(e=this.getFrontCSS3DScene())==null||e.add(this.store.frontModeGroup),this.store.behindModeGroup&&((t=this.getBehindCSS3DScene())==null||t.add(this.store.behindModeGroup))}handleDisable(){var e,t,n;this.store.frontModeGroup.children.forEach(o=>{o instanceof Ln&&o.element instanceof Element&&o.element.parentNode!==null&&o.element.remove()}),(e=this.store.behindModeGroup)==null||e.children.forEach(o=>{o instanceof Ln&&o.element instanceof Element&&o.element.parentNode!==null&&o.element.remove()}),(t=this.getFrontCSS3DScene())==null||t.remove(this.store.frontModeGroup),this.store.behindModeGroup&&((n=this.getBehindCSS3DScene())==null||n.remove(this.store.behindModeGroup))}handleDispose(){this.handleDisable()}}p(Nr,"setFrontModeContainer",Cb),p(Nr,"setBehindModeContainer",Pb);const j0="v2.0.1",vu=`CSS3DRenderPlugin@${j0}`;let Eb=class extends Nr{constructor(i){super(),p(this,"five"),p(this,"behindFiveContainer"),p(this,"frontFiveContainer"),p(this,"VERSION",j0),p(this,"staticPrefix",kl),p(this,"created3DElementResults",[]),p(this,"create3DDomContainer",(e,t)=>{if(this.state.disposed)return;const n=(()=>{var c;(t==null?void 0:t.dpr)!==void 0&&console.warn(`${vu}: please use "config.devicePixelRatio" replace "config.dpr"`);const h={ratio:.00216,devicePixelRatio:(c=t==null?void 0:t.dpr)!=null?c:1,mode:"front",autoRender:!0,wrapperStyle:{}};return Object.assign(h,t,(t==null?void 0:t.mode)==="behind"?{scene:this.five.scene}:void 0)})(),{autoRender:o}=n;n.mode==="behind"&&n.behindFiveContainer&&(this.behindFiveContainer=n.behindFiveContainer);const s=this.create3DElement(this.five.camera,e,pe(W({},n),{autoRender:!1}));if(!s)return;const r=s.dispose;s.dispose=()=>(this.created3DElementResults.includes(s)&&this.created3DElementResults.splice(this.created3DElementResults.indexOf(s),1),r());const a=()=>{var c,h;const d=s.css3DObject.mode==="front"?(h=this.frontFiveContainer)!=null?h:(c=this.five.getElement())==null?void 0:c.parentElement:this.getBehindFiveElement();if(!d)return console.error(`${vu}: wrapper is ${d}; mode is ${s.css3DObject.mode}`);s.appendToElement(d),s.render(),this.created3DElementResults.push(s)},l=()=>{Ti(this.five).then(()=>a())};return o&&l(),pe(W({},s),{render:o?void 0:l})}),this.five=i}disposeAll(){return this.dispose()}setState(...i){const e=super.setState(...i);return this.five.needsRender=!0,e}appendToFrontFiveContainer(i){this.frontFiveContainer=i,this.created3DElementResults.forEach(e=>{e.css3DObject.mode==="front"&&e.appendToElement(i)})}appendToBehindFiveContainer(i){this.behindFiveContainer=i,this.created3DElementResults.forEach(e=>{e.css3DObject.mode==="behind"&&e.appendToElement(i)})}getBehindFiveElement(){return this.behindFiveContainer?this.behindFiveContainer:(this.behindFiveContainer=kh(this.five),this.behindFiveContainer)}clear(){this.created3DElementResults.forEach(i=>{i.dispose()}),this.created3DElementResults=[]}};const Xh=i=>new Eb(i);class Ib{constructor(e){p(this,"five"),p(this,"contentElement",document.createElement("div")),p(this,"animeIns"),p(this,"container"),p(this,"css3DObject"),p(this,"disposeCss3DObject"),p(this,"state",{enabled:!1}),this.five=e;const t=.4/2,n=Xh(e).create3DDomContainer([[-t,t,0],[-t,-t,0],[t,-t,0],[t,t,0]].map(o=>new R().fromArray(o)));if(n){const{container:o,dispose:s,css3DObject:r}=n;this.container=o,this.css3DObject=r,this.disposeCss3DObject=s}this.contentElement.style.width="100%",this.contentElement.style.height="100%",this.contentElement.style.backgroundImage=`url(${vb})`,this.contentElement.style.backgroundSize="100%",this.contentElement.style.backgroundRepeat="no-repeat"}enable(){var e;this.state.enabled||(this.state.enabled=!0,(e=this.container)==null||e.appendChild(this.contentElement))}disable(){this.state.enabled&&(this.state.enabled=!1,this.contentElement.remove())}updateWithIntersect(e){if(!e.face||!this.css3DObject)return;const t=new R().addVectors(e.point,e.face.normal);this.css3DObject.position.copy(e.point),this.css3DObject.lookAt(t),this.five.needsRender=!0}doAnimation(){var e;(e=this.animeIns)==null||e.dispose(),new Yo({progress:0}).to({progress:[1,0]}).duration(500).easing(ro.Quadratic.InOut).onUpdate(({progress:t})=>{}).play()}dispose(){var e;(e=this.disposeCss3DObject)==null||e.call(this)}}const Mb=`
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`,Sb=`
varying vec2 vUv;
void main() {
  vec2 uv = vec2(vUv.x, vUv.y);
  float a = 1.0;
  float match = 1.0 - uv.x;
  gl_FragColor = vec4(1.0,1.0,1.0,match);
}
`;function Db(){const i=new ea(.4,.4),e=e0,t=new Ao().load(e);t.encoding=on,t.minFilter=zi;const n=new Ze({map:t,transparent:!0,depthTest:!1});return new We(i,n)}function kb(){const i=new ta;i.add(new ia(new R(0,0,0),new R(0,0,.1)));const e=new wl(i,8,.003),t=new Bi({vertexShader:Mb,fragmentShader:Sb,depthTest:!1,transparent:!0});return new We(e,t)}function zb(){const i=new Xo(.01,20,20),e=new Ze({color:10349931,depthTest:!1,transparent:!0,side:It}),t=new We(i,e);return t.position.set(0,0,.1),t}class jb extends fi{constructor(){super(),p(this,"planeMesh"),p(this,"lineMesh"),p(this,"ballMesh"),this.planeMesh=Db(),this.lineMesh=kb(),this.ballMesh=zb(),this.add(this.planeMesh,this.lineMesh,this.ballMesh)}updateWithIntersect(e){if(!e.face)return;const t=new R().addVectors(e.point,e.face.normal);this.position.copy(e.point),this.lookAt(t)}dispose(){var e;(e=this.planeMesh.material.map)==null||e.dispose()}}const oc=Math.PI*2;function Wc(i){return(i%oc+oc)%oc}function ra(i){return{longitude:Wc(-Math.atan2(i.x,-i.z)),latitude:-Math.asin(i.y/1)}}function Lb(i,e,t){return ee(this,null,function*(){var n,o,s;if(!e)return;const r=c0(e);if(!r)return;const a=new xl(i),l=(n=t==null?void 0:t.scale)!=null?n:1.4,c=r.center,h=i.camera.position.clone().sub(c).setY(0).normalize(),d=i.state.mode==="Mapview"?i.state.fov:60,u=Math.max(1.5,r.radius*l),f=u*(1/Math.tan(ni.degToRad(d/2)));let m=0;const g=[],v=I=>{const j=ni.degToRad(I);return h.clone().applyAxisAngle(new R(0,1,0),j).clone().multiplyScalar(f).add(new R(0,u,0)).add(c)};for(;m!==360;){let I=0;const j=v(m),D=O=>{const y=O.distanceTo(j),C=new Ot(O,j.clone().sub(O).normalize()),x=a.model.intersectRaycaster(C,void 0,!0)[0],S=x==null?void 0:x.distance;Be(S)?S>y&&(I+=1):I+=1},T=r.clampPoint(j,new R);D(T);const M=new R(c.x,j.y,c.z);if(D(M),Be(g[I])&&m>g[I]||(g[I]=m),I===2)break;m+=30}const A=v((s=(o=g[2])!=null?o:g[1])!=null?s:0),w=A.distanceTo(c),P=ra(c.clone().sub(A).normalize());if(i.state.mode==="Mapview")return i.updateCamera(W({offset:c,distance:w},P),800);i.setState(W({mode:"Mapview",offset:c,distance:w},P)),yield i.ready()})}function L0(i,e,t){return ee(this,null,function*(){var n,o;if(!e)return;const s=(n=t==null?void 0:t.distance)!=null?n:3,r=new xl(i),a=i.camera.position.clone().sub(e).setY(0).normalize(),l=i.state.mode==="Mapview"?i.state.fov:60,c=s,h=c*Math.cos(ni.degToRad(l/2)),d=c*Math.sin(ni.degToRad(l/2));let u=0;const f=[],m=A=>{const w=ni.degToRad(A);return a.clone().applyAxisAngle(new R(0,1,0),w).clone().multiplyScalar(h).add(new R(0,d,0)).add(e)};for(;u!==360;){let A=0;const w=m(u);if((P=>{const I=P.distanceTo(w),j=new Ot(P,w.clone().sub(P).normalize()),D=r.model.intersectRaycaster(j,void 0,!0)[0],T=D==null?void 0:D.distance;Be(T)?T>I&&(A+=1):A+=1})(e),f[A]=u,A===1)break;u+=30}const g=m((o=f[1])!=null?o:0),v=ra(e.clone().sub(g).normalize());if(i.state.mode==="Mapview")return i.updateCamera(W({offset:e,distance:s},v),800);i.setState(W({mode:"Mapview",offset:e,distance:s},v)),yield i.ready()})}function T0(i,e){const{top:t,left:n,width:o,height:s}=e.getBoundingClientRect();return new Qe((i.x-n)/o*2-1,-(i.y-t)/s*2+1)}class Rs{constructor(e,t){p(this,"_five"),p(this,"dragging",!1),p(this,"boundObject",{}),p(this,"config"),p(this,"handleWantsGesture",(o,s)=>{if(s.length!==1)return;const r=s[0];if(r.raycaster){const a=new Rr;a.ray=r.raycaster.ray,a.near=r.raycaster.near,a.far=r.raycaster.far,a.camera=r.raycaster.camera,a.layers=r.raycaster.layers,a.params=r.raycaster.params,r.raycaster=a}if(r){if(o==="mouseMove"&&this.onDomEvent("hover",r),o==="tap"){const a=new MouseEvent("click",{clientX:r.x,clientY:r.y}),l=this.onDomEvent("click",r,a),c=this.onDomEvent("wantDblclick",r,a,this.boundObject.dblclick);if(l===!1||c===!1)return!1}if(this.dragging)return!1}}),p(this,"handleDomEvent",(o,s,r)=>{const a={x:s.clientX,y:s.clientY};this.onDomEvent(o,a,s,r)}),p(this,"handleMouseEvent",o=>{this.handleDomEvent(o.type,o)}),p(this,"handleMousedown",o=>{this.handleDomEvent("mousedown",o),this.handleDomEvent("dragstart",o,this.haveDragEventObject)}),p(this,"handleMouseup",o=>{var s;this.dragging=!1,(s=this.haveDragEventObject)==null||s.forEach(r=>{r._dragging&&(r._dragging=!1,this.notify({eventName:"dragend",object:r,originEvent:o,raycaster:this.getRaycaster({x:o.clientX,y:o.clientY})}))}),this.handleDomEvent("mouseup",o)}),p(this,"handleMousemove",o=>{var s;this.dragging&&((s=this.boundObject.drag)==null||s.forEach(r=>{r._dragging&&this.notify({eventName:"drag",object:r,originEvent:o,raycaster:this.getRaycaster({x:o.clientX,y:o.clientY})})}))}),p(this,"onDomEvent",(o,s,r,a=this.boundObject[o])=>{var l,c,h,d,u;if(!s||!a||(a==null?void 0:a.length)===0)return;const f=[];((l=this.config)==null?void 0:l.fiveModels)!==null&&((c=this.config)!=null&&c.fiveModels?f.push(...this.config.fiveModels):f.push(this.model));const m=f.filter(I=>I.loaded),g=(h=s.raycaster)!=null?h:this.getRaycaster(s);g.params.Points.threshold=.04;const v=g.intersectObjects(a,!0),A=[];m.forEach(I=>{const j=I.intersectRaycaster(g);A.push(...j)});const w=.01;if(A.length>0&&v.length>0&&A[0].distance+w<v[0].distance)return;const P=(d=v==null?void 0:v[0])==null?void 0:d.object;if(o==="wantDblclick")return!1;if((!P||!this.objectIsBound(P))&&o==="hover")for(const I of(u=this.boundObject.hover)!=null?u:[])I._hovered&&this.notify({eventName:"unHover",object:I});if(P&&P&&this.notify({eventName:o,object:P,originEvent:r,raycaster:g,intersects:v,fiveModelIntersects:A}))return!1}),p(this,"objectIsBound",o=>{let s=o._domEvent,r=o.parent;for(;typeof s>"u"&&r;)s=r._domEvent,r=r.parent;return!!s}),p(this,"notify",o=>{var s,r,a,l,c,h,d;const{eventName:u,object:f,originEvent:m,raycaster:g,intersects:v,fiveModelIntersects:A}=o;if(!f)return!1;let w=!1,P=[];const I=[],j=()=>{if(!v)return!1;const O=v.slice(1);return O[0]?this.notify(pe(W({},o),{object:O[0].object,intersects:O})):!1};let D=f;for(I.push(D);D.parent;)D=D.parent,I.push(D);const T=I[I.length-1];if((s=this.config)!=null&&s.noEmitWhenNotInScene&&T.type!=="Scene")return j();let M=!1;for(const O of I){if(w)break;O.draggable&&(u==="dragstart"&&(O._dragging=!0,this.dragging=!0),u==="dragend"&&(O._dragging=!1,this.dragging=!1));const y=O._domEvent;if(!y)continue;const C=y[`${u}Handler`];if(C)for(const[x,S]of C){if(S!=null&&S.noEmitWhenNotInScene&&T.type!=="Scene")continue;if(S.skipPano&&A){const z=(r=A[0])==null?void 0:r.point;if(z&&(c=(l=(a=this.five.observers)==null?void 0:a[this.five.panoIndex])==null?void 0:l.accessibleNodes)!=null&&c.some(q=>{var X;const $=(X=this.five.works.getResolvedObserver({workCode:this.five.state.workCode,panoIndex:q}))==null?void 0:X.standingPosition;return($==null?void 0:$.distanceTo(z))<.3}))continue}if(((h=this.config)!=null&&h.noEmitWhenHide||S!=null&&S.noEmitWhenHide)&&!Lh(O))continue;if(M=!0,u==="hover"){if(O._hovered)continue;O._hovered=!0;for(const z of(d=this.boundObject.hover)!=null?d:[])z!==O&&z._hovered&&this.notify({eventName:"unHover",object:z})}if(u==="unHover"){if(!O._hovered)continue;O._hovered=!1}const k=x({type:u,target:O,origDomEvent:m,raycaster:g,intersects:v,stopPropagation:()=>{w=!0}});P.push(k??!0)}}if(M===!1)return j();if(u==="click"||u==="wantDblclick")return P.some(O=>O===!0)});var n;this.five=e,this.config=t,e.off("wantsGesture",this.handleWantsGesture),e.on("wantsGesture",this.handleWantsGesture),document.addEventListener("mousedown",this.handleMousedown),document.addEventListener("dblclick",this.handleMouseEvent),document.addEventListener("mouseup",this.handleMouseup),document.addEventListener("mousemove",this.handleMousemove),window.__FIVE_DOM_EVENTS__=(n=window.__FIVE_DOM_EVENTS__)!=null?n:[],window.__FIVE_DOM_EVENTS__.push(this)}get five(){return this._five}set five(e){var t;(t=this._five)==null||t.off("wantsGesture",this.handleWantsGesture),this._five=e,this._five.on("wantsGesture",this.handleWantsGesture)}get haveDragEventObject(){return[...new Set([this.boundObject.dragend,this.boundObject.drag,this.boundObject.dragstart].flat())].filter(Boolean)}get model(){return Ci(this.five)}addAutoBindEventListener(e,t,n,o){const s=()=>this.addEventListener(e,t,n,o),r=()=>this.removeEventListener(e,t,n,o);return e.addEventListener("added",s),e.addEventListener("removed",r),e.addEventListener("dispose",r),()=>{e.removeEventListener("added",s),e.removeEventListener("removed",r),e.removeEventListener("dispose",r)}}addEventListener(e,t,n,o){e._domEvent||(e._domEvent={}),e._domEvent[`${t}Handler`]||(e._domEvent[`${t}Handler`]=[]),this.boundObject[t]||(this.boundObject[t]=[]),this.boundObject[t].includes(e)||this.boundObject[t].push(e),e._domEvent[`${t}Handler`].push([n,W({noEmitWhenHide:!1,noEmitWhenNotInScene:!1},o)])}removeEventListener(e,t,n,...o){var s,r;if(!e._domEvent||(t===void 0&&(Object.keys(this.boundObject).forEach(l=>{var c,h;const d=(c=this.boundObject[l])==null?void 0:c.findIndex(u=>u===e);d!==-1&&((h=this.boundObject[l])==null||h.splice(d,1))}),e._domEvent={}),!e._domEvent[`${t}Handler`]))return;if(n===void 0){delete e._domEvent[`${t}Handler`];return}const a=e._domEvent[`${t}Handler`].findIndex(l=>l[0]===n);if(a!==-1&&(e._domEvent[`${t}Handler`].splice(a,1),e._domEvent[`${t}Handler`].length===0&&delete e._domEvent[`${t}Handler`],e._domEvent&&Object.keys(e._domEvent).length===0&&delete e._domEvent,!e._domEvent)){const l=(s=this.boundObject[t])==null?void 0:s.findIndex(c=>c===e);l!==-1&&((r=this.boundObject[t])==null||r.splice(l,1))}}clear(){this.boundObject={}}dispose(){var e;(e=this.five)==null||e.off("wantsGesture",this.handleWantsGesture),document.removeEventListener("mousedown",this.handleMousedown),document.removeEventListener("mouseup",this.handleMouseup),document.removeEventListener("mousemove",this.handleMousemove),this.boundObject={}}toJSON(){return{boundObject:this.boundObject}}getRaycaster(e){const t=this.five.getElement();if(!t)return;const n=T0(e,t),o=new Rr;return o.setFromCamera(n,this.five.camera),o}}function Tb(i){return i.model?i.work?i.model.loaded?i.model.name!==i.work.model.file?{result:!1,msg:"five.model.name 与 five.work.model.file 不一致"}:{result:!0,msg:""}:{result:!1,msg:"five.model 未加载完成"}:{result:!1,msg:"five 数据未加载"}:{result:!1,msg:"five.model 不存在"}}const kl="//vr-image-4.realsee-cdn.cn",zl="//vr-image-4.realsee-cdn.cn/release/web/arrow1.ebe7d0ff.png",Yh="//vr-image-4.realsee-cdn.cn/release/web/arrow-white.5c2c79a5.png",O0="//vr-image-4.realsee-cdn.cn/release/web/PanoSpatialTagPlugin__blur.png",qh="//vr-image-4.realsee-cdn.cn/release/web/test.09dee741.png",R0="//vr-image-4.realsee-cdn.cn/release/web/dipan2.f38a21cc.FBX",Zh="//vr-image-4.realsee-cdn.cn/release/web/logo.7febb17f.png",B0="//vr-public.realsee-cdn.cn/release/web/entryDoorMini/Anim_Door1.fbx",Bs="//vr-image-4.realsee-cdn.cn/release/web/saas/missing-floorplan.e274c596.png",Jh="//vr-image-4.realsee-cdn.cn/release/web/v3/north-point-circle.96498e69.png",Kh="//vr-image-4.realsee-cdn.cn/release/web/enterDoor.831b8208.png",Ob=[zl,Yh,O0,qh,R0,Zh,B0,Bs,Jh,Kh];function Rb(i){return/^https?:\/\/|^\/\//.test(i)||/^data:/.test(i)||i.startsWith("//")}function lo(i=kl,e){if(!e||typeof e!="string")return e||"";if(!i||typeof i!="string")return e;i.startsWith("//")&&(i="http:"+i);try{if(!Rb(e))return e;let t=e;e.startsWith("//")&&(t="http:"+e);const n=new URL(t);let o=i,s=n.protocol;return i.includes("://")?o=new URL(i).hostname:i.startsWith("//")&&(o=i.substring(2)),!o||o.trim()===""?e:(n.hostname=o,s!==n.protocol&&(n.protocol=s),e.startsWith("//")?n.toString().replace(/^https?:\/\//,"//"):n.toString())}catch(t){return console.warn(`[replaceStaticPrefix] Invalid URL: ${e}`,t),e}}class Yo extends Qg{constructor(){super(...arguments),p(this,"disposeMethods",[]),p(this,"animationFrameDisposer"),p(this,"onDispose",e=>(this.disposeMethods.push(e),this)),p(this,"play",()=>{var e;return this.start(0),(e=this.animationFrameDisposer)==null||e.call(this),this.animationFrameDisposer=aa(t=>this.update(t)),this}),p(this,"stop",()=>{var e;return super.stop(),(e=this.animationFrameDisposer)==null||e.call(this),this}),p(this,"dispose",()=>{var e;this.stop(),(e=this.animationFrameDisposer)==null||e.call(this),this.disposeMethods.forEach(t=>t()),this.disposeMethods=[],Ug(this)})}}function Fr(i,e=ro.Linear.None){const t=new Yo({progress:0}).to({progress:1});return i!==void 0&&t.duration(i),e!==void 0&&t.easing(e),t}const Hs=window.requestAnimationFrame||(i=>setTimeout(i,16)),Bb=window.cancelAnimationFrame||clearTimeout;function _h(i,e=0){e<=0?Hs(i):Hs(()=>_h(i,e-1))}function Hb(){return ee(this,null,function*(){return new Promise(i=>{Hs(()=>i())})})}function aa(i,e=60){let t=-1,n=0,o=-1;const s=1e3/e;function r(a){o===-1&&(o=a),t=Hs(r),!(a-n<s)&&(n=a,i==null||i(a-o))}return t=Hs(r),function(){Bb(t)}}function Nb(){const i=Date.now();return new Promise(e=>{Hs(()=>{e(Date.now()-i)})})}function _a(i){return Object.prototype.toString.call(i)==="[object Object]"}function jl(i,e){return i===e?!0:typeof i!=typeof e?!1:!!(Number.isNaN(i)&&Number.isNaN(e))}function Fb(i,e){const t=Object.getOwnPropertyNames(i),n=Object.getOwnPropertyNames(e);if(t.length!==n.length)return!1;for(let o=0,s=t.length;o<s;o++){const r=t[o];if(!jl(i[r],e[r]))return!1}return!0}function Vb(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(!jl(i[t],e[t]))return!1;return!0}function Wb(i,e){return jl(i,e)?!0:_a(i)&&_a(e)?Fb(i,e):Array.isArray(i)&&Array.isArray(e)?Vb(i,e):!1}function $h(i,e){return jl(i,e)?!0:_a(i)&&_a(e)?Qb(i,e):Array.isArray(i)&&Array.isArray(e)?Gb(i,e):!1}function Gb(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(!$h(i[t],e[t]))return!1;return!0}function Qb(i,e){const t=Object.getOwnPropertyNames(i),n=Object.getOwnPropertyNames(e);if(t.length!==n.length)return!1;for(let o=0,s=t.length;o<s;o++){const r=t[o];if(!$h(i[r],e[r]))return!1}return!0}function Yi(i,e,t={deep:!1}){return t.deep?$h(i,e):Wb(i,e)}const Ub=new Qe;class Xb{constructor(e,t){p(this,"scene",new bl),p(this,"five"),p(this,"renderer"),p(this,"cancelRequestAnimationFrameId"),p(this,"camera",new aA),p(this,"domInited",!1),p(this,"canvasWrapper"),p(this,"params"),p(this,"_rendererCache"),p(this,"_cameraCache"),p(this,"animate",()=>{var n,o,s;if(this.cancelRequestAnimationFrameId=requestAnimationFrame(this.animate),!this.five.renderer)return;const r=this.five.renderer.getSize(Ub),a=r.toArray().join(",");a!==this._rendererCache&&(this._rendererCache=a,this.renderer.setSize(r.x,r.y));const l=this.five.camera.projectionMatrix.toArray().join(",")+this.five.camera.matrixWorld.toArray().join(",");if(l!==this._cameraCache&&(this._cameraCache=l,this.camera.copy(this.five.camera)),this.renderer.render(this.scene,this.camera),!this.domInited){const c=(n=this.five.getElement())==null?void 0:n.parentElement;c&&(this.canvasWrapper=document.createElement("div"),this.canvasWrapper.classList.add("five-puppet"),this.canvasWrapper.style.position="absolute",this.canvasWrapper.style.pointerEvents="none",this.canvasWrapper.style.left="0",this.canvasWrapper.style.top="0",this.canvasWrapper.style.zIndex=`${(s=(o=this.params)==null?void 0:o.zIndex)!=null?s:1}`,this.canvasWrapper.appendChild(this.renderer.domElement),c.appendChild(this.canvasWrapper),this.domInited=!0)}}),p(this,"stopAnimate",()=>{this.cancelRequestAnimationFrameId&&cancelAnimationFrame(this.cancelRequestAnimationFrameId)}),p(this,"destory",()=>{var n;this.stopAnimate(),this.renderer.dispose(),this.renderer.domElement.remove(),(n=this.canvasWrapper)==null||n.remove()}),this.five=e,this.params=t,this.renderer=new lA({webgl2:!0}),this.renderer.domElement.style.pointerEvents="none",this.renderer.setSize(1,1),window.__FIVEPUPPET_DEBUG__=this,this.animate()}}const KS=(i,e)=>{var t,n;const o=new Mt;let s=(n=(t=e==null?void 0:e.initialState)==null?void 0:t.enabled)!=null?n:!0,r=!1,a=!0,l=null;const c=W(W({},{lookAtCurrentCamera:!1,lockedPanoIndex:null,lockedLatitude:null,lockedLongitude:null}),e==null?void 0:e.config),h=new bl,d=new sA(60);d.near=1,d.updateTime(Date.now());let u=new fi,f,m;{const x=new jc(16777215,.5);x.position.copy(new R(1,1,1)),h.add(x)}{const x=new jc(16777215,.3);h.add(x)}{const x=new Tg(16777215,.3);h.add(x)}h.add(u);const g=()=>ee(void 0,null,function*(){var x,S,k,z,q;if(r||!((S=(x=i.work)==null?void 0:x.model)!=null&&S.file))return;h.remove(u),u=yield cA(i.work.model.file,{textureOptions:{size:128,quality:70},textureArray:(k=i.work.model)==null?void 0:k.textures,textureBaseUri:(z=i.work.model)==null?void 0:z.textureBase,fetcher:(q=c.fetcher)!=null?q:void 0}).then(se=>{const K=se.scene;return K.rotateX(-Math.PI/2),K});const X=ts(u),$=new Ch;$.expandByPoint(new R(X.min.x,X.min.z,-X.min.y)),$.expandByPoint(new R(X.max.x,X.max.z,-X.max.y));const ne=Math.pow(Math.pow($.max.x-$.min.x+1,2)+Math.pow($.max.y-$.min.y+1,2)+Math.pow($.max.z-$.min.z+1,2),1/2);let _=ne/2/Math.tan(Math.PI*d.fov/360);d.aspect<1&&(_=f/d.aspect),f=isNaN(_)?ne:_,m=$.getCenter(new R),h.add(u),r=!0,o.emit("loaded"),T()});s&&g();const v=()=>{if(i.renderer)return l||(l=new fA({antialias:!1,alpha:!0}),l.setPixelRatio(i.renderer.getPixelRatio()),l.outputEncoding=on,l.setClearColor(1579548,0),l.autoClear=!0),l},A=()=>{h.remove(u),u=new fi,h.add(u),r=!1,o.emit("willLoad"),T()},w=()=>{s&&(r||g())},P=()=>{var x,S;s||(s=!0,h.add(u),!r&&(S=(x=i.work)==null?void 0:x.model)!=null&&S.file&&g(),T())},I=()=>{s&&(h.remove(u),a=!0,M(),s=!1)},j=(x,S={})=>{const k=v();if(!k)return;x.appendChild(k.domElement),D(S);const z=window.getComputedStyle(x).position;z!=="relative"&&z!=="absolute"&&z!=="fixed"&&z!=="sticky"&&(x.style.position="relative")},D=(x={})=>{if(!l)return;const S=l.domElement.parentNode;if(S!=null&&S.nodeName){const{width:k=S.offsetWidth,height:z=S.offsetHeight}=x;l.setSize(k,z),d.aspect=k/z,d.updateProjectionMatrix()}T()},T=()=>{if(!s||!f||!m)return;const x=i.getPose();x.fov=d.fov,x.offset=m,x.distance=f,typeof c.lockedLatitude=="number"&&(x.latitude=c.lockedLatitude),typeof c.lockedLongitude=="number"&&(x.longitude=c.lockedLongitude),typeof c.lockedPanoIndex=="number"&&(x.offset=i.work.observers[c.lockedPanoIndex].standingPosition.clone()),c.lookAtCurrentCamera&&(x.offset=i.camera.position.clone().setY(i.camera.position.y+1)),d.setFromPose(x),a=!0},M=()=>{!s||a!==!0||!l||!l.domElement.parentNode||l.domElement.parentNode.offsetWidth===0||(l.render(h,d),a=!1)},O=()=>{l&&l.dispose(),l=null},y=x=>{Object.assign(c,x),T()},C=()=>({enabled:s});return i.on("loaded",w),i.on("willLoad",A),i.on("cameraDirectionUpdate",T),i.on("dispose",O),i.on("renderFrame",M),i.on("cameraPositionUpdate",T),{appendTo:j,refresh:D,changeConfigs:y,enable:P,disable:I,getCurrentState:C,hooks:o}};class Yb extends IA{constructor(...e){super(...e)}toJSON(){return{type:"FiveLine",points:this.points.toJSON()}}}function oe(){}const Tn=i=>i;function ut(i,e){for(const t in e)i[t]=e[t];return i}function qb(i){return!!i&&(typeof i=="object"||typeof i=="function")&&typeof i.then=="function"}function H0(i){return i()}function Au(){return Object.create(null)}function lt(i){i.forEach(H0)}function oi(i){return typeof i=="function"}function ve(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}let Ea;function at(i,e){return Ea||(Ea=document.createElement("a")),Ea.href=e,i===Ea.href}function Zb(i){return Object.keys(i).length===0}function uo(i,e,t,n){if(i){const o=N0(i,e,t,n);return i[0](o)}}function N0(i,e,t,n){return i[1]&&n?ut(t.ctx.slice(),i[1](n(e))):t.ctx}function po(i,e,t,n){if(i[2]&&n){const o=i[2](n(t));if(e.dirty===void 0)return o;if(typeof o=="object"){const s=[],r=Math.max(e.dirty.length,o.length);for(let a=0;a<r;a+=1)s[a]=e.dirty[a]|o[a];return s}return e.dirty|o}return e.dirty}function fo(i,e,t,n,o,s){if(o){const r=N0(e,t,n,s);i.p(r,o)}}function mo(i){if(i.ctx.length>32){const e=[],t=i.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function dn(i){return i??""}function si(i){return i&&oi(i.destroy)?i.destroy:oe}function yu(i){const e=typeof i=="string"&&i.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[i,"px"]}const F0=typeof window<"u";let ed=F0?()=>window.performance.now():()=>Date.now(),td=F0?i=>requestAnimationFrame(i):oe;const Ms=new Set;function V0(i){Ms.forEach(e=>{e.c(i)||(Ms.delete(e),e.f())}),Ms.size!==0&&td(V0)}function id(i){let e;return Ms.size===0&&td(V0),{promise:new Promise(t=>{Ms.add(e={c:i,f:t})}),abort(){Ms.delete(e)}}}function H(i,e){i.appendChild(e)}function Ee(i,e,t){const n=nd(i);if(!n.getElementById(e)){const o=U("style");o.id=e,o.textContent=t,W0(n,o)}}function nd(i){if(!i)return document;const e=i.getRootNode?i.getRootNode():i.ownerDocument;return e&&e.host?e:i.ownerDocument}function Jb(i){const e=U("style");return W0(nd(i),e),e.sheet}function W0(i,e){return H(i.head||i,e),e.sheet}function Y(i,e,t){i.insertBefore(e,t||null)}function Q(i){i.parentNode&&i.parentNode.removeChild(i)}function un(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function U(i){return document.createElement(i)}function ge(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Te(i){return document.createTextNode(i)}function re(){return Te(" ")}function Oe(){return Te("")}function Se(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function G0(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function b(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function Kb(i){return Array.from(i.childNodes)}function Ne(i,e){e=""+e,i.data!==e&&(i.data=e)}function N(i,e,t,n){t===null?i.style.removeProperty(e):i.style.setProperty(e,t,n?"important":"")}function we(i,e,t){i.classList[t?"add":"remove"](e)}function Q0(i,e,{bubbles:t=!1,cancelable:n=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(i,t,n,e),o}class Ns{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=ge(t.nodeName):this.e=U(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Y(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Q)}}const $a=new Map;let el=0;function _b(i){let e=5381,t=i.length;for(;t--;)e=(e<<5)-e^i.charCodeAt(t);return e>>>0}function $b(i,e){const t={stylesheet:Jb(e),rules:{}};return $a.set(i,t),t}function tl(i,e,t,n,o,s,r,a=0){const l=16.666/n;let c=`{
`;for(let v=0;v<=1;v+=l){const A=e+(t-e)*s(v);c+=v*100+`%{${r(A,1-A)}}
`}const h=c+`100% {${r(t,1-t)}}
}`,d=`__svelte_${_b(h)}_${a}`,u=nd(i),{stylesheet:f,rules:m}=$a.get(u)||$b(u,i);m[d]||(m[d]=!0,f.insertRule(`@keyframes ${d} ${h}`,f.cssRules.length));const g=i.style.animation||"";return i.style.animation=`${g?`${g}, `:""}${d} ${n}ms linear ${o}ms 1 both`,el+=1,d}function il(i,e){const t=(i.style.animation||"").split(", "),n=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),o=t.length-n.length;o&&(i.style.animation=n.join(", "),el-=o,el||e2())}function e2(){td(()=>{el||($a.forEach(i=>{const{ownerNode:e}=i.stylesheet;e&&Q(e)}),$a.clear())})}let Vr;function Dn(i){Vr=i}function is(){if(!Vr)throw new Error("Function called outside component initialization");return Vr}function Zt(i){is().$$.on_mount.push(i)}function U0(i){is().$$.after_update.push(i)}function Hi(i){is().$$.on_destroy.push(i)}function Bn(){const i=is();return(e,t,{cancelable:n=!1}={})=>{const o=i.$$.callbacks[e];if(o){const s=Q0(e,t,{cancelable:n});return o.slice().forEach(r=>{r.call(i,s)}),!s.defaultPrevented}return!0}}function nl(i,e){return is().$$.context.set(i,e),e}function pn(i){return is().$$.context.get(i)}function On(i,e){const t=i.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const Cs=[],_e=[];let Ss=[];const Gc=[],X0=Promise.resolve();let Qc=!1;function Y0(){Qc||(Qc=!0,X0.then(Mn))}function ol(){return Y0(),X0}function kt(i){Ss.push(i)}function Ll(i){Gc.push(i)}const sc=new Set;let As=0;function Mn(){if(As!==0)return;const i=Vr;do{try{for(;As<Cs.length;){const e=Cs[As];As++,Dn(e),t2(e.$$)}}catch(e){throw Cs.length=0,As=0,e}for(Dn(null),Cs.length=0,As=0;_e.length;)_e.pop()();for(let e=0;e<Ss.length;e+=1){const t=Ss[e];sc.has(t)||(sc.add(t),t())}Ss.length=0}while(Cs.length);for(;Gc.length;)Gc.pop()();Qc=!1,sc.clear(),Dn(i)}function t2(i){if(i.fragment!==null){i.update(),lt(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(kt)}}function i2(i){const e=[],t=[];Ss.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Ss=e}let fr;function od(){return fr||(fr=Promise.resolve(),fr.then(()=>{fr=null})),fr}function Fo(i,e,t){i.dispatchEvent(Q0(`${e?"intro":"outro"}${t}`))}const Ba=new Set;let an;function xe(){an={r:0,c:[],p:an}}function Ce(){an.r||lt(an.c),an=an.p}function B(i,e){i&&i.i&&(Ba.delete(i),i.i(e))}function G(i,e,t,n){if(i&&i.o){if(Ba.has(i))return;Ba.add(i),an.c.push(()=>{Ba.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}const sd={duration:0};function bo(i,e,t){const n={direction:"in"};let o=e(i,t,n),s=!1,r,a,l=0;function c(){r&&il(i,r)}function h(){const{delay:u=0,duration:f=300,easing:m=Tn,tick:g=oe,css:v}=o||sd;v&&(r=tl(i,0,1,f,u,m,v,l++)),g(0,1);const A=ed()+u,w=A+f;a&&a.abort(),s=!0,kt(()=>Fo(i,!0,"start")),a=id(P=>{if(s){if(P>=w)return g(1,0),Fo(i,!0,"end"),c(),s=!1;if(P>=A){const I=m((P-A)/f);g(I,1-I)}}return s})}let d=!1;return{start(){d||(d=!0,il(i),oi(o)?(o=o(n),od().then(h)):h())},invalidate(){d=!1},end(){s&&(c(),s=!1)}}}function Ks(i,e,t){const n={direction:"out"};let o=e(i,t,n),s=!0,r;const a=an;a.r+=1;function l(){const{delay:c=0,duration:h=300,easing:d=Tn,tick:u=oe,css:f}=o||sd;f&&(r=tl(i,1,0,h,c,d,f));const m=ed()+c,g=m+h;kt(()=>Fo(i,!1,"start")),id(v=>{if(s){if(v>=g)return u(0,1),Fo(i,!1,"end"),--a.r||lt(a.c),!1;if(v>=m){const A=d((v-m)/h);u(1-A,A)}}return s})}return oi(o)?od().then(()=>{o=o(n),l()}):l(),{end(c){c&&o.tick&&o.tick(1,0),s&&(r&&il(i,r),s=!1)}}}function Ri(i,e,t,n){const o={direction:"both"};let s=e(i,t,o),r=n?0:1,a=null,l=null,c=null;function h(){c&&il(i,c)}function d(f,m){const g=f.b-r;return m*=Math.abs(g),{a:r,b:f.b,d:g,duration:m,start:f.start,end:f.start+m,group:f.group}}function u(f){const{delay:m=0,duration:g=300,easing:v=Tn,tick:A=oe,css:w}=s||sd,P={start:ed()+m,b:f};f||(P.group=an,an.r+=1),a||l?l=P:(w&&(h(),c=tl(i,r,f,g,m,v,w)),f&&A(0,1),a=d(P,g),kt(()=>Fo(i,f,"start")),id(I=>{if(l&&I>l.start&&(a=d(l,g),l=null,Fo(i,a.b,"start"),w&&(h(),c=tl(i,r,a.b,a.duration,0,v,s.css))),a){if(I>=a.end)A(r=a.b,1-r),Fo(i,a.b,"end"),l||(a.b?h():--a.group.r||lt(a.group.c)),a=null;else if(I>=a.start){const j=I-a.start;r=a.a+a.d*v(j/a.duration),A(r,1-r)}}return!!(a||l)}))}return{run(f){oi(s)?od().then(()=>{s=s(o),u(f)}):u(f)},end(){h(),a=l=null}}}function Fs(i,e){const t=e.token={};function n(o,s,r,a){if(e.token!==t)return;e.resolved=a;let l=e.ctx;r!==void 0&&(l=l.slice(),l[r]=a);const c=o&&(e.current=o)(l);let h=!1;e.block&&(e.blocks?e.blocks.forEach((d,u)=>{u!==s&&d&&(xe(),G(d,1,1,()=>{e.blocks[u]===d&&(e.blocks[u]=null)}),Ce())}):e.block.d(1),c.c(),B(c,1),c.m(e.mount(),e.anchor),h=!0),e.block=c,e.blocks&&(e.blocks[s]=c),h&&Mn()}if(qb(i)){const o=is();if(i.then(s=>{Dn(o),n(e.then,1,e.value,s),Dn(null)},s=>{if(Dn(o),n(e.catch,2,e.error,s),Dn(null),!e.hasCatch)throw s}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,i),!0;e.resolved=i}}function rd(i,e,t){const n=e.slice(),{resolved:o}=i;i.current===i.then&&(n[i.value]=o),i.current===i.catch&&(n[i.error]=o),i.block.p(n,t)}const n2=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function la(i,e){i.d(1),e.delete(i.key)}function wo(i,e){G(i,1,1,()=>{e.delete(i.key)})}function Ei(i,e,t,n,o,s,r,a,l,c,h,d){let u=i.length,f=s.length,m=u;const g={};for(;m--;)g[i[m].key]=m;const v=[],A=new Map,w=new Map,P=[];for(m=f;m--;){const T=d(o,s,m),M=t(T);let O=r.get(M);O?n&&P.push(()=>O.p(T,e)):(O=c(M,T),O.c()),A.set(M,v[m]=O),M in g&&w.set(M,Math.abs(m-g[M]))}const I=new Set,j=new Set;function D(T){B(T,1),T.m(a,h),r.set(T.key,T),h=T.first,f--}for(;u&&f;){const T=v[f-1],M=i[u-1],O=T.key,y=M.key;T===M?(h=T.first,u--,f--):A.has(y)?!r.has(O)||I.has(O)?D(T):j.has(y)?u--:w.get(O)>w.get(y)?(j.add(O),D(T)):(I.add(y),u--):(l(M,r),u--)}for(;u--;){const T=i[u];A.has(T.key)||l(T,r)}for(;f;)D(v[f-1]);return lt(P),v}function vt(i,e){const t={},n={},o={$$scope:1};let s=i.length;for(;s--;){const r=i[s],a=e[s];if(a){for(const l in r)l in a||(n[l]=1);for(const l in a)o[l]||(t[l]=a[l],o[l]=1);i[s]=a}else for(const l in r)o[l]=1}for(const r in n)r in t||(t[r]=void 0);return t}function q0(i){return typeof i=="object"&&i!==null?i:{}}function Tl(i,e,t){const n=i.$$.props[e];n!==void 0&&(i.$$.bound[n]=t,t(i.$$.ctx[n]))}function de(i){i&&i.c()}function le(i,e,t,n){const{fragment:o,after_update:s}=i.$$;o&&o.m(e,t),n||kt(()=>{const r=i.$$.on_mount.map(H0).filter(oi);i.$$.on_destroy?i.$$.on_destroy.push(...r):lt(r),i.$$.on_mount=[]}),s.forEach(kt)}function ce(i,e){const t=i.$$;t.fragment!==null&&(i2(t.after_update),lt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function o2(i,e){i.$$.dirty[0]===-1&&(Cs.push(i),Y0(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function Ae(i,e,t,n,o,s,r,a=[-1]){const l=Vr;Dn(i);const c=i.$$={fragment:null,ctx:[],props:s,update:oe,not_equal:o,bound:Au(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Au(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};r&&r(c.root);let h=!1;if(c.ctx=t?t(i,e.props||{},(d,u,...f)=>{const m=f.length?f[0]:u;return c.ctx&&o(c.ctx[d],c.ctx[d]=m)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](m),h&&o2(i,d)),u}):[],c.update(),h=!0,lt(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const d=Kb(e.target);c.fragment&&c.fragment.l(d),d.forEach(Q)}else c.fragment&&c.fragment.c();e.intro&&B(i.$$.fragment),le(i,e.target,e.anchor,e.customElement),Mn()}Dn(l)}class ye{$destroy(){ce(this,1),this.$destroy=oe}$on(e,t){if(!oi(t))return oe;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const o=n.indexOf(t);o!==-1&&n.splice(o,1)}}$set(e){this.$$set&&!Zb(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const s2="data:image/png;base64,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",ad={sm:{name:10,area:8,padding:{room:[6,3],guide:[0,0],distance:[4,2]},lineHeight:14,default:10},md:{name:10,area:8,padding:{room:[6,3],guide:[0,0],distance:[4,2]},lineHeight:14,default:10},lg:{name:12,area:10,padding:{room:[8,4],guide:[0,3],distance:[6,3]},lineHeight:16,default:12},xl:{name:14,area:12,padding:{room:[8,4],guide:[0,3],distance:[6,3]},lineHeight:20,default:14},xxl:{name:14,area:12,padding:{room:[8,4],guide:[0,3],distance:[6,3]},lineHeight:20,default:14}},Z0=i=>i<500?"sm":i<930?"md":i<1366?"lg":i<2550?"xl":"xxl",_s=()=>typeof window<"u"?Z0(window.innerWidth):"md";class r2{constructor(){p(this,"fontSize"),p(this,"subscribers",[]),p(this,"debounceTimer",null),p(this,"isInitialized",!1),p(this,"handleResize",()=>{this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{const e=Z0(window.innerWidth);e!==this.fontSize&&(this.fontSize=e,this.notifySubscribers()),this.debounceTimer=null},100)}),this.fontSize=_s(),this.initialize()}initialize(){typeof window>"u"||this.isInitialized||(this.isInitialized=!0,window.addEventListener("resize",this.handleResize))}notifySubscribers(){this.subscribers.forEach(e=>{try{e(this.fontSize)}catch(t){console.warn("Error in fontSize callback:",t)}})}subscribe(e){return this.subscribers.push(e),e(this.fontSize),()=>{this.subscribers=this.subscribers.filter(t=>t!==e)}}get current(){return this.fontSize}destroy(){this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),typeof window<"u"&&window.removeEventListener("resize",this.handleResize),this.subscribers=[],this.isInitialized=!1}}let rc=null;const a2=()=>(rc||(rc=new r2),rc),ca=()=>typeof window>"u"?"md":a2();function ht(i,e=16){return(Number(typeof i=="string"?i.replace(/px/g,""):i)/e).toFixed(5)+"rem"}function l2(i){Ee(i,"svelte-12g01uw",".room-label-item.svelte-12g01uw{position:absolute;font-size:0.5rem;z-index:0;transform:none;cursor:pointer;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.room-label-item__text.svelte-12g01uw{position:absolute;left:0;top:-4rem;transform:translate(-50%, 0);display:flex;justify-content:center;align-items:center;min-width:2rem;pointer-events:all;white-space:nowrap;-o-border-image:var(--bg-image) 3 / 0.0625rem / 0rem stretch;border-image:var(--bg-image) 3 fill / 0.0625rem / 0rem stretch;box-sizing:border-box}.room-label-item__bar.svelte-12g01uw{position:absolute;height:3rem;width:0.0625rem;background-image:linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0))}.wide.svelte-12g01uw{font-size:0.625rem}")}function c2(i){let e,t,n=i[0].name+"",o,s=`url(${s2})`,r,a,l,c;return{c(){e=U("div"),t=U("span"),o=Te(n),r=re(),a=U("div"),b(t,"class","room-label-item__text svelte-12g01uw"),we(t,"wide",i[0].name.length>3),N(t,"font-size",i[3]),N(t,"padding",i[2]),N(t,"--bg-image",s),b(a,"class","room-label-item__bar svelte-12g01uw"),N(a,"top",i[1]),b(e,"class","room-label-item svelte-12g01uw"),N(e,"z-index",i[0].zIndex),N(e,"transform",i[0].transform),N(e,"opacity",i[0].visible?1:0)},m(h,d){Y(h,e,d),H(e,t),H(t,o),H(e,r),H(e,a),l||(c=Se(t,"click",i[4]),l=!0)},p(h,[d]){d&1&&n!==(n=h[0].name+"")&&Ne(o,n),d&1&&we(t,"wide",h[0].name.length>3),d&8&&N(t,"font-size",h[3]),d&4&&N(t,"padding",h[2]),d&2&&N(a,"top",h[1]),d&1&&N(e,"z-index",h[0].zIndex),d&1&&N(e,"transform",h[0].transform),d&1&&N(e,"opacity",h[0].visible?1:0)},i:oe,o:oe,d(h){h&&Q(e),l=!1,c()}}}function h2(i,e,t){let n,o,s,r,a,l,{five:c}=e,{roomLabel:h}=e,{fontSize:d="md"}=e;function u(){c.setState({panoIndex:h.panoIndex,mode:"Panorama",longitude:h.longitude})}return i.$$set=f=>{"five"in f&&t(5,c=f.five),"roomLabel"in f&&t(0,h=f.roomLabel),"fontSize"in f&&t(6,d=f.fontSize)},i.$$.update=()=>{var f;i.$$.dirty&64&&t(9,n=ad[d]),i.$$.dirty&512&&t(3,o=ht((n==null?void 0:n.name)||12)),i.$$.dirty&512&&t(8,s=((f=n==null?void 0:n.padding)==null?void 0:f.room)||[6,5]),i.$$.dirty&256&&t(2,r=`${ht(s[1])} ${ht(s[0])}`),i.$$.dirty&768&&t(7,a=((n==null?void 0:n.lineHeight)||14)+s[1]*2),i.$$.dirty&128&&t(1,l=ht(-(64-a)))},[h,l,r,o,u,c,d,a,s,n]}let d2=class extends ye{constructor(i){super(),Ae(this,i,h2,c2,ve,{five:5,roomLabel:0,fontSize:6},l2)}};var J0=function(){if(typeof Map<"u")return Map;function i(e,t){var n=-1;return e.some(function(o,s){return o[0]===t?(n=s,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=i(this.__entries__,t),o=this.__entries__[n];return o&&o[1]},e.prototype.set=function(t,n){var o=i(this.__entries__,t);~o?this.__entries__[o][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,o=i(n,t);~o&&n.splice(o,1)},e.prototype.has=function(t){return!!~i(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var o=0,s=this.__entries__;o<s.length;o++){var r=s[o];t.call(n,r[1],r[0])}},e}()}(),Uc=typeof window<"u"&&typeof document<"u"&&window.document===document,sl=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),u2=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(sl):function(i){return setTimeout(function(){return i(Date.now())},1e3/60)}}(),p2=2;function f2(i,e){var t=!1,n=!1,o=0;function s(){t&&(t=!1,i()),n&&a()}function r(){u2(s)}function a(){var l=Date.now();if(t){if(l-o<p2)return;n=!0}else t=!0,n=!1,setTimeout(r,e);o=l}return a}var m2=20,g2=["top","right","bottom","left","width","height","size","weight"],v2=typeof MutationObserver<"u",A2=function(){function i(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=f2(this.refresh.bind(this),m2)}return i.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},i.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},i.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},i.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},i.prototype.connect_=function(){!Uc||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),v2?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},i.prototype.disconnect_=function(){!Uc||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},i.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,o=g2.some(function(s){return!!~n.indexOf(s)});o&&this.refresh()},i.getInstance=function(){return this.instance_||(this.instance_=new i),this.instance_},i.instance_=null,i}(),K0=function(i,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var o=n[t];Object.defineProperty(i,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return i},Vs=function(i){var e=i&&i.ownerDocument&&i.ownerDocument.defaultView;return e||sl},_0=Ol(0,0,0,0);function rl(i){return parseFloat(i)||0}function bu(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,o){var s=i["border-"+o+"-width"];return n+rl(s)},0)}function y2(i){for(var e=["top","right","bottom","left"],t={},n=0,o=e;n<o.length;n++){var s=o[n],r=i["padding-"+s];t[s]=rl(r)}return t}function b2(i){var e=i.getBBox();return Ol(0,0,e.width,e.height)}function w2(i){var e=i.clientWidth,t=i.clientHeight;if(!e&&!t)return _0;var n=Vs(i).getComputedStyle(i),o=y2(n),s=o.left+o.right,r=o.top+o.bottom,a=rl(n.width),l=rl(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=bu(n,"left","right")+s),Math.round(l+r)!==t&&(l-=bu(n,"top","bottom")+r)),!C2(i)){var c=Math.round(a+s)-e,h=Math.round(l+r)-t;Math.abs(c)!==1&&(a-=c),Math.abs(h)!==1&&(l-=h)}return Ol(o.left,o.top,a,l)}var x2=function(){return typeof SVGGraphicsElement<"u"?function(i){return i instanceof Vs(i).SVGGraphicsElement}:function(i){return i instanceof Vs(i).SVGElement&&typeof i.getBBox=="function"}}();function C2(i){return i===Vs(i).document.documentElement}function P2(i){return Uc?x2(i)?b2(i):w2(i):_0}function E2(i){var e=i.x,t=i.y,n=i.width,o=i.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,r=Object.create(s.prototype);return K0(r,{x:e,y:t,width:n,height:o,top:t,right:e+n,bottom:o+t,left:e}),r}function Ol(i,e,t,n){return{x:i,y:e,width:t,height:n}}var I2=function(){function i(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ol(0,0,0,0),this.target=e}return i.prototype.isActive=function(){var e=P2(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},i.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},i}(),M2=function(){function i(e,t){var n=E2(t);K0(this,{target:e,contentRect:n})}return i}(),S2=function(){function i(e,t,n){if(this.activeObservations_=[],this.observations_=new J0,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return i.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Vs(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new I2(e)),this.controller_.addObserver(this),this.controller_.refresh())}},i.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Vs(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},i.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},i.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},i.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new M2(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},i.prototype.clearActive=function(){this.activeObservations_.splice(0)},i.prototype.hasActive=function(){return this.activeObservations_.length>0},i}(),$0=typeof WeakMap<"u"?new WeakMap:new J0,ev=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=A2.getInstance(),n=new S2(e,t,this);$0.set(this,n)}return i}();["observe","unobserve","disconnect"].forEach(function(i){ev.prototype[i]=function(){var e;return(e=$0.get(this))[i].apply(e,arguments)}});var D2=function(){return typeof sl.ResizeObserver<"u"?sl.ResizeObserver:ev}();function Ni(i){new D2((e,t)=>{var n,o,s,r,a,l;for(const c of e){const{borderBoxSize:h,contentRect:d}=c,u=(s=(o=(n=h==null?void 0:h[0])==null?void 0:n.inlineSize)!=null?o:d.width)!=null?s:i.clientWidth,f=(l=(a=(r=h==null?void 0:h[0])==null?void 0:r.blockSize)!=null?a:d.height)!=null?l:i.clientHeight;i.dispatchEvent(new CustomEvent("clientWidth",{detail:u})),i.dispatchEvent(new CustomEvent("clientHeight",{detail:f}))}}).observe(i)}const{Map:k2}=n2;function z2(i){Ee(i,"svelte-9eg4zi",".room-labels-container.svelte-9eg4zi{width:100%;height:100%;position:relative;color:#fff}")}function wu(i,e,t){const n=i.slice();return n[15]=e[t],n}function xu(i,e){let t,n,o;return n=new d2({props:{roomLabel:e[15],five:e[1],fontSize:e[4]}}),{key:i,first:null,c(){t=Oe(),de(n.$$.fragment),this.first=t},m(s,r){Y(s,t,r),le(n,s,r),o=!0},p(s,r){e=s;const a={};r&1&&(a.roomLabel=e[15]),r&2&&(a.five=e[1]),r&16&&(a.fontSize=e[4]),n.$set(a)},i(s){o||(B(n.$$.fragment,s),o=!0)},o(s){G(n.$$.fragment,s),o=!1},d(s){s&&Q(t),ce(n,s)}}}function j2(i){let e,t=[],n=new k2,o,s,r,a=i[0];const l=c=>c[15].id;for(let c=0;c<a.length;c+=1){let h=wu(i,a,c),d=l(h);n.set(d,t[c]=xu(d,h))}return{c(){e=U("div");for(let c=0;c<t.length;c+=1)t[c].c();b(e,"class","room-labels-container svelte-9eg4zi")},m(c,h){Y(c,e,h);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);o=!0,s||(r=[si(Ni.call(null,e)),Se(e,"clientWidth",i[7]),Se(e,"clientHeight",i[8])],s=!0)},p(c,[h]){h&19&&(a=c[0],xe(),t=Ei(t,h,l,1,c,a,n,e,wo,xu,null,wu),Ce())},i(c){if(!o){for(let h=0;h<a.length;h+=1)B(t[h]);o=!0}},o(c){for(let h=0;h<t.length;h+=1)G(t[h]);o=!1},d(c){c&&Q(e);for(let h=0;h<t.length;h+=1)t[h].d();s=!1,lt(r)}}}function L2(i,e,t){var n;let o,{five:s}=e,{roomLabels:r}=e,a,l,c=(n=s.model.shownFloor)!=null?n:null;const h=ca();let d=_s();typeof h=="object"&&"subscribe"in h&&h.subscribe(P=>{t(4,d=P)});function u(P){if(!(c===null||P.floorIndex===c))return!1;const I=new Ot,j=s.camera.position.clone(),D=new R(P.position.x,P.position.y,P.position.z),T=D.distanceTo(j);I.set(j.clone(),D.clone().sub(j).normalize());const[M]=s.model.intersectRaycaster(I);return!(M&&M.distance+1<T)}function f(P,I){const j=new R(P.position.x,P.position.y,P.position.z).clone().project(s.camera),D=Math.ceil((j.x+1)/2*I.x),T=Math.ceil((-j.y+1)/2*I.y);return`translate(${D}px, ${T}px)`}function m(P){const{rendererSize:I}=P,j=new Map;function D(T){const M=j.get(T.id);if(M)return M;const{x:O,y,z:C}=T.position,x=new R(O,y,C).clone().distanceTo(s.camera.position);return j.set(T.id,x),x}return r.map(T=>{const M=u(T),O=M?f(T,I):T.transform,y=D(T),C=r.filter(x=>x.visible&&D(x)<y).length*10;return pe(W({},T),{visible:M,transform:O,zIndex:C})})}function g(){t(0,r=m({rendererSize:o,shownFloor:c}))}function v(P){t(5,c=P)}s.on("cameraUpdate",g),s.on("modelShownFloorChange",v),U0(()=>{t(0,r=m({rendererSize:o,shownFloor:c}))}),Hi(()=>{s.off("cameraUpdate",g),s.off("modelShownFloorChange",v)});const A=P=>{t(2,a=P.detail)},w=P=>{t(3,l=P.detail)};return i.$$set=P=>{"five"in P&&t(1,s=P.five),"roomLabels"in P&&t(0,r=P.roomLabels)},i.$$.update=()=>{i.$$.dirty&12&&t(6,o={x:a,y:l}),i.$$.dirty&96&&t(0,r=m({rendererSize:o,shownFloor:c}))},[r,s,a,l,d,c,o,A,w]}class T2 extends ye{constructor(e){super(),Ae(this,e,L2,j2,ve,{five:1,roomLabels:0},z2)}}function O2(i){return i.model_room_labels.map(({id:e,pano_index:t,floor_index:n,name:o,position:s,longitude:r})=>({id:e,name:o,position:s,longitude:r,panoIndex:t,floorIndex:n,zIndex:0,visible:!1,transform:""}))}class R2{constructor(e){p(this,"five"),p(this,"enabled",!0),p(this,"fiveModeEnabled"),p(this,"app"),p(this,"wrapper"),p(this,"roomLabels",[]),p(this,"container",document.createElement("div")),p(this,"onFiveModeChange",t=>{if(!this.checkFiveMode(t)){this.fiveModeEnabled=!1,this.render();return}this.five.once("initAnimationEnded",()=>{this.fiveModeEnabled=this.checkFiveMode(this.five.getCurrentState().mode),this.render()})}),this.five=e,this.fiveModeEnabled=this.checkFiveMode(e.getCurrentState().mode),this.container.classList.add("model-room-label-plugin-container"),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="absolute",this.container.style.pointerEvents="none",this.container.style.left="0",this.container.style.top="0",this.container.style.zIndex="5",this.five.once("dispose",()=>this.dispose()),this.five.on("modeChange",this.onFiveModeChange),this.render()}dispose(){this.five.off("modeChange",this.onFiveModeChange),this.container.remove()}load(e){this.roomLabels=O2(e),this.render()}appendTo(e){return this.wrapper=e,e.appendChild(this.container),this.render(),this}disable(){return this.enabled=!1,this.render(),this}enable(){return this.enabled=!0,this.render(),this}checkFiveMode(e){return e==="Floorplan"||e==="Mapview"}render(){var e;if(this.wrapper){if(!this.enabled||!this.fiveModeEnabled){(e=this.app)==null||e.$destroy(),this.app=void 0;return}this.app?this.app.$set({five:this.five,roomLabels:this.roomLabels}):this.app=new T2({target:this.container,props:{five:this.five,roomLabels:this.roomLabels}})}}}const _S=i=>new R2(i);var Sr=(i=>(i[i.FLOOR=1]="FLOOR",i[i.CEILING=2]="CEILING",i[i.BOUNDING_CENTER=3]="BOUNDING_CENTER",i))(Sr||{});function Ws(i){return ee(this,null,function*(){try{return[null,yield i]}catch(e){return e instanceof Error?[e,null]:[new Error(""),null]}})}function Gs(i){return i<.5?4*i*i*i:.5*Math.pow(2*i-2,3)+1}function Wr(i){const e=i-1;return e*e*e+1}function Ft(i,{delay:e=0,duration:t=400,easing:n=Tn}={}){const o=+getComputedStyle(i).opacity;return{delay:e,duration:t,easing:n,css:s=>`opacity: ${s*o}`}}function Cu(i,{delay:e=0,duration:t=400,easing:n=Wr,x:o=0,y:s=0,opacity:r=0}={}){const a=getComputedStyle(i),l=+a.opacity,c=a.transform==="none"?"":a.transform,h=l*(1-r),[d,u]=yu(o),[f,m]=yu(s);return{delay:e,duration:t,easing:n,css:(g,v)=>`
			transform: ${c} translate(${(1-g)*d}${u}, ${(1-g)*f}${m});
			opacity: ${l-h*v}`}}function al(i,{delay:e=0,speed:t,duration:n,easing:o=Gs}={}){let s=i.getTotalLength();const r=getComputedStyle(i);return r.strokeLinecap!=="butt"&&(s+=parseInt(r.strokeWidth)),n===void 0?t===void 0?n=800:n=s/t:typeof n=="function"&&(n=n(s)),{delay:e,duration:n,easing:o,css:(a,l)=>`
			stroke-dasharray: ${s};
			stroke-dashoffset: ${l*s};
		`}}const ys=[];function tv(i,e=oe){let t;const n=new Set;function o(a){if(ve(i,a)&&(i=a,t)){const l=!ys.length;for(const c of n)c[1](),ys.push(c,i);if(l){for(let c=0;c<ys.length;c+=2)ys[c][0](ys[c+1]);ys.length=0}}}function s(a){o(a(i))}function r(a,l=oe){const c=[a,l];return n.add(c),n.size===1&&(t=e(o)||oe),a(i),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:o,update:s,subscribe:r}}function B2(i){Ee(i,"svelte-1gfoniz","img.svelte-1gfoniz{width:100%;height:100%}")}function H2(i){let e,t;return{c(){e=U("img"),at(e.src,t=i[0])||b(e,"src",t),b(e,"alt","floorplan iamge"),b(e,"class","svelte-1gfoniz")},m(n,o){Y(n,e,o)},p(n,[o]){o&1&&!at(e.src,t=n[0])&&b(e,"src",t)},i:oe,o:oe,d(n){n&&Q(e)}}}function N2(i,e,t){let{url:n}=e;return i.$$set=o=>{"url"in o&&t(0,n=o.url)},[n]}class F2 extends ye{constructor(e){super(),Ae(this,e,N2,H2,ve,{url:0},B2)}}function V2(i){Ee(i,"svelte-ub47ya",".floorplan-plugin__base-image.svelte-ub47ya{width:100%;height:100%}")}function W2(i){let e,t,n,o;return{c(){e=U("div"),t=new Ns(!1),n=re(),o=new Ns(!1),t.a=n,o.a=null,b(e,"class","floorplan-plugin__base-image svelte-ub47ya")},m(s,r){Y(s,e,r),t.m(i[1],e),H(e,n),o.m(i[0],e)},p(s,[r]){r&1&&o.p(s[0])},i:oe,o:oe,d(s){s&&Q(e)}}}function G2(i,e,t){let{content:n}=e;const o=`
    <style>
      svg [type='lineGroup'] path {
        fill: #ffffff;
        stroke: #ffffff;
      }
      svg [type='lineItemGroup'] g g g g {
        stroke: #ffffff;
      }</style>
  `;return i.$$set=s=>{"content"in s&&t(0,n=s.content)},[n,o]}class Q2 extends ye{constructor(e){super(),Ae(this,e,G2,W2,ve,{content:0},V2)}}function U2(i){Ee(i,"svelte-ozpg4a",".floorplan-plugin__base-image.svelte-ozpg4a{position:absolute;z-index:10;width:100%;height:100%;pointer-events:none}")}function X2(i){let e,t;return e=new F2({props:{url:i[1].url}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.url=n[1].url),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Y2(i){let e,t;return e=new Q2({props:{content:i[0]}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.content=n[0]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function q2(i){let e,t,n,o;const s=[Y2,X2],r=[];function a(l,c){return l[0]?0:l[1]?1:-1}return~(t=a(i))&&(n=r[t]=s[t](i)),{c(){e=U("div"),n&&n.c(),b(e,"class","floorplan-plugin__base-image svelte-ozpg4a")},m(l,c){Y(l,e,c),~t&&r[t].m(e,null),o=!0},p(l,[c]){let h=t;t=a(l),t===h?~t&&r[t].p(l,c):(n&&(xe(),G(r[h],1,1,()=>{r[h]=null}),Ce()),~t?(n=r[t],n?n.p(l,c):(n=r[t]=s[t](l),n.c()),B(n,1),n.m(e,null)):n=null)},i(l){o||(B(n),o=!0)},o(l){G(n),o=!1},d(l){l&&Q(e),~t&&r[t].d()}}}function Z2(i,e,t){let n,o,{floorIndex:s}=e,{floorplanData:r}=e;return i.$$set=a=>{"floorIndex"in a&&t(2,s=a.floorIndex),"floorplanData"in a&&t(3,r=a.floorplanData)},i.$$.update=()=>{var a,l;i.$$.dirty&12&&t(1,n=r.outlines[s]),i.$$.dirty&12&&t(0,o=(l=(a=r.outlines)==null?void 0:a[s])==null?void 0:l.svgContent)},[o,n,s,r]}class ld extends ye{constructor(e){super(),Ae(this,e,Z2,q2,ve,{floorIndex:2,floorplanData:3},U2)}}function J2(i){Ee(i,"svelte-2r6702",".floorplan-plugin__item.svelte-2r6702{position:absolute;display:flex;flex-flow:column;align-items:center;line-height:1;color:#fff;transform:translate(-50%, -50%);white-space:nowrap;will-change:opacity;transition:opacity 300ms}.floorplan-plugin__img.svelte-2r6702{width:100%;height:100%}.floorplan-plugin__notes.svelte-2r6702{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);padding:0.25rem;line-height:1;border-radius:0.25rem;color:#fff;background:rgba(0,0,0,.6);font-size:0.75rem}")}function K2(i){let e,t,n,o,s,r=i[0].notes+"",a;return{c(){e=U("div"),t=U("img"),o=re(),s=U("span"),a=Te(r),b(t,"class","floorplan-plugin__img svelte-2r6702"),at(t.src,n=i[6])||b(t,"src",n),b(t,"alt",""),N(t,"transform",i[5]),b(s,"class","floorplan-plugin__notes svelte-2r6702"),b(e,"class","floorplan-plugin__item svelte-2r6702"),N(e,"left",i[1]),N(e,"top",i[2]),N(e,"width",i[3]),N(e,"height",i[4])},m(l,c){Y(l,e,c),H(e,t),H(e,o),H(e,s),H(s,a)},p(l,[c]){c&1&&r!==(r=l[0].notes+"")&&Ne(a,r)},i:oe,o:oe,d(l){l&&Q(e)}}}function _2(i,e,t){let{item:n}=e;const o=n.positionInImage.x*100+"%",s=n.positionInImage.y*100+"%",r=n.width*100+"%",a=n.height*100+"%",l=`rotate(${n.rotateZ}deg) scaleX(${n.rotateX?-1:1}) scaleY(${n.rotateY?-1:1})`,c=n.src;return i.$$set=h=>{"item"in h&&t(0,n=h.item)},[n,o,s,r,a,l,c]}class $2 extends ye{constructor(e){super(),Ae(this,e,_2,K2,ve,{item:0},J2)}}function ew(i){Ee(i,"svelte-1c5mqz0",".floorplan-plugin__room-items.svelte-1c5mqz0{width:100%;height:100%;position:absolute;left:0;top:0;z-index:20;pointer-events:none}")}function Pu(i,e,t){const n=i.slice();return n[6]=e[t],n}function Eu(i){let e,t=[],n=new Map,o,s,r,a=i[1];const l=c=>c[6].id;for(let c=0;c<a.length;c+=1){let h=Pu(i,a,c),d=l(h);n.set(d,t[c]=Iu(d,h))}return{c(){e=U("div");for(let c=0;c<t.length;c+=1)t[c].c();b(e,"class","floorplan-plugin__room-items svelte-1c5mqz0")},m(c,h){Y(c,e,h);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);o=!0,s||(r=[si(Ni.call(null,e)),Se(e,"clientWidth",i[4])],s=!0)},p(c,h){h&2&&(a=c[1],xe(),t=Ei(t,h,l,1,c,a,n,e,wo,Iu,null,Pu),Ce())},i(c){if(!o){for(let h=0;h<a.length;h+=1)B(t[h]);o=!0}},o(c){for(let h=0;h<t.length;h+=1)G(t[h]);o=!1},d(c){c&&Q(e);for(let h=0;h<t.length;h+=1)t[h].d();s=!1,lt(r)}}}function Iu(i,e){let t,n,o;const s=[{item:e[6]}];let r={};for(let a=0;a<s.length;a+=1)r=ut(r,s[a]);return n=new $2({props:r}),{key:i,first:null,c(){t=Oe(),de(n.$$.fragment),this.first=t},m(a,l){Y(a,t,l),le(n,a,l),o=!0},p(a,l){e=a;const c=l&2?vt(s,[{item:e[6]}]):{};n.$set(c)},i(a){o||(B(n.$$.fragment,a),o=!0)},o(a){G(n.$$.fragment,a),o=!1},d(a){a&&Q(t),ce(n,a)}}}function tw(i){let e,t,n=i[1]&&Eu(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[1]?n?(n.p(o,s),s&2&&B(n,1)):(n=Eu(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function iw(i,e,t){let n,{floorIndex:o}=e,{floorplanData:s}=e,r=0;const a=l=>{t(0,r=l.detail)};return i.$$set=l=>{"floorIndex"in l&&t(2,o=l.floorIndex),"floorplanData"in l&&t(3,s=l.floorplanData)},i.$$.update=()=>{if(i.$$.dirty&12&&t(1,n=s.floorDatas[o].items),i.$$.dirty&9){const{max:l,min:c}=s.bounding;l.x-c.x}},[r,n,o,s,a]}class nw extends ye{constructor(e){super(),Ae(this,e,iw,tw,ve,{floorIndex:2,floorplanData:3},ew)}}function ow(i){Ee(i,"svelte-9vzn2f",".floorplan-plugin__room-label-item.svelte-9vzn2f{position:absolute;display:flex;flex-flow:column;align-items:center;line-height:1;color:#fff;transform:translate(-50%, -50%);white-space:nowrap;will-change:opacity;transition:opacity 300ms}.floorplan-plugin__room-part1.svelte-9vzn2f{display:flex;flex-flow:column;align-items:center;color:#fff;white-space:nowrap}.floorplan-plugin__room-area.svelte-9vzn2f{opacity:0.6;line-height:1.25;margin-top:0.125rem}")}function sw(i){let e,t=i[18].outerHTML+"",n;return{c(){e=new Ns(!1),n=Oe(),e.a=n},m(o,s){e.m(t,o,s),Y(o,n,s)},p(o,s){s[0]&262144&&t!==(t=o[18].outerHTML+"")&&e.p(t)},d(o){o&&Q(n),o&&e.d()}}}function rw(i){let e,t,n,o,s,r,a=i[1]&&Mu(i),l=i[0]&&Su(i),c=i[3]&&Du(i);return{c(){e=U("div"),a&&a.c(),t=re(),l&&l.c(),n=re(),c&&c.c(),o=Oe(),b(e,"class","floorplan-plugin__room-part1 svelte-9vzn2f"),N(e,"opacity",i[14]?"1":"0")},m(h,d){Y(h,e,d),a&&a.m(e,null),H(e,t),l&&l.m(e,null),Y(h,n,d),c&&c.m(h,d),Y(h,o,d),s||(r=[si(Ni.call(null,e)),Se(e,"clientWidth",i[35]),Se(e,"clientHeight",i[36])],s=!0)},p(h,d){h[1]?a?a.p(h,d):(a=Mu(h),a.c(),a.m(e,t)):a&&(a.d(1),a=null),h[0]?l?l.p(h,d):(l=Su(h),l.c(),l.m(e,null)):l&&(l.d(1),l=null),d[0]&16384&&N(e,"opacity",h[14]?"1":"0"),h[3]?c?c.p(h,d):(c=Du(h),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},d(h){h&&Q(e),a&&a.d(),l&&l.d(),h&&Q(n),c&&c.d(h),h&&Q(o),s=!1,lt(r)}}}function Mu(i){let e,t=(i[2]?i[4].name:i[4].roomType==="100900000012"?i[4].customizedName:i[4].name)+"",n;return{c(){e=U("span"),n=Te(t),b(e,"class","floorplan-plugin__room-name"),N(e,"font-size",i[11])},m(o,s){Y(o,e,s),H(e,n)},p(o,s){s[0]&20&&t!==(t=(o[2]?o[4].name:o[4].roomType==="100900000012"?o[4].customizedName:o[4].name)+"")&&Ne(n,t),s[0]&2048&&N(e,"font-size",o[11])},d(o){o&&Q(e)}}}function Su(i){let e,t;return{c(){e=U("span"),t=Te(i[17]),b(e,"class","floorplan-plugin__room-area svelte-9vzn2f"),N(e,"font-size",i[10])},m(n,o){Y(n,e,o),H(e,t)},p(n,o){o[0]&131072&&Ne(t,n[17]),o[0]&1024&&N(e,"font-size",n[10])},d(n){n&&Q(e)}}}function Du(i){let e,t;return{c(){e=U("span"),t=Te(i[16]),b(e,"class","floorplan-plugin__room-size"),N(e,"font-size",i[10]),N(e,"opacity",i[13]?"0.6":"0")},m(n,o){Y(n,e,o),H(e,t)},p(n,o){o[0]&65536&&Ne(t,n[16]),o[0]&1024&&N(e,"font-size",n[10]),o[0]&8192&&N(e,"opacity",n[13]?"0.6":"0")},d(n){n&&Q(e)}}}function aw(i){let e,t,n;function o(a,l){if(a[5]===void 0)return rw;if(a[18])return sw}let s=o(i),r=s&&s(i);return{c(){e=U("div"),r&&r.c(),b(e,"class","floorplan-plugin__room-label-item svelte-9vzn2f"),N(e,"left",i[19]),N(e,"top",i[20]),N(e,"font-size",i[11]),N(e,"opacity",i[15]?"1":"0"),N(e,"transform",i[12]?"translate(-50%, calc(-50% + 6px))":"translate(-50%, -50%)")},m(a,l){Y(a,e,l),r&&r.m(e,null),t||(n=[si(Ni.call(null,e)),Se(e,"clientWidth",i[37]),Se(e,"clientHeight",i[38])],t=!0)},p(a,l){s===(s=o(a))&&r?r.p(a,l):(r&&r.d(1),r=s&&s(a),r&&(r.c(),r.m(e,null))),l[0]&2048&&N(e,"font-size",a[11]),l[0]&32768&&N(e,"opacity",a[15]?"1":"0"),l[0]&4096&&N(e,"transform",a[12]?"translate(-50%, calc(-50% + 6px))":"translate(-50%, -50%)")},i:oe,o:oe,d(a){a&&Q(e),r&&r.d(),t=!1,lt(n)}}}function lw(i,e){const t=i[0],n=i[1];let o=!1;for(let s=0,r=e.length-1;s<e.length;r=s++){const a=e[s][0],l=e[s][1],c=e[r][0],h=e[r][1];l>n!=h>n&&t<(c-a)*(n-l)/(h-l)+a&&(o=!o)}return o}function cw(i,e,t){let n,o,s,r,a,l,c,h,d,u,f,m,g,v,A,w,{pxmm:P}=e,{roomAreaEnable:I}=e,{roomNameEnable:j}=e,{roomNameOtherTypeEnable:D}=e,{roomDimensionEnable:T}=e,{room:M}=e,{hoveredRoom:O}=e,{getRoomAreaText:y}=e,{getRoomDimensionText:C}=e,{getLabelElement:x}=e,{adaptiveRoomLabelVisibleEnable:S}=e,{fontSize:k}=e;function z(Pe,Le){if(Le.width===0||Le.height===0)return()=>!1;const ie=Pe.path.map(({x:nt,y:At})=>[nt,At]),Me=Pe.roomLabel.position,{x:Fe,y:Ie}=Me,{width:Ve,height:ue}=Le,be=Ve/2,Je=ue/2;return function(nt){const At=Fe*nt,zt=Ie*nt,yt=ie.map(([gi,Fi])=>[gi*nt,Fi*nt]);return[[At+be,zt-Je],[At-be,zt-Je],[At-be,zt+Je],[At+be,zt+Je]].every(gi=>lw(gi,yt))}}const q=M.roomLabel,X=q.positionInImage.x*100+"%",$=q.positionInImage.y*100+"%";let ne=0,_=0,se=0,K=0,me=!1;O.subscribe(function(Pe){t(27,me=!!Pe&&Pe.id===M.id)});const De=Pe=>{t(8,se=Pe.detail)},he=Pe=>{t(9,K=Pe.detail)},je=Pe=>{t(6,ne=Pe.detail)},ze=Pe=>{t(7,_=Pe.detail)};return i.$$set=Pe=>{"pxmm"in Pe&&t(21,P=Pe.pxmm),"roomAreaEnable"in Pe&&t(0,I=Pe.roomAreaEnable),"roomNameEnable"in Pe&&t(1,j=Pe.roomNameEnable),"roomNameOtherTypeEnable"in Pe&&t(2,D=Pe.roomNameOtherTypeEnable),"roomDimensionEnable"in Pe&&t(3,T=Pe.roomDimensionEnable),"room"in Pe&&t(4,M=Pe.room),"hoveredRoom"in Pe&&t(22,O=Pe.hoveredRoom),"getRoomAreaText"in Pe&&t(23,y=Pe.getRoomAreaText),"getRoomDimensionText"in Pe&&t(24,C=Pe.getRoomDimensionText),"getLabelElement"in Pe&&t(5,x=Pe.getLabelElement),"adaptiveRoomLabelVisibleEnable"in Pe&&t(25,S=Pe.adaptiveRoomLabelVisibleEnable),"fontSize"in Pe&&t(26,k=Pe.fontSize)},i.$$.update=()=>{var Pe,Le;i.$$.dirty[0]&67108864&&t(28,n=ad[k]),i.$$.dirty[0]&48&&t(18,o=x==null?void 0:x(M)),i.$$.dirty[0]&8388624&&t(17,s=M.size?y(M.size):""),i.$$.dirty[0]&16777232&&t(16,r=M!=null&&M.dimension?C((Pe=M.dimension)==null?void 0:Pe.width,(Le=M.dimension)==null?void 0:Le.height):""),i.$$.dirty[0]&768&&t(34,a={width:se,height:K}),i.$$.dirty[0]&16|i.$$.dirty[1]&8&&t(33,l=a?z(M,a):void 0),i.$$.dirty[0]&35651584|i.$$.dirty[1]&4&&t(30,c=S?!!(l!=null&&l(P)):!0),i.$$.dirty[0]&192&&t(32,h={width:ne,height:_}),i.$$.dirty[0]&16|i.$$.dirty[1]&2&&t(31,d=h?z(M,h):void 0),i.$$.dirty[0]&35651584|i.$$.dirty[1]&1&&t(29,u=S?!!(d!=null&&d(P)):!0),i.$$.dirty[0]&1744830464&&t(15,f=u||c||me),i.$$.dirty[0]&1207959552&&t(14,m=c||me),i.$$.dirty[0]&671088640&&t(13,g=u||me),i.$$.dirty[0]&1610612736&&t(12,v=c&&!u),i.$$.dirty[0]&268435456&&t(11,A=ht((n==null?void 0:n.name)||12)),i.$$.dirty[0]&268435456&&t(10,w=ht((n==null?void 0:n.area)||10))},[I,j,D,T,M,x,ne,_,se,K,w,A,v,g,m,f,r,s,o,X,$,P,O,y,C,S,k,me,n,u,c,d,h,l,a,De,he,je,ze]}class hw extends ye{constructor(e){super(),Ae(this,e,cw,aw,ve,{pxmm:21,roomAreaEnable:0,roomNameEnable:1,roomNameOtherTypeEnable:2,roomDimensionEnable:3,room:4,hoveredRoom:22,getRoomAreaText:23,getRoomDimensionText:24,getLabelElement:5,adaptiveRoomLabelVisibleEnable:25,fontSize:26},ow,[-1,-1])}}function dw(i){Ee(i,"svelte-13xux0b",".floorplan-plugin__room-labels.svelte-13xux0b{width:100%;height:100%;position:absolute;left:0;top:0;z-index:20;pointer-events:none}")}function ku(i,e,t){const n=i.slice();return n[17]=e[t],n}function zu(i){let e,t=[],n=new Map,o,s,r,a=i[12];const l=c=>c[17].id;for(let c=0;c<a.length;c+=1){let h=ku(i,a,c),d=l(h);n.set(d,t[c]=ju(d,h))}return{c(){e=U("div");for(let c=0;c<t.length;c+=1)t[c].c();b(e,"class","floorplan-plugin__room-labels svelte-13xux0b")},m(c,h){Y(c,e,h);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);o=!0,s||(r=[si(Ni.call(null,e)),Se(e,"clientWidth",i[15])],s=!0)},p(c,h){h&7679&&(a=c[12],xe(),t=Ei(t,h,l,1,c,a,n,e,wo,ju,null,ku),Ce())},i(c){if(!o){for(let h=0;h<a.length;h+=1)B(t[h]);o=!0}},o(c){for(let h=0;h<t.length;h+=1)G(t[h]);o=!1},d(c){c&&Q(e);for(let h=0;h<t.length;h+=1)t[h].d();s=!1,lt(r)}}}function ju(i,e){let t,n,o;const s=[{pxmm:e[10],room:e[17],hoveredRoom:e[4],roomAreaEnable:e[0],roomNameEnable:e[1],roomNameOtherTypeEnable:e[2],roomDimensionEnable:e[3],getLabelElement:e[7],getRoomAreaText:e[5],getRoomDimensionText:e[6],adaptiveRoomLabelVisibleEnable:e[8],fontSize:e[11]}];let r={};for(let a=0;a<s.length;a+=1)r=ut(r,s[a]);return n=new hw({props:r}),{key:i,first:null,c(){t=Oe(),de(n.$$.fragment),this.first=t},m(a,l){Y(a,t,l),le(n,a,l),o=!0},p(a,l){e=a;const c=l&7679?vt(s,[{pxmm:e[10],room:e[17],hoveredRoom:e[4],roomAreaEnable:e[0],roomNameEnable:e[1],roomNameOtherTypeEnable:e[2],roomDimensionEnable:e[3],getLabelElement:e[7],getRoomAreaText:e[5],getRoomDimensionText:e[6],adaptiveRoomLabelVisibleEnable:e[8],fontSize:e[11]}]):{};n.$set(c)},i(a){o||(B(n.$$.fragment,a),o=!0)},o(a){G(n.$$.fragment,a),o=!1},d(a){a&&Q(t),ce(n,a)}}}function uw(i){let e,t,n=i[12]&&zu(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[12]?n?(n.p(o,s),s&4096&&B(n,1)):(n=zu(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function pw(i,e,t){let n,{floorIndex:o}=e,{roomAreaEnable:s}=e,{roomNameEnable:r}=e,{roomNameOtherTypeEnable:a}=e,{roomDimensionEnable:l}=e,{floorplanData:c}=e,{hoveredRoom:h}=e,{getRoomAreaText:d}=e,{getRoomDimensionText:u}=e,{getLabelElement:f}=e,{adaptiveRoomLabelVisibleEnable:m}=e,g=0,v=0;const A=ca();let w=_s();typeof A=="object"&&"subscribe"in A&&A.subscribe(I=>{t(11,w=I)});const P=I=>{t(9,g=I.detail)};return i.$$set=I=>{"floorIndex"in I&&t(13,o=I.floorIndex),"roomAreaEnable"in I&&t(0,s=I.roomAreaEnable),"roomNameEnable"in I&&t(1,r=I.roomNameEnable),"roomNameOtherTypeEnable"in I&&t(2,a=I.roomNameOtherTypeEnable),"roomDimensionEnable"in I&&t(3,l=I.roomDimensionEnable),"floorplanData"in I&&t(14,c=I.floorplanData),"hoveredRoom"in I&&t(4,h=I.hoveredRoom),"getRoomAreaText"in I&&t(5,d=I.getRoomAreaText),"getRoomDimensionText"in I&&t(6,u=I.getRoomDimensionText),"getLabelElement"in I&&t(7,f=I.getLabelElement),"adaptiveRoomLabelVisibleEnable"in I&&t(8,m=I.adaptiveRoomLabelVisibleEnable)},i.$$.update=()=>{if(i.$$.dirty&24576&&t(12,n=c.floorDatas[o].rooms),i.$$.dirty&16896){const{max:I,min:j}=c.bounding,D=I.x-j.x;t(10,v=g/D)}},[s,r,a,l,h,d,u,f,m,g,v,w,n,o,c,P]}let fw=class extends ye{constructor(i){super(),Ae(this,i,pw,uw,ve,{floorIndex:13,roomAreaEnable:0,roomNameEnable:1,roomNameOtherTypeEnable:2,roomDimensionEnable:3,floorplanData:14,hoveredRoom:4,getRoomAreaText:5,getRoomDimensionText:6,getLabelElement:7,adaptiveRoomLabelVisibleEnable:8},dw)}};function mw(i){Ee(i,"svelte-1fuyezq",".floorplan-plugin__rule-labels.svelte-1fuyezq.svelte-1fuyezq{position:absolute;display:flex}.floorplan-plugin__rule-labels--top.svelte-1fuyezq.svelte-1fuyezq{left:0;top:-1.25rem}.floorplan-plugin__rule-labels--bottom.svelte-1fuyezq.svelte-1fuyezq{left:0;bottom:-1.25rem}.floorplan-plugin__rule-labels--left.svelte-1fuyezq.svelte-1fuyezq{top:0;left:-1.25rem}.floorplan-plugin__rule-labels--right.svelte-1fuyezq.svelte-1fuyezq{top:0;right:-1.25rem}.floorplan-plugin__rule-line.svelte-1fuyezq.svelte-1fuyezq{background:#fff;opacity:0.2;width:100%;height:100%}.floorplan-plugin__rule-scale-wrapper.svelte-1fuyezq.svelte-1fuyezq{position:absolute;width:0.3125rem;height:100%;left:50%;top:0;transform:translateX(-50%)}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-scale-wrapper.svelte-1fuyezq{width:100%;height:0.3125rem;top:50%;left:0;transform:translateY(-50%)}.floorplan-plugin__rule-scale.svelte-1fuyezq.svelte-1fuyezq{position:absolute;background:#fff;opacity:0.2;width:100%;height:0.0625rem}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-scale.svelte-1fuyezq{width:0.0625rem;height:100%}.floorplan-plugin__rule-text-wrapper.svelte-1fuyezq.svelte-1fuyezq{position:absolute}.floorplan-plugin__rule-labels--top.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:100%;height:0;top:0.625rem}.floorplan-plugin__rule-labels--bottom.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:100%;height:0;bottom:0.625rem}.floorplan-plugin__rule-labels--left.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:0;height:100%;left:0.625rem}.floorplan-plugin__rule-labels--right.svelte-1fuyezq .floorplan-plugin__rule-text-wrapper.svelte-1fuyezq{width:0;height:100%;right:0.625rem}.floorplan-plugin__rule-text-item.svelte-1fuyezq.svelte-1fuyezq{width:0;height:0;position:absolute;transform:rotate(90deg)}.floorplan-plugin__rule-labels.is-row.svelte-1fuyezq .floorplan-plugin__rule-text-item.svelte-1fuyezq{transform:rotate(0)}.floorplan-plugin__rule-text.svelte-1fuyezq.svelte-1fuyezq{width:-moz-max-content;width:max-content;transform:translate(-50%, -50%);font-size:0.625rem;color:#fff;opacity:0.35}")}function Lu(i,e,t){const n=i.slice();return n[11]=e[t],n[13]=t,n}function Tu(i,e,t){const n=i.slice();return n[14]=e[t],n}function Ou(i){let e;return{c(){e=U("div"),b(e,"class","floorplan-plugin__rule-scale svelte-1fuyezq"),N(e,"left",i[14].left*100+"%"),N(e,"bottom",i[14].bottom*100+"%")},m(t,n){Y(t,e,n)},p:oe,d(t){t&&Q(e)}}}function Ru(i,e){let t,n,o=e[1](e[11].distance)+"",s,r;return{key:i,first:null,c(){t=U("div"),n=U("div"),s=Te(o),r=re(),b(n,"class","floorplan-plugin__rule-text svelte-1fuyezq"),we(n,"is-row",e[2]),b(t,"class","floorplan-plugin__rule-text-item svelte-1fuyezq"),N(t,"left",e[11].left*100+"%"),N(t,"bottom",e[11].bottom*100+"%"),this.first=t},m(a,l){Y(a,t,l),H(t,n),H(n,s),H(t,r)},p(a,l){e=a,l&2&&o!==(o=e[1](e[11].distance)+"")&&Ne(s,o)},d(a){a&&Q(t)}}}function gw(i){let e,t,n,o,s,r,a=[],l=new Map,c,h=i[3],d=[];for(let m=0;m<h.length;m+=1)d[m]=Ou(Tu(i,h,m));let u=i[4];const f=m=>m[13];for(let m=0;m<u.length;m+=1){let g=Lu(i,u,m),v=f(g);l.set(v,a[m]=Ru(v,g))}return{c(){e=U("div"),t=U("div"),n=re(),o=U("div");for(let m=0;m<d.length;m+=1)d[m].c();s=re(),r=U("div");for(let m=0;m<a.length;m+=1)a[m].c();b(t,"class","floorplan-plugin__rule-line svelte-1fuyezq"),b(o,"class","floorplan-plugin__rule-scale-wrapper svelte-1fuyezq"),we(o,"is-row",i[2]),b(r,"class","floorplan-plugin__rule-text-wrapper svelte-1fuyezq"),b(e,"class",c="floorplan-plugin__rule-labels floorplan-plugin__rule-labels--"+i[0]+" svelte-1fuyezq"),we(e,"is-row",i[2]),N(e,"width",i[2]?"100%":1/16+"rem"),N(e,"height",i[2]?1/16+"rem":"100%")},m(m,g){Y(m,e,g),H(e,t),H(e,n),H(e,o);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(o,null);H(e,s),H(e,r);for(let v=0;v<a.length;v+=1)a[v]&&a[v].m(r,null)},p(m,[g]){if(g&8){h=m[3];let v;for(v=0;v<h.length;v+=1){const A=Tu(m,h,v);d[v]?d[v].p(A,g):(d[v]=Ou(A),d[v].c(),d[v].m(o,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=h.length}g&22&&(u=m[4],a=Ei(a,g,f,1,m,u,l,r,la,Ru,null,Lu)),g&1&&c!==(c="floorplan-plugin__rule-labels floorplan-plugin__rule-labels--"+m[0]+" svelte-1fuyezq")&&b(e,"class",c),g&5&&we(e,"is-row",m[2])},i:oe,o:oe,d(m){m&&Q(e),un(d,m);for(let g=0;g<a.length;g+=1)a[g].d()}}}const bs=1e3,ws=180;function vw(i,e,t){let{type:n}=e,{data:o}=e,{bounding:s}=e,{getRuleDistanceText:r}=e;const a=n==="top"||n==="bottom",l=s.max.x-s.min.x-(bs-ws)*2,c=s.max.y-s.min.y-(bs-ws)*2,h=o.map(([m,g])=>a?[m.x,g.x]:[m.y,g.y]).flat().sort().filter((m,g,v)=>g===0?!0:m!==v[g-1]),d=h.map(m=>{const g=a?(m-s.min.x-bs+ws)/l:0,v=a?0:(m-s.min.y-bs+ws)/c;return{left:g,bottom:v}});d.unshift({left:0,bottom:0}),d.push(a?{left:1,bottom:0}:{left:0,bottom:1});const u=h[h.length-1]-h[0],f=h.map((m,g,v)=>{const A=g===0?0:m-v[g-1],w=g===0?0:(m+v[g-1])/2,P=a?(w-s.min.x-bs+ws)/l:0,I=a?0:(w-s.min.y-bs+ws)/c;return{left:P,bottom:I,distance:A}}).filter(({distance:m})=>m/u>.1);return i.$$set=m=>{"type"in m&&t(0,n=m.type),"data"in m&&t(5,o=m.data),"bounding"in m&&t(6,s=m.bounding),"getRuleDistanceText"in m&&t(1,r=m.getRuleDistanceText)},[n,r,a,d,f,o,s]}class Aw extends ye{constructor(e){super(),Ae(this,e,vw,gw,ve,{type:0,data:5,bounding:6,getRuleDistanceText:1},mw)}}function yw(i){Ee(i,"svelte-1mzj9p3",".floorplan-plugin__rule-labels-wrapper.svelte-1mzj9p3{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);pointer-events:none}")}function Bu(i,e,t){const n=i.slice();return n[13]=e[t][0],n[14]=e[t][1],n}function Hu(i,e){let t,n,o;const s=[{type:e[13],data:e[14],bounding:e[1],getRuleDistanceText:e[0]}];let r={};for(let a=0;a<s.length;a+=1)r=ut(r,s[a]);return n=new Aw({props:r}),{key:i,first:null,c(){t=Oe(),de(n.$$.fragment),this.first=t},m(a,l){Y(a,t,l),le(n,a,l),o=!0},p(a,l){e=a;const c=l&19?vt(s,[{type:e[13],data:e[14],bounding:e[1],getRuleDistanceText:e[0]}]):{};n.$set(c)},i(a){o||(B(n.$$.fragment,a),o=!0)},o(a){G(n.$$.fragment,a),o=!1},d(a){a&&Q(t),ce(n,a)}}}function bw(i){let e,t=[],n=new Map,o,s=i[4];const r=a=>a[13];for(let a=0;a<s.length;a+=1){let l=Bu(i,s,a),c=r(l);n.set(c,t[a]=Hu(c,l))}return{c(){e=U("div");for(let a=0;a<t.length;a+=1)t[a].c();b(e,"class","floorplan-plugin__rule-labels-wrapper svelte-1mzj9p3"),N(e,"width",i[3]),N(e,"height",i[2])},m(a,l){Y(a,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);o=!0},p(a,[l]){l&19&&(s=a[4],xe(),t=Ei(t,l,r,1,a,s,n,e,wo,Hu,null,Bu),Ce()),l&8&&N(e,"width",a[3]),l&4&&N(e,"height",a[2])},i(a){if(!o){for(let l=0;l<s.length;l+=1)B(t[l]);o=!0}},o(a){for(let l=0;l<t.length;l+=1)G(t[l]);o=!1},d(a){a&&Q(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}const Nu=1e3,Fu=180;function ww(i,e,t){let n,o,s,r,a,l,c,h,d,u,{floorIndex:f}=e,{floorplanData:m}=e,{getRuleDistanceText:g}=e;return i.$$set=v=>{"floorIndex"in v&&t(5,f=v.floorIndex),"floorplanData"in v&&t(6,m=v.floorplanData),"getRuleDistanceText"in v&&t(0,g=v.getRuleDistanceText)},i.$$.update=()=>{i.$$.dirty&64&&t(1,n=m.bounding),i.$$.dirty&96&&t(11,o=m.floorDatas[f].rules),i.$$.dirty&2048&&t(12,s=Object.keys(o)),i.$$.dirty&6144&&t(4,r=s.map(v=>[v,o[v]])),i.$$.dirty&2&&t(9,a=n.max.x-n.min.x),i.$$.dirty&2&&t(7,l=n.max.y-n.min.y),i.$$.dirty&2&&t(10,c=n.max.x-n.min.x-(Nu-Fu)*2),i.$$.dirty&2&&t(8,h=n.max.y-n.min.y-(Nu-Fu)*2),i.$$.dirty&1536&&t(3,d=c/a*100+"%"),i.$$.dirty&384&&t(2,u=h/l*100+"%")},[g,n,u,d,r,f,m,l,h,a,c,o,s]}class xw extends ye{constructor(e){super(),Ae(this,e,ww,bw,ve,{floorIndex:5,floorplanData:6,getRuleDistanceText:0},yw)}}function oo(i,e={}){let t="";const{needZ:n,needA:o}=e;return(n?i.slice().concat(i[0]):i.slice()).forEach((s,r)=>{const{x:a,y:l}=e.format?e.format(s):s,c=a+","+l;return r===0?(t+="M"+c,t):o!=null&&o[r]?(t+="A"+o[r]+","+c,t):(t+="L"+c,t)}),t+(n?"Z":"")}function iv({x:i,y:e},t){const{max:n,min:o}=t;return{x:i-o.x,y:n.y-e}}function Cw(i,e){const t=i.x*1e3+e.bounding.origin.x,n=-i.z*1e3+e.bounding.origin.y;return{x:t,y:n}}function Pw(i,e){const t=e.bounding,n=t.max.x-t.min.x,o=t.max.y-t.min.y;return{x:(i.x-t.min.x)/n,y:(t.max.y-i.y)/o}}function Ew(i,e){return Math.max(...e.work.observers.map(t=>i.z>=t.standingPosition.z?t.floorIndex:0))}function Iw(i){let e;return{c(){e=ge("path"),b(e,"d",i[0]),b(e,"fill","#2F313A")},m(t,n){Y(t,e,n)},p(t,[n]){n&1&&b(e,"d",t[0])},i:oe,o:oe,d(t){t&&Q(e)}}}function Mw(i,e,t){let n,{path:o}=e;return i.$$set=s=>{"path"in s&&t(1,o=s.path)},i.$$.update=()=>{i.$$.dirty&2&&t(0,n=oo(o,{needZ:!0}))},[n,o]}class Sw extends ye{constructor(e){super(),Ae(this,e,Mw,Iw,ve,{path:1})}}function Dw(i){let e,t,n,o,s,r;return{c(){e=ge("defs"),t=ge("pattern"),n=ge("rect"),o=ge("path"),s=re(),r=ge("path"),b(n,"x","0"),b(n,"y","0"),b(n,"width",i[1]),b(n,"height",i[1]),b(n,"fill","#323747"),b(o,"d",i[2]),b(o,"stroke","#ffffff"),b(o,"stroke-opacity","0.06"),b(o,"stroke-width","0.5"),b(o,"fill","none"),b(t,"id","fpm-room-pattern-0"),b(t,"x","0"),b(t,"y","0"),b(t,"width",i[1]),b(t,"height",i[1]),b(t,"patternUnits","userSpaceOnUse"),b(t,"patternTransform","scale(50 50)"),b(r,"d",i[0]),b(r,"fill","url(#fpm-room-pattern-0)")},m(a,l){Y(a,e,l),H(e,t),H(t,n),H(t,o),Y(a,s,l),Y(a,r,l)},p(a,[l]){l&1&&b(r,"d",a[0])},i:oe,o:oe,d(a){a&&Q(e),a&&Q(s),a&&Q(r)}}}const ac=6;function kw(i,e,t){let n,{path:o}=e;const s=ac*2,r=`M0 ${ac} h ${s} M${ac} 0 v ${s}`;return i.$$set=a=>{"path"in a&&t(3,o=a.path)},i.$$.update=()=>{i.$$.dirty&8&&t(0,n=oo(o,{needZ:!0}))},[n,s,r,o]}class zw extends ye{constructor(e){super(),Ae(this,e,kw,Dw,ve,{path:3})}}function jw(i){let e,t,n,o,s,r,a,l,c,h,d;return{c(){e=ge("defs"),t=ge("pattern"),n=ge("rect"),o=ge("pattern"),s=ge("rect"),r=re(),a=ge("path"),l=re(),c=ge("path"),h=re(),d=ge("path"),b(n,"x","0"),b(n,"y","0"),b(n,"width","6"),b(n,"height","50"),b(n,"fill","none"),b(n,"stroke","#4B4B57"),b(n,"stroke-width","0.5"),b(t,"id","room-material-pattern-1"),b(t,"x","0"),b(t,"y","0"),b(t,"width","12"),b(t,"height","50"),b(t,"patternUnits","userSpaceOnUse"),b(t,"patternTransform","scale(50 50)"),b(s,"x","0"),b(s,"y","0"),b(s,"width","6"),b(s,"height","50"),b(s,"fill","none"),b(s,"stroke","#4B4B57"),b(s,"stroke-width","0.5"),b(o,"id","room-material-pattern-2"),b(o,"x","6"),b(o,"y","25"),b(o,"width","12"),b(o,"height","50"),b(o,"patternUnits","userSpaceOnUse"),b(o,"patternTransform","scale(50 50)"),b(a,"d",i[0]),b(a,"fill","#43434D"),b(c,"d",i[0]),b(c,"fill","url(#room-material-pattern-1)"),b(d,"d",i[0]),b(d,"fill","url(#room-material-pattern-2)")},m(u,f){Y(u,e,f),H(e,t),H(t,n),H(e,o),H(o,s),Y(u,r,f),Y(u,a,f),Y(u,l,f),Y(u,c,f),Y(u,h,f),Y(u,d,f)},p(u,[f]){f&1&&b(a,"d",u[0]),f&1&&b(c,"d",u[0]),f&1&&b(d,"d",u[0])},i:oe,o:oe,d(u){u&&Q(e),u&&Q(r),u&&Q(a),u&&Q(l),u&&Q(c),u&&Q(h),u&&Q(d)}}}function Lw(i,e,t){let n,{path:o}=e;return i.$$set=s=>{"path"in s&&t(1,o=s.path)},i.$$.update=()=>{i.$$.dirty&2&&t(0,n=oo(o,{needZ:!0}))},[n,o]}class Tw extends ye{constructor(e){super(),Ae(this,e,Lw,jw,ve,{path:1})}}function Ow(i){let e;return{c(){e=ge("path"),b(e,"d",i[0]),b(e,"fill","#969696"),b(e,"stroke","#969696"),b(e,"stroke-width","1"),b(e,"fill-rule","evenodd")},m(t,n){Y(t,e,n)},p:oe,i:oe,o:oe,d(t){t&&Q(e)}}}function Rw(i,e,t){let{dimension:n}=e;const o=oo([{x:n.vertical[1].x,y:n.vertical[1].y+53},{x:n.vertical[1].x-60,y:n.vertical[1].y+124},{x:n.vertical[1].x+60,y:n.vertical[1].y+124}],{needZ:!0}),s=oo([{x:n.vertical[0].x,y:n.vertical[0].y-53},{x:n.vertical[0].x-60,y:n.vertical[0].y-124},{x:n.vertical[0].x+60,y:n.vertical[0].y-124}],{needZ:!0}),r=oo([{x:n.horizontal[0].x+53,y:n.horizontal[0].y},{x:n.horizontal[0].x+124,y:n.horizontal[0].y+60},{x:n.horizontal[0].x+124,y:n.horizontal[0].y-60}],{needZ:!0}),a=oo([{x:n.horizontal[1].x-53,y:n.horizontal[1].y},{x:n.horizontal[1].x-124,y:n.horizontal[1].y+60},{x:n.horizontal[1].x-124,y:n.horizontal[1].y-60}],{needZ:!0}),l=`${o} ${s} ${r} ${a}`;return i.$$set=c=>{"dimension"in c&&t(1,n=c.dimension)},[l,n]}class Bw extends ye{constructor(e){super(),Ae(this,e,Rw,Ow,ve,{dimension:1})}}function Hw(i){Ee(i,"svelte-1dykexu",".floorplan-plugin__room-material.svelte-1dykexu{position:absolute;left:0;top:0;width:100%;height:100%}svg.svelte-1dykexu{position:absolute;left:0;top:0;width:100%;height:100%;overflow:visible}")}function Vu(i,e,t){const n=i.slice();return n[8]=e[t],n}function Nw(i){let e,t;return e=new zw({props:{path:i[8].path}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.path=n[8].path),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Fw(i){let e,t;return e=new Tw({props:{path:i[8].path}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.path=n[8].path),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Vw(i){let e,t;return e=new Sw({props:{path:i[8].path}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.path=n[8].path),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Wu(i){let e,t,n;return t=new Bw({props:{dimension:i[8].dimension}}),{c(){e=ge("svg"),de(t.$$.fragment),b(e,"width","100%"),b(e,"height","100%"),b(e,"viewBox",`0 0 ${i[1]} ${i[2]}`),b(e,"class","svelte-1dykexu")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},p(o,s){const r={};s&1&&(r.dimension=o[8].dimension),t.$set(r)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function Gu(i){let e,t,n,o,s=i[3]&&i[8].dimension&&Array.isArray(i[8].dimension.vertical)&&i[8].dimension.vertical.length>0&&Array.isArray(i[8].dimension.horizontal)&&i[8].dimension.horizontal.length>0,r,a;const l=[Vw,Fw,Nw],c=[];function h(u,f){return u[8].floorType===1?0:u[8].floorType===0?1:2}t=h(i),n=c[t]=l[t](i);let d=s&&Wu(i);return{c(){e=ge("svg"),n.c(),o=re(),d&&d.c(),r=Oe(),b(e,"width","100%"),b(e,"height","100%"),b(e,"viewBox",`0 0 ${i[1]} ${i[2]}`),b(e,"class","svelte-1dykexu")},m(u,f){Y(u,e,f),c[t].m(e,null),Y(u,o,f),d&&d.m(u,f),Y(u,r,f),a=!0},p(u,f){let m=t;t=h(u),t===m?c[t].p(u,f):(xe(),G(c[m],1,1,()=>{c[m]=null}),Ce(),n=c[t],n?n.p(u,f):(n=c[t]=l[t](u),n.c()),B(n,1),n.m(e,null)),f&1&&(s=u[3]&&u[8].dimension&&Array.isArray(u[8].dimension.vertical)&&u[8].dimension.vertical.length>0&&Array.isArray(u[8].dimension.horizontal)&&u[8].dimension.horizontal.length>0),s?d?(d.p(u,f),f&1&&B(d,1)):(d=Wu(u),d.c(),B(d,1),d.m(r.parentNode,r)):d&&(xe(),G(d,1,1,()=>{d=null}),Ce())},i(u){a||(B(n),B(d),a=!0)},o(u){G(n),G(d),a=!1},d(u){u&&Q(e),c[t].d(),u&&Q(o),d&&d.d(u),u&&Q(r)}}}function Ww(i){let e,t,n=i[0],o=[];for(let r=0;r<n.length;r+=1)o[r]=Gu(Vu(i,n,r));const s=r=>G(o[r],1,1,()=>{o[r]=null});return{c(){e=U("div");for(let r=0;r<o.length;r+=1)o[r].c();b(e,"class","floorplan-plugin__room-material svelte-1dykexu")},m(r,a){Y(r,e,a);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(e,null);t=!0},p(r,[a]){if(a&15){n=r[0];let l;for(l=0;l<n.length;l+=1){const c=Vu(r,n,l);o[l]?(o[l].p(c,a),B(o[l],1)):(o[l]=Gu(c),o[l].c(),B(o[l],1),o[l].m(e,null))}for(xe(),l=n.length;l<o.length;l+=1)s(l);Ce()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)B(o[a]);t=!0}},o(r){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)G(o[a]);t=!1},d(r){r&&Q(e),un(o,r)}}}function Gw(i,e,t){let n,{roomLabelsEnable:o}=e,{roomDimensionEnable:s}=e,{floorIndex:r}=e,{floorplanData:a}=e;const l=a.bounding.max.x-a.bounding.min.x,c=a.bounding.max.y-a.bounding.min.y,h=o&&s;return i.$$set=d=>{"roomLabelsEnable"in d&&t(4,o=d.roomLabelsEnable),"roomDimensionEnable"in d&&t(5,s=d.roomDimensionEnable),"floorIndex"in d&&t(6,r=d.floorIndex),"floorplanData"in d&&t(7,a=d.floorplanData)},i.$$.update=()=>{i.$$.dirty&192&&t(0,n=a.floorDatas[r].rooms.map(d=>pe(W({},d),{path:d.path.map(u=>iv(u,a.bounding))})))},[n,l,c,h,o,s,r,a]}class Qw extends ye{constructor(e){super(),Ae(this,e,Gw,Ww,ve,{roomLabelsEnable:4,roomDimensionEnable:5,floorIndex:6,floorplanData:7},Hw)}}function Uw(i){Ee(i,"svelte-qq2273","path.svelte-qq2273{--opacity:0;opacity:var(--opacity)}path.svelte-qq2273:hover{opacity:calc(var(--opacity) + 0.1)}")}function Xw(i){let e,t,n,o;return{c(){e=ge("path"),b(e,"d",i[5]),b(e,"fill","#fff"),b(e,"style",i[2]),b(e,"id",t=`${i[1]}_${i[0].id}`),b(e,"class","svelte-qq2273")},m(s,r){Y(s,e,r),n||(o=[Se(e,"mouseenter",i[3]),Se(e,"mouseleave",i[4])],n=!0)},p(s,[r]){r&4&&b(e,"style",s[2]),r&3&&t!==(t=`${s[1]}_${s[0].id}`)&&b(e,"id",t)},i:oe,o:oe,d(s){s&&Q(e),n=!1,lt(o)}}}function Yw(i,e,t){let n,o,{room:s}=e,{floorIndex:r}=e,{floorplanData:a}=e,{highlightData:l}=e,{hoveredRoom:c}=e;function h(){c==null||c.set(s)}function d(){c==null||c.set(void 0)}const{bounding:u}=a,f=oo(s.path,{needZ:!0,format:m=>iv(m,u)});return i.$$set=m=>{"room"in m&&t(0,s=m.room),"floorIndex"in m&&t(1,r=m.floorIndex),"floorplanData"in m&&t(6,a=m.floorplanData),"highlightData"in m&&t(7,l=m.highlightData),"hoveredRoom"in m&&t(8,c=m.hoveredRoom)},i.$$.update=()=>{i.$$.dirty&131&&t(9,n=l[`${r}_${s.id}`]),i.$$.dirty&512&&t(2,o=n?`fill: ${n.color}; --opacity: ${n.opacity}; pointer-events: ${n.disabled?"none":"auto"}`:null)},[s,r,o,h,d,f,a,l,c,n]}class qw extends ye{constructor(e){super(),Ae(this,e,Yw,Xw,ve,{room:0,floorIndex:1,floorplanData:6,highlightData:7,hoveredRoom:8},Uw)}}function Zw(i){Ee(i,"svelte-1kqo6e4",".floorplan-plugin__room-highlight.svelte-1kqo6e4{position:absolute;width:100%;height:100%}svg.svelte-1kqo6e4{width:100%;height:100%;overflow:visible}")}function Qu(i,e,t){const n=i.slice();return n[6]=e[t],n}function Uu(i,e){let t,n,o;const s=[{room:e[6],floorplanData:e[1],hoveredRoom:e[3],floorIndex:e[0],highlightData:e[2]}];let r={};for(let a=0;a<s.length;a+=1)r=ut(r,s[a]);return n=new qw({props:r}),{key:i,first:null,c(){t=Oe(),de(n.$$.fragment),this.first=t},m(a,l){Y(a,t,l),le(n,a,l),o=!0},p(a,l){e=a;const c=l&15?vt(s,[{room:e[6],floorplanData:e[1],hoveredRoom:e[3],floorIndex:e[0],highlightData:e[2]}]):{};n.$set(c)},i(a){o||(B(n.$$.fragment,a),o=!0)},o(a){G(n.$$.fragment,a),o=!1},d(a){a&&Q(t),ce(n,a)}}}function Jw(i){let e,t,n=[],o=new Map,s,r=i[1].floorDatas[i[0]].rooms;const a=l=>l[6].id;for(let l=0;l<r.length;l+=1){let c=Qu(i,r,l),h=a(c);o.set(h,n[l]=Uu(h,c))}return{c(){e=U("div"),t=ge("svg");for(let l=0;l<n.length;l+=1)n[l].c();b(t,"width","100%"),b(t,"height","100%"),b(t,"viewBox",`0 0 ${i[4]} ${i[5]}`),b(t,"class","svelte-1kqo6e4"),b(e,"class","floorplan-plugin__room-highlight svelte-1kqo6e4")},m(l,c){Y(l,e,c),H(e,t);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(t,null);s=!0},p(l,[c]){c&15&&(r=l[1].floorDatas[l[0]].rooms,xe(),n=Ei(n,c,a,1,l,r,o,t,wo,Uu,null,Qu),Ce())},i(l){if(!s){for(let c=0;c<r.length;c+=1)B(n[c]);s=!0}},o(l){for(let c=0;c<n.length;c+=1)G(n[c]);s=!1},d(l){l&&Q(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function Kw(i,e,t){let{floorIndex:n}=e,{floorplanData:o}=e,{highlightData:s}=e,{hoveredRoom:r}=e;const a=o.bounding.max.x-o.bounding.min.x,l=o.bounding.max.y-o.bounding.min.y;return i.$$set=c=>{"floorIndex"in c&&t(0,n=c.floorIndex),"floorplanData"in c&&t(1,o=c.floorplanData),"highlightData"in c&&t(2,s=c.highlightData),"hoveredRoom"in c&&t(3,r=c.hoveredRoom)},[n,o,s,r,a,l]}class cd extends ye{constructor(e){super(),Ae(this,e,Kw,Jw,ve,{floorIndex:0,floorplanData:1,highlightData:2,hoveredRoom:3},Zw)}}function _w(i){Ee(i,"svelte-3vzs9z",".missing-floor.svelte-3vzs9z{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;flex-direction:column;align-items:center}.text.svelte-3vzs9z{margin-top:0.75rem;color:#fff;opacity:0.3;white-space:nowrap}")}function Xu(i){let e,t=i[0].text+"",n;return{c(){e=U("span"),n=Te(t),b(e,"class","text svelte-3vzs9z"),N(e,"font-size",i[0].textFontSize+"px")},m(o,s){Y(o,e,s),H(e,n)},p(o,s){s&1&&t!==(t=o[0].text+"")&&Ne(n,t),s&1&&N(e,"font-size",o[0].textFontSize+"px")},d(o){o&&Q(e)}}}function $w(i){let e,t,n,o,s=i[0].text&&Xu(i);return{c(){e=U("div"),t=U("img"),o=re(),s&&s.c(),b(t,"class","image"),b(t,"alt","缺省楼层展位图"),at(t.src,n=i[0].imageURL)||b(t,"src",n),N(t,"width",i[0].imageWidth+"px"),N(t,"height",i[0].imageHeight+"px"),N(t,"max-width","none"),b(e,"class","missing-floor svelte-3vzs9z")},m(r,a){Y(r,e,a),H(e,t),H(e,o),s&&s.m(e,null)},p(r,[a]){a&1&&!at(t.src,n=r[0].imageURL)&&b(t,"src",n),a&1&&N(t,"width",r[0].imageWidth+"px"),a&1&&N(t,"height",r[0].imageHeight+"px"),r[0].text?s?s.p(r,a):(s=Xu(r),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:oe,o:oe,d(r){r&&Q(e),s&&s.d()}}}function e3(i,e,t){let{missingFloorConfig:n}=e;return i.$$set=o=>{"missingFloorConfig"in o&&t(0,n=o.missingFloorConfig)},[n]}class nv extends ye{constructor(e){super(),Ae(this,e,e3,$w,ve,{missingFloorConfig:0},_w)}}const go="data:image/png;base64,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",t3="data:image/png;base64,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";function di(i){return i*180/Math.PI}function i3(i){Ee(i,"svelte-17hhq1b",".floorplan__camera-position.svelte-17hhq1b{pointer-events:none;position:absolute;width:0;height:0}.floorplan__camera-rotate.svelte-17hhq1b{position:absolute;background-repeat:no-repeat;background-size:100%}")}function n3(i){let e,t;return{c(){e=U("div"),t=U("div"),b(t,"class","floorplan__camera-rotate svelte-17hhq1b"),N(t,"background-image",`url(${i[0]||go})`),N(t,"width",i[4]),N(t,"height",i[4]),N(t,"left","-"+i[4]),N(t,"top","-"+i[4]),N(t,"transform",`rotate(${i[3]}deg)`),N(t,"transform-origin",`${i[4]} ${i[4]}`),b(e,"class","floorplan__camera-position svelte-17hhq1b"),N(e,"left",i[1]),N(e,"top",i[2])},m(n,o){Y(n,e,o),H(e,t)},p(n,[o]){o&1&&N(t,"background-image",`url(${n[0]||go})`);const s=o&1;s&&N(t,"width",n[4]),s&&N(t,"height",n[4]),s&&N(t,"left","-"+n[4]),s&&N(t,"top","-"+n[4]),s&&N(t,"transform",`rotate(${n[3]}deg)`),s&&N(t,"transform-origin",`${n[4]} ${n[4]}`)},i:oe,o:oe,d(n){n&&Q(e)}}}function o3(i,e,t){let{panoIndex:n}=e,{floorplanData:o}=e,{lastPanoramaLongitude:s}=e,{cameraImageUrl:r}=e;const{observers:a}=o,l=a[n],c=l.positionInImage.x,h=l.positionInImage.y,d=c*100+"%",u=h*100+"%",f=-di(s)+45,m=document.body.clientWidth,g=document.body.clientHeight,v=`${(m<500||g<500?17:37)/16}rem`;return i.$$set=A=>{"panoIndex"in A&&t(5,n=A.panoIndex),"floorplanData"in A&&t(6,o=A.floorplanData),"lastPanoramaLongitude"in A&&t(7,s=A.lastPanoramaLongitude),"cameraImageUrl"in A&&t(0,r=A.cameraImageUrl)},[r,d,u,f,v,n,o,s]}let s3=class extends ye{constructor(i){super(),Ae(this,i,o3,n3,ve,{panoIndex:5,floorplanData:6,lastPanoramaLongitude:7,cameraImageUrl:0},i3)}};const ov="data:image/png;base64,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";function r3(i){Ee(i,"svelte-rpkaro",".floorplan-plugin__compass.svelte-rpkaro{position:absolute;left:50%;top:-2.875rem;width:14.4375rem;height:2.5625rem;will-change:opacity;transform-origin:center 11.5rem}.floorplan-plugin__compass-image.svelte-rpkaro{width:100%;height:100%;position:absolute;left:0;top:0;opacity:0.1;background-repeat:no-repeat;background-size:100% 100%}.floorplan-plugin__compass-text.svelte-rpkaro{position:absolute;left:50%;top:0.9375rem;transform:translateX(-50%);opacity:0.2;font-weight:bold;font-size:0.625rem;color:#fff}")}function a3(i){let e,t,n,o,s;return{c(){e=U("div"),t=U("div"),n=re(),o=U("span"),s=Te(i[0]),b(t,"class","floorplan-plugin__compass-image svelte-rpkaro"),N(t,"background-image",`url(${ov})`),b(o,"class","floorplan-plugin__compass-text svelte-rpkaro"),b(e,"class","floorplan-plugin__compass svelte-rpkaro"),N(e,"transform",i[2])},m(r,a){Y(r,e,a),H(e,t),H(e,n),H(e,o),H(o,s)},p(r,a){a&1&&Ne(s,r[0])},d(r){r&&Q(e)}}}function l3(i){let e,t=i[1]&&a3(i);return{c(){t&&t.c(),e=Oe()},m(n,o){t&&t.m(n,o),Y(n,e,o)},p(n,[o]){n[1]&&t.p(n,o)},i:oe,o:oe,d(n){t&&t.d(n),n&&Q(e)}}}function c3(i,e,t){var n;let{floorplanData:o}=e,{northDesc:s}=e;const r=(n=o.entrance)==null?void 0:n.northRad,a=typeof r=="number",l=`translateX(-50%) translateZ(10px) rotate(${-(r?di(r):0)+90}deg)`;return i.$$set=c=>{"floorplanData"in c&&t(3,o=c.floorplanData),"northDesc"in c&&t(0,s=c.northDesc)},[s,a,l,o]}class h3 extends ye{constructor(e){super(),Ae(this,e,c3,l3,ve,{floorplanData:3,northDesc:0},r3)}}function d3(i){Ee(i,"svelte-bl8zrz",".floorplan-plugin__floor.svelte-bl8zrz{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;pointer-events:none}.floorplan-plugin__floor--is-current.svelte-bl8zrz{opacity:1;pointer-events:auto}")}function u3(i){let e,t,n,o,s,r,a,l,c,h,d,u;const f=[{floorIndex:i[2],floorplanData:i[12],roomLabelsEnable:i[6],roomDimensionEnable:i[10]}];let m={};for(let M=0;M<f.length;M+=1)m=ut(m,f[M]);e=new Qw({props:m});let g=(i[3]||i[5])&&Yu(i);const v=[{floorplanData:i[12],floorIndex:i[2]}];let A={};for(let M=0;M<v.length;M+=1)A=ut(A,v[M]);o=new ld({props:A});const w=[{floorplanData:i[12],floorIndex:i[2]}];let P={};for(let M=0;M<w.length;M+=1)P=ut(P,w[M]);r=new nw({props:P});let I=i[6]&&qu(i),j=i[11]&&Zu(i),D=i[4]&&Ju(i),T=i[23]&&Ku(i);return{c(){de(e.$$.fragment),t=re(),g&&g.c(),n=re(),de(o.$$.fragment),s=re(),de(r.$$.fragment),a=re(),I&&I.c(),l=re(),j&&j.c(),c=re(),D&&D.c(),h=re(),T&&T.c(),d=Oe()},m(M,O){le(e,M,O),Y(M,t,O),g&&g.m(M,O),Y(M,n,O),le(o,M,O),Y(M,s,O),le(r,M,O),Y(M,a,O),I&&I.m(M,O),Y(M,l,O),j&&j.m(M,O),Y(M,c,O),D&&D.m(M,O),Y(M,h,O),T&&T.m(M,O),Y(M,d,O),u=!0},p(M,O){const y=O&5188?vt(f,[{floorIndex:M[2],floorplanData:M[12],roomLabelsEnable:M[6],roomDimensionEnable:M[10]}]):{};e.$set(y),M[3]||M[5]?g?(g.p(M,O),O&40&&B(g,1)):(g=Yu(M),g.c(),B(g,1),g.m(n.parentNode,n)):g&&(xe(),G(g,1,1,()=>{g=null}),Ce());const C=O&4100?vt(v,[{floorplanData:M[12],floorIndex:M[2]}]):{};o.$set(C);const x=O&4100?vt(w,[{floorplanData:M[12],floorIndex:M[2]}]):{};r.$set(x),M[6]?I?(I.p(M,O),O&64&&B(I,1)):(I=qu(M),I.c(),B(I,1),I.m(l.parentNode,l)):I&&(xe(),G(I,1,1,()=>{I=null}),Ce()),M[11]?j?(j.p(M,O),O&2048&&B(j,1)):(j=Zu(M),j.c(),B(j,1),j.m(c.parentNode,c)):j&&(xe(),G(j,1,1,()=>{j=null}),Ce()),M[4]?D?(D.p(M,O),O&16&&B(D,1)):(D=Ju(M),D.c(),B(D,1),D.m(h.parentNode,h)):D&&(xe(),G(D,1,1,()=>{D=null}),Ce()),M[23]?T?(T.p(M,O),O&8388608&&B(T,1)):(T=Ku(M),T.c(),B(T,1),T.m(d.parentNode,d)):T&&(xe(),G(T,1,1,()=>{T=null}),Ce())},i(M){u||(B(e.$$.fragment,M),B(g),B(o.$$.fragment,M),B(r.$$.fragment,M),B(I),B(j),B(D),B(T),u=!0)},o(M){G(e.$$.fragment,M),G(g),G(o.$$.fragment,M),G(r.$$.fragment,M),G(I),G(j),G(D),G(T),u=!1},d(M){ce(e,M),M&&Q(t),g&&g.d(M),M&&Q(n),ce(o,M),M&&Q(s),ce(r,M),M&&Q(a),I&&I.d(M),M&&Q(l),j&&j.d(M),M&&Q(c),D&&D.d(M),M&&Q(h),T&&T.d(M),M&&Q(d)}}}function p3(i){let e,t;return e=new nv({props:{missingFloorConfig:i[19]}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&524288&&(s.missingFloorConfig=n[19]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Yu(i){let e,t;const n=[{floorIndex:i[2],floorplanData:i[12],hoveredRoom:i[25],highlightData:i[18]}];let o={};for(let s=0;s<n.length;s+=1)o=ut(o,n[s]);return e=new cd({props:o}),{c(){de(e.$$.fragment)},m(s,r){le(e,s,r),t=!0},p(s,r){const a=r&33820676?vt(n,[{floorIndex:s[2],floorplanData:s[12],hoveredRoom:s[25],highlightData:s[18]}]):{};e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function qu(i){let e,t;const n=[{floorplanData:i[12],roomAreaEnable:i[7],roomNameEnable:i[8],roomNameOtherTypeEnable:i[9],roomDimensionEnable:i[10],floorIndex:i[2],getRoomAreaText:i[13],getRoomDimensionText:i[14],getLabelElement:i[15],hoveredRoom:i[25],adaptiveRoomLabelVisibleEnable:i[17]}];let o={};for(let s=0;s<n.length;s+=1)o=ut(o,n[s]);return e=new fw({props:o}),{c(){de(e.$$.fragment)},m(s,r){le(e,s,r),t=!0},p(s,r){const a=r&33748868?vt(n,[{floorplanData:s[12],roomAreaEnable:s[7],roomNameEnable:s[8],roomNameOtherTypeEnable:s[9],roomDimensionEnable:s[10],floorIndex:s[2],getRoomAreaText:s[13],getRoomDimensionText:s[14],getLabelElement:s[15],hoveredRoom:s[25],adaptiveRoomLabelVisibleEnable:s[17]}]):{};e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function Zu(i){let e,t;const n=[{floorplanData:i[12],floorIndex:i[2],getRuleDistanceText:i[16]}];let o={};for(let s=0;s<n.length;s+=1)o=ut(o,n[s]);return e=new xw({props:o}),{c(){de(e.$$.fragment)},m(s,r){le(e,s,r),t=!0},p(s,r){const a=r&69636?vt(n,[{floorplanData:s[12],floorIndex:s[2],getRuleDistanceText:s[16]}]):{};e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function Ju(i){let e,t;const n=[{panoIndex:i[0],floorplanData:i[12],lastPanoramaLongitude:i[20],cameraImageUrl:i[21]}];let o={};for(let s=0;s<n.length;s+=1)o=ut(o,n[s]);return e=new s3({props:o}),{c(){de(e.$$.fragment)},m(s,r){le(e,s,r),t=!0},p(s,r){const a=r&3149825?vt(n,[{panoIndex:s[0],floorplanData:s[12],lastPanoramaLongitude:s[20],cameraImageUrl:s[21]}]):{};e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function Ku(i){let e,t;return e=new h3({props:{floorplanData:i[12],northDesc:i[22]}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&4096&&(s.floorplanData=n[12]),o&4194304&&(s.northDesc=n[22]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function f3(i){let e,t,n,o,s;const r=[p3,u3],a=[];function l(c,h){return c[24]?1:0}return t=l(i),n=a[t]=r[t](i),{c(){e=U("div"),n.c(),b(e,"class",o=dn(`floorplan-plugin__floor${i[1]?" floorplan-plugin__floor--is-current":""}`)+" svelte-bl8zrz")},m(c,h){Y(c,e,h),a[t].m(e,null),s=!0},p(c,[h]){let d=t;t=l(c),t===d?a[t].p(c,h):(xe(),G(a[d],1,1,()=>{a[d]=null}),Ce(),n=a[t],n?n.p(c,h):(n=a[t]=r[t](c),n.c()),B(n,1),n.m(e,null)),(!s||h&2&&o!==(o=dn(`floorplan-plugin__floor${c[1]?" floorplan-plugin__floor--is-current":""}`)+" svelte-bl8zrz"))&&b(e,"class",o)},i(c){s||(B(n),s=!0)},o(c){G(n),s=!1},d(c){c&&Q(e),a[t].d()}}}function m3(i,e,t){let n,o,{panoIndex:s}=e,{isCurrent:r}=e,{floorIndex:a}=e,{highlightEnable:l}=e,{cameraEnable:c}=e,{hoverEnable:h}=e,{roomLabelsEnable:d}=e,{roomAreaEnable:u}=e,{roomNameEnable:f}=e,{roomNameOtherTypeEnable:m}=e,{roomDimensionEnable:g}=e,{ruleLabelsEnable:v}=e,{floorplanData:A}=e,{getRoomAreaText:w}=e,{getRoomDimensionText:P}=e,{getLabelElement:I}=e,{getRuleDistanceText:j}=e,{adaptiveRoomLabelVisibleEnable:D}=e,{highlightData:T}=e,{missingFloorConfig:M}=e,{lastPanoramaLongitude:O}=e,{cameraImageUrl:y}=e,{northDesc:C}=e,{compassEnable:x}=e,{store:S=void 0}=e;const k=tv(void 0);return k.subscribe(z=>{S&&t(26,S.roomOnMouse=z,S)}),i.$$set=z=>{"panoIndex"in z&&t(0,s=z.panoIndex),"isCurrent"in z&&t(1,r=z.isCurrent),"floorIndex"in z&&t(2,a=z.floorIndex),"highlightEnable"in z&&t(3,l=z.highlightEnable),"cameraEnable"in z&&t(4,c=z.cameraEnable),"hoverEnable"in z&&t(5,h=z.hoverEnable),"roomLabelsEnable"in z&&t(6,d=z.roomLabelsEnable),"roomAreaEnable"in z&&t(7,u=z.roomAreaEnable),"roomNameEnable"in z&&t(8,f=z.roomNameEnable),"roomNameOtherTypeEnable"in z&&t(9,m=z.roomNameOtherTypeEnable),"roomDimensionEnable"in z&&t(10,g=z.roomDimensionEnable),"ruleLabelsEnable"in z&&t(11,v=z.ruleLabelsEnable),"floorplanData"in z&&t(12,A=z.floorplanData),"getRoomAreaText"in z&&t(13,w=z.getRoomAreaText),"getRoomDimensionText"in z&&t(14,P=z.getRoomDimensionText),"getLabelElement"in z&&t(15,I=z.getLabelElement),"getRuleDistanceText"in z&&t(16,j=z.getRuleDistanceText),"adaptiveRoomLabelVisibleEnable"in z&&t(17,D=z.adaptiveRoomLabelVisibleEnable),"highlightData"in z&&t(18,T=z.highlightData),"missingFloorConfig"in z&&t(19,M=z.missingFloorConfig),"lastPanoramaLongitude"in z&&t(20,O=z.lastPanoramaLongitude),"cameraImageUrl"in z&&t(21,y=z.cameraImageUrl),"northDesc"in z&&t(22,C=z.northDesc),"compassEnable"in z&&t(23,x=z.compassEnable),"store"in z&&t(26,S=z.store)},i.$$.update=()=>{i.$$.dirty&4100&&t(27,n=A.floorDatas[a]),i.$$.dirty&134217728&&t(24,o=n.rooms.length>0||n.is_has_wall)},[s,r,a,l,c,h,d,u,f,m,g,v,A,w,P,I,j,D,T,M,O,y,C,x,o,k,S,n]}let g3=class extends ye{constructor(i){super(),Ae(this,i,m3,f3,ve,{panoIndex:0,isCurrent:1,floorIndex:2,highlightEnable:3,cameraEnable:4,hoverEnable:5,roomLabelsEnable:6,roomAreaEnable:7,roomNameEnable:8,roomNameOtherTypeEnable:9,roomDimensionEnable:10,ruleLabelsEnable:11,floorplanData:12,getRoomAreaText:13,getRoomDimensionText:14,getLabelElement:15,getRuleDistanceText:16,adaptiveRoomLabelVisibleEnable:17,highlightData:18,missingFloorConfig:19,lastPanoramaLongitude:20,cameraImageUrl:21,northDesc:22,compassEnable:23,store:26},d3)}};function v3(i){Ee(i,"svelte-86bqav",".floorplan-main.svelte-86bqav{width:100%;height:100%;pointer-events:none}")}function _u(i,e,t){const n=i.slice();return n[26]=e[t],n}function $u(i){let e,t,n,o=i[15].floorDatas,s=[];for(let a=0;a<o.length;a+=1)s[a]=ep(_u(i,o,a));const r=a=>G(s[a],1,1,()=>{s[a]=null});return{c(){e=U("div");for(let a=0;a<s.length;a+=1)s[a].c();b(e,"class","floorplan-main svelte-86bqav")},m(a,l){Y(a,e,l);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);n=!0},p(a,l){if(i=a,l&67108860){o=i[15].floorDatas;let c;for(c=0;c<o.length;c+=1){const h=_u(i,o,c);s[c]?(s[c].p(h,l),B(s[c],1)):(s[c]=ep(h),s[c].c(),B(s[c],1),s[c].m(e,null))}for(xe(),c=o.length;c<s.length;c+=1)r(c);Ce()}},i(a){if(!n){for(let l=0;l<o.length;l+=1)B(s[l]);t||kt(()=>{t=bo(e,Ft,{duration:i[0],easing:Tn}),t.start()}),n=!0}},o(a){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)G(s[l]);n=!1},d(a){a&&Q(e),un(s,a)}}}function ep(i){let e,t;const n=[{hoverEnable:i[6],highlightEnable:i[7],floorplanData:i[15],getRoomAreaText:i[18],getRoomDimensionText:i[19],getLabelElement:i[20],getRuleDistanceText:i[21],roomLabelsEnable:i[9],roomAreaEnable:i[10],roomNameEnable:i[11],roomNameOtherTypeEnable:i[12],roomDimensionEnable:i[13],ruleLabelsEnable:i[14],adaptiveRoomLabelVisibleEnable:i[22],highlightData:i[23],missingFloorConfig:i[24],panoIndex:i[3],cameraEnable:i[5],cameraImageUrl:i[17],lastPanoramaLongitude:i[16],compassEnable:i[8],northDesc:i[2],store:i[25]},{floorIndex:i[26].floorIndex},{isCurrent:i[26].floorIndex===i[4]},{items:i[26].items}];let o={};for(let s=0;s<n.length;s+=1)o=ut(o,n[s]);return e=new g3({props:o}),{c(){de(e.$$.fragment)},m(s,r){le(e,s,r),t=!0},p(s,r){const a=r&67108860?vt(n,[r&67108844&&{hoverEnable:s[6],highlightEnable:s[7],floorplanData:s[15],getRoomAreaText:s[18],getRoomDimensionText:s[19],getLabelElement:s[20],getRuleDistanceText:s[21],roomLabelsEnable:s[9],roomAreaEnable:s[10],roomNameEnable:s[11],roomNameOtherTypeEnable:s[12],roomDimensionEnable:s[13],ruleLabelsEnable:s[14],adaptiveRoomLabelVisibleEnable:s[22],highlightData:s[23],missingFloorConfig:s[24],panoIndex:s[3],cameraEnable:s[5],cameraImageUrl:s[17],lastPanoramaLongitude:s[16],compassEnable:s[8],northDesc:s[2],store:s[25]},r&32768&&{floorIndex:s[26].floorIndex},r&32784&&{isCurrent:s[26].floorIndex===s[4]},r&32768&&{items:s[26].items}]):{};e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function A3(i){let e,t,n=i[1]&&$u(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[1]?n?(n.p(o,s),s&2&&B(n,1)):(n=$u(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function y3(i,e,t){let{duration:n=0}=e,{visible:o}=e,{northDesc:s}=e,{panoIndex:r}=e,{floorIndex:a}=e,{cameraEnable:l}=e,{hoverEnable:c}=e,{highlightEnable:h}=e,{compassEnable:d}=e,{roomLabelsEnable:u}=e,{roomAreaEnable:f}=e,{roomNameEnable:m}=e,{roomNameOtherTypeEnable:g}=e,{roomDimensionEnable:v}=e,{ruleLabelsEnable:A}=e,{floorplanData:w}=e,{lastPanoramaLongitude:P}=e,{cameraImageUrl:I}=e,{getRoomAreaText:j}=e,{getRoomDimensionText:D}=e,{getLabelElement:T}=e,{getRuleDistanceText:M}=e,{adaptiveRoomLabelVisibleEnable:O}=e,{highlightData:y}=e,{missingFloorConfig:C}=e,{store:x=void 0}=e;return i.$$set=S=>{"duration"in S&&t(0,n=S.duration),"visible"in S&&t(1,o=S.visible),"northDesc"in S&&t(2,s=S.northDesc),"panoIndex"in S&&t(3,r=S.panoIndex),"floorIndex"in S&&t(4,a=S.floorIndex),"cameraEnable"in S&&t(5,l=S.cameraEnable),"hoverEnable"in S&&t(6,c=S.hoverEnable),"highlightEnable"in S&&t(7,h=S.highlightEnable),"compassEnable"in S&&t(8,d=S.compassEnable),"roomLabelsEnable"in S&&t(9,u=S.roomLabelsEnable),"roomAreaEnable"in S&&t(10,f=S.roomAreaEnable),"roomNameEnable"in S&&t(11,m=S.roomNameEnable),"roomNameOtherTypeEnable"in S&&t(12,g=S.roomNameOtherTypeEnable),"roomDimensionEnable"in S&&t(13,v=S.roomDimensionEnable),"ruleLabelsEnable"in S&&t(14,A=S.ruleLabelsEnable),"floorplanData"in S&&t(15,w=S.floorplanData),"lastPanoramaLongitude"in S&&t(16,P=S.lastPanoramaLongitude),"cameraImageUrl"in S&&t(17,I=S.cameraImageUrl),"getRoomAreaText"in S&&t(18,j=S.getRoomAreaText),"getRoomDimensionText"in S&&t(19,D=S.getRoomDimensionText),"getLabelElement"in S&&t(20,T=S.getLabelElement),"getRuleDistanceText"in S&&t(21,M=S.getRuleDistanceText),"adaptiveRoomLabelVisibleEnable"in S&&t(22,O=S.adaptiveRoomLabelVisibleEnable),"highlightData"in S&&t(23,y=S.highlightData),"missingFloorConfig"in S&&t(24,C=S.missingFloorConfig),"store"in S&&t(25,x=S.store)},[n,o,s,r,a,l,c,h,d,u,f,m,g,v,A,w,P,I,j,D,T,M,O,y,C,x]}let b3=class extends ye{constructor(i){super(),Ae(this,i,y3,A3,ve,{duration:0,visible:1,northDesc:2,panoIndex:3,floorIndex:4,cameraEnable:5,hoverEnable:6,highlightEnable:7,compassEnable:8,roomLabelsEnable:9,roomAreaEnable:10,roomNameEnable:11,roomNameOtherTypeEnable:12,roomDimensionEnable:13,ruleLabelsEnable:14,floorplanData:15,lastPanoramaLongitude:16,cameraImageUrl:17,getRoomAreaText:18,getRoomDimensionText:19,getLabelElement:20,getRuleDistanceText:21,adaptiveRoomLabelVisibleEnable:22,highlightData:23,missingFloorConfig:24,store:25},v3)}};const w3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAYAAACFUvPfAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAMAAAAADe2FZjAAAEF0lEQVRoBe2WzWskRRiHf13V092TxI2oEzYeVDwITtyDuCiihwiCePGgxIM3vYgHL4J4UIhBRA8i/gPqyUvWg7AiIuIeloDiYUHJLOK6BPwIk9nNODM9Xf1RVe1b3elJRjCZmQ6euqGmuqer33rq4e23GqiOykBloDJQGagMVAYqA5WBykBlYFYD1qwP/tdzaZqOx9zYOLxeX0+L5yzLGp0X/03a25MOnGRcBtx+6Rlo9SL08G4EooFnxa8Yiivox5/h5Ys/4cl7NVorNDRnngX+0MIkVMeMSf23zyKML8J7/Dy8hwF2Buh9CnS+AEQIdLspBuGb+M7/qLW4qJrNpsLapjYhpwVnx3BMfCtNNx3Etc9xywvnMf80wG8HmQainw0RxSGrnmeBp+8k5/j9S0HbvXb5io0Lz880/0wPHV1NlhLd316He+4xOCv5ragF7L9PrH1qBJyB0626x/lC+qrSvH5r/W+n1WpxUM5nMY4GPeH8lHJaPgfeAFQHCL+ntkXT+vnUc3W6pvTIwC0wy3rA4dwLmK2avZ7Eo9uKBuYJfgJscbs8dLCxDMt+EOEPBEZNEWyBYHqTz6bPXrzUnNrSShxHIsYiOL69zrCGLLcLqJP68tB+9w5wj+YhWDafQ2s61wNqxjZhmrQ2pvMFCEvXuCUZ7wqH794ZWs28LJqlTXSUyuksF2M/yOwqgkx2c1ADa4wLAQRk2sAGQQakhN6yFC2hltfz5kSY44NKQeeh+vtI/SSzWhg2CzCgmWISmKUGmaYFBDfCSymnfxJ6/+ospVcWOLLp5DGP/y0P/Rp66O99DQNq7Po3Ds0a0wY+My2QSv2N2mO/OyxR2o6UQk+Lv7yJ06JYSnnolZVU9cUn2O9SmaMWGFBqYXRwbqAJWIi94TX5biotpcGl1DXZ6LnqIbNDTnmUgi52Mv5l5ysMxIcZcGjy2DTK4ZHlcBC14zeSge4qphICjj3bS0A7o9nSp2TOkm7aZ8bGZy/jxhO87V91G0+dfY/Z7BWIIK9KYUi5qy/Hf8YfBG3sqJTHiQWhmTVkbip+wX3x6volVSx+LPAxF+VLXhZ8VQ+iP2Rta/iWe5v42Fngj0BbdnRTXh12ZIcKhTaGbcYjybRwXBU1lu9KlndXp04NM52poKWO0RZsviNaP9a6grkO972+st05pXhE5c1hTEluJy7XUejGUQNLMbAmTdWY1rKBLW3aTJqBZ7nZkb36DhYCreeYHbMUXHvaYi5XDK70EcgulmRjm77wNtenzuXCbmnTRaAx493rbGf3Jr/njMzj920CnKdUaFCjlDioy7NYNvOdGrQJNgI32/L2tkXfFPlxgToqjWVhD6KdLnQRdARf/HHQz2r2X2Gqy8pAZaAyUBmoDFQGKgP/q4F/AJYg9/s0ZoABAAAAAElFTkSuQmCC";function x3(i){return ee(this,null,function*(){const e=new Headers({"Content-Type":"text/plain"}),t=function(n){return ee(this,null,function*(){const o={index:n.index,url:n.url,svgUrl:n.svg_url};if(n.svg_url){const s=yield fetch(n.svg_url,{headers:e}).then(r=>r.text());o.svgContent=s}return o})};return yield Promise.all(i.map(t))})}function C3(i){const e={id:i.id,size:i.size,name:i.name,customizedName:i.customizedName||"",path:i.path,roomType:i.room_type,floorType:i.floor_type,roomLabel:{position:i.room_label.position,positionInImage:i.room_label.position_in_image},observerIndexs:i.observer_indexs};return i.dimension&&Object.assign(e,{dimension:i.dimension}),e}function P3(i){return{floorName:i.floor_name,floorIndex:i.floor_index,rooms:i.rooms.map(C3),rules:i.rules,is_has_wall:i.is_has_wall}}function E3(i){return{index:i.index,floorIndex:i.floor_index,position:i.position,positionInImage:i.position_in_image}}function I3(i){return{rad:i.rad,position:i.position,positionInImage:i.position_in_image,northRad:i.north_rad,roomId:i.room_id,floorIndex:i.floor_index}}function Qs(i){return ee(this,null,function*(){const e=yield x3(i.outlines),t=i.computed_data.bounding,n=i.computed_data.floor_datas.map(P3),o=i.computed_data.entrance?I3(i.computed_data.entrance):null;return{outlines:e,entrance:o,bounding:t,floorDatas:n,observers:i.computed_data.observers.map(E3)}})}function sv(i,e,t){return i.map(n=>{const o=n.position,s=n.icon?n.icon:{url:w3,width:45,height:48},r=Ew(o,e),a=Cw(o,t),l=Pw(a,t);return{floorIndex:r,icon:s,id:n.id,position:a,positionInImage:l}})}function M3(i,e){return e(i),i}function hd(i,e){return M3({},t=>{for(const n in i)e.indexOf(n)===-1&&(t[n]=i[n])})}function tp(i,e){const t=Math.max(...i.work.observers.map(n=>n.floorIndex));return e>t?i.model.bounding.max.y:Math.max(...i.work.observers.filter(n=>n.floorIndex===e).map(n=>n.standingPosition.y))}function S3(i,e,t=Sr.BOUNDING_CENTER){const n=tp(i,e),o=tp(i,e+1);return t===Sr.BOUNDING_CENTER?(i.model.bounding.max.y+i.model.bounding.min.y)/2:t===Sr.CEILING?o:n}function D3(i,e,t,n){const o=S3(i,t,n==null?void 0:n.attachedTo),s=new R(0,o,0),r=new R(1,o,0),a=s.clone().project(i.camera),l=r.clone().project(i.camera);return Math.abs((l.x-a.x)/1e3)*(e.getBoundingClientRect().width/2)}let xo=class{constructor(i,e){p(this,"VERSION","3.70.4"),p(this,"NAME"),p(this,"five"),p(this,"workUtil"),p(this,"fiveUtil"),p(this,"hooks",new Mt),p(this,"staticPrefix",kl),this.five=i,this.fiveUtil=new xl(i),this.workUtil=this.fiveUtil.workUtil,e!=null&&e.staticPrefix&&(this.staticPrefix=e.staticPrefix)}set workCode(i){this.workUtil.workCode=i,this.onWorkCodeChange()}get workCode(){return this.workUtil.workCode}updateFive(i){this.five=i,this.fiveUtil.five=i,this.workUtil.five=i}getCurrentState(){return this.state}onWorkCodeChange(){}},Co=class extends xo{};var eo=(i=>(i.UnknownError="UnknownError",i.DataNotLoaded="DataNotLoaded",i.UpdateSizeError="UpdateSizeError",i.BreakOffByHide="BreakOffByHide",i.BreakOffByDisable="BreakOffByDisable",i.ModelNotLoaded="ModelNotLoaded",i.ChangeModeError="ChangeModeError",i.UpdateCameraError="UpdateCameraError",i))(eo||{});const k3=500,z3=80;function Vo(i,e,t=4){return Math.abs(i-e)<Math.pow(10,-t)}function rv(i,e,t=4){const n=Math.PI*2,o=i%n,s=e%n,r=Math.min(o,s),a=Math.max(o,s);return Vo(r,a,t)||Vo(r+n,a,t)}Object.assign(window,{nearlyEqual:Vo,nearlyEqualRad:rv});function j3(i){return Object.prototype.toString.call(i)==="[object Object]"}function ip(i){return j3(i)&&!!i.isVector3}function av(i,e){return ee(this,null,function*(){const[t]=yield Ws(i.changeMode(...e));if(t)throw new Error("change mode canceled");yield new Promise(s=>{i.once("initAnimationWillStart",()=>{i.once("initAnimationEnded",()=>s())})});const n=e[1];if(!n)return!0;const o=i.getCurrentState();if(!L3(n,o))throw new Error("pose 与预期不符")})}function L3(i,e){return Object.keys(i).every(t=>{const n=e[t],o=i[t];return n===void 0||o===void 0?!0:t==="longitude"||t==="latitude"?rv(n,o,2):typeof n=="number"&&typeof o=="number"?Vo(n,o,2):ip(o)&&ip(n)?o.distanceTo(n)<.01:n===o})}function T3(i,e){if(i.currentMode!==e.mode)return!1;const{latitude:t,longitude:n,fov:o,offset:s}=e,{latitude:r,longitude:a,offset:l}=i.getCurrentState(),c=i.camera.fov;return!(!Vo(t,r,2)||!Vo(n,a,2)||s!==void 0&&s.distanceTo(l)>.01||!Vo(o,c,2))}function O3(i,e,t=!0){return ee(this,null,function*(){if(T3(i,e)===!0)return;const n=i.getCurrentState();if(n.mode!==e.mode){const[c]=yield Ws(av(i,[e.mode,e,void 0,t]));if(c)throw c;return}const{latitude:o,longitude:s,fov:r}=n,a=Math.min(1e3,Math.max(200,Math.abs(o-Math.PI/2)*1e3,(s>Math.PI?2*Math.PI-s:s)*500,typeof e.fov=="number"?Math.abs(r-e.fov)*10:1/0)),[l]=yield Ws(i.updateCamera(hd(e,["mode"]),a,t));if(l)throw new Error(eo.UpdateCameraError)})}function np(i,e,t=300){var n,o;const s=i.getElement();if(s){s.style.opacity=e+"";for(let r=0;r<((o=(n=s.parentElement)==null?void 0:n.children)==null?void 0:o.length);r++){const a=s.parentElement.children[r];a instanceof HTMLElement&&a.dataset.infive==="1"&&(a.style.opacity=e+"")}s.style.transition=t===0?"none":`opacity ${t}ms linear`,t!==0&&Promise.race([new Promise(r=>s.addEventListener("transitionend",r,{once:!0})),new Promise(r=>setTimeout(r,t))]).then(()=>{s.style.transition="none"})}}function R3(i){const{latitude:e,longitude:t}=i,n=Math.abs(e-Math.PI/2)>5*Math.PI/180,o=t>5*(Math.PI/180)&&t<355*(Math.PI/180);return n||o}function B3(i){const{latitude:e,longitude:t}=i,n=Math.abs(e-Math.PI/2)<10*Math.PI/180,o=t<30*(Math.PI/180)||t>330*(Math.PI/180);return n&&o}let H3=class extends Co{constructor(i,e){var t,n,o;super(i),p(this,"name","modelFloorplanPlugin"),p(this,"state"),p(this,"data"),p(this,"showState"),p(this,"showPromise"),p(this,"app"),p(this,"panoIndex",0),p(this,"floorIndex",0),p(this,"selector"),p(this,"showRejection"),p(this,"wrapper"),p(this,"container",document.createElement("div")),p(this,"lastPanoramaLongitude",0),p(this,"size",{width:0,height:0}),p(this,"defaultMissingFloorConfig"),p(this,"hasAddedEventListener",!1),p(this,"isHiddenByHideFunc",!1),p(this,"highlightData",{}),p(this,"store",{roomOnMouse:null}),p(this,"dispose",()=>{var c,h;this.removeEventListener(),(c=this.app)==null||c.$destroy(),this.app=void 0,(h=this.container)==null||h.remove(),this.data=void 0,this.wrapper=void 0,this.selector=void 0,this.hooks.emit("dispose")}),p(this,"show",(...c)=>ee(this,[...c],function*(h={}){if(!this.state.enabled||!this.showPromise&&this.state.visible)return;const d=h.userAction!==void 0?h.userAction:!0;this.updateState({visible:!0},d),this._show(h)})),p(this,"hide",(...c)=>ee(this,[...c],function*(h={}){this.state.enabled&&(this.isHiddenByHideFunc=!0,this.state.visible!==!1&&(this.updateState({visible:!1},h.userAction||!0),this._hide(h)))})),p(this,"updateSize",()=>{if(!this.data||!this.container||!this.wrapper)return!1;const{min:c,max:h}=this.data.bounding,d=h.x-c.x,u=h.y-c.y,f=this.state.config.attachedTo?{attachedTo:this.state.config.attachedTo}:void 0,m=D3(this.five,this.wrapper,this.floorIndex,f),g=Math.ceil(d*m),v=Math.ceil(u*m);return this.size.width===g&&this.size.height===v||(this.container.style.width=g+"px",this.container.style.height=v+"px",this.size={width:g,height:v}),!0}),p(this,"highlight",c=>{this.state.config.highlightEnable&&(this.highlightData=c,this.render())}),p(this,"unhighlight",()=>{this.highlightData={},this.render()}),p(this,"_disable",c=>{var h,d,u;const{userAction:f}=c;this.hooks.emit("disable",{userAction:f}),(h=this.showRejection)==null||h.call(this,eo.BreakOffByDisable),this.showPromise=void 0,(d=this.app)==null||d.$destroy(),this.app=void 0,(u=this.container)==null||u.remove(),this.removeEventListener()}),p(this,"_enable",c=>{const{userAction:h}=c;this.addEventListener(),this.wrapper&&(this.wrapper.append(this.container),this.hooks.emit("enable",{userAction:h}),this.state.visible&&this._show({userAction:h}))}),p(this,"_show",c=>ee(this,null,function*(){var h;if(!this.state.enabled)return;if(!((h=this.five.model)!=null&&h.loaded))throw new Error(eo.ModelNotLoaded);if(!this.data)throw new Error(eo.DataNotLoaded);if(this.showPromise)return this.showPromise;const d={floorIndex:this.floorIndex,modelOpacity:this.state.config.modelOpacity,immediately:!1,isAutoShow:!1,userAction:!0},u=W(W({},d),c),f=()=>ee(this,null,function*(){this.hooks.emit("show",{userAction:u.userAction,auto:u.isAutoShow});let m=!1,g;this.showRejection=A=>{m=!0,g=A};const[v]=yield Ws(O3(this.five,this.showState,u.userAction));if(v)throw v;if(m)throw g?new Error(g):new Error(eo.UnknownError);if(!this.updateSize())throw new Error(eo.UpdateSizeError);this.floorIndex=u.floorIndex,this.five.model.show(this.floorIndex)});return this.isHiddenByHideFunc=!1,this.showPromise=f().then(()=>{this.showPromise=void 0,this.showRejection=void 0;const m=u.modelOpacity,g=u.immediately?0:k3;np(this.five,m,g),this.render(g),this.hooks.emit("showAnimationEnded",{auto:u.isAutoShow,userAction:u.userAction})}).catch(m=>{if(this.showPromise=void 0,this.showRejection=void 0,this.updateState({visible:!1},u.userAction),!u.isAutoShow&&m instanceof Error)throw m}),this.showPromise})),p(this,"_hide",c=>{var h;(h=this.showRejection)==null||h.call(this,eo.BreakOffByHide),this.showPromise=void 0;const d=W(W({},{userAction:!0,isAutoHide:!1}),c);np(this.five,1,0),this.hooks.emit("hide",{auto:d.isAutoHide,userAction:d.userAction}),this.render()}),p(this,"handleClick",()=>{if(this.state.visible&&this.hooks.emit("click",this.store.roomOnMouse))return!1}),p(this,"onFiveModelLoaded",()=>{if(this.state.enabled===!1||this.wrapper||!this.selector)return;const c=this.selector instanceof Element?this.selector:document.querySelector(this.selector);if(!c)throw new Error("不正确的父容器选择器");this.wrapper=c,c.append(this.container)}),p(this,"onFiveModeChange",c=>{c!==this.showState.mode&&(this.updateState({visible:!1},!1),this._hide({userAction:!1}))}),p(this,"onFiveInteriaPan",(c,h)=>{if(!h||this.state.config.autoShowEnable===!1||this.isHiddenByHideFunc)return;const d=this.five.getCurrentState();d.mode==="Floorplan"&&(this.state.visible||B3(d)&&(this.updateState({visible:!0},!0),this._show({isAutoShow:!0})))}),p(this,"onFivePanoArrived",c=>{var h;(h=this.five)!=null&&h.work&&(this.panoIndex=c,this.floorIndex=this.workUtil.observers[c].floorIndex)}),p(this,"onFiveCameraUpdate",(c,h)=>{if(!this.state.visible||this.showPromise)return;const d=this.five.getCurrentState();R3(d)&&(this.updateState({visible:!1},h),this._hide({userAction:h,isAutoHide:!0}))}),p(this,"onFiveWantsGesture",(c,h)=>{if(this.state.visible&&(h.length>1||c==="mouseWheel"))return!1}),p(this,"onFiveWantsPanGesture",(c,h)=>{if(this.five.getCurrentState().mode==="Floorplan"&&this.state.config.autoShowEnable!==!1&&h&&this.state.visible)return this.five.updateCamera(this.showState,0),!1}),p(this,"onFiveWantsTapGesture",()=>this.handleClick()),p(this,"onFiveWantsChangeMode",(c,h)=>{h==="Panorama"&&c==="Floorplan"&&(this.lastPanoramaLongitude=this.five.getCurrentState().longitude)}),p(this,"onModelShownFloorChange",c=>{if(this.floorIndex!==c){if(c===null){const h=this.five.getCurrentState().panoIndex;this.floorIndex=this.workUtil.observers[h].floorIndex;return}this.floorIndex=c,this.updateSize(),this.render()}}),e!=null&&e.selector&&(this.selector=e.selector,console.warn("不推荐继续使用 params.selector 配置父容器，请使用 appendTo 方法")),this.showState={mode:"Floorplan",longitude:0,latitude:Math.PI/2,fov:z3/((t=e==null?void 0:e.scale)!=null?t:1)},this.defaultMissingFloorConfig={imageURL:lo(e==null?void 0:e.staticPrefix,Bs),imageWidth:200,imageHeight:120,text:(o=(n=e.i18n)==null?void 0:n.call(e,"暂无平面图"))!=null?o:"暂无平面图",textFontSize:14};const s={northDesc:"北",modelOpacity:1,cameraEnable:!0,highlightEnable:!1,hoverEnable:!0,compassEnable:!0,autoShowEnable:!0,ruleLabelsEnable:!0,roomLabelsEnable:!0,roomAreaEnable:!0,roomNameEnable:!0,roomNameOtherTypeEnable:!0,roomDimensionEnable:!0,adaptiveRoomLabelVisibleEnable:!0,cameraImageUrl:go,attachedTo:Sr.BOUNDING_CENTER,getLabelElement:void 0,missingFloorConfig:W(W({},this.defaultMissingFloorConfig),e.missingFloorConfig),i18n:c=>c,getRoomAreaText:c=>(c/1e6).toFixed(1)+"㎡",getRoomDimensionText:(c,h)=>(c/1e3).toFixed(1)+"m × "+(h/1e3).toFixed(1)+"m",getRuleDistanceText:c=>c.toString()},r=e?hd(e,["selector","scale"]):{},a=W(W({},s.missingFloorConfig),r.missingFloorConfig),l=pe(W(W({},s),r),{missingFloorConfig:a});this.state={enabled:!0,visible:!1,config:l},this.initContainer(),i.once("dispose",this.dispose),this.addEventListener()}load(i,e,t=!0){return ee(this,null,function*(){function n(l){return Object.prototype.hasOwnProperty.apply(l,["version"])}const o=i;o&&Oi(o.version)&&console.warn("传入 serverData.data 的方式后续可能不再支持，请把 serverData 整体传入 load 函数");const s=JSON.parse(JSON.stringify(i)),r=n(s)?s.data:s,a=this.data;this.data=yield Qs(r),this.hooks.emit("dataLoaded",this.data),this.hooks.emit("dataChange",this.data,a),e&&this.updateState(e,t),this.render()})}appendTo(i){if(this.wrapper=i,!!this.state.enabled)return i.appendChild(this.container),this.render(),this}enable(i={}){if(this.state.enabled)return;const e=i.userAction!==void 0?i.userAction:!0;this.updateState({enabled:!0},i.userAction||e),this._enable({userAction:e})}disable(i={}){if(!this.state.enabled)return;const e=i.userAction!==void 0?i.userAction:!0;this.updateState({enabled:!1},i.userAction||e),this._disable({userAction:e})}setState(i,e={}){const t=this.state,n=e.userAction!==void 0?e.userAction:!0;if(this.updateState(i,n),i.enabled!==void 0&&t.enabled!==i.enabled&&(i.enabled?this._enable({userAction:n}):this._disable({userAction:n})),i.visible!==void 0&&t.visible!==i.visible){const o={userAction:n};i.visible?this._show(o):this._hide(o)}this.render()}changeConfigs(i,e=!0){this.updateState({config:i},e),this.render()}formatData(i){return ee(this,null,function*(){return yield Qs(i.data)})}updateState(i,e){var t;const n=this.state,o=(t=i.config)!=null&&t.missingFloorConfig?W(W({},n.config.missingFloorConfig),i.config.missingFloorConfig):n.config.missingFloorConfig,s=i.config?pe(W(W({},n.config),i.config),{missingFloorConfig:o}):n.config;this.state=pe(W(W({},this.state),i),{config:s}),!Yi(this.state,n,{deep:!0})&&this.hooks.emit("stateChange",{state:this.state,prevState:n,userAction:e})}initContainer(){this.container.classList.add("floorplan-plugin"),Object.assign(this.container.style,{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:10,pointerEvents:"none"}),this.five.addExtraElement(this.container)}addEventListener(){if(!this.state.enabled||this.hasAddedEventListener)return;const i=this.five;i.model.loaded?this.onFiveModelLoaded():i.once("modelLoaded",this.onFiveModelLoaded),i.on("modeChange",this.onFiveModeChange),i.on("interiaPan",this.onFiveInteriaPan),i.on("panoArrived",this.onFivePanoArrived),i.on("cameraUpdate",this.onFiveCameraUpdate),i.on("wantsGesture",this.onFiveWantsGesture),i.on("wantsPanGesture",this.onFiveWantsPanGesture),i.on("wantsTapGesture",this.onFiveWantsTapGesture),i.on("wantsChangeMode",this.onFiveWantsChangeMode),i.on("modelShownFloorChange",this.onModelShownFloorChange)}removeEventListener(){const i=this.five;this.hasAddedEventListener=!1,i.off("modelLoaded",this.onFiveModelLoaded),i.off("modeChange",this.onFiveModeChange),i.off("interiaPan",this.onFiveInteriaPan),i.off("panoArrived",this.onFivePanoArrived),i.off("cameraUpdate",this.onFiveCameraUpdate),i.off("wantsGesture",this.onFiveWantsGesture),i.off("wantsPanGesture",this.onFiveWantsPanGesture),i.off("wantsTapGesture",this.onFiveWantsTapGesture),i.off("wantsChangeMode",this.onFiveWantsChangeMode),i.off("modelShownFloorChange",this.onModelShownFloorChange)}render(i){if(!this.state.enabled||!this.container||!this.data||this.size.width===0||this.showPromise)return;const e=pe(W({},this.state.config),{visible:this.state.visible,duration:i??0,panoIndex:this.panoIndex,floorIndex:this.floorIndex,floorplanData:this.data,lastPanoramaLongitude:this.lastPanoramaLongitude,highlightData:this.highlightData,store:this.store});if(this.app)return this.app.$set(e);this.app=new b3({target:this.container,intro:!0,props:e})}};const $S=(i,e)=>new H3(i,e);function N3(i){Ee(i,"svelte-1nqrlxd",".plugin-radar__camera-wrapper.svelte-1nqrlxd{width:100%;height:100%;position:absolute;pointer-events:none}.plugin-radar__camera-position.svelte-1nqrlxd{position:absolute;left:0;top:0;width:0;height:0;transform:none;pointer-events:none;transition:transform 1s linear}.plugin-radar__camera-rotate.svelte-1nqrlxd{position:absolute;left:-0.9375rem;top:-0.9375rem;width:1.0625rem;height:1.0625rem;transform-origin:0.9375rem 0.9375rem;transform:rotate(45deg);background-repeat:no-repeat;background-size:100%}")}function F3(i){let e,t,n;return{c(){e=U("div"),t=U("div"),n=U("div"),b(n,"class","plugin-radar__camera-rotate svelte-1nqrlxd"),N(n,"background-image","url("+(i[0]||go)+")"),N(n,"transform",i[1]),b(t,"class","plugin-radar__camera-position svelte-1nqrlxd"),N(t,"transform",i[2]),b(e,"class","plugin-radar__camera-wrapper svelte-1nqrlxd"),N(e,"opacity",i[3]?1:0)},m(o,s){Y(o,e,s),H(e,t),H(t,n)},p(o,[s]){s&1&&N(n,"background-image","url("+(o[0]||go)+")"),(s&1||s&3)&&N(n,"transform",o[1]),s&4&&N(t,"transform",o[2]),s&8&&N(e,"opacity",o[3]?1:0)},i:oe,o:oe,d(o){o&&Q(e)}}}function V3(i){return`rotate(${Math.floor(i/Math.PI*180)*-1+45}deg)`}function W3(i,e,t){var n,o;let s,r,a,l,{five:c}=e,{pxmm:h}=e,{floorplanData:d}=e,{cameraImageUrl:u}=e,f=c.getCurrentState().panoIndex,m=c.getCurrentState().longitude,g=(o=(n=c.work.observers[c.getCurrentState().panoIndex])==null?void 0:n.floorIndex)!=null?o:0;function v(I,j){const D=I.bounding,T=I.observers[j];if(!T)return"";const M=(D.max.x-D.min.x)*h,O=(D.max.y-D.min.y)*h,y=Math.floor(T.positionInImage.x*M),C=Math.floor(T.positionInImage.y*O);return`translate(${y}px, ${C}px)`}function A(I){t(7,f=I)}function w(I){t(9,g=c.work.observers[I].floorIndex)}const P=Cl(I=>{t(8,m=I.longitude)},1e3/60);return Zt(()=>(c.on("panoWillArrive",A),c.on("panoArrived",w),c.on("cameraDirectionUpdate",P),function(){c.off("panoWillArrive",A),c.off("panoArrived",w),c.off("cameraDirectionUpdate",P)})),i.$$set=I=>{"five"in I&&t(4,c=I.five),"pxmm"in I&&t(5,h=I.pxmm),"floorplanData"in I&&t(6,d=I.floorplanData),"cameraImageUrl"in I&&t(0,u=I.cameraImageUrl)},i.$$.update=()=>{i.$$.dirty&576&&t(10,s=d.floorDatas[g]),i.$$.dirty&1024&&t(3,r=s.rooms.length>0),i.$$.dirty&192&&t(2,a=v(d,f)),i.$$.dirty&256&&t(1,l=V3(m))},[u,l,a,r,c,h,d,f,m,g,s]}let G3=class extends ye{constructor(i){super(),Ae(this,i,W3,F3,ve,{five:4,pxmm:5,floorplanData:6,cameraImageUrl:0},N3)}};function Q3(i){Ee(i,"svelte-1i87fz7",".plugin-pano-floorplan__extra-objects.svelte-1i87fz7{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.plugin-pano-floorplan__extra-object-item--position.svelte-1i87fz7{position:absolute;width:0;height:0}.plugin-pano-floorplan__extra-object-item.svelte-1i87fz7{transform:translate(-50%, -50%)}")}function op(i,e,t){const n=i.slice();return n[1]=e[t],n}function sp(i,e){let t,n,o=`${e[1].icon.width/16}rem`,s=`${e[1].icon.height/16}rem`,r,a=`${e[1].positionInImage.y*100}%`,l=`${e[1].positionInImage.x*100}%`;return{key:i,first:null,c(){t=U("div"),n=U("div"),r=re(),b(n,"class","plugin-pano-floorplan__extra-object-item svelte-1i87fz7"),N(n,"background-image",`url(${e[1].icon.url})`),N(n,"width",o),N(n,"height",s),b(t,"class","plugin-pano-floorplan__extra-object-item--position svelte-1i87fz7"),N(t,"top",a),N(t,"left",l),this.first=t},m(c,h){Y(c,t,h),H(t,n),H(t,r)},p(c,h){e=c,h&1&&N(n,"background-image",`url(${e[1].icon.url})`);const d=h&1;d&&N(n,"width",o),d&&N(n,"height",s),h&1&&a!==(a=`${e[1].positionInImage.y*100}%`)&&N(t,"top",a),h&1&&l!==(l=`${e[1].positionInImage.x*100}%`)&&N(t,"left",l)},d(c){c&&Q(t)}}}function U3(i){let e,t=[],n=new Map,o=i[0];const s=r=>r[1].id;for(let r=0;r<o.length;r+=1){let a=op(i,o,r),l=s(a);n.set(l,t[r]=sp(l,a))}return{c(){e=U("div");for(let r=0;r<t.length;r+=1)t[r].c();b(e,"class","plugin-pano-floorplan__extra-objects svelte-1i87fz7")},m(r,a){Y(r,e,a);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(r,[a]){a&1&&(o=r[0],t=Ei(t,a,s,1,r,o,n,e,la,sp,null,op))},i:oe,o:oe,d(r){r&&Q(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function X3(i,e,t){let{extraObjects:n=[]}=e;return i.$$set=o=>{"extraObjects"in o&&t(0,n=o.extraObjects)},[n]}let Y3=class extends ye{constructor(i){super(),Ae(this,i,X3,U3,ve,{extraObjects:0},Q3)}};function q3(i){Ee(i,"svelte-18287ai",".missing-floor-wrapper.svelte-18287ai{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:flex;justify-content:center;align-items:center}.missing-floor-image.svelte-18287ai{max-width:100%;max-height:100%}")}function Z3(i){let e,t,n,o,s,r;const a=[{floorIndex:i[2],floorplanData:i[4]}];let l={};for(let h=0;h<a.length;h+=1)l=ut(l,a[h]);e=new ld({props:l}),n=new Y3({props:{extraObjects:i[7]}});let c=i[3]&&rp(i);return{c(){de(e.$$.fragment),t=re(),de(n.$$.fragment),o=re(),c&&c.c(),s=Oe()},m(h,d){le(e,h,d),Y(h,t,d),le(n,h,d),Y(h,o,d),c&&c.m(h,d),Y(h,s,d),r=!0},p(h,d){const u=d&20?vt(a,[{floorIndex:h[2],floorplanData:h[4]}]):{};e.$set(u);const f={};d&128&&(f.extraObjects=h[7]),n.$set(f),h[3]?c?(c.p(h,d),d&8&&B(c,1)):(c=rp(h),c.c(),B(c,1),c.m(s.parentNode,s)):c&&(xe(),G(c,1,1,()=>{c=null}),Ce())},i(h){r||(B(e.$$.fragment,h),B(n.$$.fragment,h),B(c),r=!0)},o(h){G(e.$$.fragment,h),G(n.$$.fragment,h),G(c),r=!1},d(h){ce(e,h),h&&Q(t),ce(n,h),h&&Q(o),c&&c.d(h),h&&Q(s)}}}function J3(i){let e,t,n;return{c(){e=U("div"),t=U("img"),b(t,"class","missing-floor-image svelte-18287ai"),at(t.src,n=i[6])||b(t,"src",n),b(t,"alt","缺省楼层"),b(e,"class","missing-floor-wrapper svelte-18287ai")},m(o,s){Y(o,e,s),H(e,t)},p(o,s){s&64&&!at(t.src,n=o[6])&&b(t,"src",n)},i:oe,o:oe,d(o){o&&Q(e)}}}function rp(i){let e,t;const n=[{five:i[0],pxmm:i[1],floorIndex:i[2],floorplanData:i[4],onRoomHeightClick:i[9],highlightData:i[5],hoveredRoom:void 0}];let o={};for(let s=0;s<n.length;s+=1)o=ut(o,n[s]);return e=new cd({props:o}),{c(){de(e.$$.fragment)},m(s,r){le(e,s,r),t=!0},p(s,r){const a=r&567?vt(n,[{five:s[0],pxmm:s[1],floorIndex:s[2],floorplanData:s[4],onRoomHeightClick:s[9],highlightData:s[5],hoveredRoom:void 0}]):{};e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function K3(i){let e,t,n,o;const s=[J3,Z3],r=[];function a(l,c){return l[8]?1:0}return e=a(i),t=r[e]=s[e](i),{c(){t.c(),n=Oe()},m(l,c){r[e].m(l,c),Y(l,n,c),o=!0},p(l,[c]){let h=e;e=a(l),e===h?r[e].p(l,c):(xe(),G(r[h],1,1,()=>{r[h]=null}),Ce(),t=r[e],t?t.p(l,c):(t=r[e]=s[e](l),t.c()),B(t,1),t.m(n.parentNode,n))},i(l){o||(B(t),o=!0)},o(l){G(t),o=!1},d(l){r[e].d(l),l&&Q(n)}}}function _3(i,e,t){let n,o,s,{five:r}=e,{pxmm:a}=e,{floorIndex:l}=e,{hoverEnable:c}=e,{floorplanData:h}=e,{extraObjects:d=[]}=e,{highlightData:u}=e,{missingFloorImageUrl:f}=e;const m=void 0;return i.$$set=g=>{"five"in g&&t(0,r=g.five),"pxmm"in g&&t(1,a=g.pxmm),"floorIndex"in g&&t(2,l=g.floorIndex),"hoverEnable"in g&&t(3,c=g.hoverEnable),"floorplanData"in g&&t(4,h=g.floorplanData),"extraObjects"in g&&t(10,d=g.extraObjects),"highlightData"in g&&t(5,u=g.highlightData),"missingFloorImageUrl"in g&&t(6,f=g.missingFloorImageUrl)},i.$$.update=()=>{i.$$.dirty&20&&t(11,n=h.floorDatas[l]),i.$$.dirty&2048&&t(8,o=n.rooms.length>0),i.$$.dirty&1028&&t(7,s=d==null?void 0:d.filter(g=>g.floorIndex===l))},[r,a,l,c,h,u,f,s,o,m,d,n]}let $3=class extends ye{constructor(i){super(),Ae(this,i,_3,K3,ve,{five:0,pxmm:1,floorIndex:2,hoverEnable:3,floorplanData:4,extraObjects:10,highlightData:5,missingFloorImageUrl:6},q3)}};function ex(i){Ee(i,"svelte-1mvqyqq",".plugin-floorplan-radar.svelte-1mvqyqq{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.plugin-floorplan-radar-container.svelte-1mvqyqq{position:relative}")}function ap(i){let e,t,n,o,s=i[8]!==0&&lp(i);return{c(){e=U("div"),s&&s.c(),b(e,"class","plugin-floorplan-radar svelte-1mvqyqq")},m(r,a){Y(r,e,a),s&&s.m(e,null),t=!0,n||(o=[si(Ni.call(null,e)),Se(e,"clientWidth",i[14]),Se(e,"clientHeight",i[15])],n=!0)},p(r,a){r[8]!==0?s?(s.p(r,a),a&256&&B(s,1)):(s=lp(r),s.c(),B(s,1),s.m(e,null)):s&&(xe(),G(s,1,1,()=>{s=null}),Ce())},i(r){t||(B(s),t=!0)},o(r){G(s),t=!1},d(r){r&&Q(e),s&&s.d(),n=!1,lt(o)}}}function lp(i){let e,t,n,o,s=`${i[10]}px`,r=`${i[13]}px`,a;const l=[{five:i[0],pxmm:i[11],floorIndex:i[12],floorplanData:i[3],hoverEnable:i[2],extraObjects:i[5],highlightData:i[6],missingFloorImageUrl:i[7]}];let c={};for(let u=0;u<l.length;u+=1)c=ut(c,l[u]);t=new $3({props:c});const h=[{pxmm:i[11],five:i[0],floorplanData:i[3],cameraImageUrl:i[4]}];let d={};for(let u=0;u<h.length;u+=1)d=ut(d,h[u]);return o=new G3({props:d}),{c(){e=U("div"),de(t.$$.fragment),n=re(),de(o.$$.fragment),b(e,"class","plugin-floorplan-radar-container svelte-1mvqyqq"),N(e,"width",s),N(e,"height",r)},m(u,f){Y(u,e,f),le(t,e,null),H(e,n),le(o,e,null),a=!0},p(u,f){const m=f&6381?vt(l,[{five:u[0],pxmm:u[11],floorIndex:u[12],floorplanData:u[3],hoverEnable:u[2],extraObjects:u[5],highlightData:u[6],missingFloorImageUrl:u[7]}]):{};t.$set(m);const g=f&2073?vt(h,[{pxmm:u[11],five:u[0],floorplanData:u[3],cameraImageUrl:u[4]}]):{};o.$set(g),f&1024&&s!==(s=`${u[10]}px`)&&N(e,"width",s),f&8192&&r!==(r=`${u[13]}px`)&&N(e,"height",r)},i(u){a||(B(t.$$.fragment,u),B(o.$$.fragment,u),a=!0)},o(u){G(t.$$.fragment,u),G(o.$$.fragment,u),a=!1},d(u){u&&Q(e),ce(t),ce(o)}}}function tx(i){let e,t,n=i[1]&&ap(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[1]?n?(n.p(o,s),s&2&&B(n,1)):(n=ap(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function ix(i,e,t){var n,o;let{five:s}=e,{visible:r}=e,{hoverEnable:a}=e,{floorplanData:l}=e,{cameraImageUrl:c}=e,{extraObjects:h=[]}=e,{highlightData:d}=e,{missingFloorImageUrl:u}=e,f=0,m=(o=(n=s.work.observers[s.getCurrentState().panoIndex])==null?void 0:n.floorIndex)!=null?o:0,g=0,v=0,A=0,w=0;function P(D){t(12,m=s.work.observers[D].floorIndex)}Zt(()=>(s.on("panoArrived",P),()=>{s.off("panoArrived",P)}));const I=D=>{t(8,g=D.detail)},j=D=>{t(9,v=D.detail)};return i.$$set=D=>{"five"in D&&t(0,s=D.five),"visible"in D&&t(1,r=D.visible),"hoverEnable"in D&&t(2,a=D.hoverEnable),"floorplanData"in D&&t(3,l=D.floorplanData),"cameraImageUrl"in D&&t(4,c=D.cameraImageUrl),"extraObjects"in D&&t(5,h=D.extraObjects),"highlightData"in D&&t(6,d=D.highlightData),"missingFloorImageUrl"in D&&t(7,u=D.missingFloorImageUrl)},i.$$.update=()=>{if(i.$$.dirty&1800){const D=Math.min(g,v),{max:T,min:M}=l.bounding,O=T.x-M.x,y=T.y-M.y,C=function(){return O>y?[D,D/O*y]:[D/y*O,D]}();t(10,A=C[0]),t(13,w=C[1]),t(11,f=A/O)}},[s,r,a,l,c,h,d,u,g,v,A,f,m,w,I,j]}let nx=class extends ye{constructor(i){super(),Ae(this,i,ix,tx,ve,{five:0,visible:1,hoverEnable:2,floorplanData:3,cameraImageUrl:4,extraObjects:5,highlightData:6,missingFloorImageUrl:7},ex)}},ox=class extends Co{constructor(i,e){super(i),p(this,"name","panoFloorplanRadarPlugin"),p(this,"state"),p(this,"data"),p(this,"app"),p(this,"wrapperSelector",""),p(this,"wrapper",null),p(this,"disposed",!1),p(this,"extraObjects",[]),p(this,"highlightData",{}),p(this,"dispose",()=>{var o;this.disposed=!0,(o=this.app)==null||o.$destroy(),this.wrapper=null,this.wrapperSelector="",this.hooks.emit("dispose")}),p(this,"highlight",o=>{this.state.config.highlightEnable&&(this.highlightData=o,this.render())}),p(this,"unhighlight",()=>{this.highlightData={},this.render()}),p(this,"_disable",o=>{var s;const{userAction:r}=o;(s=this.app)==null||s.$destroy(),this.app=void 0,this.hooks.emit("disable",{userAction:r})}),this.five=i;const t={hoverEnable:!1,highlightEnable:!1,cameraImageUrl:go,missingFloorImageUrl:lo(e==null?void 0:e.staticPrefix,Bs)},n=W(W({},t),e==null?void 0:e.configs);this.state={enabled:!0,visible:!0,config:n},e!=null&&e.wrapper&&console.warn("不推荐继续使用 params.selector 配置父容器，请使用 appendTo 方法"),typeof(e==null?void 0:e.wrapper)=="string"?this.wrapperSelector=e.wrapper:(e==null?void 0:e.wrapper)instanceof Element&&(this.wrapper=e.wrapper),i.once("dispose",this.dispose)}load(i,e,t=!0){return ee(this,null,function*(){function n(a){return Object.prototype.hasOwnProperty.apply(a,["version"])}const o=JSON.parse(JSON.stringify(i)),s=n(o)?o.data:o,r=this.data;this.data=yield Qs(s),this.hooks.emit("dataLoaded",this.data),this.hooks.emit("dataChange",this.data,r),e&&this.updateState(e,t),this.render()})}show(){return ee(this,arguments,function*(i={}){if(this.state.visible)return;const e=i.userAction!==void 0?i.userAction:!0;this.updateState({visible:!0},e),this._show({userAction:e})})}hide(){return ee(this,arguments,function*(i={}){if(!this.state.visible)return;const e=i.userAction!==void 0?i.userAction:!0;this.updateState({visible:!1},e),this._hide({userAction:e})})}enable(i={}){if(this.state.enabled)return;const e=i.userAction!==void 0?i.userAction:!0;this.updateState({enabled:!0},i.userAction||e),this._enable({userAction:e})}disable(i={}){if(!this.state.enabled)return;const e=i.userAction!==void 0?i.userAction:!0;this.updateState({enabled:!1},i.userAction||e),this._disable({userAction:e})}setState(i,e={}){const t=this.state,n=e.userAction!==void 0?e.userAction:!0;if(this.updateState(i,n),i.enabled!==void 0&&t.enabled!==i.enabled){const o={userAction:n};i.enabled?this._enable(o):this._disable(o)}if(i.visible!==void 0&&t.visible!==i.visible){const o={userAction:n};i.visible?this._show(o):this._hide(o)}}appendTo(i){this.wrapper!==i&&this.app&&(this.app.$destroy(),this.app=void 0),this.wrapper=i,this.render()}changeConfigs(i,e=!0){this.setState({config:i},{userAction:e}),this.render()}setExtraObjectsWith3DPositions(i){this.data&&(this.extraObjects=sv(i,this.five,this.data),this.render())}formatData(i){return ee(this,null,function*(){return yield Qs(i.data)})}_enable(i){const{userAction:e}=i;this.hooks.emit("enable",{userAction:e}),this.state.visible&&this._show({userAction:e})}_show(i){if(this.disposed||!this.state.enabled)return;const{userAction:e}=i;this.hooks.emit("show",{userAction:e}),this.render()}_hide(i){if(this.disposed||!this.state.enabled)return;const{userAction:e}=i;this.hooks.emit("hide",{userAction:e}),this.render()}updateState(i,e){const t=this.state,n=i.config?W(W({},t.config),i.config):t.config;this.state=pe(W(W({},this.state),i),{config:n}),!Yi(this.state,t,{deep:!0})&&this.hooks.emit("stateChange",{state:this.state,prevState:t,userAction:e})}render(){if(this.disposed||!this.state.enabled)return;if(!this.wrapper&&this.wrapperSelector){const e=document.querySelector(this.wrapperSelector);this.wrapper=e}if(!this.data||!this.wrapper)return;const i=pe(W({},this.state.config),{five:this.five,floorplanData:this.data,visible:this.state.visible,extraObjects:this.extraObjects,highlightData:this.highlightData});this.app?this.app.$set(i):this.app=new nx({target:this.wrapper,props:i})}};const eD=(i,e)=>new ox(i,e);function sx(i){Ee(i,"svelte-3rukxu",".plugin-radar__camera-wrapper.svelte-3rukxu{width:100%;height:100%;position:absolute;pointer-events:none;z-index:20}.plugin-radar__camera-position.svelte-3rukxu{position:absolute;left:0;top:0;width:0;height:0;transform:none;pointer-events:none;transition:transform 1s linear;transform-origin:0 0;z-index:20}.plugin-radar__camera-rotate.svelte-3rukxu{position:absolute;transform:rotate(45deg);background-repeat:no-repeat;background-size:100%;z-index:20}")}function rx(i){let e,t,n,o=`${i[1]}px`,s=`${i[1]}px`,r=`-${i[2]}px`,a=`-${i[2]}px`,l=`${i[2]}px ${i[2]}px`;return{c(){e=U("div"),t=U("div"),n=U("div"),b(n,"class","plugin-radar__camera-rotate svelte-3rukxu"),N(n,"background-image","url("+(i[0]||go)+")"),N(n,"transform",i[3]),N(n,"width",o),N(n,"height",s),N(n,"left",r),N(n,"top",a),N(n,"transform-origin",l),b(t,"class","plugin-radar__camera-position svelte-3rukxu"),N(t,"transform",i[4]),b(e,"class","plugin-radar__camera-wrapper svelte-3rukxu"),N(e,"opacity",i[5]?1:0)},m(c,h){Y(c,e,h),H(e,t),H(t,n)},p(c,[h]){h&1&&N(n,"background-image","url("+(c[0]||go)+")");const d=h&1;(d||h&9)&&N(n,"transform",c[3]),(d||h&3&&o!==(o=`${c[1]}px`))&&N(n,"width",o),(d||h&3&&s!==(s=`${c[1]}px`))&&N(n,"height",s),(d||h&5&&r!==(r=`-${c[2]}px`))&&N(n,"left",r),(d||h&5&&a!==(a=`-${c[2]}px`))&&N(n,"top",a),(d||h&5&&l!==(l=`${c[2]}px ${c[2]}px`))&&N(n,"transform-origin",l),h&16&&N(t,"transform",c[4]),h&32&&N(e,"opacity",c[5]?1:0)},i:oe,o:oe,d(c){c&&Q(e)}}}function ax(i){return`rotate(${Math.floor(i/Math.PI*180)*-1+45}deg)`}function lx(i,e,t){var n,o;let s,r,a,l,{five:c}=e,{pxmm:h}=e,{floorplanData:d}=e,{cameraImageUrl:u}=e,{cameraSize:f=36}=e,{cameraOffset:m=28.5}=e,g=c.getCurrentState().panoIndex,v=c.getCurrentState().longitude,A=(o=(n=c.work.observers[c.getCurrentState().panoIndex])==null?void 0:n.floorIndex)!=null?o:0;function w(D,T){const M=D.bounding,O=D.observers[T];if(!O)return"";const y=(M.max.x-M.min.x)*h,C=(M.max.y-M.min.y)*h,x=Math.floor(O.positionInImage.x*y),S=Math.floor(O.positionInImage.y*C);return`translate(${x}px, ${S}px)`}function P(D){t(9,g=D)}function I(D){t(11,A=c.work.observers[D].floorIndex)}const j=Cl(D=>{t(10,v=D.longitude)},1e3/60);return Zt(()=>(c.on("panoWillArrive",P),c.on("panoArrived",I),c.on("cameraDirectionUpdate",j),function(){c.off("panoWillArrive",P),c.off("panoArrived",I),c.off("cameraDirectionUpdate",j)})),i.$$set=D=>{"five"in D&&t(6,c=D.five),"pxmm"in D&&t(7,h=D.pxmm),"floorplanData"in D&&t(8,d=D.floorplanData),"cameraImageUrl"in D&&t(0,u=D.cameraImageUrl),"cameraSize"in D&&t(1,f=D.cameraSize),"cameraOffset"in D&&t(2,m=D.cameraOffset)},i.$$.update=()=>{i.$$.dirty&2304&&t(12,s=d.floorDatas[A]),i.$$.dirty&4096&&t(5,r=s.rooms.length>0),i.$$.dirty&768&&t(4,a=w(d,g)),i.$$.dirty&1024&&t(3,l=ax(v))},[u,f,m,l,a,r,c,h,d,g,v,A,s]}class cx extends ye{constructor(e){super(),Ae(this,e,lx,rx,ve,{five:6,pxmm:7,floorplanData:8,cameraImageUrl:0,cameraSize:1,cameraOffset:2},sx)}}function hx(i){Ee(i,"svelte-1i87fz7",".plugin-pano-floorplan__extra-objects.svelte-1i87fz7{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.plugin-pano-floorplan__extra-object-item--position.svelte-1i87fz7{position:absolute;width:0;height:0}.plugin-pano-floorplan__extra-object-item.svelte-1i87fz7{transform:translate(-50%, -50%)}")}function cp(i,e,t){const n=i.slice();return n[1]=e[t],n}function hp(i,e){let t,n,o=`${e[1].icon.width/16}rem`,s=`${e[1].icon.height/16}rem`,r,a=`${e[1].positionInImage.y*100}%`,l=`${e[1].positionInImage.x*100}%`;return{key:i,first:null,c(){t=U("div"),n=U("div"),r=re(),b(n,"class","plugin-pano-floorplan__extra-object-item svelte-1i87fz7"),N(n,"background-image",`url(${e[1].icon.url})`),N(n,"width",o),N(n,"height",s),b(t,"class","plugin-pano-floorplan__extra-object-item--position svelte-1i87fz7"),N(t,"top",a),N(t,"left",l),this.first=t},m(c,h){Y(c,t,h),H(t,n),H(t,r)},p(c,h){e=c,h&1&&N(n,"background-image",`url(${e[1].icon.url})`);const d=h&1;d&&N(n,"width",o),d&&N(n,"height",s),h&1&&a!==(a=`${e[1].positionInImage.y*100}%`)&&N(t,"top",a),h&1&&l!==(l=`${e[1].positionInImage.x*100}%`)&&N(t,"left",l)},d(c){c&&Q(t)}}}function dx(i){let e,t=[],n=new Map,o=i[0];const s=r=>r[1].id;for(let r=0;r<o.length;r+=1){let a=cp(i,o,r),l=s(a);n.set(l,t[r]=hp(l,a))}return{c(){e=U("div");for(let r=0;r<t.length;r+=1)t[r].c();b(e,"class","plugin-pano-floorplan__extra-objects svelte-1i87fz7")},m(r,a){Y(r,e,a);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(r,[a]){a&1&&(o=r[0],t=Ei(t,a,s,1,r,o,n,e,la,hp,null,cp))},i:oe,o:oe,d(r){r&&Q(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function ux(i,e,t){let{extraObjects:n=[]}=e;return i.$$set=o=>{"extraObjects"in o&&t(0,n=o.extraObjects)},[n]}class px extends ye{constructor(e){super(),Ae(this,e,ux,dx,ve,{extraObjects:0},hx)}}function fx(i){let e,t,n,o,s,r;const a=[{floorIndex:i[2],floorplanData:i[4]}];let l={};for(let h=0;h<a.length;h+=1)l=ut(l,a[h]);e=new ld({props:l}),n=new px({props:{extraObjects:i[7]}});let c=i[3]&&dp(i);return{c(){de(e.$$.fragment),t=re(),de(n.$$.fragment),o=re(),c&&c.c(),s=Oe()},m(h,d){le(e,h,d),Y(h,t,d),le(n,h,d),Y(h,o,d),c&&c.m(h,d),Y(h,s,d),r=!0},p(h,d){const u=d&20?vt(a,[{floorIndex:h[2],floorplanData:h[4]}]):{};e.$set(u);const f={};d&128&&(f.extraObjects=h[7]),n.$set(f),h[3]?c?(c.p(h,d),d&8&&B(c,1)):(c=dp(h),c.c(),B(c,1),c.m(s.parentNode,s)):c&&(xe(),G(c,1,1,()=>{c=null}),Ce())},i(h){r||(B(e.$$.fragment,h),B(n.$$.fragment,h),B(c),r=!0)},o(h){G(e.$$.fragment,h),G(n.$$.fragment,h),G(c),r=!1},d(h){ce(e,h),h&&Q(t),ce(n,h),h&&Q(o),c&&c.d(h),h&&Q(s)}}}function mx(i){let e,t;return e=new nv({props:{missingFloorConfig:i[6]}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&64&&(s.missingFloorConfig=n[6]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function dp(i){let e,t;const n=[{five:i[0],pxmm:i[1],floorIndex:i[2],floorplanData:i[4],onRoomHeightClick:i[9],highlightData:i[5],hoveredRoom:void 0}];let o={};for(let s=0;s<n.length;s+=1)o=ut(o,n[s]);return e=new cd({props:o}),{c(){de(e.$$.fragment)},m(s,r){le(e,s,r),t=!0},p(s,r){const a=r&567?vt(n,[{five:s[0],pxmm:s[1],floorIndex:s[2],floorplanData:s[4],onRoomHeightClick:s[9],highlightData:s[5],hoveredRoom:void 0}]):{};e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function gx(i){let e,t,n,o;const s=[mx,fx],r=[];function a(l,c){return l[8]?1:0}return e=a(i),t=r[e]=s[e](i),{c(){t.c(),n=Oe()},m(l,c){r[e].m(l,c),Y(l,n,c),o=!0},p(l,[c]){let h=e;e=a(l),e===h?r[e].p(l,c):(xe(),G(r[h],1,1,()=>{r[h]=null}),Ce(),t=r[e],t?t.p(l,c):(t=r[e]=s[e](l),t.c()),B(t,1),t.m(n.parentNode,n))},i(l){o||(B(t),o=!0)},o(l){G(t),o=!1},d(l){r[e].d(l),l&&Q(n)}}}function vx(i,e,t){let n,o,s,{five:r}=e,{pxmm:a}=e,{floorIndex:l}=e,{hoverEnable:c}=e,{floorplanData:h}=e,{extraObjects:d=[]}=e,{highlightData:u}=e,{missingFloorConfig:f}=e,{missingFloorImageUrl:m}=e;const g=void 0;return i.$$set=v=>{"five"in v&&t(0,r=v.five),"pxmm"in v&&t(1,a=v.pxmm),"floorIndex"in v&&t(2,l=v.floorIndex),"hoverEnable"in v&&t(3,c=v.hoverEnable),"floorplanData"in v&&t(4,h=v.floorplanData),"extraObjects"in v&&t(10,d=v.extraObjects),"highlightData"in v&&t(5,u=v.highlightData),"missingFloorConfig"in v&&t(6,f=v.missingFloorConfig),"missingFloorImageUrl"in v&&t(11,m=v.missingFloorImageUrl)},i.$$.update=()=>{i.$$.dirty&20&&t(12,n=h.floorDatas[l]),i.$$.dirty&4096&&t(8,o=n.rooms.length>0),i.$$.dirty&1028&&t(7,s=d==null?void 0:d.filter(v=>v.floorIndex===l))},[r,a,l,c,h,u,f,s,o,g,d,m,n]}class Ax extends ye{constructor(e){super(),Ae(this,e,vx,gx,ve,{five:0,pxmm:1,floorIndex:2,hoverEnable:3,floorplanData:4,extraObjects:10,highlightData:5,missingFloorConfig:6,missingFloorImageUrl:11})}}function yx(i){Ee(i,"svelte-6v429q",".floorplan-guide-plugin__observer-dots.svelte-6v429q{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:10}.floorplan-guide-plugin__observer-dot.svelte-6v429q{position:absolute;background:#7dacff80;border:0.0375rem solid #96cfff;border-radius:50%;pointer-events:none;transform:translate(-50%, -50%);transition:opacity 0.8s ease-in-out}")}function up(i,e,t){const n=i.slice();return n[6]=e[t],n}function pp(i,e){let t;return{key:i,first:null,c(){t=U("div"),b(t,"class","floorplan-guide-plugin__observer-dot svelte-6v429q"),N(t,"left",e[6].positionInImage.x*e[0]+"px"),N(t,"top",e[6].positionInImage.y*e[1]+"px"),N(t,"width",e[2]+"px"),N(t,"height",e[2]+"px"),this.first=t},m(n,o){Y(n,t,o)},p(n,o){e=n,o&9&&N(t,"left",e[6].positionInImage.x*e[0]+"px"),o&10&&N(t,"top",e[6].positionInImage.y*e[1]+"px"),o&4&&N(t,"width",e[2]+"px"),o&4&&N(t,"height",e[2]+"px")},d(n){n&&Q(t)}}}function bx(i){let e,t=[],n=new Map,o=i[3];const s=r=>r[6].index;for(let r=0;r<o.length;r+=1){let a=up(i,o,r),l=s(a);n.set(l,t[r]=pp(l,a))}return{c(){e=U("div");for(let r=0;r<t.length;r+=1)t[r].c();b(e,"class","floorplan-guide-plugin__observer-dots svelte-6v429q")},m(r,a){Y(r,e,a);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(r,[a]){a&15&&(o=r[3],t=Ei(t,a,s,1,r,o,n,e,la,pp,null,up))},i:oe,o:oe,d(r){r&&Q(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function wx(i,e,t){let n,{floorplanData:o}=e,{floorIndex:s}=e,{contentWidth:r}=e,{contentHeight:a}=e,{observerDotSize:l=12}=e;return i.$$set=c=>{"floorplanData"in c&&t(4,o=c.floorplanData),"floorIndex"in c&&t(5,s=c.floorIndex),"contentWidth"in c&&t(0,r=c.contentWidth),"contentHeight"in c&&t(1,a=c.contentHeight),"observerDotSize"in c&&t(2,l=c.observerDotSize)},i.$$.update=()=>{var c,h;i.$$.dirty&48&&t(3,n=(h=(c=o.observers)==null?void 0:c.filter(d=>d.floorIndex===s))!=null?h:[])},[r,a,l,n,o,s]}class xx extends ye{constructor(e){super(),Ae(this,e,wx,bx,ve,{floorplanData:4,floorIndex:5,contentWidth:0,contentHeight:1,observerDotSize:2},yx)}}function Cx(i){Ee(i,"svelte-qulme3",".floorplan-guide-plugin__room-label.svelte-qulme3{position:absolute;display:flex;flex-direction:column;align-items:center;transform:translate(-50%, -50%);color:#fff;text-shadow:0.0625rem 0.0625rem 0.125rem rgba(0, 0, 0, 0.8);line-height:1.2;white-space:nowrap;pointer-events:auto;cursor:pointer;transition:opacity 300ms;opacity:1}.floorplan-guide-plugin__room-label--hidden.svelte-qulme3{opacity:0}.floorplan-guide-plugin__room-label--hovered.svelte-qulme3{opacity:1 !important}.floorplan-guide-plugin__room-content.svelte-qulme3{display:flex;flex-direction:column;align-items:center}.floorplan-guide-plugin__room-name.svelte-qulme3{font-family:PingFangSC-Regular;font-weight:400;font-size:0.875rem;color:#FFFFFF;margin-bottom:0.125rem}.floorplan-guide-plugin__room-area.svelte-qulme3{opacity:0.6;font-family:PingFangSC-Regular;font-weight:400;font-size:0.75rem;color:#FFFFFF;text-align:center}")}function Px(i){let e,t,n=i[2]&&fp(i),o=i[3]&&i[4]&&mp(i);return{c(){e=U("div"),n&&n.c(),t=re(),o&&o.c(),b(e,"class","floorplan-guide-plugin__room-content svelte-qulme3")},m(s,r){Y(s,e,r),n&&n.m(e,null),H(e,t),o&&o.m(e,null)},p(s,r){s[2]?n?n.p(s,r):(n=fp(s),n.c(),n.m(e,t)):n&&(n.d(1),n=null),s[3]&&s[4]?o?o.p(s,r):(o=mp(s),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(s){s&&Q(e),n&&n.d(),o&&o.d()}}}function Ex(i){let e,t=i[5].outerHTML+"",n;return{c(){e=new Ns(!1),n=Oe(),e.a=n},m(o,s){e.m(t,o,s),Y(o,n,s)},p(o,s){s&32&&t!==(t=o[5].outerHTML+"")&&e.p(t)},d(o){o&&Q(n),o&&e.d()}}}function fp(i){let e,t=i[0].name+"",n;return{c(){e=U("span"),n=Te(t),b(e,"class","floorplan-guide-plugin__room-name svelte-qulme3")},m(o,s){Y(o,e,s),H(e,n)},p(o,s){s&1&&t!==(t=o[0].name+"")&&Ne(n,t)},d(o){o&&Q(e)}}}function mp(i){let e,t;return{c(){e=U("span"),t=Te(i[4]),b(e,"class","floorplan-guide-plugin__room-area svelte-qulme3")},m(n,o){Y(n,e,o),H(e,t)},p(n,o){o&16&&Ne(t,n[4])},d(n){n&&Q(e)}}}function Ix(i){let e,t,n;function o(a,l){return a[5]?Ex:Px}let s=o(i),r=s(i);return{c(){e=U("div"),r.c(),b(e,"class","floorplan-guide-plugin__room-label svelte-qulme3"),b(e,"role","button"),b(e,"tabindex","0"),we(e,"floorplan-guide-plugin__room-label--hovered",i[1]),we(e,"floorplan-guide-plugin__room-label--hidden",!i[10]),N(e,"left",i[6]),N(e,"top",i[7])},m(a,l){Y(a,e,l),r.m(e,null),t||(n=[Se(e,"mouseenter",i[17]),Se(e,"mouseleave",i[18]),Se(e,"keydown",Mx),si(Ni.call(null,e)),Se(e,"clientWidth",i[19]),Se(e,"clientHeight",i[20])],t=!0)},p(a,[l]){s===(s=o(a))&&r?r.p(a,l):(r.d(1),r=s(a),r&&(r.c(),r.m(e,null))),l&2&&we(e,"floorplan-guide-plugin__room-label--hovered",a[1]),l&1024&&we(e,"floorplan-guide-plugin__room-label--hidden",!a[10]),l&64&&N(e,"left",a[6]),l&128&&N(e,"top",a[7])},i:oe,o:oe,d(a){a&&Q(e),r.d(),t=!1,lt(n)}}}const Mx=()=>{};function Sx(i,e,t){let n,o,s,{room:r}=e,{isHovered:a}=e,{roomNameEnable:l}=e,{roomAreaEnable:c}=e,{roomAreaSize:h}=e,{userConfigElement:d}=e,{adaptiveRoomLabelVisibleEnable:u}=e,{pxmm:f}=e,{left:m}=e,{top:g}=e,{createLabelInRoomChecker:v}=e;const A=Bn();let w=0,P=0;const I=()=>A("mouseenter"),j=()=>A("mouseleave"),D=M=>{t(8,w=M.detail)},T=M=>{t(9,P=M.detail)};return i.$$set=M=>{"room"in M&&t(0,r=M.room),"isHovered"in M&&t(1,a=M.isHovered),"roomNameEnable"in M&&t(2,l=M.roomNameEnable),"roomAreaEnable"in M&&t(3,c=M.roomAreaEnable),"roomAreaSize"in M&&t(4,h=M.roomAreaSize),"userConfigElement"in M&&t(5,d=M.userConfigElement),"adaptiveRoomLabelVisibleEnable"in M&&t(12,u=M.adaptiveRoomLabelVisibleEnable),"pxmm"in M&&t(13,f=M.pxmm),"left"in M&&t(6,m=M.left),"top"in M&&t(7,g=M.top),"createLabelInRoomChecker"in M&&t(14,v=M.createLabelInRoomChecker)},i.$$.update=()=>{i.$$.dirty&768&&t(16,n={width:w,height:P}),i.$$.dirty&81921&&t(15,o=n?v(r,n):void 0),i.$$.dirty&45058&&t(10,s=u?a||(o?o(f):!0):!0)},[r,a,l,c,h,d,m,g,w,P,s,A,u,f,v,o,n,I,j,D,T]}class Dx extends ye{constructor(e){super(),Ae(this,e,Sx,Ix,ve,{room:0,isHovered:1,roomNameEnable:2,roomAreaEnable:3,roomAreaSize:4,userConfigElement:5,adaptiveRoomLabelVisibleEnable:12,pxmm:13,left:6,top:7,createLabelInRoomChecker:14},Cx)}}function kx(i){Ee(i,"svelte-k2rax0",".floorplan-guide-plugin__room-labels.svelte-k2rax0{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:15}")}function gp(i,e,t){const n=i.slice();return n[17]=e[t],n}function vp(i,e){let t,n,o;function s(){return e[15](e[17])}return n=new Dx({props:{room:e[17],isHovered:e[7]===e[17].id,roomNameEnable:e[0],roomAreaEnable:e[1],roomAreaSize:e[17].size?e[3](e[17].size):"",userConfigElement:e[4]?e[4](e[17]):null,adaptiveRoomLabelVisibleEnable:e[2],pxmm:e[6],left:e[17].roomLabel.positionInImage.x*100+"%",top:e[17].roomLabel.positionInImage.y*100+"%",createLabelInRoomChecker:Lx}}),n.$on("mouseenter",s),n.$on("mouseleave",e[10]),{key:i,first:null,c(){t=Oe(),de(n.$$.fragment),this.first=t},m(r,a){Y(r,t,a),le(n,r,a),o=!0},p(r,a){e=r;const l={};a&256&&(l.room=e[17]),a&384&&(l.isHovered=e[7]===e[17].id),a&1&&(l.roomNameEnable=e[0]),a&2&&(l.roomAreaEnable=e[1]),a&264&&(l.roomAreaSize=e[17].size?e[3](e[17].size):""),a&272&&(l.userConfigElement=e[4]?e[4](e[17]):null),a&4&&(l.adaptiveRoomLabelVisibleEnable=e[2]),a&64&&(l.pxmm=e[6]),a&256&&(l.left=e[17].roomLabel.positionInImage.x*100+"%"),a&256&&(l.top=e[17].roomLabel.positionInImage.y*100+"%"),n.$set(l)},i(r){o||(B(n.$$.fragment,r),o=!0)},o(r){G(n.$$.fragment,r),o=!1},d(r){r&&Q(t),ce(n,r)}}}function zx(i){let e,t=[],n=new Map,o,s,r,a=i[8];const l=c=>c[17].id;for(let c=0;c<a.length;c+=1){let h=gp(i,a,c),d=l(h);n.set(d,t[c]=vp(d,h))}return{c(){e=U("div");for(let c=0;c<t.length;c+=1)t[c].c();b(e,"class","floorplan-guide-plugin__room-labels svelte-k2rax0")},m(c,h){Y(c,e,h);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);o=!0,s||(r=[si(Ni.call(null,e)),Se(e,"clientWidth",i[16])],s=!0)},p(c,[h]){h&2015&&(a=c[8],xe(),t=Ei(t,h,l,1,c,a,n,e,wo,vp,null,gp),Ce())},i(c){if(!o){for(let h=0;h<a.length;h+=1)B(t[h]);o=!0}},o(c){for(let h=0;h<t.length;h+=1)G(t[h]);o=!1},d(c){c&&Q(e);for(let h=0;h<t.length;h+=1)t[h].d();s=!1,lt(r)}}}function jx(i,e){const t=i[0],n=i[1];let o=!1;for(let s=0,r=e.length-1;s<e.length;r=s++){const a=e[s][0],l=e[s][1],c=e[r][0],h=e[r][1];l>n!=h>n&&t<(c-a)*(n-l)/(h-l)+a&&(o=!o)}return o}function Lx(i,e){if(e.width===0||e.height===0)return()=>!1;const t=i.path.map(({x:h,y:d})=>[h,d]),n=i.roomLabel.position,{x:o,y:s}=n,{width:r,height:a}=e,l=r/2,c=a/2;return function(h){const d=o*h,u=s*h,f=t.map(([m,g])=>[m*h,g*h]);return[[d+l,u-c],[d-l,u-c],[d-l,u+c],[d+l,u+c]].every(m=>jx(m,f))}}function Tx(i,e,t){let n,o,{floorplanData:s}=e,{floorIndex:r}=e,{roomNameEnable:a=!0}=e,{roomNameOtherTypeEnable:l=!0}=e,{roomAreaEnable:c=!0}=e,{adaptiveRoomLabelVisibleEnable:h=!0}=e,{getRoomAreaText:d}=e,{getLabelElement:u}=e,f=0,m=0,g=null;function v(I){t(7,g=I.id)}function A(){t(7,g=null)}const w=I=>v(I),P=I=>{t(5,f=I.detail)};return i.$$set=I=>{"floorplanData"in I&&t(11,s=I.floorplanData),"floorIndex"in I&&t(12,r=I.floorIndex),"roomNameEnable"in I&&t(0,a=I.roomNameEnable),"roomNameOtherTypeEnable"in I&&t(13,l=I.roomNameOtherTypeEnable),"roomAreaEnable"in I&&t(1,c=I.roomAreaEnable),"adaptiveRoomLabelVisibleEnable"in I&&t(2,h=I.adaptiveRoomLabelVisibleEnable),"getRoomAreaText"in I&&t(3,d=I.getRoomAreaText),"getLabelElement"in I&&t(4,u=I.getLabelElement)},i.$$.update=()=>{var I,j;if(i.$$.dirty&6144&&t(14,n=(j=(I=s.floorDatas[r])==null?void 0:I.rooms)!=null?j:[]),i.$$.dirty&24576&&t(8,o=l?n:n.filter(D=>D.roomType!=="100900000012")),i.$$.dirty&2080){const{max:D,min:T}=s.bounding,M=D.x-T.x;t(6,m=f/M)}},[a,c,h,d,u,f,m,g,o,v,A,s,r,l,n,w,P]}class Ox extends ye{constructor(e){super(),Ae(this,e,Tx,zx,ve,{floorplanData:11,floorIndex:12,roomNameEnable:0,roomNameOtherTypeEnable:13,roomAreaEnable:1,adaptiveRoomLabelVisibleEnable:2,getRoomAreaText:3,getLabelElement:4},kx)}}function Rx(i){Ee(i,"svelte-19jnco7",".floorplan-plugin__compass.svelte-19jnco7{position:absolute;will-change:opacity}.floorplan-plugin__compass-image.svelte-19jnco7{width:14.4375rem;height:2.5625rem;position:absolute;left:50%;top:50%;transform:translateX(-50%) translateY(-50%);opacity:0.1;background-repeat:no-repeat;background-size:100% 100%}.floorplan-plugin__compass-text.svelte-19jnco7{position:absolute;left:50%;top:50%;transform:translateX(-50%) translateY(-50%);opacity:0.2;font-weight:bold;font-size:0.625rem;color:#fff}")}function Bx(i){let e,t,n,o,s,r=`${i[1]}px`,a=`${i[2]}px`,l=`-${i[2]}px`,c=`${i[5]}px ${i[6]}px`;return{c(){e=U("div"),t=U("div"),n=re(),o=U("span"),s=Te(i[0]),b(t,"class","floorplan-plugin__compass-image svelte-19jnco7"),N(t,"background-image",`url(${ov})`),b(o,"class","floorplan-plugin__compass-text svelte-19jnco7"),b(e,"class","floorplan-plugin__compass svelte-19jnco7"),N(e,"transform",i[4]),N(e,"width",r),N(e,"height",a),N(e,"top",l),N(e,"transform-origin",c)},m(h,d){Y(h,e,d),H(e,t),H(e,n),H(e,o),H(o,s)},p(h,d){d&1&&Ne(s,h[0]),d&2&&r!==(r=`${h[1]}px`)&&N(e,"width",r),d&4&&a!==(a=`${h[2]}px`)&&N(e,"height",a),d&4&&l!==(l=`-${h[2]}px`)&&N(e,"top",l)},d(h){h&&Q(e)}}}function Hx(i){let e,t=i[3]&&Bx(i);return{c(){t&&t.c(),e=Oe()},m(n,o){t&&t.m(n,o),Y(n,e,o)},p(n,[o]){n[3]&&t.p(n,o)},i:oe,o:oe,d(n){t&&t.d(n),n&&Q(e)}}}function Nx(i,e,t){var n;let{floorplanData:o}=e,{northDesc:s}=e,{containerWidth:r}=e,{containerHeight:a}=e,{height:l=50}=e;const c=(n=o.entrance)==null?void 0:n.northRad,h=typeof c=="number",d=`rotate(${-(c?di(c):0)+90}deg)`,u=r/2,f=l+a/2;return i.$$set=m=>{"floorplanData"in m&&t(7,o=m.floorplanData),"northDesc"in m&&t(0,s=m.northDesc),"containerWidth"in m&&t(1,r=m.containerWidth),"containerHeight"in m&&t(8,a=m.containerHeight),"height"in m&&t(2,l=m.height)},[s,r,l,h,d,u,f,o,a]}class Fx extends ye{constructor(e){super(),Ae(this,e,Nx,Hx,ve,{floorplanData:7,northDesc:0,containerWidth:1,containerHeight:8,height:2},Rx)}}function Vx(i){Ee(i,"svelte-1mvqyqq",".plugin-floorplan-radar.svelte-1mvqyqq{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.plugin-floorplan-radar-container.svelte-1mvqyqq{position:relative}")}function Ap(i){let e,t,n,o,s=i[25]!==0&&yp(i);return{c(){e=U("div"),s&&s.c(),b(e,"class","plugin-floorplan-radar svelte-1mvqyqq")},m(r,a){Y(r,e,a),s&&s.m(e,null),t=!0,n||(o=[si(Ni.call(null,e)),Se(e,"clientWidth",i[33]),Se(e,"clientHeight",i[34])],n=!0)},p(r,a){r[25]!==0?s?(s.p(r,a),a[0]&33554432&&B(s,1)):(s=yp(r),s.c(),B(s,1),s.m(e,null)):s&&(xe(),G(s,1,1,()=>{s=null}),Ce())},i(r){t||(B(s),t=!0)},o(r){G(s),t=!1},d(r){r&&Q(e),s&&s.d(),n=!1,lt(o)}}}function yp(i){let e,t,n,o=`${i[27]}px`,s=`${i[29]}px`,r,a,l;const c=[{five:i[0],pxmm:i[28],floorIndex:i[21],floorplanData:i[3],hoverEnable:i[2],extraObjects:i[5],highlightData:i[6],missingFloorImageUrl:i[7],missingFloorConfig:i[8]}];let h={};for(let u=0;u<c.length;u+=1)h=ut(h,c[u]);t=new Ax({props:h});let d=i[30]&&bp(i);return{c(){e=U("div"),de(t.$$.fragment),n=re(),d&&d.c(),b(e,"class","plugin-floorplan-radar-container svelte-1mvqyqq"),N(e,"width",o),N(e,"height",s),N(e,"cursor",i[9]?"pointer":"default")},m(u,f){Y(u,e,f),le(t,e,null),H(e,n),d&&d.m(e,null),r=!0,a||(l=Se(e,"click",i[31]),a=!0)},p(u,f){const m=f[0]&270533101?vt(c,[{five:u[0],pxmm:u[28],floorIndex:u[21],floorplanData:u[3],hoverEnable:u[2],extraObjects:u[5],highlightData:u[6],missingFloorImageUrl:u[7],missingFloorConfig:u[8]}]):{};t.$set(m),u[30]?d?(d.p(u,f),f[0]&1073741824&&B(d,1)):(d=bp(u),d.c(),B(d,1),d.m(e,null)):d&&(xe(),G(d,1,1,()=>{d=null}),Ce()),f[0]&134217728&&o!==(o=`${u[27]}px`)&&N(e,"width",o),f[0]&536870912&&s!==(s=`${u[29]}px`)&&N(e,"height",s),f[0]&512&&N(e,"cursor",u[9]?"pointer":"default")},i(u){r||(B(t.$$.fragment,u),B(d),r=!0)},o(u){G(t.$$.fragment,u),G(d),r=!1},d(u){u&&Q(e),ce(t),d&&d.d(),a=!1,l()}}}function bp(i){let e,t,n,o,s,r;const a=[{floorplanData:i[3],floorIndex:i[21],contentWidth:i[27],contentHeight:i[29],observerDotSize:i[20]}];let l={};for(let u=0;u<a.length;u+=1)l=ut(l,a[u]);e=new xx({props:l});let c=i[10]&&wp(i),h=i[17]&&xp(i),d=i[22]&&Cp(i);return{c(){de(e.$$.fragment),t=re(),c&&c.c(),n=re(),h&&h.c(),o=re(),d&&d.c(),s=Oe()},m(u,f){le(e,u,f),Y(u,t,f),c&&c.m(u,f),Y(u,n,f),h&&h.m(u,f),Y(u,o,f),d&&d.m(u,f),Y(u,s,f),r=!0},p(u,f){const m=f[0]&674234376?vt(a,[{floorplanData:u[3],floorIndex:u[21],contentWidth:u[27],contentHeight:u[29],observerDotSize:u[20]}]):{};e.$set(m),u[10]?c?(c.p(u,f),f[0]&1024&&B(c,1)):(c=wp(u),c.c(),B(c,1),c.m(n.parentNode,n)):c&&(xe(),G(c,1,1,()=>{c=null}),Ce()),u[17]?h?(h.p(u,f),f[0]&131072&&B(h,1)):(h=xp(u),h.c(),B(h,1),h.m(o.parentNode,o)):h&&(xe(),G(h,1,1,()=>{h=null}),Ce()),u[22]?d?(d.p(u,f),f[0]&4194304&&B(d,1)):(d=Cp(u),d.c(),B(d,1),d.m(s.parentNode,s)):d&&(xe(),G(d,1,1,()=>{d=null}),Ce())},i(u){r||(B(e.$$.fragment,u),B(c),B(h),B(d),r=!0)},o(u){G(e.$$.fragment,u),G(c),G(h),G(d),r=!1},d(u){ce(e,u),u&&Q(t),c&&c.d(u),u&&Q(n),h&&h.d(u),u&&Q(o),d&&d.d(u),u&&Q(s)}}}function wp(i){let e,t;const n=[{floorplanData:i[3],floorIndex:i[21],roomNameEnable:i[11],roomNameOtherTypeEnable:i[12],roomAreaEnable:i[13],adaptiveRoomLabelVisibleEnable:i[14],getRoomAreaText:i[15],getLabelElement:i[16]}];let o={};for(let s=0;s<n.length;s+=1)o=ut(o,n[s]);return e=new Ox({props:o}),{c(){de(e.$$.fragment)},m(s,r){le(e,s,r),t=!0},p(s,r){const a=r[0]&2226184?vt(n,[{floorplanData:s[3],floorIndex:s[21],roomNameEnable:s[11],roomNameOtherTypeEnable:s[12],roomAreaEnable:s[13],adaptiveRoomLabelVisibleEnable:s[14],getRoomAreaText:s[15],getLabelElement:s[16]}]):{};e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function xp(i){let e,t;const n=[{floorplanData:i[3],northDesc:i[18],containerWidth:i[27],containerHeight:i[29],height:i[19]}];let o={};for(let s=0;s<n.length;s+=1)o=ut(o,n[s]);return e=new Fx({props:o}),{c(){de(e.$$.fragment)},m(s,r){le(e,s,r),t=!0},p(s,r){const a=r[0]&671875080?vt(n,[{floorplanData:s[3],northDesc:s[18],containerWidth:s[27],containerHeight:s[29],height:s[19]}]):{};e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function Cp(i){let e,t;const n=[{pxmm:i[28],five:i[0],floorplanData:i[3],cameraImageUrl:i[4],cameraSize:i[23],cameraOffset:i[24]}];let o={};for(let s=0;s<n.length;s+=1)o=ut(o,n[s]);return e=new cx({props:o}),{c(){de(e.$$.fragment)},m(s,r){le(e,s,r),t=!0},p(s,r){const a=r[0]&293601305?vt(n,[{pxmm:s[28],five:s[0],floorplanData:s[3],cameraImageUrl:s[4],cameraSize:s[23],cameraOffset:s[24]}]):{};e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function Wx(i){let e,t,n=i[1]&&Ap(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,s){o[1]?n?(n.p(o,s),s[0]&2&&B(n,1)):(n=Ap(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function Gx(i,e,t){let n,{five:o}=e,{visible:s}=e,{hoverEnable:r}=e,{floorplanData:a}=e,{cameraImageUrl:l}=e,{extraObjects:c=[]}=e,{highlightData:h}=e,{missingFloorImageUrl:d}=e,{missingFloorConfig:u}=e,{clickEnable:f=!0}=e,{roomLabelsEnable:m=!1}=e,{roomNameEnable:g=!0}=e,{roomNameOtherTypeEnable:v=!0}=e,{roomAreaEnable:A=!0}=e,{adaptiveRoomLabelVisibleEnable:w=!0}=e,{getRoomAreaText:P=K=>(K/1e6).toFixed(1)+"㎡"}=e,{getLabelElement:I=void 0}=e,{compassEnable:j=!1}=e,{northDesc:D="北"}=e,{compassHeight:T=50}=e,{observerDotSize:M=12}=e,{displayedFloorIndex:O}=e,{shouldShowRadar:y=!0}=e,{cameraSize:C=36}=e,{cameraOffset:x=28.5}=e,{onFloorplanClick:S=void 0}=e,k=0,z=0,q=0,X=0,$=0;function ne(K){if(!f||!S)return;const me=K.currentTarget.getBoundingClientRect(),De=K.clientX-me.left,he=K.clientY-me.top,je=De/X,ze=he/$;S({imageX:je,imageY:ze,floorIndex:O,originalEvent:K})}const _=K=>{t(25,z=K.detail)},se=K=>{t(26,q=K.detail)};return i.$$set=K=>{"five"in K&&t(0,o=K.five),"visible"in K&&t(1,s=K.visible),"hoverEnable"in K&&t(2,r=K.hoverEnable),"floorplanData"in K&&t(3,a=K.floorplanData),"cameraImageUrl"in K&&t(4,l=K.cameraImageUrl),"extraObjects"in K&&t(5,c=K.extraObjects),"highlightData"in K&&t(6,h=K.highlightData),"missingFloorImageUrl"in K&&t(7,d=K.missingFloorImageUrl),"missingFloorConfig"in K&&t(8,u=K.missingFloorConfig),"clickEnable"in K&&t(9,f=K.clickEnable),"roomLabelsEnable"in K&&t(10,m=K.roomLabelsEnable),"roomNameEnable"in K&&t(11,g=K.roomNameEnable),"roomNameOtherTypeEnable"in K&&t(12,v=K.roomNameOtherTypeEnable),"roomAreaEnable"in K&&t(13,A=K.roomAreaEnable),"adaptiveRoomLabelVisibleEnable"in K&&t(14,w=K.adaptiveRoomLabelVisibleEnable),"getRoomAreaText"in K&&t(15,P=K.getRoomAreaText),"getLabelElement"in K&&t(16,I=K.getLabelElement),"compassEnable"in K&&t(17,j=K.compassEnable),"northDesc"in K&&t(18,D=K.northDesc),"compassHeight"in K&&t(19,T=K.compassHeight),"observerDotSize"in K&&t(20,M=K.observerDotSize),"displayedFloorIndex"in K&&t(21,O=K.displayedFloorIndex),"shouldShowRadar"in K&&t(22,y=K.shouldShowRadar),"cameraSize"in K&&t(23,C=K.cameraSize),"cameraOffset"in K&&t(24,x=K.cameraOffset),"onFloorplanClick"in K&&t(32,S=K.onFloorplanClick)},i.$$.update=()=>{var K;if(i.$$.dirty[0]&234881032){const me=Math.min(z,q),{max:De,min:he}=a.bounding,je=De.x-he.x,ze=De.y-he.y,Pe=function(){return je>ze?[me,me/je*ze]:[me/ze*je,me]}();t(27,X=Pe[0]),t(29,$=Pe[1]),t(28,k=X/je)}i.$$.dirty[0]&2097160&&t(30,n=((K=a.floorDatas[O])==null?void 0:K.rooms.length)>0)},[o,s,r,a,l,c,h,d,u,f,m,g,v,A,w,P,I,j,D,T,M,O,y,C,x,z,q,X,k,$,n,ne,S,_,se]}class Qx extends ye{constructor(e){super(),Ae(this,e,Gx,Wx,ve,{five:0,visible:1,hoverEnable:2,floorplanData:3,cameraImageUrl:4,extraObjects:5,highlightData:6,missingFloorImageUrl:7,missingFloorConfig:8,clickEnable:9,roomLabelsEnable:10,roomNameEnable:11,roomNameOtherTypeEnable:12,roomAreaEnable:13,adaptiveRoomLabelVisibleEnable:14,getRoomAreaText:15,getLabelElement:16,compassEnable:17,northDesc:18,compassHeight:19,observerDotSize:20,displayedFloorIndex:21,shouldShowRadar:22,cameraSize:23,cameraOffset:24,onFloorplanClick:32},Vx,[-1,-1])}}let Ux=class extends Co{constructor(i,e){var t,n;super(i),p(this,"name","floorplanGuidePlugin"),p(this,"state"),p(this,"data"),p(this,"app"),p(this,"wrapperSelector",""),p(this,"wrapper",null),p(this,"disposed",!1),p(this,"extraObjects",[]),p(this,"highlightData",{}),p(this,"defaultMissingFloorConfig"),p(this,"dispose",()=>{var r;this.disposed=!0,(r=this.app)==null||r.$destroy(),this.wrapper=null,this.wrapperSelector="",this.five.off("panoArrived",this.handlePanoArrived),this.hooks.emit("dispose")}),p(this,"highlight",r=>{this.state.config.highlightEnable&&(this.highlightData=r,this.render())}),p(this,"unhighlight",()=>{this.highlightData={},this.render()}),p(this,"handleFloorplanClick",r=>{var a;const l=(a=this.data)==null?void 0:a.observers;if(!l||l.length===0){console.warn("No floorplan observers found");return}const c=r.imageX,h=r.imageY,d=r.floorIndex;let u=null,f=1/0;l.forEach(m=>{if(m.floorIndex!==d)return;const g=m.positionInImage.x,v=m.positionInImage.y,A=Math.sqrt(Math.pow(c-g,2)+Math.pow(h-v,2));A<f&&(f=A,u={panoIndex:m.index,distance:A,observer:m})}),u?this.five.emit("wantsToMoveToPano",u.panoIndex,{},!0)||this.five.moveToPano(u.panoIndex):console.warn("No suitable observer found on the same floor")}),p(this,"_disable",r=>{var a;const{userAction:l}=r;(a=this.app)==null||a.$destroy(),this.app=void 0,this.hooks.emit("disable",{userAction:l})}),p(this,"handlePanoArrived",()=>{var r,a;const l=(a=(r=this.five.work.observers[this.five.getCurrentState().panoIndex])==null?void 0:r.floorIndex)!=null?a:0;this.updateState({displayedFloorIndex:l},!0),this.render()}),this.five=i,this.defaultMissingFloorConfig={imageURL:lo(e==null?void 0:e.staticPrefix,Bs),imageWidth:200,imageHeight:120,text:(n=(t=e==null?void 0:e.i18n)==null?void 0:t.call(e,"暂无平面图"))!=null?n:"暂无平面图",textFontSize:14};const o={hoverEnable:!1,highlightEnable:!1,cameraImageUrl:t3,missingFloorImageUrl:lo(e==null?void 0:e.staticPrefix,Bs),missingFloorConfig:W(W({},this.defaultMissingFloorConfig),e==null?void 0:e.missingFloorConfig),clickEnable:!0,roomLabelsEnable:!1,roomNameEnable:!0,roomNameOtherTypeEnable:!1,roomAreaEnable:!0,adaptiveRoomLabelVisibleEnable:!0,getRoomAreaText:r=>(r/1e6).toFixed(1)+"㎡",getLabelElement:void 0,compassEnable:!1,northDesc:"北",compassHeight:50,observerDotSize:12,cameraSize:36,cameraOffset:28.5,i18n:(e==null?void 0:e.i18n)||(r=>r)},s=W(W({},o),e==null?void 0:e.configs);this.state={enabled:!0,visible:!0,config:s},e!=null&&e.wrapper&&console.warn("不推荐继续使用 params.selector 配置父容器，请使用 appendTo 方法"),typeof(e==null?void 0:e.wrapper)=="string"?this.wrapperSelector=e.wrapper:(e==null?void 0:e.wrapper)instanceof Element&&(this.wrapper=e.wrapper),i.once("dispose",this.dispose),i.on("panoArrived",this.handlePanoArrived)}load(i,e,t=!0){return ee(this,null,function*(){function n(a){return Object.prototype.hasOwnProperty.apply(a,["version"])}const o=JSON.parse(JSON.stringify(i)),s=n(o)?o.data:o,r=this.data;this.data=yield Qs(s),this.hooks.emit("dataLoaded",this.data),this.hooks.emit("dataChange",this.data,r),e&&this.updateState(e,t),this.render()})}show(){return ee(this,arguments,function*(i={}){if(this.state.visible)return;const e=i.userAction!==void 0?i.userAction:!0;this.updateState({visible:!0},e),this._show({userAction:e})})}hide(){return ee(this,arguments,function*(i={}){if(!this.state.visible)return;const e=i.userAction!==void 0?i.userAction:!0;this.updateState({visible:!1},e),this._hide({userAction:e})})}enable(i={}){if(this.state.enabled)return;const e=i.userAction!==void 0?i.userAction:!0;this.updateState({enabled:!0},i.userAction||e),this._enable({userAction:e})}disable(i={}){if(!this.state.enabled)return;const e=i.userAction!==void 0?i.userAction:!0;this.updateState({enabled:!1},i.userAction||e),this._disable({userAction:e})}setState(i,e={}){const t=this.state,n=e.userAction!==void 0?e.userAction:!0;if(this.updateState(i,n),i.enabled!==void 0&&t.enabled!==i.enabled){const o={userAction:n};i.enabled?this._enable(o):this._disable(o)}if(i.visible!==void 0&&t.visible!==i.visible){const o={userAction:n};i.visible?this._show(o):this._hide(o)}}appendTo(i){this.wrapper!==i&&this.app&&(this.app.$destroy(),this.app=void 0),this.wrapper=i,this.render()}changeConfigs(i,e=!0){this.setState({config:i},{userAction:e}),this.render()}setExtraObjectsWith3DPositions(i){this.data&&(this.extraObjects=sv(i,this.five,this.data),this.render())}changeFloor(i){if(!this.data){console.warn("No floorplan data loaded");return}if(i<0||i>=this.data.floorDatas.length){console.warn(`Invalid floor index: ${i}. Available floors: 0-${this.data.floorDatas.length-1}`);return}this.updateState({displayedFloorIndex:i},!0),this.render()}formatData(i){return ee(this,null,function*(){return yield Qs(i.data)})}_enable(i){const{userAction:e}=i;this.hooks.emit("enable",{userAction:e}),this.state.visible&&this._show({userAction:e})}_show(i){if(this.disposed||!this.state.enabled)return;const{userAction:e}=i;this.hooks.emit("show",{userAction:e}),this.render()}_hide(i){if(this.disposed||!this.state.enabled)return;const{userAction:e}=i;this.hooks.emit("hide",{userAction:e}),this.render()}updateState(i,e){var t;const n=this.state,o=(t=i.config)!=null&&t.missingFloorConfig?W(W({},n.config.missingFloorConfig),i.config.missingFloorConfig):n.config.missingFloorConfig,s=i.config?pe(W(W({},n.config),i.config),{missingFloorConfig:o}):n.config;this.state=pe(W(W({},this.state),i),{config:s}),!Yi(this.state,n,{deep:!0})&&this.hooks.emit("stateChange",{state:this.state,prevState:n,userAction:e})}render(){var i,e;if(this.disposed||!this.state.enabled)return;if(!this.wrapper&&this.wrapperSelector){const r=document.querySelector(this.wrapperSelector);this.wrapper=r}if(!this.data||!this.wrapper)return;const t=(e=(i=this.five.work.observers[this.five.getCurrentState().panoIndex])==null?void 0:i.floorIndex)!=null?e:0,n=this.state.displayedFloorIndex!==void 0?this.state.displayedFloorIndex:t,o=n===t,s=pe(W({},this.state.config),{five:this.five,floorplanData:this.data,visible:this.state.visible,extraObjects:this.extraObjects,highlightData:this.highlightData,displayedFloorIndex:n,shouldShowRadar:o,cameraSize:this.state.config.cameraSize||36,cameraOffset:this.state.config.cameraOffset||28.5,onFloorplanClick:this.state.config.clickEnable?this.handleFloorplanClick:void 0});this.app?this.app.$set(s):this.app=new Qx({target:this.wrapper,props:s})}};const tD=(i,e)=>new Ux(i,e);/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var lv={},bi=void 0,Xx=lv;function dd(i,e){var t=i.split("."),n=Xx;!(t[0]in n)&&n.execScript&&n.execScript("var "+t[0]);for(var o;t.length&&(o=t.shift());)!t.length&&e!==bi?n[o]=e:n=n[o]?n[o]:n[o]={}}var gt=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u"&&typeof DataView<"u";function Dr(i){var e=i.length,t=0,n=Number.POSITIVE_INFINITY,o,s,r,a,l,c,h,d,u,f;for(d=0;d<e;++d)i[d]>t&&(t=i[d]),i[d]<n&&(n=i[d]);for(o=1<<t,s=new(gt?Uint32Array:Array)(o),r=1,a=0,l=2;r<=t;){for(d=0;d<e;++d)if(i[d]===r){for(c=0,h=a,u=0;u<r;++u)c=c<<1|h&1,h>>=1;for(f=r<<16|d,u=c;u<o;u+=l)s[u]=f;++a}++r,a<<=1,l<<=1}return[s,t,n]}function Po(i,e){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=gt?new Uint8Array(i):i,this.m=!1,this.i=ll,this.r=!1,(e||!(e={}))&&(e.index&&(this.a=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.r=e.resize)),this.i){case ud:this.b=32768,this.c=new(gt?Uint8Array:Array)(32768+this.h+258);break;case ll:this.b=0,this.c=new(gt?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var ud=0,ll=1,Pp={t:ud,s:ll};Po.prototype.k=function(){for(;!this.m;){var i=ki(this,3);switch(i&1&&(this.m=!0),i>>>=1,i){case 0:var e=this.input,t=this.a,n=this.c,o=this.b,s=e.length,r=bi,a=bi,l=n.length,c=bi;if(this.d=this.f=0,t+1>=s)throw Error("invalid uncompressed block header: LEN");if(r=e[t++]|e[t++]<<8,t+1>=s)throw Error("invalid uncompressed block header: NLEN");if(a=e[t++]|e[t++]<<8,r===~a)throw Error("invalid uncompressed block header: length verify");if(t+r>e.length)throw Error("input buffer is broken");switch(this.i){case ud:for(;o+r>n.length;){if(c=l-o,r-=c,gt)n.set(e.subarray(t,t+c),o),o+=c,t+=c;else for(;c--;)n[o++]=e[t++];this.b=o,n=this.e(),o=this.b}break;case ll:for(;o+r>n.length;)n=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(gt)n.set(e.subarray(t,t+r),o),o+=r,t+=r;else for(;r--;)n[o++]=e[t++];this.a=t,this.b=o,this.c=n;break;case 1:this.j(Yx,qx);break;case 2:for(var h=ki(this,5)+257,d=ki(this,5)+1,u=ki(this,4)+4,f=new(gt?Uint8Array:Array)(lc.length),m=bi,g=bi,v=bi,A=bi,w=bi,P=bi,I=bi,D=bi,j=bi,D=0;D<u;++D)f[lc[D]]=ki(this,3);if(!gt)for(D=u,u=f.length;D<u;++D)f[lc[D]]=0;for(m=Dr(f),A=new(gt?Uint8Array:Array)(h+d),D=0,j=h+d;D<j;)switch(w=Gr(this,m),w){case 16:for(I=3+ki(this,2);I--;)A[D++]=P;break;case 17:for(I=3+ki(this,3);I--;)A[D++]=0;P=0;break;case 18:for(I=11+ki(this,7);I--;)A[D++]=0;P=0;break;default:P=A[D++]=w}g=Dr(gt?A.subarray(0,h):A.slice(0,h)),v=Dr(gt?A.subarray(h):A.slice(h)),this.j(g,v);break;default:throw Error("unknown BTYPE: "+i)}}return this.n()};var Ep=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],lc=gt?new Uint16Array(Ep):Ep,Ip=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],cv=gt?new Uint16Array(Ip):Ip,Mp=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],cl=gt?new Uint8Array(Mp):Mp,Sp=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],hv=gt?new Uint16Array(Sp):Sp,Dp=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],hl=gt?new Uint8Array(Dp):Dp,Xc=new(gt?Uint8Array:Array)(288),Oo,kp;Oo=0;for(kp=Xc.length;Oo<kp;++Oo)Xc[Oo]=143>=Oo?8:255>=Oo?9:279>=Oo?7:8;var Yx=Dr(Xc),Yc=new(gt?Uint8Array:Array)(30),Ha,zp;Ha=0;for(zp=Yc.length;Ha<zp;++Ha)Yc[Ha]=5;var qx=Dr(Yc);function ki(i,e){for(var t=i.f,n=i.d,o=i.input,s=i.a,r=o.length,a;n<e;){if(s>=r)throw Error("input buffer is broken");t|=o[s++]<<n,n+=8}return a=t&(1<<e)-1,i.f=t>>>e,i.d=n-e,i.a=s,a}function Gr(i,e){for(var t=i.f,n=i.d,o=i.input,s=i.a,r=o.length,a=e[0],l=e[1],c,h;n<l&&!(s>=r);)t|=o[s++]<<n,n+=8;if(c=a[t&(1<<l)-1],h=c>>>16,h>n)throw Error("invalid code length: "+h);return i.f=t>>h,i.d=n-h,i.a=s,c&65535}Po.prototype.j=function(i,e){var t=this.c,n=this.b;this.o=i;for(var o=t.length-258,s,r,a,l;(s=Gr(this,i))!==256;)if(256>s)n>=o&&(this.b=n,t=this.e(),n=this.b),t[n++]=s;else for(r=s-257,l=cv[r],0<cl[r]&&(l+=ki(this,cl[r])),s=Gr(this,e),a=hv[s],0<hl[s]&&(a+=ki(this,hl[s])),n>=o&&(this.b=n,t=this.e(),n=this.b);l--;)t[n]=t[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n};Po.prototype.w=function(i,e){var t=this.c,n=this.b;this.o=i;for(var o=t.length,s,r,a,l;(s=Gr(this,i))!==256;)if(256>s)n>=o&&(t=this.e(),o=t.length),t[n++]=s;else for(r=s-257,l=cv[r],0<cl[r]&&(l+=ki(this,cl[r])),s=Gr(this,e),a=hv[s],0<hl[s]&&(a+=ki(this,hl[s])),n+l>o&&(t=this.e(),o=t.length);l--;)t[n]=t[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n};Po.prototype.e=function(){var i=new(gt?Uint8Array:Array)(this.b-32768),e=this.b-32768,t,n,o=this.c;if(gt)i.set(o.subarray(32768,i.length));else for(t=0,n=i.length;t<n;++t)i[t]=o[t+32768];if(this.g.push(i),this.l+=i.length,gt)o.set(o.subarray(e,e+32768));else for(t=0;32768>t;++t)o[t]=o[e+t];return this.b=32768,o};Po.prototype.z=function(i){var e,t=this.input.length/this.a+1|0,n,o,s,r=this.input,a=this.c;return i&&(typeof i.p=="number"&&(t=i.p),typeof i.u=="number"&&(t+=i.u)),2>t?(n=(r.length-this.a)/this.o[2],s=258*(n/2)|0,o=s<a.length?a.length+s:a.length<<1):o=a.length*t,gt?(e=new Uint8Array(o),e.set(a)):e=a,this.c=e};Po.prototype.n=function(){var i=0,e=this.c,t=this.g,n,o=new(gt?Uint8Array:Array)(this.l+(this.b-32768)),s,r,a,l;if(t.length===0)return gt?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(s=0,r=t.length;s<r;++s)for(n=t[s],a=0,l=n.length;a<l;++a)o[i++]=n[a];for(s=32768,r=this.b;s<r;++s)o[i++]=e[s];return this.g=[],this.buffer=o};Po.prototype.v=function(){var i,e=this.b;return gt?this.r?(i=new Uint8Array(e),i.set(this.c.subarray(0,e))):i=this.c.subarray(0,e):(this.c.length>e&&(this.c.length=e),i=this.c),this.buffer=i};function pd(i,e){var t,n;switch(this.input=i,this.a=0,(e||!(e={}))&&(e.index&&(this.a=e.index),e.verify&&(this.A=e.verify)),t=i[this.a++],n=i[this.a++],t&15){case jp:this.method=jp;break;default:throw Error("unsupported compression method")}if(((t<<8)+n)%31!==0)throw Error("invalid fcheck flag:"+((t<<8)+n)%31);if(n&32)throw Error("fdict flag is not supported");this.q=new Po(i,{index:this.a,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}pd.prototype.k=function(){var i=this.input,e,t;if(e=this.q.k(),this.a=this.q.a,this.A){t=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var n=e;if(typeof n=="string"){var o=n.split(""),s,r;for(s=0,r=o.length;s<r;s++)o[s]=(o[s].charCodeAt(0)&255)>>>0;n=o}for(var a=1,l=0,c=n.length,h,d=0;0<c;){h=1024<c?1024:c,c-=h;do a+=n[d++],l+=a;while(--h);a%=65521,l%=65521}if(t!==(l<<16|a)>>>0)throw Error("invalid adler-32 checksum")}return e};var jp=8;dd("Zlib.Inflate",pd);dd("Zlib.Inflate.prototype.decompress",pd.prototype.k);var qc={ADAPTIVE:Pp.s,BLOCK:Pp.t},kr,zr,Ds,Lp;if(Object.keys)kr=Object.keys(qc);else for(zr in kr=[],Ds=0,qc)kr[Ds++]=zr;Ds=0;for(Lp=kr.length;Ds<Lp;++Ds)zr=kr[Ds],dd("Zlib.Inflate.BufferType."+zr,qc[zr]);var Tp=lv.Zlib,dv={findSpan:function(i,e,t){var n=t.length-i-1;if(e>=t[n])return n-1;if(e<=t[i])return i;for(var o=i,s=n,r=Math.floor((o+s)/2);e<t[r]||e>=t[r+1];)e<t[r]?s=r:o=r,r=Math.floor((o+s)/2);return r},calcBasisFunctions:function(i,e,t,n){var o=[],s=[],r=[];o[0]=1;for(var a=1;a<=t;++a){s[a]=e-n[i+1-a],r[a]=n[i+a]-e;for(var l=0,c=0;c<a;++c){var h=r[c+1],d=s[a-c],u=o[c]/(h+d);o[c]=l+h*u,l=d*u}o[a]=l}return o},calcBSplinePoint:function(i,e,t,n){for(var o=this.findSpan(i,n,e),s=this.calcBasisFunctions(o,n,i,e),r=new Ro(0,0,0,0),a=0;a<=i;++a){var l=t[o-i+a],c=s[a],h=l.w*c;r.x+=l.x*h,r.y+=l.y*h,r.z+=l.z*h,r.w+=l.w*c}return r},calcBasisFunctionDerivatives:function(i,e,t,n,o){for(var s=[],r=0;r<=t;++r)s[r]=0;for(var a=[],r=0;r<=n;++r)a[r]=s.slice(0);for(var l=[],r=0;r<=t;++r)l[r]=s.slice(0);l[0][0]=1;for(var c=s.slice(0),h=s.slice(0),d=1;d<=t;++d){c[d]=e-o[i+1-d],h[d]=o[i+d]-e;for(var u=0,f=0;f<d;++f){var m=h[f+1],g=c[d-f];l[d][f]=m+g;var v=l[f][d-1]/l[d][f];l[f][d]=u+m*v,u=g*v}l[d][d]=u}for(var d=0;d<=t;++d)a[0][d]=l[d][t];for(var f=0;f<=t;++f){for(var A=0,w=1,P=[],r=0;r<=t;++r)P[r]=s.slice(0);P[0][0]=1;for(var I=1;I<=n;++I){var j=0,D=f-I,T=t-I;f>=I&&(P[w][0]=P[A][0]/l[T+1][D],j=P[w][0]*l[D][T]);for(var M=D>=-1?1:-D,O=f-1<=T?I-1:t-f,d=M;d<=O;++d)P[w][d]=(P[A][d]-P[A][d-1])/l[T+1][D+d],j+=P[w][d]*l[D+d][T];f<=T&&(P[w][I]=-P[A][I-1]/l[T+1][f],j+=P[w][I]*l[f][T]),a[I][f]=j;var d=A;A=w,w=d}}for(var f=t,I=1;I<=n;++I){for(var d=0;d<=t;++d)a[I][d]*=f;f*=t-I}return a},calcBSplineDerivatives:function(i,e,t,n,o){for(var s=o<i?o:i,r=[],a=this.findSpan(i,n,e),l=this.calcBasisFunctionDerivatives(a,n,i,s,e),c=[],h=0;h<t.length;++h){var d=t[h].clone(),u=d.w;d.x*=u,d.y*=u,d.z*=u,c[h]=d}for(var f=0;f<=s;++f){for(var d=c[a-i].clone().multiplyScalar(l[f][0]),m=1;m<=i;++m)d.add(c[a-i+m].clone().multiplyScalar(l[f][m]));r[f]=d}for(var f=s+1;f<=o+1;++f)r[f]=new Ro(0,0,0);return r},calcKoverI:function(i,e){for(var t=1,n=2;n<=i;++n)t*=n;for(var o=1,n=2;n<=e;++n)o*=n;for(var n=2;n<=i-e;++n)o*=n;return t/o},calcRationalCurveDerivatives:function(i){for(var e=i.length,t=[],n=[],o=0;o<e;++o){var s=i[o];t[o]=new R(s.x,s.y,s.z),n[o]=s.w}for(var r=[],a=0;a<e;++a){for(var l=t[a].clone(),o=1;o<=a;++o)l.sub(r[a-o].clone().multiplyScalar(this.calcKoverI(a,o)*n[o]));r[a]=l.divideScalar(n[0])}return r},calcNURBSDerivatives:function(i,e,t,n,o){var s=this.calcBSplineDerivatives(i,e,t,n,o);return this.calcRationalCurveDerivatives(s)},calcSurfacePoint:function(i,e,t,n,o,s,r,a){for(var l=this.findSpan(i,s,t),c=this.findSpan(e,r,n),h=this.calcBasisFunctions(l,s,i,t),d=this.calcBasisFunctions(c,r,e,n),u=[],f=0;f<=e;++f){u[f]=new Ro(0,0,0,0);for(var m=0;m<=i;++m){var g=o[l-i+m][c-e+f].clone(),v=g.w;g.x*=v,g.y*=v,g.z*=v,u[f].add(g.multiplyScalar(h[m]))}}for(var A=new Ro(0,0,0,0),f=0;f<=e;++f)A.add(u[f].multiplyScalar(d[f]));A.divideScalar(A.w),a.set(A.x,A.y,A.z)}},qo=function(i,e,t,n,o){yl.call(this),this.degree=i,this.knots=e,this.controlPoints=[],this.startKnot=n||0,this.endKnot=o||this.knots.length-1;for(var s=0;s<t.length;++s){var r=t[s];this.controlPoints[s]=new Ro(r.x,r.y,r.z,r.w)}};qo.prototype=Object.create(yl.prototype);qo.prototype.constructor=qo;qo.prototype.getPoint=function(i,e){var t=e||new R,n=this.knots[this.startKnot]+i*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=dv.calcBSplinePoint(this.degree,this.knots,this.controlPoints,n);return o.w!=1&&o.divideScalar(o.w),t.set(o.x,o.y,o.z)};qo.prototype.getTangent=function(i,e){var t=e||new R,n=this.knots[0]+i*(this.knots[this.knots.length-1]-this.knots[0]),o=dv.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,n,1);return t.copy(o[1]).normalize(),t};(function(){var i,e,t;function n(y){qd.call(this,y)}n.prototype=Object.assign(Object.create(qd.prototype),{constructor:n,load:function(y,C,x,S){var k=this,z=k.path===""?Jl.extractUrlBase(y):k.path,q=new Q1(this.manager);q.setPath(k.path),q.setResponseType("arraybuffer"),q.load(y,function(X){try{C(k.parse(X,z))}catch($){S?S($):console.error($),k.manager.itemError(y)}},x,S)},parse:function(y,C){if(d(y))i=new l().parse(y);else{var x=D(y);if(!u(x))throw new Error("THREE.FBXLoader: Unknown format.");if(f(x)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+f(x));i=new a().parse(x)}var S=new Ao(this.manager).setPath(this.resourcePath||C).setCrossOrigin(this.crossOrigin);return new o(S,this.manager).parse(i)}});function o(y,C){this.textureLoader=y,this.manager=C}o.prototype={constructor:o,parse:function(){e=this.parseConnections();var y=this.parseImages(),C=this.parseTextures(y),x=this.parseMaterials(C),S=this.parseDeformers(),k=new s().parse(S);return this.parseScene(S,k,x),t},parseConnections:function(){var y=new Map;if("Connections"in i){var C=i.Connections.connections;C.forEach(function(x){var S=x[0],k=x[1],z=x[2];y.has(S)||y.set(S,{parents:[],children:[]});var q={ID:k,relationship:z};y.get(S).parents.push(q),y.has(k)||y.set(k,{parents:[],children:[]});var X={ID:S,relationship:z};y.get(k).children.push(X)})}return y},parseImages:function(){var y={},C={};if("Video"in i.Objects){var x=i.Objects.Video;for(var S in x){var k=x[S],z=parseInt(S);if(y[z]=k.RelativeFilename||k.Filename,"Content"in k){var q=k.Content instanceof ArrayBuffer&&k.Content.byteLength>0,X=typeof k.Content=="string"&&k.Content!=="";if(q||X){var $=this.parseImage(x[S]);C[k.RelativeFilename||k.Filename]=$}}}}for(var z in y){var ne=y[z];C[ne]!==void 0?y[z]=C[ne]:y[z]=y[z].split("\\").pop()}return y},parseImage:function(y){var C=y.Content,x=y.RelativeFilename||y.Filename,S=x.slice(x.lastIndexOf(".")+1).toLowerCase(),k;switch(S){case"bmp":k="image/bmp";break;case"jpg":case"jpeg":k="image/jpeg";break;case"png":k="image/png";break;case"tif":k="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",x),k="image/tga";break;default:console.warn('FBXLoader: Image type "'+S+'" is not supported.');return}if(typeof C=="string")return"data:"+k+";base64,"+C;var z=new Uint8Array(C);return window.URL.createObjectURL(new Blob([z],{type:k}))},parseTextures:function(y){var C=new Map;if("Texture"in i.Objects){var x=i.Objects.Texture;for(var S in x){var k=this.parseTexture(x[S],y);C.set(parseInt(S),k)}}return C},parseTexture:function(y,C){var x=this.loadTexture(y,C);x.ID=y.id,x.name=y.attrName;var S=y.WrapModeU,k=y.WrapModeV,z=S!==void 0?S.value:0,q=k!==void 0?k.value:0;if(x.wrapS=z===0?Or:Zd,x.wrapT=q===0?Or:Zd,"Scaling"in y){var X=y.Scaling.value;x.repeat.x=X[0],x.repeat.y=X[1]}return x},loadTexture:function(y,C){var x,S=this.textureLoader.path,k=e.get(y.id).children;k!==void 0&&k.length>0&&C[k[0].ID]!==void 0&&(x=C[k[0].ID],(x.indexOf("blob:")===0||x.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var z,q=y.FileName.slice(-3).toLowerCase();if(q==="tga"){var X=this.manager.getHandler(".tga");X===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",y.RelativeFilename),z=new Jd):z=X.load(x)}else q==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",y.RelativeFilename),z=new Jd):z=this.textureLoader.load(x);return this.textureLoader.setPath(S),z},parseMaterials:function(y){var C=new Map;if("Material"in i.Objects){var x=i.Objects.Material;for(var S in x){var k=this.parseMaterial(x[S],y);k!==null&&C.set(parseInt(S),k)}}return C},parseMaterial:function(y,C){var x=y.id,S=y.attrName,k=y.ShadingModel;if(typeof k=="object"&&(k=k.value),!e.has(x))return null;var z=this.parseParameters(y,C,x),q;switch(k.toLowerCase()){case"phong":q=new Kl;break;case"lambert":q=new U1;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',k),q=new Kl;break}return q.setValues(z),q.name=S,q},parseParameters:function(y,C,x){var S={};y.BumpFactor&&(S.bumpScale=y.BumpFactor.value),y.Diffuse?S.color=new Ye().fromArray(y.Diffuse.value):y.DiffuseColor&&y.DiffuseColor.type==="Color"&&(S.color=new Ye().fromArray(y.DiffuseColor.value)),y.DisplacementFactor&&(S.displacementScale=y.DisplacementFactor.value),y.Emissive?S.emissive=new Ye().fromArray(y.Emissive.value):y.EmissiveColor&&y.EmissiveColor.type==="Color"&&(S.emissive=new Ye().fromArray(y.EmissiveColor.value)),y.EmissiveFactor&&(S.emissiveIntensity=parseFloat(y.EmissiveFactor.value)),y.Opacity&&(S.opacity=parseFloat(y.Opacity.value)),S.opacity<1&&(S.transparent=!0),y.ReflectionFactor&&(S.reflectivity=y.ReflectionFactor.value),y.Shininess&&(S.shininess=y.Shininess.value),y.Specular?S.specular=new Ye().fromArray(y.Specular.value):y.SpecularColor&&y.SpecularColor.type==="Color"&&(S.specular=new Ye().fromArray(y.SpecularColor.value));var k=this;return e.get(x).children.forEach(function(z){var q=z.relationship;switch(q){case"Bump":S.bumpMap=k.getTexture(C,z.ID);break;case"Maya|TEX_ao_map":S.aoMap=k.getTexture(C,z.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":S.map=k.getTexture(C,z.ID),S.map.encoding=on;break;case"DisplacementColor":S.displacementMap=k.getTexture(C,z.ID);break;case"EmissiveColor":S.emissiveMap=k.getTexture(C,z.ID),S.emissiveMap.encoding=on;break;case"NormalMap":case"Maya|TEX_normal_map":S.normalMap=k.getTexture(C,z.ID);break;case"ReflectionColor":S.envMap=k.getTexture(C,z.ID),S.envMap.mapping=X1,S.envMap.encoding=on;break;case"SpecularColor":S.specularMap=k.getTexture(C,z.ID),S.specularMap.encoding=on;break;case"TransparentColor":case"TransparencyFactor":S.alphaMap=k.getTexture(C,z.ID),S.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",q);break}}),S},getTexture:function(y,C){return"LayeredTexture"in i.Objects&&C in i.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),C=e.get(C).children[0].ID),y.get(C)},parseDeformers:function(){var y={},C={};if("Deformer"in i.Objects){var x=i.Objects.Deformer;for(var S in x){var k=x[S],z=e.get(parseInt(S));if(k.attrType==="Skin"){var q=this.parseSkeleton(z,x);q.ID=S,z.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),q.geometryID=z.parents[0].ID,y[S]=q}else if(k.attrType==="BlendShape"){var X={id:S};X.rawTargets=this.parseMorphTargets(z,x),X.id=S,z.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),C[S]=X}}}return{skeletons:y,morphTargets:C}},parseSkeleton:function(y,C){var x=[];return y.children.forEach(function(S){var k=C[S.ID];if(k.attrType==="Cluster"){var z={ID:S.ID,indices:[],weights:[],transformLink:new Xe().fromArray(k.TransformLink.a)};"Indexes"in k&&(z.indices=k.Indexes.a,z.weights=k.Weights.a),x.push(z)}}),{rawBones:x,bones:[]}},parseMorphTargets:function(y,C){for(var x=[],S=0;S<y.children.length;S++){var k=y.children[S],z=C[k.ID],q={name:z.attrName,initialWeight:z.DeformPercent,id:z.id,fullWeights:z.FullWeights.a};if(z.attrType!=="BlendShapeChannel")return;q.geoID=e.get(parseInt(k.ID)).children.filter(function(X){return X.relationship===void 0})[0].ID,x.push(q)}return x},parseScene:function(y,C,x){t=new Et;var S=this.parseModels(y.skeletons,C,x),k=i.Objects.Model,z=this;S.forEach(function(X){var $=k[X.ID];z.setLookAtProperties(X,$);var ne=e.get(X.ID).parents;ne.forEach(function(_){var se=S.get(_.ID);se!==void 0&&se.add(X)}),X.parent===null&&t.add(X)}),this.bindSkeleton(y.skeletons,C,S),this.createAmbientLight(),this.setupMorphMaterials(),t.traverse(function(X){if(X.userData.transformData){X.parent&&(X.userData.transformData.parentMatrixWorld=X.parent.matrix);var $=P(X.userData.transformData);X.applyMatrix4($)}});var q=new r().parse();t.children.length===1&&t.children[0].isGroup&&(t.children[0].animations=q,t=t.children[0]),t.animations=q},parseModels:function(y,C,x){var S=new Map,k=i.Objects.Model;for(var z in k){var q=parseInt(z),X=k[z],$=e.get(q),ne=this.buildSkeleton($,y,q,X.attrName);if(!ne){switch(X.attrType){case"Camera":ne=this.createCamera($);break;case"Light":ne=this.createLight($);break;case"Mesh":ne=this.createMesh($,C,x);break;case"NurbsCurve":ne=this.createCurve($,C);break;case"LimbNode":case"Root":ne=new Kd;break;case"Null":default:ne=new Et;break}ne.name=X.attrName?xa.sanitizeNodeName(X.attrName):"",ne.ID=q}this.getTransformData(ne,X),S.set(q,ne)}return S},buildSkeleton:function(y,C,x,S){var k=null;return y.parents.forEach(function(z){for(var q in C){var X=C[q];X.rawBones.forEach(function($,ne){if($.ID===z.ID){var _=k;k=new Kd,k.matrixWorld.copy($.transformLink),k.name=S?xa.sanitizeNodeName(S):"",k.ID=x,X.bones[ne]=k,_!==null&&k.add(_)}})}}),k},createCamera:function(y){var C,x;if(y.children.forEach(function(se){var K=i.Objects.NodeAttribute[se.ID];K!==void 0&&(x=K)}),x===void 0)C=new fi;else{var S=0;x.CameraProjectionType!==void 0&&x.CameraProjectionType.value===1&&(S=1);var k=1;x.NearPlane!==void 0&&(k=x.NearPlane.value/1e3);var z=1e3;x.FarPlane!==void 0&&(z=x.FarPlane.value/1e3);var q=window.innerWidth,X=window.innerHeight;x.AspectWidth!==void 0&&x.AspectHeight!==void 0&&(q=x.AspectWidth.value,X=x.AspectHeight.value);var $=q/X,ne=45;x.FieldOfView!==void 0&&(ne=x.FieldOfView.value);var _=x.FocalLength?x.FocalLength.value:null;switch(S){case 0:C=new nA(ne,$,k,z),_!==null&&C.setFocalLength(_);break;case 1:C=new iA(-q/2,q/2,X/2,-X/2,k,z);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+S+"."),C=new fi;break}}return C},createLight:function(y){var C,x;if(y.children.forEach(function(_){var se=i.Objects.NodeAttribute[_.ID];se!==void 0&&(x=se)}),x===void 0)C=new fi;else{var S;x.LightType===void 0?S=0:S=x.LightType.value;var k=16777215;x.Color!==void 0&&(k=new Ye().fromArray(x.Color.value));var z=x.Intensity===void 0?1:x.Intensity.value/100;x.CastLightOnObject!==void 0&&x.CastLightOnObject.value===0&&(z=0);var q=0;x.FarAttenuationEnd!==void 0&&(x.EnableFarAttenuation!==void 0&&x.EnableFarAttenuation.value===0?q=0:q=x.FarAttenuationEnd.value);var X=1;switch(S){case 0:C=new _d(k,z,q,X);break;case 1:C=new jc(k,z);break;case 2:var $=Math.PI/3;x.InnerAngle!==void 0&&($=ni.degToRad(x.InnerAngle.value));var ne=0;x.OuterAngle!==void 0&&(ne=ni.degToRad(x.OuterAngle.value),ne=Math.max(ne,1)),C=new oA(k,z,q,$,ne,X);break;default:console.warn("THREE.FBXLoader: Unknown light type "+x.LightType.value+", defaulting to a PointLight."),C=new _d(k,z);break}x.CastShadows!==void 0&&x.CastShadows.value===1&&(C.castShadow=!0)}return C},createMesh:function(y,C,x){var S,k=null,z=null,q=[];return y.children.forEach(function(X){C.has(X.ID)&&(k=C.get(X.ID)),x.has(X.ID)&&q.push(x.get(X.ID))}),q.length>1?z=q:q.length>0?z=q[0]:(z=new Kl({color:13421772}),q.push(z)),"color"in k.attributes&&q.forEach(function(X){X.vertexColors=!0}),k.FBX_Deformer?(q.forEach(function(X){X.skinning=!0}),S=new Y1(k,z),S.normalizeSkinWeights()):S=new We(k,z),S},createCurve:function(y,C){var x=y.children.reduce(function(k,z){return C.has(z.ID)&&(k=C.get(z.ID)),k},null),S=new $r({color:3342591,linewidth:1});return new bh(x,S)},getTransformData:function(y,C){var x={};"InheritType"in C&&(x.inheritType=parseInt(C.InheritType.value)),"RotationOrder"in C?x.eulerOrder=I(C.RotationOrder.value):x.eulerOrder="ZYX","Lcl_Translation"in C&&(x.translation=C.Lcl_Translation.value),"PreRotation"in C&&(x.preRotation=C.PreRotation.value),"Lcl_Rotation"in C&&(x.rotation=C.Lcl_Rotation.value),"PostRotation"in C&&(x.postRotation=C.PostRotation.value),"Lcl_Scaling"in C&&(x.scale=C.Lcl_Scaling.value),"ScalingOffset"in C&&(x.scalingOffset=C.ScalingOffset.value),"ScalingPivot"in C&&(x.scalingPivot=C.ScalingPivot.value),"RotationOffset"in C&&(x.rotationOffset=C.RotationOffset.value),"RotationPivot"in C&&(x.rotationPivot=C.RotationPivot.value),y.userData.transformData=x},setLookAtProperties:function(y,C){if("LookAtProperty"in C){var x=e.get(y.ID).children;x.forEach(function(S){if(S.relationship==="LookAtProperty"){var k=i.Objects.Model[S.ID];if("Lcl_Translation"in k){var z=k.Lcl_Translation.value;y.target!==void 0?(y.target.position.fromArray(z),t.add(y.target)):y.lookAt(new R().fromArray(z))}}})}},bindSkeleton:function(y,C,x){var S=this.parsePoseNodes();for(var k in y){var z=y[k],q=e.get(parseInt(z.ID)).parents;q.forEach(function(X){if(C.has(X.ID)){var $=X.ID,ne=e.get($);ne.parents.forEach(function(_){if(x.has(_.ID)){var se=x.get(_.ID);se.bind(new q1(z.bones),S[_.ID])}})}})}},parsePoseNodes:function(){var y={};if("Pose"in i.Objects){var C=i.Objects.Pose;for(var x in C)if(C[x].attrType==="BindPose"){var S=C[x].PoseNode;Array.isArray(S)?S.forEach(function(k){y[k.Node]=new Xe().fromArray(k.Matrix.a)}):y[S.Node]=new Xe().fromArray(S.Matrix.a)}}return y},createAmbientLight:function(){if("GlobalSettings"in i&&"AmbientColor"in i.GlobalSettings){var y=i.GlobalSettings.AmbientColor.value,C=y[0],x=y[1],S=y[2];if(C!==0||x!==0||S!==0){var k=new Ye(C,x,S);t.add(new Tg(k,1))}}},setupMorphMaterials:function(){var y=this;t.traverse(function(C){C.isMesh&&C.geometry.morphAttributes.position&&C.geometry.morphAttributes.position.length&&(Array.isArray(C.material)?C.material.forEach(function(x,S){y.setupMorphMaterial(C,x,S)}):y.setupMorphMaterial(C,C.material))})},setupMorphMaterial:function(y,C,x){var S=y.uuid,k=C.uuid,z=!1;if(t.traverse(function(X){X.isMesh&&(Array.isArray(X.material)?X.material.forEach(function($){$.uuid===k&&X.uuid!==S&&(z=!0)}):X.material.uuid===k&&X.uuid!==S&&(z=!0))}),z===!0){var q=C.clone();q.morphTargets=!0,x===void 0?y.material=q:y.material[x]=q}else C.morphTargets=!0}};function s(){}s.prototype={constructor:s,parse:function(y){var C=new Map;if("Geometry"in i.Objects){var x=i.Objects.Geometry;for(var S in x){var k=e.get(parseInt(S)),z=this.parseGeometry(k,x[S],y);C.set(parseInt(S),z)}}return C},parseGeometry:function(y,C,x){switch(C.attrType){case"Mesh":return this.parseMeshGeometry(y,C,x);case"NurbsCurve":return this.parseNurbsGeometry(C)}},parseMeshGeometry:function(y,C,x){var S=x.skeletons,k=[],z=y.parents.map(function(_){return i.Objects.Model[_.ID]});if(z.length!==0){var q=y.children.reduce(function(_,se){return S[se.ID]!==void 0&&(_=S[se.ID]),_},null);y.children.forEach(function(_){x.morphTargets[_.ID]!==void 0&&k.push(x.morphTargets[_.ID])});var X=z[0],$={};"RotationOrder"in X&&($.eulerOrder=I(X.RotationOrder.value)),"InheritType"in X&&($.inheritType=parseInt(X.InheritType.value)),"GeometricTranslation"in X&&($.translation=X.GeometricTranslation.value),"GeometricRotation"in X&&($.rotation=X.GeometricRotation.value),"GeometricScaling"in X&&($.scale=X.GeometricScaling.value);var ne=P($);return this.genGeometry(C,q,k,ne)}},genGeometry:function(y,C,x,S){var k=new xt;y.attrName&&(k.name=y.attrName);var z=this.parseGeoNode(y,C),q=this.genBuffers(z),X=new In(q.vertex,3);if(X.applyMatrix4(S),k.setAttribute("position",X),q.colors.length>0&&k.setAttribute("color",new In(q.colors,3)),C&&(k.setAttribute("skinIndex",new Z1(q.weightsIndices,4)),k.setAttribute("skinWeight",new In(q.vertexWeights,4)),k.FBX_Deformer=C),q.normal.length>0){var $=new J1().getNormalMatrix(S),ne=new In(q.normal,3);ne.applyNormalMatrix($),k.setAttribute("normal",ne)}if(q.uvs.forEach(function(De,he){var je="uv"+(he+1).toString();he===0&&(je="uv"),k.setAttribute(je,new In(q.uvs[he],2))}),z.material&&z.material.mappingType!=="AllSame"){var _=q.materialIndex[0],se=0;if(q.materialIndex.forEach(function(De,he){De!==_&&(k.addGroup(se,he-se,_),_=De,se=he)}),k.groups.length>0){var K=k.groups[k.groups.length-1],me=K.start+K.count;me!==q.materialIndex.length&&k.addGroup(me,q.materialIndex.length-me,_)}k.groups.length===0&&k.addGroup(0,q.materialIndex.length,q.materialIndex[0])}return this.addMorphTargets(k,y,x,S),k},parseGeoNode:function(y,C){var x={};if(x.vertexPositions=y.Vertices!==void 0?y.Vertices.a:[],x.vertexIndices=y.PolygonVertexIndex!==void 0?y.PolygonVertexIndex.a:[],y.LayerElementColor&&(x.color=this.parseVertexColors(y.LayerElementColor[0])),y.LayerElementMaterial&&(x.material=this.parseMaterialIndices(y.LayerElementMaterial[0])),y.LayerElementNormal&&(x.normal=this.parseNormals(y.LayerElementNormal[0])),y.LayerElementUV){x.uv=[];for(var S=0;y.LayerElementUV[S];)x.uv.push(this.parseUVs(y.LayerElementUV[S])),S++}return x.weightTable={},C!==null&&(x.skeleton=C,C.rawBones.forEach(function(k,z){k.indices.forEach(function(q,X){x.weightTable[q]===void 0&&(x.weightTable[q]=[]),x.weightTable[q].push({id:z,weight:k.weights[X]})})})),x},genBuffers:function(y){var C={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},x=0,S=0,k=!1,z=[],q=[],X=[],$=[],ne=[],_=[],se=this;return y.vertexIndices.forEach(function(K,me){var De=!1;K<0&&(K=K^-1,De=!0);var he=[],je=[];if(z.push(K*3,K*3+1,K*3+2),y.color){var ze=v(me,x,K,y.color);X.push(ze[0],ze[1],ze[2])}if(y.skeleton){if(y.weightTable[K]!==void 0&&y.weightTable[K].forEach(function(Fe){je.push(Fe.weight),he.push(Fe.id)}),je.length>4){k||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),k=!0);var Pe=[0,0,0,0],Le=[0,0,0,0];je.forEach(function(Fe,Ie){var Ve=Fe,ue=he[Ie];Le.forEach(function(be,Je,nt){if(Ve>be){nt[Je]=Ve,Ve=be;var At=Pe[Je];Pe[Je]=ue,ue=At}})}),he=Pe,je=Le}for(;je.length<4;)je.push(0),he.push(0);for(var ie=0;ie<4;++ie)ne.push(je[ie]),_.push(he[ie])}if(y.normal){var ze=v(me,x,K,y.normal);q.push(ze[0],ze[1],ze[2])}if(y.material&&y.material.mappingType!=="AllSame")var Me=v(me,x,K,y.material)[0];y.uv&&y.uv.forEach(function(Fe,Ie){var Ve=v(me,x,K,Fe);$[Ie]===void 0&&($[Ie]=[]),$[Ie].push(Ve[0]),$[Ie].push(Ve[1])}),S++,De&&(se.genFace(C,y,z,Me,q,X,$,ne,_,S),x++,S=0,z=[],q=[],X=[],$=[],ne=[],_=[])}),C},genFace:function(y,C,x,S,k,z,q,X,$,ne){for(var _=2;_<ne;_++)y.vertex.push(C.vertexPositions[x[0]]),y.vertex.push(C.vertexPositions[x[1]]),y.vertex.push(C.vertexPositions[x[2]]),y.vertex.push(C.vertexPositions[x[(_-1)*3]]),y.vertex.push(C.vertexPositions[x[(_-1)*3+1]]),y.vertex.push(C.vertexPositions[x[(_-1)*3+2]]),y.vertex.push(C.vertexPositions[x[_*3]]),y.vertex.push(C.vertexPositions[x[_*3+1]]),y.vertex.push(C.vertexPositions[x[_*3+2]]),C.skeleton&&(y.vertexWeights.push(X[0]),y.vertexWeights.push(X[1]),y.vertexWeights.push(X[2]),y.vertexWeights.push(X[3]),y.vertexWeights.push(X[(_-1)*4]),y.vertexWeights.push(X[(_-1)*4+1]),y.vertexWeights.push(X[(_-1)*4+2]),y.vertexWeights.push(X[(_-1)*4+3]),y.vertexWeights.push(X[_*4]),y.vertexWeights.push(X[_*4+1]),y.vertexWeights.push(X[_*4+2]),y.vertexWeights.push(X[_*4+3]),y.weightsIndices.push($[0]),y.weightsIndices.push($[1]),y.weightsIndices.push($[2]),y.weightsIndices.push($[3]),y.weightsIndices.push($[(_-1)*4]),y.weightsIndices.push($[(_-1)*4+1]),y.weightsIndices.push($[(_-1)*4+2]),y.weightsIndices.push($[(_-1)*4+3]),y.weightsIndices.push($[_*4]),y.weightsIndices.push($[_*4+1]),y.weightsIndices.push($[_*4+2]),y.weightsIndices.push($[_*4+3])),C.color&&(y.colors.push(z[0]),y.colors.push(z[1]),y.colors.push(z[2]),y.colors.push(z[(_-1)*3]),y.colors.push(z[(_-1)*3+1]),y.colors.push(z[(_-1)*3+2]),y.colors.push(z[_*3]),y.colors.push(z[_*3+1]),y.colors.push(z[_*3+2])),C.material&&C.material.mappingType!=="AllSame"&&(y.materialIndex.push(S),y.materialIndex.push(S),y.materialIndex.push(S)),C.normal&&(y.normal.push(k[0]),y.normal.push(k[1]),y.normal.push(k[2]),y.normal.push(k[(_-1)*3]),y.normal.push(k[(_-1)*3+1]),y.normal.push(k[(_-1)*3+2]),y.normal.push(k[_*3]),y.normal.push(k[_*3+1]),y.normal.push(k[_*3+2])),C.uv&&C.uv.forEach(function(se,K){y.uvs[K]===void 0&&(y.uvs[K]=[]),y.uvs[K].push(q[K][0]),y.uvs[K].push(q[K][1]),y.uvs[K].push(q[K][(_-1)*2]),y.uvs[K].push(q[K][(_-1)*2+1]),y.uvs[K].push(q[K][_*2]),y.uvs[K].push(q[K][_*2+1])})},addMorphTargets:function(y,C,x,S){if(x.length!==0){y.morphTargetsRelative=!0,y.morphAttributes.position=[];var k=this;x.forEach(function(z){z.rawTargets.forEach(function(q){var X=i.Objects.Geometry[q.geoID];X!==void 0&&k.genMorphGeometry(y,C,X,S,q.name)})})}},genMorphGeometry:function(y,C,x,S,k){for(var z=C.PolygonVertexIndex!==void 0?C.PolygonVertexIndex.a:[],q=x.Vertices!==void 0?x.Vertices.a:[],X=x.Indexes!==void 0?x.Indexes.a:[],$=y.attributes.position.count*3,ne=new Float32Array($),_=0;_<X.length;_++){var se=X[_]*3;ne[se]=q[_*3],ne[se+1]=q[_*3+1],ne[se+2]=q[_*3+2]}var K={vertexIndices:z,vertexPositions:ne},me=this.genBuffers(K),De=new In(me.vertex,3);De.name=k||x.attrName,De.applyMatrix4(S),y.morphAttributes.position.push(De)},parseNormals:function(y){var C=y.MappingInformationType,x=y.ReferenceInformationType,S=y.Normals.a,k=[];return x==="IndexToDirect"&&("NormalIndex"in y?k=y.NormalIndex.a:"NormalsIndex"in y&&(k=y.NormalsIndex.a)),{dataSize:3,buffer:S,indices:k,mappingType:C,referenceType:x}},parseUVs:function(y){var C=y.MappingInformationType,x=y.ReferenceInformationType,S=y.UV.a,k=[];return x==="IndexToDirect"&&(k=y.UVIndex.a),{dataSize:2,buffer:S,indices:k,mappingType:C,referenceType:x}},parseVertexColors:function(y){var C=y.MappingInformationType,x=y.ReferenceInformationType,S=y.Colors.a,k=[];return x==="IndexToDirect"&&(k=y.ColorIndex.a),{dataSize:4,buffer:S,indices:k,mappingType:C,referenceType:x}},parseMaterialIndices:function(y){var C=y.MappingInformationType,x=y.ReferenceInformationType;if(C==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:x};for(var S=y.Materials.a,k=[],z=0;z<S.length;++z)k.push(z);return{dataSize:1,buffer:S,indices:k,mappingType:C,referenceType:x}},parseNurbsGeometry:function(y){if(qo===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new xt;var C=parseInt(y.Order);if(isNaN(C))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",y.Order,y.id),new xt;for(var x=C-1,S=y.KnotVector.a,k=[],z=y.Points.a,q=0,X=z.length;q<X;q+=4)k.push(new Ro().fromArray(z,q));var $,ne;if(y.Form==="Closed")k.push(k[0]);else if(y.Form==="Periodic"){$=x,ne=S.length-1-$;for(var q=0;q<x;++q)k.push(k[q])}var _=new qo(x,S,k,$,ne),se=_.getPoints(k.length*7),K=new Float32Array(se.length*3);se.forEach(function(De,he){De.toArray(K,he*3)});var me=new xt;return me.setAttribute("position",new dt(K,3)),me}};function r(){}r.prototype={constructor:r,parse:function(){var y=[],C=this.parseClips();if(C!==void 0)for(var x in C){var S=C[x],k=this.addClip(S);y.push(k)}return y},parseClips:function(){if(i.Objects.AnimationCurve!==void 0){var y=this.parseAnimationCurveNodes();this.parseAnimationCurves(y);var C=this.parseAnimationLayers(y),x=this.parseAnimStacks(C);return x}},parseAnimationCurveNodes:function(){var y=i.Objects.AnimationCurveNode,C=new Map;for(var x in y){var S=y[x];if(S.attrName.match(/S|R|T|DeformPercent/)!==null){var k={id:S.id,attr:S.attrName,curves:{}};C.set(k.id,k)}}return C},parseAnimationCurves:function(y){var C=i.Objects.AnimationCurve;for(var x in C){var S={id:C[x].id,times:C[x].KeyTime.a.map(m),values:C[x].KeyValueFloat.a},k=e.get(S.id);if(k!==void 0){var z=k.parents[0].ID,q=k.parents[0].relationship;q.match(/X/)?y.get(z).curves.x=S:q.match(/Y/)?y.get(z).curves.y=S:q.match(/Z/)?y.get(z).curves.z=S:q.match(/d|DeformPercent/)&&y.has(z)&&(y.get(z).curves.morph=S)}}},parseAnimationLayers:function(y){var C=i.Objects.AnimationLayer,x=new Map;for(var S in C){var k=[],z=e.get(parseInt(S));if(z!==void 0){var q=z.children;q.forEach(function(X,$){if(y.has(X.ID)){var ne=y.get(X.ID);if(ne.curves.x!==void 0||ne.curves.y!==void 0||ne.curves.z!==void 0){if(k[$]===void 0){var _=e.get(X.ID).parents.filter(function(je){return je.relationship!==void 0})[0].ID;if(_!==void 0){var se=i.Objects.Model[_.toString()];if(se===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",X);return}var K={modelName:se.attrName?xa.sanitizeNodeName(se.attrName):"",ID:se.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};t.traverse(function(je){je.ID===se.id&&(K.transform=je.matrix,je.userData.transformData&&(K.eulerOrder=je.userData.transformData.eulerOrder))}),K.transform||(K.transform=new Xe),"PreRotation"in se&&(K.preRotation=se.PreRotation.value),"PostRotation"in se&&(K.postRotation=se.PostRotation.value),k[$]=K}}k[$]&&(k[$][ne.attr]=ne)}else if(ne.curves.morph!==void 0){if(k[$]===void 0){var me=e.get(X.ID).parents.filter(function(Le){return Le.relationship!==void 0})[0].ID,De=e.get(me).parents[0].ID,he=e.get(De).parents[0].ID,_=e.get(he).parents[0].ID,se=i.Objects.Model[_],K={modelName:se.attrName?xa.sanitizeNodeName(se.attrName):"",morphName:i.Objects.Deformer[me].attrName};k[$]=K}k[$][ne.attr]=ne}}}),x.set(parseInt(S),k)}}return x},parseAnimStacks:function(y){var C=i.Objects.AnimationStack,x={};for(var S in C){var k=e.get(parseInt(S)).children;k.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var z=y.get(k[0].ID);x[S]={name:C[S].attrName,layer:z}}return x},addClip:function(y){var C=[],x=this;return y.layer.forEach(function(S){C=C.concat(x.generateTracks(S))}),new K1(y.name,-1,C)},generateTracks:function(y){var C=[],x=new R,S=new tt,k=new R;if(y.transform&&y.transform.decompose(x,S,k),x=x.toArray(),S=new ui().setFromQuaternion(S,y.eulerOrder).toArray(),k=k.toArray(),y.T!==void 0&&Object.keys(y.T.curves).length>0){var z=this.generateVectorTrack(y.modelName,y.T.curves,x,"position");z!==void 0&&C.push(z)}if(y.R!==void 0&&Object.keys(y.R.curves).length>0){var q=this.generateRotationTrack(y.modelName,y.R.curves,S,y.preRotation,y.postRotation,y.eulerOrder);q!==void 0&&C.push(q)}if(y.S!==void 0&&Object.keys(y.S.curves).length>0){var X=this.generateVectorTrack(y.modelName,y.S.curves,k,"scale");X!==void 0&&C.push(X)}if(y.DeformPercent!==void 0){var $=this.generateMorphTrack(y);$!==void 0&&C.push($)}return C},generateVectorTrack:function(y,C,x,S){var k=this.getTimesForAllAxes(C),z=this.getKeyframeTrackValues(k,C,x);return new _1(y+"."+S,k,z)},generateRotationTrack:function(y,C,x,S,k,z){C.x!==void 0&&(this.interpolateRotations(C.x),C.x.values=C.x.values.map(ni.degToRad)),C.y!==void 0&&(this.interpolateRotations(C.y),C.y.values=C.y.values.map(ni.degToRad)),C.z!==void 0&&(this.interpolateRotations(C.z),C.z.values=C.z.values.map(ni.degToRad));var q=this.getTimesForAllAxes(C),X=this.getKeyframeTrackValues(q,C,x);S!==void 0&&(S=S.map(ni.degToRad),S.push(z),S=new ui().fromArray(S),S=new tt().setFromEuler(S)),k!==void 0&&(k=k.map(ni.degToRad),k.push(z),k=new ui().fromArray(k),k=new tt().setFromEuler(k).inverse());for(var $=new tt,ne=new ui,_=[],se=0;se<X.length;se+=3)ne.set(X[se],X[se+1],X[se+2],z),$.setFromEuler(ne),S!==void 0&&$.premultiply(S),k!==void 0&&$.multiply(k),$.toArray(_,se/3*4);return new $1(y+".quaternion",q,_)},generateMorphTrack:function(y){var C=y.DeformPercent.curves.morph,x=C.values.map(function(k){return k/100}),S=t.getObjectByName(y.modelName).morphTargetDictionary[y.morphName];return new eA(y.modelName+".morphTargetInfluences["+S+"]",C.times,x)},getTimesForAllAxes:function(y){var C=[];return y.x!==void 0&&(C=C.concat(y.x.times)),y.y!==void 0&&(C=C.concat(y.y.times)),y.z!==void 0&&(C=C.concat(y.z.times)),C=C.sort(function(x,S){return x-S}).filter(function(x,S,k){return k.indexOf(x)==S}),C},getKeyframeTrackValues:function(y,C,x){var S=x,k=[],z=-1,q=-1,X=-1;return y.forEach(function($){if(C.x&&(z=C.x.times.indexOf($)),C.y&&(q=C.y.times.indexOf($)),C.z&&(X=C.z.times.indexOf($)),z!==-1){var ne=C.x.values[z];k.push(ne),S[0]=ne}else k.push(S[0]);if(q!==-1){var _=C.y.values[q];k.push(_),S[1]=_}else k.push(S[1]);if(X!==-1){var se=C.z.values[X];k.push(se),S[2]=se}else k.push(S[2])}),k},interpolateRotations:function(y){for(var C=1;C<y.values.length;C++){var x=y.values[C-1],S=y.values[C]-x,k=Math.abs(S);if(k>=180){for(var z=k/180,q=S/z,X=x+q,$=y.times[C-1],ne=y.times[C]-$,_=ne/z,se=$+_,K=[],me=[];se<y.times[C];)K.push(se),se+=_,me.push(X),X+=q;y.times=O(y.times,C,K),y.values=O(y.values,C,me)}}}};function a(){}a.prototype={constructor:a,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(y){this.nodeStack.push(y),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(y,C){this.currentProp=y,this.currentPropName=C},parse:function(y){this.currentIndent=0,this.allNodes=new h,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var C=this,x=y.split(/[\r\n]+/);return x.forEach(function(S,k){var z=S.match(/^[\s\t]*;/),q=S.match(/^[\s\t]*$/);if(!(z||q)){var X=S.match("^\\t{"+C.currentIndent+"}(\\w+):(.*){",""),$=S.match("^\\t{"+C.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),ne=S.match("^\\t{"+(C.currentIndent-1)+"}}");X?C.parseNodeBegin(S,X):$?C.parseNodeProperty(S,$,x[++k]):ne?C.popStack():S.match(/^[^\s\t}]/)&&C.parseNodePropertyContinued(S)}}),this.allNodes},parseNodeBegin:function(y,C){var x=C[1].trim().replace(/^"/,"").replace(/"$/,""),S=C[2].split(",").map(function(X){return X.trim().replace(/^"/,"").replace(/"$/,"")}),k={name:x},z=this.parseNodeAttr(S),q=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(x,k):x in q?(x==="PoseNode"?q.PoseNode.push(k):q[x].id!==void 0&&(q[x]={},q[x][q[x].id]=q[x]),z.id!==""&&(q[x][z.id]=k)):typeof z.id=="number"?(q[x]={},q[x][z.id]=k):x!=="Properties70"&&(x==="PoseNode"?q[x]=[k]:q[x]=k),typeof z.id=="number"&&(k.id=z.id),z.name!==""&&(k.attrName=z.name),z.type!==""&&(k.attrType=z.type),this.pushStack(k)},parseNodeAttr:function(y){var C=y[0];y[0]!==""&&(C=parseInt(y[0]),isNaN(C)&&(C=y[0]));var x="",S="";return y.length>1&&(x=y[1].replace(/^(\w+)::/,""),S=y[2]),{id:C,name:x,type:S}},parseNodeProperty:function(y,C,x){var S=C[1].replace(/^"/,"").replace(/"$/,"").trim(),k=C[2].replace(/^"/,"").replace(/"$/,"").trim();S==="Content"&&k===","&&(k=x.replace(/"/g,"").replace(/,$/,"").trim());var z=this.getCurrentNode(),q=z.name;if(q==="Properties70"){this.parseNodeSpecialProperty(y,S,k);return}if(S==="C"){var X=k.split(",").slice(1),$=parseInt(X[0]),ne=parseInt(X[1]),_=k.split(",").slice(3);_=_.map(function(se){return se.trim().replace(/^"/,"")}),S="connections",k=[$,ne],T(k,_),z[S]===void 0&&(z[S]=[])}S==="Node"&&(z.id=k),S in z&&Array.isArray(z[S])?z[S].push(k):S!=="a"?z[S]=k:z.a=k,this.setCurrentProp(z,S),S==="a"&&k.slice(-1)!==","&&(z.a=j(k))},parseNodePropertyContinued:function(y){var C=this.getCurrentNode();C.a+=y,y.slice(-1)!==","&&(C.a=j(C.a))},parseNodeSpecialProperty:function(y,C,x){var S=x.split('",').map(function(ne){return ne.trim().replace(/^\"/,"").replace(/\s/,"_")}),k=S[0],z=S[1],q=S[2],X=S[3],$=S[4];switch(z){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":$=parseFloat($);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":$=j($);break}this.getPrevNode()[k]={type:z,type2:q,flag:X,value:$},this.setCurrentProp(this.getPrevNode(),k)}};function l(){}l.prototype={constructor:l,parse:function(y){var C=new c(y);C.skip(23);var x=C.getUint32();console.info("THREE.FBXLoader: FBX binary version: "+x);for(var S=new h;!this.endOfContent(C);){var k=this.parseNode(C,x);k!==null&&S.add(k.name,k)}return S},endOfContent:function(y){return y.size()%16===0?(y.getOffset()+160+16&-16)>=y.size():y.getOffset()+160+16>=y.size()},parseNode:function(y,C){var x={},S=C>=7500?y.getUint64():y.getUint32(),k=C>=7500?y.getUint64():y.getUint32();C>=7500?y.getUint64():y.getUint32();var z=y.getUint8(),q=y.getString(z);if(S===0)return null;for(var X=[],$=0;$<k;$++)X.push(this.parseProperty(y));var ne=X.length>0?X[0]:"",_=X.length>1?X[1]:"",se=X.length>2?X[2]:"";for(x.singleProperty=k===1&&y.getOffset()===S;S>y.getOffset();){var K=this.parseNode(y,C);K!==null&&this.parseSubNode(q,x,K)}return x.propertyList=X,typeof ne=="number"&&(x.id=ne),_!==""&&(x.attrName=_),se!==""&&(x.attrType=se),q!==""&&(x.name=q),x},parseSubNode:function(y,C,x){if(x.singleProperty===!0){var S=x.propertyList[0];Array.isArray(S)?(C[x.name]=x,x.a=S):C[x.name]=S}else if(y==="Connections"&&x.name==="C"){var k=[];x.propertyList.forEach(function(se,K){K!==0&&k.push(se)}),C.connections===void 0&&(C.connections=[]),C.connections.push(k)}else if(x.name==="Properties70"){var z=Object.keys(x);z.forEach(function(se){C[se]=x[se]})}else if(y==="Properties70"&&x.name==="P"){var q=x.propertyList[0],X=x.propertyList[1],$=x.propertyList[2],ne=x.propertyList[3],_;q.indexOf("Lcl ")===0&&(q=q.replace("Lcl ","Lcl_")),X.indexOf("Lcl ")===0&&(X=X.replace("Lcl ","Lcl_")),X==="Color"||X==="ColorRGB"||X==="Vector"||X==="Vector3D"||X.indexOf("Lcl_")===0?_=[x.propertyList[4],x.propertyList[5],x.propertyList[6]]:_=x.propertyList[4],C[q]={type:X,type2:$,flag:ne,value:_}}else C[x.name]===void 0?typeof x.id=="number"?(C[x.name]={},C[x.name][x.id]=x):C[x.name]=x:x.name==="PoseNode"?(Array.isArray(C[x.name])||(C[x.name]=[C[x.name]]),C[x.name].push(x)):C[x.name][x.id]===void 0&&(C[x.name][x.id]=x)},parseProperty:function(y){var C=y.getString(1);switch(C){case"C":return y.getBoolean();case"D":return y.getFloat64();case"F":return y.getFloat32();case"I":return y.getInt32();case"L":return y.getInt64();case"R":var x=y.getUint32();return y.getArrayBuffer(x);case"S":var x=y.getUint32();return y.getString(x);case"Y":return y.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var S=y.getUint32(),k=y.getUint32(),z=y.getUint32();if(k===0)switch(C){case"b":case"c":return y.getBooleanArray(S);case"d":return y.getFloat64Array(S);case"f":return y.getFloat32Array(S);case"i":return y.getInt32Array(S);case"l":return y.getInt64Array(S)}typeof Tp>"u"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var q=new Tp.Inflate(new Uint8Array(y.getArrayBuffer(z))),X=new c(q.decompress().buffer);switch(C){case"b":case"c":return X.getBooleanArray(S);case"d":return X.getFloat64Array(S);case"f":return X.getFloat32Array(S);case"i":return X.getInt32Array(S);case"l":return X.getInt64Array(S)}default:throw new Error("THREE.FBXLoader: Unknown property type "+C)}}};function c(y,C){this.dv=new DataView(y),this.offset=0,this.littleEndian=C!==void 0?C:!0}c.prototype={constructor:c,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(y){this.offset+=y},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(y){for(var C=[],x=0;x<y;x++)C.push(this.getBoolean());return C},getUint8:function(){var y=this.dv.getUint8(this.offset);return this.offset+=1,y},getInt16:function(){var y=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,y},getInt32:function(){var y=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,y},getInt32Array:function(y){for(var C=[],x=0;x<y;x++)C.push(this.getInt32());return C},getUint32:function(){var y=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,y},getInt64:function(){var y,C;return this.littleEndian?(y=this.getUint32(),C=this.getUint32()):(C=this.getUint32(),y=this.getUint32()),C&2147483648?(C=~C&4294967295,y=~y&4294967295,y===4294967295&&(C=C+1&4294967295),y=y+1&4294967295,-(C*4294967296+y)):C*4294967296+y},getInt64Array:function(y){for(var C=[],x=0;x<y;x++)C.push(this.getInt64());return C},getUint64:function(){var y,C;return this.littleEndian?(y=this.getUint32(),C=this.getUint32()):(C=this.getUint32(),y=this.getUint32()),C*4294967296+y},getFloat32:function(){var y=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,y},getFloat32Array:function(y){for(var C=[],x=0;x<y;x++)C.push(this.getFloat32());return C},getFloat64:function(){var y=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,y},getFloat64Array:function(y){for(var C=[],x=0;x<y;x++)C.push(this.getFloat64());return C},getArrayBuffer:function(y){var C=this.dv.buffer.slice(this.offset,this.offset+y);return this.offset+=y,C},getString:function(y){for(var C=[],x=0;x<y;x++)C[x]=this.getUint8();var S=C.indexOf(0);return S>=0&&(C=C.slice(0,S)),Jl.decodeText(new Uint8Array(C))}};function h(){}h.prototype={constructor:h,add:function(y,C){this[y]=C}};function d(y){var C="Kaydara FBX Binary  \0";return y.byteLength>=C.length&&C===D(y,0,C.length)}function u(y){var C=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],x=0;function S(q){var X=y[q-1];return y=y.slice(x+q),x++,X}for(var k=0;k<C.length;++k){var z=S(1);if(z===C[k])return!1}return!0}function f(y){var C=/FBXVersion: (\d+)/,x=y.match(C);if(x){var S=parseInt(x[1]);return S}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function m(y){return y/46186158e3}var g=[];function v(y,C,x,S){var k;switch(S.mappingType){case"ByPolygonVertex":k=y;break;case"ByPolygon":k=C;break;case"ByVertice":k=x;break;case"AllSame":k=S.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+S.mappingType)}S.referenceType==="IndexToDirect"&&(k=S.indices[k]);var z=k*S.dataSize,q=z+S.dataSize;return M(g,S.buffer,z,q)}var A=new ui,w=new R;function P(y){var C=new Xe,x=new Xe,S=new Xe,k=new Xe,z=new Xe,q=new Xe,X=new Xe,$=new Xe,ne=new Xe,_=new Xe,se=new Xe,K=y.inheritType?y.inheritType:0;if(y.translation&&C.setPosition(w.fromArray(y.translation)),y.preRotation){var me=y.preRotation.map(ni.degToRad);me.push(y.eulerOrder),x.makeRotationFromEuler(A.fromArray(me))}if(y.rotation){var me=y.rotation.map(ni.degToRad);me.push(y.eulerOrder),S.makeRotationFromEuler(A.fromArray(me))}if(y.postRotation){var me=y.postRotation.map(ni.degToRad);me.push(y.eulerOrder),k.makeRotationFromEuler(A.fromArray(me))}y.scale&&z.scale(w.fromArray(y.scale)),y.scalingOffset&&X.setPosition(w.fromArray(y.scalingOffset)),y.scalingPivot&&q.setPosition(w.fromArray(y.scalingPivot)),y.rotationOffset&&$.setPosition(w.fromArray(y.rotationOffset)),y.rotationPivot&&ne.setPosition(w.fromArray(y.rotationPivot)),y.parentMatrixWorld&&(_=y.parentMatrixWorld);var De=x.multiply(S).multiply(k),he=new Xe;_.extractRotation(he);var je=new Xe;je.copyPosition(_);var ze=new Xe;ze.getInverse(he).multiply(_);var Pe=new Xe;if(K===0)Pe.copy(he).multiply(De).multiply(ze).multiply(z);else if(K===1)Pe.copy(he).multiply(ze).multiply(De).multiply(z);else{var Le=new Xe().getInverse(z),ie=new Xe().multiply(ze).multiply(Le);Pe.copy(he).multiply(De).multiply(ie).multiply(z)}var Me=new Xe().getInverse(ne),Fe=new Xe().getInverse(q),Ie=new Xe;Ie.copy(C).multiply($).multiply(ne).multiply(x).multiply(S).multiply(k).multiply(Me).multiply(X).multiply(q).multiply(z).multiply(Fe);var Ve=new Xe().copyPosition(Ie),ue=new Xe().copy(_).multiply(Ve);return se.copyPosition(ue),Ie=new Xe().multiply(se).multiply(Pe),Ie}function I(y){y=y||0;var C=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return y===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),C[0]):C[y]}function j(y){var C=y.split(",").map(function(x){return parseFloat(x)});return C}function D(y,C,x){return C===void 0&&(C=0),x===void 0&&(x=y.byteLength),Jl.decodeText(new Uint8Array(y,C,x))}function T(y,C){for(var x=0,S=y.length,k=C.length;x<k;x++,S++)y[S]=C[x]}function M(y,C,x,S){for(var k=x,z=0;k<S;k++,z++)y[z]=C[k];return y}function O(y,C,x){return y.slice(0,C).concat(x).concat(y.slice(C))}return n})();function Zx(i){let e=1/0,t=-1/0,n=1/0,o=-1/0;return i.forEach(s=>{e=Math.min(e,s.x),t=Math.max(t,s.x),n=Math.min(n,s.y),o=Math.max(o,s.y)}),{x:(e+t)/2,y:(n+o)/2}}const Jx="data:image/png;base64,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";function Kx(){const i=document.createElement("div"),e=document.createElement("i"),t=document.createElement("span");return i.appendChild(e),i.appendChild(t),i.style.position="relative",i.style.width="100%",i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="center",i.style.marginTop=`${150/16}rem`,i.style.opacity="0",i.style.transition="opacity 1000ms linear",e.style.display="block",e.style.width=`${134/16}rem`,e.style.height=`${22/16}rem`,e.style.backgroundSize="100%",e.style.backgroundRepeat="no-repeat",e.style.backgroundImage=`url(${Jx})`,t.style.marginTop=`${10/16}rem`,t.style.fontSize=`${16/16}rem`,t.style.color="#fff",t.style.opacity="0.7",t.style.textShadow="0 2px 16px rgb(22 34 83 / 24%)",t.style.fontWeight="bold",{appendTo(n){n.appendChild(i)},dispose(){i.remove()},setRoom(n){t.innerHTML=n.name+" "+Math.floor(n.size/1e6)+"㎡"},show(){i.style.opacity="1"},hide(){i.style.opacity="0"}}}const _x=new Ao;function Wo(i){return ee(this,null,function*(){return new Promise((e,t)=>{_x.load(i,e,void 0,t)}).then(e=>(e.encoding=on,e.minFilter=Wa,e.magFilter=Wa,e))})}function uv(i){return ee(this,null,function*(){return Wo(i).then(e=>{const t=i.startsWith("data:")?i.includes("png"):new URL(i,location.href).pathname.toLowerCase().endsWith(".png");return{texture:e,transparent:t}})})}const Ia={userAction:!0};class $x extends Co{constructor(e,t){super(e,t),p(this,"state",{visible:!0,enabled:!0,config:{compassImageUrl:Jh,entryDoorImageUrl:Kh}}),p(this,"data"),p(this,"group",new Et),p(this,"roomInfoInstance"),p(this,"roomInfoWrapperInstance"),p(this,"compassMeshTween"),p(this,"compassMesh"),p(this,"logoMesh"),p(this,"logoMeshTween"),p(this,"entryDoorMesh"),p(this,"dispose",()=>{var n,o,s,r;this.five.scene.remove(this.group),this.group.remove(...this.group.children),(o=(n=this.compassMesh)==null?void 0:n.material.map)==null||o.dispose(),(r=(s=this.entryDoorMesh)==null?void 0:s.material.map)==null||r.dispose(),this.five.off("dispose",this.dispose),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("panoWillArrive",this.onFivePanoWillArrive),this.five.off("cameraDirectionUpdate",this.onFiveCameraDirectionUpdate)}),p(this,"_addEventListener",()=>{this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("panoWillArrive",this.onFivePanoWillArrive),this.five.on("modeChange",this.onFiveModeChange),this.five.on("cameraDirectionUpdate",this.onFiveCameraDirectionUpdate)}),p(this,"_removeEventListener",()=>{this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("panoWillArrive",this.onFivePanoWillArrive),this.five.off("modeChange",this.onFiveModeChange),this.five.off("cameraDirectionUpdate",this.onFiveCameraDirectionUpdate)}),p(this,"_enable",()=>{this.five.scene.add(this.group),this.init(),this.onFivePanoArrived(this.five.panoIndex||0),this._addEventListener()}),p(this,"_disable",()=>{this._clearCompassIfNeed(),this._clearEntryDoorIfNeed(),this.five.scene.remove(this.group),this._removeEventListener()}),p(this,"_toggleVisible",()=>{this.group.visible=this.state.visible,this.five.needsRender=!0}),p(this,"_clearCompassIfNeed",()=>{var n;this.compassMesh&&(this.group.remove(this.compassMesh),(n=this.compassMesh.material.map)==null||n.dispose(),this.compassMesh=null)}),p(this,"_clearLogoIfNeed",()=>{var n;this.logoMesh&&(this.group.remove(this.logoMesh),(n=this.logoMesh.material.map)==null||n.dispose(),this.logoMesh=null)}),p(this,"_clearEntryDoorIfNeed",()=>{var n;this.entryDoorMesh&&(this.group.remove(this.entryDoorMesh),(n=this.entryDoorMesh.material.map)==null||n.dispose(),this.entryDoorMesh=null),this.roomInfoInstance&&(this.roomInfoInstance.dispose(),this.roomInfoInstance=null),this.roomInfoWrapperInstance&&(this.roomInfoWrapperInstance.dispose(),this.roomInfoWrapperInstance=null)}),p(this,"onFivePanoWillArrive",n=>{var o,s,r,a;n!==this.five.panoIndex&&((o=this.compassMeshTween)==null||o.dispose(),(s=this.compassMesh)==null||s.material.setValues({opacity:0}),(r=this.logoMeshTween)==null||r.dispose(),(a=this.logoMesh)==null||a.material.setValues({opacity:0}))}),p(this,"onFivePanoArrived",n=>{var o,s,r,a,l,c,h,d;const u=(r=(s=(o=this.five.work)==null?void 0:o.observers)==null?void 0:s[n])==null?void 0:r.standingPosition;if(this.compassMesh&&u&&(this.compassMesh.position.copy(u.clone().setY(u.y+.01)),this.compassMesh.material.opacity===0&&((a=this.compassMeshTween)==null||a.dispose(),this.compassMeshTween=Fr(1e3).onUpdate(({progress:f})=>{var m;(m=this.compassMesh)==null||m.material.setValues({opacity:f}),this.five.needsRender=!0}).play())),this.logoMesh&&u&&(this.logoMesh.position.copy(u.clone().setY(u.y+.011)),this.logoMesh.material.opacity===0&&((l=this.logoMeshTween)==null||l.dispose(),this.logoMeshTween=Fr(1e3).onUpdate(({progress:f})=>{var m;(m=this.logoMesh)==null||m.material.setValues({opacity:f}),this.five.needsRender=!0}).play())),this.entryDoorMesh){const f=new R(this.data.entrance.position.x,this.data.entrance.position.y,this.data.entrance.position.z).clone().setY(u.y).sub(u).normalize(),m=u.clone().add(f.clone().multiplyScalar(.7)).setY(u.y+.01);this.entryDoorMesh.rotation.z=new R(0,0,-1).angleTo(f),this.entryDoorMesh.position.copy(m),((c=this.data)==null?void 0:c.room_observers[n].room.type)===1?(h=this.entryDoorMesh)==null||h.material.setValues({opacity:1}):(d=this.entryDoorMesh)==null||d.material.setValues({opacity:0})}this.roomInfoInstance&&this.roomInfoWrapperInstance&&u&&(this.roomInfoWrapperInstance.css3DObject.position.copy(u.clone().setY(u.y+.01)),this.roomInfoInstance.setRoom(this.data.room_observers[n].room)),this.five.needsRender=!0}),p(this,"onFiveCameraDirectionUpdate",({longitude:n,latitude:o})=>{var s,r;this.roomInfoWrapperInstance&&(this.roomInfoWrapperInstance.css3DObject.rotation.z=n,o>.66&&this.five.getCurrentState().mode==="Panorama"?(s=this.roomInfoInstance)==null||s.show():(r=this.roomInfoInstance)==null||r.hide())}),p(this,"onFiveModeChange",(n,o,s,r,a)=>{n!==o&&this.setState({visible:n===xh.Mode.Panorama},{userAction:a})}),this.five.scene.add(this.group),this.five.once("dispose",this.dispose),this.setState({visible:!0,enabled:!0,config:W(W({},this.state.config),t||{})})}enable(e=Ia){this.setState({enabled:!0},e)}disable(e=Ia){this.setState({enabled:!1},e)}show(e=Ia){if(this.state.enabled)return this.setState({visible:!0},e),Promise.resolve()}hide(e=Ia){if(this.state.enabled)return this.setState({visible:!1},e),Promise.resolve()}setState(e,t={userAction:!0}){var n,o;const s=JSON.parse(JSON.stringify(this.state));this.state={visible:(n=e.visible)!=null?n:s.visible,enabled:(o=e.enabled)!=null?o:s.enabled,config:W(W({},s.config),e.config||{})},this.hooks.emit("stateChange",{state:this.state,prevState:s,userAction:t.userAction}),e.enabled===!0&&(this._enable(),this.hooks.emit("enable",t)),e.enabled===!1&&(this._disable(),this.hooks.emit("disable",t)),e.visible===!1&&(this._toggleVisible(),this.hooks.emit("hide",t)),e.visible===!0&&(this._toggleVisible(),this.hooks.emit("show",t)),e.config&&this.init()}load(e,t,n=!0){return ee(this,null,function*(){const o=yield this.formatData(e);JSON.stringify(this.data)!==JSON.stringify(o)&&(this.hooks.emit("dataChange",o,this.data),this.data=W({},o),this.init(),t&&this.setState(t,{userAction:n}),this.hooks.emit("dataLoaded",this.data))})}formatData(e){return e.version&&e.data?Promise.resolve(e.data):Promise.resolve(e)}init(){return ee(this,null,function*(){var e,t,n,o;const s=(t=(e=this.data)==null?void 0:e.north_rad)!=null?t:null;this._clearCompassIfNeed(),s!==null&&(this.compassMesh=yield this.loadCompassMesh(),this.compassMesh&&(this.compassMesh.rotateX(-Math.PI/2),this.compassMesh.rotateZ(s-Math.PI/2),this.group.add(this.compassMesh))),this._clearLogoIfNeed(),this.logoMesh=yield this.loadLogoMesh(),this.logoMesh&&(this.logoMesh.rotateX(-Math.PI/2),this.group.add(this.logoMesh));const r=(o=(n=this.data)==null?void 0:n.entrance)!=null?o:null;this._clearEntryDoorIfNeed(),r!==null&&(this.entryDoorMesh=yield this.loadEntryDoorMesh(),this.roomInfoWrapperInstance=this.loadRoomInfo(),this.roomInfoInstance=Kx(),this.entryDoorMesh.rotateX(-Math.PI/2),this.roomInfoWrapperInstance&&this.roomInfoInstance.appendTo(this.roomInfoWrapperInstance.container),this.group.add(this.entryDoorMesh)),this.onFivePanoArrived(this.five.panoIndex||0),this.five.needsRender=!0})}loadCompassMesh(){return ee(this,null,function*(){const e=this.state.config.compassImageUrl,t=yield Wo(e),n=new no(.7,32),o=new Ze({map:t,transparent:!0,opacity:0,depthTest:!1}),s=new We(n,o);return s.name="pano-compass-mesh",s})}loadLogoMesh(){return ee(this,null,function*(){if(!this.state.config.logoURL)return;const e=this.state.config.logoURL,t=yield Wo(e);t.minFilter=Wa,t.magFilter=Wa;const n=new Lc(.4,.4),o=new Ze({map:t,opacity:0,transparent:!0,depthTest:!1}),s=new We(n,o);return s.name="pano-compass-logo-mesh",s})}loadEntryDoorMesh(){return ee(this,null,function*(){const e=this.state.config.entryDoorImageUrl,t=yield Wo(e),n=new ea(.2,.16),o=new Ze({map:t,transparent:!0,opacity:.8,depthTest:!1}),s=new We(n,o);return s.name="pano-compass-entry-door",s})}loadRoomInfo(){const e=[new R(-.7,0,-.7),new R(.7,0,-.7),new R(.7,0,.7),new R(-.7,0,.7)];return Xh(this.five).create3DDomContainer(e)}}const iD=(i,e)=>new $x(i,e),e5=1,t5=3,i5=new Ye(16777215),n5=new Ye(6522623),o5=new Ye(16777215),s5=new Ye(6522623),r5=6,a5=8,l5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",pv=new Ao().load(l5),c5={pointTexture:pv,pointSize:r5,lineWidth:e5,lineColor:i5,pointColor:o5,lineRenderOrder:20,pointsRenderOrder:20},h5={pointTexture:pv,pointSize:a5,lineWidth:t5,lineColor:n5,pointColor:s5,lineRenderOrder:10,pointsRenderOrder:10};function d5(i,e,t){var n,o,s,r,a;const l=(n=t==null?void 0:t.lineWidth)!=null?n:2,c=(o=t==null?void 0:t.lineColor)!=null?o:new Ye(16777215),h=(s=t==null?void 0:t.pointSize)!=null?s:5,d=(r=t==null?void 0:t.lineRenderOrder)!=null?r:10,u=(a=t==null?void 0:t.lineRenderOrder)!=null?a:20,f=new Yb(i,e);f.setMaterial({linewidth:l,color:c}),f.line.material.depthTest=!1,f.line.material.transparent=!0,f.line.renderOrder=d,f.points.renderOrder=u;const m=f.points.material;return m.depthTest=!1,m.size=h,t!=null&&t.pointColor&&m.color.set(t.pointColor).convertSRGBToLinear(),t!=null&&t.pointTexture&&(m.map=t.pointTexture),f}function Op(i,e){const[t,n]=i.points,o=e==="light"?h5:c5,s=d5(t.position,n.position,o);return s.name="normalLine_"+i.id,s}function Zo(i){const{x:e,y:t,z:n}=i;return!(Math.abs(e)>1||Math.abs(t)>1||Math.abs(n)>1)}function Na(i){const{z:e}=i;return!(Math.abs(e)>1)}function u5(i){const e=document.createElement("div");return e.setAttribute("style","backdrop-filter: blur(4px);-webkit-backdrop-filter: blur(4px);-webkit-tap-highlight-color: rgba(0,0,0,0);"),e.style.width="max-content",e.style.padding="3px 6px",e.style.lineHeight="1",e.style.textAlign="center",e.style.transform="translate(-50%, -50%)",e.style.fontSize="14px",e.style.color="#fff",e.style.cursor="pointer",e.style.userSelect="none",i!=null&&i.style&&Object.assign(e.style,i==null?void 0:i.style),e}function p5(i){const e=document.createElement("div");return i!=null&&i.id&&(e.id=i==null?void 0:i.id),e.classList.add("five-plugin-measure__distance"),e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0",e.style.transform="translate(-10px, -10px)",e.style.transformOrigin="left top",i!=null&&i.style&&Object.assign(e.style,i.style),e}class fv{constructor(e){p(this,"ndcPosition"),p(this,"contentDom"),p(this,"containerDom"),p(this,"params"),p(this,"canSelected"),p(this,"handleClick",t=>{var n,o;(o=(n=this.params).clickCallback)==null||o.call(n,t,this)}),this.params=e,this.contentDom=u5({style:e.contentStyle}),this.containerDom=p5({style:e.containerStyle}),this.setCanSelect(!0)}setCanSelect(e){this.canSelected=e,this.containerDom.style.pointerEvents=e?"all":"none"}highlight(){this.contentDom.style.border="0.5px solid #95AEFF",this.contentDom.style.background="linear-gradient(90deg, #95AEFF 0%, #6386FF 100%)"}unHighlight(){this.contentDom.style.border="0.5px solid rgba(255,255,255,0.6)",this.contentDom.style.background="rgba(195,195,195,0.70)"}appendTo(e){return e.appendChild(this.containerDom),this.containerDom.addEventListener("click",this.handleClick),this}remove(){this.contentDom.removeEventListener("click",this.handleClick),this.containerDom.remove()}show(){this.containerDom.style.visibility="visible"}hide(){this.containerDom.style.visibility="hidden"}tempHide(){this.containerDom.style.opacity="0"}tempShow(){this.containerDom.style.opacity="1"}updateDomPosition(e){if(!this.ndcPosition){this.tempHide();return}const t=e.getElement();if(!t)return;const n=t.clientWidth,o=t.clientHeight,s=this.ndcPosition.clone().project(e.camera);if(!Na(s)){this.tempHide();return}const r=(s.x+1)/2*n,a=-(s.y-1)/2*o;this.containerDom.style.transform=`translate(${r}px, ${a}px)`,this.tempShow()}}class f5 extends fv{constructor(e){var t;if(e.contentStyle=pe(W({},e.contentStyle),{background:"#FFFFFF",color:"#041066",fontFamily:"Arial-BoldMT",fontWeight:"BoldMT",letterSpacing:"0",lineHeight:"20px",padding:"2px 8px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center","--distance-scale":"1",transition:"font-size 0.5s ease"}),super(e),p(this,"line"),p(this,"lastFOV"),p(this,"cameraUpdateHandler",null),p(this,"onPanoChange",()=>{const n=this.getFiveInstance();n&&setTimeout(()=>this.update(n),100)}),this.line=e.line,(t=this.params.userDistanceItem)!=null&&t.element?this.containerDom.appendChild(this.params.userDistanceItem.element):this.containerDom.appendChild(this.contentDom),!document.getElementById("PanoMeasurePluginFontSizes")){const n=document.createElement("style");n.id="PanoMeasurePluginFontSizes",document.head.appendChild(n),n.innerHTML=`
        .pano-measure-item-content {
          transition: font-size 0.5s ease; /* Smooth transition for font size */
        }
        
        /* sm screen */
        @media screen and (max-width: 499px) {
          .pano-measure-item-content {
            font-size: calc(12px + (14px - 12px) * var(--distance-scale));
          }
        }
        
        /* md screen */
        @media screen and (min-width: 500px) and (max-width: 929px) {
          .pano-measure-item-content {
            font-size: calc(12px + (14px - 12px) * var(--distance-scale));
          }
        }
        
        /* lg screen */
        @media screen and (min-width: 930px) and (max-width: 1365px) {
          .pano-measure-item-content {
            font-size: calc(14px + (16px - 14px) * var(--distance-scale));
          }
        }
        
        /* xl screen */
        @media screen and (min-width: 1366px) and (max-width: 2549px) {
          .pano-measure-item-content {
            font-size: calc(14px + (16px - 14px) * var(--distance-scale));
          }
        }
        
        /* xxl screen */
        @media screen and (min-width: 2550px) {
          .pano-measure-item-content {
            font-size: calc(0.875rem + (1rem - 0.875rem) * var(--distance-scale));
          }
        }
      `}this.contentDom.classList.add("pano-measure-item-content")}appendTo(e){if(super.appendTo(e),!this.cameraUpdateHandler){this.cameraUpdateHandler=()=>this.onCameraUpdate();const t=this.getFiveInstance();t&&(t.on("cameraUpdate",this.cameraUpdateHandler),t.on("cameraFovUpdate",this.cameraUpdateHandler),t.on("panoArrived",this.onPanoChange))}return this}remove(){if(this.cameraUpdateHandler){const e=this.getFiveInstance();e&&(e.off("cameraUpdate",this.cameraUpdateHandler),e.off("cameraFovUpdate",this.cameraUpdateHandler),e.off("panoArrived",this.onPanoChange)),this.cameraUpdateHandler=null}super.remove()}getCurrentContent(){var e,t,n,o;if(this.line.points.length<2)return"";const[s,r]=this.line.points,a=s.position.clone().distanceTo(r.position),l=(t=this.line.text)!=null?t:(e=this.line.model.config)==null?void 0:e.defaultText,c=(o=(n=this.line.model.config)==null?void 0:n.getDistanceText)==null?void 0:o.call(n,a),h=l??c;return h??a.toFixed(2)+"m"}update(e){var t;if(this.line.mesh.visible===!1){this.hide();return}const n=e.getElement();if(!n)return;const o=n.clientWidth,s=n.clientHeight,r=o/2,a=s/2;if(this.line.points.length<2)return;const[l,c]=this.line.points.map(O=>O.position.clone().applyMatrix4(this.line.mesh.matrixWorld)),h=l.clone().project(e.camera),d=c.clone().project(e.camera),u=qt(l,c).clone().project(e.camera),f=new Qe(h.x*r,h.y*a),m=new Qe(d.x*r,d.y*a),g=f.distanceTo(m);if((()=>!(Math.abs(h.z)>1||Math.abs(d.z)>1||!Na(h)&&!Na(d)||!Na(u)||g===0))()===!1){this.hide();return}const v=qt(l,c).distanceTo(e.camera.position),A=e.camera.fov||60,w=2*Math.tan(.5*A/180*Math.PI),P=Math.max(Math.min(1-w*v/40,1),0);this.contentDom.style.setProperty("--distance-scale",P.toString());const I=(u.x+1)/2*o,j=-(u.y-1)/2*s,D=-(Math.atan((f.y-m.y)/(f.x-m.x))*180)/Math.PI,T=this.containerDom.parentElement&&this.contentDom.clientWidth>g?-20:0;this.containerDom.style.transform=`translate(${I}px, ${j}px) rotate(${D}deg) translateY(${T}px)`,this.show(),(t=this.params.userDistanceItem)==null||t.update({line:this.line,polyline:this.line.getPolyline()});const M=this.getCurrentContent();this.contentDom.innerText=M}getFiveInstance(){var e,t;return(t=(e=this.line.model)==null?void 0:e.config)==null?void 0:t.five}onCameraUpdate(){const e=this.getFiveInstance();e!=null&&e.camera&&this.lastFOV!==e.camera.fov&&(this.lastFOV=e.camera.fov,this.update(e))}}let Us=class mv{constructor(e,t,n){p(this,"id"),p(this,"selected",!1),p(this,"text"),p(this,"type","line"),p(this,"model"),p(this,"mesh"),p(this,"points"),p(this,"lightMesh"),p(this,"hook"),p(this,"distanceItem"),p(this,"polyline"),p(this,"visible");var o;if(this.id=Bt(),this.model=n,e.id===t.id)throw new Error("无效的线段, 一个点无法构成线段");typeof n.config.defaultText=="string"&&(this.text=n.config.defaultText),this.hook=new Eh,this.points=[e,t],this.mesh=Op(this,"normal"),this.lightMesh=Op(this,"light"),this.distanceItem=new f5({line:this,clickCallback:()=>this.hook.emit("selected",this),userDistanceItem:(o=this.model.config)!=null&&o.userDistanceItemCreator?this.model.config.userDistanceItemCreator():void 0})}hide(){this.visible&&(this.visible=!1,this.mesh.visible=!1,this.distanceItem.hide())}show(){this.visible||(this.visible=!0,this.mesh.visible=!0,this.distanceItem.show())}setPoints(e,t){this.points[0].position.copy(e),this.points[1].position.copy(t),this.mesh.setPoints(e,t)}remove(){this.mesh.parent&&this.mesh.parent.remove(this.mesh),this.distanceItem.remove()}clear(){this.selected=!1,this.polyline=void 0}isEmpty(){return this.points.length===0}getPolyline(){if(this.polyline)return this.polyline;const e=this.model.polylines.find(t=>t.lines.includes(this));if(e)return this.polyline=e,e}findAnotherPoint(e){return this.points.find(({id:t})=>t!==e.id)}setText(e){this.text=e,this.hook.emit("textChanged",e)}toJSON(){return this.toJson()}toJson(){return{id:this.id,points:this.points.map(e=>e.toJson()),text:this.text}}clone(){const e=new mv(this.points[0].clone(),this.points[1].clone(),this.model);return e.text=this.text,e}},Li=class gv{constructor(e){if(p(this,"id"),p(this,"position"),p(this,"type","point"),this.id=Bt(),this.position=new R,Array.isArray(e))this.position.fromArray(e);else if(typeof e=="object"&&e.isVector3)this.position.copy(e);else throw new Error("position must be Vector3 or number[]")}toJson(){return{id:this.id,position:this.position.toArray()}}clone(){return new gv(this.position)}};const Ma=i=>i.preventDefault();let Rl=class{constructor(i){p(this,"model"),p(this,"five"),p(this,"group"),p(this,"config"),p(this,"dashed"),p(this,"perpendicularDashed"),p(this,"disposed",!1),p(this,"isMobile"),p(this,"editParams"),p(this,"magnifierParams"),p(this,"mouseGroup"),p(this,"container"),p(this,"hook"),p(this,"magnifier"),p(this,"userDistanceItemCreator"),p(this,"pointSelectorConfig"),p(this,"workUtil"),p(this,"getMeasureType"),p(this,"updateDistanceUI",()=>{this.dashed.distanceItem.update(this.five),this.model.getAllLines().forEach(s=>s.distanceItem.update(this.five))}),p(this,"updateAreaUI",()=>{this.dashed.distanceItem.update(this.five),this.model.getAllAreas().forEach(s=>{s.areaItem.updateArea(this.five),s.polyline.lines.forEach(r=>{r.distanceItem.update(this.five)})})});var e,t,n;this.five=i.five,this.hook=i.hook,this.model=i.model,this.getMeasureType=i.getMeasureType,this.config=i.config,this.editParams=i.editParams,this.magnifierParams=i.magnifierParams,this.magnifier=i.magnifier,this.pointSelectorConfig=pe(W({},i.pointSelectorConfig),{helper:W({magnifierParams:i.magnifierParams},(e=i.pointSelectorConfig)==null?void 0:e.helper)}),this.container=i.container,this.isMobile=(n=(t=i.openParams)==null?void 0:t.isMobile)!=null?n:!1,this.workUtil=i.workUtil,this.userDistanceItemCreator=i.userDistanceItemCreator,this.group=i.group,this.mouseGroup=i.mouseGroup,this.dashed=new Us(new Li([0,0,0]),new Li([0,0,0]),this.model),this.dashed.distanceItem.setCanSelect(!1),this.dashed.mesh.setMaterial({dashed:!0,dashScale:100}),this.dashed.mesh.name="dashLine",this.perpendicularDashed=new Us(new Li([0,0,0]),new Li([0,0,0]),this.model),this.perpendicularDashed.distanceItem.setCanSelect(!1),this.perpendicularDashed.mesh.setMaterial({dashed:!0,dashScale:40,color:new Ye(10218089)}),this.perpendicularDashed.mesh.name="perpendicularDashLine";const o=this.five.getElement();o&&(o.addEventListener("touchstart",Ma),o.addEventListener("contextmenu",Ma))}get currentMeasureType(){return this.getMeasureType()}removeLine(i){this.group.remove(i.mesh,i.lightMesh),i.distanceItem.remove(),this.five.needsRender=!0}updateMouseGroup(i,e){if(!i)return this.mouseGroup;if(this.mouseGroup.position.copy(i.point),e)this.mouseGroup.quaternion.copy(e.quaternion);else if(i.face){const t=i.face.normal.clone().multiplyScalar(.05),n=i.point.clone().add(t).clone().add(t);this.mouseGroup.lookAt(n)}return this.mouseGroup}dispose(){var i;this.disposed=!0,(i=this.magnifier)==null||i.disable(),this.model.getAllLines().forEach(t=>this.removeLine(t)),this.model.areas.forEach(t=>t.remove());const e=this.five.getElement();e&&(e.removeEventListener("touchstart",Ma),e.removeEventListener("contextmenu",Ma))}},Xs=class{constructor(i){p(this,"id",Bt()),p(this,"lines",[]),p(this,"visiblePanoIndexes"),p(this,"visibleFiveMode"),p(this,"model"),p(this,"type","polyline"),p(this,"hook",new Eh),this.model=i.model}get points(){const i=new Set;return this.lines.forEach(e=>{i.add(e.points[0]),i.add(e.points[1])}),Array.from(i)}addLine(i){if(this.includes(i)){console.error(new Error("不能重复添加线段"));return}const e=this.getLastPoint(),t=e&&i.findAnotherPoint(e);if(e&&!t){console.error(new Error("传入线段无法与当前折线进行连接"));return}this.lines.push(i),this.hook.emit("lineAdded",i)}removeLine(i){if(this.lines.length!==0){if(!this.isLastLine(i)){console.error(new Error("传入线段不是当前折线的最后一段"));return}this.lines.pop()&&this.hook.emit("lineRemoved",i)}}isLastLine(i){const e=this.getLastLine();return e?i.id===e.id:!1}getLastLine(){return this.lines.slice(-1)[0]}getPointLength(){return this.lines.length+1}clear(){const i=this.lines.slice();this.lines.length=0,i.reduceRight((e,t)=>this.hook.emit("lineRemoved",t),void 0)}overlapWith(i){return i.type==="point"?this.includes(i):i.type==="line"?i.points.some(e=>this.includes(e)):i.type==="polyline"?i.points.some(e=>this.includes(e)):!0}includes(i){return i.type==="point"?this.points.find(({id:e})=>e===i.id)!==void 0:i.type==="line"?this.lines.find(({id:e})=>e===i.id)!==void 0:!1}isEmpty(){return this.lines.length===0}getLastPoint(){return this.points.slice(-1)[0]}toJSON(){return this.toJson()}toJson(){return{id:this.id,lines:this.lines.map(i=>i.toJson()),visiblePanoIndexes:this.visiblePanoIndexes,visibleFiveMode:this.visibleFiveMode}}getPointByID(i){return this.points.find(({id:e})=>e===i)}fromJson(i){this.clear(),this.id=i.id;const{getPoint:e}=n(),t=i.lines.map(o=>{const[s,r]=o.points,a=e(s),l=e(r);if(!a||!l)throw new Error("线上的点不存在");const c=new Us(a,l,this.model);return c.id=o.id,c.text=o.text,c});this.lines.push(...t),this.visiblePanoIndexes=i.visiblePanoIndexes,this.visibleFiveMode=i.visibleFiveMode;function n(){const o=new Map;function s(a){const l=o.get(a.id);if(l)return l;const c=new Li(a.position);return c.id=a.id,o.set(a.id,c),c}function r(){return Array.from(o.values())}return{getPoint:s,getAllPoints:r}}return this}replace(i){this.id=i.id,this.clear(),this.lines.push(...i.lines)}};var dl={},m5={get exports(){return dl},set exports(i){dl=i}};m5.exports=Bl;dl.default=Bl;function Bl(i,e,t){t=t||2;var n=e&&e.length,o=n?e[0]*t:i.length,s=vv(i,0,o,t,!0),r=[];if(!s||s.next===s.prev)return r;var a,l,c,h,d,u,f;if(n&&(s=b5(i,e,s,t)),i.length>80*t){a=c=i[0],l=h=i[1];for(var m=t;m<o;m+=t)d=i[m],u=i[m+1],d<a&&(a=d),u<l&&(l=u),d>c&&(c=d),u>h&&(h=u);f=Math.max(c-a,h-l),f=f!==0?32767/f:0}return Qr(s,r,t,a,l,f,0),r}function vv(i,e,t,n,o){var s,r;if(o===Kc(i,e,t,n)>0)for(s=e;s<t;s+=n)r=Rp(s,i[s],i[s+1],r);else for(s=t-n;s>=e;s-=n)r=Rp(s,i[s],i[s+1],r);return r&&Hl(r,r.next)&&(Xr(r),r=r.next),r}function Jo(i,e){if(!i)return i;e||(e=i);var t=i,n;do if(n=!1,!t.steiner&&(Hl(t,t.next)||wt(t.prev,t,t.next)===0)){if(Xr(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Qr(i,e,t,n,o,s,r){if(i){!r&&s&&E5(i,n,o,s);for(var a=i,l,c;i.prev!==i.next;){if(l=i.prev,c=i.next,s?v5(i,n,o,s):g5(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(c.i/t|0),Xr(i),i=c.next,a=c.next;continue}if(i=c,i===a){r?r===1?(i=A5(Jo(i),e,t),Qr(i,e,t,n,o,s,2)):r===2&&y5(i,e,t,n,o,s):Qr(Jo(i),e,t,n,o,s,1);break}}}}function g5(i){var e=i.prev,t=i,n=i.next;if(wt(e,t,n)>=0)return!1;for(var o=e.x,s=t.x,r=n.x,a=e.y,l=t.y,c=n.y,h=o<s?o<r?o:r:s<r?s:r,d=a<l?a<c?a:c:l<c?l:c,u=o>s?o>r?o:r:s>r?s:r,f=a>l?a>c?a:c:l>c?l:c,m=n.next;m!==e;){if(m.x>=h&&m.x<=u&&m.y>=d&&m.y<=f&&Es(o,a,s,l,r,c,m.x,m.y)&&wt(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function v5(i,e,t,n){var o=i.prev,s=i,r=i.next;if(wt(o,s,r)>=0)return!1;for(var a=o.x,l=s.x,c=r.x,h=o.y,d=s.y,u=r.y,f=a<l?a<c?a:c:l<c?l:c,m=h<d?h<u?h:u:d<u?d:u,g=a>l?a>c?a:c:l>c?l:c,v=h>d?h>u?h:u:d>u?d:u,A=Zc(f,m,e,t,n),w=Zc(g,v,e,t,n),P=i.prevZ,I=i.nextZ;P&&P.z>=A&&I&&I.z<=w;){if(P.x>=f&&P.x<=g&&P.y>=m&&P.y<=v&&P!==o&&P!==r&&Es(a,h,l,d,c,u,P.x,P.y)&&wt(P.prev,P,P.next)>=0||(P=P.prevZ,I.x>=f&&I.x<=g&&I.y>=m&&I.y<=v&&I!==o&&I!==r&&Es(a,h,l,d,c,u,I.x,I.y)&&wt(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;P&&P.z>=A;){if(P.x>=f&&P.x<=g&&P.y>=m&&P.y<=v&&P!==o&&P!==r&&Es(a,h,l,d,c,u,P.x,P.y)&&wt(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;I&&I.z<=w;){if(I.x>=f&&I.x<=g&&I.y>=m&&I.y<=v&&I!==o&&I!==r&&Es(a,h,l,d,c,u,I.x,I.y)&&wt(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function A5(i,e,t){var n=i;do{var o=n.prev,s=n.next.next;!Hl(o,s)&&Av(o,n,n.next,s)&&Ur(o,s)&&Ur(s,o)&&(e.push(o.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),Xr(n),Xr(n.next),n=i=s),n=n.next}while(n!==i);return Jo(n)}function y5(i,e,t,n,o,s){var r=i;do{for(var a=r.next.next;a!==r.prev;){if(r.i!==a.i&&S5(r,a)){var l=yv(r,a);r=Jo(r,r.next),l=Jo(l,l.next),Qr(r,e,t,n,o,s,0),Qr(l,e,t,n,o,s,0);return}a=a.next}r=r.next}while(r!==i)}function b5(i,e,t,n){var o=[],s,r,a,l,c;for(s=0,r=e.length;s<r;s++)a=e[s]*n,l=s<r-1?e[s+1]*n:i.length,c=vv(i,a,l,n,!1),c===c.next&&(c.steiner=!0),o.push(M5(c));for(o.sort(w5),s=0;s<o.length;s++)t=x5(o[s],t);return t}function w5(i,e){return i.x-e.x}function x5(i,e){var t=C5(i,e);if(!t)return e;var n=yv(t,i);return Jo(n,n.next),Jo(t,t.next)}function C5(i,e){var t=e,n=i.x,o=i.y,s=-1/0,r;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){var a=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=n&&a>s&&(s=a,r=t.x<t.next.x?t:t.next,a===n))return r}t=t.next}while(t!==e);if(!r)return null;var l=r,c=r.x,h=r.y,d=1/0,u;t=r;do n>=t.x&&t.x>=c&&n!==t.x&&Es(o<h?n:s,o,c,h,o<h?s:n,o,t.x,t.y)&&(u=Math.abs(o-t.y)/(n-t.x),Ur(t,i)&&(u<d||u===d&&(t.x>r.x||t.x===r.x&&P5(r,t)))&&(r=t,d=u)),t=t.next;while(t!==l);return r}function P5(i,e){return wt(i.prev,i,e.prev)<0&&wt(e.next,i,i.next)<0}function E5(i,e,t,n){var o=i;do o.z===0&&(o.z=Zc(o.x,o.y,e,t,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==i);o.prevZ.nextZ=null,o.prevZ=null,I5(o)}function I5(i){var e,t,n,o,s,r,a,l,c=1;do{for(t=i,i=null,s=null,r=0;t;){for(r++,n=t,a=0,e=0;e<c&&(a++,n=n.nextZ,!!n);e++);for(l=c;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(o=t,t=t.nextZ,a--):(o=n,n=n.nextZ,l--),s?s.nextZ=o:i=o,o.prevZ=s,s=o;t=n}s.nextZ=null,c*=2}while(r>1);return i}function Zc(i,e,t,n,o){return i=(i-t)*o|0,e=(e-n)*o|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function M5(i){var e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Es(i,e,t,n,o,s,r,a){return(o-r)*(e-a)>=(i-r)*(s-a)&&(i-r)*(n-a)>=(t-r)*(e-a)&&(t-r)*(s-a)>=(o-r)*(n-a)}function S5(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!D5(i,e)&&(Ur(i,e)&&Ur(e,i)&&k5(i,e)&&(wt(i.prev,i,e.prev)||wt(i,e.prev,e))||Hl(i,e)&&wt(i.prev,i,i.next)>0&&wt(e.prev,e,e.next)>0)}function wt(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Hl(i,e){return i.x===e.x&&i.y===e.y}function Av(i,e,t,n){var o=Da(wt(i,e,t)),s=Da(wt(i,e,n)),r=Da(wt(t,n,i)),a=Da(wt(t,n,e));return!!(o!==s&&r!==a||o===0&&Sa(i,t,e)||s===0&&Sa(i,n,e)||r===0&&Sa(t,i,n)||a===0&&Sa(t,e,n))}function Sa(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Da(i){return i>0?1:i<0?-1:0}function D5(i,e){var t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&Av(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Ur(i,e){return wt(i.prev,i,i.next)<0?wt(i,e,i.next)>=0&&wt(i,i.prev,e)>=0:wt(i,e,i.prev)<0||wt(i,i.next,e)<0}function k5(i,e){var t=i,n=!1,o=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&o<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function yv(i,e){var t=new Jc(i.i,i.x,i.y),n=new Jc(e.i,e.x,e.y),o=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=o,o.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function Rp(i,e,t,n){var o=new Jc(i,e,t);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function Xr(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Jc(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Bl.deviation=function(i,e,t,n){var o=e&&e.length,s=o?e[0]*t:i.length,r=Math.abs(Kc(i,0,s,t));if(o)for(var a=0,l=e.length;a<l;a++){var c=e[a]*t,h=a<l-1?e[a+1]*t:i.length;r-=Math.abs(Kc(i,c,h,t))}var d=0;for(a=0;a<n.length;a+=3){var u=n[a]*t,f=n[a+1]*t,m=n[a+2]*t;d+=Math.abs((i[u]-i[m])*(i[f+1]-i[u+1])-(i[u]-i[f])*(i[m+1]-i[u+1]))}return r===0&&d===0?0:Math.abs((d-r)/r)};function Kc(i,e,t,n){for(var o=0,s=e,r=t-n;s<t;s+=n)o+=(i[r]-i[s])*(i[s+1]+i[r+1]),r=s;return o}Bl.flatten=function(i){for(var e=i[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,o=0;o<i.length;o++){for(var s=0;s<i[o].length;s++)for(var r=0;r<e;r++)t.vertices.push(i[o][s][r]);o>0&&(n+=i[o-1].length,t.holes.push(n))}return t};function Eo(i){if(i.length<3){console.error("points.length < 3");return}const[e,t,n]=i;return new R().subVectors(n,t).cross(new R().subVectors(e,t)).normalize()}function bv(i){if(i.length<3)return[];const e=Eo(i),t=new tt().setFromUnitVectors(e,new R(0,1,0)),n=i.map(o=>o.clone().applyQuaternion(t)).flatMap(o=>[o.x,o.z]);return dl(n)}function _c(i,e){const t=Array.isArray(e)?e:[e];for(let n=0;n<t.length;n++){const o=i.start,s=i.end,r=t[n].start,a=t[n].end;if(!(mr(o,r)||mr(o,a)||mr(s,r)||mr(s,a)||mr(o,s))&&z5([o.x,o.y,o.z],[s.x,s.y,s.z],[r.x,r.y,r.z],[a.x,a.y,a.z]))return!0}return!1}function z5(i,e,t,n){const o=[e[0]-i[0],e[1]-i[1],e[2]-i[2]],s=[n[0]-t[0],n[1]-t[1],n[2]-t[2]],r=[[o[0],-s[0]],[o[1],-s[1]],[o[2],-s[2]]],a=[t[0]-i[0],t[1]-i[1],t[2]-i[2]],l=j5(r,a);if(l===null)return!1;const[c,h]=l;return!!(Bp(c)&&Bp(h))}function j5(i,e){if(L5(i)===0)return null;const t=T5(i);return O5(t,e)}function L5(i){return i[0][0]*i[1][1]-i[0][1]*i[1][0]}function T5(i){const e=i[0][0]*i[1][1]-i[0][1]*i[1][0];return[[i[1][1]/e,-i[0][1]/e],[-i[1][0]/e,i[0][0]/e]]}function O5(i,e){return[i[0][0]*e[0]+i[0][1]*e[1],i[1][0]*e[0]+i[1][1]*e[1]]}function Bp(i){return i>=0&&i<=1}function mr(i,e){return i.x===e.x&&i.y===e.y&&i.z===e.z}function wv(i,e){const t=[...new Set(i)];if(t.length<3)return;if(t.at(-1).equals(t[0])||t.push(t[0]),e!=null&&e.checkLinesIntersect&&t.length>=5){const a=t.map((l,c)=>c===0?null:{start:t[c-1],end:t[c]}).filter(Boolean);for(let l=0;l<a.length;l++)if(_c(a[l],a.slice(l)))return}const n=t.flatMap(a=>[a.x,a.y,a.z]),o=new In(n,3),s=bv(t),r=new xt;return r.setAttribute("position",o),r.setIndex(s),r.name="PolygonGeometry",r}const R5=new xt;let xv=class extends mi{constructor(i){super(),p(this,"isPolygonMesh",!0),p(this,"geometry",new xt),p(this,"isBlank",!0),p(this,"points",[]);const e=new Ze({color:4090367,transparent:!0,side:It,depthTest:!0,opacity:.5}),t=new Ze({color:16777215,transparent:!0,side:It,depthTest:!1,depthWrite:!1,opacity:.3}),n=new We(this.geometry,e),o=new We(this.geometry,t);n.renderOrder=1,o.renderOrder=0,i&&this.updatePoints(i),this.add(n,o)}updatePoints(i){this.points=i;const e=wv(i);e?(this.geometry.copy(e),this.isBlank=!1):(this.geometry.copy(R5),this.isBlank=!0)}};function Cv(i){const e=B5(i);if(e.length===0){console.warn("No geometry triangles found"),console.debug({geometry:i,triangles:e});return}let t=0,n=new R;for(const[o,s,r]of e){const a=fd(o,s,r),l=Pv(o,s,r,a);t+=a,n.add(l)}return n=n.divideScalar(t),{center:n,area:t}}function fd(i,e,t){return e.clone().sub(i).cross(t.clone().sub(i)).length()/2}function Pv(i,e,t,n){const o=n??fd(i,e,t);return qt(i,e,t).multiplyScalar(o)}function B5(i){var e;const t=i.getAttribute("position"),n=(e=i.getIndex())==null?void 0:e.array;if(!t||!n)return[];let o=[];for(let s=0;s<n.length;s+=3){const r=n[s],a=n[s+1],l=n[s+2],c=new R().fromArray([t.getX(r),t.getY(r),t.getZ(r)]),h=new R().fromArray([t.getX(a),t.getY(a),t.getZ(a)]),d=new R().fromArray([t.getX(l),t.getY(l),t.getZ(l)]);o.push([c,h,d])}return o}class H5 extends fv{constructor(e){e.containerStyle=pe(W({},e.containerStyle),{zIndex:"1"}),e.contentStyle=pe(W({},e.contentStyle),{background:"#6386FF",borderRadius:"2px"}),super(e),p(this,"area"),this.area=e.area,this.containerDom.appendChild(this.contentDom)}updateArea(e,t){var n,o;const s=t??this.area.polygon.geometry,r=Cv(s);if(!r){this.ndcPosition=null,this.updateDomPosition(e);return}const{area:a,center:l}=r;this.ndcPosition=l.clone(),this.updateDomPosition(e),(o=(n=this.area.model)==null?void 0:n.config)!=null&&o.getAreaText?this.contentDom.innerText=this.area.model.config.getAreaText(a):this.updateAreaText(a,{fix:2})}updateAreaText(e,t){const{unit:n="m²",fix:o}=t??{};this.contentDom.innerText=`${Oi(o)?e:e.toFixed(o)}${n}`}}class $c{constructor(e,t){p(this,"id",Bt()),p(this,"selected",!1),p(this,"text"),p(this,"type","area"),p(this,"lightMesh"),p(this,"areaItem"),p(this,"hook",new Eh),p(this,"model"),p(this,"polygon"),p(this,"points",[]),p(this,"planeHelper"),p(this,"polyline"),p(this,"meshContainer"),p(this,"domContainer"),p(this,"five"),p(this,"updateDom",()=>{this.five&&(this.polyline.lines.forEach(o=>o.distanceItem.update(this.five)),this.areaItem.updateDomPosition(this.five))});var n;e&&(this.points=e),this.model=t.model,this.polygon=new xv(e),this.polyline=new Xs({model:t.model}),this.areaItem=new H5({area:this,clickCallback:(o,s)=>{const r=o.clientX+"px",a=o.clientY+"px";this.hook.emit("selected",this,{left:r,top:a})}}),this.domContainer=t.domContainer||null,this.meshContainer=t.meshContainer||null,this.five=t.five||null,this.areaItem.appendTo(this.domContainer),(n=this.five)==null||n.on("cameraUpdate",this.updateDom)}get isClosed(){var e;return this.points.length>=4&&((e=this.points.at(0))==null?void 0:e.equals(this.points.at(-1)))}addPoints(e){var t;this.points=this.points.concat(e);const n=this.points.at(-2),o=this.points.at(-1);if(n&&o){const s=new Us(new Li(n),new Li(o),this.polyline.model);this.polyline.addLine(s),this.meshContainer.add(s.mesh),this.five&&(s.distanceItem.setCanSelect(!1),s.distanceItem.appendTo(this.domContainer),s.distanceItem.update(this.five))}(t=this.meshContainer)!=null&&t.children.includes(this.polygon)||this.meshContainer.add(this.polygon),this.polygon.updatePoints(this.points),this.areaItem.updateArea(this.five),this.points.length===3?this.planeHelper=new Nt().setFromCoplanarPoints(this.points[0],this.points[1],this.points[2]):this.points.length<3&&(this.planeHelper=null)}popPoint(){this.points.pop();const e=this.polyline.lines.pop();e==null||e.remove(),this.polygon.updatePoints(this.points),this.areaItem.updateArea(this.five),this.points.length<3&&(this.planeHelper=null)}complete(){this.points.at(-1).equals(this.points[0])||this.addPoints(this.points[0])}hideArea(){this.polygon.visible=!1,this.areaItem.hide()}showArea(){this.polygon.visible=!0,this.areaItem.show()}projectPoint(e){return e&&(this.planeHelper?this.planeHelper.projectPoint(e,new R):e)}remove(){this.polygon.removeFromParent(),this.areaItem.remove(),this.polyline.lines.forEach(e=>e.remove())}dispose(){this.remove(),this.model.areas.splice(this.model.areas.indexOf(this),1),this.planeHelper=null,this.five.off("cameraUpdate",this.updateDom),this.five.needsRender=!0}toJSON(){return{id:this.id,points:this.points.map(e=>e.toArray()),text:this.text}}}const N5=`
<svg class="fpm__delete-icon" width="16px" height="17px" viewBox="0 0 16 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <linearGradient x1="22.185491%" y1="100%" x2="66.8316686%" y2="6.67239121%" id="linearGradient-1">
            <stop stop-color="#FFFCFC" stop-opacity="0.6" offset="0%"></stop>
            <stop stop-color="#FFFFFF" offset="100%"></stop>
        </linearGradient>
    </defs>   
     <path fill="url(#linearGradient-1)" fill-rule="nonzero" transform="translate(2.16 2.16)" d="M11.2979686,2.71818182 C11.611378,2.71818182 11.8654465,2.97561809 11.8654465,3.29318182 C11.8654465,3.58428191 11.6519584,3.82485822 11.374972,3.86293275 L11.2979686,3.86818182 L10.464,3.868 L9.7236795,10.6246222 C9.64153248,11.3737453 9.04854423,11.9512142 8.32013277,12.0165596 L8.18206028,12.0227273 L3.68338622,12.0227273 C2.89302127,12.0227273 2.22904821,11.4205655 2.141767,10.6246222 L2.141767,10.6246222 L1.4,3.868 L0.567477876,3.86818182 C0.254068499,3.86818182 0,3.61074555 0,3.29318182 C0,3.00208173 0.213488114,2.76150541 0.49047449,2.72343089 L0.567477876,2.71818182 L11.2979686,2.71818182 Z M9.322,3.868 L2.542,3.868 L3.26978106,10.4976259 C3.28762252,10.6603274 3.39528004,10.7928487 3.53932022,10.8467307 L3.61412483,10.866894 L3.68338622,10.8727273 L8.18206028,10.8727273 C8.39410941,10.8727273 8.57224853,10.7111717 8.59566544,10.4976259 L8.59566544,10.4976259 L9.322,3.868 Z M8.16824216,0 C8.48165153,0 8.73572003,0.257436269 8.73572003,0.575 C8.73572003,0.866100087 8.52223192,1.1066764 8.24524554,1.14475093 L8.16824216,1.15 L3.69720434,1.15 C3.38379497,1.15 3.12972647,0.892563731 3.12972647,0.575 C3.12972647,0.283899913 3.34321458,0.0433235966 3.62020096,0.00524907226 L3.69720434,0 L8.16824216,0 Z"></path>                 
</svg>
`,Hp="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTciIGhlaWdodD0iMjUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSIxMC43MDYlIiB5MT0iNDIuNzQ0JSIgeDI9Ijg5LjA2NCUiIHkyPSI1Ny4yMDglIiBpZD0icHJlZml4X19hIj48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMCUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9Ii4zMDgiIG9mZnNldD0iNDkuNTY5JSIvPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3QgeD0iLS4yNSIgeT0iLS4yNSIgd2lkdGg9IjU3LjUiIGhlaWdodD0iMjMuNSIgcng9IjExLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDEpIiBmaWxsPSIjMkMyQzJDIiBzdHJva2U9InVybCgjcHJlZml4X19hKSIgc3Ryb2tlLXdpZHRoPSIuNSIgZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsLW9wYWNpdHk9Ii4zMDMiLz48L3N2Zz4=",F5="data:image/png;base64,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";class md{constructor(e,t){p(this,"visible",!1),p(this,"five"),p(this,"lines",[]),p(this,"points",[]),p(this,"onClick"),p(this,"cancel"),p(this,"content",document.createElement("div")),p(this,"container",document.createElement("div")),p(this,"masking",document.createElement("div")),p(this,"target"),p(this,"clickHandler",r=>{this.onClick(r,this.target)}),p(this,"cancelHandler",()=>{this.cancel(this.target)}),p(this,"hover",()=>{this.content.style.backgroundImage=`url(${F5})`}),p(this,"unHover",()=>{this.content.style.backgroundImage=`url(${Hp})`});var n,o;this.five=e,this.onClick=(t==null?void 0:t.onClick)||(()=>{}),this.cancel=(t==null?void 0:t.cancel)||(()=>{}),this.container.classList.add("fpm__delete"),this.container.style.opacity="0",this.container.style.position="absolute",this.container.style.left="0",this.container.style.top="10px",this.container.style.transform="translate3d(0, 0, 10px)",this.container.style.pointerEvents="none",this.container.style.transition="opacity 200ms ease",this.container.style.zIndex="99",this.content.classList.add("fpm__delete-content"),this.content.style.width="62px",this.content.style.height="26px",this.content.style.display="flex",this.content.style.alignItems="center",this.content.style.justifyContent="center",this.content.style.transform="translate(-50%, -50%)",this.content.style.color="#fff",this.content.style.fontSize="12px",this.content.style.lineHeight="17px",this.content.style.borderRadius="11px",this.content.style.backgroundSize="100% 100%",this.content.style.cursor="pointer",this.content.style.userSelect="none",this.content.style.backgroundImage=`url(${Hp})`,this.content.innerHTML=`
      ${N5}
      <span>${(o=(n=t.i18n)==null?void 0:n.call(t,"删除"))!=null?o:"删除"}</span>
    `,this.container.append(this.content);const s=this.content.querySelector(".fpm__delete-icon");s&&(s.style.width="16px",s.style.height="17px",s.style.marginRight="1px"),this.content.addEventListener("click",this.clickHandler),this.content.addEventListener("mouseenter",this.hover),this.content.addEventListener("mouseleave",this.unHover),this.masking.setAttribute("style","position: absolute;top: 0;left: 0;bottom: 0;right: 0;pointer-events: none;"),this.masking.addEventListener("click",this.cancelHandler),this.masking.addEventListener("touchstart",this.cancelHandler)}dispose(){this.content.removeEventListener("click",this.clickHandler),this.content.removeEventListener("mouseenter",this.hover),this.content.removeEventListener("mouseleave",this.unHover),this.container.remove(),this.masking.removeEventListener("click",this.cancelHandler),this.masking.removeEventListener("touchstart",this.cancelHandler),this.masking.remove()}appendTo(e){return e.append(this.container),e.append(this.masking),this}setLines(e){return this.lines=e,this.points=Array.from(new Set(this.lines.map(t=>[t.points[0],t.points[1]]).flat(1))),this}setTarget(e){return this.target=e,this}updatePosition(e,t){if(e&&t)return this.container.style.left=e,this.container.style.top=t,this.container.style.transform="",this.show();if(this.lines.length===0)return this;const n=this.points.map(m=>m.position).map(m=>m.clone().applyMatrix4(this.lines[0].mesh.matrixWorld)),o=n.map(m=>m.clone().project(this.five.camera));if(o.some(m=>Math.abs(m.z)>1))return this.hide();const s=o.map(m=>m.x),r=o.map(m=>m.y),a=(Math.min(...s)+Math.max(...s))/2,l=Math.max(...r),c=this.container.parentElement;if(!c)return this;const h=(a+1)/2*c.clientWidth,d=-(l-1)/2*c.clientHeight;let u=h,f=d-34;if(this.lines.length===1&&n.length===2){const m=(r[1]-r[0])/(s[1]-s[0]),g=-((r[1]+r[0])/2-1)/2*c.clientHeight;Math.abs(m)>.4&&(u=h+57,f=g)}return this.container.style.top="0",this.container.style.left="0",this.container.style.transform=`translate3d(${u}px, ${f}px, 0)`,this.show()}hide(){return this.visible=!1,this.masking.style.pointerEvents="none",this.container.style.opacity="0",this.container.style.pointerEvents="none",this.unHover(),this}show(){return this.visible=!0,this.masking.style.pointerEvents="auto",this.container.style.opacity="1",this.container.style.pointerEvents="auto",this}}function gd(i,e){const t=i.x-e[0].x,n=i.y-e[0].y,o=e[1].x-e[0].x,s=e[1].y-e[0].y,r=t*o+n*s,a=o*o+s*s,l=r/a;let c,h;return l<0||V5(e[0],e[1])?(c=e[0].x,h=e[0].y):l>1?(c=e[1].x,h=e[1].y):(c=e[0].x+l*o,h=e[0].y+l*s),new Qe(c,h)}function V5(i,e){return i.x===e.x&&i.y===e.y}const Np=()=>!1;class io extends Rl{constructor(e){super(e),p(this,"type","edit"),p(this,"polyline"),p(this,"area"),p(this,"hasAppendDashed",!1),p(this,"fiveElement"),p(this,"lastPoint",null),p(this,"pointSelector"),p(this,"deleteDom"),p(this,"onIntersectionUpdate",Cl(t=>{t&&(this.currentMeasureType==="area"&&typeof t.isAdsorbed=="boolean"&&(t.isAdsorbed?this.hook.emit("readyComplete"):this.hook.emit("notReadyComplete")),this.updateDashed())},20)),p(this,"revoke",()=>{this.currentMeasureType==="area"?this.revokeArea():this.currentMeasureType==="line"&&this.revokeLine()}),p(this,"revokeArea",()=>{if(this.area.points.length!==0){if(this.area.popPoint(),this.hook.emit("pointsChange",this.area.points),this.area.points.length===0){this.lastPoint=null,this.hasAppendDashed=!1,this.dashed.remove(),this.five.needsRender=!0,this.hook.emit("revoke",{isEmpty:!0});return}else this.lastPoint=new Li(this.area.points[this.area.points.length-1]),this.updateDashed();this.five.needsRender=!0}}),p(this,"revokeLine",t=>{const n=t||this.polyline;if(n.lines.length===0&&this.lastPoint){this.lastPoint=null,this.hasAppendDashed=!1,this.pointSelector.setAdherePoints(null),this.dashed.remove(),this.hook.emit("anchorChange",null),this.hook.emit("editedDashedLineChange",null),this.five.needsRender=!0,this.hook.emit("pointsChange",[]);return}if(n.lines.length===0&&!this.lastPoint||!this.lastPoint)return;const o=n.lines[n.lines.length-1],s=o.findAnotherPoint(this.lastPoint);s&&(this.lastPoint=s,this.hook.emit("anchorChange",s.position),this.group.remove(o.mesh),n.removeLine(o),o.distanceItem.remove(),this.updateDashed(),this.five.needsRender=!0)}),p(this,"checkMouseLeave",t=>{t||(this.dashed.hide(),this.perpendicularDashed.hide(),this.area.hideArea())}),p(this,"onLineChanged",()=>{this.hook.emit("editedPolylineChange",this.polyline)}),p(this,"onWantsSelect",()=>{if(this.currentMeasureType==="area"){const t=this.area.polygon.isBlank||this.area.polygon.visible===!1;if(this.area.points.length>=3&&t)return!1}}),p(this,"wantsMoveToPano",()=>{if(this.lastPoint)return!1}),p(this,"onSelect",()=>{var t,n,o,s;this.hasAppendDashed||(this.dashed.distanceItem.appendTo(this.container),this.group.add(this.dashed.mesh),this.currentMeasureType==="area"&&this.group.add(this.perpendicularDashed.mesh)),this.hasAppendDashed=!0;const r=(()=>{var h,d;if(this.currentMeasureType==="area")return this.area.projectPoint((h=this.pointSelector.position)==null?void 0:h.point);if(this.currentMeasureType==="line")return(d=this.pointSelector.position)==null?void 0:d.point})();if(!r)return;const a=new Li(r),l=this.lastPoint;if(l!=null&&l.position&&a.position.equals(l==null?void 0:l.position))return;this.lastPoint=a;const c=h=>{if(!this.lastPoint)return[];const{intersection:d,pointSelectorInstance:u}=h,f=u.pointSelectorHelper.pointHelper,m=new R(0,0,1).applyQuaternion(f.quaternion);if(m.x>.9999||m.y>.9999||m.z>.9999||m.x<-.9999||m.y<-.9999||m.z<-.9999){const g=d.point,v=this.lastPoint.position.clone().sub(g);u.pointSelectorHelper.updateWithIntersect(d,{emitEvent:!1});const A=new Ht(f.localToWorld(new R(1,0,0)).add(v),f.localToWorld(new R(-1,0,0)).add(v)),w=new Ht(f.localToWorld(new R(0,1,0)).add(v),f.localToWorld(new R(0,-1,0)).add(v)),P=A.closestPointToPoint(g,!1,new R),I=w.closestPointToPoint(g,!1,new R);return[P,I]}return[]};if(this.pointSelector.setAdherePoints(c),this.currentMeasureType==="line"){if(a&&l){const d=new Us(l,a,this.model);d.distanceItem.setCanSelect(!1),d.distanceItem.appendTo(this.container),this.polyline.addLine(d),this.group.add(d.mesh),d.distanceItem.update(this.five)}const h=(n=(t=this.editParams)==null?void 0:t.autoEndConfig)==null?void 0:n.line;typeof h=="number"&&(this.polyline.getPointLength()>=h?this.complete():this.polyline.getPointLength()===h-1&&this.hook.emit("readyComplete")),this.hook.emit("pointsChange",this.polyline.points)}else if(this.currentMeasureType==="area"){if(this.area.addPoints(a.position),this.area.isClosed){this.complete();return}this.area.points.length>=3&&this.pointSelector.setAdherePoints((...d)=>{var u;return[this.area.points[0],...(u=c(...d))!=null?u:[]].filter(Be)});const h=(s=(o=this.editParams)==null?void 0:o.autoEndConfig)==null?void 0:s.area;typeof h=="number"&&(this.area.points.length>=h?this.complete():this.area.points.length===h-1&&this.hook.emit("readyComplete")),this.hook.emit("pointsChange",this.area.points)}this.updateDashed(),this.five.needsRender=!0,this.hook.emit("anchorChange",a.position)}),p(this,"onCameraUpdate",()=>{this.updateDistanceUI()}),p(this,"updateDashed",()=>{var t;if(!this.lastPoint)return;const n=this.lastPoint.position,o=(()=>{var s,r;if(this.currentMeasureType==="area")return this.area.projectPoint((s=this.pointSelector.position)==null?void 0:s.point);if(this.currentMeasureType==="line")return(r=this.pointSelector.position)==null?void 0:r.point})();if(!o){this.dashed.hide();return}if(this.dashed.show(),this.dashed.setPoints(n,o),this.dashed.distanceItem.update(this.five),this.hook.emit("editedDashedLineChange",this.dashed),this.currentMeasureType==="area")if(this.area.areaItem.setCanSelect(!1),this.area.points.length>=2){const s=(t=this.pointSelector.position)==null?void 0:t.point;if(s){const c=s,h=o;this.perpendicularDashed.setPoints(c,h),this.perpendicularDashed.show()}else this.perpendicularDashed.hide();const r=this.area.polyline.lines.map(c=>({start:c.points[0].position,end:c.points[1].position})),a=_c({start:n,end:o},r),l=_c({start:o,end:this.area.points[0]},r);if(a||l)this.area.hideArea(),this.hook.emit("allowAddPointStateChange","forbid");else{this.area.showArea();const c=[...this.area.points,o];this.area.polygon.updatePoints(c),this.area.areaItem.updateArea(this.five),this.hook.emit("allowAddPointStateChange","allow")}}else this.area.hideArea(),this.perpendicularDashed.hide();this.five.needsRender=!0}),p(this,"wantsTapGesture",t=>{var n,o;if(this.editParams.pointSelectorMode==="cursor"||this.lastPoint)return!1;const s=this.model.areas.map(v=>t.intersectObject(v.polygon,!0)[0]).sort((v,A)=>v.distance-A.distance),r=(o=(n=s[0])==null?void 0:n.object)==null?void 0:o.parent;if(r!=null&&r.isPolygonMesh){const v=this.model.areas.find(A=>A.polygon===r);if(v){const{x:A,y:w}=s[0].point.clone().project(this.five.camera),P=`${(A+1)/2*100}%`,I=`${(-w+1)/2*100}%`;return this.chooseArea(v,{left:P,top:I}),!1}}const[a]=Ci(this.five).intersectRaycaster(t);if(!a)return;const l=this.five.camera,c=a.point.clone().project(l),h=this.container.clientWidth,d=this.container.clientHeight,u=new Qe(c.x*h,c.y*d),f=this.model.getAllLines().map(v=>{const[A,w]=v.points,P=A.position.clone().project(l),I=w.position.clone().project(l);if(!Zo(P)&&!Zo(I))return null;const j=new Qe(P.x*h,P.y*d),D=new Qe(I.x*h,I.y*d);return{id:v.id,points:[j,D]}}).filter(v=>!!v);if(f.length===0)return;const m=f.map(v=>{const A=gd(u,v.points);return{id:v.id,distance:A.distanceTo(u)}}).sort((v,A)=>v.distance-A.distance)[0];if(m.distance>20)return;const g=this.model.getAllLines().find(({id:v})=>v===m.id);if(g)return this.chooseLine(g),!1}),p(this,"chooseLine",t=>{const n=t.getPolyline().lines;this.deleteDom.setTarget(n).setLines(n).updatePosition().show(),this.highlightLines(n),this.hook.emit("selectedChange",n)}),p(this,"chooseArea",(t,n)=>{this.deleteDom.setTarget(t).updatePosition(n.left,`calc(${n.top} - 1.5rem)`).show(),this.highlightArea(t)}),p(this,"deleteArea",t=>{this.unHighlightArea(t),t.dispose(),this.deleteDom.hide()}),p(this,"deleteLine",t=>{const n=t[0],o=this.model.getPolylineByLine(n);o&&(this.model.removePolyline(o),o.lines.forEach(s=>this.removeLine(s)),this.deleteDom.setLines([]).hide())}),this.fiveElement=this.five.getElement(),this.deleteDom=new md(this.five,{i18n:this.config.i18n,onClick:(t,n)=>{var o;const s=n.type==="area",r=Array.isArray(n)&&((o=n[0])==null?void 0:o.type)==="line";s&&this.deleteArea(n),r&&this.deleteLine(n)},cancel:t=>{var n;this.deleteDom.hide();const o=t.type==="area",s=Array.isArray(t)&&((n=t[0])==null?void 0:n.type)==="line";o&&this.unHighlightArea(t),s&&this.unHighlightLines(t)}}).appendTo(this.container),this.pointSelector=new Pl(this.five,pe(W({},this.pointSelectorConfig),{mode:this.editParams.pointSelectorMode,helper:W({magnifierParams:this.magnifierParams,container:this.container},this.pointSelectorConfig.helper)})),this.pointSelector.enable(),this.polyline=new Xs({model:this.model}),this.area=new $c(void 0,{five:this.five,model:this.model,meshContainer:this.group,domContainer:this.container}),this.model.addPolyline(this.polyline),this.model.addArea(this.area),this.model.getAllLines().forEach(t=>{t.distanceItem.appendTo(this.container),t.distanceItem.update(this.five),t.distanceItem.setCanSelect(!0),t.hook.on("selected",this.chooseLine),this.group.add(t.mesh)}),this.model.getAllAreas().forEach(t=>{t.areaItem.appendTo(this.container),t.areaItem.updateDomPosition(this.five),t.areaItem.setCanSelect(!0),t.hook.on("selected",this.chooseArea),this.group.add(t.polygon),t.polyline.lines.forEach(n=>{n.distanceItem.appendTo(this.container),n.distanceItem.update(this.five),this.group.add(n.mesh)})}),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("wantsTapGesture",this.wantsTapGesture),this.five.on("wantsMoveToPano",this.wantsMoveToPano),this.five.on("wantsChangeMode",Np),this.pointSelector.on("intersectionUpdate",this.onIntersectionUpdate),this.pointSelector.on("intersectionUpdate",this.checkMouseLeave),this.pointSelector.on("select",this.onSelect),this.pointSelector.on("wantsSelect",this.onWantsSelect),this.polyline.hook.on("lineAdded",this.onLineChanged),this.polyline.hook.on("lineRemoved",this.onLineChanged),this.five.helperVisible=!1,this.hook.emit("anchorChange",null),this.hook.emit("editedDashedLineChange",null),this.five.refresh()}dispose(){super.dispose(),this.model.areas.forEach(e=>{(e.points.length<2||e.polygon.isBlank)&&this.model.removeArea(e)}),this.five.helperVisible=!0,this.pointSelector.disable(),this.dashed.remove(),this.perpendicularDashed.remove(),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("wantsTapGesture",this.wantsTapGesture),this.five.off("wantsMoveToPano",this.wantsMoveToPano),this.five.off("wantsChangeMode",Np),this.pointSelector.off("intersectionUpdate",this.onIntersectionUpdate),this.pointSelector.off("intersectionUpdate",this.checkMouseLeave),this.pointSelector.off("select",this.onSelect),this.pointSelector.off("wantsSelect",this.onWantsSelect),this.polyline.hook.off("lineAdded",this.onLineChanged),this.polyline.hook.off("lineRemoved",this.onLineChanged),this.magnifier.dispose(),this.deleteDom.dispose(),this.dashed.distanceItem.remove(),this.five.needsRender=!0}getEditingLines(){return this.polyline.lines}selectPoint(){this.onSelect()}complete(){this.hook.emit("complete"),this.currentMeasureType==="area"?(this.area.points.length<3?this.deleteArea(this.area):(this.area.showArea(),this.area.complete(),this.area.hook.on("selected",this.chooseArea)),this.area=new $c(void 0,{five:this.five,model:this.model,meshContainer:this.group,domContainer:this.container}),this.model.addArea(this.area)):this.currentMeasureType==="line"&&(this.polyline.lines.forEach(e=>{e.hook.on("selected",this.chooseLine),e.distanceItem.setCanSelect(!0)}),this.polyline=new Xs({model:this.model}),this.model.addPolyline(this.polyline)),this.pointSelector.setAdherePoints(null),this.dashed.hide(),this.perpendicularDashed.hide(),this.lastPoint=void 0}highlightArea(e){this.highlightLines(e.polyline.lines),this.five.needsRender=!0}unHighlightArea(e){this.unHighlightLines(e.polyline.lines),this.five.needsRender=!0}highlightLines(e){e.forEach(t=>this.highlightLine(t))}unHighlightLines(e){e.forEach(t=>{t.selected=!1,t.distanceItem.unHighlight(),this.group.remove(t.lightMesh),this.five.needsRender=!0})}highlightLine(e){this.unHighlightLines(this.model.getAllLines()),!e.selected&&(e.selected=!0,this.group.add(e.lightMesh),e.distanceItem.highlight(),this.five.needsRender=!0)}}class Fp extends Rl{constructor(e){super(e),p(this,"type","view"),p(this,"hammer"),p(this,"polylineRemoved",n=>{n.lines.forEach(o=>this.removeLine(o)),this.hook.emit("selectedChange",this.model.getAllLines().filter(o=>o.selected).map(o=>o))}),p(this,"polylineAdded",n=>{const{panoIndex:o,mode:s}=this.five.getCurrentState();n.lines.forEach(r=>{n.visibleFiveMode&&!n.visibleFiveMode.includes(s)&&(r.mesh.visible=!1),n.visiblePanoIndexes&&!n.visiblePanoIndexes.includes(o)&&(r.mesh.visible=!1),r.distanceItem.appendTo(this.container),r.distanceItem.update(this.five),this.group.add(r.mesh)}),this.updateDistanceUI()}),p(this,"onCameraUpdate",()=>{this.updateDistanceUI()}),p(this,"onFiveModeChange",n=>{n!=="Panorama"&&(this.model.polylines.forEach(o=>{o.visibleFiveMode&&!o.visibleFiveMode.includes(n)&&o.lines.forEach(s=>{s.mesh.visible=!1,s.distanceItem.update(this.five)})}),this.five.ready().then(()=>{const o=this.five.getCurrentState().mode;o!=="Panorama"&&this.model.polylines.forEach(s=>{s.visibleFiveMode&&s.visibleFiveMode.includes(o)&&s.lines.forEach(r=>{r.mesh.visible=!0,r.distanceItem.update(this.five)})})}))}),p(this,"onFivePanoWillArrive",n=>{this.model.polylines.forEach(o=>{(o.visiblePanoIndexes&&!o.visiblePanoIndexes.includes(n)||o.visibleFiveMode&&!o.visibleFiveMode.includes(this.five.getCurrentState().mode))&&o.lines.forEach(s=>{s.mesh.visible=!1,s.distanceItem.update(this.five)})})}),p(this,"onFivePanoArrived",n=>{this.model.polylines.forEach(o=>{o.visiblePanoIndexes&&o.visiblePanoIndexes.includes(n)&&o.visibleFiveMode&&o.visibleFiveMode.includes(this.five.getCurrentState().mode)&&o.lines.forEach(s=>{s.mesh.visible=!0,s.distanceItem.update(this.five)})})}),this.model.getAllLines().forEach(n=>{n.distanceItem.appendTo(this.container),n.distanceItem.update(this.five),this.group.add(n.mesh),n.mesh.updateMatrixWorld()});const t=this.five.getElement();if(t){const n=new Br(t);this.hammer=n}this.onFiveModeChange(this.five.getCurrentState().mode),this.onFivePanoWillArrive(this.five.getCurrentState().panoIndex),this.onFivePanoArrived(this.five.getCurrentState().panoIndex),this.updateDistanceUI(),this.five.needsRender=!0,this.model.hook.on("polylineAdded",this.polylineAdded),this.model.hook.on("polylineRemoved",this.polylineRemoved),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("modeChange",this.onFiveModeChange),this.five.on("panoWillArrive",this.onFivePanoWillArrive)}dispose(){var e;super.dispose(),this.model.hook.off("polylineAdded",this.polylineAdded),this.model.hook.off("polylineRemoved",this.polylineRemoved),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("modeChange",this.onFiveModeChange),this.five.off("panoWillArrive",this.onFivePanoWillArrive),this.five.needsRender=!0,this.hook.emit("selectedChange",[]),(e=this.hammer)==null||e.destroy()}}function W5(i,e){const t=(i.x+1)/2*e.width,n=-(i.y-1)/2*e.height;return new Qe(t,n)}function G5(i,e,t,n){const o=i.getElement();if(!o||e.length===0)return null;const s={width:o.clientWidth,height:o.clientHeight},r=e.map(a=>{const l=a.position.clone().project(i.camera);return Zo(l)?{distance:W5(l,s).distanceTo(t),point:a}:{distance:1/0,point:a}}).sort((a,l)=>a.distance-l.distance);return typeof n=="number"&&r[0].distance>n?null:r[0]}function Vp(i){const{x:e,y:t}=i.center,{clientWidth:n,clientHeight:o}=i.target,s=i.target.getBoundingClientRect(),r=new Qe(e,t).sub(new Qe(s.left,s.top)),a=new Qe(r.x/n*2-1,-(r.y/o)*2+1);return{point:r,ndcPoint:a}}const Wp=()=>!1;class Gp extends Rl{constructor(e){super(e),p(this,"type","watch"),p(this,"deleteDom"),p(this,"choose"),p(this,"highlightedLines",[]),p(this,"highlightedArea"),p(this,"fiveElement"),p(this,"editPointState"),p(this,"hammer"),p(this,"onPanStart",n=>{var o;if(this.model.getAllLines().length===0||!this.fiveElement)return;const s=Vp(n).point,r=(o=G5(this.five,this.model.getAllPoints(),s,20))==null?void 0:o.point;if(!r){this.editPointState=void 0;return}const a=this.model.polylines.find(c=>c.includes(r)),l={point:r,associatedLines:a.lines};this.hook.emit("wantsDragLine",{point:r.id,lines:l.associatedLines.map(({id:c})=>c)})||(this.editPointState=l,this.magnifier.appendTo(this.container),this.magnifier.enable(),this.group.add(this.mouseGroup))}),p(this,"onPanEnd",()=>{this.editPointState&&(this.editPointState.associatedLines.forEach(n=>n.mesh.setMaterial({dashed:!1})),this.highlightLines(this.editPointState.associatedLines),this.editPointState=void 0,this.magnifier.disable(),this.group.remove(this.mouseGroup))}),p(this,"onPan",n=>{if(!this.editPointState||!this.fiveElement)return;const o=Vp(n).ndcPoint,s=new Ot;s.setFromCamera(o,this.five.camera);const[r]=Ci(this.five).intersectRaycaster(s);r&&this.onIntersectionUpdate(r)}),p(this,"onIntersectionUpdate",(n,o)=>{if(this.editPointState){if(this.clearHighlightLines(),this.editPointState.point.position.copy(n.point),this.editPointState.associatedLines.forEach(s=>{s.mesh.setPoints(s.points[0].position.clone(),s.points[1].position.clone()),s.lightMesh.setPoints(s.points[0].position.clone(),s.points[1].position.clone()),s.mesh.setMaterial({dashed:!0})}),this.updateDistanceUI(),this.magnifier.renderWithPoint(n.point),this.mouseGroup.position.copy(n.point),o)this.mouseGroup.quaternion.copy(o.quaternion);else if(n.face){const s=n.face.normal.clone().multiplyScalar(.05),r=n.point.clone().add(s).clone().add(s);this.mouseGroup.lookAt(r)}this.five.needsRender=!0,this.hook.emit("selectedChange",this.editPointState.associatedLines.map(s=>s))}}),p(this,"wantsPanGesture",()=>{if(this.editPointState)return!1}),p(this,"wantsTapGesture",n=>{var o;const s=this.model.areas.map(A=>n.intersectObject(A.polygon,!0)[0]).sort((A,w)=>A.distance-w.distance),r=(o=s[0])==null?void 0:o.object.parent;if(r instanceof xv){const A=this.model.areas.find(w=>w.polygon===r);if(A){const{x:w,y:P}=s[0].point.clone().project(this.five.camera),I=`${(w+1)/2*100}%`,j=`${(-P+1)/2*100}%`;return this.chooseArea(A,{left:I,top:j}),!1}}const a=Ci(this.five),[l]=a.intersectRaycaster(n);if(!l)return;const c=this.five.camera,h=l.point.clone().project(c),d=this.container.clientWidth,u=this.container.clientHeight,f=new Qe(h.x*d,h.y*u),m=this.model.getAllLines().map(A=>{const[w,P]=A.points,I=w.position.clone().project(c),j=P.position.clone().project(c);if(!Zo(I)&&!Zo(j))return null;const D=new Qe(I.x*d,I.y*u),T=new Qe(j.x*d,j.y*u);return{id:A.id,points:[D,T]}}).filter(A=>!!A);if(m.length===0)return;const g=m.map(A=>{const w=gd(f,A.points);return{id:A.id,distance:w.distanceTo(f)}}).sort((A,w)=>A.distance-w.distance)[0];if(g.distance>20)return;const v=this.model.getAllLines().find(({id:A})=>A===g.id);if(v)return this.chooseLine(v),!1}),p(this,"chooseLine",n=>{this.choose="line";const o=n.getPolyline().lines;this.highlightLines(o),this.five.needsRender=!0,this.hook.emit("selectedChange",o.map(s=>s))}),p(this,"chooseArea",(n,o)=>{this.choose=n,this.deleteDom.updatePosition(o.left,`calc(${o.top} - 20px)`).show(),this.highlightArea(n)}),p(this,"polylineRemoved",n=>{n.lines.forEach(o=>this.removeLine(o)),this.hook.emit("selectedChange",this.model.getAllLines().filter(o=>o.selected).map(o=>o))}),p(this,"onCameraUpdate",()=>{this.updateDistanceUI(),this.highlightedLines.length>0&&this.deleteDom.updatePosition()}),p(this,"deleteArea",n=>{this.unHighlightArea(n),n.dispose(),this.deleteDom.hide()}),p(this,"deleteLine",()=>{const n=this.highlightedLines[0],o=this.model.getPolylineByLine(n);o&&(this.model.removePolyline(o),this.highlightedLines=[],this.deleteDom.setLines([]).hide())}),p(this,"cancelDeleteClickCallback",()=>{this.deleteDom.hide(),this.clearHighlightLines(),this.unHighlightArea()}),this.deleteDom=new md(this.five,{i18n:this.config.i18n,onClick:()=>{this.choose==="line"?this.deleteLine():this.choose instanceof $c&&this.deleteArea(this.choose)},cancel:this.cancelDeleteClickCallback}).appendTo(this.container),this.model.getAllLines().forEach(n=>{n.distanceItem.appendTo(this.container),n.distanceItem.update(this.five),n.hook.on("selected",this.chooseLine),n.distanceItem.setCanSelect(!0),this.group.add(n.mesh)}),this.model.getAllAreas().forEach(n=>{n.areaItem.appendTo(this.container),n.areaItem.updateArea(this.five),n.hook.on("selected",this.chooseArea),n.areaItem.setCanSelect(!0),this.group.add(n.polygon),n.polyline.lines.forEach(o=>{o.distanceItem.appendTo(this.container),o.distanceItem.update(this.five),this.group.add(o.mesh)})});const t=this.five.getElement();if(t){this.fiveElement=t;const n=new Br(t);this.hammer=n,n.on("pan",this.onPan),n.on("panstart",this.onPanStart),n.on("panend",this.onPanEnd)}this.updateDistanceUI(),this.five.needsRender=!0,this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("wantsTapGesture",this.wantsTapGesture),this.five.on("wantsPanGesture",this.wantsPanGesture),this.five.on("wantsChangeMode",Wp),this.model.hook.on("polylineRemoved",this.polylineRemoved)}dispose(){var e;super.dispose(),this.deleteDom.dispose(),this.model.hook.off("polylineRemoved",this.polylineRemoved),this.model.getAllLines().forEach(t=>t.hook.off("selected",this.chooseLine)),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("wantsPanGesture",this.wantsPanGesture),this.five.off("wantsTapGesture",this.wantsTapGesture),this.five.off("wantsChangeMode",Wp),this.five.needsRender=!0,this.hook.emit("selectedChange",[]),(e=this.hammer)==null||e.destroy()}highlightLine(e){e.selected||(e.selected=!0,this.group.add(e.lightMesh),e.distanceItem.highlight(),this.five.needsRender=!0)}clearHighlightLines(){this.group.children.length!==0&&(this.unHighlightLines(this.highlightedLines),this.highlightedLines=[])}highlightArea(e){this.unHighlightLines(),this.unHighlightArea(),this.highlightLines(e.polyline.lines),this.five.needsRender=!0}unHighlightArea(e){const t=e??this.highlightedArea;t&&(this.unHighlightLines(t.polyline.lines),this.five.needsRender=!0)}highlightLines(e){this.unHighlightLines(),this.highlightedLines=e,e.forEach(t=>this.highlightLine(t))}unHighlightLines(e){this.unHighlightArea();const t=e??this.highlightedLines;t&&t.forEach(n=>{n.selected=!1,n.distanceItem.unHighlight(),this.group.remove(n.lightMesh),this.five.needsRender=!0})}}class Ev{constructor(e){p(this,"config"),p(this,"polylines",[]),p(this,"areas",[]),p(this,"hook",new Mt),this.config=e}addPolyline(e){if(this.includes(e)){console.error(new Error("不能重复添加 polyline"));return}this.polylines.push(e),this.hook.emit("polylineAdded",e)}addArea(e){if(this.areas.find(({id:t})=>t===e.id)!==void 0){console.error(new Error("不能重复添加 area"));return}this.areas.push(e),this.hook.emit("areaAdded",e)}replacePolylineByID(e,t){const n=this.getPolylineByID(e);n==null||n.replace(t)}removePolyline(e){const t=this.polylines.findIndex(({id:n})=>n===e.id);if(t===-1){console.error(new Error("polyline 不存在"));return}this.polylines.splice(t,1),this.hook.emit("polylineRemoved",e)}removeArea(e){const t=this.areas.findIndex(({id:n})=>n===e.id);if(t===-1){console.error(new Error("area 不存在"));return}this.areas.splice(t,1)}getPolylineByID(e){return this.polylines.find(t=>t.id===e)}getPolylineByLine(e){return this.polylines.find(t=>t.includes(e))}getLineByID(e){return this.getAllLines().find(t=>t.id===e)}getAllLines(){return this.polylines.map(e=>e.lines).flat(1)}getAllAreas(){return this.areas}getAllPoints(){return this.polylines.map(e=>e.points).flat(1)}includes(e){return this.polylines.find(({id:t})=>t===e.id)!==void 0}clear(){this.polylines.forEach(e=>this.hook.emit("polylineRemoved",e)),this.areas.forEach(e=>e.dispose()),this.polylines.splice(0,this.polylines.length),this.areas.splice(0,this.areas.length)}dispose(){this.clear()}getClosestPoint(){}parse(e){this.clear(),this.polylines.push(...e.polylines.map(t=>new Xs({model:this}).fromJson(t))),this.polylines.forEach(t=>this.hook.emit("polylineAdded",t))}toJson(){return{polylines:this.polylines.map(e=>e.toJson()).filter(e=>e.lines.length>0)}}}function Q5(){}const U5="data:image/png;base64,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",X5="data:image/png;base64,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",Y5=`
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`,q5=`
varying vec2 vUv;
void main() {
  vec2 uv = vec2(vUv.x, vUv.y);
  float a = 1.0;
  float match = 1.0 - uv.x;
  gl_FragColor = vec4(1.0,1.0,1.0,match);
}
`;function Iv(i){var e,t;const n=(e=i.isMobile)!=null?e:!0,o=(t=i.useNormalVector)!=null?t:!0;let s=10349931;o&&i.ballColor>=0&&(s=i.ballColor);const r=new Et,a=new ea(.3,.3),l=n?U5:X5,c=new Ao().load(l);c.encoding=on,c.minFilter=zi;const h=new Ze({map:c,transparent:!0,depthTest:!1}),d=new We(a,h),u=new ta;u.add(new ia(new R(0,0,0),new R(0,0,.1)));const f=new wl(u,8,.003),m=new Bi({vertexShader:Y5,fragmentShader:q5,depthTest:!1,transparent:!0}),g=new We(f,m),v=new Xo(.01,20,20),A=new Ze({color:s,depthTest:!1,transparent:!0,side:It}),w=new We(v,A);return w.position.set(0,0,.1),r.name="mouse-current",r.add(d),o&&r.add(g,w),r}class Z5{constructor(e){p(this,"container",document.createElement("div")),p(this,"five"),p(this,"group"),p(this,"mouseGroup"),p(this,"hasAppendMouseGroup",!1),p(this,"hook"),p(this,"content"),p(this,"intersectMesh"),p(this,"centerMouseXY"),p(this,"raycaster",new Ot),p(this,"pieceStyl",{matrix3d:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],scale:1,opacity:.4}),p(this,"onCameraDirectionUpdate",()=>{const t=this.getIntersection();if(t){this.pieceChange(t),this.updateMouseGroup(t);const n=new Li(this.mouseGroup.position);this.hook.emit("nowPointChange",n)}}),p(this,"onWillChangeState",(t,n)=>{var o;this.dotAnimation();const s=(o=this.getIntersection())==null?void 0:o.point;s&&(n==="editing"?this.hook.emit("getStartPoint",new Li(s)):this.hook.emit("getEndPoint",new Li(s)))}),p(this,"computedCenterMouseXY",()=>{const t=this.container.querySelector(".range-piece__aim");if(!t)return null;const{left:n,top:o,width:s,height:r}=t.getBoundingClientRect(),a=Math.round(n+s/2),l=Math.round(o+r/2),c=T0({x:a,y:l},this.five.getElement());this.centerMouseXY=c}),p(this,"getIntersection",()=>this.centerMouseXY?(this.raycaster.setFromCamera(this.centerMouseXY,this.five.camera),Ci(this.five).intersectRaycaster(this.raycaster)[0]||null):null),this.five=e.five,this.hook=e.hook,this.group=e.group,this.mouseGroup=Iv(W({isMobile:!0},e.openParams.crossHairParameter)),this.container.innerHTML=Cy,this.container.classList.add("range-piece-controller"),this.content=this.container.querySelector(".range-piece__content"),this.content&&(this.content.style.transform=`matrix3d(${this.pieceStyl.matrix3d.toString()}) scale(${this.pieceStyl.scale})`,this.content.style.opacity=`${this.pieceStyl.opacity}`),e.container.append(this.container),this.intersectMesh=new We(new Yt(.04,.08,32),new Ze({color:1245179,opacity:0,side:It,transparent:!0})),this.container.addEventListener("animationend",this.computedCenterMouseXY),this.five.on("cameraUpdate",this.onCameraDirectionUpdate),this.hook.on("willChangeState",this.onWillChangeState)}dispose(){this.container.removeEventListener("animationend",this.computedCenterMouseXY),this.five.off("cameraUpdate",this.onCameraDirectionUpdate),this.hook.off("willChangeState",this.onWillChangeState),this.container.remove(),this.group.remove(this.mouseGroup),this.mouseGroup.remove(),this.hasAppendMouseGroup=!1,this.five.scene.remove(this.intersectMesh)}pieceChange(e){const t=e.face,n=e.point;if(t&&n){const o=t.normal.clone().clone().multiplyScalar(.05),s=n.clone().add(o);this.intersectMesh.position.copy(s);const r=s.clone().add(o);this.intersectMesh.lookAt(r),this.five.scene.add(this.intersectMesh);const a=this.intersectMesh.modelViewMatrix.clone().toArray();this.changePieceStyl("matrix3d",a);const l=this.calculateSize(n);this.changePieceStyl("scale",l)}}calculateSize(e){if(!e)return;const t=this.five.camera.position;let n=e.distanceTo(t);const o=4,s=1;return n>o&&(n=o),n<s&&(n=s),-.51/(o-s)*n+1}dotAnimation(){const e=ou.Easing.Quadratic.InOut,t={opacity:.4,scale:this.pieceStyl.scale},n={opacity:[1,.4],scale:[this.pieceStyl.scale*.8,this.pieceStyl.scale]};let o=Q5;const s=new ou.Tween(t).to(n,500).easing(e).start(0).onUpdate(({opacity:r,scale:a})=>{this.changePieceStyl("scale",a),this.changePieceStyl("opacity",r)}).onComplete(()=>{o()});o=aa(r=>{s.update(r)})}changePieceStyl(e,t){this.content&&(this.pieceStyl[e]=t,this.content.style.transform=`matrix3d(${this.pieceStyl.matrix3d.toString()}) scale(${this.pieceStyl.scale})`,this.content.style.opacity=`${this.pieceStyl.opacity}`)}updateMouseGroup(e,t){if(!this.hasAppendMouseGroup){this.group.add(this.mouseGroup),this.hasAppendMouseGroup=!0;const n=this.container.querySelector(".range-piece__aim");n&&(n.style.opacity="0")}if(!e)return this.mouseGroup;if(this.mouseGroup.position.copy(e.point),t)this.mouseGroup.quaternion.copy(t.quaternion);else if(e.face){const n=e.face.normal.clone().multiplyScalar(.05),o=e.point.clone().add(n).clone().add(n);this.mouseGroup.lookAt(o)}return this.mouseGroup}}class gr extends Rl{constructor(e){super(e),p(this,"state","watching"),p(this,"polyline"),p(this,"hasAppendDashed",!1),p(this,"mobileStartPoint",null),p(this,"mobileNowPoint",null),p(this,"highlightedLines",[]),p(this,"deleteDom"),p(this,"rangePieceController"),p(this,"disposers",[]),p(this,"onWantsTapGesture",t=>{if(this.state==="editing")return!1;const n=Ci(this.five),[o]=n.intersectRaycaster(t);if(!o)return;const s=this.five.camera,r=o.point.clone().project(s),a=this.container.clientWidth,l=this.container.clientHeight,c=new Qe(r.x*a,r.y*l),h=this.model.getAllLines().map(f=>{const[m,g]=f.points,v=m.position.clone().project(s),A=g.position.clone().project(s);if(!Zo(v)&&!Zo(A))return null;const w=new Qe(v.x*a,v.y*l),P=new Qe(A.x*a,A.y*l);return{id:f.id,points:[w,P]}}).filter(f=>!!f);if(h.length===0)return;const d=h.map(f=>{const m=gd(c,f.points);return{id:f.id,distance:m.distanceTo(c)}}).sort((f,m)=>f.distance-m.distance)[0];if(d.distance>20)return;const u=this.model.getAllLines().find(({id:f})=>f===d.id);if(u)return this.chooseLine(u),!1}),p(this,"onWantsToMoveToPano",()=>this.state==="watching"),p(this,"onCameraUpdate",()=>{this.updateDistanceUI(),this.dashed.distanceItem.update(this.five)}),p(this,"updateMobileDashed",()=>{!this.mobileStartPoint||!this.mobileNowPoint||(this.dashed.setPoints(this.mobileStartPoint.position,this.mobileNowPoint.position),this.dashed.distanceItem.update(this.five),this.hook.emit("editedDashedLineChange",this.dashed))}),p(this,"updateMagnifier",t=>{this.magnifier.containerDom!==this.container&&this.magnifier.appendTo(this.container),this.magnifier.state.enabled||this.magnifier.enable(),requestAnimationFrame(()=>this.magnifier.renderWithPoint(t.position)),this.five.needsRender=!0}),p(this,"onGetStartPoint",t=>{this.mobileStartPoint=t,this.polyline=new Xs({model:this.model}),this.polyline.hook.on("lineAdded",()=>this.hook.emit("editedPolylineChange",this.polyline)),this.polyline.hook.on("lineRemoved",()=>this.hook.emit("editedPolylineChange",this.polyline))}),p(this,"onGetEndPoint",()=>{const t=this.mobileNowPoint;if(this.removeLine(this.dashed),this.hasAppendDashed=!1,this.mobileStartPoint&&t){const n=new Us(this.mobileStartPoint,t,this.model);this.polyline.addLine(n),n.distanceItem.appendTo(this.container),n.distanceItem.update(this.five),n.hook.on("selected",this.chooseLine),this.disposers.push(()=>n.hook.off("selected",this.chooseLine)),this.group.add(n.mesh),this.model.addPolyline(this.polyline)}this.mobileStartPoint=null,this.mobileNowPoint=null,this.five.needsRender=!0}),p(this,"onNowPointChange",t=>{if(this.state==="watching"){this.mobileNowPoint=t,this.updateMagnifier(t);return}this.hasAppendDashed||(this.dashed.distanceItem.appendTo(this.container),this.group.add(this.dashed.mesh),this.hasAppendDashed=!0),this.five.needsRender=!0,this.mobileNowPoint=t,this.updateMobileDashed(),this.updateMagnifier(t),this.five.needsRender=!0}),p(this,"onWillChangeState",(t,n)=>{this.state=n,this.state==="watching"?this.five.helperVisible=!0:this.five.helperVisible=!1}),p(this,"chooseLine",t=>{const n=t.getPolyline().lines;this.highlightLines(n),this.five.needsRender=!0,this.hook.emit("selectedChange",n.map(o=>o))}),p(this,"deleteDomClickCallback",()=>{this.highlightedLines.forEach(t=>{this.removeLine(t);const n=this.model.getPolylineByLine(t);this.model.removePolyline(n)}),this.highlightedLines=[],this.deleteDom.setLines([]).hide()}),p(this,"cancelDeleteClickCallback",()=>{this.clearHighlightLines()}),this.model=new Ev(this.config),this.polyline=new Xs({model:this.model}),this.rangePieceController=new Z5(e),this.deleteDom=new md(this.five,{i18n:this.config.i18n,onClick:this.deleteDomClickCallback,cancel:this.cancelDeleteClickCallback}).appendTo(this.container),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("wantsTapGesture",this.onWantsTapGesture),this.five.on("wantsToMoveToPano",this.onWantsToMoveToPano),this.five.helperVisible=!1,this.hook.emit("editedDashedLineChange",null),this.hook.on("getStartPoint",this.onGetStartPoint),this.hook.on("getEndPoint",this.onGetEndPoint),this.hook.on("nowPointChange",this.onNowPointChange),this.hook.on("willChangeState",this.onWillChangeState),this.five.refresh()}dispose(){super.dispose(),this.disposers.forEach(e=>e()),this.five.helperVisible=!0,this.rangePieceController.dispose(),this.group.remove(this.mouseGroup),this.dashed.remove(),this.perpendicularDashed.remove(),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("wantsTapGesture",this.onWantsTapGesture),this.five.off("wantsToMoveToPano",this.onWantsToMoveToPano),this.hook.off("getStartPoint",this.onGetStartPoint),this.hook.off("getEndPoint",this.onGetEndPoint),this.hook.off("nowPointChange",this.onNowPointChange),this.hook.off("willChangeState",this.onWillChangeState),this.hook.emit("selectedChange",[]),this.five.needsRender=!0}highlightLine(e){e.selected||(e.selected=!0,this.group.add(e.lightMesh),e.distanceItem.highlight(),this.five.needsRender=!0)}clearHighlightLines(){this.group.children.length!==0&&(this.deleteDom.setLines([]).hide(),this.model.getAllLines().forEach(e=>{e.selected=!1,e.distanceItem.unHighlight(),this.group.remove(e.lightMesh)}),this.highlightedLines=[],this.five.needsRender=!0)}getEditingLines(){return this.model.polylines}highlightLines(e){this.clearHighlightLines(),this.highlightedLines=e,this.deleteDom.setLines(e).updatePosition().show(),e.forEach(t=>this.highlightLine(t))}}const ul="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxmaWx0ZXIgeD0iLTUuMyUiIHk9Ii01LjMlIiB3aWR0aD0iMTEwLjUlIiBoZWlnaHQ9IjExMC41JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0icHJlZml4X19hIj48ZmVPZmZzZXQgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSIvPjxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIi8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDEgMCAwIDAgMCAxIDAgMCAwIDAgMSAwIDAgMCAwLjUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiLz48L2ZpbHRlcj48ZmlsdGVyIHg9Ii0xMS40JSIgeT0iLTExLjQlIiB3aWR0aD0iMTIyLjklIiBoZWlnaHQ9IjEyMi45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0icHJlZml4X19jIj48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI0LjUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dCbHVySW5uZXIxIi8+PGZlT2Zmc2V0IGluPSJzaGFkb3dCbHVySW5uZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldElubmVyMSIvPjxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93T2Zmc2V0SW5uZXIxIiBpbjI9IlNvdXJjZUFscGhhIiBvcGVyYXRvcj0iYXJpdGhtZXRpYyIgazI9Ii0xIiBrMz0iMSIgcmVzdWx0PSJzaGFkb3dJbm5lcklubmVyMSIvPjxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAxIDAgMCAwIDAgMSAwIDAgMCAwIDEgMCAwIDAgMC4zIDAiIGluPSJzaGFkb3dJbm5lcklubmVyMSIvPjwvZmlsdGVyPjxmaWx0ZXIgeD0iLTEyNi42JSIgeT0iLTMzNy41JSIgd2lkdGg9IjM1My4xJSIgaGVpZ2h0PSI3NzUlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJwcmVmaXhfX2UiPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjE2IiBpbj0iU291cmNlR3JhcGhpYyIvPjwvZmlsdGVyPjxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMTAwJSIgeDI9IjUwJSIgeTI9IjAlIiBpZD0icHJlZml4X19kIj48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9Ii43IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjI2LjQzMiUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iODIuMzA1JSIvPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iLjQiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiIGlkPSJwcmVmaXhfX2YiPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iLjA1IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIuMiIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48Y2lyY2xlIGlkPSJwcmVmaXhfX2IiIGN4PSIzNiIgY3k9IjM2IiByPSIyOC40NDQiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48dXNlIGZpbGw9IiMwMDAiIGZpbHRlcj0idXJsKCNwcmVmaXhfX2EpIiB4bGluazpocmVmPSIjcHJlZml4X19iIi8+PHVzZSBmaWxsPSIjMDAwIiBmaWx0ZXI9InVybCgjcHJlZml4X19jKSIgeGxpbms6aHJlZj0iI3ByZWZpeF9fYiIvPjxjaXJjbGUgc3Ryb2tlPSJ1cmwoI3ByZWZpeF9fZCkiIHN0cm9rZS13aWR0aD0iLjQiIGZpbGwtb3BhY2l0eT0iLjI0MSIgZmlsbD0iI0ZGRiIgc3Ryb2tlLWxpbmVqb2luPSJzcXVhcmUiIGN4PSIzNiIgY3k9IjM2IiByPSIyOC4yNDQiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBvcGFjaXR5PSIuNTk2IiBmaWx0ZXI9InVybCgjcHJlZml4X19lKSIgY3g9IjM2IiBjeT0iMzYiIHJ4PSIxOC45NjMiIHJ5PSI3LjExMSIvPjxwYXRoIGQ9Ik0zNiAwQzE2LjExOCAwIDAgMTYuMTE4IDAgMzZzMTYuMTE4IDM2IDM2IDM2IDM2LTE2LjExOCAzNi0zNlM1NS44ODIgMCAzNiAwem0wIDQuNDQ0YzE3LjQyOCAwIDMxLjU1NiAxNC4xMjggMzEuNTU2IDMxLjU1NlM1My40MjggNjcuNTU2IDM2IDY3LjU1NiA0LjQ0NCA1My40MjggNC40NDQgMzYgMTguNTcyIDQuNDQ0IDM2IDQuNDQ0eiIgZmlsbD0idXJsKCNwcmVmaXhfX2YpIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+",vd="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSIxNS41MSUiIHkxPSIxMi40OTclIiB4Mj0iODUuMjY1JSIgeTI9Ijg2LjE0MyUiIGlkPSJwcmVmaXhfX2IiPjxzdG9wIHN0b3AtY29sb3I9IiM5NUFFRkYiIG9mZnNldD0iMCUiLz48c3RvcCBzdG9wLWNvbG9yPSIjNjM4NkZGIiBvZmZzZXQ9IjEwMCUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMTAwJSIgeDI9IjUwJSIgeTI9IjAlIiBpZD0icHJlZml4X19hIj48c3RvcCBzdG9wLWNvbG9yPSIjOTlBRUZGIiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjI2LjQzMiUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iODIuMzA1JSIvPjxzdG9wIHN0b3AtY29sb3I9IiM5OUFFRkYiIHN0b3Atb3BhY2l0eT0iLjQiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiIGlkPSJwcmVmaXhfX2QiPjxzdG9wIHN0b3AtY29sb3I9IiM4Nzk3RDIiIHN0b3Atb3BhY2l0eT0iLjA1IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iIzYyNzdDNyIgc3RvcC1vcGFjaXR5PSIuMiIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48ZmlsdGVyIHg9Ii02My4zJSIgeT0iLTE2OC44JSIgd2lkdGg9IjIyNi42JSIgaGVpZ2h0PSI0MzcuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9InByZWZpeF9fYyI+PGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iOCIgaW49IlNvdXJjZUdyYXBoaWMiLz48L2ZpbHRlcj48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIHN0cm9rZT0idXJsKCNwcmVmaXhfX2EpIiBzdHJva2Utd2lkdGg9Ii40IiBmaWxsPSJ1cmwoI3ByZWZpeF9fYikiIG9wYWNpdHk9Ii43IiBjeD0iMzYiIGN5PSIzNiIgcj0iMjguMjQ0Ii8+PGVsbGlwc2UgZmlsbD0iIzdDOTBEQSIgb3BhY2l0eT0iLjU5NiIgZmlsdGVyPSJ1cmwoI3ByZWZpeF9fYykiIGN4PSIzNiIgY3k9IjM2IiByeD0iMTguOTYzIiByeT0iNy4xMTEiLz48cGF0aCBkPSJNMzYgMEMxNi4xMTggMCAwIDE2LjExOCAwIDM2czE2LjExOCAzNiAzNiAzNiAzNi0xNi4xMTggMzYtMzZTNTUuODgyIDAgMzYgMHptMCA0LjQ0NGMxNy40MjggMCAzMS41NTYgMTQuMTI4IDMxLjU1NiAzMS41NTZTNTMuNDI4IDY3LjU1NiAzNiA2Ny41NTYgNC40NDQgNTMuNDI4IDQuNDQ0IDM2IDE4LjU3MiA0LjQ0NCAzNiA0LjQ0NHoiIGZpbGw9InVybCgjcHJlZml4X19kKSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==",J5=`
  <svg class="fpm__exit-icon width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="86.3016741%" id="radialGradient-1">
        <stop stop-color="#FFFFFF" offset="0%"></stop>
        <stop stop-color="#FFFFFF" stop-opacity="0.3" offset="100%"></stop>
      </radialGradient>
      <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70.7106781%" id="radialGradient-2">
        <stop stop-color="#FFFFFF" offset="0%"></stop>
        <stop stop-color="#FFFFFF" stop-opacity="0" offset="100%"></stop>
      </radialGradient>
    </defs>
      <g fill="url(#radialGradient-1)" fill-rule="nonzero" stroke="url(#radialGradient-2)" stroke-width="0.2">
        <path d="M19.1859205,4.10000004 C19.3691554,4.09993923 19.5526088,4.16602323 19.6925352,4.29904206 C19.8171021,4.41745965 19.8858582,4.56899486 19.8980316,4.7239943 C19.9103475,4.88080848 19.8647874,5.04088037 19.7661957,5.16777131 L19.7661957,5.16777131 L14.3769795,11.1697063 C14.1649599,11.4058657 14.0589501,11.7029328 14.0589501,12 C14.0589501,12.2970672 14.1649599,12.5941343 14.3769795,12.8302937 L14.3769795,12.8302937 L19.6928862,18.7509889 C19.8173649,18.8694879 19.8860087,19.0210672 19.8980683,19.1760728 C19.9102693,19.3328965 19.8645908,19.4929392 19.7701664,19.6153111 C19.6099275,19.772809 19.4324896,19.8610254 19.2586274,19.8856752 C19.0810547,19.910851 18.9081905,19.8692156 18.765363,19.7704965 L18.765363,19.7704965 L11.9999322,13.2904645 L5.32508998,19.6962598 C5.16077108,19.8156635 4.99335965,19.8785989 4.83451361,19.8898888 C4.67442082,19.9012674 4.52389835,19.8596921 4.3968979,19.7731206 C4.23619359,19.588506 4.14871527,19.4164558 4.12392544,19.2589757 C4.09801173,19.094356 4.14341261,18.9485987 4.23380428,18.8322287 L4.23380428,18.8322287 L9.62302046,12.8302937 C9.81773049,12.6134147 9.92302682,12.3451662 9.93892926,12.0727274 C9.95499717,11.7974536 9.87975312,11.5179151 9.70614397,11.2737767 L9.70614397,11.2737767 L4.31595492,5.25860214 C4.17860663,5.08857057 4.11166276,4.9104714 4.11172409,4.7432513 C4.11178577,4.57506821 4.18051603,4.41972395 4.30746483,4.29904206 C4.43371817,4.17902131 4.59543385,4.11349344 4.76041858,4.10187732 L4.76041858,4.10187732 L12.0000677,10.7085251 L18.6794563,4.29937602 C18.8192839,4.16626546 19.0026873,4.10006086 19.1859205,4.10000004 Z" id="形状结合"></path>
      </g>
  </svg>
`,K5=`
  <style>
  .mobile .fpm__exit {
    position: absolute;
    top: 53px;
    left: 16px;
    width: 24px;
    height: 24px;
    z-index: 10;
    pointer-events: all;
  }
  .mobile .fpm__exit-icon {
    width: 100%;
    height: 100%;
    cursor: pointer;
  }
  .fpm_operating--mobile {
    padding-bottom: 23px;
  }
  .fpm__main-btn {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 !important;
  }
  .fpm__main-btn-text {
    position: absolute;
    font-weight: 500;
    font-size: 14px;
    color: #FFFFFF;
    text-align: center;
    text-shadow: 0 2px 8px rgba(0,0,0,0.50);
    transition: all 200ms ease-in-out;
  }
  .fpm__main-text__hide {
    transform: scale(0.8) translateY(4px);
    opacity: 0;
  }
  .fpm__main-text__show {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
  .fpm__main__start {
    background-image: url(${ul});
  }
  .fpm__main__end {
    background-image: url(${vd});
  }

  </style>
  <div class="fpm__exit">
    ${J5}
  </div>
  <div class="fpm_ui-bg"></div>
  <div class="fpm_operating-space fpm_operating--mobile">
    <div class="fpm__main fpm__main-btn">
      <div class="fpm__main-icon fpm__main__start"></div>
      <div class="fpm__text fpm__main-text fpm__main-btn-text"></div>
    </div>
  </div>
`,_5=`
  <svg class="fpm__revoke-icon" width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient x1="47.631%" y1="55.183%" x2="2.967%" y2="86.323%" id="fpm__revoke-a">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".5" offset="100%" />
      </linearGradient>
      <linearGradient x1="5.297%" y1="43.016%" x2="38.238%" y2="79.932%" id="fpm__revoke-b">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity="0" offset="100%" />
      </linearGradient>
    </defs>
    <path
      d="M13.388 7.108c.552 0 1.005.42 1.06.957l.006.11v1.224c0 .921.745 1.667 1.666 1.667h7.184c5.804 0 10.509 4.616 10.509 10.309 0 5.595-4.544 10.15-10.21 10.305l-.3.004H8.924c-.917 0-1.66-.729-1.66-1.628 0-.846.658-1.541 1.5-1.62l.16-.008h14.38c3.972 0 7.191-3.158 7.191-7.053 0-3.81-3.08-6.916-6.933-7.049l-.257-.004H10.029l-.109-.005H8.212c-.245 0-.482-.085-.67-.237l-.09-.082a1.066 1.066 0 0 1-.065-1.422l.079-.086 5.175-5.077c.2-.195.468-.305.747-.305z"
      fill="url(#fpm__revoke-a)"
      fill-rule="nonzero"
      stroke="url(#fpm__revoke-b)"
      stroke-width=".5"
    />
  </svg>
`,$5=`
  <svg class="fpm__exit-icon width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient x1="36.288%" y1="73.736%" x2="54.242%" y2="97.166%" id="fpm__exit-a">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".5" offset="100%" />
      </linearGradient>
      <linearGradient x1="100%" y1="47.234%" x2="24.047%" y2="47.234%" id="fpm__exit-b">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".005" offset="99.535%" />
        <stop stop-color="#FFF" stop-opacity="0" offset="100%" />
      </linearGradient>
    </defs>
    <path
      d="M22 7a1.5 1.5 0 0 1 .144 2.993L22 10h-9a1.5 1.5 0 0 0-1.493 1.356l-.007.144v17a1.5 1.5 0 0 0 1.356 1.493L13 30h9a1.5 1.5 0 0 1 .144 2.993L22 33h-9a4.5 4.5 0 0 1-4.495-4.288L8.5 28.5v-17a4.5 4.5 0 0 1 4.288-4.495L13 7h9zm6.317 7.755a1 1 0 0 1 .7.286l4.856 4.764a1 1 0 0 1-.7 1.713h-5.856V21.5h-8.032a1.5 1.5 0 1 1 0-3h6.365c.92 0 1.666-.746 1.667-1.667v-1.078a1 1 0 0 1 1-1z"
      fill="url(#fpm__exit-a)"
      fill-rule="nonzero"
      stroke="url(#fpm__exit-b)"
      stroke-width=".5"
    />
  </svg>
`,e4=`
  <style>
    .fpm__other-btn {
      height: 40px;
      width: 88px;
      background: rgba(0, 0, 0, 0.15);
      border-radius: 20px;
      overflow: hidden;    
    }

    .fpm__other-content {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .fpm__revoke {
      opacity: 0.3;
    }  
    .fpm__revoke.enabled {
      opacity: 0.85;
    }    
    .fpm__revoke.enabled:hover {
      opacity: 1;
    }
    
    .fpm__revoke-icon {
      width: 24px;
      height: 24px;
      margin-right: 4px;
      cursor: pointer;
    }
    
    .fpm__main-btn {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .fpm__main-btn-text {
      position: absolute;
      font-weight: 500;
      font-size: 14px;
      color: #FFFFFF;
      text-align: center;
      text-shadow: 0 2px 8px rgba(0,0,0,0.50);
      transition: all 200ms ease-in-out;
    }
    .fpm__main-text__hide {
      transform: scale(0.8) translateY(4px);
      opacity: 0;
    }
    .fpm__main-text__show {
      transform: scale(1) translateY(0);
      opacity: 1;
    }
    .fpm__main__start {
      background-image: url(${ul});
    }
    .fpm__main__end {
      background-image: url(${vd});
    }
    
  </style>
  <div class="fpm_ui-bg"></div>
  <div class="fpm_operating-space">
    <div class="fpm__other-btn">
      <div class="fpm__other-content fpm__revoke">
        ${_5}
        <span class="fpm__text fpm__revoke-text"></span>
      </div>
    </div>
    <div class="fpm__main fpm__main-btn">
      <div class="fpm__main-icon fpm__main__start"></div>
      <div class="fpm__text fpm__main-text fpm__main-btn-text"></div>
    </div>
    <div class="fpm__other-btn">
      <div class="fpm__other-content fpm__exit">
        ${$5}
        <span class="fpm__text fpm__exit-text"></span>
      </div>
    </div>
  </div>
`,t4={display:"none",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",opacity:"0",transform:"translate(0, 10px)",transition:"opacity 500ms ease-in-out, transform 500ms ease-in-out"},i4={position:"absolute",left:"50%",bottom:"32px",transform:"translateX(-50%)",height:"89px",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"14px",pointerEvents:"all",color:"#fff",zIndex:"10"},n4={position:"absolute",bottom:"0",left:"0",opacity:"0.5",width:"100%",height:"184px",background:"linear-gradient(180deg, rgba(0,0,0,0.00) 0%, #000000 100%)",zIndex:"0"},Mv={margin:"0 64px"},o4={opacity:"0.85"},Sv={width:"72px",height:"72px",backgroundSize:"100%",cursor:"pointer",transition:"all 200ms ease-in-out"},s4={width:"24px",height:"24px",marginRight:"4px",backgroundSize:"100%",cursor:"pointer"},r4={userSelect:"none",pointerEvents:"none"};class a4{constructor(e,t,n){p(this,"container"),p(this,"measureController"),p(this,"mainElement"),p(this,"_params"),p(this,"_btnTexts",{start:"开始",end:"结束",revoke:"撤销",exit:"退出"}),p(this,"onMouseEnter",()=>{const{mainItem:h}=this.mainElement;h.style.opacity="1"}),p(this,"onMouseLeave",()=>{const{mainItem:h}=this.mainElement;h.style.opacity="0.85"}),p(this,"onClick",()=>{this.measureController.getCurrentMode()!=="Edit"?this.measureController.changeMode("Edit"):this.measureController.save().changeMode("Watch")}),p(this,"modeChangeHandler",h=>{h==="Edit"?this.change2Done():this.change2Add()});var o,s,r,a;this._params=n,this._btnTexts={start:(o=this._params.startButtonText)!=null?o:this._btnTexts.start,end:(s=this._params.endButtonText)!=null?s:this._btnTexts.end,revoke:(r=this._params.revokeButtonText)!=null?r:this._btnTexts.revoke,exit:(a=this._params.exitButtonText)!=null?a:this._btnTexts.exit},this.measureController=e,this.container=t,this.mainElement=this.getMainElement(),Object.assign(this.mainElement.mainIcon.style,Sv),Object.assign(this.mainElement.mainItem.style,Mv);const{revokeTextDom:l,exitTextDom:c}=this._getTextElement();l&&(l.innerText=this._btnTexts.revoke),c&&(c.innerText=this._btnTexts.exit),this.change2Add(),this.measureController.hook.on("modeChange",this.modeChangeHandler),this.mainElement.mainItem.addEventListener("click",this.onClick),this.mainElement.mainItem.addEventListener("mouseenter",this.onMouseEnter),this.mainElement.mainItem.addEventListener("mouseleave",this.onMouseLeave)}dispose(){this.measureController.hook.off("modeChange",this.modeChangeHandler),this.mainElement.mainItem.removeEventListener("click",this.onClick),this.mainElement.mainItem.removeEventListener("mouseenter",this.onMouseEnter),this.mainElement.mainItem.removeEventListener("mouseleave",this.onMouseLeave)}getMainElement(){const e=this.container.querySelector(".fpm__main-text"),t=this.container.querySelector(".fpm__main"),n=this.container.querySelector(".fpm__main-icon");if(!t||!e||!n)throw new Error("cannot find dom");return{mainTextDom:e,mainItem:t,mainIcon:n}}_getTextElement(){const e=this.container.querySelector(".fpm__revoke-text"),t=this.container.querySelector(".fpm__exit-text");return{revokeTextDom:e,exitTextDom:t}}change2Add(){const{mainIcon:e,mainTextDom:t}=this.mainElement;if(e.className.includes("fpm__main__start")){t.innerText=this._btnTexts.start;return}e.className.includes("fpm__main__end")&&(e.style.transform="scale(0.8)",t.className.includes("fpm__main-text__show")?t.classList.replace("fpm__main-text__show","fpm__main-text__hide"):t.classList.add("fpm__main-text__hide"),setTimeout(()=>{e.classList.replace("fpm__main__end","fpm__main__start"),e.style.transform="scale(1)",t.innerText=this._btnTexts.start,t.classList.replace("fpm__main-text__hide","fpm__main-text__show")},200))}change2Done(){const{mainTextDom:e,mainIcon:t}=this.getMainElement();e.innerText!==this._btnTexts.end&&(t.className.includes("fpm__main__end")||t.className.includes("fpm__main__start")&&(t.style.transform="scale(0.8)",e.className.includes("fpm__main-text__show")?e.classList.replace("fpm__main-text__show","fpm__main-text__hide"):e.classList.add("fpm__main-text__hide"),setTimeout(()=>{t.classList.replace("fpm__main__start","fpm__main__end"),t.style.transform="scale(1)",e.innerText=this._btnTexts.end,e.classList.replace("fpm__main-text__hide","fpm__main-text__show")},200)))}}class l4{constructor(e,t,n){p(this,"container"),p(this,"measureController"),p(this,"mainElement"),p(this,"_params"),p(this,"_btnTexts",{start:"开始",end:"结束"}),p(this,"onClick",()=>{var r;this.mainElement.mainTextDom.innerText===((r=this._params.startButtonText)!=null?r:"开始")?(this.measureController.hook.emit("willChangeState","watching","editing"),this.change2Done()):(this.measureController.hook.emit("willChangeState","editing","watching"),this.change2Add())});var o,s;this._params=n,this._btnTexts={start:(o=this._params.startButtonText)!=null?o:this._btnTexts.start,end:(s=this._params.endButtonText)!=null?s:this._btnTexts.end},this.measureController=e,this.container=t,this.mainElement=this.getMainElement(),this.mainElement.mainIcon.setAttribute("style","-webkit-tap-highlight-color: rgba(0,0,0,0);"),Object.assign(this.mainElement.mainIcon.style,Sv),Object.assign(this.mainElement.mainItem.style,Mv),this.change2Add(),this.mainElement.mainItem.addEventListener("click",this.onClick)}dispose(){this.mainElement.mainItem.removeEventListener("click",this.onClick)}getMainElement(){const e=this.container.querySelector(".fpm__main-text"),t=this.container.querySelector(".fpm__main"),n=this.container.querySelector(".fpm__main-icon");if(!t||!e||!n)throw new Error("cannot find dom");return{mainTextDom:e,mainItem:t,mainIcon:n}}change2Add(){const{mainIcon:e,mainTextDom:t}=this.mainElement;if(e.className.includes("fpm__main__start")){t.innerText=this._btnTexts.start;return}e.className.includes("fpm__main__end")&&(e.style.transform="scale(0.8)",t.className.includes("fpm__main-text__show")?t.classList.replace("fpm__main-text__show","fpm__main-text__hide"):t.classList.add("fpm__main-text__hide"),setTimeout(()=>{e.classList.replace("fpm__main__end","fpm__main__start"),e.style.transform="scale(1)",t.innerText=this._btnTexts.start,t.classList.replace("fpm__main-text__hide","fpm__main-text__show")},200))}change2Done(){const{mainTextDom:e,mainIcon:t}=this.mainElement;e.innerText!==this._btnTexts.end&&(t.className.includes("fpm__main__end")||t.className.includes("fpm__main__start")&&(t.style.transform="scale(0.8)",e.className.includes("fpm__main-text__show")?e.classList.replace("fpm__main-text__show","fpm__main-text__hide"):e.classList.add("fpm__main-text__hide"),setTimeout(()=>{t.classList.replace("fpm__main__start","fpm__main__end"),t.style.transform="scale(1)",e.innerText=this._btnTexts.end,e.classList.replace("fpm__main-text__hide","fpm__main-text__show")},200)))}}class c4{constructor(e,t){p(this,"container"),p(this,"revokeIcon"),p(this,"revokeItem"),p(this,"measureController"),p(this,"onClick",()=>{this.measureController.revoke()}),p(this,"onModeChange",s=>{if(s!=="Edit"&&this.revokeItem.className.includes("enabled")){this.revokeItem.classList.remove("enabled"),this.measureController.hook.off("anchorChange",this.onAnchorChange);return}this.measureController.hook.on("anchorChange",this.onAnchorChange)}),p(this,"onAnchorChange",s=>{s&&this.revokeItem.classList.add("enabled")}),this.measureController=e,this.container=t;const n=this.container.querySelector(".fpm__revoke-icon"),o=this.container.querySelector(".fpm__revoke");if(!n||!o)throw new Error("不正确的选择器");this.revokeIcon=n,this.revokeItem=o,this.revokeItem.addEventListener("click",this.onClick),e.hook.on("modeChange",this.onModeChange)}dispose(){this.revokeItem.removeEventListener("click",this.onClick),this.measureController.hook.off("modeChange",this.onModeChange)}}function h4(i){Ee(i,"svelte-1v1ixi2",'.Switcher.svelte-1v1ixi2.svelte-1v1ixi2{position:relative;box-sizing:border-box;width:-moz-max-content;width:max-content}.Switcher.svelte-1v1ixi2 .content.svelte-1v1ixi2,.Switcher.svelte-1v1ixi2 .active-slider.svelte-1v1ixi2{transition-property:transform, width, opacity;transition-duration:300ms;transition-timing-function:ease-out}.Switcher-bg.svelte-1v1ixi2.svelte-1v1ixi2{content:"";position:absolute;box-sizing:border-box;top:50%;left:0;width:100%;height:3.75rem;transform:translateY(-50%);border-style:solid;border-width:0rem 1.875rem;-o-border-image:url("data:image/png;base64,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");border-image:url("data:image/png;base64,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");border-image-slice:0 90 fill}.Switcher-buttons.svelte-1v1ixi2.svelte-1v1ixi2{display:flex;align-items:center;box-sizing:border-box;padding:0 0.1875rem;height:100%}.Switcher-buttons.has-divider.svelte-1v1ixi2 .button.svelte-1v1ixi2:not(:last-child)::after{content:"";position:absolute;right:0;top:10%;height:80%;width:0.0625rem;background-image:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.3), transparent);background-size:100%;background-repeat:no-repeat;background-position:center}.active-slider.svelte-1v1ixi2.svelte-1v1ixi2{box-sizing:border-box;position:absolute;height:3.25rem;top:50%;transform:translate(0, -50%);border-style:solid;border-width:0rem 1.875rem;-o-border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXQAAACcCAMAAABY3aA6AAAAhFBMVEX///////8AAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////88i7DIAAAALHRSTlNmawBvc3d6BAcZDid8NwyFja/XEhYkHTErIS41gpajnUyRVEE7XKpiRczDuH1q6FcAAA1mSURBVHja7Ndtk5owFAXg2KKtiiUdlTdBYH1Z//8vbC4SjkmuDlpmOht7AWfdLyaPZw4ovo06PzydcZX+Eh3QP99gXvsCRkbvsX91s/B29A41/rch9mOjq09twUl6TbNRM/d4aH9rmsWVfkDmx0XX4ORN1HGcZdlWzdLbod2pTcYx8St5Dc/7jIiOjGtw4lbSaZ4nSbJTs/J0aG9qi3meKn+i1/AM+/joWlyBk3eaJ7tj/RlEsiyr/fm3t3PeV2Upo+CzPu6SPFXyBM+4j4oO8k6cwI+nUFbdihopI49HyqbLVSXD05HgO3ejZsZDR5OrkHfiCnxWns9VKaNQzczzCa+vaiJZVudzOVPwnbuKO9RHRidyCnkrLqQCb6I73FNvhtsdyTcKXorWneIO9jHRf1zJ5/F2ma9O0X5fEriXzvfHgi/3++i0ypfbeA72EdF78jS5TKtW/J20efvWvZpekvRJdjH49rneEHld7CsZhhx44Pm48OQuq31RE/tmPfhJRgwzBzlC7mhPA2/hsTXYI+5gH/YgI4aWebZM6qhqil4c4P5ac/o0lntRVlGdLLOhHSMGxnyZH6Y9Od8n3z0fvm069qaaHvLlwLCLQTfQbbr7LEuD3NUOPD9c+1v2qCw/d+n2GvbX0RFzahbd5ZZ4z+190G/xLXfd7apjdNhfQof5PEtXk1K65AB3ZmJfX2bshbP47TDsspys0mwO9RfQ1YPiYh1v80PRFA656327dPui40uczsIxVurhDnYFdci38XqBh8cn0anOqVo+JMXcJg8c7W7V7sq/UNCZvOjDtmfYKezygyoGxf4celvnVC1N1Mdci2M099eSfWVu8cGu3fuwRw1VTFvsT6Kjzo+hLBBzM+Tv4+3g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");border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXQAAACcCAMAAABY3aA6AAAAhFBMVEX///////8AAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////88i7DIAAAALHRSTlNmawBvc3d6BAcZDid8NwyFja/XEhYkHTErIS41gpajnUyRVEE7XKpiRczDuH1q6FcAAA1mSURBVHja7Ndtk5owFAXg2KKtiiUdlTdBYH1Z//8vbC4SjkmuDlpmOht7AWfdLyaPZw4ovo06PzydcZX+Eh3QP99gXvsCRkbvsX91s/B29A41/rch9mOjq09twUl6TbNRM/d4aH9rmsWVfkDmx0XX4ORN1HGcZdlWzdLbod2pTcYx8St5Dc/7jIiOjGtw4lbSaZ4nSbJTs/J0aG9qi3meKn+i1/AM+/joWlyBk3eaJ7tj/RlEsiyr/fm3t3PeV2Upo+CzPu6SPFXyBM+4j4oO8k6cwI+nUFbdihopI49HyqbLVSXD05HgO3ejZsZDR5OrkHfiCnxWns9VKaNQzczzCa+vaiJZVudzOVPwnbuKO9RHRidyCnkrLqQCb6I73FNvhtsdyTcKXorWneIO9jHRf1zJ5/F2ma9O0X5fEriXzvfHgi/3++i0ypfbeA72EdF78jS5TKtW/J20efvWvZpekvRJdjH49rneEHld7CsZhhx44Pm48OQuq31RE/tmPfhJRgwzBzlC7mhPA2/hsTXYI+5gH/YgI4aWebZM6qhqil4c4P5ac/o0lntRVlGdLLOhHSMGxnyZH6Y9Od8n3z0fvm069qaaHvLlwLCLQTfQbbr7LEuD3NUOPD9c+1v2qCw/d+n2GvbX0RFzahbd5ZZ4z+190G/xLXfd7apjdNhfQof5PEtXk1K65AB3ZmJfX2bshbP47TDsspys0mwO9RfQ1YPiYh1v80PRFA656327dPui40uczsIxVurhDnYFdci38XqBh8cn0anOqVo+JMXcJg8c7W7V7sq/UNCZvOjDtmfYKezygyoGxf4celvnVC1N1Mdci2M099eSfWVu8cGu3fuwRw1VTFvsT6Kjzo+hLBBzM+Tv4+3g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");border-image-slice:0 90 fill}.button.svelte-1v1ixi2.svelte-1v1ixi2{height:3.5rem;display:flex;position:relative;cursor:pointer;align-items:center;justify-content:center;pointer-events:all;width:7.25rem}.button.svelte-1v1ixi2 .content.svelte-1v1ixi2{position:absolute;display:flex;align-items:center;font-size:1rem;color:#fff;text-shadow:0 0.125rem 0.5rem rgba(0, 0, 0, 0.5);font-weight:bold}.button.svelte-1v1ixi2 .content .icon.svelte-1v1ixi2{display:inline-block;width:1.15625rem;height:1.15625rem;background-repeat:no-repeat;background-size:100%;margin-right:0.125rem}.button.svelte-1v1ixi2:not(.active) .content.svelte-1v1ixi2{opacity:0.65;transform:scale(0.875)}.button.svelte-1v1ixi2:not(.active) .content.svelte-1v1ixi2:hover{opacity:0.85}.button.active.svelte-1v1ixi2 .content.svelte-1v1ixi2{opacity:1;transform:scale(1)}')}function Qp(i,e,t){const n=i.slice();return n[13]=e[t],n[14]=e,n[15]=t,n}function Up(i){let e;return{c(){e=U("div"),b(e,"class","active-slider svelte-1v1ixi2"),N(e,"width",i[6]+"px"),N(e,"transform",`translate(${i[7]}px, -50%)`)},m(t,n){Y(t,e,n)},p(t,n){n&64&&N(e,"width",t[6]+"px"),n&128&&N(e,"transform",`translate(${t[7]}px, -50%)`)},d(t){t&&Q(e)}}}function Xp(i){let e;return{c(){e=U("span"),b(e,"class","icon svelte-1v1ixi2"),N(e,"background-image",`url(${i[13].icon})`)},m(t,n){Y(t,e,n)},p(t,n){n&1&&N(e,"background-image",`url(${t[13].icon})`)},d(t){t&&Q(e)}}}function Yp(i){let e,t,n,o=i[13].value+"",s,r,a=i[15],l,c,h=i[13].icon&&Xp(i);const d=()=>i[10](e,a),u=()=>i[10](null,a);function f(){return i[11](i[13],i[15])}return{c(){e=U("div"),t=U("div"),h&&h.c(),n=re(),s=Te(o),r=re(),b(t,"class","content svelte-1v1ixi2"),b(e,"class","button svelte-1v1ixi2"),we(e,"active",i[4]===i[15])},m(m,g){Y(m,e,g),H(e,t),h&&h.m(t,null),H(t,n),H(t,s),H(e,r),d(),l||(c=Se(e,"click",f),l=!0)},p(m,g){i=m,i[13].icon?h?h.p(i,g):(h=Xp(i),h.c(),h.m(t,n)):h&&(h.d(1),h=null),g&1&&o!==(o=i[13].value+"")&&Ne(s,o),a!==i[15]&&(u(),a=i[15],d()),g&16&&we(e,"active",i[4]===i[15])},d(m){m&&Q(e),h&&h.d(),u(),l=!1,c()}}}function d4(i){let e,t,n,o,s,r=i[5]&&Up(i),a=i[0],l=[];for(let c=0;c<a.length;c+=1)l[c]=Yp(Qp(i,a,c));return{c(){e=U("div"),t=U("div"),n=re(),r&&r.c(),o=re(),s=U("div");for(let c=0;c<l.length;c+=1)l[c].c();b(t,"class","Switcher-bg svelte-1v1ixi2"),b(s,"class","Switcher-buttons svelte-1v1ixi2"),we(s,"has-divider",!i[5]),b(e,"class","Switcher svelte-1v1ixi2")},m(c,h){Y(c,e,h),H(e,t),H(e,n),r&&r.m(e,null),H(e,o),H(e,s);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(s,null);i[12](e)},p(c,[h]){if(c[5]?r?r.p(c,h):(r=Up(c),r.c(),r.m(e,o)):r&&(r.d(1),r=null),h&23){a=c[0];let d;for(d=0;d<a.length;d+=1){const u=Qp(c,a,d);l[d]?l[d].p(u,h):(l[d]=Yp(u),l[d].c(),l[d].m(s,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=a.length}h&32&&we(s,"has-divider",!c[5])},i:oe,o:oe,d(c){c&&Q(e),r&&r.d(),un(l,c),i[12](null)}}}function u4(i,e,t){let n;const o=g=>{t(4,c=g)};let{options:s}=e,{onChange:r}=e;const a=[];let l,c=null,h,d;function u(g,v){_e[g?"unshift":"push"](()=>{a[v]=g,t(2,a)})}const f=(g,v)=>{r(g.key),t(4,c=v)};function m(g){_e[g?"unshift":"push"](()=>{l=g,t(3,l)})}return i.$$set=g=>{"options"in g&&t(0,s=g.options),"onChange"in g&&t(1,r=g.onChange)},i.$$.update=()=>{i.$$.dirty&20&&t(5,n=a[c]),i.$$.dirty&40&&n&&l&&setTimeout(()=>{t(6,h=n.clientWidth),t(7,d=n.getBoundingClientRect().left-l.getBoundingClientRect().left)},0)},[s,r,a,l,c,n,h,d,null,o,u,f,m]}class p4 extends ye{constructor(e){super(),Ae(this,e,u4,d4,ve,{defaultIndex:8,setIndex:9,options:0,onChange:1},h4)}get defaultIndex(){return this.$$.ctx[8]}get setIndex(){return this.$$.ctx[9]}}function f4(i){Ee(i,"svelte-1m0stw",".exit.svelte-1m0stw{position:relative;pointer-events:all;cursor:pointer;left:1.5rem;top:1.5rem;width:1.5rem;height:1.5rem;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAAFrklEQVR4Ae2bW8hmUxjH5zOM0zhETSQaRkaMs5lGLqQ0otA4ZJCUSCMph3AxSklTLkxIShPFheTQJBQuiFxoJjeSRHzG+dAwzufP7/fNeqZle1+a7LX3+rKf+s+z1trvt/f6/3r22nu/+51Zs4YYCAwEBgIDgYHAQGAgMBAYCAwEtp3AxLb/SR1/MTU15dwPQXujzejtiYmJX8itxowEBJzZUDgF7YN+RoL5Cr0EpN/JrcV2re2pox0lOKdxuAMah5xLf15j7D93ZxSgBOdMXM9PzqcaufUzYsYAAs72wDgHHZigCCMH8iP9z9K21pIHrT4SnBVMdH8UC3FUj/P/Da1ve/1xx9VXUIJzMXM92AkTASavHuF4JWs9qgYEnB1wfCnyct6MALUBOJ82N7bVrxZQgnMFRheigJFXje03gPNOWzBG7adKQMCZw2SvQsIxAkyAcuxd4GywUTKqW6QTnGswvQCNWpCF5Sn1IioeVQFKcG7EtQuycPKKCRguxk9TPV65ikc1pxhwdsTtKnR4ci0cqyXksPc6jwPH3ElUASjBuQXHi1Czauwrn7GE4zNXZ9E7IODshNvb0JEjXOew1gHngxGfKTrUKyDg7Iy729HRmcu4YsWQ/eeB83oMdJl7A5TgrMGscPJKyf0L51XgvJAPdtnuBRBwdsHkPeiYZLZZNcHgLRqPRaeP3DmgBOc+zAacpu+opo/YsJbqafULsObB/q3fKSDgzGVCD6Bj08QCRuSopK/ZfjdwOrucp/n8LXUGKMF5iBkcl2YhjADikJCUN4hrgLOJ3Ht0cicNnN1w+gg6AuWPD1E5ghDWH+hO4EySq4jiFQSc3XH6BDo+Oc6hNCHcD5zXmoN99osCAs4emHsKLUGjwOSnmDeCz/QJY9SxiwFKcJ7loIsTnByGc8n7r9Bf62BtUQRQgvMcZoVjCKNZQfbVm2g11dPcznD/UQQQtqwGT6uoEs1HOzJDs35Cq4Djy78qo3VAVI9XqnOT27wqRrWfBM4XVZJJk2odEPs9bIzhqJy8mt4b89lqhksAyk0HlHGG9x23oZbxEoDWY+7lZDA/rcJzDu0MTsldY0ONuXVA6Wp0EWYnxxjOoe3FZ1YBKYc25s/6GW4dkDaA5Dd/J6FJZPwTgBPZvnL6UxX+UwSQPoG0kXQyck2yavLKofsXaGdTRWc5WFsUA6TRBGkZzUm7yIjcBHY5kLx3qiqKAtIpkD4knY6sJCMHE22z4K4F0gI/VEsUB6RRIH1MWo4mUYRAopocE9IcdAOQ/N1hFdEJIJ0mSOfRfD85F0hUkEMBy69HrgOS31v3Hp0B0imQfKd+IQpIDjdDUPuhlUCa3dzYdb9TQJoDkj+TuwQJKaqG5taIqlrIyAVbR3tqdA5In0D6nHQZikoSVIChOR2OLaWKvAr2Fr0A0i2QviRdiTYi4TSryTF1KpDGvSJic9noDZC2EqSraXrnPSoCmjeS80d9oPRYr4A0B6RNpOtRQAoo5jjtXKxXAKnzy3/vgDAekG6i6U1lRJx2glL+CuR8IHV6+a8CkESoJN+m3oyikhw2Yi2y7VuS5UDq5H2eB6wGkJMB0mbSrcj38kacYlt6WyrJ/8CyDEhxKsa2IrkqQDoE0jek1Sgg5SCimg5i+1JUPKoDpGMgfUu6A32CYi2iOb0WBbBFVNGhDpaMKgFpOEG6i2ZAiuqJ005QS4DkY0mxqBaQjoH0Hele5DOcQEI0t1bWCUDa04ESUTUgDQPpe5IvIoUUVURzOux7RROSv3dsPaoHpGMg/UB6EPmgG5FXk/dIi4HUup/WdxizbzsnSA+z33gTG2tRHMp7pHnRaSvPGEAaBpI/yXsUCckKMiLb9pGk1ZhRgHQOJH/wsA41K+lXxvwapdXI6be649I7Y73x++ujkC8fvQP3/455/zTEQGAgMBAYCPxfCPwJssZtZ7WkgCEAAAAASUVORK5CYII=);background-repeat:no-repeat;background-size:100% 100%}")}function m4(i){let e,t,n;return{c(){e=U("div"),b(e,"class","exit svelte-1m0stw")},m(o,s){Y(o,e,s),t||(n=Se(e,"click",function(){oi(i[0])&&i[0].apply(this,arguments)}),t=!0)},p(o,[s]){i=o},i:oe,o:oe,d(o){o&&Q(e),t=!1,n()}}}function g4(i,e,t){let{onClick:n=null}=e;return i.$$set=o=>{"onClick"in o&&t(0,n=o.onClick)},[n]}class Dv extends ye{constructor(e){super(),Ae(this,e,g4,m4,ve,{onClick:0},f4)}}const kv="data:image/png;base64,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",zv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAAFO0lEQVR4Ae2YWYgdRRSG78SFOG6Ju4MxIRnRgCCKBlSC24P64IO4h7wI6oMPCioqAX1TfFIQRFFBETQmIioqGhDBh3GJiMSAZnABNSIuUQTFbcz4fZcup297b9+t7525wznwU11d1aervj6nurprtbAgEASCQBAIAkEgCASBIBAEgkAQCAJBIAgEgSAQBIJAEMgIzM7OLkHL0STaJ8DMgRkDyDK0CX2MptEUOrMbSGPddB6VvkAwUo5Hd6OzCuP+hfr5Y2NjvxbON60uaXp2hE8CZ3+GfzJ6ABXhOLND0VoPOrF9O+k0Kn2AM85Y16M70UTJuL8taWtoWjSAgHMYM7sQ3YyWN8yysbKZ9NrdeKp1bVGsQcBxvbkUXYsOaD3d2jbabgXQ3yV9GppGPoKA43pyDboclb3G36T9rm7g0L82soAAY/S7CG9E56GybHiLduH4BuvKRhIQcIyUi5BwTmsz47dpvwftadOvafPIAQLOUmZiSl2JVjed1dzJ7Rzei74iembnTnd+NFKAgHMIU7seXYKObTPN92kXzue9wtH/yAACjkBuQecgN3tltoNGN4rTwNlb1rFd20gAAs4JTOR2dAYqe407351IOB/2C0dnlQBiAm7vZ6oYkIPKG77XUd+E1iDvU2bTND6I3qtqLH0BYvDuWP3uORHNUHeAOxlcRx+C9C01/F1MhzvQUahsj6OfT9HDaKoqODot2zvY3tIYvOuAi+W5SD++Xf5BU+h1BvklZc+G/+u4+AbkwtxunF/QRzivcl/HUJn1E0GTjMKNmtGin7+QKeD30AQTfI1ye7dPk+uMFFPqMtRuvaFLzQfxOKocjs57ApRNwrfKDPKJ+YSV9Z/RKcj2lfR9BUi/cdzW6GsU3o98U3Uytq/p9wR6serIwWfdevoflA3mh8yHGzBfpYJK5U8cuz5dhW5k4isoS40+ptJDaD3qBM439HsKbR0UHHzXegLkhdhnaBcyrfJwhKSMGtPuAnQbAM6mbGq0HU3DI+h01Akc/+c8owYJB/9tFz/7NDUmZUqtRFegVehP5OSU64jlfpkOp/wRbUNbmNQflHXDzyoO7kMnIX16rWr18L6nbTN6FD+m9EDNAfVsGaRJHAjpOGTEJDgJViqX0WakvYu2ot3oVHQT0odRJxT7C1Y/RUtwHgNOx/90ik66qfcFyBvlIG2gOoGMjgTFMg/sQOoHo++QQFynjC7BJjjpWq/LQ3LNM62GBod79Z5iXpwsg7SWul/YQiqmW4qINPmD6OM5zUU+QbQs9vUhzgsc7tsyz23r2Ah3J/kJegE5mXFkOjVbvNMC7v7JaHMd8ZzST/4a6/MGh3vXU8GybxMS9hGOfOJG0jFIAGnylk7edpXOm1qpzWPb7Ge0mYrPoaGmFff7zxxEZZZB2oFD00RIRyAhJSh5MHkoAhFOeit5vQvyFvTksBZk7vU/qxSQ3jNIH2R3cqPoh+bvKEVMiqJ8tKSo8TLXIdPqWfT0fMLh/tWlmM6SMam9pFsRkgt3ihRhGS3FiHLT6X7JfY475KG8yrlXS6s8gtKdCpCu5ryR5Os8H0H5NDNyhGNaPc/1Kd2ozp8NDJBTKkDawKkjkZFkeuVBOY49yMh5eaHAYSyDSTEdJytAcuF2n2TqmF5pD5Tg+B9pQUQOY6ubgxyKsSYZNf4GEdJqJJylyA/Pl9AbCw0OY6o/RcuhGJB8IMJZh1Ygf4u8g3YBx5QLk4DRhMaRC3NYEAgCQSAIBIEgEASCQBAIAkEgCASBIBAEgkAQCAJBYJEQ+BdpRqKi3IjqNwAAAABJRU5ErkJggg==",qp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAMAAAAADbN2wMAAABi0lEQVRoBe2Yu20DMRBEdW7EuVLX4NQVuAEVoUhFuAFV4FQ1OHWuRkzNABRwMLhDfbhcBhyA0IEjnvYNjjxoN5upmcBMYCYQmcCifjyl9AL/E+Md4xXjjHHCOC7L8ofPcJkAufgvVPhWqPIHc7sRIJiwJSZfKp7f5zz9cCkAPjZKNV+tbeYpAD7zSjVfrW3mKQBuWKWar9Y28xQATxsl7PNkHgJqYUtPARzxQzxtLG1h7KMhZIL5KP3/HkgonMVf9Y2LA45UzneXBChVkxPfw/tY+WEQdwOw6JEgHgIYCeJhgFEgngIYAeJpgGiIJgCREM0AoiCaAkRANAfoDeEC0BPCDaAXhCtADwh3AG+ILgCeEN0AvCC6AnhAdAdoDRECICB+4bEmtmzOGNU2ZhgAirP+2dFaS7YxVVdifROX69wIOODmTN6SbGOGArDiDFF7Esw2ZjhAjr3WpjT9UQC4YZVMfxSAWhvT9EcBUG1MnkL0i6ptnuIij0mjjVl9D3jUMu85E5gJzARuT+ACS7KuMQ7rOEcAAAAASUVORK5CYII=",Zp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAMAAAAADbN2wMAAAByElEQVRoBe1ZMU4DMRC8Q7yCJjVNKCh4ARVfAPo0PCYNPeQLVLyAggIa6jQ8g2NGsiJjeUfHrdGd0K60Sm7t3R3P+hx503UhwUAwEAzMyUCvkg/DcITxa+gldAXdQ5+hu77vv/DZTKbmMheQAt4D4XkF5Stsm1aL8OQiw5aQ+Rp4zqed461kci5VgUegO22F0BnnA9W+qcVQFeCeX4qYWNQC+MIuRUwsxwIhTxu1hV4w/ib8fzN0hskXwoFYqqIqsIMHT5uafML4XhuYaGMsxqwJMRBLVcyXmLOzs/ku8ybzTDhkthZfiWUNzSuxxbP8zVEV6HjOQx8KdNw2rcEzBWP+2JLMTQwctEQuwHJakj0WMHc1ogJRAScDsYWcBLrdowJuCp0BogJOAt3uUQE3hc4AUQEngW73/10BXimhtwVNvIDLq2gxf+wjYzL2QZg7XWsPtvKLCSQ5Wq1FXsCfoK2ulsRxBT2BliLbmGoLqXYfE/EC3koYqwae8WUbU1UgWoutyoM4KyuW2kJ7y2kGu4nF01rcVnpGk9aWTrq8eVbGad5alO2+MvuIZ9XGlLnMl5hJ01HK02ixfzGNICemBAPBQDDwhwx8A43PdoQvgLfYAAAAAElFTkSuQmCC";function v4(i){Ee(i,"svelte-468fdd",'*.forbid.svelte-468fdd.svelte-468fdd{pointer-events:none !important;opacity:0.5}.Measure-Controller.svelte-468fdd.svelte-468fdd{pointer-events:none;position:relative;width:100%;height:100%;z-index:2}.Measure-Controller.svelte-468fdd .mode-switcher.svelte-468fdd{margin-top:2.25rem}.Measure-Controller.svelte-468fdd .bottom.svelte-468fdd{position:absolute;width:100%;bottom:0}.Measure-Controller.svelte-468fdd .bottom .mask.svelte-468fdd{position:absolute;bottom:0;width:100%;height:11.5rem;background-size:100%;background-image:linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.3))}.Measure-Controller.svelte-468fdd .bottom .center.svelte-468fdd{display:flex;flex-direction:column;align-items:center;margin-bottom:2.5rem}.Measure-Controller.svelte-468fdd .buttons.svelte-468fdd{pointer-events:all;display:flex;align-items:center;height:2.5rem;background:rgba(0, 0, 0, 0.2);color:rgba(255, 255, 255, 0.85);width:-moz-max-content;width:max-content;border-radius:624.9375rem;overflow:hidden}.Measure-Controller.svelte-468fdd .buttons .button.svelte-468fdd{cursor:pointer;display:flex;align-items:center;position:relative;font-size:0.875rem;padding:0rem 1rem}.Measure-Controller.svelte-468fdd .buttons .button .icon.svelte-468fdd{width:1.5rem;height:1.5rem;background-repeat:no-repeat;background-size:100%;margin-right:0.25rem}.Measure-Controller.svelte-468fdd .buttons .button.svelte-468fdd::after{content:"";position:absolute;display:block;right:-0.03125rem;height:1.5rem;width:0.0625rem;background-image:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.3), transparent);background-size:100%;background-repeat:no-repeat;background-position:center}.Measure-Controller.svelte-468fdd .buttons .button.svelte-468fdd:last-child::after{display:none}')}function Jp(i){let e,t;return e=new Dv({props:{onClick:i[0].disable}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.onClick=n[0].disable),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Kp(i){let e,t,n,o,s=i[2]("撤销")+"",r,a,l,c,h,d=i[2]("结束")+"",u,f,m;return{c(){e=U("div"),t=U("div"),n=U("div"),o=re(),r=Te(s),a=re(),l=U("div"),c=U("div"),h=re(),u=Te(d),b(n,"class","icon svelte-468fdd"),N(n,"background-image",`url(${kv})`),b(t,"class","button svelte-468fdd"),we(t,"forbid",!i[3]),b(c,"class","icon svelte-468fdd"),N(c,"background-image",`url(${zv})`),b(l,"class","button svelte-468fdd"),b(e,"class","buttons svelte-468fdd")},m(g,v){Y(g,e,v),H(e,t),H(t,n),H(t,o),H(t,r),H(e,a),H(e,l),H(l,c),H(l,h),H(l,u),f||(m=[Se(t,"click",i[7]),Se(l,"click",i[6])],f=!0)},p(g,v){v&4&&s!==(s=g[2]("撤销")+"")&&Ne(r,s),v&8&&we(t,"forbid",!g[3]),v&4&&d!==(d=g[2]("结束")+"")&&Ne(u,d)},d(g){g&&Q(e),f=!1,lt(m)}}}function A4(i){let e,t,n,o,s,r,a,l,c,h,d,u=i[1]&&Jp(i),f=i[5]&&Kp(i);function m(v){i[9](v)}let g={options:[{key:"line",value:i[2]("测距离"),icon:qp},{key:"area",value:i[2]("测面积"),icon:Zp}],onChange:i[8]};return i[4]!==void 0&&(g.setIndex=i[4]),c=new p4({props:g}),_e.push(()=>Tl(c,"setIndex",m)),{c(){e=U("div"),u&&u.c(),t=re(),n=U("div"),o=U("div"),s=re(),r=U("div"),f&&f.c(),a=re(),l=U("div"),de(c.$$.fragment),b(o,"class","mask svelte-468fdd"),b(l,"class","mode-switcher svelte-468fdd"),b(r,"class","center svelte-468fdd"),b(n,"class","bottom svelte-468fdd"),b(e,"class","Measure-Controller svelte-468fdd")},m(v,A){Y(v,e,A),u&&u.m(e,null),H(e,t),H(e,n),H(n,o),H(n,s),H(n,r),f&&f.m(r,null),H(r,a),H(r,l),le(c,l,null),d=!0},p(v,[A]){v[1]?u?(u.p(v,A),A&2&&B(u,1)):(u=Jp(v),u.c(),B(u,1),u.m(e,t)):u&&(xe(),G(u,1,1,()=>{u=null}),Ce()),v[5]?f?f.p(v,A):(f=Kp(v),f.c(),f.m(r,a)):f&&(f.d(1),f=null);const w={};A&4&&(w.options=[{key:"line",value:v[2]("测距离"),icon:qp},{key:"area",value:v[2]("测面积"),icon:Zp}]),A&1&&(w.onChange=v[8]),!h&&A&16&&(h=!0,w.setIndex=v[4],Ll(()=>h=!1)),c.$set(w)},i(v){d||(B(u),B(c.$$.fragment,v),d=!0)},o(v){G(u),G(c.$$.fragment,v),d=!1},d(v){v&&Q(e),u&&u.d(),f&&f.d(),ce(c)}}}function y4(i,e,t){let{measureController:n}=e,{showExit:o=!1}=e,{i18n:s=v=>v}=e,r=!1,a;function l(v){v==="Edit"?t(5,u=!0):(a(null),t(5,u=!1))}function c(){n.controller instanceof io&&n.controller.complete(),n.save({mode:"Watch"})}function h(v){t(3,r=v.length>0)}function d(){t(3,r=!1)}Zt(()=>{n.hook.on("modeChange",l),n.hook.on("complete",d),n.hook.on("pointsChange",h)}),Hi(()=>{n.hook.off("modeChange",l),n.hook.off("complete",d),n.hook.off("pointsChange",h)});let u=!1;const f=()=>n.revoke(),m=v=>{n.save().changeMode("Edit"),n.changeMeasureType(v)};function g(v){a=v,t(4,a)}return i.$$set=v=>{"measureController"in v&&t(0,n=v.measureController),"showExit"in v&&t(1,o=v.showExit),"i18n"in v&&t(2,s=v.i18n)},[n,o,s,r,a,u,c,f,m,g]}class b4 extends ye{constructor(e){super(),Ae(this,e,y4,A4,ve,{measureController:0,showExit:1,i18n:2},v4)}}function w4(i){Ee(i,"svelte-1mfj5mk",'.Switcher.svelte-1mfj5mk.svelte-1mfj5mk{pointer-events:all;position:relative;margin-bottom:1.5rem;box-sizing:border-box;width:-moz-max-content;width:max-content}.Switcher.svelte-1mfj5mk .svelte-1mfj5mk{transition-duration:300ms;transition-timing-function:ease-out}.Switcher.svelte-1mfj5mk .content.svelte-1mfj5mk{transition-property:opacity}.Switcher.svelte-1mfj5mk .highlight.svelte-1mfj5mk{transition-property:width}.Switcher.svelte-1mfj5mk .Switcher-buttons.svelte-1mfj5mk{transition-property:transform}.Switcher.svelte-1mfj5mk .Switcher-buttons.svelte-1mfj5mk{position:absolute;top:50%;left:0;transform:translate(0, -50%);width:-moz-max-content;width:max-content}.Switcher.svelte-1mfj5mk .Switcher-buttons .button.svelte-1mfj5mk{display:inline-block;margin:0 0.5625rem}.Switcher.svelte-1mfj5mk .highlight.svelte-1mfj5mk{height:2rem;background:rgba(0, 0, 0, 0.3);border-radius:624.9375rem}.Switcher.svelte-1mfj5mk .content.svelte-1mfj5mk{position:relative;padding:0 0.75rem}.Switcher.svelte-1mfj5mk .button:not(.active) .content.svelte-1mfj5mk::before{content:"";position:absolute;top:50%;left:10%;width:80%;transform:translateY(-50%);height:0;box-shadow:0 0 0.9375rem 0.3125rem rgba(0, 0, 0, 0.3)}')}function _p(i,e,t){const n=i.slice();return n[13]=e[t],n[14]=e,n[15]=t,n}function $p(i){let e;return{c(){e=U("span"),b(e,"class","icon svelte-1mfj5mk"),N(e,"background-image",i[13].icon)},m(t,n){Y(t,e,n)},p(t,n){n&1&&N(e,"background-image",t[13].icon)},d(t){t&&Q(e)}}}function ef(i){let e,t,n,o=i[13].value+"",s,r,a=i[15],l,c,h=i[13].icon&&$p(i);const d=()=>i[9](e,a),u=()=>i[9](null,a);function f(){return i[10](i[13],i[15])}return{c(){e=U("div"),t=U("div"),h&&h.c(),n=re(),s=Te(o),r=re(),b(t,"class","content svelte-1mfj5mk"),b(e,"class","button svelte-1mfj5mk"),we(e,"active",i[4]===i[15])},m(m,g){Y(m,e,g),H(e,t),h&&h.m(t,null),H(t,n),H(t,s),H(e,r),d(),l||(c=Se(e,"click",f),l=!0)},p(m,g){i=m,i[13].icon?h?h.p(i,g):(h=$p(i),h.c(),h.m(t,n)):h&&(h.d(1),h=null),g&1&&o!==(o=i[13].value+"")&&Ne(s,o),a!==i[15]&&(u(),a=i[15],d()),g&16&&we(e,"active",i[4]===i[15])},d(m){m&&Q(e),h&&h.d(),u(),l=!1,c()}}}function x4(i){let e,t,n,o,s=i[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=ef(_p(i,s,a));return{c(){e=U("div"),t=U("div"),n=re(),o=U("div");for(let a=0;a<r.length;a+=1)r[a].c();b(t,"class","highlight svelte-1mfj5mk"),N(t,"width",i[5]?`${i[5]}px`:void 0),b(o,"class","Switcher-buttons svelte-1mfj5mk"),N(o,"transform",`translate(${i[6]}px, -50%)`),b(e,"class","Switcher svelte-1mfj5mk")},m(a,l){Y(a,e,l),H(e,t),H(e,n),H(e,o);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(o,null);i[11](e)},p(a,[l]){if(l&32&&N(t,"width",a[5]?`${a[5]}px`:void 0),l&23){s=a[0];let c;for(c=0;c<s.length;c+=1){const h=_p(a,s,c);r[c]?r[c].p(h,l):(r[c]=ef(h),r[c].c(),r[c].m(o,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=s.length}l&64&&N(o,"transform",`translate(${a[6]}px, -50%)`)},i:oe,o:oe,d(a){a&&Q(e),un(r,a),i[11](null)}}}function C4(i,e,t){let n,o,{options:s}=e,{defaultKey:r=null}=e,{onChange:a}=e;const l=[];let c,h,d=0;function u(){if(o&&c){t(5,h=o.clientWidth);const v=d+c.getBoundingClientRect().left-o.getBoundingClientRect().left;t(6,d=v)}}function f(v,A){_e[v?"unshift":"push"](()=>{l[A]=v,t(2,l)})}const m=(v,A)=>{a(v.key),t(4,n=A)};function g(v){_e[v?"unshift":"push"](()=>{c=v,t(3,c)})}return i.$$set=v=>{"options"in v&&t(0,s=v.options),"defaultKey"in v&&t(7,r=v.defaultKey),"onChange"in v&&t(1,a=v.onChange)},i.$$.update=()=>{i.$$.dirty&129&&t(4,n=r?s.findIndex(v=>v.key===r):0),i.$$.dirty&20&&t(8,o=l[n]),i.$$.dirty&264&&o&&c&&setTimeout(()=>u(),0)},[s,a,l,c,n,h,d,r,o,f,m,g]}class P4 extends ye{constructor(e){super(),Ae(this,e,C4,x4,ve,{options:0,defaultKey:7,onChange:1},w4)}}function E4(i){Ee(i,"svelte-82ysdl",".CircleButton.svelte-82ysdl.svelte-82ysdl{position:relative;display:flex;justify-content:center;align-items:center;width:4.5rem;height:4.5rem;background-image:inherit;background-size:100% auto;background-repeat:no-repeat;transition:transform 200ms ease-in-out}.CircleButton.svelte-82ysdl.svelte-82ysdl:active{transform:scale(0.8)}.CircleButton.svelte-82ysdl .text.svelte-82ysdl{position:absolute}")}function tf(i){let e,t,n,o;return{c(){e=U("div"),t=Te(i[0]),b(e,"class","text svelte-82ysdl")},m(s,r){Y(s,e,r),H(e,t),o=!0},p(s,r){(!o||r&1)&&Ne(t,s[0])},i(s){o||(kt(()=>{o&&(n||(n=Ri(e,Ft,{duration:300},!0)),n.run(1))}),o=!0)},o(s){n||(n=Ri(e,Ft,{duration:300},!1)),n.run(0),o=!1},d(s){s&&Q(e),s&&n&&n.end()}}}function I4(i){let e,t=i[0],n,o,s,r=tf(i);return{c(){e=U("div"),r.c(),b(e,"class","CircleButton svelte-82ysdl"),N(e,"background-image",`url(${i[2]})`)},m(a,l){Y(a,e,l),r.m(e,null),n=!0,o||(s=Se(e,"click",function(){oi(i[1])&&i[1].apply(this,arguments)}),o=!0)},p(a,[l]){i=a,l&1&&ve(t,t=i[0])?(xe(),G(r,1,1,oe),Ce(),r=tf(i),r.c(),B(r,1),r.m(e,null)):r.p(i,l),l&4&&N(e,"background-image",`url(${i[2]})`)},i(a){n||(B(r),n=!0)},o(a){G(r),n=!1},d(a){a&&Q(e),r.d(a),o=!1,s()}}}function M4(i,e,t){let n,{text:o}=e,{onClick:s=null}=e,{color:r="white"}=e;return i.$$set=a=>{"text"in a&&t(0,o=a.text),"onClick"in a&&t(1,s=a.onClick),"color"in a&&t(3,r=a.color)},i.$$.update=()=>{i.$$.dirty&8&&t(2,n=(()=>r==="white"?ul:r==="blue"?vd:ul)())},[o,s,n,r]}class S4 extends ye{constructor(e){super(),Ae(this,e,M4,I4,ve,{text:0,onClick:1,color:3},E4)}}function D4(i){Ee(i,"svelte-ldjbp8","*.forbid.svelte-ldjbp8.svelte-ldjbp8{pointer-events:none !important;opacity:0.5}.Measure-Controller.svelte-ldjbp8.svelte-ldjbp8{pointer-events:none;position:relative;width:100%;height:100%;z-index:2;color:white}.Measure-Controller.svelte-ldjbp8 .mode-switcher.svelte-ldjbp8{margin-top:2.25rem}.Measure-Controller.svelte-ldjbp8 .bottom.svelte-ldjbp8{position:absolute;width:100%;bottom:0}.Measure-Controller.svelte-ldjbp8 .bottom .mask.svelte-ldjbp8{position:absolute;bottom:0;width:100%;height:12.5rem;background-size:100%;z-index:-1;background-image:linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.5))}.Measure-Controller.svelte-ldjbp8 .bottom .center.svelte-ldjbp8{display:flex;flex-direction:column;align-items:center;margin-bottom:2.5rem}.Measure-Controller.svelte-ldjbp8 .controller.svelte-ldjbp8{pointer-events:all;display:flex;align-items:center}.Measure-Controller.svelte-ldjbp8 .controller .button.svelte-ldjbp8{cursor:pointer;display:flex;align-items:center;height:2.5rem;padding-left:1rem;padding-right:1rem;border-radius:624.9375rem;font-size:0.875rem;color:#fff;background-color:rgba(0, 0, 0, 0.2)}.Measure-Controller.svelte-ldjbp8 .controller .button .icon.svelte-ldjbp8{width:1.5rem;height:1.5rem;background-repeat:no-repeat;background-size:100%;margin:0 0.25rem}.Measure-Controller.svelte-ldjbp8 .controller .main-button.svelte-ldjbp8{margin-left:1.75rem;margin-right:1.75rem;font-size:0.875rem;font-weight:bold}")}function nf(i){let e,t;return e=new Dv({props:{onClick:i[0].disable}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.onClick=n[0].disable),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function of(i){let e,t,n,o;return t=new P4({props:{options:[{key:"line",value:i[2]("测距离")},{key:"area",value:i[2]("测面积")}],defaultKey:i[0].currentMeasureType,onChange:i[0].changeMeasureType}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","mode-switcher svelte-ldjbp8")},m(s,r){Y(s,e,r),le(t,e,null),o=!0},p(s,r){i=s;const a={};r&4&&(a.options=[{key:"line",value:i[2]("测距离")},{key:"area",value:i[2]("测面积")}]),r&1&&(a.defaultKey=i[0].currentMeasureType),r&1&&(a.onChange=i[0].changeMeasureType),t.$set(a)},i(s){o||(B(t.$$.fragment,s),s&&kt(()=>{o&&(n||(n=Ri(e,Ft,{duration:Ys},!0)),n.run(1))}),o=!0)},o(s){G(t.$$.fragment,s),s&&(n||(n=Ri(e,Ft,{duration:Ys},!1)),n.run(0)),o=!1},d(s){s&&Q(e),ce(t),s&&n&&n.end()}}}function sf(i){let e,t,n,o=i[2]("撤销")+"",s,r,a,l,c;return{c(){e=U("div"),t=U("div"),n=re(),s=Te(o),b(t,"class","icon svelte-ldjbp8"),N(t,"background-image",`url(${kv})`),b(e,"class","button svelte-ldjbp8"),we(e,"forbid",i[3]==="start")},m(h,d){Y(h,e,d),H(e,t),H(e,n),H(e,s),a=!0,l||(c=Se(e,"click",i[13]),l=!0)},p(h,d){i=h,(!a||d&4)&&o!==(o=i[2]("撤销")+"")&&Ne(s,o),(!a||d&8)&&we(e,"forbid",i[3]==="start")},i(h){a||(h&&kt(()=>{a&&(r||(r=Ri(e,Ft,{duration:Ys},!0)),r.run(1))}),a=!0)},o(h){h&&(r||(r=Ri(e,Ft,{duration:Ys},!1)),r.run(0)),a=!1},d(h){h&&Q(e),h&&r&&r.end(),l=!1,c()}}}function rf(i){let e,t,n,o=i[2]("结束")+"",s,r,a,l,c;return{c(){e=U("div"),t=U("div"),n=re(),s=Te(o),b(t,"class","icon svelte-ldjbp8"),N(t,"background-image",`url(${zv})`),b(e,"class","button svelte-ldjbp8")},m(h,d){Y(h,e,d),H(e,t),H(e,n),H(e,s),a=!0,l||(c=Se(e,"click",i[10]),l=!0)},p(h,d){i=h,(!a||d&4)&&o!==(o=i[2]("结束")+"")&&Ne(s,o)},i(h){a||(h&&kt(()=>{a&&(r||(r=Ri(e,Ft,{duration:Ys},!0)),r.run(1))}),a=!0)},o(h){h&&(r||(r=Ri(e,Ft,{duration:Ys},!1)),r.run(0)),a=!1},d(h){h&&Q(e),h&&r&&r.end(),l=!1,c()}}}function k4(i){let e,t,n,o,s,r,a,l,c,h,d,u,f,m=i[1]&&nf(i),g=i[0].allowMeasureType.length>=2&&i[3]==="start"&&of(i),v=i[4]&&sf(i);d=new S4({props:{onClick:i[14],text:i[6][i[3]],color:i[7][i[3]]}});let A=i[4]&&rf(i);return{c(){e=U("div"),m&&m.c(),t=re(),n=U("div"),o=U("div"),s=re(),r=U("div"),g&&g.c(),a=re(),l=U("div"),v&&v.c(),c=re(),h=U("div"),de(d.$$.fragment),u=re(),A&&A.c(),b(o,"class","mask svelte-ldjbp8"),b(h,"class","main-button svelte-ldjbp8"),we(h,"forbid",!i[5]),b(l,"class","controller svelte-ldjbp8"),b(r,"class","center svelte-ldjbp8"),b(n,"class","bottom svelte-ldjbp8"),b(e,"class","Measure-Controller svelte-ldjbp8")},m(w,P){Y(w,e,P),m&&m.m(e,null),H(e,t),H(e,n),H(n,o),H(n,s),H(n,r),g&&g.m(r,null),H(r,a),H(r,l),v&&v.m(l,null),H(l,c),H(l,h),le(d,h,null),H(l,u),A&&A.m(l,null),f=!0},p(w,[P]){w[1]?m?(m.p(w,P),P&2&&B(m,1)):(m=nf(w),m.c(),B(m,1),m.m(e,t)):m&&(xe(),G(m,1,1,()=>{m=null}),Ce()),w[0].allowMeasureType.length>=2&&w[3]==="start"?g?(g.p(w,P),P&9&&B(g,1)):(g=of(w),g.c(),B(g,1),g.m(r,a)):g&&(xe(),G(g,1,1,()=>{g=null}),Ce()),w[4]?v?(v.p(w,P),P&16&&B(v,1)):(v=sf(w),v.c(),B(v,1),v.m(l,c)):v&&(xe(),G(v,1,1,()=>{v=null}),Ce());const I={};P&8&&(I.onClick=w[14]),P&8&&(I.text=w[6][w[3]]),P&8&&(I.color=w[7][w[3]]),d.$set(I),(!f||P&32)&&we(h,"forbid",!w[5]),w[4]?A?(A.p(w,P),P&16&&B(A,1)):(A=rf(w),A.c(),B(A,1),A.m(l,null)):A&&(xe(),G(A,1,1,()=>{A=null}),Ce())},i(w){f||(B(m),B(g),B(v),B(d.$$.fragment,w),B(A),f=!0)},o(w){G(m),G(g),G(v),G(d.$$.fragment,w),G(A),f=!1},d(w){w&&Q(e),m&&m.d(),g&&g.d(),v&&v.d(),ce(d),A&&A.d()}}}const Ys=100;function z4(i,e,t){let{measureController:n}=e,{showExit:o=!1}=e,{i18n:s=y=>y}=e;const r={start:s("开始"),add:s("添加"),end:s("结束"),complete:s("完成")},a={start:"white",add:"white",end:"blue",complete:"blue"};let l=!1,c=!0,h="start",d=n.currentMeasureType;const u=()=>{n.getCurrentMode()!=="Edit"?n.changeMode("Edit"):(g("add"),f())},f=()=>{n.controller instanceof io&&n.controller.selectPoint()},m=()=>{n.controller instanceof io&&n.controller.complete()},g=y=>{t(3,h=y)},v=()=>{f(),j("allow")},A=()=>{g("complete")},w=()=>{n.currentMeasureType==="area"&&h==="complete"&&g("add")},P=y=>{y.length},I=()=>{g("start"),j("allow")},j=y=>{t(5,c=y==="allow")},D=y=>{t(12,d=y)},T=y=>{y.isEmpty&&g("start")};Zt(()=>{n.hook.on("revoke",T),n.hook.on("measureTypeChange",D),n.hook.on("modeChange",I),n.hook.on("pointsChange",P),n.hook.on("allowAddPointStateChange",j),n.hook.on("readyComplete",A),n.hook.on("notReadyComplete",w),n.hook.on("complete",I)}),Hi(()=>{n.hook.off("measureTypeChange",D),n.hook.off("modeChange",I),n.hook.off("allowAddPointStateChange",j),n.hook.off("readyComplete",A),n.hook.off("pointsChange",P),n.hook.off("notReadyComplete",w),n.hook.off("complete",I)});const M=()=>n.revoke(),O=()=>{h==="start"?u():h==="add"?f():(h==="end"||h==="complete")&&v()};return i.$$set=y=>{"measureController"in y&&t(0,n=y.measureController),"showExit"in y&&t(1,o=y.showExit),"i18n"in y&&t(2,s=y.i18n)},i.$$.update=()=>{i.$$.dirty&4104&&t(4,l=d==="area"&&h!=="start")},[n,o,s,h,l,c,r,a,u,f,m,v,d,M,O]}class j4 extends ye{constructor(e){super(),Ae(this,e,z4,k4,ve,{measureController:0,showExit:1,i18n:2},D4)}}class L4{constructor(e,t){p(this,"revoke"),p(this,"container"),p(this,"wrapper"),p(this,"mainController"),p(this,"disposers",[]),p(this,"measureController"),p(this,"mode"),p(this,"svelteDom"),p(this,"_params"),p(this,"useNewUI",!1),p(this,"handleExit",()=>{const r=this.container.querySelector(".fpm__exit-icon"),a=this.container.querySelector(".fpm__exit");if(!a||!r)throw new Error("cannot find dom");this.mode==="pc"&&(Object.assign(a.style,o4),Object.assign(r==null?void 0:r.style,s4));const l=()=>{a.style.opacity="1"},c=()=>{a.style.opacity="0.85"},h=()=>{this.measureController.disable()};return a.addEventListener("click",h),a.addEventListener("mouseenter",l),a.addEventListener("mouseleave",c),()=>{a.removeEventListener("click",h),a.removeEventListener("mouseenter",l),a.removeEventListener("mouseleave",c)}});var n,o;this._params=t,this.measureController=e,this.mode=(n=t.mode)!=null?n:"pc",this.wrapper=t.container,this.container=document.createElement("div"),this.wrapper.appendChild(this.container);const s=(o=t.useNewUI)!=null?o:!1;if(this.useNewUI=s,s&&(this.container.style.position="absolute",this.container.style.top="0",this.container.style.left="0",this.container.style.width="100%",this.container.style.height="100%",t.pointSelectorMode==="cursor"?this.svelteDom=new b4({target:this.container,props:{measureController:this.measureController,i18n:t.i18n,showExit:t.showExit}}):t.pointSelectorMode==="fixed"&&(this.svelteDom=new j4({target:this.container,props:{measureController:this.measureController,i18n:t.i18n,showExit:t.showExit}}))),!s){this.container.innerHTML=this.mode==="mobile"?K5:e4,this.container.classList.add("fpm__ui-controller",this.mode),this.container.style.background="rgba(0, 0, 0, 0.15)";const r=this.container.querySelectorAll(".fpm__text"),a=this.container.querySelector(".fpm_ui-bg"),l=this.container.querySelector(".fpm_operating-space");Object.assign(a==null?void 0:a.style,n4),Object.assign(l==null?void 0:l.style,i4),Object.assign(this.container.style,t4),r.forEach(c=>Object.assign(c.style,r4))}}dispose(){var e;this.hide(),(e=this.svelteDom)==null||e.$destroy(),this.container.remove()}show(){return this.container.style.display="block",this.container.style.opacity="1",this.container.style.transform="translate(0, 0)",this.useNewUI===!1&&(this.mode==="pc"?(this.revoke=new c4(this.measureController,this.container),this.mainController=new a4(this.measureController,this.container,this._params)):this.mainController=new l4(this.measureController,this.container,this._params),this.disposers.push(this.handleExit())),this}hide(){var e,t;return this.container.style.display="none",this.container.style.opacity="0",this.container.style.transform="translate(0, 10px)",this.useNewUI===!1&&this.mode==="pc"&&((e=this.revoke)==null||e.dispose()),(t=this.mainController)==null||t.dispose(),this.disposers.forEach(n=>n()),this.disposers=[],this}}var it={},T4={get exports(){return it},set exports(i){it=i}};function pl(i){return i===null?"null":typeof i>"u"?"undefined":typeof i=="object"?Array.isArray(i)?"array":"object":typeof i}function jv(i){return pl(i)==="object"?th(i):pl(i)==="array"?eh(i):i}function eh(i){return i.map(jv)}function th(i){const e={};for(const t in i)i.hasOwnProperty(t)&&(e[t]=jv(i[t]));return e}function Nl(i,e=[],t={}){const n={arrayBehaviour:t.arrayBehaviour||"replace"},o=e.map(r=>r||{}),s=i||{};for(let r=0;r<o.length;r++){const a=o[r],l=Object.keys(a);for(let c=0;c<l.length;c++){const h=l[c],d=a[h],u=pl(d),f=pl(s[h]);if(u==="object")if(f!=="undefined"){const m=f==="object"?s[h]:{};s[h]=Nl({},[m,th(d)],n)}else s[h]=th(d);else if(u==="array")if(f==="array"){const m=eh(d);s[h]=n.arrayBehaviour==="merge"?s[h].concat(m):m}else s[h]=eh(d);else s[h]=d}}return s}T4.exports=function(i,...e){return Nl(i,e)};it.noMutate=function(...i){return Nl({},i)};it.withOptions=function(i,e,t){return Nl(i,e,t)};function O4(i){Ee(i,"svelte-1q8gtp4",".Measure-Tips.svelte-1q8gtp4.svelte-1q8gtp4{box-sizing:border-box;position:absolute;pointer-events:none;top:0;width:100%;padding:0 2.5rem}.Measure-Tips.svelte-1q8gtp4 .text.svelte-1q8gtp4{text-align:center;position:relative;max-width:100%;top:3.125rem;color:#fff;word-break:break-all;word-wrap:break-word;text-shadow:0 0.0625rem 0.375rem rgba(0, 0, 0, 0.5);font-size:1.25rem;font-weight:bold}")}function af(i){let e,t,n,o,s;return{c(){e=U("div"),t=U("div"),n=Te(i[2]),b(t,"class","text svelte-1q8gtp4"),b(e,"class","Measure-Tips svelte-1q8gtp4")},m(r,a){Y(r,e,a),H(e,t),H(t,n),i[7](t),s=!0},p(r,a){(!s||a&4)&&Ne(n,r[2])},i(r){s||(kt(()=>{s&&(o||(o=Ri(e,Ft,{},!0)),o.run(1))}),s=!0)},o(r){o||(o=Ri(e,Ft,{},!1)),o.run(0),s=!1},d(r){r&&Q(e),i[7](null),r&&o&&o.end()}}}function R4(i){let e,t,n=i[0]&&af(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[0]?n?(n.p(o,s),s&1&&B(n,1)):(n=af(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function B4(i,e,t){let{measureController:n}=e,{i18n:o=w=>w}=e,{tips:s}=e,{tipStyle:r={}}=e,{visible:a=!0}=e,l=null;const c=w=>{const P=n.currentMeasureType;let I="";return I=s[w],I===void 0&&(I=s[P][w]),I},h=w=>{t(2,u=o(c(w)))},d=()=>{t(2,u="")};let u="";const f=w=>{w==="Edit"&&n.changeMeasureType?h("start"):d()},m=()=>{n.getCurrentMode()==="Watch"&&d()},g=()=>{n.getCurrentMode()==="Edit"&&h("start")},v=w=>{n.currentMeasureType==="area"&&(w.length>=2?h("close"):w.length===0?h("start"):d())};Zt(()=>{f(n.getCurrentMode()),n.hook.on("modeChange",f),n.hook.on("complete",m),n.hook.on("pointsChange",v),n.hook.on("measureTypeChange",g)}),Hi(()=>{n.hook.off("modeChange",f),n.hook.off("complete",m),n.hook.off("pointsChange",v),n.hook.off("measureTypeChange",g),d()});function A(w){_e[w?"unshift":"push"](()=>{l=w,t(1,l),t(6,r)})}return i.$$set=w=>{"measureController"in w&&t(3,n=w.measureController),"i18n"in w&&t(4,o=w.i18n),"tips"in w&&t(5,s=w.tips),"tipStyle"in w&&t(6,r=w.tipStyle),"visible"in w&&t(0,a=w.visible)},i.$$.update=()=>{if(i.$$.dirty&66&&l)for(const w in r)r.hasOwnProperty(w)&&t(1,l.style[w]=r[w],l)},[a,l,u,n,o,s,r,A]}class H4 extends ye{constructor(e){super(),Ae(this,e,B4,R4,ve,{measureController:3,i18n:4,tips:5,tipStyle:6,visible:0},O4)}}const N4={line:{start:"选择一个合适的位置开始测量，点击【结束】或【鼠标右键】结束测量"},area:{start:"选择一个合适的位置开始绘制平面",close:"选择3个点后将闭合平面，点击【结束】或【鼠标右键】将自动闭合"}},F4={line:{start:""},area:{start:"",close:"选择3个点后将闭合平面，点击结束自动闭合"}};class V4{constructor(e,t){p(this,"tipSvelteDom"),this.tipSvelteDom=new H4({target:t.container,props:{measureController:e,tips:it({},t.pointSelectorMode==="fixed"?F4:N4,t.tips),i18n:t.i18n,visible:!0,tipStyle:t.tipStyle}})}dispose(){var e;(e=this.tipSvelteDom)==null||e.$destroy()}show(){var e;return(e=this.tipSvelteDom)==null||e.$set({visible:!0}),this}hide(){var e;return(e=this.tipSvelteDom)==null||e.$set({visible:!1}),this}}class W4{constructor(e,t){p(this,"five"),p(this,"measureController"),p(this,"onKeyDown",o=>{if(o.metaKey&&o.code==="KeyS"){this.measureController.save().changeMode("Watch"),o.preventDefault();return}if(o.code==="Escape")return this.escape()}),p(this,"onMouseDown",o=>{o.button===2&&(o.preventDefault(),this.measureController.save().changeMode("Watch"))}),this.five=t,this.measureController=e;const n=this.five.getElement();n&&(document.body.addEventListener("keydown",this.onKeyDown),n.addEventListener("mousedown",this.onMouseDown))}dispose(){const e=this.five.getElement();e&&(document.body.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("mousedown",this.onMouseDown))}escape(){return this.measureController.getCurrentMode()==="Watch"?this.measureController.disable():this.measureController.save().changeMode("Watch")}}function Ko(i){return typeof i=="object"?i===null?{}:i:{}}class G4 extends xo{constructor(e,t){var n,o,s,r,a,l,c,h,d,u,f,m;super(e),p(this,"state",{enabled:!0}),p(this,"hasOpen",!1),p(this,"hook"),p(this,"magnifier"),p(this,"controller",null),p(this,"allowMeasureType"),p(this,"currentMeasureType"),p(this,"model"),p(this,"group"),p(this,"config"),p(this,"isMobile"),p(this,"useUIController"),p(this,"params"),p(this,"useGuideController"),p(this,"container",document.createElement("div")),p(this,"shortcutKeyController"),p(this,"disable",()=>{var A,w,P,I;this.hasOpen=!1,this.state.enabled=!1,this.container.style.visibility="hidden",this.container.style.opacity="0",(A=this.controller)==null||A.dispose(),(w=this.useUIController)==null||w.hide(),(P=this.useGuideController)==null||P.hide(),(I=this.shortcutKeyController)==null||I.dispose(),this.controller=null,this.five.helperVisible=!0,this.five.scene.remove(this.group),this.five.needsRender=!0,this.hook.emit("disable",!0)}),p(this,"getCurrentMode",()=>this.controller instanceof io?"Edit":this.controller instanceof Gp?"Watch":this.controller instanceof gr?"Mixed":this.controller instanceof Fp?"View":null),p(this,"changeMode",A=>{var w,P,I,j,D;if(!this.hasOpen||this.getCurrentMode()===A)return;(w=this.controller)==null||w.dispose();const T={View:Fp,Watch:Gp,Edit:io,Mixed:gr};if(!T[A])throw new Error("不存在的 Mode");const M=this.createControllerParams();this.controller=new T[A](M),A==="View"?((P=this.useUIController)==null||P.hide(),(I=this.useGuideController)==null||I.hide()):((j=this.useUIController)==null||j.show(),(D=this.useGuideController)==null||D.show()),this.hook.emit("modeChange",A)}),p(this,"changeMeasureType",A=>{this.currentMeasureType=A,this.hook.emit("measureTypeChange",A)}),this.five=e,this.hook=this.hooks,this.params=t,this.config=hd(t,["openParams","magnifierParams"]),this.model=new Ev(this.config),this.isMobile=(o=(n=t==null?void 0:t.openParams)==null?void 0:n.isMobile)!=null?o:!1,this.magnifier=new Dh(e,(l=(a=t.magnifierParams)!=null?a:(r=(s=t.pointSelectorConfig)==null?void 0:s.helper)==null?void 0:r.magnifierParams)!=null?l:{width:190,height:190,scale:2}),this.allowMeasureType=Array.from(new Set((h=(c=t.editParams)==null?void 0:c.allowMeasureType)!=null?h:["line"])),this.currentMeasureType=(d=this.allowMeasureType[0])!=null?d:"line",this.group=new Et,this.group.name="plugin-measure-group",this.container.classList.add("five-plugin-measure-container"),this.container.style.position="absolute",this.container.style.left="0",this.container.style.top="0",this.container.style.visibility="hidden",this.container.style.pointerEvents="none",this.container.style.width="100%",this.container.style.height="100%",this.container.style.opacity="0",this.container.style.zIndex="1";const g=(f=(u=t.editParams)==null?void 0:u.pointSelectorMode)!=null?f:_g?"fixed":"cursor",v=(m=this.params.openParams)!=null?m:{};if(this.params.useUIController!==!1){const A=W({container:this.container,openParams:v,i18n:t.i18n,pointSelectorMode:g,useNewUI:this.allowMeasureType.length>1},Ko(this.params.useUIController));this.useUIController=new L4(this,A)}if(this.params.useGuideController!==!1){const A=W({container:this.container,pointSelectorMode:g,i18n:t.i18n},Ko(this.params.useGuideController));this.useGuideController=new V4(this,A)}}appendTo(e){e.append(this.container)}clear(){this.model.clear()}dispose(){var e,t;this.disable(),this.clear(),(e=this.useUIController)==null||e.dispose(),(t=this.magnifier)==null||t.dispose(),this.five.needsRender=!0}load(e){let t=e;e.list&&(t={polylines:e.list.map(n=>n.polyline).map(n=>{var o;return pe(W({},n),{visibleFiveMode:(o=n.visibleFiveMode)!=null?o:["Panorama"]})})}),this.model.parse(t),this.save()}enable(e){var t,n,o;this.hasOpen||(!this.container.parentElement&&(t=this.five.getElement())!=null&&t.parentElement&&this.appendTo(this.five.getElement().parentElement),this.state.enabled=!0,this.hasOpen=!0,this.group.matrix.copy(this.workUtil.transform),this.group.matrix.decompose(this.group.position,this.group.quaternion,this.group.scale),this.group.updateMatrixWorld(),this.five.scene.add(this.group),this.container.style.visibility="visible",this.container.style.opacity="1",e!=null&&e.mode?this.changeMode(e.mode):this.isMobile?this.changeMode("Mixed"):this.changeMode("Watch"),(e==null?void 0:e.mode)!=="View"&&((n=this.useUIController)==null||n.show(),(o=this.useGuideController)==null||o.show()),this.shortcutKeyController=new W4(this,this.five),this.hook.emit("enable",!0))}edit(e){e&&this.changeMeasureType(e);const t=this.isMobile?"Mixed":"Edit";this.changeMode(t)}revoke(){this.controller instanceof io&&this.controller.revoke()}removePolyline(e){this.model.removePolyline(e)}removeArea(e){this.model.removeArea(e)}removePolylineByID(e){const t=this.model.getPolylineByID(e);t&&this.model.removePolyline(t)}getPolylineByID(e){return this.model.getPolylineByID(e)}getEditedPolyline(){}highlightLine(e){if(this.getCurrentMode()!=="Watch")return!1;const t=this.model.getLineByID(e);return t?(this.controller.highlightLine(t),!0):!1}clearHighlightLines(){return this.getCurrentMode()!=="Watch"?!1:(this.controller.clearHighlightLines(),!0)}save(e){var t;if(!(this.controller instanceof io)&&!(this.controller instanceof gr))return this;const n=(t=e==null?void 0:e.mode)!=null?t:"View",o=this.controller.model.areas;return this.controller instanceof io?this.controller.complete():o.forEach(s=>{s.showArea(),this.model.addArea(s)}),this.changeMode(n),this}addStartPoint(){this.controller instanceof gr&&this.hook.emit("willChangeState","watching","editing")}addEndPoint(){this.controller instanceof gr&&this.hook.emit("willChangeState","editing","watching")}toJson(){return this.model.toJson()}changeIsMobile(e){}changeConfigs(e){var t,n;Object.assign(this.config,e),(t=this.controller)==null||t.updateDistanceUI(),(n=this.controller)==null||n.updateAreaUI()}setCustomText(e,t){var n;const o=this.model.getLineByID(e);if(!o)throw new Error("不存在的线段");o.setText(t),(n=this.controller)==null||n.updateDistanceUI()}createControllerParams(){var e,t;const n=(e=this.params.openParams)!=null?e:{},o=(t=this.params.editParams)!=null?t:{};return n.isMobile=this.isMobile,{five:this.five,hook:this.hook,group:this.group,model:this.model,config:this.config,magnifier:this.magnifier,container:this.container,workUtil:this.workUtil,openParams:n,editParams:o,pointSelectorConfig:this.params.pointSelectorConfig,magnifierParams:this.params.magnifierParams,getMeasureType:()=>this.currentMeasureType,mouseGroup:Iv(W({},n.crossHairParameter)),userDistanceItemCreator:this.params.userDistanceItemCreator}}}const nD=function(i,e){return new G4(i,e)},Q4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==";let lf=null;class Rn extends mi{constructor(e){var t,n,o;super(),p(this,"name","PointMesh"),p(this,"dom"),p(this,"opacityBeforeHighlight"),p(this,"highlighted",!1),p(this,"fontMesh"),p(this,"backgroundMesh"),p(this,"lastRenderDomItem"),p(this,"paramsStyle"),p(this,"_visible",!0),p(this,"_onAdded",()=>{this.dom||this.updateDom()}),p(this,"_onRemoved",()=>{var f;(f=this.dom)==null||f.destroy(),this.dom=void 0}),p(this,"_onShowed",()=>{this.dom&&(this.dom.container.style.display="block")}),p(this,"_onHidden",()=>{this.dom&&(this.dom.container.style.display="none")});const s=e??{},r=es(s,["point"]);this.paramsStyle=r??{};const a=new xt;a.setAttribute("position",new In([0,0,0],3));const l={transparent:!0,side:It,size:(t=e==null?void 0:e.size)!=null?t:8,map:lf||(lf=new Ao().load(Q4)),sizeAttenuation:!1},c=new $d(pe(W({},l),{color:(n=e==null?void 0:e.color)!=null?n:16777215,depthTest:!0,opacity:(o=e==null?void 0:e.opacity)!=null?o:1})),h=new $d(pe(W({},l),{size:c.size,color:c.color,depthWrite:!1,depthTest:!1,opacity:c.opacity*.5})),d=new eu(a,c),u=new eu(a,h);this.fontMesh=d,this.backgroundMesh=u,d.name="FontMesh",u.name="BackgroundMesh",d.renderOrder=10,u.renderOrder=0,this.add(d,u),e!=null&&e.point&&this.position.copy(Ue(e.point)),e&&this.setStyle(e),this.addEventListener("removed",()=>{pi.cacheObject.delete(this),pi.checkDom(this)}),this.addEventListener("added",()=>{pi.cacheObject.add(this)}),pi.checkDomEveryFrame()}get color(){return this.fontMesh.material.color}get size(){return this.fontMesh.material.size}get style(){return{color:this.color,size:this.size,opacity:this.fontMesh.material.opacity,occlusionVisibility:this.fontMesh.material.depthTest,occlusionMode:this.backgroundMesh.visible?"depthWrite":"depthTest"}}get five(){var e,t;return(t=(e=window.globalModules)==null?void 0:e.five)!=null?t:window.$five}setStyle(e){Be(e.color)&&(this.fontMesh.material.setValues({color:e.color}),this.backgroundMesh.material.setValues({color:e.color})),Be(e.size)&&(this.fontMesh.material.setValues({side:e.size}),this.backgroundMesh.material.setValues({side:e.size})),Be(e.occlusionVisibility)&&(e.occlusionVisibility?e.occlusionMode==="depthTest"?(this.fontMesh.material.depthTest=!1,this.backgroundMesh.visible=!1):(this.fontMesh.material.depthTest=!0,this.backgroundMesh.visible=!0):(this.fontMesh.material.depthTest=!0,this.backgroundMesh.visible=!1))}highlight(){this.highlighted||(this.highlighted=!0,this.opacityBeforeHighlight=this.fontMesh.material.opacity,this.fontMesh.material.setValues({opacity:this.opacityBeforeHighlight*zh}))}unhighlight(){this.highlighted&&(this.highlighted=!1,this.fontMesh.material.setValues({opacity:this.opacityBeforeHighlight}))}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=Hr(this,this.position).toArray().join(",");t!==this.lastRenderDomItem&&(this.updateDom(),this.lastRenderDomItem=t)}updateDom(){const e=this.paramsStyle.tip;e&&!this.dom&&(this.dom=new na(this.five),this.dom.intersectCheck=!1,this.dom.simulate3D=!0,this.dom.container.style.display=this.visible?"block":"none");const t=n=>{this.dom&&this.dom.__text!==n&&(this.dom.__text=n,n instanceof HTMLElement?(this.dom.container.innerHTML="",this.dom.container.appendChild(n)):n?this.dom.container.innerHTML=jh(n,{style:""}):this.dom.container.innerHTML="")};e?(t(e),this.dom.setPosition(this.position.clone())):t(null)}}class Yr extends Pi{constructor(e){super(),p(this,"name","LineWithDotsMesh"),p(this,"pointGroup",new mi),p(this,"_paramsStyle"),p(this,"setStyle",t=>{super.setStyle(t),this._paramsStyle=W(W({},this._paramsStyle),t),this.pointMeshes.forEach(n=>{var o,s,r;return n.setStyle(pe(W({},this._paramsStyle),{color:(r=(o=this._paramsStyle)==null?void 0:o.pointColor)!=null?r:(s=this._paramsStyle)==null?void 0:s.lineColor,tip:void 0}))}),this.updateEdgePointsVisibility(),this.needsRender=!0}),p(this,"highlight",t=>{super.highlight(t),this.pointMeshes.forEach(n=>n.highlight())}),p(this,"unhighlight",()=>{super.unhighlight(),this.pointMeshes.forEach(t=>t.unhighlight())}),p(this,"updateEdgePointsVisibility",()=>{var t;Be((t=this._paramsStyle)==null?void 0:t.pointVisibility)&&(this.startPoint&&(this.startPoint.visible=typeof this._paramsStyle.pointVisibility=="object"?this._paramsStyle.pointVisibility.startPoint:this._paramsStyle.pointVisibility),this.endPoint&&(this.endPoint.visible=typeof this._paramsStyle.pointVisibility=="object"?this._paramsStyle.pointVisibility.endPoint:this._paramsStyle.pointVisibility))}),this.add(this.pointGroup),e&&this.setStyle(e),e!=null&&e.points&&this.setPoints(e.points)}get startPoint(){return this.pointMeshes[0]}get endPoint(){return this.pointMeshes.length<2?null:this.pointMeshes[this.pointMeshes.length-1]}get visiblePointMeshes(){return this.pointMeshes.filter(e=>e.visible)}get pointMeshes(){return this.pointGroup.children}setPoints(e){super.setPoints(e);const t=e.map(Ue).filter(Be);this.pointGroup.removeChildren(),this.addIfNotExists(this.pointGroup),t.forEach(n=>{var o,s,r;const a=new Rn(pe(W({},this.style),{color:(r=(o=this._paramsStyle)==null?void 0:o.pointColor)!=null?r:(s=this._paramsStyle)==null?void 0:s.lineColor,tip:void 0}));a.position.copy(n),this.pointGroup.add(a)}),this.updateEdgePointsVisibility(),this.needsRender=!0}}class Fl extends mi{constructor(e){var t,n;super(),p(this,"name","ColoredMesh"),p(this,"meshFont"),p(this,"meshBackground"),p(this,"paramsStyle",{}),p(this,"_geometry",new xt),p(this,"highlighted",!1),p(this,"opacityBeforeHighlight"),p(this,"colorBeforeHighlight"),this.paramsStyle=e??{};const o=new Ze({color:new Ye((t=e==null?void 0:e.color)!=null?t:_A).convertSRGBToLinear(),transparent:!0,side:It,depthTest:!0,depthWrite:!1,opacity:(n=e==null?void 0:e.opacity)!=null?n:ty}),s=new Ze({color:16777215,transparent:!0,side:It,depthTest:!1,depthWrite:!1,opacity:.3/.5*o.opacity}),r=new We(this.geometry,o),a=new We(this.geometry,s);r.name="MeshFront",a.name="MeshBackground",r.renderOrder=1,a.renderOrder=0,this.meshFont=r,this.meshBackground=a,this.add(r),this.setOcclusionVisibility({occlusionVisibility:e==null?void 0:e.occlusionVisibility,occlusionMode:e==null?void 0:e.occlusionMode})}get style(){return{color:this.color,opacity:this.opacity,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode}}get color(){return this.meshFont.material.color}get opacity(){return this.meshFont.material.opacity}get occlusionVisibility(){return!!this.meshBackground.parent||this.meshFont.material.depthTest===!1}get occlusionMode(){return this.meshFont.material.depthTest===!1?"depthTest":"translucence"}set geometry(e){this._geometry=e,this.meshFont.geometry=e,this.meshBackground.geometry=e}get geometry(){return this._geometry}setStyle(e){this.paramsStyle=W(W({},this.paramsStyle),e),Be(e.color)&&(this.meshFont.material.color.set(new Ye(e.color).convertSRGBToLinear()),this.needsRender=!0),Be(e.opacity)&&(this.meshFont.material.opacity=e.opacity,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity,this.needsRender=!0),this.setOcclusionVisibility(e)}highlight(e){var t,n;this.highlighted=!0,Be(e==null?void 0:e.color)?(this.colorBeforeHighlight=(t=this.colorBeforeHighlight)!=null?t:this.meshFont.material.color.clone(),this.meshFont.material.color.set(new Ye(e.color).convertSRGBToLinear())):(this.opacityBeforeHighlight=(n=this.opacityBeforeHighlight)!=null?n:this.opacity,this.meshFont.material.opacity=this.opacity*zh,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity),this.needsRender=!0}unhighlight(){this.highlighted=!1,Be(this.opacityBeforeHighlight)&&(this.meshFont.material.opacity=this.opacityBeforeHighlight,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity,this.opacityBeforeHighlight=void 0),Be(this.colorBeforeHighlight)&&(this.meshFont.material.color=new Ye(this.colorBeforeHighlight),this.colorBeforeHighlight=void 0),this.needsRender=!0}setOcclusionVisibility(e){var t,n,o;const s=(n=(t=e.occlusionMode)!=null?t:this.paramsStyle.occlusionMode)!=null?n:"translucence",r=(o=e.occlusionVisibility)!=null?o:this.paramsStyle.occlusionVisibility;Be(r)&&(r?s==="depthTest"?(this.meshFont.material.depthTest=!1,this.remove(this.meshBackground)):s==="translucence"&&(this.meshFont.material.depthTest=!0,this.addIfNotExists(this.meshBackground)):(this.meshFont.material.depthTest=!0,this.remove(this.meshBackground)))}}const Ad=new xt;Ad.name="blankGeometry";Ad.isBlank=!0;class $s extends Fl{constructor(e){super(e),p(this,"name","PolygonMesh"),p(this,"points",[]),p(this,"planeHelperNeedUpdate",!0),p(this,"geometryInfoNeedUpdate",!0),p(this,"_paramsStyle"),p(this,"areaDom"),p(this,"planeHelper",null),p(this,"_geometryInfo",null),p(this,"lastRenderAreaItem"),p(this,"_onAdded",()=>{this.areaDom||this.updateAreaItems()}),p(this,"_onRemoved",()=>{var t;(t=this.areaDom)==null||t.destroy(),this.areaDom=void 0}),p(this,"_onShowed",()=>{this.areaDom&&(this.areaDom.container.style.display="block")}),p(this,"_onHidden",()=>{this.areaDom&&(this.areaDom.container.style.display="none")}),e!=null&&e.points&&this.setPoints(e.points),this._paramsStyle=e??{},this.updateAreaItems(),this.addEventListener("removed",()=>{pi.cacheObject.delete(this),pi.checkDom(this)}),this.addEventListener("added",()=>{pi.cacheObject.add(this)}),pi.checkDomEveryFrame()}get normal(){return this.points.length>=3?new R().crossVectors(this.points[1].clone().sub(this.points[0]),this.points[2].clone().sub(this.points[0])).normalize():new R(0,0,1)}get style(){return pe(W({},super.style),{lengthEnable:this._paramsStyle.lengthEnable})}get isBlank(){return!!this.geometry.isBlank}get center(){var e;return(e=this.geometryInfo)==null?void 0:e.center.clone()}get geometryInfo(){return this.geometryInfoNeedUpdate&&(this.isBlank?this._geometryInfo=null:this._geometryInfo=Cv(this.geometry),this.geometryInfoNeedUpdate=!1),this._geometryInfo}get five(){var e,t;return(t=(e=window.globalModules)==null?void 0:e.five)!=null?t:window.$five}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.center){const t=Hr(this,this.center).toArray().join(",");t!==this.lastRenderAreaItem&&(this.updateAreaItems(),this.lastRenderAreaItem=t)}}setStyle(e){var t;this._paramsStyle=W(W({},this._paramsStyle),e),super.setStyle(this._paramsStyle);const n=(t=this._paramsStyle.occlusionVisibility)!=null?t:!0;this.areaDom&&(this.areaDom.intersectCheck=!n),this.updateAreaItems()}setPoints(e,t){var n,o;const s=e.map(Ue);this.points=s,this.geometry=(o=wv(this.points,{checkLinesIntersect:(n=t==null?void 0:t.checkLinesIntersect)!=null?n:!0}))!=null?o:Ad,this.planeHelperNeedUpdate=!0,this.geometryInfoNeedUpdate=!0,this.updateAreaItems()}projectPoint(e){return e&&(this.planeHelperNeedUpdate&&this.updatePlaneHelper(),this.planeHelper?this.planeHelper.projectPoint(e,new R):e)}updatePlaneHelper(){this.points.length>=3?this.planeHelper=new Nt().setFromCoplanarPoints(this.points[0],this.points[1],this.points[2]):this.planeHelper=null,this.planeHelperNeedUpdate=!1}updateAreaItems(){var e;const t=()=>{var o;(o=this.areaDom)==null||o.destroy(),this.areaDom=void 0};if(!this._paramsStyle.lengthEnable||!this.geometryInfo)return t();if(!this.five)return console.error("Five not found");this.areaDom=(e=this.areaDom)!=null?e:(()=>{var o;const s=new na(this.five),r=(o=this._paramsStyle.occlusionVisibility)!=null?o:!0;return s.intersectCheck=!r,s.simulate3D=!0,s})(),this.areaDom.setPosition(this.center);const n=ry(this.geometryInfo.area,this._paramsStyle.lengthUnit);n?this.areaDom.container.innerHTML=jh(n,{style:"color: #FFFFFF; background: #3366FF"}):this.areaDom.container.innerHTML=""}}function Fa(i,e){return!(Math.abs(i.x-e.x)>1e-5||Math.abs(i.y-e.y)>1e-5||Math.abs(i.z-e.z)>1e-5)}function Lv(i){if(i.length<3||!Fa(i[0],i.at(-1)))return!1;let e=!0;const t=new R().subVectors(i[1],i[0]).normalize();for(let o=2;o<i.length;o++){const s=new R().subVectors(i[o],i[0]).normalize();if(!Fa(s,t)&&!Fa(s,t.clone().negate())){e=!1;break}}if(e)return!1;const n=new Nt().setFromCoplanarPoints(i[0],i[1],i[2]);return i.every((o,s)=>s<3?!0:n.distanceToPoint(o)<1e-6)}class cf extends mi{constructor(e){super(),p(this,"name","MeasureMesh"),p(this,"isMeasureMesh",!0),p(this,"points",[]),p(this,"isPolygon",!1),p(this,"selected",!1),p(this,"line"),p(this,"polygon"),this.line=new Yr(e==null?void 0:e.lineStyle),this.polygon=new $s(e==null?void 0:e.polygonStyle),this.add(this.line)}changeConfig(e){this.line.setStyle(e==null?void 0:e.lineStyle),this.polygon.setStyle(e==null?void 0:e.polygonStyle)}setPoints(e){this.points=e,this.line.setPoints(this.points);const t=Lv(this.points);this.isPolygon=t,t&&(this.addIfNotExists(this.polygon),this.polygon.setPoints(this.points))}select(){this.highlight(3373055),this.selected=!0}unselect(){this.unhighlight(),this.selected=!1}hover(){this.selected||this.highlight()}unhover(){this.selected||this.unhighlight()}highlight(e){this.line.highlight({color:e}),this.polygon.highlight({color:e})}unhighlight(){this.line.unhighlight(),this.polygon.unhighlight()}}const cc=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function hc(i,e,t,n){i.addEventListener?i.addEventListener(e,t,n):i.attachEvent&&i.attachEvent("on".concat(e),t)}function vr(i,e,t,n){i.removeEventListener?i.removeEventListener(e,t,n):i.detachEvent&&i.detachEvent("on".concat(e),t)}function Tv(i,e){const t=e.slice(0,e.length-1);for(let n=0;n<t.length;n++)t[n]=i[t[n].toLowerCase()];return t}function Ov(i){typeof i!="string"&&(i=""),i=i.replace(/\s/g,"");const e=i.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function U4(i,e){const t=i.length>=e.length?i:e,n=i.length>=e.length?e:i;let o=!0;for(let s=0;s<t.length;s++)n.indexOf(t[s])===-1&&(o=!1);return o}const qr={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":cc?173:189,"=":cc?61:187,";":cc?59:186,"'":222,"[":219,"]":221,"\\":220},fn={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},ih={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Gt={16:!1,18:!1,17:!1,91:!1},Ct={};for(let i=1;i<20;i++)qr["f".concat(i)]=111+i;let ct=[],jr=null,Rv="all";const En=new Map,ha=i=>qr[i.toLowerCase()]||fn[i.toLowerCase()]||i.toUpperCase().charCodeAt(0),X4=i=>Object.keys(qr).find(e=>qr[e]===i),Y4=i=>Object.keys(fn).find(e=>fn[e]===i);function Bv(i){Rv=i||"all"}function Zr(){return Rv||"all"}function q4(){return ct.slice(0)}function Z4(){return ct.map(i=>X4(i)||Y4(i)||String.fromCharCode(i))}function J4(){const i=[];return Object.keys(Ct).forEach(e=>{Ct[e].forEach(t=>{let{key:n,scope:o,mods:s,shortcut:r}=t;i.push({scope:o,shortcut:r,mods:s,keys:n.split("+").map(a=>ha(a))})})}),i}function K4(i){const e=i.target||i.srcElement,{tagName:t}=e;let n=!0;const o=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(o||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(n=!1),n}function _4(i){return typeof i=="string"&&(i=ha(i)),ct.indexOf(i)!==-1}function $4(i,e){let t,n;i||(i=Zr());for(const o in Ct)if(Object.prototype.hasOwnProperty.call(Ct,o))for(t=Ct[o],n=0;n<t.length;)t[n].scope===i?t.splice(n,1).forEach(s=>{let{element:r}=s;return yd(r)}):n++;Zr()===i&&Bv(e||"all")}function e8(i){let e=i.keyCode||i.which||i.charCode;const t=ct.indexOf(e);if(t>=0&&ct.splice(t,1),i.key&&i.key.toLowerCase()==="meta"&&ct.splice(0,ct.length),(e===93||e===224)&&(e=91),e in Gt){Gt[e]=!1;for(const n in fn)fn[n]===e&&(mt[n]=!1)}}function Hv(i){if(typeof i>"u")Object.keys(Ct).forEach(o=>{Array.isArray(Ct[o])&&Ct[o].forEach(s=>ka(s)),delete Ct[o]}),yd(null);else if(Array.isArray(i))i.forEach(o=>{o.key&&ka(o)});else if(typeof i=="object")i.key&&ka(i);else if(typeof i=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];let[o,s]=t;typeof o=="function"&&(s=o,o=""),ka({key:i,scope:o,method:s,splitKey:"+"})}}const ka=i=>{let{key:e,scope:t,method:n,splitKey:o="+"}=i;Ov(e).forEach(s=>{const r=s.split(o),a=r.length,l=r[a-1],c=l==="*"?"*":ha(l);if(!Ct[c])return;t||(t=Zr());const h=a>1?Tv(fn,r):[],d=[];Ct[c]=Ct[c].filter(u=>{const f=(n?u.method===n:!0)&&u.scope===t&&U4(u.mods,h);return f&&d.push(u.element),!f}),d.forEach(u=>yd(u))})};function hf(i,e,t,n){if(e.element!==n)return;let o;if(e.scope===t||e.scope==="all"){o=e.mods.length>0;for(const s in Gt)Object.prototype.hasOwnProperty.call(Gt,s)&&(!Gt[s]&&e.mods.indexOf(+s)>-1||Gt[s]&&e.mods.indexOf(+s)===-1)&&(o=!1);(e.mods.length===0&&!Gt[16]&&!Gt[18]&&!Gt[17]&&!Gt[91]||o||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(ct),e.method(i,e)===!1&&(i.preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation&&i.stopPropagation(),i.cancelBubble&&(i.cancelBubble=!0)))}}function df(i,e){const t=Ct["*"];let n=i.keyCode||i.which||i.charCode;if(!mt.filter.call(this,i))return;if((n===93||n===224)&&(n=91),ct.indexOf(n)===-1&&n!==229&&ct.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach(a=>{const l=ih[a];i[a]&&ct.indexOf(l)===-1?ct.push(l):!i[a]&&ct.indexOf(l)>-1?ct.splice(ct.indexOf(l),1):a==="metaKey"&&i[a]&&ct.length===3&&(i.ctrlKey||i.shiftKey||i.altKey||(ct=ct.slice(ct.indexOf(l))))}),n in Gt){Gt[n]=!0;for(const a in fn)fn[a]===n&&(mt[a]=!0);if(!t)return}for(const a in Gt)Object.prototype.hasOwnProperty.call(Gt,a)&&(Gt[a]=i[ih[a]]);i.getModifierState&&!(i.altKey&&!i.ctrlKey)&&i.getModifierState("AltGraph")&&(ct.indexOf(17)===-1&&ct.push(17),ct.indexOf(18)===-1&&ct.push(18),Gt[17]=!0,Gt[18]=!0);const o=Zr();if(t)for(let a=0;a<t.length;a++)t[a].scope===o&&(i.type==="keydown"&&t[a].keydown||i.type==="keyup"&&t[a].keyup)&&hf(i,t[a],o,e);if(!(n in Ct))return;const s=Ct[n],r=s.length;for(let a=0;a<r;a++)if((i.type==="keydown"&&s[a].keydown||i.type==="keyup"&&s[a].keyup)&&s[a].key){const l=s[a],{splitKey:c}=l,h=l.key.split(c),d=[];for(let u=0;u<h.length;u++)d.push(ha(h[u]));d.sort().join("")===ct.sort().join("")&&hf(i,l,o,e)}}function mt(i,e,t){ct=[];const n=Ov(i);let o=[],s="all",r=document,a=0,l=!1,c=!0,h="+",d=!1,u=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(s=e.scope),e.element&&(r=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(c=e.keydown),e.capture!==void 0&&(d=e.capture),typeof e.splitKey=="string"&&(h=e.splitKey),e.single===!0&&(u=!0)),typeof e=="string"&&(s=e),u&&Hv(i,s);a<n.length;a++)i=n[a].split(h),o=[],i.length>1&&(o=Tv(fn,i)),i=i[i.length-1],i=i==="*"?"*":ha(i),i in Ct||(Ct[i]=[]),Ct[i].push({keyup:l,keydown:c,scope:s,mods:o,shortcut:n[a],method:t,key:n[a],splitKey:h,element:r});if(typeof r<"u"&&window){if(!En.has(r)){const f=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return df(g,r)},m=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;df(g,r),e8(g)};En.set(r,{keydownListener:f,keyupListenr:m,capture:d}),hc(r,"keydown",f,d),hc(r,"keyup",m,d)}if(!jr){const f=()=>{ct=[]};jr={listener:f,capture:d},hc(window,"focus",f,d)}}}function t8(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Ct).forEach(t=>{Ct[t].filter(n=>n.scope===e&&n.shortcut===i).forEach(n=>{n&&n.method&&n.method()})})}function yd(i){const e=Object.values(Ct).flat();if(e.findIndex(t=>{let{element:n}=t;return n===i})<0){const{keydownListener:t,keyupListenr:n,capture:o}=En.get(i)||{};t&&n&&(vr(i,"keyup",n,o),vr(i,"keydown",t,o),En.delete(i))}if((e.length<=0||En.size<=0)&&(Object.keys(En).forEach(t=>{const{keydownListener:n,keyupListenr:o,capture:s}=En.get(t)||{};n&&o&&(vr(t,"keyup",o,s),vr(t,"keydown",n,s),En.delete(t))}),En.clear(),Object.keys(Ct).forEach(t=>delete Ct[t]),jr)){const{listener:t,capture:n}=jr;vr(window,"focus",t,n),jr=null}}const dc={getPressedKeyString:Z4,setScope:Bv,getScope:Zr,deleteScope:$4,getPressedKeyCodes:q4,getAllKeyCodes:J4,isPressed:_4,filter:K4,trigger:t8,unbind:Hv,keyMap:qr,modifier:fn,modifierMap:ih};for(const i in dc)Object.prototype.hasOwnProperty.call(dc,i)&&(mt[i]=dc[i]);if(typeof window<"u"){const i=window.hotkeys;mt.noConflict=e=>(e&&window.hotkeys===mt&&(window.hotkeys=i),mt),window.hotkeys=mt}const i8="data:image/png;base64,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",n8=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <linearGradient id="grad1" x1="22.39%" y1="67.34%" x2="56.24%" y2="-36.34%">
            <stop stop-color="#FFFFFF" offset="0%"/>
            <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="100%"/>
        </linearGradient>
    </defs>
    <g fill-rule="nonzero" transform="translate(3.39, 2.29)">
        <path d="M14.39,3.17C14.82,3.17,15.17,3.52,15.17,3.96C15.17,4.4,14.82,4.75,14.39,4.75L14.06,4.75L13.16,15.72C13.08,16.68,12.29,17.42,11.34,17.42H3.87C2.92,17.42,2.13,16.68,2.06,15.72L1.15,4.75L0.83,4.75C0.4,4.75,0.05,4.4,0.05,3.96C0.05,3.52,0.4,3.17,0.83,3.17L14.39,3.17ZM12.49,4.75L2.72,4.75L3.61,15.59C3.62,15.71,3.7,15.8,3.81,15.82L3.87,15.83H11.34C11.48,15.83,11.59,15.73,11.6,15.59L12.49,4.75ZM6.04,7.39C6.48,7.39,6.83,7.74,6.83,8.18V12.4C6.83,12.84,6.48,13.19,6.04,13.19C5.61,13.19,5.26,12.84,5.26,12.4V8.18C5.26,7.74,5.61,7.39,6.04,7.39ZM9.17,7.39C9.61,7.39,9.96,7.74,9.96,8.18V12.4C9.96,12.84,9.61,13.19,9.17,13.19C8.74,13.19,8.39,12.84,8.39,12.4V8.18C8.39,7.74,8.74,7.39,9.17,7.39ZM10.22,0C10.65,0,11,0.35,11,0.79C11,1.23,10.65,1.58,10.22,1.58H5C4.57,1.58,4.22,1.23,4.22,0.79C4.22,0.35,4.57,0,5,0H10.22Z" fill="url(#grad1)"/>
    </g>
</svg>`,o8={auto:"",pen:"","pen-forbidden":"","pen-crosshair":"","pne-polygon":"","pen-circle":"","crosshair-rectangle":"","crosshair-circle":""},s8={position:"absolute",width:"34px",height:"34px",transform:"translate(-50%, -40px)",borderRadius:"50%",cursor:"pointer",zIndex:"9999",userSelect:"none",display:"flex",pointerEvents:"auto",alignItems:"center",justifyContent:"center",backgroundSize:"34px 34px",backgroundPosition:"center",backgroundRepeat:"no-repeat"},r8=`
  <div style="width: 32px; height: 32px; background-color: rgba(0, 0, 0, 0.5); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
    ${n8}
  </div>
`;class Nv{constructor(e){p(this,"container"),p(this,"deleteButton"),this.container=e??document.documentElement}setType(e){const t=o8[e];t?this.container.style.cursor=`url(${t}), auto`:this.container.style.cursor=e}showDeleteButton(e){const{clientX:t,clientY:n,container:o=this.container,onClick:s}=e;let r=this.deleteButton;return r||(r=document.createElement("div"),Object.assign(r.style,s8),r.style.backgroundImage=`url(${i8})`,r.innerHTML=r8),this.deleteButton=r,o.appendChild(r),r.style.left=`${t}px`,r.style.top=`${n}px`,r.onclick=()=>{o.removeChild(r),s()},r}removeDeleteButton(){this.deleteButton&&this.deleteButton.remove()}tip(e){return()=>this.closeTip()}closeTip(){}reset(){this.container.style.cursor="auto"}}class a8 extends Mt{constructor(e,t){super(),p(this,"name","MeasurePlugin"),p(this,"currentMeasureMesh"),p(this,"five"),p(this,"group"),p(this,"currentEndReason","enter"),p(this,"repositioningState",null),p(this,"longPressIndicator",null),p(this,"cleanupGlobalListeners"),p(this,"globalTouchHandler",null),p(this,"_pointSelector"),p(this,"_fiveDomEvents"),p(this,"_cursor"),p(this,"_config"),p(this,"lineStyle",{lengthEnable:!0,occlusionVisibility:!0,lengthUnit:"m",precision:2}),p(this,"polygonStyle",{lengthEnable:!0,occlusionVisibility:!0,opacity:.2,lengthUnit:"m"}),p(this,"initEventListeners",()=>{this.group.children.forEach(this.addMeshEventListeners)}),p(this,"measure",()=>{this.repositioningState&&this.cancelRepositioning(),this.listener.addMeasureListener(),mt.unbind("delete, backspace"),this.group.children.forEach(j=>j.unselect()),this.cursor.removeDeleteButton();const o=new cf({lineStyle:this.lineStyle,polygonStyle:this.polygonStyle});this.currentMeasureMesh=o,o.line.setStyle({cssStyle:"pointer-events: none;"}),this.pointSelector.actionIfNoIntersection="disable",this.updateSelectAdsorbedHelper();const s=new Rn({occlusionMode:"depthTest",occlusionVisibility:!0}),r=new Yr(pe(W({},this.lineStyle),{dashed:!0,cssStyle:"pointer-events: none;"})),a=new $s(this.polygonStyle),l=new Pi(pe(W({},this.lineStyle),{lineOpacity:.5,lineColor:3407837,dashed:!0,cssStyle:"pointer-events: none; opacity: 0.5;"})),c=new Pi(pe(W({},this.lineStyle),{lineOpacity:.5,lineColor:3407837,dashed:!0,cssStyle:"pointer-events: none; opacity: 0.5;"})),h=new Rn({occlusionMode:"depthTest",occlusionVisibility:!0,color:3407837,opacity:.5});let d=null,u=!1,f=!1;const m=j=>{j.key==="Shift"&&(f=!0)},g=j=>{j.key==="Shift"&&(f=!1)},v=()=>{s.removeFromParent(),r.removeFromParent(),a.removeFromParent(),l.removeFromParent(),c.removeFromParent(),h.removeFromParent()};this.group.add(o),document.addEventListener("keydown",m),document.addEventListener("keyup",g);const A=j=>{if(!j){v(),d=null,u=!1;return}if(o.points.length===0&&(this.pointSelector.actionIfNoIntersection="disable",this.group.addIfNotExists(s),s.position.copy(j.point),d=null,u=!1),o.points.length>=1)if(this.pointSelector.actionIfNoIntersection="virtualPoint",s.removeFromParent(),this.group.addIfNotExists(r),r.setStyle(pe(W({},this.lineStyle),{dashed:!0,cssStyle:"pointer-events: none;"})),r.setPoints([o.points.at(-1),j.point]),j.isAdsorbed)l.removeFromParent(),c.removeFromParent(),h.removeFromParent(),d=null,u=!1;else{const D=o.points.at(-1);if(Math.abs(j.point.y-D.y)>.2){const T=new R(j.point.x,D.y,j.point.z);l.setStyle(pe(W({},this.lineStyle),{lineOpacity:.5,lineColor:3407837,dashed:!0,cssStyle:"pointer-events: none; opacity: 0.5;"})),c.setStyle(pe(W({},this.lineStyle),{lineOpacity:.5,lineColor:3407837,dashed:!0,cssStyle:"pointer-events: none; opacity: 0.5;"})),l.setPoints([D,T]),c.setPoints([T,j.point]),h.position.copy(T),d=T.clone(),u=!0}else{let T=new R;Math.abs(j.point.x-D.x)<Math.abs(j.point.z-D.z)?T=new R(j.point.x,D.y,D.z):T=new R(D.x,D.y,j.point.z),l.setStyle(pe(W({},this.lineStyle),{lineOpacity:.5,lineColor:3407837,dashed:!0,cssStyle:"pointer-events: none; opacity: 0.5;"})),c.setStyle(pe(W({},this.lineStyle),{lineOpacity:.5,lineColor:3407837,dashed:!0,cssStyle:"pointer-events: none; opacity: 0.5;"})),l.setPoints([D,T]),c.setPoints([T,j.point]),h.position.copy(T),d=T.clone(),u=!0}this.group.addIfNotExists(l,c,h)}if(o.points.length>=2){const D=[...o.points,j.point];Lv(D)?(a.setStyle(W({},this.polygonStyle)),a.setPoints(D),this.group.addIfNotExists(a)):a.removeFromParent()}},w=j=>{if(!j)return;let D=j.point;f&&u&&d&&o.points.length>=1&&(D=d.clone()),v(),o.setPoints([...o.points,D]),this.updateSelectAdsorbedHelper(),o.isPolygon&&(this.currentEndReason="polygon",this.pointSelector.disable())},P=()=>{var j,D;o==null||o.setPoints(o.points.slice(0,-1)),v(),(D=(j=this.pointSelector.pointSelectorHelper)==null?void 0:j.magnifier)==null||D.render(),this.updateSelectAdsorbedHelper(),this.five.needsRender=!0},I=()=>{this.pointSelector.off("intersectionUpdate",A),this.pointSelector.off("select",w),this.pointSelector.off("disable",I),this.off("undo",P),document.removeEventListener("keydown",m),document.removeEventListener("keyup",g),o.line.setStyle({cssStyle:"pointer-events: auto;"}),v();let j=this.currentEndReason;o.points.length<2?(o.removeFromParent(),j="points_insufficient"):this.addMeshEventListeners(o),o.__five_pano_index=this.five.panoIndex,this.currentMeasureMesh=null,this.listener.removeMeasureListener(),this.emit("measureEnd",j),this.currentEndReason="enter"};this.on("undo",P),this.pointSelector.on("intersectionUpdate",A),this.pointSelector.on("select",w),this.pointSelector.on("disable",I),this.pointSelector.enable()}),p(this,"endMeasure",()=>{this.currentEndReason="external",this.pointSelector.disable()}),p(this,"endMeasureByEnter",()=>{this.currentEndReason="enter",this.endMeasure()}),p(this,"endMeasureByModeChange",()=>{this.currentEndReason="mode_change",this.endMeasure()}),p(this,"endMeasureByPanoMove",()=>{this.currentEndReason="pano_move",this.endMeasure()}),p(this,"endMeasureByFloorChange",()=>{this.currentEndReason="floor_change",this.endMeasure()}),p(this,"setLengthEnable",o=>{this.lineStyle.lengthEnable=o,this.polygonStyle.lengthEnable=o,this.group.children.forEach(s=>{s.changeConfig({lineStyle:W({},this.lineStyle),polygonStyle:W({},this.polygonStyle)}),this.addMeshEventListeners(s)}),this.currentMeasureMesh&&this.currentMeasureMesh.changeConfig({lineStyle:W({},this.lineStyle),polygonStyle:W({},this.polygonStyle)}),this.five.needsRender=!0}),p(this,"setUnit",o=>{if(this._config&&(this._config.unit=o),this.lineStyle.lengthUnit=o,this.polygonStyle.lengthUnit=o,this.group.children.forEach(s=>{try{s.changeConfig({lineStyle:W({},this.lineStyle),polygonStyle:W({},this.polygonStyle)}),this.addMeshEventListeners(s)}catch{}}),this.currentMeasureMesh)try{this.currentMeasureMesh.changeConfig({lineStyle:W({},this.lineStyle),polygonStyle:W({},this.polygonStyle)})}catch{}this.five.needsRender=!0}),p(this,"setPrecision",o=>{if(this._config&&(this._config.precision=o),this.lineStyle.precision=o,this.group.children.forEach(s=>{try{s.changeConfig({lineStyle:W({},this.lineStyle),polygonStyle:W({},this.polygonStyle)}),this.addMeshEventListeners(s)}catch{}}),this.currentMeasureMesh)try{this.currentMeasureMesh.changeConfig({lineStyle:W({},this.lineStyle),polygonStyle:W({},this.polygonStyle)})}catch{}this.five.needsRender=!0}),p(this,"cancel",()=>{var o;this.currentEndReason="escape",(o=this.currentMeasureMesh)==null||o.removeFromParent(),this.pointSelector.disable()}),p(this,"undo",()=>{this.emit("undo")}),p(this,"clearCurrentMeasure",()=>{var o;(o=this.currentMeasureMesh)==null||o.removeFromParent(),this.currentMeasureMesh=null,this.pointSelector.disable()}),p(this,"clear",()=>{this.currentMeasureMesh=null,this.pointSelector.disable(),this.group.children.forEach(this.removeMeshEventListeners),this.group.removeChildren(),this.cursor.removeDeleteButton()}),p(this,"dispose",()=>{this.listener.removeMeasureListener(),this.listener.removeClickListener(),this.pointSelector.disable(),this.disposeGlobalTouchHandler(),this.clear()}),p(this,"listener",{addClickListener:()=>{this.five.on("panoArrived",this.onMoveToPano),this.five.on("modeChange",this.onModeChange),mt("delete, backspace",this.deleteSelectedMesh),this.initEventListeners()},removeClickListener:()=>{this.group.children.forEach(o=>{var s,r;(s=o.line.doms)==null||s.forEach(a=>{a!=null&&a.container&&(a.container.onclick=null,a.container.onmouseenter=null,a.container.onmouseleave=null)}),(r=o.polygon.areaDom)!=null&&r.container&&(o.polygon.areaDom.container.onclick=null,o.polygon.areaDom.container.onmouseenter=null,o.polygon.areaDom.container.onmouseleave=null)}),this.fiveDomEvents.clear(),this.five.off("panoArrived",this.onMoveToPano),this.five.off("modeChange",this.onModeChange),mt.unbind("delete, backspace")},addMeasureListener:()=>{mt("ctrl+z, command+z",this.undo),mt("esc",this.cancel),mt("enter",this.endMeasureByEnter),this.five.on("mode.change",this.endMeasureByModeChange),this.five.on("pano.moveTo",this.endMeasureByPanoMove),this.five.on("model.changeShownFloor",this.endMeasureByFloorChange)},removeMeasureListener:()=>{mt.unbind("ctrl+z, command+z"),mt.unbind("esc"),mt.unbind("enter"),this.five.off("mode.change",this.endMeasureByModeChange),this.five.off("pano.moveTo",this.endMeasureByPanoMove),this.five.off("model.changeShownFloor",this.endMeasureByFloorChange)}}),p(this,"onMoveToPano",o=>{const s=this.group.children.filter(a=>a!==this.currentMeasureMesh),r=new Rr;s.forEach(a=>{var l;if(a.unselect(),a.__five_pano_index===o){a.visible=!0;return}(l=a.line.points)!=null&&l.some(c=>{var h,d;const u=c.clone().sub(this.five.camera.position).normalize();r.set(this.five.camera.position,u);const f=(d=(h=this.five.model.intersectRaycaster(r,void 0,!0))==null?void 0:h[0])==null?void 0:d.point;if(!f)return!0;const m=.01,g=c.distanceTo(this.five.camera.position);return f.distanceTo(this.five.camera.position)+m>g})?a.visible=!0:a.visible=!1,this.five.needsRender=!0})}),p(this,"onModeChange",o=>{o==="Mapview"&&this.group.children.forEach(s=>{s.visible=!0})}),p(this,"onClick",({origDomEvent:o,target:s})=>{var r;const a=s;if(!a)return;if(a.selected){a.unselect(),this.cursor.removeDeleteButton();return}let l,c;if(o&&("touches"in o&&o.touches&&o.touches[0]?(l=o.touches[0].clientX,c=o.touches[0].clientY):"clientX"in o&&"clientY"in o&&(l=o.clientX,c=o.clientY)),l===void 0||c===void 0)return;this.group.children.forEach(u=>u.unselect()),a.select();const h=()=>{this.removeMeshEventListeners(a),a.removeFromParent(),this.cursor.removeDeleteButton(),this.five.needsRender=!0},d=((r=this.five.getElement())==null?void 0:r.parentElement)||document.body;this.cursor.showDeleteButton({clientX:l,clientY:c,container:d,onClick:h}),this.five.once("cameraUpdate",()=>{a.unselect(),this.cursor.removeDeleteButton()})}),p(this,"onHover",({target:o})=>{if(this.currentMeasureMesh)return;const s=o;s&&s.hover()}),p(this,"onUnHover",({target:o})=>{if(this.currentMeasureMesh)return;const s=o;s&&s.unhover()}),p(this,"deleteSelectedMesh",()=>{this.group.children.filter(o=>o.selected).forEach(o=>{this.removeMeshEventListeners(o),o.removeFromParent()}),this.cursor.removeDeleteButton(),this.five.needsRender=!0}),p(this,"removeMeshEventListeners",o=>{var s,r,a;(s=o.line.pointMeshes)==null||s.forEach(l=>{const c=l.__longPressCleanup;c&&(c(),delete l.__longPressCleanup)}),(r=o.line.doms)==null||r.forEach(l=>{l!=null&&l.container&&(l.container.onclick=null,l.container.onmouseenter=null,l.container.onmouseleave=null)}),(a=o.polygon.areaDom)!=null&&a.container&&(o.polygon.areaDom.container.onclick=null,o.polygon.areaDom.container.onmouseenter=null,o.polygon.areaDom.container.onmouseleave=null),this.fiveDomEvents.removeEventListener(o,"click"),this.fiveDomEvents.removeEventListener(o,"hover"),this.fiveDomEvents.removeEventListener(o,"unHover")}),p(this,"updateSelectAdsorbedHelper",()=>{if(!this.currentMeasureMesh||this.currentMeasureMesh.points.length===0){this.pointSelector.setAdherePoints(null),this.pointSelector.adhereLine=[],this.pointSelector.adherePlane=[];return}if(this.currentMeasureMesh.points.length>=1){this.pointSelector.setAdherePoints([this.currentMeasureMesh.points[0]]);const o=this.currentMeasureMesh.points.at(-1);this.pointSelector.adhereLine=[new Ht(new R(1,0,0).add(o),new R(-1,0,0).add(o)),new Ht(new R(0,1,0).add(o),new R(0,-1,0).add(o)),new Ht(new R(0,0,1).add(o),new R(0,0,-1).add(o))],this.pointSelector.adherePlane=[]}if(this.currentMeasureMesh.points.length>=3){const o=new Nt().setFromCoplanarPoints(this.currentMeasureMesh.points[0],this.currentMeasureMesh.points[1],this.currentMeasureMesh.points[2]);this.pointSelector.adherePlane=[o]}else this.pointSelector.adherePlane=[]}),p(this,"addMeshEventListeners",o=>{var s,r;this.removeMeshEventListeners(o),this.addEndpointLongPressListeners(o),(s=o.line.doms)==null||s.forEach(a=>{a!=null&&a.container&&(a.container.onclick=l=>this.onClick({origDomEvent:l,target:o}),a.container.onmouseenter=()=>this.onHover({target:o}),a.container.onmouseleave=()=>this.onUnHover({target:o}))}),(r=o.polygon.areaDom)!=null&&r.container&&(o.polygon.areaDom.container.onclick=a=>this.onClick({origDomEvent:a,target:o}),o.polygon.areaDom.container.onmouseenter=()=>this.onHover({target:o}),o.polygon.areaDom.container.onmouseleave=()=>this.onUnHover({target:o})),this.fiveDomEvents.addEventListener(o,"click",this.onClick),this.fiveDomEvents.addEventListener(o,"hover",this.onHover),this.fiveDomEvents.addEventListener(o,"unHover",this.onUnHover)}),p(this,"addEndpointLongPressListeners",o=>{this.setupGlobalTouchHandler(),o.line.pointMeshes.forEach((s,r)=>{let a,l=!1,c=r;o.isPolygon&&o.points.length>3&&(r===o.line.pointMeshes.length-1&&(c=0),r>=o.points.length&&(c=0));const h=f=>{if(this.currentMeasureMesh)return;l=!1;let m=null;f.origDomEvent&&("clientX"in f.origDomEvent&&"clientY"in f.origDomEvent?m={x:f.origDomEvent.clientX,y:f.origDomEvent.clientY}:"touches"in f.origDomEvent&&f.origDomEvent.touches&&f.origDomEvent.touches[0]?m={x:f.origDomEvent.touches[0].clientX,y:f.origDomEvent.touches[0].clientY}:"changedTouches"in f.origDomEvent&&f.origDomEvent.changedTouches&&f.origDomEvent.changedTouches[0]&&(m={x:f.origDomEvent.changedTouches[0].clientX,y:f.origDomEvent.changedTouches[0].clientY})),f.stopPropagation(),f.origDomEvent&&(f.origDomEvent.preventDefault(),f.origDomEvent.stopPropagation()),this.showLongPressIndicator(s,m);const g=v=>{var A;if(m){let w,P;if("touches"in v&&v.touches[0])w=v.touches[0].clientX,P=v.touches[0].clientY;else if("clientX"in v)w=v.clientX,P=v.clientY;else return;Math.sqrt(Math.pow(w-m.x,2)+Math.pow(P-m.y,2))>10&&(this.hideLongPressIndicator(),a&&(clearTimeout(a),a=void 0),(A=this.cleanupGlobalListeners)==null||A.call(this))}};this.cleanupGlobalListeners=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g)},document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}),a=setTimeout(()=>{var v;l=!0,(v=this.cleanupGlobalListeners)==null||v.call(this),this.hideLongPressIndicator(),this.startRepositioning(o,c,!0,m)},500)},d=()=>{var f;a&&(clearTimeout(a),a=void 0),(f=this.cleanupGlobalListeners)==null||f.call(this),this.hideLongPressIndicator(),l&&this.repositioningState&&(this.repositioningState.isDragMode&&this.repositioningState.hasMoved||this.repositioningState.isDragMode,l=!1)},u=f=>{if(l)return f.stopPropagation(),l=!1,!1};this.fiveDomEvents.addEventListener(s,"mousedown",h),this.fiveDomEvents.addEventListener(s,"mouseup",d),this.fiveDomEvents.addEventListener(s,"click",u),s.__longPressHandlers={onPointerDown:h,onPointerUp:d,onClick:u,measureMesh:o,pointIndex:c},s.__longPressCleanup=()=>{var f;a&&clearTimeout(a),(f=this.cleanupGlobalListeners)==null||f.call(this),this.hideLongPressIndicator(),this.fiveDomEvents.removeEventListener(s,"mousedown",h),this.fiveDomEvents.removeEventListener(s,"mouseup",d),this.fiveDomEvents.removeEventListener(s,"click",u),delete s.__longPressHandlers}})}),p(this,"load",o=>{this.clear(),o.forEach(s=>{const r=new cf({lineStyle:this.lineStyle,polygonStyle:this.polygonStyle});r.setPoints(s.points),this.group.add(r),this.addMeshEventListeners(r),r.__five_pano_index=this.five.panoIndex}),this.five.needsRender=!0}),p(this,"startRepositioning",(o,s,r=!1,a)=>{this.currentMeasureMesh||this.repositioningState||(this.repositioningState={measureMesh:o,pointIndex:s,originalOpacity:o.line.lineOpacity,originalMeshState:o.points.map(l=>l.clone()),isDragMode:r,mouseDownPosition:a||void 0,hasMoved:!1},this.applyRepositioningStyle(o,!0),this.five.on("wantsGesture",this.preventFiveGestures),r?this.enableGlobalMouseTracking():(this.pointSelector.actionIfNoIntersection="virtualPoint",this.pointSelector.enable(),this.pointSelector.on("intersectionUpdate",this.onRepositioningMove),this.pointSelector.on("select",this.onRepositioningConfirm),this.pointSelector.on("disable",this.cancelRepositioning)),mt("esc",this.cancelRepositioning))}),p(this,"updatePolygonPoints",(o,s,r,a=!1)=>{if(o.isPolygon&&s.length>3&&r!==void 0){const l=s.length-1;r===0?s[l]=s[0].clone():r===l&&(s[0]=s[l].clone())}if(o.points=s,a&&this.repositioningState){const l=o.line;if(l.points=s,s.length>=2){const c=s.flatMap(h=>[h.x,h.y,h.z]);l.line1.geometry.setPositions(c),l.line1.computeLineDistances()}if(r!==void 0&&o.line.pointMeshes){const c=s[r];if(o.isPolygon&&s.length>3){const h=s.length-1;if(r===0){const d=o.line.pointMeshes[0],u=o.line.pointMeshes[h];d&&d.position.copy(c),u&&u.position.copy(c)}else if(r===h){const d=o.line.pointMeshes[0],u=o.line.pointMeshes[h];d&&d.position.copy(c),u&&u.position.copy(c)}else{const d=o.line.pointMeshes[r];d&&d.position.copy(c)}}else{const h=o.line.pointMeshes[r];h&&h.position.copy(c)}}o.isPolygon&&o.polygon.setPoints(s)}else o.line.setPoints(s),o.isPolygon&&o.polygon.setPoints(s)}),p(this,"onRepositioningMove",o=>{if(!this.repositioningState||!o)return;const{measureMesh:s,pointIndex:r}=this.repositioningState;this.repositioningState.hasMoved=!0;const a=[...s.points];a[r]=o.point.clone(),this.updatePolygonPoints(s,a,r,!0),this.five.needsRender=!0}),p(this,"onRepositioningConfirm",o=>{if(!this.repositioningState||!o)return;const{measureMesh:s,pointIndex:r}=this.repositioningState,a=[...s.points];a[r]=o.point.clone(),this.updatePolygonPoints(s,a,r,!1),this.applyRepositioningStyle(s,!1),this.addEndpointLongPressListeners(s),this.cleanupRepositioning()}),p(this,"confirmRepositioningOnDragEnd",()=>{if(!this.repositioningState)return;const{measureMesh:o,pointIndex:s}=this.repositioningState,r=[...o.points];this.updatePolygonPoints(o,r,s,!1),this.applyRepositioningStyle(o,!1),this.addEndpointLongPressListeners(o),this.cleanupRepositioning()}),p(this,"cancelRepositioning",()=>{if(!this.repositioningState)return;const{measureMesh:o,originalMeshState:s}=this.repositioningState;this.updatePolygonPoints(o,s,void 0,!1),this.applyRepositioningStyle(o,!1),this.addEndpointLongPressListeners(o),this.cleanupRepositioning()}),p(this,"applyRepositioningStyle",(o,s)=>{const r=s?.4:1,a=s;o.line.setStyle({lineOpacity:r,dashed:a,cssStyle:s?"pointer-events: none;":"pointer-events: auto;"}),o.isPolygon&&o.polygon.setStyle({opacity:r*.3}),o.line.pointMeshes.forEach(l=>{l.setStyle({opacity:r})})}),p(this,"enableGlobalMouseTracking",()=>{const o=this.five.getElement();if(!o)return;let s=null;const r=d=>{if(!this.repositioningState)return;const u=o.getBoundingClientRect(),f=(d.clientX-u.left)/u.width*2-1,m=-((d.clientY-u.top)/u.height)*2+1,g=new Ot;g.setFromCamera(new Qe(f,m),this.five.camera);const v=this.five.model.intersectRaycaster(g,void 0,!0);v&&v.length>0?(s={point:v[0].point,distance:v[0].distance,face:v[0].face,raycaster:g},this.onRepositioningMove(s)):(s={point:g.ray.origin.clone().add(g.ray.direction.clone().multiplyScalar(5)),distance:5,raycaster:g,isVirtual:!0},this.onRepositioningMove(s))},a=d=>{if(!this.repositioningState||!d.touches[0])return;const u=o.getBoundingClientRect(),f=d.touches[0],m=(f.clientX-u.left)/u.width*2-1,g=-((f.clientY-u.top)/u.height)*2+1,v=new Ot;v.setFromCamera(new Qe(m,g),this.five.camera);const A=this.five.model.intersectRaycaster(v,void 0,!0);A&&A.length>0?(s={point:A[0].point,distance:A[0].distance,face:A[0].face,raycaster:v},this.onRepositioningMove(s)):(s={point:v.ray.origin.clone().add(v.ray.direction.clone().multiplyScalar(5)),distance:5,raycaster:v,isVirtual:!0},this.onRepositioningMove(s))},l=d=>{this.repositioningState&&(s?this.onRepositioningConfirm(s):this.confirmRepositioningOnDragEnd())},c=d=>{this.repositioningState&&(s?this.onRepositioningConfirm(s):this.confirmRepositioningOnDragEnd())},h=d=>{this.repositioningState&&s&&this.onRepositioningConfirm(s)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",l),document.addEventListener("click",h),document.addEventListener("touchmove",a,{passive:!1}),document.addEventListener("touchend",c,{passive:!1}),this.repositioningState.__globalMouseCleanup=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",l),document.removeEventListener("click",h),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",c)}}),p(this,"showLongPressIndicator",(o,s)=>{this.hideLongPressIndicator();const r=this.five.getElement();if(!r)return;this.five.on("wantsGesture",this.preventFiveGestures);const a=document.createElement("div");if(a.style.position="absolute",a.style.width="80px",a.style.height="80px",a.style.border="6px solid #f0f0f0",a.style.borderRadius="50%",a.style.pointerEvents="none",a.style.zIndex="10000",a.style.boxSizing="border-box",a.style.animation="longPressShrink 500ms linear forwards",!document.querySelector("#longpress-keyframes")){const l=document.createElement("style");l.id="longpress-keyframes",l.textContent=`
        @keyframes longPressShrink {
          from {
            transform: translate(-50%, -50%) scale(1);
            opacity: 0.8;
          }
          to {
            transform: translate(-50%, -50%) scale(0);
            opacity: 1;
          }
        }
      `,document.head.appendChild(l)}if(s)a.style.left=`${s.x}px`,a.style.top=`${s.y}px`,a.style.transform="translate(-50%, -50%)";else{const l=o.getWorldPosition(new R).clone().project(this.five.camera),c=r.getBoundingClientRect(),h=(l.x+1)*c.width/2+c.left,d=(-l.y+1)*c.height/2+c.top;a.style.left=`${h}px`,a.style.top=`${d}px`,a.style.transform="translate(-50%, -50%)"}document.body.appendChild(a),this.longPressIndicator=a}),p(this,"hideLongPressIndicator",()=>{this.longPressIndicator&&(this.longPressIndicator.remove(),this.longPressIndicator=null,this.five.off("wantsGesture",this.preventFiveGestures))}),p(this,"preventFiveGestures",()=>!1),p(this,"cleanupRepositioning",()=>{if(this.repositioningState){const o=this.repositioningState.__globalMouseCleanup;o&&o(),this.repositioningState.isDragMode||(this.pointSelector.off("intersectionUpdate",this.onRepositioningMove),this.pointSelector.off("select",this.onRepositioningConfirm),this.pointSelector.off("disable",this.cancelRepositioning),this.pointSelector.disable())}this.five.off("wantsGesture",this.preventFiveGestures),mt.unbind("esc",this.cancelRepositioning),this.repositioningState=null,this.five.needsRender=!0}),p(this,"setupGlobalTouchHandler",()=>{var o;if((o=this.globalTouchHandler)!=null&&o.isSetup)return;const s=this.five.getElement();if(!s)return;const r=l=>{if(this.currentMeasureMesh)return;const c=l.touches[0];if(!c)return;const h=s.getBoundingClientRect(),d=(c.clientX-h.left)/h.width*2-1,u=-((c.clientY-h.top)/h.height)*2+1,f=new Ot;f.setFromCamera(new Qe(d,u),this.five.camera),f.params.Points.threshold=.5,f.params.Line.threshold=.1,f.params.Mesh={};const m=[];for(const g of this.group.children)if(!(!g||!g.line||!g.line.pointMeshes))for(let v=0;v<g.line.pointMeshes.length;v++){const A=g.line.pointMeshes[v];if(A&&f.intersectObject(A,!0).length>0){const w=A.__longPressHandlers;if(w){const P=this.calculateScreenDistance(c,A,s);P<30&&m.push({pointMesh:A,handlers:w,distance:P,measureMesh:w.measureMesh,pointIndex:w.pointIndex})}}}if(m.length>0){m.sort((A,w)=>A.distance-w.distance);const g=m[0];if(this.repositioningState)return;const v={type:"mousedown",target:g.pointMesh,origDomEvent:l,raycaster:f,intersects:[{distance:0}],stopPropagation:()=>{l.stopPropagation()}};g.handlers&&typeof g.handlers.onPointerDown=="function"&&g.handlers.onPointerDown(v)}},a=l=>{for(const c of this.group.children)if(!(!c||!c.line||!c.line.pointMeshes))for(const h of c.line.pointMeshes){if(!h)continue;const d=h.__longPressHandlers;d&&typeof d.onPointerUp=="function"&&d.onPointerUp()}};s.addEventListener("touchstart",r,{passive:!1}),s.addEventListener("touchend",a,{passive:!1}),this.globalTouchHandler={isSetup:!0,onTouchStart:r,onTouchEnd:a}}),p(this,"disposeGlobalTouchHandler",()=>{var o;if((o=this.globalTouchHandler)!=null&&o.isSetup){const s=this.five.getElement();s&&(s.removeEventListener("touchstart",this.globalTouchHandler.onTouchStart),s.removeEventListener("touchend",this.globalTouchHandler.onTouchEnd)),this.globalTouchHandler=null}}),p(this,"calculateScreenDistance",(o,s,r)=>{const a=o.clientX,l=o.clientY,c=s.getWorldPosition(new R).clone().project(this.five.camera),h=r.getBoundingClientRect(),d=(c.x+1)*h.width/2+h.left,u=(-c.y+1)*h.height/2+h.top,f=a-d,m=l-u;return Math.sqrt(f*f+m*m)}),this.five=e;const n={unit:"m",lengthEnable:!0,precision:2};this.config=t?W(W({},n),t):n,this.group=new mi,this.group.name="MeasureGroup",this.five.scene.add(this.group),this.five.on("panoArrived",this.onMoveToPano),this.five.on("modeChange",this.onModeChange),mt("delete, backspace",this.deleteSelectedMesh),this.initEventListeners()}get pointSelector(){return this._pointSelector?this._pointSelector:(this._pointSelector=new Pl(this.five,{mode:"cursor",helper:{pointHelper:"highlight"},skipPanorama:!0}),this._pointSelector)}get fiveDomEvents(){return this._fiveDomEvents?this._fiveDomEvents:(this._fiveDomEvents=new Rs(this.five,{fiveModels:null}),this._fiveDomEvents)}get cursor(){return this._cursor?this._cursor:(this._cursor=new Nv,this._cursor)}get config(){return this._config}set config(e){var t,n;this._config=e,this.lineStyle.lengthUnit=e.unit,this.polygonStyle.lengthUnit=e.unit,e.lengthEnable!==void 0&&(this.lineStyle.lengthEnable=e.lengthEnable,this.polygonStyle.lengthEnable=e.lengthEnable),e.precision!==void 0&&(this.lineStyle.precision=e.precision),(n=(t=this.group)==null?void 0:t.children)==null||n.forEach(o=>o.changeConfig({lineStyle:this.lineStyle,polygonStyle:this.polygonStyle}))}}const oD=(i,e)=>new a8(i,e);var nh={},l8={get exports(){return nh},set exports(i){nh=i}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(i){(function(){var e={}.hasOwnProperty;function t(){for(var s="",r=0;r<arguments.length;r++){var a=arguments[r];a&&(s=o(s,n(a)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var r="";for(var a in s)e.call(s,a)&&s[a]&&(r=o(r,a));return r}function o(s,r){return r?s?s+" "+r:s+r:s}i.exports?(t.default=t,i.exports=t):window.classNames=t})()})(l8);const qs=nh;var wr=(i=>(i.TOP_LEFT="topLeft",i.TOP_RIGHT="topRight",i.BOTTOM_LEFT="bottomLeft",i.BOTTOM_RIGHT="bottomRight",i))(wr||{});function c8(i){if(i.length===0)return[];if(Array.isArray(i[0]))return i;let e=[];return i.forEach(t=>{const n=[t[wr.TOP_LEFT],t[wr.BOTTOM_LEFT],t[wr.BOTTOM_RIGHT],t[wr.TOP_RIGHT]];e.push(n)}),e}const h8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKqADAAQAAAABAAAAKgAAAADUGqULAAAB0ElEQVRYCe2WSUoEQRBFLVHEiVZU1I03cKW38SSewRt4A5fiTty5cQIFR9pZQWkcUNSe2/Z9yISiSGxRkUAy4BGZSVX168gistraYsQKxArECsQKxApYqkDyU5lmsznMM+ZgAGpQhaUkSRbINgLJCXiCBtSgAkVYtGGIBTKj8AgKSVahDNvQa0IUkUG4Bx91BpLdBTOS/cgUIB3a+gMwI9mFzE3a0I3z5B4r292JzGVA8tSSZILMcUDyzIykthOZvYDk+V9Ktmz4yGzhOhV4/+5YU4N/hzqo0StX3Fg5TcnNlYvgs8bPsM4hkScHoyO46haRnGEYktQVI+4ypUYKyXtxyUu27JCceAMJvjo0HoM5CEZ7cPX7i013q3IWVV5r2aw/2TK+svWbPGU68KQCa6pYeus1V0X99quSfvtVSc39lmfz2mdbz32tg1dAJ0421AVs9E7/FxBSezrMmjI/gm5/nYmMkBq+TqBs7LNgTlZH6EnWlPmORdk+pHQipUNfTxtg7p3NIXWRMvXfoqusmXsNhpC6crIS1Zf9C6yAOdlxpK5BW18CiT7A/G93gE+P0FY/RoO+RWqS62YhB2r4YhlixArECsQKxArECvzjCnwAOr0wF44ggHAAAAAASUVORK5CYII=",bd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAACoCAMAAAD6pITnAAABQVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACvr68AAAAAAAAAAAB5eXkAAAA8PDzr6+sLCwuenp4UFBT////8/PyLi4umpqZycnKxsbHMzMykpKTy8vKoqKhcXFwpKSmwsLD+/v7k5OSCgoLw8PDo6Oi0tLRkZGSrq6syMjL6+vrn5+eYmJj29vbd3d3Q0NCwsLDDw8Pz8/PT09P09PSwsLB/f39OTk739/fh4eHY2NiFhYX4+PjGxsZkZGSkpKS3t7eRkZG/v78eHh6CgoKKiorr6+uysrL+/v77+/vb29v9/f2wsLCysrKxsbFdXV39/f3u7u7t7e3j4+OoqKj5+fmrq6vp6elqamqVlZWtra0+Pj7w8PDW1tbJycnNzc27u7v29vba2tqXl5cjIyNsbGzf399ubm7d3d3///8pT4ZyAAAAanRSTlMzAAYIDA8KFRIccB8XIlIZPr80ZDb88FppT2iLaNJrRzpW+LNWzrp0Sm086rdg26WST4LVltltU0Pfq51X44UoJHdcfjcuHMFF++6i82RiWxX2x8SvSOc7vEs1LiHKmYiOe92gLCMfqE2kqsY2dQAAEBhJREFUeNrs2MFqq0AUxvHT28xdnEWQGNBKMHGnARdutIsspARxU+NOiu//HrdUZFozYTxMbltn5v8IPw7fxMCD7Vuy0OIs9FKz0OIs9FKz0OIs9FKz0OKWCf3nl/fw37sz9O8n/Tl+dWj9hO/nrQ5tCLICtiq0HPlRi1Sw7w+tIfA0ZWt1aLHxX2165NGt6dByZqHwasEJvRWoVaAnyjrwivqKTaVWh/6iPCFm2sS5OTaBWh16osyRq7Krs+jSBDkuvDxoLlFWd2XFsbm1gJoMTWcezrjqswbf8930xTsV64VXnLyX1PXxvSbrq+G41ag5NJGZK7d9/Yroe+u9swWt2jr7tecjvtZ9y63p1HRoAXOZ5Rh68QG07RB7IeZZOaHm0lRoOjOr6gD9wgHtcwofg7piCtRAdebMZYaJ9wyG9OwlmJWcmioN5HMemSMMnzQbZclkP4UYjdTkowai8zgaF/TfNmBYmzcfL+OACKTVoSfMbY1+bBzzB3XsY91OqAnQFGe26gMsjBqNz20LDPoVI0sDZTaGc44wPYLBHVOMhqOmzAfMdB7PmZVBEoPhxUlQsuGoZ0sDbTZYh67R5zx0dLFjkvkgQl/NxsnIR3Da5nQ1HwRoiTNjVZPswfbRPmkqxuZLA8U5CA343J6bEwYUaZjvXOY7jf87onfY5aVEmgLNndE9g+1TZxe5NAFa5pwa+5Fyq206XxpmOle5a52vpd28mikNsoEe38Gd3Q1B5934IspmGmY5t01o30Fhh7BpJ9JkaO7MosT+rruRk0SMS0ugZc4d2u+Um+2xmyMNsoeQMVbiP/bMhSdtKIrjJ3sEcrMsFagFpqC4ifIaviY4MAONPHQ6xDgX49vodr7/B9i5lnpb0setddFFfonaXhDw58n/nNvWYIQjNfaNJImG6Fe0COhkdHR9w4VINPnDu6RBJqBH1+tcycnENHh6PmYv/vqzF3Ps2GLav+i3PDiKMMKDIg+Pt+6iPQo63Gaj4PAkx9phc0nLi6YGqnveYqswwpNVtqWbJnGSoq3BEd6Ljy5xSBCL74XN4SEpWgTHt1EnlO2H30R4SIm2FvR0fDRCSxGJT7uXNHgU9C8YIcUvj5IGl4IOhxdSo4KWJJJaCIddShrcCnqLJWCEJAm25VbS4FbQ7fkY+GF9vzUPL5XYfNutpMGloMNJDfxQRuLgxe5vtGTYpaTBpaCvWQX8cIicahNeJhV2bSlpGdF6QS/EwReooy5HgvdwTdMUuSaUIBzfMJ3NZjVwYKr52/LcjULUErrrRQX8EF/QS1pOtCjoH19WfYo2+BR4KCwgIgMZFCQchWQRccam+LTs+UxJxSUQnCLiEZg4p4Vt8MHqlx+ipF1FWwv6mCkPFI07F89MdCQ+zxoXG+vlq4Ojk1IPDRbhnvcqopoGwSwiboAPFHZsKWkv0UYrbKfAH2iioDwr0VBCWy5NY9UYnZ8OtZwE+CHVNtqht2iRHKHvWgDReBgNKrqwbOV9ENHLOIR6eHLVsGR0kVbzQnyaTrvgC+17yDE7wDE5bthcENGofo0FEz0MCyI6gZ3eeL5eXVnKkM7Fid82H+4EERtgcEFnY36vLN04Zgc4JscxmwoimlhK/BvRxc8m1pBYM68kHJthDogq4goQMyfrFcPphzsKSA/dHfEWc0RnrUWBRBZOsWPH7ADH5KDhLqBo7C3+E9Fn6ErUXnSMjfUqQnS6gzgJOis4RAkgl0ErCakBT2SHt+g3uuhdLahoYqzycNHlqJWKT9EH/X6fK8z3+wd0GqXDZSGaT3MTLqIb+ADR2q4u+o276FcW0ex9YNFEPvXIU4e86LpYqgPRQjyMGKI3u4h9cBE99hDR75lJNOEm2kiOG5YOIlrwefOxRacnTDAkmHlFcRDNB2VmiN6gVe0+YCiC6dmZRYMsJFS+xS1z+jx+ymUFvEmzGyM7PESLiL5mSiDRglLtKeZoq+hKniB3vbvvaj7f49+JbRgwSQ+CYE3sE//QYVF2y3ItQlpS9E8WCyZakPkAUjABn7S+MhOaf9EKwQu3QD8r6MCBveh0R2RQiw5/gxQx9lNStIjodhz8go7sS8WQis7MBtsZeotesoi+Ne1WqnQsO+nG207dEOyn6FBoIRpctKCbfVrRue07jhC74/TFO6G+0jA1xB0wKKpI1PQq7SCOgyTRhVDIfpIGh14Ymi4GFW3lIPd0og3i46hO8GbY3BF5JhJ9J6UzMVVFzhVwEsi7pyTF6ZBDNwSHiA7tNR9XNFabEqI7H2yYMYs+H7PSR6I/tFi2FV1WEcv61DHRGc6zLt4zvm2aVWBevIQ3zT0h+rWc6F3tkUVjp+wtOgM2NMyiCyjBmFV0hP8ttRYfJIzxrqGS0GUF7smYRPPfWjJmjQ90sA6SaLu+RSdrjyyaWH8a0azUgmYLiVbOEA3ZHaSw2DaqOoKCLpxiq0Lmb4HYp5UmSFJLyokWQ8e7L6uPL3rpSUR3yOy+HroR00WlxAoSna8i6i/PiC4XDX8UmKXSzgHM8U8Vk7/J8m4wdvz3ouc+WikiURxanDP/KpFHInMBFqZmkDgbvKyRxHUu2sjmc/3Wfh/+oejnGh0+po7E+YmKnN5ZgdueHCaDeLg56GJ8hzQQndfDJE9Hm3Dp64ZWLekl2npJKRR691ybobTojUvjfW/TUKnX0YbCacN0mf/MIhqueGnwf0BGAflm+C4UuhdNeIt+mvFO/WRDdVj0Gi1u2oqmB2bETWwdfWEWbViz3ANngzuFh/pSOoNYv+UtFKRp7vkW/Zw3LJN8U2wrmo5LRnEhkbGILnNK9JQycWoRXTBmizzZBZ3PtMY/0zxIU5z2Lfo5b8GlREfGM4VUwyxaBc7RYChRLKL52FwZbFyqIEpatHDJLbhv0X/ZOaPetGEgAEd7K0LLYBAadQXagcogndAQEiorFQsoCs0eKAG1qHSsPKzL//8By9mxEzMy26jNHpp7gCgoEf7sO/vOd/4PQSXtH+JKg1YO/btnoqCnxDRr4RsgQCo1oCGoJA062TApX6RBg7CgPR1k5vc7fJeioHVqiqeRIXwnOaAhTCoNOvnAf20Q17X59ad9QQtOhj9gQ5G44scEG/ImHfT3hQP/0qCT38qyvMVghM+kxPZubdziHuh4k8rLggbPsUxc8Zuge4NHWsT9EdrK2gLNd1jUpDdnzz3s87a7RU8nAXe4KFxC458D9CkILCLRRQR00yZzYTN04F2aNyas228zqrRnqCadblAPtHdDXMg2UedDeFN7f9D8yRCF62gimEEXd97iAT7rVWF/RR509jkSaMTCizS04ACwMlnMNYpAjbTZ/vaCoA0U1wD5Gtyt5JA+Pil9NF6qohnSWQJaOEyaXSaaEvbukuRyVn2dnlDDWUO3HkGBRwzoZh4LBp0PRBZ0mLHrYUts4r9haogzNOAjcmuF1LuaWWal49HZZJMcDTygQVaE7xcS6FFKNjIjIeh4YUFvGBvdAfERavDdDUHDb/WwvweNGfay0CxVWMG1vRZLctwDtJpk2u5PeOSIugn4skG3k5ACn+pyoC/quRsYqhveqqOEI4vW8Wxlo8spbkEtULauqNNV+q4Kgn4TBT1PLhH9zoExlVeo9lp0ox+b5uoCmioH+iG4YfJAX0OHFpQL8oLCZxSLoi1oGuQ9HCnPKWj+LjhdSKvL5EorCv2iN9VJTBdekCfZFb/DUKkxioC2cruEccGDqGGBgu5H5ZqCHvkgh3STYPEE+ZDakFE4B/qe764sATQ33WB72XGfZLHQh9YRpW57jy7q44w3uSXjaKUNd646WImCbjqOo3V/9ZRwMgyFXXX0YW3Xc636zDWhN91tO6F3tIrA9sp93KIDQMcb6T3L3+y9yt964UPviSZV9UhTIw09Gwxi3HX/h2FMXM00Wd0f+TfOKfWt5cPfOlcSWdyFlkMKtGxBZ+vVF3QKg2ZnQzUtUZYrUVYBtFDaLmuk1bls0f3KKiuvVfyie5Ux0b5wSivokL5Kj5EQFz1zBQOaU1qx20gfnKQHo4gfjHJywJpofvlbaDvG6VE/4kf9jMFyCJe/sbbjID28SvjwKjygOQWdcbZDHafHsf1h74xxGISBIJjWdhOFF6RLeAOSm7ikpEH+/zviQ4LTWTbrB+w9YbRaBBI7Y/cpgW40B/rpXiPNgcHRgUENNPjpvt0dkZOZY5OZ0TQHAl13RyG9cQQW3+y3wrnZHAoaRDpz1nhk1jjXgcag60jvfB7iJ+FuAo1Ba3dopB2n5/H0vNNAd+fYYKQzZQpIppBRoAU0jnSiHuReD5JgoAU0jrSj8OZeeONgoAU0jHQhTYVT955HQYNAg6FuLY+8UkrWk5KtWYsDDHWDSAvpSM1eT7MXtTjA9DyOtJCmOLItjhTOONBYD3KRTlShtlSo6eLc0INg0LY8jpp2iXLf6n6TcJaCNsXRB43LQ0iHRF11ratOQTjD4sCgLelIAbsVsEfLGYBGpLWmQ1y/fHM531O+awymoLFmD9f0STq//cLvHuVei39n4QwLelyFakiHzU/8lveYJ78Fw3lAhQojbUn/27Gf1kaBOIzju2kWktH8oQ1oPaTrzSzk4CX2UBAKHiUnKfXu+38Lu78Js08rA89h2sOMfl+B82F4RJvsNPn/08Upa+BsGWgKzaX1fJwnfan/nPVsMGfEoe3SUZ+parIfL4dKZX1kdybQiErHN+mhU2kxyZfifZGqbrg5x9yZQ2M8xtJ6qKP6qtL3yVHfv6fqWkd6nsfOGA4GzaVXRlqom1wdHyc1IIfHo8obYTbOK+rMobl0VOfqlDz/mEjPyUnldUScHaBH0p+pu0yl1QQ+y/dVqrLuE/PY2QGaSGvqoSkv6pgUAf9t+l0kR3Upm0EzU2cOzaWt1Juh71ql0mT7tA9ssg/7p22SKtV2/bCxMFudOTSXXkIa1GK9qfuyVf9KH86vyUu19bzqJXk9P6Ryorbs640ogxnOS4szg+bSmA9QG2vBHurmrSvza5tdlOddsvaal91bUw+CbJTBjNmAM4Xm0pKWxnwYalgLdnBFH5UNM2ZDOy/gTKC5NObDSm2sA/KO0NrCjNkgzgSazIdIG2pYi3ZgrddQBrM409ng0Fwa1P+tDXYY4msJyFAGM3Em0ETaQg1rwRbugNrpYijbmeHsDg3pMbVYA1u0db6q75AYA1mUR8zMmUPzS22oYW200c7T4lswhjKY+XXm0Fwa1LDW2Cj2OpxDkKEMZpszh3aghrXhDqiVCcqE2Rka0iNqWEPbZ3U8O4yhDGbi7A4Naqu1cAfTLwRlwuwAzanFWmsH2VISZcLsAE2pYS3YwXHLaYAMZc7sDg1qWBtszR1Y5lx3UCbMDtCMWqyBHQI5TgFkKBNmB2hGDWvtHUx3aOHA7AgNa2gH2QI5KLtBwzpA8AVyVHaHBnbwOeA4Qk8I2wHla6GD9f4yFA7tnh/8P789gZ6zNUP72gxtb4b2tRna3gztazO0vRna1/4CjIBfFd68JpIAAAAASUVORK5CYII=",oh="data:image/png;base64,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",d8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAABcVBMVEUAAAAAAAD////////+/v45OTn////////39/fp6enPz8/7+/vw8PD+/v7x8fHc3NzHx8f////////+/v77+/vr6+v////7+/v5+fn////z8/P////////q6uqgoKD+/v79/f3m5ub+/v7////////////////39/f39/f////z8/P////t7e3s7Oz29vb////5+fn////h4eH////g4ODV1dX////////BwcH///////////+Ojo5zc3MlJSX////////////////////////7+/v////////////v7+/u7u7n5+f////39/f////09PT6+vr09PT+/v76+vr////5+fnv7+/09PTk5OT////////////////Jycn///++vr7///////+0tLT///9TU1P///8SEhL////////+/v76+vr////8/Pz39/ft7e3t7e36+vr////////X19fV1dX///+xsbF9fX1iYmL///////+K8mOEAAAAenRSTlMaAIDy8CD41cWRX9uk7Kl1VVEw6dWT/M/NvKyVkY475eWIgx0Z39rHv7axnZyZmIuKhn56emZjX1FEPTU0Kx4PCAX69fTgxcKkopWL7crJuri2sa6rnIyHhX54bVtZVU9NSUcsJSIcFROno6Hcwp+ekHVxbWhnRC8nDLc9s8oAAAOGSURBVEjHpdd3X9pAGAfwkBBDAoQmBJmWvUWWiIDIHoJb66x7a4d78Op7pBQ1J5DY33987vnyXEIu3CGy/0hvnDthM+l0hj3JScSudDKOdhNPpl1i8Ut624Gi6+trI3zW1tcdqGM7/SIC5/ZRR2SNJEm7JkHt7FAJjR18WIs40P3cAFxIOaIRna6ZOHxGunk+TDR1ukjUkSr0w86bcKShiz1OI4JMP8YAD9+4emM2Gm407IfIhzm0NxrhKNsLH4SvQ+RktyvUfZIMXYcPPsSFCcvY6EYW6ZPsxuiYZaLwAW5bDY70Da5paxjvm8d+UcjAUL/GzPtCnDF/mwFWhJ75Zs68x05gxxFRGQfa+RYXokHVCC4O4yOqYLTwBjNB+ncWEZnsbzrIvOLz4CW9g4jODn0ZPO/iZN0UmhaPp0Omq+Q/nLu6NO0hErJnurjKdTBzEdAhkqILXDAdbFkJ7EnDe4EVy198srpiwhE4X1RKDFOqviBwcNPK6gmPmeWlGDz+VdHqRPEVHo0tLTM8RpcX4G+flLe6kU/Cs1pYRnm8uriQhfoC+0ZDvbMLi6ttfO5fDCDCKFrvooAKAov+c4BZvy8EzaolCHRdIZ+fBThl9G0Ih1RCrBJWbPiMKYAZ409oMSqFWAktzJ9GBuDvRoVGOIQJMSas0CiM39u45v0M9tbaeLc6F5M+7dhcbRfgg+pcU/oNa85VDwDOzBtmpP9UKsN8BuCzeb1P+kPi08+fASyr6fVPUh/PJ72+xj/bZk5PSV0YlJ4z83iC4EipS5LkiAkeHxGcQerLwMARRzyW+QklhUgKpST8nXfYg+fHkjS89MPz0MFnhKdCSWpc8RBnPAZB3RUvLt7i3oob7f5juDzuikY81tjcHlcHg9xabdyUWDvF2ay3slecr1ptimNx9lhhs1bzXQxy5NZa6VMx9pS2Wt1H77cVjFartYvBdlDICDc0cbVa3Twd2NcOyuLwVqo+K1ebjgdcr0k+O1uXwThfl8vlhqm+99kASup5GINsYhhmG8d7UXzcBgo2e21cd9WlUll5/7G958ql8uxu7y0zS5SGSkOGBA51TRiGQAi232Y9v4kVQZGavpt6c6l3tLpNsc38gGOC01IeLg4Xi8NaLz1KkqO0VzvcTrFscYo4oLjiRAsKEXeJPRqxW0bsFWLGLVbiocyZSm5vbW0nU9BsIfyp/AGqAvfOkBaFawAAAABJRU5ErkJggg==",sD=(i,{videoElement:e})=>{const t={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:e},n=Xh(i),o=new Map,s=A=>{t.videoTexture&&(t.videoTexture.image.muted=A)},r=()=>t.videoTexture?t.videoTexture.image.muted:!0,a=()=>{if(t.enabled||!t.videoTexture)return;t.enabled=!0,t.videoMeshes=c(),t.videoMeshes.forEach(w=>i.scene.add(w));const A=()=>{if(!t.videoTexture)return;const w=()=>{var P;t.videoTexture&&((P=t.videoTexture)==null||P.image.removeEventListener("timeupdate",w),t.videoTextureEnabled=!0,t.videoMeshes.forEach(I=>{I.material.map!==t.videoTexture&&(I.material.map=t.videoTexture)}),i.needsRender=!0)};t.videoTexture.image.addEventListener("timeupdate",w),t.videoTexture&&t.videoMeshes.length&&(t.videoTexture.image.play(),t.videoTexture.image.onplay=()=>{n.hide()},t.videoTexture.image.onpause=()=>{n.show()},t.videoTexture.image.onclick=()=>{t.videoTexture.image.muted=!1,t.videoTexture.image.play()})};if(i.model.loaded)A();else return i.once("modelLoaded",()=>A())},l=()=>{t.enabled&&(t.enabled=!1,t.videoMeshes.forEach(A=>{A.geometry.dispose(),A.material.dispose(),i.scene.remove(A),t.videoTexture&&t.videoTexture.image.pause()}),t.videoMeshes=[],i.needsRender=!0)},c=()=>t.rectPoints.map((A,w)=>{const P=new xt,I=128,j=[];j.push(...A[0].toArray());for(let x=1;x<I;x++)j.push(A[0].x+(A[1].x-A[0].x)*x/I,A[0].y+(A[1].y-A[0].y)*x/I,A[0].z+(A[1].z-A[0].z)*x/I);j.push(...A[1].toArray()),j.push(...A[2].toArray());for(let x=1;x<I;x++)j.push(A[2].x+(A[3].x-A[2].x)*x/I,A[2].y+(A[3].y-A[2].y)*x/I,A[2].z+(A[3].z-A[2].z)*x/I);j.push(...A[3].toArray());const D=[];D.push(0,1);for(let x=1;x<I;x++)D.push(0,1-x/I);D.push(0,0),D.push(1,0);for(let x=1;x<I;x++)D.push(1,x/I);D.push(1,1);const T=[];for(let x=0;x<I;x++)T.push(x,x+1,I*2-x,x,I*2-x,I*2+1-x);P.setAttribute("position",new dt(new Float32Array(j),3)),P.setAttribute("uv",new dt(new Float32Array(D),2)),P.setIndex(new dt(new Uint32Array(T),1));const M=new Ze({map:t.videoTextureEnabled?t.videoTexture:t.imageTexture,side:It}),O=new We(P,M);O.renderOrder=1,O.name=`ModelTVVideoPlugin-${w}-${performance.now()}`;const y=[A[1],A[2],A[3],A[0]],C=n.create3DDomContainer(y);if(C!=null&&C.container){const x=document.createElement("div");x.classList.add("play-icon"),x.style.width="100%",x.style.height="100%",x.style.display="flex",x.style.justifyContent="center",x.style.alignItems="center",x.style.pointerEvents="none",C.container.appendChild(x);const S=document.createElement("img");S.src=bd,S.style.width="200px",S.style.pointerEvents="auto",S.onclick=()=>{t.videoTexture.image.muted=!1,t.videoTexture.image.play()},x.appendChild(S),o.set(O,C)}return O}),h=A=>{const w=new Ao().load(A);return w.minFilter=zi,w.magFilter=zi,w.format=tu,w},d=(A,w)=>{let P=w;return new Promise((I,j)=>{const D=new XMLHttpRequest;D.onreadystatechange=()=>{if(D.readyState===4)if(D.status===200){const T=window.URL||window.webkitURL;P=P||document.createElement("video"),P.crossOrigin="anonymous",P.muted=!0,P.loop=!0,P.playsInline=!0,P.src=T.createObjectURL(D.response);const M=new Ph(P);M.minFilter=zi,M.magFilter=zi,M.format=tu,I(Object.assign(M,{videoSource:A}))}else j(new Error("Video download Error: "+D.status))},D.onerror=T=>j(T),D.open("GET",A),D.responseType="blob",D.send()})},u=(A,w)=>ee(void 0,null,function*(){const{video_src:P,video_poster_src:I,points:j}=A;t.videoSource=P,t.rectPoints=c8(j).map(D=>D.map(({x:T,y:M,z:O})=>new R(T,M,O))),t.imageTexture=h(I),w&&(t.videoElement=w),t.videoTexture=yield d(t.videoSource,t.videoElement),t.enabled=!!A.enable,t.enabled&&a()}),f=A=>{if(!t.enabled)return;const w=t.videoMeshes;if(!(!w||A.intersectObjects(w).length===0))return t.videoTexture&&(t.videoTexture.image.paused||t.videoTexture.image.pause()),!1},m=A=>{A==="Floorplan"?n.hide():n.show()},g=()=>{if(!t.enabled)return;const A=i.camera.position;if(o.forEach((w,P)=>{const I=w.css3DObject.position.clone(),j=I.clone().sub(A).normalize(),D=new Ot(A,j),T=i.model.intersectRaycaster(D)[0],M=I.distanceTo(A),O=.01;T&&T.distance+O<M?w.hide():w.show()}),!r()){const w=t.rectPoints.find(P=>{const I=P[0].clone().add(P[1]).add(P[2]).add(P[3]).divideScalar(4);return P.map(j=>j.clone().add(I).divideScalar(2)).filter(j=>{const D=j.distanceTo(A),T=new Ot(A,j.clone().sub(A).normalize()),M=i.model.intersectRaycaster(T)[0],O=.01;return!(M&&M.distance+O<D)}).length>=2});(!w||w.length===0)&&s(!0)}},v=()=>{l(),t.videoTexture=void 0,i.off("modeChange",m),i.off("wantsTapGesture",f),i.off("panoArrived",g),i.off("renderFrame",()=>{t.videoMeshes.forEach(A=>{A&&(A.needsRender=!0)})})};return i.on("modeChange",m),i.on("wantsTapGesture",f),i.on("panoArrived",g),i.on("renderFrame",()=>{t.videoMeshes.forEach(A=>{A&&(A.needsRender=!0)})}),{enable:a,disable:l,load:u,dispose:v,state:t,css3DRenderPlugin:n}};function u8(i){Ee(i,"svelte-1irjijd",'.plugin-DoorLabelPlugin-item.svelte-1irjijd.svelte-1irjijd{position:absolute;left:0;top:0;width:0;height:0;pointer-events:none;transition:opacity 0.3s ease}.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd{position:absolute;top:50%;left:50%;border-radius:0.125rem;background:rgba(0, 0, 0, 0.35);line-height:0.75rem;padding:0.375rem;white-space:nowrap;font-size:0.75rem;font-style:normal;color:white;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform ease 1s, background ease 0.3s, color ease 0.3s}.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd::after{content:"";display:block;position:absolute;top:-0.0625rem;left:-0.0625rem;bottom:-0.0625rem;right:-0.0625rem;border-radius:0.125rem;border:0.0625rem solid rgba(0, 0, 0, 0);-o-border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlMAIE397fAAAAAVSURBVAjXY2BjgCMQ+PABhIAASRwARxwD8fgzCQAAAAAASUVORK5CYII=") 4;border-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlMAIE397fAAAAAVSURBVAjXY2BjgCMQ+PABhIAASRwARxwD8fgzCQAAAAAASUVORK5CYII=") 4;transition:opacity ease 0.3s}.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd:active,.plugin-DoorLabelPlugin-cnt.svelte-1irjijd.svelte-1irjijd:focus{background:rgba(0, 0, 0, 0.5);color:rgba(255, 255, 255, 0.5)}.plugin-DoorLabelPlugin-icon.svelte-1irjijd.svelte-1irjijd{background:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSIxMHB4IiB2aWV3Qm94PSIwIDAgMTAgMTAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aW1hZ2Ut566t5aS0PC90aXRsZT4KICAgIDxkZWZzPgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iNjYuMDYyMTk3NSUiIHkxPSI1MCUiIHgyPSItMS4xMzY4NjgzOGUtMTElIiB5Mj0iNTAlIiBpZD0ibGluZWFyR3JhZGllbnQtMyI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iMCUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgc3RvcC1vcGFjaXR5PSIwLjg1IiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iODQuMzM5NzMxJSIgeTE9IjUwJSIgeDI9IjIzLjQyODMzNzclIiB5Mj0iNTAlIiBpZD0ibGluZWFyR3JhZGllbnQtNCI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIwJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZGRkZGIiBzdG9wLW9wYWNpdHk9IjAuOCIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSLpobXpnaItMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IlZSLeWIhumXtOW8leWvvOagh+etvuWkh+S7vS0zIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzM5LjAwMDAwMCwgLTU0My4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hC0y5aSH5Lu9LTEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMDUuMDAwMDAwLCA1MzYuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iaW1hZ2Ut566t5aS0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNC4wMDAwMDAsIDcuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDwvbWFzaz4KICAgICAgICAgICAgICAgICAgICA8dXNlIGlkPSJCRyIgZmlsbC1vcGFjaXR5PSIwIiBmaWxsPSIjRDhEOEQ4IiBvcGFjaXR5PSIwLjUxMTQ2Mjk4NCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuOTM4ODY5OCwxLjE0Mzc2MTI5IEM4LjI1NDY1NDA0LDEuMjU3NTgwMzUgOC4zMTc4Mjg0LDEuMzAyMTY5OTggOC4zMTc3ODUyMSwxLjM1ODE1MjIzIEM4LjMxNzc1MDcyLDEuNDAyODQzMzUgOC4zMDU3NDkwNywxLjQ0NzUyNTI0IDguMjgxNzg0MTEsMS40ODcyMDUyMSBMOC4yODE3ODQxMSwxLjQ4NzIwNTIxIEw2LjIwOTg5MDQxLDQuOTE3NzQyNDUgQzYuMTM3ODg4MDgsNS4wMzY5NjAyOSA2LjEwMTg4NjkxLDUuMTcxMjIwMiA2LjEwMTg4NjkxLDUuMzA1NDgwMTEgQzYuMTAxODg2OTEsNS40Mzk3NDAwMiA2LjEzNzg4ODA4LDUuNTczOTk5OTQgNi4yMDk4OTA0MSw1LjY5MzIxNzc4IEw2LjIwOTg5MDQxLDUuNjkzMjE3NzggTDguMjgxNzg0MTEsOS4xMjM3NTUwMSBDOC4zMTc0NzQzOCw5LjE4Mjg0OTE2IDguMzI1ODMzMjIsOS4yNTA4MTUyIDguMzEwNDk1OTUsOS4zMTI5MzAyOCBDOC4yOTUxNTg2OCw5LjM3NTA0NTM2IDguMjU2MTI1MzEsOS40MzEzMDk0NyA4LjE5NzAzMTE3LDkuNDY2OTk5NzMgQzguMTU3MzUxMTksOS40OTA5NjQ2OSA4LjExMjY2OTMxLDkuNTAyOTY2MzQgOC4wNjc5NzgxOCw5LjUwMzAwMDgzIEM4LjAyMzI4NzA2LDkuNTAzMDM1MzEgNy45Nzg1ODY3MSw5LjQ5MTEwMjYzIDcuOTM4ODY5OCw5LjQ2NzE5ODkzIEw3LjkzODg2OTgsOS40NjcxOTg5MyBMMS4zNzk5MTIxOCw1LjUxOTY3ODE1IEMxLjMyMDc2MzAyLDUuNDg0MDc5MTIgMS4yODE2NDI4Nyw1LjQyNzg3NTMyIDEuMjY2MjA5NzcsNS4zNjU3ODM5OCBDMS4yNTQ2OTI1Niw1LjMxOTQ0NzMyIDEuMjU2MzY2OTgsNS4yNjk4MzE4MiAxLjI3Mjc1MzMzLDUuMjIzMDU0MDUgTDEuMjcyNzUzMzMsNS4yMjMwNTQwNSBaIiBpZD0i566t5aS0IiBzdHJva2U9InVybCgjbGluZWFyR3JhZGllbnQtNCkiIHN0cm9rZS13aWR0aD0iMC41IiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTMpIiBtYXNrPSJ1cmwoI21hc2stMikiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuMDM5MjAwLCA1LjMwNTQ4MCkgc2NhbGUoMSwgLTEpIHJvdGF0ZSgtOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTUuMDM5MjAwLCAtNS4zMDU0ODApICI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=") no-repeat;background-size:100%;display:inline-block;width:0.625rem;height:0.625rem;margin-left:0.25rem;transform-origin:center}.plugin-DoorLabelPlugin-cnt[data-camera-toward=forward].left.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=forward].right.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=forward].right.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt[data-camera-toward=right].forward.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=right].back.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=right].back.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt[data-camera-toward=left].back.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=left].forward.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=left].forward.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt[data-camera-toward=back].right.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(90deg)}.plugin-DoorLabelPlugin-cnt[data-camera-toward=back].left.svelte-1irjijd .plugin-DoorLabelPlugin-txt.svelte-1irjijd{order:1}.plugin-DoorLabelPlugin-cnt[data-camera-toward=back].left.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{transform:rotate(-90deg);margin-left:0;margin-right:0.25rem;order:0}.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd.svelte-1irjijd{color:#f9eac1}.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd .plugin-DoorLabelPlugin-icon.svelte-1irjijd{background:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCAxMCA4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPueureWktDwvdGl0bGU+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjEwLjYzODU4ODQlIiB5MT0iMCUiIHgyPSI5Ni41MTYxNDc0JSIgeTI9IjEyOS43MzEzNTQlIiBpZD0ibGluZWFyR3JhZGllbnQtMSI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkYyQ0MiIG9mZnNldD0iMCUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0VBRDA5QSIgb2Zmc2V0PSI0OC43MTQ0NDc4JSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRDFCMTdFIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i5pyq5p2l5a625aSH5Lu9LTI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzA1LjAwMDAwMCwgLTU0NS4wMDAwMDApIiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTEpIiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICA8ZyBpZD0i57yW57uELTLlpIfku70tMTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0NS4wMDAwMDAsIDUzNy4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJpbWFnZS3nrq3lpLQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYwLjAwMDAwMCwgNy4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOC40OTU3ODI5NCwxLjYxNjQ1MTEgTDYuNDIzODg5MjUsNS4wNDY5ODgzMyBDNi4zMjc4ODYxMyw1LjIwNTk0NTQ1IDYuMzI3ODg2MTMsNS40MDUwMTQ3NyA2LjQyMzg4OTI1LDUuNTYzOTcxODkgTDguNDk1NzgyOTQsOC45OTQ1MDkxMiBDOC42Mzg1NDQwMSw5LjIzMDg4NTcxIDguNTYyNjUzNjQsOS41MzgyMzc1IDguMzI2Mjc3MDYsOS42ODA5OTg1NiBDOC4xNjc1NTcxNiw5Ljc3Njg1ODQgNy45Njg4MjE5NSw5Ljc3NzAxMTc1IDcuODA5OTU0MzEsOS42ODEzOTY5NyBMMS4yNTA5OTY2OSw1LjczMzg3NjE4IEMxLjAxNDQwMDA4LDUuNTkxNDgwMDcgMC45MzgwMzU0ODEsNS4yODQyNDU3NiAxLjA4MDQzMTU5LDUuMDQ3NjQ5MTQgQzEuMTIyNTE0OCw0Ljk3NzcyNjI4IDEuMTgxMDczODMsNC45MTkxNjcyNSAxLjI1MDk5NjY5LDQuODc3MDg0MDQgTDcuODA5OTU0MzEsMC45Mjk1NjMyNTMgQzguMDQ2NTUwOTMsMC43ODcxNjcxNDIgOC4zNTM3ODUyNCwwLjg2MzUzMTczOSA4LjQ5NjE4MTM1LDEuMTAwMTI4MzUgQzguNTkxNzk2MTMsMS4yNTg5OTYgOC41OTE2NDI3OCwxLjQ1NzczMTIgOC40OTU3ODI5NCwxLjYxNjQ1MTEgWiIgaWQ9IueureWktCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNS4wMzkyMDAsIDUuMzA1NDgwKSBzY2FsZSgxLCAtMSkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtNS4wMzkyMDAsIC01LjMwNTQ4MCkgIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==") no-repeat}.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd.svelte-1irjijd:active,.plugin-DoorLabelPlugin-cnt--customBrand.svelte-1irjijd.svelte-1irjijd:focus{background:rgba(0, 0, 0, 0.5);color:rgba(249, 234, 193, 0.5)}')}function p8(i){let e,t,n,o=i[0].name+"",s,r,a,l,c,h,d,u,f;return{c(){e=U("div"),t=U("div"),n=U("span"),s=Te(o),r=re(),a=U("i"),b(n,"class","plugin-DoorLabelPlugin-txt svelte-1irjijd"),b(a,"class","plugin-DoorLabelPlugin-icon svelte-1irjijd"),b(t,"class",l=dn(qs("plugin-DoorLabelPlugin-cnt",i[0].toward))+" svelte-1irjijd"),b(t,"style",c=`transform: ${i[0].transform||"initial"};pointer-events: ${i[0].inSight?"auto":"none"};opacity: ${i[0].inSight?1:0}`),b(t,"data-camera-toward",h=i[0].cameraToward),b(e,"style",d=`left: ${i[0].left||0}%;top: ${i[0].top||0}%;opacity: ${i[0].inSight?1:0}`),b(e,"class","plugin-DoorLabelPlugin-item svelte-1irjijd")},m(m,g){Y(m,e,g),H(e,t),H(t,n),H(n,s),H(t,r),H(t,a),i[4](e),u||(f=Se(t,"click",i[3]),u=!0)},p(m,[g]){g&1&&o!==(o=m[0].name+"")&&Ne(s,o),g&1&&l!==(l=dn(qs("plugin-DoorLabelPlugin-cnt",m[0].toward))+" svelte-1irjijd")&&b(t,"class",l),g&1&&c!==(c=`transform: ${m[0].transform||"initial"};pointer-events: ${m[0].inSight?"auto":"none"};opacity: ${m[0].inSight?1:0}`)&&b(t,"style",c),g&1&&h!==(h=m[0].cameraToward)&&b(t,"data-camera-toward",h),g&1&&d!==(d=`left: ${m[0].left||0}%;top: ${m[0].top||0}%;opacity: ${m[0].inSight?1:0}`)&&b(e,"style",d)},i:oe,o:oe,d(m){m&&Q(e),i[4](null),u=!1,f()}}}function f8(i,e,t){let{props:n}=e,{onClick:o}=e,s;const r=()=>{const{left:c,top:h,inSight:d,panoIndex:u}=n;!c||!h||!d||!s||(s.current.clientWidth/window.innerWidth*100,s.current.clientHeight/window.innerHeight*100)},a=c=>{o&&o()};function l(c){_e[c?"unshift":"push"](()=>{s=c,t(2,s)})}return i.$$set=c=>{"props"in c&&t(0,n=c.props),"onClick"in c&&t(1,o=c.onClick)},r(),[n,o,s,a,l]}class m8 extends ye{constructor(e){super(),Ae(this,e,f8,p8,ve,{props:0,onClick:1},u8)}}function g8(i,e){const t=Math.abs(i.top+i.height/2-e.top-e.height/2),n=Math.abs(i.left+i.width/2-e.left-e.width/2),o=(i.height+e.height)/2,s=(i.width+e.width)/2;return!(t>o&&n>s)}function v8(i){const{camera:e}=i,t=e.getWorldDirection(new R);let n=Math.atan(t.z/t.x)*180/Math.PI,o="";return t.x<0&&(n+=180),n<0&&(n+=360),n>315||n<=45?o="right":n>45&&n<=135?o="back":n>135&&n<=225?o="left":n>225&&n<=315&&(o="forward"),o}function A8(i,e){return Math.sqrt(Math.pow(i.z-e.z,2)+Math.pow(i.x-e.x,2))}function y8(i){const e=Math.PI/4;return i>-e&&i<=e?"left":i>e*3||i<=-e*3?"right":i>-e*3&&i<=-e?"forward":i>e&&i<=e*3?"back":""}const b8={userAction:!0};class w8 extends xo{constructor(e){super(e),p(this,"state",{enabled:!0,visible:!0}),p(this,"container"),p(this,"MinVisibledistance",1.8),p(this,"MaxVisibledistance",5),p(this,"OffsetHeight",-1.3),p(this,"floorplanServerData"),p(this,"visibleLabelMap",new Map),p(this,"labelItems",[]),p(this,"doorLabels"),p(this,"roomObservers"),p(this,"loadData",(t,n)=>{n&&(this.MaxVisibledistance=n.MaxVisibledistance,this.MinVisibledistance=n.MinVisibledistance,this.OffsetHeight=n.OffsetHeight),this.labelItems=[],this.doorLabels=[],this.floorplanServerData=t,Ti(this.five).then(()=>{this.initData(),this.fixDoorVisibleAndPosition(),this.applyState()})}),p(this,"dispose",()=>{var t,n,o,s,r,a,l;(t=this.five)==null||t.off("wantsToMoveToPano",this.hideAllLabels),(n=this.five)==null||n.off("modelLoaded",this.fixDoorVisibleAndPosition),(o=this.five)==null||o.off("panoArrived",this.fixDoorVisibleAndPosition),(s=this.five)==null||s.off("initAnimationEnded",this.fixDoorPosition),(r=this.five)==null||r.off("cameraUpdate",this.fixDoorPosition),(a=this.five)==null||a.off("mouseWheel",this.fixDoorPosition),(l=this.five)==null||l.off("pinchGesture",this.fixDoorPosition),this.applyState({enabled:!1})}),p(this,"initRoomObservers",()=>{var t,n;const o=this.floorplanServerData.computed_data.floor_datas||[],s=(((n=(t=this.five)==null?void 0:t.work)==null?void 0:n.observers)||[]).map(r=>{const a=r.panoIndex,l=r.floorIndex,c=o==null?void 0:o.find(h=>h.floor_index===l);if(c){const h=c.rooms.find(d=>d.observer_indexs.includes(a));if(h)return{panoIndex:a,floorIndex:l,name:h.name}}}).filter(Boolean);this.roomObservers=s}),p(this,"hideAllLabels",()=>{this.labelItems.forEach(t=>{t.visible=!1,t.inSight=!1})}),p(this,"fixDoorVisibleAndPosition",()=>{this.initRoomObservers();const{panoIndex:t}=this.five;if(!this.state.visible||this.five.model.empty||t===null||!this.roomObservers.find(r=>r.panoIndex===t))return;const n=this.roomObservers.find(r=>r.panoIndex===t),o=this.five.work.observers.find(r=>r.panoIndex===t).position.clone(),s=(()=>{if(this.visibleLabelMap.has(t))return this.visibleLabelMap.get(t);{const r=[];return this.doorLabels.forEach((a,l)=>{if(a.roomName===n.name)return;const c=a.position.clone(),h=c.distanceTo(o);if(h<this.MinVisibledistance||h>this.MaxVisibledistance)return;const d=new Ot,u=c.clone().sub(o).normalize();d.set(o,u);const[f]=this.five.model.intersectRaycaster(d);f&&f.distance+.1<h||r.push(l)}),this.visibleLabelMap.set(t,r),r}})();this.labelItems.forEach((r,a)=>{r.visible=s.includes(a)}),this.fixDoorPosition()}),p(this,"fixDoorPosition",()=>{var t,n,o,s,r,a,l,c,h,d,u,f;if(!this.state.enabled||!this.state.visible)return;const{panoIndex:m,camera:g}=this.five;if(m===null)return;if(this.five.currentMode!=="Panorama")return this.hideAllLabels();const v=this.five.getElement(),A=v.clientWidth,w=v.clientHeight,P=g.getWorldDirection(new R),I=[];if(this.labelItems.forEach((j,D)=>{var T;if(j.visible){const y=g.position.distanceTo(j.position),C=j.position.clone().add(new R(0,this.OffsetHeight,0)),x=C.clone().sub(g.position).normalize().angleTo(P),S=C.clone().project(g),k=(S.x+1)/2.2*100,z=(-S.y+1)/2.2*100,q=k>=0&&k<=100&&z>=0&&z<=100&&y>this.MinVisibledistance&&y<=this.MaxVisibledistance;j.left=k,j.top=z,j.inSight=q&&x<Math.PI/2,j.cameraToward=v8(this.five),q?I.push({disFromCameraToLabel:y,left:k,top:z,index:D}):j.transform="translate(-50%, -50%)"}else j.inSight=!1;const M=j,O=es(M,["svelteApp"]);(T=j.svelteApp)==null||T.$set({props:O})}),I.length>1){let j=0;I.sort((D,T)=>T.disFromCameraToLabel-D.disFromCameraToLabel);for(let D=1;D<I.length;D++){const{index:T,left:M,top:O}=I[D-1],{index:y,left:C,top:x}=I[D],S=this.container.children[T],k=this.container.children[y];if(!S||!k)return;const z={left:A*M/100,top:w*O/100,width:(o=(n=(t=S.children)==null?void 0:t[0])==null?void 0:n.clientWidth)!=null?o:0,height:(a=(r=(s=S.children)==null?void 0:s[0])==null?void 0:r.clientHeight)!=null?a:0},q={left:A*C/100,top:w*x/100,width:(h=(c=(l=k.children)==null?void 0:l[0])==null?void 0:c.clientWidth)!=null?h:0,height:(f=(u=(d=k.children)==null?void 0:d[0])==null?void 0:u.clientHeight)!=null?f:0};g8(z,q)&&(j++,this.labelItems[T].transform=`translate(-50%, ${(j-1)*100-50}%)`,this.labelItems[y].transform=`translate(-50%, ${j*100-50}%)`)}}}),p(this,"onClick",(t,n)=>{if(!this.roomObservers)return;const{work:o}=this.five;let s,r,a=1/0;for(const l of o.observers)if(this.roomObservers.find(c=>c.panoIndex===l.panoIndex&&c.name===t)){const c=l.standingPosition,h=n.distanceTo(c);h<a&&(s=l.panoIndex,r=c.clone().sub(n).normalize(),a=h)}if(r!==void 0&&s!==void 0){const l={};if(a>0){const c=new R(0,0,-1),h=r.clone(),d=new tt;d.setFromUnitVectors(c,h);const u=new ui;u.setFromQuaternion(d,"YXZ"),l.longitude=u.y}this.five.emit("wantsToMoveToPano",s,{},!0)||this.five.moveToPano(s,{longitude:l.longitude})}}),p(this,"initData",()=>{var t;this.doorLabels=[],this.labelItems.forEach(r=>{var a;return(a=r.svelteApp)==null?void 0:a.$destroy()}),this.labelItems=[];const n=this.five.panoIndex,o=this.floorplanServerData.computed_data.observers[n].floor_index,s=this.floorplanServerData.computed_data.floor_datas[o];(t=this.floorplanServerData.computed_data.doors)==null||t.forEach(r=>{const a=this.five.work.observers.filter((u,f)=>{var m;return!!((m=s==null?void 0:s.rooms)!=null&&m.find(g=>g.observer_indexs.includes(f)))}),l=r.position;let c=1/0,h;a.forEach(u=>{const f=u.standingPosition,m={x:f.x,y:f.y,z:f.z},g=A8(l,m);g<c&&(c=g,h=m)}),h&&(l.y=h.y+.01);const d=new R(l.x,l.y,l.z);d.add(new R(-.2,1.8,0).applyEuler(new ui(0,r.rad,0))),this.doorLabels.push({roomName:r.name,name:r.name,position:d,toward:y8(r.rad)})}),this.labelItems=this.doorLabels.map(r=>pe(W({},r),{left:0,top:0,visible:!1,inSight:!1,transform:"",cameraToward:""})),this.five.on("wantsToMoveToPano",this.hideAllLabels),this.five.on("panoArrived",this.fixDoorVisibleAndPosition),this.five.on("initAnimationEnded",this.fixDoorPosition),this.five.on("cameraUpdate",this.fixDoorPosition),this.five.on("mouseWheel",this.fixDoorPosition),this.five.on("pinchGesture",this.fixDoorPosition),this.fixDoorVisibleAndPosition()})}appendTo(e){this.state.enabled&&(this.container=e)}setState(e,t){const n=this.state;this.state=W(W({},n),e);const o=n.enabled&&n.visible,s=this.state.enabled&&this.state.visible;o!==s&&this.applyState()}show(){this.setState({visible:!0})}hide(){this.setState({visible:!1})}enable(){this.setState({enabled:!0})}disable(){this.setState({enabled:!1})}stateChangedCallback(e,t){if(this.hooks.hasListener("stateChange")){const n={state:this.state,prevState:e,userAction:t?t.userAction:b8.userAction};this.hooks.emit("stateChange",n)}}applyState(e){const t=e??this.state;t.enabled!==!1&&t.visible!==!1?(this.labelItems.forEach(n=>{n.svelteApp=new m8({target:this.container,props:{props:n,onClick:()=>{this.onClick(n.name,n.position)}}})}),this.fixDoorPosition()):this.labelItems.forEach(n=>{n.svelteApp.$destroy()})}initState(){return{enabled:!0,visible:!0}}}const rD=i=>new w8(i);function Fv(i,e){console.warn(`🚫 ==> [${i}]: ${e}`)}var Vl={},x8=C8;function C8(i,e,t){return i[0]=e[0]+t[0],i[1]=e[1]+t[1],i}var P8=E8;function E8(i,e,t){return i[0]=e,i[1]=t,i}var I8=M8;function M8(i,e){var t=e[0],n=e[1],o=t*t+n*n;return o>0&&(o=1/Math.sqrt(o),i[0]=e[0]*o,i[1]=e[1]*o),i}var S8=D8;function D8(i,e,t){return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i}var k8=z8;function z8(i,e){return i[0]*e[0]+i[1]*e[1]}var j8=x8,sh=P8,Vv=I8,L8=S8,T8=k8,uf=[0,0];Vl.computeMiter=function(i,e,t,n,o){return j8(i,t,n),Vv(i,i),sh(e,-i[1],i[0]),sh(uf,-t[1],t[0]),o/T8(e,uf)};Vl.normal=function(i,e){return sh(i,-e[1],e[0]),i};Vl.direction=function(i,e,t){return L8(i,e,t),Vv(i,i),i};var Cn=Vl,Lo=[0,0],za=[0,0],pf=[0,0],Ar=[0,0],O8=function(i,e){var t=null,n=[];e&&(i=i.slice(),i.push(i[0]));for(var o=i.length,s=1;s<o;s++){var r=i[s-1],a=i[s],l=s<i.length-1?i[s+1]:null;if(Cn.direction(Lo,a,r),t||(t=[0,0],Cn.normal(t,Lo)),s===1&&uc(n,t,1),!l)Cn.normal(t,Lo),uc(n,t,1);else{Cn.direction(za,l,a);var c=Cn.computeMiter(pf,Ar,Lo,za,1);uc(n,Ar,c)}}if(i.length>2&&e){var h=i[o-2],d=i[0],u=i[1];Cn.direction(Lo,d,h),Cn.direction(za,u,d),Cn.normal(t,Lo);var f=Cn.computeMiter(pf,Ar,Lo,za,1);n[0][0]=Ar.slice(),n[o-1][0]=Ar.slice(),n[0][1]=f,n[o-1][1]=f,n.pop()}return n};function uc(i,e,t){i.push([[e[0],e[1]],t])}function Wv(i,e){const t=i[0],n=i[1],o=e[0],s=e[1];var r=(s.x-o.x)*(t.y-o.y)-(s.y-o.y)*(t.x-o.x),a=(n.x-t.x)*(t.y-o.y)-(n.y-t.y)*(t.x-o.x),l=(s.y-o.y)*(n.x-t.x)-(s.x-o.x)*(n.y-t.y);if(l!==0){var c=r/l,h=a/l;if(0<=c&&c<=1&&0<=h&&h<=1)return!0}return!1}function R8(i,e){for(let t=0;t<i.length-1;t++)for(let n=0;n<e.length-1;n++)if(Wv([i[t],i[t+1]],[e[n],e[n+1]]))return{x:(i[t].x+i[t+1].x)/2,y:(i[t].y+i[t+1].y)/2,line1RelativeIndex:t,line2RelativeIndex:n}}const B8=2,H8=3,N8=3,F8=2;function V8(i){const e=i.width,t=i.unitLength,n=e/2,o=i.path;if(o.length===0)return{geometry:new xt,maxV:0,curvePath:null,curvePoints:null};const s=new ta;o.forEach(M=>{const O=W8(M);O&&s.add(O)});const r=Math.ceil(s.getLength()*100);s.arcLengthDivisions=r;const a=s.getPoints(r),l=a.length;if(l<=2)return{geometry:new xt,maxV:0,curvePath:null,curvePoints:null};const c=O8(a.map(M=>[M.x,M.z])),h=(l-1)*B8*H8,d=2*l,u=d*N8,f=d*F8,m=new Uint32Array(h),g=new Float32Array(u),v=new Float32Array(f);let A=0,w=0;for(let M=0;M<l;M++){const[O,y]=c[M][0],C=a[M],{x,y:S,z:k}=C,z=new R(x+O*n,S+.05,k+y*n);g[M*6+0]=z.x,g[M*6+1]=z.y,g[M*6+2]=z.z;const q=new R(x-O*n,S+.05,k-y*n);g[M*6+3]=q.x,g[M*6+4]=q.y,g[M*6+5]=q.z,A+=M>0?a[M-1].clone().sub(a[M]).length():0;const X=A/t;w=X,v[M*4+0]=0,v[M*4+1]=X,v[M*4+2]=1,v[M*4+3]=X;const $=new R().lerpVectors(z,q,.5);i.skipPositions&&i.skipPositions.some(ne=>ne.distanceTo($)<.26)||M!==l-1&&(m[M*6+0]=M*2+0,m[M*6+1]=M*2+2,m[M*6+2]=M*2+1,m[M*6+3]=M*2+2,m[M*6+4]=M*2+3,m[M*6+5]=M*2+1)}const P=[];let I;const j=[];for(let M=0;M<l-1;M++){if(I!==void 0&&M<=I)continue;const O=M+1,y={x:g[M*6+0],y:g[M*6+2]},C={x:g[M*6+3],y:g[M*6+5]},x={x:g[O*6+0],y:g[O*6+2]},S={x:g[O*6+3],y:g[O*6+5]},k=Wv([y,C],[x,S]);if(k&&P.push(M),!k&&P.length){P.push(M);const z=new Qe(y.x,y.y).distanceTo(new Qe(x.x,x.y)),q=new Qe(C.x,C.y).distanceTo(new Qe(S.x,S.y)),X=300,$=[],ne=[],_=Math.max(0,P[0]-t*X),se=P[0];for(let he=_;he<se;he++)z<q?$.push({x:g[he*6+0],y:g[he*6+2]}):$.push({x:g[he*6+3],y:g[he*6+5]});const K=P[P.length-1],me=Math.min(l-1,P[P.length-1]+t*X);for(let he=K;he<me;he++)z<q?ne.push({x:g[he*6+0],y:g[he*6+2]}):ne.push({x:g[he*6+3],y:g[he*6+5]});const De=R8($,ne);if(De){const{line1RelativeIndex:he,line2RelativeIndex:je,x:ze,y:Pe}=De,Le=_+he,ie=K+je+2;for(let be=Le;be<ie;be++)z<q?(g[be*6+0]=ze,g[be*6+2]=Pe):(g[be*6+3]=ze,g[be*6+5]=Pe),I=be;let Me,Fe,Ie,Ve,ue;z<q?(Me=g[_*6+1],Fe=g[Le*6+1],Ie=g[ie*6+1],Ve=g[me*6+1],ue=(Fe+Ie)/2):(Me=g[_*6+4],Fe=g[Le*6+4],Ie=g[ie*6+4],Ve=g[me*6+4],ue=(Fe+Ie)/2);for(let be=_;be<Le;be++){const Je=Le-_,nt=(be-_)/Je;z<q?g[be*6+1]=Me+(ue-Me)*nt:g[be*6+4]=Me+(ue-Me)*nt}for(let be=Le;be<ie;be++)z<q?g[be*6+1]=ue:g[be*6+4]=ue;for(let be=ie;be<me;be++){const Je=me-ie,nt=(be-ie+1)/Je;z<q?g[be*6+1]=ue+(Ve-ue)*nt:g[be*6+4]=ue+(Ve-ue)*nt}j.push({start:Le,end:ie})}P.length=0}}const D=new Float32Array(d);j.forEach(M=>{for(let O=0;O<l-1;O++)O>=M.start&&O<=M.end?(D[O*2+0]=1,D[O*2+1]=1):D[O]!==1&&(D[O*2+0]=0,D[O*2+1]=0)});const T=new xt;return T.setAttribute("position",new dt(g,3)),T.setAttribute("uv",new dt(v,2)),T.setIndex(new dt(m,1)),{geometry:T,maxV:w,animationWillError:j,curvePath:s,curvePoints:a}}function W8(i){var e,t;if(G8(i)){const n=i.points.map(o=>new R().fromArray(o));return new Rg(n,(e=i.closed)!=null?e:!1,(t=i.curve_type)!=null?t:"centripetal",i.tension)}}function G8(i){return i.type==="CatmullRomCurve3"}function Q8(i,e){e.forEach(t=>{const n=new Xo(.02,16,16),o=[],s=[new Ze({color:16776960}),new Ze({color:16711935}),new Ze({color:16711680}),new Ze({color:65535})];if(t.position.length===4)t.position.forEach((r,a)=>{const l=s[a],c=new We(n,l);c.position.copy(ln(r)),o.push(c)});else{const r=s[0],a=new We(n,r);a.position.copy(ln(t.position)),o.push(a)}o.forEach(r=>{r.material.depthTest=!1,i.scene.add(r)})})}const pt=i=>i;function Gv(i){if(!i||i.length<3)return;const e=i.map(Ue),t=e[1].clone().sub(e[0]),n=e[2].clone().sub(e[1]);return t.cross(n)}function U8(i){return i.stickType==="Plane"}function X8(i){return i.stickType==="3DPoint"}function Go(i){return i.stickType==="Model"&&i.contentType==="MediaModel"}function Y8(i){return i.stickType==="Model"&&i.contentType==="Model"}function q8(i){return i.stickType==="Plane"&&i.contentType==="MediaPlane"}function rh(i){const e=(()=>{if(Go(i)&&i.matrix){const t=new Xe().fromArray(i.matrix);return i.data.mediaPosition.map(n=>Ue(n).clone().applyMatrix4(t))}else return i.position})();return QA(e)}function ff(i){const e=rh(i);return qt(...Array.isArray(e)?e:[e])}function ja(i,e){if(i===void 0)return;const{min:t,max:n}=e??{};if(!(t===void 0&&n===void 0))return!(typeof n=="number"&&n<i||typeof t=="number"&&t>i)}function Z8(i,e,t){const n=new Nt().setFromNormalAndCoplanarPoint(t,e),o=e.clone().sub(i).cross(new R(0,1,0)).setLength(.01),s=new R(0,.01,0);return[e.clone().sub(o).sub(s),e.clone().add(o).sub(s),e.clone().add(o).add(s),e.clone().sub(o).add(s)].map(r=>n.projectPoint(r,new R))}const mf=(i,e=1e3/60)=>{let t=null;const n=i;return(...o)=>{t&&clearTimeout(t),t=setTimeout(()=>{n==null||n(...o),t&&clearTimeout(t),t=null},e)}};function J8(i,e=200){let t;return function(...n){t||(i.apply(this,n),t=setTimeout(function(){t=null},e))}}function K8(i,e){const[t,n]=e;if(t>=n||n<=1||t<=1)return-1;const o={},s=r=>(o[r]||(o[r]=i(r)),o[r]);for(let r=t;r<n;r++){const a=s(r),l=s(r-1);if(a<l)return r}return-1}function Qv(i){if(!i)return null;try{if(i.includes("youtu.be"))return new URL(i).pathname.substring(1);if(i.includes("youtube.com")){const n=new URL(i),o=new URLSearchParams(n.search).get("v");if(o)return o;if(n.pathname.includes("/embed/"))return n.pathname.split("/embed/")[1];if(n.pathname.includes("/shorts/"))return n.pathname.split("/shorts/")[1];if(n.pathname.includes("/live/"))return n.pathname.split("/live/")[1]}}catch{}const e=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/|shorts\/|live\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,t=i.match(e);return t&&t[1]?t[1]:null}function Uv(i){if(!i)return null;try{if(i.includes("vimeo.com")){const n=new URL(i).pathname.split("/").filter(Boolean);if(n.length>0){const o=n[0];if(/^\d+$/.test(o)&&o.length>=5)return o}}}catch{}const e=/^.*vimeo\.com\/[A-Za-z\/]*(\d+)/,t=i.match(e);return t&&t[1]&&t[1].length>=5?t[1]:null}function ah(i){return i?/^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+/.test(i):!1}function lh(i){return i?/^(http(s)?:\/\/)?((w){3}.)?vimeo\.com\/(.+)/.test(i):!1}function _8(i,e){if(ah(i)){const t=Qv(i);if(!t)return"";const n=new URL(`https://www.youtube.com/embed/${t}`);return(e==null?void 0:e.start)!==void 0&&n.searchParams.set("start",e.start.toString()),(e==null?void 0:e.autoplay)!==void 0&&n.searchParams.set("autoplay",e.autoplay.toString()),n.toString()}if(lh(i)){const t=Uv(i);if(!t)return"";const n=new URL(`https://player.vimeo.com/video/${t}`);return(e==null?void 0:e.autoplay)!==void 0&&n.searchParams.set("autoplay",e.autoplay.toString()),n.toString()}return i}function wd(i){return i.stickType?i.stickType:i.pointType==="PointTag"&&i.dimensionType==="3D"?"3DPoint":i.pointType==="PlaneTag"?"Plane":"2DPoint"}function $8(i){var e,t,n,o;if(i.stickType||(i.stickType=wd(i)),i.contentType==="VRLink"||i.contentType==="PanoLink"||i.contentType==="Link"){const s=i;!((t=(e=s.data)==null?void 0:e.icon)!=null&&t.url)&&!((o=(n=s.style)==null?void 0:n.point)!=null&&o.url)&&(s.data.icon={url:qh,steps:28})}return i.extraData&&(i.data?i.data.extraData=i.extraData:i.data={extraData:i.extraData}),i}const Zs="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",Lr={};var xd=(i=>(i.Default="default",i.GetAudioDuration="getAudioDuration",i.PlayAudio="playAudio",i))(xd||{});function eC(i,e){const t=(e==null?void 0:e.namespace)||"default",n=Lr[t]||(Lr[t]=[]);let o=n.find(s=>!s.realSrc||s.realSrc===Zs);return o||(console.warn("未找到缓存音频，已新建",Lr),o=new Xv(Zs),n.push(o)),i&&(o.src=i),o}function tC(i,e){const t=(e==null?void 0:e.namespace)||"default",n=Lr[t]||(Lr[t]=[]),o=i-n.length;if(!(o<=0))for(let s=0;s<o;s++)n.push(new Xv(Zs))}class Xv extends(()=>typeof Audio>"u"?class{}:Audio)(){constructor(e){super(e),p(this,"preload","auto"),p(this,"crossOrigin","anonymous"),p(this,"realSrc",""),p(this,"inited",!1),p(this,"removeDocumentEventListener"),this.realSrc=e??"",this.muted=!0,super.autoplay=!0,super.addEventListener("ended",()=>{this.src=""});const t=()=>iC(this);document.addEventListener("click",t),document.addEventListener("touchend",t),this.removeDocumentEventListener=()=>{document.removeEventListener("click",t),document.removeEventListener("touchend",t)}}get isBlankAudio(){return this.realSrc===Zs||!this.realSrc}get src(){return super.src}set src(e){super.src=e,this.realSrc=e,this.removeDocumentEventListener()}get muted(){return super.muted}set muted(e){super.muted=e}clear(){this.currentTime=0,this.src=Zs}}function iC(i){i&&(i.inited||(i.src&&(i.inited=!0,i.removeDocumentEventListener()),i.src===Zs&&i.play()))}const Yv={visibleConfig:{intersectRaycaster:{enabled:!0,distanceAccuracy:.02,checkPoints:"corner",needPassed:1}},clickable:!0,simulate3D:!1,renderType:"Dom"},nC={globalConfig:{visibleConfig:{followModelVisibility:!0},unfoldedConfig:{autoUnfold:{enable:!0,strategy:"MinimumDistance",distance:{max:5}}},tag3DConfig:{ratio:.0035},popoverConfig:{enabled:!1,trigger:"hover",triggerDelay:500,placement:"auto",autoPlacementBaseSpace:{top:.2,right:.15,bottom:.2},transitionDuration:100,toolbar:{showMore:!0,showShare:!0},viewMoreText:"查看更多"}},contentTypeConfig:{"[Mapview]":{unfoldedConfig:{autoUnfold:{enable:!1,distance:{max:9999}}}},"[Floorplan]":{unfoldedConfig:{autoUnfold:{enable:!1,distance:{max:9999}}}},"Any-Audio-plane":{unfoldedConfig:{keep:"unfolded"}},Link:{unfoldedConfig:{keep:"unfolded"}},Panorama:{unfoldedConfig:{keep:"unfolded"}},VRLink:{unfoldedConfig:{keep:"unfolded"}},PanoLink:{unfoldedConfig:{keep:"unfolded"}},MediaPlane:{unfoldedConfig:{keep:"unfolded"},initialData:{autoplayConfig:{autoplayCarousel:!0,autoplayVideo:!1,autoplayVideoInCarousel:!1}}},"Model-Any":{unfoldedConfig:{keep:"unfolded"},visibleConfig:{visibleFiveMode:"all"}},Marketing:{popoverConfig:{enabled:!1}},Audio:{popoverConfig:{toolbar:{showMore:!1}}}}},oC=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1;navigator.userAgent.toLowerCase().indexOf("android");const Va=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,sC=oC&&Va;function rC(i){if(i.length!==4)return!1;const[e,t,n,o]=i,s=e.distanceTo(t),r=t.distanceTo(n),a=n.distanceTo(o),l=o.distanceTo(e),c=e.distanceTo(n),h=t.distanceTo(o);return s===a&&r===l&&c===h}class pc extends We{constructor(e,t,n){if(e.length!==4)throw new Error("QuadrangleMesh: Invalid number of points, it's not a quadrangle");const[o,s,r,a]=e,l=qt(...e),c=[o.clone().sub(l),s.clone().sub(l),r.clone().sub(l),a.clone().sub(l)],h=new qv(c,n);super(h,t),p(this,"name","QuadrangleMesh"),this.position.copy(l)}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}}class qv extends xt{constructor(e,t){super(),p(this,"name","QuadrangleGeometry"),p(this,"points"),this.points=e;const n=t??(rC(e)?64:1);if(e.length!==4){console.error("Invalid number of points, it's not a quadrangle");return}const[o,s,r,a]=e,[l,c,h,d]=[new Qe(0,0),new Qe(1,0),new Qe(1,1),new Qe(0,1)],u=[],f=[];u.push(...o.toArray()),f.push(...l.toArray());for(let g=1;g<n;g++)u.push(o.x+(s.x-o.x)*g/n,o.y+(s.y-o.y)*g/n,o.z+(s.z-o.z)*g/n),f.push(l.x+(c.x-l.x)*g/n,l.y+(c.y-l.y)*g/n);u.push(...s.toArray()),f.push(...c.toArray()),u.push(...r.toArray()),f.push(...h.toArray());for(let g=1;g<n;g++)u.push(r.x+(a.x-r.x)*g/n,r.y+(a.y-r.y)*g/n,r.z+(a.z-r.z)*g/n),f.push(h.x+(d.x-h.x)*g/n,h.y+(d.y-h.y)*g/n);u.push(...a.toArray()),f.push(...d.toArray());const m=[];for(let g=0;g<n;g++)m.push(g,g+1,n*2-g,g,n*2-g,n*2+1-g);this.setAttribute("position",new dt(new Float32Array(u),3)),this.setAttribute("uv",new dt(new Float32Array(f),2)),this.setIndex(new dt(new Uint32Array(m),1))}}function aC(i,e){let t=!Va;const n=e??document.createElement("video");n.preload="metadata",n.crossOrigin="anonymous",n.muted=!0,n.loop=!0,n.playsInline=!0,n.autoplay=!0;const o=new Ph(n);o.minFilter=zi,o.magFilter=zi,o.encoding=on,o.metadataLoaded=!1,n.src=i;const s=()=>{o.metadataLoaded||(o.dispatchEvent({type:"videoLoaded"}),o.metadataLoaded=!0)};if(Va||(n.onloadedmetadata=()=>{s()}),Va){const r=()=>{if(!t){if(!n.paused){s();return}n.muted=!0,n.play().then(()=>{t=!0,n.pause(),n.currentTime=0,s()}).catch(()=>{console.warn("video auto play error")})}};document.addEventListener("click",r,{once:!0}),document.addEventListener("touchend",r,{once:!0})}return o}function xr(i,e,t){if(i==="fill")return e;if(i==="contain"){const[n,o,s,r]=e,a=n.distanceTo(o),l=s.distanceTo(r),c=n.distanceTo(r),h=o.distanceTo(s),d=a,u=c,f=d/u;if(f>t){const m=u*t,g=new R().subVectors(o,n).multiplyScalar((a-m)/2/a),v=new R().subVectors(s,r).multiplyScalar((l-m)/2/l);return[n.clone().add(g),o.clone().sub(g),s.clone().sub(v),r.clone().add(v)]}else if(f<t){const m=d/t,g=new R().subVectors(r,n).multiplyScalar((c-m)/2/c),v=new R().subVectors(s,o).multiplyScalar((h-m)/2/h);return[n.clone().add(g),o.clone().add(v),s.clone().sub(v),r.clone().sub(g)]}else return e}else return console.warn(`objectFit: ${i} is not supported yet`),e}class lC extends Bi{constructor(e){super(),p(this,"transparent",!1),p(this,"blending",Ng),p(this,"blendSrc",Fg),p(this,"blendDst",nu),p(this,"blendSrcAlpha",EA),p(this,"blendDstAlpha",nu),p(this,"vertexShader",`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `),p(this,"fragmentShader",`
    uniform sampler2D map;
    // 纹理坐标
    varying vec2 vUv;
    void main() {
      gl_FragColor = texture2D(map, vUv);
    }
  `),this.uniforms={map:{value:e}}}}const da={Z_FIGHTING_OFFSET:.01};let Zv=class extends We{constructor(){super(...arguments),p(this,"name","MediaPlane"),p(this,"src")}removeFromParent(){const i=this.parent;return i!==null&&i.remove(this),this}dispose(){this.traverse(i=>{if(i.isMesh){const e=i;e.geometry.dispose(),(e.material instanceof Array?e.material:[e.material]).forEach(t=>{t.dispose()})}})}};class ch extends Zv{constructor(e,t,n){var o;super(),p(this,"name","PanoTagPluginImagePlane"),this.src=e;const s=(o=n==null?void 0:n.resolveZFighting)!=null?o:!0;let r=t;if(s){const a=Eo(t).multiplyScalar(da.Z_FIGHTING_OFFSET);r=t.map(l=>l.clone().add(a))}uv(e).then(({texture:a,transparent:l})=>{var c;const h=new Ze({map:a,transparent:l}),d=xr((c=n==null?void 0:n.objectFit)!=null?c:"contain",r,a.image.width/a.image.height),u=qt(...d),f=d.map(g=>g.clone().sub(u)),m=new qv(f);this.position.copy(u),this.geometry=m,this.material=h}).catch(a=>{console.error(`Imageplane error: ${a==null?void 0:a.message}`)})}}class Jv extends Zv{constructor(e,t,n){const{videoCoverSrc:o,objectFit:s="contain",playButton:r="withText",paused:a=!0,videoTextureMap:l,ImageTextureMap:c,domEvents:h}=n??{};super(),p(this,"isVideoPlane",!0),p(this,"name","PanoTagPluginImagePlane"),p(this,"videoInstance"),p(this,"onVideoReady"),p(this,"objectFit"),p(this,"buttonSrc"),p(this,"videoCoverSrc"),p(this,"domEvents"),p(this,"disposers",[]),p(this,"cornerPoints"),p(this,"videoMesh"),p(this,"coverMesh"),p(this,"buttonMesh"),p(this,"videoTextureMap"),p(this,"ImageTextureMap"),this.cornerPoints=t,this.src=e,this.buttonSrc=(()=>r==="withText"?bd:r==="withoutText"?oh:typeof r=="string"?r:oh)(),this.videoCoverSrc=o,this.objectFit=s,this.videoTextureMap=l,this.ImageTextureMap=c,this.domEvents=h,this.position.copy(qt(...t)),this.videoCoverSrc&&a?this.addCoverMesh().then(()=>this.addButtonMesh()):this.addVideoMesh().then(()=>{a?this.addButtonMesh():this.play(!0)}),this.addEventListener("removed",()=>{this.remove(...this.children)}),this.addEventListener("dispose",()=>{var d;(d=this.disposers)==null||d.forEach(u=>u==null?void 0:u())})}play(e=!1){return ee(this,null,function*(){this.videoMesh||(yield this.addVideoMesh()),this.showPlayUI(),this.videoInstance.paused&&this.videoInstance.play().then(()=>this.showPlayUI()).catch(t=>{this.pause(),console.error("play error",t)}),this.videoInstance.muted=e,this.render()})}pause(){this.videoInstance&&(this.videoInstance.pause(),this.showPauseUI().then(()=>this.render()))}initialRenderHooks(e){const t=e(()=>{var n;this.videoMesh&&((n=this.videoInstance)==null?void 0:n.paused)===!1&&(this.videoMesh.needsRender=!0)});this.disposers.push(()=>t)}showPlayUI(){this.coverMesh&&(this.coverMesh.visible=!1),this.remove(this.buttonMesh),this.videoMesh.visible=!0}showPauseUI(){return ee(this,null,function*(){this.coverMesh?(this.coverMesh.visible=!0,this.videoMesh&&(this.videoMesh.visible=!1)):(yield this.addCoverMesh(),this.coverMesh&&(this.videoMesh.visible=!1)),this.addButtonMesh().then(()=>this.render())})}render(){var e;this.videoMesh&&(this.videoMesh.needsRender=!0),this.coverMesh&&(this.coverMesh.needsRender=!0),this.buttonMesh&&(this.buttonMesh.needsRender=!0),this.videoMesh&&((e=this.videoInstance)==null?void 0:e.paused)===!1&&(this.videoMesh.needsRender=!0)}addCoverMesh(){return ee(this,null,function*(){if(this.children.includes(this.coverMesh))return;const e=yield(()=>ee(this,null,function*(){if(this.coverMesh)return this.coverMesh;if(!this.videoCoverSrc)return;const{texture:t,transparent:n}=yield this.getImageTexture(this.videoCoverSrc),o=new Ze({transparent:!1,map:t}),s=xr(this.objectFit,this.cornerPoints,t.image.width/t.image.height),r=new pc(s,o);return r.position.copy(new R(0,0,0)),r.name="videoCoverMesh",r}))();return e&&(this.children.includes(this.coverMesh)||(this.add(e),this.coverMesh=e)),e})}addVideoMesh(){return ee(this,null,function*(){var e;if(this.children.includes(this.videoMesh))return;const t=yield(()=>ee(this,null,function*(){if(this.videoMesh)return this.videoMesh;if(!this.src)return;const o=this.getVideoTexture(this.src),s=new Ze({transparent:!1,map:o}),r=yield new Promise(l=>{o.metadataLoaded?l(xr(this.objectFit,this.cornerPoints,o.image.videoWidth/o.image.videoHeight)):o.addEventListener("videoLoaded",()=>l(xr(this.objectFit,this.cornerPoints,o.image.videoWidth/o.image.videoHeight)))}),a=new pc(r,s);return a.name="videoMesh",a.position.copy(new R(0,0,0)),a}))();if(!t)return;this.domEvents.addAutoBindEventListener(t,"click",()=>{!this.videoInstance.paused&&this.videoInstance.muted?this.videoInstance.muted=!1:this.pause()},{noEmitWhenHide:!0});const n=t.material.map.image;return(e=this.onVideoReady)==null||e.call(this,n),n.addEventListener("playing",()=>{this.coverMesh||this.remove(this.buttonMesh),this.render()}),n.addEventListener("pause",()=>{this.videoInstance.paused&&(this.showPauseUI(),this.render())}),this.children.includes(this.videoMesh)||(this.add(t),this.videoMesh=t,this.videoInstance=n),t})}addButtonMesh(){return ee(this,null,function*(){if(this.children.includes(this.buttonMesh))return;const e=yield(()=>ee(this,null,function*(){var t,n,o,s;if(this.buttonMesh)return this.buttonMesh;const r=(n=(t=this.videoMesh)==null?void 0:t.geometry.points[0].distanceTo(this.videoMesh.geometry.points[3]))!=null?n:1/0,a=(s=(o=this.coverMesh)==null?void 0:o.geometry.points[0].distanceTo(this.coverMesh.geometry.points[3]))!=null?s:1/0,l=this.cornerPoints[0].distanceTo(this.cornerPoints[3]),c=Math.min(r,a,l)/l*.3,{texture:h,transparent:d}=yield this.getImageTexture(this.buttonSrc),u=xr("contain",this.cornerPoints,h.image.width/h.image.height),f=new pc(u,new lC(h));f.position.copy(new R(0,0,0)),f.name="buttonMesh",f.scale.set(c,c,c),this.domEvents.addAutoBindEventListener(f,"click",()=>{this.play()},{noEmitWhenHide:!0});const m=Eo(u).multiplyScalar(da.Z_FIGHTING_OFFSET);return f.position.add(m),f}))();return this.children.includes(this.buttonMesh)||(this.add(e),this.buttonMesh=e),e})}getImageTexture(e){return ee(this,null,function*(){var t,n;if((t=this.ImageTextureMap)!=null&&t.has(e))return this.ImageTextureMap.get(e);const o=yield uv(e);return(n=this.ImageTextureMap)==null||n.set(e,o),o})}getVideoTexture(e){var t,n;if((t=this.videoTextureMap)!=null&&t.has(e))return this.videoTextureMap.get(e);const o=aC(e);return(n=this.videoTextureMap)==null||n.set(e,o),o}}class Jr{constructor(){p(this,"cache_raycasterDistance",new Map),p(this,"cache_visible",new Map)}clear(){this.cache_visible.clear(),this.cache_raycasterDistance.clear()}static generateCameraTagKey(e,t,n=3){const o=W(W({},t.five.getCurrentState()),e),s=o.mode==="Panorama"?t.workUtil.getObserverPosition(o.panoIndex):t.five.camera.position;return s?[s.x.toFixed(n),s.y.toFixed(n),s.z.toFixed(n),t.id].join(","):void 0}getVisible(e,t,n=1){const o=Jr.generateCameraTagKey(t,e,n);if(o)return this.cache_visible.get(o)}setVisible(e,t,n,o=1){const s=Jr.generateCameraTagKey(t,e,o);s&&this.cache_visible.set(s,n)}}function fl(i){return Object.entries(i)}function ml(i){var e,t;typeof i.visibleConfig=="object"&&i.visibleConfig.keep&&(i.visibleConfig.keep==="visible"?i.visibleConfig={keep:i.visibleConfig.keep,visibleFiveMode:(e=i.visibleConfig)==null?void 0:e.visibleFiveMode}:i.visibleConfig.keep==="hidden"&&(i.visibleConfig={keep:i.visibleConfig.keep})),typeof i.unfoldedConfig=="object"&&(i.unfoldedConfig.disableFold&&(i.unfoldedConfig={keep:"unfolded"}),i.unfoldedConfig.disableUnfold&&(i.unfoldedConfig={keep:"folded"}),i.unfoldedConfig.keep&&(i.unfoldedConfig={keep:i.unfoldedConfig.keep}));const n=(t=i.initialState)!=null?t:{};return typeof i.unfoldedConfig=="object"&&(i.unfoldedConfig.keep==="unfolded"?n.unfolded=!0:i.unfoldedConfig.keep==="folded"&&(n.unfolded=!1)),typeof i.visibleConfig=="object"&&(i.visibleConfig.keep==="visible"?n.visible=!0:i.visibleConfig.keep==="hidden"&&(n.visible=!1)),i.initialState=n,i}class cC extends xo{constructor(e){super(e),p(this,"tags",[]),p(this,"cache",new Jr),p(this,"config",nC),p(this,"renderQueue",new Map),p(this,"params"),p(this,"mediaStore",tv({currentMediaElement:null})),p(this,"store",{disposers:[],disposed:!1,resizeObserverDisposerAdding:!1,css3DRenderDisposer:new Map}),p(this,"domEvents",new Rs(this.five)),p(this,"_cache_pointTag"),p(this,"_cache_2DPointTag"),p(this,"_cache_css3DTag"),p(this,"_container",null),p(this,"timeoutIds",[]),p(this,"whyHide",t=>{const n=this.getTagById(t);return n?n.whyHide():{reason:`tag ${t} not found`}}),p(this,"loadVideoFirstFrame",()=>{sC&&this.hooks.emit("loadVideoFirstFrame")}),p(this,"tagsDo",(t,n,o=!0)=>{let s=[...t??this.tags].sort((c,h)=>c.getSquaredDistance()-h.getSquaredDistance());this.timeoutIds.forEach(c=>clearTimeout(c)),this.timeoutIds.length=0;for(let c=0;c<20;c++){const h=s[c];h&&(n(h),o&&(h._updating=!1))}s=s.slice(20);const r=s.length>1e3,a=r?30:17,l=r?1:3;for(let c=0;c<s.length;c+=l){const h=[];for(let u=0;u<l;u++)s[c+u]&&h.push(s[c+u]);h.forEach(u=>{o&&(u._updating=!0)});const d=setTimeout(()=>{h.forEach(u=>{n(u),o&&(u._updating=!1)})},c*a);this.timeoutIds.push(d)}}),this.mediaStore.subscribe(({currentMediaElement:t})=>{this.tags.forEach(n=>{var o;if(n.mediaPlane instanceof Jv&&t!==n.mediaPlane.videoInstance){if(!((o=n.mediaPlane.videoInstance)!=null&&o.src)||t===n.mediaPlane.videoInstance)return;n.mediaPlane.pause()}})})}get container(){var e;return this._container||((e=this.five.getElement())==null?void 0:e.parentElement)}set container(e){this._container=e}set tagsLengthWillUpdate(e){e&&(this._cache_pointTag=this.tags.filter(t=>t.stickType==="2DPoint"||t.stickType==="3DPoint").filter(t=>t.position),this._cache_2DPointTag=this.tags.filter(t=>t.stickType==="2DPoint").filter(t=>t.position),this._cache_css3DTag=this.tags.filter(t=>t.stickType==="3DPoint"||t.stickType==="Plane"||t.stickType==="Model"&&t.contentType==="MediaModel").filter(t=>{const n=t.computeRenderType();return n==="BehindDom"||n==="Dom"}))}get filterPointTag(){var e;return(e=this._cache_pointTag)!=null?e:[]}get filter2DPointTag(){var e;return(e=this._cache_2DPointTag)!=null?e:[]}get filterCSS3DTag(){var e;return(e=this._cache_css3DTag)!=null?e:[]}updateFive(e){super.updateFive(e),this.domEvents.dispose(),this.domEvents=new Rs(e)}addRenderQueue(e){var t,n;const{type:o,keys:s=[],tags:r=[]}=e;this.renderQueue.has(o)?this.renderQueue.set(o,{keys:Array.from(new Set([...(t=this.renderQueue.get(o).keys)!=null?t:[],...s])),tags:Array.from(new Set([...(n=this.renderQueue.get(o).tags)!=null?n:[],...r]))}):this.renderQueue.set(o,{keys:s,tags:r})}getTagById(e){const t=this.tags.find(n=>n.id===e);if(!t){console.warn(`getTagById Error: can't find tag id: ${e}`);return}return t}pauseCurrentMedia(){this.mediaStore.set({currentMediaElement:null})}getTagConfig(e,t){var n,o,s;const r=this.calculateTagConfig(e,{useCache:t==null?void 0:t.useCache}),a=(n=t==null?void 0:t.fiveMode)!=null?n:this.five.getCurrentState().mode,l=(o=r.configWithFiveMode)==null?void 0:o[a];return(s=l??r)!=null?s:{}}getPositions(e){if(U8(e))return e.position;if(Go(e))return e.data.mediaPosition;if(X8(e))return Z8(this.five.camera.position,Ue(e.position),Ue(e.normal))}addObjectClickHandler(e,t,n){if(!t||!this.domEvents)return()=>{};const o=()=>!(!e.currentVisible||e.loading),s=r=>{if(!o())return!1;n(r.origDomEvent)};return this.domEvents.addEventListener(t,"click",s),()=>{var r;(r=this.domEvents)==null||r.removeEventListener(t,"click",s)}}checkDisposed(){return this.store.disposed?(console.error("PanoTagPluginController has been disposed"),!0):!1}calculateTagConfig(e,t){var n,o,s,r,a;const l=(n=t==null?void 0:t.useCache)!=null?n:!0;if(!e)return(o=this.config.globalConfig)!=null?o:{};if(l){if((s=e==null?void 0:e.computedConfig)!=null&&s._isMerged)return e.computedConfig;if((r=e==null?void 0:e.config)!=null&&r._isMerged)return e.config}const c={},h={},d={};this.config.contentTypeConfig&&Object.entries(this.config.contentTypeConfig).forEach(([w,P])=>{var I,j;const D=w,T=D.split("-"),M=w.startsWith("["),O=M?T[0].slice(1,-1):void 0,y=M?T.slice(1):T,C=O?["PanoramaLike","ModelLike"].includes(O)?(I=h[O])!=null?I:h[O]={}:(j=d[O])!=null?j:d[O]={}:c;if(!C[D]){if(y.length===0&&(C[D]=P),y.length===1){const[x]=y;(e.contentType===x||x==="Any")&&(C[D]=P)}if(y.length===2){const[x="Any",S="Any"]=y;x==="Mixin"&&e.contentType===S&&(C[D]=P),(e.stickType===x||x==="Any")&&(e.contentType===S||S==="Any")&&(C[D]=P)}if(y.length===3){const[x="Any",S,k]=y;if(S==="Audio"&&e.contentType==="Audio"){const z=e;(z.stickType===x||x==="Any")&&z.data.appearance===k&&(C[D]=P)}}}});const u=(a=e.initialConfig)!=null?a:{},f=it({},Yv,this.config.globalConfig,...Object.values(c)),m=it({},f,u),g={},v=Object.values(xh.Mode);fl(h).forEach(([w,P])=>{v.forEach(I=>{(w==="PanoramaLike"&&ao(I)||w==="ModelLike"&&wi(I))&&(g[I]=it({},f,...Object.values(P),u,{_isMerged:!0}))})}),fl(d).forEach(([w,P])=>{const I=g[w];g[w]=it({},f,I,...Object.values(P),u,{_isMerged:!0})});const A=pe(W({},m),{configWithFiveMode:g});return ml(A),Object.values(g).forEach(w=>ml(w)),A._isMerged=!0,A}}class hC extends cC{constructor(e){super(e),p(this,"rendererMap",new Map),p(this,"contentTypeMap",new Map),p(this,"group",new Et),p(this,"imagePlaneGroup",new Et),p(this,"gltfObjectGroup",new Et),p(this,"enabledModelTagSet",new Set),p(this,"temporaryState",{visible:!0}),p(this,"TagContainerSvelte"),this.group.name="PanoTagPluginModelGroup",this.gltfObjectGroup.name="PanoTagPluginGLTFObjectGroup",this.imagePlaneGroup.name="ImagePlaneGroup",this.group.add(this.gltfObjectGroup),this.group.add(this.imagePlaneGroup)}registerRenderer(e,t,n){var o;this.rendererMap.set(e,{renderer:t,usePoint:(o=n==null?void 0:n.usePoint)!=null?o:!1})}bindRenderer(e,t){this.contentTypeMap.set(e,t)}disposeAllCSS3DContainer(){for(const[,e]of this.store.css3DRenderDisposer)e==null||e.forEach(t=>t==null?void 0:t());this.store.css3DRenderDisposer=new Map}clearUnusedPanelTag(){this.filter2DPointTag.forEach(e=>{var t;(t=e.tag3DContentSvelte)==null||t.dispose(),e.tag3DContentSvelte=void 0});for(const[e,t]of this.store.css3DRenderDisposer){const n=this.getTagById(e);(!n||n.stickType==="2DPoint")&&(t==null||t.forEach(o=>o==null?void 0:o()),this.store.css3DRenderDisposer.delete(e))}}}class dC{constructor(e){p(this,"plugin"),p(this,"logBound",!1),p(this,"bindLogByObject",t=>{Object.getOwnPropertyNames(t).forEach(n=>{try{typeof t[n]=="function"&&(t[n]=new Proxy(t[n],{apply:(o,s,r)=>(["render"].includes(n)||this.log(n,{obj:t},...r),o.apply(s,r))}))}catch{}})}),this.plugin=e}get debug(){return this.plugin.debug}addDebugPoints(){try{Q8(this.plugin.five,this.plugin.tags)}catch(e){console.error(e)}}bindLog(){this.logBound||(this.logBound=!0,this.bindLogByObject(this.plugin),this.bindLogByObject(this.plugin.constructor.prototype))}log(e,...t){let n=new Error().stack;console.debug(`%cPanoTagPlugin%c${e}`,"background-color: #35e0ed; color: black; padding:0 6px; border-radius: 3px","padding: 0 3px; color: #f3f47c",...t,{stack:n})}closeIntersectRaycaster(){this.plugin.tags.forEach(e=>{var t;Ko((t=e==null?void 0:e.initialConfig)==null?void 0:t.visibleConfig).intersectRaycaster&&(e.initialConfig.visibleConfig.intersectRaycaster.enabled=!1)}),this.plugin.changeGlobalConfig({visibleConfig:{intersectRaycaster:{enabled:!1}}})}}function fc(i,e,t){var n,o,s,r,a;const l=(n=t==null?void 0:t.useCache)!=null?n:!0;if(!i)return(o=e.globalConfig)!=null?o:{};if(l){if((s=i==null?void 0:i.computedConfig)!=null&&s._isMerged)return i.computedConfig;if((r=i==null?void 0:i.config)!=null&&r._isMerged)return i.config}const c={},h={},d={};e.contentTypeConfig&&Object.entries(e.contentTypeConfig).forEach(([w,P])=>{var I,j;const D=w,T=D.split("-"),M=w.startsWith("["),O=M?T[0].slice(1,-1):void 0,y=M?T.slice(1):T,C=O?["PanoramaLike","ModelLike"].includes(O)?(I=h[O])!=null?I:h[O]={}:(j=d[O])!=null?j:d[O]={}:c;if(!C[D]){if(y.length===0&&(C[D]=P),y.length===1){const[x]=y;(i.contentType===x||x==="Any")&&(C[D]=P)}if(y.length===2){const[x="Any",S="Any"]=y;x==="Mixin"&&i.contentType===S&&(C[D]=P),(i.stickType===x||x==="Any")&&(i.contentType===S||S==="Any")&&(C[D]=P)}if(y.length===3){const[x="Any",S,k]=y;if(S==="Audio"&&i.contentType==="Audio"){const z=i;(z.stickType===x||x==="Any")&&z.data.appearance===k&&(C[D]=P)}}}});const u=(a=i.initialConfig)!=null?a:{},f=it({},Yv,e.globalConfig,...Object.values(c)),m=it({},f,u),g={},v=Object.values(xh.Mode);fl(h).forEach(([w,P])=>{v.forEach(I=>{(w==="PanoramaLike"&&ao(I)||w==="ModelLike"&&wi(I))&&(g[I]=it({},f,...Object.values(P),u,{_isMerged:!0}))})}),fl(d).forEach(([w,P])=>{const I=g[w];g[w]=it({},f,I,...Object.values(P),u,{_isMerged:!0})});const A=pe(W({},m),{configWithFiveMode:g});return ml(A),Object.values(g).forEach(w=>ml(w)),A._isMerged=!0,A}function gf(i){const e=i.split("?")[0].split(".").pop();return e?e.toLowerCase():""}function uC(i,e){if(!i)return 0;const t=i.observers;if(!e||!t)return console.error("getFloorIndex: invalid arguments: ",{point:e,observer:t}),0;const n=[];t.forEach(s=>{var r,a,l;const c=(a=(r=s.floorIndex)!=null?r:s.floor_index)!=null?a:0;n[c]||(n[c]=[]),n[c].push(js(s.position,(l=i.options)==null?void 0:l.transform).y)});const o=n.map(s=>s.reduce((r,a)=>r+a,0)/s.length);for(let s=o.length-1;s>0;s--)if(e.y>=o[s])return s;return 0}function ns(){let i,e;return{promise:new Promise((t,n)=>{i=t,e=n}),resolve:i,reject:e}}class Cd{constructor(e,t){p(this,"plugin"),p(this,"id"),p(this,"contentType"),p(this,"stickType"),p(this,"enabled"),p(this,"config"),p(this,"data"),p(this,"state"),p(this,"temporaryState",{visible:!0}),p(this,"originPosition"),p(this,"position"),p(this,"fiveState"),p(this,"model"),p(this,"matrix"),p(this,"screenPosition"),p(this,"normal"),p(this,"mediaPlane"),p(this,"hooks"),p(this,"zIndex"),p(this,"play"),p(this,"pause"),p(this,"tag3DContentSvelte"),p(this,"dom"),p(this,"contentDom"),p(this,"initialConfig"),p(this,"computedConfig"),p(this,"_currentBlinkInstance"),p(this,"cache"),p(this,"entryFromModel"),p(this,"_updating",!1),p(this,"hoverEnabled"),p(this,"ready",()=>{const{promise:g,resolve:v}=ns();if(!this._updating)v();else{const A=setInterval(()=>{this._updating||(clearInterval(A),v())},17);setTimeout(()=>{clearInterval(A),v()},300)}return g});var n,o,s,r,a,l;this.plugin=e;const c=wd(t);t.stickType=c;const h=JSON.parse(JSON.stringify(t.data)),d=(n=t.initialConfig)!=null?n:t.config?JSON.parse(JSON.stringify(t.config)):{};t.initialConfig=d;const u=fc(t,e.config),f=this.getConfig(t);t.config=f,this.id=(o=t.id)!=null?o:Bt(),this.enabled=(s=t.enabled)!=null?s:!0,this.contentType=t.contentType,this.hoverEnabled=(a=(r=f.popoverConfig)==null?void 0:r.enabled)!=null?a:!0,this.data=(l=f.initialData)!=null&&l.important?it(t.data,h,f.initialData):it(t.data,f.initialData,h);let m;typeof f.unfoldedConfig=="object"?f.unfoldedConfig.keep==="unfolded"?m=!0:f.unfoldedConfig.keep==="folded"?m=!1:m=!this.can("fold"):m=!this.can("fold"),this.state=W({visible:void 0,unfolded:m},f.initialState),this.isPopoverConfigEnabled()&&(this.state.unfolded=!1),this.originPosition=t.position,t.originPosition=this.originPosition,this.position=(()=>{const g=t.originPosition;if(!g)return;const v=e.workUtil.transform;return Array.isArray(g)&&g.length===4?g.map(Ue).map(A=>js(A,v).toArray()):js(Ue(g),v).toArray()})(),this.matrix=t.matrix?(()=>{const g=new Xe().fromArray(t.matrix);return g.premultiply(e.workUtil.transform),g.elements})():t.matrix,this.initialConfig=d,this.computedConfig=u,this.stickType=c,this.config=t.config,this.fiveState=t.fiveState,this.normal=t.normal,this.cache=new Jr,this.hooks=new Mt,Object.keys(t).forEach(g=>{this[g]===void 0&&t[g]!==void 0&&(this[g]=t[g])})}get visible(){var e;return((e=this.temporaryState)==null?void 0:e.visible)!==!1&&this.state.visible!==!1&&this.enabled!==!1}get five(){return this.plugin.five}get fiveUtil(){return this.plugin.fiveUtil}get workUtil(){return this.plugin.workUtil}get centerPosition(){const e=rh(this);return qt(...Array.isArray(e)?e:[e])}get currentConfig(){var e,t;const n=fc(this,this.plugin.config,{useCache:!0}),o=this.five.getCurrentState().mode,s=(e=n.configWithFiveMode)==null?void 0:e[o];return(t=s??n)!=null?t:{}}get currentVisible(){return!(!this.plugin.state.enabled||!this.plugin.state.visible||!this.enabled||!this.state.visible)}get sharedCache(){return this.plugin.cache}applyVisible(){throw new Error("Method not implemented.")}find(e){return ee(this,null,function*(){var t;const n=this.fiveState;if(!this.fiveState)return this;const o=(t=e==null?void 0:e.targetMode)!=null?t:this.five.state.mode;if(o==="Panorama"){const s=n==null?void 0:n.panoIndex;if(Oi(s))return this;const r=this.workUtil.getObserverPosition(s),a=this.centerPosition.clone().sub(r).normalize();this.five.setState(W({mode:"Panorama",workCode:this.workUtil.workCode,panoIndex:s},ra(a))),yield this.five.ready()}else o==="Mapview"&&(yield L0(this.five,this.centerPosition,e==null?void 0:e.pointConfig));return this})}blink(e){return ee(this,null,function*(){var t,n,o,s,r,a;yield this.ready(),this._currentBlinkInstance&&!this._currentBlinkInstance.completed&&((n=(t=this._currentBlinkInstance).preComplete)==null||n.call(t),this._currentBlinkInstance=void 0);const l=(o=this.enabled)!=null?o:!0,c=(s=this.state)==null?void 0:s.visible,h=l&&c;h===!1&&(this.state.visible=!0,this.enabled=!0,this.applyVisible(),this.plugin.render(),this.computeRenderType()!=="Mesh"?yield new Promise(f=>{if(this.dom||this.contentDom){f();return}const m=setInterval(()=>{(this.dom||this.contentDom)&&(f(),clearInterval(m))},16.7)}):this.stickType==="Model"&&!((r=this.model)!=null&&r.object)?yield(a=this.model)==null?void 0:a.promise:this.stickType==="Plane"&&(yield new Promise(f=>{if(this.mediaPlane){f();return}const m=setInterval(()=>{this.mediaPlane&&(f(),clearInterval(m))},16.7)})),this.dom&&(this.dom.style.visibility="hidden"),this.contentDom&&(this.contentDom.style.visibility="hidden"));const d=(()=>{var f,m,g;const v=[];return v.push(this.dom),v.push((m=(f=this.tag3DContentSvelte)==null?void 0:f.css3DInstance)==null?void 0:m.container),v.push((g=this.model)==null?void 0:g.object),v.push(this.mediaPlane),v.filter(Boolean)})();if(!d.length){console.warn("tagDom is empty");return}const u=h?Dl:k0;this._currentBlinkInstance=u(d,W({begin:()=>{h===!1&&(this.dom&&(this.dom.style.visibility=""),this.contentDom&&(this.contentDom.style.visibility=""))},updateRender:()=>{this.five.needsRender=!0}},e));try{yield this._currentBlinkInstance.finished}catch(f){console.debug("Blink animation interrupted:",f)}finally{this._currentBlinkInstance=void 0}l===!1&&(this.enabled=!1,this.updateVisible()),c===!1&&this.updateVisible(),h===!1&&(this.dom&&(this.dom.style.visibility=""),this.contentDom&&(this.contentDom.style.visibility=""))})}unfold(){}unfoldAndFoldOthers(){}fold(){}enable(){this.enabled=!0,this.hooks.emit("enable"),this.applyVisible()}disable(){this.enabled=!1,this.hooks.emit("disable"),this.applyVisible()}changeData(e,t=!0){return this.setData(e,t)}changePosition(e){return this.setPosition(e)}setData(e,t=!0){t?this.data=it(this.data,e):this.data=W(W({},this.data),e),this.hooks.emit("dataChanged",this.data)}setPosition(e){throw new Error("Method not implemented.")}set(e,t=!0){this.plugin.tagsLengthWillUpdate=!0,t?it(this,e):Object.assign(this,e),this.cache.clear()}updateConfig(){var e;const t=this.getConfig(void 0,{useCache:!1});this.computedConfig=t;const n=this.getConfig();if(this.config=n,this.config.initialData){const o=JSON.parse(JSON.stringify(this.data));this.data=(e=n.initialData)!=null&&e.important?it(this.data,o,n.initialData):it(this.data,n.initialData,o)}this.cache.clear()}updateVisible(){this.enabled?(this.state.visible=this.getVisible(),this.applyVisible()):this.applyVisible(),this._updating=!1}updateZIndex(){const e=this.getSquaredDistance();this.zIndex=Math.round((1e4-(e??0))*100)}getConfig(e,t){var n,o,s;const r=fc(e??this,this.plugin.config,{useCache:t==null?void 0:t.useCache}),a=(n=t==null?void 0:t.fiveMode)!=null?n:this.five.getCurrentState().mode,l=(o=r.configWithFiveMode)==null?void 0:o[a];return(s=l??r)!=null?s:{}}getDistance(e,t=3){const n=W(W({},this.five.getCurrentState()),e),{panoIndex:o,mode:s}=n,r=s==="Panorama"?this.workUtil.getObserverPosition(o):this.five.camera.position,a=this.centerPosition;return!r||!a?-1:r.distanceTo(a)}getSquaredDistance(){const e=this.five.camera.position;let t;return Array.isArray(this.position[0])?t=this.position[0]:t=this.position,Bo(t[0]-e.x,2)+Bo(t[1]-e.y,2)+Bo(t[2]-e.z,2)}getVisible(e){if(!this.enabled||!this.plugin.state.enabled||!this.fiveUtil.model)return!1;const t=W(W({},this.five.getCurrentState()),e);let n=this.cache.getVisible(this,t);return Oi(n)&&(n=this.computeVisible(t).value,this.cache.setVisible(this,t,n)),n}getUnfoldedByPanoIndex(e){return this.currentVisible?this.computeUnfoldedByPanoIndex(e)&&this.getUnfoldedByCamera():void 0}getUnfoldedByCamera(){return this.currentVisible?this.computeUnfoldedByCamera():void 0}can(e){var t,n;if((e==="fold"||e==="unfold")&&((n=(t=this.currentConfig)==null?void 0:t.popoverConfig)==null?void 0:n.enabled)===!0)return!1;const o=this.currentConfig;if(!o||typeof o!="object")return!0;if(e==="show"||e==="hide"){if(!o.visibleConfig||typeof o.visibleConfig!="object")return!0;if(e==="show"&&o.visibleConfig.keep==="hidden"||e==="hide"&&o.visibleConfig.keep==="visible")return!1}if(e==="fold"||e==="unfold"){if(!o.unfoldedConfig||typeof o.unfoldedConfig!="object")return!0;if(e==="fold"&&o.unfoldedConfig.keep==="unfolded"||e==="unfold"&&o.unfoldedConfig.keep==="folded")return!1}return!0}onClick(e){}computeRenderType(){const e=(()=>{if(this.stickType==="3DPoint")return"Dom";const t=this.getConfig();if(!t||typeof t!="object"||!t.renderType)return;const n=this.data.mediaData;if(!(!n||n.length===0)&&t.renderType==="Mesh"){if(q8(this)){if(n.length===1){if(n[0].type==="Video")return navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1?"Dom":"Mesh";if(n[0].type==="Image")return gf(n[0].url)==="gif"?"Dom":"Mesh"}}else if(Go(this))return n.length===1&&n[0].type==="Image"?gf(n[0].url)==="gif"?"Dom":"Mesh":"BehindDom"}})();return e??"Dom"}computeVisible(e){const t=W(W({},this.five.getCurrentState()),e),{panoIndex:n,mode:o}=t,s=[];return(()=>{var r,a,l,c;const h=(r=this.getConfig().visibleConfig)!=null?r:{};if(typeof h=="function")return{value:h(this.five,{tag:this,distance:this.getDistance(t,void 0)}),checkedList:s,reason:"config function result"};{if(h.keep==="hidden")return{value:!1,checkedList:s,reason:"config.keep is hidden"};if(h.keep==="visible")return{value:!0,checkedList:s,reason:"config.keep is visible"};const d=this.computeVisibleByFiveMode(h,o);if((d==null?void 0:d.value)===!1)return d;if(h.followModelVisibility===!0&&["poincare","aerophoto","sand"].includes(this.workUtil.fromType)&&(o==="Floorplan"||o==="Mapview")){const u=this.computeVisibleByFloorIndex(),{value:f}=u,m=es(u,["value"]);if(f===!1)return W({value:!1,checkedList:s,reason:"followModelVisibility check failed"},m)}if(ao(o)&&h.visiblePanoIndex!==void 0&&h.visiblePanoIndex!=="all"&&n!==void 0){if(s.push("visiblePanoIndex"),Array.isArray(h.visiblePanoIndex)&&!h.visiblePanoIndex.includes(n))return{value:!1,checkedList:s,reason:`current panoIndex is not included in visiblePano. currentPanoIndex: ${n}, visiblePanoIndex: ${h.visiblePanoIndex}`};if(h.visiblePanoIndex==="current"&&n!==((a=this.fiveState)==null?void 0:a.panoIndex))return{value:!1,checkedList:s,reason:`current panoIndex is not equal to tag.panoIndex. currentPanoIndex: ${n}, tag.panoIndex: ${(l=this.fiveState)==null?void 0:l.panoIndex}`}}if(h.visibleDistance!==void 0&&(s.push("visibleDistance"),h.visibleDistance!=="unLimited")){const u=this.getDistance(t,1);if(ja(u,h.visibleDistance)===!1)return{value:!1,checkedList:s,panoIndex:n,visibleDistance:h.visibleDistance,reason:`distance is not in visibleDistance. distance: ${u}, visibleDistance: ${h.visibleDistance.min} - ${h.visibleDistance.max}`}}if(h.intersectRaycaster!==!1&&(typeof h.intersectRaycaster!="object"||h.intersectRaycaster.enabled!==!1)){if(s.push("intersectRaycaster"),n===void 0)return{value:!1,checkedList:s,reason:`intersectRaycaster check failed: panoIndex is ${n}`};if(n===((c=this.fiveState)==null?void 0:c.panoIndex))s.push("intersectCheckSkiped");else{const u=this.computeVisibleByIntersect(n);if(u.value===!1)return Object.assign(u,{checkedList:s})}}return{value:!0,checkedList:s,reason:"all check passed"}}})()}computeVisibleByFiveMode(e,t){const n=()=>{var o,s;let r=typeof e.visibleFiveMode=="function"?e.visibleFiveMode(this):e.visibleFiveMode;if(r||(r=(s=(o=this.fiveState)==null?void 0:o.mode)!=null?s:this.workUtil.observers.length?"Panorama":"ModelLike"),Array.isArray(r))return r.includes(t);if(r==="ModelLike")return wi(t);if(r==="PanoramaLike")return!ao(t);if(r==="all")return!0;if(typeof r=="string")return r===t};if((()=>{var o;const s=n();if(Be((o=this.fiveState)==null?void 0:o.panoIndex)&&e.entryFromModel){if(wi(t)&&s?this.entryFromModel=!1:this.entryFromModel=!0,wi(t))return!0}else this.entryFromModel=!1;return s})()===!1)return{value:!1,reason:"current mode is not included in visibleFiveMode",visibleFiveMode:e.visibleFiveMode,mode:t}}computeVisibleByIntersect(e){var t,n,o,s;const r=Ko(Ko((t=this.getConfig().visibleConfig)!=null?t:{}).intersectRaycaster),a=e??this.five.getCurrentState().panoIndex,l=ao(this.five.getCurrentState().mode)?this.workUtil.getObserverPosition(a):this.five.camera.position;if(l===void 0)return{value:!1,reason:{type:"startPosition is undefined",fivePanoIndex:a}};const c=yo((()=>{var u;const f=(u=r.checkPoints)!=null?u:"center";return f==="center"?ff(this):f==="corner"?rh(this):Array.isArray(f)?f:[]})());let h=0,d=0;for(const u of c){const f=new R().subVectors(u,l).normalize();let m;kn.set(l,f);const[g]=this.fiveUtil.model.intersectRaycaster(kn);m=g==null?void 0:g.distance;const v=(()=>{if(!Go(this))return;const I=this.plugin.tags.filter(Go).map(D=>{var T;return(T=D.model)==null?void 0:T.object}).filter(Be),[j]=kn.intersectObjects(I,!0);return j})(),A=l.distanceTo(u),w=(n=r.distanceAccuracy)!=null?n:.01;m=Math.min(m??1/0,(o=v==null?void 0:v.distance)!=null?o:1/0),m+w>=A?h++:d++;const P=(s=r.needPassed)!=null?s:1;if(h>=P)return{value:!0}}return d===0?{value:!0}:{value:!1,reason:{type:"intersectRaycaster check failed",passedCount:h,needPassed:r.needPassed,model:this.fiveUtil.model.name}}}computeVisibleByFloorIndex(){var e,t,n,o,s,r,a;let l=0;const c=(e=this.fiveState)==null?void 0:e.panoIndex;c!==void 0?l=(t=this.workUtil.getObserver(c))==null?void 0:t.floorIndex:l=uC(this.workUtil.work,(a=(r=(o=(n=this.model)==null?void 0:n.object)==null?void 0:o.position)!=null?r:(s=this.mediaPlane)==null?void 0:s.position)!=null?a:ff(this));const h=this.fiveUtil.model.shownFloor;return{value:h===null||h===l,currentFiveFloorIndex:h,tagFloorIndex:l}}computeUnfoldedByPanoIndex(e){const t=this.getConfig().unfoldedConfig;if(t){if(typeof t=="function")return t(this.five,{tag:this,distance:this.getDistance({panoIndex:e})});if(t.keep==="folded")return!1;if(t.keep==="unfolded")return!0;if(t.unfoldDistance&&ja(this.getDistance({panoIndex:e}),t.unfoldDistance)===!1)return!1}}computeUnfoldedByCamera(){var e;if(this.entryFromModel&&wi(this.five.state.mode))return!1;const t=this.getConfig().unfoldedConfig;if(t){if(typeof t=="function")return t(this.five,{tag:this,distance:this.getDistance()});if(t.keep==="folded")return!1;if(t.keep==="unfolded")return!0;if(t.autoUnfold===void 0||t.autoUnfold===!1||t.autoUnfold.enable===!1||!t.autoUnfold.strategy)return;if(t.autoUnfold.strategy==="ScreenPostion"){const n=this.computeTagProject();if(n&&ja(n.x,t.autoUnfold.autoUnfoldProjectX)===!1)return!1}if(t.autoUnfold.strategy==="MinimumDistance"){const n=this.plugin.filterPointTag.filter(o=>o.currentVisible).filter(o=>{const s=this.computeTagProject();if(!s)return!1;const{x:r,y:a,z:l}=s;return!(Math.abs(l)>1||Math.abs(r)>1||Math.abs(a)>1)}).map(o=>({tag:o,id:o.id,tagConfig:o.getConfig().unfoldedConfig})).filter(({tagConfig:o})=>{var s,r;return!(typeof o=="function"||o.keep||o.autoUnfold===!1||((s=o.autoUnfold)==null?void 0:s.enable)===!1||((r=o.autoUnfold)==null?void 0:r.strategy)!=="MinimumDistance")}).map(o=>pe(W({},o),{distance:o.tag.getDistance()})).filter(({distance:o,tagConfig:s})=>{const r=s.autoUnfold.distance;return!(r&&ja(o,r)===!1)}).sort((o,s)=>o.distance-s.distance).findIndex(o=>o.id===this.id);if(n===-1||!(n<=((e=t.autoUnfold.maxNumber)!=null?e:1)-1))return!1}return t.autoUnfold.strategy!=="FoldWhenMove"}}computeTagProject(){const e=this.centerPosition;if(!e)return;const{x:t,y:n,z:o}=e.project(this.five.camera);if(!(o>1))return{x:t,y:n,z:o}}addObjectClickHandler(e,t,n){if(!t||!this.plugin.domEvents)return()=>{};const o=()=>!(!e.currentVisible||e.loading),s=r=>{if(!o())return!1;n(r.origDomEvent)};return this.plugin.domEvents.addEventListener(t,"click",s),()=>{var r;(r=this.plugin.domEvents)==null||r.removeEventListener(t,"click",s)}}whyHide(){var e;if(!this.plugin.state.enabled)return{reason:`plugin.state.enabled is ${this.plugin.state.enabled}`};if(!this.plugin.state.visible)return{reason:`plugin.state.visible is ${this.plugin.state.visible}`};if(!this.enabled)return{reason:`tag ${this.id} enabled is: ${this.enabled}`};const t=pe(W({},this.computeVisible()),{tagInstance:this});return t.value!==this.state.visible?{reason:"插件故障，请联系维护人员, err: 0",info:t}:this.state.visible?{reason:"应该是能看见才对",info:t}:t.value===!0?{reason:"插件故障，请联系维护人员, err: 1",info:t}:{reason:(e=t.reason.type)!=null?e:t.reason,info:t}}destroy(){var e,t,n,o;const s=this.plugin.tags.findIndex(r=>r.id===this.id);if(s===-1){console.warn(`Destroy failed: tag ${this.id} not found`);return}this._currentBlinkInstance&&!this._currentBlinkInstance.completed&&((t=(e=this._currentBlinkInstance).preComplete)==null||t.call(e),this._currentBlinkInstance=void 0),this.disable(),(o=(n=this.tag3DContentSvelte)==null?void 0:n.dispose)==null||o.call(n),this.hooks.off(),this.cache.clear(),this.plugin.tags.splice(s,1),this.plugin.tagsLengthWillUpdate=!0,this.plugin.hooks.emit("tagsLengthChange")}isPopoverConfigEnabled(){var e,t;return((t=(e=this.currentConfig)==null?void 0:e.popoverConfig)==null?void 0:t.enabled)===!0}isHoverEnabled(){var e;return!(((e=this.plugin)==null?void 0:e.globalHoverEnabled)===!1||this.hoverEnabled===!1)}}const pC=new Qe;class fC extends Cd{constructor(e,t){super(e,t),p(this,"__Object__"),p(this,"requestIdleCallbackId")}unfoldAndFoldOthers(){if(this.isPopoverConfigEnabled())return;const e=this.can("fold"),t=this.can("unfold");e&&t&&(this.state.unfolded=!this.state.unfolded,this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),this.state.unfolded&&this.plugin.tags.forEach(n=>{n.id!==this.id&&n.fold()}))}onClick(e){e.target==="TagPoint"&&this.unfoldAndFoldOthers()}applyVisible(){var e,t;this.currentVisible&&this.updateScreenPosition(),(e=this.tag3DContentSvelte)!=null&&e.css3DInstance&&(this.tag3DContentSvelte.css3DInstance.visible=this.visible),(t=this.tag3DContentSvelte)==null||t.svelteApp.$set({state:this.plugin.state,temporaryState:this.temporaryState}),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}unfold(){this.isPopoverConfigEnabled()||this.setUnfold(!0)}fold(){this.isPopoverConfigEnabled()||this.setUnfold(!1)}setUnfold(e){if(this.isPopoverConfigEnabled())return;const t=this.can("fold"),n=this.can("unfold");t&&n&&(this.state.unfolded=e,this.hooks.emit(e?"unfolded":"folded"),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}))}setPosition(e){this.originPosition=e,this.position=e,this.cache.clear(),this.updateVisible(),this.updateScreenPosition(),this.updateZIndex(),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}updateScreenPosition(e){var t;if(this.stickType!=="2DPoint"&&this.stickType!=="3DPoint")return;const{force:n=!1}=e??{},o=n?this.state.visible:this.currentVisible,s=(t=this.__Object__)!=null?t:{timeoutId:void 0,inAnimation:!1};if(this.__Object__=s,!o&&this.screenPosition?(s.inAnimation=!0,s.timeoutId=setTimeout(()=>{requestAnimationFrame(()=>{this.currentVisible||(s.inAnimation=!1,this.screenPosition=null,this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}))})},1e3)):s.timeoutId&&(clearTimeout(s.timeoutId),s.inAnimation=!1,s.timeoutId=void 0),!o&&!s.inAnimation)return;const r=this.computeTagProject();if(r&&this.five.renderer){const a=(()=>{if(!this.currentConfig.simulate3D)return 1;const c=2*Math.tan(.5*this.five.camera.fov/180*Math.PI),h=this.getDistance(void 0,1);return Math.max(Math.min(1-c*h/40,1),.7)})(),l=this.five.renderer.getSize(pC);this.screenPosition={leftPx:(r.x+1)/2*l.x,topPx:(-r.y+1)/2*l.y,scale:a}}else this.screenPosition=null;this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}set(e,t=!0){super.set(e,t),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),e.position&&this.setPosition(this.position)}setData(...e){super.setData(...e),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}updateUnfoldedByPanoIndex(){if(this.isPopoverConfigEnabled())return;const e=this.getUnfoldedByPanoIndex();if(this.state&&(e!==void 0&&(this.state.unfolded=e),e&&!this.state.visible)){const t=this.getConfig();typeof t.unfoldedConfig=="object"&&t.unfoldedConfig.autoFoldWhenHide!==!1&&(this.state.unfolded=!1)}}computeNormal(){return new R().fromArray(this.normal)}}const Kv=1,vf=`CSS3DObject@${Kv}`,mC=.00216,gC=.003;class _v extends Ln{constructor(e){var t,n,o,s,r;if(Oi(e.cornerPoints)&&Oi(e.width))throw new Error("cornerPoints and width cannot be both empty");const a=(t=e.container)!=null?t:document.createElement("div"),l=(n=e.cornerPoints)!=null?n:(()=>{const O=e.width/2;return[new R(-O,O,0),new R(-O,-O,0),new R(O,-O,0),new R(O,O,0)]})(),c=(o=e.ratio)!=null?o:gC,h=(s=e.dpr)!=null?s:1,d=(r=e.pointerEvents)!=null?r:"auto",u=Math.max(mC,c),f=l[0].distanceTo(l[1]),m=l[1].distanceTo(l[2]);let g=Ls(f/c*h),v=Ls(m/c*h);const A=qt(...l);let w;if(u===c)a.style.width=`${g}px`,a.style.height=`${v}px`,w=a;else{const O=document.createElement("div");O.style.width=`${g}px`,O.style.height=`${v}px`,O.style.pointerEvents="none";const y=c/u;a.style.position="absolute",a.style.left="0",a.style.top="0",a.style.width=`${y*g}px`,a.style.height=`${y*v}px`,O.appendChild(a),w=O}if(super(w),p(this,"version",Kv),p(this,"isCSS3DObject",!0),p(this,"name",vf),p(this,"container"),p(this,"width"),p(this,"height"),p(this,"domWidthPx"),p(this,"domHeightPx"),p(this,"cornerPoints"),p(this,"centerPosition"),p(this,"ratio"),p(this,"_mode","front"),p(this,"_opacityMesh"),w.id=this.id.toString(),a.style.pointerEvents=d,Object.assign(a.style,e.style),this.scale.set(u,u,u),this.cornerPoints=l,this.ratio=c,this.container=a,e.mode&&(this.mode=e.mode),u===c)this.width=f,this.height=m,this.centerPosition=A;else{const O=c/u;this.width=O*f,this.height=O*m,g=O*g,v=O*v,this.centerPosition=new R().subVectors(A,l[0]).multiplyScalar(O).add(l[0])}this.domWidthPx=g,this.domHeightPx=v,a.classList.add(`${vf}__container`);const P=new R().subVectors(l[1],l[0]),I=new R().subVectors(l[3],l[0]),j=new R().crossVectors(P,I).normalize();this.lookAt(j);const D=this.up.clone().applyQuaternion(this.quaternion),T=I.clone(),M=new R().crossVectors(D,T).normalize();this.rotateOnWorldAxis(M,D.angleTo(T)),this.position.copy(A),this._opacityMesh=new t0(g,v),this._opacityMesh.visible=e.mode==="behind",this.add(this._opacityMesh)}get mode(){return this._mode}set mode(e){this._mode=e,this._opacityMesh&&(this._opacityMesh.visible=e==="behind")}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}dispose(){this.container.remove(),this.removeFromParent()}}const vC=new tA;function AC(i){return new Promise((e,t)=>{function n(s){e(s)}function o(s){t(s)}vC.load(i,n,void 0,o)})}function yC(i){Ee(i,"svelte-xuejcm",".line.svelte-xuejcm{position:absolute;pointer-events:none}.line.vertical.svelte-xuejcm{transform:rotate(-90deg) translate3d(0.03125rem, 0, 0.625rem);transform-origin:0 0}.line.horizontal.svelte-xuejcm{transform:translate3d(0, -0.03125rem, 0.625rem)}.straight-line.svelte-xuejcm{display:block;width:100%;height:100%;overflow:visible}")}function Af(i){let e,t,n,o,s,r,a,l=i[3]&&yf(i);return{c(){e=U("div"),t=ge("svg"),n=ge("defs"),o=ge("linearGradient"),s=ge("stop"),r=ge("stop"),l&&l.c(),b(s,"offset","25%"),b(s,"stop-color",i[5]),b(s,"stop-opacity","1"),b(r,"offset","100%"),b(r,"stop-color",i[5]),b(r,"stop-opacity","0.5"),b(o,"x1",.5),b(o,"y1",.5),b(o,"x2",i[8]),b(o,"y2",.5),b(o,"id",i[10]),b(o,"gradientUnits","userSpaceOnUse"),b(t,"class","straight-line svelte-xuejcm"),b(t,"viewBox",a="0 0 "+i[8]+" "+i[7]),b(t,"preserveAspectRatio","none"),b(e,"class","line svelte-xuejcm"),we(e,"vertical",i[9]),we(e,"horizontal",!i[9]),N(e,"width",i[8]+"px"),N(e,"height",i[7]+"px")},m(c,h){Y(c,e,h),H(e,t),H(t,n),H(n,o),H(o,s),H(o,r),l&&l.m(t,null)},p(c,h){h&32&&b(s,"stop-color",c[5]),h&32&&b(r,"stop-color",c[5]),h&256&&b(o,"x2",c[8]),c[3]?l?(l.p(c,h),h&8&&B(l,1)):(l=yf(c),l.c(),B(l,1),l.m(t,null)):l&&(xe(),G(l,1,1,()=>{l=null}),Ce()),h&384&&a!==(a="0 0 "+c[8]+" "+c[7])&&b(t,"viewBox",a),h&512&&we(e,"vertical",c[9]),h&512&&we(e,"horizontal",!c[9]),h&256&&N(e,"width",c[8]+"px"),h&128&&N(e,"height",c[7]+"px")},d(c){c&&Q(e),l&&l.d()}}}function yf(i){let e,t,n,o,s;return{c(){e=ge("path"),b(e,"fill","none"),b(e,"stroke",t=i[4]?`url(#${i[10]})`:i[5]),b(e,"stroke-width",1),b(e,"d",i[6])},m(r,a){Y(r,e,a),s=!0},p(r,a){i=r,(!s||a&48&&t!==(t=i[4]?`url(#${i[10]})`:i[5]))&&b(e,"stroke",t),(!s||a&64)&&b(e,"d",i[6])},i(r){s||(r&&kt(()=>{s&&(o&&o.end(1),n=bo(e,al,{duration:i[2],delay:i[0],easing:Tn}),n.start())}),s=!0)},o(r){n&&n.invalidate(),r&&(o=Ks(e,al,{duration:i[2],delay:i[1],easing:Tn})),s=!1},d(r){r&&Q(e),r&&o&&o.end()}}}function bC(i){let e,t=i[8]&&Af(i);return{c(){t&&t.c(),e=Oe()},m(n,o){t&&t.m(n,o),Y(n,e,o)},p(n,[o]){n[8]?t?t.p(n,o):(t=Af(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:oe,o:oe,d(n){t&&t.d(n),n&&Q(e)}}}function wC(i,e,t){let n,o,s,r,{inDelay:a=0}=e,{outDelay:l=0}=e,{duration:c=1e3}=e,{unfolded:h}=e,{length:d}=e,{direction:u="horizontal"}=e,{useLinearColor:f=!1}=e,{color:m="white"}=e;const g=Bt();return i.$$set=v=>{"inDelay"in v&&t(0,a=v.inDelay),"outDelay"in v&&t(1,l=v.outDelay),"duration"in v&&t(2,c=v.duration),"unfolded"in v&&t(3,h=v.unfolded),"length"in v&&t(11,d=v.length),"direction"in v&&t(12,u=v.direction),"useLinearColor"in v&&t(4,f=v.useLinearColor),"color"in v&&t(5,m=v.color)},i.$$.update=()=>{i.$$.dirty&4096&&t(9,n=u==="vertical"),i.$$.dirty&2048&&t(8,o=d),i.$$.dirty&2048&&t(6,r=`M0.5 0.5 H ${d}`)},t(7,s=1),[a,l,c,h,f,m,r,s,o,n,g,d,u]}class Pd extends ye{constructor(e){super(),Ae(this,e,wC,bC,ve,{inDelay:0,outDelay:1,duration:2,unfolded:3,length:11,direction:12,useLinearColor:4,color:5},yC)}}function xC(i){Ee(i,"svelte-faoauy",".shadow.svelte-faoauy{position:absolute}")}function bf(i){let e,t,n,o,s;return{c(){e=U("div"),b(e,"class","shadow svelte-faoauy"),b(e,"style",t=`
      left: ${Di(i[5])};
      bottom: ${Di(i[6])};
      border-radius: ${i[10]?"9999px":"0"};
      box-shadow: 0 0 ${Di(i[11])} ${Di(i[12])} rgba(0, 0, 0, ${i[13]});
      ${i[8]?"transform: translateX(-50%); left: 50%":""}
      ${i[9]?"transform: translateX(-50%); top: 50%":""}
      ${i[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `),N(e,"width",Di(i[3])),N(e,"height",Di(i[4])),N(e,"z-index",i[14])},m(r,a){Y(r,e,a),s=!0},p(r,a){i=r,(!s||a&16352&&t!==(t=`
      left: ${Di(i[5])};
      bottom: ${Di(i[6])};
      border-radius: ${i[10]?"9999px":"0"};
      box-shadow: 0 0 ${Di(i[11])} ${Di(i[12])} rgba(0, 0, 0, ${i[13]});
      ${i[8]?"transform: translateX(-50%); left: 50%":""}
      ${i[9]?"transform: translateX(-50%); top: 50%":""}
      ${i[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `))&&b(e,"style",t);const l=a&16352;(l||a&16360)&&N(e,"width",Di(i[3])),(l||a&16368)&&N(e,"height",Di(i[4])),(l||a&32736)&&N(e,"z-index",i[14])},i(r){s||(r&&kt(()=>{s&&(o&&o.end(1),n=bo(e,Ft,{duration:i[0]}),n.start())}),s=!0)},o(r){n&&n.invalidate(),r&&(o=Ks(e,Ft,{duration:i[1]})),s=!1},d(r){r&&Q(e),r&&o&&o.end()}}}function CC(i){let e,t=i[2]&&bf(i);return{c(){t&&t.c(),e=Oe()},m(n,o){t&&t.m(n,o),Y(n,e,o)},p(n,[o]){n[2]?t?(t.p(n,o),o&4&&B(t,1)):(t=bf(n),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(xe(),G(t,1,1,()=>{t=null}),Ce())},i(n){B(t)},o(n){G(t)},d(n){t&&t.d(n),n&&Q(e)}}}function Di(i){return typeof i=="number"?i/16+"rem":i}function PC(i,e,t){let{inDelay:n=1e3}=e,{outDelay:o=1e3}=e,{visible:s=!0}=e,{width:r=0}=e,{height:a=0}=e,{left:l=0}=e,{bottom:c=0}=e,{center:h=!1}=e,{horizontalCenter:d=!1}=e,{verticalCenter:u=!1}=e,{round:f=!1}=e,{blurRadius:m}=e,{spreadRadius:g}=e,{opacity:v=.15}=e,{zIndex:A=-1}=e;return i.$$set=w=>{"inDelay"in w&&t(0,n=w.inDelay),"outDelay"in w&&t(1,o=w.outDelay),"visible"in w&&t(2,s=w.visible),"width"in w&&t(3,r=w.width),"height"in w&&t(4,a=w.height),"left"in w&&t(5,l=w.left),"bottom"in w&&t(6,c=w.bottom),"center"in w&&t(7,h=w.center),"horizontalCenter"in w&&t(8,d=w.horizontalCenter),"verticalCenter"in w&&t(9,u=w.verticalCenter),"round"in w&&t(10,f=w.round),"blurRadius"in w&&t(11,m=w.blurRadius),"spreadRadius"in w&&t(12,g=w.spreadRadius),"opacity"in w&&t(13,v=w.opacity),"zIndex"in w&&t(14,A=w.zIndex)},[n,o,s,r,a,l,c,h,d,u,f,m,g,v,A]}class Zi extends ye{constructor(e){super(),Ae(this,e,PC,CC,ve,{inDelay:0,outDelay:1,visible:2,width:3,height:4,left:5,bottom:6,center:7,horizontalCenter:8,verticalCenter:9,round:10,blurRadius:11,spreadRadius:12,opacity:13,zIndex:14},xC)}}function EC(){return Math.random().toString(36).slice(-6)}const La=EC();function IC(i){Ee(i,"svelte-1b2n9wi",".text-char.svelte-1b2n9wi{display:inline-block;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function wf(i,e,t){const n=i.slice();return n[19]=e[t].id,n[0]=e[t].content,n[20]=e,n[21]=t,n}function MC(i){let e,t=i[0]+"",n,o=i[21];const s=()=>i[10](e,o),r=()=>i[10](null,o);return{c(){e=U("span"),n=Te(t),b(e,"class","text-char svelte-1b2n9wi")},m(a,l){Y(a,e,l),H(e,n),s()},p(a,l){i=a,l&4&&t!==(t=i[0]+"")&&Ne(n,t),o!==i[21]&&(r(),o=i[21],s())},d(a){a&&Q(e),r()}}}function SC(i){let e;return{c(){e=U("br")},m(t,n){Y(t,e,n)},p:oe,d(t){t&&Q(e)}}}function DC(i){let e,t=i[21];const n=()=>i[9](e,t),o=()=>i[9](null,t);return{c(){e=U("span"),e.textContent=" ",b(e,"class","text-char svelte-1b2n9wi")},m(s,r){Y(s,e,r),n()},p(s,r){i=s,t!==i[21]&&(o(),t=i[21],n())},d(s){s&&Q(e),o()}}}function xf(i,e){let t,n;function o(a,l){return a[0]===a[3]?DC:a[0]===a[4]?SC:MC}let s=o(e),r=s(e);return{key:i,first:null,c(){t=Oe(),r.c(),n=Oe(),this.first=t},m(a,l){Y(a,t,l),r.m(a,l),Y(a,n,l)},p(a,l){e=a,s===(s=o(e))&&r?r.p(e,l):(r.d(1),r=s(e),r&&(r.c(),r.m(n.parentNode,n)))},d(a){a&&Q(t),r.d(a),a&&Q(n)}}}function kC(i){let e=[],t=new Map,n,o=i[2];const s=r=>r[19];for(let r=0;r<o.length;r+=1){let a=wf(i,o,r),l=s(a);t.set(l,e[r]=xf(l,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();n=Oe()},m(r,a){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(r,a);Y(r,n,a)},p(r,[a]){a&30&&(o=r[2],e=Ei(e,a,s,1,r,o,t,n.parentNode,la,xf,n,wf))},i:oe,o:oe,d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&Q(n)}}}function zC(i,e,t){let n,{inDelay:o=0}=e,{outDelay:s=0}=e,{content:r}=e,{unfolded:a}=e,{isFistUnfoldedUpdate:l=!0}=e;const c=`__EMOJI_SPLIT_${La}__`,h=`__EMOJI_${La}__`,d=`__SPACE_${La}__`,u=`__NEW_LINE_${La}__`;let f,m,g=[];function v(D){const T=[],M=new RegExp(new RegExp("\\p{Regional_Indicator}\\p{Regional_Indicator}|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?(\\u200D\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?)+|\\p{Emoji_Presentation}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)","gu"));return D.slice().replace(M,O=>`${c}${h}${O}${c}`).split(c).forEach(O=>O.startsWith(h)?T.push({id:Bt(),content:O.slice(h.length)}):T.push(...O.split("").map(y=>y===" "?d:y===`
`?u:y).map(y=>({id:Bt(),content:y})))),T}function A(){if(!m)return;const D=!a;m.reversed!==D&&m.reverse(),m.play()}function w(D){if(l){t(5,l=!1);return}clearTimeout(f),f=setTimeout(A,D?o:s)}function P(D){const T=function(){const M=K8(O=>D[O].getBoundingClientRect().x,[Math.min(D.length-1,10),Math.min(D.length-1,30)]);if(M>0)return M}();m=rt({targets:D.slice(0,T).filter(Be),autoplay:!1,duration:400,scale:[.7,1],rotate:[20,0],opacity:[0,1],translateX:[4,0],translateY:[10,0],delay:rt.stagger(50),easing:"easeInOutCubic"}),a&&m.seek(m.duration)}function I(D,T){_e[D?"unshift":"push"](()=>{g[T]=D,t(1,g)})}function j(D,T){_e[D?"unshift":"push"](()=>{g[T]=D,t(1,g)})}return i.$$set=D=>{"inDelay"in D&&t(6,o=D.inDelay),"outDelay"in D&&t(7,s=D.outDelay),"content"in D&&t(0,r=D.content),"unfolded"in D&&t(8,a=D.unfolded),"isFistUnfoldedUpdate"in D&&t(5,l=D.isFistUnfoldedUpdate)},i.$$.update=()=>{i.$$.dirty&1&&t(2,n=v(r)),i.$$.dirty&256&&w(a),i.$$.dirty&2&&P(g.filter(D=>!!D))},[r,g,n,d,u,l,o,s,a,I,j]}class $v extends ye{constructor(e){super(),Ae(this,e,zC,kC,ve,{inDelay:6,outDelay:7,content:0,unfolded:8,isFistUnfoldedUpdate:5},IC)}}function jC(i){Ee(i,"svelte-1ogmlqq",".arrow.svelte-1ogmlqq{width:100%;height:100%;background-size:100%;transition:transform 400ms ease-in-out;cursor:pointer;pointer-events:auto}.arrow-wrapper.svelte-1ogmlqq{position:relative;width:100%;height:100%}.arrow.left.svelte-1ogmlqq{transform:rotate(0deg)}.arrow.right.svelte-1ogmlqq{transform:rotate(-180deg)}.arrow.top.svelte-1ogmlqq{transform:rotate(90deg)}.arrow.bottom.svelte-1ogmlqq{transform:rotate(-90deg)}")}function Cf(i){let e,t,n,o,s,r,a,l,c,h;return t=new Zi({props:{center:!0,blurRadius:9,spreadRadius:3}}),{c(){e=U("div"),de(t.$$.fragment),n=re(),o=U("div"),b(o,"class",s="arrow "+i[0]+" svelte-1ogmlqq"),N(o,"background-image","url("+h8+")"),b(e,"class","arrow-wrapper svelte-1ogmlqq")},m(d,u){Y(d,e,u),le(t,e,null),H(e,n),H(e,o),l=!0,c||(h=Se(o,"click",i[5]),c=!0)},p(d,u){i=d,(!l||u&1&&s!==(s="arrow "+i[0]+" svelte-1ogmlqq"))&&b(o,"class",s)},i(d){l||(B(t.$$.fragment,d),d&&kt(()=>{l&&(a&&a.end(1),r=bo(o,Ft,{duration:i[2],delay:i[3],easing:Gs}),r.start())}),l=!0)},o(d){G(t.$$.fragment,d),r&&r.invalidate(),d&&(a=Ks(o,Ft,{duration:i[2],delay:i[4],easing:Gs})),l=!1},d(d){d&&Q(e),ce(t),d&&a&&a.end(),c=!1,h()}}}function LC(i){let e,t,n=i[1]&&Cf(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[1]?n?(n.p(o,s),s&2&&B(n,1)):(n=Cf(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function TC(i,e,t){let{direction:n="right"}=e,{visible:o=!0}=e,{duration:s=0}=e,{inDelay:r=0}=e,{outDelay:a=0}=e;function l(c){On.call(this,i,c)}return i.$$set=c=>{"direction"in c&&t(0,n=c.direction),"visible"in c&&t(1,o=c.visible),"duration"in c&&t(2,s=c.duration),"inDelay"in c&&t(3,r=c.inDelay),"outDelay"in c&&t(4,a=c.outDelay)},[n,o,s,r,a,l]}let OC=class extends ye{constructor(i){super(),Ae(this,i,TC,LC,ve,{direction:0,visible:1,duration:2,inDelay:3,outDelay:4},jC)}};function RC(i,e,t=20,n=5){return new Promise((o,s)=>{let r=0;const a=setInterval(()=>{const l=i();e(l)?(clearInterval(a),o(l)):r>=n&&(clearInterval(a),s(l)),r++},t)})}function BC(i){Ee(i,"svelte-1fuzm7v",".text.svelte-1fuzm7v{pointer-events:auto;box-sizing:border-box;display:inline-block;max-width:7.5rem;transition:transform 400ms ease-in-out;font-size:0.75rem;line-height:1.125rem;white-space:initial;cursor:pointer}.arrow.svelte-1fuzm7v{pointer-events:auto;display:inline-block;vertical-align:top;width:0.875rem;height:0.875rem;margin-left:0.125rem;margin-top:0.125rem}")}function Pf(i){let e,t,n;return t=new $v({props:{unfolded:i[0],content:i[1],inDelay:500,outDelay:i[5]}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","text svelte-1fuzm7v"),N(e,"transform",i[7])},m(o,s){Y(o,e,s),le(t,e,null),i[10](e),n=!0},p(o,s){const r={};s&1&&(r.unfolded=o[0]),s&2&&(r.content=o[1]),s&32&&(r.outDelay=o[5]),t.$set(r),s&128&&N(e,"transform",o[7])},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t),i[10](null)}}}function Ef(i){let e,t,n;return t=new OC({props:{direction:i[6],visible:i[0],inDelay:600,duration:1e3}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","arrow svelte-1fuzm7v")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},p(o,s){const r={};s&64&&(r.direction=o[6]),s&1&&(r.visible=o[0]),t.$set(r)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function HC(i){let e,t,n,o=i[1]&&Pf(i),s=i[3]<i[4]&&Ef(i);return{c(){o&&o.c(),e=re(),s&&s.c(),t=Oe()},m(r,a){o&&o.m(r,a),Y(r,e,a),s&&s.m(r,a),Y(r,t,a),n=!0},p(r,[a]){r[1]?o?(o.p(r,a),a&2&&B(o,1)):(o=Pf(r),o.c(),B(o,1),o.m(e.parentNode,e)):o&&(xe(),G(o,1,1,()=>{o=null}),Ce()),r[3]<r[4]?s?(s.p(r,a),a&24&&B(s,1)):(s=Ef(r),s.c(),B(s,1),s.m(t.parentNode,t)):s&&(xe(),G(s,1,1,()=>{s=null}),Ce())},i(r){n||(B(o),B(s),n=!0)},o(r){G(o),G(s),n=!1},d(r){o&&o.d(r),r&&Q(e),s&&s.d(r),r&&Q(t)}}}function NC(i,e,t){let n,o,s,{visible:r=!1}=e,{textUnfolded:a=!1}=e,{content:l}=e,c,h=0,d=0,u=0;function f(m){_e[m?"unshift":"push"](()=>{c=m,t(2,c)})}return i.$$set=m=>{"visible"in m&&t(0,r=m.visible),"textUnfolded"in m&&t(8,a=m.textUnfolded),"content"in m&&t(1,l=m.content)},i.$$.update=()=>{if(i.$$.dirty&7&&c&&r&&l){const{lineHeight:m}=getComputedStyle(c);t(4,u=c.offsetHeight),RC(()=>c==null?void 0:c.offsetHeight,Boolean).then(()=>{t(4,u=c.offsetHeight)}),t(3,d=Number(m.replace("px","")))}i.$$.dirty&280&&t(9,h=a?d-u:0),i.$$.dirty&512&&t(7,n=`translateY(${h}px)`),i.$$.dirty&256&&t(6,o=a?"left":"right"),i.$$.dirty&256&&t(5,s=a?450:0)},[r,l,c,d,u,s,o,n,a,h,f]}class e1 extends ye{constructor(e){super(),Ae(this,e,NC,HC,ve,{visible:0,textUnfolded:8,content:1},BC)}}function FC(i){Ee(i,"svelte-5hip41",".content.svelte-5hip41{--height:62.4375rem;width:-moz-max-content;width:max-content;height:var(--height);padding:calc(var(--height) - 1.125rem) 0.25rem 0 1rem;position:absolute;left:0;bottom:0;overflow:hidden;box-sizing:border-box;font-size:0;pointer-events:none;white-space:nowrap;font-weight:600}")}function If(i){var e,t;let n,o,s,r,a,l,c,h,d;return n=new Zi({props:{visible:i[2],left:i[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),s=new Pd({props:{unfolded:i[2],length:i[3],outDelay:i[4]+40*Math.min((t=(e=i[6][0])==null?void 0:e.content.length)!=null?t:10,15),useLinearColor:!0}}),l=new e1({props:{visible:i[2],textUnfolded:i[1],content:i[5]}}),{c(){de(n.$$.fragment),o=re(),de(s.$$.fragment),r=re(),a=U("div"),de(l.$$.fragment),b(a,"class","content svelte-5hip41")},m(u,f){le(n,u,f),Y(u,o,f),le(s,u,f),Y(u,r,f),Y(u,a,f),le(l,a,null),c=!0,h||(d=[si(Ni.call(null,a)),Se(a,"clientWidth",i[10]),Se(a,"click",i[7])],h=!0)},p(u,f){var m,g;const v={};f&4&&(v.visible=u[2]),f&8&&(v.left=u[3]/2+"px"),n.$set(v);const A={};f&4&&(A.unfolded=u[2]),f&8&&(A.length=u[3]),f&16&&(A.outDelay=u[4]+40*Math.min((g=(m=u[6][0])==null?void 0:m.content.length)!=null?g:10,15)),s.$set(A);const w={};f&4&&(w.visible=u[2]),f&2&&(w.textUnfolded=u[1]),f&32&&(w.content=u[5]),l.$set(w)},i(u){c||(B(n.$$.fragment,u),B(s.$$.fragment,u),B(l.$$.fragment,u),c=!0)},o(u){G(n.$$.fragment,u),G(s.$$.fragment,u),G(l.$$.fragment,u),c=!1},d(u){ce(n,u),u&&Q(o),ce(s,u),u&&Q(r),u&&Q(a),ce(l),h=!1,lt(d)}}}function VC(i){let e,t,n=i[0].state&&If(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[0].state?n?(n.p(o,s),s&1&&B(n,1)):(n=If(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function WC(i,e,t){let n,o,s,r,a,{tag:l}=e,c,h=!1,d=[];function u(){t(1,h=!h)}const f=m=>{t(3,c=m.detail)};return i.$$set=m=>{"tag"in m&&t(0,l=m.tag)},i.$$.update=()=>{var m,g,v,A;i.$$.dirty&1&&t(2,n=!!((m=l.state)!=null&&m.unfolded)),i.$$.dirty&1&&t(9,o=(v=(g=l.data.title)!=null?g:l.data.text)!=null?v:""),i.$$.dirty&1&&t(8,s=(A=l.data.description)!=null?A:""),i.$$.dirty&768&&t(5,r=(()=>{if(o&&s)return o+`
`+s;if(o)return o;if(s)return s})()),i.$$.dirty&4&&(n||setTimeout(()=>{t(1,h=!1)},20)),i.$$.dirty&2&&t(4,a=h?450:0)},[l,h,n,c,a,r,d,u,s,o,f]}class GC extends ye{constructor(e){super(),Ae(this,e,WC,VC,ve,{tag:0},FC)}}function xi(i){return typeof i=="number"?i/16+"rem":i}function QC(i){Ee(i,"svelte-1j0cz4o",'.text.svelte-1j0cz4o{display:-webkit-box;display:-ms-box;display:-moz-box;position:relative;width:-moz-max-content;width:max-content;max-width:100%;-webkit-box-orient:vertical;-ms-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}@keyframes svelte-1j0cz4o-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.caret.svelte-1j0cz4o{position:absolute;width:0.0625rem;height:100%;background-color:#fff;animation:svelte-1j0cz4o-blink 1.2s infinite}.placeholder.svelte-1j0cz4o{opacity:0.5}.placeholder.svelte-1j0cz4o:empty::after{content:" "}')}function UC(i){let e;const t=i[6].default,n=uo(t,i,i[5],null);return{c(){n&&n.c()},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&32)&&fo(n,t,o,o[5],e?po(t,o[5],s,null):mo(o[5]),null)},i(o){e||(B(n,o),e=!0)},o(o){G(n,o),e=!1},d(o){n&&n.d(o)}}}function XC(i){var e,t;let n,o,s=((e=i[3])==null?void 0:e.inputting)&&Mf(),r=typeof((t=i[3])==null?void 0:t.placeholder)=="string"&&Sf(i);return{c(){s&&s.c(),n=re(),r&&r.c(),o=Oe()},m(a,l){s&&s.m(a,l),Y(a,n,l),r&&r.m(a,l),Y(a,o,l)},p(a,l){var c,h;(c=a[3])!=null&&c.inputting?s||(s=Mf(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),typeof((h=a[3])==null?void 0:h.placeholder)=="string"?r?r.p(a,l):(r=Sf(a),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},i:oe,o:oe,d(a){s&&s.d(a),a&&Q(n),r&&r.d(a),a&&Q(o)}}}function YC(i){let e;return{c(){e=Te(i[2])},m(t,n){Y(t,e,n)},p(t,n){n&4&&Ne(e,t[2])},i:oe,o:oe,d(t){t&&Q(e)}}}function Mf(i){let e;return{c(){e=U("div"),b(e,"class","caret svelte-1j0cz4o")},m(t,n){Y(t,e,n)},d(t){t&&Q(e)}}}function Sf(i){let e,t=i[3].placeholder+"",n;return{c(){e=U("span"),n=Te(t),b(e,"class","placeholder svelte-1j0cz4o")},m(o,s){Y(o,e,s),H(e,n)},p(o,s){s&8&&t!==(t=o[3].placeholder+"")&&Ne(n,t)},d(o){o&&Q(e)}}}function qC(i){let e,t,n,o;const s=[YC,XC,UC],r=[];function a(l,c){return l[2]?0:l[4]?1:2}return t=a(i),n=r[t]=s[t](i),{c(){e=U("div"),n.c(),b(e,"class","text svelte-1j0cz4o"),N(e,"max-width",typeof i[1]=="number"?xi(i[1]):i[1]),N(e,"-webkit-line-clamp",i[0])},m(l,c){Y(l,e,c),r[t].m(e,null),o=!0},p(l,[c]){let h=t;t=a(l),t===h?r[t].p(l,c):(xe(),G(r[h],1,1,()=>{r[h]=null}),Ce(),n=r[t],n?n.p(l,c):(n=r[t]=s[t](l),n.c()),B(n,1),n.m(e,null)),c&2&&N(e,"max-width",typeof l[1]=="number"?xi(l[1]):l[1]),c&1&&N(e,"-webkit-line-clamp",l[0])},i(l){o||(B(n),o=!0)},o(l){G(n),o=!1},d(l){l&&Q(e),r[t].d()}}}function ZC(i,e,t){let n,{$$slots:o={},$$scope:s}=e,{maxLine:r=null}=e,{maxWidth:a=null}=e,{text:l=null}=e,{edit:c=null}=e;return i.$$set=h=>{"maxLine"in h&&t(0,r=h.maxLine),"maxWidth"in h&&t(1,a=h.maxWidth),"text"in h&&t(2,l=h.text),"edit"in h&&t(3,c=h.edit),"$$scope"in h&&t(5,s=h.$$scope)},i.$$.update=()=>{i.$$.dirty&8&&t(4,n=typeof(c==null?void 0:c.placeholder)=="string"||(c==null?void 0:c.inputting))},[r,a,l,c,n,s,o]}class Ed extends ye{constructor(e){super(),Ae(this,e,ZC,qC,ve,{maxLine:0,maxWidth:1,text:2,edit:3},QC)}}function JC(i){Ee(i,"svelte-1oxrkr1",".plane__container.svelte-1oxrkr1.svelte-1oxrkr1{position:absolute;left:50%;transform:translate(-50%, -100%);width:-moz-max-content;width:max-content}.plane__wrapper.svelte-1oxrkr1.svelte-1oxrkr1{transition:transform 500ms linear, opacity 200ms linear;padding:0.625rem;background-color:rgba(0, 0, 0, 0.5);border:0.03125rem solid rgba(255, 255, 255, 0.3);border-radius:0.25rem}.unfolded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{transition-delay:200ms, 500ms;opacity:1}.folded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{opacity:0}.plane.svelte-1oxrkr1.svelte-1oxrkr1{max-width:11.75rem}.title.svelte-1oxrkr1.svelte-1oxrkr1{white-space:pre-wrap;font-weight:bold;font-size:0.75rem;line-height:1.125rem}.description.svelte-1oxrkr1.svelte-1oxrkr1{margin-top:0.25rem;white-space:pre-wrap;font-size:0.6875rem;line-height:1rem}")}function Df(i){var e,t;let n,o,s,r,a,l,c,h,d;n=new Pd({props:{unfolded:i[1],direction:"vertical",length:15,duration:500,inDelay:200,useLinearColor:!0}}),c=new Ed({props:{text:i[4],edit:(e=i[0].data.edit)==null?void 0:e.title,maxLine:i[2]}});let u=(i[0].data.description||((t=i[0].data.edit)==null?void 0:t.description))&&kf(i);return{c(){de(n.$$.fragment),o=re(),s=U("div"),r=U("div"),a=U("div"),l=U("div"),de(c.$$.fragment),h=re(),u&&u.c(),b(l,"class","title svelte-1oxrkr1"),b(a,"class","plane svelte-1oxrkr1"),b(r,"class","plane__wrapper svelte-1oxrkr1"),N(r,"transform",i[1]?"translateY(-15px)":"translateY(0)"),b(s,"class","plane__container svelte-1oxrkr1"),we(s,"unfolded",i[1]),we(s,"folded",i[5])},m(f,m){le(n,f,m),Y(f,o,m),Y(f,s,m),H(s,r),H(r,a),H(a,l),le(c,l,null),H(a,h),u&&u.m(a,null),d=!0},p(f,m){var g,v;const A={};m&2&&(A.unfolded=f[1]),n.$set(A);const w={};m&16&&(w.text=f[4]),m&1&&(w.edit=(g=f[0].data.edit)==null?void 0:g.title),m&4&&(w.maxLine=f[2]),c.$set(w),f[0].data.description||(v=f[0].data.edit)!=null&&v.description?u?(u.p(f,m),m&1&&B(u,1)):(u=kf(f),u.c(),B(u,1),u.m(a,null)):u&&(xe(),G(u,1,1,()=>{u=null}),Ce()),m&2&&N(r,"transform",f[1]?"translateY(-15px)":"translateY(0)"),(!d||m&2)&&we(s,"unfolded",f[1]),(!d||m&32)&&we(s,"folded",f[5])},i(f){d||(B(n.$$.fragment,f),B(c.$$.fragment,f),B(u),d=!0)},o(f){G(n.$$.fragment,f),G(c.$$.fragment,f),G(u),d=!1},d(f){ce(n,f),f&&Q(o),f&&Q(s),ce(c),u&&u.d()}}}function kf(i){var e;let t,n,o;return n=new Ed({props:{text:i[0].data.description,edit:(e=i[0].data.edit)==null?void 0:e.description,maxLine:i[3]}}),{c(){t=U("div"),de(n.$$.fragment),b(t,"class","description svelte-1oxrkr1")},m(s,r){Y(s,t,r),le(n,t,null),o=!0},p(s,r){var a;const l={};r&1&&(l.text=s[0].data.description),r&1&&(l.edit=(a=s[0].data.edit)==null?void 0:a.description),r&8&&(l.maxLine=s[3]),n.$set(l)},i(s){o||(B(n.$$.fragment,s),o=!0)},o(s){G(n.$$.fragment,s),o=!1},d(s){s&&Q(t),ce(n)}}}function KC(i){let e,t,n=i[0].state&&Df(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[0].state?n?(n.p(o,s),s&1&&B(n,1)):(n=Df(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function _C(i,e,t){let n,o,s,r,a,{tag:l}=e;return i.$$set=c=>{"tag"in c&&t(0,l=c.tag)},i.$$.update=()=>{var c,h,d,u,f;i.$$.dirty&1&&t(1,n=!!((c=l.state)!=null&&c.unfolded)),i.$$.dirty&2&&t(5,o=!n),i.$$.dirty&1&&t(4,s=(d=(h=l.data.title)!=null?h:l.data.text)!=null?d:""),i.$$.dirty&1&&t(3,r=(u=l.data.descriptionMaxRows)!=null?u:null),i.$$.dirty&1&&t(2,a=(f=l.data.titleMaxRows)!=null?f:null)},[l,n,a,r,s,o]}class $C extends ye{constructor(e){super(),Ae(this,e,_C,KC,ve,{tag:0},JC)}}function eP(i){let e,t;return e=new $C({props:{tag:i[0]}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.tag=n[0]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function tP(i){let e,t;return e=new GC({props:{tag:i[0]}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.tag=n[0]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function iP(i){let e,t,n,o;const s=[tP,eP],r=[];function a(l,c){return l[1]==="line"?0:l[1]==="plane"?1:-1}return~(e=a(i))&&(t=r[e]=s[e](i)),{c(){t&&t.c(),n=Oe()},m(l,c){~e&&r[e].m(l,c),Y(l,n,c),o=!0},p(l,[c]){let h=e;e=a(l),e===h?~e&&r[e].p(l,c):(t&&(xe(),G(r[h],1,1,()=>{r[h]=null}),Ce()),~e?(t=r[e],t?t.p(l,c):(t=r[e]=s[e](l),t.c()),B(t,1),t.m(n.parentNode,n)):t=null)},i(l){o||(B(t),o=!0)},o(l){G(t),o=!1},d(l){~e&&r[e].d(l),l&&Q(n)}}}function nP(i,e,t){let n,{tag:o}=e;return i.$$set=s=>{"tag"in s&&t(0,o=s.tag)},i.$$.update=()=>{var s;i.$$.dirty&1&&t(1,n=(s=o.data.appearance)!=null?s:"line")},[o,n]}class oP extends ye{constructor(e){super(),Ae(this,e,nP,iP,ve,{tag:0})}}function sP(i){Ee(i,"svelte-blgtit",".line.svelte-blgtit{width:100%;height:100%;overflow:visible;pointer-events:none}")}function zf(i){let e,t,n,o;return{c(){e=ge("path"),b(e,"fill","none"),b(e,"stroke","url(#"+i[4]+")"),b(e,"stroke-width","1"),b(e,"d","M0 21 L14 0.5 L105 0.5")},m(s,r){Y(s,e,r),o=!0},p(s,r){i=s},i(s){o||(s&&kt(()=>{o&&(n&&n.end(1),t=bo(e,al,{duration:i[1],delay:i[0],easing:Wr}),t.start())}),o=!0)},o(s){t&&t.invalidate(),s&&(n=Ks(e,al,{duration:i[1],delay:i[2],easing:Gs})),o=!1},d(s){s&&Q(e),s&&n&&n.end()}}}function rP(i){let e,t,n,o,s,r=i[3]&&zf(i);return{c(){e=ge("svg"),t=ge("defs"),n=ge("linearGradient"),o=ge("stop"),s=ge("stop"),r&&r.c(),b(o,"offset","25%"),b(o,"stop-color","white"),b(o,"stop-opacity","1"),b(s,"offset","100%"),b(s,"stop-color","white"),b(s,"stop-opacity","0.5"),b(n,"id",i[4]),b(n,"gradientUnits","userSpaceOnUse"),b(e,"class","line svelte-blgtit"),b(e,"viewBox","0 0 105 21")},m(a,l){Y(a,e,l),H(e,t),H(t,n),H(n,o),H(n,s),r&&r.m(e,null)},p(a,[l]){a[3]?r?(r.p(a,l),l&8&&B(r,1)):(r=zf(a),r.c(),B(r,1),r.m(e,null)):r&&(xe(),G(r,1,1,()=>{r=null}),Ce())},i(a){B(r)},o(a){G(r)},d(a){a&&Q(e),r&&r.d()}}}function aP(i,e,t){let{inDelay:n=0}=e,{duration:o=1e3}=e,{outDelay:s=0}=e,{unfolded:r}=e;const a=Bt();return i.$$set=l=>{"inDelay"in l&&t(0,n=l.inDelay),"duration"in l&&t(1,o=l.duration),"outDelay"in l&&t(2,s=l.outDelay),"unfolded"in l&&t(3,r=l.unfolded)},[n,o,s,r,a]}let lP=class extends ye{constructor(i){super(),Ae(this,i,aP,rP,ve,{inDelay:0,duration:1,outDelay:2,unfolded:3},sP)}};function cP(i){Ee(i,"svelte-1mgyhhn",`:root{--sc-dot-size:6px;--sc-active-dot-size:8px;--sc-dot-size-animation-time:250ms}.sc-carousel-dot__dot.svelte-1mgyhhn{background-color:var(--sc-color-rgb-light);border-radius:50%;display:inline-block;opacity:0.5;transition:opacity 100ms ease,\r
      height var(--sc-dot-size-animation-time) ease,\r
      width var(--sc-dot-size-animation-time) ease;cursor:pointer;-webkit-tap-highlight-color:transparent;height:var(--sc-dot-size);width:var(--sc-dot-size)}.sc-carousel-dot__dot.svelte-1mgyhhn:hover{opacity:0.9}.sc-carousel-dot__dot_active.svelte-1mgyhhn{opacity:0.7;height:var(--sc-active-dot-size);width:var(--sc-active-dot-size)}`)}function hP(i){let e,t,n;return{c(){e=U("button"),b(e,"class","sc-carousel-button sc-carousel-dot__dot svelte-1mgyhhn"),we(e,"sc-carousel-dot__dot_active",i[0])},m(o,s){Y(o,e,s),t||(n=Se(e,"click",i[1]),t=!0)},p(o,[s]){s&1&&we(e,"sc-carousel-dot__dot_active",o[0])},i:oe,o:oe,d(o){o&&Q(e),t=!1,n()}}}function dP(i,e,t){let{active:n=!1}=e;function o(s){On.call(this,i,s)}return i.$$set=s=>{"active"in s&&t(0,n=s.active)},[n,o]}class uP extends ye{constructor(e){super(),Ae(this,e,dP,hP,ve,{active:0},cP)}}function pP(i){Ee(i,"svelte-670fde",".sc-carousel-dots__container.svelte-670fde{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;padding:0 30px}.sc-carousel-dots__dot-container.svelte-670fde{height:calc(var(--sc-dot-size) + 14px);width:calc(var(--sc-dot-size) + 10px);display:flex;align-items:center;justify-content:center}")}function jf(i,e,t){const n=i.slice();return n[5]=e[t],n[7]=t,n}function Lf(i,e){let t,n,o,s;function r(){return e[3](e[7])}return n=new uP({props:{active:e[1]===e[7]}}),n.$on("click",r),{key:i,first:null,c(){t=U("div"),de(n.$$.fragment),o=re(),b(t,"class","sc-carousel-dots__dot-container svelte-670fde"),this.first=t},m(a,l){Y(a,t,l),le(n,t,null),H(t,o),s=!0},p(a,l){e=a;const c={};l&3&&(c.active=e[1]===e[7]),n.$set(c)},i(a){s||(B(n.$$.fragment,a),s=!0)},o(a){G(n.$$.fragment,a),s=!1},d(a){a&&Q(t),ce(n)}}}function fP(i){let e,t=[],n=new Map,o,s=Array(i[0]);const r=a=>a[7];for(let a=0;a<s.length;a+=1){let l=jf(i,s,a),c=r(l);n.set(c,t[a]=Lf(c,l))}return{c(){e=U("div");for(let a=0;a<t.length;a+=1)t[a].c();b(e,"class","sc-carousel-dots__container svelte-670fde")},m(a,l){Y(a,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);o=!0},p(a,[l]){l&7&&(s=Array(a[0]),xe(),t=Ei(t,l,r,1,a,s,n,e,wo,Lf,null,jf),Ce())},i(a){if(!o){for(let l=0;l<s.length;l+=1)B(t[l]);o=!0}},o(a){for(let l=0;l<t.length;l+=1)G(t[l]);o=!1},d(a){a&&Q(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function mP(i,e,t){const n=Bn();let{pagesCount:o=1}=e,{currentPageIndex:s=0}=e;function r(l){n("pageChange",l)}const a=l=>r(l);return i.$$set=l=>{"pagesCount"in l&&t(0,o=l.pagesCount),"currentPageIndex"in l&&t(1,s=l.currentPageIndex)},[o,s,r,a]}class gP extends ye{constructor(e){super(),Ae(this,e,mP,fP,ve,{pagesCount:0,currentPageIndex:1},pP)}}const Js="prev",vo="next";function vP(i){Ee(i,"svelte-1bftafx",":root{--sc-arrow-size:2px}.sc-carousel-arrow__circle.svelte-1bftafx{width:20px;height:20px;border-radius:50%;background-color:var(--sc-color-rgb-light-50p);display:flex;align-items:center;justify-content:center;transition:opacity 100ms ease;cursor:pointer;-webkit-tap-highlight-color:transparent}.sc-carousel-arrow__circle.svelte-1bftafx:hover{opacity:0.9}.sc-carousel-arrow__arrow.svelte-1bftafx{border:solid var(--sc-color-hex-dark);border-width:0 var(--sc-arrow-size) var(--sc-arrow-size) 0;padding:var(--sc-arrow-size);position:relative}.sc-carousel-arrow__arrow-next.svelte-1bftafx{transform:rotate(-45deg);left:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__arrow-prev.svelte-1bftafx{transform:rotate(135deg);right:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__circle_disabled.svelte-1bftafx,.sc-carousel-arrow__circle_disabled.svelte-1bftafx:hover{opacity:0.5}")}function AP(i){let e,t,n,o;return{c(){e=U("button"),t=U("i"),b(t,"class","sc-carousel-arrow__arrow svelte-1bftafx"),we(t,"sc-carousel-arrow__arrow-next",i[0]===vo),we(t,"sc-carousel-arrow__arrow-prev",i[0]===Js),b(e,"class","sc-carousel-button sc-carousel-arrow__circle svelte-1bftafx"),we(e,"sc-carousel-arrow__circle_disabled",i[1])},m(s,r){Y(s,e,r),H(e,t),n||(o=Se(e,"click",i[2]),n=!0)},p(s,[r]){r&1&&we(t,"sc-carousel-arrow__arrow-next",s[0]===vo),r&1&&we(t,"sc-carousel-arrow__arrow-prev",s[0]===Js),r&2&&we(e,"sc-carousel-arrow__circle_disabled",s[1])},i:oe,o:oe,d(s){s&&Q(e),n=!1,o()}}}function yP(i,e,t){let{direction:n=vo}=e,{disabled:o=!1}=e;function s(r){On.call(this,i,r)}return i.$$set=r=>{"direction"in r&&t(0,n=r.direction),"disabled"in r&&t(1,o=r.disabled)},[n,o,s]}class t1 extends ye{constructor(e){super(),Ae(this,e,yP,AP,ve,{direction:0,disabled:1},vP)}}function bP(i){Ee(i,"svelte-i7yfid",".sc-carousel-progress__indicator.svelte-i7yfid{height:100%;background-color:var(--sc-color-hex-dark-50p)}")}function wP(i){let e;return{c(){e=U("div"),b(e,"class","sc-carousel-progress__indicator svelte-i7yfid"),N(e,"width",i[0]+"%")},m(t,n){Y(t,e,n)},p(t,[n]){n&1&&N(e,"width",t[0]+"%")},i:oe,o:oe,d(t){t&&Q(e)}}}const Tf=100;function xP(i,e,t){let n,{value:o=0}=e;return i.$$set=s=>{"value"in s&&t(1,o=s.value)},i.$$.update=()=>{i.$$.dirty&2&&t(0,n=Math.min(Math.max(o*Tf,0),Tf))},[n,o]}class CP extends ye{constructor(e){super(),Ae(this,e,xP,wP,ve,{value:1},bP)}}function PP(i,e){i.addEventListener("mousedown",e),i.addEventListener("touchstart",e,{passive:!0})}function EP(i,e){i.removeEventListener("mousedown",e),i.removeEventListener("touchstart",e)}function IP(i,e){i.addEventListener("mouseup",e),i.addEventListener("touchend",e)}function Of(i,e){i.removeEventListener("mouseup",e),i.removeEventListener("touchend",e)}function MP(i,e){i.addEventListener("mousemove",e),i.addEventListener("touchmove",e)}function Rf(i,e){i.removeEventListener("mousemove",e),i.removeEventListener("touchmove",e)}function Id(i){return function(e,t){i.dispatchEvent(new CustomEvent(e,{detail:t}))}}const SP=110,DP=9,kP=111,zP=20;function mc(i){if("TouchEvent"in window&&i instanceof TouchEvent){const e=i.touches[0];return{x:e?e.clientX:0,y:e?e.clientY:0}}return{x:i.clientX,y:i.clientY}}function jP(i,{thresholdProvider:e}){const t=Id(i);let n,o,s=0,r,a=!1;function l(){return Date.now()-r>=kP&&Math.abs(s)>=zP}function c(u){r=Date.now(),s=0,a=!0;const f=mc(u);n=f.x,o=f.y,t("swipeStart",{x:n,y:o}),MP(window,h),IP(window,d)}function h(u){if(!a)return;const f=mc(u),m=f.x-n,g=f.y-o;n=f.x,o=f.y,t("swipeMove",{x:n,y:o,dx:m,dy:g}),m!==0&&Math.sign(m)!==Math.sign(s)&&(s=0),s+=m,Math.abs(s)>e()&&(t("swipeThresholdReached",{direction:s>0?Js:vo}),Of(window,d),Rf(window,h))}function d(u){if(Of(window,d),Rf(window,h),a=!1,!l()){t("swipeFailed");return}const f=mc(u);t("swipeEnd",{x:f.x,y:f.y})}return PP(i,c),{destroy(){EP(i,c)}}}function LP(i,e){i.addEventListener("mouseenter",e)}function TP(i,e){i.removeEventListener("mouseenter",e)}function OP(i,e){i.addEventListener("mouseleave",e)}function Bf(i,e){i.removeEventListener("mouseleave",e)}function RP(i){const e=Id(i);function t(){OP(i,n),e("hovered",{value:!0})}function n(){e("hovered",{value:!1}),Bf(i,n)}return LP(i,t),{destroy(){TP(i,t),Bf(i,n)}}}const BP=(i,e)=>{const t=e.x-i.x,n=e.y-i.y;return Math.sqrt(t*t+n*n)};function ks(i,e,t){return Math.max(i,Math.min(e,t))}function HP(i,e){i.addEventListener("touchstart",e,{passive:!0})}function NP(i,e){i.removeEventListener("touchstart",e)}function FP(i,e){i.addEventListener("touchend",e)}function Hf(i,e){i.removeEventListener("touchend",e)}function VP(i){const e=Id(i);let t=0,n={x:0,y:0};function o({tapEndedAt:a,tapEndedPos:l}){const c=a-t,h=BP(n,l);return c<=SP&&h<=DP}function s(a){t=Date.now();const l=a.touches[0];n={x:l.clientX,y:l.clientY},FP(i,r)}function r(a){Hf(i,r);const l=a.changedTouches[0];o({tapEndedAt:Date.now(),tapEndedPos:{x:l.clientX,y:l.clientY}})&&e("tapped")}return HP(i,s),{destroy(){NP(i,s),Hf(i,r)}}}function WP({currentParticleIndex:i,particlesCount:e,clonesCountHead:t,clonesCountTotal:n,particlesToScroll:o}){return i===e-t?0:i===0?i1({particlesCountWithoutClones:e-n,particlesToScroll:o})-1:Math.floor((i-t)/o)}function GP({currentParticleIndex:i,particlesToScroll:e}){return Math.ceil(i/e)}function QP({currentParticleIndex:i,particlesCount:e,clonesCountHead:t,clonesCountTotal:n,infinite:o,particlesToScroll:s}){return o?WP({currentParticleIndex:i,particlesCount:e,clonesCountHead:t,clonesCountTotal:n,particlesToScroll:s}):GP({currentParticleIndex:i,particlesToScroll:s})}function i1({particlesCountWithoutClones:i,particlesToScroll:e}){return Math.ceil(i/e)}function UP({particlesCountWithoutClones:i,particlesToScroll:e,particlesToShow:t}){const n=n1({particlesCountWithoutClones:i,particlesToScroll:e,particlesToShow:t});return Math.ceil(i/e)-n}function XP({infinite:i,particlesCountWithoutClones:e,particlesToScroll:t,particlesToShow:n}){return i?i1({particlesCountWithoutClones:e,particlesToScroll:t}):UP({particlesCountWithoutClones:e,particlesToScroll:t,particlesToShow:n})}function YP({pageIndex:i,clonesCountHead:e,clonesCountTail:t,particlesToScroll:n,particlesCount:o}){return ks(0,Math.min(e+i*n,o-t),o-1)}function qP({pageIndex:i,particlesToScroll:e,particlesCount:t,particlesToShow:n}){return ks(0,Math.min(i*e,t-n),t-1)}function gc({infinite:i,pageIndex:e,clonesCountHead:t,clonesCountTail:n,particlesToScroll:o,particlesCount:s,particlesToShow:r}){return i?YP({pageIndex:e,clonesCountHead:t,clonesCountTail:n,particlesToScroll:o,particlesCount:s}):qP({pageIndex:e,particlesToScroll:o,particlesCount:s,particlesToShow:r})}function ZP({particlesContainerChildren:i,particleWidth:e}){for(let t=0;t<i.length;t++)i[t].style.minWidth=`${e}px`,i[t].style.maxWidth=`${e}px`}function n1({particlesToScroll:i,particlesToShow:e,particlesCountWithoutClones:t}){const n=i-e;let o=e;for(;;){const s=t-o-n;if(s<e)return Math.max(s,0);o+=e+n}}function JP(i){return new ResizeObserver(e=>{i({width:e[0].contentRect.width})})}function KP({clonesCountHead:i,clonesCountTail:e,particlesContainerChildren:t}){const n=[];for(let r=0;r<e;r++)n.push(t[r].cloneNode(!0));const o=[],s=t.length;for(let r=s-1;r>s-1-i;r--)o.push(t[r].cloneNode(!0));return{clonesToAppend:n,clonesToPrepend:o}}function _P({particlesContainer:i,clonesToAppend:e,clonesToPrepend:t}){for(let n=0;n<e.length;n++)i.append(e[n]);for(let n=0;n<t.length;n++)i.prepend(t[n])}function $P({infinite:i,particlesToShow:e,partialPageSize:t}){const n=i?{head:Math.ceil(t||e),tail:Math.ceil(e)}:{head:0,tail:0};return pe(W({},n),{total:n.head+n.tail})}const Tr=(i,e,t)=>{if(i&&i.hasOwnProperty(e))return i[e];if(t===void 0)throw new Error(`Required arg "${e}" was not provided`);return t},hh=i=>e=>{i[e]&&i[e]()};var e9="Expected a function",o1="__lodash_hash_undefined__",s1=1/0,t9="[object Function]",i9="[object GeneratorFunction]",n9="[object Symbol]",o9=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s9=/^\w*$/,r9=/^\./,a9=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l9=/[\\^$.*+?()[\]{}|]/g,c9=/\\(\\)?/g,h9=/^\[object .+?Constructor\]$/,d9=typeof ji=="object"&&ji&&ji.Object===Object&&ji,u9=typeof self=="object"&&self&&self.Object===Object&&self,Md=d9||u9||Function("return this")();function p9(i,e){return i==null?void 0:i[e]}function f9(i){var e=!1;if(i!=null&&typeof i.toString!="function")try{e=!!(i+"")}catch{}return e}var m9=Array.prototype,g9=Function.prototype,r1=Object.prototype,vc=Md["__core-js_shared__"],Nf=function(){var i=/[^.]+$/.exec(vc&&vc.keys&&vc.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),a1=g9.toString,Sd=r1.hasOwnProperty,l1=r1.toString,v9=RegExp("^"+a1.call(Sd).replace(l9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ff=Md.Symbol,A9=m9.splice,y9=c1(Md,"Map"),Kr=c1(Object,"create"),Vf=Ff?Ff.prototype:void 0,Wf=Vf?Vf.toString:void 0;function _o(i){var e=-1,t=i?i.length:0;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}function b9(){this.__data__=Kr?Kr(null):{}}function w9(i){return this.has(i)&&delete this.__data__[i]}function x9(i){var e=this.__data__;if(Kr){var t=e[i];return t===o1?void 0:t}return Sd.call(e,i)?e[i]:void 0}function C9(i){var e=this.__data__;return Kr?e[i]!==void 0:Sd.call(e,i)}function P9(i,e){var t=this.__data__;return t[i]=Kr&&e===void 0?o1:e,this}_o.prototype.clear=b9;_o.prototype.delete=w9;_o.prototype.get=x9;_o.prototype.has=C9;_o.prototype.set=P9;function er(i){var e=-1,t=i?i.length:0;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}function E9(){this.__data__=[]}function I9(i){var e=this.__data__,t=Wl(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():A9.call(e,t,1),!0}function M9(i){var e=this.__data__,t=Wl(e,i);return t<0?void 0:e[t][1]}function S9(i){return Wl(this.__data__,i)>-1}function D9(i,e){var t=this.__data__,n=Wl(t,i);return n<0?t.push([i,e]):t[n][1]=e,this}er.prototype.clear=E9;er.prototype.delete=I9;er.prototype.get=M9;er.prototype.has=S9;er.prototype.set=D9;function os(i){var e=-1,t=i?i.length:0;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}function k9(){this.__data__={hash:new _o,map:new(y9||er),string:new _o}}function z9(i){return Gl(this,i).delete(i)}function j9(i){return Gl(this,i).get(i)}function L9(i){return Gl(this,i).has(i)}function T9(i,e){return Gl(this,i).set(i,e),this}os.prototype.clear=k9;os.prototype.delete=z9;os.prototype.get=j9;os.prototype.has=L9;os.prototype.set=T9;function Wl(i,e){for(var t=i.length;t--;)if(U9(i[t][0],e))return t;return-1}function O9(i,e){e=N9(e,i)?[e]:H9(e);for(var t=0,n=e.length;i!=null&&t<n;)i=i[G9(e[t++])];return t&&t==n?i:void 0}function R9(i){if(!d1(i)||V9(i))return!1;var e=X9(i)||f9(i)?v9:h9;return e.test(Q9(i))}function B9(i){if(typeof i=="string")return i;if(kd(i))return Wf?Wf.call(i):"";var e=i+"";return e=="0"&&1/i==-s1?"-0":e}function H9(i){return h1(i)?i:W9(i)}function Gl(i,e){var t=i.__data__;return F9(e)?t[typeof e=="string"?"string":"hash"]:t.map}function c1(i,e){var t=p9(i,e);return R9(t)?t:void 0}function N9(i,e){if(h1(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||kd(i)?!0:s9.test(i)||!o9.test(i)||e!=null&&i in Object(e)}function F9(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}function V9(i){return!!Nf&&Nf in i}var W9=Dd(function(i){i=q9(i);var e=[];return r9.test(i)&&e.push(""),i.replace(a9,function(t,n,o,s){e.push(o?s.replace(c9,"$1"):n||t)}),e});function G9(i){if(typeof i=="string"||kd(i))return i;var e=i+"";return e=="0"&&1/i==-s1?"-0":e}function Q9(i){if(i!=null){try{return a1.call(i)}catch{}try{return i+""}catch{}}return""}function Dd(i,e){if(typeof i!="function"||e&&typeof e!="function")throw new TypeError(e9);var t=function(){var n=arguments,o=e?e.apply(this,n):n[0],s=t.cache;if(s.has(o))return s.get(o);var r=i.apply(this,n);return t.cache=s.set(o,r),r};return t.cache=new(Dd.Cache||os),t}Dd.Cache=os;function U9(i,e){return i===e||i!==i&&e!==e}var h1=Array.isArray;function X9(i){var e=d1(i)?l1.call(i):"";return e==t9||e==i9}function d1(i){var e=typeof i;return!!i&&(e=="object"||e=="function")}function Y9(i){return!!i&&typeof i=="object"}function kd(i){return typeof i=="symbol"||Y9(i)&&l1.call(i)==n9}function q9(i){return i==null?"":B9(i)}function Z9(i,e,t){var n=i==null?void 0:O9(i,e);return n===void 0?t:n}var Ta=Z9,gl={},J9={get exports(){return gl},set exports(i){gl=i}};(function(i,e){var t=200,n="__lodash_hash_undefined__",o=9007199254740991,s="[object Arguments]",r="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",h="[object Function]",d="[object GeneratorFunction]",u="[object Map]",f="[object Number]",m="[object Object]",g="[object Promise]",v="[object RegExp]",A="[object Set]",w="[object String]",P="[object Symbol]",I="[object WeakMap]",j="[object ArrayBuffer]",D="[object DataView]",T="[object Float32Array]",M="[object Float64Array]",O="[object Int8Array]",y="[object Int16Array]",C="[object Int32Array]",x="[object Uint8Array]",S="[object Uint8ClampedArray]",k="[object Uint16Array]",z="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,X=/\w*$/,$=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,_={};_[s]=_[r]=_[j]=_[D]=_[a]=_[l]=_[T]=_[M]=_[O]=_[y]=_[C]=_[u]=_[f]=_[m]=_[v]=_[A]=_[w]=_[P]=_[x]=_[S]=_[k]=_[z]=!0,_[c]=_[h]=_[I]=!1;var se=typeof ji=="object"&&ji&&ji.Object===Object&&ji,K=typeof self=="object"&&self&&self.Object===Object&&self,me=se||K||Function("return this")(),De=e&&!e.nodeType&&e,he=De&&!0&&i&&!i.nodeType&&i,je=he&&he.exports===De;function ze(E,F){return E.set(F[0],F[1]),E}function Pe(E,F){return E.add(F),E}function Le(E,F){for(var J=-1,ae=E?E.length:0;++J<ae&&F(E[J],J,E)!==!1;);return E}function ie(E,F){for(var J=-1,ae=F.length,Ge=E.length;++J<ae;)E[Ge+J]=F[J];return E}function Me(E,F,J,ae){var Ge=-1,Re=E?E.length:0;for(ae&&Re&&(J=E[++Ge]);++Ge<Re;)J=F(J,E[Ge],Ge,E);return J}function Fe(E,F){for(var J=-1,ae=Array(E);++J<E;)ae[J]=F(J);return ae}function Ie(E,F){return E==null?void 0:E[F]}function Ve(E){var F=!1;if(E!=null&&typeof E.toString!="function")try{F=!!(E+"")}catch{}return F}function ue(E){var F=-1,J=Array(E.size);return E.forEach(function(ae,Ge){J[++F]=[Ge,ae]}),J}function be(E,F){return function(J){return E(F(J))}}function Je(E){var F=-1,J=Array(E.size);return E.forEach(function(ae){J[++F]=ae}),J}var nt=Array.prototype,At=Function.prototype,zt=Object.prototype,yt=me["__core-js_shared__"],gi=function(){var E=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),Fi=At.toString,Jt=zt.hasOwnProperty,Vi=zt.toString,Hn=RegExp("^"+Fi.call(Jt).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vi=je?me.Buffer:void 0,Ii=me.Symbol,Wi=me.Uint8Array,ft=be(Object.getPrototypeOf,Object),ai=Object.create,li=zt.propertyIsEnumerable,tr=nt.splice,Io=Object.getOwnPropertySymbols,Nn=vi?vi.isBuffer:void 0,ss=be(Object.keys,Object),Fn=V(me,"DataView"),Mi=V(me,"Map"),Ai=V(me,"Promise"),Vn=V(me,"Set"),Wn=V(me,"WeakMap"),Ki=V(Object,"create"),mn=ii(Fn),gn=ii(Mi),Mo=ii(Ai),So=ii(Vn),Gn=ii(Wn),_i=Ii?Ii.prototype:void 0,rs=_i?_i.valueOf:void 0;function Gi(E){var F=-1,J=E?E.length:0;for(this.clear();++F<J;){var ae=E[F];this.set(ae[0],ae[1])}}function Qn(){this.__data__=Ki?Ki(null):{}}function ir(E){return this.has(E)&&delete this.__data__[E]}function nr(E){var F=this.__data__;if(Ki){var J=F[E];return J===n?void 0:J}return Jt.call(F,E)?F[E]:void 0}function Do(E){var F=this.__data__;return Ki?F[E]!==void 0:Jt.call(F,E)}function vn(E,F){var J=this.__data__;return J[E]=Ki&&F===void 0?n:F,this}Gi.prototype.clear=Qn,Gi.prototype.delete=ir,Gi.prototype.get=nr,Gi.prototype.has=Do,Gi.prototype.set=vn;function jt(E){var F=-1,J=E?E.length:0;for(this.clear();++F<J;){var ae=E[F];this.set(ae[0],ae[1])}}function as(){this.__data__=[]}function or(E){var F=this.__data__,J=Si(F,E);if(J<0)return!1;var ae=F.length-1;return J==ae?F.pop():tr.call(F,J,1),!0}function ls(E){var F=this.__data__,J=Si(F,E);return J<0?void 0:F[J][1]}function cs(E){return Si(this.__data__,E)>-1}function hs(E,F){var J=this.__data__,ae=Si(J,E);return ae<0?J.push([E,F]):J[ae][1]=F,this}jt.prototype.clear=as,jt.prototype.delete=or,jt.prototype.get=ls,jt.prototype.has=cs,jt.prototype.set=hs;function Lt(E){var F=-1,J=E?E.length:0;for(this.clear();++F<J;){var ae=E[F];this.set(ae[0],ae[1])}}function ko(){this.__data__={hash:new Gi,map:new(Mi||jt),string:new Gi}}function Qi(E){return L(this,E).delete(E)}function An(E){return L(this,E).get(E)}function yn(E){return L(this,E).has(E)}function Un(E,F){return L(this,E).set(E,F),this}Lt.prototype.clear=ko,Lt.prototype.delete=Qi,Lt.prototype.get=An,Lt.prototype.has=yn,Lt.prototype.set=Un;function Rt(E){this.__data__=new jt(E)}function sr(){this.__data__=new jt}function rr(E){return this.__data__.delete(E)}function Xn(E){return this.__data__.get(E)}function Qt(E){return this.__data__.has(E)}function $i(E,F){var J=this.__data__;if(J instanceof jt){var ae=J.__data__;if(!Mi||ae.length<t-1)return ae.push([E,F]),this;J=this.__data__=new Lt(ae)}return J.set(E,F),this}Rt.prototype.clear=sr,Rt.prototype.delete=rr,Rt.prototype.get=Xn,Rt.prototype.has=Qt,Rt.prototype.set=$i;function Kt(E,F){var J=hr(E)||fs(E)?Fe(E.length,String):[],ae=J.length,Ge=!!ae;for(var Re in E)(F||Jt.call(E,Re))&&!(Ge&&(Re=="length"||st(Re,ae)))&&J.push(Re);return J}function ci(E,F,J){var ae=E[F];(!(Jt.call(E,F)&&ga(ae,J))||J===void 0&&!(F in E))&&(E[F]=J)}function Si(E,F){for(var J=E.length;J--;)if(ga(E[J][0],F))return J;return-1}function Pt(E,F){return E&&Jn(F,ur(F),E)}function _t(E,F,J,ae,Ge,Re,Ke){var et;if(ae&&(et=Re?ae(E,Ge,Re,Ke):ae(E)),et!==void 0)return et;if(!tn(E))return E;var St=hr(E);if(St){if(et=fe(E),!F)return zo(E,et)}else{var ot=te(E),Ut=ot==h||ot==d;if(va(E))return en(E,F);if(ot==m||ot==s||Ut&&!Re){if(Ve(E))return Re?E:{};if(et=ke(Ut?{}:E),!F)return lr(E,Pt(et,E))}else{if(!_[ot])return Re?E:{};et=qe(E,ot,_t,F)}}Ke||(Ke=new Rt);var hi=Ke.get(E);if(hi)return hi;if(Ke.set(E,et),!St)var Tt=J?cr(E):ur(E);return Le(Tt||E,function(Xt,Wt){Tt&&(Wt=Xt,Xt=E[Wt]),ci(et,Wt,_t(Xt,F,J,ae,Wt,E,Ke))}),et}function ds(E){return tn(E)?ai(E):{}}function us(E,F,J){var ae=F(E);return hr(E)?ae:ie(ae,J(E))}function Yn(E){return Vi.call(E)}function $t(E){if(!tn(E)||Vt(E))return!1;var F=dr(E)||Ve(E)?Hn:$;return F.test(ii(E))}function qn(E){if(!ti(E))return ss(E);var F=[];for(var J in Object(E))Jt.call(E,J)&&J!="constructor"&&F.push(J);return F}function en(E,F){if(F)return E.slice();var J=new E.constructor(E.length);return E.copy(J),J}function bn(E){var F=new E.constructor(E.byteLength);return new Wi(F).set(new Wi(E)),F}function Ui(E,F){var J=F?bn(E.buffer):E.buffer;return new E.constructor(J,E.byteOffset,E.byteLength)}function Zn(E,F,J){var ae=F?J(ue(E),!0):ue(E);return Me(ae,ze,new E.constructor)}function wn(E){var F=new E.constructor(E.source,X.exec(E));return F.lastIndex=E.lastIndex,F}function yi(E,F,J){var ae=F?J(Je(E),!0):Je(E);return Me(ae,Pe,new E.constructor)}function ar(E){return rs?Object(rs.call(E)):{}}function ps(E,F){var J=F?bn(E.buffer):E.buffer;return new E.constructor(J,E.byteOffset,E.length)}function zo(E,F){var J=-1,ae=E.length;for(F||(F=Array(ae));++J<ae;)F[J]=E[J];return F}function Jn(E,F,J,ae){J||(J={});for(var Ge=-1,Re=F.length;++Ge<Re;){var Ke=F[Ge],et=ae?ae(J[Ke],E[Ke],Ke,J,E):void 0;ci(J,Ke,et===void 0?E[Ke]:et)}return J}function lr(E,F){return Jn(E,Z(E),F)}function cr(E){return us(E,ur,Z)}function L(E,F){var J=E.__data__;return ei(F)?J[typeof F=="string"?"string":"hash"]:J.map}function V(E,F){var J=Ie(E,F);return $t(J)?J:void 0}var Z=Io?be(Io,Object):ql,te=Yn;(Fn&&te(new Fn(new ArrayBuffer(1)))!=D||Mi&&te(new Mi)!=u||Ai&&te(Ai.resolve())!=g||Vn&&te(new Vn)!=A||Wn&&te(new Wn)!=I)&&(te=function(E){var F=Vi.call(E),J=F==m?E.constructor:void 0,ae=J?ii(J):void 0;if(ae)switch(ae){case mn:return D;case gn:return u;case Mo:return g;case So:return A;case Gn:return I}return F});function fe(E){var F=E.length,J=E.constructor(F);return F&&typeof E[0]=="string"&&Jt.call(E,"index")&&(J.index=E.index,J.input=E.input),J}function ke(E){return typeof E.constructor=="function"&&!ti(E)?ds(ft(E)):{}}function qe(E,F,J,ae){var Ge=E.constructor;switch(F){case j:return bn(E);case a:case l:return new Ge(+E);case D:return Ui(E,ae);case T:case M:case O:case y:case C:case x:case S:case k:case z:return ps(E,ae);case u:return Zn(E,ae,J);case f:case w:return new Ge(E);case v:return wn(E);case A:return yi(E,ae,J);case P:return ar(E)}}function st(E,F){return F=F??o,!!F&&(typeof E=="number"||ne.test(E))&&E>-1&&E%1==0&&E<F}function ei(E){var F=typeof E;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?E!=="__proto__":E===null}function Vt(E){return!!gi&&gi in E}function ti(E){var F=E&&E.constructor,J=typeof F=="function"&&F.prototype||zt;return E===J}function ii(E){if(E!=null){try{return Fi.call(E)}catch{}try{return E+""}catch{}}return""}function ma(E){return _t(E,!0,!0)}function ga(E,F){return E===F||E!==E&&F!==F}function fs(E){return Yl(E)&&Jt.call(E,"callee")&&(!li.call(E,"callee")||Vi.call(E)==s)}var hr=Array.isArray;function ms(E){return E!=null&&Aa(E.length)&&!dr(E)}function Yl(E){return ya(E)&&ms(E)}var va=Nn||Zl;function dr(E){var F=tn(E)?Vi.call(E):"";return F==h||F==d}function Aa(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=o}function tn(E){var F=typeof E;return!!E&&(F=="object"||F=="function")}function ya(E){return!!E&&typeof E=="object"}function ur(E){return ms(E)?Kt(E):qn(E)}function ql(){return[]}function Zl(){return!1}i.exports=ma})(J9,gl);const K9=gl;var vl={},_9={get exports(){return vl},set exports(i){vl=i}};(function(i,e){var t=200,n="__lodash_hash_undefined__",o=1,s=2,r=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",h="[object Boolean]",d="[object Date]",u="[object Error]",f="[object Function]",m="[object GeneratorFunction]",g="[object Map]",v="[object Number]",A="[object Null]",w="[object Object]",P="[object Promise]",I="[object Proxy]",j="[object RegExp]",D="[object Set]",T="[object String]",M="[object Symbol]",O="[object Undefined]",y="[object WeakMap]",C="[object ArrayBuffer]",x="[object DataView]",S="[object Float32Array]",k="[object Float64Array]",z="[object Int8Array]",q="[object Int16Array]",X="[object Int32Array]",$="[object Uint8Array]",ne="[object Uint8ClampedArray]",_="[object Uint16Array]",se="[object Uint32Array]",K=/[\\^$.*+?()[\]{}|]/g,me=/^\[object .+?Constructor\]$/,De=/^(?:0|[1-9]\d*)$/,he={};he[S]=he[k]=he[z]=he[q]=he[X]=he[$]=he[ne]=he[_]=he[se]=!0,he[a]=he[l]=he[C]=he[h]=he[x]=he[d]=he[u]=he[f]=he[g]=he[v]=he[w]=he[j]=he[D]=he[T]=he[y]=!1;var je=typeof ji=="object"&&ji&&ji.Object===Object&&ji,ze=typeof self=="object"&&self&&self.Object===Object&&self,Pe=je||ze||Function("return this")(),Le=e&&!e.nodeType&&e,ie=Le&&!0&&i&&!i.nodeType&&i,Me=ie&&ie.exports===Le,Fe=Me&&je.process,Ie=function(){try{return Fe&&Fe.binding&&Fe.binding("util")}catch{}}(),Ve=Ie&&Ie.isTypedArray;function ue(E,F){for(var J=-1,ae=E==null?0:E.length,Ge=0,Re=[];++J<ae;){var Ke=E[J];F(Ke,J,E)&&(Re[Ge++]=Ke)}return Re}function be(E,F){for(var J=-1,ae=F.length,Ge=E.length;++J<ae;)E[Ge+J]=F[J];return E}function Je(E,F){for(var J=-1,ae=E==null?0:E.length;++J<ae;)if(F(E[J],J,E))return!0;return!1}function nt(E,F){for(var J=-1,ae=Array(E);++J<E;)ae[J]=F(J);return ae}function At(E){return function(F){return E(F)}}function zt(E,F){return E.has(F)}function yt(E,F){return E==null?void 0:E[F]}function gi(E){var F=-1,J=Array(E.size);return E.forEach(function(ae,Ge){J[++F]=[Ge,ae]}),J}function Fi(E,F){return function(J){return E(F(J))}}function Jt(E){var F=-1,J=Array(E.size);return E.forEach(function(ae){J[++F]=ae}),J}var Vi=Array.prototype,Hn=Function.prototype,vi=Object.prototype,Ii=Pe["__core-js_shared__"],Wi=Hn.toString,ft=vi.hasOwnProperty,ai=function(){var E=/[^.]+$/.exec(Ii&&Ii.keys&&Ii.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),li=vi.toString,tr=RegExp("^"+Wi.call(ft).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Io=Me?Pe.Buffer:void 0,Nn=Pe.Symbol,ss=Pe.Uint8Array,Fn=vi.propertyIsEnumerable,Mi=Vi.splice,Ai=Nn?Nn.toStringTag:void 0,Vn=Object.getOwnPropertySymbols,Wn=Io?Io.isBuffer:void 0,Ki=Fi(Object.keys,Object),mn=Z(Pe,"DataView"),gn=Z(Pe,"Map"),Mo=Z(Pe,"Promise"),So=Z(Pe,"Set"),Gn=Z(Pe,"WeakMap"),_i=Z(Object,"create"),rs=ii(mn),Gi=ii(gn),Qn=ii(Mo),ir=ii(So),nr=ii(Gn),Do=Nn?Nn.prototype:void 0,vn=Do?Do.valueOf:void 0;function jt(E){var F=-1,J=E==null?0:E.length;for(this.clear();++F<J;){var ae=E[F];this.set(ae[0],ae[1])}}function as(){this.__data__=_i?_i(null):{},this.size=0}function or(E){var F=this.has(E)&&delete this.__data__[E];return this.size-=F?1:0,F}function ls(E){var F=this.__data__;if(_i){var J=F[E];return J===n?void 0:J}return ft.call(F,E)?F[E]:void 0}function cs(E){var F=this.__data__;return _i?F[E]!==void 0:ft.call(F,E)}function hs(E,F){var J=this.__data__;return this.size+=this.has(E)?0:1,J[E]=_i&&F===void 0?n:F,this}jt.prototype.clear=as,jt.prototype.delete=or,jt.prototype.get=ls,jt.prototype.has=cs,jt.prototype.set=hs;function Lt(E){var F=-1,J=E==null?0:E.length;for(this.clear();++F<J;){var ae=E[F];this.set(ae[0],ae[1])}}function ko(){this.__data__=[],this.size=0}function Qi(E){var F=this.__data__,J=en(F,E);if(J<0)return!1;var ae=F.length-1;return J==ae?F.pop():Mi.call(F,J,1),--this.size,!0}function An(E){var F=this.__data__,J=en(F,E);return J<0?void 0:F[J][1]}function yn(E){return en(this.__data__,E)>-1}function Un(E,F){var J=this.__data__,ae=en(J,E);return ae<0?(++this.size,J.push([E,F])):J[ae][1]=F,this}Lt.prototype.clear=ko,Lt.prototype.delete=Qi,Lt.prototype.get=An,Lt.prototype.has=yn,Lt.prototype.set=Un;function Rt(E){var F=-1,J=E==null?0:E.length;for(this.clear();++F<J;){var ae=E[F];this.set(ae[0],ae[1])}}function sr(){this.size=0,this.__data__={hash:new jt,map:new(gn||Lt),string:new jt}}function rr(E){var F=V(this,E).delete(E);return this.size-=F?1:0,F}function Xn(E){return V(this,E).get(E)}function Qt(E){return V(this,E).has(E)}function $i(E,F){var J=V(this,E),ae=J.size;return J.set(E,F),this.size+=J.size==ae?0:1,this}Rt.prototype.clear=sr,Rt.prototype.delete=rr,Rt.prototype.get=Xn,Rt.prototype.has=Qt,Rt.prototype.set=$i;function Kt(E){var F=-1,J=E==null?0:E.length;for(this.__data__=new Rt;++F<J;)this.add(E[F])}function ci(E){return this.__data__.set(E,n),this}function Si(E){return this.__data__.has(E)}Kt.prototype.add=Kt.prototype.push=ci,Kt.prototype.has=Si;function Pt(E){var F=this.__data__=new Lt(E);this.size=F.size}function _t(){this.__data__=new Lt,this.size=0}function ds(E){var F=this.__data__,J=F.delete(E);return this.size=F.size,J}function us(E){return this.__data__.get(E)}function Yn(E){return this.__data__.has(E)}function $t(E,F){var J=this.__data__;if(J instanceof Lt){var ae=J.__data__;if(!gn||ae.length<t-1)return ae.push([E,F]),this.size=++J.size,this;J=this.__data__=new Rt(ae)}return J.set(E,F),this.size=J.size,this}Pt.prototype.clear=_t,Pt.prototype.delete=ds,Pt.prototype.get=us,Pt.prototype.has=Yn,Pt.prototype.set=$t;function qn(E,F){var J=fs(E),ae=!J&&ga(E),Ge=!J&&!ae&&ms(E),Re=!J&&!ae&&!Ge&&ya(E),Ke=J||ae||Ge||Re,et=Ke?nt(E.length,String):[],St=et.length;for(var ot in E)(F||ft.call(E,ot))&&!(Ke&&(ot=="length"||Ge&&(ot=="offset"||ot=="parent")||Re&&(ot=="buffer"||ot=="byteLength"||ot=="byteOffset")||qe(ot,St)))&&et.push(ot);return et}function en(E,F){for(var J=E.length;J--;)if(ma(E[J][0],F))return J;return-1}function bn(E,F,J){var ae=F(E);return fs(E)?ae:be(ae,J(E))}function Ui(E){return E==null?E===void 0?O:A:Ai&&Ai in Object(E)?te(E):ti(E)}function Zn(E){return tn(E)&&Ui(E)==a}function wn(E,F,J,ae,Ge){return E===F?!0:E==null||F==null||!tn(E)&&!tn(F)?E!==E&&F!==F:yi(E,F,J,ae,wn,Ge)}function yi(E,F,J,ae,Ge,Re){var Ke=fs(E),et=fs(F),St=Ke?l:ke(E),ot=et?l:ke(F);St=St==a?w:St,ot=ot==a?w:ot;var Ut=St==w,hi=ot==w,Tt=St==ot;if(Tt&&ms(E)){if(!ms(F))return!1;Ke=!0,Ut=!1}if(Tt&&!Ut)return Re||(Re=new Pt),Ke||ya(E)?Jn(E,F,J,ae,Ge,Re):lr(E,F,St,J,ae,Ge,Re);if(!(J&o)){var Xt=Ut&&ft.call(E,"__wrapped__"),Wt=hi&&ft.call(F,"__wrapped__");if(Xt||Wt){var Kn=Xt?E.value():E,xn=Wt?F.value():F;return Re||(Re=new Pt),Ge(Kn,xn,J,ae,Re)}}return Tt?(Re||(Re=new Pt),cr(E,F,J,ae,Ge,Re)):!1}function ar(E){if(!Aa(E)||ei(E))return!1;var F=va(E)?tr:me;return F.test(ii(E))}function ps(E){return tn(E)&&dr(E.length)&&!!he[Ui(E)]}function zo(E){if(!Vt(E))return Ki(E);var F=[];for(var J in Object(E))ft.call(E,J)&&J!="constructor"&&F.push(J);return F}function Jn(E,F,J,ae,Ge,Re){var Ke=J&o,et=E.length,St=F.length;if(et!=St&&!(Ke&&St>et))return!1;var ot=Re.get(E);if(ot&&Re.get(F))return ot==F;var Ut=-1,hi=!0,Tt=J&s?new Kt:void 0;for(Re.set(E,F),Re.set(F,E);++Ut<et;){var Xt=E[Ut],Wt=F[Ut];if(ae)var Kn=Ke?ae(Wt,Xt,Ut,F,E,Re):ae(Xt,Wt,Ut,E,F,Re);if(Kn!==void 0){if(Kn)continue;hi=!1;break}if(Tt){if(!Je(F,function(xn,jo){if(!zt(Tt,jo)&&(Xt===xn||Ge(Xt,xn,J,ae,Re)))return Tt.push(jo)})){hi=!1;break}}else if(!(Xt===Wt||Ge(Xt,Wt,J,ae,Re))){hi=!1;break}}return Re.delete(E),Re.delete(F),hi}function lr(E,F,J,ae,Ge,Re,Ke){switch(J){case x:if(E.byteLength!=F.byteLength||E.byteOffset!=F.byteOffset)return!1;E=E.buffer,F=F.buffer;case C:return!(E.byteLength!=F.byteLength||!Re(new ss(E),new ss(F)));case h:case d:case v:return ma(+E,+F);case u:return E.name==F.name&&E.message==F.message;case j:case T:return E==F+"";case g:var et=gi;case D:var St=ae&o;if(et||(et=Jt),E.size!=F.size&&!St)return!1;var ot=Ke.get(E);if(ot)return ot==F;ae|=s,Ke.set(E,F);var Ut=Jn(et(E),et(F),ae,Ge,Re,Ke);return Ke.delete(E),Ut;case M:if(vn)return vn.call(E)==vn.call(F)}return!1}function cr(E,F,J,ae,Ge,Re){var Ke=J&o,et=L(E),St=et.length,ot=L(F),Ut=ot.length;if(St!=Ut&&!Ke)return!1;for(var hi=St;hi--;){var Tt=et[hi];if(!(Ke?Tt in F:ft.call(F,Tt)))return!1}var Xt=Re.get(E);if(Xt&&Re.get(F))return Xt==F;var Wt=!0;Re.set(E,F),Re.set(F,E);for(var Kn=Ke;++hi<St;){Tt=et[hi];var xn=E[Tt],jo=F[Tt];if(ae)var Xd=Ke?ae(jo,xn,Tt,F,E,Re):ae(xn,jo,Tt,E,F,Re);if(!(Xd===void 0?xn===jo||Ge(xn,jo,J,ae,Re):Xd)){Wt=!1;break}Kn||(Kn=Tt=="constructor")}if(Wt&&!Kn){var ba=E.constructor,wa=F.constructor;ba!=wa&&"constructor"in E&&"constructor"in F&&!(typeof ba=="function"&&ba instanceof ba&&typeof wa=="function"&&wa instanceof wa)&&(Wt=!1)}return Re.delete(E),Re.delete(F),Wt}function L(E){return bn(E,ur,fe)}function V(E,F){var J=E.__data__;return st(F)?J[typeof F=="string"?"string":"hash"]:J.map}function Z(E,F){var J=yt(E,F);return ar(J)?J:void 0}function te(E){var F=ft.call(E,Ai),J=E[Ai];try{E[Ai]=void 0;var ae=!0}catch{}var Ge=li.call(E);return ae&&(F?E[Ai]=J:delete E[Ai]),Ge}var fe=Vn?function(E){return E==null?[]:(E=Object(E),ue(Vn(E),function(F){return Fn.call(E,F)}))}:ql,ke=Ui;(mn&&ke(new mn(new ArrayBuffer(1)))!=x||gn&&ke(new gn)!=g||Mo&&ke(Mo.resolve())!=P||So&&ke(new So)!=D||Gn&&ke(new Gn)!=y)&&(ke=function(E){var F=Ui(E),J=F==w?E.constructor:void 0,ae=J?ii(J):"";if(ae)switch(ae){case rs:return x;case Gi:return g;case Qn:return P;case ir:return D;case nr:return y}return F});function qe(E,F){return F=F??r,!!F&&(typeof E=="number"||De.test(E))&&E>-1&&E%1==0&&E<F}function st(E){var F=typeof E;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?E!=="__proto__":E===null}function ei(E){return!!ai&&ai in E}function Vt(E){var F=E&&E.constructor,J=typeof F=="function"&&F.prototype||vi;return E===J}function ti(E){return li.call(E)}function ii(E){if(E!=null){try{return Wi.call(E)}catch{}try{return E+""}catch{}}return""}function ma(E,F){return E===F||E!==E&&F!==F}var ga=Zn(function(){return arguments}())?Zn:function(E){return tn(E)&&ft.call(E,"callee")&&!Fn.call(E,"callee")},fs=Array.isArray;function hr(E){return E!=null&&dr(E.length)&&!va(E)}var ms=Wn||Zl;function Yl(E,F){return wn(E,F)}function va(E){if(!Aa(E))return!1;var F=Ui(E);return F==f||F==m||F==c||F==I}function dr(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=r}function Aa(E){var F=typeof E;return E!=null&&(F=="object"||F=="function")}function tn(E){return E!=null&&typeof E=="object"}var ya=Ve?At(Ve):ps;function ur(E){return hr(E)?qn(E):zo(E)}function ql(){return[]}function Zl(){return!1}i.exports=Yl})(_9,vl);const $9=vl,eE=(i,e)=>$9(i,e),tE=i=>Object.keys(i||{}),iE=(i,e)=>{const t={};return i.forEach(n=>{t[n]=e[n]}),t},nE=()=>{const i={},e=(t,n)=>{const{watcherName:o,fn:s}=t,{prop:r,value:a}=n;i[o]||(i[o]={deps:{},fn:s}),i[o].deps[r]=a};return{subscribers:i,subscribe(t,n){t&&e(t,n)},notify(t,n){Object.entries(i).forEach(([o,{deps:s,fn:r}])=>{const a=tE(s);if(a.includes(n)){const l=iE(a,t);eE(s,l)||(i[o].deps=l,r())}})}}},oE=()=>{let i=null;return{targetWatcher(e,t){i={watcherName:e,fn:t},i.fn(),i=null},getTarget(){return i}}};function sE(i,e){const t=Ta(i,"data",{}),n=Ta(i,"watch",{}),o=Ta(i,"methods",{}),s=Ta(e,"onChange",()=>{}),{subscribe:r,notify:a,subscribers:l}=nE(),{targetWatcher:c,getTarget:h}=oE();let d;const u={},f=()=>({data:d,methods:u});let m=!1;const g=A=>(...w)=>{m=!0;const P=A(...w);return m=!1,P};Object.entries(o).forEach(([A,w])=>{u[A]=g((...P)=>w(f(),...P)),Object.defineProperty(u[A],"name",{value:A})}),d=new Proxy(K9(t),{get(A,w){return h()&&!m&&r(h(),{prop:w,value:A[w]}),Reflect.get(...arguments)},set(A,w,P){return A[w]===P||(Reflect.set(...arguments),h()||(s&&s(w,P),a(d,w))),!0}}),Object.entries(n).forEach(([A,w])=>{c(A,()=>{w(f())})});const v=[d,u];return v._internal={_getSubscribers(){return l}},v}function rE({pageIndex:i,particlesToShow:e,particlesToScroll:t,particlesCount:n}){const o=i===0?0:e-t,s=i*e-i*o,r=s+Math.max(e,t)-1,a=[];for(let l=s;l<=Math.min(n-1,r);l++)a.push(l);return a}function aE({infinite:i,pageIndex:e,pagesCount:t,particlesCount:n,particlesToShow:o,particlesToScroll:s}){const r=ks(0,e,t-1);let a=r-1,l=r+1;a=i?a<0?t-1:a:Math.max(0,a),l=i?l>t-1?0:l:Math.min(t-1,l);const c=[...new Set([a,r,l,0,t-1])].sort((d,u)=>d-u),h=c.flatMap(d=>rE({pageIndex:d,particlesToShow:o,particlesToScroll:s,particlesCount:n}));return{pageIndexes:c,particleIndexes:[...new Set(h)].sort((d,u)=>d-u)}}const lE=(i,e)=>(i(),setInterval(i,e)),cE=35,Gf=1;class hE{constructor({onProgressValueChange:e}){this._onProgressValueChange=e,this._autoplayDuration,this._onProgressValueChange,this._interval,this._paused=!1}setAutoplayDuration(e){this._autoplayDuration=e}start(e){return new Promise(t=>{this.reset();const n=Math.min(cE,Math.max(this._autoplayDuration,1));let o=-n;this._interval=lE(()=>ee(this,null,function*(){if(this._paused)return;o+=n;const s=o/this._autoplayDuration;this._onProgressValueChange(s),s>Gf&&(this.reset(),yield e(),t())}),n)})}pause(){this._paused=!0}resume(){this._paused=!1}reset(){clearInterval(this._interval),this._onProgressValueChange(Gf)}}function dE(i){const e=new hE({onProgressValueChange:s=>{i("progressValue",1-s)}}),t=sE({data:{particlesCountWithoutClones:0,particlesToShow:1,particlesToShowInit:1,particlesToScroll:1,particlesToScrollInit:1,particlesCount:1,currentParticleIndex:1,infinite:!1,autoplayDuration:1e3,clonesCountHead:0,clonesCountTail:0,clonesCountTotal:0,partialPageSize:1,currentPageIndex:1,pagesCount:1,pauseOnFocus:!1,focused:!1,autoplay:!1,autoplayDirection:"next",disabled:!1,durationMsInit:1e3,durationMs:1e3,offset:0,particleWidth:0,loaded:[]},watch:{setLoaded({data:s}){s.loaded=aE({infinite:s.infinite,pageIndex:s.currentPageIndex,pagesCount:s.pagesCount,particlesCount:s.particlesCountWithoutClones,particlesToShow:s.particlesToShow,particlesToScroll:s.particlesToScroll}).particleIndexes},setCurrentPageIndex({data:s}){s.currentPageIndex=QP({currentParticleIndex:s.currentParticleIndex,particlesCount:s.particlesCount,clonesCountHead:s.clonesCountHead,clonesCountTotal:s.clonesCountTotal,infinite:s.infinite,particlesToScroll:s.particlesToScroll})},setPartialPageSize({data:s}){s.partialPageSize=n1({particlesToScroll:s.particlesToScroll,particlesToShow:s.particlesToShow,particlesCountWithoutClones:s.particlesCountWithoutClones})},setClonesCount({data:s}){const{head:r,tail:a}=$P({infinite:s.infinite,particlesToShow:s.particlesToShow,partialPageSize:s.partialPageSize});s.clonesCountHead=r,s.clonesCountTail=a,s.clonesCountTotal=r+a},setProgressManagerAutoplayDuration({data:s}){e.setAutoplayDuration(s.autoplayDuration)},toggleProgressManager({data:{pauseOnFocus:s,focused:r}}){s&&(r?e.pause():e.resume())},initDuration({data:s}){s.durationMs=s.durationMsInit},applyAutoplay({data:s,methods:{_applyAutoplayIfNeeded:r}}){s.autoplay&&r(s.autoplay)},setPagesCount({data:s}){s.pagesCount=XP({infinite:s.infinite,particlesCountWithoutClones:s.particlesCountWithoutClones,particlesToScroll:s.particlesToScroll,particlesToShow:s.particlesToShow})},setParticlesToShow({data:s}){s.particlesToShow=ks(1,s.particlesToShowInit,s.particlesCountWithoutClones)},setParticlesToScroll({data:s}){s.particlesToScroll=ks(1,s.particlesToScrollInit,s.particlesCountWithoutClones)}},methods:{_prev({data:s}){s.currentParticleIndex=gc({infinite:s.infinite,pageIndex:s.currentPageIndex-1,clonesCountHead:s.clonesCountHead,clonesCountTail:s.clonesCountTail,particlesToScroll:s.particlesToScroll,particlesCount:s.particlesCount,particlesToShow:s.particlesToShow})},_next({data:s}){s.currentParticleIndex=gc({infinite:s.infinite,pageIndex:s.currentPageIndex+1,clonesCountHead:s.clonesCountHead,clonesCountTail:s.clonesCountTail,particlesToScroll:s.particlesToScroll,particlesCount:s.particlesCount,particlesToShow:s.particlesToShow})},_moveToParticle({data:s},r){s.currentParticleIndex=ks(0,r,s.particlesCount-1)},toggleFocused({data:s}){s.focused=!s.focused},_applyAutoplayIfNeeded(s){return ee(this,arguments,function*({data:r,methods:a}){if(!r.infinite&&(r.autoplayDirection===vo&&r.currentParticleIndex===r.particlesCount-1||r.autoplayDirection===Js&&r.currentParticleIndex===0)){e.reset();return}if(r.autoplay){const l=()=>hh({[vo]:()=>ee(this,null,function*(){return a.showNextPage()}),[Js]:()=>ee(this,null,function*(){return a.showPrevPage()})})(r.autoplayDirection);yield e.start(l)}})},_jumpIfNeeded(s){return ee(this,arguments,function*({data:r,methods:a}){let l=!1;return r.infinite&&(r.currentParticleIndex===0?(yield a.showParticle(r.particlesCount-r.clonesCountTotal,{animated:!1}),l=!0):r.currentParticleIndex===r.particlesCount-r.clonesCountTail&&(yield a.showParticle(r.clonesCountHead,{animated:!1}),l=!0)),l})},changePage(s,r,a){return ee(this,arguments,function*({data:l,methods:c},h,d){e.reset(),!l.disabled&&(l.disabled=!0,h(),yield c.offsetPage({animated:Tr(d,"animated",!0)}),l.disabled=!1,!(yield c._jumpIfNeeded())&&c._applyAutoplayIfNeeded())})},showNextPage(s,r){return ee(this,arguments,function*({data:a,methods:l},c){a.disabled||(yield l.changePage(l._next,c))})},showPrevPage(s,r){return ee(this,arguments,function*({data:a,methods:l},c){a.disabled||(yield l.changePage(l._prev,c))})},showParticle(s,r,a){return ee(this,arguments,function*({methods:l},c,h){yield l.changePage(()=>l._moveToParticle(c),h)})},_getParticleIndexByPageIndex({data:s},r){return gc({infinite:s.infinite,pageIndex:r,clonesCountHead:s.clonesCountHead,clonesCountTail:s.clonesCountTail,particlesToScroll:s.particlesToScroll,particlesCount:s.particlesCount,particlesToShow:s.particlesToShow})},showPage(s,r,a){return ee(this,arguments,function*({methods:l},c,h){const d=l._getParticleIndexByPageIndex(c);yield l.showParticle(d,h)})},offsetPage({data:s},r){const a=Tr(r,"animated",!0);return new Promise(l=>{s.durationMs=a?s.durationMsInit:0,s.offset=-s.currentParticleIndex*s.particleWidth,setTimeout(()=>{l()},s.durationMs)})}}},{onChange:i}),[n,o]=t;return[{data:n,progressManager:e},o,t._internal]}function uE(i){Ee(i,"svelte-sme1z4",":root{--sc-color-rgb-light-50p:rgba(93, 93, 93, 0.5);--sc-color-rgb-light:#5d5d5d;--sc-color-hex-dark-50p:rgba(30, 30, 30, 0.5);--sc-color-hex-dark:#1e1e1e}.sc-carousel__carousel-container.svelte-sme1z4{display:flex;width:100%;flex-direction:column;align-items:center}.sc-carousel__content-container.svelte-sme1z4{position:relative;display:flex;width:100%}.sc-carousel__pages-window.svelte-sme1z4{flex:1;display:flex;overflow:hidden;box-sizing:border-box;position:relative}.sc-carousel__pages-container.svelte-sme1z4{width:100%;display:flex;transition-property:transform}.sc-carousel__arrow-container.svelte-sme1z4{padding:5px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.sc-carousel-progress__container.svelte-sme1z4{width:100%;height:5px;background-color:var(--sc-color-rgb-light-50p);position:absolute;bottom:0}.sc-carousel-button{all:unset;cursor:pointer}.sc-carousel-button:focus{outline:5px auto}")}const pE=i=>({currentPageIndex:i[0]&32,pagesCount:i[0]&1024,loaded:i[0]&64}),Qf=i=>({currentPageIndex:i[5],pagesCount:i[10],showPage:i[15],loaded:i[6]}),fE=i=>({loaded:i[0]&64,currentPageIndex:i[0]&32}),Uf=i=>({showNextPage:i[14].showNextPage,loaded:i[6],currentPageIndex:i[5]}),mE=i=>({loaded:i[0]&64,currentPageIndex:i[0]&32}),Xf=i=>({loaded:i[6],currentPageIndex:i[5]}),gE=i=>({loaded:i[0]&64,currentPageIndex:i[0]&32}),Yf=i=>({showPrevPage:i[14].showPrevPage,loaded:i[6],currentPageIndex:i[5]});function qf(i){let e;const t=i[37].prev,n=uo(t,i,i[36],Yf),o=n||vE(i);return{c(){o&&o.c()},m(s,r){o&&o.m(s,r),e=!0},p(s,r){n?n.p&&(!e||r[0]&96|r[1]&32)&&fo(n,t,s,s[36],e?po(t,s[36],r,gE):mo(s[36]),Yf):o&&o.p&&(!e||r[0]&36)&&o.p(s,e?r:[-1,-1])},i(s){e||(B(o,s),e=!0)},o(s){G(o,s),e=!1},d(s){o&&o.d(s)}}}function vE(i){let e,t,n;return t=new t1({props:{direction:"prev",disabled:!i[2]&&i[5]===0}}),t.$on("click",i[23]),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","sc-carousel__arrow-container svelte-sme1z4")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},p(o,s){const r={};s[0]&36&&(r.disabled=!o[2]&&o[5]===0),t.$set(r)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function Zf(i){let e,t,n;return t=new CP({props:{value:i[7]}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","sc-carousel-progress__container svelte-sme1z4")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},p(o,s){const r={};s[0]&128&&(r.value=o[7]),t.$set(r)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function Jf(i){let e;const t=i[37].next,n=uo(t,i,i[36],Uf),o=n||AE(i);return{c(){o&&o.c()},m(s,r){o&&o.m(s,r),e=!0},p(s,r){n?n.p&&(!e||r[0]&96|r[1]&32)&&fo(n,t,s,s[36],e?po(t,s[36],r,fE):mo(s[36]),Uf):o&&o.p&&(!e||r[0]&1060)&&o.p(s,e?r:[-1,-1])},i(s){e||(B(o,s),e=!0)},o(s){G(o,s),e=!1},d(s){o&&o.d(s)}}}function AE(i){let e,t,n;return t=new t1({props:{direction:"next",disabled:!i[2]&&i[5]===i[10]-1}}),t.$on("click",i[14].showNextPage),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","sc-carousel__arrow-container svelte-sme1z4")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},p(o,s){const r={};s[0]&1060&&(r.disabled=!o[2]&&o[5]===o[10]-1),t.$set(r)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function Kf(i){let e;const t=i[37].dots,n=uo(t,i,i[36],Qf),o=n||yE(i);return{c(){o&&o.c()},m(s,r){o&&o.m(s,r),e=!0},p(s,r){n?n.p&&(!e||r[0]&1120|r[1]&32)&&fo(n,t,s,s[36],e?po(t,s[36],r,pE):mo(s[36]),Qf):o&&o.p&&(!e||r[0]&1056)&&o.p(s,e?r:[-1,-1])},i(s){e||(B(o,s),e=!0)},o(s){G(o,s),e=!1},d(s){o&&o.d(s)}}}function yE(i){let e,t;return e=new gP({props:{pagesCount:i[10],currentPageIndex:i[5]}}),e.$on("pageChange",i[41]),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&1024&&(s.pagesCount=n[10]),o[0]&32&&(s.currentPageIndex=n[5]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function bE(i){let e,t,n,o,s,r,a,l,c,h,d,u,f=i[1]&&qf(i);const m=i[37].default,g=uo(m,i,i[36],Xf);let v=i[3]&&Zf(i),A=i[1]&&Jf(i),w=i[4]&&Kf(i);return{c(){e=U("div"),t=U("div"),f&&f.c(),n=re(),o=U("div"),s=U("div"),g&&g.c(),a=re(),v&&v.c(),l=re(),A&&A.c(),c=re(),w&&w.c(),b(s,"class","sc-carousel__pages-container svelte-sme1z4"),N(s,"transform","translateX("+i[8]+"px)"),N(s,"transition-duration",i[9]+"ms"),N(s,"transition-timing-function",i[0]),b(o,"class","sc-carousel__pages-window svelte-sme1z4"),b(t,"class","sc-carousel__content-container svelte-sme1z4"),b(e,"class","sc-carousel__carousel-container svelte-sme1z4")},m(P,I){Y(P,e,I),H(e,t),f&&f.m(t,null),H(t,n),H(t,o),H(o,s),g&&g.m(s,null),i[39](s),H(o,a),v&&v.m(o,null),i[40](o),H(t,l),A&&A.m(t,null),H(e,c),w&&w.m(e,null),h=!0,d||(u=[si(r=jP.call(null,s,{thresholdProvider:i[38]})),Se(s,"swipeStart",i[16]),Se(s,"swipeMove",i[18]),Se(s,"swipeEnd",i[19]),Se(s,"swipeFailed",i[20]),Se(s,"swipeThresholdReached",i[17]),si(RP.call(null,o)),Se(o,"hovered",i[21]),si(VP.call(null,o)),Se(o,"tapped",i[22])],d=!0)},p(P,I){P[1]?f?(f.p(P,I),I[0]&2&&B(f,1)):(f=qf(P),f.c(),B(f,1),f.m(t,n)):f&&(xe(),G(f,1,1,()=>{f=null}),Ce()),g&&g.p&&(!h||I[0]&96|I[1]&32)&&fo(g,m,P,P[36],h?po(m,P[36],I,mE):mo(P[36]),Xf),(!h||I[0]&256)&&N(s,"transform","translateX("+P[8]+"px)"),(!h||I[0]&512)&&N(s,"transition-duration",P[9]+"ms"),(!h||I[0]&1)&&N(s,"transition-timing-function",P[0]),r&&oi(r.update)&&I[0]&2048&&r.update.call(null,{thresholdProvider:P[38]}),P[3]?v?(v.p(P,I),I[0]&8&&B(v,1)):(v=Zf(P),v.c(),B(v,1),v.m(o,null)):v&&(xe(),G(v,1,1,()=>{v=null}),Ce()),P[1]?A?(A.p(P,I),I[0]&2&&B(A,1)):(A=Jf(P),A.c(),B(A,1),A.m(t,null)):A&&(xe(),G(A,1,1,()=>{A=null}),Ce()),P[4]?w?(w.p(P,I),I[0]&16&&B(w,1)):(w=Kf(P),w.c(),B(w,1),w.m(e,null)):w&&(xe(),G(w,1,1,()=>{w=null}),Ce())},i(P){h||(B(f),B(g,P),B(v),B(A),B(w),h=!0)},o(P){G(f),G(g,P),G(v),G(A),G(w),h=!1},d(P){P&&Q(e),f&&f.d(),g&&g.d(P),i[39](null),v&&v.d(),i[40](null),A&&A.d(),w&&w.d(),d=!1,lt(u)}}}function wE(i,e,t){let{$$slots:n={},$$scope:o}=e,s=[],r,a,l=0,c=0,h=1;const[{data:d,progressManager:u},f,m]=dE((ue,be)=>{hh({currentPageIndex:()=>t(5,r=be),progressValue:()=>t(7,a=be),offset:()=>t(8,l=be),durationMs:()=>t(9,c=be),pagesCount:()=>t(10,h=be),loaded:()=>t(6,s=be)})(ue)}),g=Bn();let{timingFunction:v="ease-in-out"}=e,{arrows:A=!0}=e,{infinite:w=!0}=e,{initialPageIndex:P=0}=e,{duration:I=500}=e,{autoplay:j=!1}=e,{autoplayDuration:D=3e3}=e,{autoplayDirection:T=vo}=e,{pauseOnFocus:M=!1}=e,{autoplayProgressVisible:O=!1}=e,{dots:y=!0}=e,{swiping:C=!0}=e,{particlesToShow:x=1}=e,{particlesToScroll:S=1}=e;function k(ue,be){return ee(this,null,function*(){const Je=Tr(be,"animated",!0);if(typeof ue!="number")throw new Error("pageIndex should be a number");yield f.showPage(ue,{animated:Je})})}function z(ue){return ee(this,null,function*(){const be=Tr(ue,"animated",!0);yield f.showPrevPage({animated:be})})}function q(ue){return ee(this,null,function*(){const be=Tr(ue,"animated",!0);yield f.showNextPage({animated:be})})}let X=0,$,ne;const _=JP(({width:ue})=>{t(11,X=ue),d.particleWidth=X/d.particlesToShow,ZP({particlesContainerChildren:ne.children,particleWidth:d.particleWidth}),f.offsetPage({animated:!1})});function se(){const{clonesToAppend:ue,clonesToPrepend:be}=KP({clonesCountHead:d.clonesCountHead,clonesCountTail:d.clonesCountTail,particlesContainerChildren:ne.children});_P({particlesContainer:ne,clonesToAppend:ue,clonesToPrepend:be})}Zt(()=>{ee(this,null,function*(){yield ol(),ne&&$&&(d.particlesCountWithoutClones=ne.children.length,yield ol(),d.infinite&&se(),d.particlesCount=ne.children.length,f.showPage(P,{animated:!1}),_.observe($))})}),Hi(()=>{_.disconnect(),u.reset()});function K(ue){return ee(this,null,function*(){yield f.showPage(ue,{animated:!0})})}function me(){C&&(d.durationMs=0)}function De(ue){return ee(this,null,function*(){C&&(yield hh({[vo]:f.showNextPage,[Js]:f.showPrevPage})(ue.detail.direction))})}function he(ue){C&&(d.offset+=ue.detail.dx)}function je(){C&&f.showParticle(d.currentParticleIndex)}function ze(){return ee(this,null,function*(){C&&(yield f.offsetPage({animated:!0}))})}function Pe(ue){d.focused=ue.detail.value}function Le(){f.toggleFocused()}function ie(){f.showPrevPage()}const Me=()=>X/3;function Fe(ue){_e[ue?"unshift":"push"](()=>{ne=ue,t(13,ne)})}function Ie(ue){_e[ue?"unshift":"push"](()=>{$=ue,t(12,$)})}const Ve=ue=>K(ue.detail);return i.$$set=ue=>{"timingFunction"in ue&&t(0,v=ue.timingFunction),"arrows"in ue&&t(1,A=ue.arrows),"infinite"in ue&&t(2,w=ue.infinite),"initialPageIndex"in ue&&t(24,P=ue.initialPageIndex),"duration"in ue&&t(25,I=ue.duration),"autoplay"in ue&&t(26,j=ue.autoplay),"autoplayDuration"in ue&&t(27,D=ue.autoplayDuration),"autoplayDirection"in ue&&t(28,T=ue.autoplayDirection),"pauseOnFocus"in ue&&t(29,M=ue.pauseOnFocus),"autoplayProgressVisible"in ue&&t(3,O=ue.autoplayProgressVisible),"dots"in ue&&t(4,y=ue.dots),"swiping"in ue&&t(30,C=ue.swiping),"particlesToShow"in ue&&t(31,x=ue.particlesToShow),"particlesToScroll"in ue&&t(32,S=ue.particlesToScroll),"$$scope"in ue&&t(36,o=ue.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&32&&g("pageChange",r),i.$$.dirty[0]&4&&(d.infinite=w),i.$$.dirty[0]&33554432&&(d.durationMsInit=I),i.$$.dirty[0]&67108864&&(d.autoplay=j),i.$$.dirty[0]&134217728&&(d.autoplayDuration=D),i.$$.dirty[0]&268435456&&(d.autoplayDirection=T),i.$$.dirty[0]&536870912&&(d.pauseOnFocus=M),i.$$.dirty[1]&1&&(d.particlesToShowInit=x),i.$$.dirty[1]&2&&(d.particlesToScrollInit=S)},[v,A,w,O,y,r,s,a,l,c,h,X,$,ne,f,K,me,De,he,je,ze,Pe,Le,ie,P,I,j,D,T,M,C,x,S,k,z,q,o,n,Me,Fe,Ie,Ve]}class xE extends ye{constructor(e){super(),Ae(this,e,wE,bE,ve,{timingFunction:0,arrows:1,infinite:2,initialPageIndex:24,duration:25,autoplay:26,autoplayDuration:27,autoplayDirection:28,pauseOnFocus:29,autoplayProgressVisible:3,dots:4,swiping:30,particlesToShow:31,particlesToScroll:32,goTo:33,goToPrev:34,goToNext:35},uE,[-1,-1])}get goTo(){return this.$$.ctx[33]}get goToPrev(){return this.$$.ctx[34]}get goToNext(){return this.$$.ctx[35]}}function CE(i){Ee(i,"svelte-159ski6",".media-item.svelte-159ski6.svelte-159ski6{position:relative;height:100%}.media-content.svelte-159ski6.svelte-159ski6{position:relative;pointer-events:auto;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:inherit;object-fit:inherit}.media-content.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none}.video-icon.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem;max-width:60%;max-height:60%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.video-play-button-container.svelte-159ski6.svelte-159ski6{display:none;position:absolute;width:100%;height:100%;top:0;left:0;transform:translate3d(0, 0, 0)}.video-play-button-container.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none;display:block}.video-icon.svelte-159ski6.svelte-159ski6{pointer-events:auto}.video-icon.large.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem}.video-icon.small.svelte-159ski6.svelte-159ski6{width:1.75rem;height:1.75rem}.video-icon.svelte-159ski6 .video-icon-img.svelte-159ski6{width:100%;height:100%;background-position:center center;background-size:contain;background-repeat:no-repeat}.video-icon.svelte-159ski6 .video-icon-img.canPlay.svelte-159ski6{cursor:pointer}")}function _f(i){let e;function t(s,r){if(s[2].type==="Image")return EE;if(s[2].type==="Video")return PE}let n=t(i),o=n&&n(i);return{c(){e=U("div"),o&&o.c(),b(e,"class","media-item svelte-159ski6"),b(e,"draggable","false")},m(s,r){Y(s,e,r),o&&o.m(e,null)},p(s,r){n===(n=t(s))&&o?o.p(s,r):(o&&o.d(1),o=n&&n(s),o&&(o.c(),o.m(e,null)))},d(s){s&&Q(e),o&&o.d()}}}function PE(i){let e,t,n,o,s,r;function a(h,d){return h[8]&&h[2].videoCoverUrl?ME:IE}let l=a(i),c=l(i);return{c(){c.c(),e=re(),t=U("div"),n=U("div"),o=U("div"),b(o,"class","video-icon-img svelte-159ski6"),N(o,"background-image","url("+i[21]()+")"),we(o,"canPlay",i[5]),b(n,"class","video-icon svelte-159ski6"),we(n,"large",i[4]==="large"),we(n,"small",i[4]==="small"),b(t,"class","video-play-button-container svelte-159ski6"),we(t,"showPlayButton",i[11])},m(h,d){c.m(h,d),Y(h,e,d),Y(h,t,d),H(t,n),H(n,o),s||(r=Se(o,"click",i[22]),s=!0)},p(h,d){l===(l=a(h))&&c?c.p(h,d):(c.d(1),c=l(h),c&&(c.c(),c.m(e.parentNode,e))),d&8&&N(o,"background-image","url("+h[21]()+")"),d&32&&we(o,"canPlay",h[5]),d&16&&we(n,"large",h[4]==="large"),d&16&&we(n,"small",h[4]==="small"),d&2048&&we(t,"showPlayButton",h[11])},d(h){c.d(h),h&&Q(e),h&&Q(t),s=!1,r()}}}function EE(i){let e,t,n;return{c(){e=U("img"),b(e,"class","media-content svelte-159ski6"),at(e.src,t=i[2].url)||b(e,"src",t),b(e,"alt",n=i[2].name),b(e,"draggable",!1),N(e,"object-fit",i[7])},m(o,s){Y(o,e,s)},p(o,s){s&4&&!at(e.src,t=o[2].url)&&b(e,"src",t),s&4&&n!==(n=o[2].name)&&b(e,"alt",n),s&128&&N(e,"object-fit",o[7])},d(o){o&&Q(e)}}}function IE(i){let e,t,n,o,s,r;return{c(){e=U("video"),b(e,"class","media-content svelte-159ski6"),at(e.src,t=i[2].videoCoverUrl?i[2].url:i[2].url+"#t=0.1")||b(e,"src",t),b(e,"poster",n=i[2].videoCoverUrl),b(e,"preload",o=i[2].videoCoverUrl?"none":"auto"),b(e,"disablepictureinpicture",""),e.playsInline=!0,b(e,"paused",""),e.muted=!0,b(e,"draggable",!1),e.loop=!1,b(e,"crossorigin",""),e.autoplay=i[6],e.controls=!1,we(e,"showPlayButton",i[11]),N(e,"object-fit",i[7])},m(a,l){Y(a,e,l),i[20](e),s||(r=[Se(e,"play",i[15]),Se(e,"pause",i[16]),Se(e,"error",i[17]),Se(e,"ended",i[18]),Se(e,"click",i[19])],s=!0)},p(a,l){l&4&&!at(e.src,t=a[2].videoCoverUrl?a[2].url:a[2].url+"#t=0.1")&&b(e,"src",t),l&4&&n!==(n=a[2].videoCoverUrl)&&b(e,"poster",n),l&4&&o!==(o=a[2].videoCoverUrl?"none":"auto")&&b(e,"preload",o),l&64&&(e.autoplay=a[6]),l&2048&&we(e,"showPlayButton",a[11]),l&128&&N(e,"object-fit",a[7])},d(a){a&&Q(e),i[20](null),s=!1,lt(r)}}}function ME(i){let e,t,n;return{c(){e=U("img"),b(e,"class","media-content svelte-159ski6"),at(e.src,t=i[2].videoCoverUrl)||b(e,"src",t),b(e,"alt",n=i[2].name),b(e,"draggable",!1),N(e,"object-fit",i[7])},m(o,s){Y(o,e,s)},p(o,s){s&4&&!at(e.src,t=o[2].videoCoverUrl)&&b(e,"src",t),s&4&&n!==(n=o[2].name)&&b(e,"alt",n),s&128&&N(e,"object-fit",o[7])},d(o){o&&Q(e)}}}function SE(i){let e,t=i[2]&&_f(i);return{c(){t&&t.c(),e=Oe()},m(n,o){t&&t.m(n,o),Y(n,e,o)},p(n,[o]){n[2]?t?t.p(n,o):(t=_f(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:oe,o:oe,d(n){t&&t.d(n),n&&Q(e)}}}function DE(i,e,t){let n,o,{mediaInstance:s={videoInstance:void 0,paused:!0}}=e,{tag:r}=e,{media:a}=e,{playButtonIfNeed:l="withoutText"}=e,{playButtonSizeIfNeed:c="small"}=e,{canPlay:h=!0}=e,{autoplayVideo:d=!1}=e,{objectFit:u="fill"}=e,{disableVideoIfHavePoster:f=!1}=e,m=!0,g=!1;function v(){t(9,g=(a==null?void 0:a.type)==="Video"&&!!a.videoCoverUrl)}const A=pn("mediaStore"),w=pn("hooks"),P=()=>{g||n&&(t(10,n.muted=!0,n),n.play(),n.pause(),t(10,n.muted=!1,n),t(9,g=!0))};w.on("loadVideoFirstFrame",P),Zt(()=>{A.subscribe(({currentMediaElement:x})=>{x!==n&&(n==null||n.pause())})});const I=x=>{t(11,m=!1),t(0,s.paused=!1,s),t(9,g=!0),n&&A.set({currentMediaElement:n}),w.emit("playStateChange",{event:x,state:"playing",tag:r,mediaInstance:n})},j=x=>{t(11,m=!0),t(0,s.paused=!0,s),w.emit("playStateChange",{event:x,state:"paused",tag:r,mediaInstance:n})},D=x=>{t(11,m=!0),t(0,s.paused=!0,s),w.emit("playStateChange",{event:x,state:"paused",tag:r,mediaInstance:n})},T=x=>{t(11,m=!0),t(0,s.paused=!0,s),w.emit("playStateChange",{event:x,state:"paused",tag:r,mediaInstance:n})},M=x=>{n&&n.pause()};function O(x){_e[x?"unshift":"push"](()=>{s.videoInstance=x,t(0,s)})}const y=()=>l==="withText"?bd:l==="withoutText"?oh:l,C=x=>{h&&n&&(t(10,n.muted=!1,n),n.play())};return i.$$set=x=>{"mediaInstance"in x&&t(0,s=x.mediaInstance),"tag"in x&&t(1,r=x.tag),"media"in x&&t(2,a=x.media),"playButtonIfNeed"in x&&t(3,l=x.playButtonIfNeed),"playButtonSizeIfNeed"in x&&t(4,c=x.playButtonSizeIfNeed),"canPlay"in x&&t(5,h=x.canPlay),"autoplayVideo"in x&&t(6,d=x.autoplayVideo),"objectFit"in x&&t(7,u=x.objectFit),"disableVideoIfHavePoster"in x&&t(8,f=x.disableVideoIfHavePoster)},i.$$.update=()=>{if(i.$$.dirty&1&&t(10,n=s.videoInstance),i.$$.dirty&4&&t(14,o=a==null?void 0:a.url),i.$$.dirty&16384&&o&&v(),i.$$.dirty&1024&&n&&t(11,m=n.paused),i.$$.dirty&1540&&(a==null?void 0:a.type)==="Video"&&!g){const x=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,S=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1&&x;n&&S&&n.paused&&(document.removeEventListener("WeixinJSBridgeReady",P),document.removeEventListener("touchstart",P),document.removeEventListener("click",P),document.addEventListener("WeixinJSBridgeReady",P),document.addEventListener("touchstart",P),document.addEventListener("click",P))}},[s,r,a,l,c,h,d,u,f,g,n,m,A,w,o,I,j,D,T,M,O,y,C]}class u1 extends ye{constructor(e){super(),Ae(this,e,DE,SE,ve,{mediaInstance:0,tag:1,media:2,playButtonIfNeed:3,playButtonSizeIfNeed:4,canPlay:5,autoplayVideo:6,objectFit:7,disableVideoIfHavePoster:8},CE)}}function kE(i){Ee(i,"svelte-1mrbqlg",".media-list-wrapper.svelte-1mrbqlg.svelte-1mrbqlg{width:100%;height:100%;position:relative;overflow:hidden;border-radius:0.125rem}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg{position:relative;pointer-events:auto;height:100%;left:50%;top:50%;transform:translate(-50%, -50%)}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__carousel-container,.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__content-container{height:100%}")}function $f(i,e,t){const n=i.slice();return n[28]=e[t],n[29]=e,n[30]=t,n}function em(i){let e,t,n,o,s,r,a;const l=[jE,zE],c=[];function h(d,u){return d[13]&&d[10].length>1?0:1}return n=h(i),o=c[n]=l[n](i),{c(){e=U("div"),t=U("div"),o.c(),b(t,"class","media-list svelte-1mrbqlg"),we(t,"carouselEnabled",i[13]),b(e,"class","media-list-wrapper svelte-1mrbqlg"),we(e,"unfolded",i[5])},m(d,u){Y(d,e,u),H(e,t),c[n].m(t,null),a=!0},p(d,u){i=d;let f=n;n=h(i),n===f?c[n].p(i,u):(xe(),G(c[f],1,1,()=>{c[f]=null}),Ce(),o=c[n],o?o.p(i,u):(o=c[n]=l[n](i),o.c()),B(o,1),o.m(t,null)),(!a||u[0]&8192)&&we(t,"carouselEnabled",i[13]),(!a||u[0]&32)&&we(e,"unfolded",i[5])},i(d){a||(B(o),d&&kt(()=>{a&&(r&&r.end(1),s=bo(e,Cu,i[6]?{y:4,duration:i[4],delay:i[2],easing:Tn}:void 0),s.start())}),a=!0)},o(d){G(o),s&&s.invalidate(),d&&(r=Ks(e,Cu,i[6]?{y:4,duration:i[4],delay:i[3],easing:Tn}:void 0)),a=!1},d(d){d&&Q(e),c[n].d(),d&&r&&r.end()}}}function zE(i){let e,t,n;const o=[{media:i[1][0]},{autoplayVideo:i[14]},i[7],{tag:i[0]}];function s(a){i[21](a)}let r={};for(let a=0;a<o.length;a+=1)r=ut(r,o[a]);return i[8][0]!==void 0&&(r.mediaInstance=i[8][0]),e=new u1({props:r}),_e.push(()=>Tl(e,"mediaInstance",s)),{c(){de(e.$$.fragment)},m(a,l){le(e,a,l),n=!0},p(a,l){const c=l[0]&16515?vt(o,[l[0]&2&&{media:a[1][0]},l[0]&16384&&{autoplayVideo:a[14]},l[0]&128&&q0(a[7]),l[0]&1&&{tag:a[0]}]):{};!t&&l[0]&256&&(t=!0,c.mediaInstance=a[8][0],Ll(()=>t=!1)),e.$set(c)},i(a){n||(B(e.$$.fragment,a),n=!0)},o(a){G(e.$$.fragment,a),n=!1},d(a){ce(e,a)}}}function jE(i){let e,t,n={dots:!1,arrows:!1,$$slots:{default:[LE]},$$scope:{ctx:i}};return e=new xE({props:n}),i[19](e),e.$on("pageChange",i[20]),{c(){de(e.$$.fragment)},m(o,s){le(e,o,s),t=!0},p(o,s){const r={};s[0]&1409|s[1]&1&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){t||(B(e.$$.fragment,o),t=!0)},o(o){G(e.$$.fragment,o),t=!1},d(o){i[19](null),ce(e,o)}}}function tm(i){let e,t,n;const o=[i[7],{media:i[28]},{tag:i[0]}];function s(a){i[18](a,i[30])}let r={};for(let a=0;a<o.length;a+=1)r=ut(r,o[a]);return i[8][i[30]]!==void 0&&(r.mediaInstance=i[8][i[30]]),e=new u1({props:r}),_e.push(()=>Tl(e,"mediaInstance",s)),{c(){de(e.$$.fragment)},m(a,l){le(e,a,l),n=!0},p(a,l){i=a;const c=l[0]&1153?vt(o,[l[0]&128&&q0(i[7]),l[0]&1024&&{media:i[28]},l[0]&1&&{tag:i[0]}]):{};!t&&l[0]&256&&(t=!0,c.mediaInstance=i[8][i[30]],Ll(()=>t=!1)),e.$set(c)},i(a){n||(B(e.$$.fragment,a),n=!0)},o(a){G(e.$$.fragment,a),n=!1},d(a){ce(e,a)}}}function LE(i){let e,t,n=i[10],o=[];for(let r=0;r<n.length;r+=1)o[r]=tm($f(i,n,r));const s=r=>G(o[r],1,1,()=>{o[r]=null});return{c(){for(let r=0;r<o.length;r+=1)o[r].c();e=Oe()},m(r,a){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(r,a);Y(r,e,a),t=!0},p(r,a){if(a[0]&1409){n=r[10];let l;for(l=0;l<n.length;l+=1){const c=$f(r,n,l);o[l]?(o[l].p(c,a),B(o[l],1)):(o[l]=tm(c),o[l].c(),B(o[l],1),o[l].m(e.parentNode,e))}for(xe(),l=n.length;l<o.length;l+=1)s(l);Ce()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)B(o[a]);t=!0}},o(r){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)G(o[a]);t=!1},d(r){un(o,r),r&&Q(e)}}}function TE(i){let e,t,n=i[5]&&em(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,s){o[5]?n?(n.p(o,s),s[0]&32&&B(n,1)):(n=em(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function OE(i,e,t){let n,o,s,r,{tag:a}=e,{mediaData:l}=e,{inDelay:c=0}=e,{outDelay:h=0}=e,{duration:d=0}=e,{unfolded:u=!0}=e,{animation:f=!0}=e,{mediaItemConfig:m}=e,{enableCarousel:g=!0}=e,{autoplayConfig:v={}}=e;const{autoplayVideo:A=!1,autoplayCarousel:w=!0,autoplayVideoInCarousel:P=!1}=v;let I=[],j=0,D,T=null;const M=pn("hooks"),O=pn("mediaStore");function y(){const z=I[j],q=z==null?void 0:z.videoInstance;q&&(q.paused?(q.muted=!1,q.play()):q.pause())}Zt(()=>{M.on("click",z=>{var q;(q=a.tag3DContentSvelte)!=null&&q.css3DInstance&&z.tag.id===a.id&&z.target==="TagContent"&&y()}),t(0,a.play=()=>{const z=I[j],q=z==null?void 0:z.videoInstance;q&&(q.muted=!1,q.play())},a),t(0,a.pause=()=>{const z=I[j],q=z==null?void 0:z.videoInstance;q&&q.pause()},a),T=setInterval(()=>{r&&(D==null||D.goToNext())},3e3)}),Hi(()=>{clearInterval(T),M.off("click",y)});function C(z,q){i.$$.not_equal(I[q],z)&&(I[q]=z,t(8,I))}function x(z){_e[z?"unshift":"push"](()=>{D=z,t(12,D)})}const S=z=>{n||O.set({currentMediaElement:null}),t(11,j=z.detail)};function k(z){i.$$.not_equal(I[0],z)&&(I[0]=z,t(8,I))}return i.$$set=z=>{"tag"in z&&t(0,a=z.tag),"mediaData"in z&&t(1,l=z.mediaData),"inDelay"in z&&t(2,c=z.inDelay),"outDelay"in z&&t(3,h=z.outDelay),"duration"in z&&t(4,d=z.duration),"unfolded"in z&&t(5,u=z.unfolded),"animation"in z&&t(6,f=z.animation),"mediaItemConfig"in z&&t(7,m=z.mediaItemConfig),"enableCarousel"in z&&t(16,g=z.enableCarousel),"autoplayConfig"in z&&t(17,v=z.autoplayConfig)},i.$$.update=()=>{i.$$.dirty[0]&256&&t(9,n=I.every(z=>z.paused)),i.$$.dirty[0]&65538&&t(13,o=g&&(l==null?void 0:l.length)>1),i.$$.dirty[0]&2&&t(10,s=l),i.$$.dirty[0]&1536&&(r=s.length>1&&w&&n)},[a,l,c,h,d,u,f,m,I,n,s,j,D,o,A,O,g,v,C,x,S,k]}class p1 extends ye{constructor(e){super(),Ae(this,e,OE,TE,ve,{tag:0,mediaData:1,inDelay:2,outDelay:3,duration:4,unfolded:5,animation:6,mediaItemConfig:7,enableCarousel:16,autoplayConfig:17},kE,[-1,-1])}}function RE(i){Ee(i,"svelte-1f7m1lj",".line.svelte-1f7m1lj{position:absolute;width:6.5625rem;height:1.3125rem;transform:translateY(-100%)}.text.svelte-1f7m1lj{position:absolute;width:6.25rem;left:1rem;bottom:0.0625rem;font-weight:600}.media-wrapper.svelte-1f7m1lj{position:absolute;left:0.875rem;top:-5.3125rem;width:5.625rem;height:3.75rem;font-weight:600}")}function im(i){let e,t,n,o,s,r,a,l;e=new Zi({props:{visible:i[3],left:61,bottom:57,width:2,blurRadius:150,spreadRadius:75}}),o=new lP({props:{unfolded:i[3],outDelay:400}});let c=i[2]&&nm(i),h=i[1]&&om(i);return{c(){de(e.$$.fragment),t=re(),n=U("div"),de(o.$$.fragment),s=re(),c&&c.c(),r=re(),h&&h.c(),a=Oe(),b(n,"class","line svelte-1f7m1lj")},m(d,u){le(e,d,u),Y(d,t,u),Y(d,n,u),le(o,n,null),Y(d,s,u),c&&c.m(d,u),Y(d,r,u),h&&h.m(d,u),Y(d,a,u),l=!0},p(d,u){const f={};u&8&&(f.visible=d[3]),e.$set(f);const m={};u&8&&(m.unfolded=d[3]),o.$set(m),d[2]?c?(c.p(d,u),u&4&&B(c,1)):(c=nm(d),c.c(),B(c,1),c.m(r.parentNode,r)):c&&(xe(),G(c,1,1,()=>{c=null}),Ce()),d[1]?h?(h.p(d,u),u&2&&B(h,1)):(h=om(d),h.c(),B(h,1),h.m(a.parentNode,a)):h&&(xe(),G(h,1,1,()=>{h=null}),Ce())},i(d){l||(B(e.$$.fragment,d),B(o.$$.fragment,d),B(c),B(h),l=!0)},o(d){G(e.$$.fragment,d),G(o.$$.fragment,d),G(c),G(h),l=!1},d(d){ce(e,d),d&&Q(t),d&&Q(n),ce(o),d&&Q(s),c&&c.d(d),d&&Q(r),h&&h.d(d),d&&Q(a)}}}function nm(i){let e,t,n;return t=new $v({props:{unfolded:i[3],content:i[2],inDelay:500}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","text svelte-1f7m1lj")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},p(o,s){const r={};s&8&&(r.unfolded=o[3]),s&4&&(r.content=o[2]),t.$set(r)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function om(i){let e,t,n;return t=new p1({props:{autoplayConfig:{autoplayCarousel:!1},unfolded:i[3],mediaData:i[1],tag:i[0],enableCarousel:!1,mediaItemConfig:{canPlay:!1,playButtonSizeIfNeed:"small",disableVideoIfHavePoster:!0},inDelay:500,duration:500}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","media-wrapper svelte-1f7m1lj")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},p(o,s){const r={};s&8&&(r.unfolded=o[3]),s&2&&(r.mediaData=o[1]),s&1&&(r.tag=o[0]),t.$set(r)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function BE(i){let e,t,n=i[0].state&&im(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[0].state?n?(n.p(o,s),s&1&&B(n,1)):(n=im(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function HE(i,e,t){let n,o,s,r,{tag:a}=e;return i.$$set=l=>{"tag"in l&&t(0,a=l.tag)},i.$$.update=()=>{var l,c,h;i.$$.dirty&1&&t(3,n=a.state?a.state.unfolded:!1),i.$$.dirty&1&&t(4,o=(c=(l=a.data.title)!=null?l:a.data.text)!=null?c:""),i.$$.dirty&16&&t(2,s=((h=o.length)!=null?h:0)>7?o.substring(0,6)+"...":o),i.$$.dirty&1&&t(1,r=a.data.mediaData)},[a,r,s,n,o]}class NE extends ye{constructor(e){super(),Ae(this,e,HE,BE,ve,{tag:0},RE)}}const FE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAMAAAAolt3jAAAAOVBMVEUAAAD///////////////////////////////////////////////////////////////////////8KOjVvAAAAE3RSTlMAZV7nzWlZRTewq5CJUlEeHA4Lu1bjhwAAADRJREFUCNdjIAz4mFC4gtyMKHx+TlYUPgcLKp+RmQmVy4aiGFlSgAtZToiHF1kjOzsDUQAAVSIA07bTGZwAAAAASUVORK5CYII=",VE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAMAAAAolt3jAAAAM1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACjBUbJAAAAEXRSTlMAUUg+uqRVTBcKjop0bjUtK+w+Um4AAAA1SURBVAjXYyAMmNlRuJw8jCh8Di42FD4/KyqfkYUdlcuExBNgReZxcCPzOHmZkTXygXmEAQBMcAC8/O73cwAAAABJRU5ErkJggg==";function WE(i){Ee(i,"svelte-rehsoc",'@charset "UTF-8";.svelte-rehsoc.svelte-rehsoc{box-sizing:border-box}.marketing.svelte-rehsoc.svelte-rehsoc{transform:translateY(-100%)}.marketing.svelte-rehsoc .line.svelte-rehsoc{position:absolute;height:1.875rem;width:0.0625rem;left:50%;transform:translateX(-50%);background-color:white;bottom:0;transform-origin:bottom;transition:all 500ms}.marketing.svelte-rehsoc .content.svelte-rehsoc{position:relative;min-width:7.5rem;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;border-radius:0.375rem;top:-1.875rem;left:-1rem;transition-property:opacity, transform;transition-duration:500ms}.marketing.svelte-rehsoc .content .headerImage.svelte-rehsoc{width:100%;position:absolute;left:0;top:0;transform:translateY(-100%);border-top-left-radius:0.375rem;border-top-right-radius:0.375rem}.marketing.svelte-rehsoc .content .content-wrapper.svelte-rehsoc{width:100%;padding:1.25rem}.title-wrapper.svelte-rehsoc.svelte-rehsoc{position:relative;width:100%}.title-wrapper.svelte-rehsoc .title.svelte-rehsoc{border-radius:0.25rem;width:100%}.title-wrapper.svelte-rehsoc .title .text.svelte-rehsoc{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;line-clamp:2;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:normal;overflow-wrap:break-word;word-break:break-all;letter-spacing:0;font-size:1rem;font-weight:600;line-height:1.375rem}.price-wrapper.svelte-rehsoc.svelte-rehsoc{box-sizing:border-box;width:100%;margin-top:0.5rem;display:flex;justify-content:space-between;align-items:center}.price-wrapper.svelte-rehsoc .price-section.svelte-rehsoc{flex-shrink:0;overflow:hidden;white-space:nowrap}.price-wrapper.svelte-rehsoc .price-section .value.svelte-rehsoc{font-size:1.25rem;font-weight:700;line-height:1.5rem;font-family:DINAlternate-Bold TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif;letter-spacing:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.price-wrapper.svelte-rehsoc .price-section .unit.svelte-rehsoc{font-size:1.25rem;font-weight:700;line-height:1.5rem;font-family:DINAlternate-Bold TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif !important;letter-spacing:0}.price-wrapper.svelte-rehsoc .action-section.svelte-rehsoc{display:flex;align-items:center;height:1.125rem}.price-wrapper.svelte-rehsoc .action-section .highlight-text.svelte-rehsoc{font-size:0.75rem;line-height:1.125rem;font-weight:400;letter-spacing:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:8.75rem}.tags-wrapper.svelte-rehsoc.svelte-rehsoc{position:relative;overflow:hidden;margin-top:0.3125rem}.tags-wrapper.svelte-rehsoc .tags.svelte-rehsoc{position:relative;display:inline-flex;max-width:100%;flex-wrap:wrap}.tags-wrapper.svelte-rehsoc .tags .tag.svelte-rehsoc{display:block;text-align:center;flex-shrink:0;flex-grow:0;font-size:0.75rem;font-weight:400;height:1.125rem;line-height:1.125rem;margin-right:0.25rem;margin-bottom:0.25rem;padding:0 0.25rem;border-radius:0.125rem;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;box-sizing:border-box}.description.svelte-rehsoc.svelte-rehsoc{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:4;line-clamp:4;width:100%;overflow:hidden;text-overflow:ellipsis;overflow-wrap:break-word;word-break:break-all;white-space:normal;margin-top:0.25rem;font-size:0.875rem;font-weight:400;line-height:1.25rem;letter-spacing:0}.more-share-wrapper.svelte-rehsoc.svelte-rehsoc{margin-top:0.75rem;display:block;width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between}.more-share-wrapper.svelte-rehsoc .more-text.svelte-rehsoc{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:center;height:1.25rem;font-size:0.875rem;font-weight:500;line-height:1.25rem;letter-spacing:0}.more-share-wrapper.svelte-rehsoc .more-text .more-icon.svelte-rehsoc{margin-left:0.125rem;width:0.875rem;height:0.875rem}.marketing.light.svelte-rehsoc .content.svelte-rehsoc{background-color:white}.marketing.light.svelte-rehsoc .content .title-wrapper .title .text.svelte-rehsoc{color:rgba(0, 0, 0, 0.8)}.marketing.light.svelte-rehsoc .content .tags-wrapper .tags .primary-tag.svelte-rehsoc{background:rgba(234, 208, 154, 0.5);color:#946700}.marketing.light.svelte-rehsoc .content .tags-wrapper .tags .secondary-tag.svelte-rehsoc{background:rgba(0, 0, 0, 0.06);color:rgba(0, 0, 0, 0.5)}.marketing.light.svelte-rehsoc .content .description.svelte-rehsoc{color:#000}.marketing.light.svelte-rehsoc .content .price-wrapper.svelte-rehsoc{color:#ae7900}.marketing.light.svelte-rehsoc .content .more-share-wrapper .more-text.svelte-rehsoc{font-family:PingFangSC-Medium;color:rgba(0, 0, 0, 0.8509803922)}.marketing.dark.svelte-rehsoc .content.svelte-rehsoc{background-color:rgba(0, 0, 0, 0.75)}.marketing.dark.svelte-rehsoc .content .title-wrapper .title .text.svelte-rehsoc{color:white}.marketing.dark.svelte-rehsoc .content .tags-wrapper .tags .primary-tag.svelte-rehsoc{background:rgba(234, 208, 154, 0.5);color:white}.marketing.dark.svelte-rehsoc .content .tags-wrapper .tags .secondary-tag.svelte-rehsoc{background:rgba(255, 255, 255, 0.15);color:rgba(255, 255, 255, 0.85)}.marketing.dark.svelte-rehsoc .content .description.svelte-rehsoc{color:#fff}.marketing.dark.svelte-rehsoc .content .price-wrapper.svelte-rehsoc{color:#ead09a;fill:#ead09a}.marketing.dark.svelte-rehsoc .content .more-share-wrapper .more-text.svelte-rehsoc{font-family:PingFangSC-Medium;color:#fff}.marketing.unfolded.svelte-rehsoc .line.svelte-rehsoc{transform:translateX(-50%) scale(1, 1);transition-timing-function:ease-out}.marketing.folded.svelte-rehsoc .line.svelte-rehsoc{transform:translateX(-50%) scale(1, 0);transition-timing-function:ease-in}.marketing.unfolded.svelte-rehsoc .content.svelte-rehsoc{opacity:1;transform:translateY(0);transition-timing-function:ease-out}.marketing.folded.svelte-rehsoc .content.svelte-rehsoc{opacity:0;transform:translateY(0.425rem);transition-timing-function:ease-in}.tag.svelte-rehsoc.svelte-rehsoc,.text.svelte-rehsoc.svelte-rehsoc{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}')}function sm(i,e,t){const n=i.slice();return n[0]=e[t],n}function rm(i,e,t){const n=i.slice();return n[0]=e[t],n}function am(i){let e,t;return{c(){e=U("img"),b(e,"class","headerImage svelte-rehsoc"),at(e.src,t=i[1].headerPictureUrl)||b(e,"src",t),b(e,"alt","")},m(n,o){Y(n,e,o)},p(n,o){o&2&&!at(e.src,t=n[1].headerPictureUrl)&&b(e,"src",t)},d(n){n&&Q(e)}}}function lm(i){let e,t,n,o,s,r=i[4]||[],a=[];for(let h=0;h<r.length;h+=1)a[h]=cm(rm(i,r,h));let l=i[3]||[],c=[];for(let h=0;h<l.length;h+=1)c[h]=hm(sm(i,l,h));return{c(){e=U("div"),t=U("div");for(let h=0;h<a.length;h+=1)a[h].c();n=re();for(let h=0;h<c.length;h+=1)c[h].c();b(t,"class","tags svelte-rehsoc"),b(e,"class","tags-wrapper svelte-rehsoc")},m(h,d){Y(h,e,d),H(e,t);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null);H(t,n);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(t,null);o||(s=[si(Ni.call(null,t)),Se(t,"clientHeight",i[21])],o=!0)},p(h,d){if(d&16){r=h[4]||[];let u;for(u=0;u<r.length;u+=1){const f=rm(h,r,u);a[u]?a[u].p(f,d):(a[u]=cm(f),a[u].c(),a[u].m(t,n))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}if(d&8){l=h[3]||[];let u;for(u=0;u<l.length;u+=1){const f=sm(h,l,u);c[u]?c[u].p(f,d):(c[u]=hm(f),c[u].c(),c[u].m(t,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=l.length}},d(h){h&&Q(e),un(a,h),un(c,h),o=!1,lt(s)}}}function cm(i){let e,t=i[0]+"",n;return{c(){e=U("div"),n=Te(t),b(e,"class","tag primary-tag svelte-rehsoc"),N(e,"min-width",zd)},m(o,s){Y(o,e,s),H(e,n)},p(o,s){s&16&&t!==(t=o[0]+"")&&Ne(n,t)},d(o){o&&Q(e)}}}function hm(i){let e,t=i[0]+"",n;return{c(){e=U("div"),n=Te(t),b(e,"class","tag secondary-tag svelte-rehsoc"),N(e,"min-width",zd)},m(o,s){Y(o,e,s),H(e,n)},p(o,s){s&8&&t!==(t=o[0]+"")&&Ne(n,t)},d(o){o&&Q(e)}}}function dm(i){let e,t=i[1].description+"",n;return{c(){e=U("div"),n=Te(t),b(e,"class","description svelte-rehsoc")},m(o,s){Y(o,e,s),H(e,n)},p(o,s){s&2&&t!==(t=o[1].description+"")&&Ne(n,t)},d(o){o&&Q(e)}}}function um(i){let e,t,n,o=i[2]&&pm(i),s=!i[2]&&i[1].highlightText&&mm(i);return{c(){e=U("div"),o&&o.c(),t=re(),n=U("div"),s&&s.c(),b(n,"class","action-section svelte-rehsoc"),b(e,"class","price-wrapper svelte-rehsoc")},m(r,a){Y(r,e,a),o&&o.m(e,null),H(e,t),H(e,n),s&&s.m(n,null)},p(r,a){r[2]?o?o.p(r,a):(o=pm(r),o.c(),o.m(e,t)):o&&(o.d(1),o=null),!r[2]&&r[1].highlightText?s?s.p(r,a):(s=mm(r),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},d(r){r&&Q(e),o&&o.d(),s&&s.d()}}}function pm(i){let e,t,n,o=i[1].price.value+"",s,r=i[1].price.unit&&fm(i);return{c(){e=U("div"),r&&r.c(),t=re(),n=U("span"),s=Te(o),b(n,"class","value svelte-rehsoc"),b(e,"class","price-section svelte-rehsoc")},m(a,l){Y(a,e,l),r&&r.m(e,null),H(e,t),H(e,n),H(n,s)},p(a,l){a[1].price.unit?r?r.p(a,l):(r=fm(a),r.c(),r.m(e,t)):r&&(r.d(1),r=null),l&2&&o!==(o=a[1].price.value+"")&&Ne(s,o)},d(a){a&&Q(e),r&&r.d()}}}function fm(i){let e,t=i[1].price.unit+"",n;return{c(){e=U("span"),n=Te(t),b(e,"class","unit svelte-rehsoc")},m(o,s){Y(o,e,s),H(e,n)},p(o,s){s&2&&t!==(t=o[1].price.unit+"")&&Ne(n,t)},d(o){o&&Q(e)}}}function mm(i){let e,t=i[1].highlightText+"",n;return{c(){e=U("span"),n=Te(t),b(e,"class","highlight-text svelte-rehsoc")},m(o,s){Y(o,e,s),H(e,n)},p(o,s){s&2&&t!==(t=o[1].highlightText+"")&&Ne(n,t)},d(o){o&&Q(e)}}}function gm(i){let e,t,n,o;function s(l,c){return l[13]?QE:GE}let r=s(i),a=r(i);return{c(){e=U("div"),t=U("div"),n=Te(i[7]),o=re(),a.c(),b(t,"class","more-text svelte-rehsoc"),b(e,"class","more-share-wrapper svelte-rehsoc")},m(l,c){Y(l,e,c),H(e,t),H(t,n),H(t,o),a.m(t,null)},p(l,c){c&128&&Ne(n,l[7]),r===(r=s(l))&&a?a.p(l,c):(a.d(1),a=r(l),a&&(a.c(),a.m(t,null)))},d(l){l&&Q(e),a.d()}}}function GE(i){let e,t;return{c(){e=U("img"),b(e,"class","more-icon svelte-rehsoc"),at(e.src,t=FE)||b(e,"src",t),b(e,"alt","查看更多")},m(n,o){Y(n,e,o)},p:oe,d(n){n&&Q(e)}}}function QE(i){let e,t;return{c(){e=U("img"),b(e,"class","more-icon svelte-rehsoc"),at(e.src,t=VE)||b(e,"src",t),b(e,"alt","查看更多")},m(n,o){Y(n,e,o)},p:oe,d(n){n&&Q(e)}}}function UE(i){let e,t,n,o,s,r,a,l,c,h,d,u=i[1].title+"",f,m,g,v,A,w,P;t=new Zi({props:{visible:i[6],outDelay:500,left:61,bottom:87,blurRadius:150,spreadRadius:75}});let I=i[1].headerPictureUrl&&am(i),j=i[9]&&lm(i),D=i[1].description&&dm(i),T=(i[2]||i[1].highlightText)&&um(i),M=i[8]&&gm(i);return{c(){e=U("div"),de(t.$$.fragment),n=re(),o=U("div"),s=re(),r=U("div"),I&&I.c(),a=re(),l=U("div"),c=U("div"),h=U("div"),d=U("div"),f=Te(u),m=re(),j&&j.c(),g=re(),D&&D.c(),v=re(),T&&T.c(),A=re(),M&&M.c(),b(o,"class","line svelte-rehsoc"),N(o,"transition-delay",i[6]?i[12]+"ms":i[11]+"ms"),b(d,"class","text svelte-rehsoc"),b(h,"class","title svelte-rehsoc"),b(c,"class","title-wrapper svelte-rehsoc"),b(l,"class","content-wrapper svelte-rehsoc"),N(l,"padding-top",i[1].headerPictureUrl?"10px":"20px"),b(r,"class","content svelte-rehsoc"),N(r,"max-width",xi(i[15])),N(r,"transition-delay",i[6]?i[10]+"ms":"0ms"),N(r,"border-top-left-radius",i[1].headerPictureUrl?"0px":"6px"),N(r,"border-top-right-radius",i[1].headerPictureUrl?"0px":"6px"),b(e,"class",w=dn(`marketing ${i[5]}`)+" svelte-rehsoc"),we(e,"unfolded",i[6]),we(e,"folded",i[14])},m(O,y){Y(O,e,y),le(t,e,null),H(e,n),H(e,o),H(e,s),H(e,r),I&&I.m(r,null),H(r,a),H(r,l),H(l,c),H(c,h),H(h,d),H(d,f),H(l,m),j&&j.m(l,null),H(l,g),D&&D.m(l,null),H(l,v),T&&T.m(l,null),H(l,A),M&&M.m(l,null),P=!0},p(O,[y]){const C={};y&64&&(C.visible=O[6]),t.$set(C),y&6208&&N(o,"transition-delay",O[6]?O[12]+"ms":O[11]+"ms"),O[1].headerPictureUrl?I?I.p(O,y):(I=am(O),I.c(),I.m(r,a)):I&&(I.d(1),I=null),(!P||y&2)&&u!==(u=O[1].title+"")&&Ne(f,u),O[9]?j?j.p(O,y):(j=lm(O),j.c(),j.m(l,g)):j&&(j.d(1),j=null),O[1].description?D?D.p(O,y):(D=dm(O),D.c(),D.m(l,v)):D&&(D.d(1),D=null),O[2]||O[1].highlightText?T?T.p(O,y):(T=um(O),T.c(),T.m(l,A)):T&&(T.d(1),T=null),O[8]?M?M.p(O,y):(M=gm(O),M.c(),M.m(l,null)):M&&(M.d(1),M=null),y&2&&N(l,"padding-top",O[1].headerPictureUrl?"10px":"20px"),y&1088&&N(r,"transition-delay",O[6]?O[10]+"ms":"0ms"),y&2&&N(r,"border-top-left-radius",O[1].headerPictureUrl?"0px":"6px"),y&2&&N(r,"border-top-right-radius",O[1].headerPictureUrl?"0px":"6px"),(!P||y&32&&w!==(w=dn(`marketing ${O[5]}`)+" svelte-rehsoc"))&&b(e,"class",w),(!P||y&96)&&we(e,"unfolded",O[6]),(!P||y&16416)&&we(e,"folded",O[14])},i(O){P||(B(t.$$.fragment,O),P=!0)},o(O){G(t.$$.fragment,O),P=!1},d(O){O&&Q(e),ce(t),I&&I.d(),j&&j.d(),D&&D.d(),T&&T.d(),M&&M.d()}}}const zd=40;function XE(i,e,t){let n,o,s,r,a,l,c,h,d,u,f,m,g,v,A,{tag:w}=e,P,I=(()=>{var O;const y=(O=w.data.limitWidth)!=null?O:!0;if(typeof y=="number")return y;if(y===!0)return 280})(),j=0,D=!1;function T(O){Math.abs(P-O)>5&&(t(17,P=O),setTimeout(()=>{t(19,D=!1)},100))}const M=O=>T(O.detail);return i.$$set=O=>{"tag"in O&&t(0,w=O.tag)},i.$$.update=()=>{var O,y,C,x;i.$$.dirty&1&&t(6,n=(y=(O=w.state)==null?void 0:O.unfolded)!=null?y:!1),i.$$.dirty&64&&t(14,o=!n),i.$$.dirty&1&&t(1,s=w.data),i.$$.dirty&2&&t(2,r=Be((C=s.price)==null?void 0:C.value)&&((x=s.price)==null?void 0:x.value)!==""),i.$$.dirty&1&&t(5,a=w.data.theme||"light"),i.$$.dirty&32&&t(13,l=a==="light"),i.$$.dirty&917504&&(!D||I&&I>0)&&(t(18,j=Math.max(1,Math.floor(((I||172)-20)/zd))),P!==void 0&&P>40&&t(18,j=Math.max(1,j-1)),t(19,D=!0)),i.$$.dirty&262146&&t(4,c=(s.brandTags||[]).filter(Boolean).slice(0,j)),i.$$.dirty&262160&&t(20,h=Math.max(0,j-c.length)),i.$$.dirty&1048578&&t(3,d=(s.tags||[]).filter(Boolean).slice(0,h)),i.$$.dirty&24&&t(9,g=c.length>0||d.length>0),i.$$.dirty&6&&(r||s.highlightText),i.$$.dirty&1&&t(8,v=w.config.popoverConfig.toolbar.showMore),i.$$.dirty&1&&t(7,A=(()=>Be(w.config.popoverConfig.viewMoreText)&&w.config.popoverConfig.viewMoreText.trim()!==""?w.config.popoverConfig.viewMoreText:"查看更多")())},t(12,u=400),t(11,f=180+500-500-40),t(10,m=400+180),[w,s,r,d,c,a,n,A,v,g,m,f,u,l,o,I,T,P,j,D,h,M]}class YE extends ye{constructor(e){super(),Ae(this,e,XE,UE,ve,{tag:0},WE)}}class qE{static checkBrowserSupport(){var e,t,n,o;const s=navigator.userAgent,r=document.createElement("audio");let a="Unknown",l="Unknown";s.includes("Edge/")?(a="Microsoft Edge",l=((e=s.match(/Edge\/(\d+)/))==null?void 0:e[1])||"Unknown"):s.includes("Chrome/")?(a="Chrome",l=((t=s.match(/Chrome\/(\d+)/))==null?void 0:t[1])||"Unknown"):s.includes("Firefox/")?(a="Firefox",l=((n=s.match(/Firefox\/(\d+)/))==null?void 0:n[1])||"Unknown"):s.includes("Safari/")&&!s.includes("Chrome")&&(a="Safari",l=((o=s.match(/Version\/(\d+)/))==null?void 0:o[1])||"Unknown");const c=[{name:"MP3",mime:"audio/mpeg"},{name:"OGG",mime:"audio/ogg"},{name:"WAV",mime:"audio/wav"},{name:"M4A",mime:"audio/mp4"},{name:"AAC",mime:"audio/aac"},{name:"WEBM",mime:"audio/webm"}],h=[],d=[];return c.forEach(u=>{const f=r.canPlayType(u.mime);f==="probably"?h.push(`${u.name} (完全支持)`):f==="maybe"?(h.push(`${u.name} (可能支持)`),d.push(`${u.name} 格式支持不确定，建议使用其他格式`)):d.push(`${u.name} 格式不被支持`)}),{browser:`${a} ${l}`,version:l,supportedFormats:h,warnings:d}}static testAudioUrl(e){return ee(this,null,function*(){try{const t=yield fetch(e,{method:"HEAD"});return{accessible:t.ok,status:t.status,contentType:t.headers.get("content-type")||void 0,contentLength:parseInt(t.headers.get("content-length")||"0")||void 0}}catch(t){return{accessible:!1,error:t instanceof Error?t.message:String(t)}}})}static testAudioElement(e){return ee(this,null,function*(){return new Promise(t=>{const n=new Audio;let o=!1;const s=()=>{o||(o=!0,n.removeEventListener("loadedmetadata",r),n.removeEventListener("error",l),n.removeEventListener("canplay",a))},r=()=>{s(),t({success:!0,duration:n.duration,networkState:n.networkState,readyState:n.readyState})},a=()=>{s(),t({success:!0,canPlay:"canplay",duration:n.duration,networkState:n.networkState,readyState:n.readyState})},l=()=>{s(),t({success:!1,error:n.error?`${n.error.code}: ${n.error.message}`:"Unknown audio error",networkState:n.networkState,readyState:n.readyState})};n.addEventListener("loadedmetadata",r),n.addEventListener("canplay",a),n.addEventListener("error",l),setTimeout(()=>{o||(s(),t({success:!1,error:"音频加载超时",networkState:n.networkState,readyState:n.readyState}))},1e4),n.src=e,n.load()})})}static diagnoseAudio(e){return ee(this,null,function*(){var t;console.group("🎵 音频诊断报告"),console.group("1. 浏览器支持检查");const n=this.checkBrowserSupport();console.log("浏览器:",n.browser),console.log("支持的格式:",n.supportedFormats),n.warnings.length>0&&console.warn("警告:",n.warnings),console.groupEnd(),console.group("2. 音频文件URL检查"),console.log("音频URL:",e);try{new URL(e,window.location.href),console.log("✅ URL格式正确")}catch{console.error("❌ URL格式错误"),console.groupEnd(),console.groupEnd();return}const o=(t=e.split(".").pop())==null?void 0:t.toLowerCase();o&&(console.log("文件扩展名:",o.toUpperCase()),["mp3","ogg","wav","m4a","aac","webm"].includes(o)?console.log("✅ 文件格式常见"):console.warn("⚠️ 不常见的文件格式，可能存在兼容性问题")),console.groupEnd(),console.group("3. 网络可访问性测试");const s=yield this.testAudioUrl(e);s.accessible?(console.log("✅ 文件可访问"),console.log("HTTP状态:",s.status),s.contentType&&console.log("内容类型:",s.contentType),s.contentLength&&console.log("文件大小:",(s.contentLength/1024).toFixed(2),"KB")):(console.error("❌ 文件无法访问"),s.status&&console.error("HTTP状态:",s.status),s.error&&console.error("错误:",s.error)),console.groupEnd(),console.group("4. 音频元素测试");const r=yield this.testAudioElement(e);r.success?(console.log("✅ 音频元素创建成功"),r.duration&&console.log("音频时长:",r.duration.toFixed(2),"秒"),console.log("网络状态:",this.getNetworkStateDescription(r.networkState)),console.log("就绪状态:",this.getReadyStateDescription(r.readyState))):(console.error("❌ 音频元素创建失败"),console.error("错误:",r.error),console.log("网络状态:",this.getNetworkStateDescription(r.networkState)),console.log("就绪状态:",this.getReadyStateDescription(r.readyState))),console.groupEnd(),console.groupEnd()})}static getNetworkStateDescription(e){switch(e){case 0:return"NETWORK_EMPTY - 音频元素尚未初始化";case 1:return"NETWORK_IDLE - 音频元素处于活动状态但未使用网络";case 2:return"NETWORK_LOADING - 浏览器正在下载数据";case 3:return"NETWORK_NO_SOURCE - 未找到合适的音频源";default:return`未知状态 (${e})`}}static getReadyStateDescription(e){switch(e){case 0:return"HAVE_NOTHING - 没有音频数据";case 1:return"HAVE_METADATA - 已获取元数据";case 2:return"HAVE_CURRENT_DATA - 有当前播放位置的数据";case 3:return"HAVE_FUTURE_DATA - 有足够的数据开始播放";case 4:return"HAVE_ENOUGH_DATA - 有足够的数据流畅播放";default:return`未知状态 (${e})`}}}class ZE extends Audio{constructor(e){super(),p(this,"sharedAudioSrc"),p(this,"sharedAudioPaused",!0),p(this,"sharedAudioCurrentTime",0),p(this,"tryplaying",!1),p(this,"audioInstance"),p(this,"eventListenerDisposer"),this.sharedAudioSrc=e,e&&this.validateAudioSource(e)}get paused(){var e;return(e=this.sharedAudioPaused)!=null?e:!0}get currentTime(){return this.sharedAudioCurrentTime}get duration(){var e;return((e=this.audioInstance)==null?void 0:e.duration)||0}play(){return ee(this,null,function*(){var e,t,n;if(this.tryplaying)return;this.tryplaying=!0,(!this.audioInstance||((e=this.audioInstance)==null?void 0:e.realSrc)!==this.sharedAudioSrc)&&(this.audioInstance=eC(this.sharedAudioSrc,{namespace:xd.PlayAudio})),(t=this.eventListenerDisposer)==null||t.call(this),this.eventListenerDisposer=this.addEventListeners(),this.audioInstance.currentTime=(n=this.currentTime)!=null?n:0;const o=this.audioInstance.currentTime!==this.currentTime;this.audioInstance.play().then(()=>{var s;this.audioInstance.muted=!1,o&&(this.audioInstance.currentTime=(s=this.currentTime)!=null?s:0),this.sharedAudioPaused=!1}).catch(s=>{var r;this.handlePlayError(s),this.endedHandler(),(r=this.onerror)==null||r.call(this,s)}).finally(()=>{this.tryplaying=!1})})}pause(e){var t;if(this.audioInstance&&!this.paused){if(this.sharedAudioPaused=!0,(t=this.eventListenerDisposer)==null||t.call(this),this.audioInstance.ended){this.endedHandler();return}this.audioInstance.paused||this.audioInstance.pause(),this.onpause(e??new Event("pause")),this.clear()}}dispose(){var e;(e=this.eventListenerDisposer)==null||e.call(this),this.clear(),this.audioInstance=void 0}clear(){var e;(e=this.audioInstance)==null||e.clear()}handlePlayError(e){var t,n,o,s;const r=navigator.userAgent,a=this.sharedAudioSrc;if(console.group("🎵 音频播放错误详情"),console.error("错误对象:",e),console.error("错误名称:",e.name),console.error("错误信息:",e.message),console.error("音频文件路径:",a),console.error("浏览器信息:",r),console.error("音频实例状态:",{exists:!!this.audioInstance,readyState:(t=this.audioInstance)==null?void 0:t.readyState,networkState:(n=this.audioInstance)==null?void 0:n.networkState,error:(o=this.audioInstance)==null?void 0:o.error}),e.name==="NotSupportedError"){if(e.message.includes("no supported source was found")&&(console.error("❌ 错误原因: 无法找到支持的音频源"),console.error("💡 可能的解决方案:"),console.error("   1. 检查音频文件路径是否正确"),console.error("   2. 检查音频文件是否存在"),console.error("   3. 检查音频文件格式是否被浏览器支持 (推荐: MP3, OGG, WAV)"),console.error("   4. 检查CORS设置，确保可以跨域访问音频文件"),a)){const l=(s=a.split(".").pop())==null?void 0:s.toLowerCase(),c=["mp3","ogg","wav","m4a","aac"];l&&!c.includes(l)&&(console.error(`   ⚠️  检测到不常见的音频格式: .${l}`),console.error(`   📝 建议使用: ${c.join(", ")}`))}}else e.name==="AbortError"?console.error("❌ 错误原因: 音频播放被中断"):e.name==="NotAllowedError"?console.error("❌ 错误原因: 浏览器阻止了音频播放 (通常需要用户交互)"):e.message==="The operation is not supported."?console.error("❌ 错误原因: 音频文件可能损坏或格式有问题"):console.error("❌ 未知的音频播放错误");console.groupEnd(),e.name==="NotSupportedError"&&a&&(console.error("💡 建议运行完整音频诊断来查找问题根源："),console.error(`AudioDiagnostics.diagnoseAudio("${a}")`))}validateAudioSource(e){var t;try{new URL(e,window.location.href)}catch{console.warn("🎵 音频URL格式可能有问题:",e),qE.diagnoseAudio(e);return}const n=(t=e.split(".").pop())==null?void 0:t.toLowerCase(),o=["mp3","ogg","wav","m4a","aac","webm"];n&&!o.includes(n)&&(console.warn("🎵 音频格式可能不被广泛支持:",n),console.warn("💡 建议使用常见格式:",o.join(", ")),console.warn('💡 运行音频诊断：AudioDiagnostics.diagnoseAudio("'+e+'")')),this.checkBrowserSupport(n)}checkBrowserSupport(e){if(!e)return;const t=document.createElement("audio"),n={mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",m4a:"audio/mp4",aac:"audio/aac",webm:"audio/webm"}[e];if(n){const o=t.canPlayType(n);o===""?(console.warn(`🎵 当前浏览器可能不支持 ${e.toUpperCase()} 格式`),console.warn("💡 建议提供多种格式的音频文件作为备选")):console.info(o==="maybe"?`🎵 当前浏览器可能支持 ${e.toUpperCase()} 格式 (不确定)`:`🎵 当前浏览器支持 ${e.toUpperCase()} 格式`)}}endedHandler(e){var t,n;(t=this.onended)==null||t.call(this,e??new Event("ended")),(n=this.eventListenerDisposer)==null||n.call(this),this.sharedAudioPaused=!0,this.sharedAudioCurrentTime=0,this.clear()}addEventListeners(){const e=this.audioInstance;if(!e)return;const t=d=>{var u;this.sharedAudioCurrentTime=e.currentTime,(u=this.ontimeupdate)==null||u.call(this,d)},n=d=>{var u;e.isBlankAudio||(this.sharedAudioPaused=!1,(u=this.onplay)==null||u.call(this,d))},o=d=>{this.pause(d)},s=d=>{this.endedHandler(d)},r=d=>{var u;this.sharedAudioPaused=!0,(u=this.onerror)==null||u.call(this,d)},a=d=>{var u;return(u=this.oncanplay)==null?void 0:u.call(this,d)},l=d=>{var u;return(u=this.oncanplaythrough)==null?void 0:u.call(this,d)},c=d=>{var u;return(u=this.onloadeddata)==null?void 0:u.call(this,d)},h=d=>{var u;return(u=this.onloadedmetadata)==null?void 0:u.call(this,d)};return e.addEventListener("timeupdate",t),e.addEventListener("play",n),e.addEventListener("pause",o),e.addEventListener("ended",s),e.addEventListener("error",r),e.addEventListener("canplay",a),e.addEventListener("canplaythrough",l),e.addEventListener("loadeddata",c),e.addEventListener("loadedmetadata",h),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("play",n),e.removeEventListener("pause",o),e.removeEventListener("ended",s),e.removeEventListener("error",r),e.removeEventListener("canplay",a),e.removeEventListener("canplaythrough",l),e.removeEventListener("loadeddata",c),e.removeEventListener("loadedmetadata",h)}}}function JE(i){Ee(i,"svelte-13e7hxv",".audio.svelte-13e7hxv{pointer-events:auto;cursor:pointer;width:100%;height:100%}")}function KE(i){let e,t,n,o;const s=i[8].default,r=uo(s,i,i[7],null);return{c(){e=U("div"),r&&r.c(),b(e,"class","audio svelte-13e7hxv"),b(e,"style",i[0])},m(a,l){Y(a,e,l),r&&r.m(e,null),t=!0,n||(o=Se(e,"click",G0(i[1])),n=!0)},p(a,[l]){r&&r.p&&(!t||l&128)&&fo(r,s,a,a[7],t?po(s,a[7],l,null):mo(a[7]),null),(!t||l&1)&&b(e,"style",a[0])},i(a){t||(B(r,a),t=!0)},o(a){G(r,a),t=!1},d(a){a&&Q(e),r&&r.d(a),n=!1,o()}}}function _E(i,e,t){let{$$slots:n={},$$scope:o}=e,{url:s}=e,{enable:r=!0}=e,{style:a=""}=e,{hooksInfo:l}=e;const c=Bn(),h=pn("hooks"),d=pn("mediaStore");let u,f=!0;function m(){t(5,u.onplay=v=>{h.emit("playStateChange",W({event:v,state:"playing",mediaInstance:u},l)),c("play"),t(6,f=!1)},u),t(5,u.onpause=v=>{h.emit("playStateChange",W({event:v,state:"paused",mediaInstance:u},l)),c("pause"),t(6,f=!0)},u),t(5,u.onended=v=>{h.emit("playStateChange",W({event:v,state:"paused",mediaInstance:u},l)),c("pause"),t(6,f=!0)},u),t(5,u.onloadedmetadata=v=>{typeof u.duration=="number"&&!Number.isNaN(u.duration)&&c("duration",u.duration)},u),t(5,u.onerror=v=>{c("pause"),t(6,f=!0)},u),t(5,u.ontimeupdate=v=>{c("timeupdate",u.currentTime)},u)}d.subscribe(({currentMediaElement:v})=>{v!==u&&(f||u==null||u.pause())});function g(v){u&&(h.emit("click",W({event:v,target:"AudioTagPlayIcon",audioInstance:u},l)),d.set({currentMediaElement:u}),h.emit("playStateChange",W({event:v,state:u.paused?"playing":"paused",mediaInstance:u},l)),u.paused?u.play():u.pause())}return i.$$set=v=>{"url"in v&&t(2,s=v.url),"enable"in v&&t(3,r=v.enable),"style"in v&&t(0,a=v.style),"hooksInfo"in v&&t(4,l=v.hooksInfo),"$$scope"in v&&t(7,o=v.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&(s||c("duration",0)),i.$$.dirty&36&&(u==null||u.dispose(),t(5,u=new ZE(s)),c("audioRef",u),setTimeout(()=>c("audioRef",u),200),m()),i.$$.dirty&40&&(r||u==null||u.pause()),i.$$.dirty&72&&c(r&&!f?"play":"pause")},[a,g,s,r,l,u,f,o,n]}let jd=class extends ye{constructor(i){super(),Ae(this,i,_E,KE,ve,{url:2,enable:3,style:0,hooksInfo:4},JE)}};function $E(i){Ee(i,"svelte-6pnkgc",".audio-icon__wrapper.svelte-6pnkgc.svelte-6pnkgc{display:inline-block}.audio-icon.svelte-6pnkgc.svelte-6pnkgc{display:flex;justify-content:center;align-items:center;position:relative;width:100%;height:100%;border-radius:50%}.audio-icon.svelte-6pnkgc .sound-wave__container.svelte-6pnkgc{position:absolute;pointer-events:none;top:0;left:0;width:100%;height:100%}@keyframes svelte-6pnkgc-sound_wave_1_animation{0%,10%{opacity:0}25%,100%{opacity:1}}@keyframes svelte-6pnkgc-sound_wave_2_animation{0%,35%{opacity:0}50%,100%{opacity:1}}@keyframes svelte-6pnkgc-sound_wave_3_animation{0%,60%{opacity:0}75%,100%{opacity:1}}")}function vm(i){let e,t;return e=new Zi({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function e7(i){let e,t,n,o,s,r,a,l,c,h,d,u,f,m,g=i[0]&&vm();return{c(){e=U("div"),g&&g.c(),t=re(),n=U("div"),o=U("div"),s=ge("svg"),r=ge("defs"),a=ge("linearGradient"),l=ge("stop"),c=ge("stop"),h=ge("linearGradient"),d=ge("stop"),u=ge("stop"),f=ge("path"),b(l,"stop-color","rgba(255, 255, 255, 1)"),b(l,"stop-opacity",".5"),b(l,"offset","0%"),b(c,"stop-color","rgba(255, 255, 255, 1)"),b(c,"offset","100%"),b(a,"x1","8.653%"),b(a,"y1","15.676%"),b(a,"x2","85.159%"),b(a,"y2","79.274%"),b(a,"id","dnalogel-audio-icon-linear-gradient-1"),b(d,"stop-color","rgba(255, 255, 255, 1)"),b(d,"offset","0%"),b(u,"stop-color","rgba(255, 255, 255, 1)"),b(u,"stop-opacity","0"),b(u,"offset","100%"),b(h,"x1","0%"),b(h,"y1","0%"),b(h,"x2","64.422%"),b(h,"y2","62.326%"),b(h,"id","dnalogel-audio-icon-linear-gradient-2"),b(f,"d",i[3]),b(f,"fill","url(#dnalogel-audio-icon-linear-gradient-1)"),b(f,"fill-rule","nonzero"),b(f,"stroke","url(#dnalogel-audio-icon-linear-gradient-2)"),b(f,"stroke-width",".5"),b(s,"viewBox","0 0 24 24"),b(s,"version","1.1"),b(s,"aria-label","audio-icon"),b(o,"class","sound-wave__container svelte-6pnkgc"),b(n,"class","audio-icon svelte-6pnkgc"),b(e,"class","audio-icon__wrapper svelte-6pnkgc"),b(e,"style",i[1]),N(e,"width",i[4]),N(e,"height",i[4])},m(v,A){Y(v,e,A),g&&g.m(e,null),H(e,t),H(e,n),H(n,o),H(o,s),H(s,r),H(r,a),H(a,l),H(a,c),H(r,h),H(h,d),H(h,u),H(s,f),i[10](o),m=!0},p(v,[A]){v[0]?g?A&1&&B(g,1):(g=vm(),g.c(),B(g,1),g.m(e,t)):g&&(xe(),G(g,1,1,()=>{g=null}),Ce()),(!m||A&8)&&b(f,"d",v[3]),(!m||A&2)&&b(e,"style",v[1]);const w=A&2;(w||A&18)&&N(e,"width",v[4]),(w||A&18)&&N(e,"height",v[4])},i(v){m||(B(g),m=!0)},o(v){G(g),m=!1},d(v){v&&Q(e),g&&g.d(),i[10](null)}}}function t7(i,e,t){let n,o,{playing:s}=e,{shadow:r=!1}=e,{style:a=null}=e,{width:l="100%"}=e,{animated:c=!0}=e,h,d=0,u=null;const f=["M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm1.534 3.282-1.29 1.289.186.183a5.86 5.86 0 0 1 1.663 4.095c0 1.555-.605 2.965-1.786 4.236l1.118 1.12.2-.19a7.46 7.46 0 0 0 2.225-5.322 7.46 7.46 0 0 0-2.316-5.411Zm-2.046 2.047-1.245 1.243.14.133a3.04 3.04 0 0 1 .882 2.144c0 .795-.308 1.516-.955 2.24l1.23 1.231.168-.168a4.793 4.793 0 0 0 1.314-3.303c0-1.39-.59-2.643-1.534-3.52Zm-1.752 1.78-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z","M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm-2.264 7.109-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z","M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm-.512 5.329-1.245 1.243.14.133a3.04 3.04 0 0 1 .882 2.144c0 .795-.308 1.516-.955 2.24l1.23 1.231.168-.168a4.793 4.793 0 0 0 1.314-3.303c0-1.39-.59-2.643-1.534-3.52Zm-1.752 1.78-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z"];Hi(()=>{u&&(clearInterval(u),t(9,u=null))});function m(g){_e[g?"unshift":"push"](()=>{h=g,t(2,h)})}return i.$$set=g=>{"playing"in g&&t(5,s=g.playing),"shadow"in g&&t(0,r=g.shadow),"style"in g&&t(1,a=g.style),"width"in g&&t(6,l=g.width),"animated"in g&&t(7,c=g.animated)},i.$$.update=()=>{var g;i.$$.dirty&64&&t(4,n=typeof l=="number"?xi(l):l),i.$$.dirty&800&&(s?u||t(9,u=setInterval(()=>{t(8,d=(d+1)%f.length)},500)):(u&&(clearInterval(u),t(9,u=null)),t(8,d=0))),i.$$.dirty&384&&t(3,o=(g=f[c?d:0])!=null?g:f[0])},[r,a,h,o,n,s,l,c,d,u,m]}class Ql extends ye{constructor(e){super(),Ae(this,e,t7,e7,ve,{playing:5,shadow:0,style:1,width:6,animated:7},$E)}}function i7(i){Ee(i,"svelte-1s6gk4a",".audio-tag.svelte-1s6gk4a{position:absolute;left:0;top:0;width:0;height:0;overflow:visible}.audio-icon__wrapper.svelte-1s6gk4a{position:relative;vertical-align:top;width:100%;height:100%}.content.svelte-1s6gk4a{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0.125rem;overflow:hidden;box-sizing:border-box;font-size:0;white-space:nowrap;font-weight:600}.wrapper.svelte-1s6gk4a{position:relative;width:100%;height:100%}.audio-icon.svelte-1s6gk4a{pointer-events:none;vertical-align:top;display:inline-block;width:1rem;height:1rem;margin-right:0.25rem;margin-top:0.0625rem}.audio.svelte-1s6gk4a{position:relative;width:100%;height:100%}")}function Am(i){var e,t;let n,o,s,r,a,l,c,h,d,u,f,m,g,v;o=new Zi({props:{visible:i[6],left:i[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}});let A=i[6]&&ym(i);return d=new e1({props:{visible:i[6],textUnfolded:i[1],content:i[5]}}),f=new Pd({props:{unfolded:i[6],length:i[3],outDelay:i[4]+20*Math.min((t=(e=i[5])==null?void 0:e.length)!=null?t:10,15),useLinearColor:!0}}),{c(){n=U("div"),de(o.$$.fragment),s=re(),r=U("div"),a=U("div"),l=U("div"),A&&A.c(),c=re(),h=U("div"),de(d.$$.fragment),u=re(),de(f.$$.fragment),b(l,"class","audio-icon svelte-1s6gk4a"),N(h,"display","inline-block"),b(a,"class","wrapper svelte-1s6gk4a"),b(r,"class","content svelte-1s6gk4a"),b(n,"class","audio-tag svelte-1s6gk4a"),we(n,"unfolded",i[6])},m(w,P){Y(w,n,P),le(o,n,null),H(n,s),H(n,r),H(r,a),H(a,l),A&&A.m(l,null),H(a,c),H(a,h),le(d,h,null),H(n,u),le(f,n,null),m=!0,g||(v=[Se(h,"click",i[7]),si(Ni.call(null,h)),Se(h,"clientWidth",i[12])],g=!0)},p(w,P){var I,j;const D={};P&64&&(D.visible=w[6]),P&8&&(D.left=w[3]/2+"px"),o.$set(D),w[6]?A?(A.p(w,P),P&64&&B(A,1)):(A=ym(w),A.c(),B(A,1),A.m(l,null)):A&&(xe(),G(A,1,1,()=>{A=null}),Ce());const T={};P&64&&(T.visible=w[6]),P&2&&(T.textUnfolded=w[1]),P&32&&(T.content=w[5]),d.$set(T);const M={};P&64&&(M.unfolded=w[6]),P&8&&(M.length=w[3]),P&48&&(M.outDelay=w[4]+20*Math.min((j=(I=w[5])==null?void 0:I.length)!=null?j:10,15)),f.$set(M),(!m||P&64)&&we(n,"unfolded",w[6])},i(w){m||(B(o.$$.fragment,w),B(A),B(d.$$.fragment,w),B(f.$$.fragment,w),m=!0)},o(w){G(o.$$.fragment,w),G(A),G(d.$$.fragment,w),G(f.$$.fragment,w),m=!1},d(w){w&&Q(n),ce(o),A&&A.d(),ce(d),ce(f),g=!1,lt(v)}}}function ym(i){let e,t,n,o,s,r,a;return t=new Zi({props:{center:!0,blurRadius:15,spreadRadius:6}}),o=new jd({props:{enable:i[6],url:i[0].data.audioUrl,hooksInfo:{tag:i[0]},$$slots:{default:[n7]},$$scope:{ctx:i}}}),o.$on("play",i[8]),o.$on("pause",i[9]),o.$on("error",i[10]),o.$on("audioRef",i[11]),{c(){e=U("div"),de(t.$$.fragment),n=re(),de(o.$$.fragment),b(e,"class","audio svelte-1s6gk4a")},m(l,c){Y(l,e,c),le(t,e,null),H(e,n),le(o,e,null),a=!0},p(l,c){i=l;const h={};c&64&&(h.enable=i[6]),c&1&&(h.url=i[0].data.audioUrl),c&1&&(h.hooksInfo={tag:i[0]}),c&8196&&(h.$$scope={dirty:c,ctx:i}),o.$set(h)},i(l){a||(B(t.$$.fragment,l),B(o.$$.fragment,l),l&&kt(()=>{a&&(r&&r.end(1),s=bo(e,Ft,{duration:1e3,delay:0,easing:Gs}),s.start())}),a=!0)},o(l){var c,h;G(t.$$.fragment,l),G(o.$$.fragment,l),s&&s.invalidate(),l&&(r=Ks(e,Ft,{duration:1e3,delay:20*Math.min((h=(c=i[5])==null?void 0:c.length)!=null?h:10,15),easing:Gs})),a=!1},d(l){l&&Q(e),ce(t),ce(o),l&&r&&r.end()}}}function n7(i){let e,t,n;return t=new Ql({props:{playing:i[2]}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","audio-icon__wrapper svelte-1s6gk4a")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},p(o,s){const r={};s&4&&(r.playing=o[2]),t.$set(r)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function o7(i){let e,t,n=i[0].state&&Am(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[0].state?n?(n.p(o,s),s&1&&B(n,1)):(n=Am(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function s7(i,e,t){let n,o,s,{tag:r}=e,a=!1,l=!1,c;function h(){t(1,a=!a)}const d=()=>{t(2,l=!0)},u=()=>{t(2,l=!1)},f=()=>{t(2,l=!1)};function m(v){On.call(this,i,v)}const g=v=>{t(3,c=v.detail)};return i.$$set=v=>{"tag"in v&&t(0,r=v.tag)},i.$$.update=()=>{var v,A,w;i.$$.dirty&1&&t(6,n=!!((v=r.state)!=null&&v.unfolded)),i.$$.dirty&1&&t(5,o=(w=(A=r.data.title)!=null?A:r.data.text)!=null?w:""),i.$$.dirty&2&&t(4,s=a?450:0)},[r,a,l,c,s,o,n,h,d,u,f,m,g]}class r7 extends ye{constructor(e){super(),Ae(this,e,s7,o7,ve,{tag:0},i7)}}function a7(i){Ee(i,"svelte-nclraj",".audio-tag__wrapper.svelte-nclraj{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.audio-tag.svelte-nclraj{position:relative;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;padding:0.25rem;padding-right:0.625rem;border-radius:624999.9375rem;border:0.0625rem solid rgba(255, 255, 255, 0.6);background:linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));box-shadow:inset 0 0 0.25rem 0 rgba(255, 255, 255, 0.3)}.audio__inner.svelte-nclraj{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.text.svelte-nclraj{font-weight:bold;font-size:0.75rem;margin-left:0.25rem}.audio-icon__wrapper.svelte-nclraj{position:relative;vertical-align:top;pointer-events:none;width:1.5rem;height:1.5rem}")}function bm(i){let e,t,n,o;return n=new jd({props:{style:"width: max-content; height: max-content;",enable:i[0].state.visible,url:i[0].data.audioUrl,hooksInfo:{tag:i[0]},$$slots:{default:[c7]},$$scope:{ctx:i}}}),n.$on("play",i[5]),n.$on("pause",i[6]),n.$on("error",i[7]),n.$on("timeupdate",i[8]),n.$on("duration",i[9]),n.$on("audioRef",i[10]),{c(){e=U("div"),t=U("div"),de(n.$$.fragment),b(t,"class","audio-tag svelte-nclraj"),b(e,"class","audio-tag__wrapper svelte-nclraj")},m(s,r){Y(s,e,r),H(e,t),le(n,t,null),o=!0},p(s,r){const a={};r&1&&(a.enable=s[0].state.visible),r&1&&(a.url=s[0].data.audioUrl),r&1&&(a.hooksInfo={tag:s[0]}),r&2072&&(a.$$scope={dirty:r,ctx:s}),n.$set(a)},i(s){o||(B(n.$$.fragment,s),o=!0)},o(s){G(n.$$.fragment,s),o=!1},d(s){s&&Q(e),ce(n)}}}function l7(i){let e;return{c(){e=Te(i[4])},m(t,n){Y(t,e,n)},p(t,n){n&16&&Ne(e,t[4])},d(t){t&&Q(e)}}}function c7(i){let e,t,n,o,s,r,a;return n=new Ql({props:{playing:i[3]}}),r=new Ed({props:{maxWidth:72,maxLine:1,$$slots:{default:[l7]},$$scope:{ctx:i}}}),{c(){e=U("div"),t=U("div"),de(n.$$.fragment),o=re(),s=U("div"),de(r.$$.fragment),b(t,"class","audio-icon__wrapper svelte-nclraj"),b(s,"class","text svelte-nclraj"),b(e,"class","audio__inner svelte-nclraj")},m(l,c){Y(l,e,c),H(e,t),le(n,t,null),H(e,o),H(e,s),le(r,s,null),a=!0},p(l,c){const h={};c&8&&(h.playing=l[3]),n.$set(h);const d={};c&2064&&(d.$$scope={dirty:c,ctx:l}),r.$set(d)},i(l){a||(B(n.$$.fragment,l),B(r.$$.fragment,l),a=!0)},o(l){G(n.$$.fragment,l),G(r.$$.fragment,l),a=!1},d(l){l&&Q(e),ce(n),ce(r)}}}function h7(i){let e,t,n=i[0].state&&bm(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[0].state?n?(n.p(o,s),s&1&&B(n,1)):(n=bm(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function d7(i,e,t){let n,{tag:o}=e,s=0,r=0,a=!1;const l=()=>{t(3,a=!0)},c=()=>{t(3,a=!1)},h=()=>{t(3,a=!1)},d=m=>{t(1,s=m.detail)},u=m=>{t(2,r=m.detail)};function f(m){On.call(this,i,m)}return i.$$set=m=>{"tag"in m&&t(0,o=m.tag)},i.$$.update=()=>{var m,g;i.$$.dirty&1&&t(4,n=(g=(m=o.data.title)!=null?m:o.data.text)!=null?g:"")},[o,s,r,a,n,l,c,h,d,u,f]}class u7 extends ye{constructor(e){super(),Ae(this,e,d7,h7,ve,{tag:0},a7)}}function p7(i){let e,t;return e=new u7({props:{tag:i[0]}}),e.$on("audioRef",i[2]),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.tag=n[0]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function f7(i){let e,t;return e=new r7({props:{tag:i[0]}}),e.$on("audioRef",i[2]),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.tag=n[0]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function m7(i){let e,t,n,o;const s=[f7,p7],r=[];function a(l,c){return l[1]==="line"?0:l[1]==="plane"?1:-1}return~(e=a(i))&&(t=r[e]=s[e](i)),{c(){t&&t.c(),n=Oe()},m(l,c){~e&&r[e].m(l,c),Y(l,n,c),o=!0},p(l,[c]){let h=e;e=a(l),e===h?~e&&r[e].p(l,c):(t&&(xe(),G(r[h],1,1,()=>{r[h]=null}),Ce()),~e?(t=r[e],t?t.p(l,c):(t=r[e]=s[e](l),t.c()),B(t,1),t.m(n.parentNode,n)):t=null)},i(l){o||(B(t),o=!0)},o(l){G(t),o=!1},d(l){~e&&r[e].d(l),l&&Q(n)}}}function g7(i,e,t){let n,{tag:o}=e,s;function r(a){s=a.detail}return o.play=()=>s.play(),o.pause=()=>s.pause(),i.$$set=a=>{"tag"in a&&t(0,o=a.tag)},i.$$.update=()=>{var a;i.$$.dirty&1&&t(1,n=(a=o.data.appearance)!=null?a:"line")},[o,n,r]}class v7 extends ye{constructor(e){super(),Ae(this,e,g7,m7,ve,{tag:0})}}function A7(i){Ee(i,"svelte-10cw0el",".media-wrapper.svelte-10cw0el{position:absolute;width:100%;height:100%}")}function wm(i){var e;let t,n,o;return n=new p1({props:{mediaItemConfig:{canPlay:!0,playButtonSizeIfNeed:"large",playButtonIfNeed:(e=i[4])!=null?e:"withText",disableVideoIfHavePoster:!1,objectFit:i[2]},unfolded:i[6],mediaData:i[5],enableCarousel:i[1],autoplayConfig:i[3],tag:i[0],inDelay:500,duration:500}}),{c(){t=U("div"),de(n.$$.fragment),b(t,"class","media-wrapper svelte-10cw0el")},m(s,r){Y(s,t,r),le(n,t,null),o=!0},p(s,r){var a;const l={};r&20&&(l.mediaItemConfig={canPlay:!0,playButtonSizeIfNeed:"large",playButtonIfNeed:(a=s[4])!=null?a:"withText",disableVideoIfHavePoster:!1,objectFit:s[2]}),r&64&&(l.unfolded=s[6]),r&32&&(l.mediaData=s[5]),r&2&&(l.enableCarousel=s[1]),r&8&&(l.autoplayConfig=s[3]),r&1&&(l.tag=s[0]),n.$set(l)},i(s){o||(B(n.$$.fragment,s),o=!0)},o(s){G(n.$$.fragment,s),o=!1},d(s){s&&Q(t),ce(n)}}}function y7(i){let e,t,n=i[0].state&&i[5]&&wm(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[0].state&&o[5]?n?(n.p(o,s),s&33&&B(n,1)):(n=wm(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function b7(i,e,t){let n,o,s,r,a,l,{tag:c}=e;return i.$$set=h=>{"tag"in h&&t(0,c=h.tag)},i.$$.update=()=>{var h,d;i.$$.dirty&1&&t(6,n=c.state?c.state.unfolded:!1),i.$$.dirty&1&&t(5,o=c.data.mediaData),i.$$.dirty&1&&t(1,s=c.data.enableCarousel),i.$$.dirty&1&&t(4,r=c.data.playIcon),i.$$.dirty&3&&t(3,a=(h=c.data.autoplayConfig)!=null?h:{autoplay:s??!0,autoplayVideo:!0}),i.$$.dirty&1&&t(2,l=(d=c.data.objectFit)!=null?d:(()=>c.data.adaptationMode==="stretch"?"fill":c.data.adaptationMode==="proportional"?"contain":void 0)())},[c,s,l,a,r,o,n]}class w7 extends ye{constructor(e){super(),Ae(this,e,b7,y7,ve,{tag:0},A7)}}const Ac=new Map;function f1(i){return ee(this,null,function*(){return new Promise((e,t)=>{if(!i){t(Error("url is empty"));return}const n=new Image;n.src=i,n.onload=()=>e({width:n.width,height:n.height}),n.onerror=t})})}function x7(i){return ee(this,null,function*(){const{url:e,ratio:t=3}=i,n=(()=>{if(Ac.has(e))return Ac.get(e);const r=f1(e);return Ac.set(e,r),r})(),{width:o,height:s}=yield n;return pe(W({},i),{width:o/t,height:s/t})})}function C7(i){return ee(this,null,function*(){const{steps:e,url:t,ratio:n=3,fps:o=24}=i;if(!e)throw new Error("KeyframeIcon requires steps");const{width:s,height:r}=yield f1(t),a=s/n,l=r/n,c=a/e,h=l,d=1/o*e+"s";return pe(W({},i),{width:c,height:h,duration:d})})}const Cr=class{constructor(){p(this,"styleRefs",new Map)}generateStyleKey(i,e){const{duration:t,timing:n,loop:o,loopInterval:s=0}=i,r=i.elements[e],{properties:a}=r;return`svg-anim-${[t,n,o,s,JSON.stringify(a)].join("-").replace(/[^a-zA-Z0-9-]/g,"").toLowerCase()}`}interpolateMulti(i,e){var t;if(i.length===2)return this.interpolate(i[0],i[1],e);if(i.length<2)return(t=i[0])!=null?t:0;const n=i.length-1,o=e*n,s=Math.floor(o),r=o-s;return s>=n?i[n]:this.interpolate(i[s],i[s+1],r)}generateTransformMulti(i,e){const t=[];if(i.scale){const n=this.interpolateMulti(i.scale,e);t.push(`scale(${n})`)}if(i.translateX){const n=this.interpolateMulti(i.translateX,e);t.push(`translateX(${n}px)`)}if(i.translateY){const n=this.interpolateMulti(i.translateY,e);t.push(`translateY(${n}px)`)}if(i.rotate){const n=this.interpolateMulti(i.rotate,e);t.push(`rotate(${n}deg)`)}return t.join(" ")}interpolate(i,e,t){return i+(e-i)*t}static getInstance(){return Cr.instance||(Cr.instance=new Cr),Cr.instance}getOrCreateStyle(i,e){const t=this.generateStyleKey(i,e);if(this.styleRefs.has(t)){const P=this.styleRefs.get(t);return P.count++,t}const{duration:n,timing:o="linear",loop:s,loopInterval:r=0}=i,a=i.elements[e],{properties:l}=a,c=`${t}-keyframe`;let h=2;const d=[l.translateX,l.translateY,l.scale,l.rotate,l.opacity].filter(P=>Array.isArray(P)&&P.length>0);d.length>0&&(h=Math.max(...d.map(P=>P.length)));const u=s&&r>0?n+r:n,f=Math.max(0,Math.min(100,n/u*100));let m=`@keyframes ${c} {
`;for(let P=0;P<h;P++){const I=P/(h-1),j=I*f,D=this.generateTransformMulti(l,I);let T="";l.opacity&&(T=`    opacity: ${this.interpolateMulti(l.opacity,I)};`),m+=`  ${j}% {
${D?`    transform: ${D};
`:""}${T}
  }
`}const g=this.generateTransformMulti(l,1);let v="";l.opacity&&(v=`    opacity: ${this.interpolateMulti(l.opacity,1)};`),m+=`  100% {
${g?`    transform: ${g};
`:""}${v}
  }
`,m+=`}
`;const A=!!l.scale;m+=`.${t} {
  animation: ${c} ${u}ms ${o} ${s?"infinite":"1"};
${A?`  transform-origin: 50% 50%;
  transform-box: fill-box;`:""}
}`;const w=document.createElement("style");return w.id=t,w.textContent=m,document.head.appendChild(w),this.styleRefs.set(t,{element:w,count:1}),t}releaseStyle(i){const e=this.styleRefs.get(i);e&&(e.count--,e.count<=0&&(e.element.remove(),this.styleRefs.delete(i)))}};let Ld=Cr;p(Ld,"instance");function P7(i,e){if(!i||!e)return;const t=Ld.getInstance(),{elements:n}=e;n.forEach((o,s)=>{const{selector:r}=o;(r?i.querySelectorAll(r):[i]).forEach(a=>{const l=a,c=t.getOrCreateStyle(e,s);l.classList.add(c),l.setAttribute("data-style-key",c)})})}function yc(i){if(!i)return;const e=Ld.getInstance(),t=i.querySelectorAll("*");[i,...Array.from(t)].forEach(n=>{const o=n,s=o.getAttribute("data-style-key");s&&(o.classList.remove(s),e.releaseStyle(s),o.removeAttribute("data-style-key")),o.style.animation="",o.style.transform="",o.style.opacity=""})}function E7(i){Ee(i,"svelte-o1ee3r",'@keyframes svelte-o1ee3r-sprites-animation{0%{background-position:0 0}100%{background-position:100% 0}}.icon-bg.svelte-o1ee3r{position:absolute;width:141%;height:141%;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;overflow:hidden}.icon-bg-circle.svelte-o1ee3r{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner.svelte-o1ee3r{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner-shadow.svelte-o1ee3r{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center, transparent 20%, rgba(255,255,255,0.3))}.icon-bg-circle.svelte-o1ee3r::before{content:"";position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;border-radius:50%;z-index:1;border:0.0625rem solid rgba(255,255,255,0.6)}.icon-image.svelte-o1ee3r{position:relative;display:block;width:auto}.icon-keyframe.svelte-o1ee3r{background-repeat:no-repeat;background-size:auto 100%;animation-direction:normal;animation-iteration-count:infinite;animation-name:svelte-o1ee3r-sprites-animation;animation-delay:0}.icon-svg.svelte-o1ee3r{position:relative;display:block;font-size:0}')}function xm(i){i[1]=i[30].width}function Cm(i){i[1]=i[30].width}function Pm(i){i[1]=i[30].width,i[27]=i[30].height,i[28]=i[30].steps,i[29]=i[30].duration}function Em(i){let e,t,n,o=i[0]&&Im();function s(l,c){return l[7]?S7:l[5]?M7:I7}let r=s(i),a=r(i);return{c(){e=U("div"),o&&o.c(),t=re(),a.c(),b(e,"class","icon"),N(e,"width",i[1])},m(l,c){Y(l,e,c),o&&o.m(e,null),H(e,t),a.m(e,null),n=!0},p(l,c){l[0]?o?c&1&&B(o,1):(o=Im(),o.c(),B(o,1),o.m(e,t)):o&&(xe(),G(o,1,1,()=>{o=null}),Ce()),r===(r=s(l))&&a?a.p(l,c):(a.d(1),a=r(l),a&&(a.c(),a.m(e,null))),c&2&&N(e,"width",l[1])},i(l){n||(B(o),n=!0)},o(l){G(o),n=!1},d(l){l&&Q(e),o&&o.d(),a.d()}}}function Im(i){let e,t;return e=new Zi({props:{center:!0,blurRadius:24,spreadRadius:16}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function I7(i){let e,t,n={ctx:i,current:null,token:null,hasCatch:!1,pending:z7,then:k7,catch:D7,value:30};return Fs(t=i[16](pt({url:i[4],ratio:i[11]})),n),{c(){e=Oe(),n.block.c()},m(o,s){Y(o,e,s),n.block.m(o,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e},p(o,s){i=o,n.ctx=i,s&2064&&t!==(t=i[16](pt({url:i[4],ratio:i[11]})))&&Fs(t,n)||rd(n,i,s)},d(o){o&&Q(e),n.block.d(o),n.token=null,n=null}}}function M7(i){let e,t,n={ctx:i,current:null,token:null,hasCatch:!1,pending:R7,then:L7,catch:j7,value:30};return Fs(t=i[16](pt({url:i[4],ratio:i[11]})),n),{c(){e=Oe(),n.block.c()},m(o,s){Y(o,e,s),n.block.m(o,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e},p(o,s){i=o,n.ctx=i,s&2064&&t!==(t=i[16](pt({url:i[4],ratio:i[11]})))&&Fs(t,n)||rd(n,i,s)},d(o){o&&Q(e),n.block.d(o),n.token=null,n=null}}}function S7(i){let e,t,n={ctx:i,current:null,token:null,hasCatch:!1,pending:N7,then:H7,catch:B7,value:30};return Fs(t=i[15](pt({url:i[4],steps:i[6],fps:i[12],ratio:i[11]})),n),{c(){e=Oe(),n.block.c()},m(o,s){Y(o,e,s),n.block.m(o,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e},p(o,s){i=o,n.ctx=i,s&6224&&t!==(t=i[15](pt({url:i[4],steps:i[6],fps:i[12],ratio:i[11]})))&&Fs(t,n)||rd(n,i,s)},d(o){o&&Q(e),n.block.d(o),n.token=null,n=null}}}function D7(i){return{c:oe,m:oe,p:oe,d:oe}}function k7(i){xm(i);let e,t,n,o=i[14]&&Mm(i);return{c(){o&&o.c(),e=re(),t=U("img"),b(t,"alt","tag-icon"),b(t,"class","icon-image svelte-o1ee3r"),at(t.src,n=i[4])||b(t,"src",n),N(t,"width",xi(so({originWidth:i[1],scale:i[10],wantedWidth:i[9]}).width)),N(t,"max-width","initial")},m(s,r){o&&o.m(s,r),Y(s,e,r),Y(s,t,r)},p(s,r){xm(s),s[14]?o?o.p(s,r):(o=Mm(s),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),r&16&&!at(t.src,n=s[4])&&b(t,"src",n),r&3600&&N(t,"width",xi(so({originWidth:s[1],scale:s[10],wantedWidth:s[9]}).width))},d(s){o&&o.d(s),s&&Q(e),s&&Q(t)}}}function Mm(i){let e,t,n,o,s;return{c(){e=U("div"),t=U("div"),n=U("div"),o=re(),s=U("div"),b(n,"class","icon-bg-circle-inner svelte-o1ee3r"),N(n,"background",i[14]),N(n,"opacity",i[13]),b(s,"class","icon-bg-circle-inner-shadow svelte-o1ee3r"),b(t,"class","icon-bg-circle svelte-o1ee3r"),b(e,"class","icon-bg svelte-o1ee3r")},m(r,a){Y(r,e,a),H(e,t),H(t,n),H(t,o),H(t,s)},p(r,a){a&16384&&N(n,"background",r[14]),a&8192&&N(n,"opacity",r[13])},d(r){r&&Q(e)}}}function z7(i){return{c:oe,m:oe,p:oe,d:oe}}function j7(i){return{c:oe,m:oe,p:oe,d:oe}}function L7(i){Cm(i);let e,t,n,o=i[14]&&Sm(i);function s(l,c){return c&16&&(n=null),n==null&&(n=!!Pr(l[4])),n?O7:T7}let r=s(i,-1),a=r(i);return{c(){o&&o.c(),e=re(),t=U("div"),a.c(),b(t,"class","icon-svg svelte-o1ee3r"),N(t,"width",xi(so({originWidth:i[1],scale:i[10],wantedWidth:i[9]}).width))},m(l,c){o&&o.m(l,c),Y(l,e,c),Y(l,t,c),a.m(t,null),i[20](t)},p(l,c){Cm(l),l[14]?o?o.p(l,c):(o=Sm(l),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),r===(r=s(l,c))&&a?a.p(l,c):(a.d(1),a=r(l),a&&(a.c(),a.m(t,null))),c&3600&&N(t,"width",xi(so({originWidth:l[1],scale:l[10],wantedWidth:l[9]}).width))},d(l){o&&o.d(l),l&&Q(e),l&&Q(t),a.d(),i[20](null)}}}function Sm(i){let e,t,n,o,s;return{c(){e=U("div"),t=U("div"),n=U("div"),o=re(),s=U("div"),b(n,"class","icon-bg-circle-inner svelte-o1ee3r"),N(n,"background",i[14]),N(n,"opacity",i[13]),b(s,"class","icon-bg-circle-inner-shadow svelte-o1ee3r"),b(t,"class","icon-bg-circle svelte-o1ee3r"),b(e,"class","icon-bg svelte-o1ee3r")},m(r,a){Y(r,e,a),H(e,t),H(t,n),H(t,o),H(t,s)},p(r,a){a&16384&&N(n,"background",r[14]),a&8192&&N(n,"opacity",r[13])},d(r){r&&Q(e)}}}function T7(i){let e,t;return{c(){e=U("img"),b(e,"alt","tag-icon"),b(e,"class","icon-image svelte-o1ee3r"),at(e.src,t=i[4])||b(e,"src",t),N(e,"width","100%"),N(e,"max-width","initial")},m(n,o){Y(n,e,o)},p(n,o){o&16&&!at(e.src,t=n[4])&&b(e,"src",t)},d(n){n&&Q(e)}}}function O7(i){let e,t;return{c(){e=new Ns(!1),t=Oe(),e.a=t},m(n,o){e.m(i[3],n,o),Y(n,t,o)},p(n,o){o&8&&e.p(n[3])},d(n){n&&Q(t),n&&e.d()}}}function R7(i){return{c:oe,m:oe,p:oe,d:oe}}function B7(i){return{c:oe,m:oe,p:oe,d:oe}}function H7(i){Pm(i);let e,t=`url(${i[4]})`,n=`steps(${i[28]-1})`;return{c(){e=U("div"),b(e,"class","icon-keyframe svelte-o1ee3r"),N(e,"width",xi(so({originWidth:i[1],originHeight:i[27],scale:i[10],wantedWidth:i[9]}).width)),N(e,"height",xi(so({originWidth:i[1],originHeight:i[27],scale:i[10],wantedWidth:i[9]}).height)),N(e,"background-image",t),N(e,"animation-duration",i[29]),N(e,"animation-timing-function",n)},m(o,s){Y(o,e,s)},p(o,s){Pm(o),s&7760&&N(e,"width",xi(so({originWidth:o[1],originHeight:o[27],scale:o[10],wantedWidth:o[9]}).width)),s&7760&&N(e,"height",xi(so({originWidth:o[1],originHeight:o[27],scale:o[10],wantedWidth:o[9]}).height)),s&16&&t!==(t=`url(${o[4]})`)&&N(e,"background-image",t),s&6224&&N(e,"animation-duration",o[29]),s&6224&&n!==(n=`steps(${o[28]-1})`)&&N(e,"animation-timing-function",n)},d(o){o&&Q(e)}}}function N7(i){return{c:oe,m:oe,p:oe,d:oe}}function F7(i){let e,t,n=i[8]&&Em(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[8]?n?(n.p(o,s),s&256&&B(n,1)):(n=Em(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function so(i){const{originWidth:e,originHeight:t,scale:n=1,wantedWidth:o}=i,s=(o??e)*n,r=typeof t=="number"?s*(t/e):void 0;return pe(W({},i),{width:s,height:r})}function Pr(i){if(!i)return!1;try{return new URL(i).pathname.endsWith(".svg")}catch{return i.endsWith(".svg")}}function V7(i,e,t){let n,o,s,r,a,l,c,h,d,u,f,m,{width:g=null}=e,{icon:v=null}=e,{shadow:A=!1}=e;const w=Bn();function P(k){return ee(this,null,function*(){const z=yield C7(k);return w("iconLoaded",z),z})}function I(k){return ee(this,null,function*(){if(typeof m=="number")return pe(W({},k),{width:m});const z=yield x7(k);return w("iconLoaded",z),z})}function j(){f||w("iconLoaded")}Zt(()=>{j()});let D=null,T=null,M=null;const O=new Map;let y=null;function C(k){return ee(this,null,function*(){const z=O.get(k);if(z)return yield z;const q=fetch(k,{cache:"force-cache"}).then(X=>X.text());O.set(k,q);try{return yield q}catch(X){throw O.delete(k),X}})}function x(){return ee(this,null,function*(){if(!d||!D&&(yield ol(),!D)||!Pr(n))return;M&&(yc(M),t(18,M=null)),n&&(t(3,T=yield C(n)),yield ol());const k=D.querySelector("svg");k&&(t(18,M=k),P7(M,d))})}Hi(()=>{M&&yc(M)});function S(k){_e[k?"unshift":"push"](()=>{D=k,t(2,D)})}return i.$$set=k=>{"width"in k&&t(1,g=k.width),"icon"in k&&t(17,v=k.icon),"shadow"in k&&t(0,A=k.shadow)},i.$$.update=()=>{var k,z,q;if(i.$$.dirty&131072&&t(4,n=v==null?void 0:v.url),i.$$.dirty&131072&&t(14,o=v==null?void 0:v.bgcolor),i.$$.dirty&131072&&t(13,s=(k=v==null?void 0:v.bgopacity)!=null?k:.6),i.$$.dirty&131072&&t(6,r=(z=v==null?void 0:v.steps)!=null?z:1),i.$$.dirty&131072&&t(12,a=v==null?void 0:v.fps),i.$$.dirty&131072&&t(11,l=v==null?void 0:v.ratio),i.$$.dirty&131072&&t(10,c=(q=v==null?void 0:v.scale)!=null?q:1),i.$$.dirty&131072&&t(9,h=v==null?void 0:v.width),i.$$.dirty&131072&&t(5,d=v==null?void 0:v.animation),i.$$.dirty&131072&&t(8,u=!!v),i.$$.dirty&96&&t(7,f=r>1&&!d),i.$$.dirty&2&&(m=g),i.$$.dirty&524336){const X=d&&Pr(n)?n:null;X&&X!==y&&(t(19,y=X),x())}i.$$.dirty&786488&&(!d||!Pr(n))&&(M&&(yc(M),t(18,M=null)),T!==null&&t(3,T=null),y!==null&&t(19,y=null)),i.$$.dirty&786484&&y&&D&&d&&Pr(n)&&!M&&x()},j(),[A,g,D,T,n,d,r,f,u,h,c,l,a,s,o,P,I,v,M,y,S]}class m1 extends ye{constructor(e){super(),Ae(this,e,V7,F7,ve,{width:1,icon:17,shadow:0},E7)}}function W7(i){Ee(i,"svelte-e58ijk",".wrapper.svelte-e58ijk{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}.text-wrapper.svelte-e58ijk{position:relative;display:flex;align-items:center;justify-content:center}.text.svelte-e58ijk{position:absolute;top:0;font-size:0.875rem;color:#ffffff;letter-spacing:0;text-align:center;max-width:8.75rem;width:-moz-max-content;width:max-content;line-height:1.125rem;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function Dm(i){let e,t,n,o,s,r;return t=new Zi({props:{outDelay:0,inDelay:0,center:!0,width:"80%",blurRadius:40,spreadRadius:16,opacity:.08}}),{c(){e=U("div"),de(t.$$.fragment),n=re(),o=U("div"),s=Te(i[2]),b(o,"class","text svelte-e58ijk"),N(o,"top",i[1]),b(e,"class","text-wrapper svelte-e58ijk")},m(a,l){Y(a,e,l),le(t,e,null),H(e,n),H(e,o),H(o,s),r=!0},p(a,l){(!r||l&4)&&Ne(s,a[2]),l&2&&N(o,"top",a[1])},i(a){r||(B(t.$$.fragment,a),r=!0)},o(a){G(t.$$.fragment,a),r=!1},d(a){a&&Q(e),ce(t)}}}function G7(i){let e,t,n,o;t=new m1({props:{icon:i[0],shadow:!0}}),t.$on("iconLoaded",i[8]);let s=i[2]&&i[3]&&Dm(i);return{c(){e=U("div"),de(t.$$.fragment),n=re(),s&&s.c(),b(e,"class","wrapper svelte-e58ijk")},m(r,a){Y(r,e,a),le(t,e,null),H(e,n),s&&s.m(e,null),o=!0},p(r,[a]){const l={};a&1&&(l.icon=r[0]),t.$set(l),r[2]&&r[3]?s?(s.p(r,a),a&12&&B(s,1)):(s=Dm(r),s.c(),B(s,1),s.m(e,null)):s&&(xe(),G(s,1,1,()=>{s=null}),Ce())},i(r){o||(B(t.$$.fragment,r),B(s),o=!0)},o(r){G(t.$$.fragment,r),G(s),o=!1},d(r){r&&Q(e),ce(t),s&&s.d()}}}const Q7=4;function U7(i,e,t){let n,o,s,r,a,l,c,{tag:h}=e;const d=()=>{t(3,n=!0)};return i.$$set=u=>{"tag"in u&&t(4,h=u.tag)},i.$$.update=()=>{var u,f,m,g,v,A,w,P;i.$$.dirty&16&&t(2,o=(u=h.data.title)!=null?u:h.data.text),i.$$.dirty&16&&t(0,s=(m=h.data.icon)!=null?m:(f=h.style)==null?void 0:f.point),i.$$.dirty&16&&t(6,r=(v=(g=h.style)==null?void 0:g.point)==null?void 0:v.width),i.$$.dirty&16&&t(5,a=(P=(w=(A=h.style)==null?void 0:A.point)==null?void 0:w.scale)!=null?P:1),i.$$.dirty&1&&t(7,l=s==null?void 0:s.bgcolor),i.$$.dirty&224&&t(1,c=l&&r&&typeof r=="number"?xi(r*.414*a/2+Q7):0)},t(3,n=!1),[s,c,o,n,h,a,r,l,d]}class X7 extends ye{constructor(e){super(),Ae(this,e,U7,G7,ve,{tag:4},W7)}}function Y7(i){Ee(i,"svelte-ezi5lu",`.icon.svelte-ezi5lu{font-size:0}.icon-bg.svelte-ezi5lu{position:absolute;width:141%;height:141%;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;overflow:hidden;z-index:-1}.icon-bg-circle.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner-shadow.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center, transparent 20%, rgba(255,255,255,0.3))}.icon-bg-circle.svelte-ezi5lu::before{content:"";position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;border-radius:50%;background:linear-gradient(-45deg, rgba(255,255,255,1), rgba(255,255,255,0.2), rgba(255,255,255,1));z-index:1;mask:radial-gradient(circle at center, 
              transparent 65%, 
              black 0%);-webkit-mask:radial-gradient(circle at center, 
              transparent 65%, 
              black 0%)}`)}function km(i){let e,t;return e=new Zi({props:{center:!0,blurRadius:24,spreadRadius:16}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function zm(i){let e,t,n,o,s;return{c(){e=U("div"),t=U("div"),n=U("div"),o=re(),s=U("div"),b(n,"class","icon-bg-circle-inner svelte-ezi5lu"),N(n,"background",i[4]),N(n,"opacity",i[3]),b(s,"class","icon-bg-circle-inner-shadow svelte-ezi5lu"),b(t,"class","icon-bg-circle svelte-ezi5lu"),b(e,"class","icon-bg svelte-ezi5lu")},m(r,a){Y(r,e,a),H(e,t),H(t,n),H(t,o),H(t,s)},p(r,a){a&16&&N(n,"background",r[4]),a&8&&N(n,"opacity",r[3])},d(r){r&&Q(e)}}}function q7(i){let e,t,n,o,s,r,a,l,c,h,d,u,f,m,g,v=i[1]&&km(),A=i[4]&&zm(i);return{c(){e=U("div"),v&&v.c(),t=re(),A&&A.c(),n=re(),o=ge("svg"),s=ge("linearGradient"),r=ge("stop"),a=ge("stop"),l=ge("linearGradient"),c=ge("stop"),h=ge("stop"),d=ge("g"),u=ge("path"),f=ge("path"),m=ge("path"),b(r,"offset","0"),b(r,"stop-color","#fff"),b(a,"offset","1"),b(a,"stop-color","#fff"),b(a,"stop-opacity",".7"),b(s,"id","a"),b(s,"x1","78.74567%"),b(s,"x2","5.663764%"),b(s,"y1","94.075617%"),b(s,"y2","5.924383%"),b(c,"offset","0"),b(c,"stop-color","#fff"),b(h,"offset","1"),b(h,"stop-color","#fff"),b(h,"stop-opacity","0"),b(l,"id","b"),b(l,"x1","16.588502%"),b(l,"x2","68.285986%"),b(l,"y1","5.924383%"),b(l,"y2","63.800896%"),b(u,"d","m18 5.4v8c0 1.9329966-4.0294373 3.5-9 3.5-4.97056275 0-9-1.5670034-9-3.5v-8c0 1.93299662 4.02943725 3.5 9 3.5 4.8670094 0 8.8316983-1.50239169 8.9947813-3.37967512zm-13.0396582-.5c.259 0 .504-.063.728-.196.441-.259.721-.728.721-1.26 0-.441-.189-.833-.504-1.085.259-.259.434-.63.434-1.022 0-.245-.063-.476-.182-.679-.252-.413-.693-.658-1.197-.658-.238 0-.462.056-.665.175-.42.238-.679.665-.679 1.162v.035h.721v-.035c0-.315.294-.616.623-.616.357 0 .651.287.651.616 0 .371-.287.658-.651.658h-.14v.728h.14c.399 0 .728.322.728.721s-.329.735-.728.735-.728-.336-.728-.735v-.105h-.728v.105c0 .266.063.511.196.728.259.448.728.728 1.26.728zm3.647 0c.273 0 .518-.07.749-.203.448-.273.742-.763.742-1.302 0-.273-.07-.518-.203-.749-.273-.448-.749-.742-1.288-.742-.077 0-.133 0-.168.007l.875-1.911h-.805l-1.274 2.793c-.091.189-.133.392-.133.602 0 .273.07.525.203.756.273.455.749.749 1.302.749zm0-.742c-.427 0-.763-.336-.763-.763 0-.42.343-.77.763-.77s.77.35.77.77-.35.763-.77.763zm3.654.749c.504 0 .952-.273 1.204-.7.126-.21.189-.441.189-.693v-2.086c0-.511-.273-.98-.693-1.239-.217-.126-.448-.189-.7-.189-.511 0-.98.273-1.232.714-.133.217-.196.455-.196.714v2.086c0 .504.273.952.714 1.204.217.126.455.189.714.189zm0-.721c-.371 0-.693-.301-.693-.672v-2.086c0-.399.308-.693.693-.693.371 0 .651.294.651.693v2.086c0 .385-.28.672-.651.672zm3.2140391-2.11266016c.2734375 0 .5132649-.09855143.7194824-.29565429.2062174-.19710287.3093262-.44376628.3093262-.73999024 0-.28710937-.0991211-.53035481-.2973633-.72973633-.1982422-.19938151-.4420573-.29907226-.7314453-.29907226-.2825521 0-.5257976.10026042-.7297364.30078125s-.3059082.44661458-.3059082.73828125c0 .2734375.0968425.51269531.2905274.71777344.1936849.20507812.4420573.30761718.7451172.30761718zm0-.37255859c-.1822917 0-.3383789-.06494141-.4682618-.19482422-.1298828-.12988281-.1948242-.28369141-.1948242-.46142578 0-.18457031.0655111-.34122721.1965332-.4699707.1310222-.12874349.2865397-.19311524.4665528-.19311524.180013 0 .3343912.06494141.4631347.19482422s.1931153.28369141.1931153.46142578c0 .18457031-.0655111.34122722-.1965332.46997071-.1310222.12874349-.2842611.19311523-.4597168.19311523z"),b(u,"fill","url(#a)"),b(u,"fill-rule","nonzero"),b(f,"d","m18 5.4v8c0 1.9329966-4.0294373 3.5-9 3.5-4.97056275 0-9-1.5670034-9-3.5v-8c0 1.93299662 4.02943725 3.5 9 3.5 4.8670094 0 8.8316983-1.50239169 8.9947813-3.37967512zm-.537 1.917-.0556083.04651904c-1.6129673 1.27557869-4.7855335 2.07278608-8.4073917 2.07278608-3.5667171 0-6.69228643-.77164105-8.32741897-2.0099189l-.13658103-.10838622.00030512 6.082c0 1.4658868 3.60570734 2.8999734 8.15878222 2.9616322l.30491266.0020627c4.6959533 0 8.4636949-1.4652329 8.4636949-2.9636949zm-5.2016582-7.317c.252 0 .483.063.7.189.42.259.693.728.693 1.239v2.086l-.00756.14868c-.02016.19488-.08064.37632-.18144.54432-.252.427-.7.7-1.204.7-.259 0-.497-.063-.714-.189-.441-.252-.714-.7-.714-1.204v-2.086l.007616-.15288c.020384-.20048.081984-.38752.188384-.56112.252-.441.721-.714 1.232-.714zm-7.301 0c.504 0 .945.245 1.197.658.119.203.182.434.182.679 0 .392-.175.763-.434 1.022.315.252.504.644.504 1.085 0 .532-.28 1.001-.721 1.26-.224.133-.469.196-.728.196-.532 0-1.001-.28-1.26-.728-.133-.217-.196-.462-.196-.728v-.105h.728v.105c0 .399.329.735.728.735s.728-.336.728-.735-.329-.721-.728-.721h-.14v-.728h.14c.364 0 .651-.287.651-.658 0-.329-.294-.616-.651-.616-.329 0-.623.301-.623.616v.035h-.721v-.035c0-.497.259-.924.679-1.162.203-.119.427-.175.665-.175zm4.354 0-.875 1.911c.035-.007.091-.007.168-.007.539 0 1.015.294 1.288.742.133.231.203.476.203.749 0 .539-.294 1.029-.742 1.302-.231.133-.476.203-.749.203-.553 0-1.029-.294-1.302-.749-.133-.231-.203-.483-.203-.756 0-.21.042-.413.133-.602l1.274-2.793zm2.947.735c-.385 0-.693.294-.693.693v2.086l.0077784.09927273c.051172.32396694.3479489.57272727.6852216.57272727.371 0 .651-.287.651-.672v-2.086l-.0068002-.10607288c-.044861-.34395191-.3069271-.58692712-.6441998-.58692712zm-3.654 1.89c-.42 0-.763.35-.763.77 0 .427.336.763.763.763.42 0 .77-.343.77-.763s-.35-.77-.77-.77zm6.8680391-2.61611328c.289388 0 .5332031.09969075.7314453.29907226.1982422.19938152.2973633.44262696.2973633.72973633 0 .29622396-.1031088.54288737-.3093262.73999024-.2062175.19710286-.4460449.29565429-.7194824.29565429-.3030599 0-.5514323-.10253906-.7451172-.30761718-.1936849-.20507813-.2905274-.44433594-.2905274-.71777344 0-.29166667.1019694-.53776042.3059082-.73828125s.4471843-.30078125.7297364-.30078125zm0 .37255859c-.1800131 0-.3355306.06437175-.4665528.19311524-.1310221.12874349-.1965332.28540039-.1965332.4699707 0 .17773437.0649414.33154297.1948242.46142578.1298829.12988281.2859701.19482422.4682618.19482422.1754557 0 .3286946-.06437174.4597168-.19311523.1310221-.12874349.1965332-.2854004.1965332-.46997071 0-.17773437-.0643718-.33154297-.1931153-.46142578s-.2831217-.19482422-.4631347-.19482422z"),b(f,"fill","url(#b)"),b(f,"fill-rule","nonzero"),b(m,"d","m3.00030998 2.79110119v5.21779762c-1.84142801-.64087734-3.00030998-1.57225753-3.00030998-2.60889881s1.15888197-1.96802147 3.00030998-2.60889881zm12.00038752.00035068c1.8408432.64086639 2.9993025 1.57209591 2.9993025 2.60854813s-1.1584593 1.96768174-2.9993025 2.60854813z"),b(m,"fill","#d8d8d8"),b(m,"opacity",".6"),b(d,"fill","none"),b(d,"fill-rule","evenodd"),b(d,"transform","translate(3 3.1)"),b(o,"height",i[2]),b(o,"width",i[2]),b(o,"viewBox","0 0 24 24"),b(o,"xmlns","http://www.w3.org/2000/svg"),b(o,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"class","icon svelte-ezi5lu"),N(e,"width",i[0])},m(w,P){Y(w,e,P),v&&v.m(e,null),H(e,t),A&&A.m(e,null),H(e,n),H(e,o),H(o,s),H(s,r),H(s,a),H(o,l),H(l,c),H(l,h),H(o,d),H(d,u),H(d,f),H(d,m),g=!0},p(w,[P]){w[1]?v?P&2&&B(v,1):(v=km(),v.c(),B(v,1),v.m(e,t)):v&&(xe(),G(v,1,1,()=>{v=null}),Ce()),w[4]?A?A.p(w,P):(A=zm(w),A.c(),A.m(e,n)):A&&(A.d(1),A=null),(!g||P&4)&&b(o,"height",w[2]),(!g||P&4)&&b(o,"width",w[2]),P&1&&N(e,"width",w[0])},i(w){g||(B(v),g=!0)},o(w){G(v),g=!1},d(w){w&&Q(e),v&&v.d(),A&&A.d()}}}function Z7(i){const{originWidth:e,originHeight:t,scale:n=1,wantedWidth:o}=i,s=(o??e)*n,r=typeof t=="number"?s*(t/e):void 0;return pe(W({},i),{width:s,height:r})}function J7(i,e,t){let n,o,s,r,a,{width:l=null}=e,{icon:c=null}=e,{shadow:h=!1}=e;return i.$$set=d=>{"width"in d&&t(0,l=d.width),"icon"in d&&t(5,c=d.icon),"shadow"in d&&t(1,h=d.shadow)},i.$$.update=()=>{var d,u;i.$$.dirty&32&&t(4,n=c==null?void 0:c.bgcolor),i.$$.dirty&32&&t(3,o=(d=c==null?void 0:c.bgopacity)!=null?d:.6),i.$$.dirty&32&&t(7,s=(u=c==null?void 0:c.scale)!=null?u:1),i.$$.dirty&32&&t(6,r=c==null?void 0:c.width),i.$$.dirty&192&&t(2,a=Z7({originWidth:24,originHeight:24,scale:s,wantedWidth:r}).width)},[l,h,a,o,n,c,r,s]}let K7=class extends ye{constructor(i){super(),Ae(this,i,J7,q7,ve,{width:0,icon:5,shadow:1},Y7)}};function _7(i){Ee(i,"svelte-yq4ru9",".wrapper.svelte-yq4ru9{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}")}function $7(i){let e,t,n;return t=new K7({props:{icon:i[0],shadow:!0}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","wrapper svelte-yq4ru9")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},p(o,[s]){const r={};s&1&&(r.icon=o[0]),t.$set(r)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function eI(i,e,t){let n,{tag:o}=e;return i.$$set=s=>{"tag"in s&&t(1,o=s.tag)},i.$$.update=()=>{var s,r;i.$$.dirty&2&&t(0,n=(r=o.data.icon)!=null?r:(s=o.style)==null?void 0:s.point)},[n,o]}class tI extends ye{constructor(e){super(),Ae(this,e,eI,$7,ve,{tag:1},_7)}}function iI(i){Ee(i,"svelte-kzl2aj",".customElement__container.svelte-kzl2aj{position:relative}")}function nI(i){let e,t;return{c(){e=new Ns(!1),t=Oe(),e.a=t},m(n,o){e.m(i[2],n,o),Y(n,t,o)},p:oe,d(n){n&&Q(t),n&&e.d()}}}function oI(i){let e,t=typeof i[2]=="string"&&nI(i);return{c(){e=U("div"),t&&t.c(),b(e,"class","customElement__container svelte-kzl2aj"),we(e,"unfolded",i[1])},m(n,o){Y(n,e,o),t&&t.m(e,null),i[5](e)},p(n,[o]){typeof n[2]=="string"&&t.p(n,o),o&2&&we(e,"unfolded",n[1])},i:oe,o:oe,d(n){n&&Q(e),t&&t.d(),i[5](null)}}}function sI(i,e,t){var n,o;let s,{tag:r}=e,{rendererMap:a=new Map}=e,l,c=(o=r.element)!=null?o:(n=a.get(r.contentType))==null?void 0:n.renderer,h;Zt(()=>{l&&(c instanceof Element?(l.appendChild(c),h=()=>{c instanceof Element&&c.remove()}):typeof c=="function"&&(h=c(l,r)))}),Hi(()=>{h==null||h()});function d(u){_e[u?"unshift":"push"](()=>{l=u,t(0,l)})}return i.$$set=u=>{"tag"in u&&t(3,r=u.tag),"rendererMap"in u&&t(4,a=u.rendererMap)},i.$$.update=()=>{i.$$.dirty&8&&t(1,s=r.state.unfolded)},[l,s,c,r,a,d]}class rI extends ye{constructor(e){super(),Ae(this,e,sI,oI,ve,{tag:3,rendererMap:4},iI)}}function aI(i){Ee(i,"svelte-1fy4duy",'@font-face{font-family:"TG-TYPE";font-style:normal;font-weight:400;src:local("TG-TYPE-Bold"), url(data:application/font-woff2;charset=utf-8;base64,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) format("woff2")}*{-webkit-tap-highlight-color:transparent}.content__container.svelte-1fy4duy{position:relative;left:50%;top:50%;transform:translate(-50%, -50%);font-family:PingFangSC, Segoe UI, Rototo, sans-serif;transition:opacity 0.2s linear}.content__container.unClickable.svelte-1fy4duy{pointer-events:none !important}.content__container.unClickable.svelte-1fy4duy *{pointer-events:none !important}.content__wrapper.svelte-1fy4duy{pointer-events:none;width:100%;height:100%}.content__container.hide.svelte-1fy4duy{opacity:0;pointer-events:none}.content__container.hide.svelte-1fy4duy *{pointer-events:none !important}.content__container.disable.svelte-1fy4duy{display:none}.content.svelte-1fy4duy{position:relative;width:100%;height:100%;font-size:0.75rem;color:#fff}.content.svelte-1fy4duy:not(.unfolded){pointer-events:none}.content.svelte-1fy4duy:not(.unfolded) *{pointer-events:none !important}.content.unfolded.svelte-1fy4duy{pointer-events:auto;cursor:pointer}')}function lI(i){let e,t;return{c(){e=U("div"),b(e,"data-info","tag content is keep folded"),b(e,"data-id",t=i[0].id)},m(n,o){Y(n,e,o)},p(n,o){o&1&&t!==(t=n[0].id)&&b(e,"data-id",t)},i:oe,o:oe,d(n){n&&Q(e)}}}function cI(i){let e,t,n,o,s,r,a,l,c,h,d,u,f,m,g,v,A;const w=[vI,gI,mI,fI,pI,uI,dI],P=[];function I(j,D){return D&9&&(o=null),D&9&&(s=null),D&9&&(r=null),D&9&&(a=null),D&9&&(l=null),D&9&&(c=null),D&9&&(h=null),o==null&&(o=!!(["Text"].includes(j[0].contentType)||["Text"].includes(j[3].get(j[0].contentType)))),o?0:(s==null&&(s=!!(["ImageText","Image","Video"].includes(j[0].contentType)||["ImageText","Image","Video"].includes(j[3].get(j[0].contentType)))),s?1:(r==null&&(r=!!(["Audio"].includes(j[0].contentType)||["Audio"].includes(j[3].get(j[0].contentType)))),r?2:(a==null&&(a=!!(["Marketing"].includes(j[0].contentType)||["Marketing"].includes(j[3].get(j[0].contentType)))),a?3:(l==null&&(l=!!(["Link","VRLink","PanoLink","Sticker"].includes(j[0].contentType)||["Link","VRLink","PanoLink","Sticker"].includes(j[3].get(j[0].contentType)))),l?4:(c==null&&(c=!!(["MediaPlane","MediaModel"].includes(j[0].contentType)||["MediaPlane","MediaModel"].includes(j[3].get(j[0].contentType)))),c?5:(h==null&&(h=!!(["Panorama"].includes(j[0].contentType)||["Panorama"].includes(j[3].get(j[0].contentType)))),h?6:-1))))))}return~(d=I(i,-1))&&(u=P[d]=w[d](i)),{c(){var j;e=U("div"),t=U("div"),n=U("div"),u&&u.c(),b(n,"class","content svelte-1fy4duy"),we(n,"unfolded",(j=i[0].state)==null?void 0:j.unfolded),b(t,"class","content__wrapper svelte-1fy4duy"),b(e,"class",f=dn(qs("content__container",i[0].className))+" svelte-1fy4duy"),b(e,"data-id",m=i[0].id),we(e,"disable",i[0].enabled===!1),we(e,"hide",i[5]),we(e,"unClickable",i[0].config.clickable===!1),N(e,"width",i[0].stickType==="Plane"||i[0].contentType==="MediaModel"?"100%":0),N(e,"height",i[0].stickType==="Plane"||i[0].contentType==="MediaModel"?"100%":0)},m(j,D){Y(j,e,D),H(e,t),H(t,n),~d&&P[d].m(n,null),i[16](e),g=!0,v||(A=Se(e,"click",i[17],!0),v=!0)},p(j,D){var T;let M=d;d=I(j,D),d===M?~d&&P[d].p(j,D):(u&&(xe(),G(P[M],1,1,()=>{P[M]=null}),Ce()),~d?(u=P[d],u?u.p(j,D):(u=P[d]=w[d](j),u.c()),B(u,1),u.m(n,null)):u=null),(!g||D&1)&&we(n,"unfolded",(T=j[0].state)==null?void 0:T.unfolded),(!g||D&1&&f!==(f=dn(qs("content__container",j[0].className))+" svelte-1fy4duy"))&&b(e,"class",f),(!g||D&1&&m!==(m=j[0].id))&&b(e,"data-id",m),(!g||D&1)&&we(e,"disable",j[0].enabled===!1),(!g||D&33)&&we(e,"hide",j[5]),(!g||D&1)&&we(e,"unClickable",j[0].config.clickable===!1),D&1&&N(e,"width",j[0].stickType==="Plane"||j[0].contentType==="MediaModel"?"100%":0),D&1&&N(e,"height",j[0].stickType==="Plane"||j[0].contentType==="MediaModel"?"100%":0)},i(j){g||(B(u),g=!0)},o(j){G(u),g=!1},d(j){j&&Q(e),~d&&P[d].d(),i[16](null),v=!1,A()}}}function hI(i){let e,t,n,o,s,r,a;return t=new rI({props:{tag:pt(i[0]),rendererMap:i[2]}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class",n=dn(qs("content__container",i[0].className))+" svelte-1fy4duy"),b(e,"data-id",o=i[0].id),we(e,"custom-tag-disable",i[0].enabled===!1),we(e,"custom-tag-hide",i[5])},m(l,c){Y(l,e,c),le(t,e,null),i[14](e),s=!0,r||(a=Se(e,"click",i[15]),r=!0)},p(l,c){const h={};c&1&&(h.tag=pt(l[0])),c&4&&(h.rendererMap=l[2]),t.$set(h),(!s||c&1&&n!==(n=dn(qs("content__container",l[0].className))+" svelte-1fy4duy"))&&b(e,"class",n),(!s||c&1&&o!==(o=l[0].id))&&b(e,"data-id",o),(!s||c&1)&&we(e,"custom-tag-disable",l[0].enabled===!1),(!s||c&33)&&we(e,"custom-tag-hide",l[5])},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){G(t.$$.fragment,l),s=!1},d(l){l&&Q(e),ce(t),i[14](null),r=!1,a()}}}function dI(i){let e,t;return e=new tI({props:{tag:pt(i[0])}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.tag=pt(n[0])),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function uI(i){let e,t;return e=new w7({props:{tag:pt(i[0])}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.tag=pt(n[0])),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function pI(i){let e,t;return e=new X7({props:{tag:pt(i[0])}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.tag=pt(n[0])),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function fI(i){let e,t;return e=new YE({props:{tag:pt(i[0])}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.tag=pt(n[0])),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function mI(i){let e,t;return e=new v7({props:{tag:pt(i[0])}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.tag=pt(n[0])),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function gI(i){let e,t;return e=new NE({props:{tag:pt(i[0])}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.tag=pt(n[0])),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function vI(i){let e,t;return e=new oP({props:{tag:pt(i[0])}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&1&&(s.tag=pt(n[0])),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function AI(i){let e,t,n,o,s;const r=[hI,cI,lI],a=[];function l(c,h){return h&5&&(e=null),e==null&&(e=!!(c[0].element||c[2].has(c[0].contentType))),e?0:c[4]?1:2}return t=l(i,-1),n=a[t]=r[t](i),{c(){n.c(),o=Oe()},m(c,h){a[t].m(c,h),Y(c,o,h),s=!0},p(c,[h]){let d=t;t=l(c,h),t===d?a[t].p(c,h):(xe(),G(a[d],1,1,()=>{a[d]=null}),Ce(),n=a[t],n?n.p(c,h):(n=a[t]=r[t](c),n.c()),B(n,1),n.m(o.parentNode,o))},i(c){s||(B(n),s=!0)},o(c){G(n),s=!1},d(c){a[t].d(c),c&&Q(o)}}}function yI(i,e,t){let n,o,s,r,a,l,{tag:c}=e,{hooks:h}=e,{rendererMap:d=new Map}=e,{contentTypeMap:u=new Map}=e,{state:f}=e,{mediaStore:m}=e,{temporaryState:g}=e;nl("hooks",h),nl("mediaStore",m);let v,A;function w(M){M?h.emit("exposure",{id:r,type:"start"}):h.emit("exposure",{id:r,type:"end"})}function P(M,O,y){var C,x;return!(!M.enabled||!O.visible||!O.enabled||!y.visible||!((C=M.state)!=null&&C.visible)||((x=M.temporaryState)==null?void 0:x.visible)===!1||M instanceof g1&&M.loading)}function I(M){_e[M?"unshift":"push"](()=>{c.contentDom=M,t(0,c)})}const j=M=>h.emit("click",{event:M,target:"TagContent",tag:c});function D(M){_e[M?"unshift":"push"](()=>{c.contentDom=M,t(0,c)})}const T=M=>{c.entryFromModel&&wi(c.five.state.mode)?(M.stopPropagation(),c.find({targetMode:"Panorama"})):h.emit("click",{event:M,target:"TagContent",tag:c})};return i.$$set=M=>{"tag"in M&&t(0,c=M.tag),"hooks"in M&&t(1,h=M.hooks),"rendererMap"in M&&t(2,d=M.rendererMap),"contentTypeMap"in M&&t(3,u=M.contentTypeMap),"state"in M&&t(6,f=M.state),"mediaStore"in M&&t(7,m=M.mediaStore),"temporaryState"in M&&t(8,g=M.temporaryState)},i.$$.update=()=>{var M,O,y,C,x,S,k,z,q,X,$;i.$$.dirty&1&&t(12,n=(M=c.state)==null?void 0:M.unfolded),i.$$.dirty&1&&t(11,o=(O=c.state)==null?void 0:O.visible),i.$$.dirty&321&&t(13,s=f.visible&&g.visible&&((y=c.state)==null?void 0:y.visible)),i.$$.dirty&1&&(r=c.id),i.$$.dirty&321&&t(5,a=!P(c,f,g)),i.$$.dirty&8192&&w(s),i.$$.dirty&7681&&c.hooks&&(n!==void 0&&n!==A&&(t(10,A=n),n?(x=(C=c.hooks).emit)==null||x.call(C,"unfolded"):(k=c==null?void 0:(S=c.hooks).emit)==null||k.call(S,"folded")),o!==void 0&&o!==v&&(t(9,v=o),o?(q=(z=c.hooks).emit)==null||q.call(z,"show"):($=(X=c.hooks).emit)==null||$.call(X,"hide"))),i.$$.dirty&1&&t(4,l=(()=>!(typeof c.config.unfoldedConfig=="object"&&c.config.unfoldedConfig.keep==="folded"))())},[c,h,d,u,l,a,f,m,g,v,A,o,n,s,I,j,D,T]}let Td=class extends ye{constructor(i){super(),Ae(this,i,yI,AI,ve,{tag:0,hooks:1,rendererMap:2,contentTypeMap:3,state:6,mediaStore:7,temporaryState:8},aI)}};class g1 extends Cd{constructor(e,t){super(e,t),p(this,"loading",!1),p(this,"loadModel",()=>ee(this,null,function*(){var n,o;const s=this.data.modelUrl;if(!s||(this.loading=!0,yield Ti(this.five),!this.plugin.tags.includes(this)))return;const r=AC(s).then(c=>ee(this,null,function*(){var h;const d=Object.assign(c.scene,{customID:this.id,isTagModel:!0,removeEventListener:this.getConfig().clickable===!1?()=>{}:this.addObjectClickHandler(this,c.scene,u=>{this.plugin.hooks.emit("click",{target:"TagModel",tag:this,event:u})})});return new Xe().fromArray(this.matrix).decompose(d.position,d.quaternion,d.scale),d.updateWorldMatrix(!0,!0),d.visible=this.visible,(h=this.getConfig().modelConfig)!=null&&h.autoLookAtEnabled&&d.lookAt(this.five.camera.position.clone().setY(d.position.y)),d}));this.model={promise:r};const a=yield r;if(this.loading=!1,((n=this.model)==null?void 0:n.promise)!==r||!this.plugin.tags.includes(this))return;this.model.object=a;const l=this.plugin.gltfObjectGroup.children.find(c=>c.customID===this.id);if(l&&(this.plugin.gltfObjectGroup.remove(l),l.removeEventListener()),Go(this)){const c=this.data.mediaPosition.map(ln);if(this.computeRenderType()==="Mesh"&&!this.mediaPlane){this.mediaPlane=new ch(this.data.mediaData[0].url,c,{objectFit:this.data.objectFit});const h=new R().addVectors(c[0],c[2]).divideScalar(2);this.mediaPlane.position.copy(h),a.add(this.mediaPlane)}if(this.computeRenderType()!=="Mesh"){(o=this.tag3DContentSvelte)==null||o.dispose();const h=document.createElement("div");h.classList.add("tag-media-container");const d="black";h.style.backgroundColor=d,h.style.border=`3px solid ${d}`;const u=W({mode:"behind",cornerPoints:c,container:h},this.config.tag3DConfig),f=this.computeRenderType()==="BehindDom"||u.mode==="behind"?"behind":"front",m=new _v(pe(W({},u),{mode:f})),g=this.computeNormal();m.position.add(g.clone().setLength(da.Z_FIGHTING_OFFSET)),a.add(m);let v;m.mode==="behind"&&this.config.clickable!==!1&&(v=this.addObjectClickHandler(this,m,w=>{this.plugin.hooks.emit("click",{event:w,target:"TagContent",tag:this})}));const A=new Td({target:h,props:{tag:this,hooks:this.plugin.hooks,state:this.plugin.state,mediaStore:this.plugin.mediaStore,temporaryState:this.plugin.temporaryState}});this.tag3DContentSvelte={svelteApp:A,domContainer:{css3DObject:m},css3DInstance:m,initialNormal:g,currentNormal:g,dispose:()=>{A.$destroy(),m.dispose(),v==null||v()}}}}return this.plugin.gltfObjectGroup.add(a),a})),this.state.unfolded=!0,oa(this.five),this.loadModel().then(()=>this.updateVisible())}applyVisible(){var e,t;(e=this.tag3DContentSvelte)==null||e.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}),(t=this.model)!=null&&t.object&&(this.model.object.visible=this.visible)}set(...e){super.set(...e),this.loadModel()}setData(...e){var t;super.setData(...e);const n=this.data.mediaPosition.map(ln);this.computeRenderType()==="Mesh"?this.mediaPlane&&this.mediaPlane.src!==this.data.mediaData[0].url&&(this.mediaPlane.removeFromParent(),this.mediaPlane=new ch(this.data.mediaData[0].url,n,{objectFit:this.data.objectFit})):(t=this.tag3DContentSvelte)==null||t.svelteApp.$set({tag:this})}computeNormal(){return Gv(this.data.mediaPosition)}}const bI=new Map,wI=new Map;class xI extends Cd{constructor(e,t){super(e,t),this.state.unfolded=!0,this.loadModel()}applyVisible(){var e,t,n,o,s,r;this.computeRenderType()==="Mesh"?((t=(e=this.data.mediaData)==null?void 0:e[0])==null?void 0:t.type)==="Video"?this.renderVideoPlane():((o=(n=this.data.mediaData)==null?void 0:n[0])==null?void 0:o.type)==="Image"&&this.renderImagePlane():((s=this.tag3DContentSvelte)==null||s.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}),(r=this.tag3DContentSvelte)!=null&&r.css3DInstance&&(this.tag3DContentSvelte.css3DInstance.visible=this.visible,this.five.needsRender=!0))}set(e,t=!0){super.set(e,t),Ti(this.five).then(()=>{this.tag3DContentSvelte&&(e.data?this.tag3DContentSvelte.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}):e.position&&this.loadModel())})}setData(...e){var t,n,o,s,r;super.setData(...e),this.computeRenderType()==="Mesh"?((n=(t=this.data.mediaData)==null?void 0:t[0])==null?void 0:n.type)==="Video"?this.renderVideoPlane():((s=(o=this.data.mediaData)==null?void 0:o[0])==null?void 0:s.type)==="Image"&&this.renderImagePlane():(r=this.tag3DContentSvelte)==null||r.svelteApp.$set({tag:this})}loadModel(){return ee(this,null,function*(){var e,t,n,o,s,r;if(yield Ti(this.five),this.computeRenderType()==="Mesh")((t=(e=this.data.mediaData)==null?void 0:e[0])==null?void 0:t.type)==="Video"?this.renderVideoPlane():((o=(n=this.data.mediaData)==null?void 0:n[0])==null?void 0:o.type)==="Image"&&this.renderImagePlane();else{oa(this.five);const a=this.position.map(Ue);(r=(s=this.tag3DContentSvelte)==null?void 0:s.dispose)==null||r.call(s);const l=document.createElement("div");l.classList.add("tag-media-container");const c=W({mode:"front",cornerPoints:a,container:l},this.config.tag3DConfig),h=this.computeRenderType()==="BehindDom"||c.mode==="behind"?"behind":"front",d=new _v(pe(W({},c),{mode:h})),u=this.computeNormal();d.position.add(u.clone().setLength(da.Z_FIGHTING_OFFSET)),this.plugin.group.add(d);let f;d.mode==="behind"&&this.config.clickable!==!1&&(f=this.addObjectClickHandler(this,d,g=>{this.plugin.hooks.emit("click",{event:g,target:"TagContent",tag:this})}));const m=new Td({target:l,props:{tag:this,hooks:this.plugin.hooks,state:this.plugin.state,mediaStore:this.plugin.mediaStore,temporaryState:this.plugin.temporaryState}});this.tag3DContentSvelte={svelteApp:m,domContainer:{css3DObject:d},css3DInstance:d,initialNormal:u,currentNormal:u,dispose:()=>{m.$destroy(),d.dispose(),f==null||f()}},this.five.needsRender=!0}})}renderVideoPlane(){var e;const t=this.data.mediaData[0];if(!t)return;const{url:n}=t;if(!n)return;const o=this.currentVisible,s=(()=>!!(this.mediaPlane&&!o))(),r=(()=>!!(!this.mediaPlane&&o))(),a=(()=>!!(this.mediaPlane&&this.mediaPlane.src!==n))();if((s||a)&&this.mediaPlane&&(this.plugin.imagePlaneGroup.remove(this.mediaPlane),this.mediaPlane.dispose(),this.mediaPlane.removeFromParent(),this.mediaPlane=void 0),r||a){const l=this.position.map(ln),c=new Jv(n,l,{videoCoverSrc:t.videoCoverUrl,playButton:this.data.playIcon,paused:!((e=this.data.autoplayConfig)!=null&&e.autoplayVideo),objectFit:this.data.objectFit,videoTextureMap:bI,ImageTextureMap:wI,domEvents:this.plugin.domEvents});this.plugin.domEvents.addAutoBindEventListener(c,"click",d=>{var u;!((u=c.videoInstance)!=null&&u.paused)&&c.videoInstance.muted===!1&&this.plugin.hooks.emit("playStateChange",{event:d,state:"playing",tag:this,mediaInstance:c.videoInstance})}),c.onVideoReady=d=>{d.addEventListener("play",u=>{this.plugin.mediaStore.set({currentMediaElement:c.videoInstance}),this.plugin.hooks.emit("playStateChange",{event:u,state:"playing",tag:this,mediaInstance:c.videoInstance})}),d.addEventListener("pause",u=>{this.plugin.hooks.emit("playStateChange",{event:u,state:"paused",tag:this,mediaInstance:c.videoInstance})}),d.addEventListener("ended",u=>{this.plugin.hooks.emit("playStateChange",{event:u,state:"paused",tag:this,mediaInstance:c.videoInstance})})};const h=d=>(this.five.on("renderFrame",d),()=>this.five.off("renderFrame",d));c.initialRenderHooks(h),this.mediaPlane=c,this.play=()=>c.play(),this.pause=()=>c.pause(),this.plugin.imagePlaneGroup.add(this.mediaPlane)}this.five.needsRender=!0}renderImagePlane(){const e=this.data.mediaData[0];if(!e)return;const{url:t}=e;if(!t)return;const n=this.position.map(ln),o=this.currentVisible,s=(()=>!!(this.mediaPlane&&!o))(),r=(()=>!!(!this.mediaPlane&&o))(),a=(()=>!!(this.mediaPlane&&this.mediaPlane.src!==t))();(s||a)&&this.mediaPlane&&(this.plugin.imagePlaneGroup.remove(this.mediaPlane),this.mediaPlane.dispose(),this.mediaPlane.removeFromParent(),this.mediaPlane=void 0),(r||a)&&(this.mediaPlane=new ch(t,n,{objectFit:this.data.objectFit}),this.getConfig().clickable!==!1&&this.plugin.domEvents.addAutoBindEventListener(this.mediaPlane,"click",l=>{this.plugin.hooks.emit("click",{tag:this,target:"TagContent",event:l.origDomEvent})},{noEmitWhenHide:!0}),this.plugin.imagePlaneGroup.add(this.mediaPlane)),this.five.needsRender=!0}computeNormal(){return Gv(this.position)}}function CI(i){Ee(i,"svelte-cksy1a",".audio-tag-point.svelte-cksy1a{position:relative;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;padding:0.25rem;border-radius:100%;border:0.0625rem solid rgba(255, 255, 255, 0.6);background:linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));box-shadow:inset 0 0 0.25rem 0 rgba(255, 255, 255, 0.3);display:flex;align-items:center;justify-content:center}")}function PI(i){let e,t,n,o,s;return t=new Ql({props:{playing:i[0],width:24}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","audio-tag-point svelte-cksy1a")},m(r,a){Y(r,e,a),le(t,e,null),n=!0,o||(s=[Se(e,"click",function(){oi(i[2])&&i[2].apply(this,arguments)}),Se(e,"mouseenter",function(){oi(i[3])&&i[3].apply(this,arguments)}),Se(e,"mouseleave",function(){oi(i[4])&&i[4].apply(this,arguments)})],o=!0)},p(r,a){i=r;const l={};a&1&&(l.playing=i[0]),t.$set(l)},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){G(t.$$.fragment,r),n=!1},d(r){r&&Q(e),ce(t),o=!1,lt(s)}}}function EI(i){let e,t;return e=new jd({props:{url:i[1].data.audioUrl,enable:i[1].state.visible,style:"width: max-content; height: max-content;",hooksInfo:{tag:i[1]},$$slots:{default:[PI]},$$scope:{ctx:i}}}),e.$on("play",i[5].play),e.$on("pause",i[5].pause),e.$on("error",i[5].error),e.$on("timeupdate",i[5].timeupdate),e.$on("duration",i[5].duration),e.$on("audioRef",i[5].audioRef),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,[o]){const s={};o&2&&(s.url=n[1].data.audioUrl),o&2&&(s.enable=n[1].state.visible),o&2&&(s.hooksInfo={tag:n[1]}),o&157&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function II(i,e,t){let{playing:n=!1}=e,{tag:o}=e,{handlePointClick:s=()=>{}}=e,{handleMouseEnter:r=()=>{}}=e,{handleMouseLeave:a=()=>{}}=e;const l=Bn(),c={audioRef:h=>l("audioRef",h.detail),play:()=>{t(0,n=!0),l("play")},pause:()=>{t(0,n=!1),l("pause")},error:()=>{t(0,n=!1),l("pause")},timeupdate:h=>l("timeupdate",h.detail),duration:h=>l("duration",h.detail)};return i.$$set=h=>{"playing"in h&&t(0,n=h.playing),"tag"in h&&t(1,o=h.tag),"handlePointClick"in h&&t(2,s=h.handlePointClick),"handleMouseEnter"in h&&t(3,r=h.handleMouseEnter),"handleMouseLeave"in h&&t(4,a=h.handleMouseLeave)},[n,o,s,r,a,c]}class MI extends ye{constructor(e){super(),Ae(this,e,II,EI,ve,{playing:0,tag:1,handlePointClick:2,handleMouseEnter:3,handleMouseLeave:4},CI)}}function SI(i){Ee(i,"svelte-dorxu0",'@charset "UTF-8";.tag-point-click-helper.svelte-dorxu0.svelte-dorxu0{position:absolute;pointer-events:auto;cursor:pointer;width:141%;height:141%;left:50%;top:50%;transform:translate(-50%, -50%);z-index:1000000}.audio-tag-point-click-helper.svelte-dorxu0.svelte-dorxu0{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1}.tag-point-wrapper.svelte-dorxu0.svelte-dorxu0{pointer-events:none;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);cursor:pointer;z-index:1040}.tag-folded-point.svelte-dorxu0.svelte-dorxu0,.tag-unfolded-point.svelte-dorxu0.svelte-dorxu0{transition:all 0.5s}.tag-point-wrapper.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{display:flex;justify-content:center;align-items:center;position:absolute;width:100%;height:100%;border-radius:50%}.tag-point-wrapper.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:0.3125rem;height:0.3125rem;border-radius:50%;background-color:white}.tag-point-wrapper.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0:before{content:"";position:absolute;width:0.875rem;height:0.875rem;border-radius:50%;background-color:rgba(0, 0, 0, 0.2)}.tag-point-wrapper.folded.svelte-dorxu0 .tag-folded-point.svelte-dorxu0{opacity:1;scale:1}.tag-point-wrapper.folded.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{opacity:0;scale:1}.tag-point-wrapper.unfolded.svelte-dorxu0 .tag-folded-point.svelte-dorxu0{opacity:0;scale:0.2}.tag-point-wrapper.unfolded.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{opacity:1;scale:1}.tag-point-wrapper.disable-unfold.svelte-dorxu0 .tag-folded-point.svelte-dorxu0{opacity:1 !important;scale:1 !important}.tag-point-wrapper.disable-unfold.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{opacity:0 !important;scale:1 !important}')}function DI(i){let e;return{c(){e=U("div"),b(e,"class","audio-tag-point-click-helper svelte-dorxu0")},m(t,n){Y(t,e,n),i[18](e)},p:oe,d(t){t&&Q(e),i[18](null)}}}function kI(i){let e,t,n;return{c(){e=U("div"),b(e,"class","tag-point-click-helper svelte-dorxu0")},m(o,s){Y(o,e,s),i[17](e),t||(n=[Se(e,"click",i[15]),Se(e,"mouseenter",i[16]),Se(e,"mouseleave",function(){oi(i[3])&&i[3].apply(this,arguments)})],t=!0)},p(o,s){i=o},d(o){o&&Q(e),i[17](null),t=!1,lt(n)}}}function zI(i){let e,t;return e=new m1({props:{icon:i[8],width:i[7]}}),e.$on("iconLoaded",i[21]),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&256&&(s.icon=n[8]),o&128&&(s.width=n[7]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function jI(i){let e,t;return e=new MI({props:{tag:pt(i[1]),handlePointClick:i[19],handleMouseEnter:i[20],handleMouseLeave:i[3]}}),e.$on("audioRef",i[13].audioRef),e.$on("play",i[13].play),e.$on("pause",i[13].pause),e.$on("timeupdate",i[13].timeupdate),e.$on("duration",i[13].duration),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.tag=pt(n[1])),o&16&&(s.handlePointClick=n[19]),o&6&&(s.handleMouseEnter=n[20]),o&8&&(s.handleMouseLeave=n[3]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function LI(i){let e,t,n,o,s,r,a,l,c,h;function d(A,w){return A[6]?DI:kI}let u=d(i),f=u(i);n=new Zi({props:{center:!0,blurRadius:15,spreadRadius:5,opacity:.3}});const m=[jI,zI],g=[];function v(A,w){return A[6]?0:1}return l=v(i),c=g[l]=m[l](i),{c(){e=U("div"),f.c(),t=re(),de(n.$$.fragment),o=re(),s=U("div"),r=re(),a=U("div"),c.c(),b(s,"class","tag-unfolded-point svelte-dorxu0"),N(s,"transition-delay",(i[9]?i[11]:0)+"ms"),b(a,"class","tag-folded-point svelte-dorxu0"),N(a,"transition-delay",(i[9]?i[11]:0)+"ms"),b(e,"class","tag-point-wrapper svelte-dorxu0"),we(e,"unfolded",i[5]),we(e,"folded",i[9]),we(e,"disable-unfold",i[1].isPopoverConfigEnabled())},m(A,w){Y(A,e,w),f.m(e,null),H(e,t),le(n,e,null),H(e,o),H(e,s),H(e,r),H(e,a),g[l].m(a,null),h=!0},p(A,[w]){u===(u=d(A))&&f?f.p(A,w):(f.d(1),f=u(A),f&&(f.c(),f.m(e,t))),w&512&&N(s,"transition-delay",(A[9]?A[11]:0)+"ms");let P=l;l=v(A),l===P?g[l].p(A,w):(xe(),G(g[P],1,1,()=>{g[P]=null}),Ce(),c=g[l],c?c.p(A,w):(c=g[l]=m[l](A),c.c()),B(c,1),c.m(a,null)),w&512&&N(a,"transition-delay",(A[9]?A[11]:0)+"ms"),(!h||w&32)&&we(e,"unfolded",A[5]),(!h||w&512)&&we(e,"folded",A[9]),(!h||w&2)&&we(e,"disable-unfold",A[1].isPopoverConfigEnabled())},i(A){h||(B(n.$$.fragment,A),B(c),h=!0)},o(A){G(n.$$.fragment,A),G(c),h=!1},d(A){A&&Q(e),f.d(),ce(n),g[l].d()}}}function TI(i,e,t){var n,o;let s,r,a,l,c;const h=pn("hooks"),d=Bn();let{tag:u}=e,f,m=!1;const g=()=>{f!==void 0&&clearTimeout(f),m=!0,f=setTimeout(()=>{m=!1},800)},v=X=>{m||(u.entryFromModel&&wi(u.five.state.mode)?u.find({targetMode:"Panorama"}).then(()=>u.unfoldAndFoldOthers()):h.emit("click",{event:X,target:"TagPoint",tag:u}))},A=(()=>u.contentType==="Text"&&u.data.appearance==="plane"?500:800)();let{tagPointClickHelper:w=null}=e,{handleMouseEnter:P=()=>{}}=e,{handleMouseLeave:I=()=>{}}=e,{handleTagPointClick:j=()=>{}}=e;const D=()=>!0,T=(o=(n=u.config.popoverConfig)==null?void 0:n.beforeOpen)!=null?o:D;let{audioInstance:M=null}=e;const O={audioRef:X=>{t(14,M=X.detail),d("audioInstanceReady",M)},play:()=>d("audioPlay"),pause:()=>d("audioPause"),timeupdate:X=>d("audioTimeUpdate",X.detail),duration:X=>d("audioDuration",X.detail)},y=X=>{j(X),v(X)},C=X=>{T(u)&&P(X)};function x(X){_e[X?"unshift":"push"](()=>{w=X,t(0,w)})}function S(X){_e[X?"unshift":"push"](()=>{w=X,t(0,w)})}const k=X=>{j(X),v(X)},z=X=>{T(u)&&P(X)};function q(X){On.call(this,i,X)}return i.$$set=X=>{"tag"in X&&t(1,u=X.tag),"tagPointClickHelper"in X&&t(0,w=X.tagPointClickHelper),"handleMouseEnter"in X&&t(2,P=X.handleMouseEnter),"handleMouseLeave"in X&&t(3,I=X.handleMouseLeave),"handleTagPointClick"in X&&t(4,j=X.handleTagPointClick),"audioInstance"in X&&t(14,M=X.audioInstance)},i.$$.update=()=>{var X,$,ne,_;i.$$.dirty&2&&t(5,s=(X=u.state)==null?void 0:X.unfolded),i.$$.dirty&32&&t(9,r=!s),i.$$.dirty&2&&t(8,a=(ne=($=u.style)==null?void 0:$.point)!=null&&ne.url?(_=u.style)==null?void 0:_.point:{url:d8}),i.$$.dirty&2&&t(7,l=(()=>{var se,K,me,De;const he=(K=(se=u.style)==null?void 0:se.point)==null?void 0:K.width;if(typeof he=="number")return he;const je=(De=(me=u.style)==null?void 0:me.point)==null?void 0:De.size;if(typeof je=="number")return je;if(je==="S")return 18;if(je==="M")return 20;if(je==="L")return 24;if(je==="XL")return 28})()),i.$$.dirty&2&&t(6,c=u.contentType==="Audio"&&u.data.appearance==="plane")},g(),[w,u,P,I,j,s,c,l,a,r,v,A,T,O,M,y,C,x,S,k,z,q]}class OI extends ye{constructor(e){super(),Ae(this,e,TI,LI,ve,{tag:1,tagPointClickHelper:0,handleMouseEnter:2,handleMouseLeave:3,handleTagPointClick:4,audioInstance:14},SI)}get tag(){return this.$$.ctx[1]}set tag(e){this.$$set({tag:e}),Mn()}get tagPointClickHelper(){return this.$$.ctx[0]}set tagPointClickHelper(e){this.$$set({tagPointClickHelper:e}),Mn()}get handleMouseEnter(){return this.$$.ctx[2]}set handleMouseEnter(e){this.$$set({handleMouseEnter:e}),Mn()}get handleMouseLeave(){return this.$$.ctx[3]}set handleMouseLeave(e){this.$$set({handleMouseLeave:e}),Mn()}get handleTagPointClick(){return this.$$.ctx[4]}set handleTagPointClick(e){this.$$set({handleTagPointClick:e}),Mn()}get audioInstance(){return this.$$.ctx[14]}set audioInstance(e){this.$$set({audioInstance:e}),Mn()}}const RI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAHgAAAAC3G9N3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACfklEQVRYCe2Yu2tVQRCHb1QQFQRBKzEkooJoISL+ATYW/kXBSrBKLxZaidaKhSCxs1Asg4qgRhHBB6IkKr4f3yd3vCfHezfnsTGnuD/4ZWf3zO7M7M4+biZ6vd5muBsehydg1/EdB6/3uTBR8vYg9dPQoLqILzg1A++Gc+tD6JevKR/AY/BXB3kSn+bhX5QD8MNLuAnugz87xMv4cg0uw7AAVDDKo3Ar7MJKPMWPWeiELsOoAFS8D00l98laBvEN+6fgO/gPRgWg4iL8Ct3Ya5lKl7B/Bw7FhqGtg8ariAZwYND0X6V7WNOHkVg38svgw1nED/2qyykDIRfLsmy93Falvza1nUQqhaLjZ4Q38HA0UOqQ+0LExoqy2PaDipNkGfp+r9L/PHqPVE6hSgD2fw63w51QR7wN3dw6EqVOhhylQSmL0K3S/zb6ydT5MyJ/qgagvhfcEbjRCogZjzLVFjqWRbnYJ+S3CGegAa+IOgE44DPo/RCOrEZp3r+ClVAnAAd0djy5puBqOD/HuLdgZdQNwIEfQ4/WLdB8zsUXjHUBRoohrowmAWhgAbofRI6VMD3PwSUHrIMmATi+Z7S39B6YYwV8pHlp1UbTADTkhp6GPvjarMIT+l+BjdAmAA1q/FDfsmOZCuVgUu3v0b8IvSwboW0AGvaVuDdh3YCGwXYvK1eyMdoGoGF/xW2D3tTl2U/V59G/CVvBMz0HbjDILujRWgUfUbJPa+RYAZ0w970998Mqp5I/D30gtkauAHTEH0BuyimYSp05vj+EWZAzAB1yP/jc2AFNz2Ign6ibNj4KsyGeutkGLAw0iewdIfx/jkeuz/AxxjMwnoGMM/AbzDbNM/bhiRQAAAAASUVORK5CYII=",BI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAMAAABdem3zAAAAb1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt6r1GAAAAJXRSTlMApb6gupm3s7CprZWRfoeOg4qdenZzLG9ka04KJR4EET04MBlfDzTkzgAAAMpJREFUOMvd0dsSgiAQBuA1o7KMTJRUEE+9/zOGjhmjIHvdtyizM1zAv/C3lOS8BjxZlNpbAhJ/zTig1PkCdS1RZotSgF/FDBXiAXcT8z6jyZLp5PfPGthXJCsF7GrpRgs7BvrcoAM4qexhkSl3orGVM1t5c5COEVPiQIU9UZISvXRNi6S/3pptF87S8dNl9p1lxCQIw2CsadfMnmwHzoJdbJNo5LHKto6uHlENBhVfvGJlJnpGMLLtTyg9zPj5iHLhoAmeHw9YORcf/XMbuOSlzkgAAAAASUVORK5CYII=",HI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACtUlEQVRYCcWXzUtWQRSHb1ZWL1FYIH2AkSaEBbkMsTYFQVCbdkVQ7Vr3L/RXRQURIrVopxAuBEmIwCBqkfZBz2/0yLV35oz39X4c+HnHuXPOM2c+ztWi6MZ6Q91wi/GuwLe6SPgy0NdtZzwN9LmyPaAfLZg4j9A9tB+1Ah6D8wyNC2jWdMZ3AT1Ahwxoz6bAIwCeoisoyoh22qwGfF7F7zE66vnXCe4Buo9m0UEPqnd1gSeJ9QSNKij2C7nwvYLlfxupElWKVWkwwct2ml8eorOlzt9b7cOlvmhzUPA1oinT/6+J4oUCEaWVOquCdU1UfSZQDKCM1V/rHqu4qyAcQSmzRNyDJWcbmAqkfl2Tm0jg3PjaMladvYOOb0GzmTBOlh3nZaAMdU3Ke5nbO4uXG1ekvseTAG+gqmbXKeuXAs9kPeMDLOPsUsfA2le3wMeZodcy1lK7FgMfcz3yL//khxTJPU755pZQS10+jKk4UfB6cvRmRXJeh1cDZ7yMuwf3wFZAcisTzVjOb7zozjs71QMdLsVdQq8cwJ5feQfhC9FX0Xmk76vdAPmoHdNf+vch+1zGxoQ+D4x/8Q0tIN3rU8j2LhXQTrXFTY0bsgHETJr26yNaQ+eQskkFVMaC6+mtzK7AxAimpV9EZ9AJFIMLqv7cylQCE6/4iT6gDXQBGcgm0UjGcLZthZayn0AqsQamGSZTe8YKbPaDxjukrJW94LYCte4xcftMAB083fuLSAdPcFlth2szXPznV7rn0Uk0hhpdauLvMF07HbzP6BIaRrb3fc/d3GP8K9knRs8h3XkVnT6o+poAEzdcu7c8de3sz+IdE2gKLLhMB+89mkL6L2Qb3jQYVqj3L3nqPxBNIMDbAMMKtVsHTx+c60gHr3XTnr9oK+NydvrYjHYB1iS+l2fSZrv3D/+KTyvCdHWgAAAAAElFTkSuQmCC",NI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACpklEQVRYCcWYPYwOURSGP38Rv4lEsZoVkq0oNEQjEopNFCQSlUIkJCqFUiLR0ah1SIROgWQLQSNBKUIhGwUNUZD4K/w/b3wnmZ1v7tx3xsw4ybsz994z57nn3J9lR6PRaCUa3BZD3Dw4FaDAs/8DLOYdtHVouDJeis6hbUPClwA7gjSBPWgFeop+oV5NwKIdoHEBTRc7+3iPjJXhb6TnWqTsv6EXqBcrZxwQrfthdBqti84unylwMLbwch7tjI6unjmwOKvRCXQMdXbLOeDvAGXb0Rk0o8a/WtXm0iaLjabNJskWoeVoB9IeeIlijNdm5mS8bBzyRyH0Xt5PoQ2FvkavDjhKXQ48RcdJtKs84LQdcGSs8pZNS7UPaeM1OnYOODIulro8gY10HEf2LxsHXJdxcQJraBxE+1H22DlgBf+J6jKWT1RGWR9F0+pMmQNWQK1l1Rqn4q5i4BBKlt4Bp4I7/Tp2M1WODjjWOFfqqvjq240mquWAVWqt8cTH9Dmm225T2dEB6xutcc6iMlV+gi8wF9xkVy8ApBou2Mk4xVD/x/KgA44Stl3jz0BftwHHxdB2Vz8sQ9V2Mo7v2mR8j4/nI0Dx6QRTqZV1LuPwU/wv6DaaKLEGZQ44Sv33i/TPmNwzXO6ir2lXDxyZaJJ1WWvsFhI4a00yroO+gnQDfcgSxw4OuC5jXSxz6IELDD8HLN+qm+st/VfRGzk0NQesTRM3V5Rbx0SZRrsp19rVxaDvaVxC88XONu9OxrHGjwBcR7XHxJ2EA9Zdexk9doM6fjnwc4JcRPYxcaDySYG1aa4hXQi9WBVYl4H+HJG8Z7uYSRl8k6BXUOtj4k4qwNqpZ9ET98Mu/O4TJPkP7y4AVTF0I61HKvGgJvAn9G5Q6hiW/Z9dH5P6A8K2bfEUA9VoAAAAAElFTkSuQmCC",FI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAHgAAAAC3G9N3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACfElEQVRYCe2XP2sVQRTFd0VsIgmpTAqx1EAStLAIpowgFmohFkEQ0+UbBEEJCpJvkE4REguVoBY2EaysLJSkSCzFQq1EMQg2z9+Jc2EyziSzb/eZJ7wLlzv37v1zzuy82aRstVr9RVGModfQGfR/kHuAfICulz5ayJzBf4oe9uNdtP4BlktlWb42TDsIKAiJs5gnltBl9jLgV31MfxHQQ0jcxsz6iV2wXgT8rRBHisAhEl+gI2HBPvkbzD0PgV/h/CgBJfEWjmOeoyKznyLQFwD/PgYiSUDJkLiOmYsV/sPYAuDvp+btSkBFkFDx6VSDDsffAF6bmJQcAkNUP0J1tbZcJ6uTr7VZPba1nxuLhblhT12ZVyDwWYkpsaLU8+04b0FX651dk5p/eBPwO67M2IiDsWAYUyNITBCfCp91yH+ZA16zs96AEiGgPzkW0SPyOyhf6D0Lge85M7IJqBkkxjELOY1r5MwBfi23PusIWTM1hsRj/IsWa9g+qwJesysRcGCXsaPoUec3ZT7SSL0rSaUjZJ15C8dYz6NNfaX1tZ1n9z9gK0lbBDQBErpapytNSyc/BPyeV2asvJ0jtN1HAyGho3QC9T9Util+TDVhXDHJZrvgVWxNta4sENDVegPtq1z8p2ALcxcCWVdmbEYtAmoIiVOYq7HmGbElwL/NyEumtH2ErKMAQEJ/ep+0WKZ9Vxe85tQm4MCuYIfRQefvZb6SoJracqB2Bxqwk7oGBUg2R1dcDen1pPZvwB/PURrHP+fHIuvVJo6O9W2UgJq638Mky34b4uxP7CvAR/81DHKz3cYJ2GSI6Gs94Pxv2E9NHRub0bO9HejtQFH8BvWooa9jGY/wAAAAAElFTkSuQmCC",VI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAMAAABdem3zAAAAgVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9d3yJTAAAAK3RSTlMA/Pfx6+XZ39TIwry2sJ+qpY3Ok4jNgpl8dnEGmEUfDi5hOycxmn5YGGhjcHcwqwAAAMZJREFUOMvd0e0OgiAUgGEqs9IiLdNCRQS/6v4vMGrNofJxfvfIzuZ2fugL+ls5ZYwiOPEk0ktA95vHD4Pt0/uIgr6fpCOSI7c+UfSAH4gnGtd+lVwnkgrZkSzLCnmK75QPse+XeKG0FsXRAqaWovFZIza3rU9atWmfHQ2YoWgUGkT6tl1g1GmLHiw0bYfgcrvI8xlyyqG+BwOaw3srvCjqO8zaCn/n4IvJFYdbp1C98NQDSJWiG5CxLffWIB5HUsXbFVjLqzcmgh9KFWWqZgAAAABJRU5ErkJggg==",WI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACiElEQVRYCcWYsUscQRSH74LaBE60MU2wsBALBQsbTSuEFCkCKmghYmUjdmohiIUpU6WxSZEQQrqkjZA/IEXESksREbEQBRFEOL+nOzK3O7NvvNudG/g5s29m3je/mbnz2EqlDaVer9detIEryOF2geejG2abJ9BdVDDASXQeDQyoC22hS3SDyncMZBDtInH6BC71cgFa4Cx/o6H0mXakA0U8A3xFno9oHHW5chbuGOgkoJ9ozAU0scIcA6yRdAW9Q06XBip1IWCgI+RaRa8lKaX+WPn/tgQGKM7m0BRSXdrLaBoMtJ9Ey2jATpi0q45YQ6gpMFC5QLPoZUO2Zzw8CwxQLtAikjPN29rizhjoKLAZ1IO00vpWAxRnH5B8LqWtugkZk7vVQOUCCbQPmaK6YaA6xgsGKuf4HqXPMsSxWaS3dn5lAh1kxlvPLNUN89TFOcFMfOOBhobVxWXAybnKx8ZXVDdMVMdkwEzq9hGTuOpGmf/Q7QJr81Q3JFAX5wJfauSAfnVxLvApiW9ykqtumKuOyYCr1eotE//mgEO6mnJcAX5I9j8egprUM68hnHFseoH/p/0VXZhYUqvbyDh1jBcsEOBHVJ/RnjwXWXLBApIzRz9ofkPXEgso6nGoYANJtn6b5wMTy6lb2+p0YuBX6BPx70huv68U59gmAJcbv4mO7bjVLtaxldhcvHViv+x4aDv4jF0JcS4X7wt9a+jMGlPOVluAhybwfRpLaDfpU7daHZAkCq74fy6/uTdQL+pE8tMprc6WtpqEmZJcvGk6/mU6YwVwv4AO0QlqeCNQ+hoAOl9FlA4WAPD4L19sZywg7uumFDz+CzazAJzvmHbUGvBEVKCBAa7dA6h+CDnUpjBPAAAAAElFTkSuQmCC",GI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACXElEQVRYCcWYQSgFQRjHdyUlRU5ykCMOxMHJSXlnV4nk7OTISRw8N7koJSeKg+Ig5R3l4kBOHF8u5KD3IoVa/692XtPXzOz3Ztfu1jQz35v5ft//2++1uxNEUdQZFHC1gDlcADcg8EIR4ACp/kWbyB0eg9/Ql3KFx+Av9DW0dbS2XAJgYFJeQRv4bzgVF7+GYDgHfJH/kOU8JMVw+IP2bWg3sK2EYfiCPtPLpFgHjGNyguAyL7wkxXomLhDENtTX9ch8x0mKyW8UO59Cvwv1I/E8VScBhxqhB+MyFR5aqr+dBKxxG8NpjDYB729YmhxIwCrV3HUfDGuAexWeBKynmsMp3bOAL6M19XiVgG2K9SAGMVkFfEw3usYSsEux7rsDkznAZ9ASC08C1p1LxqNYtAS4s/AkYEmq+ZpuwOddqZeAJSptt6MEuPFJJwHbnEoCojWTpnsuAfM0moCuNe3Y0Ms3ScBpFROzywfsUqP8NR2cRLFy7uqTgqvxzRKwRI1rTR3P8KoPOEkN98nn19xA86wU24K7hNonE7jVZPSw8VS/w8epKcXKtwRsU6N8UK+vucecoPTWar0kYK7G5IzWfKIdA3hnWsBtErCuhu9X80cM9gEVv4FKwC7FlM4jAK9UBNJeArb5esYPO4BWbQtcdgnYlOozOD0E1FlAacH6/ldMtgB80I0+Y4lidY8rAGT2CSMBfwC44VNArkwkgW+x+V8+U21gKpoyVB64ok71G96H6NRHnYHkdhShjpsUOPfDl8KOmwo5YNtLVSS+m1FY+aulYAFu6rvWVyDf9wc6+wpavsNbLQAAAABJRU5ErkJggg==";function QI(i){Ee(i,"svelte-16evpcg",".tag-popover-arrow-wrapper.svelte-16evpcg{position:absolute;transform-origin:center;background-position:center;background-repeat:no-repeat;background-size:100% 100%}.tag-popover-arrow-top.svelte-16evpcg{width:1rem;height:0.625rem;top:0.5rem;left:50%;transform:translateX(-50%)}.tag-popover-arrow-bottom.svelte-16evpcg{width:1rem;height:0.625rem;bottom:0.5rem;left:50%;transform:translateX(-50%)}.tag-popover-arrow-left.svelte-16evpcg{width:0.625rem;height:1rem;top:50%;left:0.5rem;transform:translateY(-50%)}.tag-popover-arrow-right.svelte-16evpcg{width:0.625rem;height:1rem;top:50%;right:0.5rem;transform:translateY(-50%)}")}function jm(i){let e,t,n;return{c(){e=U("div"),b(e,"class",t="tag-popover-arrow-wrapper tag-popover-arrow-"+i[0]+" theme-"+i[2]+" svelte-16evpcg"),b(e,"style",n=`background-image: url(${i[3]})`)},m(o,s){Y(o,e,s)},p(o,s){s&5&&t!==(t="tag-popover-arrow-wrapper tag-popover-arrow-"+o[0]+" theme-"+o[2]+" svelte-16evpcg")&&b(e,"class",t),s&8&&n!==(n=`background-image: url(${o[3]})`)&&b(e,"style",n)},d(o){o&&Q(e)}}}function UI(i){let e,t=i[1]&&jm(i);return{c(){t&&t.c(),e=Oe()},m(n,o){t&&t.m(n,o),Y(n,e,o)},p(n,[o]){n[1]?t?t.p(n,o):(t=jm(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:oe,o:oe,d(n){t&&t.d(n),n&&Q(e)}}}function XI(i,e,t){let n,{direction:o="bottom"}=e,{show:s=!0}=e,{theme:r="dark"}=e;return i.$$set=a=>{"direction"in a&&t(0,o=a.direction),"show"in a&&t(1,s=a.show),"theme"in a&&t(2,r=a.theme)},i.$$.update=()=>{i.$$.dirty&5&&t(3,n=(()=>{switch(r){case"dark":switch(o){case"top":return BI;case"bottom":return RI;case"left":return HI;case"right":return NI}case"light":switch(o){case"top":return VI;case"bottom":return FI;case"left":return WI;case"right":return GI}}})())},[o,s,r,n]}class YI extends ye{constructor(e){super(),Ae(this,e,XI,UI,ve,{direction:0,show:1,theme:2},QI)}}function qI(i){Ee(i,"svelte-1d6rvbz",".icon-container.svelte-1d6rvbz{width:3.25rem;height:3.25rem;background-color:var(--bg-color);border-radius:100%;display:flex;align-items:center;justify-content:center;z-index:2}")}function ZI(i){let e,t,n,o,s,r,a,l,c,h;return{c(){e=U("div"),t=ge("svg"),n=ge("defs"),o=ge("linearGradient"),s=ge("stop"),r=ge("stop"),a=ge("linearGradient"),l=ge("stop"),c=ge("stop"),h=ge("path"),b(s,"stop-color",i[1]),b(s,"offset","0%"),b(r,"stop-color",i[1]),b(r,"stop-opacity",".5"),b(r,"offset","100%"),b(o,"x1","53.2804066%"),b(o,"y1","100%"),b(o,"x2","64.4764442%"),b(o,"y2","2.52981206%"),b(o,"id","video-icon-gradient-a"),b(l,"stop-color",i[1]),b(l,"offset","0%"),b(c,"stop-color",i[1]),b(c,"stop-opacity","0"),b(c,"offset","100%"),b(a,"x1","50%"),b(a,"y1","-5.89066117%"),b(a,"x2","60.3018289%"),b(a,"y2","32.0415872%"),b(a,"id","video-icon-gradient-b"),b(h,"d","M8.0883645,5.35 C8.27319183,5.35 8.45426937,5.40368245 8.61098984,5.50477659 L20.4341152,13.1314044 C20.6662958,13.2811749 20.8173539,13.5140616 20.8743923,13.7691613 C20.9300733,14.0181899 20.8962437,14.2885953 20.7601668,14.5243865 L8.61098984,22.4950731 C8.38014238,22.6439836 8.11267156,22.6823641 7.86680489,22.6238045 C7.62023287,22.5650769 7.39563144,22.408984 7.25097187,22.1700998 C7.15226844,22.0071054 7.1,21.8187509 7.1,21.6265526 L7.1,6.37329702 C7.1,6.09035119 7.2108925,5.83405961 7.39059316,5.64859123 C7.56916841,5.46428435 7.81578724,5.35 8.0883645,5.35 Z"),b(h,"fill","url(#video-icon-gradient-a)"),b(h,"fill-rule","nonzero"),b(h,"stroke","url(#video-icon-gradient-b)"),b(h,"stroke-width",".2"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"viewBox","0 0 28 28"),b(t,"width",i[0]),b(t,"height",i[0]),b(e,"class","icon-container svelte-1d6rvbz"),N(e,"--bg-color",i[2])},m(d,u){Y(d,e,u),H(e,t),H(t,n),H(n,o),H(o,s),H(o,r),H(n,a),H(a,l),H(a,c),H(t,h)},p(d,[u]){u&2&&b(s,"stop-color",d[1]),u&2&&b(r,"stop-color",d[1]),u&2&&b(l,"stop-color",d[1]),u&2&&b(c,"stop-color",d[1]),u&1&&b(t,"width",d[0]),u&1&&b(t,"height",d[0]),u&4&&N(e,"--bg-color",d[2])},i:oe,o:oe,d(d){d&&Q(e)}}}function JI(i,e,t){let{size:n="28"}=e,{color:o="#ffffff"}=e,{bgColor:s="#0000004d"}=e;return i.$$set=r=>{"size"in r&&t(0,n=r.size),"color"in r&&t(1,o=r.color),"bgColor"in r&&t(2,s=r.bgColor)},[n,o,s]}class v1 extends ye{constructor(e){super(),Ae(this,e,JI,ZI,ve,{size:0,color:1,bgColor:2},qI)}}function KI(i){Ee(i,"svelte-1d6rvbz",".icon-container.svelte-1d6rvbz{width:3.25rem;height:3.25rem;background-color:var(--bg-color);border-radius:100%;display:flex;align-items:center;justify-content:center;z-index:2}")}function _I(i){let e,t,n,o,s,r,a,l,c,h,d,u,f,m,g,v;return{c(){e=U("div"),t=ge("svg"),n=ge("defs"),o=ge("linearGradient"),s=ge("stop"),r=ge("stop"),a=ge("linearGradient"),l=ge("stop"),c=ge("stop"),h=ge("linearGradient"),d=ge("stop"),u=ge("stop"),f=ge("g"),m=ge("path"),g=ge("path"),v=ge("path"),b(s,"stop-color","#FFF"),b(s,"offset","0%"),b(r,"stop-color","#FFF"),b(r,"stop-opacity",".5"),b(r,"offset","100%"),b(o,"x1","54.417371%"),b(o,"y1","106.742364%"),b(o,"x2","72.619444%"),b(o,"y2","8.15444328%"),b(o,"id","xmfpi7cnc__sgsykm5x9a"),b(l,"stop-color","#FFF"),b(l,"offset","0%"),b(c,"stop-color","#FFF"),b(c,"stop-opacity","0"),b(c,"offset","100%"),b(a,"x1","50%"),b(a,"y1",".73169217%"),b(a,"x2","66.0966077%"),b(a,"y2","34.1694374%"),b(a,"id","xmfpi7cnc__tjqs3iy6kb"),b(d,"stop-color","#FFF"),b(d,"offset","0%"),b(u,"stop-color","#FFF"),b(u,"stop-opacity",".5"),b(u,"offset","100%"),b(h,"x1","55.1256353%"),b(h,"y1","273.650936%"),b(h,"x2","55.1256353%"),b(h,"y2","81.7206937%"),b(h,"id","xmfpi7cnc__rs5hxavsyc"),b(m,"d","M18,5.4 L18,13.4 C18,15.3329966 13.9705627,16.9 9,16.9 C4.02943725,16.9 0,15.3329966 0,13.4 L0,5.4 C0,7.33299662 4.02943725,8.9 9,8.9 C13.8670094,8.9 17.8316983,7.39760831 17.9947813,5.52032488 L18,5.4 Z M4.9603418,4.9 C5.2193418,4.9 5.4643418,4.837 5.6883418,4.704 C6.1293418,4.445 6.4093418,3.976 6.4093418,3.444 C6.4093418,3.003 6.2203418,2.611 5.9053418,2.359 C6.1643418,2.1 6.3393418,1.729 6.3393418,1.337 C6.3393418,1.092 6.2763418,0.861 6.1573418,0.658 C5.9053418,0.245 5.4643418,0 4.9603418,0 C4.7223418,0 4.4983418,0.056 4.2953418,0.175 C3.8753418,0.413 3.6163418,0.84 3.6163418,1.337 L3.6163418,1.372 L4.3373418,1.372 L4.3373418,1.337 C4.3373418,1.022 4.6313418,0.721 4.9603418,0.721 C5.3173418,0.721 5.6113418,1.008 5.6113418,1.337 C5.6113418,1.708 5.3243418,1.995 4.9603418,1.995 L4.8203418,1.995 L4.8203418,2.723 L4.9603418,2.723 C5.3593418,2.723 5.6883418,3.045 5.6883418,3.444 C5.6883418,3.843 5.3593418,4.179 4.9603418,4.179 C4.5613418,4.179 4.2323418,3.843 4.2323418,3.444 L4.2323418,3.339 L3.5043418,3.339 L3.5043418,3.444 C3.5043418,3.71 3.5673418,3.955 3.7003418,4.172 C3.9593418,4.62 4.4283418,4.9 4.9603418,4.9 Z M8.6073418,4.9 C8.8803418,4.9 9.1253418,4.83 9.3563418,4.697 C9.8043418,4.424 10.0983418,3.934 10.0983418,3.395 C10.0983418,3.122 10.0283418,2.877 9.8953418,2.646 C9.6223418,2.198 9.1463418,1.904 8.6073418,1.904 C8.5303418,1.904 8.4743418,1.904 8.4393418,1.911 L9.3143418,0 L8.5093418,0 L7.2353418,2.793 C7.1443418,2.982 7.1023418,3.185 7.1023418,3.395 C7.1023418,3.668 7.1723418,3.92 7.3053418,4.151 C7.5783418,4.606 8.0543418,4.9 8.6073418,4.9 Z M8.6073418,4.158 C8.1803418,4.158 7.8443418,3.822 7.8443418,3.395 C7.8443418,2.975 8.1873418,2.625 8.6073418,2.625 C9.0273418,2.625 9.3773418,2.975 9.3773418,3.395 C9.3773418,3.815 9.0273418,4.158 8.6073418,4.158 Z M12.2613418,4.907 C12.7653418,4.907 13.2133418,4.634 13.4653418,4.207 C13.5913418,3.997 13.6543418,3.766 13.6543418,3.514 L13.6543418,3.514 L13.6543418,1.428 C13.6543418,0.917 13.3813418,0.448 12.9613418,0.189 C12.7443418,0.063 12.5133418,0 12.2613418,0 C11.7503418,0 11.2813418,0.273 11.0293418,0.714 C10.8963418,0.931 10.8333418,1.169 10.8333418,1.428 L10.8333418,1.428 L10.8333418,3.514 C10.8333418,4.018 11.1063418,4.466 11.5473418,4.718 C11.7643418,4.844 12.0023418,4.907 12.2613418,4.907 Z M12.2613418,4.186 C11.8903418,4.186 11.5683418,3.885 11.5683418,3.514 L11.5683418,3.514 L11.5683418,1.428 C11.5683418,1.029 11.8763418,0.735 12.2613418,0.735 C12.6323418,0.735 12.9123418,1.029 12.9123418,1.428 L12.9123418,1.428 L12.9123418,3.514 C12.9123418,3.899 12.6323418,4.186 12.2613418,4.186 Z M15.4753809,2.07333984 C15.7488184,2.07333984 15.9886458,1.97478841 16.1948633,1.77768555 C16.4010807,1.58058268 16.5041895,1.33391927 16.5041895,1.03769531 C16.5041895,0.750585938 16.4050684,0.507340495 16.2068262,0.307958984 C16.008584,0.108577474 15.7647689,0.00888671875 15.4753809,0.00888671875 C15.1928288,0.00888671875 14.9495833,0.109147135 14.7456445,0.309667969 C14.5417057,0.510188802 14.4397363,0.756282552 14.4397363,1.04794922 C14.4397363,1.32138672 14.5365788,1.56064453 14.7302637,1.76572266 C14.9239486,1.97080078 15.172321,2.07333984 15.4753809,2.07333984 Z M15.4753809,1.70078125 C15.2930892,1.70078125 15.137002,1.63583984 15.0071191,1.50595703 C14.8772363,1.37607422 14.8122949,1.22226563 14.8122949,1.04453125 C14.8122949,0.859960938 14.877806,0.703304036 15.0088281,0.574560547 C15.1398503,0.445817057 15.2953678,0.381445313 15.4753809,0.381445313 C15.6553939,0.381445313 15.8097721,0.446386719 15.9385156,0.576269531 C16.0672591,0.706152344 16.1316309,0.859960938 16.1316309,1.03769531 C16.1316309,1.22226563 16.0661198,1.37892253 15.9350977,1.50766602 C15.8040755,1.63640951 15.6508366,1.70078125 15.4753809,1.70078125 Z"),b(m,"fill","url(#xmfpi7cnc__sgsykm5x9a)"),b(m,"transform","translate(3 3.1)"),b(g,"d","M18,5.4 L18,13.4 C18,15.3329966 13.9705627,16.9 9,16.9 C4.02943725,16.9 0,15.3329966 0,13.4 L0,5.4 C0,7.33299662 4.02943725,8.9 9,8.9 C13.8670094,8.9 17.8316983,7.39760831 17.9947813,5.52032488 L18,5.4 Z M17.8,6.499 L17.7806846,6.52607583 C16.6077599,8.0452893 13.108676,9.1 9,9.1 C4.87821133,9.1 1.38089175,8.04047836 0.214303539,6.51942435 L0.2,6.5 L0.2,13.4 C0.2,15.1332693 3.96631253,16.6348245 8.69056715,16.6979358 L9,16.7 C13.8681548,16.7 17.8,15.1709491 17.8,13.4 L17.8,6.499 Z M12.2613418,0 C12.5133418,0 12.7443418,0.063 12.9613418,0.189 C13.3813418,0.448 13.6543418,0.917 13.6543418,1.428 L13.6543418,3.514 L13.6467818,3.66268 C13.6266218,3.85756 13.5661418,4.039 13.4653418,4.207 C13.2133418,4.634 12.7653418,4.907 12.2613418,4.907 C12.0023418,4.907 11.7643418,4.844 11.5473418,4.718 C11.1063418,4.466 10.8333418,4.018 10.8333418,3.514 L10.8333418,1.428 L10.8409578,1.27512 C10.8613418,1.07464 10.9229418,0.8876 11.0293418,0.714 C11.2813418,0.273 11.7503418,0 12.2613418,0 Z M9.3143418,0 L8.4393418,1.911 C8.4743418,1.904 8.5303418,1.904 8.6073418,1.904 C9.1463418,1.904 9.6223418,2.198 9.8953418,2.646 C10.0283418,2.877 10.0983418,3.122 10.0983418,3.395 C10.0983418,3.934 9.8043418,4.424 9.3563418,4.697 C9.1253418,4.83 8.8803418,4.9 8.6073418,4.9 C8.0543418,4.9 7.5783418,4.606 7.3053418,4.151 C7.1723418,3.92 7.1023418,3.668 7.1023418,3.395 C7.1023418,3.185 7.1443418,2.982 7.2353418,2.793 L8.5093418,0 L9.3143418,0 Z M4.9603418,0 C5.4643418,0 5.9053418,0.245 6.1573418,0.658 C6.2763418,0.861 6.3393418,1.092 6.3393418,1.337 C6.3393418,1.729 6.1643418,2.1 5.9053418,2.359 C6.2203418,2.611 6.4093418,3.003 6.4093418,3.444 C6.4093418,3.976 6.1293418,4.445 5.6883418,4.704 C5.4643418,4.837 5.2193418,4.9 4.9603418,4.9 C4.4283418,4.9 3.9593418,4.62 3.7003418,4.172 C3.5673418,3.955 3.5043418,3.71 3.5043418,3.444 L3.5043418,3.339 L4.2323418,3.339 L4.2323418,3.444 C4.2323418,3.843 4.5613418,4.179 4.9603418,4.179 C5.3593418,4.179 5.6883418,3.843 5.6883418,3.444 C5.6883418,3.045 5.3593418,2.723 4.9603418,2.723 L4.8203418,2.723 L4.8203418,1.995 L4.9603418,1.995 C5.3243418,1.995 5.6113418,1.708 5.6113418,1.337 C5.6113418,1.008 5.3173418,0.721 4.9603418,0.721 C4.6313418,0.721 4.3373418,1.022 4.3373418,1.337 L4.3373418,1.372 L3.6163418,1.372 L3.6163418,1.337 C3.6163418,0.84 3.8753418,0.413 4.2953418,0.175 C4.4983418,0.056 4.7223418,0 4.9603418,0 Z M12.2613418,0.2 C11.8228535,0.2 11.4197491,0.433900098 11.199862,0.818512412 C11.0880596,1.00092699 11.0333418,1.20205175 11.0333418,1.428 L11.0333418,3.514 C11.0333418,3.94076817 11.2630074,4.32517296 11.6477689,4.54504221 C11.8340054,4.65317955 12.0373271,4.707 12.2613418,4.707 C12.685768,4.707 13.0724302,4.4792625 13.2938432,4.10410085 C13.4010506,3.92542185 13.4543418,3.73002084 13.4543418,3.514 L13.4543418,1.428 C13.4543418,0.993663172 13.2236099,0.585702454 12.8609147,0.361957789 C12.673578,0.253181671 12.4771013,0.2 12.2613418,0.2 Z M4.9603418,0.2 C4.75293536,0.2 4.56476024,0.248895899 4.39394431,0.349004437 C4.11167513,0.508956972 3.91907748,0.764507622 3.84741774,1.06716925 L3.829,1.171 L4.157,1.171 L4.1635929,1.14325273 C4.24904453,0.829489942 4.53273472,0.571946496 4.86075855,0.527713496 L4.9603418,0.521 C5.42264158,0.521 5.8113418,0.89242465 5.8113418,1.337 C5.8113418,1.78012728 5.4916909,2.13625035 5.06824166,2.18841646 L5.02,2.191 L5.02,2.526 L5.06813812,2.52919506 C5.49271718,2.57829524 5.83232975,2.91371045 5.88206553,3.33657664 L5.8883418,3.444 C5.8883418,3.95419336 5.46908818,4.379 4.9603418,4.379 C4.48793444,4.379 4.09269177,4.01271264 4.03863877,3.55189651 L4.037,3.539 L3.709,3.539 L3.71100539,3.58140766 C3.72435814,3.71571552 3.75785509,3.84083114 3.8121867,3.95771875 L3.87348876,4.07189941 C4.09978468,4.46333019 4.50573915,4.7 4.9603418,4.7 C5.18808795,4.7 5.39698916,4.6443932 5.58705743,4.53154283 C5.97364119,4.30450157 6.2093418,3.89738234 6.2093418,3.444 C6.2093418,3.06849319 6.05147644,2.73203269 5.78040279,2.51517376 L5.60591531,2.37558378 L5.76392044,2.21757864 C5.99772857,1.98377051 6.1393418,1.65985061 6.1393418,1.337 C6.1393418,1.12891147 6.08649325,0.932616859 5.98661394,0.762172929 C5.77036899,0.407771483 5.39348118,0.2 4.9603418,0.2 Z M9.002,0.2 L8.638,0.2 L7.41554213,2.87976312 C7.3587619,2.9976913 7.32347683,3.1241874 7.30938306,3.25833536 L7.3023418,3.395 C7.3023418,3.62951354 7.36137928,3.8474981 7.47684038,4.04810085 C7.72111603,4.45522692 8.1383802,4.7 8.6073418,4.7 C8.83989632,4.7 9.05100342,4.64201988 9.25226776,4.52621184 C9.649754,4.28399367 9.8983418,3.85400396 9.8983418,3.395 C9.8983418,3.16244548 9.84036168,2.95133838 9.72455364,2.75007403 C9.48026964,2.34919774 9.06277079,2.104 8.6073418,2.104 L8.51445661,2.10475811 C8.49442789,2.10527049 8.48389809,2.10604952 8.47856502,2.10711614 L8.0943966,2.18394982 L8.25749731,1.82773787 L9.002,0.2 Z M12.2613418,0.535 C12.7468356,0.535 13.1123418,0.922491584 13.1123418,1.428 L13.1123418,3.514 C13.1123418,4.00744192 12.7448365,4.386 12.2613418,4.386 C11.7777279,4.386 11.3683418,3.99355405 11.3683418,3.514 L11.3683418,1.428 C11.3683418,0.922753743 11.7615956,0.535 12.2613418,0.535 Z M8.6073418,2.425 C9.13779875,2.425 9.5773418,2.86454305 9.5773418,3.395 C9.5773418,3.92471151 9.13856864,4.358 8.6073418,4.358 C8.06988485,4.358 7.6443418,3.93245695 7.6443418,3.395 C7.6443418,2.86377316 8.07763029,2.425 8.6073418,2.425 Z M12.2613418,0.735 C11.8763418,0.735 11.5683418,1.029 11.5683418,1.428 L11.5683418,3.514 L11.5761202,3.61327273 C11.6272922,3.93723967 11.9240691,4.186 12.2613418,4.186 C12.6323418,4.186 12.9123418,3.899 12.9123418,3.514 L12.9123418,1.428 L12.9055416,1.32192712 C12.8606806,0.977975207 12.5986145,0.735 12.2613418,0.735 Z M8.6073418,2.625 C8.1873418,2.625 7.8443418,2.975 7.8443418,3.395 C7.8443418,3.822 8.1803418,4.158 8.6073418,4.158 C9.0273418,4.158 9.3773418,3.815 9.3773418,3.395 C9.3773418,2.975 9.0273418,2.625 8.6073418,2.625 Z M15.4753809,0.00888671875 C15.7647689,0.00888671875 16.008584,0.108577474 16.2068262,0.307958984 C16.4050684,0.507340495 16.5041895,0.750585938 16.5041895,1.03769531 C16.5041895,1.33391927 16.4010807,1.58058268 16.1948633,1.77768555 C15.9886458,1.97478841 15.7488184,2.07333984 15.4753809,2.07333984 C15.172321,2.07333984 14.9239486,1.97080078 14.7302637,1.76572266 C14.5365788,1.56064453 14.4397363,1.32138672 14.4397363,1.04794922 C14.4397363,0.756282552 14.5417057,0.510188802 14.7456445,0.309667969 C14.9495833,0.109147135 15.1928288,0.00888671875 15.4753809,0.00888671875 Z M15.4753809,0.381445313 C15.2953678,0.381445313 15.1398503,0.445817057 15.0088281,0.574560547 C14.877806,0.703304036 14.8122949,0.859960938 14.8122949,1.04453125 C14.8122949,1.22226563 14.8772363,1.37607422 15.0071191,1.50595703 C15.137002,1.63583984 15.2930892,1.70078125 15.4753809,1.70078125 C15.6508366,1.70078125 15.8040755,1.63640951 15.9350977,1.50766602 C16.0661198,1.37892253 16.1316309,1.22226563 16.1316309,1.03769531 C16.1316309,0.859960938 16.0672591,0.706152344 15.9385156,0.576269531 C15.8097721,0.446386719 15.6553939,0.381445313 15.4753809,0.381445313 Z"),b(g,"fill","url(#xmfpi7cnc__tjqs3iy6kb)"),b(g,"transform","translate(3 3.1)"),b(v,"d","M3.00030998,2.79110119 L3.00030998,8.00889881 C1.15888197,7.36802147 0,6.43664128 0,5.4 C0,4.36335872 1.15888197,3.43197853 3.00030998,2.79110119 Z M15.0006975,2.79145187 C16.8415407,3.43231826 18,4.36354778 18,5.4 C18,6.43645222 16.8415407,7.36768174 15.0006975,8.00854813 Z"),b(v,"fill","url(#xmfpi7cnc__rs5hxavsyc)"),b(v,"transform","translate(3 3.1)"),b(f,"fill-rule","nonzero"),b(f,"fill","none"),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"viewBox","0 0 24 24"),b(t,"width",i[0]),b(t,"height",i[0]),b(e,"class","icon-container svelte-1d6rvbz"),N(e,"--bg-color",i[1])},m(A,w){Y(A,e,w),H(e,t),H(t,n),H(n,o),H(o,s),H(o,r),H(n,a),H(a,l),H(a,c),H(n,h),H(h,d),H(h,u),H(t,f),H(f,m),H(f,g),H(f,v)},p(A,[w]){w&1&&b(t,"width",A[0]),w&1&&b(t,"height",A[0]),w&2&&N(e,"--bg-color",A[1])},i:oe,o:oe,d(A){A&&Q(e)}}}function $I(i,e,t){let{size:n="28"}=e,{color:o="#ffffff"}=e,{bgColor:s="#0000004d"}=e;return i.$$set=r=>{"size"in r&&t(0,n=r.size),"color"in r&&t(2,o=r.color),"bgColor"in r&&t(1,s=r.bgColor)},[n,s,o]}class e6 extends ye{constructor(e){super(),Ae(this,e,$I,_I,ve,{size:0,color:2,bgColor:1},KI)}}function t6(i){Ee(i,"svelte-16y5k2u",".pano-tag-audio-popup-inline-player-wrapper.svelte-16y5k2u{width:100%;height:1.75rem;background-color:rgba(255, 255, 255, 0.06);border-radius:0.125rem;display:flex;align-items:center;cursor:pointer}.pano-tag-audio-popup-inline-player-icon.svelte-16y5k2u{width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;flex-shrink:0}.pano-tag-audio-popup-inline-player-progress.svelte-16y5k2u{flex-grow:1;display:flex;position:relative;height:100%;align-items:center}.pano-tag-audio-popup-inline-player-progress-bar.svelte-16y5k2u{width:0;height:100%;background:linear-gradient(to right, rgba(238, 238, 238, 0) 0, rgba(216, 216, 216, 0.3) 100%);position:absolute;top:0;left:0;z-index:0}.pano-tag-audio-popup-inline-player-elapsed-time.svelte-16y5k2u{position:absolute;z-index:1;font-weight:500;font-size:0.875rem;color:#ffffff;line-height:1.25rem;padding-left:0.25rem}")}function i6(i){let e,t,n,o,s,r,a,l,c,h,d,u;return n=new Ql({props:{playing:i[0],width:24}}),{c(){e=U("div"),t=U("div"),de(n.$$.fragment),o=re(),s=U("div"),r=U("div"),a=re(),l=U("div"),c=Te(i[1]),b(t,"class","pano-tag-audio-popup-inline-player-icon svelte-16y5k2u"),b(r,"class","pano-tag-audio-popup-inline-player-progress-bar svelte-16y5k2u"),N(r,"width",i[2]+"%"),b(l,"class","pano-tag-audio-popup-inline-player-elapsed-time svelte-16y5k2u"),b(s,"class","pano-tag-audio-popup-inline-player-progress svelte-16y5k2u"),b(e,"class","pano-tag-audio-popup-inline-player-wrapper svelte-16y5k2u")},m(f,m){Y(f,e,m),H(e,t),le(n,t,null),H(e,o),H(e,s),H(s,r),H(s,a),H(s,l),H(l,c),h=!0,d||(u=Se(e,"click",G0(function(){oi(i[3])&&i[3].apply(this,arguments)})),d=!0)},p(f,[m]){i=f;const g={};m&1&&(g.playing=i[0]),n.$set(g),(!h||m&4)&&N(r,"width",i[2]+"%"),(!h||m&2)&&Ne(c,i[1])},i(f){h||(B(n.$$.fragment,f),h=!0)},o(f){G(n.$$.fragment,f),h=!1},d(f){f&&Q(e),ce(n),d=!1,u()}}}function n6(i,e,t){let{playing:n=!1}=e,{elapsedTime:o="00:00"}=e,{progress:s=0}=e,{onClick:r=()=>{}}=e;return i.$$set=a=>{"playing"in a&&t(0,n=a.playing),"elapsedTime"in a&&t(1,o=a.elapsedTime),"progress"in a&&t(2,s=a.progress),"onClick"in a&&t(3,r=a.onClick)},[n,o,s,r]}class o6 extends ye{constructor(e){super(),Ae(this,e,n6,i6,ve,{playing:0,elapsedTime:1,progress:2,onClick:3},t6)}}function s6(i){Ee(i,"svelte-817q8q",'@charset "UTF-8";.tag-popup.svelte-817q8q.svelte-817q8q.svelte-817q8q{position:absolute;pointer-events:auto;padding:0.625rem 0.625rem 0.625rem 1.125rem;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;transform-origin:center}.tag-popup-top.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(-50%, -100%);left:50%}.tag-popup-bottom.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(-50%, 0);left:50%}.tag-popup-left.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(-100%, -50%);top:50%}.tag-popup-right.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(0, -50%);top:50%}.tag-popup-top-left.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(calc(2.625rem - 100%), -100%)}.tag-popup-top-right.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(-2.625rem, -100%)}.tag-popup-bottom-left.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(calc(2.625rem - 100%), 0)}.tag-popup-bottom-right.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(-2.625rem, 0)}.tag-popup-left-top.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(-100%, -2.625rem)}.tag-popup-left-bottom.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(-100%, calc(2.625rem - 100%))}.tag-popup-right-top.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(0, -2.625rem)}.tag-popup-right-bottom.svelte-817q8q.svelte-817q8q.svelte-817q8q{transform:translate(0, calc(2.625rem - 100%))}.tag-popup-content.svelte-817q8q.svelte-817q8q.svelte-817q8q{position:relative;pointer-events:auto;cursor:pointer;padding:1.25rem;border-radius:0.375rem;max-width:17.5rem;width:17.5rem;background:rgba(0, 0, 0, 0.7490196078)}.tag-popup-top.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q,.tag-popup-top-left.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q,.tag-popup-top-right.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q{box-shadow:0.03125rem 0 0 0 rgba(255, 255, 255, 0.3), -0.03125rem 0 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-bottom.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q,.tag-popup-bottom-left.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q,.tag-popup-bottom-right.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q{box-shadow:0.03125rem 0 0 0 rgba(255, 255, 255, 0.3), -0.03125rem 0 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-left.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q,.tag-popup-left-top.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q,.tag-popup-left-bottom.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q{box-shadow:0 0.03125rem 0 0 rgba(255, 255, 255, 0.3), 0 -0.03125rem 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-right.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q,.tag-popup-right-top.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q,.tag-popup-right-bottom.svelte-817q8q .tag-popup-content.svelte-817q8q.svelte-817q8q{box-shadow:0 0.03125rem 0 0 rgba(255, 255, 255, 0.3), 0 -0.03125rem 0 0 rgba(255, 255, 255, 0.3)}.light.svelte-817q8q.svelte-817q8q.svelte-817q8q{background:#ffffff}.tag-popup-title.svelte-817q8q.svelte-817q8q.svelte-817q8q{margin:0;font-size:1rem;font-weight:600;line-height:1.375rem;letter-spacing:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;color:#ffffff}.light.svelte-817q8q .tag-popup-title.svelte-817q8q.svelte-817q8q{color:rgba(0, 0, 0, 0.8509803922)}.tag-popup-description.svelte-817q8q.svelte-817q8q.svelte-817q8q{margin:0;font-size:0.875rem;font-weight:400;color:#ffffff;line-height:1.25rem;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;max-height:5rem;overflow:hidden;word-wrap:break-word;word-break:break-word;text-overflow:ellipsis;white-space:pre-wrap}.light.svelte-817q8q .tag-popup-description.svelte-817q8q.svelte-817q8q{color:rgba(0, 0, 0, 0.8509803922)}.tag-popup-tags.svelte-817q8q.svelte-817q8q.svelte-817q8q{display:flex;align-items:center;margin:0;margin-bottom:0}.tag-popup-tags.svelte-817q8q .tag-popup-tag.svelte-817q8q+.tag-popup-tag.svelte-817q8q{margin-left:0.25rem}.tag-popup-tag.svelte-817q8q.svelte-817q8q.svelte-817q8q{padding:0.125rem 0.25rem;display:flex;align-items:center;justify-content:center;border-radius:0.25rem;font-size:0.75rem;line-height:1.125rem;letter-spacing:0;border-radius:0.125rem;max-width:7.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tag-popup-tag-primary.svelte-817q8q.svelte-817q8q.svelte-817q8q{color:#ffffff;background-image:linear-gradient(90deg, #ead09a 0%, #e0cca3 100%)}.light.svelte-817q8q .tag-popup-tag-primary.svelte-817q8q.svelte-817q8q{color:#946700;background-image:linear-gradient(90deg, #ead09a 0%, #e0cca3 100%)}.tag-popup-tag-secondary.svelte-817q8q.svelte-817q8q.svelte-817q8q{color:#ffffff;background:rgba(255, 255, 255, 0.1490196078)}.light.svelte-817q8q .tag-popup-tag-secondary.svelte-817q8q.svelte-817q8q{color:rgba(0, 0, 0, 0.5019607843);background:rgba(0, 0, 0, 0.0588235294)}.tag-popup-price.svelte-817q8q.svelte-817q8q.svelte-817q8q{font-family:DINAlternate-Bold;font-weight:700;font-size:1.25rem;color:#ae7900;letter-spacing:0;text-align:center;display:flex;justify-content:flex-start;align-items:center;width:100%;margin:0}.tag-popup-media.svelte-817q8q.svelte-817q8q.svelte-817q8q{width:15rem;height:10rem;margin:0 auto;overflow:hidden;border-radius:0.25rem;display:flex;align-items:center;justify-content:center;position:relative}.tag-popup-media.svelte-817q8q img.svelte-817q8q.svelte-817q8q{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;display:block}.tag-popup-media-type.svelte-817q8q.svelte-817q8q.svelte-817q8q{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);z-index:2}.tag-popup-media-index.svelte-817q8q.svelte-817q8q.svelte-817q8q{position:absolute;right:0.375rem;bottom:0.375rem;padding:0.0625rem 0.25rem;background:rgba(0, 0, 0, 0.5);border-radius:0.125rem;font-weight:bold;font-size:0.75rem;color:#ffffff;letter-spacing:0;line-height:1.125rem}.iframe-overlay.svelte-817q8q.svelte-817q8q.svelte-817q8q{position:absolute;top:0;left:0;width:100%;height:100%;background:transparent;z-index:10}.tag-popup-content.svelte-817q8q>.svelte-817q8q+.svelte-817q8q{margin-top:0.5rem}.tag-popup-content.svelte-817q8q>.svelte-817q8q.svelte-817q8q:first-child{margin-top:0 !important}')}const r6=i=>({}),Lm=i=>({}),a6=i=>({}),Tm=i=>({});function Om(i,e,t){const n=i.slice();return n[2]=e[t],n}function Rm(i,e,t){const n=i.slice();return n[2]=e[t],n}function Bm(i){let e,t;return{c(){e=U("h3"),t=Te(i[5]),b(e,"class","tag-popup-title svelte-817q8q")},m(n,o){Y(n,e,o),H(e,t)},p(n,o){o[0]&32&&Ne(t,n[5])},d(n){n&&Q(e)}}}function Hm(i){let e,t,n=i[4],o=[];for(let a=0;a<n.length;a+=1)o[a]=Nm(Rm(i,n,a));let s=i[13],r=[];for(let a=0;a<s.length;a+=1)r[a]=Fm(Om(i,s,a));return{c(){e=U("div");for(let a=0;a<o.length;a+=1)o[a].c();t=re();for(let a=0;a<r.length;a+=1)r[a].c();b(e,"class","tag-popup-tags svelte-817q8q")},m(a,l){Y(a,e,l);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);H(e,t);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null)},p(a,l){if(l[0]&16){n=a[4];let c;for(c=0;c<n.length;c+=1){const h=Rm(a,n,c);o[c]?o[c].p(h,l):(o[c]=Nm(h),o[c].c(),o[c].m(e,t))}for(;c<o.length;c+=1)o[c].d(1);o.length=n.length}if(l[0]&8192){s=a[13];let c;for(c=0;c<s.length;c+=1){const h=Om(a,s,c);r[c]?r[c].p(h,l):(r[c]=Fm(h),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=s.length}},d(a){a&&Q(e),un(o,a),un(r,a)}}}function Nm(i){let e,t=i[2]+"",n;return{c(){e=U("div"),n=Te(t),b(e,"class","tag-popup-tag tag-popup-tag-primary svelte-817q8q")},m(o,s){Y(o,e,s),H(e,n)},p(o,s){s[0]&16&&t!==(t=o[2]+"")&&Ne(n,t)},d(o){o&&Q(e)}}}function Fm(i){let e,t=i[2]+"",n;return{c(){e=U("div"),n=Te(t),b(e,"class","tag-popup-tag tag-popup-tag-secondary svelte-817q8q")},m(o,s){Y(o,e,s),H(e,n)},p(o,s){s[0]&8192&&t!==(t=o[2]+"")&&Ne(n,t)},d(o){o&&Q(e)}}}function l6(i){let e,t,n,o,s,r,a,l;r=new v1({});let c=i[15]>1&&Vm(i);return{c(){e=U("div"),t=U("video"),o=re(),s=U("div"),de(r.$$.fragment),a=re(),c&&c.c(),at(t.src,n=i[2].data.mediaData[0].url)||b(t,"src",n),b(t,"class","tag-popup-video-fallback"),t.controls=!1,t.autoplay=!1,t.muted=!0,t.loop=!0,b(t,"preload","metadata"),b(t,"disablepictureinpicture",""),t.playsInline=!0,N(t,"width","100%"),N(t,"height","100%"),N(t,"object-fit","cover"),b(s,"class","tag-popup-media-type svelte-817q8q"),b(e,"class","tag-popup-media svelte-817q8q")},m(h,d){Y(h,e,d),H(e,t),H(e,o),H(e,s),le(r,s,null),H(e,a),c&&c.m(e,null),l=!0},p(h,d){(!l||d[0]&4&&!at(t.src,n=h[2].data.mediaData[0].url))&&b(t,"src",n),h[15]>1?c?c.p(h,d):(c=Vm(h),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(h){l||(B(r.$$.fragment,h),l=!0)},o(h){G(r.$$.fragment,h),l=!1},d(h){h&&Q(e),ce(r),c&&c.d()}}}function c6(i){let e,t,n,o,s,r,a,l,c;const h=[u6,d6],d=[];function u(m,g){return m[7]?0:m[18]?1:-1}~(r=u(i))&&(a=d[r]=h[r](i));let f=i[15]>1&&Wm(i);return{c(){e=U("div"),t=U("img"),s=re(),a&&a.c(),l=re(),f&&f.c(),at(t.src,n=i[19])||b(t,"src",n),b(t,"alt",o=i[5]||""),b(t,"draggable","false"),b(t,"class","svelte-817q8q"),b(e,"class","tag-popup-media svelte-817q8q")},m(m,g){Y(m,e,g),H(e,t),H(e,s),~r&&d[r].m(e,null),H(e,l),f&&f.m(e,null),c=!0},p(m,g){(!c||g[0]&524288&&!at(t.src,n=m[19]))&&b(t,"src",n),(!c||g[0]&32&&o!==(o=m[5]||""))&&b(t,"alt",o);let v=r;r=u(m),r!==v&&(a&&(xe(),G(d[v],1,1,()=>{d[v]=null}),Ce()),~r?(a=d[r],a||(a=d[r]=h[r](m),a.c()),B(a,1),a.m(e,l)):a=null),m[15]>1?f?f.p(m,g):(f=Wm(m),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(m){c||(B(a),c=!0)},o(m){G(a),c=!1},d(m){m&&Q(e),~r&&d[r].d(),f&&f.d()}}}function h6(i){let e,t,n,o,s,r,a=i[15]>1&&Gm(i);return{c(){e=U("div"),t=U("iframe"),o=re(),s=U("div"),r=re(),a&&a.c(),b(t,"title",i[16]),at(t.src,n=i[17])||b(t,"src",n),b(t,"class","tag-popup-video-iframe"),b(t,"frameborder","0"),b(t,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),b(t,"referrerpolicy","strict-origin-when-cross-origin"),t.allowFullscreen=!0,N(t,"width","100%"),N(t,"height","100%"),N(t,"position","absolute"),N(t,"top","0"),N(t,"left","0"),b(s,"class","iframe-overlay svelte-817q8q"),b(e,"class","tag-popup-media svelte-817q8q")},m(l,c){Y(l,e,c),H(e,t),H(e,o),H(e,s),H(e,r),a&&a.m(e,null)},p(l,c){c[0]&65536&&b(t,"title",l[16]),c[0]&131072&&!at(t.src,n=l[17])&&b(t,"src",n),l[15]>1?a?a.p(l,c):(a=Gm(l),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:oe,o:oe,d(l){l&&Q(e),a&&a.d()}}}function Vm(i){let e,t,n,o;return{c(){e=U("div"),t=Te(i[14]),n=Te("/"),o=Te(i[15]),b(e,"class","tag-popup-media-index svelte-817q8q")},m(s,r){Y(s,e,r),H(e,t),H(e,n),H(e,o)},p(s,r){r[0]&16384&&Ne(t,s[14]),r[0]&32768&&Ne(o,s[15])},d(s){s&&Q(e)}}}function d6(i){let e,t,n;return t=new e6({}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","tag-popup-media-type svelte-817q8q")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function u6(i){let e,t,n;return t=new v1({}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","tag-popup-media-type svelte-817q8q")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function Wm(i){let e,t,n,o;return{c(){e=U("div"),t=Te(i[14]),n=Te("/"),o=Te(i[15]),b(e,"class","tag-popup-media-index svelte-817q8q")},m(s,r){Y(s,e,r),H(e,t),H(e,n),H(e,o)},p(s,r){r[0]&16384&&Ne(t,s[14]),r[0]&32768&&Ne(o,s[15])},d(s){s&&Q(e)}}}function Gm(i){let e,t,n,o;return{c(){e=U("div"),t=Te(i[14]),n=Te("/"),o=Te(i[15]),b(e,"class","tag-popup-media-index svelte-817q8q")},m(s,r){Y(s,e,r),H(e,t),H(e,n),H(e,o)},p(s,r){r[0]&16384&&Ne(t,s[14]),r[0]&32768&&Ne(o,s[15])},d(s){s&&Q(e)}}}function Qm(i){let e,t;return{c(){e=U("div"),t=Te(i[20]),b(e,"class","tag-popup-description svelte-817q8q")},m(n,o){Y(n,e,o),H(e,t)},p(n,o){o[0]&1048576&&Ne(t,n[20])},d(n){n&&Q(e)}}}function Um(i){let e,t,n;return t=new o6({props:{playing:i[1],progress:i[9],elapsedTime:i[10],onClick:i[22]}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","tag-popup-audio-player-wrapper svelte-817q8q")},m(o,s){Y(o,e,s),le(t,e,null),n=!0},p(o,s){const r={};s[0]&2&&(r.playing=o[1]),s[0]&512&&(r.progress=o[9]),s[0]&1024&&(r.elapsedTime=o[10]),t.$set(r)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){o&&Q(e),ce(t)}}}function Xm(i){let e,t,n,o,s=i[11]&&Ym(i);return{c(){e=U("div"),s&&s.c(),t=re(),n=U("span"),o=Te(i[12]),b(n,"class","tag-popup-price-value"),b(e,"class","tag-popup-price svelte-817q8q")},m(r,a){Y(r,e,a),s&&s.m(e,null),H(e,t),H(e,n),H(n,o)},p(r,a){r[11]?s?s.p(r,a):(s=Ym(r),s.c(),s.m(e,t)):s&&(s.d(1),s=null),a[0]&4096&&Ne(o,r[12])},d(r){r&&Q(e),s&&s.d()}}}function Ym(i){let e,t;return{c(){e=U("span"),t=Te(i[11]),b(e,"class","tag-popup-price-unit")},m(n,o){Y(n,e,o),H(e,t)},p(n,o){o[0]&2048&&Ne(t,n[11])},d(n){n&&Q(e)}}}function p6(i){let e,t,n,o,s,r,a,l,c,h,d,u,f,m,g=i[5]&&Bm(i),v=i[3]&&(i[4].length>0||i[13].length>0)&&Hm(i);const A=[h6,c6,l6],w=[];function P(C,x){var S;return C[6]&&C[17]?0:C[19]?1:C[7]&&C[2].data.mediaData&&(S=C[2].data.mediaData[0])!=null&&S.url?2:-1}~(s=P(i))&&(r=w[s]=A[s](i));let I=i[20]&&Qm(i),j=i[8]&&Um(i),D=i[12]&&Xm(i);const T=i[38].toolbar,M=uo(T,i,i[37],Tm),O=i[38].arrow,y=uo(O,i,i[37],Lm);return{c(){e=U("div"),t=U("div"),g&&g.c(),n=re(),v&&v.c(),o=re(),r&&r.c(),a=re(),I&&I.c(),l=re(),j&&j.c(),c=re(),D&&D.c(),h=re(),M&&M.c(),d=re(),y&&y.c(),b(t,"class",u="tag-popup-content "+i[21]+" svelte-817q8q"),b(e,"class",f="tag-popup tag-popup-"+i[0]+" svelte-817q8q")},m(C,x){Y(C,e,x),H(e,t),g&&g.m(t,null),H(t,n),v&&v.m(t,null),H(t,o),~s&&w[s].m(t,null),H(t,a),I&&I.m(t,null),H(t,l),j&&j.m(t,null),H(t,c),D&&D.m(t,null),H(t,h),M&&M.m(t,null),H(t,d),y&&y.m(t,null),m=!0},p(C,x){C[5]?g?g.p(C,x):(g=Bm(C),g.c(),g.m(t,n)):g&&(g.d(1),g=null),C[3]&&(C[4].length>0||C[13].length>0)?v?v.p(C,x):(v=Hm(C),v.c(),v.m(t,o)):v&&(v.d(1),v=null);let S=s;s=P(C),s===S?~s&&w[s].p(C,x):(r&&(xe(),G(w[S],1,1,()=>{w[S]=null}),Ce()),~s?(r=w[s],r?r.p(C,x):(r=w[s]=A[s](C),r.c()),B(r,1),r.m(t,a)):r=null),C[20]?I?I.p(C,x):(I=Qm(C),I.c(),I.m(t,l)):I&&(I.d(1),I=null),C[8]?j?(j.p(C,x),x[0]&256&&B(j,1)):(j=Um(C),j.c(),B(j,1),j.m(t,c)):j&&(xe(),G(j,1,1,()=>{j=null}),Ce()),C[12]?D?D.p(C,x):(D=Xm(C),D.c(),D.m(t,h)):D&&(D.d(1),D=null),M&&M.p&&(!m||x[1]&64)&&fo(M,T,C,C[37],m?po(T,C[37],x,a6):mo(C[37]),Tm),y&&y.p&&(!m||x[1]&64)&&fo(y,O,C,C[37],m?po(O,C[37],x,r6):mo(C[37]),Lm),(!m||x[0]&2097152&&u!==(u="tag-popup-content "+C[21]+" svelte-817q8q"))&&b(t,"class",u),(!m||x[0]&1&&f!==(f="tag-popup tag-popup-"+C[0]+" svelte-817q8q"))&&b(e,"class",f)},i(C){m||(B(r),B(j),B(M,C),B(y,C),m=!0)},o(C){G(r),G(j),G(M,C),G(y,C),m=!1},d(C){C&&Q(e),g&&g.d(),v&&v.d(),~s&&w[s].d(),I&&I.d(),j&&j.d(),D&&D.d(),M&&M.d(C),y&&y.d(C)}}}function f6(i){const e=Math.floor(i/60),t=Math.floor(i%60);return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}function m6(i,e,t){let n,o,s,r,a,l,c,h,d,u,f,m,g,v,A,w,P,I,j,D,T,M,O,y,C,x,{$$slots:S={},$$scope:k}=e,{tag:z}=e,{config:q={}}=e,{theme:X=void 0}=e,{placement:$="right-top"}=e,{audioInstance:ne=null}=e,{audioPlaying:_=!1}=e,{audioCurrentTime:se=0}=e,{audioDuration:K=0}=e,me=0,De="00:00",he=null,je=0,ze=0;function Pe(){return K>0?se/K*100:0}function Le(){if(!_||K<=0){he=null;return}const Ie=(Date.now()-je)/1e3,Ve=se+Ie,ue=Math.min(Ve/K*100,100)-ze;Math.abs(ue)>.05&&(ze+=ue*.2),he=requestAnimationFrame(Le)}function ie(){if(!o)return;const Ie=Pe();K>0?(_||(ze=Ie),t(9,me=ze),t(10,De=f6(ze/100*K)),je=Date.now()):(ze=0,t(9,me=0),t(10,De="00:00"))}function Me(){_&&K>0?he||Le():he&&(cancelAnimationFrame(he),he=null)}function Fe(){ne&&(ne.paused?ne.play():ne.pause())}return Hi(()=>{he&&(cancelAnimationFrame(he),he=null)}),i.$$set=Ie=>{"tag"in Ie&&t(2,z=Ie.tag),"config"in Ie&&t(23,q=Ie.config),"theme"in Ie&&t(24,X=Ie.theme),"placement"in Ie&&t(0,$=Ie.placement),"audioInstance"in Ie&&t(25,ne=Ie.audioInstance),"audioPlaying"in Ie&&t(1,_=Ie.audioPlaying),"audioCurrentTime"in Ie&&t(26,se=Ie.audioCurrentTime),"audioDuration"in Ie&&t(27,K=Ie.audioDuration),"$$scope"in Ie&&t(37,k=Ie.$$scope)},i.$$.update=()=>{var Ie,Ve,ue,be,Je,nt;i.$$.dirty[0]&4&&t(3,n=z.contentType==="Marketing"),i.$$.dirty[0]&4&&t(8,o=z.contentType==="Audio"),i.$$.dirty[0]&8&&t(36,s=n?"light":"dark"),i.$$.dirty[0]&16777220|i.$$.dirty[1]&32&&t(21,r=z.data.theme!==void 0&&z.data.theme!==null?z.data.theme:X??s),i.$$.dirty[0]&4&&t(35,a=z.data.title||z.data.name||""),i.$$.dirty[0]&4&&t(34,l=z.data.description||z.data.tooltip||""),i.$$.dirty[1]&16&&t(5,c=a||""),i.$$.dirty[1]&8&&t(20,h=l||""),i.$$.dirty[0]&201326594&&ie(),i.$$.dirty[0]&134217730&&Me(),i.$$.dirty[0]&268&&t(33,d=(()=>{var At,zt,yt,gi,Fi,Jt,Vi,Hn,vi,Ii,Wi;if(o||n)return null;if(z.data.mediaData&&z.data.mediaData.length>0){const ft=z.data.mediaData[0];if(ft.type==="Video"){if(ft.videoCoverUrl)return ft.videoCoverUrl;if(ft.url){const ai=ft.url.toLowerCase();if(ah(ai)){const li=Qv(ai);if(li)return`https://img.youtube.com/vi/${li}/hqdefault.jpg`}if(lh(ai)){const li=Uv(ai);if(li)return`https://vumbnail.com/${li}.jpg`}return}}if(z.contentType==="Panorama")return(Wi=(Vi=(yt=(zt=(At=z.data.mediaData)==null?void 0:At[0])==null?void 0:zt.cube)==null?void 0:yt.front)!=null?Vi:(Jt=(Fi=(gi=z.data.mediaData)==null?void 0:gi[0])==null?void 0:Fi.thumbnail)==null?void 0:Jt.split("?")[0])!=null?Wi:(Ii=(vi=(Hn=z.data.mediaData)==null?void 0:Hn[0])==null?void 0:vi.url)==null?void 0:Ii.split("?")[0];if(ft.url||ft.thumbnail)return ft.url||ft.thumbnail}return z.data.imageUrl})()),i.$$.dirty[0]&8388612|i.$$.dirty[1]&4&&t(19,u=q!=null&&q.imageURLTransform&&(d!=null&&d.includes("realsee-cdn")||d!=null&&d.includes("ljcdn.com"))?q.imageURLTransform(d,{width:280,height:280}):d||z.data.mediaUrl||""),i.$$.dirty[0]&4&&t(7,f=z.contentType==="Video"||z.data.mediaType==="video"),i.$$.dirty[0]&4&&t(18,m=z.contentType==="Panorama"||z.data.mediaType==="panorama"),i.$$.dirty[0]&132&&t(32,g=f&&z.data.mediaData&&((Ie=z.data.mediaData[0])==null?void 0:Ie.url)&&ah(z.data.mediaData[0].url)),i.$$.dirty[0]&132&&t(31,v=f&&z.data.mediaData&&((Ve=z.data.mediaData[0])==null?void 0:Ve.url)&&lh(z.data.mediaData[0].url)),i.$$.dirty[1]&3&&t(6,A=g||v),i.$$.dirty[0]&68&&t(17,w=A&&z.data.mediaData&&(ue=z.data.mediaData[0])!=null&&ue.url?_8(z.data.mediaData[0].url,{autoplay:0}):""),i.$$.dirty[0]&32|i.$$.dirty[1]&3&&t(16,P=g?"YouTube video player":v?"Vimeo video player":c),i.$$.dirty[0]&4&&t(15,I=((be=z.data.mediaData)==null?void 0:be.length)||0),i.$$.dirty[0]&12&&t(30,D=n?z.data.brandTags||[]:[]),i.$$.dirty[0]&12&&t(29,T=n?z.data.tags||[]:[]),i.$$.dirty[0]&1073741824&&t(4,M=D.filter(Boolean).slice(0,2)),i.$$.dirty[0]&16&&t(28,O=Math.max(0,2-M.length)),i.$$.dirty[0]&805306368&&t(13,y=O>0?T.filter(Boolean).slice(0,O):[]),i.$$.dirty[0]&12&&t(12,C=n&&((Je=z.data.price)==null?void 0:Je.value)||""),i.$$.dirty[0]&12&&t(11,x=n&&((nt=z.data.price)==null?void 0:nt.unit)||"")},t(14,j=1),[$,_,z,n,M,c,A,f,o,me,De,x,C,y,j,I,P,w,m,u,h,r,Fe,q,X,ne,se,K,O,T,D,v,g,d,l,a,s,k,S]}class g6 extends ye{constructor(e){super(),Ae(this,e,m6,p6,ve,{tag:2,config:23,theme:24,placement:0,audioInstance:25,audioPlaying:1,audioCurrentTime:26,audioDuration:27},s6,[-1,-1])}}function v6(i){let e,t,n,o,s,r,a,l,c,h,d,u,f;return{c(){e=ge("svg"),t=ge("defs"),n=ge("linearGradient"),o=ge("stop"),s=ge("stop"),a=ge("linearGradient"),l=ge("stop"),c=ge("stop"),d=ge("path"),b(o,"stop-color",i[1]),b(o,"offset","0%"),b(s,"stop-color",i[1]),b(s,"stop-opacity",".5"),b(s,"offset","100%"),b(n,"id",r="arrow-right-icon-gradient-"+i[1]),b(n,"x1","96.2%"),b(n,"y1","50%"),b(n,"x2","0%"),b(n,"y2","50%"),b(l,"stop-color",i[1]),b(l,"offset","0%"),b(c,"stop-color",i[1]),b(c,"stop-opacity","0"),b(c,"offset","100%"),b(a,"id",h="arrow-right-icon-stroke-"+i[1]),b(a,"x1","50%"),b(a,"y1","9.83%"),b(a,"x2","41.99%"),b(a,"y2","24.46%"),b(d,"d","M4.84572153,2.14166669 C4.94036186,2.14170036 5.03490004,2.17870347 5.10676798,2.25203341 L9.39516942,6.66308361 C9.48635681,6.75687897 9.53195051,6.87843949 9.53195051,7 C9.53195051,7.12156051 9.48635681,7.24312103 9.39516942,7.33691639 L5.11673708,11.7390017 C5.02118573,11.813978 4.92122439,11.8514005 4.82705048,11.851434 C4.73517505,11.8514667 4.65029153,11.8150862 4.59276829,11.7576692 C4.51856427,11.6593496 4.48179951,11.5564146 4.48176638,11.4595899 C4.48173399,11.3649536 4.51747117,11.2773335 4.58937836,11.2035272 L7.74273899,7.43877755 C7.84906128,7.31184097 7.90222243,7.15592048 7.90222243,7 C7.90222243,6.84407952 7.84906128,6.68815903 7.74273449,6.56121708 L4.54804918,2.74803934 C4.65338339,2.20863952 4.74441906,2.14163065 4.84572153,2.14166669 Z"),b(d,"fill",u=`url(#arrow-right-icon-gradient-${i[1]})`),b(d,"fill-rule","nonzero"),b(d,"stroke",f=`url(#arrow-right-icon-stroke-${i[1]})`),b(d,"stroke-width",".2"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 14 14"),b(e,"width",i[0]),b(e,"height",i[0]),N(e,"opacity",i[2])},m(m,g){Y(m,e,g),H(e,t),H(t,n),H(n,o),H(n,s),H(t,a),H(a,l),H(a,c),H(e,d)},p(m,[g]){g&2&&b(o,"stop-color",m[1]),g&2&&b(s,"stop-color",m[1]),g&2&&r!==(r="arrow-right-icon-gradient-"+m[1])&&b(n,"id",r),g&2&&b(l,"stop-color",m[1]),g&2&&b(c,"stop-color",m[1]),g&2&&h!==(h="arrow-right-icon-stroke-"+m[1])&&b(a,"id",h),g&2&&u!==(u=`url(#arrow-right-icon-gradient-${m[1]})`)&&b(d,"fill",u),g&2&&f!==(f=`url(#arrow-right-icon-stroke-${m[1]})`)&&b(d,"stroke",f),g&1&&b(e,"width",m[0]),g&1&&b(e,"height",m[0]),g&4&&N(e,"opacity",m[2])},i:oe,o:oe,d(m){m&&Q(e)}}}function A6(i,e,t){let{size:n="14"}=e,{color:o="#ffffff"}=e,{opacity:s=1}=e;return i.$$set=r=>{"size"in r&&t(0,n=r.size),"color"in r&&t(1,o=r.color),"opacity"in r&&t(2,s=r.opacity)},[n,o,s]}class y6 extends ye{constructor(e){super(),Ae(this,e,A6,v6,ve,{size:0,color:1,opacity:2})}}function b6(i){let e,t,n,o,s,r,a,l,c,h,d,u,f;return{c(){e=ge("svg"),t=ge("defs"),n=ge("linearGradient"),o=ge("stop"),s=ge("stop"),a=ge("linearGradient"),l=ge("stop"),c=ge("stop"),d=ge("path"),b(o,"stop-color",i[1]),b(o,"offset","0%"),b(s,"stop-color",i[1]),b(s,"stop-opacity",".5"),b(s,"offset","100%"),b(n,"id",r="share-icon-gradient-"+i[1]),b(n,"x1","41.65%"),b(n,"y1","59.05%"),b(n,"x2","66.13%"),b(n,"y2","9.07%"),b(l,"stop-color",i[1]),b(l,"offset","0%"),b(c,"stop-color",i[1]),b(c,"stop-opacity","0"),b(c,"offset","100%"),b(a,"id",h="share-icon-stroke-"+i[1]),b(a,"x1","55.68%"),b(a,"y1","2.48%"),b(a,"x2","60.83%"),b(a,"y2","14.28%"),b(d,"d","M12.4937515,2.60140991 L12.6834904,2.60248871 C13.307774,2.63121157 13.9222065,2.90874077 14.3642696,3.436433 C14.7794904,3.93278385 14.923342,4.60854408 14.8265514,5.24548738 C14.7279361,5.89144103 14.4428997,6.3527969 14.063774,6.65956953 C13.6079793,7.02837949 13.0189069,7.17403325 12.4632035,7.15562178 C11.7380729,7.13162078 11.0390809,7.42803145 10.5261758,7.9357119 C9.96083448,8.49643643 9.67596892,9.19792997 9.69443632,9.91942004 C9.66449732,10.8859455 9.96309104,11.5807243 10.4796578,12.092029 C11.0239965,12.6296813 11.7402488,12.9101676 12.4817091,12.8884813 C13.0940469,12.8705618 13.7481304,13.0495781 14.2150699,13.5117611 C14.6987029,13.9904677 14.9268415,14.6256711 14.8974895,15.2508921 C14.8684928,15.868544 14.5880857,16.4761837 14.055365,16.9134138 C13.5533941,17.3248246 12.8689122,17.4672624 12.2258037,17.3713572 C11.5727886,17.2736846 11.1063284,16.991503 10.7961882,16.6159844 C10.4239402,16.1652655 10.2768519,15.5827583 10.2954352,15.0332376 C10.3197006,14.3149783 10.0202124,13.6224897 9.50703789,13.1145427 C8.94671715,12.5587885 8.2455275,12.2800717 7.51547371,12.2927077 C7.23521908,12.3053648 6.95603622,12.2673623 6.69423123,12.1827116 C6.1605306,11.9588888 5.9529663,11.8380114 5.77703284,11.66387 C5.40155143,11.2922134 5.1829777,10.8272392 5.11950899,10.3459077 C5.05433663,9.85165608 5.15259721,9.34024891 5.41443015,8.89062791 C5.61688125,8.49864777 5.91421421,8.21950306 6.25529625,8.03627882 C6.64911257,7.8247265 7.1008248,7.74055154 7.53306889,7.75691992 L7.73219905,7.75624362 C8.39290266,7.7280909 9.01896921,7.44343917 9.49037385,6.97683639 C10.0339806,6.43762468 10.3173723,5.72806794 10.2954528,4.99382841 C10.2784266,4.38712951 10.4592448,3.74020534 10.9258673,3.27833603 C11.4093877,2.79921041 12.051472,2.57340998 12.6834904,2.60248871 Z"),b(d,"fill",u=`url(#share-icon-gradient-${i[1]})`),b(d,"fill-rule","nonzero"),b(d,"stroke",f=`url(#share-icon-stroke-${i[1]})`),b(d,"stroke-width",".2"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"viewBox","0 0 20 20"),b(e,"width",i[0]),b(e,"height",i[0]),N(e,"opacity",i[2])},m(m,g){Y(m,e,g),H(e,t),H(t,n),H(n,o),H(n,s),H(t,a),H(a,l),H(a,c),H(e,d)},p(m,[g]){g&2&&b(o,"stop-color",m[1]),g&2&&b(s,"stop-color",m[1]),g&2&&r!==(r="share-icon-gradient-"+m[1])&&b(n,"id",r),g&2&&b(l,"stop-color",m[1]),g&2&&b(c,"stop-color",m[1]),g&2&&h!==(h="share-icon-stroke-"+m[1])&&b(a,"id",h),g&2&&u!==(u=`url(#share-icon-gradient-${m[1]})`)&&b(d,"fill",u),g&2&&f!==(f=`url(#share-icon-stroke-${m[1]})`)&&b(d,"stroke",f),g&1&&b(e,"width",m[0]),g&1&&b(e,"height",m[0]),g&4&&N(e,"opacity",m[2])},i:oe,o:oe,d(m){m&&Q(e)}}}function w6(i,e,t){let{size:n="20"}=e,{color:o="#ffffff"}=e,{opacity:s=1}=e;return i.$$set=r=>{"size"in r&&t(0,n=r.size),"color"in r&&t(1,o=r.color),"opacity"in r&&t(2,s=r.opacity)},[n,o,s]}class x6 extends ye{constructor(e){super(),Ae(this,e,w6,b6,ve,{size:0,color:1,opacity:2})}}function C6(i){Ee(i,"svelte-18owx9v",".tag-popover-toolbar.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;margin-top:0.75rem;padding-top:0;border-top:none}.tag-popover-toolbar.both-buttons.svelte-18owx9v.svelte-18owx9v{justify-content:space-between}.tag-popover-toolbar.single-button.svelte-18owx9v.svelte-18owx9v{justify-content:flex-end}.tag-popover-toolbar-dark.svelte-18owx9v .tag-popover-btn.svelte-18owx9v{color:#ffffff}.tag-popover-toolbar-light.svelte-18owx9v .tag-popover-btn.svelte-18owx9v{color:rgba(0, 0, 0, 0.85)}.tag-popover-btn.view-more.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;justify-content:center;font-weight:500;font-size:0.875rem;letter-spacing:0;line-height:1.25rem}.tag-popover-btn.share.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem}")}function qm(i){let e,t,n,o,s=i[0].showMore&&Zm(i),r=i[0].showShare&&Jm(i);return{c(){e=U("div"),s&&s.c(),t=re(),r&&r.c(),b(e,"class",n="tag-popover-toolbar tag-popover-toolbar-"+i[1]+" "+(i[0].showMore&&i[0].showShare?"both-buttons":"single-button")+" svelte-18owx9v")},m(a,l){Y(a,e,l),s&&s.m(e,null),H(e,t),r&&r.m(e,null),o=!0},p(a,l){a[0].showMore?s?(s.p(a,l),l&1&&B(s,1)):(s=Zm(a),s.c(),B(s,1),s.m(e,t)):s&&(xe(),G(s,1,1,()=>{s=null}),Ce()),a[0].showShare?r?(r.p(a,l),l&1&&B(r,1)):(r=Jm(a),r.c(),B(r,1),r.m(e,null)):r&&(xe(),G(r,1,1,()=>{r=null}),Ce()),(!o||l&3&&n!==(n="tag-popover-toolbar tag-popover-toolbar-"+a[1]+" "+(a[0].showMore&&a[0].showShare?"both-buttons":"single-button")+" svelte-18owx9v"))&&b(e,"class",n)},i(a){o||(B(s),B(r),o=!0)},o(a){G(s),G(r),o=!1},d(a){a&&Q(e),s&&s.d(),r&&r.d()}}}function Zm(i){let e,t,n,o,s,r,a;return o=new y6({props:{size:"14",color:i[1]==="light"?"#000000":"#ffffff",opacity:i[1]==="light"?.8:1}}),{c(){e=U("div"),t=Te(i[2]),n=re(),de(o.$$.fragment),b(e,"class","tag-popover-btn view-more svelte-18owx9v")},m(l,c){Y(l,e,c),H(e,t),H(e,n),le(o,e,null),s=!0,r||(a=Se(e,"click",i[3]),r=!0)},p(l,c){(!s||c&4)&&Ne(t,l[2]);const h={};c&2&&(h.color=l[1]==="light"?"#000000":"#ffffff"),c&2&&(h.opacity=l[1]==="light"?.8:1),o.$set(h)},i(l){s||(B(o.$$.fragment,l),s=!0)},o(l){G(o.$$.fragment,l),s=!1},d(l){l&&Q(e),ce(o),r=!1,a()}}}function Jm(i){let e,t,n,o,s;return t=new x6({props:{size:"20",color:i[1]==="light"?"#000000":"#ffffff",opacity:i[1]==="light"?.8:1}}),{c(){e=U("div"),de(t.$$.fragment),b(e,"class","tag-popover-btn share svelte-18owx9v")},m(r,a){Y(r,e,a),le(t,e,null),n=!0,o||(s=Se(e,"click",i[4]),o=!0)},p(r,a){const l={};a&2&&(l.color=r[1]==="light"?"#000000":"#ffffff"),a&2&&(l.opacity=r[1]==="light"?.8:1),t.$set(l)},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){G(t.$$.fragment,r),n=!1},d(r){r&&Q(e),ce(t),o=!1,s()}}}function P6(i){let e,t,n=(i[0].showMore||i[0].showShare)&&qm(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[0].showMore||o[0].showShare?n?(n.p(o,s),s&1&&B(n,1)):(n=qm(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function E6(i,e,t){let n;const o=pn("hooks");Bn();let{tag:s}=e,{toolbar:r={showMore:!0,showShare:!0}}=e,{theme:a="dark"}=e,{closePopover:l=void 0}=e;Zt(()=>{o.emit("popoverToolbarShow",{tag:s})});function c(d){d.stopPropagation(),typeof l=="function"&&l(),o.emit("click",{event:d,target:"TagPopoverViewMore",tag:s})}function h(d){d.stopPropagation(),typeof l=="function"&&l(),o.emit("click",{event:d,target:"TagPopoverShare",tag:s})}return i.$$set=d=>{"tag"in d&&t(5,s=d.tag),"toolbar"in d&&t(0,r=d.toolbar),"theme"in d&&t(1,a=d.theme),"closePopover"in d&&t(6,l=d.closePopover)},i.$$.update=()=>{i.$$.dirty&32&&t(2,n=(()=>Be(s.data.highlightText)&&s.data.highlightText.trim()!==""?s.data.highlightText:Be(s.config.popoverConfig.viewMoreText)&&s.config.popoverConfig.viewMoreText.trim()!==""?s.config.popoverConfig.viewMoreText:"查看更多")())},[r,a,n,c,h,s,l]}class I6 extends ye{constructor(e){super(),Ae(this,e,E6,P6,ve,{tag:5,toolbar:0,theme:1,closePopover:6},C6)}}function M6(i){let e,t;return e=new I6({props:{toolbar:{showMore:i[7].showMore===void 0?!0:i[7].showMore,showShare:i[7].showShare===void 0?!0:i[7].showShare},theme:i[2],tag:i[4],closePopover:i[8]}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&128&&(s.toolbar={showMore:n[7].showMore===void 0?!0:n[7].showMore,showShare:n[7].showShare===void 0?!0:n[7].showShare}),o&4&&(s.theme=n[2]),o&16&&(s.tag=n[4]),o&256&&(s.closePopover=n[8]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function S6(i){let e,t,n,o;return e=new YI({props:{show:i[0],direction:i[1],theme:i[2]}}),n=new g6({props:{placement:i[3],tag:i[4],config:i[5],theme:i[6],audioInstance:i[9],audioPlaying:i[10],audioCurrentTime:i[11],audioDuration:i[12],$$slots:{toolbar:[M6]},$$scope:{ctx:i}}}),n.$on("resize",i[13]),{c(){de(e.$$.fragment),t=re(),de(n.$$.fragment)},m(s,r){le(e,s,r),Y(s,t,r),le(n,s,r),o=!0},p(s,[r]){const a={};r&1&&(a.show=s[0]),r&2&&(a.direction=s[1]),r&4&&(a.theme=s[2]),e.$set(a);const l={};r&8&&(l.placement=s[3]),r&16&&(l.tag=s[4]),r&32&&(l.config=s[5]),r&64&&(l.theme=s[6]),r&512&&(l.audioInstance=s[9]),r&1024&&(l.audioPlaying=s[10]),r&2048&&(l.audioCurrentTime=s[11]),r&4096&&(l.audioDuration=s[12]),r&16788&&(l.$$scope={dirty:r,ctx:s}),n.$set(l)},i(s){o||(B(e.$$.fragment,s),B(n.$$.fragment,s),o=!0)},o(s){G(e.$$.fragment,s),G(n.$$.fragment,s),o=!1},d(s){ce(e,s),s&&Q(t),ce(n,s)}}}function D6(i,e,t){let{showArrow:n}=e,{arrowDirection:o}=e,{effectiveTheme:s}=e,{adjustedPlacement:r}=e,{tag:a}=e,{config:l}=e,{theme:c}=e,{toolbar:h}=e,{closePopover:d}=e,{audioInstance:u=null}=e,{audioPlaying:f=!1}=e,{audioCurrentTime:m=0}=e,{audioDuration:g=0}=e;function v(A){On.call(this,i,A)}return i.$$set=A=>{"showArrow"in A&&t(0,n=A.showArrow),"arrowDirection"in A&&t(1,o=A.arrowDirection),"effectiveTheme"in A&&t(2,s=A.effectiveTheme),"adjustedPlacement"in A&&t(3,r=A.adjustedPlacement),"tag"in A&&t(4,a=A.tag),"config"in A&&t(5,l=A.config),"theme"in A&&t(6,c=A.theme),"toolbar"in A&&t(7,h=A.toolbar),"closePopover"in A&&t(8,d=A.closePopover),"audioInstance"in A&&t(9,u=A.audioInstance),"audioPlaying"in A&&t(10,f=A.audioPlaying),"audioCurrentTime"in A&&t(11,m=A.audioCurrentTime),"audioDuration"in A&&t(12,g=A.audioDuration)},[n,o,s,r,a,l,c,h,d,u,f,m,g,v]}class k6 extends ye{constructor(e){super(),Ae(this,e,D6,S6,ve,{showArrow:0,arrowDirection:1,effectiveTheme:2,adjustedPlacement:3,tag:4,config:5,theme:6,toolbar:7,closePopover:8,audioInstance:9,audioPlaying:10,audioCurrentTime:11,audioDuration:12})}}function z6(i){Ee(i,"svelte-11cjg3j",'@charset "UTF-8";.tag-popover.svelte-11cjg3j{position:absolute;z-index:1000010;pointer-events:auto;width:auto;height:auto;padding:0;margin:0;visibility:visible;opacity:1}.tag-popover-content.svelte-11cjg3j{cursor:pointer;pointer-events:auto}.tag-popover-content.audio-tag-popover.svelte-11cjg3j{cursor:default}')}function Km(i){let e,t,n,o,s,r,a,l,c;return n=new k6({props:{showArrow:i[13],arrowDirection:i[12],effectiveTheme:i[18],adjustedPlacement:i[8],tag:i[0],config:i[1],theme:i[2],toolbar:i[16],audioInstance:i[4],audioPlaying:i[5],audioCurrentTime:i[6],audioDuration:i[7],closePopover:i[24]}}),n.$on("viewMore",i[20]),n.$on("share",i[21]),n.$on("resize",i[22]),{c(){e=U("div"),t=U("div"),de(n.$$.fragment),b(t,"class","tag-popover-content svelte-11cjg3j"),we(t,"audio-tag-popover",i[11]),b(e,"class",s="tag-popover tag-popover-"+i[18]+" tag-popover-"+i[8]+" svelte-11cjg3j"),b(e,"data-tag-id",r=i[0].id),N(e,"z-index",i[17]),N(e,"left",i[14].x+"px"),N(e,"top",i[14].y+"px")},m(h,d){Y(h,e,d),H(e,t),le(n,t,null),i[35](t),i[36](e),a=!0,l||(c=[Se(t,"mouseenter",i[33]),Se(t,"mouseleave",i[34]),Se(t,"click",i[23])],l=!0)},p(h,d){i=h;const u={};d[0]&8192&&(u.showArrow=i[13]),d[0]&4096&&(u.arrowDirection=i[12]),d[0]&262144&&(u.effectiveTheme=i[18]),d[0]&256&&(u.adjustedPlacement=i[8]),d[0]&1&&(u.tag=i[0]),d[0]&2&&(u.config=i[1]),d[0]&4&&(u.theme=i[2]),d[0]&65536&&(u.toolbar=i[16]),d[0]&16&&(u.audioInstance=i[4]),d[0]&32&&(u.audioPlaying=i[5]),d[0]&64&&(u.audioCurrentTime=i[6]),d[0]&128&&(u.audioDuration=i[7]),n.$set(u),(!a||d[0]&2048)&&we(t,"audio-tag-popover",i[11]),(!a||d[0]&262400&&s!==(s="tag-popover tag-popover-"+i[18]+" tag-popover-"+i[8]+" svelte-11cjg3j"))&&b(e,"class",s),(!a||d[0]&1&&r!==(r=i[0].id))&&b(e,"data-tag-id",r),(!a||d[0]&131072)&&N(e,"z-index",i[17]),(!a||d[0]&16384)&&N(e,"left",i[14].x+"px"),(!a||d[0]&16384)&&N(e,"top",i[14].y+"px")},i(h){a||(B(n.$$.fragment,h),kt(()=>{a&&(o||(o=Ri(t,i[19],{duration:i[15],easing:Wr,y:i[12]==="top"?-8:i[12]==="bottom"?8:0,x:i[12]==="left"?-8:i[12]==="right"?8:0},!0)),o.run(1))}),a=!0)},o(h){G(n.$$.fragment,h),o||(o=Ri(t,i[19],{duration:i[15],easing:Wr,y:i[12]==="top"?-8:i[12]==="bottom"?8:0,x:i[12]==="left"?-8:i[12]==="right"?8:0},!1)),o.run(0),a=!1},d(h){h&&Q(e),ce(n),i[35](null),h&&o&&o.end(),i[36](null),l=!1,lt(c)}}}function j6(i){let e,t,n=i[3]&&i[14]&&Km(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,s){o[3]&&o[14]?n?(n.p(o,s),s[0]&16392&&B(n,1)):(n=Km(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function L6(i,e,t){let n,o,s,r,a,l,c,h,d,u;const f=pn("hooks");let{tag:m}=e,{config:g={}}=e,{triggerElement:v}=e,{wrapperElement:A=document.body}=e,{popoverContainer:w=null}=e,{theme:P=void 0}=e,{visible:I=!0}=e,{closePopover:j=void 0}=e,{audioInstance:D=null}=e,{audioPlaying:T=!1}=e,{audioCurrentTime:M=0}=e,{audioDuration:O=0}=e;const y=Bn();let C,x={width:0,height:0},S=null,k=o;function z(ie,{duration:Me=400,easing:Fe=Wr,x:Ie=0,y:Ve=0}){return{duration:Me,css:(ue,be)=>`
          opacity: ${ue};
          transform: translate(${be*Ie}px, ${be*Ve}px);
        `}}const q=()=>{if(!m.screenPosition||!v||!A)return o;const ie=(g==null?void 0:g.autoPlacementBaseSpace)||{top:.2,bottom:.2,right:.15},Me=A.clientWidth,Fe=A.clientHeight,Ie=Fe*ie.top,Ve=Fe*(1-ie.bottom),ue=Me*(1-ie.right),be=m.screenPosition.leftPx,Je=m.screenPosition.topPx,nt=x.width||280,At=x.height||200;return Je<=Ie?be<=ue?be+nt<=Me&&Je+At<=Fe?"right-top":"bottom-left":be-nt>=0&&Je+At<=Fe?"left-top":"bottom-right":Je>=Ve?be<=ue?be+nt<=Me&&Je-At>=0?"right-bottom":"top-left":be-nt>=0&&Je-At>=0?"left-bottom":"top-right":be<=ue?be+nt<=Me?"right-top":"left-top":be-nt>=0?"left-top":"right-top"},X=(ie,Me)=>{switch(ie){case"top":case"top-left":case"top-right":return{x:Me.left+Me.width/2,y:Me.top};case"bottom":case"bottom-left":case"bottom-right":return{x:Me.left+Me.width/2,y:Me.top+Me.height};case"left":case"left-top":case"left-bottom":return{x:Me.left,y:Me.top+Me.height/2};case"right":case"right-top":case"right-bottom":return{x:Me.left+Me.width,y:Me.top+Me.height/2};default:return{x:Me.left+Me.width/2,y:Me.top}}},$=ie=>{he(),f&&f.emit("click",{event:ie.detail.event,target:"TagPopoverViewMore",tag:m})},ne=ie=>{he(),f&&f.emit("click",{event:ie.detail.event,target:"TagPopoverShare",tag:m})},_=ie=>{t(29,x=ie.detail),x.width>0&&x.height>0&&t(8,k=q())},se=ie=>{u||he(),ie.stopPropagation(),f.emit("click",{event:ie,target:"TagPopoverContent",tag:m})};let K=null,me=!1;function De(){w&&K&&K.parentNode!==w&&w.appendChild(K)}Zt(()=>{(!A||A===document.body)&&console.warn("TagPopover 组件警告：禁止使用 document.body 作为 wrapperElement，请传入自定义容器元素。"),me=!0,De(),A&&A!==document.body&&t(25,A.style.overflow="hidden",A)}),U0(()=>{me&&De()}),Hi(()=>{K&&K.parentNode&&K.parentNode.removeChild(K),A&&A!==document.body&&t(25,A.style.overflow="",A)});function he(){typeof j=="function"&&j(),y("close")}function je(ie){On.call(this,i,ie)}function ze(ie){On.call(this,i,ie)}function Pe(ie){_e[ie?"unshift":"push"](()=>{C=ie,t(9,C)})}function Le(ie){_e[ie?"unshift":"push"](()=>{K=ie,t(10,K)})}return i.$$set=ie=>{"tag"in ie&&t(0,m=ie.tag),"config"in ie&&t(1,g=ie.config),"triggerElement"in ie&&t(26,v=ie.triggerElement),"wrapperElement"in ie&&t(25,A=ie.wrapperElement),"popoverContainer"in ie&&t(27,w=ie.popoverContainer),"theme"in ie&&t(2,P=ie.theme),"visible"in ie&&t(3,I=ie.visible),"closePopover"in ie&&t(28,j=ie.closePopover),"audioInstance"in ie&&t(4,D=ie.audioInstance),"audioPlaying"in ie&&t(5,T=ie.audioPlaying),"audioCurrentTime"in ie&&t(6,M=ie.audioCurrentTime),"audioDuration"in ie&&t(7,O=ie.audioDuration)},i.$$.update=()=>{if(i.$$.dirty[0]&5&&t(18,n=(()=>Be(P)?P:Be(m.data.theme)&&["light","dark"].includes(m.data.theme)?m.data.theme:m.contentType==="Marketing"?"light":"dark")()),i.$$.dirty[0]&2&&t(32,o=(g==null?void 0:g.placement)||"right-top"),i.$$.dirty[0]&2&&t(16,a=(()=>typeof(g==null?void 0:g.toolbar)=="boolean"?g.toolbar?{showMore:!0,showShare:!0}:{showMore:!1,showShare:!1}:(g==null?void 0:g.toolbar)||{showMore:!0,showShare:!0})()),i.$$.dirty[1]&2&&(o==="auto"?t(8,k=q()):t(8,k=o)),i.$$.dirty[0]&2&&t(15,l=(g==null?void 0:g.transitionDuration)||350),i.$$.dirty[0]&67108865&&m.screenPosition&&v&&t(8,k=q()),i.$$.dirty[0]&536870912&&x.width>0&&x.height>0&&t(8,k=q()),i.$$.dirty[0]&67109121&&m.screenPosition&&k&&v){const ie=v.getBoundingClientRect();ie.width>0&&ie.height>0&&t(30,S=X(k,ie))}i.$$.dirty[0]&1073741824&&t(14,c=S),i.$$.dirty[1]&1&&t(13,h=typeof s=="boolean"?s:!0),i.$$.dirty[0]&256&&t(12,d=(()=>{switch(k){case"top":case"top-left":case"top-right":return"bottom";case"bottom":case"bottom-left":case"bottom-right":return"top";case"left":case"left-top":case"left-bottom":return"right";case"right":case"right-top":case"right-bottom":return"left";default:return"bottom"}})()),i.$$.dirty[0]&1&&t(11,u=m.contentType==="Audio"&&m.data.appearance==="plane")},t(31,s=!0),t(17,r=1060),[m,g,P,I,D,T,M,O,k,C,K,u,d,h,c,l,a,r,n,z,$,ne,_,se,he,A,v,w,j,x,S,s,o,je,ze,Pe,Le]}class T6 extends ye{constructor(e){super(),Ae(this,e,L6,j6,ve,{tag:0,config:1,triggerElement:26,wrapperElement:25,popoverContainer:27,theme:2,visible:3,closePopover:28,audioInstance:4,audioPlaying:5,audioCurrentTime:6,audioDuration:7},z6,[-1,-1])}}function O6(i){Ee(i,"svelte-2g2g8a",".tag.svelte-2g2g8a{position:absolute;width:0rem;height:0rem;overflow:visible;pointer-events:auto;will-change:opacity;transition:opacity 0.2s linear}.tag.enableZIndex.svelte-2g2g8a{position:absolute}.tag.hide.svelte-2g2g8a{opacity:0;pointer-events:none}.tag.hide.svelte-2g2g8a *{pointer-events:none !important}.tag.unClickable.svelte-2g2g8a{pointer-events:none !important}.tag.unClickable.svelte-2g2g8a *{pointer-events:none !important}")}function _m(i){let e,t,n,o,s,r,a,l,c,h;const d=[B6,R6],u=[];function f(A,w){return A[10]?0:1}t=f(i),n=u[t]=d[t](i);const m=[N6,H6],g=[];function v(A,w){return A[25]?0:1}return s=v(i),r=g[s]=m[s](i),{c(){e=U("div"),n.c(),o=re(),r.c(),b(e,"class","tag svelte-2g2g8a"),b(e,"data-tag-id",i[23]),b(e,"data-tag-unfolded",i[8]),b(e,"data-content-type",a=i[0].contentType),b(e,"data-popover-enabled",l=i[0].isPopoverConfigEnabled()),b(e,"id",c=`tag-${i[23]}`),we(e,"unClickable",i[0].config.clickable===!1),we(e,"hide",i[21]),we(e,"enableZIndex",i[18]),N(e,"z-index",i[18]),N(e,"transform",`translate3d(${i[20]}, ${i[19]}, 0) scale(${i[9].scale})`)},m(A,w){Y(A,e,w),u[t].m(e,null),H(e,o),g[s].m(e,null),i[36](e),h=!0},p(A,w){let P=t;t=f(A),t===P?u[t].p(A,w):(xe(),G(u[P],1,1,()=>{u[P]=null}),Ce(),n=u[t],n?n.p(A,w):(n=u[t]=d[t](A),n.c()),B(n,1),n.m(e,o));let I=s;s=v(A),s===I?g[s].p(A,w):(xe(),G(g[I],1,1,()=>{g[I]=null}),Ce(),r=g[s],r?r.p(A,w):(r=g[s]=m[s](A),r.c()),B(r,1),r.m(e,null)),(!h||w[0]&8388608)&&b(e,"data-tag-id",A[23]),(!h||w[0]&256)&&b(e,"data-tag-unfolded",A[8]),(!h||w[0]&1&&a!==(a=A[0].contentType))&&b(e,"data-content-type",a),(!h||w[0]&1&&l!==(l=A[0].isPopoverConfigEnabled()))&&b(e,"data-popover-enabled",l),(!h||w[0]&8388608&&c!==(c=`tag-${A[23]}`))&&b(e,"id",c),(!h||w[0]&1)&&we(e,"unClickable",A[0].config.clickable===!1),(!h||w[0]&2097152)&&we(e,"hide",A[21]),(!h||w[0]&262144)&&we(e,"enableZIndex",A[18]),w[0]&262144&&N(e,"z-index",A[18]),w[0]&1573376&&N(e,"transform",`translate3d(${A[20]}, ${A[19]}, 0) scale(${A[9].scale})`)},i(A){h||(B(n),B(r),h=!0)},o(A){G(n),G(r),h=!1},d(A){A&&Q(e),u[t].d(),g[s].d(),i[36](null)}}}function R6(i){let e;return{c(){e=U("div"),b(e,"data-info","tag point is disable")},m(t,n){Y(t,e,n)},p:oe,i:oe,o:oe,d(t){t&&Q(e)}}}function B6(i){let e,t,n;function o(r){i[34](r)}let s={tag:i[0],handleMouseEnter:i[30],handleMouseLeave:i[31],handleTagPointClick:i[32]};return i[12]!==void 0&&(s.tagPointClickHelper=i[12]),e=new OI({props:s}),_e.push(()=>Tl(e,"tagPointClickHelper",o)),i[35](e),e.$on("audioInstanceReady",i[27].audioInstanceReady),e.$on("audioPlay",i[27].audioPlay),e.$on("audioPause",i[27].audioPause),e.$on("audioTimeUpdate",i[27].audioTimeUpdate),e.$on("audioDuration",i[27].audioDuration),{c(){de(e.$$.fragment)},m(r,a){le(e,r,a),n=!0},p(r,a){const l={};a[0]&1&&(l.tag=r[0]),!t&&a[0]&4096&&(t=!0,l.tagPointClickHelper=r[12],Ll(()=>t=!1)),e.$set(l)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){G(e.$$.fragment,r),n=!1},d(r){i[35](null),ce(e,r)}}}function H6(i){let e;return{c(){e=U("div"),b(e,"data-info","tag content is disable")},m(t,n){Y(t,e,n)},p:oe,i:oe,o:oe,d(t){t&&Q(e)}}}function N6(i){let e,t;return e=new Td({props:{mediaStore:i[1],tag:pt(i[0]),hooks:i[26],state:i[4],temporaryState:i[5],rendererMap:i[2],contentTypeMap:i[3]}}),{c(){de(e.$$.fragment)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&2&&(s.mediaStore=n[1]),o[0]&1&&(s.tag=pt(n[0])),o[0]&16&&(s.state=n[4]),o[0]&32&&(s.temporaryState=n[5]),o[0]&4&&(s.rendererMap=n[2]),o[0]&8&&(s.contentTypeMap=n[3]),e.$set(s)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function $m(i){var e;let t,n;return t=new T6({props:{tag:i[0],config:i[0].config.popoverConfig,theme:(e=i[0].config.popoverConfig)==null?void 0:e.theme,wrapperElement:i[6],triggerElement:i[12],popoverContainer:i[7],visible:!0,closePopover:i[33],audioInstance:i[14],audioPlaying:i[15],audioCurrentTime:i[16],audioDuration:i[17]}}),t.$on("mouseenter",i[28]),t.$on("mouseleave",i[29]),t.$on("close",i[33]),{c(){de(t.$$.fragment)},m(o,s){le(t,o,s),n=!0},p(o,s){var r;const a={};s[0]&1&&(a.tag=o[0]),s[0]&1&&(a.config=o[0].config.popoverConfig),s[0]&1&&(a.theme=(r=o[0].config.popoverConfig)==null?void 0:r.theme),s[0]&64&&(a.wrapperElement=o[6]),s[0]&4096&&(a.triggerElement=o[12]),s[0]&128&&(a.popoverContainer=o[7]),s[0]&16384&&(a.audioInstance=o[14]),s[0]&32768&&(a.audioPlaying=o[15]),s[0]&65536&&(a.audioCurrentTime=o[16]),s[0]&131072&&(a.audioDuration=o[17]),t.$set(a)},i(o){n||(B(t.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),n=!1},d(o){ce(t,o)}}}function F6(i){var e;let t,n=i[0].isPopoverConfigEnabled()&&i[24]&&(i[11]||((e=i[0].config.popoverConfig)==null?void 0:e.debug)),o,s,r=i[9]&&(!i[22]||i[11])&&_m(i),a=n&&$m(i);return{c(){r&&r.c(),t=re(),a&&a.c(),o=Oe()},m(l,c){r&&r.m(l,c),Y(l,t,c),a&&a.m(l,c),Y(l,o,c),s=!0},p(l,c){var h;l[9]&&(!l[22]||l[11])?r?(r.p(l,c),c[0]&4196864&&B(r,1)):(r=_m(l),r.c(),B(r,1),r.m(t.parentNode,t)):r&&(xe(),G(r,1,1,()=>{r=null}),Ce()),c[0]&16779265&&(n=l[0].isPopoverConfigEnabled()&&l[24]&&(l[11]||((h=l[0].config.popoverConfig)==null?void 0:h.debug))),n?a?(a.p(l,c),c[0]&16779265&&B(a,1)):(a=$m(l),a.c(),B(a,1),a.m(o.parentNode,o)):a&&(xe(),G(a,1,1,()=>{a=null}),Ce())},i(l){s||(B(r),B(a),s=!0)},o(l){G(r),G(a),s=!1},d(l){r&&r.d(l),l&&Q(t),a&&a.d(l),l&&Q(o)}}}function V6(i,e,t){let n,o,s,r,a,l,c,h,d,u,f,{tag:m}=e,{mediaStore:g}=e,{rendererMap:v=new Map}=e,{contentTypeMap:A=new Map}=e,{state:w}=e,{temporaryState:P}=e,{wrapperElement:I=null}=e,{popoverContainer:j=null}=e;const D=pn("hooks");let T=!1,M,O,y=null,C=!1,x=!1,S=null,k=null,z=!1,q=0,X=0;const $={audioInstanceReady:ie=>{t(14,k=ie.detail),t(15,z=!k.paused)},audioPlay:()=>{t(15,z=!0)},audioPause:()=>{t(15,z=!1)},audioTimeUpdate:ie=>{t(16,q=ie.detail)},audioDuration:ie=>{t(17,X=ie.detail)}};let ne=!1;const _=ie=>{if(O&&clearTimeout(O),ie===!0&&!ne){ne=!0,t(11,T=!0);return}O=setTimeout(()=>{var Me;!C&&!x&&!((Me=m.config.popoverConfig)!=null&&Me.debug)&&(ne=!1,t(11,T=!1))},300)},se=()=>{C=!0,O&&clearTimeout(O)},K=()=>{C=!1,_(!1)},me=ie=>{var Me,Fe,Ie,Ve,ue,be;if(x=!0,m.isPopoverConfigEnabled()&&m.isHoverEnabled()&&((Fe=(Me=m.currentConfig)==null?void 0:Me.popoverConfig)==null?void 0:Fe.trigger)==="hover"){if(O&&clearTimeout(O),M!==void 0)return;((Ve=(Ie=m.currentConfig)==null?void 0:Ie.popoverConfig)==null?void 0:Ve.triggerDelay)>0?M=setTimeout(()=>{_(!0),m.hooks.emit("hover",{event:ie,tag:m}),M=void 0},(be=(ue=m.currentConfig)==null?void 0:ue.popoverConfig)==null?void 0:be.triggerDelay):(_(!0),m.hooks.emit("hover",{event:ie,tag:m}))}},De=ie=>{var Me,Fe;x=!1,m.isHoverEnabled()&&m.isPopoverConfigEnabled()&&((Fe=(Me=m.currentConfig)==null?void 0:Me.popoverConfig)==null?void 0:Fe.trigger)==="hover"&&(M!==void 0&&(clearTimeout(M),M=void 0),_(!1))},he=ie=>{var Me,Fe;const Ie=m.contentType==="Audio"&&m.data.appearance==="plane";m.isPopoverConfigEnabled()&&m.isHoverEnabled()&&((Fe=(Me=m.currentConfig)==null?void 0:Me.popoverConfig)==null?void 0:Fe.trigger)==="click"&&(Ie?T||(t(11,T=!0),m.hooks.emit("hover",{event:ie,tag:m})):(t(11,T=!T),T&&m.hooks.emit("hover",{event:ie,tag:m})))};function je(){ne=!1,t(11,T=!1)}Zt(()=>()=>{M&&clearTimeout(M),O&&clearTimeout(O)});function ze(ie){y=ie,t(12,y)}function Pe(ie){_e[ie?"unshift":"push"](()=>{S=ie,t(13,S)})}function Le(ie){_e[ie?"unshift":"push"](()=>{m.dom=ie,t(0,m)})}return i.$$set=ie=>{"tag"in ie&&t(0,m=ie.tag),"mediaStore"in ie&&t(1,g=ie.mediaStore),"rendererMap"in ie&&t(2,v=ie.rendererMap),"contentTypeMap"in ie&&t(3,A=ie.contentTypeMap),"state"in ie&&t(4,w=ie.state),"temporaryState"in ie&&t(5,P=ie.temporaryState),"wrapperElement"in ie&&t(6,I=ie.wrapperElement),"popoverContainer"in ie&&t(7,j=ie.popoverContainer)},i.$$.update=()=>{var ie,Me,Fe,Ie;i.$$.dirty[0]&5&&t(10,n=(()=>{var Ve,ue,be;return((ue=(Ve=m.style)==null?void 0:Ve.point)==null?void 0:ue.enabled)===!1||((be=v.get(m.contentType))==null?void 0:be.usePoint)===!1||m.contentType==="Sticker"||m.contentType==="Link"||m.contentType==="VRLink"||m.contentType==="PanoLink"?!1:m.contentType==="Panorama"?!0:m.contentType==="Audio"&&m.data.appearance==="plane"?m.isPopoverConfigEnabled():!0})()),i.$$.dirty[0]&1025&&t(25,o=(()=>!(m.isPopoverConfigEnabled()&&m.contentType==="Panorama"||m.isPopoverConfigEnabled()&&m.contentType==="ImageText"||m.isPopoverConfigEnabled()&&m.contentType==="Text"||m.isPopoverConfigEnabled()&&m.contentType==="Audio"||m.stickType!=="2DPoint"||m.entryFromModel&&wi(m.five.state.mode)&&n))()),i.$$.dirty[0]&1&&t(24,s=(()=>{var Ve;return m.contentType==="Marketing"?!!(m.data.title||m.data.name||m.data.description||m.data.tooltip||(Ve=m.data.price)!=null&&Ve.value||m.data.brandTags&&m.data.brandTags.length>0||m.data.tags&&m.data.tags.length>0||m.data.imageUrl||m.data.mediaUrl||m.data.mediaData&&m.data.mediaData.length>0):!!(m.data.title||m.data.name||m.data.text||m.data.description||m.data.tooltip||m.data.imageUrl||m.data.mediaUrl||m.data.audioUrl||m.data.mediaData&&m.data.mediaData.length>0)})()),i.$$.dirty[0]&1&&t(23,r=m.id),i.$$.dirty[0]&1&&t(9,a=m.screenPosition),i.$$.dirty[0]&1&&t(22,l=m.enabled===!1||!m.state),i.$$.dirty[0]&513&&t(21,c=!((ie=m.state)!=null&&ie.visible)||((Me=m.temporaryState)==null?void 0:Me.visible)===!1||!a),i.$$.dirty[0]&1&&t(8,h=((Fe=m.state)==null?void 0:Fe.unfolded)&&!m.isPopoverConfigEnabled()),i.$$.dirty[0]&512&&t(20,d=(a==null?void 0:a.leftPx)+"px"),i.$$.dirty[0]&512&&t(19,u=(a==null?void 0:a.topPx)+"px"),i.$$.dirty[0]&257&&t(18,f=h?((Ie=m.zIndex)!=null?Ie:0)+(h?1e6:0):void 0)},[m,g,v,A,w,P,I,j,h,a,n,T,y,S,k,z,q,X,f,u,d,c,l,r,s,o,D,$,se,K,me,De,he,je,ze,Pe,Le]}class W6 extends ye{constructor(e){super(),Ae(this,e,V6,F6,ve,{tag:0,mediaStore:1,rendererMap:2,contentTypeMap:3,state:4,temporaryState:5,wrapperElement:6,popoverContainer:7},O6,[-1,-1])}}let Pn=null;function G6(i=2e6){return Pn&&document.body.contains(Pn)?(Pn.style.zIndex=String(i),Pn):(Pn=document.createElement("div"),Pn.className="tag-popover-container",Object.assign(Pn.style,{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:String(i),pointerEvents:"none",overflow:"hidden"}),document.body.appendChild(Pn),Pn)}function Q6(i){Ee(i,"svelte-9ehqs9",".tag--container.svelte-9ehqs9{box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;opacity:1;-webkit-user-select:none;-moz-user-select:none;user-select:none;transform:translate3d(0, 0, 0);transition:opacity 0.2s linear;overflow:hidden}.tag--container.hide.svelte-9ehqs9{opacity:0 !important;pointer-events:none}.tag--container.hide.svelte-9ehqs9 *{pointer-events:none !important}")}function eg(i,e,t){const n=i.slice();return n[12]=e[t],n}function tg(i){let e,t=[],n=new Map,o,s,r,a=i[0];const l=c=>c[12].id;for(let c=0;c<a.length;c+=1){let h=eg(i,a,c),d=l(h);n.set(d,t[c]=ig(d,h))}return{c(){var c;e=U("div");for(let h=0;h<t.length;h+=1)t[h].c();b(e,"class","tag--container svelte-9ehqs9"),b(e,"data-infive",o=!i[4].visible||!i[5].visible?"1":"0"),we(e,"hide",!i[4].visible||!i[5].visible),N(e,"z-index",(c=i[6])!=null?c:"")},m(c,h){Y(c,e,h);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);i[10](e),r=!0},p(c,h){var d;h&447&&(a=c[0],xe(),t=Ei(t,h,l,1,c,a,n,e,wo,ig,null,eg),Ce()),(!r||h&48&&o!==(o=!c[4].visible||!c[5].visible?"1":"0"))&&b(e,"data-infive",o),(!r||h&48)&&we(e,"hide",!c[4].visible||!c[5].visible),h&64&&N(e,"z-index",(d=c[6])!=null?d:"")},i(c){if(!r){for(let h=0;h<a.length;h+=1)B(t[h]);s||kt(()=>{s=bo(e,Ft,{}),s.start()}),r=!0}},o(c){for(let h=0;h<t.length;h+=1)G(t[h]);r=!1},d(c){c&&Q(e);for(let h=0;h<t.length;h+=1)t[h].d();i[10](null)}}}function ig(i,e){let t,n,o;return n=new W6({props:{state:e[4],temporaryState:e[5],tag:e[12],mediaStore:e[1],rendererMap:e[2],contentTypeMap:e[3],wrapperElement:e[7],popoverContainer:e[8]}}),{key:i,first:null,c(){t=Oe(),de(n.$$.fragment),this.first=t},m(s,r){Y(s,t,r),le(n,s,r),o=!0},p(s,r){e=s;const a={};r&16&&(a.state=e[4]),r&32&&(a.temporaryState=e[5]),r&1&&(a.tag=e[12]),r&2&&(a.mediaStore=e[1]),r&4&&(a.rendererMap=e[2]),r&8&&(a.contentTypeMap=e[3]),r&128&&(a.wrapperElement=e[7]),r&256&&(a.popoverContainer=e[8]),n.$set(a)},i(s){o||(B(n.$$.fragment,s),o=!0)},o(s){G(n.$$.fragment,s),o=!1},d(s){s&&Q(t),ce(n,s)}}}function U6(i){let e,t,n=i[4].enabled&&tg(i);return{c(){n&&n.c(),e=Oe()},m(o,s){n&&n.m(o,s),Y(o,e,s),t=!0},p(o,[s]){o[4].enabled?n?(n.p(o,s),s&16&&B(n,1)):(n=tg(o),n.c(),B(n,1),n.m(e.parentNode,e)):n&&(xe(),G(n,1,1,()=>{n=null}),Ce())},i(o){t||(B(n),t=!0)},o(o){G(n),t=!1},d(o){n&&n.d(o),o&&Q(e)}}}function X6(i,e,t){let{tags:n=[]}=e,{hooks:o}=e,{mediaStore:s}=e,{rendererMap:r}=e,{contentTypeMap:a}=e,{state:l}=e,{temporaryState:c}=e,{zIndex:h=void 0}=e,d=null,u=null,f=2e3;nl("hooks",o),nl("mediaStore",s),Zt(()=>{t(8,u=G6(f))});function m(g){_e[g?"unshift":"push"](()=>{d=g,t(7,d)})}return i.$$set=g=>{"tags"in g&&t(0,n=g.tags),"hooks"in g&&t(9,o=g.hooks),"mediaStore"in g&&t(1,s=g.mediaStore),"rendererMap"in g&&t(2,r=g.rendererMap),"contentTypeMap"in g&&t(3,a=g.contentTypeMap),"state"in g&&t(4,l=g.state),"temporaryState"in g&&t(5,c=g.temporaryState),"zIndex"in g&&t(6,h=g.zIndex)},i.$$.update=()=>{var g,v,A,w;i.$$.dirty&1&&n&&n.length>0&&(f=(w=(A=(v=(g=n[0])==null?void 0:g.config)==null?void 0:v.popoverConfig)==null?void 0:A.zIndex)!=null?w:2e6)},[n,s,r,a,l,c,h,d,u,o,m]}class Y6 extends ye{constructor(e){super(),Ae(this,e,X6,U6,ve,{tags:0,hooks:9,mediaStore:1,rendererMap:2,contentTypeMap:3,state:4,temporaryState:5,zIndex:6},Q6)}}function ri(i){return Array.isArray(i)?i.map(e=>[e.x,e.y,e.z]):[i.x,i.y,i.z]}const q6="Dnalogel-PanoTagPlugin";class dh extends hC{constructor(e,t){super(e),p(this,"state",{enabled:!0,visible:!0}),p(this,"debug"),p(this,"debugUtil",new dC(this)),p(this,"globalHoverEnabled",!0),p(this,"changeTagModel",(n,o)=>ee(this,null,function*(){var s;n.data=it({},n.data,o),yield(s=n.loadModel)==null?void 0:s.call(n)})),p(this,"handleFiveModeChange",n=>{const o=()=>{this.filter2DPointTag.forEach(s=>{s.state.visible=!1,s.applyVisible()}),this.five.ready().then(()=>{this.tagsDo(this.tags,s=>{s.updateVisible(),Go(s)&&n!=="Panorama"&&this.changeTagMode(s,"behind")})})};this.tags.length<500?o():this.five.ready().then(()=>o())}),p(this,"handleFiveWantsMoveToPano",()=>{if(this.tags.length>500){this.temporaryState.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]});return}else this.temporaryState.visible=!0,this.tags.forEach(n=>{n.temporaryState.visible=!0}),this.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),this.tags.forEach(n=>n.applyVisible())}),p(this,"clickhandler",n=>{n.tag.onClick(n)}),p(this,"handleFiveCameraUpdate",()=>{this.filterPointTag.forEach(n=>n.updateScreenPosition())}),p(this,"handleFiveCameraFovUpdate",()=>{this.handleFiveCameraUpdate(),this.five.off("render.prepare",this.handleFiveCameraUpdate),this.five.on("render.prepare",this.handleFiveCameraUpdate),setTimeout(()=>{this.five.off("render.prepare",this.handleFiveCameraUpdate)},1e3)}),p(this,"handleFivePanoArrived",()=>ee(this,null,function*(){this.filter2DPointTag.forEach(n=>{n.state.visible=!1,n.applyVisible()}),this.tagsDo(this.tags,n=>{n.updateVisible()}),this.temporaryState.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}),yield this.setUnfolded(),this.tags.filter(Y8).filter(n=>{var o;return(o=n.getConfig().modelConfig)==null?void 0:o.autoLookAtEnabled}).forEach(n=>{var o;const s=new We(new wh,new Ze),r=(o=n.model)==null?void 0:o.object;if(!r)return;s.position.copy(r.position),s.quaternion.copy(r.quaternion);const a=this.five.camera.position;s.lookAt(a.clone().setY(s.position.y));const l=r.quaternion.clone(),c=s.quaternion.clone(),h=Fr();h.onUpdate(({progress:d})=>{r.quaternion.copy(l.clone().slerp(c,d))}),h.play()})})),p(this,"handleFiveModelShownFloorChange",()=>{this.tagsDo(this.tags,n=>n.updateVisible())}),p(this,"onFiveRefined",mf(()=>{wi(this.five.getCurrentState().mode)?this.setUnfoldedByCamera():this.tags.forEach(n=>n.cache.clear()),this.tagsDo(this.tags,n=>n.updateVisible())})),p(this,"onFiveEveryReady",()=>{this.setUnfoldedByCamera(),wi(this.five.getCurrentState().mode)&&this.tagsDo(this.tags,n=>n.updateVisible())}),p(this,"render",()=>{this.renderQueue.forEach((n,o)=>{const{keys:s}=n;if(o==="TagContainerSvelte"){const r=this.filterPointTag.filter(l=>l.screenPosition),a={hooks:this.hooks,tags:r,state:this.state,temporaryState:this.temporaryState,mediaStore:this.mediaStore,rendererMap:this.rendererMap,contentTypeMap:this.contentTypeMap,zIndex:this.params.containerZIndex};if(this.TagContainerSvelte){let l={};if(s.length===0)l=a;else for(const c of s)l[c]=a[c];this.TagContainerSvelte.$set(l)}else{if(!this.container)return console.error("updateRenderPlaneTag: tag2DContainer not found");this.TagContainerSvelte=new Y6({target:this.container,props:pe(W({},a),{state:pe(W({},this.state),{enabled:!1})})}),_h(()=>{var l;(l=this.TagContainerSvelte)==null||l.$set({state:this.state})})}}}),this.renderQueue.clear()}),this.params=it({},{debug:!1,config:this.config},W({},t)),this.debug=this.params.debug,this.config=this.params.config,this.debug&&this.debugUtil.bindLog(),tC(1,{namespace:xd.PlayAudio});try{Array.isArray(window.__PANOTAGPLUGIN_DEBUG_LIST__)||(window.__PANOTAGPLUGIN_DEBUG_LIST__=[]),this.NAME=q6+"-"+window.__PANOTAGPLUGIN_DEBUG_LIST__.length,window.__PANOTAGPLUGIN_DEBUG_LIST__.push(this),window.__PANOTAGPLUGIN_DEBUG__||Object.defineProperty(window,"__PANOTAGPLUGIN_DEBUG__",{get:function(){return window.__PANOTAGPLUGIN_DEBUG_LIST__.sort((n,o)=>o.tags.length-n.tags.length)[0]}})}catch{}}appendTo(e){var t,n,o;this.container=e;const s=(n=(t=this.TagContainerSvelte)==null?void 0:t.$$)==null?void 0:n.root;s&&s!==this.container&&((o=this.TagContainerSvelte)==null||o.$destroy(),this.TagContainerSvelte=void 0)}load(e){return ee(this,null,function*(){var t,n;this.clearTags();try{console.debug(this.NAME," load:",{data:JSON.parse(JSON.stringify(e))})}catch{}const o=Ci(this.five);e.tagList.forEach(r=>{if(r.enu_position&&this.isValidArrayPosition(r.enu_position))try{const a=ln(r.enu_position),l=o.viewLayers[0].scene.enuToWorld(a);r.position=ri(l)}catch{}if(r.enu_normal&&this.isValidArrayPosition(r.enu_normal))try{const a=ln(r.enu_normal),l=o.viewLayers[0].scene.enuToWorld(a);r.normal=ri(l)}catch{}}),this.config=it({},this.config,{globalConfig:(t=e.globalConfig)!=null?t:{},contentTypeConfig:(n=e.contentTypeConfig)!=null?n:{}});const s=yield this.addTag(e.tagList);return this.hooks.emit("loaded"),s})}addTag(e){return ee(this,null,function*(){const t=(Array.isArray(e)?e:[e]).filter(n=>n.position).map(n=>{const o=wd(n);if(o==="2DPoint"||o==="3DPoint")return new fC(this,n);if(o==="Model")return new g1(this,n);if(o==="Plane")return new xI(this,n)});return t.forEach(n=>$8(n)),this.tags.push(...t),this.tagsLengthWillUpdate=!0,Ti(this.five).then(()=>ee(this,null,function*(){var n,o;this.store.eventListenerDisposer&&((o=(n=this.store).eventListenerDisposer)==null||o.call(n)),this.state.enabled&&this.handleEnable(),this.addResizeListener(),this.clearUnusedPanelTag(),this.tagsDo(t,s=>{this.tags.includes(s)&&(s.updateVisible(),s.updateZIndex())}),this.setUnfolded(),this.addRenderQueue({type:"TagContainerSvelte"}),this.hooks.emit("tagsLengthChange")}))})}changeConfig(e,t=!0){t?this.config=it({},this.config,e):this.config=e,this.tags.forEach(n=>{n.updateConfig()}),this.tagsDo(this.tags,n=>n.updateVisible())}changeGlobalConfig(e,t=!0){t?this.config.globalConfig=it({},this.config.globalConfig,e):this.config.globalConfig=e,this.tags.forEach(n=>{n.updateConfig()}),this.tagsDo(this.tags,n=>{n.updateVisible()})}changeContentTypeConfig(e,t,n=!0){this.config.contentTypeConfig||(this.config.contentTypeConfig={}),n?this.config.contentTypeConfig[e]=it({},this.config.contentTypeConfig[e],t):this.config.contentTypeConfig[e]=t,this.tags.forEach(o=>{o.updateConfig()}),this.tagsDo(this.tags,o=>{o.updateVisible()})}show(e){return ee(this,null,function*(){if(this.checkDisposed())return;const{userAction:t=!0}=e??{};this.setState({visible:!0},{userAction:t}),this.hooks.emit("show",{userAction:t})})}hide(e){return ee(this,null,function*(){if(this.checkDisposed())return;const{userAction:t=!0}=e??{};this.setState({visible:!1},{userAction:t}),this.hooks.emit("hide",{userAction:t})})}enable(e){if(this.checkDisposed())return;const{userAction:t=!0}=e??{};this.setState({enabled:!0},{userAction:t}),this.hooks.emit("enable",{userAction:t})}disable(e){if(this.checkDisposed())return;const{userAction:t=!0}=e??{};this.setState({enabled:!1},{userAction:t}),this.hooks.emit("disable",{userAction:t})}setState(e,t){if(this.checkDisposed())return;const{userAction:n=!0}=t??{},o=W({},this.state);this.state=Object.assign(this.state,e),o.visible!==this.state.visible&&(e.visible?this.handleShow():this.handleHide()),o.enabled!==this.state.enabled&&(e.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:o,userAction:n})}dispose(){var e,t,n,o,s,r;this.pauseCurrentMedia(),this.disposeAllCSS3DContainer(),(e=this.TagContainerSvelte)==null||e.$destroy(),this.filterCSS3DTag.forEach(a=>{var l;return(l=a.tag3DContentSvelte)==null?void 0:l.svelteApp.$destroy()}),this.tags.forEach(a=>a.cache.clear()),this.tags=[],this.tagsLengthWillUpdate=!0,this.hooks.emit("tagsLengthChange"),(t=this.store.disposers)==null||t.forEach(a=>a==null?void 0:a()),this.store.disposers=[],(o=(n=this.store).eventListenerDisposer)==null||o.call(n),this.store.eventListenerDisposer=void 0,(r=(s=this.store).resizeObserverDisposer)==null||r.call(s),this.store.resizeObserverDisposer=void 0,this.store.resizeObserverDisposerAdding=!1,this.five.scene.remove(this.group),this.group.remove(...this.group.children),this.gltfObjectGroup.remove(...this.gltfObjectGroup.children),this.imagePlaneGroup.remove(...this.imagePlaneGroup.children),this.five.needsRender=!0,this.store.disposed=!0,this.hooks.emit("dispose")}blinkTagById(e,t){return ee(this,null,function*(){var n;return(n=this.getTagById(e))==null?void 0:n.blink(t)})}changeUnfoldedById(e,t){const n=this.getTagById(e);t?n==null||n.unfold():n==null||n.fold()}changeEnabledById(e,t){var n;const o=this.getTagById(e);o&&(o.enabled=t,(n=o.hooks)==null||n.emit(t?"enable":"disable"))}changeTagNormalById(e,t){const n=this.getTagById(e);n&&n.tag3DContentSvelte&&(n.tag3DContentSvelte.currentNormal=ln(t))}changePositionById(e,t){const n=this.getTagById(e);n&&n.setPosition(t)}changeDataById(e,t,n=!0){const o=this.getTagById(e);o&&(o.setData(t,n),this.clearUnusedPanelTag(),o.hooks.emit("dataChanged",o.data))}changeStickTypeById(e,t,n=!0){this.changeTagById(e,t,n)}changeTagById(e,t,n=!0){const o=this.getTagById(e);o&&(o.set(t),o.updateVisible(),this.clearUnusedPanelTag(),o.hooks.emit("dataChanged",o.data))}destroyTagById(e){(Array.isArray(e)?e:[e]).forEach(t=>{var n;return(n=this.getTagById(t))==null?void 0:n.destroy()})}updateRenderAllTags(){this.tagsDo(this.tags,e=>e.updateVisible()),this.five.needsRender=!0}clearTags(){var e;this.tags.length&&(this.tags.forEach(t=>{var n,o,s,r,a,l;(n=t.tag3DContentSvelte)==null||n.dispose(),(s=(o=t.mediaPlane)==null?void 0:o.parent)==null||s.remove(t.mediaPlane),(l=(a=(r=t.model)==null?void 0:r.object)==null?void 0:a.parent)==null||l.remove(t.model.object)}),this.tags=[],this.tagsLengthWillUpdate=!0,this.hooks.emit("tagsLengthChange"),(e=this.TagContainerSvelte)==null||e.$destroy(),this.TagContainerSvelte=void 0,this.disposeAllCSS3DContainer()),this.enabledModelTagSet.clear(),this.cache.clear()}setUnfolded(){return ee(this,null,function*(){return new Promise(e=>{setTimeout(()=>{this.setUnfoldedByCamera(),e()},100)})})}handleShow(){this.state.visible=!0,this.group.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["state"]}),this.updateRenderAllTags(),this.five.needsRender=!0}handleHide(){this.pauseCurrentMedia(),this.state.visible=!1,this.group.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["state"]}),this.five.needsRender=!0}handleEnable(){this.state.enabled=!0,this.store.eventListenerDisposer=this.addEventListener(),this.five.scene.children.includes(this.group)||this.five.scene.add(this.group),this.five.needsRender=!0}handleDisable(){var e,t,n;this.pauseCurrentMedia(),this.state.enabled=!1,(t=(e=this.store).eventListenerDisposer)==null||t.call(e),this.five.scene.remove(this.group),(n=this.TagContainerSvelte)==null||n.$set({tags:[]}),this.five.needsRender=!0}addResizeListener(){if(!this.store.resizeObserverDisposer&&!this.store.resizeObserverDisposerAdding){const e=this.addResizeObserver();this.store.resizeObserverDisposerAdding=!0,setTimeout(()=>{this.store.resizeObserverDisposer=e,this.store.resizeObserverDisposerAdding=!1},200)}}addResizeObserver(){if(this.store.disposed)return;const e=this.five.getElement(),t=()=>{this.state.enabled&&(this.filterPointTag.forEach(l=>l.updateScreenPosition({force:!0})),this.temporaryState.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}))},n=()=>{this.state.enabled&&(this.temporaryState.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}))},{observe:o,unobserve:s}=Ua(J8(()=>{this.store.resizeObserverDisposer&&n()},500),e),{observe:r,unobserve:a}=Ua(mf(()=>t(),400),e);return o(),r(),()=>{s(),a()}}setUnfoldedByCamera(){let e=!1;this.filterPointTag.forEach(t=>{const n=t.getUnfoldedByCamera();if(t.state&&n!==void 0){if(n===!0&&t.screenPosition){const o=t.getConfig().unfoldedConfig;Ko(o).keep!=="unfolded"&&(e=!0)}t.state.unfolded=n}}),e&&this.filterPointTag.forEach(t=>{const n=t.getConfig().unfoldedConfig;typeof n=="object"&&(n.autoUnfold||n.autoUnfold===!1||Ko(n.autoUnfold).enable===!1||n.keep)||t.state&&(t.state.unfolded=!1)})}changeTagMode(e,t){var n;(n=e.tag3DContentSvelte)!=null&&n.css3DInstance&&(e.tag3DContentSvelte.css3DInstance.mode=t)}addEventListener(){const{five:e,hooks:t}=this,n=Sh(this.five,this.onFiveEveryReady);return this.handleFivePanoArrived(),e.on("wantsMoveToPano",this.handleFiveWantsMoveToPano),e.on("models.refined",this.onFiveRefined),e.on("modeChange",this.handleFiveModeChange),e.on("modelShownFloorChange",this.handleFiveModelShownFloorChange),e.on("cameraUpdate",this.handleFiveCameraUpdate),e.on("cameraFovUpdate",this.handleFiveCameraFovUpdate),e.on("panoArrived",this.handleFivePanoArrived),e.on("panoArrived",this.loadVideoFirstFrame),e.on("render.prepare",this.render),t.on("click",this.clickhandler),()=>{n(),e.off("wantsMoveToPano",this.handleFiveWantsMoveToPano),e.off("models.refined",this.onFiveRefined),e.off("modeChange",this.handleFiveModeChange),e.off("modelShownFloorChange",this.handleFiveModelShownFloorChange),e.off("cameraUpdate",this.handleFiveCameraUpdate),e.off("cameraFovUpdate",this.handleFiveCameraFovUpdate),e.off("panoArrived",this.handleFivePanoArrived),e.off("panoArrived",this.loadVideoFirstFrame),e.off("render.prepare",this.render),t.off("click",this.clickhandler),this.store.eventListenerDisposer=void 0}}setTagHoverEnabled(e,t){const n=this.getTagById(e);n&&(n.hoverEnabled=t)}getTagHoverEnabled(e){const t=this.getTagById(e);return t==null?void 0:t.hoverEnabled}setGlobalHoverEnabled(e){this.globalHoverEnabled=e}getGlobalHoverEnabled(){return this.globalHoverEnabled}isValidArrayPosition(e){return!Array.isArray(e)||e.length!==3?!1:e.every(t=>typeof t=="number"&&!isNaN(t)&&isFinite(t))}}const aD=(i,e)=>new dh(i,e);function Z6(i){Ee(i,"svelte-f09cfl",".guide-line__tag.svelte-f09cfl.svelte-f09cfl{position:relative}.text-with-distance.svelte-f09cfl.svelte-f09cfl{display:flex;flex-direction:column;position:relative;padding:0.125rem 0.25rem;border-radius:0.125rem;background:linear-gradient(to top, rgba(147, 147, 147, 0.3), rgba(74, 74, 74, 0.3));box-shadow:0 0.125rem 0.5rem 0 rgba(0, 0, 0, 0.2)}.text-with-distance.svelte-f09cfl .border.svelte-f09cfl{position:absolute;top:-50%;right:-50%;bottom:-50%;left:-50%;padding:0.0625rem;border-radius:0.25rem;background:linear-gradient(to right, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.2));-webkit-mask:linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);mask:linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);mask-composite:exclude;-webkit-mask-composite:xor;transform:scale(0.5)}.distance-and-name.svelte-f09cfl.svelte-f09cfl{display:flex;gap:0.1875rem}.distance.svelte-f09cfl.svelte-f09cfl{white-space:nowrap;font-size:0.625rem;line-height:0.875rem;color:#66afff}.name.svelte-f09cfl.svelte-f09cfl{opacity:0.6;font-size:0.625rem;line-height:0.875rem;white-space:nowrap;color:#ffffff}.line-name.svelte-f09cfl.svelte-f09cfl{color:#fff;white-space:nowrap;font-size:0.625rem;line-height:0.875rem}.guide-line__tag-point.svelte-f09cfl.svelte-f09cfl{position:absolute;left:50%;bottom:0.0625rem;width:0.4375rem;height:0.125rem;transform:translateX(-50%);background:#fff;border-radius:50%;opacity:0.5}.guide-line__tag-line.svelte-f09cfl.svelte-f09cfl{position:absolute;left:50%;bottom:0.0625rem;width:0.0625rem;height:1.875rem;transform:translateX(-50%);background:linear-gradient(to top, #fff, rgba(255, 255, 255, 0))}.guide-line__tag-content.svelte-f09cfl.svelte-f09cfl{position:absolute;left:-0.9375rem;bottom:1.9375rem;display:flex;justify-content:center;align-items:center}.guide-line__tag-icon.svelte-f09cfl.svelte-f09cfl{width:1.875rem;height:1.875rem;background-size:100%}.guide-line__tag-text.svelte-f09cfl.svelte-f09cfl{box-sizing:content-box;width:-moz-max-content;width:max-content;transform:translateX(-0.1875rem);white-space:nowrap;font-size:0.625rem;line-height:0.875rem;border:solid transparent;border-width:0.125rem 0.5rem 0.125rem 0.375rem;border-image-slice:6 25 6 18 fill;color:#fff;display:flex;align-items:center;justify-content:center}")}function ng(i){let e,t;return{c(){e=U("div"),t=Te(i[0]),b(e,"class","guide-line__tag-text svelte-f09cfl"),N(e,"font-size",i[9]),N(e,"padding",i[8]),N(e,"border-image-source",`url(${i[10]})`)},m(n,o){Y(n,e,o),H(e,t)},p(n,o){o&1&&Ne(t,n[0]),o&512&&N(e,"font-size",n[9]),o&256&&N(e,"padding",n[8])},d(n){n&&Q(e)}}}function og(i){let e,t,n,o,s=i[5]("全程")+"",r,a,l=i[5]("米")+"",c,h,d,u,f,m,g=i[4]&&sg(i);return{c(){e=U("div"),g&&g.c(),t=re(),n=U("div"),o=U("span"),r=Te(s),a=Te(i[2]),c=Te(l),h=re(),d=U("span"),u=Te(i[0]),f=re(),m=U("div"),b(o,"class","distance svelte-f09cfl"),N(o,"line-height",i[6]),N(o,"font-size",i[9]),b(d,"class","name svelte-f09cfl"),N(d,"line-height",i[6]),N(d,"font-size",i[9]),b(n,"class","distance-and-name svelte-f09cfl"),b(m,"class","border svelte-f09cfl"),b(e,"class","text-with-distance svelte-f09cfl"),N(e,"padding",i[7])},m(v,A){Y(v,e,A),g&&g.m(e,null),H(e,t),H(e,n),H(n,o),H(o,r),H(o,a),H(o,c),H(n,h),H(n,d),H(d,u),H(e,f),H(e,m)},p(v,A){v[4]?g?g.p(v,A):(g=sg(v),g.c(),g.m(e,t)):g&&(g.d(1),g=null),A&32&&s!==(s=v[5]("全程")+"")&&Ne(r,s),A&4&&Ne(a,v[2]),A&32&&l!==(l=v[5]("米")+"")&&Ne(c,l),A&64&&N(o,"line-height",v[6]),A&512&&N(o,"font-size",v[9]),A&1&&Ne(u,v[0]),A&64&&N(d,"line-height",v[6]),A&512&&N(d,"font-size",v[9]),A&128&&N(e,"padding",v[7])},d(v){v&&Q(e),g&&g.d()}}}function sg(i){let e,t;return{c(){e=U("span"),t=Te(i[4]),b(e,"class","line-name svelte-f09cfl"),N(e,"line-height",i[6]),N(e,"font-size",i[9])},m(n,o){Y(n,e,o),H(e,t)},p(n,o){o&16&&Ne(t,n[4]),o&64&&N(e,"line-height",n[6]),o&512&&N(e,"font-size",n[9])},d(n){n&&Q(e)}}}function J6(i){let e,t,n,o,s,r,a,l,c,h=i[0]&&!i[2]&&ng(i),d=i[2]&&og(i);return{c(){e=U("div"),t=U("div"),n=re(),o=U("div"),s=re(),r=U("div"),a=U("div"),l=re(),h&&h.c(),c=re(),d&&d.c(),b(t,"class","guide-line__tag-point svelte-f09cfl"),b(o,"class","guide-line__tag-line svelte-f09cfl"),b(a,"class","guide-line__tag-icon svelte-f09cfl"),N(a,"background-image",`url(${i[1]})`),b(r,"class","guide-line__tag-content svelte-f09cfl"),b(e,"class","guide-line__tag svelte-f09cfl"),N(e,"opacity",i[3])},m(u,f){Y(u,e,f),H(e,t),H(e,n),H(e,o),H(e,s),H(e,r),H(r,a),H(r,l),h&&h.m(r,null),H(r,c),d&&d.m(r,null)},p(u,[f]){f&2&&N(a,"background-image",`url(${u[1]})`),u[0]&&!u[2]?h?h.p(u,f):(h=ng(u),h.c(),h.m(r,c)):h&&(h.d(1),h=null),u[2]?d?d.p(u,f):(d=og(u),d.c(),d.m(r,null)):d&&(d.d(1),d=null),f&8&&N(e,"opacity",u[3])},i:oe,o:oe,d(u){u&&Q(e),h&&h.d(),d&&d.d()}}}function K6(i,e,t){let n,o,s,r,a,l,c,h,{text:d=""}=e,{icon_url:u=""}=e,{distance:f=0}=e,{opacity:m=1}=e,{name:g=""}=e,{i18n:v=P=>P}=e,{fontSize:A="md"}=e;const w="data:image/png;base64,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";return i.$$set=P=>{"text"in P&&t(0,d=P.text),"icon_url"in P&&t(1,u=P.icon_url),"distance"in P&&t(2,f=P.distance),"opacity"in P&&t(3,m=P.opacity),"name"in P&&t(4,g=P.name),"i18n"in P&&t(5,v=P.i18n),"fontSize"in P&&t(11,A=P.fontSize)},i.$$.update=()=>{var P,I;i.$$.dirty&2048&&t(13,n=ad[A]),i.$$.dirty&8192&&t(9,o=ht((n==null?void 0:n.name)||12)),i.$$.dirty&8192&&t(15,s=((P=n==null?void 0:n.padding)==null?void 0:P.guide)||[8,2]),i.$$.dirty&32768&&t(8,r=`${ht(s[1])} ${ht(s[0])}`),i.$$.dirty&8192&&t(14,a=((I=n==null?void 0:n.padding)==null?void 0:I.distance)||[4,2]),i.$$.dirty&16384&&t(7,l=`${ht(a[1])} ${ht(a[0])}`),i.$$.dirty&8192&&t(12,c=(n==null?void 0:n.lineHeight)||14),i.$$.dirty&4096&&t(6,h=ht(c))},[d,u,f,m,g,v,h,l,r,o,w,A,c,n,a,s]}class _6 extends ye{constructor(e){super(),Ae(this,e,K6,J6,ve,{text:0,icon_url:1,distance:2,opacity:3,name:4,i18n:5,fontSize:11},Z6)}}function $6(i){return i.length===0?[]:i.filter((e,t)=>e!==i[t-1])}function eM(i,e,t){if(i.length<2)return[];const n=[];i.forEach((r,a)=>{var l,c,h,d,u,f,m,g;let v=(l=t==null?void 0:t.route_standing_positions)==null?void 0:l[r];if(v||(v=(h=(c=e.observers[r])==null?void 0:c.standingPosition)==null?void 0:h.toArray()),!v)return;const A=i[a-1],w=(g=(u=(d=t==null?void 0:t.node_pair_to_route_points)==null?void 0:d[`${A}:${r}`])==null?void 0:u.slice())!=null?g:(m=(f=t==null?void 0:t.node_pair_to_route_points)==null?void 0:f[`${r}:${A}`])==null?void 0:m.slice().reverse();w==null||w.forEach(P=>{n.push(P)}),n.push(v)});const o=e.transform,s=n.map(r=>js(new R().fromArray(r),o).toArray());return[pe(W({},t),{type:"CatmullRomCurve3",points:s})]}const tM=`
  varying vec2 vUv;
  varying float ignoreAnimationMap;
  attribute float animationWillError;

  void main() {
    vUv = uv;
    ignoreAnimationMap = animationWillError;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,iM=`
  precision highp float;
  precision mediump int;
  // 是否使用颜色
  uniform int useMapColor;
  // 贴图
  uniform sampler2D map;
  // 贴图颜色
  uniform vec3 mapColor;
  // 贴图透明度
  uniform float mapOpacity;
  // 背景颜色
  uniform vec3 backgroundColor;
  // 边框颜色
  uniform vec3 borderColor;
  // 边框透明度
  uniform float borderOpacity;
  // 边框宽度
  uniform float borderWidth;
  // 背景透明度
  uniform float backgroundOpacity;
  // @link https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip
  uniform int backgroundClip;
  // 整体透明度
  uniform float opacity;
  // 最大 U 值
  uniform float maxV;
  // v offset
  uniform float vOffset;
  // 闪烁动画值
  uniform float flicker;
  // 纹理坐标
  varying vec2 vUv;
  varying float ignoreAnimationMap;

  // 获取纹理颜色
  vec4 getImage() {
    vec2 uv = vUv;
    uv.y = uv.y - vOffset;

    if (ignoreAnimationMap == 1.0) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    }

    // 原始贴图颜色
    vec4 image = texture2D(map, uv);
    // 如果使用颜色
    if (useMapColor == 1) {
      // 混合颜色
      image = mix(image, vec4(mapColor, image.a), image.a);
    }
    image.a = image.a * mapOpacity;
    return image;
  }

  // 获取线性渐变的透明度
  float linearGradientOpacity() {
    // 当前的 v 值
    float v = vUv.y;
    float gradientLength = 1.0;
    if (v <= gradientLength) {
      return v / gradientLength; // 在 [0, gradientLength] 范围内，透明度为 [0, 1]
    } else if (v <= maxV - gradientLength) {
      return 1.0; // 在 (gradientLength, maxV - gradientLength) 范围内，透明度为 1
    } else {
      return (maxV - v) / gradientLength; // 在 [maxV - gradientLength, maxV] 范围内，透明度为 [1, 0]
    }
  }

  // 获取边框颜色
  vec4 getBorder() {
    float u = vUv.x;
    if (u <= borderWidth || u >= 1.0 - borderWidth) {
      return vec4(borderColor, borderOpacity);
    }
    return vec4(0.0, 0.0, 0.0, 0.0);
  }

  // 获取背景色
  vec4 getBackground() {
    // border-box
    if (backgroundClip == 0) {
      return vec4(backgroundColor, backgroundOpacity);
    } else {
    // padding-box
      float u = vUv.x;
      if (u > borderWidth && u < 1.0 - borderWidth) {
        return vec4(backgroundColor, backgroundOpacity);
      }
      return vec4(0.0, 0.0, 0.0, 0.0);
    }
  }

  // 根据摄像机位置计算透明度
  float distanceOpacity() {
    return 1.0;
  }

  void main() {
    float v = vUv.y;
    vec4 image = getImage();
    vec4 border = getBorder();
    vec4 background = getBackground();
    // 设置背景颜色
    gl_FragColor = background;
    // 混合颜色和背景
    gl_FragColor = mix(background, vec4(image.rgb, image.a * 0.4 + 0.6), image.a); //  image.a * 0.4 + 0.6 先这么写，但是不是最优解
    // 混合边框
    gl_FragColor = mix(gl_FragColor, border, border.a);
    // 设置整体透明度
    gl_FragColor.a = gl_FragColor.a * opacity;
    gl_FragColor.a = gl_FragColor.a * linearGradientOpacity();
    gl_FragColor.a = gl_FragColor.a * distanceOpacity();
    gl_FragColor.a = gl_FragColor.a * flicker;
  }
`;class rg{constructor(e,t){p(this,"name",""),p(this,"startTagContainer"),p(this,"endTagContainer"),p(this,"path",[]),p(this,"geometryStyle",{}),p(this,"materialStyle",{}),p(this,"meshStyle",{}),p(this,"group",new Et),p(this,"mesh"),p(this,"visible",null),p(this,"five"),p(this,"mode"),p(this,"_curvePath",null),p(this,"_curvePoints",null),p(this,"_panoGroup",[]),p(this,"skippedPositions",null),p(this,"textureUrl",""),p(this,"scale",1),p(this,"width",.5),p(this,"unitLength",.5),p(this,"_visibleFloorIndexes",null),p(this,"modeVisible",!1),p(this,"floorVisible",!0),p(this,"defaultVisible",!1),p(this,"inWalkAnimation",!1),p(this,"customVisible",null),p(this,"parent"),p(this,"plugin"),p(this,"textureHasLoaded",!1),p(this,"disposed",!1),p(this,"flowAnime",new Yo({progress:0}).to({progress:1}).duration(1500).repeat(1/0)),p(this,"cacheLengths",[]),p(this,"heightOffset",0),p(this,"fontSizeManager",ca()),p(this,"currentFontSize",_s()),p(this,"unsubscribeFontSize",null),p(this,"dispose",()=>{var a,l,c;this.disposed||(this.disposed=!0,this.parent.hooks.off("show",this.updateVisible),this.parent.hooks.off("hide",this.updateVisible),this.plugin.hooks.off("show",this.updateVisible),this.plugin.hooks.off("hide",this.updateVisible),this.plugin.hooks.off("enable",this.updateVisible),this.plugin.hooks.off("disable",this.updateVisible),this.five.off("modeChange",this.onFiveModeChange),this.five.off("modelShownFloorChange",this.onFiveModelShownFloorChange),(a=this.unsubscribeFontSize)==null||a.call(this),this.doHide(),(l=this.startTagContainer)==null||l.plugin.dispose(),(c=this.endTagContainer)==null||c.plugin.dispose())}),p(this,"onWalkAnimationStart",()=>{this.inWalkAnimation=!0,this.updateVisible()}),p(this,"onWalkAnimationEnd",()=>{this.inWalkAnimation=!1,this.updateVisible()}),p(this,"onFiveModeChange",a=>{this.modeVisible=this.mode==="panorama"?ao(a):wi(a),this.updateVisible()}),p(this,"onFiveModelShownFloorChange",a=>{this.floorVisible=a===null||this.visibleFloorIndexes===null||this.visibleFloorIndexes.includes(a),this.updateVisible()}),p(this,"updateVisible",()=>{const a=(()=>!this.parent.visible||!this.plugin.state.enabled||!this.plugin.state.visible?!1:this.customVisible!==null?this.customVisible:this.inWalkAnimation?!0:this.modeVisible&&this.defaultVisible&&this.floorVisible)();this.visible=a,a&&this.textureHasLoaded?this.doShow():this.doHide()}),p(this,"onFlowAnimeUpdate",a=>{const{progress:l}=a;this.mesh.material.uniforms.vOffset.value=l,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}),p(this,"logError",a=>Fv("GuideLineModeItem: ",a)),p(this,"updateTagFontSize",()=>{var a,l;(a=this.startTagContainer)!=null&&a.app&&this.startTagContainer.app.$set({fontSize:this.currentFontSize}),(l=this.endTagContainer)!=null&&l.app&&this.endTagContainer.app.$set({fontSize:this.currentFontSize})});var n,o;this.five=e,this.mode=t.mode,this.plugin=t.plugin,this.parent=t.parent,this.group.name="GuideLineModeItem";const s=new xt,r=new Bi({vertexShader:tM,fragmentShader:iM,transparent:!0,uniforms:{map:{value:null},useMapColor:{value:0},mapColor:{value:new Ye},mapOpacity:{value:1},backgroundColor:{value:new Ye},backgroundOpacity:{value:0},borderColor:{value:new Ye},borderOpacity:{value:0},backgroundClip:{value:0},borderWidth:{value:.05},opacity:{value:1},flicker:{value:1},maxV:{value:0},vOffset:{value:0}}});this.mesh=new We(s,r),this.mesh.name="GuideLineModeItem",this.group.add(this.mesh),this.mode==="panorama"&&(this.parent.hooks.on("walkStart",this.onWalkAnimationStart),this.parent.hooks.on("walkEnded",this.onWalkAnimationEnd)),this.updateVisible(),this.onFiveModeChange(this.five.getCurrentState().mode),this.onFiveModelShownFloorChange((o=(n=this.five.model)==null?void 0:n.shownFloor)!=null?o:null),this.flowAnime.onUpdate(this.onFlowAnimeUpdate),this.parent.hooks.on("show",this.updateVisible),this.parent.hooks.on("hide",this.updateVisible),this.plugin.hooks.on("show",this.updateVisible),this.plugin.hooks.on("hide",this.updateVisible),this.plugin.hooks.on("enable",this.updateVisible),this.plugin.hooks.on("disable",this.updateVisible),this.plugin.hooks.on("dispose",this.dispose),this.five.on("modeChange",this.onFiveModeChange),this.five.on("modelShownFloorChange",this.onFiveModelShownFloorChange),typeof this.fontSizeManager=="object"&&"subscribe"in this.fontSizeManager&&(this.unsubscribeFontSize=this.fontSizeManager.subscribe(a=>{this.currentFontSize=a,this.updateTagFontSize()})),this.five.needsRender=!0}get panoGroup(){return this._panoGroup}get visibleFloorIndexes(){return this._visibleFloorIndexes}get curvePath(){return this._curvePath}get curvePoints(){return this._curvePoints}setCustomVisible(e){if(this.disposed)return this.logError("disposed");this.customVisible!==e&&(this.customVisible=e,this.updateVisible())}setDefaultVisible(e){if(this.disposed)return this.logError("disposed");this.defaultVisible!==e&&(this.defaultVisible=e,this.updateVisible())}setUnitSize(e,t){if(this.disposed)return this.logError("disposed");this.width=e,this.unitLength=t,this.setGeometryByPath(this.path,{width:e,unit_length:t})}setScale(e){if(this.disposed)return this.logError("disposed");this.scale=e,this.setGeometryByPath(this.path,{scale:e})}setGeometryByPanoGroup(e,t){if(this.disposed)return this.logError("disposed");if(!this.five.work)return this.logError("setPathByPanoGroup: work is not ready");const n=$6(e);if(this._panoGroup=n,(t==null?void 0:t.skipPanoGroup)!==void 0){const l=t.skipPanoGroup?n.map(c=>this.plugin.workUtil.getObserverStandingPosition(c)).filter(Be):null;this.skippedPositions=l}const o=this.five.getCurrentState(),s=this.plugin.workUtil.workCode||o.workCode,r=this.five.works.getWork(s),a=eM(n,r,t);this.path=a,this.setGeometryByPath(a,t)}setGeometryByPath(e,t){var n,o,s;if(this.disposed)return this.logError("disposed");const r=(n=t==null?void 0:t.scale)!=null?n:this.scale,a=(o=t==null?void 0:t.width)!=null?o:this.width,l=(s=t==null?void 0:t.unit_length)!=null?s:this.unitLength;this.scale=r,this.width=a,this.unitLength=l;const{geometry:c,maxV:h,curvePath:d,curvePoints:u}=V8({path:e,width:a*r,unitLength:l*r,skipPositions:this.skippedPositions});this._curvePath=d,this._curvePoints=u,this.mesh.geometry.copy(c),this.mesh.material.needsUpdate=!0,this.mesh.material.uniforms.maxV.value=h,this.five.needsRender=!0,this.path=e,this.geometryStyle=W(W({},this.geometryStyle),t)}setMartial(e){var t,n,o,s,r;if(this.disposed)return this.logError("disposed");this.setDefaultVisible((t=e==null?void 0:e.visible)!=null?t:!1),this.setColor((n=e==null?void 0:e.color)!=null?n:"#ffffff"),this.setOpacity((o=e==null?void 0:e.opacity)!=null?o:.5),this.setTextureUrl((r=(s=e==null?void 0:e.texture)==null?void 0:s.url)!=null?r:zl),(e==null?void 0:e.background_color)!==void 0&&this.setBackgroundColor(e.background_color),(e==null?void 0:e.background_opacity)!==void 0&&this.setBackgroundOpacity(e.background_opacity),(e==null?void 0:e.border_color)!==void 0&&this.setBorderColor(e.border_color),(e==null?void 0:e.border_opacity)!==void 0&&this.setBorderOpacity(e.border_opacity),(e==null?void 0:e.border_width)!==void 0&&this.setBorderWidth(e.border_width),(e==null?void 0:e.background_clip)!==void 0&&this.setBackgroundClip(e.background_clip);const a=W(W({},this.materialStyle),e);this.materialStyle=a}setMeshStyle(e){if(e!=null&&e.translate){const o=new R,s=new R().fromArray(e.translate);s.y+=this.heightOffset,o.add(s),this.group.position.copy(o),n(this.startTagContainer,s),n(this.endTagContainer,s)}const t=W(W({},this.meshStyle),e);this.meshStyle=t;function n(o,s){if(!(o!=null&&o.tag))return;const r=new R().fromArray(o.tag.position);r.add(s);const a=r.toArray();o.plugin.changeTagById(o.tag.id,{position:a})}}setHeightOffset(e){const t=new R;this.meshStyle.translate&&t.add(new R().fromArray(this.meshStyle.translate)),t.setY(t.y+e),this.group.position.copy(t),this.heightOffset=e,this.five.needsRender=!0}setColor(e){if(this.disposed)return this.logError("disposed");e&&(this.mesh.material.uniforms.mapColor.value=new Ye().set(e)),this.mesh.material.uniforms.useMapColor.value=e?1:0,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBorderColor(e){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.borderColor.value=new Ye().set(e),this.five.needsRender=!0}setBorderOpacity(e){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.borderOpacity.value=e,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBackgroundClip(e){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.backgroundClip.value=e==="border-box"?0:1,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBorderWidth(e){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.borderWidth.value=e,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBackgroundColor(e){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.backgroundColor.value=new Ye().set(e),this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setBackgroundOpacity(e){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.backgroundOpacity.value=e,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setOpacity(e){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.opacity.value=e,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setMapOpacity(e){if(this.disposed)return this.logError("disposed");this.mesh.material.uniforms.mapOpacity.value=e,this.mesh.material.uniformsNeedUpdate=!0,this.five.needsRender=!0}setTextureUrl(e){if(this.disposed)return this.logError("disposed");this.textureUrl=e,Wo(e).then(t=>{this.disposed||this.textureUrl===e&&(t.wrapT=Or,this.textureHasLoaded=!0,this.mesh.material.uniforms.map.value=t,this.mesh.material.uniformsNeedUpdate=!0,this.mesh.material.needsUpdate=!0,this.five.needsRender=!0,this.updateVisible())})}setVisibleFloorIndexes(e){var t,n;if(this.disposed)return this.logError("disposed");this._visibleFloorIndexes=e,this.onFiveModelShownFloorChange((n=(t=this.five.model)==null?void 0:t.shownFloor)!=null?n:null)}setStartTag(e){this.setTag("start",e)}setEndTag(e){this.setTag("end",e)}flicker(){var e,t,n,o,s,r;if(this.disposed)return this.logError("disposed");Dl([this.group,(n=(t=(e=this.startTagContainer)==null?void 0:e.plugin)==null?void 0:t.tags[0])==null?void 0:n.dom,(r=(s=(o=this.endTagContainer)==null?void 0:o.plugin)==null?void 0:s.tags[0])==null?void 0:r.dom],{loop:6,updateRender:()=>{this.five.needsRender=!0}})}getLengthByPanoGroupIndex(e){return this.disposed?this.logError("disposed"):this.cacheLengths.length!==0?this.cacheLengths[e]:(this.cacheLengths=this.getPanoGroupLengths(),this.cacheLengths[e])}getPanoGroupLengths(){var e,t,n,o;if(!this.curvePoints||!this.curvePath)return[];const s=this.curvePoints.length,r=(t=(e=this.curvePath)==null?void 0:e.getLength())!=null?t:0,a=s-1,l=r/a,c=(o=(n=this.curvePath)==null?void 0:n.getLengths(a))!=null?o:[],h=[];let d=0;for(let u=0;u<s;u++){const f=this.curvePoints[u],m=this.plugin.workUtil.getObserverStandingPosition(d);if(!m)break;m.clone().setY(0).distanceTo(f.clone().setY(0))<l&&(h.push(c[u]),d+=1)}return h}setTag(e,t){var n,o;const s=this.curvePath;if(!(t!=null&&t.data))return;const r=e==="start"?(n=this.startTagContainer)!=null?n:(()=>(this.startTagContainer={tag:null,plugin:new dh(this.five,{containerZIndex:10})},this.startTagContainer))():(o=this.endTagContainer)!=null?o:(()=>(this.endTagContainer={tag:null,plugin:new dh(this.five,{containerZIndex:10})},this.endTagContainer))(),a=it({},{contentType:"Custom",stickType:"2DPoint",config:{visibleConfig:{visibleFiveMode:["Floorplan","Mapview"],followModelVisibility:!1}},style:{point:{enabled:!1}},data:{}},t);r.tag=a,nM(a)&&(r.tag.element=c=>{var h,d;(h=r.app)==null||h.$destroy();const u=e==="start"?pe(W({},a.data),{name:this.name,distance:Math.round((d=s==null?void 0:s.getLength())!=null?d:0),i18n:this.plugin.config.i18n}):a.data,f=new _6({target:c,intro:!0,props:W({fontSize:this.currentFontSize},u)});return r.app=f,()=>f.$destroy()}),r.plugin.load({tagList:[r.tag]});const l=this.meshStyle.translate;if(l&&a.position){const c=new R().fromArray(a.position),h=new R().fromArray(l);c.add(h),c.y+=this.heightOffset;const d=c.toArray();r.plugin.changeTagById(r.tag.id,{position:d})}}doShow(){var e,t;this.mode==="model"&&!this.flowAnime.isPlaying()&&this.flowAnime.play(),this.five.scene.add(this.group),(e=this.startTagContainer)==null||e.plugin.show(),(t=this.endTagContainer)==null||t.plugin.show(),this.five.needsRender=!0}doHide(){var e,t;this.mode==="model"&&this.flowAnime.stop(),this.five.scene.remove(this.group),(e=this.startTagContainer)==null||e.plugin.hide(),(t=this.endTagContainer)==null||t.plugin.hide(),this.five.needsRender=!0}}function nM(i){return i.contentType==="Custom"}const A1="CruisePlugin",bc=`${A1}`;class y1 extends xo{constructor(e,t){super(e,t),p(this,"state",{visible:!0,enabled:!0,disposed:!1,playing:!1,speed:1}),p(this,"data"),p(this,"config"),p(this,"pauseDataMap",new Map),p(this,"privateState",{playing:!1,broke:!1,modeChanging:!1}),p(this,"GuideLine"),p(this,"disposedErrorLog",()=>{console.error(`${bc} is disposed`)}),p(this,"disableWarnLog",()=>{console.warn(`${bc} is disabled`)}),p(this,"disableErrorLog",()=>{console.error(`${bc} is disabled`)}),this.config=t,Object.assign(window,{[`__${A1}_DEBUG__`]:this})}play(e){this.setState({playing:!0},e)}pause(e){this.setState({playing:!1},e)}show(e){return ee(this,null,function*(){this.setState({visible:!0},e)})}hide(e){return ee(this,null,function*(){this.setState({visible:!1},e)})}enable(e){this.setState({enabled:!0},e)}disable(e){this.setState({enabled:!1},e)}dispose(){this.setState({disposed:!0})}setState(e,t){var n;if(this.state.disposed)return this.disposedErrorLog();if(!this.state.enabled&&e.enabled!==!0&&e.disposed!==!0)return this.disableErrorLog();const o=W({},this.state);this.state=it({},this.state,e),e.disposed!==void 0&&e.disposed!==o.disposed&&e.disposed&&this.handleDispose(),e.visible!==void 0&&e.visible!==o.visible&&this.handleVisible(e.visible,t==null?void 0:t.userAction),e.enabled!==void 0&&e.enabled!==o.enabled&&this.handleEnable(e.enabled,t==null?void 0:t.userAction),e.playing!==void 0&&e.playing!==o.playing&&this.changePlayState(e.playing,t),e.speed!==void 0&&e.speed!==o.speed&&this.changeSpeed(e.speed),Yi(o,this.state,{deep:!0})||this.hooks.emit("stateChange",{state:this.state,prevState:o,userAction:(n=t==null?void 0:t.userAction)!=null?n:!0})}clearPauseData(){var e,t;if((e=this.data)!=null&&e.id)return this.pauseDataMap.delete((t=this.data)==null?void 0:t.id)}changePlayState(e,t){this.actionIfStateIsEnabled(()=>{var n;return this.hooks.emit("playStateChange",e?"playing":"pause",{userAction:(n=t==null?void 0:t.userAction)!=null?n:!0})}),e?this.handlePlay(t):this.handlePause(t),this.state.playing=e}handleEnable(e,t=!0){var n,o;e?((n=this.GuideLine)==null||n.enable(),this.hooks.emit("enable",{userAction:t})):((o=this.GuideLine)==null||o.disable(),this.changePlayState(!1,{userAction:t}),this.hooks.emit("disable",{userAction:t})),this.state.enabled=e}handleVisible(e,t=!0){var n,o;e?((n=this.GuideLine)==null||n.show(),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:t}))):((o=this.GuideLine)==null||o.hide(),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:t}))),this.state.visible=e}addInterruptListener(e){const t=()=>{this.privateState.modeChanging||e()},n=o=>{o!=="mouseMove"&&(e(),this.five.off("gesture",n))};return this.five.on("gesture",n),this.five.once("wantsChangeMode",t),()=>{this.five.off("gesture",n),this.five.off("wantsChangeMode",t)}}getSpeededDuration(e){return e/this.state.speed}forceInteruptUpdateCamera(){this.five.updateCamera({},0)}getPauseData(){var e;if((e=this.data)!=null&&e.id)return this.pauseDataMap.get(this.data.id)}setPauseData(){var e;const t=(e=this.data)==null?void 0:e.id;if(t)return this.pauseDataMap.set(t,{fiveState:this.five.getCurrentState(),playedProgress:this.getProgress()})}clear(){this.clearPauseData()}handleDispose(){var e;this.setState({playing:!1}),this.clearPauseData(),this.clear(),(e=this.GuideLine)==null||e.dispose(),this.GuideLine=void 0}actionIfStateIsEnabled(e,t){if(this.state.enabled)return e();t!=null&&t.warnLog&&this.disableWarnLog()}}function wc(i,e,t){var n,o,s;const r=new R().fromArray([(n=t.x)!=null?n:0,(o=t.y)!=null?o:0,(s=t.z)!=null?s:0]),a=i.getPointAt(e).clone().add(r),l=i.getTangentAt(e),{longitude:c,latitude:h}=ra(l);return{offset:a.clone(),longitude:c,latitude:h,distance:0}}let b1=class extends y1{constructor(i,e){var t;super(i,e),p(this,"curve"),p(this,"baseCurveOffset"),p(this,"curveOffset"),p(this,"playStartedTime",performance.now()),p(this,"duration"),p(this,"changeSpeed",(s,r=!0)=>{this.state.speed=s,this.hooks.emit("speedChange",s,{userAction:r})}),p(this,"moveToStart",()=>{this.five.setState(pe(W({},wc(this.curve,0,this.curveOffset)),{mode:"Model"}))}),p(this,"playFromStart",()=>{this.clearPauseData(),this.setState({playing:!0})}),p(this,"getDuration",()=>this.getSpeededDuration(this.duration)),p(this,"getProgress",()=>{var s;const r=this.getPauseData();let a=(s=r==null?void 0:r.playedProgress)!=null?s:0;(a<0||a>=1)&&(a=0);const l=1-a,c=this.getDuration(),h=(performance.now()-this.playStartedTime)/c;return 1-l+h});const n={config:{speedConfig:{moveSpeed:2,moveSpeedUnit:"m/s"}}},o={allowBroke:!0};this.state=it({},n,this.state),this.config=it({},o,this.config),this.baseCurveOffset=it({x:0,y:0,z:0},{y:2},(t=this.config)==null?void 0:t.offset)}load(i,e){var t,n,o,s,r,a,l,c,h;this.handlePause(),this.clear(),this.data=W({id:Bt()},i);const d=(()=>{if(this.data.path instanceof yl)return this.data.path.curves[0];{if(this.data.path.length<2)return null;const m=this.data.path.map(Ue);return new Rg(m,void 0,"catmullrom",.5)}})();if(!d)return;if(this.curve=d,this.curveOffset={x:this.baseCurveOffset.x+((n=(t=this.data.offset)==null?void 0:t.x)!=null?n:0),y:this.baseCurveOffset.y+((s=(o=this.data.offset)==null?void 0:o.y)!=null?s:0),z:this.baseCurveOffset.z+((a=(r=this.data.offset)==null?void 0:r.z)!=null?a:0)},!this.curve)throw new Error("curve is not defined");const u=this.curve.getLength(),f=this.state.config.speedConfig.moveSpeedUnit==="m/ms"?1:1e3;if(this.duration=u/(this.state.config.speedConfig.moveSpeed/f),Array.isArray(this.data.path)){const m=this.data.path.map(Ue).map(g=>g.toArray());!this.GuideLine&&(((l=this.config)==null?void 0:l.useGuideLine)!==!1&&i.useGuildLine||(c=this.config)!=null&&c.useGuideLine&&i.useGuildLine!==!1)&&(this.GuideLine=dM(this.five,this.config)),(h=this.GuideLine)==null||h.load({lines:[{id:Bt(),path:[{type:"CatmullRomCurve3",points:m}],model_style:{visible:!0}}]})}return e?this.setState(e):(this.setState({playing:!1}),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),this.changePlayState(this.state.playing),this.changeSpeed(this.state.speed)),Promise.resolve()}handlePlay(){return new Promise((i,e)=>ee(this,null,function*(){var t;this.hooks.emit("play",{userAction:!0});const n=this.getPauseData();let o=(t=n==null?void 0:n.playedProgress)!=null?t:0;(o<0||o>=1)&&(o=0);const s=wc(this.curve,o,this.curveOffset);if(this.hooks.emit("progressChange",o),this.five.setState(pe(W({},s),{mode:"Model"})),yield this.five.ready(),this.playStartedTime=performance.now(),this.config.allowBroke){const a=this.addInterruptListener(()=>{this.state.playing&&(this.hooks.emit("broke"),this.handlePause(),a(),e(new Error("broke")))})}const r=()=>{const a=this.getProgress();if(a>=1)this.five.off("renderFrame",r),this.setState({playing:!1},{userAction:!1}),this.hooks.emit("end"),this.hooks.emit("progressChange",1),i("end");else if(this.state.playing===!1)this.five.off("renderFrame",r);else if(a>=0){const l=wc(this.curve,a,this.curveOffset);this.hooks.emit("progressChange",a),this.five.setState(l,!0)}};this.five.on("renderFrame",r)}))}handlePause(i){var e;this.state.playing=!1,this.hooks.emit("pause",{userAction:(e=i==null?void 0:i.userAction)!=null?e:!0}),this.setPauseData()}};function ag(i){const e=Math.abs(Math.cos(i.latitude));return new R(-Math.sin(i.longitude)*e,-Math.sin(i.latitude),-Math.cos(i.longitude)*e)}function oM(i,e){const t=ag(i),n=ag(e);return t.angleTo(n)}const sM=i=>ee(void 0,null,function*(){try{i().then(()=>{},()=>{}).catch(()=>{})}catch{}});function w1(i){return new Promise(e=>{setTimeout(()=>{e()},i)})}function rM(i){return ee(this,null,function*(){return new Promise(e=>{if(i.work){e();return}i.once("loaded",()=>e())})})}class Od extends y1{constructor(e,t){super(e,t),p(this,"state",{visible:!0,enabled:!0,disposed:!1,playing:!1,speed:1,config:{speedConfig:{rotateSpeed:.001,rotateSpeedUnit:"rad/ms",moveSpeed:.002,moveSpeedUnit:"m/ms"}}}),p(this,"privateState",{playing:!1,currentPlayQueue:[],currentPlayKeyframe:null,broke:!1,modeChanging:!1}),this.config=t,Object.assign(window,{__WalkPlugin_DEBUG__:this})}load(e,t,n){return ee(this,null,function*(){var o,s;this.clear();const r=this.data?JSON.parse(JSON.stringify(this.data)):void 0,a=yield this.formatData(e);this.data=W({id:a.keyframesId},a),this.hooks.emit("dataChange",a,r);let l=[],c;const h=this.data.keyframes.filter(d=>d.data.panoIndex!==void 0);h.filter((d,u)=>{var f;return d.data.panoIndex!==((f=h[u-1])==null?void 0:f.data.panoIndex)}).map(d=>d.data.panoIndex).forEach(d=>{var u,f;const m=(u=this.workUtil.getObserver(d))==null?void 0:u.floorIndex;if(m!==void 0)if(c===m){const g=l.length-1;l[g]=[...(f=l[g])!=null?f:[],d]}else{c=m;const g=l.length;l[g]=[d]}}),!this.GuideLine&&((o=this.config)==null?void 0:o.useGuideLine)!==!1&&a.useGuildLine!==!1&&(this.GuideLine=x1(this.five,this.config)),(s=this.GuideLine)==null||s.load({routes:l.map(d=>({panoIndexList:d})),config:a.guildPluginOptions}),t?this.setState(t,{userAction:n}):(this.setState({playing:!1},{userAction:!1}),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),this.changePlayState(this.state.playing,{userAction:!1}),this.changeSpeed(this.state.speed)),this.clearPauseData(),console.debug("WORKPLUGIN loaded",a),this.hooks.emit("dataLoaded",a)})}playFrom(e){const{index:t,id:n,userAction:o}=e;this.state.playing&&this.setState({playing:!1},{userAction:o}),this.setState({playing:!0},{userAction:o,playFromIndex:t,playFromId:n})}playFromStart(e){return this.playFrom(pe(W({},e),{index:0}))}formatData(e){return ee(this,null,function*(){this.five.work||(yield rM(this.five));const t=(()=>{const n=e;return typeof n=="object"&&n!==null&&Be(n.version)&&n.data?n.data:n})();if(t.keyframes)return{keyframesId:Bt(),keyframes:t.keyframes.map((n,o)=>{var s;const r=t.keyframes[o+1],a=(()=>!r||r.start===void 0||n.end===void 0?0:r.start-n.end)();return pe(W({id:(s=n.uuid)!=null?s:Bt(),moveIndex:o,stay:a,index:o},n),{guildPluginOptions:t.guildPluginOptions})})};if(t.panoIndexList){let n=[];const{moveEffect:o,moveToFirstPanoEffect:s,moveToFirstPanoDuration:r}=t;return this.privateState.moveToFirstPanoEffect=s,this.privateState.moveToFirstPanoDuration=r,t.panoIndexList.forEach((a,l)=>{const c=(()=>{var h,d;const u=t.panoIndexList.slice(l).find(v=>v!==a);if(u===void 0)return;const f=this.workUtil.getObserverPosition(a),m=this.workUtil.getObserverPosition(u);if(!m||!f||((h=this.workUtil.getObserver(a))==null?void 0:h.floorIndex)!==((d=this.workUtil.getObserver(u))==null?void 0:d.floorIndex))return;const g=new R().subVectors(m,f);return ra(g.normalize())})();t.moveType===void 0||t.moveType==="justMove"?n.push({moveIndex:l,stay:t.stay,data:W({effect:"Move",panoIndex:a,moveEffect:o},c??{})}):t.moveType==="moveAndRotate"&&(n.push({moveIndex:l,stay:t.stay,data:{effect:"Move",panoIndex:a,moveEffect:o}}),c&&n.push({moveIndex:l,stay:t.stay,data:W({effect:"Rotate",panoIndex:a},c)}))}),{keyframesId:Bt(),keyframes:n.map((a,l)=>W({id:Bt(),index:l},a)),guildPluginOptions:t.guildPluginOptions,useGuildLine:t.useGuildLine}}else throw new Error("format error: data no keyframes or no panoIndexList")})}handlePlay(e){return ee(this,null,function*(){var t;const{data:n,state:o,privateState:s,hooks:r}=this;if(s.playing||!(n!=null&&n.keyframes)||(n==null?void 0:n.keyframes.length)===0)return;const a=Bt();s.playId=a,s.playing=!0,s.broke=!1;const l=n.keyframes,c=this.getPauseData();(e==null?void 0:e.notEmitEvent)!==!0&&r.emit("play",{userAction:(t=e==null?void 0:e.userAction)!=null?t:!0});let h=!1;const d=yield(()=>ee(this,null,function*(){var u,f;if((e==null?void 0:e.playFromIndex)!==void 0)return e.playFromIndex;if((e==null?void 0:e.playFromId)!==void 0)return(u=this.data)==null?void 0:u.keyframes.findIndex(m=>m.id===e.playFromId);if(c!=null&&c.id){const m=(f=this.data)==null?void 0:f.keyframes.find(g=>g.id===c.id);if(c!=null&&c.fiveState&&(yield this.move(c.fiveState,{moveEffect:s.moveToFirstPanoEffect,duration:s.moveToFirstPanoDuration})),m){if(m.data.effect==="Move")return m.index;if(m.data.effect==="Rotate"){const g=c.duration!==void 0?c.duration*(1-c.playedProgress):void 0;return yield this.playKeyframe(m,{duration:g}),h=!0,m.index+1}}}}))();this.clearPauseData();for(const u of l){if(s.broke||!o.playing||!s.playing||a!==s.playId)return;if(!(d!==void 0&&u.index<d))try{r.emit("playIndexChange",u.index,u),yield this.playKeyframe(u,{moveEffect:h===!1?s.moveToFirstPanoEffect:void 0,duration:h===!1&&typeof s.moveToFirstPanoDuration=="number"?s.moveToFirstPanoDuration:void 0}),u.stay&&(yield w1(u.stay)),h===!1&&(h=!0)}catch{return Promise.resolve("broke")}}o.playing&&a===s.playId&&(this.setState({playing:!1},{userAction:!1}),r.emit("end"),this.clearPauseData())})}handlePause(e){var t;const{state:n,privateState:o,hooks:s}=this;n.playing=!1,o.playing!==!1&&(o.playing=!1,(e==null?void 0:e.userAction)!==!1&&this.setPauseData(),o.broke||this.forceInteruptUpdateCamera(),(e==null?void 0:e.notEmitEvent)!==!0&&s.emit("pause",{userAction:(t=e==null?void 0:e.userAction)!=null?t:!0}))}changeSpeed(e,t=!0){var n;const{state:o,privateState:s,hooks:r}=this,{currentPlayKeyframe:a}=s;if(r.emit("speedChange",e,{userAction:t}),o.playing&&a)try{const l=a.originDuration!==void 0?a.originDuration*(1-this.getProgress()):void 0,c=a.keyframe,{privateState:h}=this;((n=this.privateState.currentPlayKeyframe)==null?void 0:n.keyframe.id)!==c.id&&(this.privateState.currentPlayKeyframe={keyframe:c}),h.currentPlayQueue.push(this.getPlayPromise(c,{duration:l}))}catch(l){console.error(l)}}getProgress(){return this.five.controller.cameraMotion.progress}setPauseData(){var e,t,n;if((e=this.data)!=null&&e.id)return this.pauseDataMap.set(this.data.id,{id:(t=this.privateState.currentPlayKeyframe)==null?void 0:t.keyframe.id,fiveState:this.five.getCurrentState(),duration:(n=this.privateState.currentPlayKeyframe)==null?void 0:n.originDuration,playedProgress:this.getProgress()})}clear(){this.clearPauseData(),this.privateState.currentPlayKeyframe=null}playKeyframe(e,t){return ee(this,null,function*(){var n;const{privateState:o}=this;return((n=this.privateState.currentPlayKeyframe)==null?void 0:n.keyframe.id)!==e.id&&(this.privateState.currentPlayKeyframe={keyframe:e}),o.currentPlayQueue.push(this.getPlayPromise(e,t)),this.actionPromiseQueue()})}getPlayPromise(e){return ee(this,arguments,function*(t,n={}){var o;const s=t.data;if(n.duration=(o=n.duration)!=null?o:t.start!==void 0&&t.end!==void 0?t.end-t.start:void 0,!!s)return new Promise((r,a)=>{let l=!1;this.addInterruptListener(()=>{if(!l)return this.hooks.emit("broke"),this.privateState.broke=!0,this.setState({playing:!1}),l=!0,a(new Error("play is interupted"))});try{if(l)return;const c=()=>{r(),l=!0};switch(s.effect){case"Move":this.move(s,n).then(c);break;case"Rotate":this.rotate(s,n).then(c);break;default:this.rotate(s,n).then(c)}}catch{}})})}actionPromiseQueue(){return ee(this,null,function*(){const{privateState:e}=this;return new Promise((t,n)=>{if(e.currentPlayQueue.length===0){t();return}const o=e.currentPlayQueue.shift();if(!o){t();return}o.then(t,n)}).then(()=>e.currentPlayQueue.length===0?Promise.resolve():this.actionPromiseQueue())})}move(e,t){return ee(this,null,function*(){if(e.mode&&e.mode!==this.five.currentMode)yield this.changeMode(e);else if(e.panoIndex!==this.five.panoIndex)yield this.changePano(e,t);else return Promise.resolve()})}rotate(e,t){return ee(this,null,function*(){if(e.mode&&e.mode!==this.five.currentMode)yield this.changeMode({mode:e.mode,panoIndex:e.panoIndex});else if(e.panoIndex&&e.panoIndex!==this.five.panoIndex)return yield this.changePano(e,t);yield this.updateCamera(e,t)})}updateCamera(e){return ee(this,arguments,function*(t,n={}){const{five:o,privateState:s,state:r}=this,a=(()=>{var h,d;const u=(h=r.config)==null?void 0:h.speedConfig,f=(d=t.rotateSpeed)!=null?d:u==null?void 0:u.rotateSpeed;if((u==null?void 0:u.rotateSpeedUnit)===void 0)return f;if(f!==void 0)return u.rotateSpeedUnit==="rad/ms"?f:f/1e3})(),l=(()=>{if(n.duration)return n.duration;if(a){const h=this.five.getCurrentState();return oM(h,t)/a}return 800})();s.currentPlayKeyframe&&(s.currentPlayKeyframe.originDuration=l);const c=this.getSpeededDuration(l);return new Promise(h=>{sM(()=>o.updateCamera(t,c)),setTimeout(()=>h(),c)})})}changePano(e,t){return ee(this,null,function*(){const{five:n,privateState:o,state:s}=this;if(typeof e.panoIndex!="number"||e.panoIndex===n.panoIndex)return;const r=n.getCurrentState().mode!=="Panorama";r&&(this.privateState.modeChanging=!0);const a=(()=>{var c,h;const d=(c=s.config)==null?void 0:c.speedConfig,u=(h=e.moveSpeed)!=null?h:d==null?void 0:d.moveSpeed;if((d==null?void 0:d.moveSpeedUnit)===void 0)return u;if(u!==void 0)return d.moveSpeedUnit==="m/ms"?u:u/1e3})(),l=(()=>{if(t!=null&&t.duration)return t.duration;if(a&&typeof n.panoIndex=="number"&&typeof e.panoIndex=="number"){const c=this.workUtil.getObserverPosition(n.panoIndex),h=this.workUtil.getObserverPosition(e.panoIndex);return c&&h?c.distanceTo(h)/a:800}return 800})();o.currentPlayKeyframe&&(o.currentPlayKeyframe.originDuration=l),yield new Promise(c=>{var h,d,u;const f=this.fiveUtil.moveToPano(e.panoIndex,{latitude:e.latitude,longitude:e.longitude,fov:e.fov,duration:this.getSpeededDuration(l),effect:(u=(d=t==null?void 0:t.moveEffect)!=null?d:(h=this.state.config)==null?void 0:h.moveEffect)!=null?u:e.moveEffect,moveCancelCallback:()=>c(),moveEndCallback:()=>c()});f instanceof Promise&&f.then(()=>c()),r&&n.once("panoArrived",()=>c())}),r&&(this.privateState.modeChanging=!1)})}changeMode(e,t){return ee(this,null,function*(){e.mode&&e.mode!==this.five.currentMode&&(this.privateState.modeChanging=!0,yield this.five.changeMode(e.mode,e,t),this.privateState.modeChanging=!1)})}}class aM{constructor(e){p(this,"id"),p(this,"renderID"),p(this,"isGuideLine",!0),p(this,"panoramaItem"),p(this,"modelItem"),p(this,"hooks",new Mt),p(this,"_visible",!0),p(this,"plugin"),p(this,"five"),p(this,"logError",t=>Fv("GuideLineItem: ",t)),this.id=e.id,this.five=e.five,this.plugin=e.plugin,this.panoramaItem=new rg(this.five,{mode:"panorama",plugin:this.plugin,parent:this}),this.modelItem=new rg(this.five,{mode:"model",plugin:this.plugin,parent:this})}get visible(){return this._visible}setData(e){this.setDataByMode("panorama",e),this.setDataByMode("model",e)}setDataByMode(e,t){var n;const o=e==="panorama"?this.panoramaItem:this.modelItem,s=e==="panorama"?t.panorama_style:t.model_style,r=t.path,a=s,l=s,c=s;if(t.pano_group){const h=e==="panorama"&&t.panorama_style.skip_group===!0;o.setGeometryByPanoGroup(t.pano_group,W(pe(W({},t),{skipPanoGroup:h}),a))}else t.path&&o.setGeometryByPath(r,W({},a));o.name=t.name,o.setMeshStyle(c),o.setMartial(l),o.setVisibleFloorIndexes((n=t.visible_floor_indexes)!=null?n:null),o.setStartTag(s==null?void 0:s.start_tag),o.setEndTag(s==null?void 0:s.end_tag)}show(){this._visible=!0,this.hooks.emit("show",{userAction:!0})}hide(){this._visible=!1,this.hooks.emit("hide",{userAction:!0})}dispose(){this.panoramaItem.dispose(),this.modelItem.dispose()}walk(e){return ee(this,null,function*(){if(this.hooks.emit("walkStart",{userAction:!0}),this.panoramaItem.panoGroup.length){const t=W({panoIndexList:this.panoramaItem.panoGroup},e),[n]=yield Ws(cM(this.five,t));if(n)return this.logError(n.message)}else{const t={path:this.panoramaItem.curvePath},[n]=yield Ws(lM(this.five,t));if(n)return this.logError(n.message)}this.hooks.emit("walkEnded",{userAction:!0})})}}function lM(i,e){return ee(this,null,function*(){const t=new b1(i);yield t.load(e),t.playFromStart()})}function cM(i,e){return ee(this,null,function*(){if(e.panoIndexList.length===0)return;const t=i.getCurrentState();t.mode!=="Panorama"&&(yield av(i,["Panorama",{longitude:t.longitude,latitude:0,panoIndex:e.panoIndexList[0]}]));const n=new Od(i);yield n.load(e),yield new Promise((o,s)=>{const r=i.getCurrentState();let a=e.panoIndexList.slice();r.panoIndex===a[0]&&c(r.panoIndex),n.playFromStart();function l(f){if(f!=="Panorama")return d(new Error("mode not match"))}function c(f){const m=a[0];if(a=a.slice(1),f!==m)return d(new Error("panoIndex not match, wanted: "+m+", got: "+f));if(a.length===0)return u()}function h(){i.off("modeChange",l),i.off("panoArrived",c)}function d(f){h(),s(f)}function u(){h(),o()}i.on("modeChange",l),i.on("panoArrived",c)})})}const uh="GuideLinePlugin",lg=`${uh}`;let hM=class extends Co{constructor(i,e){super(i,e),p(this,"name",uh),p(this,"cruisePlugin"),p(this,"itemMap",new Map),p(this,"state",{visible:!1,enabled:!0}),p(this,"data"),p(this,"heightOffset",0),p(this,"_config"),p(this,"_disposed",!1),p(this,"disposedErrorLog",()=>{console.error(`${lg} is disposed`)}),this._config=e??{},this.cruisePlugin=new Od(i),Object.assign(window,{[`__${uh}_DEBUG__`]:this})}get config(){return this._config}get disposed(){return this._disposed}load(i,e,t=!0){return ee(this,null,function*(){var n,o,s,r,a,l,c;const h=this.data?JSON.parse(JSON.stringify(this.data)):void 0,d=yield this.formatData(i);this.hooks.emit("dataChange",d,h),this.data=d;const u=d.config,f=!d.lines&&d.routes,m=(n=u==null?void 0:u.arrowTextureUrl)!=null?n:lo(this.staticPrefix,Yh),g=pe(W({},u),{model_style:{texture:{url:m}},panorama_style:{visible:!!f,unit_length:(o=u==null?void 0:u.unitHeight)!=null?o:.4,width:(s=u==null?void 0:u.unitWidth)!=null?s:.6,texture:{url:m}}}),v=(a=(r=d.routes)==null?void 0:r.map(P=>{var I;return it({},g,{id:(I=P.id)!=null?I:Bt(),pano_group:P.panoIndexList})}))!=null?a:[],A=(c=(l=d.lines)==null?void 0:l.map(P=>it({},g,P)))!=null?c:[],w=[...v,...A];yield Ti(this.five),this.clear(),w.forEach(P=>{this.addGuideLineItem(this.processItemUrls(P))}),this.updateTagsEnable(),this.handleVisible(this.state.visible),this.handleEnable(this.state.enabled),e&&this.setState(e,{userAction:t}),this.hooks.emit("dataLoaded",d),console.debug(`${lg} loaded`,d)})}formatData(i){return ee(this,null,function*(){return this.getDataWithoutVersion(i)})}show(i){return ee(this,null,function*(){this.setState({visible:!0},i)})}hide(i){return ee(this,null,function*(){this.setState({visible:!1},i)})}enable(i){this.setState({enabled:!0},i)}disable(i){this.setState({enabled:!1},i)}dispose(){this.disposed||(this.clear(),this.hooks.emit("dispose"))}setState(i,e){var t;if(this.disposed)return this.disposedErrorLog();const n=W({},this.state);this.state=W(W({},this.state),i),i.visible!==void 0&&i.visible!==n.visible&&this.handleVisible(i.visible,e==null?void 0:e.userAction),i.enabled!==void 0&&i.enabled!==n.enabled&&this.handleEnable(i.enabled,e==null?void 0:e.userAction),Yi(n,this.state,{deep:!0})||(this.hooks.emit("stateChange",{state:this.state,prevState:n,userAction:(t=e==null?void 0:e.userAction)!=null?t:!0}),this.five.needsRender=!0)}addGuideLineItem(i){const e=i.render_id||i.id,t=this.itemMap.get(e);t&&this.removeGuideLineItem(t);const n=new aM({five:this.five,id:e,plugin:this});return this.itemMap.set(e,n),i&&n.setData(i),this.heightOffset+=1e-4,n.modelItem.setHeightOffset(this.heightOffset),n.panoramaItem.setHeightOffset(this.heightOffset),n}processItemUrls(i){var e,t,n,o;const s=W({},i),r=zl;if(s.panorama_style){const a=(t=(e=s.panorama_style.texture)==null?void 0:e.url)!=null?t:r;s.panorama_style=pe(W({},s.panorama_style),{texture:pe(W({},s.panorama_style.texture),{url:lo(this.staticPrefix,a)})})}if(s.model_style){const a=(o=(n=s.model_style.texture)==null?void 0:n.url)!=null?o:r;s.model_style=pe(W({},s.model_style),{texture:pe(W({},s.model_style.texture),{url:lo(this.staticPrefix,a)})})}return s}getGuideLineItemByID(i){return this.itemMap.get(i)}removeGuideLineItem(i){this.itemMap.delete(i.id),i.panoramaItem.dispose(),i.modelItem.dispose()}updateTagsEnable(){const i=[];function e(o){return Array.isArray(o)&&o.every(s=>typeof s=="number")}function t(o,s){return new R().fromArray(o).distanceTo(new R().fromArray(s))<.01}function n(o){var s;const r=(s=o==null?void 0:o.tag)==null?void 0:s.position;return e(r)?i.every(a=>{var l;return e((l=a.tag)==null?void 0:l.position)?!t(r,a.tag.position):!0}):!1}this.itemMap.forEach(o=>{const s=o.modelItem.startTagContainer,r=o.modelItem.endTagContainer,a=n(s);a&&i.push(s),s==null||s.plugin.setState({enabled:a},{});const l=n(r);l&&i.push(r),r==null||r.plugin.setState({enabled:l},{})})}clear(){this.heightOffset=0,this.itemMap.forEach(i=>{this.removeGuideLineItem(i)})}handleEnable(i,e=!0){this.hooks.emit(i?"enable":"disable",{userAction:e})}handleVisible(i,e=!0){this.state.enabled&&this.hooks.emit(i?"show":"hide",{userAction:e})}getDataWithoutVersion(i){return typeof i=="object"&&i!==null&&i.data?i.data:i}};const x1=(i,e)=>new hM(i,e),dM=x1,lD=(i,e)=>new Od(i,e),cD=(i,e)=>new b1(i,e);function Rd(i,e,t){if(t){const n=new R().subVectors(i.position,t).applyQuaternion(i.quaternion.clone().inverse()).applyQuaternion(e).add(t);i.position.copy(n)}i.quaternion.copy(e)}class ua extends mi{constructor(e,t){var n,o;super(),p(this,"originObject3D"),p(this,"onRender"),p(this,"positionFrom"),this.originObject3D=e,this.onRender=(n=t==null?void 0:t.onRender)!=null?n:()=>{},this.positionFrom=(o=t==null?void 0:t.positionFrom)!=null?o:"objectPosition"}get helperObject(){return this}render(){this.onRender()}enable(){this.parent.children.includes(this)||this.parent.add(this)}disable(){this.removeFromParent()}show(){this.visible=!0,this.render()}hide(){this.visible=!1,this.render()}raycasterIntersectObject(e,t=[]){return e.intersectObject(this,!0,t)}initialPosition(e){var t,n;this.positionFrom==="objectPosition"?this.position.copy(this.originObject3D.position):this.positionFrom==="boundingBox"?this.position.copy((t=ts(this.originObject3D))==null?void 0:t.getCenter(new R).applyMatrix4(this.originObject3D.matrixWorld)):this.positionFrom==="boundingSphere"?this.position.copy((n=l0(this.originObject3D))==null?void 0:n.center.clone().applyMatrix4(this.originObject3D.matrixWorld)):this.positionFrom instanceof R?this.position.copy(this.positionFrom):this.positionFrom instanceof Function&&this.position.copy(this.positionFrom(this.originObject3D)),e&&this.position.add(e)}setScaleByCamera(e){}initQuaternion(e){if(this.quaternion.copy(this.originObject3D.quaternion),e&&(e.xAxis||e.yAxis||e.zAxis)){const t=e.xAxis instanceof Function?e.xAxis():e.xAxis,n=e.yAxis instanceof Function?e.yAxis():e.yAxis,o=e.zAxis instanceof Function?e.zAxis():e.zAxis;let s=t==null?void 0:t.clone(),r=n==null?void 0:n.clone(),a=o==null?void 0:o.clone();if(s&&!r&&!r){const l=new tt().setFromUnitVectors(new R(1,0,0),s.normalize());this.applyQuaternion(l)}if(r&&!s&&!a){const l=new tt().setFromUnitVectors(new R(0,1,0),r.normalize());this.applyQuaternion(l)}if(a&&!s&&!r){const l=new tt().setFromUnitVectors(new R(0,0,1),a.normalize());this.applyQuaternion(l)}if([s,r,a].filter(Be).length>=2){s||(s=new R().crossVectors(r,a).normalize()),r||(r=new R().crossVectors(s,a).normalize()),a||(a=new R().crossVectors(s,r).normalize()),s.applyQuaternion(this.quaternion),r.applyQuaternion(this.quaternion),a.applyQuaternion(this.quaternion);const l=new Xe().makeBasis(s,r,a),c=new tt().setFromRotationMatrix(l);this.quaternion.copy(c)}}}applyHelperScaleMatrix4(e,t){this.scale.applyMatrix4(e)}setHelperQuaternion(e,t){this.initQuaternion(),Rd(this,this.quaternion.clone().premultiply(e),t)}applyHelperQuaternion(e,t){if(t){const n=new R().subVectors(this.position,t).applyQuaternion(e).add(t);this.position.copy(n)}this.applyQuaternion(e)}dispose(){this.removeFromParent()}}class uM extends ua{}class pM extends ua{}class fM extends ua{}class mM extends ua{}class gM extends ua{}class vM extends Et{constructor(e){super(),p(this,"direction"),this.direction=e||"x"}}class ph extends We{constructor(e,t,n){super(e,t),p(this,"direction"),this.direction=n||"x"}}function AM(i,e){const{offsetWidth:t,offsetHeight:n}=e,{top:o,left:s}=e.getBoundingClientRect();return Object.assign(new Qe,{x:(i.x-s)/t*2-1,y:-(i.y-o)/n*2+1})}function Ul(i,e,t){if(!e||!t||!i)return;const n=AM(e,t);if(Math.abs(n.x)===1||Math.abs(n.y)===1)return;const o=new Ot;return o.setFromCamera(n,i),o.params.Points.threshold=.1,o}const qi={ROTATE_HELPER:9992,MOVE_HELPER:9993,SCALE_HELPER_LINE:9994,SCALE_HELPER_SPHERE:9995,MOVE_HELPER_ARROW:10001,MOVE_HELPER_CENTER:10002,DRAG_GUIDE_LINE:10003,DRAG_FACE_PATCH:10004};class xc extends vM{constructor(e){var t;super(e.direction),p(this,"line"),p(this,"arrow"),p(this,"lineHeight",.4),p(this,"arrowHeight",.1),p(this,"name","ArrowGroup");const n=new Ye((t=e.color)!=null?t:16214315),o=new Ze({color:n,transparent:!0,opacity:1,depthTest:!1,depthWrite:!1}),s=new hA(.04,.1,32),r=new ph(s,o.clone(),e.direction);r.name=`arrow-${e.direction}`,r.renderOrder=qi.MOVE_HELPER_ARROW,this.arrow=r;const a=.004,l=new Bg(a,a,.4,32),c=new ph(l,o.clone(),e.direction);c.name=`line-${e.direction}`,c.renderOrder=qi.MOVE_HELPER_ARROW,this.line=c,this.formatArrow(),this.formatLine(),this.add(this.arrow,this.line)}formatArrow(){this.arrow.geometry.translate(0,this.lineHeight+this.arrowHeight/2,0),this.direction==="x"?(this.arrow.geometry.rotateX(Math.PI/2),this.arrow.geometry.rotateY(Math.PI/2)):this.direction==="z"&&this.arrow.geometry.rotateX(Math.PI/2)}formatLine(){this.line.geometry.translate(0,this.lineHeight/2,0),this.direction==="x"?(this.line.geometry.rotateX(Math.PI/2),this.line.geometry.rotateY(Math.PI/2)):this.direction==="z"&&this.line.geometry.rotateX(Math.PI/2)}}const Cc={X:16730698,Y:54927,Z:3368703};class zs{static get X(){return new Ye(Cc.X).convertSRGBToLinear().clone()}static get Y(){return new Ye(Cc.Y).convertSRGBToLinear().clone()}static get Z(){return new Ye(Cc.Z).convertSRGBToLinear().clone()}}function Bd(i,e,t){const n=i.position.distanceTo(e),o=i.fov,s=i.distance||3,r=n/3,a=o/90,l=s/3,c=r*a*l,h=(t==null?void 0:t.min)||.6,d=t==null?void 0:t.max;return h&&c<h?h:d&&c>d?d:c}function yM(i,e,t){return i<e?e:i>t?t:i}function bM(i){let e=i.pose.latitude,t=i.pose.longitude;if(Oi(e)||Oi(t)){const n=i.matrix.elements;e=Math.asin(yM(n[9],-1,1)),Math.abs(n[9])<.9999999?t=Wc(Math.atan2(n[8],n[10])):t=Wc(Math.atan2(-n[2],n[0]))}return{latitude:e,longitude:t}}function wM(i){const{latitude:e,longitude:t}=i,n=new R;return cg-e<.03?n.set(0,1,0):Pc(0,t)?n.set(0,0,1):Pc(Math.PI,t)?n.set(0,0,-1):Pc(cg,t)?n.set(1,0,0):n.set(-1,0,0),n}const cg=Number((Math.PI/2).toFixed(5));function Pc(i,e){return typeof i!="number"||typeof e!="number"?!1:Math.abs(i-e)<.001}class xM extends uM{constructor(e,t){super(e,t),p(this,"name","MoveHelper"),p(this,"xArrow"),p(this,"yArrow"),p(this,"zArrow"),p(this,"centerHandle"),t.xArrowEnable!==!1&&(this.xArrow=new xc({direction:"x",color:zs.X})),t.yArrowEnable!==!1&&(this.yArrow=new xc({direction:"y",color:zs.Y})),t.zArrowEnable!==!1&&(this.zArrow=new xc({direction:"z",color:zs.Z}));const n=new Ye(16419862),o=.07,s=new wh(o,o,o),r=new Ze({color:n,transparent:!0,opacity:1,depthTest:!1,depthWrite:!1,side:It}),a=new ph(s,r,"plane");a.renderOrder=qi.MOVE_HELPER_CENTER,a.name="center-plane-handle",this.centerHandle=a,this.add(...[this.xArrow,this.yArrow,this.zArrow,this.centerHandle].filter(Boolean))}update(e){this.xArrow&&(this.xArrow.visible=!0),this.yArrow&&(this.yArrow.visible=!0),this.zArrow&&(this.zArrow.visible=!0);const t=this.helperObject.position.clone().sub(e.position).normalize(),n=new R(1,0,0).applyQuaternion(this.quaternion),o=new R(0,1,0).applyQuaternion(this.quaternion),s=new R(0,0,1).applyQuaternion(this.quaternion);if(e.type==="OrthographicCamera"){const r=bM(e),a=wM(r),l=.0872665;Math.abs(n.angleTo(a)-0)<l||Math.abs(n.angleTo(a)-Math.PI)<l?this.xArrow&&(this.xArrow.visible=!1):Math.abs(o.angleTo(a)-0)<l||Math.abs(o.angleTo(a)-Math.PI)<l?this.yArrow&&(this.yArrow.visible=!1):(Math.abs(s.angleTo(a)-0)<l||Math.abs(s.angleTo(a)-Math.PI)<l)&&this.zArrow&&(this.zArrow.visible=!1)}if(e.type!=="OrthographicCamera"){const r=t.angleTo(n),a=t.angleTo(o),l=t.angleTo(s),c=Math.PI/2,h=a<c,d=l<c,u=r<c;this.xArrow&&(u?(this.xArrow.scale.x=-1,this.xArrow.scale.y=1,this.xArrow.scale.z=1):(this.xArrow.scale.x=1,this.xArrow.scale.y=1,this.xArrow.scale.z=1)),this.yArrow&&(h?(this.yArrow.scale.x=1,this.yArrow.scale.y=-1,this.yArrow.scale.z=1):(this.yArrow.scale.x=1,this.yArrow.scale.y=1,this.yArrow.scale.z=1)),this.zArrow&&(d?(this.zArrow.scale.x=1,this.zArrow.scale.y=1,this.zArrow.scale.z=-1):(this.zArrow.scale.x=1,this.zArrow.scale.y=1,this.zArrow.scale.z=1))}}show(){super.show(),this.xArrow&&this.add(this.xArrow),this.yArrow&&this.add(this.yArrow),this.zArrow&&this.add(this.zArrow),this.centerHandle&&this.add(this.centerHandle)}setScaleByCamera(e){this.scale.setScalar(Bd(e,this.position))}showDraggingHelper(e){this.xArrow&&(e.includes("x")?this.add(this.xArrow):this.remove(this.xArrow)),this.yArrow&&(e.includes("y")?this.add(this.yArrow):this.remove(this.yArrow)),this.zArrow&&(e.includes("z")?this.add(this.zArrow):this.remove(this.zArrow)),this.centerHandle&&(e.includes("plane")?this.add(this.centerHandle):this.remove(this.centerHandle))}dispose(){this.remove(...[this.xArrow,this.yArrow,this.zArrow,this.centerHandle].filter(Boolean)),super.dispose()}}function Qo(i,e){return CM(document.createElement(e??"div"),i)}function CM(i,e){if(!e)return i;for(const t in e)t&&e[t]&&(i.style[t]=e[t]);return i}function PM(i){const e=Qo(W({position:"absolute",display:"block",borderRadius:"4px",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"4px",paddingRight:"4px",pointerEvents:"none",userSelect:"none",zIndex:"99999",backgroundColor:"rgba(0,0,0,0.7)",fontSize:"12px",color:"#fff",letterSpacing:"0",lineHeight:"18px"},i)),t=()=>{e.style.display!=="block"&&e.style.top&&e.style.left&&(e.style.display="block")};return{element:e,show:t,hide:()=>{e.style.display="none",e.style.top="",e.style.left=""},setLeftTop:(n,o)=>{e.style.left=n,e.style.top=o,t()}}}class EM extends fM{constructor(e,t){super(e,t),p(this,"name","RotateHelper"),p(this,"xCircle"),p(this,"yCircle"),p(this,"zCircle"),p(this,"children",[]),p(this,"angleTips"),p(this,"container"),(t==null?void 0:t.yzCircleEnable)!==!1&&(this.xCircle=new Ec({direction:"x",color:zs.X})),(t==null?void 0:t.xzCircleEnable)!==!1&&(this.yCircle=new Ec({direction:"y",color:zs.Y})),(t==null?void 0:t.xyCircleEnable)!==!1&&(this.zCircle=new Ec({direction:"z",color:zs.Z})),t!=null&&t.container&&(t==null?void 0:t.angleTipsEnable)!==!1&&(this.container=t==null?void 0:t.container,this.angleTips=PM({display:"none"}),this.container.appendChild(this.angleTips.element)),this.add(...[this.xCircle,this.yCircle,this.zCircle].filter(Boolean)),this.show()}hide(){this.children.forEach(e=>e.hide())}show(){var e;this.children.forEach(t=>t.showCircle()),(e=this.angleTips)==null||e.hide()}setScaleByCamera(e){this.scale.setScalar(Bd(e,this.position))}update(e){if(e.type==="OrthographicCamera")return;const t=this.helperObject.position.clone().sub(e.position).normalize(),n=new R(1,0,0).applyQuaternion(this.quaternion),o=new R(0,1,0).applyQuaternion(this.quaternion),s=new R(0,0,1).applyQuaternion(this.quaternion),r=t.angleTo(n),a=t.angleTo(o),l=t.angleTo(s),c=Math.PI/2,h=a>=c,d=l>=c,u=r>=c;if(this.xCircle){const f=this.xCircle.circle.gapAngle;h&&d?this.xCircle.circle.geometry=new Yt(.25,.3,20,8,f,Math.PI/2-f*2):h&&!d?this.xCircle.circle.geometry=new Yt(.25,.3,20,8,Math.PI/2+f,Math.PI/2-f*2):!h&&d?this.xCircle.circle.geometry=new Yt(.25,.3,20,8,Math.PI/2*3+f,Math.PI/2-f*2):!h&&!d&&(this.xCircle.circle.geometry=new Yt(.25,.3,20,8,Math.PI+f,Math.PI/2-f*2)),this.xCircle.angleSector&&(this.xCircle.angleSector.offsetAngle=m=>m,h&&d?this.xCircle.angleSector.baseAxes=new R(0,0,1):h&&!d?this.xCircle.angleSector.baseAxes=new R(0,0,1):!h&&d?(this.xCircle.angleSector.baseAxes=new R(0,-1,0),this.xCircle.angleSector.offsetAngle=m=>m-Math.PI/2):!h&&!d&&(this.xCircle.angleSector.baseAxes=new R(0,0,-1),this.xCircle.angleSector.offsetAngle=m=>m-Math.PI))}if(this.yCircle){this.yCircle.angleSector.offsetAngle=m=>m;const f=this.yCircle.circle.gapAngle;u&&d?this.yCircle.circle.geometry=new Yt(.25,.3,20,8,f,Math.PI/2-f*2):u&&!d?this.yCircle.circle.geometry=new Yt(.25,.3,20,8,Math.PI/2*3+f,Math.PI/2-f*2):!u&&d?this.yCircle.circle.geometry=new Yt(.25,.3,20,8,Math.PI/2+f,Math.PI/2-f*2):!u&&!d&&(this.yCircle.circle.geometry=new Yt(.25,.3,20,8,Math.PI+f,Math.PI/2-f*2)),u&&d?this.yCircle.angleSector.baseAxes=new R(1,0,0):u&&!d?(this.yCircle.angleSector.baseAxes=new R(0,0,-1),this.yCircle.angleSector.offsetAngle=m=>m-Math.PI/2):!u&&d?(this.yCircle.angleSector.baseAxes=new R(0,0,1),this.yCircle.angleSector.offsetAngle=m=>m+Math.PI/2):!u&&!d&&(this.yCircle.angleSector.baseAxes=new R(-1,0,0),this.yCircle.angleSector.offsetAngle=m=>m+Math.PI)}if(this.zCircle){this.zCircle.angleSector.offsetAngle=m=>m;const f=this.zCircle.circle.gapAngle;u&&h?this.zCircle.circle.geometry=new Yt(.25,.3,20,8,f,Math.PI/2-f*2):u&&!h?this.zCircle.circle.geometry=new Yt(.25,.3,20,8,Math.PI/2*3+f,Math.PI/2-f*2):!u&&h?this.zCircle.circle.geometry=new Yt(.25,.3,20,8,Math.PI/2+f,Math.PI/2-f*2):!u&&!h&&(this.zCircle.circle.geometry=new Yt(.25,.3,20,8,Math.PI+f,Math.PI/2-f*2)),this.zCircle.angleSector&&(u&&h?this.zCircle.angleSector.baseAxes=new R(1,0,0):u&&!h?(this.zCircle.angleSector.baseAxes=new R(0,-1,0),this.zCircle.angleSector.offsetAngle=m=>m-Math.PI/2):!u&&h?(this.zCircle.angleSector.baseAxes=new R(0,1,0),this.zCircle.angleSector.offsetAngle=m=>m+Math.PI/2):!u&&!h&&(this.zCircle.angleSector.baseAxes=new R(-1,0,0),this.zCircle.angleSector.offsetAngle=m=>m+Math.PI))}}showDraggingHelper(e){var t;this.hide(),this.children.filter(n=>e.includes(n.direction)).forEach(n=>n.showRing()),(t=this.angleTips)==null||t.show()}dispose(){var e,t;this.removeFromParent(),(t=(e=this.angleTips)==null?void 0:e.element)==null||t.remove()}}class Ec extends Et{constructor(e){super(),p(this,"direction"),p(this,"circle"),p(this,"ring"),p(this,"angleSector"),this.direction=e.direction,this.circle=new IM(e),this.ring=new MM(e),this.angleSector=new SM(e),this.add(this.circle,this.ring,this.angleSector),this.direction==="y"?this.rotation.x=Math.PI/2:this.direction==="x"&&(this.rotation.y=-Math.PI/2)}showCircle(){this.add(this.circle),this.remove(this.ring,this.angleSector)}showRing(){this.add(this.ring,this.angleSector),this.remove(this.circle)}hide(){this.remove(this.ring,this.angleSector,this.circle)}}let IM=class extends We{constructor(i){var e;super(),p(this,"direction"),p(this,"gapAngle",.02),p(this,"geometry",new Yt(.25,.3,20,8,this.gapAngle,Math.PI/2-this.gapAngle*2)),this.material=new Ze({opacity:.6,transparent:!0,color:(e=i.color)!=null?e:16777215,side:It,depthTest:!1}),this.direction=i.direction,this.renderOrder=qi.ROTATE_HELPER,this.geometry.name=`RotateHelperCircleGeometry-${this.direction}`}};class MM extends Et{constructor(e){super(),p(this,"direction"),this.direction=e.direction;const t=.015,n=new Array(8).fill(null).map((o,s)=>{const r=new Yt(.25,.3,20,8,Math.PI/4*s+t,Math.PI/4-t*2),a=new Ze({opacity:1,color:16777215,depthTest:!1,depthWrite:!1,transparent:!0,side:It}),l=new We(r,a);return l.name=`AxesDashedRing-${this.direction}-${s}`,l});this.add(...n)}}class SM extends We{constructor(e){var t;switch(super(),p(this,"direction"),p(this,"baseAxes"),p(this,"offsetAngle",o=>o),p(this,"angleDirection"),e.direction){case"x":this.baseAxes=new R(0,0,1);break;case"y":this.baseAxes=new R(1,0,0);break;case"z":this.baseAxes=new R(1,0,0);break}const n=.3+5e-4;this.geometry=new no(n,48,0,1e-4),this.material=new Ze({opacity:.4,color:(t=e.color)!=null?t:16777215,depthTest:!1,depthWrite:!1,transparent:!0,side:It}),this.direction=e.direction,this.angleDirection=this.direction==="z"?1:-1}setClockwiseDirection(){this.angleDirection=-1}setCounterClockwiseDirection(){this.angleDirection=1}toggleDirection(){this.angleDirection=this.angleDirection===1?-1:1}setBaseAxes(e){this.baseAxes=e.clone().normalize()}getDirection(){return this.angleDirection===-1?"clockwise":"counterclockwise"}}function DM(){const i=Qo({width:"100%",height:"100%",left:"0",top:"0",position:"absolute",pointerEvents:"none"}),e=Qo({boxSizing:"border-box",width:"100%",height:"100%",left:"0",top:"0",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),t=Qo({boxSizing:"border-box",width:"100%",height:"100%",left:"0",top:"0",position:"absolute",border:"1px solid rgba(255,255,255,0.4)"});i.appendChild(e),e.appendChild(t);const n="-4px",o={direction:"nesw",element:$n({cursor:"nesw-resize",left:n,bottom:n})},s={direction:"ns",element:$n({cursor:"ns-resize",bottom:n})},r={direction:"nwse",element:$n({cursor:"nwse-resize",right:n,bottom:n})},a={direction:"ew",element:$n({cursor:"ew-resize",right:n})},l={direction:"nesw",element:$n({cursor:"nesw-resize",right:n,top:n})},c={direction:"ns",element:$n({cursor:"ns-resize",top:n})},h={direction:"nwse",element:$n({cursor:"nwse-resize",left:n,top:n})},d={direction:"ew",element:$n({cursor:"ew-resize",left:n})};return new Array(s,a,c,d,o,r,l,h).forEach(u=>e.appendChild(u.element)),{container:i,spheres:[o,s,r,a,l,c,h,d]}}function $n(i){const e=Qo(W({background:"#FFFFFF",width:"9px",height:"9px",position:"absolute",pointerEvents:"none"},i)),t=Qo({width:"15px",height:"15px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"}),n=Qo({width:"15px",height:"15px",cursor:i==null?void 0:i.cursor,pointerEvents:"auto",background:"transparent"});return n.draggable=!0,t.appendChild(n),e.appendChild(t),e}const Oa=new Map;function C1(i){if(Oa.has(i))return Oa.get(i).hooks;const e=new Mt;let t=null,n;const o=()=>{t=requestAnimationFrame(o);const r=i.projectionMatrix.toArray().join(",")+i.matrixWorld.toArray().join(",");r!==n&&(n=r,e.emit("cameraUpdate"))};o();const s=()=>{Oa.delete(i),cancelAnimationFrame(t)};return Oa.set(i,{hooks:e,dispose:s}),e}class kM extends gM{constructor(e,t,n,o){super(e),p(this,"name","CSS3DScaleHelper"),p(this,"points",[]),p(this,"cornerPositions",[]),p(this,"css3DInstance"),p(this,"plane"),p(this,"css3DRenderer",new Nr),p(this,"camera"),p(this,"scene"),p(this,"container"),p(this,"enabled",!1),this.camera=n,this.scene=o,this.container=t,this.initRectangleScaleHelper()}get helperObject(){var e;if(!((e=this.css3DInstance)!=null&&e.css3DObject))throw new Error("css3DInstance is not initialized");return this.css3DInstance.css3DObject}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}applyMatrix4(e){var t;super.applyMatrix4(e),this.helperObject.applyMatrix4(e),(t=this.plane)==null||t.applyMatrix4(e),this.cornerPositions.forEach(n=>n.applyMatrix4(e))}showDraggingHelper(){}applyHelperScaleMatrix4(e,t){var n;(n=this.plane)==null||n.scale.applyMatrix4(e),this.helperObject.applyScaleMatrix4(e)}updatePoints(){const e=this.calculatePointPosition(this.cornerPositions);this.points.forEach((t,n)=>{t.position.copy(e[n])})}update(e){var t;(t=this.css3DInstance)!=null&&t.css3DObject&&this.helperObject.position.copy(this.originObject3D.position),this.plane&&this.plane.position.copy(this.originObject3D.position),this.updatePoints(),this.css3DInstance&&this.css3DInstance.show(),this.plane&&(this.plane.visible=!0)}applyHelperQuaternion(e,t){var n;const o=(n=this.css3DInstance)==null?void 0:n.css3DObject;if(o){const s=new R().subVectors(o.position,t).applyQuaternion(e).add(t);o.position.copy(s),o.applyQuaternion(e)}if(this.plane){const s=new R().subVectors(this.plane.position,t).applyQuaternion(e).add(t);this.plane.position.copy(s),this.plane.applyQuaternion(e)}this.cornerPositions.forEach(s=>{const r=new R().subVectors(s,t).applyQuaternion(e).add(t);s.copy(r)})}enable(){var e;this.enabled||(this.enabled=!0,(e=this.css3DInstance)==null||e.enable(),this.plane&&this.scene.add(this.plane))}disable(){var e;this.enabled&&(this.enabled=!1,(e=this.css3DInstance)==null||e.disable(),this.plane&&this.scene.remove(this.plane))}show(){var e;(e=this.css3DInstance)==null||e.show(),this.plane&&(this.plane.visible=!0)}hide(){var e;(e=this.css3DInstance)==null||e.hide(),this.plane&&(this.plane.visible=!1)}dispose(){this.disable(),this.css3DRenderer.dispose()}onScaleEnd(){C1(this.camera).emit("cameraUpdate")}initRectangleScaleHelper(){var e,t;const n=this.getCornerPositions();if(!n)return;this.cornerPositions=n;const o=this.css3DRenderer.create3DElement(this.camera,n,{ratio:.003});if(!o)return;this.css3DInstance=o,o.appendToElement(this.container);const s=o.css3DObject.container,{container:r,spheres:a}=DM();this.points=a.map((l,c)=>({direction:l.direction,point:l.element,position:this.calculatePointPosition(n)[c]})),s.insertBefore(r,(e=s.children[0])!=null?e:null),this.helperObject.position.copy(this.originObject3D.position),(t=this.plane)==null||t.position.copy(this.originObject3D.position)}getCornerPositions(){const{originObject3D:e}=this;if(e.isCSS3DObject&&e.cornerPoints)return e.cornerPoints;console.error("当前物体暂时不支持 ScaleHelper")}calculatePointPosition(e){return[e[0].clone(),e[0].clone().add(e[1]).divideScalar(2),e[1].clone(),e[1].clone().add(e[2]).divideScalar(2),e[2].clone(),e[2].clone().add(e[3]).divideScalar(2),e[3].clone(),e[3].clone().add(e[0]).divideScalar(2)]}}class zM extends pM{constructor(e){super(e),p(this,"name","BoundingBoxHelper"),p(this,"box"),p(this,"outline"),p(this,"positionAttribute"),this.positionAttribute=new dt(new Float32Array(8*3),3),this.box=this.createBox(),this.outline=this.createOutline(),this.add(this.box,this.outline),this.update()}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}setHelperQuaternion(e,t){Rd(this,e,t)}raycasterIntersectObject(e,t){return e.intersectObject(this,!1,t)}raycast(e,t){this.box.raycast(e,t)}update(){const e=ts(this.originObject3D);if(!e)return;const{min:t,max:n}=e;this.positionAttribute.setXYZ(0,n.x,n.y,n.z),this.positionAttribute.setXYZ(1,t.x,n.y,n.z),this.positionAttribute.setXYZ(2,t.x,t.y,n.z),this.positionAttribute.setXYZ(3,n.x,t.y,n.z),this.positionAttribute.setXYZ(4,n.x,n.y,t.z),this.positionAttribute.setXYZ(5,t.x,n.y,t.z),this.positionAttribute.setXYZ(6,t.x,t.y,t.z),this.positionAttribute.setXYZ(7,n.x,t.y,t.z),this.positionAttribute.needsUpdate=!0}createOutline(){const e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),t=new xt;t.setIndex(new dt(e,1)),t.setAttribute("position",this.positionAttribute);const n=new $r({color:64767,linewidth:1,opacity:1,toneMapped:!1}),o=new Og(t,n);return o.matrixAutoUpdate=!1,o}createBox(){const e=new Uint16Array([0,1,2,0,2,3,0,3,7,0,7,4,0,4,5,0,5,1,6,1,5,6,2,1,6,5,4,6,4,7,6,3,2,6,7,3]),t=new xt;t.setIndex(new dt(e,1)),t.setAttribute("position",this.positionAttribute);const n=new Ze({color:64767,opacity:.1,depthTest:!1,transparent:!0});return new We(t,n)}}class pa{constructor(e,t){p(this,"originObject3D"),p(this,"hooks"),p(this,"preventTapDefaultEvent",!1),p(this,"internalHooks"),p(this,"disposers",[]),p(this,"helperObject3D"),p(this,"camera"),p(this,"model"),p(this,"scene"),p(this,"container"),p(this,"domEvents"),p(this,"isDragging",!1),p(this,"enabled",!1),p(this,"name","BaseController"),p(this,"boundingBox"),p(this,"config"),p(this,"onRender"),p(this,"cameraHooks"),p(this,"onWantsTapGesture",f=>{if(this.getIntersectObject(f))return!1}),p(this,"updateHelperScale",()=>{"update"in this.helperObject3D&&typeof this.helperObject3D.update=="function"&&this.helperObject3D.update(this.camera),this.helperObject3D.setScaleByCamera(this.camera)}),p(this,"getBox",()=>this.boundingBox?this.boundingBox:(this.boundingBox=ts(this.originObject3D),this.boundingBox));var n,o,s;this.hooks=(n=e.sharedHooks)!=null?n:new Mt,this.internalHooks=(o=e.sharedInternalHooks)!=null?o:new Mt,this.camera=e.camera,this.model=e.model,this.originObject3D=e.originObject3D,this.helperObject3D=e.helperObject3D,this.container=e.container,this.scene=e.scene,this.domEvents=e.domEvents,this.onRender=(s=e.onRender)!=null?s:()=>{},this.config=t??{},this.initialHelperPosition(),this.initialHelperQuaternion(),this.updateHelperScale(),this.cameraHooks=C1(this.camera),this.enable();const r=this.onSetOriginObjectScale.bind(this),a=this.onSetOriginObjectRotate.bind(this),l=this.onSetOriginObjectPosition.bind(this),c=this.onApplyOriginObjectScale.bind(this),h=this.onApplyOriginObjectRotate.bind(this),d=this.onApplyOriginObjectPosition.bind(this),u=this.initialHelperPosition.bind(this);this.cameraHooks.on("cameraUpdate",this.updateHelperScale),this.internalHooks.on("initialHelperPosition",u),this.internalHooks.on("setObjectScale",r),this.internalHooks.on("setObjectRotate",a),this.internalHooks.on("setObjectPosition",l),this.internalHooks.on("applyObjectPosition",d),this.internalHooks.on("applyObjectRotate",h),this.internalHooks.on("applyObjectScale",c),this.hooks.on("moveEnd",this.updateHelperScale),this.internalHooks.on("setObjectPosition",this.updateHelperScale),this.internalHooks.on("initialHelperPosition",this.updateHelperScale),this.disposers.push(()=>{this.cameraHooks.off("cameraUpdate",this.updateHelperScale),this.internalHooks.off("initialHelperPosition",u),this.internalHooks.off("setObjectScale",r),this.internalHooks.off("setObjectRotate",a),this.internalHooks.off("setObjectPosition",l),this.internalHooks.off("applyObjectPosition",d),this.internalHooks.off("applyObjectRotate",h),this.internalHooks.off("applyObjectScale",c),this.hooks.off("moveEnd",this.updateHelperScale),this.internalHooks.off("setObjectPosition",this.updateHelperScale),this.internalHooks.off("initialHelperPosition",this.updateHelperScale)})}initialHelperPosition(){this.helperObject3D.initialPosition(this.calculateOffset(this.config.offset))}initialHelperQuaternion(){this.helperObject3D.initQuaternion(this.config)}enable(){this.enabled||(this.enabled=!0,this.scene.add(this.helperObject3D),this.helperObject3D.enable(),this.render())}disable(){this.enabled&&(this.enabled=!1,this.helperObject3D.disable(),this.render())}show(){this.helperObject3D.show(),this.render()}hide(){this.helperObject3D.hide(),this.render()}dispose(){var e;(e=this.disposers)==null||e.forEach(t=>t==null?void 0:t()),this.helperObject3D.dispose(),this.render()}applyHelperMatrix4(e){this.helperObject3D.applyMatrix4(e)}applyHelperQuaternion(e,t){this.helperObject3D.applyHelperQuaternion(e,t)}applyHelperScaleMatrix4(e,t){this.helperObject3D.applyHelperScaleMatrix4(e,t)}onWantsGesture(e,t,n){if(this.isDragging)return!1}onIntersectionOnModelUpdate(e){}onApplyOriginObjectScale(e){this.applyHelperScaleMatrix4(e.matrix,e.origin)}onApplyOriginObjectRotate(e){this.applyHelperQuaternion(e.quaternion,e.origin)}onApplyOriginObjectPosition(e){this.applyHelperMatrix4(e.matrix)}onSetOriginObjectScale(e){this.helperObject3D.scale.copy(e),this.updateOffsetByScale(e)}onSetOriginObjectRotate(e,t){this.helperObject3D.setHelperQuaternion(e,t)}onSetOriginObjectPosition(e){this.helperObject3D.position.copy(e.clone().add(this.calculateOffset(this.config.offset)))}render(){this.onRender()}updateOffsetByScale(e){if(this.boundingBox&&this.config.offset){const t=this.originObject3D.position,n=new R().subVectors(this.boundingBox.max,t).multiply(e).add(t),o=new R().subVectors(this.boundingBox.min,t).multiply(e).add(t),s=this.calculateOffset(this.config.offset,{min:o,max:n});this.helperObject3D.initialPosition(s)}}hoverListener(e,t=16777215,n=1){const o=yo(e).filter(Be),s=[];for(const r of o)if(r.material||r instanceof Et){const a=r instanceof Et?r.children.filter(u=>u instanceof We):[r];a.forEach(u=>{var f,m;u.__originalColor__=(f=u.__originalColor__)!=null?f:u.material.color.clone(),u.__originalOpacity__=(m=u.__originalOpacity__)!=null?m:u.material.opacity});const l=()=>{a.forEach(u=>{u.name==="ScaleHelperTransparentGroup"?u.children[0]&&(u.children[0].material.color.set(t),u.children[0].material.opacity=n):(u.material.color.set(t),u.material.opacity=n)}),this.render()},c=()=>{a.forEach(u=>{u.name==="ScaleHelperTransparentGroup"?u.children[0]&&(u.children[0].material.color.set(16776960),u.children[0].material.opacity=1):(u.material.color.copy(u.__originalColor__),u.material.opacity=u.__originalOpacity__)}),this.render()},h=u=>{this.isDragging||l()},d=u=>{this.isDragging||c()};for(const u of a)this.domEvents.addEventListener(u,"mouseover",h),this.domEvents.addEventListener(u,"mouseout",d),this.hooks.on("moveStart",l),this.hooks.on("moveEnd",c),this.hooks.on("rotateEnd",c),this.hooks.on("scaleEnd",c),s.push(()=>{this.domEvents.removeEventListener(u,"mouseover",h),this.domEvents.removeEventListener(u,"mouseout",d),this.hooks.off("moveStart",l),this.hooks.off("moveEnd",c),this.hooks.off("rotateEnd",c),this.hooks.off("scaleEnd",c)})}return()=>s.forEach(r=>r==null?void 0:r())}getIntersectObject(e){const t=this.camera.position,n=this.helperObject3D;if(!n)return;const o=this.helperObject3D.raycasterIntersectObject(e)[0];if(!o)return;const s=o;if(s.object=n,this.model.intersectRaycaster){const r=this.model.intersectRaycaster(e)[0];if(r&&r.point.distanceTo(t)<s.point.distanceTo(t))return}return s.object}calculateOffset(e,t){const n=new R(0,0,0);if(!e)return n;const o=()=>t||this.getBox();if(typeof e.x=="number")n.setX(e.x);else if(typeof e.x=="object"){const s=o();n.setX((s.max.x-s.min.x)*e.x.percents)}if(typeof e.y=="number")n.setY(e.y);else if(typeof e.y=="object"){const s=o();n.setY((s.max.y-s.min.y)*e.y.percents)}if(typeof e.z=="number")n.setZ(e.z);else if(typeof e.z=="object"){const s=o();n.setZ((s.max.z-s.min.z)*e.z.percents)}return n}}function jM(i,e){let t=10,n=10;const o=i.isPerspectiveCamera,s=i.isOrthographicCamera;if(o){const h=i,d=h.position.distanceTo(e),u=h.fov*Math.PI/180;n=2*Math.tan(u/2)*d,t=n*h.aspect}else if(s){const h=i;t=Math.abs(h.right-h.left),n=Math.abs(h.top-h.bottom)}const r=Math.sqrt(t*t+n*n),a=r*.8,l=Math.min(t,n)*.25,c=r*1.2;return Math.max(l,Math.min(a,c))}class P1{constructor(e,t,n){p(this,"camera"),p(this,"container"),p(this,"defaults"),this.camera=e,this.container=t,this.defaults=W({},n||{})}createSolidLine(e,t,n){const o=W(W({color:16777215,renderOrder:qi.DRAG_GUIDE_LINE},this.defaults),n||{}),s=t.clone().normalize(),r=this.computeInfiniteLineLength(e),a=e.clone().add(s.clone().multiplyScalar(-r)),l=e.clone().add(s.clone().multiplyScalar(r)),c=new Float32Array([a.x,a.y,a.z,l.x,l.y,l.z]),h=new xt;h.setAttribute("position",new dt(c,3));const d=new $r({color:o.color,depthTest:!1,depthWrite:!1,transparent:!0,opacity:.65}),u=new bh(h,d);return u.renderOrder=o.renderOrder,u}updateSolidLine(e,t,n,o){const s=n.clone().normalize(),r=this.computeInfiniteLineLength(t),a=t.clone().add(s.clone().multiplyScalar(-r)),l=t.clone().add(s.clone().multiplyScalar(r)),c=new Float32Array([a.x,a.y,a.z,l.x,l.y,l.z]),h=e.geometry,d=h.getAttribute("position");d&&d.itemSize===3&&d.array.length===c.length?(d.array.set(c),d.needsUpdate=!0):h.setAttribute("position",new dt(c,3)),(o==null?void 0:o.color)!==void 0&&e.material.color.setHex(o.color)}computeInfiniteLineLength(e){return jM(this.camera,e)*10}dispose(e){if(!e)return;e.geometry.dispose();const t=e.material;Array.isArray(t)?t.forEach(n=>n.dispose()):t.dispose()}updateDefaults(e){this.defaults=W(W({},this.defaults),e)}}var hg,dg;class LM extends pa{constructor(...e){super(...e),p(this,"name","MoveController"),p(this,"startInfo"),p(this,"dragGuideLine"),p(this,"solidGuide",new P1(this.camera,this.container,(dg=(hg=this.config)==null?void 0:hg.solidGuide)!=null?dg:{})),p(this,"_moveByMouse",{enabled:!1}),p(this,"mouseInfo"),p(this,"mousedownEventListenerDisposer"),p(this,"dragStart",r=>{if(this.moveByMouseEnable||this.isDragging)return;const a=r==null?void 0:r.intersect;if(!a)return this.dragEnd();const l=(a==null?void 0:a.object).direction;if(!l)return this.dragEnd();const c=new R(1,0,0).applyQuaternion(this.helperObject3D.quaternion),h=new R(0,1,0).applyQuaternion(this.helperObject3D.quaternion),d=new R(0,0,1).applyQuaternion(this.helperObject3D.quaternion),u=(()=>{switch(l){case"x":return c;case"y":return h;case"z":return d;case"plane":return}})(),f=a.point.clone();if(l==="plane"){const m=this.camera.position.clone(),g=f.clone(),v=g.clone().sub(m).normalize(),A=new Nt().setFromNormalAndCoplanarPoint(v,g),w=g.clone();this.startInfo={draggingDirection:l,startVectorProject:w,line:new Ht(w.clone(),w.clone()),plane:A}}else{const m=new Ht(f.clone().sub(u.normalize()),f.clone().add(u.normalize()));this.startInfo={draggingDirection:l,startVectorProject:f,line:m};try{const g=u.clone().normalize(),v=this.helperObject3D.getWorldPosition(new R),A=this.solidGuide.createSolidLine(v,g,{color:16777215,renderOrder:qi.DRAG_GUIDE_LINE});this.scene.add(A),this.dragGuideLine=A}catch{}}this.helperObject3D.showDraggingHelper([l]),this.hooks.emit("moveStart"),this.isDragging=!0}),p(this,"dragging",r=>{if(!this.isDragging||!this.startInfo)return;const a="touches"in r?r.touches[0].clientX:r.x,l="touches"in r?r.touches[0].clientY:r.y,c=Ul(this.camera,{x:a,y:l},this.container);return c?(this.move(c),!1):this.dragEnd()}),p(this,"dragEnd",()=>{if(this.isDragging){if(this.startInfo=void 0,this.isDragging=!1,this.dragGuideLine){this.scene.remove(this.dragGuideLine),this.dragGuideLine.geometry.dispose();const r=this.dragGuideLine.material;Array.isArray(r)?r.forEach(a=>a.dispose()):r.dispose(),this.dragGuideLine=void 0}this.helperObject3D.show(),this.hooks.emit("moveEnd")}});const t=this.helperObject3D;this.hoverListener([t.centerHandle,t.xArrow,t.yArrow,t.zArrow]);const n=this.show.bind(this),o=this.hide.bind(this),s=()=>{this.helperObject3D.update(this.camera),this.isDragging&&this.updateDragGuideLineScale(),this.render()};s(),this.domEvents.addEventListener(this.helperObject3D,"mousedown",this.dragStart),document.addEventListener("mousemove",this.dragging),document.addEventListener("mouseup",this.dragEnd),this.domEvents.addEventListener(this.helperObject3D,"touchstart",this.dragStart),document.addEventListener("touchmove",this.dragging),document.addEventListener("touchend",this.dragEnd),this.hooks.on("rotateStart",o),this.hooks.on("rotateEnd",n),this.hooks.on("scaleStart",o),this.hooks.on("scaleEnd",n),this.hooks.on("moveByMouseEnable",o),this.hooks.on("moveByMouseDisable",n),this.hooks.on("updateOtherHelpers",r=>{this.helperObject3D.update(r.camera),this.render()}),this.cameraHooks.on("cameraUpdate",s),this.disposers.push(()=>{this.domEvents.removeEventListener(this.helperObject3D,"mousedown",this.dragStart),document.removeEventListener("mousemove",this.dragging),document.removeEventListener("mouseup",this.dragEnd),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",this.dragStart),document.removeEventListener("touchmove",this.dragging),document.removeEventListener("touchend",this.dragEnd),this.hooks.off("rotateStart",o),this.hooks.off("rotateEnd",n),this.hooks.off("scaleStart",o),this.hooks.off("scaleEnd",n),this.hooks.off("moveByMouseEnable",o),this.hooks.off("moveByMouseDisable",n),this.hooks.off("updateOtherHelpers"),this.cameraHooks.off("cameraUpdate",s)}),this.moveByMouseEnable&&this.moveByMouse()}get moveByMouseEnable(){return this._moveByMouse.enabled}dispose(){var e;super.dispose(),(e=this.disposers)==null||e.forEach(t=>t==null?void 0:t())}moveByMouse(e){this._moveByMouse={enabled:!0,useFaceNormal:e==null?void 0:e.useFaceNormal},this.preventTapDefaultEvent=!0;const t=this.handleMouseDown.bind(this),n=this.handleMouseUp.bind(this);this.hooks.emit("moveByMouseEnable"),setTimeout(()=>{this.container.addEventListener("mousedown",t),this.container.addEventListener("mouseup",n)}),this.mousedownEventListenerDisposer=()=>{this.container.removeEventListener("mousedown",t),this.container.removeEventListener("mouseup",n)}}disableMoveByMouse(){var e;this._moveByMouse={enabled:!1},this.preventTapDefaultEvent=!1,this.hooks.emit("moveByMouseDisable"),(e=this.mousedownEventListenerDisposer)==null||e.call(this)}onIntersectionOnModelUpdate(e){var t,n,o;if(!this.moveByMouseEnable)return;const{point:s,face:r}=e;if(!this.hooks.emit("wantToMove",s)){if(this.originObject3D.position.copy(s),(this._moveByMouse.useFaceNormal===!0||typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.enable!==!1)&&r!=null&&r.normal){const a=(()=>typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.alignmentVector?this._moveByMouse.useFaceNormal.alignmentVector:{x:0,y:1,z:0})(),l=new R((t=a.x)!=null?t:0,(n=a.y)!=null?n:0,(o=a.z)!=null?o:0),c=(()=>typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.fixedFaceNormal?this._moveByMouse.useFaceNormal.fixedFaceNormal(r.normal):r.normal)();this.originObject3D.quaternion.setFromUnitVectors(l,c),this.internalHooks.emit("setObjectRotate",this.originObject3D.quaternion.clone())}this.internalHooks.emit("setObjectPosition",s),this.hooks.emit("move",s)}}handleMouseDown(e){const{x:t,y:n}=e;this.mouseInfo={x:t,y:n,mouseDownTimestamp:Date.now()}}handleMouseUp(e){if(!this.mouseInfo)return;const{x:t,y:n}=e;this.mouseInfo.x===t&&this.mouseInfo.y===n&&Date.now()-this.mouseInfo.mouseDownTimestamp<500&&(this.disableMoveByMouse(),this.mouseInfo=void 0)}updateDragGuideLineScale(){if(!this.dragGuideLine||!this.startInfo)return;const{line:e}=this.startInfo,t=e.end.clone().sub(e.start).normalize();if(t.lengthSq()<1e-6)return;const n=this.helperObject3D.getWorldPosition(new R);this.solidGuide.updateSolidLine(this.dragGuideLine,n,t)}move(e){if(!this.startInfo)return this.dragEnd();const{line:t,startVectorProject:n}=this.startInfo,o=this.originObject3D,s=this.startInfo.draggingDirection==="plane";let r;if(s){const h=this.startInfo.plane;if(!h)return;const d=new R,u=h.normal.dot(e.ray.direction);if(Math.abs(u)<1e-6)return;const f=-(h.normal.dot(e.ray.origin)+h.constant)/u;if(f<0)return;d.copy(e.ray.origin.clone().add(e.ray.direction.clone().multiplyScalar(f))),r=d}else r=ho({raycaster:e,line:t,clampToLine:!1});const a=r.clone().sub(n),l=new Xe;l.setPosition(a);const c=o.position.clone().applyMatrix4(l);this.hooks.emit("wantToMove",c)||(o.applyMatrix4(l),n.copy(r),this.internalHooks.emit("applyObjectPosition",{matrix:l}),this.hooks.emit("move",c))}}class yr{constructor(e,t,n,o,s,r,a,l){p(this,"helperController"),p(this,"five"),p(this,"onFiveWantsTapGesture",m=>{if(!this.helperController)return;if(this.helperController.preventTapDefaultEvent)return!1;const g=this.helperController.onWantsTapGesture(m);return this.five.needsRender=!0,g}),p(this,"onFiveWantsGesture",(...m)=>{if(!this.helperController)return;const g=this.helperController.onWantsGesture(...m);return this.five.needsRender=!0,g}),p(this,"onFiveIntersectionOnModelUpdate",(...m)=>{this.helperController&&this.helperController.onIntersectionOnModelUpdate(...m)});const{camera:c,model:h,scene:d}=e,u=e.getElement();if(this.five=e,!c||!h||!u||!d)return;const f=()=>{e.needsRender=!0};this.helperController=new n({camera:c,model:h,domEvents:t,originObject3D:o,helperObject3D:s,container:u,scene:d,onRender:f,sharedHooks:a,sharedInternalHooks:l},r),e.on("wantsTapGesture",this.onFiveWantsTapGesture),e.on("wantsGesture",this.onFiveWantsGesture),e.on("intersectionOnModelUpdate",this.onFiveIntersectionOnModelUpdate)}dispose(){var e;this.five.off("wantsTapGesture",this.onFiveWantsTapGesture),this.five.off("wantsGesture",this.onFiveWantsGesture),this.five.off("intersectionOnModelUpdate",this.onFiveIntersectionOnModelUpdate),(e=this.helperController)==null||e.dispose()}}const TM="v1.0.1",OM="Object3DHelper",Hd=`${OM}@${TM}`,RM=()=>{console.error(`${Hd} is disposed`)},BM=()=>{console.warn(`${Hd} is disabled`)},HM=()=>{console.error(`${Hd} is disabled`)};class NM{constructor(e){p(this,"controllers",{}),p(this,"state",{visible:!0,enabled:!0,disposed:!1}),p(this,"hooks",new Mt),p(this,"eventListener",{}),e&&this.addControllers(e),this.setState(this.state)}show(e){return ee(this,null,function*(){this.setState({visible:!0},e)})}hide(e){return ee(this,null,function*(){this.setState({visible:!1},e)})}enable(e){this.setState({enabled:!0},e)}disable(e){this.setState({enabled:!1},e)}dispose(){this.setState({disposed:!0})}setState(e,t){if(this.state.disposed)return RM();if(!this.state.enabled&&e.enabled!==!0&&e.disposed!==!0)return HM();const n=W({},this.state);this.state=W(W({},this.state),e),e.disposed!==void 0&&e.disposed!==n.disposed&&e.disposed&&this.handleDispose(),e.visible!==void 0&&this.handleVisible(e.visible),e.enabled!==void 0&&this.handleEnable(e.enabled),this.hooks.emit("stateChange",{state:this.state,prevState:n})}addControllers(e){this.controllers=W(W({},this.controllers),e),this.setState(this.state)}initialHelperMatrix(){this.everyControllerDo(e=>{e.initialHelperPosition(),e.initialHelperQuaternion()})}getCurrentState(){return this.state}handleEnable(e,t=!0){e?(this.everyControllerDo(n=>{n.enable()}),this.hooks.emit("enable",{userAction:t})):(this.everyControllerDo(n=>{n.disable()}),this.hooks.emit("disable",{userAction:t})),this.state.enabled=e}handleVisible(e,t=!0){e?(this.everyControllerDo(n=>{n.show()}),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:t}))):(this.everyControllerDo(n=>{n.hide()}),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:t}))),this.state.visible=e}everyControllerDo(e){Object.values(this.controllers).forEach(t=>{t&&e(t)})}handleDispose(){var e,t;Object.values(this.controllers).forEach(n=>{n==null||n.dispose()});for(const n in this.controllers){if(!n)continue;const o=n;(t=(e=this.eventListener)[o])==null||t.call(e)}}actionIfStateIsEnabled(e,t){if(this.state.enabled)return e();t!=null&&t.warnLog&&BM()}}function xs(i){return i*Math.PI/180}let Ic=new tt;class FM extends pa{constructor(...e){var t,n,o;super(...e),p(this,"name","RotateController"),p(this,"startInfo"),p(this,"removeListener");const s=this.helperObject3D;this.hoverListener([(t=s.xCircle)==null?void 0:t.circle,(n=s.yCircle)==null?void 0:n.circle,(o=s.zCircle)==null?void 0:o.circle].filter(Boolean));const r=this.dragStart.bind(this),a=this.dragging.bind(this),l=this.dragEnd.bind(this),c=this.show.bind(this),h=this.hide.bind(this),d=()=>{this.helperObject3D.update(this.camera),this.render()};d(),this.domEvents.addEventListener(this.helperObject3D,"mousedown",r),document.addEventListener("mousemove",a),document.addEventListener("mouseup",l),this.domEvents.addEventListener(this.helperObject3D,"touchstart",r),document.addEventListener("touchmove",a),document.addEventListener("touchend",l),this.hooks.on("moveStart",h),this.hooks.on("moveEnd",c),this.hooks.on("scaleStart",h),this.hooks.on("scaleEnd",c),this.hooks.on("moveByMouseEnable",h),this.hooks.on("moveByMouseDisable",c),this.hooks.on("updateOtherHelpers",u=>{this.helperObject3D.update(u.camera),this.render()}),this.cameraHooks.on("cameraUpdate",d),this.disposers.push(()=>{this.domEvents.removeEventListener(this.helperObject3D,"mousedown",r),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",r),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",l),this.hooks.off("moveStart",h),this.hooks.off("moveEnd",c),this.hooks.off("scaleStart",h),this.hooks.off("scaleEnd",c),this.hooks.off("moveByMouseEnable",h),this.hooks.off("moveByMouseDisable",c),this.hooks.off("updateOtherHelpers"),this.cameraHooks.off("cameraUpdate",d)})}get rotateCenter(){return this.helperObject3D.position.clone()}setRotateAngle(e){const{x:t=0,y:n=0,z:o=0}=e,s=new ui(xs(t),xs(n),xs(o)),r=new tt().setFromEuler(s);if(this.hooks.emit("wantToRotate",r))return;const{originObject3D:a,rotateCenter:l}=this;Rd(a,r,l),this.internalHooks.emit("setObjectRotate",r,l),this.hooks.emit("rotate",r),this.render()}getEulerAngle(e,t){const{originObject3D:n}=this,o=new ui().setFromQuaternion(n.quaternion),s={x:di(o.x),y:di(o.y),z:di(o.z)},r={x:e==="x"?t:s.x,y:e==="y"?t:s.y,z:e==="z"?t:s.z},a=new ui(xs(r.x),xs(r.y),xs(r.z));return new tt().setFromEuler(a)}onApplyOriginObjectRotate(e){this.isDragging||super.onApplyOriginObjectRotate(e)}onApplyOriginObjectScale(e){}dragStart(e){if(this.isDragging)return;this.helperObject3D.update(this.camera);const t=e==null?void 0:e.intersect;if(!t)return this.dragEnd();const n=(t==null?void 0:t.object).direction;if(!n)return this.dragEnd();const o=t.point,s=this.getAngleHelper(n);this.setTipsAngle(0);const r=o.clone();r.y+=.2,this.setTipsPosition(r);const a=this.helperObject3D.quaternion.clone(),l=(()=>{if(n==="x")return new R(1,0,0).applyQuaternion(a);if(n==="y")return new R(0,1,0).applyQuaternion(a);if(n==="z")return new R(0,0,1).applyQuaternion(a)})(),c=new Nt().setFromNormalAndCoplanarPoint(l,o),h=c.projectPoint(o.clone(),new R).clone().sub(this.rotateCenter),d=h.angleTo(s.baseAxes.clone().applyQuaternion(a)),u=s.offsetAngle(d);this.setAngleHelperStart(n,u),this.setAngleHelperLength(n,0),this.startInfo={direction:n,startVector:h,directionVector:l,plane:c,angleHelper:s,angle:0,helperQuaternion:a.clone()},Ic=new tt,this.helperObject3D.showDraggingHelper([n]),this.hooks.emit("rotateStart"),this.isDragging=!0}getMatrix(){var e,t;return(t=(e=this.originObject3D)==null?void 0:e.ext)==null?void 0:t.matrix}getMatrixAngle(e,t){let n;if(e&&e.isMatrix4){n=new tt,e.decompose(new R,n,new R);const o=new ui().setFromQuaternion(n);if(t==="x")return Math.round(di(o.z));if(t==="y")return Math.round(di(o.y));if(t==="z")return Math.round(di(o.x))}}parseAngleByDirection(e){var t,n;const o=(n=(t=this.originObject3D)==null?void 0:t.ext)==null?void 0:n.matrix;let s;if(o&&o.isMatrix4){s=new tt,o.decompose(new R,s,new R);const r=new ui().setFromQuaternion(s);if(e==="x")return Math.round(di(r.z));if(e==="y")return Math.round(di(r.y));if(e==="z")return Math.round(di(r.x))}}dragging(e){if(!this.isDragging)return;const t="touches"in e?e.touches[0].clientX:e.x,n="touches"in e?e.touches[0].clientY:e.y,o=Ul(this.camera,{x:t,y:n},this.container);return o?(this.rotate(o),!1):this.dragEnd()}rotate(e){if(!this.startInfo)return this.dragEnd();const{startVector:t,plane:n,angleHelper:o,direction:s,helperQuaternion:r}=this.startInfo,{originObject3D:a}=this,l=e.ray.intersectPlane(n,new R);if(!l)return;const c=this.rotateCenter.clone();let h=n.projectPoint(l.clone(),new R).clone().sub(c);const d=this.startInfo.directionVector.clone().normalize();h=h.clone().projectOnPlane(d).normalize().multiplyScalar(h.length());const u=new tt().setFromUnitVectors(t.clone().normalize(),h.clone().normalize()),f=a.quaternion.clone().premultiply(u);if(t.angleTo(h)===0||this.hooks.emit("wantToRotate",f))return;const m=new ui().setFromQuaternion(new tt().setFromUnitVectors(t.clone().normalize().applyQuaternion(r.clone().inverse()),h.clone().normalize().applyQuaternion(r.clone().inverse())),`${s.toUpperCase()}${"XZY".replace(s.toUpperCase(),"")}`)[s]*o.angleDirection;if(this.startInfo.angle+=m,this.setAngleHelperLength(s,this.startInfo.angle),this.setTipsAngle(di(this.startInfo.angle)),c){const g=new R().subVectors(a.position,c).applyQuaternion(u).add(c);a.position.copy(g)}a.applyQuaternion(u),Ic.premultiply(u),this.internalHooks.emit("applyObjectRotate",{quaternion:u,origin:c}),this.hooks.emit("rotate",a.quaternion),this.startInfo.startVector=h}dragEnd(){var e;this.isDragging&&(this.applyHelperQuaternion(Ic,this.rotateCenter),(e=this.startInfo)!=null&&e.lineMeshes&&this.startInfo.lineMeshes.forEach(t=>{this.scene.remove(t),t.geometry.dispose(),t.material instanceof rA&&t.material.dispose()}),this.startInfo=void 0,this.isDragging=!1,this.helperObject3D.show(),this.updateOtherHelpers(),this.hooks.emit("rotateEnd"))}updateOtherHelpers(){this.hooks.emit("updateOtherHelpers",{camera:this.camera})}getAngleHelper(e){var t,n,o;switch(e){case"x":return(t=this.helperObject3D.xCircle)==null?void 0:t.angleSector;case"y":return(n=this.helperObject3D.yCircle)==null?void 0:n.angleSector;case"z":return(o=this.helperObject3D.zCircle)==null?void 0:o.angleSector}}setAngleHelperStart(e,t){const n=this.getAngleHelper(e);if(!n){console.warn("angleHelper is undefined");return}if(n instanceof We&&n.geometry instanceof no){const{radius:o,segments:s,thetaLength:r}=n.geometry.parameters;n.geometry=new no(o,s,t,r)}else console.warn("only support THREE.CircleGeometry")}setAngleHelperLength(e,t){const n=t>=0?Math.max(t,.001):Math.min(t,-.001),o=this.getAngleHelper(e);if(o instanceof We&&o.geometry instanceof no){const{radius:s,thetaStart:r}=o.geometry.parameters,a=Math.ceil(Math.abs(n)*(40/(2*Math.PI)));o.geometry=new no(s,a,r,n)}else console.warn("only support THREE.CircleGeometry")}setTipsAngle(e){var t;const n=(t=this.helperObject3D.angleTips)==null?void 0:t.element;n&&(n.innerText=`${e.toFixed(0)}°`)}setTipsPosition(e){const t=this.helperObject3D.angleTips;if(!t)return;const n=e.project(this.camera),{x:o,y:s,z:r}=n;if(r>1)return;const a=(o+1)/2*100+"%",l=(-s+1)/2*100+"%";t.setLeftTop(a,l)}}class VM extends pa{constructor(...e){super(...e),p(this,"startInfo"),p(this,"name","RectangleScaleController")}enable(){this.helperObject3D.enable(),super.enable()}disable(){this.helperObject3D.disable(),super.disable()}show(){this.helperObject3D.show(),super.show()}hide(){this.helperObject3D.hide(),super.hide()}onApplyOriginObjectPosition(e){this.isDragging||super.onApplyOriginObjectPosition(e)}onApplyOriginObjectScale(e){this.helperObject3D.applyHelperScaleMatrix4(e.matrix,e.origin)}getDragPlane(){const e=new Nt,t=this.helperObject3D.cornerPositions;if(t.length!==0)return t.length<3?e.setFromNormalAndCoplanarPoint(this.originObject3D.getWorldDirection(new R),t[0]):e.setFromCoplanarPoints(t[0],t[1],t[2]),e}dragStart(e,t){var n,o;(o=(n=this.helperObject3D).updatePoints)==null||o.call(n);const s=this.getDragPlane();if(!s)return this.dragEnd();this.startInfo={startPoint:{position:t.position.clone(),direction:t.direction},plane:s},this.hooks.emit("scaleStart"),this.render(),this.isDragging=!0}dragging(e){if(!this.isDragging)return;const t=Ul(this.camera,e,this.container);if(!t)return this.dragEnd();this.scale(t)}scale(e){var t,n;if(!this.startInfo)return;const o=this.originObject3D,{startPoint:s,plane:r}=this.startInfo,a=this.helperObject3D.cornerPositions;if(a.length<4)return this.dragEnd();const l=e.ray.intersectPlane(r,new R);if(!l||Fa(l,this.camera.position))return;const c=new R().addVectors(a[0],a[2]).divideScalar(2),{position:h,direction:d}=s,u=new R().subVectors(a[1],a[0]),f=new R().subVectors(a[3],a[0]),m=y=>{const C=new R(0,0,0);if(!this.startInfo)return C;const x=(y==="ew"?u:f).clone(),S=h.clone().projectOnVector(x),k=l.clone().projectOnVector(x),z=c.clone().projectOnVector(x);if(k.equals(S))return C;if(y==="ns"&&typeof this.startInfo.dragPointInCenterBottom!="boolean"){const $=new R().subVectors(k,z),ne=$.x<0&&x.x>=0,_=$.y<0&&x.y>=0,se=$.z<0&&x.z>=0;this.startInfo.dragPointInCenterBottom=ne||_||se}if(y==="ew"&&typeof this.startInfo.dragPointInCenterLeft!="boolean"){const $=new R().subVectors(k,z),ne=$.x<0&&x.x>=0,_=$.y<0&&x.y>=0,se=$.z<0&&x.z>=0;this.startInfo.dragPointInCenterLeft=ne||_||se}const q=new R().subVectors(k,S),X=q.length();return X>.3?(console.warn("offset.length() > 0.3, skipped",X),C):q},g=m("ew"),v=m("ns"),A=()=>{const y=g;this.helperObject3D.cornerPositions.forEach((C,x)=>{var S;(S=this.startInfo)!=null&&S.dragPointInCenterLeft?(x===0||x===3)&&C.add(y):(x===1||x===2)&&C.add(y)})},w=()=>{const y=v;this.helperObject3D.cornerPositions.forEach((C,x)=>{var S;(S=this.startInfo)!=null&&S.dragPointInCenterBottom?(x===0||x===1)&&C.add(y):(x===2||x===3)&&C.add(y)})};switch(d){case"ew":A();break;case"ns":w();break;case"nesw":case"nwse":A(),w()}const P=new R().subVectors(a[1],a[0]).length()/u.length(),I=new R().subVectors(a[3],a[0]).length()/f.length(),j=new R(P,I,1),D=new Xe().scale(j);o.isCSS3DObjectPlus&&o.applyScaleMatrix4?o.applyScaleMatrix4(D):o.scale.applyMatrix4(D),s.position.copy(l);const T=new R().addVectors(a[0],a[2]).divideScalar(2),M=new R().subVectors(T,c),O=new Xe().setPosition(M);o.applyMatrix4(O),(t=this.helperObject3D.css3DInstance)==null||t.css3DObject.applyMatrix4(O),(n=this.helperObject3D.plane)==null||n.applyMatrix4(O),this.internalHooks.emit("applyObjectScale",{matrix:D}),this.internalHooks.emit("applyObjectPosition",{matrix:O}),this.render()}dragEnd(){this.isDragging&&(this.startInfo=void 0,this.isDragging=!1,"onScaleEnd"in this.helperObject3D&&typeof this.helperObject3D.onScaleEnd=="function"&&this.helperObject3D.onScaleEnd(),this.hooks.emit("scaleEnd"),this.render())}}class WM extends VM{constructor(...e){super(...e),p(this,"name","CSS3DScaleController"),this.addHTMLEventListener()}addHTMLEventListener(){this.helperObject3D.points.forEach(e=>{if(!e)return;const t=e.point,n=r=>this.dragStart(r,e),o=this.dragging.bind(this),s=this.dragEnd.bind(this);t.addEventListener("dragstart",n),t.addEventListener("drag",o),t.addEventListener("dragend",s)})}}class GM extends pa{constructor(...e){super(...e),p(this,"name","BoundingBoxController")}}class QM extends mM{constructor(e,t){super(e,t),p(this,"name","ScaleHelper"),p(this,"scaleMeshes",[]),p(this,"lineConnections",[]),p(this,"positions",[]),p(this,"container"),p(this,"needsInitialScaling",!1),p(this,"lastCamera",null),p(this,"isInitializing",!1),t&&(this.positions=t.positions,this.container=t.container),this.raycast=()=>{}}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}initialPosition(e){if(this.isInitializing){console.warn("ScaleHelper: initialPosition called while already initializing, skipping");return}this.isInitializing=!0;try{this.position.copy(this.originObject3D.position);const t=typeof this.positions=="function"?this.positions():this.positions;if(!t){this.isInitializing=!1;return}this.clearAllSpheres(),this.scaleMeshes=t.map((n,o)=>{const s=UM();return s.position.copy(n.handlePosition),s.scalePosition=n,s.children.forEach(r=>{r.scalePosition=n}),this.add(s),s}),this.createLineConnections(),this.needsInitialScaling=!0,this.lastCamera&&(this.applySphereScaling(this.lastCamera),this.applyLineScaling(this.lastCamera),this.needsInitialScaling=!1)}finally{this.isInitializing=!1}}clearAllSpheres(){this.scaleMeshes.forEach(t=>{this.remove(t)}),this.scaleMeshes=[];const e=this.children.filter(t=>t.name==="ScaleHelperSphere");e.length>0&&e.forEach(t=>{this.remove(t)})}createLineConnections(){this.lineConnections.forEach(n=>{this.remove(n.line)}),this.lineConnections=[];const e={top:"bottom",bottom:"top",left:"right",right:"left",front:"back",back:"front"},t=new Set;for(const n of this.scaleMeshes){const o=n.scalePosition.id;if(!o||t.has(o))continue;const s=e[o];if(!s)continue;const r=this.scaleMeshes.find(l=>l.scalePosition.id===s);if(!r)continue;const a=XM(n.position.clone(),r.position.clone());this.add(a),this.lineConnections.push({line:a,mesh1:n,mesh2:r}),t.add(o),t.add(s)}}update(e){const t=e.type==="OrthographicCamera",n=e.position.clone(),o=this.originObject3D.getWorldPosition(new R),s=n.sub(o).normalize(),r={front:new R(0,0,1).applyQuaternion(this.originObject3D.getWorldQuaternion(new tt)),back:new R(0,0,-1).applyQuaternion(this.originObject3D.getWorldQuaternion(new tt)),left:new R(-1,0,0).applyQuaternion(this.originObject3D.getWorldQuaternion(new tt)),right:new R(1,0,0).applyQuaternion(this.originObject3D.getWorldQuaternion(new tt)),top:new R(0,1,0).applyQuaternion(this.originObject3D.getWorldQuaternion(new tt)),bottom:new R(0,-1,0).applyQuaternion(this.originObject3D.getWorldQuaternion(new tt))};let a=-1,l="";Object.entries(r).forEach(([h,d])=>{const u=s.dot(d);u>a&&(a=u,l=h)});const c={top:"bottom",bottom:"top",left:"right",right:"left",front:"back",back:"front"};this.scaleMeshes.forEach(h=>{if(!t){h.visible=!0;return}const d=h.scalePosition.id,u=c[l];d===l||d===u?h.visible=!1:h.visible=!0}),this.updateLineConnections(),this.lastCamera&&(this.applySphereScaling(this.lastCamera),this.applyLineScaling(this.lastCamera))}applySphereScaling(e){this.updateMatrixWorld(!0),this.scaleMeshes.forEach(t=>{t.scale.setScalar(Bd(e,t.scalePosition.handlePosition.clone().applyMatrix4(this.matrixWorld)))})}applyLineScaling(e){}showLineConnections(){this.lineConnections.forEach(e=>{const t=e.mesh1.visible&&e.mesh2.visible;e.line.visible=t})}hideLineConnections(){this.lineConnections.forEach(e=>{e.line.visible=!1})}updateLineConnections(){this.lineConnections.forEach(e=>{e.line.scale.set(1,1,1),e.line.position.set(0,0,0),e.line.rotation.set(0,0,0);const t=e.line.geometry.attributes.position;t.setXYZ(0,e.mesh1.position.x,e.mesh1.position.y,e.mesh1.position.z),t.setXYZ(1,e.mesh2.position.x,e.mesh2.position.y,e.mesh2.position.z),t.needsUpdate=!0;const n=e.mesh1.visible&&e.mesh2.visible;e.line.visible=n})}setScaleByCamera(e){this.lastCamera=e,this.applySphereScaling(e),this.applyLineScaling(e),this.needsInitialScaling&&requestAnimationFrame(()=>{this.applySphereScaling(e),this.applyLineScaling(e)}),this.needsInitialScaling=!1}}function UM(){const i=new Xo(.03,16,16),e=new Ze({color:16776960,side:It,transparent:!0,opacity:1,depthTest:!1,depthWrite:!1}),t=new We(i,e);t.name="ScaleHelperSphere",t.renderOrder=qi.SCALE_HELPER_SPHERE;const n=.03*4,o=new Xo(n,16,16),s=new Ze({transparent:!0,opacity:0,side:It,depthTest:!1,depthWrite:!1}),r=new We(o,s);return r.name="ScaleHelperTransparentGroup",r.renderOrder=qi.SCALE_HELPER_SPHERE,r.add(t),r}function XM(i,e){const t=new xt,n=[i,e];t.setFromPoints(n);const o=new $r({color:16776960,opacity:.75,transparent:!0,depthTest:!1,depthWrite:!1}),s=new bh(t,o);return s.name="ScaleHelperSolidLine",s.renderOrder=qi.SCALE_HELPER_LINE,s.raycast=()=>{},s}var ug,pg;class YM extends pa{constructor(...e){super(...e),p(this,"name","ScaleController"),p(this,"dragGuideLine"),p(this,"currentFacePatch"),p(this,"solidGuide",new P1(this.camera,this.container,(pg=(ug=this.config)==null?void 0:ug.solidGuide)!=null?pg:{})),p(this,"startInfo"),p(this,"dragStart",s=>{if(this.isDragging)return;this.isDragging=!0;const{intersect:r}=s,a=this.camera.position,l=new Set(this.helperObject3D.scaleMeshes.map(A=>A.uuid));let c=r.object;for(;c.parent&&!l.has(c.uuid);)c=c.parent;const h=c,d=h.scalePosition.basePosition.clone(),u=h.scalePosition.handlePosition.clone(),f=u.clone().sub(d).clone(),m=new Ht(d,d.clone().add(f.normalize().multiplyScalar(5)));m.applyMatrix4(this.helperObject3D.matrixWorld);const g=new Ot(a,r.point.clone().sub(a)),v=ho({raycaster:g,line:m});this.startInfo={line:m,scaleStartPoint:v,draggingObject:h},this.helperObject3D.scaleMeshes.forEach(A=>{A.uuid!==h.uuid&&(A.visible=!1)}),"hideLineConnections"in this.helperObject3D&&typeof this.helperObject3D.hideLineConnections=="function"&&this.helperObject3D.hideLineConnections();try{this.originObject3D.updateMatrixWorld(!0),this.helperObject3D.updateMatrixWorld(!0);const A=Hc(this.originObject3D),w=A?A.getCenter(new R):this.originObject3D.getWorldPosition(new R),P=u.clone().applyMatrix4(this.helperObject3D.matrixWorld).clone().sub(w).normalize(),I=w,j=this.solidGuide.createSolidLine(I,P,{color:16777215,renderOrder:qi.DRAG_GUIDE_LINE});this.scene.add(j),this.dragGuideLine=j,this.addFaceMesh()}catch{}h.visible=!0,this.hooks.emit("scaleStart")}),p(this,"dragging",s=>{const r="touches"in s?s.touches[0].clientX:s.x,a="touches"in s?s.touches[0].clientY:s.y,l=Ul(this.camera,{x:r,y:a},this.container);if(!this.isDragging){l&&this.addHoverFaceMesh(l);return}if(this.startInfo)return l?(this.scale(l),this.updateDragGuideLineDirection(),this.removeFaceMesh(),!1):this.dragEnd()}),p(this,"scale",s=>{var r,a;if(!this.startInfo)return;const{line:l,scaleStartPoint:c,draggingObject:h}=this.startInfo,{scalePosition:d}=h,u=ho({raycaster:s,line:l,clampToLine:!1});u.applyMatrix4(new Xe().getInverse(this.helperObject3D.matrixWorld.clone())),(a=(r=this.config)==null?void 0:r.scaleCallback)==null||a.call(r,{intersectPoint:u,scalePosition:d,offset:u.clone().sub(c)}),h.position.copy(u.clone()),this.hooks.emit("scale",new R(1,1,1))}),p(this,"dragEnd",()=>{if(this.isDragging){if(this.startInfo=void 0,this.isDragging=!1,this.helperObject3D.scaleMeshes.forEach(s=>{s.visible=!0}),"showLineConnections"in this.helperObject3D&&typeof this.helperObject3D.showLineConnections=="function"&&this.helperObject3D.showLineConnections(),this.dragGuideLine){this.scene.remove(this.dragGuideLine),this.dragGuideLine.geometry.dispose();const s=this.dragGuideLine.material;Array.isArray(s)?s.forEach(r=>r.dispose()):s.dispose(),this.dragGuideLine=void 0}this.removeFaceMesh(),this.internalHooks.emit("initialHelperPosition"),this.hooks.emit("scaleEnd")}});const t=this.show.bind(this),n=this.hide.bind(this),o=()=>{"update"in this.helperObject3D&&typeof this.helperObject3D.update=="function"&&this.helperObject3D.update(this.camera),this.isDragging&&this.updateDragGuideLineScale(),this.render()};o(),this.domEvents.addEventListener(this.helperObject3D,"mousedown",this.dragStart),document.addEventListener("mousemove",this.dragging),document.addEventListener("mouseup",this.dragEnd),this.domEvents.addEventListener(this.helperObject3D,"touchstart",this.dragStart),document.addEventListener("touchmove",this.dragging),document.addEventListener("touchend",this.dragEnd),this.hooks.on("rotateStart",n),this.hooks.on("rotateEnd",t),this.hooks.on("moveStart",n),this.hooks.on("moveEnd",t),this.hooks.on("moveByMouseEnable",n),this.hooks.on("moveByMouseDisable",t),this.hooks.on("updateOtherHelpers",s=>{"update"in this.helperObject3D&&typeof this.helperObject3D.update=="function"&&this.helperObject3D.update(s.camera),this.isDragging&&this.updateDragGuideLineScale(),this.render()}),this.cameraHooks.on("cameraUpdate",o),this.disposers.push(()=>{if(this.domEvents.removeEventListener(this.helperObject3D,"mousedown",this.dragStart),document.removeEventListener("mousemove",this.dragging),document.removeEventListener("mouseup",this.dragEnd),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",this.dragStart),document.removeEventListener("touchmove",this.dragging),document.removeEventListener("touchend",this.dragEnd),this.hooks.off("rotateStart",n),this.hooks.off("rotateEnd",t),this.hooks.off("moveStart",n),this.hooks.off("moveEnd",t),this.hooks.off("moveByMouseEnable",n),this.hooks.off("moveByMouseDisable",t),this.hooks.off("updateOtherHelpers"),this.cameraHooks.off("cameraUpdate",o),this.currentFacePatch){this.scene.remove(this.currentFacePatch),this.currentFacePatch.geometry.dispose();const s=this.currentFacePatch.material;Array.isArray(s)?s.forEach(r=>r.dispose()):s.dispose(),this.currentFacePatch=void 0}})}initialHelperPosition(){this.helperObject3D.initialPosition();const e=this;e.offHoverListener&&e.offHoverListener(),e.offHoverListener=this.hoverListener(this.helperObject3D.scaleMeshes)}getMoveMeshes(){var e,t,n,o;const s=[],r=(o=(n=(t=(e=this.helperObject3D.parent)==null?void 0:e.children)==null?void 0:t.find(a=>a.name==="MoveHelper"))==null?void 0:n.children)!=null?o:[];for(const a of r)a.name==="ArrowGroup"?s.push(...a.children):a.name==="center-plane-handle"&&s.push(a);return s}addHoverFaceMesh(e){var t,n;if(this.removeFaceMesh(),!((t=this.originObject3D.parent)!=null&&t.getWorldFacesGeometry))return;const o=(n=this.originObject3D.parent)==null?void 0:n.getWorldFacesGeometry(),s=this.helperObject3D.scaleMeshes,r=this.getMoveMeshes();if(e.intersectObjects(r,!1),e.intersectObjects(r,!1).length>0)return;let a=null,l=null;for(const c of s){if(!c.visible)continue;const h=e.intersectObject(c,!1);if(h&&h.length>0){a=c,l=h[0].point.clone();break}}if(a&&l&&Array.isArray(o)&&o.length>0){let c=null,h=1/0;for(const d of o){if(!d.vertices||d.vertices.length<3)continue;const u=new R;for(const m of d.vertices)u.add(m);u.divideScalar(d.vertices.length);const f=l.distanceTo(u);f<h&&(h=f,c=d)}c&&this.addFacePatch(c)}}addFaceMesh(){var e,t,n;const o=(e=this.startInfo)==null?void 0:e.draggingObject;if(!o||!((t=this.originObject3D.parent)!=null&&t.getWorldFacesGeometry))return;const s=(n=this.originObject3D.parent)==null?void 0:n.getWorldFacesGeometry();if(s&&s.length>0){const r=o.getWorldPosition(new R);let a=1/0,l=s[0];for(const c of s){const h=c.center;let d;if(h instanceof R)d=h;else if(Array.isArray(h)&&h.length===3)d=new R(h[0],h[1],h[2]);else continue;const u=d.distanceTo(r);u<a&&(a=u,l=c)}this.addFacePatch(l)}}removeFaceMesh(){if(this.currentFacePatch){this.scene.remove(this.currentFacePatch),this.currentFacePatch.geometry.dispose();const e=this.currentFacePatch.material;Array.isArray(e)?e.forEach(t=>t.dispose()):e.dispose(),this.currentFacePatch=void 0}}setScale(e){var t,n,o;let s=1,r=1,a=1;typeof e=="number"?(s=e,r=e,a=e):typeof e=="object"&&(s=(t=e.x)!=null?t:1,r=(n=e.y)!=null?n:1,a=(o=e.z)!=null?o:1);const l=new R(s,r,a);this.hooks.emit("wantToScale",l)||(this.originObject3D.scale.copy(l),this.internalHooks.emit("setObjectScale",l),this.hooks.emit("scale",l),this.render())}updateDragGuideLineDirection(){if(!this.dragGuideLine||!this.startInfo)return;const{draggingObject:e}=this.startInfo;this.originObject3D.updateMatrixWorld(!0),this.helperObject3D.updateMatrixWorld(!0);const t=Hc(this.originObject3D),n=t?t.getCenter(new R):this.originObject3D.getWorldPosition(new R),o=e.position.clone().applyMatrix4(this.helperObject3D.matrixWorld).clone().sub(n).normalize(),s=n;this.solidGuide.updateSolidLine(this.dragGuideLine,s,o)}updateDragGuideLineScale(){if(!this.dragGuideLine||!this.startInfo)return;const{scalePosition:e}=this.startInfo.draggingObject,t=e.handlePosition.clone().applyMatrix4(this.helperObject3D.matrixWorld),n=e.basePosition.clone().applyMatrix4(this.helperObject3D.matrixWorld),o=t,s=t.clone().sub(n).normalize();this.solidGuide.updateSolidLine(this.dragGuideLine,o,s)}addFacePatch(e){if(this.currentFacePatch){this.scene.remove(this.currentFacePatch),this.currentFacePatch.geometry.dispose();const s=this.currentFacePatch.material;Array.isArray(s)?s.forEach(r=>r.dispose()):s.dispose(),this.currentFacePatch=void 0}if(!e.vertices||e.vertices.length<3){console.warn("Face has no vertices, cannot create patch");return}const t=new xt;if(e.vertices.length===4){const s=new Float32Array([e.vertices[0].x,e.vertices[0].y,e.vertices[0].z,e.vertices[1].x,e.vertices[1].y,e.vertices[1].z,e.vertices[2].x,e.vertices[2].y,e.vertices[2].z,e.vertices[0].x,e.vertices[0].y,e.vertices[0].z,e.vertices[2].x,e.vertices[2].y,e.vertices[2].z,e.vertices[3].x,e.vertices[3].y,e.vertices[3].z]);t.setAttribute("position",new dt(s,3)),t.setIndex([0,1,2,3,4,5])}else{const s=new Float32Array(e.vertices.length*3),r=new Uint16Array(e.vertices.length);e.vertices.forEach((a,l)=>{s[l*3]=a.x,s[l*3+1]=a.y,s[l*3+2]=a.z,r[l]=l}),t.setAttribute("position",new dt(s,3)),t.setIndex(new dt(r,1))}t.computeVertexNormals();const n=new Ze({color:16777215,side:It,depthTest:!1,depthWrite:!1,transparent:!0,opacity:.45}),o=new We(t,n);return o.renderOrder=qi.DRAG_FACE_PATCH,this.scene.add(o),this.currentFacePatch=o,this.render(),o}}function $e(i,e){this._camera=i||null,this._domElement=e||document,this._raycaster=new Ot,this._selected=null,this._boundObjs={};var t=this;this._$onClick=function(){t._onClick.apply(t,arguments)},this._$onDblClick=function(){t._onDblClick.apply(t,arguments)},this._$onMouseMove=function(){t._onMouseMove.apply(t,arguments)},this._$onMouseDown=function(){t._onMouseDown.apply(t,arguments)},this._$onMouseUp=function(){t._onMouseUp.apply(t,arguments)},this._$onTouchMove=function(){t._onTouchMove.apply(t,arguments)},this._$onTouchStart=function(){t._onTouchStart.apply(t,arguments)},this._$onTouchEnd=function(){t._onTouchEnd.apply(t,arguments)},this._$onContextmenu=function(){t._onContextmenu.apply(t,arguments)},this._domElement.addEventListener("click",this._$onClick,!1),this._domElement.addEventListener("dblclick",this._$onDblClick,!1),this._domElement.addEventListener("mousemove",this._$onMouseMove,!1),this._domElement.addEventListener("mousedown",this._$onMouseDown,!1),this._domElement.addEventListener("mouseup",this._$onMouseUp,!1),this._domElement.addEventListener("touchmove",this._$onTouchMove,!1),this._domElement.addEventListener("touchstart",this._$onTouchStart,!1),this._domElement.addEventListener("touchend",this._$onTouchEnd,!1),this._domElement.addEventListener("contextmenu",this._$onContextmenu,!1)}$e.prototype.destroy=function(){this._domElement.removeEventListener("click",this._$onClick,!1),this._domElement.removeEventListener("dblclick",this._$onDblClick,!1),this._domElement.removeEventListener("mousemove",this._$onMouseMove,!1),this._domElement.removeEventListener("mousedown",this._$onMouseDown,!1),this._domElement.removeEventListener("mouseup",this._$onMouseUp,!1),this._domElement.removeEventListener("touchmove",this._$onTouchMove,!1),this._domElement.removeEventListener("touchstart",this._$onTouchStart,!1),this._domElement.removeEventListener("touchend",this._$onTouchEnd,!1),this._domElement.removeEventListener("contextmenu",this._$onContextmenu,!1)};$e.eventNames=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu","touchstart","touchend"];$e.prototype._getRelativeMouseXY=function(i){var e=i.target||i.srcElement;e.nodeType===3&&(e=e.parentNode);var t={x:0,y:0},n=e,o=getComputedStyle(n,null);t.y+=parseInt(o.getPropertyValue("padding-top"),10),t.x+=parseInt(o.getPropertyValue("padding-left"),10);do t.x+=n.offsetLeft,t.y+=n.offsetTop,o=getComputedStyle(n,null),t.x+=parseInt(o.getPropertyValue("border-left-width"),10),t.y+=parseInt(o.getPropertyValue("border-top-width"),10);while(n=n.offsetParent);var s={width:e===window?window.innerWidth:e.offsetWidth,height:e===window?window.innerHeight:e.offsetHeight};return{x:Number((i.pageX-t.x)/s.width)*2-1,y:-((i.pageY-t.y)/s.height)*2+1}};$e.prototype._objectCtxInit=function(i){i._3xDomEvent={}};$e.prototype._objectCtxDeinit=function(i){delete i._3xDomEvent};$e.prototype._objectCtxIsInit=function(i){return!!i._3xDomEvent};$e.prototype._objectCtxGet=function(i){return i._3xDomEvent};$e.prototype.camera=function(i){return i&&(this._camera=i),this._camera};$e.prototype.bind=function(i,e,t,n){console.assert($e.eventNames.indexOf(e)!==-1,"not available events:"+e),this._objectCtxIsInit(i)||this._objectCtxInit(i);var o=this._objectCtxGet(i);o[e+"Handlers"]||(o[e+"Handlers"]=[]),o[e+"Handlers"].push({callback:t,useCapture:n}),this._boundObjs[e]===void 0&&(this._boundObjs[e]=[]),this._boundObjs[e].push(i)};$e.prototype.addEventListener=$e.prototype.bind;$e.prototype.unbind=function(i,e,t,n){console.assert($e.eventNames.indexOf(e)!==-1,"not available events:"+e),this._objectCtxIsInit(i)||this._objectCtxInit(i);var o=this._objectCtxGet(i);o[e+"Handlers"]||(o[e+"Handlers"]=[]);for(var s=o[e+"Handlers"],r=0;r<s.length;r++){var a=s[r];if(t==a.callback&&n==a.useCapture){s.splice(r,1);break}}var l=this._boundObjs[e].indexOf(i);this._boundObjs[e].splice(l,1)};$e.prototype.removeEventListener=$e.prototype.unbind;$e.prototype._bound=function(i,e){var t=this._objectCtxGet(e);return t?!!t[i+"Handlers"]:!1};$e.prototype._isObjectVisible=function(i){for(var e=i;e;){if(e.visible===!1)return!1;e=e.parent}return!0};$e.prototype._filterVisibleObjects=function(i){var e=this;return i.filter(function(t){return e._isObjectVisible(t)})};$e.prototype._onMove=function(i,e,t,n){var o=this._boundObjs[i];if(!(o===void 0||o.length===0)){var s=this._filterVisibleObjects(o);if(s.length!==0){var r=new Qe;r.set(e,t),this._raycaster.setFromCamera(r,this._camera);var a=this._raycaster.intersectObjects(s),l=this;a=a.filter(function(g){return l._isObjectVisible(g.object)}),a.sort(function(g,v){var A=g.object.renderOrder||0,w=v.object.renderOrder||0;return A!==w?w-A:g.distance-v.distance});var c=this._selected;if(a.length>0){var h,d,u,f=a[0],m=f.object;this._selected=m,u=this._bound("mousemove",m),c!=m&&(h=this._bound("mouseover",m),d=c&&this._bound("mouseout",c))}else d=c&&this._bound("mouseout",c),this._selected=null;u&&this._notify("mousemove",m,n,f),h&&this._notify("mouseover",m,n,f),d&&this._notify("mouseout",c,n,f)}}};$e.prototype._onEvent=function(i,e,t,n){var o=this._boundObjs[i];if(!(o===void 0||o.length===0)){var s=this._filterVisibleObjects(o);if(s.length!==0){var r=new Qe;r.set(e,t),this._raycaster.setFromCamera(r,this._camera);var a=this._raycaster.intersectObjects(s,!0),l=this;if(a=a.filter(function(f){return l._isObjectVisible(f.object)}),a.sort(function(f,m){var g=f.object.renderOrder||0,v=m.object.renderOrder||0;return g!==v?v-g:f.distance-m.distance}),a.length!==0){for(var c=a[0],h=c.object,d=this._objectCtxGet(h),u=h.parent;typeof d>"u"&&u;)d=this._objectCtxGet(u),u=u.parent;d&&this._notify(i,h,n,c)}}}};$e.prototype._notify=function(i,e,t,n){var o=this._objectCtxGet(e),s=o?o[i+"Handlers"]:null;if(!o||!s||s.length===0){e.parent&&this._notify(i,e.parent,t,n);return}for(var s=o[i+"Handlers"],r=0;r<s.length;r++){var a=s[r],l=!0;a.callback({type:i,target:e,origDomEvent:t,intersect:n,stopPropagation:function(){l=!1}}),l&&a.useCapture===!1&&e.parent&&this._notify(i,e.parent,t,n)}};$e.prototype._onMouseDown=function(i){return this._onMouseEvent("mousedown",i)};$e.prototype._onMouseUp=function(i){return this._onMouseEvent("mouseup",i)};$e.prototype._onMouseEvent=function(i,e){var t=this._getRelativeMouseXY(e);this._onEvent(i,t.x,t.y,e)};$e.prototype._onMouseMove=function(i){var e=this._getRelativeMouseXY(i);this._onMove("mousemove",e.x,e.y,i),this._onMove("mouseover",e.x,e.y,i),this._onMove("mouseout",e.x,e.y,i)};$e.prototype._onClick=function(i){this._onMouseEvent("click",i)};$e.prototype._onDblClick=function(i){this._onMouseEvent("dblclick",i)};$e.prototype._onContextmenu=function(i){this._onMouseEvent("contextmenu",i)};$e.prototype._onTouchStart=function(i){return this._onTouchEvent("touchstart",i)};$e.prototype._onTouchEnd=function(i){return this._onTouchEvent("touchend",i)};$e.prototype._onTouchMove=function(i){if(i.touches.length==1){var e=Number(i.touches[0].pageX/window.innerWidth)*2-1,t=-(i.touches[0].pageY/window.innerHeight)*2+1;this._onMove("mousemove",e,t,i),this._onMove("mouseover",e,t,i),this._onMove("mouseout",e,t,i)}};$e.prototype._onTouchEvent=function(i,e){var t=e.touches;if(t.length==0&&(t=e.changedTouches),t.length==1){var n=Number(t[0].pageX/window.innerWidth)*2-1,o=-(t[0].pageY/window.innerHeight)*2+1;this._onEvent(i,n,o,e)}};const fh="Object3DHelperPlugin",Nd=fh,qM=()=>{console.error(`${Nd} is disposed`)},ZM=()=>{console.warn(`${Nd} is disabled`)},JM=()=>{console.error(`${Nd} is disabled`)};class E1 extends xo{constructor(e){super(e),p(this,"name",fh),p(this,"state",{visible:!0,enabled:!0,disposed:!1}),p(this,"objectHelperMap",new Map),p(this,"css3DObjectParentMap",new Map),p(this,"css3DObjectModeMap",new Map),p(this,"css3DRender"),this.five=e,this.css3DRender=new Nr(this.five.scene),console.warn("Object3DHelper: 使用此插件，需要在初始化five时，设置five参数: { backgroundAlpha: 0, backgroundColor: 0x000000 }"),Object.assign(window,{[`__${fh.toUpperCase()}_DEBUG__`]:this})}show(e){return ee(this,null,function*(){this.setState({visible:!0},e)})}hide(e){return ee(this,null,function*(){this.setState({visible:!1},e)})}enable(e){this.setState({enabled:!0},e)}disable(e){this.setState({enabled:!1},e)}dispose(){this.setState({disposed:!0})}setState(e,t){if(this.state.disposed)return qM();if(!this.state.enabled&&e.enabled!==!0&&e.disposed!==!0)return JM();const n=W({},this.state);this.state=W(W({},this.state),e),e.disposed!==void 0&&e.disposed!==n.disposed&&e.disposed&&this.handleDispose(),e.visible!==void 0&&e.visible!==n.visible&&this.handleVisible(e.visible),e.enabled!==void 0&&e.enabled!==n.enabled&&this.handleEnable(e.enabled),this.hooks.emit("stateChange",{state:this.state,prevState:n})}getObject3DHelper(e){return this.objectHelperMap.get(e)}addObject3DHelper(e,t={}){var n;if(!e){console.error("Object3D is undefined");return}if(this.objectHelperMap.has(e)){console.warn(`Object3DHelperPlugin: object3D ${e.name} is already has helper`);return}const o=new NM,s=[],r=(n=this.five.getElement())==null?void 0:n.parentElement,a=this.five.camera,l=W(W({},{moveHelper:!0,rotateHelper:!0,scaleHelper:!0,boundingBoxHelper:!1,positionFrom:"objectPosition"}),t),{moveHelper:c,rotateHelper:h,scaleHelper:d,boundingBoxHelper:u}=l,f=o.hooks,m=new Mt,g=new $e(this.five.camera,this.five.getElement()),v=A=>{if(A)return typeof A=="boolean"?A:A.enable};if(v(c)){const A=W(W({},this.getConfig(l.moveHelper)),l),w=new xM(e,W({},A)),P=new yr(this.five,g,LM,e,w,A,f,m);o.addControllers({moveController:P.helperController}),s.push(()=>P.dispose())}if(v(h)){const A=W(W({},this.getConfig(l.rotateHelper)),l),w=new EM(e,W({container:r},A)),P=new yr(this.five,g,FM,e,w,A,f,m);o.addControllers({rotateController:P.helperController}),s.push(()=>P.dispose())}if(v(u)){const A=new zM(e),w=new yr(this.five,g,GM,e,A,void 0,f,m);o.addControllers({boundingBoxController:w.helperController}),s.push(()=>w.dispose())}if(v(d))if(e.isCSS3DObject&&r){const A=new kM(e,r,a,this.five.scene),w=new yr(this.five,g,WM,e,A,void 0,f,m);o.addControllers({scaleController:w.helperController}),s.push(()=>w.dispose()),Ti(this.five).then(()=>{var P,I;if(e.isCSS3DObjectPlus){const j=e;if(!j||j.mode!=="front")return;const D=(P=this.css3DRender.behindModeCSS3DRenderer.wrapper)!=null?P:kh(this.five);D&&(this.css3DObjectParentMap.set(j,j.parent),j.removeFromParent(),this.css3DRender.behindModeCSS3DRenderer.setWrapper(D),(I=this.css3DRender.getBehindCSS3DObjectGroup())==null||I.add(j),this.css3DRender.render(this.five.camera))}else e.isCSS3DObject&&(this.css3DObjectModeMap.set(e,e.mode),e.mode="behind")})}else{const A=W(W({},this.getConfig(l.scaleHelper)),l),w=new QM(e,A),P=new yr(this.five,g,YM,e,w,A,f,m);o.addControllers({scaleController:P.helperController}),s.push(()=>P.dispose())}return this.objectHelperMap.set(e,{helper:o,disposers:s}),o.controllers}removeObject3DHelper(e){if(!this.objectHelperMap.has(e))return;const{helper:t,disposers:n}=this.objectHelperMap.get(e);if(t){if(e.isCSS3DObjectPlus){const o=e,s=this.css3DObjectParentMap.get(o);s&&s.add(o),this.css3DRender.render(this.five.camera)}else if(e.isCSS3DObject){const o=this.css3DObjectModeMap.get(e);e.mode=o}this.objectHelperMap.delete(e),t.dispose(),n==null||n.forEach(o=>o==null?void 0:o())}}handleEnable(e,t=!0){e?(this.everyHelperDo(n=>n.enable()),this.hooks.emit("enable",{userAction:t})):(this.everyHelperDo(n=>n.disable()),this.hooks.emit("disable",{userAction:t})),this.state.enabled=e}handleVisible(e,t=!0){e?(this.everyHelperDo(n=>n.show()),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:t}))):(this.everyHelperDo(n=>n.hide()),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:t}))),this.state.visible=e}handleDispose(){this.everyHelperDo((e,t)=>{e.dispose(),t==null||t.forEach(n=>n==null?void 0:n())})}everyHelperDo(e){this.objectHelperMap.forEach(({helper:t,disposers:n})=>{t&&e(t,n)})}actionIfStateIsEnabled(e,t){if(this.state.enabled)return e();t!=null&&t.warnLog&&ZM()}getConfig(e){if(e&&typeof e!="boolean"&&e.enable)return e}}const hD=i=>new E1(i),KM=`
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`,_M=`
uniform sampler2D map;
uniform vec4 size;
varying vec2 vUv;
uniform float opacity;

void main() {
  float dx = max(size[0] + size[2] - 1.0, 0.0);
  vec2 uv = vec2(((vUv.x <= dx ? vUv.x + 1.0 : vUv.x) - size[0]) / size[2], (vUv.y - size[1]) / size[3]);
  float a = 0.1;
  float transX = uv.x < a ? 1.0 / a * uv.x : (uv.x > (1.0 - a) ? 1.0 / a * (1.0 - uv.x) : 1.0);
  float transY = uv.y < a ? 1.0 / a * uv.y : (uv.y > (1.0 - a) ? 1.0 / a * (1.0 - uv.y) : 1.0);
	float match = (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5))) * (transX < transY ? transX : transY);
  gl_FragColor = vec4(texture2D(map, uv).xyz, match * opacity);
}
`;function $M(i){const e=Math.PI*2;let t=-Math.atan2(i.x,-i.z);t=(t%e+e)%e;const n=-Math.asin(i.y/1);return{longitude:t,latitude:n}}class fg{constructor(e,t){p(this,"video"),p(this,"fiveUtil"),p(this,"_id"),p(this,"url"),p(this,"five"),p(this,"panoIndex"),p(this,"observer"),p(this,"origin"),p(this,"videoMesh"),p(this,"_enabled",!0),p(this,"_disposed",!1),p(this,"videoDataLoaded",!1),p(this,"hasVideoEverPlayed",!1),p(this,"renderFiveDisposer"),p(this,"hooks"),p(this,"unmute",()=>{this.video.muted=!1}),p(this,"uv2Position",(h,d)=>{const u=Math.PI,f=Math.PI*2,m=h,g=1-d,v=new R(-1*Math.cos(f*m)*Math.sin(u*g),1*Math.cos(u*g),1*Math.sin(f*m)*Math.sin(u*g));v.setX(-v.x);const A=this.fiveUtil.workUtil.getResolvedObserver(this.panoIndex);if(!A)return this.logWarning(`点位 ${this.panoIndex} 不存在，请检查 Five 数据是否正常。`);const w=A.position.clone(),P=A.quaternion.clone(),I=v.clone();return I.applyAxisAngle(new R(0,1,0),Math.PI/2),I.applyQuaternion(P),I.add(w),I}),p(this,"onFiveDataLoaded",()=>{const h=this.fiveUtil.workUtil.getResolvedObserver(this.panoIndex);if(!h)return this.logWarning(`点位 ${this.panoIndex} 不存在，请检查 Five 数据是否正常。`);this.observer=h;const{x:d,y:u,z:f,w:m}=h.quaternion,g=new tt(d,u,f,m),v=h.position;this.videoMesh.position.fromArray([v.x,v.y,v.z]),this.videoMesh.quaternion.set(0,0,0,1),this.videoMesh.rotateOnAxis(new R(0,1,0),Math.PI/2),this.videoMesh.applyQuaternion(g)}),p(this,"onFiveWantsMoveToPano",h=>{h===this.panoIndex&&(this.hasVideoEverPlayed||this.video.play().catch(()=>{}))}),p(this,"onFivePanoArrived",h=>{if(this.disposed)return this.logWarning("实例已被销毁");this.enabled&&this.panoIndex===h&&this.mount()}),p(this,"onFivePanoWillArrive",h=>{if(h!==this.panoIndex)return this.unmount();this.panoIndex!==h&&this.unmount()}),p(this,"onFiveModeChange",h=>{h!=="Panorama"&&this.hide()}),p(this,"onFiveInitAnimationEnded",()=>{const h=this.five.getCurrentState();h.mode==="Panorama"&&h.panoIndex===this.panoIndex&&this.mount()}),p(this,"onFiveWantsTapGesture",h=>{if(!this.five.scene.children.includes(this.videoMesh))return;if(this.disposed)return this.logWarning("实例已被销毁");if(!this.enabled)return this.logWarning("实例已被禁用");const[d]=h.intersectObject(this.videoMesh);if(d&&this.checkIntersectionInBounding(this.origin,d)){const u={target:this,_preventDefaultReturn:!1,preventDefault:()=>{u._preventDefaultReturn=!0}};return this.hooks.emit("click",u),u._preventDefaultReturn===!1&&(this.video.muted=!this.video.muted),!1}}),p(this,"onVideoDataLoaded",()=>{this.videoDataLoaded=!0,this.video.paused===!1&&this.video.src!==""&&this.onVideoPlayingAndLoaded()}),p(this,"onVideoPlaying",()=>{this.hasVideoEverPlayed=!0,this.enabled&&this.videoDataLoaded&&this.onVideoPlayingAndLoaded()}),p(this,"onVideoPlayingAndLoaded",()=>{if(!this.videoDataLoaded)return this.logWarning("视频数据未加载");if(this.video.paused===!0)return this.logWarning("视频已暂停");this.video.addEventListener("timeupdate",()=>{if(this.enabled&&this.panoIndex===this.five.getCurrentState().panoIndex&&this.five.getCurrentState().mode==="Panorama"&&(this.renderFiveDisposer||(this.renderFiveDisposer=aa(()=>{this.five.needsRender=!0},30)),this.five.scene.add(this.videoMesh),this.videoMesh.material.uniforms.opacity.value===0)){const h={value:0};rt({targets:h,value:1,duration:300,easing:"linear",update:()=>{this.videoMesh.material.uniforms.opacity.value=h.value},complete:()=>{this.videoMesh.material.uniforms.opacity.value=1}})}},{once:!0})}),p(this,"onVideoPaused",()=>{var h;(h=this.renderFiveDisposer)==null||h.call(this),this.renderFiveDisposer=void 0});var n,o;this.five=e,this.panoIndex=t.panoIndex,this.fiveUtil=t.fiveUtil,this._id=t.renderID,this.url=t.url,this.origin=t.origin.slice(),this.hooks=t.hooks,this._enabled=(o=(n=t.initialState)==null?void 0:n.enabled)!=null?o:!0;const s=document.createElement("video");s.crossOrigin="anonymous",s.autoplay=!1,s.muted=!0,s.loop=!0,s.playsInline=!0,this.video=s;const r=new Ph(this.video);r.minFilter=zi,r.magFilter=zi;const a=new Bi({vertexShader:KM,fragmentShader:_M,uniforms:{map:{value:r},size:{value:new Ro(this.origin[0],1-this.origin[1]-this.origin[3],this.origin[2],this.origin[3])},opacity:{value:0}},depthTest:!0,transparent:!0}),l=new mA(1,64,64);l.scale(-1,1,1);const c=new We(l,a);c.name="pano-video-plugin",this.videoMesh=c,this.fiveUtil.workUtil.work&&this.onFiveDataLoaded(),this.enabled&&this.addEventListeners(),this.mountIfNeeded(),window[`__PANOVIDEO_${this.renderID}_DEBUG__`]=this}get renderID(){return this._id}get disposed(){return this._disposed}get enabled(){return this._enabled}dispose(){this.disposed||(this.disable(),this._disposed=!0)}enable(){this.disposed||this.enabled||(this._enabled=!0,!this.observer&&this.five.work&&this.onFiveDataLoaded(),this.addEventListeners(),this.mountIfNeeded())}disable(){this.disposed||this.enabled&&(this._enabled=!1,this.removeEventListeners(),this.unmount())}lookAtVideo(){if(!this.observer)return;const e=this.getUVCenter();if(!e)return;const t=this.uv2Position(e[0],e[1]);if(!t)return;const n=new R().subVectors(t,this.observer.position).normalize(),{longitude:o,latitude:s}=$M(n);this.five.setState({panoIndex:this.panoIndex,longitude:o,latitude:s}),this.onFiveWantsMoveToPano(this.panoIndex)}getUVCenter(){if(!this.origin)return;const e=this.origin[0]+this.origin[2]/2,t=this.origin[1]+this.origin[3]/2;return[e,t]}addEventListeners(){this.five.on("loaded",this.onFiveDataLoaded),this.five.on("modeChange",this.onFiveModeChange),this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("panoWillArrive",this.onFivePanoWillArrive),this.five.on("wantsMoveToPano",this.onFiveWantsMoveToPano),this.five.on("wantsTapGesture",this.onFiveWantsTapGesture),this.five.on("initAnimationEnded",this.onFiveInitAnimationEnded),this.video.addEventListener("canplaythrough",this.onVideoDataLoaded),this.video.addEventListener("playing",this.onVideoPlaying),this.video.addEventListener("pause",this.onVideoPaused)}removeEventListeners(){this.five.off("loaded",this.onFiveDataLoaded),this.five.off("modeChange",this.onFiveModeChange),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("panoWillArrive",this.onFivePanoWillArrive),this.five.off("wantsMoveToPano",this.onFiveWantsMoveToPano),this.five.off("wantsTapGesture",this.onFiveWantsTapGesture),this.five.off("initAnimationEnded",this.onFiveInitAnimationEnded),this.video.removeEventListener("canplaythrough",this.onVideoDataLoaded),this.video.removeEventListener("playing",this.onVideoPlaying),this.video.removeEventListener("pause",this.onVideoPaused)}mountIfNeeded(){const e=this.five.getCurrentState();e.mode==="Panorama"&&e.panoIndex===this.panoIndex&&this.enabled&&this.mount()}mount(){if(this.disposed)return this.logWarning("插件已经销毁，无法挂载。");if(this.url==="")return this.logWarning("视频资源不存在。");this.video.src!==this.url&&(this.video.src=this.url),this.video.paused&&this.video.play().catch(e=>{this.logWarning(e instanceof Error?e.message:"视频播放失败。"),this.five.once("gesture",()=>{this.video.play().catch(t=>{this.logWarning(t instanceof Error?t.message:"自动播放视频失败。")})})})}unmount(){this.video.pause(),this.videoMesh.material.uniforms.opacity.value=0,this.video.src!==""&&(this.video.src=""),this.five.scene.remove(this.videoMesh)}hide(){this.video.pause(),this.videoMesh.material.uniforms.opacity.value=0,this.five.scene.remove(this.videoMesh)}logWarning(e){console.warn("⛔ ==> [VideoMeshController]:",e)}checkIntersectionInBounding(e,t){if(!t.uv)return!1;const[n,o]=t.uv.toArray(),[s,r,a,l]=e,c=1-r-l,h=s+a,d=c+l;return n>=s&&n<=h&&o>=c&&o<=d}}class eS extends xo{constructor(e){super(e),p(this,"controllerMap",new Map),p(this,"data"),p(this,"enabled",!0),p(this,"_disposed",!1)}get state(){return{enabled:this.enabled}}get disposed(){return this._disposed}load(e,t){var n;if(this.disposed)return this.logWarning("插件已被销毁");typeof((n=t==null?void 0:t.initialState)==null?void 0:n.enabled)<"u"&&t.initialState.enabled!==this.enabled&&(t.initialState.enabled?this.enable():this.disable()),e.list.forEach(o=>{const s=o.pano_index,r=o.render_id;o.video_list.forEach(a=>{this.controllerMap.set(a.render_id,new fg(this.five,pe(W({},a),{fiveUtil:this.fiveUtil,panoIndex:s,renderID:r,hooks:this.hooks,initialState:{enabled:this.enabled}})))})}),this.data=e,this.hooks.emit("dataLoaded",e)}enable(e){var t;if(this.disposed)return this.logWarning("插件已被销毁");if(this.enabled)return;this.enabled=!0,Array.from(this.controllerMap.values()).forEach(o=>o.enable());const n=(t=e==null?void 0:e.userAction)!=null?t:!0;this.hooks.emit("enable",{userAction:n})}disable(e){var t;if(this.disposed)return this.logWarning("插件已被销毁");if(!this.enabled)return;this.enabled=!1,Array.from(this.controllerMap.values()).forEach(o=>o.disable());const n=(t=e==null?void 0:e.userAction)!=null?t:!0;this.hooks.emit("disable",{userAction:n})}lookAtVideoItemByRenderID(e){if(this.disposed)return this.logWarning("插件已被销毁");const t=this.controllerMap.get(e);if(!t)return this.logWarning(`ID 为 ${e} 的点位视频不存在`);t.lookAtVideo()}unmuteByRenderID(e){if(this.disposed)return this.logWarning("插件已被销毁");const t=this.controllerMap.get(e);if(!t)return this.logWarning(`ID 为 ${e} 的点位视频不存在`);t.unmute()}add(e,t){if(this.disposed)return this.logWarning("插件已被销毁");t.forEach(n=>{if(this.controllerMap.get(n.render_id))return this.logWarning(`ID 为 ${n.render_id} 的点位视频已存在`);const o=n.render_id;this.controllerMap.set(n.render_id,new fg(this.five,pe(W({},n),{fiveUtil:this.fiveUtil,panoIndex:e,renderID:o,hooks:this.hooks,initialState:{enabled:this.enabled}})))})}removeByRenderID(e){if(this.disposed)return this.logWarning("插件已被销毁");const t=this.controllerMap.get(e);if(!t)return this.logWarning(`ID 为 ${e} 的点位视频不存在`);t.dispose(),this.controllerMap.delete(e)}clear(){if(this.disposed)return this.logWarning("插件已被销毁");Array.from(this.controllerMap.values()).forEach(e=>e.dispose()),this.controllerMap.clear()}dispose(){if(this.disposed)return this.logWarning("插件已被销毁");this._disposed=!0,Array.from(this.controllerMap.values()).forEach(e=>e.dispose()),this.controllerMap.clear()}logWarning(e){console.warn("⛔ ==> [PanoVideoPluginController]:",e)}}const dD=i=>new eS(i);function I1(i){const e=new Map;return i.forEach(t=>t.pipes.forEach(n=>e.set(n.id,n))),Array.from(e.values())}function tS(i){const e=i.target.map(({startLibraryID:t,endLibraryID:n})=>{const o=i.data.pipelines.find(s=>s.startLibraryID===t&&s.endLibraryID===n);return o||console.warn(`Cannot find pipeline with startLibraryID ${t} and endLibraryID ${n}`),o}).filter(Be);return I1(e)}function iS(i){if(i.quality===0)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/1.png";if(i.quality===1)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/2.png";if(i.quality===2)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/3.png";if(i.quality===3)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/4.png";if(i.quality===4)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/5.png";if(i.isHot)return"//vr-static.realsee-cdn.cn/release/web/aqueous-system-demo/19/6.png"}function nS(i,e){const t=i.ConnectsDataset.map(n=>{const o=n.data,s=n.start,r=n.end,a={isHot:n.waterType===5,quality:n.waterType},l=o.map(c=>{const h=i.LinesDataset.find(m=>m.id===c);if(!h)return null;const d=h.data,u=e!=null&&e.getPipeRadius?e.getPipeRadius(h):1.6/100,f=e!=null&&e.getPipeUrl?e.getPipeUrl(a):iS(a);return{id:h.id,radius:u,water:a,path:d,texture:f}}).filter(Be);return{startLibraryID:s,endLibraryID:r,pipes:l}});return{pipes:I1(t),pipelines:t}}function oS(i,e){const t=1-i;return t*t*e}function sS(i,e){return 2*(1-i)*i*e}function rS(i,e){return i*i*e}function Mc(i,e,t,n){return oS(i,e)+sS(i,t)+rS(i,n)}function aS(i,e){const t=1-i;return t*t*t*e}function lS(i,e){const t=1-i;return 3*t*t*i*e}function cS(i,e){return 3*(1-i)*i*i*e}function hS(i,e){return i*i*i*e}function Sc(i,e,t,n,o){return aS(i,e)+lS(i,t)+cS(i,n)+hS(i,o)}function mh(i,e){const t=e.length-1;if(t<1)throw new Error("length of points must greater than 2");if(t===2)return new R(Mc(i,e[0].x,e[1].x,e[2].x),Mc(i,e[0].y,e[1].y,e[2].y),Mc(i,e[0].z,e[1].z,e[2].z));if(t===3)return new R(Sc(i,e[0].x,e[1].x,e[2].x,e[3].x),Sc(i,e[0].y,e[1].y,e[2].y,e[3].y),Sc(i,e[0].z,e[1].z,e[2].z,e[3].z));if(t===1){const[o,s]=e;return o.clone().add(s.clone().sub(o).multiplyScalar(i))}const n=[];return e.reduce((o,s)=>(n.push(mh(i,[o,s])),s)),mh(i,n)}class dS extends yl{constructor(e=[]){super(),p(this,"type"),p(this,"controlPoints"),this.type="CustomBezierCurve3",this.controlPoints=e}getPoint(e,t=new R){const n=t,o=mh(e,this.controlPoints);return n.copy(o),n}copy(e){return super.copy(e),this.controlPoints=e.controlPoints.map(t=>t.clone()),this}toJSON(){const e=super.toJSON(),t=this.controlPoints.map(n=>n.toArray());return Object.assign(e,{controlPoints:t})}fromJSON(e){return super.fromJSON(e),this.controlPoints=e.controlPoints.map(t=>new R().fromArray(t)),this}}const uS=`
  varying vec2 vUv;
  void main() {
    vUv = uv; 
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,pS=`
  varying vec2 vUv;
  uniform float uOffset;
  uniform float vOffset;
  uniform float opacity;
  uniform mediump sampler2D envMap;

  void main(){
    float u = vUv.x + uOffset;
    float v = vUv.y + vOffset;
    vec2 uv = vec2(u, v);
    gl_FragColor = texture2D(envMap, uv);
    gl_FragColor.a = gl_FragColor.a * opacity;
  }
`;class Is extends We{constructor(e,t=pS){super(),p(this,"geometryConfig",{radius:1.5/100,tubularSegments:20,radialSegments:8}),p(this,"customID"),p(this,"path"),p(this,"pathLength",0),p(this,"pathPoints"),p(this,"texture"),p(this,"opacityAnime"),p(this,"uPreMeter",1),e.geometryConfig&&(this.geometryConfig=W(W({},this.geometryConfig),e.geometryConfig)),this.customID=e.id||this.uuid,this.pathPoints=e.path,this.path=Is.calculatePath(e.path.map(a=>new R().fromArray(a))),this.pathLength=this.path.getLength(),this.texture=Is.formatTexture(e.texture);const{radius:n,tubularSegments:o,radialSegments:s}=this.geometryConfig,r=Is.formatTexture(e.texture);this.geometry=Is.formatGeometryUV(new gA(this.path,o,n,s),this.pathLength,this.uPreMeter),this.material=new Bi({uniforms:{opacity:{value:1},uOffset:{value:0},vOffset:{value:0},envMap:{value:r}},transparent:!0,vertexShader:uS,fragmentShader:t})}static calculatePath(e){return e.length===2?new ia(e[0],e[1]):new dS(e)}static formatGeometryUV(e,t,n){const o=e.getAttribute("uv");for(let s=0;s<o.count;s++){const r=o.getX(s)*t*n;o.setX(s,r)}return e}static formatTexture(e){return e.wrapS=Or,e.wrapT=Or,e}hide(e){return ee(this,null,function*(){var t;(t=this.opacityAnime)==null||t.dispose();const n=0;if(typeof(e==null?void 0:e.duration)!="number")return this.setOpacity(n);const o=this.material.uniforms.opacity.value;return o===n?!0:new Promise(s=>{this.opacityAnime=new Yo({progress:o}).to({progress:n}).onUpdate(({progress:r})=>this.setOpacity(r)).onComplete(()=>s(!0)).onDispose(()=>{this.setOpacity(n),s(!1)}).play()})})}show(e){return ee(this,null,function*(){var t;(t=this.opacityAnime)==null||t.dispose();const n=1;if(typeof(e==null?void 0:e.duration)!="number")return this.setOpacity(n);const o=this.material.uniforms.opacity.value;return new Promise(s=>{this.opacityAnime=new Yo({progress:o}).to({progress:n}).onUpdate(({progress:r})=>this.setOpacity(r)).onComplete(()=>s(!0)).onDispose(()=>{this.setOpacity(n),s(!1)}).play()})})}setOpacity(e){return this.material.uniforms.opacity.value=e,this.material.needsUpdate=!0,this.needsRender=!0,!0}disposeAnime(){var e;(e=this.opacityAnime)==null||e.dispose(),this.opacityAnime=void 0}dispose(){this.disposeAnime(),this.geometry.dispose(),this.material.dispose()}}const fS=`
  varying vec2 vUv;
  uniform float uOffset;
  uniform float vOffset;
  uniform float opacity;
  uniform mediump sampler2D envMap;

  void main(){
    // u > 0 时，不显示。即贴图不向前移动时，全部使用 u = 0 的值进行平铺
    float u = min(vUv.x + uOffset, 0.0);
    float v = vUv.y + vOffset;
    vec2 uv = vec2(u, v);
    gl_FragColor = texture2D(envMap, uv);
    gl_FragColor.a = gl_FragColor.a * opacity;
  }
`;class mS extends Is{constructor(e){super(e,fS),p(this,"initialDisplacement",0),p(this,"oldTime",new Date().getTime()),p(this,"flowSpeed",.6),p(this,"rotateSpeed",0),p(this,"flowAnimationDisposer",()=>{})}setInitialDisplacement(e,t="backward"){this.initialDisplacement=Math.abs(e)*(t==="forward"?-1:1),this.moveFromOrigin(this.initialDisplacement)}moveFromOrigin(e){const t=e*this.uPreMeter;return this.material.uniforms.uOffset.value=t,this.material.needsUpdate=!0,this.needsRender=!0,!0}moveForwardFromInitialOffset(e){const t=e*-1,n=this.initialDisplacement+t;this.moveFromOrigin(n)}flow(){this.flowAnimationDisposer(),this.oldTime=new Date().getTime();let e=0,t=0;const n=aa(()=>{const o=new Date().getTime(),s=o-this.oldTime,r=this.flowSpeed*(s/1e3),a=this.rotateSpeed*(s/1e3);e=e+r,t=t+a;const l=1/360,c=t*l;this.material.uniforms.vOffset.value=c,this.moveForwardFromInitialOffset(e),this.oldTime=o});this.flowAnimationDisposer=function(){n(),this.moveForwardFromInitialOffset(0)}}stopFlow(){this.flowAnimationDisposer()}setSpeed(e){typeof(e==null?void 0:e.flowSpeed)=="number"&&(this.flowSpeed=e.flowSpeed),typeof(e==null?void 0:e.rotateSpeed)=="number"&&(this.rotateSpeed=e.rotateSpeed)}disposeAnime(){super.disposeAnime(),this.flowAnimationDisposer()}}const mg={flowSpeed:.6,rotateSpeed:0};let gS=class extends Co{constructor(i){super(i),p(this,"data"),p(this,"state"),p(this,"group"),p(this,"pipeObjects",[]),p(this,"texturePromiseCache",new Map),p(this,"dispose",()=>{this.disable(),this.five.scene.remove(this.group),this.texturePromiseCache.forEach(e=>e.then(t=>t.dispose())),this.texturePromiseCache.clear()}),p(this,"onWantsFiveTapGesture",(...e)=>{const[t]=e,n=t.intersectObjects(this.pipeObjects,!1);if(n.length===0||!this.data)return;const o=n[0].object.customID,s=this.data.pipes.find(({id:a})=>a===o),r=this.data.pipelines.find(a=>s&&a.pipes.includes(s));if(!(!s||!r))return this.hooks.emit("tap",{intersectObjects:n,pipe:s,pipeline:r,wantsFiveTapGestureParams:e}),!1}),this.state={target:null,visible:!0,enabled:!0,isFlowing:!1,speed:mg},this.five=i,this.group=new Et,this.group.name="water-pipe-group",this.five.scene.add(this.group),this.five.once("dispose",this.dispose),this.five.on("wantsTapGesture",this.onWantsFiveTapGesture)}load(i,e,t,n){return ee(this,null,function*(){const o=this.data;this.data=yield this.formatData(i,n),this.removeAllPipes(),this.hooks.emit("dataChange",this.data,o),this.pipeObjects=yield Promise.all(this.data.pipes.filter(s=>!!(s!=null&&s.texture)).map(s=>ee(this,[s],function*({id:r,texture:a,path:l,radius:c}){const h=yield this.loadPipeTexture(a),d={id:r,path:l,textureURL:a,texture:h,geometryConfig:{radius:c}};return new mS(d)}))),this.data.pipelines.forEach(s=>{s.pipes.reduce((r,a)=>{const l=this.findPipeObjectWithID(a.id);return l==null||l.setInitialDisplacement(r),r+((l==null?void 0:l.pathLength)||0)},0)}),this.hooks.emit("dataLoaded",this.data),this.state.visible===!1&&this.pipeObjects.forEach(s=>s.setOpacity(0)),this.state.enabled&&(this.group.add(...this.pipeObjects),this.five.needsRender=!0),e&&this.setState(e,{userAction:t})})}setState(i,e={}){const t=this.state;if(Yi(i,t,{deep:!0}))return;const n=e.userAction!==void 0?e.userAction:!0;if(this.updateState(i,n),i.enabled!==void 0&&t.enabled!==i.enabled&&(i.enabled?this._enable({userAction:n}):this._disable({userAction:n})),i.visible!==void 0&&t.visible!==i.visible){const o={userAction:n,anime:{duration:500}};i.visible?this._show(o):this._hide(o)}if(i.isFlowing!==void 0&&t.isFlowing!==i.isFlowing&&(i.isFlowing?this._flow():this._stopFlow()),i.speed!==void 0&&!Yi(t.speed,this.state.speed,{deep:!0})&&this._setSpeed(i.speed),i.target!==void 0&&!Yi(t.target,this.state.target,{deep:!0})){const o={target:i.target,showAnime:{duration:500},hideAnime:{duration:500}};this._switchPipelines(o)}}enable(i={}){var e;if(this.state.enabled)return;const t=(e=i.userAction)!=null?e:!0;this.updateState({enabled:!0},t),this._enable({userAction:t})}disable(i={}){var e;if(this.state.enabled===!1)return;const t=(e=i.userAction)!=null?e:!0;this.updateState({enabled:!1,isFlowing:!1},t),this._disable({userAction:t})}show(){return ee(this,arguments,function*(i={}){if(this.state.visible)return;const e=W({userAction:!0,anime:{duration:500}},i);this.updateState({visible:!0},e.userAction),yield this._show(e)})}hide(){return ee(this,arguments,function*(i={}){if(this.state.visible===!1)return;const e=W({userAction:!0,anime:{duration:500}},i);this.updateState({visible:!1},e.userAction),yield this._hide(e)})}switchPipelines(i){return ee(this,null,function*(){var e,t,n,o,s,r;if(!this.data)return;const a=(e=i==null?void 0:i.target)!=null?e:null,l=(t=i==null?void 0:i.userAction)!=null?t:!0;this.updateState({target:a},l);const c={duration:500},h=(o=(n=i==null?void 0:i.hideAnime)!=null?n:i==null?void 0:i.anime)!=null?o:c,d=(r=(s=i==null?void 0:i.showAnime)!=null?s:i==null?void 0:i.anime)!=null?r:c,u={target:a,showAnime:d,hideAnime:h};this._switchPipelines(u)})}flow(i={}){var e;if(this.state.isFlowing)return;const t=(e=i.userAction)!=null?e:!0;this.updateState({isFlowing:!0},t),this._flow()}stopFlow(i={}){var e;if(this.state.isFlowing===!1)return;const t=(e=i.userAction)!=null?e:!0;this.updateState({isFlowing:!1},t),this._stopFlow()}setSpeed(i){var e,t;const n=(e=i==null?void 0:i.speed)!=null?e:mg,o=(t=i.userAction)!=null?t:!0;this.updateState({speed:n},o),this._setSpeed(n)}formatData(i,e){return ee(this,null,function*(){return nS(i,e)})}_enable(i){this.hooks.emit("enable",{userAction:i.userAction}),this.five.scene.add(this.group),this.five.needsRender=!0,this.five.on("wantsTapGesture",this.onWantsFiveTapGesture)}_disable(i){this.hooks.emit("disable",{userAction:i.userAction}),this.disposeAnime(),this.five.scene.remove(this.group),this.five.needsRender=!0,this.five.off("wantsTapGesture",this.onWantsFiveTapGesture)}_show(i){return ee(this,null,function*(){var e;this.hooks.emit("show",{userAction:i.userAction});const t=(e=i==null?void 0:i.anime)!=null?e:{duration:500},n=this.findPipeObjectWithTarget(this.state.target);yield Promise.all(n.map(o=>o==null?void 0:o.show(t))),this.five.needsRender=!0})}_hide(i){return ee(this,null,function*(){var e;this.hooks.emit("hide",{userAction:i.userAction});const t=(e=i==null?void 0:i.anime)!=null?e:{duration:500};yield Promise.all(this.pipeObjects.map(n=>n.hide(t))),this.five.needsRender=!0})}_switchPipelines(i){return ee(this,null,function*(){if(!this.data)return;const e=this.findPipeObjectWithTarget(i.target),t=i.hideAnime;yield Promise.all(this.pipeObjects.map(o=>o.hide(t)));const n=i.showAnime;yield Promise.all(e.map(o=>o.show(n)))})}_flow(){this.pipeObjects.forEach(i=>i.flow())}_stopFlow(){this.pipeObjects.forEach(i=>i.stopFlow())}_setSpeed(i){this.pipeObjects.forEach(e=>e.setSpeed(i))}updateState(i,e){const t=this.state;this.state=W(W({},this.state),i),this.hooks.emit("stateChange",{state:this.state,prevState:t,userAction:e})}loadPipeTexture(i){return ee(this,null,function*(){const e=this.texturePromiseCache.get(i);if(e)return e;const t=Wo(i);return this.texturePromiseCache.set(i,t),t})}disposeAnime(){this.pipeObjects.forEach(i=>i.disposeAnime()),this.five.needsRender=!0}removeAllPipes(){this.disposeAnime(),this.group.remove(...this.pipeObjects),this.pipeObjects.forEach(i=>i.dispose()),this.pipeObjects=[],this.five.needsRender=!0}findPipeObjectWithID(i){return this.pipeObjects.find(({customID:e})=>e===i)}findPipeObjectWithTarget(i){return i?tS({data:this.data,target:i}).map(({id:e})=>this.findPipeObjectWithID(e)).filter(Be):this.pipeObjects}};const uD=i=>new gS(i),gg="data:image/png;base64,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",vg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAA8CAMAAADR2113AAABOFBMVEVVVVVdXV15eXmDg4NtbW1jY2NoaGiIiIh0dHSNjY1NTU1xcXFQUFB9fX2AgICbm5ujo6MAAACpqamfn5+2traxsbGsrKyurq6YmJjc3Ny5ubmzs7OVlZWVlZXKysre3t7X19fV1dXf39/c3Nzk5OTj4+PPz8/g4OC/v7+4uLjNzc2kpKS8vLympqbk5OTh4eHX19ecnJzs7Ozs7OzHx8fFxcXY2NjT09O0tLSwsLCtra3Gxsa9vb3r6+vp6enn5+fCwsKqqqrKysrIyMjCwsKnp6egoKCRkZHv7+/q6ura2trn5+fl5eXV1dXU1NTT09PR0dHNzc3Ly8unp6dubm64uLiZmZnp6em8vLy6urrR0dHPz8/Q0NCysrLDw8O4uLiRkZGlpaWhoaG3t7eVlZWOjo7Z2dmwsLDgK9fhAAAAaHRSTlNmZmZmZmZmZmZmZmZmZmaGhgCGhoWGhYaGrIaGhWuxsKWhyca7t7a0pqCYkIiGz8zAjM7Lrquonp2al45sycS/qZWTkoyFhGbPx8PCvr68urizlZNyOg/CpKKbmp2bgnl5c3JlPDnBh34+7vIAAAOCSURBVFjDzZhnc+JADIZFCJdKMDbFMXaA9FAulSSUdNJ7b5ee3P3/f3CSWNskXD7sYGbu3V2tXknzsOOPQDgcfre2lOz52lqpWFxcnJi4HR9fXS3MzQ0MnI6OnhwfHU5N7Q0NDQ5OTv4kTQ4ODg3t/Z46PDo+GR09HRiYKxRWx8dvJiYWF4vF0tp5NrtlvSMWwlfWNCqL7FKp+EDoG2QXCohuYCO4Rp6qI88x+RbRD8USo7PT09YVoi3dvOjt9kaCAxfmtBWGD9P01Td5y3themvq9pnmB2ybF1zkw5EnxJSMh15XcKFvw7MOVK/BUfUTUp5TABEg9Aym7rZqdbATSf9Zug6m2UtTYnkmRuvQEoUQHYKWKBQCvWVo2p7Ih4tvkWm6QLt9n33hkfAN4g/i/ByP8FRtWM43okMaVb2XRt/ax7/qOVrDV9fS/xodcJKA+CBaXS9AUbSlfYDEGaUKoQP1bCFKZXyjFA00jQa9l6KApniD+iEib0JvgaJ8bct6zn7wFocCvnpLoQ4frnGCW843itF487CXYrSieMBpb/R5ROe9QLfbm7CcqXkHbZe5I+tJHF2pCuTzONECbeKrN/FuAVzdhLzaPKanvacHDy0y7BG9qTp9PtyQ9ax2O7BUFVREC+92ZX0nL96dGMgxWrRFD0VdOU9gjkKEjoEa4ymnJkYk/L8Vj0Es1tkSxTxBt9Gm0+Z6fnWcHXm+ecv5NvZuyuFPDOJxrLFjddaOhP9G8Ti+GtveS6CbVFCE4CcfRXRUOEfyPhjECsM54xiNQjwhem49KOX7grZqmfCJKESjONCU+nBx5NBHwUGjx4qoUiLjv8hvJ4ROfC1Ker+fM4p+XLaPJBjtJ3GDLin/rSL0ahrwXpEIJCKctQIdaRLdgbvDyVwfSdCr0bAVUcbT5iDkegM/iFFXFpL3jTIM/CAd3kugc00RunDhpsXW8bkIPBlW3QBHOS8kEttbxhO8Ga9OFRM6Ev5bvebe4DJnWF2eyzJylxCu5IyXZuHbny/rJZer0F+IlWq1Wi5vbJxlMpm7XwvpdDqVmu/v708mk2NjIyPDwwcrK9fLy7tLszMzOzOzs0u7y/v7KwfDwyMjY2PJJE7Oz6dS6fTCwl0mc7a+vlEuV6uVK0SHw5eVx/LG+jqi720yoV3y/jWCmbwj2Nef2YhOEfr+PnOG6MfKJWL/Auw3zmyeIlukAAAAAElFTkSuQmCC",vS={sm:{name:10,area:8,padding:{room:[6,5],guide:[0,0],distance:[4,2]},minWidth:32,lineHeight:10,default:10},md:{name:10,area:8,padding:{room:[6,5],guide:[0,0],distance:[4,2]},minWidth:32,lineHeight:10,default:10},lg:{name:12,area:10,padding:{room:[8,4],guide:[0,3],distance:[6,3]},minWidth:32,lineHeight:16,default:12},xl:{name:16,area:12,padding:{room:[12,6],guide:[0,3],distance:[6,3]},minWidth:56,lineHeight:22,default:14},xxl:{name:16,area:12,padding:{room:[12,6],guide:[0,3],distance:[6,3]},minWidth:56,lineHeight:22,default:14}};function AS(i){Ee(i,"svelte-c02qws",".room-label-item.svelte-c02qws{position:absolute;font-size:0.625rem;transform:none;cursor:pointer;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:#fff}.room-label-item__text.svelte-c02qws{position:absolute;left:0;transform:translate(-50%, 0);display:flex;justify-content:center;align-items:center;pointer-events:all;white-space:nowrap;position:relative;box-shadow:0 0.1875rem 0.8125rem 0 #00000033;font-weight:500;border-radius:var(--border-radius);-o-border-image:var(--bg-image) var(--border-radius-num) / var(--border-radius) / 0rem stretch;border-image:var(--bg-image) var(--border-radius-num) fill / var(--border-radius) / 0rem stretch;box-sizing:border-box}.room-label-item__bar.svelte-c02qws{position:absolute;transform-origin:top;height:3rem;width:0.0625rem;background-image:linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0))}")}function Ag(i){let e,t,n,o,s,r;return{c(){var a,l,c,h;e=U("span"),t=Te(i[0]),n=re(),o=U("div"),b(e,"class","room-label-item__text svelte-c02qws"),N(e,"font-size",i[13]),N(e,"padding",i[12]),N(e,"line-height",i[11]),N(e,"--bg-image",((a=i[6])==null?void 0:a.name)>=16?`url(${gg})`:`url(${vg})`),N(e,"min-width",ht((l=i[6])==null?void 0:l.minWidth)),N(e,"--border-radius",((c=i[6])==null?void 0:c.name)>=16?ht(4):ht(2)),N(e,"--border-radius-num",((h=i[6])==null?void 0:h.name)>=16?8:4),b(o,"class","room-label-item__bar svelte-c02qws"),N(o,"top",ht(i[10]))},m(a,l){Y(a,e,l),H(e,t),i[22](e),Y(a,n,l),Y(a,o,l),i[23](o),s||(r=Se(e,"click",function(){oi(i[4])&&i[4].apply(this,arguments)}),s=!0)},p(a,l){var c,h,d,u;i=a,l&1&&Ne(t,i[0]),l&8192&&N(e,"font-size",i[13]),l&4096&&N(e,"padding",i[12]),l&2048&&N(e,"line-height",i[11]),l&64&&N(e,"--bg-image",((c=i[6])==null?void 0:c.name)>=16?`url(${gg})`:`url(${vg})`),l&64&&N(e,"min-width",ht((h=i[6])==null?void 0:h.minWidth)),l&64&&N(e,"--border-radius",((d=i[6])==null?void 0:d.name)>=16?ht(4):ht(2)),l&64&&N(e,"--border-radius-num",((u=i[6])==null?void 0:u.name)>=16?8:4),l&1024&&N(o,"top",ht(i[10]))},d(a){a&&Q(e),i[22](null),a&&Q(n),a&&Q(o),i[23](null),s=!1,r()}}}function yS(i){let e,t=!i[5]&&Ag(i);return{c(){e=U("div"),t&&t.c(),b(e,"class","room-label-item svelte-c02qws"),N(e,"z-index",i[2]),N(e,"transform",i[3]),N(e,"opacity",i[1]),N(e,"visibility",i[14])},m(n,o){Y(n,e,o),t&&t.m(e,null),i[24](e)},p(n,[o]){n[5]?t&&(t.d(1),t=null):t?t.p(n,o):(t=Ag(n),t.c(),t.m(e,null)),o&4&&N(e,"z-index",n[2]),o&8&&N(e,"transform",n[3]),o&2&&N(e,"opacity",n[1]),o&16384&&N(e,"visibility",n[14])},i:oe,o:oe,d(n){n&&Q(e),t&&t.d(),i[24](null)}}}function bS(i,e,t){let n,o,s,r,a,l,c,h,d,{content:u}=e,{five:f=void 0}=e,{visible:m=!0}=e,{opacity:g=1}=e,{zIndex:v=0}=e,{transform:A=void 0}=e,{onClick:w=()=>{}}=e,{rendererIfNeed:P=void 0}=e,{rendererData:I=void 0}=e,{fontSize:j}=e,D,T,M,O;const y=k=>{if(f.state.mode!=="Panorama"){const z=-(10+54*(1-di(k.latitude)/90)),q=z+h,X=q>=0?0:-q/-d;t(8,T.style.transform=`scaleY(${X})`,T),t(8,T.style.top=ht(q),T),t(9,M.style.top=ht(z),M)}};Zt(()=>{D&&typeof P=="function"&&(O=P(D,I)),f&&(y(f.camera.pose),f.on("cameraUpdate",y))}),Hi(()=>{O==null||O(),f==null||f.off("cameraUpdate",y)});function C(k){_e[k?"unshift":"push"](()=>{M=k,t(9,M)})}function x(k){_e[k?"unshift":"push"](()=>{T=k,t(8,T)})}function S(k){_e[k?"unshift":"push"](()=>{D=k,t(7,D)})}return i.$$set=k=>{"content"in k&&t(0,u=k.content),"five"in k&&t(15,f=k.five),"visible"in k&&t(16,m=k.visible),"opacity"in k&&t(1,g=k.opacity),"zIndex"in k&&t(2,v=k.zIndex),"transform"in k&&t(3,A=k.transform),"onClick"in k&&t(4,w=k.onClick),"rendererIfNeed"in k&&t(5,P=k.rendererIfNeed),"rendererData"in k&&t(17,I=k.rendererData),"fontSize"in k&&t(18,j=k.fontSize)},i.$$.update=()=>{var k;i.$$.dirty&65536&&t(14,n=m?"visible":"hidden"),i.$$.dirty&262144&&t(6,o=vS[j]),i.$$.dirty&64&&t(13,s=ht(o==null?void 0:o.name)),i.$$.dirty&64&&t(20,r=(k=o==null?void 0:o.padding)==null?void 0:k.room),i.$$.dirty&1048576&&t(12,a=`${ht(r[1])} ${ht(r[0])}`),i.$$.dirty&64&&t(21,l=o==null?void 0:o.lineHeight),i.$$.dirty&2097152&&t(11,c=ht(l)),i.$$.dirty&3145728&&t(19,h=l+r[1]*2),i.$$.dirty&524288&&t(10,d=-(64-h))},[u,g,v,A,w,P,o,D,T,M,d,c,a,s,n,f,m,I,j,h,r,l,C,x,S]}class M1 extends ye{constructor(e){super(),Ae(this,e,bS,yS,ve,{content:0,five:15,visible:16,opacity:1,zIndex:2,transform:3,onClick:4,rendererIfNeed:5,rendererData:17,fontSize:18},AS)}}class wS extends r0{constructor(e){super(),p(this,"areaMakerItem"),this.areaMakerItem=e}raycast(e,t){this.areaMakerItem.makerObject.raycast(e,t)}}class xS{constructor(e,t){p(this,"id"),p(this,"name",""),p(this,"makerObject"),p(this,"outline"),p(this,"bottomY"),p(this,"opacity"),p(this,"height"),p(this,"floorIndex"),p(this,"shape"),p(this,"mounted",!1),p(this,"checkMsg",{checkVisibleMsg:"",checkTagVisibleMsg:""}),p(this,"modelGroup"),p(this,"visible",!0),p(this,"tagApp"),p(this,"tagVisible",null),p(this,"tagPosition",new R),p(this,"tagNDCPosition",new R),p(this,"tagTransform",{left:0,top:0}),p(this,"tagZIndex",0),p(this,"hooks",new Mt),p(this,"itemRenderer"),p(this,"data"),p(this,"plugin"),p(this,"opacityAnime"),p(this,"isInContainerResizeAnimation",!1),p(this,"containerResizeTimeoutID",null),p(this,"resizeObserver"),p(this,"fontSizeManager",ca()),p(this,"currentFontSize",_s()),p(this,"unsubscribeFontSize",null),p(this,"doOpacityAnime",u=>{var f;(f=this.opacityAnime)==null||f.dispose();const m=u.duration,[g,v]=u.makerObjectOpacity,[A,w]=u.outlineOpacity;if(m===0){this.makerObject.material.opacity=v,this.outline.material.opacity=w;return}return new Promise(P=>{this.opacityAnime=new Yo({makerObjectOpacity:g,outlineOpacity:A}).to({makerObjectOpacity:v,outlineOpacity:w}).onUpdate(({makerObjectOpacity:I,outlineOpacity:j})=>{this.makerObject.material.opacity=I,this.outline.material.opacity=j,this.plugin.five.needsRender=!0}).onComplete(()=>P(!0)).onDispose(()=>{this.makerObject.material.opacity=v,this.outline.material.opacity=w,this.plugin.five.needsRender=!0,P(!1)}).play()})}),p(this,"onPluginConfigChange",u=>{this.makerObject.material.depthTest=u.config.modelDepthTest,this.outline.material.depthTest=u.config.modelDepthTest,this.plugin.five.needsRender=!0}),p(this,"onPluginStateChange",()=>{this.updateVisible(),this.updateTagVisible()}),p(this,"updateVisible",()=>{var u;const{result:f,msg:m}=this.checkVisible();if(this.checkMsg.checkVisibleMsg=m,this.visible===f)return;this.visible=f;const g=(u=this.data.object_data.visible)!=null?u:!0;this.modelGroup.visible=f&&g,this.plugin.five.needsRender=!0}),p(this,"checkVisible",()=>{if(!this.plugin.state.visible)return{result:!1,msg:"插件不可见"};const u=this.plugin.fiveUtil.model.shownFloor;return u===null||u===this.floorIndex?{result:!0,msg:""}:{result:!1,msg:`模型高亮楼层不符合展示条件, 当前高亮楼层为：${u}`}}),p(this,"updateTag",()=>{this.tagApp&&(this.updateTagNDCPosition(),this.updateTagDomTransform(),this.updateTagVisible())}),p(this,"updateTagNDCPosition",()=>{const u=this.tagPosition.clone().project(this.plugin.five.camera);this.tagNDCPosition.copy(u)}),p(this,"updateTagDomTransform",()=>{var u;const f=this.tagNDCPosition,m=Math.round((f.x+1)/2*this.plugin.tagDomContainer.clientWidth),g=Math.round((-f.y+1)/2*this.plugin.tagDomContainer.clientHeight);this.tagTransform.left===m&&this.tagTransform.top===g||(this.tagTransform={left:m,top:g},(u=this.tagApp)==null||u.$set({transform:`translate(${m}px, ${g}px)`}))}),p(this,"updateTagVisible",()=>{var u;const{result:f,msg:m}=this.checkTagVisible();this.checkMsg.checkTagVisibleMsg=m,this.tagVisible!==f&&(this.tagVisible=f,this.tagApp&&(this.tagVisible?this.hooks.emit("tagShow"):this.hooks.emit("tagHide"),(u=this.tagApp)==null||u.$set({visible:f})))}),p(this,"checkTagVisible",()=>{if(!this.visible)return{result:!1,msg:"标注整体不可见"};if(this.isInContainerResizeAnimation)return{result:!1,msg:"处于容器 resize 动画中"};const u=this.plugin.five,f=u.camera.position.clone();kn.set(f.clone(),this.tagPosition.clone().sub(f).normalize());const[m]=this.plugin.fiveUtil.model.intersectRaycaster(kn),g=this.tagPosition.distanceTo(u.camera.position);if(m&&m.distance+.1<g)return{result:!1,msg:"标注标签被 Five 模型遮挡"};const v=this.tagNDCPosition;return Math.abs(v.x)>1.2||Math.abs(v.y)>1.2||Math.abs(v.z)>1?{result:!1,msg:"标注标签不在屏幕内"}:{result:!0,msg:""}}),p(this,"onFiveCameraUpdate",()=>{this.tagApp&&this.visible&&(this.updateTagNDCPosition(),this.updateTagDomTransform(),this.updateTagVisible())}),p(this,"onContainerResize",()=>{this.isInContainerResizeAnimation===!1&&(this.isInContainerResizeAnimation=!0,this.updateTag());const u=()=>{this.isInContainerResizeAnimation=!1,this.containerResizeTimeoutID=null,this.updateTag()};this.containerResizeTimeoutID&&clearTimeout(this.containerResizeTimeoutID),this.containerResizeTimeoutID=setTimeout(u,100)}),p(this,"updateTagFontSize",()=>{this.tagApp&&this.tagApp.$set({fontSize:this.currentFontSize})});var n,o,s,r;const a=t.object_data,l=a.bottom_y,c=a.height,h=new Ye((n=a.color)!=null?n:"#FFFFFF"),d=(o=a.opacity)!=null?o:.4;this.data=t,this.id=t.id,this.name=(s=t.name)!=null?s:"",this.plugin=e,this.height=c,this.bottomY=l,this.opacity=d,this.shape=new Hg().fromJSON(a.shape),this.floorIndex=t.floor_index,this.makerObject=new We(yg(this.shape,c),CS(h,d)),Dc(this.makerObject,l),this.makerObject.material.depthTest=this.plugin.config.modelDepthTest,this.outline=new a0(new Ga(this.makerObject.geometry),new $r({color:h,transparent:!0})),Dc(this.outline,l),this.outline.material.depthTest=this.plugin.config.modelDepthTest,this.setHeight(c),this.modelGroup=new wS(this),this.modelGroup.visible=(r=a.visible)!=null?r:!0}mount(){if(this.mounted)return;this.mounted=!0,this.updateVisible(),this.makerObject.material.depthTest=this.plugin.config.modelDepthTest,this.outline.material.depthTest=this.plugin.config.modelDepthTest,this.modelGroup.add(this.makerObject,this.outline);const e=!!this.name,t=this.plugin.tagDomContainer;e&&(this.tagApp=new M1({target:t,props:{fontSize:this.currentFontSize,rendererData:this.data,content:this.name,visible:this.tagVisible,rendererIfNeed:this.itemRenderer,transform:`translate(${this.tagTransform.left}px, ${this.tagTransform.top}px)`,onClick:n=>this.hooks.emit("tagClick",{target:this,nativeEvent:n})}}),this.updateTag()),this.plugin.five.needsRender=!0,this.plugin.hooks.on("stateChange",this.onPluginStateChange),this.plugin.hooks.on("configChange",this.onPluginConfigChange),this.plugin.five.on("modeChange",this.updateVisible),this.plugin.five.on("modelShownFloorChange",this.updateVisible),this.plugin.five.on("cameraUpdate",this.onFiveCameraUpdate),this.resizeObserver=Ua(this.onContainerResize,t),this.resizeObserver.observe(),typeof this.fontSizeManager=="object"&&"subscribe"in this.fontSizeManager&&(this.unsubscribeFontSize=this.fontSizeManager.subscribe(n=>{this.currentFontSize=n,this.updateTagFontSize()}))}unmount(){var e,t,n;this.mounted&&(this.mounted=!1,this.modelGroup.remove(...this.modelGroup.children),(e=this.tagApp)==null||e.$destroy(),this.tagApp=null,this.plugin.hooks.off("stateChange",this.onPluginStateChange),this.plugin.hooks.off("configChange",this.onPluginConfigChange),this.plugin.five.off("modeChange",this.updateVisible),this.plugin.five.off("modelShownFloorChange",this.updateVisible),this.plugin.five.off("cameraUpdate",this.onFiveCameraUpdate),(t=this.resizeObserver)==null||t.unobserve(),(n=this.unsubscribeFontSize)==null||n.call(this))}setOpacity(e){var t;this.opacity=e,(t=this.opacityAnime)==null||t.dispose(),this.makerObject.material.opacity=e,this.plugin.five.needsRender=!0}setColor(e){const t=new Ye(e);this.makerObject.material.color=t,this.outline.material.color=t,this.plugin.five.needsRender=!0}setHeight(e){if(e<=0)throw new Error("高度必须大于 0");this.height=e,this.makerObject.geometry=yg(this.shape,e),this.outline.geometry=new Ga(this.makerObject.geometry);const t=this.shape.extractPoints(10).shape.slice(0,-1),n=Zx(t),o=new R(n.x,n.y,e);Dc(o,this.bottomY),this.tagPosition.copy(o),this.updateTag(),this.plugin.five.needsRender=!0}setTagZIndex(e){var t;this.tagZIndex!==e&&((t=this.tagApp)==null||t.$set({zIndex:e}))}}function yg(i,e){return new vA(i,{depth:e,bevelEnabled:!1})}function CS(i,e){return new Ze({color:i,opacity:e,transparent:!0})}function Dc(i,e){const t=new Xe,n=new Xe().makeRotationX(Math.PI/2),o=new Xe().makeTranslation(0,0,-e),s=new Xe().makeScale(1,1,-1);t.multiply(n),t.multiply(o),t.multiply(s),i.applyMatrix4(t)}let PS=class extends Co{constructor(i,e){super(i),p(this,"state"),p(this,"itemMap"),p(this,"itemRenderer"),p(this,"modelGroup"),p(this,"data"),p(this,"tagDomContainer"),p(this,"checkMsg",{childrenMountedState:""}),p(this,"isInFiveChangeModeAnime",!1),p(this,"childrenMountedState",!1),p(this,"_config"),p(this,"_disposed",!1),p(this,"dispose",()=>{this.five.scene.remove(this.modelGroup)}),p(this,"onFiveInitAnimationWillStart",()=>{this.isInFiveChangeModeAnime=!0,this.updateChildrenMountedState()}),p(this,"onFiveInitAnimationEnded",()=>{this.isInFiveChangeModeAnime=!1,this.updateChildrenMountedState()}),p(this,"onFiveCameraUpdate",()=>{const o=this.five.camera;[...this.itemMap.values()].sort((s,r)=>{const a=s.tagPosition.distanceTo(o.position);return r.tagPosition.distanceTo(o.position)-a}).forEach((s,r)=>{var a;(a=this.getMaskItemByID(s.id))==null||a.setTagZIndex(r*10)})}),p(this,"onFiveModeChange",()=>{this.updateChildrenMountedState()}),p(this,"onMakerTagClick",o=>{this.hooks.emit("wantsTap",{target:o.target,intersectObjects:[]})}),p(this,"onWantsFiveTapGesture",o=>{const s=Array.from(this.itemMap.values()).filter(l=>l.mounted&&l.visible).map(l=>({makerItem:l,intersects:l.modelGroup.getRaycastIntersects(o)})).filter(({intersects:l})=>l.length>0);if(s.length===0)return;const r=s.reduce((l,c)=>{const h=l.intersects[0].distance,d=c.intersects[0].distance;return h<d?l:c}),a=this.fiveUtil.model.intersectRaycaster(o)[0];if(!(this.config.modelDepthTest&&a&&a.distance<r.intersects[0].distance)&&this.hooks.emit("wantsTap",{target:r.makerItem,intersectObjects:r.intersects}))return!1}),this.five=i,this.tagDomContainer=document.createElement("div"),this.tagDomContainer.style.position="absolute",this.tagDomContainer.style.top="0",this.tagDomContainer.style.left="0",this.tagDomContainer.style.width="100%",this.tagDomContainer.style.height="100%",this.tagDomContainer.style.pointerEvents="none";const t={enabled:!0,visible:!0};this.state=Object.assign(t,e==null?void 0:e.initialState);const n=W({modelDepthTest:!0},e==null?void 0:e.config);this._config=n,this.modelGroup=new Et,this.modelGroup.name="ModelMakerPluginGroup",this.itemMap=new Map,this.state.enabled&&this._enable({userAction:!1})}get config(){return W({},this._config)}get disposed(){return this._disposed}load(i){return ee(this,null,function*(){const e=this.data;this.data=this.formatData(i),this.hooks.emit("dataChange",this.data,e),this.modelGroup.remove(...this.modelGroup.children),this.itemMap.forEach(t=>t.unmount()),this.itemMap.clear(),this.childrenMountedState=!1,this.checkMsg.childrenMountedState="",this.data.list.forEach(t=>{const n=new xS(this,t);n.itemRenderer=this.itemRenderer,this.modelGroup.add(n.modelGroup),this.itemMap.set(t.id,n),n.hooks.on("tagClick",this.onMakerTagClick)}),this.updateChildrenMountedState()})}appendTo(i){i.appendChild(this.tagDomContainer)}enable(i={}){var e;if(this.state.enabled)return;const t=(e=i.userAction)!=null?e:!0;this.updateState({enabled:!0},t),this._enable({userAction:t})}disable(i={}){var e;if(this.state.enabled===!1)return;const t=(e=i.userAction)!=null?e:!0;this.updateState({enabled:!1},t),this._disable({userAction:t})}show(i){return ee(this,null,function*(){if(this.state.visible)return Promise.resolve();if(this.disposed)return Promise.reject(new Error("不能在已销毁的插件上调用 show"));const e=W({userAction:!0},i);this.updateState({visible:!0},e.userAction),yield this._show(e)})}hide(i){return ee(this,null,function*(){if(this.state.visible===!1)return;const e=W({userAction:!0},i);this.updateState({visible:!1},e.userAction),yield this._hide(e)})}setState(i,e={}){const t=this.state;if(Yi(i,t,{deep:!0}))return;const n=e.userAction!==void 0?e.userAction:!0;if(this.updateState(i,n),i.enabled!==void 0&&t.enabled!==i.enabled&&(i.enabled?this._enable({userAction:n}):this._disable({userAction:n})),i.visible!==void 0&&t.visible!==i.visible){const o={userAction:n,anime:{duration:500}};i.visible?this._show(o):this._hide(o)}}updateConfig(i,e={}){var t;const n=this.config,o=W(W({},n),i);this._config=o,this.hooks.emit("configChange",{prevConfig:n,config:o,userAction:(t=e.userAction)!=null?t:!0})}getMaskItemByID(i){return this.itemMap.get(i)}formatData(i){function e(t){return t.list.length===0?!0:!("shape"in t.list[0].object_data)}return e(i)?{list:i.list.filter(t=>t.object_data.points.length>=3).map(t=>{const n=new Hg,o=t.object_data.points[0];return n.moveTo(o[0],o[2]),t.object_data.points.slice(1).forEach(s=>n.lineTo(s[0],s[2])),n.lineTo(o[0],o[2]),pe(W({},t),{floor_index:t.object_data.floorIndex,object_data:pe(W({},t.object_data),{bottom_y:o[1]+t.object_data.fixedY,shape:n.toJSON(),height:t.object_data.height+t.object_data.fixedHeight})})})}:i}checkChildrenMountedState(){const i=this.state,e=this.five;if(!i.enabled)return{result:!1,msg:"插件不可用"};const t=e.getCurrentState().mode;return t==="Panorama"?{result:!1,msg:`Five 模态不符合条件, 当前模态为：${t}`}:this.isInFiveChangeModeAnime?{result:!1,msg:"切换模态动画中不展示"}:{result:!0,msg:""}}updateChildrenMountedState(){const{result:i,msg:e}=this.checkChildrenMountedState();this.checkMsg.childrenMountedState=e,i!==this.childrenMountedState&&(this.childrenMountedState=i,this.itemMap.forEach(t=>{this.childrenMountedState?t.mount():t.unmount()}))}updateState(i,e){const t=this.state;this.state=W(W({},this.state),i),this.hooks.emit("stateChange",{state:this.state,prevState:t,userAction:e})}_enable(i){this.hooks.emit("enable",{userAction:i.userAction}),this.five.scene.add(this.modelGroup),this.updateChildrenMountedState(),this.five.needsRender=!0,this.five.on("wantsTapGesture",this.onWantsFiveTapGesture),this.five.on("initAnimationWillStart",this.onFiveInitAnimationWillStart),this.five.on("initAnimationEnded",this.onFiveInitAnimationEnded),this.five.on("modeChange",this.onFiveModeChange),this.five.on("cameraUpdate",this.onFiveCameraUpdate)}_disable(i){this.hooks.emit("disable",{userAction:i.userAction}),this.five.scene.remove(this.modelGroup),this.updateChildrenMountedState(),this.five.needsRender=!0,this.five.off("wantsTapGesture",this.onWantsFiveTapGesture),this.five.off("initAnimationWillStart",this.onFiveInitAnimationWillStart),this.five.off("initAnimationEnded",this.onFiveInitAnimationEnded),this.five.off("modeChange",this.onFiveModeChange),this.five.off("cameraUpdate",this.onFiveCameraUpdate)}_show(i){return ee(this,null,function*(){this.hooks.emit("show",i),this.five.needsRender=!0})}_hide(i){return ee(this,null,function*(){this.hooks.emit("hide",i),this.five.needsRender=!0})}};const pD=(i,e)=>new PS(i,e);class ES extends xo{constructor(e,t){super(e),p(this,"state"),p(this,"checkMsg",{meshHidden:"",pluginDisabled:"",pluginHidden:""}),p(this,"group",new Et),p(this,"mesh"),p(this,"textureLoadingPromise"),p(this,"opacityAnimeTween"),p(this,"isInPanoMoveAnime",!1),p(this,"lastArrivedPanoIndex",-1),p(this,"_config"),p(this,"_disposed",!1),p(this,"dispose",()=>{this.five.scene.remove(this.group),this.group.remove(...this.group.children),this.five.off("dispose",this.dispose),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("panoWillArrive",this.onFivePanoWillArrive)}),p(this,"checkMeshVisible",()=>this.state.visible?this.config.imageURL===""?{result:!1,msg:"图片不存在"}:this.mesh.material.map?this.five.work?this.five.getCurrentState().mode!=="Panorama"?{result:!1,msg:"非全景模式"}:this.isInPanoMoveAnime?{result:!1,msg:"处于走点动画中"}:{result:!0,msg:""}:{result:!1,msg:"Five 数据未加载"}:{result:!1,msg:"指南针贴图未加载"}:{result:!1,msg:"插件隐藏"}),p(this,"onTextureLoaded",s=>{this.mesh.material.map=s,this.mesh.material.needsUpdate=!0,this.updateMeshVisible()}),p(this,"onFiveWillLoad",()=>{this.lastArrivedPanoIndex=-1,this.updateMeshVisible()}),p(this,"onFivePanoWillArrive",s=>{var r;s!==this.five.getCurrentState().panoIndex&&(this.isInPanoMoveAnime=!0,(r=this.opacityAnimeTween)==null||r.dispose(),this.updateMeshVisible())}),p(this,"onFivePanoArrived",s=>{s!==this.lastArrivedPanoIndex&&(this.lastArrivedPanoIndex=s,this.isInPanoMoveAnime=!1,this.updateMeshPosition(s),this.updateMeshVisible(),this.five.needsRender=!0)}),p(this,"onMeshVisibleChange",s=>{var r;if((r=this.opacityAnimeTween)==null||r.dispose(),!s){this.mesh.visible=!1;return}this.mesh.material.setValues({opacity:0}),this.mesh.visible=!0,this.opacityAnimeTween=Fr(1e3).onUpdate(({progress:a})=>{var l;(l=this.mesh)==null||l.material.setValues({opacity:a}),this.five.needsRender=!0}).play()}),p(this,"onFiveModeChange",()=>{this.updateMeshVisible()}),this.five=e;const n={enabled:!0,visible:!0};this.state=Object.assign(n,t==null?void 0:t.initialState);const o=W({width:1.4,yOffset:.01,yRotate:0,imageURL:Zh},t==null?void 0:t.config);this._config=o,this.group.name="current-pano-image-plugin-group",this.mesh=new We(new Lc(this.config.width,this.config.width),new Ze({transparent:!0,opacity:0,depthTest:!1})),this.mesh.visible=!1,this.group.add(this.mesh),this.updateMeshQuaternion(this.config.yRotate),this.state.visible||(this.checkMsg.pluginHidden="初始值设置为隐藏"),this.state.enabled||(this.checkMsg.pluginDisabled="初始值设置为禁用"),this.state.enabled&&this._enable({userAction:!1}),this.five.once("dispose",this.dispose)}get config(){return W({},this._config)}get disposed(){return this._disposed}enable(e={}){var t;if(this.state.enabled)return;const n=(t=e.userAction)!=null?t:!0;this.updateState({enabled:!0},n),this.checkMsg.pluginDisabled="",this._enable({userAction:n})}disable(e={}){var t;if(this.state.enabled===!1)return;const n=(t=e.userAction)!=null?t:!0;this.updateState({enabled:!1},n),this.checkMsg.pluginDisabled="调用 disable 禁用",this._disable({userAction:n})}show(e){return ee(this,null,function*(){if(this.state.visible)return Promise.resolve();if(this.disposed)return Promise.reject(new Error("不能在已销毁的插件上调用 show"));const t=W({userAction:!0},e);this.updateState({visible:!0},t.userAction),this.checkMsg.pluginHidden="",this._show(t)})}hide(e){return ee(this,null,function*(){if(this.state.visible===!1)return;const t=W({userAction:!0},e);this.updateState({visible:!1},t.userAction),this.checkMsg.pluginDisabled="调用 hide 隐藏",this._hide(t)})}setState(e,t={}){const n=this.state;if(Yi(e,n,{deep:!0}))return;const o=t.userAction!==void 0?t.userAction:!0;if(this.updateState(e,o),e.enabled!==void 0&&n.enabled!==e.enabled&&(e.enabled?this.checkMsg.pluginDisabled="":this.checkMsg.pluginDisabled="调用 setState 禁用",e.enabled?this._enable({userAction:o}):this._disable({userAction:o})),e.visible!==void 0&&n.visible!==e.visible){const s={userAction:o,anime:{duration:500}};e.visible?this.checkMsg.pluginHidden="":this.checkMsg.pluginHidden="调用 setState 隐藏",e.visible?this._show(s):this._hide(s)}}updateConfig(e,t={}){var n;const o=this.config,s=W(W({},o),e);this._config=s,o.imageURL!==s.imageURL&&this.reloadTexture(s.imageURL),o.yOffset!==s.yOffset&&this.updateMeshPosition(this.five.getCurrentState().panoIndex),o.yRotate!==s.yRotate&&this.updateMeshQuaternion(s.yRotate),o.width!==s.width&&(this.mesh.geometry=new Lc(s.width,s.width)),this.hooks.emit("configChange",{prevConfig:o,config:s,userAction:(n=t.userAction)!=null?n:!0})}__whyCantSeeMesh(){if(this.disposed)return"插件已销毁";if(this.checkMsg.pluginDisabled)return this.checkMsg.pluginDisabled;if(this.checkMsg.pluginHidden)return this.checkMsg.pluginHidden;if(this.checkMsg.meshHidden)return this.checkMsg.meshHidden}updateState(e,t){const n=this.state;this.state=W(W({},this.state),e),this.hooks.emit("stateChange",{state:this.state,prevState:n,userAction:t})}updateMeshVisible(){const{result:e,msg:t}=this.checkMeshVisible();this.checkMsg.meshHidden=t,e!==this.mesh.visible&&this.onMeshVisibleChange(e)}updateMeshPosition(e){const t=this.workUtil.getObserverStandingPosition(e);if(!t){console.warn("CurrentPanoImagePlugin: 无法获取到当前点位的 standingPosition");return}const n=t.clone().setY(t.y+this.config.yOffset);n&&this.mesh.position.copy(n)}reloadTexture(e){return ee(this,null,function*(){if(this.mesh.material.map=null,e!==""){const t=Wo(e);this.textureLoadingPromise=t;const n=yield t;n.minFilter=zi,this.textureLoadingPromise===t&&(this.onTextureLoaded(n),this.textureLoadingPromise=null)}this.updateMeshVisible()})}updateMeshQuaternion(e){const t=new tt;t.multiplyQuaternions(new tt().setFromAxisAngle(new R(1,0,0),-Math.PI/2),new tt().setFromAxisAngle(new R(0,0,1),e)),this.mesh.quaternion.copy(t)}_enable(e){this.hooks.emit("enable",{userAction:e.userAction}),this.config.imageURL&&!this.mesh.material.map&&!this.textureLoadingPromise&&this.reloadTexture(this.config.imageURL),this.five.scene.add(this.group),this.five.needsRender=!0,this.five.work&&this.onFiveWillLoad(),this.five.getCurrentState().mode==="Panorama"&&(this.onFiveModeChange(),this.onFivePanoArrived(this.five.getCurrentState().panoIndex)),this.five.on("willLoad",this.onFiveWillLoad),this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("panoWillArrive",this.onFivePanoWillArrive),this.five.on("modeChange",this.onFiveModeChange)}_disable(e){this.hooks.emit("disable",{userAction:e.userAction}),this.five.scene.remove(this.group),this.five.needsRender=!0,this.five.off("willLoad",this.onFiveWillLoad),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("panoWillArrive",this.onFivePanoWillArrive),this.five.off("modeChange",this.onFiveModeChange)}_show(e){this.hooks.emit("show",e),this.updateMeshVisible(),this.five.needsRender=!0}_hide(e){this.hooks.emit("hide",e),this.updateMeshVisible(),this.five.needsRender=!0}}const fD=(i,e)=>new ES(i,e);class IS{constructor(){p(this,"five"),p(this,"config"),p(this,"_cursor"),p(this,"_pointSelector"),p(this,"_fiveDomEvents"),p(this,"_object3DHelper"),p(this,"inited",!1),p(this,"init",(e,t)=>{this.inited=!0,this.five=e,this.config=t,this._cursor=void 0,this._pointSelector=void 0,this._fiveDomEvents=void 0,this._object3DHelper=void 0})}get cursor(){if(!this.inited)throw new Error("Global not inited");return this._cursor?this._cursor:(this._cursor=new Nv(this.five.getElement()),this._cursor)}get pointSelector(){var e,t;if(!this.inited)throw new Error("Global not inited");if(this._pointSelector)return this._pointSelector;const n=(e=this.config)==null?void 0:e.magnifier;let o=n===null||n===!1?{magnifier:null}:{magnifierParams:n};return(t=this.config)!=null&&t.hideCursorCircle&&(o=pe(W({},o),{pointHelper:null})),this._pointSelector=new Pl(this.five,{mode:"cursor",helper:o}),this._pointSelector}get fiveDomEvents(){if(!this.inited)throw new Error("Global not inited");return this._fiveDomEvents?this._fiveDomEvents:(this._fiveDomEvents=new Rs(this.five,{noEmitWhenNotInScene:!0}),this._fiveDomEvents)}get object3DHelper(){if(!this.inited)throw new Error("Global not inited");return this._object3DHelper?this._object3DHelper:(this._object3DHelper=new E1(this.five),this._object3DHelper)}}const S1=new IS;window.globalModules=S1;function D1(i,e){return i?e(i)?i:i.parent?D1(i.parent,e):null:null}function MS(i){const e=[...i];if(i.length<3)return i;const t=i[i.length-1],n=i[0];return t.equals(n)||e.push(n),e}class k1 extends mi{constructor(e){super(),p(this,"name","PolylineBaseMesh"),p(this,"lines",[]),p(this,"withDots"),p(this,"paramsStyle");const t=e,{withDots:n,points:o}=t,s=es(t,["withDots","points"]);this.withDots=n??!0,o&&this.setPoints(o),s&&this.setStyle(s)}get style(){var e;return{lineColor:this.lineColor,lineWidth:this.lineWidth,opacity:this.opacity,dashed:this.dashed,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode,lengthEnable:(e=this.paramsStyle)==null?void 0:e.lengthEnable}}get opacity(){var e,t,n;return(n=(e=this.lines[0])==null?void 0:e.lineOpacity)!=null?n:(t=this.paramsStyle)==null?void 0:t.lineOpacity}get lineColor(){var e,t,n;return(n=(e=this.lines[0])==null?void 0:e.color)!=null?n:(t=this.paramsStyle)!=null&&t.lineColor?new Ye(this.paramsStyle.lineColor):void 0}get lineWidth(){var e,t,n;return(n=(e=this.lines[0])==null?void 0:e.lineWidth)!=null?n:(t=this.paramsStyle)==null?void 0:t.lineWidth}get dashed(){var e,t,n;return(n=(e=this.lines[0])==null?void 0:e.dashed)!=null?n:(t=this.paramsStyle)==null?void 0:t.dashed}get occlusionVisibility(){var e,t,n;return(n=(e=this.lines[0])==null?void 0:e.occlusionVisibility)!=null?n:(t=this.paramsStyle)==null?void 0:t.occlusionVisibility}get occlusionMode(){var e,t,n;return(n=(e=this.lines[0])==null?void 0:e.occlusionMode)!=null?n:(t=this.paramsStyle)==null?void 0:t.occlusionMode}get points(){var e,t,n;return this.lines.map(o=>o.points[0]).concat((n=(t=this.lines)==null?void 0:t[((e=this.lines)==null?void 0:e.length)-1])==null?void 0:n.points[1]).filter(Boolean)}setPoints(e,t={closed:!1}){let n=e.map(Ue);t.closed&&(n=MS(n)),n.forEach((o,s)=>{var r;const a=n[s+1];if(s!==0&&a===void 0)return;const l=(r=this.lines[s])!=null?r:(()=>{const c=new Yr(pe(W({},this.style),{pointVisibility:this.withDots?{startPoint:s===0,endPoint:!0}:!1}));return this.lines[s]=c,this.add(c),c})();l.setStyle(this.style),l.setPoints([o,a])}),n.length===0?(this.lines.forEach(o=>o.removeFromParent()),this.lines=[]):n.length===1||this.lines.length>n.length-1&&this.lines.splice(n.length-1).forEach(o=>o.removeFromParent())}setStyle(e){this.paramsStyle=W(W({},this.paramsStyle),e),this.lines.forEach(t=>t.setStyle(this.paramsStyle))}highlight(){this.lines.forEach(e=>e.highlight())}unhighlight(){this.lines.forEach(e=>e.unhighlight())}}class $o extends k1{constructor(...e){super(pe(W({},e[0]),{withDots:!1})),p(this,"name","PolylineMesh")}}class co extends k1{constructor(...e){super(pe(W({},e[0]),{withDots:!0})),p(this,"name","PolylineWithDotsMesh")}}const kc=new Map;class Ji extends mi{constructor(e,t){var n,o;super(),p(this,"name","Sculpt"),p(this,"isSculptObject",!0),p(this,"draggable"),p(this,"selected"),p(this,"config"),p(this,"on",(s,r,a)=>bt.modules.fiveDomEvents.addEventListener(this,s,r,a)),p(this,"off",(...s)=>bt.modules.fiveDomEvents.removeEventListener(this,...s)),p(this,"applyObjectMatrixWorld",(s,r)=>{const a=r??this;return a.updateMatrixWorld(),Hr(a,s)}),p(this,"applyObjectReversalMatrixWorld",(s,r)=>{const a=r??this;return a.updateMatrixWorld(),iy(a,s)}),e!=null&&e.id&&(this.uuid=e.id),this.config=W({defaultAction:!0,occlusionVisibility:!0,occlusionMode:"translucence"},t),e&&(Be((n=this.config)==null?void 0:n.occlusionMode)&&(e.style=pe(W({},e.style),{occlusionMode:this.config.occlusionMode})),Be((o=this.config)==null?void 0:o.occlusionVisibility)&&(e.style=pe(W({},e.style),{occlusionVisibility:this.config.occlusionVisibility}))),mt("esc",()=>{this.stopCreating()}),this.config.defaultAction&&(mt("backspace, delete",()=>{this.selected&&this.delete()}),this.on("click",()=>{var s;this.editing||(this.select({only:!0}),this.editor.enable(),(s=this.parent)==null||s.children.forEach(r=>{var a;r instanceof Ji&&r!==this&&((a=r._editor)==null||a.disable())}))}),mt("esc",()=>{this.selected&&this.unselect()}))}get editing(){return this.pointSelector.enabled}get baseData(){return{id:this.uuid,type:this.type}}get pointSelector(){return bt.modules.pointSelector}undo(){throw new Error("Method not implemented.")}redo(){throw new Error("Method not implemented.")}canUndo(){throw new Error("Method not implemented.")}canRedo(){throw new Error("Method not implemented.")}stopCreating(){bt.modules.pointSelector.disable()}delete(){var e;this.stopCreating(),this.removeFromParent(),this.off(),(e=this.editor)==null||e.disable()}select(e={only:!1}){if(this.selected)return;this.selected=!0,this.highlight(),kc.has(this.parent.uuid)||kc.set(this.parent.uuid,[]);const t=kc.get(this.parent.uuid);t.push(this),e.only&&(t==null||t.forEach(n=>{n!==this&&n.unselect()}))}unselect(){var e;this.selected&&(this.selected=!1,this.unhighlight(),(e=this._editor)==null||e.disable())}highlight(){}unhighlight(){}showDeleteButton(e,t){bt.modules.cursor.showDeleteButton({clientX:e,clientY:t,container:document.body,onClick:()=>this.delete()}),bt.modules.five.once("cameraUpdate",()=>{bt.modules.cursor.removeDeleteButton()})}}class Xl extends mi{constructor(e){super(),p(this,"hooks",new Mt),p(this,"originObject"),this.originObject=e}enable(){this.originObject.add(this)}disable(){this.originObject.remove(this)}}class fa extends Xl{constructor(e,t){super(e),p(this,"objectHelperConfig"),p(this,"onObjectUpdate",()=>{this.hooks.emit("objectUpdate")}),this.objectHelperConfig=t}get helper(){var e;return(e=bt.modules.object3DHelper.getObject3DHelper(this.originObject))==null?void 0:e.helper}enable(){super.enable();const e=typeof this.objectHelperConfig=="function"?this.objectHelperConfig():this.objectHelperConfig;bt.modules.object3DHelper.addObject3DHelper(this.originObject,W({positionFrom:"boundingBox"},e));const t=bt.modules.object3DHelper.getObject3DHelper(this.originObject).helper;t.hooks.on("move",this.onObjectUpdate),t.hooks.on("rotate",this.onObjectUpdate),t.hooks.on("scale",this.onObjectUpdate)}disable(){var e,t,n;super.disable(),(e=this.helper)==null||e.hooks.off("move",this.onObjectUpdate),(t=this.helper)==null||t.hooks.off("rotate",this.onObjectUpdate),(n=this.helper)==null||n.hooks.off("scale",this.onObjectUpdate),bt.modules.object3DHelper.removeObject3DHelper(this.originObject)}initialHelperMatrix(){var e;(e=this.helper)==null||e.initialHelperMatrix()}}class Fd extends Xl{constructor(e){super(e),p(this,"draggingPoints",[]),p(this,"onDragstart",t=>{const n=t.target;this.draggingPoints=this.pointMeshes.filter(o=>o.position.equals(n.position))}),p(this,"onDragend",t=>{this.draggingPoints=[]})}get pointMeshes(){return this.children.filter(e=>e instanceof Rn)}get pointHandles(){return this.children}enable(){super.enable(),this.points.filter(Be).forEach(e=>{const t=new Rn;t.visible=!1,t.position.copy(e),t.draggable=!0,bt.modules.fiveDomEvents.addEventListener(t,"drag",this.onDrag),bt.modules.fiveDomEvents.addEventListener(t,"dragstart",this.onDragstart),bt.modules.fiveDomEvents.addEventListener(t,"dragend",this.onDragend),this.add(t)})}disable(){super.disable(),this.removeChildren()}}class SS extends Fd{constructor(e){super(e),p(this,"onDrag",t=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const n=sa(bt.modules.five,t.raycaster);this.draggingPoints.forEach(o=>o.position.copy(n.point)),this.originObject.lineMesh.setPoints(this.pointMeshes.map(o=>o.position))})}get points(){return this.originObject.lineMesh.points}}class DS extends Fd{constructor(e){super(e),p(this,"onDrag",t=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const n=sa(bt.modules.five,t.raycaster);this.draggingPoints.forEach(o=>o.position.copy(n.point)),this.originObject.polyLineMesh.setPoints(this.pointMeshes.map(o=>o.position))})}get points(){return this.originObject.polyLineMesh.points}}class bg extends Ji{constructor(e,t){super(e,t),p(this,"type","Polyline"),p(this,"polyLineMesh"),p(this,"_editor"),p(this,"creatingObject"),e&&(this.polyLineMesh=new co(W(W({},e.style),e)),this.add(this.polyLineMesh))}get editor(){return this._editor||(this._editor=new DS(this)),this._editor}get data(){return pe(W({},this.baseData),{points:ri(this.applyObjectMatrixWorld(this.polyLineMesh.points)),style:{lineColor:new Ye(this.polyLineMesh.lineColor).getHex(),lineWidth:this.polyLineMesh.lineWidth,dashed:this.polyLineMesh.dashed}})}setData(e){e.points&&this.polyLineMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Ue))),this.polyLineMesh.setStyle(e.style)}highlight(){var e;(e=this.polyLineMesh)==null||e.highlight()}unhighlight(){var e;(e=this.polyLineMesh)==null||e.unhighlight()}canUndo(){var e;(e=this.creatingObject)==null||e.canUndo()}canRedo(){var e;(e=this.creatingObject)==null||e.canRedo()}undo(){var e;(e=this.creatingObject)==null||e.undo()}redo(){var e;(e=this.creatingObject)==null||e.redo()}create(e){return ee(this,null,function*(){this.removeChildren();const t=new co(e);this.polyLineMesh=t,this.add(this.polyLineMesh),this.creatingObject=kS(t,this.pointSelector,e),yield this.creatingObject.finished,this.config.defaultAction&&this.editor.enable()})}}function kS(i,e,t){var n;const o=i.parent;if(!o)return;const{promise:s,resolve:r,reject:a}=ns(),l=(n=t==null?void 0:t.limit)!=null?n:"none",c=new $o(i.style);o.add(c);const h=new $o(pe(W({},i.style),{dashed:!0,lengthEnable:!1}));o.add(h),e.enable();const d=[];let u,f,m;const g=[],v=()=>d.length>0,A=()=>g.length>0,w=()=>{v()&&(g.push(d.pop()),i.setPoints(d),j(m),e.pointSelectorHelper.magnifier.render())},P=()=>{A()&&(d.push(g.pop()),i.setPoints(d),j(m),e.pointSelectorHelper.magnifier.render())},I=D=>{g.length=0;const T=d.length===0?D.point:u.clone();d.push(T),i.setPoints(d)},j=D=>{const T=()=>{c.setPoints([]),h.setPoints([]),u=null};if(!D||(m=D,!(d!=null&&d.length)))return T();const M=d.at(-1).clone();l==="none"?(u=D.point,c.setPoints([M,u])):l==="xoz"?(f=f??new Nt().setFromNormalAndCoplanarPoint(new R(0,1,0),d[0]),e.plane=f,u=f.projectPoint(D.point,new R),c.setPoints([M,u]),h.setPoints([u,D.point])):l==="y"&&(d.length===1?(u=D.point,c.setPoints([M,u])):(f=f??new Nt().setFromCoplanarPoints(d[0],d[1],new R(0,1,0).add(d[0])),e.plane=f,u=f.projectPoint(D.point,new R),c.setPoints([M,u]),h.setPoints([u,D.point])))};return e.on("select",I),e.on("intersectionUpdate",j),e.on("disable",()=>{if(e.off("select",I),e.off("intersectionUpdate",j),e.plane=null,o.remove(c),o.remove(h),d.length<2)return o.remove(i),a(new Error("Cancelled"));r()}),{finished:s,canUndo:v,canRedo:A,undo:w,redo:P}}class zS extends Xl{constructor(e){super(e),p(this,"onDrag",t=>{var n;const o=sa(bt.modules.five,t.raycaster);(n=this.originObject.pointMesh)==null||n.position.copy(o.point)})}enable(){super.enable(),this.originObject.draggable=!0,this.originObject.on("drag",this.onDrag)}disable(){super.disable(),this.originObject.draggable=!1,this.originObject.off("drag",this.onDrag)}}class wg extends Ji{constructor(e,t){super(e,t),p(this,"type","Point"),p(this,"pointMesh"),p(this,"_editor"),e&&(this.pointMesh=new Rn(W(W({},e.style),e)),this.add(this.pointMesh))}get editor(){return this._editor||(this._editor=new zS(this)),this._editor}get data(){return pe(W({},this.baseData),{point:ri(this.applyObjectMatrixWorld(this.pointMesh.position)),style:{color:this.pointMesh.color.getHex(),size:this.pointMesh.size}})}setData(e){e.point&&this.pointMesh.position.copy(Ue(e.point)),this.pointMesh.setStyle(e.style)}highlight(){var e;(e=this.pointMesh)==null||e.highlight()}unhighlight(){var e;(e=this.pointMesh)==null||e.unhighlight()}setStyle(e){this.pointMesh.setStyle(e)}create(e){return ee(this,null,function*(){this.pointMesh&&this.remove(this.pointMesh),this.add(this.pointMesh=new Rn(e)),yield z1(this.pointMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function z1(i,e){return new Promise((t,n)=>{e.enable(),i.visible=!1;const o=l=>{l&&(i.visible=!0,i.position.copy(l.point))},s=l=>{l&&(i.visible=!0,i.position.copy(l.point),r())},r=()=>{e.off("select",s),e.off("disable",a),e.off("intersectionUpdate",o),e.disable(),t()},a=()=>{e.off("select",s),e.off("disable",a),e.off("intersectionUpdate",o),i.removeFromParent(),n(new Error("Cancelled"))};e.on("intersectionUpdate",o),e.on("disable",a),e.once("select",s)})}class gh extends $s{constructor(e){const t=e??{},{points:n}=t,o=es(t,["points"]);super(),p(this,"name","PolygonWithEdgeMesh"),p(this,"line",new $o),n&&this.setPoints(n),o&&this.setStyle(o)}get style(){return pe(W({},super.style),{lineWidth:this.lineWidth,lineColor:this.lineColor})}get lineWidth(){return this.line.lineWidth}get lineColor(){return this.line.lineColor}raycast(e,t){return this.children.forEach(n=>{Mh(n,e,t,!0)}),!1}setPoints(e,t){super.setPoints(e,W({closed:!0},t)),this.points&&(this.line.setPoints(this.points,W({closed:!0},t)),this.addIfNotExists(this.line))}setStyle(e){super.setStyle(e),e.lineOpacity!==void 0?this.line.setStyle(pe(W({},e),{lineOpacity:e.lineOpacity})):this.line.setStyle(e),this.needsRender=!0}highlight(){super.highlight(),this.line.highlight()}unhighlight(){super.unhighlight(),this.line.unhighlight()}}class vh extends gh{constructor(){super(...arguments),p(this,"name","AreaMesh")}}class jS extends Fd{constructor(e){super(e),p(this,"onDrag",t=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const n=sa(bt.modules.five,t.raycaster),o=this.originObject.areaMesh.projectPoint(n.point);this.draggingPoints.forEach(s=>s.position.copy(o)),this.originObject.areaMesh.setPoints(this.pointMeshes.map(s=>s.position))})}get points(){return this.originObject.areaMesh.points}}class xg extends Ji{constructor(e,t){super(e,t),p(this,"type","Polygon"),p(this,"areaMesh"),p(this,"_editor"),p(this,"creatingObject"),e&&(this.areaMesh=new vh(W(W({},e.style),e)),this.add(this.areaMesh))}get editor(){return this._editor||(this._editor=new jS(this)),this._editor}get data(){return this.updateMatrixWorld(),pe(W({},this.baseData),{points:ri(this.applyObjectMatrixWorld(this.areaMesh.points)),style:{color:this.areaMesh.color.getHex(),lineColor:this.areaMesh.lineColor.getHex(),lineWidth:this.areaMesh.lineWidth}})}setData(e){e.points&&this.areaMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Ue))),this.areaMesh.setStyle(e.style)}highlight(){var e;(e=this.areaMesh)==null||e.highlight()}unhighlight(){var e;(e=this.areaMesh)==null||e.unhighlight()}canUndo(){var e,t,n;return(n=(t=(e=this.creatingObject)==null?void 0:e.canUndo)==null?void 0:t.call(e))!=null?n:!1}canRedo(){var e,t,n;return(n=(t=(e=this.creatingObject)==null?void 0:e.canRedo)==null?void 0:t.call(e))!=null?n:!1}undo(){var e,t;return(t=(e=this.creatingObject)==null?void 0:e.undo)==null?void 0:t.call(e)}redo(){var e,t;return(t=(e=this.creatingObject)==null?void 0:e.redo)==null?void 0:t.call(e)}create(e){return ee(this,null,function*(){var t;this.children.forEach(o=>{o.parent===this&&this.remove(o)}),this.children.length=0;const n=new vh(e);this.areaMesh=n,this.add(this.areaMesh),this.creatingObject=Vd(this.areaMesh,this.pointSelector,e),yield(t=this.creatingObject)==null?void 0:t.finished,this.config.defaultAction&&this.editor.enable()})}}function Vd(i,e,t){var n,o,s,r,a,l,c;const{promise:h,resolve:d,reject:u}=ns(),f=i.parent;if(!f){u(new Error("No container"));return}const m=(n=t==null?void 0:t.limit)!=null?n:"none",g=t==null?void 0:t.simpleMode,v=(l=(a=(s=i.five)!=null?s:(o=i.get)==null?void 0:o.call(i,"five"))!=null?a:(r=window.globalModules)==null?void 0:r.five)!=null?l:window.$five;(t==null?void 0:t.autoClosePixelDistance)!=null;let A=0;g&&v&&v.model&&v.model.bounding&&typeof((c=v.model.bounding.max)==null?void 0:c.y)=="number"&&(A=v.model.bounding.max.y+1);const w=new $o(i.style);f==null||f.add(w);const P=new $o(pe(W({},i.style),{dashed:!0,lengthEnable:!1}));f==null||f.add(P);let I=[];function j(){var se,K;I.forEach(De=>{var he;return(he=De.parent)==null?void 0:he.remove(De)});const me=(K=(se=i.line)==null?void 0:se.style)!=null?K:i.style;I=T.map((De,he)=>{var je;const ze=new Rn(pe(W({},me),{color:(je=me.pointColor)!=null?je:me.lineColor,tip:void 0,point:De}));return ze.name=`PolygonPointMesh_${he}`,f==null||f.add(ze),ze})}function D(){I.forEach(se=>{var K;return(K=se.parent)==null?void 0:K.remove(se)}),I=[]}e.enable(),g&&e.setAdherePoints([]);const T=[];let M,O,y=!1,C;const x=[],S=()=>T.length>0,k=()=>x.length>0,z=()=>{var se;S()&&(x.push(T.pop()),$(C),j(),(se=t==null?void 0:t.onUndo)==null||se.call(t),e.pointSelectorHelper&&e.pointSelectorHelper.magnifier&&e.pointSelectorHelper.magnifier.render())},q=()=>{var se;k()&&(T.push(x.pop()),$(C),j(),(se=t==null?void 0:t.onRedo)==null||se.call(t),e.pointSelectorHelper&&e.pointSelectorHelper.magnifier&&e.pointSelectorHelper.magnifier.render())},X=se=>{var K;x.length=0;let me=T.length===0?se.point:M.clone();g&&(me=me.clone().setY(A)),T.push(me),i.setPoints(T,{closed:!1}),j(),(K=t==null?void 0:t.onPointPlaced)==null||K.call(t,T),y&&(ne(),d())},$=se=>{const K=()=>{w.setPoints([]),P.setPoints([]),i.setPoints(T),e.pointSelectorHelper&&e.pointSelectorHelper.magnifier&&e.pointSelectorHelper.magnifier.render()};if(!se){K(),j();return}if(C=se,!(T!=null&&T.length))return K();const me=T.at(-1).clone();if(T.length<3&&(g?(M=se.point.clone().setY(A),w.setPoints([me,M]),P.setPoints([])):m==="none"?(M=se.point,w.setPoints([me,M]),P.setPoints([])):m==="xoz"?(O=O??new Nt().setFromNormalAndCoplanarPoint(new R(0,1,0),T[0]),e.plane=O,M=O.projectPoint(se.point,new R),w.setPoints([me,M]),P.setPoints([M,se.point])):m==="y"&&(T.length===1?(M=se.point,w.setPoints([me,M]),P.setPoints([])):(O=O??new Nt().setFromCoplanarPoints(T[0],T[1],new R(0,1,0).add(T[0])),e.plane=O,M=O.projectPoint(se.point,new R),w.setPoints([me,M]),P.setPoints([M,se.point])))),T.length>=3){g?M=se.point.clone().setY(A):M=i.projectPoint(se.point);const De=T[0];let he=!1;if(typeof(t==null?void 0:t.autoClosePixelDistance)=="number"){if(v&&v.camera&&v.getElement){const je=v.getElement(),ze=je.clientWidth,Pe=je.clientHeight,Le=ue=>{const be=ue.clone().project(v.camera);return{x:(be.x*.5+.5)*ze,y:(1-(be.y*.5+.5))*Pe}},ie=Le(De),Me=Le(M),Fe=Le(se.point),Ie=Math.sqrt(Bo(ie.x-Me.x,2)+Bo(ie.y-Me.y,2)),Ve=Math.sqrt(Bo(ie.x-Fe.x,2)+Bo(ie.y-Fe.y,2));(Ie<t.autoClosePixelDistance||Ve<t.autoClosePixelDistance)&&(he=!0)}}else(De.distanceTo(M)<.2||De.distanceTo(se.point)<.2)&&(he=!0);he?(M=De,se.point.copy(De),e.pointSelectorHelper.updateWithIntersect(se,{emitEvent:!1}),y=!0):y=!1,w.setPoints([me,M]),P.setPoints([M,se.point])}T.length>=2?(i.setPoints([...T,M],{closed:!1}),i.line.setPoints(i.points.slice(0,-1)),i.isBlank?(e.cursorError=!0,w.setStyle({lineColor:16734553}),P.setStyle({lineColor:16734553})):(e.cursorError=!1,w.setStyle({lineColor:i.lineColor}),P.setStyle({lineColor:i.lineColor}))):i.setPoints([]),j()},ne=()=>{e.off("select",X),e.off("intersectionUpdate",$),e.off("disable",_),e.plane=null,e.disable(),f==null||f.remove(w,P),D()},_=()=>{ne(),f==null||f.remove(i,P,w),D(),u(new Error("Cancelled"))};return e.on("select",X),e.on("intersectionUpdate",$),e.on("disable",_),{finished:h,canUndo:S,canRedo:k,undo:z,redo:q}}function LS(i){const e=[...i],t=[];for(let n=0;n<e.length-2;n++)t.push(0,n+1,n+2);return t}function TS(i){const e=i.map(t=>new R(t[0],t[1],t[2]));return bv(e)}class OS extends xt{constructor(e){super(),p(this,"bottomPositions",[]),p(this,"topPosition",[]),p(this,"_type","Concave"),e&&this.setPosition(e)}setPosition(e){var t,n,o;const s=(t=e.bottomPositions)!=null?t:this.bottomPositions,r=(n=e.topPosition)!=null?n:this.topPosition;if(this._type=(o=e.type)!=null?o:this._type,this.bottomPositions=s,this.topPosition=r,!s||s.length<3){console.error("PrismGeometry: Invalid parameters",s,r,e),this.bottomPositions=[],this.setAttribute("position",new dt(new Float32Array([]),3));return}const a=[],l=[];l.push(...s),l[0][0]===l.at(-1)[0]&&l[0][1]===l.at(-1)[1]&&l[0][2]===l.at(-1)[2]&&(l.length-=1);const c=this._type==="Concave"?TS(l):LS(l);if(a.push(...c),r&&r.length===3){const h=[r[0]-s[0][0],r[1]-s[0][1],r[2]-s[0][2]],d=l.map(f=>[f[0]+h[0],f[1]+h[1],f[2]+h[2]]);l.push(...d);const u=a.map(f=>f+l.length/2);a.push(...u);for(let f=0;f<l.length/2-1;f++)a.push(f,f+1,f+l.length/2),a.push(f+1,f+l.length/2+1,f+l.length/2);a.push(0,l.length/2,l.length/2-1),a.push(l.length/2,l.length-1,l.length/2-1)}this.setAttribute("position",new In(l.flat(),3)),this.setIndex(a),this.computeBoundingSphere()}}class Uo extends mi{constructor(e){super(),p(this,"name","PrismMesh"),p(this,"five"),p(this,"activeAnimations",new Map),p(this,"activeEaseInAnimations",new Map),p(this,"_geometryInfoCache"),p(this,"geometryInfoNeedUpdate",!0),p(this,"edgeMesh",new Pi),p(this,"prismMesh",new Fl),p(this,"paramStyle"),this.five=e==null?void 0:e.five,this.prismMesh.name="PrismMesh",this.prismMesh.geometry=new OS,this.edgeMesh.name="EdgeMesh",this.addIfNotExists(this.prismMesh,this.edgeMesh),e&&Object.keys(e).some(t=>t!=="five")&&this.setPoints(e),this.setStyle(e)}get topPosition(){return new R().fromArray(this.prismMesh.geometry.topPosition)}get bottomPositions(){return this.prismMesh.geometry.bottomPositions.map(e=>new R().fromArray(e))}get topPositions(){const e=this.bottomPositions[0].clone().sub(this.topPosition);return this.bottomPositions.map(t=>t.clone().sub(e))}get style(){return{color:this.color,lineColor:this.lineColor,lineWidth:this.lineWidth,opacity:this.opacity,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode}}get opacity(){return this.prismMesh.opacity}get occlusionVisibility(){return this.prismMesh.occlusionVisibility}get occlusionMode(){return this.prismMesh.occlusionMode}get center(){return this.localCenter.clone()}get localCenter(){var e;return(e=this.geometryInfo.center.clone())!=null?e:new R(9999,9999,9999)}get geometryInfo(){if(this.geometryInfoNeedUpdate){this.geometryInfoNeedUpdate=!1;const e=this.prismMesh.geometry.bottomPositions,t=this.prismMesh.geometry.topPosition;if(!e||e.length<3||!t){this._geometryInfoCache=void 0;return}const n=e.map((l,c)=>c>=e.length-2?null:[new R().fromArray(e[0]),new R().fromArray(e[c+1]),new R().fromArray(e[c+2])]).filter(Boolean);if(n.length===0){this._geometryInfoCache=void 0;return}let o=0,s=new R;for(const[l,c,h]of n){const d=fd(l,c,h),u=Pv(l,c,h,d);o+=d,s.add(u)}s=s.divideScalar(o);const r=new R().fromArray(t).sub(new R().fromArray(e[0])),a=s.clone().add(r.divideScalar(2));this._geometryInfoCache={center:a}}return this._geometryInfoCache}get worldCenter(){return this.updateMatrixWorld(),this.localToWorld(this.localCenter)}get color(){return this.prismMesh.color}get lineWidth(){return this.edgeMesh.style.lineWidth}get lineColor(){return this.edgeMesh.color}setStyle(e={}){this.paramStyle=W(W({},this.paramStyle),e),this.prismMesh.setStyle(this.paramStyle),this.edgeMesh.setStyle(this.paramStyle)}isBox(){const e=this.prismMesh.geometry.bottomPositions;return e&&e.length===4}setPoints(e){var t;this.prismMesh.geometry.setPosition({bottomPositions:(t=e.points)==null?void 0:t.map(Ue).map(n=>n.toArray()),topPosition:e.heightPoint?Ue(e.heightPoint).toArray():void 0}),this.edgeMesh.geometry=new Ra().fromEdgesGeometry(new Ga(this.prismMesh.geometry)),this.geometryInfoNeedUpdate=!0}highlight(){this.prismMesh.highlight()}unhighlight(){this.prismMesh.unhighlight()}raycast(e,t){return this.children.forEach(n=>Mh(n,e,t,!0)),!1}setFive(e){this.five=e}playBoxAnimation(e){return this.five?this.isBox()?(this.activeAnimations.has(e)&&this.forceFinishBoxAnimation(e),new Promise(t=>{this.prismMesh.visible=!1,this.edgeMesh.visible=!1;const n=new R(1/0,1/0,1/0),o=new R(-1/0,-1/0,-1/0),s=this.bottomPositions;for(const I of s)n.min(I),o.max(I);const r=this.topPositions;for(const I of r)n.min(I),o.max(I);const a=o.clone().sub(n),l=new wh(a.x,a.y,a.z),c=`
      varying vec2 vUV;
      varying vec3 vPosition;
      #include <common>
      void main() {
        vUV = uv;
        vPosition = position;
        vec4 transformed = vec4(position, 1.0);
        gl_Position = projectionMatrix * modelViewMatrix * transformed;
      }
      `,h=`
      #include <common>
      uniform vec3 color;
      uniform vec3 size;
      uniform vec2 faceSize;
      uniform float opacity;
      uniform float progress;
      uniform float spread;
      varying vec2 vUV;
      varying vec3 vPosition;
      void main() {

        float u = vUV.x;
        float v = vUV.y;
        float r = 0.1 + sqrt(u * u + v * v) * 0.3;

        // 边缘线
        if (size.y * v < 0.003 || size.y * (1.0 - v) < 0.003) {
          r += 0.8 * (1.0 - abs(u - 0.5) * 2.0);
        }
        if (size.x * u < 0.003 || size.x * (1.0 - u) < 0.003) {
          r += 0.8 * (1.0 - abs(v - 0.5) * 2.0);
        }

        // 扫光动画
        vec3 p = (vPosition + size / 2.0) / size;
        r = r * pow(clamp(1.0 - abs(p.y - progress) / spread, 0.0, 1.0), 2.0);

        gl_FragColor = vec4(color, clamp(r * opacity, 0.0, 1.0));
      }
      `,d=new Bi({vertexShader:c,fragmentShader:h,uniforms:{color:{value:new Ye(77/255,240/255,1)},size:{value:a},faceSize:{value:new Qe(1,1)},opacity:{value:.8},progress:{value:.5},spread:{value:.5}},depthTest:!1,side:It,transparent:!0});d.polygonOffset=!0,d.polygonOffsetFactor=1,d.polygonOffsetUnits=1;const u=new We(l,[d.clone(),d.clone(),d.clone(),d.clone(),d.clone(),d.clone()]),f=this.localCenter.clone();f.applyMatrix4(this.matrixWorld);const m=new R,g=new tt,v=new R;this.matrixWorld.decompose(m,g,v),u.position.copy(f),u.quaternion.copy(g),u.onBeforeRender=()=>{l.boundingBox||l.computeBoundingBox();const I=l.boundingBox.getSize(new R);for(let j=0;j<6;j++){const D=u.material[j];j===0||j===1?D.uniforms.faceSize.value.set(I.z,I.y):j===2||j===3?D.uniforms.faceSize.value.set(I.x,I.z):D.uniforms.faceSize.value.set(I.x,I.y)}for(const j of u.material)j.uniforms.size.value.copy(I);this.five.needsRender=!0};const A=3e3;let w=0;const P=AA.shared.add((I,j)=>{w+=j;let D=w/A;D>1&&(D=1);let T=Math.abs((D-.5)*2);T=T*2-.5;for(const M of u.material)M.uniforms.progress.value=T;D===1&&(P(),u.visible=!1,this.playEaseInAnimation(e,()=>{this.activeAnimations.delete(e),t()})),this.five.needsRender=!0});this.activeAnimations.set(e,{animatedBoxMesh:u,remove:P}),this.five.scene.add(u)})):(console.warn("Animation only available for box shapes"),Promise.resolve()):(console.warn("Five instance not available for box animation"),Promise.resolve())}forceFinishBoxAnimation(e){if(!this.five){console.warn("Five instance not available for finishing box animation");return}(e?[e]:Array.from(this.activeAnimations.keys())).forEach(t=>{const n=this.activeAnimations.get(t);n&&(n.remove(),n.animatedBoxMesh.visible=!1,this.activeAnimations.delete(t));const o=this.activeEaseInAnimations.get(t);o&&(clearInterval(o.interval),this.activeEaseInAnimations.delete(t))}),this.showBoxFinalState(),this.five.needsRender=!0}playEaseInAnimation(e,t){if(!this.five)return;this.prismMesh.visible=!0,this.edgeMesh.visible=!0;let n=0;const o=this.prismMesh.style.opacity;this.prismMesh.setStyle({opacity:0}),this.edgeMesh.setStyle({lineOpacity:0});const s=setInterval(()=>{n===61&&(clearInterval(s),this.activeEaseInAnimations.delete(e),this.showBoxFinalState(),t()),this.edgeMesh.setStyle({lineOpacity:n/60}),this.prismMesh.setStyle({opacity:n/60*o}),this.five.needsRender=!0,n++},16);this.activeEaseInAnimations.set(e,{interval:s,model:this})}showBoxFinalState(){this.prismMesh.visible=!0,this.edgeMesh.visible=!0,this.prismMesh.setStyle({opacity:this.prismMesh.style.opacity}),this.edgeMesh.setStyle({lineOpacity:1})}}class j1 extends fa{constructor(e){super(e,()=>({positionFrom:()=>e.worldCenter,yAxis:()=>e.up,scaleHelper:{enable:!0,positions:()=>{const t=e.bottomPositions,n=e.topPosition,o=new R().subVectors(n,t[0]),s=e.geometryInfo.center,r=s.clone().sub(o.clone().divideScalar(2)),a=s.clone().add(o.clone().divideScalar(2));return[{id:"top",handlePosition:a,basePosition:r},{id:"bottom",handlePosition:r,basePosition:a}]},scaleCallback:t=>{const{intersectPoint:n,scalePosition:o}=t,{id:s,basePosition:r,handlePosition:a}=o;if(s==="top"){const l=n.clone().sub(r);e.setPoints({heightPoint:e.bottomPositions[0].clone().add(l)})}else if(s==="bottom"){const l=n.clone().sub(r);e.setPoints({points:e.topPositions.map(c=>c.clone().add(l))})}}}}))}}class Cg extends Ji{constructor(e,t){super(e,t),p(this,"type","Prism"),p(this,"prismMesh"),p(this,"_editor"),e&&(this.prismMesh=new Uo(W(W({},e.style),e)),this.add(this.prismMesh))}get editor(){return this._editor||(this._editor=new j1(this.prismMesh)),this._editor}get data(){return pe(W({},this.baseData),{points:ri(this.applyObjectMatrixWorld(this.prismMesh.bottomPositions,this.prismMesh)),heightPoint:ri(this.applyObjectMatrixWorld(this.prismMesh.topPosition,this.prismMesh)),style:{color:this.prismMesh.color.getHex(),lineWidth:this.prismMesh.lineWidth,lineColor:this.prismMesh.lineColor.getHex()}})}setData(e){this.prismMesh.setPoints({points:e.points?this.applyObjectReversalMatrixWorld(e.points.map(Ue),this.prismMesh):void 0,heightPoint:e.heightPoint?this.applyObjectReversalMatrixWorld(Ue(e.heightPoint),this.prismMesh):void 0}),this.prismMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.prismMesh)==null||e.highlight()}unhighlight(){var e;(e=this.prismMesh)==null||e.unhighlight()}create(e){return ee(this,null,function*(){this.prismMesh=new Uo(e),this.add(this.prismMesh),yield L1(this.prismMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function L1(i,e){return ee(this,null,function*(){const t=i.parent,n=new vh(i.style);t.add(n),yield Vd(n,e).finished,t.remove(n),i.setPoints({points:n.points});const o=new Pi;o.name="LineHelper",t.add(o);const s=n.points.at(-1),r=Eo(n.points),a=s.clone().add(r.clone().multiplyScalar(100)),l=s.clone().sub(r.clone().multiplyScalar(100));return o.setPoints([a,l]),e.enable(),new Promise((c,h)=>{const d=g=>{f(),c()},u=g=>{if(!(g!=null&&g.raycaster))return;const v=ho({raycaster:g.raycaster,line:new Ht(a,l)});v&&i.setPoints({heightPoint:v})},f=()=>{e.off("select",d),e.off("intersectionUpdate",u),e.off("disable",m),t.remove(o),e.disable()},m=()=>{f(),t.remove(i),h(new Error("Cancelled"))};e.on("select",d),e.on("intersectionUpdate",u),e.on("disable",m)})})}class T1 extends fa{constructor(e){super(e,()=>({yAxis:()=>{const t=e.points;return Eo(t).normalize()},zAxis:()=>{const t=e.points;return t[0].clone().sub(t[1]).normalize()},scaleHelper:{enable:!0,positions:()=>{const t=e.points,n=t[0].clone().lerp(t[3],.5),o=t[1].clone().lerp(t[2],.5),s=t[0].clone().lerp(t[1],.5),r=t[3].clone().lerp(t[2],.5);return[{id:"left",handlePosition:n,basePosition:o},{id:"right",handlePosition:o,basePosition:n},{id:"top",handlePosition:s,basePosition:r},{id:"bottom",handlePosition:r,basePosition:s}]},scaleCallback:t=>{const{intersectPoint:n,scalePosition:o}=t,{id:s,basePosition:r}=o,a=n.clone().sub(r),l=e.points;s==="top"?e.setPoints([l[3].clone().add(a),l[2].clone().add(a),l[2],l[3]]):s==="bottom"?e.setPoints([l[0],l[1],l[1].clone().add(a),l[0].clone().add(a)]):s==="left"?e.setPoints([l[1].clone().add(a),l[1],l[2],l[2].clone().add(a)]):s==="right"&&e.setPoints([l[0],l[0].clone().add(a),l[3].clone().add(a),l[3]])}}}))}}class RS extends xt{constructor(e){if(super(),p(this,"name","RectangleGeometry"),p(this,"points"),e.length!==4){console.error("Invalid number of points, it's not a rectangle");return}this.points=e.slice(0,4),this.setAttribute("position",new dt(new Float32Array(this.points.flatMap(t=>t.toArray())),3)),this.setIndex(new dt(new Uint16Array([0,1,2,0,2,3]),1))}}class Wd extends $s{constructor(e){super(e),p(this,"name","RectangleMesh")}get color(){return this.meshFont.material.color}setPoints(e){const t=e.map(Ue).filter(Be);if(t.length<3){console.error("Invalid position");return}if(e.length===3){const[n,o,s]=t,r=n.clone().add(s).sub(o);t.push(r)}this.points=t,this.geometry=new RS(t),this.planeHelperNeedUpdate=!0,this.geometryInfoNeedUpdate=!0}}class Al extends Wd{constructor(e){const t=e??{},{points:n}=t,o=es(t,["points"]);super(),p(this,"name","RectangleWithEdgeMesh"),p(this,"line",new $o),n&&this.setPoints(n),o&&this.setStyle(o)}get style(){return W(W({},super.style),this.line.style)}get lineWidth(){return this.line.lineWidth}get lineColor(){return this.line.lineColor}setPoints(e){super.setPoints(e),this.points&&(this.line.setPoints([this.points[0],this.points[1],this.points[2],this.points[3],this.points[0]]),this.addIfNotExists(this.line))}setStyle(e){super.setStyle(e),this.line.setStyle(e)}highlight(){super.highlight(),this.line.highlight()}unhighlight(){super.unhighlight(),this.line.unhighlight()}}function O1(i,e){const t=Eo(i),n=qt(...i),o=e.clone().sub(n);return t.dot(o)>=0?i:i.slice().reverse()}class Pg extends Ji{constructor(e,t){super(e,t),p(this,"type","Rectangle"),p(this,"rectangleMesh"),p(this,"_editor"),e&&(this.rectangleMesh=new Al(W(W({},e.style),e)),this.add(this.rectangleMesh))}get editor(){return this._editor||(this._editor=new T1(this.rectangleMesh)),this._editor}get data(){return pe(W({},this.baseData),{points:ri(this.applyObjectMatrixWorld(this.rectangleMesh.points,this.rectangleMesh)),style:{color:this.rectangleMesh.color.getHex(),opacity:this.rectangleMesh.opacity,lineWidth:this.rectangleMesh.lineWidth,lineColor:this.rectangleMesh.lineColor.getHex()}})}setData(e){e.points&&this.rectangleMesh.setPoints(this.applyObjectReversalMatrixWorld(e.points.map(Ue),this.rectangleMesh)),this.rectangleMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.rectangleMesh)==null||e.highlight()}unhighlight(){var e;(e=this.rectangleMesh)==null||e.unhighlight()}create(e){return ee(this,null,function*(){this.removeChildren();const t=new Al(e);this.rectangleMesh=t,this.add(this.rectangleMesh),yield Gd(this.rectangleMesh,this.pointSelector,e),this.config.defaultAction&&this.editor.enable()})}}function Gd(i,e,t){var n;return((n=t==null?void 0:t.drawMethod)!=null?n:"diagonal")==="diagonal"?HS(i,e,t):NS(i,e,t)}function BS(i,e){const t=[];return i.scene.traverse(n=>{var o;if(n.visible&&!((o=e==null?void 0:e.excludes)!=null&&o.includes(n))&&(n instanceof Wd||n instanceof $s)){const s=n.points.map(r=>{const a=new nn(r.x,r.y,r.z,n.normal);return n.style.occlusionVisibility&&(a.IsAlwaysVisible=!0),a});t.push(...s)}}),t}function HS(i,e,t){var n;const{promise:o,reject:s,resolve:r}=ns(),a=i.parent;if(!a)return s(new Error("No container"));const l=(n=t==null?void 0:t.limit)!=null?n:"none",c=new co(pe(W({},i.style),{dashed:!0})),h=new co(pe(W({},i.style),{dashed:!0,lengthEnable:!1})),d=new co(pe(W({},i.style),{dashed:!1,lengthEnable:!1}));a.add(c,d,h),e.enable();const u=[];let f=new R,m=new R;const g=new Nt,v=()=>{u.push(f.clone()),u.length===1?(l==="xoz"&&g.setFromNormalAndCoplanarPoint(new R(0,1,0),u[0]),l==="none"&&g.setFromNormalAndCoplanarPoint(m,u[0])):u.length===2?l==="y"||l==="xoz"?(w(),r()):d.setPoints([u[0],u[1]]):u.length===3&&(w(),r())},A=I=>{var j,D;if(!(I!=null&&I.raycaster))return;const T=(j=u.at(-1))==null?void 0:j.clone();if(u.length===0){f=I.point.clone(),m=(D=I.face)==null?void 0:D.normal;return}if(u.length===1&&l==="y"){const M=new Ht(new R(0,1,0).add(u[0]),new R(0,-1,0).add(u[0])).closestPointToPoint(I.point,!1,new R);i.setPoints([u[0],M,I.point]);return}if(u.length===1&&l==="xoz"){const M=new Ht(new R(1,0,0).add(u[0]),new R(-1,0,0).add(u[0])),O=I.raycaster.ray.intersectPlane(g,new R),y=M.closestPointToPoint(O,!1,new R);i.setPoints([u[0],y,O]);return}if(u.length===1&&l==="none"){g?(f=I.raycaster.ray.intersectPlane(g,new R),h.setPoints([f,I.point])):f=I.point.clone(),c.setPoints([T,f]);return}if(u.length===2&&l==="none"){a.remove(c);const M=I.raycaster.ray.intersectPlane(g,new R),O=u[0].distanceTo(u[1])/2,y=new R().lerpVectors(u[0],u[1],.5),C=new R().subVectors(M,y).normalize();f=new R().addVectors(y,C.multiplyScalar(O));const x=[u[0],f,u[1]],S=O1(x,bt.modules.five.camera.position);i.setPoints(S);return}},w=()=>{e.off("select",v),e.off("intersectionUpdate",A),e.off("disable",P),e.disable(),a==null||a.remove(c,d,h)},P=()=>{w(),a==null||a.remove(i),s(new Error("Cancelled"))};return e.on("select",v),e.on("intersectionUpdate",A),e.on("disable",P),o}function NS(i,e,t){var n;const{promise:o,reject:s,resolve:r}=ns(),a=i.parent;if(!a)return s(new Error("No container"));const l=(n=t==null?void 0:t.limit)!=null?n:"none",c=new co(pe(W({},i.style),{dashed:!0})),h=new co(pe(W({},i.style),{dashed:!0,lengthEnable:!1})),d=new co(pe(W({},i.style),{dashed:!1,lengthEnable:!1}));a.add(c,d,h),e.enable(),e.setAdherePoints(BS(e.five,{excludes:[i]}));const u=[];let f=new R,m=new R;const g=new Nt,v=()=>{if(u.push(f.clone()),u.length===1)e.planeMode="onlyPlane",l==="y"&&(e.adhereLine=[new Ht(u[0],new R(0,1,0).add(u[0]))]),l==="xoz"&&(g.setFromNormalAndCoplanarPoint(new R(0,1,0),u[0]),e.plane=g),l==="none"&&(g.setFromNormalAndCoplanarPoint(m,u[0]),e.plane=g);else if(u.length===2){e.planeMode="vertical",l==="y"&&(e.adhereLine=[]);let I=!1;u[0].x===u[1].x&&u[0].z===u[1].z&&(I=!0),l==="y"&&!I&&(g.setFromCoplanarPoints(u[0],u[1],new R(0,1,0).add(u[0])),e.plane=g),d.setPoints([u[0],u[1]])}else u.length===3&&(w(),r())},A=I=>{var j,D,T,M;if(!I||!(I!=null&&I.raycaster))return;const O=(j=u.at(-1))==null?void 0:j.clone();if(u.length===0){f=I.point.clone(),m=(D=I.face)==null?void 0:D.normal;return}if(u.length===1){f=I.point,h.setPoints([(T=I.originalPoint)!=null?T:I.point,I.point]),c.setPoints([O,f]);return}if(u.length===2){if(!e.plane){const S=Eo([u[0],u[1],I.point]);g.setFromNormalAndCoplanarPoint(S,u[0])}h.setPoints([(M=I.originalPoint)!=null?M:I.point,I.point]);const y=new R().crossVectors(u[0].clone().sub(u[1]),g.normal).normalize();f=new Ht(u[1].clone().add(y),u[1].clone().sub(y)).closestPointToPoint(I.point,!1,new R);const C=[u[0],u[1],f],x=O1(C,bt.modules.five.camera.position);i.setPoints(x);return}},w=()=>{e.setAdherePoints([]),e.adhereLine=[],e.adherePlane=[],e.plane=void 0,e.off("select",v),e.off("intersectionUpdate",A),e.off("disable",P),e.disable(),a==null||a.remove(c,d,h)},P=()=>{w(),a==null||a.remove(i),s(new Error("Cancelled"))};return e.on("select",v),e.on("intersectionUpdate",A),e.on("disable",P),o}class R1 extends fa{constructor(e){super(e,()=>({yAxis:()=>e.normal}))}}function B1(i){return Math.max(32,Math.min(128,Math.floor(i*40)))}class H1 extends Fl{constructor(e){super(e),p(this,"_normal"),p(this,"_center"),p(this,"_radius"),e!=null&&e.center&&e!=null&&e.normal&&e!=null&&e.radius&&this.setPoints(e)}get center(){return this.position.clone()}get normal(){return this._normal}set normal(e){this._normal=e}get radius(){var e,t;return(t=(e=this.meshFont.geometry)==null?void 0:e.parameters)==null?void 0:t.radius}setPoints(e){var t,n,o;if(this._center=(t=Ue(e.center))!=null?t:this._center,this._normal=((n=Ue(e.normal))!=null?n:this._normal).normalize(),this._radius=(o=e.radius)!=null?o:this._radius,Be(this._radius)&&this._radius!==this.radius){const s=B1(this._radius);this.geometry=new no(this._radius,s)}this._center&&this.position.copy(this._center),this._normal&&(this.lookAt(this._normal.clone().add(this._center)),this.normal=this._normal.clone()),this.needsRender=!0}}class _r extends H1{constructor(e){const t=e??{},{normal:n,radius:o,center:s}=t,r=es(t,["normal","radius","center"]);super(r),p(this,"edgeLine"),this.edgeLine=new Pi(r),this.add(this.edgeLine),n&&o&&s&&this.setPoints({normal:n,radius:o,center:s})}setPoints(...e){super.setPoints(...e);const t=this.meshFont.geometry.vertices.slice(1);this.edgeLine.setPoints(t.concat(t[0]))}setStyle(e){super.setStyle(e),this.edgeLine.setStyle(e)}highlight(){super.highlight(),this.edgeLine.highlight()}unhighlight(){super.unhighlight(),this.edgeLine.unhighlight()}}class Eg extends Ji{constructor(e,t){super(e,t),p(this,"type","Circle"),p(this,"circleMesh"),p(this,"_editor"),e&&(this.circleMesh=new _r(W(W({},e.style),e)),this.add(this.circleMesh))}get editor(){return this._editor||(this._editor=new R1(this.circleMesh)),this._editor}get data(){return pe(W({},this.baseData),{center:ri(this.applyObjectMatrixWorld(this.circleMesh.center,this.circleMesh)),normal:ri(this.circleMesh.normal.clone().applyQuaternion(this.circleMesh.quaternion)),radius:this.circleMesh.radius,style:{color:this.circleMesh.color.getHex()}})}setData(e){this.circleMesh.setPoints({center:e.center?this.applyObjectReversalMatrixWorld(Ue(e.center),this.circleMesh):void 0,normal:e.normal?Ue(e.normal):void 0,radius:e.radius}),this.circleMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.circleMesh)==null||e.highlight()}unhighlight(){var e;(e=this.circleMesh)==null||e.unhighlight()}create(e){return ee(this,null,function*(){this.children.forEach(n=>{n.parent===this&&this.remove(n)}),this.children.length=0;const t=new _r(e);this.circleMesh=t,this.add(this.circleMesh),yield Qd(this.circleMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function Qd(i,e){return new Promise((t,n)=>{const o=i.parent;if(!o){n(new Error("No container"));return}const s=new $o({dashed:!0});o.add(s),e.enable();let r,a;const l=u=>{if(u){if(!r){r={point:u.point,normal:u.face.normal};return}r&&a&&(h(),t())}},c=u=>{if(!u||!r)return;const f=new Nt().setFromNormalAndCoplanarPoint(r.normal,r.point);if(a=u.raycaster.ray.intersectPlane(f,new R),a){const m=r.point.distanceTo(a);i.setPoints({center:r.point,normal:r.normal,radius:m})}},h=()=>{e.off("select",l),e.off("intersectionUpdate",c),e.off("disable",d),e.disable(),o==null||o.remove(s)},d=()=>{h(),o==null||o.remove(i,s),n(new Error("Cancelled"))};e.on("select",l),e.on("intersectionUpdate",c),e.on("disable",d)})}class Ah extends mi{constructor(e){super(),p(this,"bottomCircle"),p(this,"topCircle"),p(this,"edgeMesh"),p(this,"highlighted",!1),p(this,"params"),p(this,"_topCenter"),p(this,"_bottomCenter"),p(this,"_radius"),this.params=e,this.bottomCircle=new _r(e),this.bottomCircle.name="bottomCircle",this.topCircle=new _r(e),this.topCircle.name="topCircle",this.edgeMesh=new Fl(e),e!=null&&e.bottomCenter&&e!=null&&e.topCenter&&e!=null&&e.radius&&this.setPoints(e),this.addIfNotExists(this.bottomCircle)}get bottomCenter(){return this.bottomCircle.center}get topCenter(){return this.topCircle.center}get normal(){return this.bottomCircle.normal}get radius(){return this.bottomCircle.radius}get color(){return this.bottomCircle.color}setPoints(e){var t,n;if(this._topCenter=(t=Ue(e.topCenter))!=null?t:this.topCenter,this._bottomCenter=(n=Ue(e.bottomCenter))!=null?n:this.bottomCenter,this._radius=Be(e.radius)?e.radius:this.radius,this._topCenter&&this._bottomCenter){const o=this._topCenter.clone().sub(this._bottomCenter).normalize();this.bottomCircle.setPoints({center:this._bottomCenter,normal:o,radius:this._radius}),this.setTopCenter(this._topCenter)}this.needsRender=!0}setTopCenter(e){this.addIfNotExists(this.topCircle),this.topCircle.setPoints({center:e,normal:this.normal,radius:this.radius}),this.setEdgeMesh()}setBottomCenter(e){this.addIfNotExists(this.bottomCircle),this.bottomCircle.setPoints({center:e,normal:this.normal,radius:this.radius}),this.setEdgeMesh()}setStyle(e){this.params=W(W({},this.params),e),this.bottomCircle.setStyle(this.params),this.topCircle.setStyle(this.params)}highlight(){this.highlighted||(this.highlighted=!0,this.edgeMesh.highlight(),this.bottomCircle.highlight(),this.topCircle.highlight(),this.needsRender=!0)}unhighlight(){this.highlighted&&(this.highlighted=!1,this.edgeMesh.unhighlight(),this.bottomCircle.unhighlight(),this.topCircle.unhighlight(),this.needsRender=!0)}setEdgeMesh(){this.addIfNotExists(this.edgeMesh);const e=this.topCircle.center,t=this.bottomCircle.center;this.edgeMesh.geometry.dispose(),this.edgeMesh.geometry=new Bg(this.radius,this.radius,e.distanceTo(t),B1(this.radius),1,!0);const n=new tt().setFromUnitVectors(new R(0,1,0),this.normal.clone().normalize());this.edgeMesh.position.copy(new R().lerpVectors(t,e,.5)),this.edgeMesh.quaternion.copy(n)}}class N1 extends fa{constructor(e){super(e,()=>{const t=()=>{const n=e.topCenter,o=e.bottomCenter,s=new R().lerpVectors(n,o,.5);return{topCenter:n,bottomCenter:o,boxCenter:s}};return{positionFrom:"boundingBox",yAxis:()=>e.normal,scaleHelper:{enable:!0,positions:()=>{const n=t();return[{id:"top",handlePosition:n.topCenter,basePosition:n.bottomCenter},{id:"bottom",handlePosition:n.bottomCenter,basePosition:n.topCenter}]},scaleCallback:n=>{const{intersectPoint:o,scalePosition:s}=n,{id:r}=s;r==="top"?e.setTopCenter(o):r==="bottom"&&e.setBottomCenter(o)}}}})}}class Ig extends Ji{constructor(e,t){super(e,t),p(this,"type","Cylinder"),p(this,"cylinderMesh"),p(this,"_editor"),e&&(this.cylinderMesh=new Ah(W(W({},e.style),e)),this.add(this.cylinderMesh))}get editor(){return this._editor||(this._editor=new N1(this.cylinderMesh)),this._editor}get data(){return pe(W({},this.baseData),{bottomCenter:ri(this.applyObjectMatrixWorld(this.cylinderMesh.bottomCenter,this.cylinderMesh)),topCenter:ri(this.applyObjectMatrixWorld(this.cylinderMesh.topCenter,this.cylinderMesh)),radius:this.cylinderMesh.radius,style:{color:this.cylinderMesh.color.getHex()}})}setData(e){this.cylinderMesh.setPoints({bottomCenter:e.bottomCenter?this.applyObjectReversalMatrixWorld(Ue(e.bottomCenter),this.cylinderMesh):void 0,topCenter:e.topCenter?this.applyObjectReversalMatrixWorld(Ue(e.topCenter),this.cylinderMesh):void 0}),this.cylinderMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.cylinderMesh)==null||e.highlight()}unhighlight(){var e;(e=this.cylinderMesh)==null||e.unhighlight()}create(e){return ee(this,null,function*(){this.cylinderMesh=new Ah(e),this.add(this.cylinderMesh),yield F1(this.cylinderMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function F1(i,e){return ee(this,null,function*(){const t=i.parent;yield Qd(i.bottomCircle,e);const n=new Pi;n.name="LineHelper",t.add(n);const o=e.position.point,s=i.normal.clone().normalize(),r=o.clone().add(s.clone().multiplyScalar(100)),a=o.clone().sub(s.clone().multiplyScalar(100));return n.setPoints([r,a]),e.enable(),new Promise((l,c)=>{const h=m=>{u(),l()},d=m=>{if(!(m!=null&&m.raycaster))return;const g=ho({raycaster:m.raycaster,line:new Ht(r,a)}),v=new Nt().setFromNormalAndCoplanarPoint(i.normal,i.bottomCenter).projectPoint(g,new R),A=g.clone().sub(v),w=i.bottomCenter.clone().add(A);g&&i.setTopCenter(w)},u=()=>{e.off("select",h),e.off("intersectionUpdate",d),e.off("disable",f),t.remove(n),e.disable()},f=()=>{u(),t.remove(i),c(new Error("Cancelled"))};e.on("select",h),e.on("intersectionUpdate",d),e.on("disable",f)})})}class V1 extends fa{constructor(e){super(e,()=>({positionFrom:()=>e.worldCenter,yAxis:()=>new R().subVectors(e.topPosition,e.bottomPositions[0]).normalize(),zAxis:()=>new R().subVectors(e.bottomPositions[0],e.bottomPositions[1]).normalize(),scaleHelper:{enable:!0,positions:()=>{const t=e.bottomPositions,n=e.topPosition,o=new R().subVectors(n,t[0]),s=new R().subVectors(t[1],t[0]),r=new R().subVectors(t[2],t[1]),a=e.geometryInfo.center,l=a.clone().sub(o.clone().divideScalar(2)),c=a.clone().add(o.clone().divideScalar(2)),h=a.clone().sub(s.clone().divideScalar(2)),d=a.clone().add(s.clone().divideScalar(2)),u=a.clone().sub(r.clone().divideScalar(2)),f=a.clone().add(r.clone().divideScalar(2));return[{id:"top",handlePosition:c,basePosition:l},{id:"bottom",handlePosition:l,basePosition:c},{id:"left",handlePosition:h,basePosition:d},{id:"right",handlePosition:d,basePosition:h},{id:"front",handlePosition:u,basePosition:f},{id:"back",handlePosition:f,basePosition:u}]},scaleCallback:t=>{const{intersectPoint:n,scalePosition:o}=t,{id:s,basePosition:r}=o,a=e.bottomPositions,l=e.topPositions;let c=new R().subVectors(e.topPosition,a[0]),h;if(s==="top")c=n.clone().sub(r),h=a;else if(s==="bottom"){const d=n.clone().sub(r);h=l.map(u=>u.clone().add(d)),c=void 0}else if(s==="left"){const d=n.clone().sub(r);h=[a[1].clone().add(d),a[1],a[2],a[2].clone().add(d)]}else if(s==="right"){const d=n.clone().sub(r);h=[a[0],a[0].clone().add(d),a[3].clone().add(d),a[3]]}else if(s==="front"){const d=n.clone().sub(r);h=[a[3].clone().add(d),a[2].clone().add(d),a[2],a[3]]}else if(s==="back"){const d=n.clone().sub(r);h=[a[0],a[1],a[1].clone().add(d),a[0].clone().add(d)]}e.setPoints({points:h,heightPoint:c?h[0].clone().add(c):void 0})}}}))}}class yh extends Uo{constructor(){super(...arguments),p(this,"name","BoxMesh")}get geometryInfo(){if(this.geometryInfoNeedUpdate){this.geometryInfoNeedUpdate=!1;const e=this.bottomPositions,t=this.topPosition;if(!e||e.length<3||!t){this._geometryInfoCache=void 0;return}const n=qt(...e),o=t.clone().sub(e[0]),s=n.clone().add(o.clone().divideScalar(2));this._geometryInfoCache={center:s}}return this._geometryInfoCache}}class Mg extends Ji{constructor(e,t){super(e,t),p(this,"type","Box"),p(this,"boxMesh"),p(this,"_editor"),e&&(this.boxMesh=new yh(W(W({},e.style),e)),this.add(this.boxMesh))}get editor(){return this._editor||(this._editor=new V1(this.boxMesh)),this._editor}get data(){return pe(W({},this.baseData),{points:ri(this.applyObjectMatrixWorld(this.boxMesh.bottomPositions,this.boxMesh)),heightPoint:ri(this.applyObjectMatrixWorld(this.boxMesh.topPosition,this.boxMesh)),style:{color:this.boxMesh.color.getHex(),opacity:this.boxMesh.opacity,lineWidth:this.boxMesh.lineWidth,lineColor:this.boxMesh.lineColor.getHex()}})}setData(e){this.boxMesh.setPoints({points:e.points?this.applyObjectReversalMatrixWorld(e.points.map(Ue),this.boxMesh):void 0,heightPoint:e.heightPoint?this.applyObjectReversalMatrixWorld(Ue(e.heightPoint),this.boxMesh):void 0}),this.boxMesh.setStyle(e.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var e;(e=this.boxMesh)==null||e.highlight()}unhighlight(){var e;(e=this.boxMesh)==null||e.unhighlight()}create(e){return ee(this,null,function*(){this.removeChildren(),this.boxMesh=new yh(e),this.add(this.boxMesh),yield W1(this.boxMesh,this.pointSelector,e),this.config.defaultAction&&this.editor.enable()})}getWorldFacesGeometry(){if(!this.boxMesh)return[];const e=this.applyObjectMatrixWorld(this.boxMesh.bottomPositions,this.boxMesh),t=this.applyObjectMatrixWorld(this.boxMesh.topPositions,this.boxMesh);if(!e||!t||e.length!==4||t.length!==4)return[];const n=[],o=(s,r)=>{const a=new yA(r[0],r[1],r[2]).getNormal(new R),l=qt(...r);n.push({name:s,vertices:r,center:l,normal:a})};o("bottom",[e[0],e[1],e[2],e[3]]),o("top",[t[0],t[1],t[2],t[3]]);for(let s=0;s<4;s++){const r=(s+1)%4;o(`side${s}`,[e[s],e[r],t[r],t[s]])}return n}}function W1(i,e,t){return ee(this,null,function*(){return new Promise((n,o)=>ee(this,null,function*(){const s=i.parent;if(!s){o(new Error("No container"));return}const r=new Al(i.style);s.add(r),yield Gd(r,e,t),s.remove(r),i.setPoints({points:r.points});const a=new Pi,l=Eo(i.bottomPositions),c=qt(...i.bottomPositions),h=c.clone().add(l.clone().multiplyScalar(100)),d=c.clone().sub(l.clone().multiplyScalar(100));a.setPoints([h,d]),s.add(a),e.enable();const u=v=>{m(),n()},f=v=>{if(!(v!=null&&v.raycaster))return;const A=ho({raycaster:v.raycaster,line:new Ht(h,d)});if(A){const w=A.clone().sub(c);i.setPoints({heightPoint:i.bottomPositions[0].clone().add(w)})}},m=()=>{e.off("select",u),e.off("intersectionUpdate",f),e.off("disable",g),e.disable(),s==null||s.remove(a)},g=()=>{m(),s==null||s.remove(i),o(new Error("Cancelled"))};e.on("select",u),e.on("intersectionUpdate",f),e.on("disable",g)}))})}function FS(i,e){for(let t=i.length-1;t>=0;t--)e(i[t])}class Sg extends Ji{constructor(e,t){super(e,t),p(this,"type","Line"),p(this,"lineMesh"),p(this,"_editor"),p(this,"creatingObject"),e&&(this.lineMesh=new Yr(W(W({},e.style),e)),this.add(this.lineMesh))}get editor(){return this._editor||(this._editor=new SS(this)),this._editor}get data(){return pe(W({},this.baseData),{points:ri(this.applyObjectMatrixWorld(this.lineMesh.points)),style:{lineColor:new Ye(this.lineMesh.color).getHex(),lineWidth:this.lineMesh.lineWidth,dashed:this.lineMesh.dashed}})}setData(e){e.points&&this.lineMesh.setPoints(e.points),this.lineMesh.setStyle(e.style)}highlight(){var e;(e=this.lineMesh)==null||e.highlight()}unhighlight(){var e;(e=this.lineMesh)==null||e.unhighlight()}canUndo(){var e;(e=this.creatingObject)==null||e.canUndo()}canRedo(){var e;(e=this.creatingObject)==null||e.canRedo()}undo(){var e;(e=this.creatingObject)==null||e.undo()}redo(){var e;(e=this.creatingObject)==null||e.redo()}create(e){return ee(this,null,function*(){this.removeChildren();const t=new Yr(e);this.lineMesh=t,this.add(this.lineMesh),this.creatingObject=G1(t,this.pointSelector,e),yield this.creatingObject.finished,this.config.defaultAction&&this.editor.enable()})}}function G1(i,e,t){var n;const o=i.parent;if(!o)return;const{promise:s,resolve:r,reject:a}=ns(),l=(n=t==null?void 0:t.limit)!=null?n:"none",c=new Pi(i.style);o.add(c);const h=new Pi(pe(W({},i.style),{dashed:!0,lengthEnable:!1}));o.add(h),e.enable();const d=[];let u,f,m;const g=[],v=()=>d.length>0,A=()=>g.length>0,w=()=>{v()&&(g.push(d.pop()),i.setPoints(d),j(m),e.pointSelectorHelper.magnifier.render())},P=()=>{A()&&(d.push(g.pop()),i.setPoints(d),j(m),e.pointSelectorHelper.magnifier.render())},I=M=>{if(!M)return;g.length=0;const O=d.length===0?M.point:u.clone();d.push(O),i.setPoints(d),d.length===2&&(D(),r())},j=M=>{const O=()=>{c.setPoints([]),h.setPoints([]),e.pointSelectorHelper.magnifier.render()};if(!(d!=null&&d.length)||!M)return O();m=M;const y=d.at(-1).clone();l==="none"?(u=M.point,c.setPoints([y,u])):l==="xoz"?(e.plane=f,f=f??new Nt().setFromNormalAndCoplanarPoint(new R(0,1,0),d[0]),u=f.projectPoint(M.point,new R),c.setPoints([y,u]),h.setPoints([u,M.point])):l==="y"&&(M.isVirtual?(u=ho({raycaster:M.raycaster,line:new Ht(d[0].clone(),new R(0,1,0).add(d[0])),clampToLine:!1}),h.setPoints([])):(u=new Ht(d[0].clone(),new R(0,1,0).add(d[0])).closestPointToPoint(M.point,!1,new R),h.setPoints([u,M.point])),c.setPoints([y,u]))},D=()=>{e.off("select",I),e.off("intersectionUpdate",j),e.off("disable",T),e.plane=null,e.disable(),o==null||o.remove(c,h)},T=()=>{D(),d.length!==2&&(o==null||o.remove(i)),a(new Error("Cancelled"))};return e.on("select",I),e.on("intersectionUpdate",j),e.on("disable",T),{finished:s,canUndo:v,canRedo:A,undo:w,redo:P}}const Er=class extends Mt{constructor(i,e,t){super(),p(this,"group"),p(this,"theme"),p(this,"config"),p(this,"five"),p(this,"creatingItem",null),p(this,"undo",()=>{var n;(n=this.creatingItem)==null||n.undo(),this.five.needsRender=!0}),p(this,"redo",()=>{var n;console.log("redo"),(n=this.creatingItem)==null||n.redo(),this.five.needsRender=!0}),this.five=i,this.theme=e,this.config=W({magnifier:{width:190,height:190,scale:2,dragEnabled:!0}},t),this.group=new mi,this.group.name="Sculpt",i.scene.add(this.group),Er.modules.init(i,this.config),mt("ctrl+z, command+z",this.undo),mt("ctrl+shift+z, command+shift+z",this.redo),Er.modules.fiveDomEvents.addEventListener(this.group,"click",({intersects:n,origDomEvent:o})=>{var s;const r=D1((s=n==null?void 0:n[0])==null?void 0:s.object,a=>a.isSculptObject);return r&&!r.editing?this.emit("click",o,r):!1}),window.__SCULPT_DEBUG__=this,window.__SCULPT_MODULES_DEBUG__=Er.modules}get data(){return{items:this.items.map(i=>{try{return i.data}catch(e){return console.error(e),null}}).filter(Be)}}get items(){return this.group.children}load(i,e){var t;this.clear();const n=(t=i==null?void 0:i.items)==null?void 0:t.map(o=>{var s;const r=pe(W({},o),{style:W(W({},(s=this.theme)==null?void 0:s[o.type.toLowerCase()]),o.style)});return o.type==="Point"?new wg(r,e):o.type==="line"?new Sg(r,e):o.type==="Polyline"?new bg(r,e):o.type==="Polygon"?new xg(r,e):o.type==="Prism"?new Cg(r,e):o.type==="Rectangle"?new Pg(r,e):o.type==="Circle"?new Eg(r,e):o.type==="Cylinder"?new Ig(r,e):o.type==="Box"?new Mg(r,e):null});this.group.add(...n),this.five.needsRender=!0}getItemById(i){return this.items.find(e=>e.uuid===i)}putObject(i){var e;this.group.add(i);const t=Er.modules.object3DHelper,n=t.addObject3DHelper(i);return(e=n==null?void 0:n.moveController)==null||e.moveByMouse(),t}createPoint(...i){return ee(this,null,function*(){var e,t;return Object.assign((e=i[0])!=null?e:{},(t=this.theme)==null?void 0:t.point,i[0]),this.createItem(wg,...i)})}createLine(...i){return ee(this,null,function*(){var e,t;return Object.assign((e=i[0])!=null?e:{},(t=this.theme)==null?void 0:t.line,i[0]),this.createItem(Sg,...i)})}createline(...i){return ee(this,null,function*(){this.createLine(...i)})}createPolyline(...i){return ee(this,null,function*(){var e,t;return Object.assign((e=i[0])!=null?e:{},(t=this.theme)==null?void 0:t.polyline,i[0]),this.createItem(bg,...i)})}createPolygon(...i){return ee(this,null,function*(){var e,t;return Object.assign((e=i[0])!=null?e:{},(t=this.theme)==null?void 0:t.polygon,i[0]),this.createItem(xg,...i)})}createPrism(...i){return ee(this,null,function*(){var e,t;return Object.assign((e=i[0])!=null?e:{},(t=this.theme)==null?void 0:t.prism,i[0]),this.createItem(Cg,...i)})}createRectangle(...i){return ee(this,null,function*(){var e,t;return Object.assign((e=i[0])!=null?e:{},(t=this.theme)==null?void 0:t.rectangle,i[0]),this.createItem(Pg,...i)})}createCircle(...i){return ee(this,null,function*(){var e,t;return Object.assign((e=i[0])!=null?e:{},(t=this.theme)==null?void 0:t.circle,i[0]),this.createItem(Eg,...i)})}createCylinder(...i){return ee(this,null,function*(){var e,t;return Object.assign((e=i[0])!=null?e:{},(t=this.theme)==null?void 0:t.cylinder,i[0]),this.createItem(Ig,...i)})}createBox(...i){return ee(this,null,function*(){var e,t;return Object.assign((e=i[0])!=null?e:{},(t=this.theme)==null?void 0:t.box,i[0]),this.createItem(Mg,...i)})}canUndo(){var i;return this.creatingItem?(i=this.creatingItem)==null?void 0:i.canUndo():!1}canRedo(){var i;return this.creatingItem?(i=this.creatingItem)==null?void 0:i.canRedo():!1}clear(){FS(this.items,i=>i.delete()),this.five.needsRender=!0}createItem(i,...e){return ee(this,null,function*(){this.creatingItem&&(this.creatingItem.stopCreating(),this.creatingItem=null);const t=new i;this.creatingItem=t,this.group.add(t);const{promise:n,resolve:o,reject:s}=ns();return yield t.create(...e).then((...r)=>(this.creatingItem=null,o(t),r)).catch(r=>{s(r),this.group.remove(t)}),n})}};let bt=Er;p(bt,"modules",S1);const mD=(i,e,t)=>{if(e&&typeof e=="object"&&("theme"in e||"config"in e)){const n=e;return new bt(i,n.theme,n.config)}return new bt(i,e,t)};function VS(i,...e){e.forEach(t=>{i.children.includes(t)||t&&i.add(t)})}class Ud extends Mt{constructor(e){var t,n;super(),p(this,"__renderer"),p(this,"__disposeRenderer"),p(this,"type"),p(this,"tag"),p(this,"rawData"),p(this,"model"),p(this,"visibles",[]),p(this,"five"),p(this,"group"),p(this,"fiveDomEvents"),p(this,"disposers",[]),this.five=e.five,this.model=e.model,this.group=e.group,this.type=e.type,this.rawData=e.rawData,this.fiveDomEvents=e.fiveDomEvents;const o=(n=(t=e.position)!=null?t:this.model.center)!=null?n:ts(this.model).getCenter(new R);this.tag=Yg(this.five,o,{wrapper:e.tagWrapper,disableOpacityTransition:this.type==="prism"}),this.tag.extraObjectsForIntersectCheck.push(this.group)}get container(){return this.tag.container}get state(){return{visible:this.model.visible,enabled:this.group.children.includes(this.model)}}show(){this.visibles[0]=!0,this.updateVisible(),this.emit("show")}hide(){this.visibles[0]=!1,this.updateVisible(),this.emit("hide")}enable(){VS(this.group,this.model),this.five.needsRender=!0,this.model.updateMatrixWorld(!0),this.tag.setTransformMatrix(this.model.matrixWorld),this.tag.enable();const e=this.onClick.bind(this);this.fiveDomEvents.removeEventListener(this.model,"click"),this.fiveDomEvents.addEventListener(this.model,"click",e,{skipPano:!0}),this.disposers.push(()=>{this.fiveDomEvents.removeEventListener(this.model,"click")}),this.updateVisible(),this.emit("enable")}disable(){this.group.remove(this.model),this.five.needsRender=!0,this.tag.disable(),this.disposers.forEach(e=>e()),this.disposers=[],this.emit("disable")}updateVisible(){this.visibles.some(e=>e===!1)?(this.tag.hide(),this.model.visible=!1):(this.tag.show(),this.model.visible=!0),this.five.needsRender=!0}onClick(){return this.emit("click",this)}}class Dg extends Ud{constructor(...e){super(...e),p(this,"hideTag",()=>{this.tag.hide()}),this.enable(),this.tag.hide(),this.updateVisible()}enable(){super.enable(),this.five.on("mode.change.request",this.hideTag),this.five.on("pano.request",this.hideTag)}disable(){super.disable(),this.five.needsRender=!0,this.five.off("mode.change.request",this.hideTag),this.five.off("pano.request",this.hideTag)}show(){super.show(),this.tag.hide()}updateVisible(){this.visibles.some(e=>e===!1)?(this.tag.hide(),this.model.visible=!1):this.model.visible=!0,this.five.needsRender=!0}onClick(){return this.tag.visible?this.tag.hide():this.tag.show({force:!0}),super.onClick(),!0}}function WS(i){Ee(i,"svelte-1q9fx3x",".model-maker-tag.svelte-1q9fx3x{position:absolute;width:-moz-max-content;width:max-content;left:50%;top:50%;transform:translate(-50%, -50%);color:#fff;font-size:0.875rem;font-weight:bold;text-shadow:0.125rem 0 0.5rem rgba(0, 0, 0, 0.15)}")}function kg(i){let e,t;return{c(){e=U("div"),t=Te(i[0]),b(e,"class","model-maker-tag svelte-1q9fx3x")},m(n,o){Y(n,e,o),H(e,t)},p(n,o){o&1&&Ne(t,n[0])},d(n){n&&Q(e)}}}function GS(i){let e,t=i[0]&&kg(i);return{c(){t&&t.c(),e=Oe()},m(n,o){t&&t.m(n,o),Y(n,e,o)},p(n,[o]){n[0]?t?t.p(n,o):(t=kg(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:oe,o:oe,d(n){t&&t.d(n),n&&Q(e)}}}function QS(i,e,t){let{text:n}=e;return i.$$set=o=>{"text"in o&&t(0,n=o.text)},[n]}class US extends ye{constructor(e){super(),Ae(this,e,QS,GS,ve,{text:0},WS)}}const zg=(i,e)=>{var t;const n=new US({target:i,props:{text:(t=e.rawData)==null?void 0:t.name}});return()=>n.$destroy()},XS=(i,e,t)=>{var n;let o=_s();const s=new M1({target:i,props:{content:(n=e.rawData)==null?void 0:n.name,five:t,fontSize:o}}),r=ca();let a=null;return typeof r=="object"&&"subscribe"in r&&(a=r.subscribe(l=>{o=l,s.$set({fontSize:o})})),()=>{a==null||a(),s.$destroy()}},YS={box:zg,triangles:zg,prism:XS};class zc extends Ud{constructor(...e){const t=e[0],n=ts(t.model),o=new R().lerpVectors(to(n,0),to(n,5),.5);super(pe(W({},t),{position:o})),p(this,"onModelShownFloorChange",s=>{this.updateFiveCurrentFloorState(s),this.updateVisible()}),p(this,"updateFiveCurrentFloorState",s=>{var r,a;const l=(a=(r=this.rawData)==null?void 0:r.object_data)==null?void 0:a.floorIndex;Oi(l)?this.visibles[1]=!0:this.visibles[1]=s===null?!0:l===s}),this.enable(),this.updateVisible(),this.five.on("modelShownFloorChange",this.onModelShownFloorChange),this.disposers.push(()=>{this.five.off("modelShownFloorChange",this.onModelShownFloorChange)})}show(){this.updateFiveCurrentFloorState(this.five.model.shownFloor),super.show()}hide(){super.hide()}}class jg extends Ud{constructor(...e){super(...e),p(this,"onPanoArrived",t=>{this.updatePanoIndex(t),this.updateVisible()}),p(this,"onModeChange",t=>{this.updateMode(t),this.updateVisible()}),p(this,"updatePanoIndex",t=>{var n,o;this.visibles[1]=((o=(n=this.rawData)==null?void 0:n.object_data)==null?void 0:o.panoIndex)===t}),p(this,"updateMode",t=>{this.visibles[2]=t==="Panorama"}),this.updatePanoIndex(this.five.state.panoIndex),this.updateMode(this.five.state.mode),this.enable(),this.updateVisible(),this.five.on("panoArrived",this.onPanoArrived),this.five.on("modeChange",this.onModeChange),this.disposers.push(()=>{this.five.off("panoArrived",this.onPanoArrived),this.five.off("modeChange",this.onModeChange)})}show(){this.updatePanoIndex(this.five.state.panoIndex),this.updateMode(this.five.state.mode),super.show()}}class qS extends Co{constructor(e,t){var n,o;super(e),p(this,"state"),p(this,"items",[]),p(this,"group",new Et),p(this,"data"),p(this,"tagRendererMap",{}),p(this,"fiveDomEvents"),p(this,"zFightingOffset",0),p(this,"tagWrapper"),p(this,"occlusionVisibility"),p(this,"occlusionMode"),p(this,"fiveEveryReadyListenerDisposer"),p(this,"originalOpacities",new Map),p(this,"originalTagOpacities",new Map),p(this,"onFiveModeChange",s=>{const r=this.occlusionVisibility;Array.isArray(r)&&[...this.getPrismItems(),...this.getBoxItems()].forEach(a=>{(a.model instanceof Uo||a.model instanceof gh)&&a.model.setStyle({occlusionVisibility:r.includes(s)})})}),p(this,"handleEnable",()=>{var s,r;this.five.scene.add(this.group),(r=(s=this.five.getElement())==null?void 0:s.parentElement)==null||r.appendChild(this.tagWrapper),this.five.needsRender=!0,this.onFiveModeChange(this.five.getCurrentState().mode),this.onFiveEveryReady(),this.five.on("modeChange",this.onFiveModeChange),this.fiveEveryReadyListenerDisposer=Sh(this.five,this.onFiveEveryReady)}),p(this,"handleDisable",()=>{this.five.scene.remove(this.group),this.tagWrapper.remove(),this.five.needsRender=!0,this.five.off("modeChange",this.onFiveModeChange),this.fiveEveryReadyListenerDisposer()}),p(this,"onFiveEveryReady",()=>ee(this,null,function*(){if(this.five.state.mode==="Panorama")return;const s=this.items.filter(d=>d instanceof zc).map(d=>d.tag),r=s.filter(d=>d.position&&d.visible&&d.enabled);yield w1(0);const a=this.five.camera.position.clone(),l=r.sort((d,u)=>a.distanceTo(d.position)-a.distanceTo(u.position)),c=[],h=(d,u)=>!(d.right<u.left||d.left>u.right||d.bottom<u.top||d.top>u.bottom);s.forEach(d=>{d.visibles[2]=void 0}),l.forEach(d=>{if(d.visibles[1]===!1)return;const u=d.container.getElementsByClassName("room-label-item__text")[0];if(!u)return;const f=u.getBoundingClientRect();c.every(m=>!h(m.boundingClientRect,f))?(c.push({tag:d,boundingClientRect:f}),d.visibles[2]=!0):d.visibles[2]=!1,d.needsRender=!0})})),p(this,"updateTagRenderer",()=>{this.items.forEach(s=>{var r;const a=(r=this.tagRendererMap[s.type])!=null?r:YS[s.type];a&&s.__renderer!==a&&(s.__renderer=a,typeof s.__disposeRenderer=="function"&&s.__disposeRenderer(),s.tag.container.innerHTML="",s.__disposeRenderer=a(s.tag.container,s,this.five))})}),this.group.name="ModelMakerPluginGroup",this.state={enabled:!0,visible:!0},this.occlusionVisibility=(n=t==null?void 0:t.occlusionVisibility)!=null?n:!1,this.occlusionMode=(o=t==null?void 0:t.occlusionMode)!=null?o:"translucence",this.fiveDomEvents=new Rs(e,{noEmitWhenHide:!0,noEmitWhenNotInScene:!0}),this.tagWrapper=(()=>{var s;const r=document.createElement("div");return r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.pointerEvents="none",r.style.zIndex=`${(s=t==null?void 0:t.tagContainerZIndex)!=null?s:""}`,r})(),e.scene.add(this.group),this.handleEnable(),window.__MODELMAKER_DEBUG__=this}load(e){return ee(this,null,function*(){if(this.clear(),this.data=e,this.originalOpacities.clear(),yield Ti(this.five),this.data!==e)return;this.clear();const t=n=>{var o;const s=n.object_data.color?new Ye().setHex(parseInt(n.object_data.color.slice(1),16)):new Ye(1,1,1);let r=typeof this.occlusionVisibility=="boolean"?this.occlusionVisibility:!1,a=this.occlusionMode;n.type==="triangles"&&(r=!0,a="depthTest");const l=((o=n.object_data.opacity)!=null?o:.4)/2;return n.id&&this.originalOpacities.set(n.id.toString(),{opacity:l,lineOpacity:1}),{color:s,lineColor:s,opacity:l,lineOpacity:1,lineWidth:1,occlusionVisibility:r,occlusionMode:a}};this.items=e.list.map(n=>{var o;switch(n.type){case"triangles":{const s=new gh;return Be(n.id)&&(s.uuid=n.id.toString()),s.setPoints(n.object_data.points,{checkLinesIntersect:!1}),s.setStyle(t(n)),this.fiveDomEvents.addEventListener(s,"hover",()=>s.highlight()),this.fiveDomEvents.addEventListener(s,"unHover",()=>s.unhighlight()),new jg({five:this.five,tagWrapper:this.tagWrapper,model:s,group:this.group,type:n.type,rawData:n,fiveDomEvents:this.fiveDomEvents})}case"prism":{const s=new Uo;Be(n.id)&&(s.uuid=n.id.toString()),this.zFightingOffset+=da.Z_FIGHTING_OFFSET;const r=n.object_data.points.map(c=>{var h;return[c[0],c[1]+((h=n.object_data.fixedY)!=null?h:0),c[2]]});r.push(r[0]);const a=n.object_data.height+((o=n.object_data.fixedHeight)!=null?o:0)+this.zFightingOffset,l=Ue(r[0]).add(new R().setY(a));return s.setPoints({points:r,heightPoint:l}),s.setStyle(t(n)),new zc({five:this.five,tagWrapper:this.tagWrapper,model:s,group:this.group,type:n.type,rawData:n,fiveDomEvents:this.fiveDomEvents})}case"box":{const s=new Uo({five:this.five});Be(n.id)&&(s.uuid=n.id.toString());const{start:r,end:a,rotation:l=[0,0,0,0]}=n.object_data,c=new R().fromArray(r),h=new R().fromArray(a),d=new ui().fromArray(l),u=new tt().setFromEuler(d),f=u.clone().inverse(),m=new R().lerpVectors(c,h,.5),g=m.clone().negate(),v=c.clone().add(g).applyQuaternion(f),A=h.clone().add(g).applyQuaternion(f),w=new Ch(v.clone().max(A),v.clone().min(A));return s.setPoints({points:[to(w,2),to(w,3),to(w,7),to(w,6)],heightPoint:to(w,1)}),s.position.copy(m),s.quaternion.copy(u),s.setStyle(t(n)),new Dg({five:this.five,tagWrapper:this.tagWrapper,model:s,group:this.group,type:n.type,rawData:n,fiveDomEvents:this.fiveDomEvents})}default:return null}}).filter(Boolean),this.state.enabled?this.handleEnable():this.handleDisable(),this.state.visible?this.handleShow():this.handleHide(),this.updateTagRenderer(),this.hooks.emit("dataLoaded",e),this.five.needsRender=!0})}setState(e){Be(e.enabled)&&this.state.enabled!==e.enabled&&(this.state.enabled=e.enabled,e.enabled?this.handleEnable():this.handleDisable(),this.hooks.emit(e.enabled?"enable":"disable",{userAction:"我不知道捏"}),this.hooks.emit("stateChange",{state:this.state,userAction:"我不知道捏"})),Be(e.visible)&&this.state.visible!==e.visible&&(this.state.visible=e.visible,e.visible?this.handleShow():this.handleHide(),this.hooks.emit(e.visible?"show":"hide",{userAction:"我不知道捏"}),this.hooks.emit("stateChange",{state:this.state,userAction:"我不知道捏"}))}getItemById(e){return this.items.find(t=>t.rawData.id===e)}registerTagRenderer(e){this.tagRendererMap=W(W({},this.tagRendererMap),e),this.updateTagRenderer()}hasCustomTagRenderer(e){return!!this.tagRendererMap[e]}forceFinishBoxAnimation(e){if(e){const t=this.getItemById(e);t&&t.type==="box"&&t.model.forceFinishBoxAnimation(e)}else this.items.filter(t=>t.type==="box").forEach(t=>{t.model.forceFinishBoxAnimation(t.rawData.id)});this.five.needsRender=!0}playBoxAnimation(e){this.forceFinishBoxAnimation();const t=e?[this.getItemById(e)].filter(Boolean):this.items.filter(o=>o.type==="box");if(t.length===0)return console.warn("No box items found to animate"),Promise.resolve();const n=t.map(o=>!o||o.type!=="box"?Promise.resolve():o.model.playBoxAnimation(o.rawData.id));return Promise.all(n).then(()=>{})}enable(){this.setState({enabled:!0})}disable(){this.setState({enabled:!1})}show(){this.setState({visible:!0})}hide(){this.setState({visible:!1})}clear(){this.zFightingOffset=0,this.handleDisable(),this.group.children.length=0,this.five.needsRender=!0,this.items=[],this.tagWrapper.innerHTML="",this.fiveDomEvents.clear(),this.originalOpacities.clear(),this.originalTagOpacities.clear()}setModelsOpacity(e,t){if(!this.state.enabled)return;const{type:n,id:o}=t||{},s=n?Array.isArray(n)?n:[n]:[],r=e===1;for(const a of this.items)if(!n||s.includes(a.type)||a.rawData.id===o){switch(a.type){case"box":case"prism":{this.setPrismModelOpacity(a.rawData.id,a.model,e);break}case"triangles":{this.setPolygonModelOpacity(a.rawData.id,a.model,e);break}}if(a.tag){if(!a.tag.visible)continue;const l=a.rawData.id.toString();if(r){const c=this.originalTagOpacities.get(l);c!==void 0&&(a.tag.container.style.opacity=c.toString())}else{if(!this.originalTagOpacities.has(l)){const h=parseFloat(a.tag.container.style.opacity)||1;this.originalTagOpacities.set(l,h)}const c=(this.originalTagOpacities.get(l)||1)*e;a.tag.container.style.opacity=c.toString()}(parseFloat(a.tag.container.style.opacity)||0)<.01?a.tag.container.style.pointerEvents="none":a.tag.container.style.pointerEvents="auto"}}this.five.needsRender=!0}hideItemsByType(e){const t=Array.isArray(e)?e:[e];this.items.forEach(n=>{t.includes(n.type)&&n.hide()})}showItemsByType(e){const t=Array.isArray(e)?e:[e];this.items.forEach(n=>{t.includes(n.type)&&n.show()})}dispose(){this.hooks.emit("dispose"),this.clear()}onWorkCodeChange(){this.group.matrix.copy(this.workUtil.transform.clone()),this.group.matrix.decompose(this.group.position,this.group.quaternion,this.group.scale),this.group.updateMatrixWorld()}setPrismModelOpacity(e,t,n){let{opacity:o,lineOpacity:s}=this.originalOpacities.get(e.toString())||{opacity:.2,lineOpacity:1};o=o*n,s=s*n,t.setStyle({opacity:o,lineOpacity:s})}setPolygonModelOpacity(e,t,n){let{opacity:o,lineOpacity:s}=this.originalOpacities.get(e.toString())||{opacity:.2,lineOpacity:1};o=o*n,s=s*n,t.setStyle({opacity:o,lineOpacity:s})}handleShow(){this.group.visible=!0,this.tagWrapper.style.display="block",this.five.needsRender=!0}handleHide(){this.group.visible=!1,this.tagWrapper.style.display="none",this.five.needsRender=!0}getPrismItems(){return this.items.filter(e=>e instanceof zc)}getPolygonItems(){return this.items.filter(e=>e instanceof jg)}getBoxItems(){return this.items.filter(e=>e instanceof Dg)}}const gD=(...i)=>new qS(...i),ZS=Object.freeze(Object.defineProperty({__proto__:null,BaseEditor:Xl,BoxMesh:yh,BoxMeshEditor:V1,CircleMesh:H1,CircleMeshEditor:R1,CircleWithEdgeMesh:_r,CylinderMesh:Ah,CylinderMeshEditor:N1,LineMesh:Pi,PointMesh:Rn,PolygonMesh:$s,PrismMesh:Uo,PrismMeshEditor:j1,RectangleMesh:Wd,RectangleMeshEditor:T1,RectangleWithEdgeMesh:Al,createBox:W1,createCircle:Qd,createCylinder:F1,createLine:G1,createPoint:z1,createPolygon:Vd,createPrism:L1,createRectangle:Gd},Symbol.toStringTag,{value:"Module"})),vD=Object.freeze(Object.defineProperty({__proto__:null,ANIME_PRESETS:M0,BetterTween:Yo,CURRENT_PANO_IMAGE_DEFAULT_IMAGE:Zh,DEFAULT_ANIME_CONFIG:Uh,DEFAULT_STATIC_PREFIX:kl,DNALOGEL_DEFAULT_ASSETS:Ob,ENTRY_DOOR_DEFAULT_IMAGE:Kh,FLOORPLAN_DEFAULT_IMAGE:Bs,FiveDomEvents:Rs,FivePuppet:Xb,GUIDELINE_DEFAULT_ARROW_TEXTURE:zl,GUIDELINE_WHITE_ARROW_TEXTURE:Yh,Interval:Rc,LegacyPointHelper:jb,LightTag:na,LineSegments:a0,MODEL_CHASSIS_COMPASS_DEFAULT_MODEL:R0,MODEL_ENTRY_DOOR_GUIDE_PLUGIN_DEFAULT_MODEL:B0,Magnifier:Dh,Object3D:r0,PANO_COMPASS_DEFAULT_IMAGE:Jh,PANO_SPATIAL_TAG_BLUR_IMAGE:O0,PANO_TAG_DEFAULT_LINK_ICON:qh,PointDomHelper:Ib,PointHelper:s0,PointSelector:Pl,PointSelectorHelper:Kg,Rectangle:FA,animeMap:Sn,awaitNextFrame:Hb,blink:Dl,blinkWithPreset:pb,bounding:Th,boundingBox:ts,boundingSphere:l0,boxVertex:to,boxVertexes:zy,checkFiveModelLoaded:Tb,cleanup:fb,convexHull:VA,equal:Yi,fiveModelIsLoaded:Zg,getCoordsFromClient:ZA,getCoordsFromElement:qg,getFrameTime:Nb,getIntersectFromRelativePosition:mb,getRaycasterFromFivePointer:gb,initialCSS3DRender:oa,inside:su,isModelLike:wi,isNil:Oi,isPanoramaLike:ao,lookObject:Lb,lookPoint:L0,nextFrame:_h,notNil:Be,pointInPolygon:su,reblink:k0,replaceStaticPrefix:lo,requestAnimationFrameInterval:aa,sculpt:ZS,tag:Yg,tweenProgress:Fr,uuid:Bt,waitFiveModelLoaded:Ti,worldBounding:El,worldBoundingBox:Hc,worldBoundingSphere:c0},Symbol.toStringTag,{value:"Module"}));zA();kA();export{sD as $,cD as A,gD as D,iD as F,uD as I,pD as M,Xh as O,dD as P,oD as Q,eD as S,tD as T,nD as U,Sr as a,$S as b,KS as c,vD as d,bt as f,_S as h,fD as k,rD as n,x1 as o,aD as u,lD as v,mD as x,hD as y};
